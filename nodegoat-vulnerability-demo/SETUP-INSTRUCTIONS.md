# NodeGoat RSOLV Demo - Setup Instructions

## Overview
This demonstrates the complete RSOLV workflow for automated security vulnerability detection and fixing using the forked NodeGoat repository.

## Repository
- **Fork**: https://github.com/arubis/nodegoat-rsolv-demo
- **Original**: https://github.com/OWASP/NodeGoat

## Setup Steps

### 1. Configure RSOLV API Key Secret

You need to add your RSOLV API key as a GitHub secret in the forked repository:

1. Go to: https://github.com/arubis/nodegoat-rsolv-demo/settings/secrets/actions
2. Click "New repository secret"
3. Name: `RSOLV_API_KEY`
4. Value: Your RSOLV API key (e.g., `rsolv_xud6j-kCuMwsQ371QNBkQvTi5gmfZQ98FPXbmNmhMio`)
5. Click "Add secret"

### 2. Trigger the Workflow

The workflow can be triggered in three ways:

#### Manual Trigger (Recommended for Demo)
1. Go to: https://github.com/arubis/nodegoat-rsolv-demo/actions
2. Click on "RSOLV Security Scan and Fix" workflow
3. Click "Run workflow" button
4. Select options:
   - **Branch**: master
   - **Operation mode**: full (default)
   - **Max issues**: 3 (default)
5. Click "Run workflow"

#### Automatic Triggers
- **Push to master**: Automatically runs on any push
- **Daily schedule**: Runs at 2 AM UTC

### 3. Monitor Progress

1. Go to the Actions tab to see the workflow running
2. Click on the running workflow to see real-time logs
3. The workflow will:
   - Phase 1: Scan for vulnerabilities
   - Phase 2: Validate with AST analysis
   - Phase 3: Exchange credentials and generate fixes
   - Create pull requests for each vulnerability

### 4. Review Pull Requests

Once complete, check the Pull Requests tab for:
- Individual PRs for each security vulnerability
- Educational descriptions explaining the vulnerability and fix
- Clean diffs showing minimal, in-place edits

## Expected Results

Based on our demo scan, RSOLV should detect and fix:
- 2 Hardcoded secrets (API keys in source code)
- 4 Code injection vulnerabilities (eval, Function constructor usage)

Each PR will:
- Target a specific vulnerability
- Make minimal in-place edits (no new files)
- Include security education in the description
- Be ready for review and merge

## Workflow Configuration

The workflow is configured with:
- **Git-based editing**: In-place file modifications (ADR-012)
- **AST validation**: Reduces false positives
- **Educational PRs**: Includes security explanations
- **Structured phases**: Ensures proper scan→validate→mitigate flow
- **Enhanced context**: Better understanding of code patterns

## Troubleshooting

If the workflow fails:
1. Check that the RSOLV_API_KEY secret is configured
2. Verify the API key is valid and has remaining credits
3. Check the workflow logs for specific error messages
4. Ensure the repository has proper permissions for creating PRs

## Demo Script

For local testing, use the included Python demo script:

```bash
cd nodegoat-vulnerability-demo
export RSOLV_API_KEY="your_api_key_here"
python demo-nodegoat-scan.py
```

This runs the same three-phase process locally and shows the API interactions.

## Security Notes

- The RSOLV API key is stored securely as a GitHub secret
- Temporary AI credentials are vended only for the duration of fix generation
- All code analysis happens in sandboxed environments
- No source code is permanently stored by RSOLV

## Support

For issues or questions:
- RSOLV Documentation: https://docs.rsolv.dev
- GitHub Issues: https://github.com/rsolv-dev/RSOLV-action/issues
- API Status: https://api.rsolv.dev/health